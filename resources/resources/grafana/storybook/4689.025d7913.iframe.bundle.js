"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[4689],{"../grafana-data/src/dataframe/processDataFrame.ts":function(tt,Fe,I){I.d(Fe,{KR:function(){return ze},dF:function(){return z},HW:function(){return L},ci:function(){return we},LI:function(){return Ne},ES:function(){return Te},Kl:function(){return He}});var K=I("../../node_modules/lodash/lodash.js"),J=I("../grafana-data/src/datetime/moment_wrapper.ts"),N=I("../grafana-data/src/types/dataFrame.ts");const ie=(a,d=!1)=>{const S=a.values;switch(a.type){case N.PU.number:return Se(S,d);case N.PU.string:return xe(S,d);case N.PU.boolean:return Le(S,d);case N.PU.time:return typeof a.values[0]=="number"?Me(S,d):Ie(S,d);default:return Ae(d)}},D=(a,d)=>{if(!a||!d)return re(a,d);if((0,K.isNumber)(a)&&(0,K.isNumber)(d))return me(a,d);if((0,J.u8)(a)&&(0,J.u8)(d)){if((0,J.KQ)(a).isBefore(d))return-1;if((0,J.KQ)(d).isBefore(a))return 1}return 0},me=(a,d)=>a-d,Ce=(a,d)=>!a||!d?re(a,d):a.localeCompare(d),Be=(a,d)=>re(a,d),re=(a,d)=>!a&&d?1:a&&!d?-1:0,Me=(a,d)=>{let S=d?-1:1;return(E,U)=>S*(a[E]-a[U])},Ie=(a,d)=>(S,E)=>{const U=a[S],G=a[E];return d?D(G,U):D(U,G)},Le=(a,d)=>(S,E)=>{const U=a[S],G=a[E];return d?Be(G,U):Be(U,G)},Se=(a,d)=>(S,E)=>{const U=a[S],G=a[E];return d?me(G,U):me(U,G)},xe=(a,d)=>(S,E)=>{const U=a[S],G=a[E];return d?Ce(G,U):Ce(U,G)},Ae=a=>(d,S)=>a?me(S,d):me(d,S);var Ue=Object.defineProperty,De=Object.defineProperties,R=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,ye=(a,d,S)=>d in a?Ue(a,d,{enumerable:!0,configurable:!0,writable:!0,value:S}):a[d]=S,le=(a,d)=>{for(var S in d||(d={}))b.call(d,S)&&ye(a,S,d[S]);if(ce)for(var S of ce(d))ne.call(d,S)&&ye(a,S,d[S]);return a},ae=(a,d)=>De(a,R(d)),he=(a,d)=>{var S={};for(var E in a)b.call(a,E)&&d.indexOf(E)<0&&(S[E]=a[E]);if(a!=null&&ce)for(var E of ce(a))d.indexOf(E)<0&&ne.call(a,E)&&(S[E]=a[E]);return S};function B(a){const d=a.columns.map(S=>{const E=S,{text:U,type:G}=E,q=he(E,["text","type"]),de=[];return{name:U?.length?U:S,config:q||{},values:de,type:G&&Object.values(FieldType).includes(G)?G:FieldType.other}});if(!isArray(a.rows))throw new Error(`Expected table rows to be array, got ${typeof a.rows}.`);for(const S of a.rows)for(let E=0;E<d.length;E++)d[E].values.push(S[E]);for(const S of d)if(S.type===FieldType.other){const E=z(S);E&&(S.type=E)}return{fields:d,refId:a.refId,meta:a.meta,name:a.name,length:a.rows.length}}function H(a){const d=[],S=[],E=a.datapoints||a.points;for(const G of E)S.push(G[0]),d.push(G[1]);const U=[{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{},values:d},{name:TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{unit:a.unit},values:S,labels:a.tags}];return a.title&&(U[1].config.displayNameFromDS=a.title),{name:a.target||a.name,refId:a.refId,meta:a.meta,fields:U,length:S.length}}function Y(a){const d=[],S=[];for(let E=0;E<a.data.length;E++){const U=a.data[E];d.push(U[1]),S.push(U[0])}return{name:a.label,fields:[{name:a.label||TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{},values:d},{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{unit:"dateTimeAsIso"},values:S}],length:d.length}}function $(a){const d=[{name:a.target,type:FieldType.other,labels:a.tags,config:{unit:a.unit,filterable:a.filterable},values:[]}];for(const S of a.datapoints)d[0].values.push(S);return{name:a.target,refId:a.target,meta:{json:!0},fields:d,length:a.datapoints.length}}const v=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function x(a,d){return a&&(a=a.toLowerCase(),a==="date"||a==="time")?FieldType.time:L(d)}function T(a){return a instanceof Date||isDateTime(a)?FieldType.time:isNumber(a)?FieldType.number:isString(a)?FieldType.string:isBoolean(a)?FieldType.boolean:FieldType.other}function L(a){return a instanceof Date||(0,J.Ar)(a)?N.PU.time:(0,K.isNumber)(a)?N.PU.number:(0,K.isString)(a)?v.test(a)?N.PU.number:a==="true"||a==="TRUE"||a==="True"||a==="false"||a==="FALSE"||a==="False"?N.PU.boolean:N.PU.string:(0,K.isBoolean)(a)?N.PU.boolean:N.PU.other}function z(a){if(a.name){const d=a.name.toLowerCase();if(d==="date"||d==="time")return N.PU.time}for(let d=0;d<a.values.length;d++){const S=a.values[d];if(S!=null)return L(S)}}const W=(a,d=!1)=>{for(const S of a.fields)if(!S.type||S.type===FieldType.other||d)return ae(le({},a),{fields:a.fields.map(E=>E.type&&E.type!==FieldType.other&&!d?E:ae(le({},E),{type:z(E)||FieldType.other}))});return a},_e=a=>!!(a&&a.hasOwnProperty("columns")),we=a=>!!(a&&a.hasOwnProperty("fields")),Ne=a=>!!(we(a)&&a.hasOwnProperty("value"));function Ve(a){var d,S;if("fields"in a)return"length"in a&&((S=(d=a.fields[0])==null?void 0:d.values)!=null&&S.get)?a:nt(a);if(a.hasOwnProperty("type")&&a.type==="docs")return $(a);if(a.hasOwnProperty("datapoints")||a.hasOwnProperty("points"))return H(a);if(a.hasOwnProperty("data"))return a.hasOwnProperty("schema")?dataFrameFromJSON(a):Y(a);if(a.hasOwnProperty("columns"))return B(a);if(Array.isArray(a))return arrayToDataFrame(a);throw console.warn("Can not convert",a),new Error("Unsupported data format")}const oe=a=>{const{fields:d}=a,S=a.length,E=[];if(d.length===2){const{timeField:U,timeIndex:G}=ze(a);if(U){const de=d[G===0?1:0],te=d[G];for(let Ee=0;Ee<S;Ee++)E.push([de.values[Ee],te.values[Ee]]);return{alias:a.name,target:getFieldDisplayName(de,a),datapoints:E,unit:d[0].config?d[0].config.unit:void 0,refId:a.refId,meta:a.meta}}}for(let U=0;U<S;U++){const G=[];for(let q=0;q<d.length;q++)G.push(d[q].values[U]);E.push(G)}return a.meta&&a.meta.json?{alias:d[0].name||a.name,target:d[0].name||a.name,datapoints:d[0].values,filterable:d[0].config?d[0].config.filterable:void 0,type:"docs"}:{columns:d.map(U=>{const{name:G,config:q}=U;if(q){const de=he(q,[]);return de.text=G,de}return{text:G}}),type:"table",refId:a.refId,meta:a.meta,rows:E}};function Te(a,d,S=!1){const E=a.fields[d];if(!E)return a;const U=[];for(let q=0;q<a.length;q++)U.push(q);const G=ie(E,S);return U.sort(G),ae(le({},a),{fields:a.fields.map(q=>{const de=ae(le({},q),{values:q.values.map((Ee,Ze)=>q.values[U[Ze]])}),{nanos:te}=q;return te!==void 0&&(de.nanos=te.map((Ee,Ze)=>te[U[Ze]])),de})})}function Ye(a){return ae(le({},a),{fields:a.fields.map(d=>{const S=[...d.values];S.reverse();const E=ae(le({},d),{values:S}),{nanos:U}=d;if(U!==void 0){const G=[...U];G.reverse(),E.nanos=G}return E})})}function $e(a,d){const S=[];for(const E of a.fields)S.push(E.values[d]);return S}function He(a){return Oe(a)}function Oe(a,d){return{fields:(d?a.fields.filter(d):a.fields).map(U=>{let G=U.values;return{name:U.name,type:U.type,config:U.config,values:G,labels:U.labels}}),refId:a.refId,meta:a.meta,name:a.name}}const ze=a=>{for(let d=0;d<a.fields.length;d++)if(a.fields[d].type===N.PU.time)return{timeField:a.fields[d],timeIndex:d};return{}};function rt(a){const d=W(Ve(a));if(d.fields&&d.fields.length)for(const S of d.fields)S.state=null;return d}function ct(a){return!a||!isArray(a)?[]:a.map(d=>rt(d))}function gt(a,d){const{series:S,annotations:E}=a;if(a.state===LoadingState.Loading&&S.length===0)return d||(d=a),ae(le({},d),{state:LoadingState.Loading,request:a.request});const U=performance.now(),G=S.map(te=>rt(te)),q=ct(E),de=performance.now();return ae(le({},a),{series:G,annotations:q,timings:{dataProcessingTime:de-U}})}function nt(a){let d=0;const S=a.fields.map((E,U)=>{var G;const q=E,{state:de}=q,te=he(q,["state"]);return te.name||(te.name=`Field ${U+1}`),te.config||(te.config={}),te.values?te.values.length>d&&(d=te.values.length):te.values=new Array(d),te.type||(te.type=(G=z(te))!=null?G:FieldType.other),te});return ae(le({},a),{fields:S,length:d})}},"../grafana-data/src/datetime/timezones.ts":function(tt,Fe,I){I.d(Fe,{HD:function(){return De},QZ:function(){return R},U3:function(){return b},g$:function(){return Ae},le:function(){return Ue}});var K=I("../../node_modules/lodash/lodash.js"),J=I.n(K),N=I("../../node_modules/moment-timezone/index.js"),ie=I.n(N),D=I("../grafana-data/src/datetime/common.ts"),me=Object.defineProperty,Ce=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Le=(B,H,Y)=>H in B?me(B,H,{enumerable:!0,configurable:!0,writable:!0,value:Y}):B[H]=Y,Se=(B,H)=>{for(var Y in H||(H={}))Me.call(H,Y)&&Le(B,Y,H[Y]);if(re)for(var Y of re(H))Ie.call(H,Y)&&Le(B,Y,H[Y]);return B},xe=(B,H)=>Ce(B,Be(H)),Ae=(B=>(B.default="",B.localBrowserTime="browser",B.utc="utc",B))(Ae||{});const Ue=B=>{switch((0,D.O)({timeZone:B})){case"browser":return"Local browser time";case"utc":return"UTC";default:return B}},De=B=>ie().tz.zone(B),R=(B,H)=>{const Y=ne(B,H);return Y||le(B,H)},ce=(0,K.memoize)((B=!1)=>{const H=[];return B===!0?H.push("","browser","utc"):B&&H.push(...B),ie().tz.names().reduce((Y,$)=>{const v=he[$];return!Array.isArray(v)||v.length===0||Y.push($),Y},H)}),b=(0,K.memoize)((B=!1)=>{const Y=ce(B).reduce(($,v)=>{var x,T;const L=v.indexOf("/");if(L===-1){const W="";return $[W]=(x=$[W])!=null?x:[],$[W].push(v),$}const z=v.slice(0,L);return $[z]=(T=$[z])!=null?T:[],$[z].push(v),$},{});return Object.keys(Y).map($=>({name:$,zones:Y[$]}))}),ne=(B,H)=>{var Y,$,v,x;switch(B){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:B,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const T=(0,D.O)(),z=T==="browser"||T==="utc"?ne(T,H):le(T,H);return xe(Se({countries:(Y=he[T])!=null?Y:[],abbreviation:"",offsetInMins:0},z),{ianaName:($=z?.ianaName)!=null?$:"",name:"Default",zone:B})}case"browser":{const T=ie().tz.guess(!0),L=le(T,H);return xe(Se({countries:(v=he[T])!=null?v:[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset()},L),{name:"Browser Time",ianaName:(x=L?.ianaName)!=null?x:"",zone:B})}default:return}},ye=B=>/^(\+|\-).+/.test(B)?"":B,le=(B,H)=>{var Y;const $=ie().tz.zone(B);if($)return{name:B,ianaName:$.name,zone:B,countries:(Y=he[B])!=null?Y:[],abbreviation:ye($.abbr(H)),offsetInMins:$.utcOffset(H)}},ae={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},he=(()=>ie().tz.countries().reduce((B,H)=>ie().tz.zonesForCountry(H).reduce(($,v)=>{$[v]||($[v]=[]);const x=ae[H];return x&&$[v].push({code:H,name:x}),$},B),{}))()},"../grafana-data/src/field/fieldState.ts":function(tt,Fe,I){I.d(Fe,{Ct:function(){return B}});var K=I("../grafana-data/src/types/dataFrame.ts"),J=Object.defineProperty,N=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,me=(v,x,T)=>x in v?J(v,x,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[x]=T,Ce=(v,x)=>{for(var T in x||(x={}))ie.call(x,T)&&me(v,T,x[T]);if(N)for(var T of N(x))D.call(x,T)&&me(v,T,x[T]);return v};const Be=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function re(v){const x={};return v.replace(Be,(T,L,z,W)=>(x[L]=W,"")),x}function Me(v){return v.reduce((x,T)=>{if(!T)throw new Error("Need parsed labels to find common labels.");return Object.keys(T).forEach(L=>{(x[L]===void 0||x[L]!==T[L])&&delete x[L]}),Object.keys(x).forEach(L=>{T[L]===void 0&&delete x[L]}),x},Ce({},v[0]))}function Ie(v,x){const T=Ce({},v);return Object.keys(x).forEach(L=>{delete T[L]}),T}function Le(v,x){if(!v)return!0;for(const[T,L]of Object.entries(v))if(!x||x[T]!==L)return!1;return!0}function Se(v,x="",T){if(!v||Object.keys(v).length===0)return x;const z=Object.keys(v).sort().map(W=>`${W}="${v[W]}"`).join(", ");return T?z:["{",z,"}"].join("")}var xe=Object.defineProperty,Ae=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,b=(v,x,T)=>x in v?xe(v,x,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[x]=T,ne=(v,x)=>{for(var T in x||(x={}))R.call(x,T)&&b(v,T,x[T]);if(De)for(var T of De(x))ce.call(x,T)&&b(v,T,x[T]);return v},ye=(v,x)=>Ae(v,Ue(x));function le(v,x){if(v.name)return v.name;const T=[];for(const L of v.fields)if(L.type!==FieldType.time){if(T.length>1)break;T.push(B(L,v))}return T.length===1?T[0]:x===void 0&&v.fields.length>0?v.fields.filter(L=>L.type!==FieldType.time).map(L=>B(L,v)).join(", "):v.refId?`Series (${v.refId})`:`Series (${x})`}function ae(v){v.forEach(x=>{x.fields.forEach(T=>{B(T,x,v)})})}function he(v,x){v.forEach(T=>{T.fields.forEach(L=>{var z,W;const _e=ne({legend:!1,tooltip:!1,viz:!1},(z=x.defaults.custom)==null?void 0:z.hideFrom),we=(W=L.config.custom)==null?void 0:W.hideFrom;x.overrides.forEach(Ne=>{if("__systemRef"in Ne)return;if(getFieldMatcher(Ne.matcher)(L,T,v))for(const oe of Ne.properties)oe.id==="custom.hideFrom"&&Object.assign(_e,oe.value)}),L.state=ye(ne({},L.state),{hideFrom:ne({},we)}),L.config.custom.hideFrom=_e})})}function B(v,x,T){var L,z;const W=(L=v.state)==null?void 0:L.displayName,_e=!!(T&&T.length>1);if(W&&_e===((z=v.state)==null?void 0:z.multipleFrames))return W;const we=H(v,x,T);return v.state=v.state||{},v.state.displayName=we,v.state.multipleFrames=_e,we}function H(v,x,T){var L,z,W,_e,we;const Ne=((L=v.config)==null?void 0:L.displayName)&&((z=v.config)==null?void 0:z.displayName.length),Ve=!!((_e=(W=x?.meta)==null?void 0:W.timeCompare)!=null&&_e.isTimeShiftQuery);let oe=Ne?v.config.displayName:v.name;if(Ne)return Ve?`${oe} (comparison)`:oe;if(x&&((we=v.config)!=null&&we.displayNameFromDS))return Ve?`${v.config.displayNameFromDS} (comparison)`:v.config.displayNameFromDS;if(v.type===K.PU.time&&!v.labels)return oe??K.LE;let Te=[],Ye=!1;if(T&&T.length>1){for(let Oe=1;Oe<T.length;Oe++)if(T[Oe].name!==T[Oe-1].name){Ye=!0;break}}let $e=!1,He=!1;if(Ye&&x?.name&&(Te.push(x.name),$e=!0),v.name&&v.name!==K.Bc&&Te.push(v.name),v.labels&&x){let Oe=$(T??[x]);if(Oe)v.labels[Oe]&&(Te.push(v.labels[Oe]),He=!0);else{let ze=Se(v.labels);ze&&(Te.push(ze),He=!0)}}return x&&!$e&&!He&&v.name===K.Bc&&x.name&&x.name.length>0&&(Te.push(x.name),$e=!0),Te.length?oe=Te.join(" "):v.name?oe=v.name:oe=K.Bc,oe===v.name&&(oe=Y(v,x)),Ve&&(oe=`${oe} (comparison)`),oe}function Y(v,x){let T=0,L=!1;if(x)for(let z=0;z<x.fields.length;z++){const W=x.fields[z];if(v===W){if(L=!0,T>0){T++;break}}else if(v.name===W.name&&(T++,L))break}return T?`${v.name} ${T}`:v.name}function $(v){let x=null;for(let T=0;T<v.length;T++){const L=v[T];for(const z of L.fields)if(z.labels){for(const W in z.labels)if(x===null)x=W;else if(W!==x)return null}}return x}},"../grafana-data/src/transformations/matchers.ts":function(tt,Fe,I){I.d(Fe,{sJ:function(){return Qe},RE:function(){return Xe},NS:function(){return qe},Dq:function(){return dt}});var K=I("../grafana-data/src/utils/Registry.ts"),J=I("../grafana-data/src/types/dataFrame.ts"),N=I("../grafana-data/src/transformations/matchers/ids.ts");const ie={id:N.Ct.byType,name:"Field Type",description:"match based on the field type",defaultOptions:J.PU.number,get:o=>(p,y,C)=>o===p.type,getOptionsDisplayText:o=>`Field type: ${o}`},D={id:N.Ct.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:o=>(p,y,C)=>o.has(p.type),getOptionsDisplayText:o=>`Field types: ${[...o].join(" | ")}`},me={id:N.Ct.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>ie.get(J.PU.number),getOptionsDisplayText:()=>"Numeric Fields"},Ce={id:N.Ct.time,name:"Time Fields",description:"Fields with type time",get:()=>ie.get(J.PU.time),getOptionsDisplayText:()=>"Time Fields"};function Be(){return[ie,D,me,Ce]}var re=I("../grafana-schema/src/common/common.gen.ts"),Me=I("../grafana-data/src/transformations/fieldReducer.ts");function Ie(o,p,y){switch((o==null||y==null)&&(o==null&&(o="null"),y==null&&(y="null"),(p===re.zT.GTE||p===re.zT.LTE)&&(p=re.zT.EQ)),p){case re.zT.EQ:return`${o}`==`${y}`;case re.zT.NEQ:return`${o}`!=`${y}`;case re.zT.GT:return o>y;case re.zT.GTE:return o>=y;case re.zT.LT:return o<y;case re.zT.LTE:return o<=y;default:return!1}}function Le(o){return o===Me.gy.allIsNull||o===Me.gy.allIsZero}const Se={id:N.Ct.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:Me.gy.allIsZero,op:re.zT.GTE,value:0},get:o=>{if(!o||!o.reducer)return()=>!1;let{reducer:p,op:y,value:C}=o;const Q=Le(p);return y||(y=re.zT.EQ),(se,fe,Re)=>{const be=(0,Me.Nw)({field:se,reducers:[p]})[p];return Q?!!be:Ie(be,y,C)}},getOptionsDisplayText:o=>`By value (${o.reducer})`};var xe=I("../grafana-data/src/field/fieldState.ts"),Ae=I("../grafana-data/src/text/string.ts"),Ue=(o=>(o.exclude="exclude",o.include="include",o))(Ue||{});const De={id:N.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:o=>{const y=ce(new Set([o]));return(C,Q,se)=>o===C.name||o===(0,xe.Ct)(C,Q,se)||!!(y&&y(C,Q,se))},getOptionsDisplayText:o=>`Field name: ${o}`},R={id:N.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:o=>{const{names:p,mode:y="include"}=o,C=new Set(p??[]),Q=ce(C),se=(fe,Re,be)=>C.has(fe.name)||C.has((0,xe.Ct)(fe,Re,be))||!!(Q&&Q(fe,Re,be));return y==="exclude"?(fe,Re,be)=>!se(fe,Re,be):se},getOptionsDisplayText:o=>{const{names:p,mode:y}=o,C=(p??[]).join(", ");return y==="exclude"?`All except: ${C}`:`All of: ${C}`}};function ce(o){var p,y,C;let Q;return((C=(y=(p=window?.grafanaBootData)==null?void 0:p.settings)==null?void 0:y.featureToggles)==null?void 0:C.dataplaneFrontendFallback)&&(o.has(J.Bc)?Q=(fe,Re)=>{var be;return!!fe.labels&&((be=fe.labels)==null?void 0:be.__name__)===fe.name}:(o.has("Time")||o.has("time"))&&(Q=(fe,Re)=>{var be;return((be=Re.meta)==null?void 0:be.typeVersion)==null&&fe.type===J.PU.time})),Q}const b={id:N.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:o=>{const p=le(o);return(y,C,Q)=>{const se=(0,xe.Ct)(y,C,Q);return!!p&&p.test(se)}},getOptionsDisplayText:o=>`Field name by pattern: ${o}`},ne={id:N.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:o=>(p,y,C)=>y.refId===o,getOptionsDisplayText:o=>`Math all fields returned by query with reference ID: ${o}`},ye={id:N.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:o=>{var p;const y=b.get(o?.pattern||""),C=R.get({mode:"include",names:(p=o?.names)!=null?p:[]});return(Q,se,fe)=>C(Q,se,fe)||y(Q,se,fe)},getOptionsDisplayText:o=>{var p,y,C;const Q=(p=o?.pattern)!=null?p:"",se=(C=(y=o?.names)==null?void 0:y.join(","))!=null?C:"";return`Field name by pattern: ${Q} or names: ${se}`}},le=o=>{if(o)try{return(0,Ae.dO)(o)}catch(p){console.error(p);return}},ae={id:N.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:o=>{const p=(0,Ae.dO)(o);return y=>p.test(y.name||"")},getOptionsDisplayText:o=>`Frame name: ${o}`};function he(){return[De,b,R,ye,ne]}function B(){return[ae]}const H={id:N.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const p=o.map(y=>qe(y));return(y,C,Q)=>{for(const se of p)if(se(y,C,Q))return!0;return!1}},getOptionsDisplayText:o=>{let p="";for(const y of o){p.length>0&&(p+=" OR ");const C=Qe.get(y.id);p+=C.getOptionsDisplayText?C.getOptionsDisplayText(y):C.name}return p}},Y={id:N.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const p=o.map(y=>dt(y));return y=>{for(const C of p)if(C(y))return!0;return!1}},getOptionsDisplayText:o=>{let p="";for(const y of o){p.length>0&&(p+=" OR ");const C=Xe.get(y.id);p+=C.getOptionsDisplayText?C.getOptionsDisplayText(y):C.name}return p}},$={id:N.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const p=o.map(y=>qe(y));return(y,C,Q)=>{for(const se of p)if(!se(y,C,Q))return!1;return!0}},getOptionsDisplayText:o=>{let p="";for(const y of o){p.length>0&&(p+=" AND ");const C=Qe.get(y.id);p+=C.getOptionsDisplayText?C.getOptionsDisplayText(y):C.name}return p}},v={id:N.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const p=o.map(y=>dt(y));return y=>{for(const C of p)if(!C(y))return!1;return!0}},getOptionsDisplayText:o=>{let p="";for(const y of o){p.length>0&&(p+=" AND ");const C=Xe.get(y.id);p+=C.getOptionsDisplayText?C.getOptionsDisplayText(y):C.name}return p}},x={id:N.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const p=qe(o);return(y,C,Q)=>!p(y,C,Q)},getOptionsDisplayText:o=>{const p=Qe.get(o.id);return"NOT "+(p.getOptionsDisplayText?p.getOptionsDisplayText(o.options):p.name)}},T={id:N.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const p=dt(o);return y=>!p(y)},getOptionsDisplayText:o=>{const p=Xe.get(o.id);return"NOT "+(p.getOptionsDisplayText?p.getOptionsDisplayText(o.options):p.name)}},L=o=>!0,z=o=>!0,W=o=>!1,_e=o=>o.type!==FieldType.time,we=o=>!1,Ne={id:N.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:o=>L,getOptionsDisplayText:o=>"Always"},Ve={id:N.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:o=>z,getOptionsDisplayText:o=>"Always"},oe={id:N.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:o=>W,getOptionsDisplayText:o=>"Never"},Te={id:N.cV.neverMatch,name:"No Frames",description:"Never Match",get:o=>we,getOptionsDisplayText:o=>"Never"};function Ye(){return[H,$,x,Ne,oe]}function $e(){return[Y,v,T,Ve,Te]}const He={id:N.jR.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:o=>{const p=(0,Ae.dO)(o);return y=>p.test(y.refId||"")},getOptionsDisplayText:o=>`RefID: ${o}`};function Oe(){return[He]}const ze={id:N.Ct.first,name:"First Field",description:"The first field in the frame",get:o=>(p,y,C)=>p===y.fields[0],getOptionsDisplayText:()=>"First field"},rt={id:N.Ct.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:o=>(p,y,C)=>p.type===J.PU.time&&p===y.fields.find(Q=>Q.type===J.PU.time),getOptionsDisplayText:()=>"First time field"};function ct(){return[ze,rt]}const gt={id:N.Js.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:o=>(p,y)=>y.values[p]==o.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},nt={id:N.Js.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:o=>(p,y)=>y.values[p]!=o.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},a=()=>[gt,nt],d={id:N.Js.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(o,p)=>p.values[o]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},S={id:N.Js.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(o,p)=>p.values[o]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},E=()=>[d,S],U={id:N.Js.greater,name:"Is greater",description:"Match when field value is greater than option.",get:o=>(p,y)=>{const C=y.values[p];return isNaN(C)?!1:C>o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},G={id:N.Js.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:o=>(p,y)=>{const C=y.values[p];return isNaN(C)?!1:C>=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than or equal to: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},q={id:N.Js.lower,name:"Is lower",description:"Match when field value is lower than option.",get:o=>(p,y)=>{const C=y.values[p];return isNaN(C)?!1:C<o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},de={id:N.Js.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:o=>(p,y)=>{const C=y.values[p];return isNaN(C)?!1:C<=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower or equal than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},te=()=>[U,G,q,de],Ee={id:N.Js.between,name:"Is between",description:"Match when field value is between given option values.",get:o=>(p,y)=>{const C=y.values[p];return isNaN(C)?!1:C>o.from&&C<o.to},getOptionsDisplayText:o=>`Matches all rows where field value is between ${o.from} and ${o.to}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({from:0,to:100})},Ze=()=>[Ee],wt={id:N.Js.regex,name:"Regex",description:"Match when field value is matching regex.",get:o=>{const p=new RegExp(o.value);return(y,C)=>{const Q=C.values[y];return p.test(Q)}},getOptionsDisplayText:o=>`Matches all rows where field value is matching regex: ${o.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},Ft=()=>[wt],Rt={id:N.Js.substring,name:"Contains substring",description:"Match where value for given field is a substring to options value.",get:o=>(p,y)=>{const C=y.values[p];return C&&C.includes(o.value)||o.value===""},getOptionsDisplayText:()=>"Matches all rows where field is similar to the value.",isApplicable:o=>o.type===J.PU.string,getDefaultOptions:()=>({value:""})},it={id:N.Js.notSubstring,name:"Does not contain substring",description:"Match where value for given field is not a substring to options value.",get:o=>(p,y)=>{const C=y.values[p];return typeof C=="string"&&o.value!==""&&!C.includes(o.value)},getOptionsDisplayText:()=>"Matches all rows where field is not similar to the value.",isApplicable:o=>o.type===J.PU.string,getDefaultOptions:()=>({value:""})},Mt=()=>[Rt,it],Qe=new K.O(()=>[...Ye(),...Be(),...he(),...ct(),Se]),Xe=new K.O(()=>[...$e(),...B(),...Oe()]),vt=new K.O(()=>[...E(),...te(),...a(),...Mt(),...Ze(),...Ft()]);function qe(o){const p=Qe.get(o.id);if(!p)throw new Error("Unknown field matcher: "+o.id);return p.get(o.options)}function dt(o){const p=Xe.get(o.id);if(!p)throw new Error("Unknown frame matcher: "+o.id);return p.get(o.options)}function jt(o){const p=vt.get(o.id);if(!p)throw new Error("Unknown value matcher: "+o.id);return p.get(o.options)}},"../grafana-data/src/transformations/matchers/ids.ts":function(tt,Fe,I){I.d(Fe,{Ct:function(){return J},Js:function(){return ie},cV:function(){return K},jR:function(){return N}});var K=(D=>(D.anyMatch="anyMatch",D.allMatch="allMatch",D.invertMatch="invertMatch",D.alwaysMatch="alwaysMatch",D.neverMatch="neverMatch",D))(K||{}),J=(D=>(D.numeric="numeric",D.time="time",D.first="first",D.firstTimeField="firstTimeField",D.byType="byType",D.byTypes="byTypes",D.byName="byName",D.byNames="byNames",D.byRegexp="byRegexp",D.byRegexpOrNames="byRegexpOrNames",D.byFrameRefID="byFrameRefID",D.byValue="byValue",D))(J||{}),N=(D=>(D.byName="byName",D.byRefId="byRefId",D.byIndex="byIndex",D))(N||{}),ie=(D=>(D.regex="regex",D.isNull="isNull",D.isNotNull="isNotNull",D.greater="greater",D.greaterOrEqual="greaterOrEqual",D.lower="lower",D.lowerOrEqual="lowerOrEqual",D.equal="equal",D.notEqual="notEqual",D.substring="substring",D.notSubstring="notSubstring",D.between="between",D))(ie||{})},"./src/components/Sparkline/Sparkline.tsx":function(tt,Fe,I){I.d(Fe,{O:function(){return xt}});var K=I("../../node_modules/lodash/lodash.js"),J=I("../../node_modules/react/index.js"),N=Object.defineProperty,ie=Object.defineProperties,D=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,re=(t,e,r)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Me=(t,e)=>{for(var r in e||(e={}))Ce.call(e,r)&&re(t,r,e[r]);if(me)for(var r of me(e))Be.call(e,r)&&re(t,r,e[r]);return t},Ie=(t,e)=>ie(t,D(e));function Le(t){return Ie(Me({},t),{fields:t.fields.map(e=>{const r=Number(e.config.noValue);return Number.isNaN(r)?e:Se(e,r)})})}function Se(t,e){const r=t.values.slice();for(let n=0;n<r.length;n++)r[n]===null&&(r[n]=e);return Ie(Me({},t),{values:r})}function xe(t,e,r){var n,i;if(t===e)return!0;if(((n=t?.fields)==null?void 0:n.length)!==((i=e?.fields)==null?void 0:i.length)||t.name!==e.name)return!1;for(let l=0;l<t.fields.length;l++){const s=t.fields[l],u=e.fields[l];if(s.type!==u.type||s.name!==u.name)return!1;if(r)continue;if(s.labels&&u.labels&&!De(s.labels,u.labels))return!1;const c=s.config,f=u.config;let w=Object.keys(c),P=Object.keys(f);if(w.length!==P.length)return!1;for(const h of w){if(!(h in f))return!1;if(h!=="interval"&&!(0,K.isEqual)(c[h],f[h]))return!1}}return!0}function Ae(t,e,r){if(t===e)return!0;if(t?.length!==e?.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}const Ue=(t,e)=>t===e;function De(t,e,r=Ue){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let l of n)if(!r(t[l],e[l]))return!1;return!0}var R=I("../grafana-data/src/types/dataFrame.ts"),ce=I("../grafana-data/src/field/fieldColor.ts"),b=I("../grafana-schema/src/common/common.gen.ts"),ne=I("../../node_modules/uplot/dist/uPlot.esm.js"),ye=I("../../node_modules/rxjs/dist/esm5/internal/operators/map.js"),le=I("../grafana-data/src/datetime/parser.ts"),ae=I("../grafana-data/src/transformations/matchers.ts"),he=I("../grafana-data/src/transformations/matchers/ids.ts"),B=(t=>(t.append="append",t.reduce="reduce",t.order="order",t.organize="organize",t.rename="rename",t.calculateField="calculateField",t.seriesToColumns="seriesToColumns",t.seriesToRows="seriesToRows",t.merge="merge",t.concatenate="concatenate",t.labelsToFields="labelsToFields",t.filterFields="filterFields",t.filterFieldsByName="filterFieldsByName",t.filterFrames="filterFrames",t.filterByRefId="filterByRefId",t.renameByRegex="renameByRegex",t.filterByValue="filterByValue",t.noop="noop",t.ensureColumns="ensureColumns",t.groupBy="groupBy",t.sortBy="sortBy",t.histogram="histogram",t.configFromData="configFromData",t.rowsToFields="rowsToFields",t.prepareTimeSeries="prepareTimeSeries",t.convertFieldType="convertFieldType",t.fieldLookup="fieldLookup",t.heatmap="heatmap",t.spatial="spatial",t.joinByField="joinByField",t.joinByLabels="joinByLabels",t.extractFields="extractFields",t.groupingToMatrix="groupingToMatrix",t.limit="limit",t.partitionByValues="partitionByValues",t.timeSeriesTable="timeSeriesTable",t.formatTime="formatTime",t.formatString="formatString",t.regression="regression",t.groupToNestedTable="groupToNestedTable",t))(B||{}),H=Object.defineProperty,Y=Object.defineProperties,$=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,L=(t,e,r)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z=(t,e)=>{for(var r in e||(e={}))x.call(e,r)&&L(t,r,e[r]);if(v)for(var r of v(e))T.call(e,r)&&L(t,r,e[r]);return t},W=(t,e)=>Y(t,$(e));const _e={id:B.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(t,e)=>r=>r.pipe((0,ye.T)(n=>_e.transformer(t,e)(n))),transformer:t=>e=>{var r;return!Array.isArray(e)||e.length===0?e:(r=we(t,e))!=null?r:[]}};function we(t,e){if(!t.conversions.length)return e;const r=e.map(n=>z({},n));for(const n of t.conversions){if(!n.targetField)continue;const i=ae.sJ.get(he.Ct.byName).get(n.targetField);for(const l of r)l.fields=l.fields.map(s=>i(s,l,r)?Ne(s,n):s)}return r}function Ne(t,e){switch(e.destinationType){case R.PU.time:return Oe(t,e.dateFormat);case R.PU.number:return Te(t);case R.PU.string:return $e(t,e.dateFormat,{timeZone:e.timezone},e.joinWith);case R.PU.boolean:return Ye(t);case R.PU.enum:return ze(t,e.enumConfig);case R.PU.other:return He(t);default:return t}}const Ve=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function oe(t,e){let r=e?{format:e}:void 0;const n=t.values.slice();let i=n.find(s=>s!=null),l=typeof i=="string"&&Ve.test(i);for(let s=0;s<n.length;s++)if(n[s]){let u=l?Date.parse(n[s]):(0,le.b)(n[s],r).valueOf();n[s]=Number.isFinite(u)?u:null}else n[s]=null;return W(z({},t),{type:R.PU.time,values:n})}function Te(t){const e=t.values.slice(),r=e.some(n=>typeof n=="string");for(let n=0;n<e.length;n++){let i=e[n];r&&i!=null&&typeof i=="string"&&(i=i.replace(/,/g,""));const l=+i;e[n]=Number.isFinite(l)?l:null}return W(z({},t),{type:R.PU.number,values:e})}function Ye(t){const e=t.values.slice();for(let r=0;r<e.length;r++)e[r]=!!e[r];return W(z({},t),{type:R.PU.boolean,values:e})}function $e(t,e,r,n){let i=t.values;switch(t.type){case R.PU.time:i=i.map(l=>(0,le.b)(l,r).format(e));break;case R.PU.other:i=i.map(l=>n?.length&&Array.isArray(l)?l.join(n):JSON.stringify(l));break;default:i=i.map(l=>`${l}`)}return W(z({},t),{type:R.PU.string,values:i})}function He(t){const e=t.values.slice();for(let r=0;r<e.length;r++)try{e[r]=JSON.parse(e[r])}catch{e[r]=null}return W(z({},t),{type:R.PU.other,values:e})}function Oe(t,e){const r=typeof t.values[0]=="number";return t.type===R.PU.time&&r?t:r?W(z({},t),{type:R.PU.time}):oe(t,e)}function ze(t,e){const r=z({},e),n=t.values.slice(),i=new Map;if(r.text&&r.text.length>0)for(let l=0;l<r.text.length;l++)i.set(r.text[l],l);else return t;for(let l=0;l<n.length;l++){const s=n[l];n[l]=i.get(s)}return W(z({},t),{config:W(z({},t.config),{type:{enum:r}}),type:R.PU.enum,values:n})}var rt=Object.defineProperty,ct=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,S=(t,e,r)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,E=(t,e)=>{for(var r in e||(e={}))a.call(e,r)&&S(t,r,e[r]);if(nt)for(var r of nt(e))d.call(e,r)&&S(t,r,e[r]);return t},U=(t,e)=>ct(t,gt(e));function G(t,e,r){var n}const q=(0,K.throttle)((...t)=>{console.log(...t)},500),de=t=>{let e=!1;return typeof window<"u"&&(e=window.localStorage.getItem("grafana.debug")==="true"),{logger:(r,n=!1,...i)=>{},enable:()=>e=!0,disable:()=>e=!1,isEnabled:()=>e}},te="__fixed";class Ee{constructor(e){this.props=e}}function Ze(t,e){var r,n,i,l,s,u,c;const f="na",w=`${t.min!==void 0?t.min:f}-${t.max!==void 0?t.max:f}`,P=`${((r=t.custom)==null?void 0:r.axisSoftMin)!==void 0?t.custom.axisSoftMin:f}-${((n=t.custom)==null?void 0:n.axisSoftMax)!==void 0?t.custom.axisSoftMax:f}`,h=`${((i=t.custom)==null?void 0:i.axisPlacement)!==void 0?(l=t.custom)==null?void 0:l.axisPlacement:b.vM.Auto}`,m=(s=t.unit)!=null?s:te,g=(u=t.custom)!=null&&u.scaleDistribution?wt(t.custom.scaleDistribution):b.L4.Linear,M=(c=t.custom)!=null&&c.axisLabel?t.custom.axisLabel:f;return`${m}/${w}/${P}/${h}/${g}/${M}/${e}`}function wt(t){return t.type===b.L4.Log?`${t.type}${t.log}`:t.type}const Ft=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function Rt(t){return t.replace(Ft,e=>`{${e}}`)}const it=(t,e,r)=>{let n=e%2?r[0]||r[2]:r[1]||r[3];return r[e]||!n?0:8},Mt={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[it,it,it,it],series:[],hooks:{}};var Qe=(t=>(t[t.Pos=1]="Pos",t[t.Neg=-1]="Neg",t))(Qe||{});function Xe(t){let e=[],{series:r,dir:n}=t,i=r.length-1,l=r.slice().reverse();return l.forEach((s,u)=>{if(u!==i){let c=l[u+1];e.push({series:[s,c],dir:-1*n})}}),e}function vt(t){let e=new Map;return t.fields.forEach(({config:r,values:n,type:i},l)=>{var s;if(l===0)return;let{custom:u}=r;if(u==null||(s=u.hideFrom)!=null&&s.viz)return;let{stacking:c}=u;if(c==null)return;let{mode:f,group:w}=c;if(f===b.gs.None)return;let P=u.transform,h=jt(P,n),m=u.drawStyle,g=m===b.GR.Bars?u.barAlignment:m===b.GR.Line?u.lineInterpolation:null,M=`${h}|${f}|${w}|${Ze(r,i)}|${m}|${g}`,F=e.get(M);F==null&&(F={series:[],dir:h},e.set(M,F)),F.series.push(l)}),[...e.values()]}function qe(t,e,r){let n=Array(t.fields.length),i=e.length,l=t.length,s=i>0?Array(l).fill(0):[],u=i>0?Array(l).fill(!1):[],c=Array.from({length:i},()=>s.slice()),f=Array.from({length:i},()=>u.slice());if(e.forEach((w,P)=>{let h=f[P];w.series.forEach(m=>{var g,M;let F=t.fields[m];if((M=(g=F.config.custom)==null?void 0:g.hideFrom)!=null&&M.viz)return;let O=F.values;for(let A=0;A<l;A++)O[A]!=null&&(h[A]=!0)})}),t.fields.forEach((w,P)=>{var h,m;let g=w.values;if(P===0){w.type===R.PU.time?n[P]=Oe(w).values:n[P]=g;return}let{custom:M}=w.config;if(!M||(h=M.hideFrom)!=null&&h.viz){n[P]=g;return}if(M.transform===b.NU.Constant){let O=g.findIndex(_=>_!=null),A=g[O];g=Array(g.length).fill(void 0),g[O]=A}else if(g=g.slice(),M.transform===b.NU.NegativeY)for(let O=0;O<g.length;O++)g[O]!=null&&(g[O]*=-1);let F=(m=M.stacking)==null?void 0:m.mode;if(!F||F===b.gs.None)n[P]=g;else{let O=e.findIndex(j=>j.series.indexOf(P)>-1),A=c[O],_=f[O],V=n[P]=Array(l);for(let j=0;j<l;j++){let k=g[j];k!=null?V[j]=A[j]+=k:V[j]=_[j]?A[j]:k}}}),r){let w=n.map((P,h)=>{let m=e.findIndex(g=>g.series.indexOf(h)>-1);return m!==-1?c[m]:P});r({totals:w})}return t.fields.forEach((w,P)=>{var h,m,g,M;if(P===0||(m=(h=w.config.custom)==null?void 0:h.hideFrom)!=null&&m.viz)return;if(((M=(g=w.config.custom)==null?void 0:g.stacking)==null?void 0:M.mode)===b.gs.Percent){let O=e.findIndex(j=>j.series.indexOf(P)>-1),A=c[O],_=e[O],V=n[P];for(let j=0;j<l;j++){let k=V[j];k!=null&&(V[j]=A[j]===0?0:_.dir*(k/A[j]))}}}),n}function dt(t,e){let r,n=1,i=1,l=t.data[1][e],s=t.data[1][e];for(let u=1;u<t.data.length;u++){const f=t.data[u][e];f!=null&&(l==null?l=f:f>l&&(l=t.data[u][e],n=u),s==null?s=f:f<s&&(s=t.data[u][e],i=u))}return s==null&&l==null?r=void 0:s!=null&&l!=null?r=(t.valToPos(s,t.series[i].scale)+t.valToPos(l,t.series[n].scale))/2:r=t.valToPos(s||l,t.series[n||i].scale),r!==void 0&&r<0&&(r=t.bbox.height/devicePixelRatio),r}function jt(t,e){const r=o(e);return t===b.NU.NegativeY?r?1:-1:r?-1:1}function o(t,e=100){const r=t.length;if(r===0)return!1;let n=0,i=r-1;for(;n<=i&&t[n]==null;)n++;for(;i>=n&&t[i]==null;)i--;let l=0,s=0;if(i>=n){const u=Math.max(1,Math.floor((i-n+1)/e));for(let c=n;c<=i;c+=u){const f=t[c];f!=null&&typeof f=="number"&&(f<0||Object.is(f,-0)?l++:f>0&&s++)}if(l>s)return!0}return!1}const p=de("uPlot"),y=p.logger;G("graphng",void 0,p);var C=Object.defineProperty,Q=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,Re=(t,e,r)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,be=(t,e)=>{for(var r in e||(e={}))se.call(e,r)&&Re(t,r,e[r]);if(Q)for(var r of Q(e))fe.call(e,r)&&Re(t,r,e[r]);return t};function Tr(t,e){return e.width===t.width&&e.height===t.height}function Cr(t,e){return e.data===t.data}function Ar(t,e){return e.config===t.config}class yt extends J.Component{constructor(e){super(e),this.plotContainer=(0,J.createRef)(),this.plotCanvasBBox=(0,J.createRef)(),this.state={plot:null}}reinitPlot(){var e;let{width:r,height:n,plotRef:i}=this.props;if((e=this.state.plot)==null||e.destroy(),r===0&&n===0)return;this.props.config.addHook("setSize",u=>{u.over});const l=be({width:Math.floor(this.props.width),height:Math.floor(this.props.height)},this.props.config.getConfig());y("UPlot",!1,"Reinitializing plot",l);const s=new ne.A(l,this.props.data,this.plotContainer.current);i&&i(s),this.setState({plot:s})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;(e=this.state.plot)==null||e.destroy()}componentDidUpdate(e){let{plot:r}=this.state;Tr(e,this.props)?Ar(e,this.props)?Cr(e,this.props)||r?.setData(this.props.data):this.reinitPlot():r?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return J.createElement("div",{style:{position:"relative"}},J.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}try{yt.displayName="UPlotChart",yt.__docgenInfo={description:"",displayName:"UPlotChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AlignedData | [_: null, ...series: FacetValues[]]"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"UPlotConfigBuilder"}},plotRef:{defaultValue:null,description:"",name:"plotRef",required:!1,type:{name:"((u: uPlot) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/uPlot/Plot.tsx#UPlotChart"]={docgenInfo:yt.__docgenInfo,name:"UPlotChart",path:"src/components/uPlot/Plot.tsx#UPlotChart"})}catch{}var _r=I("../grafana-data/src/types/time.ts"),Nr=I("../grafana-data/src/datetime/timezones.ts"),kt=I("../grafana-data/src/valueFormats/valueFormats.ts"),Er=Math.pow;function Vt(t,e=0){if(Number.isInteger(t))return t;let r=Er(10,e),n=t*r*(1+Number.EPSILON);return Math.round(n)/r}function Br(t){return((""+t).split(".")[1]||"").length}var We=I("../grafana-data/src/datetime/formats.ts"),Ir=I("../grafana-data/src/datetime/formatter.ts"),ft=I("./src/utils/measureText.ts"),zt=I("../grafana-data/src/field/displayProcessor.ts"),Gt=I("../grafana-data/src/themes/createTheme.ts"),Ht=(t=>(t.TimeSeriesWide="timeseries-wide",t.TimeSeriesLong="timeseries-long",t.TimeSeriesMany="timeseries-many",t.TimeSeriesMulti="timeseries-multi",t.NumericWide="numeric-wide",t.NumericMulti="numeric-multi",t.NumericLong="numeric-long",t.LogLines="log-lines",t.DirectoryListing="directory-listing",t.HeatmapRows="heatmap-rows",t.HeatmapCells="heatmap-cells",t.Histogram="histogram",t))(Ht||{}),Lr=I("../../node_modules/fast_array_intersect/lib/index.js"),St=I("../grafana-data/src/dataframe/processDataFrame.ts"),Ot=(t=>(t.outer="outer",t.inner="inner",t.outerTabular="outerTabular",t))(Ot||{});const Ur={id:B.joinByField,aliasIds:[B.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(t,e)=>r=>r.pipe((0,ye.T)(n=>Ur.transformer(t,e)(n))),transformer:(t,e)=>{let r;return n=>{if(n.length>1){t.byField&&!r&&(r=ae.sJ.get(he.Ct.byName).get(e.interpolate(t.byField)));const i=Hr({frames:n,joinBy:r,mode:t.mode});if(i)return[i]}return n}}};var Dr=Object.defineProperty,Rr=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,Kt=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,$t=(t,e,r)=>e in t?Dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lt=(t,e)=>{for(var r in e||(e={}))kr.call(e,r)&&$t(t,r,e[r]);if(Kt)for(var r of Kt(e))Vr.call(e,r)&&$t(t,r,e[r]);return t},pt=(t,e)=>Rr(t,jr(e));function zr(t){const{timeField:e}=(0,St.KR)(t[0]);if(e)return ae.sJ.get(he.Ct.firstTimeField).get({});let r=[];for(const n of t[0].fields)n.type===R.PU.number&&r.push(n.name);for(let n=1;n<t.length;n++){const i=[];for(const l of t[0].fields)l.type===R.PU.number&&i.push(l.name);r=r.filter(l=>!i.includes(l))}return ae.sJ.get(he.Ct.byName).get(r[0])}function Wt(t){var e;return(e=t.joinBy)!=null?e:zr(t.frames)}function Gr(t,e){if(e>=0){let r=t.fields[e];r.type!==R.PU.string&&!Qt(r.values)&&(t=(0,St.ES)(t,e))}return t}function Hr(t){var e,r,n,i,l;if(!((e=t.frames)!=null&&e.length))return;const s=(r=t.nullMode)!=null?r:g=>{var M;let F=(M=g.config.custom)==null?void 0:M.spanNulls;return F===!0?Tt:F===-1?Jt:Yt};if(t.frames.length===1){let g=t.frames[0],M=g;const F=Wt(t);let O=M.fields.findIndex(A=>F(A,M,t.frames));if(t.keepOriginIndices&&(M=pt(lt({},g),{fields:g.fields.map((A,_)=>{const V=lt({},A),j={frameIndex:0,fieldIndex:_};return V.state?V.state.origin=j:V.state={origin:j},V})}),O>0)){const A=M.fields[O],_=M.fields.filter((V,j)=>j!==O);_.unshift(A),M.fields=_,O=0}if(O>=0&&(M=Gr(M,O)),t.keep){let A=M.fields.filter((_,V)=>V===O||t.keep(_,M,t.frames));g!==M?M.fields=A:M=pt(lt({},g),{fields:A})}return M}const u=[],c=[],f=[],w=[];let P=1;const h=Wt(t);for(let g=0;g<t.frames.length;g++){const M=t.frames[g];if(!M||!((n=M.fields)!=null&&n.length))continue;const F=[Tt];let O,A=[],_=[];for(let j=0;j<M.fields.length;j++){const k=M.fields[j];if(k.state=k.state||{},!O&&h(k,M,t.frames))O=k;else{if(t.keep&&!t.keep(k,M,t.frames))continue;F.push(s(k));let X=(i=k.labels)!=null?i:{},ue=k.name;M.name&&(k.name===R.Bc?ue=M.name:X=pt(lt({},X),{name:M.name})),A.push(pt(lt({},k),{name:ue,labels:X}))}t.keepOriginIndices&&(k.state.origin={frameIndex:g,fieldIndex:j})}if(!O)continue;f.length===0&&f.push(O),u.push(F);const V=[O.values];for(const j of A)V.push(j.values),f.push(j),t.keepDisplayNames||(l=j.state)==null||delete l.displayName,_.push(P),P++;w.push(_),c.push(V)}let m=[];return t.mode===Ot.outerTabular?m=Kr(c,w,f.length,u):m=Zt(c,u,t.mode),{length:m[0]?m[0].length:0,fields:f.map((g,M)=>pt(lt({},g),{values:m[M]}))}}function Kr(t,e,r,n){let i={};for(let s=0;s<t.length;s++){let u=t[s],c=u[0];for(let f=0;f<t.length;f++){if(f===s)continue;let w=t[f],P=w[0];for(let h=0;h<c.length;h++){const m=c[h],g=r-1;let M=[m].concat(new Array(g)),F=0;for(let O=1;O<u.length;O++){const A=e[s][F];M[A]=u[O][h],F++}for(let O=0;O<P.length;O++)if(c[h]===P[O]){let A=0;for(let _=1;_<w.length;_++){const V=e[f][A];M[V]=w[_][O],A++}break}i[JSON.stringify(M)]=M}}}let l=[];for(let s=0;s<r;s++)l.push(new Array(0));for(let s in i){const u=i[s];for(let c=0;c<u.length;c++)l[c].push(u[c])}return l}const Tt=0,Jt=1,Yt=2;function $r(t,e,r){for(let n=0,i,l=-1;n<e.length;n++){let s=e[n];if(s>l){for(i=s-1;i>=0&&t[i]==null;)t[i--]=null;for(i=s+1;i<r&&t[i]==null;)t[l=i++]=null}}}function Zt(t,e,r=Ot.outer){let n;if(r===Ot.inner)n=new Set((0,Lr.A)(t.map(u=>u[0])));else{n=new Set;for(let u=0;u<t.length;u++){let f=t[u][0],w=f.length;for(let P=0;P<w;P++)n.add(f[P])}}let i=[Array.from(n).sort((u,c)=>u-c)],l=i[0].length,s=new Map;for(let u=0;u<l;u++)s.set(i[0][u],u);for(let u=0;u<t.length;u++){let c=t[u],f=c[0];for(let w=1;w<c.length;w++){let P=c[w],h=Array(l).fill(void 0),m=e?e[u][w]:Jt,g=[];for(let M=0;M<P.length;M++){let F=P[M],O=s.get(f[M]);F===null?m!==Tt&&(h[O]=F,m===Yt&&g.push(O)):h[O]=F}$r(h,g,l),i.push(h)}}return i}function Qt(t,e=50){const r=t.length;if(r<=1)return!0;let n=0,i=r-1;for(;n<=i&&t[n]==null;)n++;for(;i>=n&&t[i]==null;)i--;if(i<=n)return!0;const l=Math.max(1,Math.floor((i-n+1)/e));for(let s=t[n],u=n+l;u<=i;u+=l){const c=t[u];if(c!=null){if(c<=s)return!1;s=c}}return!0}const Xt=()=>{var t,e,r;return(r=(e=(t=window?.grafanaBootData)==null?void 0:t.settings)==null?void 0:e.featureToggles)==null?void 0:r.transformationsVariableSupport};var Wr=Object.defineProperty,Jr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,Qr=Object.prototype.propertyIsEnumerable,er=(t,e,r)=>e in t?Wr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ge=(t,e)=>{for(var r in e||(e={}))Zr.call(e,r)&&er(t,r,e[r]);if(qt)for(var r of qt(e))Qr.call(e,r)&&er(t,r,e[r]);return t},ve=(t,e)=>Jr(t,Yr(e));const tr=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],Xr=30,qr=[],en=(t,e)=>t-e,fi={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},tn={id:B.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(t,e)=>r=>r.pipe((0,ye.T)(n=>tn.transformer(t,e)(n))),transformer:(t,e)=>r=>{if(!Array.isArray(r)||r.length===0)return r;let n,i;t.bucketSize&&(Xt()&&(t.bucketSize=e.interpolate(t.bucketSize.toString())),typeof t.bucketSize=="string"?n=parseFloat(t.bucketSize):n=t.bucketSize,isNaN(n)&&(n=void 0)),t.bucketOffset&&(Xt()&&(t.bucketOffset=e.interpolate(t.bucketOffset.toString())),typeof t.bucketOffset=="string"?i=parseFloat(t.bucketOffset):i=t.bucketOffset,isNaN(i)&&(i=void 0));const l={bucketSize:n,bucketOffset:i,combine:t.combine},s=ln(r,l);return s==null?[]:[sn(s)]}},Ct="xMin";function rn(t){return t===Ct||t==="BucketMin"}const At="xMax";function nn(t){return t===At||t==="BucketMax"}function pi(t){var e,r;if(((e=t.meta)==null?void 0:e.type)===DataFrameType.HeatmapCells){let s=t.fields.find(m=>m.name==="yMin"),u=t.fields.find(m=>m.name==="yMax"),c=t.fields.find(m=>m.name==="count"),f=[...new Set(u.values)].sort((m,g)=>m-g),w=[...new Set(s.values)].sort((m,g)=>m-g),P=new Map;f.forEach(m=>P.set(m,0));for(let m=0;m<u.values.length;m++){let g=u.values[m];P.set(g,P.get(g)+c.values[m])}return{xMin:ve(ge({},s),{name:"xMin",values:w}),xMax:ve(ge({},u),{name:"xMax",values:f}),counts:[ve(ge({},c),{values:[...P.values()]})]}}else if(((r=t.meta)==null?void 0:r.type)===DataFrameType.HeatmapRows){let s=[],u=[],c=[],f="0";return t.fields.forEach(P=>{if(P.type===FieldType.number){let h=P.values.reduce((m,g)=>m+g,0);c.push(h),s.push(f),u.push(f=P.name)}}),c.push(0),s.push(f),u.push(f),{xMin:ve(ge({},t.fields[1]),{name:"xMin",type:FieldType.string,values:s}),xMax:ve(ge({},t.fields[1]),{name:"xMax",type:FieldType.string,values:u}),counts:[ve(ge({},t.fields[1]),{name:"count",type:FieldType.number,values:c})]}}let n,i;const l=[];for(const s of t.fields)rn(s.name)?n=s:nn(s.name)?i=s:s.type===FieldType.number&&l.push(s);if(!i&&n&&n.values.length>1){let s=n.values,u=roundDecimals(s[1]-s[0],6);i=ve(ge({},n),{name:At,values:s.map(c=>c+u)})}if(!n&&i&&i?.values.length>1){let s=i.values,u=roundDecimals(s[1]-s[0],6);n=ve(ge({},i),{name:Ct,values:s.map(c=>c-u)})}if(n&&i&&l.length)return{xMin:n,xMax:i,counts:l}}function ln(t,e){var r,n,i;let l=e?.bucketSize,s=(r=e?.bucketCount)!=null?r:Xr,u=(n=e?.bucketOffset)!=null?n:0;if(t=t.map(F=>ve(ge({},F),{fields:F.fields.map(O=>{if(O.type===R.PU.number){const A=Number(O.config.noValue);Number.isNaN(A)?O=ve(ge({},O),{values:O.values.filter(_=>_!=null)}):O=Se(O,A)}return O})})),!l||l<0){let F=[];for(const k of t)for(const X of k.fields)X.type===R.PU.number&&(F=F.concat(X.values));F.sort((k,X)=>k-X);let O=1/0;if(F.length===1)O=1;else for(let k=1;k<F.length;k++){let X=F[k]-F[k-1];X!==0&&(O=Math.min(O,X))}let A=F[0];const j=(F[F.length-1]-A)/s;for(let k=0;k<tr.length;k++){let X=tr[k];if(j<X&&X>=O){l=X;break}}}const c=F=>Vt(_t(F-u,l)+u,9);let f=((i=(""+l).match(/\.\d+$/))!=null?i:["."])[0].length-1,w=[],P=[],h;for(const F of t)for(const O of F.fields)if(O.type===R.PU.number){let A=an(O.values,c,qr,en);w.push(A),P.push(ve(ge({},O),{config:ve(ge({},O.config),{unit:O.config.unit==="short"?"short":void 0})})),!h&&O.config.unit&&(h=O.config)}if(!P.length)return null;let m=Zt(w);for(let F=1;F<m.length;F++){let O=m[F];for(let A=0;A<O.length;A++)O[A]==null&&(O[A]=0)}const g={name:Ct,values:m[0],type:R.PU.number,state:void 0,config:f===0?h??{}:ve(ge({},h),{decimals:f})},M=ve(ge({},g),{name:At,values:m[0].map(F=>F+l)});if(e?.combine){const F=new Array(m[0].length).fill(0);for(let O=1;O<m.length;O++)for(let A=0;A<F.length;A++)F[A]+=m[O][A];P=[ve(ge({},P[0]),{name:"count",values:F,type:R.PU.number,state:ve(ge({},P[0].state),{displayName:"Count",multipleFrames:!1,origin:{frameIndex:0,fieldIndex:2}})})]}else P.forEach((F,O)=>{F.values=m[O+1]});return{xMin:g,xMax:M,counts:P}}function mi(t,e){return Math.round(t/e)*e}function rr(t,e){return Math.ceil(t/e)*e}function _t(t,e){return Math.floor(t/e)*e}function an(t,e,r,n){let i=new Map;for(let c=0;c<t.length;c++){let f=t[c];f!=null&&(f=e(f));let w=i.get(f);w?w.count++:i.set(f,{value:f,count:1})}r&&r.forEach(c=>i.delete(c));let l=[...i.values()];n&&l.sort((c,f)=>n(c.value,f.value));let s=Array(l.length),u=Array(l.length);for(let c=0;c<l.length;c++)s[c]=l[c].value,u[c]=l[c].count;return[s,u]}function sn(t,e){if(!t.xMin.display){const r=(0,zt.J)({field:t.xMin,theme:e??(0,Gt.a)()});t.xMin.display=r,t.xMax.display=r}return t.counts[0].display=(0,zt.J)({field:t.counts[0],theme:e??(0,Gt.a)()}),{length:t.xMin.values.length,meta:{type:Ht.Histogram},fields:[t.xMin,t.xMax,...t.counts]}}var on=Object.defineProperty,nr=Object.getOwnPropertySymbols,un=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,at=Math.pow,ir=(t,e,r)=>e in t?on(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dn=(t,e)=>{for(var r in e||(e={}))un.call(e,r)&&ir(t,r,e[r]);if(nr)for(var r of nr(e))cn.call(e,r)&&ir(t,r,e[r]);return t};class fn extends Ee{merge(e){this.props.min=Nt("min",this.props.min,e.min),this.props.max=Nt("max",this.props.max,e.max)}getConfig(){var e,r;let{isTime:n,scaleKey:i,min:l,max:s,softMin:u,softMax:c,range:f,direction:w,orientation:P,centeredZero:h,decimals:m}=this.props;const g=this.props.distribution,M=n?{}:{distr:g===b.L4.Symlog?4:g===b.L4.Log?3:g===b.L4.Ordinal?2:1,log:g===b.L4.Log||g===b.L4.Symlog?(e=this.props.log)!=null?e:2:void 0,asinh:g===b.L4.Symlog?(r=this.props.linearThreshold)!=null?r:1:void 0};if(g===b.L4.Log){let ue=this.props.log,ee=ue===2?Math.log2:Math.log10;l!=null&&(l<=0?l=null:l=at(ue,Math.floor(ee(l)))),s!=null&&(s<=0?s=null:s=at(ue,Math.ceil(ee(s)))),u!=null&&(u<=0?u=null:u=at(ue,Math.floor(ee(u)))),c!=null&&(c<=0?c=null:c=at(ue,Math.ceil(ee(c))))}let F=u==null?3:1,O=c==null?3:1;const A={min:{pad:.1,hard:l??-1/0,soft:u||0,mode:F},max:{pad:.1,hard:s??1/0,soft:c||0,mode:O}};let _=u==null&&l!=null,V=c==null&&s!=null,j=_&&V;const k=(ue,ee,Pe,ke)=>{var Ge;const pe=ue.scales[ke];let Z=[ee,Pe];if(ke==="x"&&!n&&g===b.L4.Linear||!j&&ee==null&&Pe==null)return Z;let Je=(Ge=pe.log)!=null?Ge:10;if(pe.distr===1||pe.distr===2||pe.distr===4){if(h){let ot=Math.abs(ee),Dt=Math.abs(Pe),ut=Math.max(ot,Dt);ut===0&&(ut=80),ee=-ut,Pe=ut}pe.distr===4?Z=ne.A.rangeAsinh(ee,Pe,Je,!0):Z=ne.A.rangeNum(_?l:ee,V?s:Pe,A)}else pe.distr===3&&(Z=ne.A.rangeLog(l??ee,s??Pe,Je,!0));if(m===0)if(pe.distr===1||pe.distr===2)Z[0]=_t(Z[0],1),Z[1]=rr(Z[1],1);else if(pe.distr===3){let ot=pe.log===2?Math.log2:Math.log10;if(Z[0]<=1)Z[0]=1;else{let ut=Math.floor(ot(Z[0]));Z[0]=at(Je,ut)}let Dt=Math.ceil(ot(Z[1]));Z[1]=at(Je,Dt),Z[0]===Z[1]&&(Z[1]*=Je)}else pe.distr===4&&(Z[0]=_t(Z[0],1),Z[1]=rr(Z[1],1));return(pe.distr===1||pe.distr===4)&&(_&&(Z[0]=l),V&&(Z[1]=s)),Z[0]>=Z[1]&&(Z[0]=pe.distr===3?1:0,Z[1]=100),Z};let X=!n&&!j;return(0,kt.j9)(i)&&(X=!1,f=[0,1]),{[i]:dn({time:n,auto:X,range:f??k,dir:w,ori:P},M)}}}function Nt(t,e,r){const n=e!=null,i=r!=null;return n?i?t==="min"?e<r?e:r:e>r?e:r:e:r}var pn=Object.defineProperty,lr=Object.getOwnPropertySymbols,mn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,ar=(t,e,r)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gn=(t,e)=>{for(var r in e||(e={}))mn.call(e,r)&&ar(t,r,e[r]);if(lr)for(var r of lr(e))hn.call(e,r)&&ar(t,r,e[r]);return t};const mt=12,sr=8;class vn extends Ee{merge(e){this.props.size=Nt("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===b.vM.Auto&&(this.props.placement=e.placement)}calculateSpace(e,r,n,i,l){const s=e.axes[r],u=e.scales[s.scale];if(s.side!==2||!u)return 30;const c=40;if(u.time){const f=l/c,w=(i-n)/f,P=or(e,[n],r,c,w);return(0,ft.kD)(P[0],mt).width+18}return c}calculateAxisSize(e,r,n){const i=e.axes[n];let l=i.ticks.size;if(i.side===2)l+=i.gap+mt;else if(r?.length){let s=r.reduce((c,f)=>Math.max(c,(0,ft.kD)(f,mt).width),0);const u=Math.min(e.width*.4,s);l+=i.gap+i.labelGap+u}return Math.ceil(l)}getConfig(){let{scaleKey:e,label:r,show:n=!0,placement:i=b.vM.Auto,grid:l={show:!0},ticks:s,space:u,filter:c,gap:f=5,formatValue:w,splits:P,values:h,incrs:m,isTime:g,timeZone:M,theme:F,tickLabelRotation:O,size:A,color:_,border:V,decimals:j,distr:k=b.L4.Linear}=this.props;const X=`${mt}px ${F.typography.fontFamily}`,ue=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,kt.j9)(e)&&(P=[0,1]),j===0&&k===b.L4.Linear&&(c=(Pe,ke)=>ke.map(Ge=>Number.isInteger(Ge)?Ge:null));let ee={scale:e,show:n,stroke:_??F.colors.text.primary,side:yn(i),font:X,size:A??((Pe,ke,Ge)=>this.calculateAxisSize(Pe,ke,Ge)),rotate:O,gap:f,labelGap:0,grid:{show:l.show,stroke:ue,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:V?.show?_??F.colors.text.primary:ue,width:1/devicePixelRatio,size:4},s),splits:P,values:h,space:u??((Pe,ke,Ge,pe,Z)=>this.calculateSpace(Pe,ke,Ge,pe,Z)),filter:c,incrs:m};return V?.show&&(ee.border=gn({stroke:_??F.colors.text.primary,width:1/devicePixelRatio},V)),r!=null&&r.length>0&&(ee.label=r,ee.labelSize=mt+sr,ee.labelFont=X,ee.labelGap=sr),h?ee.values=h:g?ee.values=or:w&&(ee.values=(Pe,ke,Ge,pe,Z)=>{let Je=Br(Vt(Z,6));return ke.map(ot=>w(ot,Je>0?Je:void 0))}),ee.timeZone=M,ee}}const je={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function or(t,e,r,n,i){var l,s;const u=t.axes[r].timeZone,c=t.scales.x,f=((l=c?.max)!=null?l:0)-((s=c?.min)!=null?s:0),w=Math.round(je.year/je.day)*je.day,P=Math.round(i/je.day)*je.day;let h=We.WC.interval.year;return i<je.second?h=We.WC.interval.millisecond:i<=je.minute?h=We.WC.interval.second:f<=je.day?h=We.WC.interval.minute:i<=je.day?h=We.WC.interval.hour:f<je.year?h=We.WC.interval.day:P===w?h=We.WC.interval.year:i<=je.year&&(h=We.WC.interval.month),e.map(m=>m==null?"":(0,Ir.LE)(m,{format:h,timeZone:u}))}function yn(t){switch(t){case b.vM.Top:return 0;case b.vM.Right:return 1;case b.vM.Bottom:return 2;case b.vM.Left:}return 3}var st=I("../grafana-data/src/types/fieldColor.ts"),et=I("../grafana-data/src/themes/colorManipulator.ts"),ht=I("../../node_modules/tinycolor2/esm/tinycolor.js"),ur=I("../grafana-data/src/types/thresholds.ts");function cr(t,e,r){let n=0,i=0,l=0,s=0;return t===3?(i=e.top,s=e.top+e.height):t===2?(n=e.left+e.width,l=e.left):t===1?(i=e.top+e.height,s=e.top):t===0&&(n=e.left,l=e.left+e.width),r.createLinearGradient(n,i,l,s)}function On(t,e){return(r,n)=>{const i=(0,ft.Yc)(),l=cr(r.scales.x.ori===b.Lt.Horizontal?3:2,r.bbox,i);return l.addColorStop(0,et.X4(t,e)),l.addColorStop(1,et.X4(t,0)),l}}function dr(t,e,r){return(n,i)=>{const l=(0,ft.Yc)(),s=cr(n.scales.x.ori===b.Lt.Horizontal?3:2,n.bbox,l),u=(0,ht.A)(t).spin(-25).darken(5),c=(0,ht.A)(t).saturate(20).spin(20).brighten(10);return r.isDark?(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.darken(10).setAlpha(e).toString())):(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.setAlpha(e).toString())),s}}var bn=(t=>(t[t.Right=0]="Right",t[t.Up=1]="Up",t[t.Left=2]="Left",t[t.Down=3]="Down",t))(bn||{});function bt(t,e,r,n=!1){let i=t.scales[e],l=null,s=null;for(let _=0;_<r.length;_++){let V=r[_][0];if((V<=i.min||l==null)&&(l=_),s=_,V>=i.max)break}if(l===s)return r[l][1];let u=r[l][0],c=r[s][0];u===-1/0&&(u=i.min),c===1/0&&(c=i.max);let f=Math.round(t.valToPos(u,e,!0)),w=Math.round(t.valToPos(c,e,!0)),P=f-w;if(P===0)return r[s][1];let h,m,g,M;t.scales.x.ori===b.Lt.Horizontal?(h=g=0,m=f,M=w):(m=M=0,h=f,g=w);let O=(0,ft.Yc)().createLinearGradient(h,m,g,M),A;for(let _=l;_<=s;_++){let V=r[_],j=_===l?f:_===s?w:Math.round(t.valToPos(V[0],e,!0)),k=(f-j)/P;n&&_>l&&O.addColorStop(k,A),O.addColorStop(k,A=V[1])}return O}function Pn(t,e){let r=t.scales[e],n=1/0,i=-1/0;return t.series.forEach((l,s)=>{if(l.show&&l.scale===e)if(l.min==null){let u=t.data[s];for(let c=0;c<u.length;c++)u[c]!=null&&(n=Math.min(n,u[c]),i=Math.max(i,u[c]))}else n=Math.min(n,l.min),i=Math.max(i,l.max)}),i===n&&(n=r.min,i=r.max),[n,i]}function Et(t,e,r,n,i,l){var s,u,c,f;let w=(s=r??i)!=null?s:null,P=(u=n??l)!=null?u:null;if(w==null||P==null){let[h,m]=Pn(t,e);w=(c=w??h)!=null?c:0,P=(f=P??m)!=null?f:100}return[w,P]}function xn(t){return t==="transparent"||t[0]==="#"&&t.slice(-2)==="00"}function fr(t,e,r,n,i,l,s,u){if(!r)throw Error("Missing colorMode required for color scheme gradients");if(!n)throw Error("Missing thresholds required for color scheme gradients");return(c,f)=>{let w=c.series[f].scale,P="";if(r.id===st.Y.Thresholds)if(n.mode===ur.O.Absolute){const h=n.steps.map(m=>[m.value,xn(m.color)?"#0000":et.X4(e.visualization.getColorByName(m.color),t)]);P=bt(c,w,h,!0)}else{const[h,m]=Et(c,w,i,l,s,u),g=m-h,M=n.steps.map(F=>[h+g*(F.value/100),et.X4(e.visualization.getColorByName(F.color),t)]);P=bt(c,w,M,!0)}else if(r.getColors){const h=r.getColors(e),[m,g]=Et(c,w,i,l,s,u),M=g-m,F=h.map((O,A)=>[m+M*(A/(h.length-1)),et.X4(e.visualization.getColorByName(O),t)]);P=bt(c,w,F,!1)}return P}}var wn=Object.defineProperty,pr=Object.getOwnPropertySymbols,Fn=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,mr=(t,e,r)=>e in t?wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e)=>{for(var r in e||(e={}))Fn.call(e,r)&&mr(t,r,e[r]);if(pr)for(var r of pr(e))Mn.call(e,r)&&mr(t,r,e[r]);return t};class Sn extends Ee{getConfig(){var e;const{facets:r,drawStyle:n,pathBuilder:i,pointsBuilder:l,pointsFilter:s,lineInterpolation:u,lineWidth:c,lineStyle:f,barAlignment:w,barWidthFactor:P,barMaxWidth:h,showPoints:m,pointSize:g,scaleKey:M,pxAlign:F,spanNulls:O,show:A=!0}=this.props;let _={},V=this.getLineColor();_.stroke=V,_.width=c,f&&f.fill!=="solid"&&(f.fill==="dot"&&(_.cap="round"),_.dash=(e=f.dash)!=null?e:[10,10]),i!=null?_.paths=i:n===b.GR.Points?_.paths=()=>null:n!=null&&(_.paths=(X,ue,ee,Pe)=>Tn(n,u,w,P,h)(X,ue,ee,Pe));const j=typeof V=="string"?V:(X,ue)=>X.series[ue]._stroke,k={points:{stroke:j,fill:j,size:!g||g<c?void 0:g,filter:s}};return l!=null?k.points.show=l:n===b.GR.Points?k.points.show=!0:m===b.yL.Auto?n===b.GR.Bars&&(k.points.show=!1):m===b.yL.Never?k.points.show=!1:m===b.yL.Always&&(k.points.show=!0),hr(hr({scale:M,facets:r,spanGaps:typeof O=="number"?!1:O,value:()=>"",pxAlign:F,show:A,fill:this.getFill()},_),k)}getLineColor(){const{lineColor:e,gradientMode:r,colorMode:n,thresholds:i,theme:l,hardMin:s,hardMax:u,softMin:c,softMax:f,dynamicSeriesColor:w}=this.props;return r===b.on.None&&w?(P,h)=>{var m,g;return(g=(m=w(h))!=null?m:e)!=null?g:st.F}:r===b.on.Scheme&&n?.id!==st.Y.Fixed?fr(1,l,n,i,s,u,c,f):r===b.on.Hue?dr(e??st.F,1,l):e??st.F}getFill(){const{lineColor:e,fillColor:r,gradientMode:n,fillOpacity:i,colorMode:l,thresholds:s,theme:u,hardMin:c,hardMax:f,softMin:w,softMax:P,dynamicSeriesColor:h}=this.props;if(r)return r;const m=n??b.on.None,g=(i??0)/100;if(m===b.on.None&&h&&g>0)return(M,F)=>{let O=M.series[F]._stroke;return et.X4(O??"",g)};switch(m){case b.on.Opacity:return On(r??e,g);case b.on.Hue:return dr(r??e,g,u);case b.on.Scheme:if(l?.id!==st.Y.Fixed)return fr(g,u,l,s,c,f,w,P);default:if(g>0)return et.X4(e??"",g)}}}let Ke;function Tn(t,e,r=b.Nj.Center,n=.6,i=200){const l=ne.A.paths;if(Ke||(Ke={linear:l.linear(),smooth:l.spline(),stepBefore:l.stepped({align:-1}),stepAfter:l.stepped({align:1})}),t===b.GR.Bars){let s=`bars|${r}|${n}|${i}`;return Ke[s]||(Ke[s]=l.bars({size:[n,i],align:r})),Ke[s]}else if(t===b.GR.Line){if(e===b.dx.StepBefore)return Ke.stepBefore;if(e===b.dx.StepAfter)return Ke.stepAfter;if(e===b.dx.Smooth)return Ke.smooth}return Ke.linear}var Cn=Object.defineProperty,An=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,vr=(t,e,r)=>e in t?Cn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bn=(t,e)=>{for(var r in e||(e={}))Nn.call(e,r)&&vr(t,r,e[r]);if(gr)for(var r of gr(e))En.call(e,r)&&vr(t,r,e[r]);return t},In=(t,e)=>An(t,_n(e));function Ln(t){const e=t.config.mode===b.Ly.Dashed||t.config.mode===b.Ly.DashedAndArea?[10,10]:null;function r(h,m,g,M){let F=h.ctx,O=0;for(let A=0;A<g.length;A++)if(g[A].color==="transparent"){O=A;break}F.lineWidth=2,e&&F.setLineDash(e);for(let A=1;A<g.length;A++){const _=g[A];let V;O>=A&&A>0?V=(0,ht.A)(M.visualization.getColorByName(g[A-1].color)):V=(0,ht.A)(M.visualization.getColorByName(_.color)),V.getAlpha()===1&&V.setAlpha(.7);let j=Math.round(h.bbox.left),k=Math.round(h.valToPos(_.value,m,!0)),X=Math.round(h.bbox.left+h.bbox.width),ue=Math.round(h.valToPos(_.value,m,!0));F.beginPath(),F.moveTo(j,k),F.lineTo(X,ue),F.strokeStyle=V.toString(),F.stroke()}}function n(h,m,g,M){let F=h.ctx,O=bt(h,m,g.map(A=>{let _=(0,ht.A)(M.visualization.getColorByName(A.color));return _.getAlpha()===1&&_.setAlpha(.15),[A.value,_.toString()]}),!0);F.fillStyle=O,F.fillRect(h.bbox.left,h.bbox.top,h.bbox.width,h.bbox.height)}const{scaleKey:i,thresholds:l,theme:s,config:u,hardMin:c,hardMax:f,softMin:w,softMax:P}=t;return h=>{const m=h.ctx,{min:g,max:M}=h.scales.x,{min:F,max:O}=h.scales[i];if(g==null||M==null||F==null||O==null)return;let{steps:A,mode:_}=l;if(_===ur.O.Percentage){let[V,j]=Et(h,i,c,f,w,P),k=j-V;A=A.map(X=>In(Bn({},X),{value:V+k*(X.value/100)}))}switch(m.save(),u.mode){case b.Ly.Line:case b.Ly.Dashed:r(h,i,A,s);break;case b.Ly.Area:n(h,i,A,s);break;case b.Ly.LineAndArea:case b.Ly.DashedAndArea:n(h,i,A,s),r(h,i,A,s)}m.restore()}}var Un=Object.defineProperty,Dn=Object.defineProperties,Rn=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,jn=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,Or=(t,e,r)=>e in t?Un(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bt=(t,e)=>{for(var r in e||(e={}))jn.call(e,r)&&Or(t,r,e[r]);if(yr)for(var r of yr(e))kn.call(e,r)&&Or(t,r,e[r]);return t},Vn=(t,e)=>Dn(t,Rn(e));const zn={drag:{setScale:!1},points:{size:(t,e)=>t.series[e].points.size*2,width:(t,e,r)=>r/4},focus:{prox:30}};class Gn{constructor(e=_r.lE){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=n=>{let i=new Date(n);return this.tz?ne.A.tzDate(i,this.tz):i};var r;this.tz=(r=(0,Nr.QZ)(e,Date.now()))==null?void 0:r.ianaName}addHook(e,r){y("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(r)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",Ln(e)))}addAxis(e){var r,n,i;e.placement=(r=e.placement)!=null?r:b.vM.Auto,e.grid=(n=e.grid)!=null?n:{};let l=e.scaleKey;if(l==="x"&&(l+=(i=e.timeZone)!=null?i:""),this.axes[l]){this.axes[l].merge(e);return}e.placement===b.vM.Auto&&(e.placement=this.hasLeftAxis?b.vM.Right:b.vM.Left),e.placement===b.vM.Left&&(this.hasLeftAxis=!0),e.placement===b.vM.Hidden&&(e.grid.show=!1,e.size=0),this.axes[l]=new vn(e)}getAxisPlacement(e){var r;const n=this.axes[e];return(r=n?.props.placement)!=null?r:b.vM.Left}setCursor(e){this.cursor=(0,K.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new Sn(e))}getSeries(){return this.series}addScale(e){const r=this.scales.find(n=>n.props.scaleKey===e.scaleKey);if(r){r.merge(e);return}this.scales.push(new fn(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=r=>(this.frames=r,e(r,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){if(this.cachedConfig)return this.cachedConfig;const e=Vn(Bt({},Mt),{mode:this.mode,series:[this.mode===2?null:{value:()=>""}]});e.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(n=>n.getConfig()),e.series=[...e.series,...this.series.map(n=>n.getConfig())],e.scales=this.scales.reduce((n,i)=>Bt(Bt({},n),i.getConfig()),{}),e.hooks=this.hooks,e.select=this.select;const r=(n="")=>(i,l)=>{let s=i.series[l].points._stroke;if(typeof s!="string"){let u=this.frames[0].fields[l];s=u.display(u.values[i.cursor.idxs[l]]).color}return s+n};return e.cursor=(0,K.merge)({},zn,{points:{stroke:r("80"),fill:r()}},this.cursor),e.tzDate=this.tzDate,Array.isArray(this.padding)&&(e.padding=this.padding),this.stackingGroups.forEach(n=>{Xe(n).forEach(i=>{this.addBand(i)})}),this.bands.length&&(e.bands=this.bands),this.cachedConfig=e,e}ensureNonOverlappingAxes(e){const r=e.find(l=>l.props.scaleKey==="x"),n=e.filter(l=>{var s;return((s=l.props.grid)==null?void 0:s.show)===void 0}),i=n.findIndex(l=>l.props.placement===b.vM.Left||l.props.placement===b.vM.Right||l.props.placement===b.vM.Bottom&&l!==r);for(let l=0;l<n.length;l++)n[l]===r||l===i?n[l].props.grid.show=!0:n[l].props.grid.show=!1;return e}}var Hn=Object.defineProperty,Kn=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,Pr=(t,e,r)=>e in t?Hn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))Wn.call(e,r)&&Pr(t,r,e[r]);if(br)for(var r of br(e))Jn.call(e,r)&&Pr(t,r,e[r]);return t},Lt=(t,e)=>Kn(t,$n(e));const Yn={threshold:(t,e,r)=>t+r,midpoint:(t,e,r)=>(t+e)/2,plusone:(t,e,r)=>t+1};function Zn(t,e){return t.fields.find(r=>e!=null?r.name===e:r.type===R.PU.time)}function Qn(t){if(t.frame.length===0)return t.frame;let e=!0,{frame:r,refFieldName:n,refFieldPseudoMax:i,refFieldPseudoMin:l,insertMode:s}=t;s||(s=Yn.threshold);const u=Zn(r,n);if(u==null)return r;u.state=Lt(It({},u.state),{nullThresholdApplied:!0});const c=r.fields.map(w=>{var P;return((P=w.config.custom)==null?void 0:P.insertNulls)||u.config.interval||null}),f=new Set(c);if(f.delete(null),f.size===0)return r;if(f.size===1){const w=f.values().next().value;if(w<=0)return r;const P=u.values,h=r.fields.map(g=>g.values),m=Xn(P,h,w,l,i,s,e);return m===h?r:Lt(It({},r),{length:m[0].length,fields:r.fields.map((g,M)=>Lt(It({},g),{values:m[M]}))})}return r}function Xn(t,e,r,n=null,i=null,l,s){const u=t.length,c=[];if(n!=null&&n<t[0]){let h=Math.ceil((t[0]-n)/r),m=t[0]-h*r;for(;m<t[0];)c.push(l(m-r,m,r)),m+=r}c.push(t[0]);let f=t[0];for(let h=1;h<u;h++){const m=t[h];for(;m-f>r&&(c.push(l(f,m,r)),f+=r,!!s););c.push(m),f=m}if(i!=null&&i>f)for(;f+r<i;)c.push(l(f,i,r)),f+=r;const w=c.length;if(w===u)return e;const P=[];for(let h of e){let m;if(h!==t){m=Array(w);for(let g=0,M=0;g<w;g++)m[g]=t[M]===c[g]?h[M++]:null}else m=c;P.push(m)}return P}var qn=Object.defineProperty,ei=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,ri=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable,wr=(t,e,r)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ut=(t,e)=>{for(var r in e||(e={}))ri.call(e,r)&&wr(t,r,e[r]);if(xr)for(var r of xr(e))ni.call(e,r)&&wr(t,r,e[r]);return t},ii=(t,e)=>ei(t,ti(e));function Fr(t,e){var r,n,i;const l=t.y.values.length,s=Ut(Ut({},t.y.config),e),u=(r=t.x)!=null?r:{name:"",values:[...Array(l).keys()],type:R.PU.number,config:{}};let c={refId:"sparkline",fields:[u,ii(Ut({},t.y),{config:s})],length:l};return Qt(u.values)||(c=(0,St.ES)(c,0)),Qn({frame:c,refFieldPseudoMin:(n=t.timeRange)==null?void 0:n.from.valueOf(),refFieldPseudoMax:(i=t.timeRange)==null?void 0:i.to.valueOf()})}var li=Object.defineProperty,ai=Object.defineProperties,si=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable,Sr=(t,e,r)=>e in t?li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pt=(t,e)=>{for(var r in e||(e={}))oi.call(e,r)&&Sr(t,r,e[r]);if(Mr)for(var r of Mr(e))ui.call(e,r)&&Sr(t,r,e[r]);return t},ci=(t,e)=>ai(t,si(e));const di={drawStyle:b.GR.Line,showPoints:b.yL.Auto,axisPlacement:b.vM.Hidden,pointSize:2};class xt extends J.PureComponent{constructor(e){super(e);const r=Fr(e.sparkline,e.config);this.state={data:qe(r,vt(r)),alignedDataFrame:r,configBuilder:this.prepareConfig(r)}}static getDerivedStateFromProps(e,r){const n=Fr(e.sparkline,e.config),i=Le(n);return i?ci(Pt({},r),{data:qe(i,vt(i)),alignedDataFrame:i}):Pt({},r)}componentDidUpdate(e,r){const{alignedDataFrame:n}=this.state;if(!n)return;let i=!1;e.sparkline!==this.props.sparkline?i=!xe(this.state.alignedDataFrame,r.alignedDataFrame):i=!(0,K.isEqual)(e.config,this.props.config),i&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var r,n,i,l;let{min:s,max:u}=(r=this.state.alignedDataFrame.fields[1].state)==null?void 0:r.range;const c=+((n=this.state.alignedDataFrame.fields[1].config)==null?void 0:n.noValue);return Number.isNaN(c)||(s=Math.min(s,+c),u=Math.max(u,+c)),s===u?(s===0?u=100:(s=0,u*=2),[s,u]):[Math.max(s,(i=e.config.min)!=null?i:-1/0),Math.min(u,(l=e.config.max)!=null?l:1/0)]}prepareConfig(e){var r;const{theme:n}=this.props,i=new Gn;i.setCursor({show:!1,x:!1,y:!1});const l=e.fields[0];i.addScale({scaleKey:"x",orientation:b.Lt.Horizontal,direction:b.ON.Right,isTime:!1,range:()=>{const{sparkline:s}=this.props;if(s.x){if(s.timeRange&&s.x.type===R.PU.time)return[s.timeRange.from.valueOf(),s.timeRange.to.valueOf()];const u=s.x.values;return[u[0],u[u.length-1]]}return[0,s.y.values.length-1]}}),i.addAxis({scaleKey:"x",theme:n,placement:b.vM.Hidden});for(let s=0;s<e.fields.length;s++){const u=e.fields[s],c=u.config,f=Pt(Pt({},di),c.custom);if(u===l||u.type!==R.PU.number)continue;const w=c.unit||"__fixed";i.addScale({scaleKey:w,orientation:b.Lt.Vertical,direction:b.ON.Up,range:()=>this.getYRange(u)}),i.addAxis({scaleKey:w,theme:n,placement:b.vM.Hidden});const P=(0,ce.Qi)(u),h=P.getCalculator(u,n)(0,0),m=f.drawStyle===b.GR.Points?b.yL.Always:f.showPoints;i.addSeries({pxAlign:!1,scaleKey:w,theme:n,colorMode:P,thresholds:c.thresholds,drawStyle:f.drawStyle,lineColor:(r=f.lineColor)!=null?r:h,lineWidth:f.lineWidth,lineInterpolation:f.lineInterpolation,showPoints:m,pointSize:f.pointSize,fillOpacity:f.fillOpacity,fillColor:f.fillColor,lineStyle:f.lineStyle,gradientMode:f.gradientMode})}return i}render(){const{data:e,configBuilder:r}=this.state,{width:n,height:i}=this.props;return J.createElement(yt,{data:e,config:r,width:n,height:i})}}try{xt.displayName="Sparkline",xt.__docgenInfo={description:"",displayName:"Sparkline",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"FieldConfig<GraphFieldConfig>"}},sparkline:{defaultValue:null,description:"",name:"sparkline",required:!0,type:{name:"FieldSparkline"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Sparkline/Sparkline.tsx#Sparkline"]={docgenInfo:xt.__docgenInfo,name:"Sparkline",path:"src/components/Sparkline/Sparkline.tsx#Sparkline"})}catch{}},"./src/utils/colors.ts":function(tt,Fe,I){I.d(Fe,{mZ:function(){return Ue}});var K=I("../../node_modules/lodash/lodash.js"),J=I.n(K),N=I("../../node_modules/tinycolor2/esm/tinycolor.js");const ie=4,D="rgba(0, 211, 255, 1)",me="rgba(11, 237, 50, 1)",Ce="rgba(237, 46, 24, 1)",Be="rgba(150, 150, 150, 1)",re="rgba(247, 149, 32, 1)",Me=.09,Ie=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function Le(R){const ce=(0,K.map)(R,Se),b=(0,K.sortBy)(ce,["h"]),ne=(0,K.chunk)(b,ie),ye=(0,K.map)(ne,ae=>(0,K.sortBy)(ae,"l")),le=(0,K.flattenDeep)((0,K.zip)(...ye));return(0,K.map)(le,xe)}function Se(R){return(0,N.A)(R).toHsl()}function xe(R){return(0,N.A)(R).toHexString()}function Ae(R){return tinycolor(R).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function Ue(R,ce){const b=(0,N.A)(R),ne=b.getBrightness();return b.getAlpha()<.3?ce?"rgb(247, 248, 250)":"rgb(32, 34, 38)":ne>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let De=Le(Ie)}}]);
