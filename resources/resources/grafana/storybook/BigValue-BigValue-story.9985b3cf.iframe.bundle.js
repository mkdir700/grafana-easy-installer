"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[7030],{"./src/components/BigValue/BigValue.story.tsx":function(Ae,D,c){c.r(D),c.d(D,{ApplyNoValue:function(){return b},Basic:function(){return _},default:function(){return _e}});var p=c("../../node_modules/react/index.js"),F=c("../grafana-data/src/types/dataFrame.ts"),R=c("./src/themes/ThemeContext.tsx"),ie=c("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),oe=c("./src/components/Button/Button.tsx"),H=c("./src/components/FormattedValueDisplay/FormattedValueDisplay.tsx"),M=c("../../node_modules/tinycolor2/esm/tinycolor.js"),W=c("../grafana-data/src/valueFormats/valueFormats.ts"),re=c("../grafana-schema/src/common/common.gen.ts"),P=c("./src/utils/colors.ts"),f=c("./src/utils/measureText.ts"),ue=c("./src/components/Sparkline/Sparkline.tsx"),se=c("./src/components/Icon/Icon.tsx");const B=({percentChange:t,styles:e})=>{const a=t&&(t>0?"arrow-up":t<0?"arrow-down":void 0);return p.createElement("div",{style:e.containerStyles},a&&p.createElement(se.I,{name:a,height:e.iconSize,width:e.iconSize,viewBox:"6 6 12 12"}),A(t))},A=t=>{var e;return(e=t?.toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3}))!=null?e:""};try{B.displayName="PercentChange",B.__docgenInfo={description:"",displayName:"PercentChange",props:{percentChange:{defaultValue:null,description:"",name:"percentChange",required:!0,type:{name:"number"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"PercentChangeStyles"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/PercentChange.tsx#PercentChange"]={docgenInfo:B.__docgenInfo,name:"PercentChange",path:"src/components/BigValue/PercentChange.tsx#PercentChange"})}catch{}try{A.displayName="percentChangeString",A.__docgenInfo={description:"",displayName:"percentChangeString",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/PercentChange.tsx#percentChangeString"]={docgenInfo:A.__docgenInfo,name:"percentChangeString",path:"src/components/BigValue/PercentChange.tsx#percentChangeString"})}catch{}var de=Object.defineProperty,ce=Object.defineProperties,he=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,Y=(t,e,a)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,I=(t,e)=>{for(var a in e||(e={}))pe.call(e,a)&&Y(t,a,e[a]);if(G)for(var a of G(e))me.call(e,a)&&Y(t,a,e[a]);return t},z=(t,e)=>ce(t,he(e));const h=1.2,k=30,V=500;class x{constructor(e){this.props=e;var a;const{width:l,height:r,value:i,text:o}=e;this.valueColor=(a=i.color)!=null?a:"gray",this.panelPadding=r>100?12:8,this.textValues=fe(e),this.justifyCenter=ge(e.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=l-this.panelPadding*2,this.maxTextHeight=r-this.panelPadding*2,o&&(o.titleSize&&(this.titleFontSize=o.titleSize,this.titleToAlignTo=void 0),o.valueSize&&(this.valueFontSize=o.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const e={fontSize:`${this.titleFontSize}px`,lineHeight:h};return(this.props.colorMode===s.Background||this.props.colorMode===s.BackgroundSolid)&&(e.color=(0,P.mZ)(this.valueColor,this.props.theme.isDark)),e}getValueStyles(){const e={fontSize:this.valueFontSize,fontWeight:V,lineHeight:h,position:"relative",zIndex:1};switch(this.justifyCenter&&(e.textAlign="center"),this.props.colorMode){case s.Value:e.color=this.valueColor;break;case s.Background:case s.BackgroundSolid:e.color=(0,P.mZ)(this.valueColor,this.props.theme.isDark);break;case s.None:e.color=this.props.theme.colors.text.primary;break}return e}getPercentChangeStyles(e){const l=this.getValueAndTitleContainerStyles(),r=Math.max(this.valueFontSize/2.5,12);let i=Math.max(this.valueFontSize/3,10);const o=e>0?this.props.theme.visualization.getColorByName("green"):this.props.theme.visualization.getColorByName("red"),u={fontSize:r,fontWeight:V,lineHeight:h,position:"relative",display:"flex",alignItems:"center",gap:Math.max(r/3,4),zIndex:1,color:o};switch(this.justifyCenter&&(u.textAlign="center"),l.flexDirection==="column"&&r>12&&(u.marginTop=-(r/4)),l.flexDirection==="row"&&(u.alignItems="baseline",u.lineHeight=h*2.5),this.props.colorMode){case s.Background:case s.BackgroundSolid:u.color=(0,P.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===d.None&&(u.fontSize=(0,f.Vr)(A(e),this.maxTextWidth*.8,this.maxTextHeight*.8,h,void 0,V),i=u.fontSize*.8),{containerStyles:u,iconSize:i}}getValueAndTitleContainerStyles(){const e={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(e.alignItems="center",e.justifyContent="center",e.flexGrow=1,e.gap="0.75ch"),e}getPanelStyles(){const{width:e,height:a,theme:l,colorMode:r,textMode:i}=this.props,o={width:`${e}px`,height:`${a}px`,padding:`${i===d.None?2:this.panelPadding}px`,borderRadius:l.shape.radius.default,position:"relative",display:"flex"},u=l.isDark?1:-.7;switch(r){case s.Background:const m=(0,M.A)(this.valueColor).darken(15*u).spin(8).toRgbString(),v=(0,M.A)(this.valueColor).darken(5*u).spin(-8).toRgbString();o.background=`linear-gradient(120deg, ${m}, ${v})`;break;case s.BackgroundSolid:o.background=(0,M.A)(this.valueColor).toString();break;case s.Value:o.background="transparent";break}return this.justifyCenter&&(o.alignItems="center",o.flexDirection="row"),o}renderChart(){var e;const{sparkline:a,colorMode:l}=this.props;if(!a||((e=a.y)==null?void 0:e.type)!==F.PU.number)return null;let r,i;switch(l){case s.Background:case s.BackgroundSolid:r="rgba(255,255,255,0.4)",i=(0,M.A)(this.valueColor).brighten(40).toRgbString();break;case s.None:case s.Value:default:i=this.valueColor,r=(0,M.A)(this.valueColor).setAlpha(.2).toRgbString();break}const o={custom:{drawStyle:re.GR.Line,lineWidth:1,fillColor:r,lineColor:i}};return p.createElement("div",{style:this.getChartStyles()},p.createElement(ue.O,{height:this.chartHeight,width:this.chartWidth,sparkline:a,config:o,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class L extends x{constructor(e){var a,l;super(e);const r=(a=this.titleToAlignTo)!=null&&a.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,f.Vr)(this.valueToAlignTo,this.maxTextWidth*r,this.maxTextHeight,h,void 0,V)),(l=this.titleToAlignTo)!=null&&l.length&&(this.titleFontSize=(0,f.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,h,k),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.alignItems="center",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}class j extends x{constructor(e){var a;super(e);const{width:l,height:r}=e,i=.5,o=.6,u=1-o,m=.4;this.chartWidth=l,this.chartHeight=r*i,(a=this.titleToAlignTo)!=null&&a.length&&(this.titleFontSize=(0,f.Vr)(this.titleToAlignTo,this.maxTextWidth*o,this.maxTextHeight*m,h,k)),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.Vr)(this.valueToAlignTo,this.maxTextWidth*u,this.maxTextHeight*i,h,void 0,V))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="row",e.justifyContent="space-between",e}}class w extends x{constructor(e){var a,l;super(e);const{width:r,height:i}=e,o=.15,u=.25;let m=0;this.chartHeight=i*u,this.chartWidth=r,(a=this.titleToAlignTo)!=null&&a.length&&(this.titleFontSize=(0,f.Vr)(this.titleToAlignTo,this.maxTextWidth,i*o,h,k),m=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-m,h,void 0,V)),(l=this.titleToAlignTo)!=null&&l.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=i-this.titleFontSize*h-this.valueFontSize*h}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.justifyContent="center",e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="column",e}}class O extends x{constructor(e){var a,l;super(e);const{height:r}=e,i=.15;let o=0;(a=this.titleToAlignTo)!=null&&a.length&&(this.titleFontSize=(0,f.Vr)(this.titleToAlignTo,this.maxTextWidth,r*i,h,k),o=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,f.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-o,h,void 0,V)),(l=this.titleToAlignTo)!=null&&l.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.flexGrow=1,e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}function E(t){const{width:e,height:a,sparkline:l}=t;return e/a>2.5&&!t.disableWideLayout?a>50&&l&&l.y.values.length>1?new j(t):new L(t):a>100&&l&&l.y.values.length>1?new w(t):new O(t)}function ge(t,e){return t===T.Center?!0:(e??"").length===0}function fe(t){const{value:e,alignmentFactors:a,count:l}=t;let{textMode:r}=t;const i=a?a.title:e.title,o=(0,W.cN)(a||e);switch(r===d.Auto&&(l??1)===1&&(r=d.Value),r){case d.Name:return z(I({},e),{title:void 0,prefix:void 0,suffix:void 0,text:e.title||"",titleToAlignTo:void 0,valueToAlignTo:i??"",tooltip:(0,W.cN)(e)});case d.Value:return z(I({},e),{title:void 0,titleToAlignTo:void 0,valueToAlignTo:o,tooltip:e.title});case d.None:return{numeric:e.numeric,color:e.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${e.title}
Value: ${(0,W.cN)(e)}`};case d.ValueAndName:default:return z(I({},e),{titleToAlignTo:i,valueToAlignTo:o})}}try{E.displayName="buildLayout",E.__docgenInfo={description:"",displayName:"buildLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#buildLayout"]={docgenInfo:E.__docgenInfo,name:"buildLayout",path:"src/components/BigValue/BigValueLayout.tsx#buildLayout"})}catch{}try{x.displayName="BigValueLayout",x.__docgenInfo={description:"",displayName:"BigValueLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#BigValueLayout"]={docgenInfo:x.__docgenInfo,name:"BigValueLayout",path:"src/components/BigValue/BigValueLayout.tsx#BigValueLayout"})}catch{}try{L.displayName="WideNoChartLayout",L.__docgenInfo={description:"",displayName:"WideNoChartLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#WideNoChartLayout"]={docgenInfo:L.__docgenInfo,name:"WideNoChartLayout",path:"src/components/BigValue/BigValueLayout.tsx#WideNoChartLayout"})}catch{}try{j.displayName="WideWithChartLayout",j.__docgenInfo={description:"",displayName:"WideWithChartLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#WideWithChartLayout"]={docgenInfo:j.__docgenInfo,name:"WideWithChartLayout",path:"src/components/BigValue/BigValueLayout.tsx#WideWithChartLayout"})}catch{}try{w.displayName="StackedWithChartLayout",w.__docgenInfo={description:"",displayName:"StackedWithChartLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#StackedWithChartLayout"]={docgenInfo:w.__docgenInfo,name:"StackedWithChartLayout",path:"src/components/BigValue/BigValueLayout.tsx#StackedWithChartLayout"})}catch{}try{O.displayName="StackedWithNoChartLayout",O.__docgenInfo={description:"",displayName:"StackedWithNoChartLayout",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:null,description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValueLayout.tsx#StackedWithNoChartLayout"]={docgenInfo:O.__docgenInfo,name:"StackedWithNoChartLayout",path:"src/components/BigValue/BigValueLayout.tsx#StackedWithNoChartLayout"})}catch{}var s=(t=>(t.Background="background",t.BackgroundSolid="background_solid",t.None="none",t.Value="value",t))(s||{}),S=(t=>(t.None="none",t.Line="line",t.Area="area",t))(S||{}),T=(t=>(t.Auto="auto",t.Center="center",t))(T||{}),d=(t=>(t.Auto="auto",t.Value="value",t.ValueAndName="value_and_name",t.Name="name",t.None="none",t))(d||{});class y extends p.PureComponent{render(){const{onClick:e,className:a,hasLinks:l,theme:r}=this.props,i=E(this.props),o=i.getPanelStyles(),u=i.getValueAndTitleContainerStyles(),m=i.getValueStyles(),v=i.getTitleStyles(),g=i.textValues,N=this.props.value.percentChange,Me=N!=null&&!Number.isNaN(N),le=l?void 0:g.tooltip;return e?p.createElement("button",{type:"button",className:(0,ie.cx)((0,oe.my)(r),a),style:o,onClick:e,title:le},p.createElement("div",{style:u},g.title&&p.createElement("div",{style:v},g.title),p.createElement(H.i,{value:g,style:m})),i.renderChart()):p.createElement("div",{className:a,style:o,title:le},p.createElement("div",{style:u},g.title&&p.createElement("div",{style:v},g.title),p.createElement(H.i,{value:g,style:m}),Me&&p.createElement(B,{percentChange:N,styles:i.getPercentChangeStyles(N)})),i.renderChart())}}y.defaultProps={justifyMode:"auto"};try{d.displayName="BigValueTextMode",d.__docgenInfo={description:"Options for how the value & title are to be displayed",displayName:"BigValueTextMode",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValue.tsx#BigValueTextMode"]={docgenInfo:d.__docgenInfo,name:"BigValueTextMode",path:"src/components/BigValue/BigValue.tsx#BigValueTextMode"})}catch{}try{y.displayName="BigValue",y.__docgenInfo={description:"",displayName:"BigValue",props:{height:{defaultValue:null,description:"Height of the component",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"Width of the component",name:"width",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"Value displayed as Big Value",name:"value",required:!0,type:{name:"DisplayValue"}},sparkline:{defaultValue:null,description:"Sparkline values for showing a graph under/behind the value",name:"sparkline",required:!1,type:{name:"FieldSparkline"}},onClick:{defaultValue:null,description:"onClick handler for the value",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},className:{defaultValue:null,description:"Custom styling",name:"className",required:!1,type:{name:"string"}},colorMode:{defaultValue:null,description:"Color mode for coloring the value or the background",name:"colorMode",required:!0,type:{name:"enum",value:[{value:'"background"'},{value:'"background_solid"'},{value:'"none"'},{value:'"value"'}]}},graphMode:{defaultValue:null,description:"Show a graph behind/under the value",name:"graphMode",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"line"'},{value:'"area"'}]}},justifyMode:{defaultValue:{value:"BigValueJustifyMode.Auto"},description:"Auto justify value and text or center it",name:"justifyMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'}]}},alignmentFactors:{defaultValue:null,description:"Factors that should influence the positioning of the text",name:"alignmentFactors",required:!1,type:{name:"DisplayValueAlignmentFactors"}},text:{defaultValue:null,description:"Explicit font size control",name:"text",required:!1,type:{name:"VizTextDisplayOptions"}},textMode:{defaultValue:null,description:"Specify which text should be visible in the BigValue",name:"textMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"value"'},{value:'"value_and_name"'},{value:'"name"'},{value:'"none"'}]}},hasLinks:{defaultValue:null,description:"If true disables the tooltip",name:"hasLinks",required:!1,type:{name:"boolean"}},count:{defaultValue:null,description:`If part of a series of stat panes, this is the total number.
Used by BigValueTextMode.Auto text mode.`,name:"count",required:!1,type:{name:"number"}},disableWideLayout:{defaultValue:null,description:"Disable the wide layout for the BigValue",name:"disableWideLayout",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/BigValue/BigValue.tsx#BigValue"]={docgenInfo:y.__docgenInfo,name:"BigValue",path:"src/components/BigValue/BigValue.tsx#BigValue"})}catch{}var n=c("../../node_modules/react/jsx-runtime.js"),K=c("../../node_modules/@mdx-js/react/lib/index.js"),U=c("../../node_modules/@storybook/blocks/dist/index.mjs");function $(t){const e=Object.assign({h1:"h1",p:"p",a:"a",h3:"h3",h4:"h4",code:"code",ul:"ul",li:"li",pre:"pre"},(0,K.RP)(),t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.W8,{title:"MDX|BigValue",component:y}),`
`,(0,n.jsx)(e.h1,{id:"bigvalue",children:"BigValue"}),`
`,(0,n.jsxs)(e.p,{children:["Component for showing a value based on a ",(0,n.jsx)(e.a,{href:"https://github.com/grafana/grafana/blob/main/packages/grafana-data/src/types/displayValue.ts#L5",target:"_blank",rel:"nofollow noopener noreferrer",children:"DisplayValue"}),"."]}),`
`,(0,n.jsx)(e.h3,{id:"display-properties",children:"Display properties"}),`
`,(0,n.jsx)(e.p,{children:"There are a few properties that will determine the look of the BigValue."}),`
`,(0,n.jsx)(e.h4,{id:"justify-mode",children:"Justify mode"}),`
`,(0,n.jsx)(e.p,{children:"There are two modes for aligning text, auto and center."}),`
`,(0,n.jsx)(e.h4,{id:"graph-mode",children:"Graph mode"}),`
`,(0,n.jsxs)(e.p,{children:["You can control graph shown in BigValue with the ",(0,n.jsx)(e.code,{children:"GraphMode"})," property. ",(0,n.jsx)(e.code,{children:"GraphMode.Area"}),` renders a
graph in the behind the value. `,(0,n.jsx)(e.code,{children:"GrapMode.None"})," will hide it."]}),`
`,(0,n.jsx)(e.h4,{id:"color-mode",children:"Color mode"}),`
`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"ColorMode"}),` controls which part of the component that should have the color from thresholds or field config,
`,(0,n.jsx)(e.code,{children:"ColorMode.Background"})," and ",(0,n.jsx)(e.code,{children:"ColorMode.Value"}),"."]}),`
`,(0,n.jsxs)(e.p,{children:["Note, ",(0,n.jsx)(e.code,{children:"ColorMode.Value"})," will only set the color for the value."]}),`
`,(0,n.jsx)(e.h4,{id:"text-mode",children:"Text mode"}),`
`,(0,n.jsx)(e.p,{children:"There are four variants to render text:"}),`
`,(0,n.jsxs)(e.ul,{children:[`
`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"TextMode.Auto"})," - Show value and name if there's more than on BigValue in the same pane."]}),`
`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"TextMode.Value"})," - Show only the value."]}),`
`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"TextMode.ValueAndName"})," - Show value and the name."]}),`
`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"TextMode.None"})," - Do not show any value or name."]}),`
`]}),`
`,(0,n.jsx)(e.h3,{id:"example-usage",children:"Example usage"}),`
`,(0,n.jsxs)(e.p,{children:["An example usage is in the ",(0,n.jsx)(e.a,{href:"https://grafana.com/docs/grafana/latest/panels/visualizations/stat-panel/",target:"_blank",rel:"nofollow noopener noreferrer",children:"Stat panel"}),"."]}),`
`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-tsx",children:`import { DisplayValue } from '@grafana/data';
import {
  BigValue,
  BigValueColorMode,
  BigValueGraphMode,
  BigValueJustifyMode,
  BigValueTextMode,
  useTheme,
} from '@grafana/ui';

const bigValue: DisplayValue = {
  color: 'red',
  value: '5000',
  numeric: 5000,
  title: 'Volume',
};

return (
  <BigValue
    theme={useTheme()}
    justifyMode={BigValueJustifyMode.Auto}
    graphMode={BigValueGraphMode.Area}
    colorMode={BigValueColorMode.Value}
    textMode={BigValueTextMode.Auto}
    value={bigValue}
  />
);
`})}),`
`,(0,n.jsx)(e.h3,{id:"props",children:"Props"}),`
`,(0,n.jsx)(U.ov,{of:y})]})}function ye(t={}){const{wrapper:e}=Object.assign({},(0,K.RP)(),t.components);return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)($,t)})):$(t)}var ve=ye,Ve=Object.defineProperty,xe=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,X=(t,e,a)=>e in t?Ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,C=(t,e)=>{for(var a in e||(e={}))Te.call(e,a)&&X(t,a,e[a]);if(J)for(var a of J(e))Ce.call(e,a)&&X(t,a,e[a]);return t},q=(t,e)=>xe(t,Se(e)),Z,Q,ee,te,ae,ne;const be={title:"Visualizations/BigValue",component:y,parameters:{docs:{page:ve},controls:{exclude:["value","sparkline","onClick","className","alignmentFactors","text","count","theme"]}},argTypes:{width:{control:{type:"range",min:200,max:800}},height:{control:{type:"range",min:200,max:800}},colorMode:{control:{type:"select",options:[s.Value,s.Background]}},graphMode:{control:{type:"select",options:[S.Area,S.None]}},justifyMode:{control:{type:"select",options:[T.Auto,T.Center]}},textMode:{control:{type:"radio",options:[d.Auto,d.Name,d.ValueAndName,d.None,d.Value]}},color:{control:"color"}}},b=({valueText:t,title:e,colorMode:a,graphMode:l,height:r,width:i,color:o,textMode:u,justifyMode:m})=>{const v=(0,R.$j)(),g={y:{name:"",values:[1,2,3,null,null],type:F.PU.number,state:{range:{min:1,max:4,delta:3}},config:{noValue:"0"}}};return p.createElement(y,{theme:v,width:i,height:r,colorMode:a,graphMode:l,textMode:u,justifyMode:m,value:{text:t,numeric:5022,color:o,title:e},sparkline:l===S.None?void 0:g})},_=({valueText:t,title:e,colorMode:a,graphMode:l,height:r,width:i,color:o,textMode:u,justifyMode:m})=>{const v=(0,R.$j)(),g={y:{name:"",values:[1,2,3,4,3],type:F.PU.number,state:{range:{min:1,max:4,delta:3}},config:{}}};return p.createElement(y,{theme:v,width:i,height:r,colorMode:a,graphMode:l,textMode:u,justifyMode:m,value:{text:t,numeric:5022,color:o,title:e},sparkline:l===S.None?void 0:g})};_.args={valueText:"$5022",title:"Total Earnings",colorMode:s.Value,graphMode:S.Area,justifyMode:T.Auto,width:400,height:300,color:"red",textMode:d.Auto},b.args={valueText:"$5022",title:"Total Earnings",colorMode:s.Value,graphMode:S.Area,justifyMode:T.Auto,width:400,height:300,color:"red",textMode:d.Auto};var _e=be;b.parameters=q(C({},b.parameters),{docs:q(C({},(Z=b.parameters)==null?void 0:Z.docs),{source:C({originalSource:`({
  valueText,
  title,
  colorMode,
  graphMode,
  height,
  width,
  color,
  textMode,
  justifyMode
}) => {
  const theme = useTheme2();
  const sparkline: FieldSparkline = {
    y: {
      name: '',
      values: [1, 2, 3, null, null],
      type: FieldType.number,
      state: {
        range: {
          min: 1,
          max: 4,
          delta: 3
        }
      },
      config: {
        noValue: '0'
      }
    }
  };
  return <BigValue theme={theme} width={width} height={height} colorMode={colorMode} graphMode={graphMode} textMode={textMode} justifyMode={justifyMode} value={{
    text: valueText,
    numeric: 5022,
    color: color,
    title
  }} sparkline={graphMode === BigValueGraphMode.None ? undefined : sparkline} />;
}`},(ee=(Q=b.parameters)==null?void 0:Q.docs)==null?void 0:ee.source)})}),_.parameters=q(C({},_.parameters),{docs:q(C({},(te=_.parameters)==null?void 0:te.docs),{source:C({originalSource:`({
  valueText,
  title,
  colorMode,
  graphMode,
  height,
  width,
  color,
  textMode,
  justifyMode
}) => {
  const theme = useTheme2();
  const sparkline: FieldSparkline = {
    y: {
      name: '',
      values: [1, 2, 3, 4, 3],
      type: FieldType.number,
      state: {
        range: {
          min: 1,
          max: 4,
          delta: 3
        }
      },
      config: {}
    }
  };
  return <BigValue theme={theme} width={width} height={height} colorMode={colorMode} graphMode={graphMode} textMode={textMode} justifyMode={justifyMode} value={{
    text: valueText,
    numeric: 5022,
    color: color,
    title
  }} sparkline={graphMode === BigValueGraphMode.None ? undefined : sparkline} />;
}`},(ne=(ae=_.parameters)==null?void 0:ae.docs)==null?void 0:ne.source)})})}}]);
