"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[42],{"../../node_modules/@storybook/addon-actions/dist/index.mjs":function(b,f,n){n.d(f,{XI:function(){return u.XI}});var u=n("../../node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs"),t=(...m)=>{let g=config,l=m;l.length===1&&Array.isArray(l[0])&&([l]=l),l.length!==1&&typeof l[l.length-1]!="string"&&(g={...config,...l.pop()});let _=l[0];(l.length!==1||typeof _=="string")&&(_={},l.forEach(d=>{_[d]=d}));let v={};return Object.keys(_).forEach(d=>{v[d]=action(_[d],g)}),v}},"../../node_modules/react-use/lib/misc/util.js":function(b,f){Object.defineProperty(f,"__esModule",{value:!0}),f.isNavigator=f.isBrowser=f.off=f.on=f.noop=void 0;var n=function(){};f.noop=n;function u(m){for(var g=[],l=1;l<arguments.length;l++)g[l-1]=arguments[l];m&&m.addEventListener&&m.addEventListener.apply(m,g)}f.on=u;function t(m){for(var g=[],l=1;l<arguments.length;l++)g[l-1]=arguments[l];m&&m.removeEventListener&&m.removeEventListener.apply(m,g)}f.off=t,f.isBrowser=typeof window<"u",f.isNavigator=typeof navigator<"u"},"../../node_modules/react-use/lib/useClickAway.js":function(b,f,n){var u;u={value:!0};var t=n("../../node_modules/react/index.js"),m=n("../../node_modules/react-use/lib/misc/util.js"),g=["mousedown","touchstart"],l=function(_,v,d){d===void 0&&(d=g);var E=t.useRef(v);t.useEffect(function(){E.current=v},[v]),t.useEffect(function(){for(var I=function(i){var e=_.current;e&&!e.contains(i.target)&&E.current(i)},S=0,y=d;S<y.length;S++){var c=y[S];m.on(document,c,I)}return function(){for(var i=0,e=d;i<e.length;i++){var s=e[i];m.off(document,s,I)}}},[d,_])};f.A=l},"./src/components/Segment/SegmentInput.story.tsx":function(b,f,n){n.r(f),n.d(f,{Basic:function(){return L},BasicInput:function(){return R},BasicInputWithHtmlAttributes:function(){return w},BasicInputWithPlaceholder:function(){return T},InputWithAutoFocus:function(){return D},default:function(){return _e}});var u=n("../../node_modules/@storybook/addon-actions/dist/index.mjs"),t=n("../../node_modules/react/index.js"),m=n("./src/components/Segment/SegmentSection.tsx"),g=n("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),l=n("../../node_modules/react-use/lib/useClickAway.js"),_=n("./src/themes/ThemeContext.tsx"),v=n("./src/utils/measureText.ts"),d=n("./src/components/Forms/InlineLabel.tsx"),E=n("./src/components/Segment/styles.ts"),I=n("./src/components/Segment/useExpandableLabel.tsx"),S=Object.defineProperty,y=Object.defineProperties,c=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(o,a,r)=>a in o?S(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,C=(o,a)=>{for(var r in a||(a={}))e.call(a,r)&&p(o,r,a[r]);if(i)for(var r of i(a))s.call(a,r)&&p(o,r,a[r]);return o},B=(o,a)=>y(o,c(a)),W=(o,a)=>{var r={};for(var h in o)e.call(o,h)&&a.indexOf(h)<0&&(r[h]=o[h]);if(o!=null&&i)for(var h of i(o))a.indexOf(h)<0&&s.call(o,h)&&(r[h]=o[h]);return r};const F=14;function x(o){var a=o,{value:r,onChange:h,Component:A,className:ve,placeholder:ce,inputPlaceholder:Se,disabled:ie,autofocus:he=!1,onExpandedChange:ye}=a,Ee=W(a,["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"]);const ue=(0,t.useRef)(null),[M,Ie]=(0,t.useState)(r),[Oe,Ce]=(0,t.useState)((0,v.kD)((r||"").toString(),F).width),[xe,,Pe,H]=(0,I.Q)(he,ye),Y=(0,_.of)(E.m);if((0,l.A)(ue,()=>{H(!1),h(M)}),!Pe)return t.createElement(xe,{disabled:ie,Component:A||t.createElement(d.c,{className:(0,g.cx)(Y.segment,{[Y.queryPlaceholder]:ce!==void 0&&!M,[Y.disabled]:ie},ve)},r||ce)});const be=(0,g.AH)({width:`${Math.max(Oe+20,32)}px`});return t.createElement("input",B(C({},Ee),{ref:ue,autoFocus:!0,className:(0,g.cx)("gf-form gf-form-input",be),value:M,placeholder:Se,onChange:j=>{const{width:Le}=(0,v.kD)(j.target.value,F);Ce(Le),Ie(j.target.value)},onBlur:()=>{H(!1),h(M)},onKeyDown:j=>{[13,27].includes(j.keyCode)&&(H(!1),h(M))}}))}try{x.displayName="SegmentInput",x.__docgenInfo={description:"",displayName:"SegmentInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(text: string | number) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!1,type:{name:"((expanded: boolean) => void)"}},autofocus:{defaultValue:{value:"false"},description:"",name:"autofocus",required:!1,type:{name:"boolean"}},inputPlaceholder:{defaultValue:null,description:"",name:"inputPlaceholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentInput.tsx#SegmentInput"]={docgenInfo:x.__docgenInfo,name:"SegmentInput",path:"src/components/Segment/SegmentInput.tsx#SegmentInput"})}catch{}var K=n("./src/components/Icon/Icon.tsx"),U=Object.defineProperty,V=Object.defineProperties,de=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,z=(o,a,r)=>a in o?U(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,O=(o,a)=>{for(var r in a||(a={}))me.call(a,r)&&z(o,r,a[r]);if(X)for(var r of X(a))pe.call(a,r)&&z(o,r,a[r]);return o},P=(o,a)=>V(o,de(a)),$,G,J,Q,Z,k,q,ee,te,ne,oe,ae,re,se,le;const N=({children:o})=>t.createElement(t.Fragment,null,t.createElement(m.L,{label:"Segment"},o)),R=()=>{const[o,a]=(0,t.useState)("some text");return t.createElement(N,null,t.createElement(x,{value:o,onChange:r=>{a(r),(0,u.XI)("Segment value changed")(r)}}))},fe={title:"Data Source/Segment/SegmentInput",component:x},T=()=>{const[o,a]=(0,t.useState)("");return t.createElement(N,null,t.createElement(x,{placeholder:"add text",value:o,onChange:r=>{a(r),(0,u.XI)("Segment value changed")(r)}}))},w=()=>{const[o,a]=(0,t.useState)("some text");return t.createElement(N,null,t.createElement(x,{"data-testid":"segment-input-test",id:"segment-input",value:o,onChange:r=>{a(r),(0,u.XI)("Segment value changed")(r)}}))},ge=({initialValue:o})=>{const[a,r]=(0,t.useState)(o);return t.createElement(x,{placeholder:"add text",autofocus:!0,value:a,onChange:h=>{r(h),(0,u.XI)("Segment value changed")(h)}})},D=()=>{const[o,a]=(0,t.useState)([]);return t.createElement(N,null,o.map((r,h)=>t.createElement(r,{initialValue:"test",key:h})),t.createElement("button",{type:"button",className:"gf-form-label query-part",onClick:()=>{a([...o,ge])}},t.createElement(K.I,{name:"plus"})))},L=o=>{const[a,r]=(0,t.useState)(o.value),h=P(O({},o),{value:a,onChange:A=>{r(A),(0,u.XI)("onChange fired")({value:A})},onExpandedChange:A=>(0,u.XI)("onExpandedChange fired")({expanded:A})});return t.createElement(m.L,{label:"Segment:"},t.createElement(x,O({},h)))};L.parameters={controls:{exclude:["value","onChange","Component","className","onExpandedChange"]}},L.args={value:"Initial input value",placeholder:"Placeholder text",disabled:!1,autofocus:!1,inputPlaceholder:"Start typing..."};var _e=fe;R.parameters=P(O({},R.parameters),{docs:P(O({},($=R.parameters)==null?void 0:$.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('some text');
  return <SegmentFrame>
      <SegmentInput value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},(J=(G=R.parameters)==null?void 0:G.docs)==null?void 0:J.source)})}),T.parameters=P(O({},T.parameters),{docs:P(O({},(Q=T.parameters)==null?void 0:Q.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('');
  return <SegmentFrame>
      <SegmentInput placeholder="add text" value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},(k=(Z=T.parameters)==null?void 0:Z.docs)==null?void 0:k.source)})}),w.parameters=P(O({},w.parameters),{docs:P(O({},(q=w.parameters)==null?void 0:q.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('some text');
  return <SegmentFrame>
      <SegmentInput data-testid="segment-input-test" id="segment-input" value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},(te=(ee=w.parameters)==null?void 0:ee.docs)==null?void 0:te.source)})}),D.parameters=P(O({},D.parameters),{docs:P(O({},(ne=D.parameters)==null?void 0:ne.docs),{source:O({originalSource:`() => {
  const [inputComponents, setInputComponents] = useState<Array<(props: InputComponentProps) => JSX.Element>>([]);
  return <SegmentFrame>
      {inputComponents.map((InputComponent, i) => <InputComponent initialValue="test" key={i} />)}
      <button type="button" className="gf-form-label query-part" onClick={() => {
      setInputComponents([...inputComponents, InputComponent]);
    }}>
        <Icon name="plus" />
      </button>
    </SegmentFrame>;
}`},(ae=(oe=D.parameters)==null?void 0:oe.docs)==null?void 0:ae.source)})}),L.parameters=P(O({},L.parameters),{docs:P(O({},(re=L.parameters)==null?void 0:re.docs),{source:O({originalSource:`(args: SegmentInputProps) => {
  const [value, setValue] = useState(args.value);
  const props: SegmentInputProps = {
    ...args,
    value,
    onChange: value => {
      setValue(value);
      action('onChange fired')({
        value
      });
    },
    onExpandedChange: expanded => action('onExpandedChange fired')({
      expanded
    })
  };
  return <SegmentSection label="Segment:">
      <SegmentInput {...props} />
    </SegmentSection>;
}`},(le=(se=L.parameters)==null?void 0:se.docs)==null?void 0:le.source)})})},"./src/components/Forms/InlineFieldRow.tsx":function(b,f,n){n.d(f,{C:function(){return S}});var u=n("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=Object.defineProperty,l=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,d=(c,i,e)=>i in c?g(c,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[i]=e,E=(c,i)=>{for(var e in i||(i={}))_.call(i,e)&&d(c,e,i[e]);if(l)for(var e of l(i))v.call(i,e)&&d(c,e,i[e]);return c},I=(c,i)=>{var e={};for(var s in c)_.call(c,s)&&i.indexOf(s)<0&&(e[s]=c[s]);if(c!=null&&l)for(var s of l(c))i.indexOf(s)<0&&v.call(c,s)&&(e[s]=c[s]);return e};const S=c=>{var i=c,{children:e,className:s}=i,p=I(i,["children","className"]);const C=(0,m.of)(y);return t.createElement("div",E({className:(0,u.cx)(C.container,s)},p),e)},y=c=>({container:(0,u.AH)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:c.spacing(.5)})});try{S.displayName="InlineFieldRow",S.__docgenInfo={description:"",displayName:"InlineFieldRow",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"]={docgenInfo:S.__docgenInfo,name:"InlineFieldRow",path:"src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"})}catch{}},"./src/components/Forms/InlineLabel.tsx":function(b,f,n){n.d(f,{c:function(){return c}});var u=n("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=n("./src/components/Icon/Icon.tsx"),l=n("./src/components/Tooltip/Tooltip.tsx"),_=Object.defineProperty,v=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,I=(e,s,p)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[s]=p,S=(e,s)=>{for(var p in s||(s={}))d.call(s,p)&&I(e,p,s[p]);if(v)for(var p of v(s))E.call(s,p)&&I(e,p,s[p]);return e},y=(e,s)=>{var p={};for(var C in e)d.call(e,C)&&s.indexOf(C)<0&&(p[C]=e[C]);if(e!=null&&v)for(var C of v(e))s.indexOf(C)<0&&E.call(e,C)&&(p[C]=e[C]);return p};const c=e=>{var s=e,{children:p,className:C,tooltip:B,width:W,transparent:F,interactive:x,as:K="label"}=s,U=y(s,["children","className","tooltip","width","transparent","interactive","as"]);const V=(0,m.of)(i,F,W);return t.createElement(K,S({className:(0,u.cx)(V.label,C)},U),p,B&&t.createElement(l.m,{interactive:x,placement:"top",content:B,theme:"info"},t.createElement(g.I,{tabIndex:0,name:"info-circle",size:"sm",className:V.icon})))},i=(e,s=!1,p)=>({label:(0,u.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.size.sm,backgroundColor:s?"transparent":e.colors.background.secondary,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),marginRight:e.spacing(.5),borderRadius:e.shape.radius.default,border:"none",width:p?p!=="auto"?`${8*p}px`:p:"100%",color:e.colors.text.primary}),icon:(0,u.AH)({color:e.colors.text.secondary,marginLeft:"10px",":hover":{color:e.colors.text.primary}})});try{c.displayName="InlineLabel",c.__docgenInfo={description:"",displayName:"InlineLabel",props:{tooltip:{defaultValue:null,description:`Content for the labels tooltip. If provided, an info icon with the tooltip content
will be displayed`,name:"tooltip",required:!1,type:{name:"PopoverContent"}},width:{defaultValue:null,description:"Custom width for the label",name:"width",required:!1,type:{name:'number | "auto"'}},transparent:{defaultValue:null,description:"Make labels's background transparent",name:"transparent",required:!1,type:{name:"boolean"}},interactive:{defaultValue:null,description:"Make tooltip interactive",name:"interactive",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"Controls which element the InlineLabel should be rendered into",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineLabel.tsx#InlineLabel"]={docgenInfo:c.__docgenInfo,name:"InlineLabel",path:"src/components/Forms/InlineLabel.tsx#InlineLabel"})}catch{}},"./src/components/Segment/SegmentSection.tsx":function(b,f,n){n.d(f,{L:function(){return _}});var u=n("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=n("./src/components/Forms/InlineFieldRow.tsx"),l=n("./src/components/Forms/InlineLabel.tsx");const _=({label:d,htmlFor:E,children:I,fill:S})=>{const y=(0,m.of)(v);return t.createElement(t.Fragment,null,t.createElement(g.C,null,t.createElement(l.c,{htmlFor:E,width:12,className:y.label},d),I,S&&t.createElement("div",{className:y.fill},t.createElement(l.c,null,""))))},v=d=>({label:(0,u.AH)({color:d.colors.primary.text}),fill:(0,u.AH)({flexGrow:1,marginBottom:d.spacing(.5)})});try{_.displayName="SegmentSection",_.__docgenInfo={description:"Horizontal section for editor components.",displayName:"SegmentSection",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},htmlFor:{defaultValue:null,description:"",name:"htmlFor",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"",name:"fill",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentSection.tsx#SegmentSection"]={docgenInfo:_.__docgenInfo,name:"SegmentSection",path:"src/components/Segment/SegmentSection.tsx#SegmentSection"})}catch{}},"./src/components/Segment/styles.ts":function(b,f,n){n.d(f,{m:function(){return t}});var u=n("../../node_modules/@emotion/css/dist/emotion-css.esm.js");const t=m=>{const g="v1"in m?m.v1.palette:m.palette;return{segment:(0,u.AH)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,u.AH)({color:g.gray2}),disabled:(0,u.AH)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},"./src/components/Segment/useExpandableLabel.tsx":function(b,f,n){n.d(f,{Q:function(){return g}});var u=n("../../node_modules/react/index.js"),t=n("./src/themes/ThemeContext.tsx"),m=n("./src/components/Button/Button.tsx");const g=(l,_)=>{const v=(0,u.useRef)(null),d=(0,t.of)(m.my),[E,I]=(0,u.useState)(l),[S,y]=(0,u.useState)(0),c=e=>{I(e),_&&_(e)};return[({Component:e,onClick:s,disabled:p})=>u.createElement("button",{type:"button",className:d,ref:v,disabled:p,onClick:()=>{c(!0),v&&v.current&&y(v.current.clientWidth*1.25),s?.()}},e),S,E,c]}},"./src/utils/measureText.ts":function(b,f,n){n.d(f,{Vr:function(){return v},Yc:function(){return l},kD:function(){return _}});let u;const t=new Map,m=500;let g="";function l(){return u||(u=document.createElement("canvas").getContext("2d")),u}function _(d,E,I=400){const S=`${I} ${E}px 'Inter'`,y=d+S,c=t.get(y);if(c)return c;const i=l();g!==S&&(i.font=g=S);const e=i.measureText(d);return t.size===m&&t.clear(),t.set(y,e),e}function v(d,E,I,S,y,c){const i=_(d,14,c),e=E/(i.width+2)*14,s=I/S,p=Math.min(s,e);return Math.min(p,y??p)}}}]);
