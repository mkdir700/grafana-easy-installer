(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6224],{6191:(Te,ye,O)=>{"use strict";O.d(ye,{X:()=>$});var V=O(32196),A=O(96540),D=O(40845);const $=({children:w})=>{const R=(0,D.of)(K);return A.createElement("div",{className:R.root},w)},K=w=>({root:(0,V.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:w.spacing(3),minHeight:w.spacing(4)})})},31347:(Te,ye,O)=>{"use strict";O.d(ye,{Z:()=>A});var V=O(96540);const A=({grow:D,shrink:$})=>V.createElement("div",{style:{display:"block",flexGrow:D,flexShrink:$}})},22354:(Te,ye,O)=>{"use strict";O.d(ye,{W:()=>ae});var V=O(32196),A=O(96540),D=O(40845),$=O(88323),K=O(4603),w=Object.defineProperty,R=Object.defineProperties,M=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,re=(Me,Ve,Se)=>Ve in Me?w(Me,Ve,{enumerable:!0,configurable:!0,writable:!0,value:Se}):Me[Ve]=Se,Z=(Me,Ve)=>{for(var Se in Ve||(Ve={}))q.call(Ve,Se)&&re(Me,Se,Ve[Se]);if(I)for(var Se of I(Ve))te.call(Ve,Se)&&re(Me,Se,Ve[Se]);return Me},le=(Me,Ve)=>R(Me,M(Ve)),be=(Me,Ve)=>{var Se={};for(var rt in Me)q.call(Me,rt)&&Ve.indexOf(rt)<0&&(Se[rt]=Me[rt]);if(Me!=null&&I)for(var rt of I(Me))Ve.indexOf(rt)<0&&te.call(Me,rt)&&(Se[rt]=Me[rt]);return Se};function ae(Me){var Ve=Me,{label:Se}=Ve,rt=be(Ve,["label"]);const Be=(0,D.of)($e),[lt]=(0,A.useState)(()=>Math.random().toString(16).slice(2)),it={SelectContainer:Le,ValueContainer:Oe,SingleValue:Oe};return A.createElement("div",{className:Be.root},Se&&A.createElement("label",{className:Be.label,htmlFor:lt},Se,":","\xA0"),A.createElement($.l6,le(Z({openMenuOnFocus:!0,inputId:lt},rt),{components:it})))}const Le=Me=>{const{children:Ve}=Me,Se=(0,D.of)($e);return A.createElement(K.K,le(Z({},Me),{className:(0,V.cx)(Me.className,Se.container)}),Ve)},Oe=Me=>{const{className:Ve,children:Se}=Me,rt=(0,D.of)($e);return A.createElement("div",{className:(0,V.cx)(Ve,rt.valueContainer)},Se)},$e=Me=>({root:(0,V.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,V.css)({color:Me.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,V.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,V.css)({display:"flex",alignItems:"center",flex:"initial",color:Me.colors.text.secondary,fontSize:12})})},49790:function(Te){(function(ye,O){Te.exports=O()})(this,function(){"use strict";var ye=Array.prototype.slice;function O(s,p){p&&(s.prototype=Object.create(p.prototype)),s.prototype.constructor=s}function V(s){return K(s)?s:nt(s)}O(A,V);function A(s){return w(s)?s:vr(s)}O(D,V);function D(s){return R(s)?s:_t(s)}O($,V);function $(s){return K(s)&&!M(s)?s:Br(s)}function K(s){return!!(s&&s[q])}function w(s){return!!(s&&s[te])}function R(s){return!!(s&&s[re])}function M(s){return w(s)||R(s)}function I(s){return!!(s&&s[Z])}V.isIterable=K,V.isKeyed=w,V.isIndexed=R,V.isAssociative=M,V.isOrdered=I,V.Keyed=A,V.Indexed=D,V.Set=$;var q="@@__IMMUTABLE_ITERABLE__@@",te="@@__IMMUTABLE_KEYED__@@",re="@@__IMMUTABLE_INDEXED__@@",Z="@@__IMMUTABLE_ORDERED__@@",le="delete",be=5,ae=1<<be,Le=ae-1,Oe={},$e={value:!1},Me={value:!1};function Ve(s){return s.value=!1,s}function Se(s){s&&(s.value=!0)}function rt(){}function Be(s,p){p=p||0;for(var y=Math.max(0,s.length-p),F=new Array(y),C=0;C<y;C++)F[C]=s[C+p];return F}function lt(s){return s.size===void 0&&(s.size=s.__iterate(Qe)),s.size}function it(s,p){if(typeof p!="number"){var y=p>>>0;if(""+y!==p||y===4294967295)return NaN;p=y}return p<0?lt(s)+p:p}function Qe(){return!0}function Je(s,p,y){return(s===0||y!==void 0&&s<=-y)&&(p===void 0||y!==void 0&&p>=y)}function mt(s,p){return Jt(s,p,0)}function _e(s,p){return Jt(s,p,p)}function Jt(s,p,y){return s===void 0?y:s<0?Math.max(0,p+s):p===void 0?s:Math.min(p,s)}var gt=0,Dt=1,Lt=2,ee=typeof Symbol=="function"&&Symbol.iterator,H="@@iterator",X=ee||H;function ce(s){this.next=s}ce.prototype.toString=function(){return"[Iterator]"},ce.KEYS=gt,ce.VALUES=Dt,ce.ENTRIES=Lt,ce.prototype.inspect=ce.prototype.toSource=function(){return this.toString()},ce.prototype[X]=function(){return this};function ge(s,p,y,F){var C=s===0?p:s===1?y:[p,y];return F?F.value=C:F={value:C,done:!1},F}function g(){return{value:void 0,done:!0}}function we(s){return!!xt(s)}function Re(s){return s&&typeof s.next=="function"}function qe(s){var p=xt(s);return p&&p.call(s)}function xt(s){var p=s&&(ee&&s[ee]||s[H]);if(typeof p=="function")return p}function Gt(s){return s&&typeof s.length=="number"}O(nt,V);function nt(s){return s==null?zt():K(s)?s.toSeq():Zr(s)}nt.of=function(){return nt(arguments)},nt.prototype.toSeq=function(){return this},nt.prototype.toString=function(){return this.__toString("Seq {","}")},nt.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},nt.prototype.__iterate=function(s,p){return ca(this,s,p,!0)},nt.prototype.__iterator=function(s,p){return Jn(this,s,p,!0)},O(vr,nt);function vr(s){return s==null?zt().toKeyedSeq():K(s)?w(s)?s.toSeq():s.fromEntrySeq():kr(s)}vr.prototype.toKeyedSeq=function(){return this},O(_t,nt);function _t(s){return s==null?zt():K(s)?w(s)?s.entrySeq():s.toIndexedSeq():cn(s)}_t.of=function(){return _t(arguments)},_t.prototype.toIndexedSeq=function(){return this},_t.prototype.toString=function(){return this.__toString("Seq [","]")},_t.prototype.__iterate=function(s,p){return ca(this,s,p,!1)},_t.prototype.__iterator=function(s,p){return Jn(this,s,p,!1)},O(Br,nt);function Br(s){return(s==null?zt():K(s)?w(s)?s.entrySeq():s:cn(s)).toSetSeq()}Br.of=function(){return Br(arguments)},Br.prototype.toSetSeq=function(){return this},nt.isSeq=_a,nt.Keyed=vr,nt.Set=Br,nt.Indexed=_t;var jn="@@__IMMUTABLE_SEQ__@@";nt.prototype[jn]=!0,O(Tr,_t);function Tr(s){this._array=s,this.size=s.length}Tr.prototype.get=function(s,p){return this.has(s)?this._array[it(this,s)]:p},Tr.prototype.__iterate=function(s,p){for(var y=this._array,F=y.length-1,C=0;C<=F;C++)if(s(y[p?F-C:C],C,this)===!1)return C+1;return C},Tr.prototype.__iterator=function(s,p){var y=this._array,F=y.length-1,C=0;return new ce(function(){return C>F?g():ge(s,C,y[p?F-C++:C++])})},O(Fr,vr);function Fr(s){var p=Object.keys(s);this._object=s,this._keys=p,this.size=p.length}Fr.prototype.get=function(s,p){return p!==void 0&&!this.has(s)?p:this._object[s]},Fr.prototype.has=function(s){return this._object.hasOwnProperty(s)},Fr.prototype.__iterate=function(s,p){for(var y=this._object,F=this._keys,C=F.length-1,j=0;j<=C;j++){var k=F[p?C-j:j];if(s(y[k],k,this)===!1)return j+1}return j},Fr.prototype.__iterator=function(s,p){var y=this._object,F=this._keys,C=F.length-1,j=0;return new ce(function(){var k=F[p?C-j:j];return j++>C?g():ge(s,k,y[k])})},Fr.prototype[Z]=!0,O(cr,_t);function cr(s){this._iterable=s,this.size=s.length||s.size}cr.prototype.__iterateUncached=function(s,p){if(p)return this.cacheResult().__iterate(s,p);var y=this._iterable,F=qe(y),C=0;if(Re(F))for(var j;!(j=F.next()).done&&s(j.value,C++,this)!==!1;);return C},cr.prototype.__iteratorUncached=function(s,p){if(p)return this.cacheResult().__iterator(s,p);var y=this._iterable,F=qe(y);if(!Re(F))return new ce(g);var C=0;return new ce(function(){var j=F.next();return j.done?j:ge(s,C++,j.value)})},O(Wr,_t);function Wr(s){this._iterator=s,this._iteratorCache=[]}Wr.prototype.__iterateUncached=function(s,p){if(p)return this.cacheResult().__iterate(s,p);for(var y=this._iterator,F=this._iteratorCache,C=0;C<F.length;)if(s(F[C],C++,this)===!1)return C;for(var j;!(j=y.next()).done;){var k=j.value;if(F[C]=k,s(k,C++,this)===!1)break}return C},Wr.prototype.__iteratorUncached=function(s,p){if(p)return this.cacheResult().__iterator(s,p);var y=this._iterator,F=this._iteratorCache,C=0;return new ce(function(){if(C>=F.length){var j=y.next();if(j.done)return j;F[C]=j.value}return ge(s,C,F[C++])})};function _a(s){return!!(s&&s[jn])}var Za;function zt(){return Za||(Za=new Tr([]))}function kr(s){var p=Array.isArray(s)?new Tr(s).fromEntrySeq():Re(s)?new Wr(s).fromEntrySeq():we(s)?new cr(s).fromEntrySeq():typeof s=="object"?new Fr(s):void 0;if(!p)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+s);return p}function cn(s){var p=Ur(s);if(!p)throw new TypeError("Expected Array or iterable object of values: "+s);return p}function Zr(s){var p=Ur(s)||typeof s=="object"&&new Fr(s);if(!p)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+s);return p}function Ur(s){return Gt(s)?new Tr(s):Re(s)?new Wr(s):we(s)?new cr(s):void 0}function ca(s,p,y,F){var C=s._cache;if(C){for(var j=C.length-1,k=0;k<=j;k++){var Y=C[y?j-k:k];if(p(Y[1],F?Y[0]:k,s)===!1)return k+1}return k}return s.__iterateUncached(p,y)}function Jn(s,p,y,F){var C=s._cache;if(C){var j=C.length-1,k=0;return new ce(function(){var Y=C[y?j-k:k];return k++>j?g():ge(p,F?Y[0]:k-1,Y[1])})}return s.__iteratorUncached(p,y)}function Er(s,p){return p?Ra(p,s,"",{"":s}):Ir(s)}function Ra(s,p,y,F){return Array.isArray(p)?s.call(F,y,_t(p).map(function(C,j){return Ra(s,C,j,p)})):fn(p)?s.call(F,y,vr(p).map(function(C,j){return Ra(s,C,j,p)})):p}function Ir(s){return Array.isArray(s)?_t(s).map(Ir).toList():fn(s)?vr(s).map(Ir).toMap():s}function fn(s){return s&&(s.constructor===Object||s.constructor===void 0)}function qt(s,p){if(s===p||s!==s&&p!==p)return!0;if(!s||!p)return!1;if(typeof s.valueOf=="function"&&typeof p.valueOf=="function"){if(s=s.valueOf(),p=p.valueOf(),s===p||s!==s&&p!==p)return!0;if(!s||!p)return!1}return!!(typeof s.equals=="function"&&typeof p.equals=="function"&&s.equals(p))}function fa(s,p){if(s===p)return!0;if(!K(p)||s.size!==void 0&&p.size!==void 0&&s.size!==p.size||s.__hash!==void 0&&p.__hash!==void 0&&s.__hash!==p.__hash||w(s)!==w(p)||R(s)!==R(p)||I(s)!==I(p))return!1;if(s.size===0&&p.size===0)return!0;var y=!M(s);if(I(s)){var F=s.entries();return p.every(function(fe,de){var he=F.next().value;return he&&qt(he[1],fe)&&(y||qt(he[0],de))})&&F.next().done}var C=!1;if(s.size===void 0)if(p.size===void 0)typeof s.cacheResult=="function"&&s.cacheResult();else{C=!0;var j=s;s=p,p=j}var k=!0,Y=p.__iterate(function(fe,de){if(y?!s.has(fe):C?!qt(fe,s.get(de,Oe)):!qt(s.get(de,Oe),fe))return k=!1,!1});return k&&s.size===Y}O(fr,_t);function fr(s,p){if(!(this instanceof fr))return new fr(s,p);if(this._value=s,this.size=p===void 0?1/0:Math.max(0,p),this.size===0){if(Aa)return Aa;Aa=this}}fr.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},fr.prototype.get=function(s,p){return this.has(s)?this._value:p},fr.prototype.includes=function(s){return qt(this._value,s)},fr.prototype.slice=function(s,p){var y=this.size;return Je(s,p,y)?this:new fr(this._value,_e(p,y)-mt(s,y))},fr.prototype.reverse=function(){return this},fr.prototype.indexOf=function(s){return qt(this._value,s)?0:-1},fr.prototype.lastIndexOf=function(s){return qt(this._value,s)?this.size:-1},fr.prototype.__iterate=function(s,p){for(var y=0;y<this.size;y++)if(s(this._value,y,this)===!1)return y+1;return y},fr.prototype.__iterator=function(s,p){var y=this,F=0;return new ce(function(){return F<y.size?ge(s,F++,y._value):g()})},fr.prototype.equals=function(s){return s instanceof fr?qt(this._value,s._value):fa(s)};var Aa;function Qn(s,p){if(!s)throw new Error(p)}O(Rt,_t);function Rt(s,p,y){if(!(this instanceof Rt))return new Rt(s,p,y);if(Qn(y!==0,"Cannot step a Range by 0"),s=s||0,p===void 0&&(p=1/0),y=y===void 0?1:Math.abs(y),p<s&&(y=-y),this._start=s,this._end=p,this._step=y,this.size=Math.max(0,Math.ceil((p-s)/y-1)+1),this.size===0){if(da)return da;da=this}}Rt.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Rt.prototype.get=function(s,p){return this.has(s)?this._start+it(this,s)*this._step:p},Rt.prototype.includes=function(s){var p=(s-this._start)/this._step;return p>=0&&p<this.size&&p===Math.floor(p)},Rt.prototype.slice=function(s,p){return Je(s,p,this.size)?this:(s=mt(s,this.size),p=_e(p,this.size),p<=s?new Rt(0,0):new Rt(this.get(s,this._end),this.get(p,this._end),this._step))},Rt.prototype.indexOf=function(s){var p=s-this._start;if(p%this._step===0){var y=p/this._step;if(y>=0&&y<this.size)return y}return-1},Rt.prototype.lastIndexOf=function(s){return this.indexOf(s)},Rt.prototype.__iterate=function(s,p){for(var y=this.size-1,F=this._step,C=p?this._start+y*F:this._start,j=0;j<=y;j++){if(s(C,j,this)===!1)return j+1;C+=p?-F:F}return j},Rt.prototype.__iterator=function(s,p){var y=this.size-1,F=this._step,C=p?this._start+y*F:this._start,j=0;return new ce(function(){var k=C;return C+=p?-F:F,j>y?g():ge(s,j++,k)})},Rt.prototype.equals=function(s){return s instanceof Rt?this._start===s._start&&this._end===s._end&&this._step===s._step:fa(this,s)};var da;O(dn,V);function dn(){throw TypeError("Abstract")}O(Qr,dn);function Qr(){}O(Dn,dn);function Dn(){}O(Yn,dn);function Yn(){}dn.Keyed=Qr,dn.Indexed=Dn,dn.Set=Yn;var Vn=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(p,y){p=p|0,y=y|0;var F=p&65535,C=y&65535;return F*C+((p>>>16)*C+F*(y>>>16)<<16>>>0)|0};function Xn(s){return s>>>1&1073741824|s&3221225471}function wr(s){if(s===!1||s===null||s===void 0||typeof s.valueOf=="function"&&(s=s.valueOf(),s===!1||s===null||s===void 0))return 0;if(s===!0)return 1;var p=typeof s;if(p==="number"){if(s!==s||s===1/0)return 0;var y=s|0;for(y!==s&&(y^=s*4294967295);s>4294967295;)s/=4294967295,y^=s;return Xn(y)}if(p==="string")return s.length>Qt?ei(s):pa(s);if(typeof s.hashCode=="function")return s.hashCode();if(p==="object")return ti(s);if(typeof s.toString=="function")return pa(s.toString());throw new Error("Value type "+p+" cannot be hashed.")}function ei(s){var p=En[s];return p===void 0&&(p=pa(s),en===Gr&&(en=0,En={}),en++,En[s]=p),p}function pa(s){for(var p=0,y=0;y<s.length;y++)p=31*p+s.charCodeAt(y)|0;return Xn(p)}function ti(s){var p;if(Pa&&(p=Ia.get(s),p!==void 0)||(p=s[$t],p!==void 0)||!Mt&&(p=s.propertyIsEnumerable&&s.propertyIsEnumerable[$t],p!==void 0||(p=zr(s),p!==void 0)))return p;if(p=++ja,ja&1073741824&&(ja=0),Pa)Ia.set(s,p);else{if(ri!==void 0&&ri(s)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Mt)Object.defineProperty(s,$t,{enumerable:!1,configurable:!1,writable:!1,value:p});else if(s.propertyIsEnumerable!==void 0&&s.propertyIsEnumerable===s.constructor.prototype.propertyIsEnumerable)s.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},s.propertyIsEnumerable[$t]=p;else if(s.nodeType!==void 0)s[$t]=p;else throw new Error("Unable to set a non-enumerable property on object.")}return p}var ri=Object.isExtensible,Mt=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function zr(s){if(s&&s.nodeType>0)switch(s.nodeType){case 1:return s.uniqueID;case 9:return s.documentElement&&s.documentElement.uniqueID}}var Pa=typeof WeakMap=="function",Ia;Pa&&(Ia=new WeakMap);var ja=0,$t="__immutablehash__";typeof Symbol=="function"&&($t=Symbol($t));var Qt=16,Gr=255,en=0,En={};function jr(s){Qn(s!==1/0,"Cannot perform this action with an infinite size.")}O(ct,Qr);function ct(s){return s==null?Kt():At(s)&&!I(s)?s:Kt().withMutations(function(p){var y=A(s);jr(y.size),y.forEach(function(F,C){return p.set(C,F)})})}ct.of=function(){var s=ye.call(arguments,0);return Kt().withMutations(function(p){for(var y=0;y<s.length;y+=2){if(y+1>=s.length)throw new Error("Missing value for key: "+s[y]);p.set(s[y],s[y+1])}})},ct.prototype.toString=function(){return this.__toString("Map {","}")},ct.prototype.get=function(s,p){return this._root?this._root.get(0,void 0,s,p):p},ct.prototype.set=function(s,p){return ot(this,s,p)},ct.prototype.setIn=function(s,p){return this.updateIn(s,Oe,function(){return p})},ct.prototype.remove=function(s){return ot(this,s,Oe)},ct.prototype.deleteIn=function(s){return this.updateIn(s,function(){return Oe})},ct.prototype.update=function(s,p,y){return arguments.length===1?s(this):this.updateIn([s],p,y)},ct.prototype.updateIn=function(s,p,y){y||(y=p,p=void 0);var F=Ae(this,hn(s),p,y);return F===Oe?void 0:F},ct.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Kt()},ct.prototype.merge=function(){return va(this,void 0,arguments)},ct.prototype.mergeWith=function(s){var p=ye.call(arguments,1);return va(this,s,p)},ct.prototype.mergeIn=function(s){var p=ye.call(arguments,1);return this.updateIn(s,Kt(),function(y){return typeof y.merge=="function"?y.merge.apply(y,p):p[p.length-1]})},ct.prototype.mergeDeep=function(){return va(this,It,arguments)},ct.prototype.mergeDeepWith=function(s){var p=ye.call(arguments,1);return va(this,Nt(s),p)},ct.prototype.mergeDeepIn=function(s){var p=ye.call(arguments,1);return this.updateIn(s,Kt(),function(y){return typeof y.mergeDeep=="function"?y.mergeDeep.apply(y,p):p[p.length-1]})},ct.prototype.sort=function(s){return nr(ha(this,s))},ct.prototype.sortBy=function(s,p){return nr(ha(this,p,s))},ct.prototype.withMutations=function(s){var p=this.asMutable();return s(p),p.wasAltered()?p.__ensureOwner(this.__ownerID):this},ct.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new rt)},ct.prototype.asImmutable=function(){return this.__ensureOwner()},ct.prototype.wasAltered=function(){return this.__altered},ct.prototype.__iterator=function(s,p){return new Lr(this,s,p)},ct.prototype.__iterate=function(s,p){var y=this,F=0;return this._root&&this._root.iterate(function(C){return F++,s(C[1],C[0],y)},p),F},ct.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?Ce(this.size,this._root,s,this.__hash):(this.__ownerID=s,this.__altered=!1,this)};function At(s){return!!(s&&s[Pt])}ct.isMap=At;var Pt="@@__IMMUTABLE_MAP__@@",tt=ct.prototype;tt[Pt]=!0,tt[le]=tt.remove,tt.removeIn=tt.deleteIn;function Zn(s,p){this.ownerID=s,this.entries=p}Zn.prototype.get=function(s,p,y,F){for(var C=this.entries,j=0,k=C.length;j<k;j++)if(qt(y,C[j][0]))return C[j][1];return F},Zn.prototype.update=function(s,p,y,F,C,j,k){for(var Y=C===Oe,fe=this.entries,de=0,he=fe.length;de<he&&!qt(F,fe[de][0]);de++);var je=de<he;if(je?fe[de][1]===C:Y)return this;if(Se(k),(Y||!je)&&Se(j),!(Y&&fe.length===1)){if(!je&&!Y&&fe.length>=Uo)return ao(s,fe,F,C);var We=s&&s===this.ownerID,st=We?fe:Be(fe);return je?Y?de===he-1?st.pop():st[de]=st.pop():st[de]=[F,C]:st.push([F,C]),We?(this.entries=st,this):new Zn(s,st)}};function tn(s,p,y){this.ownerID=s,this.bitmap=p,this.nodes=y}tn.prototype.get=function(s,p,y,F){p===void 0&&(p=wr(y));var C=1<<((s===0?p:p>>>s)&Le),j=this.bitmap;return j&C?this.nodes[ai(j&C-1)].get(s+be,p,y,F):F},tn.prototype.update=function(s,p,y,F,C,j,k){y===void 0&&(y=wr(F));var Y=(p===0?y:y>>>p)&Le,fe=1<<Y,de=this.bitmap,he=(de&fe)!==0;if(!he&&C===Oe)return this;var je=ai(de&fe-1),We=this.nodes,st=he?We[je]:void 0,pt=Yr(st,s,p+be,y,F,C,j,k);if(pt===st)return this;if(!he&&pt&&We.length>=Ge)return kt(s,We,de,Y,pt);if(he&&!pt&&We.length===2&&no(We[je^1]))return We[je^1];if(he&&pt&&We.length===1&&no(pt))return pt;var Xt=s&&s===this.ownerID,hr=he?pt?de:de^fe:de|fe,ln=he?pt?io(We,je,pt,Xt):Ri(We,je,Xt):oo(We,je,pt,Xt);return Xt?(this.bitmap=hr,this.nodes=ln,this):new tn(s,hr,ln)};function ea(s,p,y){this.ownerID=s,this.count=p,this.nodes=y}ea.prototype.get=function(s,p,y,F){p===void 0&&(p=wr(y));var C=(s===0?p:p>>>s)&Le,j=this.nodes[C];return j?j.get(s+be,p,y,F):F},ea.prototype.update=function(s,p,y,F,C,j,k){y===void 0&&(y=wr(F));var Y=(p===0?y:y>>>p)&Le,fe=C===Oe,de=this.nodes,he=de[Y];if(fe&&!he)return this;var je=Yr(he,s,p+be,y,F,C,j,k);if(je===he)return this;var We=this.count;if(!he)We++;else if(!je&&(We--,We<uo))return Vt(s,de,We,Y);var st=s&&s===this.ownerID,pt=io(de,Y,je,st);return st?(this.count=We,this.nodes=pt,this):new ea(s,We,pt)};function pn(s,p,y){this.ownerID=s,this.keyHash=p,this.entries=y}pn.prototype.get=function(s,p,y,F){for(var C=this.entries,j=0,k=C.length;j<k;j++)if(qt(y,C[j][0]))return C[j][1];return F},pn.prototype.update=function(s,p,y,F,C,j,k){y===void 0&&(y=wr(F));var Y=C===Oe;if(y!==this.keyHash)return Y?this:(Se(k),Se(j),ni(this,s,p,y,[F,C]));for(var fe=this.entries,de=0,he=fe.length;de<he&&!qt(F,fe[de][0]);de++);var je=de<he;if(je?fe[de][1]===C:Y)return this;if(Se(k),(Y||!je)&&Se(j),Y&&he===2)return new Ue(s,this.keyHash,fe[de^1]);var We=s&&s===this.ownerID,st=We?fe:Be(fe);return je?Y?de===he-1?st.pop():st[de]=st.pop():st[de]=[F,C]:st.push([F,C]),We?(this.entries=st,this):new pn(s,this.keyHash,st)};function Ue(s,p,y){this.ownerID=s,this.keyHash=p,this.entry=y}Ue.prototype.get=function(s,p,y,F){return qt(y,this.entry[0])?this.entry[1]:F},Ue.prototype.update=function(s,p,y,F,C,j,k){var Y=C===Oe,fe=qt(F,this.entry[0]);if(fe?C===this.entry[1]:Y)return this;if(Se(k),Y){Se(j);return}return fe?s&&s===this.ownerID?(this.entry[1]=C,this):new Ue(s,this.keyHash,[F,C]):(Se(j),ni(this,s,p,wr(F),[F,C]))},Zn.prototype.iterate=pn.prototype.iterate=function(s,p){for(var y=this.entries,F=0,C=y.length-1;F<=C;F++)if(s(y[p?C-F:F])===!1)return!1},tn.prototype.iterate=ea.prototype.iterate=function(s,p){for(var y=this.nodes,F=0,C=y.length-1;F<=C;F++){var j=y[p?C-F:F];if(j&&j.iterate(s,p)===!1)return!1}},Ue.prototype.iterate=function(s,p){return s(this.entry)},O(Lr,ce);function Lr(s,p,y){this._type=p,this._reverse=y,this._stack=s._root&&oe(s._root)}Lr.prototype.next=function(){for(var s=this._type,p=this._stack;p;){var y=p.node,F=p.index++,C;if(y.entry){if(F===0)return U(s,y.entry)}else if(y.entries){if(C=y.entries.length-1,F<=C)return U(s,y.entries[this._reverse?C-F:F])}else if(C=y.nodes.length-1,F<=C){var j=y.nodes[this._reverse?C-F:F];if(j){if(j.entry)return U(s,j.entry);p=this._stack=oe(j,p)}continue}p=this._stack=this._stack.__prev}return g()};function U(s,p){return ge(s,p[0],p[1])}function oe(s,p){return{node:s,index:0,__prev:p}}function Ce(s,p,y,F){var C=Object.create(tt);return C.size=s,C._root=p,C.__ownerID=y,C.__hash=F,C.__altered=!1,C}var at;function Kt(){return at||(at=Ce(0))}function ot(s,p,y){var F,C;if(s._root){var j=Ve($e),k=Ve(Me);if(F=Yr(s._root,s.__ownerID,0,void 0,p,y,j,k),!k.value)return s;C=s.size+(j.value?y===Oe?-1:1:0)}else{if(y===Oe)return s;C=1,F=new Zn(s.__ownerID,[[p,y]])}return s.__ownerID?(s.size=C,s._root=F,s.__hash=void 0,s.__altered=!0,s):F?Ce(C,F):Kt()}function Yr(s,p,y,F,C,j,k,Y){return s?s.update(p,y,F,C,j,k,Y):j===Oe?s:(Se(Y),Se(k),new Ue(p,F,[C,j]))}function no(s){return s.constructor===Ue||s.constructor===pn}function ni(s,p,y,F,C){if(s.keyHash===F)return new pn(p,F,[s.entry,C]);var j=(y===0?s.keyHash:s.keyHash>>>y)&Le,k=(y===0?F:F>>>y)&Le,Y,fe=j===k?[ni(s,p,y+be,F,C)]:(Y=new Ue(p,F,C),j<k?[s,Y]:[Y,s]);return new tn(p,1<<j|1<<k,fe)}function ao(s,p,y,F){s||(s=new rt);for(var C=new Ue(s,wr(y),[y,F]),j=0;j<p.length;j++){var k=p[j];C=C.update(s,0,void 0,k[0],k[1])}return C}function Vt(s,p,y,F){for(var C=0,j=0,k=new Array(y),Y=0,fe=1,de=p.length;Y<de;Y++,fe<<=1){var he=p[Y];he!==void 0&&Y!==F&&(C|=fe,k[j++]=he)}return new tn(s,C,k)}function kt(s,p,y,F,C){for(var j=0,k=new Array(ae),Y=0;y!==0;Y++,y>>>=1)k[Y]=y&1?p[j++]:void 0;return k[F]=C,new ea(s,j+1,k)}function va(s,p,y){for(var F=[],C=0;C<y.length;C++){var j=y[C],k=A(j);K(j)||(k=k.map(function(Y){return Er(Y)})),F.push(k)}return ke(s,p,F)}function It(s,p,y){return s&&s.mergeDeep&&K(p)?s.mergeDeep(p):qt(s,p)?s:p}function Nt(s){return function(p,y,F){if(p&&p.mergeDeepWith&&K(y))return p.mergeDeepWith(s,y);var C=s(p,y,F);return qt(p,C)?p:C}}function ke(s,p,y){return y=y.filter(function(F){return F.size!==0}),y.length===0?s:s.size===0&&!s.__ownerID&&y.length===1?s.constructor(y[0]):s.withMutations(function(F){for(var C=p?function(k,Y){F.update(Y,Oe,function(fe){return fe===Oe?k:p(fe,k,Y)})}:function(k,Y){F.set(Y,k)},j=0;j<y.length;j++)y[j].forEach(C)})}function Ae(s,p,y,F){var C=s===Oe,j=p.next();if(j.done){var k=C?y:s,Y=F(k);return Y===k?s:Y}Qn(C||s&&s.set,"invalid keyPath");var fe=j.value,de=C?Oe:s.get(fe,Oe),he=Ae(de,p,y,F);return he===de?s:he===Oe?s.remove(fe):(C?Kt():s).set(fe,he)}function ai(s){return s=s-(s>>1&1431655765),s=(s&858993459)+(s>>2&858993459),s=s+(s>>4)&252645135,s=s+(s>>8),s=s+(s>>16),s&127}function io(s,p,y,F){var C=F?s:Be(s);return C[p]=y,C}function oo(s,p,y,F){var C=s.length+1;if(F&&p+1===C)return s[p]=y,s;for(var j=new Array(C),k=0,Y=0;Y<C;Y++)Y===p?(j[Y]=y,k=-1):j[Y]=s[Y+k];return j}function Ri(s,p,y){var F=s.length-1;if(y&&p===F)return s.pop(),s;for(var C=new Array(F),j=0,k=0;k<F;k++)k===p&&(j=1),C[k]=s[k+j];return C}var Uo=ae/4,Ge=ae/2,uo=ae/4;O(Ht,Dn);function Ht(s){var p=Tt();if(s==null)return p;if(Ai(s))return s;var y=D(s),F=y.size;return F===0?p:(jr(F),F>0&&F<ae?Ct(0,F,be,null,new Ot(y.toArray())):p.withMutations(function(C){C.setSize(F),y.forEach(function(j,k){return C.set(k,j)})}))}Ht.of=function(){return this(arguments)},Ht.prototype.toString=function(){return this.__toString("List [","]")},Ht.prototype.get=function(s,p){if(s=it(this,s),s>=0&&s<this.size){s+=this._origin;var y=ur(this,s);return y&&y.array[s&Le]}return p},Ht.prototype.set=function(s,p){return co(this,s,p)},Ht.prototype.remove=function(s){return this.has(s)?s===0?this.shift():s===this.size-1?this.pop():this.splice(s,1):this},Ht.prototype.insert=function(s,p){return this.splice(s,0,p)},Ht.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=be,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Tt()},Ht.prototype.push=function(){var s=arguments,p=this.size;return this.withMutations(function(y){nn(y,0,p+s.length);for(var F=0;F<s.length;F++)y.set(p+F,s[F])})},Ht.prototype.pop=function(){return nn(this,0,-1)},Ht.prototype.unshift=function(){var s=arguments;return this.withMutations(function(p){nn(p,-s.length);for(var y=0;y<s.length;y++)p.set(y,s[y])})},Ht.prototype.shift=function(){return nn(this,1)},Ht.prototype.merge=function(){return Nn(this,void 0,arguments)},Ht.prototype.mergeWith=function(s){var p=ye.call(arguments,1);return Nn(this,s,p)},Ht.prototype.mergeDeep=function(){return Nn(this,It,arguments)},Ht.prototype.mergeDeepWith=function(s){var p=ye.call(arguments,1);return Nn(this,Nt(s),p)},Ht.prototype.setSize=function(s){return nn(this,0,s)},Ht.prototype.slice=function(s,p){var y=this.size;return Je(s,p,y)?this:nn(this,mt(s,y),_e(p,y))},Ht.prototype.__iterator=function(s,p){var y=0,F=lo(this,p);return new ce(function(){var C=F();return C===Ke?g():ge(s,y++,C)})},Ht.prototype.__iterate=function(s,p){for(var y=0,F=lo(this,p),C;(C=F())!==Ke&&s(C,y++,this)!==!1;);return y},Ht.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?Ct(this._origin,this._capacity,this._level,this._root,this._tail,s,this.__hash):(this.__ownerID=s,this)};function Ai(s){return!!(s&&s[Ye])}Ht.isList=Ai;var Ye="@@__IMMUTABLE_LIST__@@",ft=Ht.prototype;ft[Ye]=!0,ft[le]=ft.remove,ft.setIn=tt.setIn,ft.deleteIn=ft.removeIn=tt.removeIn,ft.update=tt.update,ft.updateIn=tt.updateIn,ft.mergeIn=tt.mergeIn,ft.mergeDeepIn=tt.mergeDeepIn,ft.withMutations=tt.withMutations,ft.asMutable=tt.asMutable,ft.asImmutable=tt.asImmutable,ft.wasAltered=tt.wasAltered;function Ot(s,p){this.array=s,this.ownerID=p}Ot.prototype.removeBefore=function(s,p,y){if(y===p?1<<p:this.array.length===0)return this;var F=y>>>p&Le;if(F>=this.array.length)return new Ot([],s);var C=F===0,j;if(p>0){var k=this.array[F];if(j=k&&k.removeBefore(s,p-be,y),j===k&&C)return this}if(C&&!j)return this;var Y=rn(this,s);if(!C)for(var fe=0;fe<F;fe++)Y.array[fe]=void 0;return j&&(Y.array[F]=j),Y},Ot.prototype.removeAfter=function(s,p,y){if(y===(p?1<<p:0)||this.array.length===0)return this;var F=y-1>>>p&Le;if(F>=this.array.length)return this;var C;if(p>0){var j=this.array[F];if(C=j&&j.removeAfter(s,p-be,y),C===j&&F===this.array.length-1)return this}var k=rn(this,s);return k.array.splice(F+1),C&&(k.array[F]=C),k};var Ke={};function lo(s,p){var y=s._origin,F=s._capacity,C=Da(F),j=s._tail;return k(s._root,s._level,0);function k(de,he,je){return he===0?Y(de,je):fe(de,he,je)}function Y(de,he){var je=he===C?j&&j.array:de&&de.array,We=he>y?0:y-he,st=F-he;return st>ae&&(st=ae),function(){if(We===st)return Ke;var pt=p?--st:We++;return je&&je[pt]}}function fe(de,he,je){var We,st=de&&de.array,pt=je>y?0:y-je>>he,Xt=(F-je>>he)+1;return Xt>ae&&(Xt=ae),function(){do{if(We){var hr=We();if(hr!==Ke)return hr;We=null}if(pt===Xt)return Ke;var ln=p?--Xt:pt++;We=k(st&&st[ln],he-be,je+(ln<<he))}while(!0)}}}function Ct(s,p,y,F,C,j,k){var Y=Object.create(ft);return Y.size=p-s,Y._origin=s,Y._capacity=p,Y._level=y,Y._root=F,Y._tail=C,Y.__ownerID=j,Y.__hash=k,Y.__altered=!1,Y}var so;function Tt(){return so||(so=Ct(0,0,be))}function co(s,p,y){if(p=it(s,p),p!==p)return s;if(p>=s.size||p<0)return s.withMutations(function(k){p<0?nn(k,p).set(0,y):nn(k,0,p+1).set(p,y)});p+=s._origin;var F=s._tail,C=s._root,j=Ve(Me);return p>=Da(s._capacity)?F=Cn(F,s.__ownerID,0,p,y,j):C=Cn(C,s.__ownerID,s._level,p,y,j),j.value?s.__ownerID?(s._root=C,s._tail=F,s.__hash=void 0,s.__altered=!0,s):Ct(s._origin,s._capacity,s._level,C,F):s}function Cn(s,p,y,F,C,j){var k=F>>>y&Le,Y=s&&k<s.array.length;if(!Y&&C===void 0)return s;var fe;if(y>0){var de=s&&s.array[k],he=Cn(de,p,y-be,F,C,j);return he===de?s:(fe=rn(s,p),fe.array[k]=he,fe)}return Y&&s.array[k]===C?s:(Se(j),fe=rn(s,p),C===void 0&&k===fe.array.length-1?fe.array.pop():fe.array[k]=C,fe)}function rn(s,p){return p&&s&&p===s.ownerID?s:new Ot(s?s.array.slice():[],p)}function ur(s,p){if(p>=Da(s._capacity))return s._tail;if(p<1<<s._level+be){for(var y=s._root,F=s._level;y&&F>0;)y=y.array[p>>>F&Le],F-=be;return y}}function nn(s,p,y){p!==void 0&&(p=p|0),y!==void 0&&(y=y|0);var F=s.__ownerID||new rt,C=s._origin,j=s._capacity,k=C+p,Y=y===void 0?j:y<0?j+y:C+y;if(k===C&&Y===j)return s;if(k>=Y)return s.clear();for(var fe=s._level,de=s._root,he=0;k+he<0;)de=new Ot(de&&de.array.length?[void 0,de]:[],F),fe+=be,he+=1<<fe;he&&(k+=he,C+=he,Y+=he,j+=he);for(var je=Da(j),We=Da(Y);We>=1<<fe+be;)de=new Ot(de&&de.array.length?[de]:[],F),fe+=be;var st=s._tail,pt=We<je?ur(s,Y-1):We>je?new Ot([],F):st;if(st&&We>je&&k<j&&st.array.length){de=rn(de,F);for(var Xt=de,hr=fe;hr>be;hr-=be){var ln=je>>>hr&Le;Xt=Xt.array[ln]=rn(Xt.array[ln],F)}Xt.array[je>>>be&Le]=st}if(Y<j&&(pt=pt&&pt.removeAfter(F,0,Y)),k>=We)k-=We,Y-=We,fe=be,de=null,pt=pt&&pt.removeBefore(F,0,k);else if(k>C||We<je){for(he=0;de;){var ka=k>>>fe&Le;if(ka!==We>>>fe&Le)break;ka&&(he+=(1<<fe)*ka),fe-=be,de=de.array[ka]}de&&k>C&&(de=de.removeBefore(F,fe,k-he)),de&&We<je&&(de=de.removeAfter(F,fe,We-he)),he&&(k-=he,Y-=he)}return s.__ownerID?(s.size=Y-k,s._origin=k,s._capacity=Y,s._level=fe,s._root=de,s._tail=pt,s.__hash=void 0,s.__altered=!0,s):Ct(k,Y,fe,de,pt)}function Nn(s,p,y){for(var F=[],C=0,j=0;j<y.length;j++){var k=y[j],Y=D(k);Y.size>C&&(C=Y.size),K(k)||(Y=Y.map(function(fe){return Er(fe)})),F.push(Y)}return C>s.size&&(s=s.setSize(C)),ke(s,p,F)}function Da(s){return s<ae?0:s-1>>>be<<be}O(nr,ct);function nr(s){return s==null?Va():ta(s)?s:Va().withMutations(function(p){var y=A(s);jr(y.size),y.forEach(function(F,C){return p.set(C,F)})})}nr.of=function(){return this(arguments)},nr.prototype.toString=function(){return this.__toString("OrderedMap {","}")},nr.prototype.get=function(s,p){var y=this._map.get(s);return y!==void 0?this._list.get(y)[1]:p},nr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Va()},nr.prototype.set=function(s,p){return oi(this,s,p)},nr.prototype.remove=function(s){return oi(this,s,Oe)},nr.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},nr.prototype.__iterate=function(s,p){var y=this;return this._list.__iterate(function(F){return F&&s(F[1],F[0],y)},p)},nr.prototype.__iterator=function(s,p){return this._list.fromEntrySeq().__iterator(s,p)},nr.prototype.__ensureOwner=function(s){if(s===this.__ownerID)return this;var p=this._map.__ensureOwner(s),y=this._list.__ensureOwner(s);return s?ar(p,y,s,this.__hash):(this.__ownerID=s,this._map=p,this._list=y,this)};function ta(s){return At(s)&&I(s)}nr.isOrderedMap=ta,nr.prototype[Z]=!0,nr.prototype[le]=nr.prototype.remove;function ar(s,p,y,F){var C=Object.create(nr.prototype);return C.size=s?s.size:0,C._map=s,C._list=p,C.__ownerID=y,C.__hash=F,C}var ii;function Va(){return ii||(ii=ar(Kt(),Tt()))}function oi(s,p,y){var F=s._map,C=s._list,j=F.get(p),k=j!==void 0,Y,fe;if(y===Oe){if(!k)return s;C.size>=ae&&C.size>=F.size*2?(fe=C.filter(function(de,he){return de!==void 0&&j!==he}),Y=fe.toKeyedSeq().map(function(de){return de[0]}).flip().toMap(),s.__ownerID&&(Y.__ownerID=fe.__ownerID=s.__ownerID)):(Y=F.remove(p),fe=j===C.size-1?C.pop():C.set(j,void 0))}else if(k){if(y===C.get(j)[1])return s;Y=F,fe=C.set(j,[p,y])}else Y=F.set(p,C.size),fe=C.set(C.size,[p,y]);return s.__ownerID?(s.size=Y.size,s._map=Y,s._list=fe,s.__hash=void 0,s):ar(Y,fe)}O(Dr,vr);function Dr(s,p){this._iter=s,this._useKeys=p,this.size=s.size}Dr.prototype.get=function(s,p){return this._iter.get(s,p)},Dr.prototype.has=function(s){return this._iter.has(s)},Dr.prototype.valueSeq=function(){return this._iter.valueSeq()},Dr.prototype.reverse=function(){var s=this,p=ui(this,!0);return this._useKeys||(p.valueSeq=function(){return s._iter.toSeq().reverse()}),p},Dr.prototype.map=function(s,p){var y=this,F=Ii(this,s,p);return this._useKeys||(F.valueSeq=function(){return y._iter.toSeq().map(s,p)}),F},Dr.prototype.__iterate=function(s,p){var y=this,F;return this._iter.__iterate(this._useKeys?function(C,j){return s(C,j,y)}:(F=p?ho(this):0,function(C){return s(C,p?--F:F++,y)}),p)},Dr.prototype.__iterator=function(s,p){if(this._useKeys)return this._iter.__iterator(s,p);var y=this._iter.__iterator(Dt,p),F=p?ho(this):0;return new ce(function(){var C=y.next();return C.done?C:ge(s,p?--F:F++,C.value,C)})},Dr.prototype[Z]=!0,O(xn,_t);function xn(s){this._iter=s,this.size=s.size}xn.prototype.includes=function(s){return this._iter.includes(s)},xn.prototype.__iterate=function(s,p){var y=this,F=0;return this._iter.__iterate(function(C){return s(C,F++,y)},p)},xn.prototype.__iterator=function(s,p){var y=this._iter.__iterator(Dt,p),F=0;return new ce(function(){var C=y.next();return C.done?C:ge(s,F++,C.value,C)})},O(lr,Br);function lr(s){this._iter=s,this.size=s.size}lr.prototype.has=function(s){return this._iter.includes(s)},lr.prototype.__iterate=function(s,p){var y=this;return this._iter.__iterate(function(F){return s(F,F,y)},p)},lr.prototype.__iterator=function(s,p){var y=this._iter.__iterator(Dt,p);return new ce(function(){var F=y.next();return F.done?F:ge(s,F.value,F.value,F)})},O(ra,vr);function ra(s){this._iter=s,this.size=s.size}ra.prototype.entrySeq=function(){return this._iter.toSeq()},ra.prototype.__iterate=function(s,p){var y=this;return this._iter.__iterate(function(F){if(F){go(F);var C=K(F);return s(C?F.get(1):F[1],C?F.get(0):F[0],y)}},p)},ra.prototype.__iterator=function(s,p){var y=this._iter.__iterator(Dt,p);return new ce(function(){for(;;){var F=y.next();if(F.done)return F;var C=F.value;if(C){go(C);var j=K(C);return ge(s,j?C.get(0):C[0],j?C.get(1):C[1],F)}}})},xn.prototype.cacheResult=Dr.prototype.cacheResult=lr.prototype.cacheResult=ra.prototype.cacheResult=ya;function Pi(s){var p=on(s);return p._iter=s,p.size=s.size,p.flip=function(){return s},p.reverse=function(){var y=s.reverse.apply(this);return y.flip=function(){return s.reverse()},y},p.has=function(y){return s.includes(y)},p.includes=function(y){return s.has(y)},p.cacheResult=ya,p.__iterateUncached=function(y,F){var C=this;return s.__iterate(function(j,k){return y(k,j,C)!==!1},F)},p.__iteratorUncached=function(y,F){if(y===Lt){var C=s.__iterator(y,F);return new ce(function(){var j=C.next();if(!j.done){var k=j.value[0];j.value[0]=j.value[1],j.value[1]=k}return j})}return s.__iterator(y===Dt?gt:Dt,F)},p}function Ii(s,p,y){var F=on(s);return F.size=s.size,F.has=function(C){return s.has(C)},F.get=function(C,j){var k=s.get(C,Oe);return k===Oe?j:p.call(y,k,C,s)},F.__iterateUncached=function(C,j){var k=this;return s.__iterate(function(Y,fe,de){return C(p.call(y,Y,fe,de),fe,k)!==!1},j)},F.__iteratorUncached=function(C,j){var k=s.__iterator(Lt,j);return new ce(function(){var Y=k.next();if(Y.done)return Y;var fe=Y.value,de=fe[0];return ge(C,de,p.call(y,fe[1],de,s),Y)})},F}function ui(s,p){var y=on(s);return y._iter=s,y.size=s.size,y.reverse=function(){return s},s.flip&&(y.flip=function(){var F=Pi(s);return F.reverse=function(){return s.flip()},F}),y.get=function(F,C){return s.get(p?F:-1-F,C)},y.has=function(F){return s.has(p?F:-1-F)},y.includes=function(F){return s.includes(F)},y.cacheResult=ya,y.__iterate=function(F,C){var j=this;return s.__iterate(function(k,Y){return F(k,Y,j)},!C)},y.__iterator=function(F,C){return s.__iterator(F,!C)},y}function fo(s,p,y,F){var C=on(s);return F&&(C.has=function(j){var k=s.get(j,Oe);return k!==Oe&&!!p.call(y,k,j,s)},C.get=function(j,k){var Y=s.get(j,Oe);return Y!==Oe&&p.call(y,Y,j,s)?Y:k}),C.__iterateUncached=function(j,k){var Y=this,fe=0;return s.__iterate(function(de,he,je){if(p.call(y,de,he,je))return fe++,j(de,F?he:fe-1,Y)},k),fe},C.__iteratorUncached=function(j,k){var Y=s.__iterator(Lt,k),fe=0;return new ce(function(){for(;;){var de=Y.next();if(de.done)return de;var he=de.value,je=he[0],We=he[1];if(p.call(y,We,je,s))return ge(j,F?je:fe++,We,de)}})},C}function po(s,p,y){var F=ct().asMutable();return s.__iterate(function(C,j){F.update(p.call(y,C,j,s),0,function(k){return k+1})}),F.asImmutable()}function vo(s,p,y){var F=w(s),C=(I(s)?nr():ct()).asMutable();s.__iterate(function(k,Y){C.update(p.call(y,k,Y,s),function(fe){return fe=fe||[],fe.push(F?[Y,k]:k),fe})});var j=Vi(s);return C.map(function(k){return Ft(s,j(k))})}function an(s,p,y,F){var C=s.size;if(p!==void 0&&(p=p|0),y!==void 0&&(y===1/0?y=C:y=y|0),Je(p,y,C))return s;var j=mt(p,C),k=_e(y,C);if(j!==j||k!==k)return an(s.toSeq().cacheResult(),p,y,F);var Y=k-j,fe;Y===Y&&(fe=Y<0?0:Y);var de=on(s);return de.size=fe===0?fe:s.size&&fe||void 0,!F&&_a(s)&&fe>=0&&(de.get=function(he,je){return he=it(this,he),he>=0&&he<fe?s.get(he+j,je):je}),de.__iterateUncached=function(he,je){var We=this;if(fe===0)return 0;if(je)return this.cacheResult().__iterate(he,je);var st=0,pt=!0,Xt=0;return s.__iterate(function(hr,ln){if(!(pt&&(pt=st++<j)))return Xt++,he(hr,F?ln:Xt-1,We)!==!1&&Xt!==fe}),Xt},de.__iteratorUncached=function(he,je){if(fe!==0&&je)return this.cacheResult().__iterator(he,je);var We=fe!==0&&s.__iterator(he,je),st=0,pt=0;return new ce(function(){for(;st++<j;)We.next();if(++pt>fe)return g();var Xt=We.next();return F||he===Dt?Xt:he===gt?ge(he,pt-1,void 0,Xt):ge(he,pt-1,Xt.value[1],Xt)})},de}function zo(s,p,y){var F=on(s);return F.__iterateUncached=function(C,j){var k=this;if(j)return this.cacheResult().__iterate(C,j);var Y=0;return s.__iterate(function(fe,de,he){return p.call(y,fe,de,he)&&++Y&&C(fe,de,k)}),Y},F.__iteratorUncached=function(C,j){var k=this;if(j)return this.cacheResult().__iterator(C,j);var Y=s.__iterator(Lt,j),fe=!0;return new ce(function(){if(!fe)return g();var de=Y.next();if(de.done)return de;var he=de.value,je=he[0],We=he[1];return p.call(y,We,je,k)?C===Lt?de:ge(C,je,We,de):(fe=!1,g())})},F}function vn(s,p,y,F){var C=on(s);return C.__iterateUncached=function(j,k){var Y=this;if(k)return this.cacheResult().__iterate(j,k);var fe=!0,de=0;return s.__iterate(function(he,je,We){if(!(fe&&(fe=p.call(y,he,je,We))))return de++,j(he,F?je:de-1,Y)}),de},C.__iteratorUncached=function(j,k){var Y=this;if(k)return this.cacheResult().__iterator(j,k);var fe=s.__iterator(Lt,k),de=!0,he=0;return new ce(function(){var je,We,st;do{if(je=fe.next(),je.done)return F||j===Dt?je:j===gt?ge(j,he++,void 0,je):ge(j,he++,je.value[1],je);var pt=je.value;We=pt[0],st=pt[1],de&&(de=p.call(y,st,We,Y))}while(de);return j===Lt?je:ge(j,We,st,je)})},C}function qo(s,p){var y=w(s),F=[s].concat(p).map(function(k){return K(k)?y&&(k=A(k)):k=y?kr(k):cn(Array.isArray(k)?k:[k]),k}).filter(function(k){return k.size!==0});if(F.length===0)return s;if(F.length===1){var C=F[0];if(C===s||y&&w(C)||R(s)&&R(C))return C}var j=new Tr(F);return y?j=j.toKeyedSeq():R(s)||(j=j.toSetSeq()),j=j.flatten(!0),j.size=F.reduce(function(k,Y){if(k!==void 0){var fe=Y.size;if(fe!==void 0)return k+fe}},0),j}function ga(s,p,y){var F=on(s);return F.__iterateUncached=function(C,j){var k=0,Y=!1;function fe(de,he){var je=this;de.__iterate(function(We,st){return(!p||he<p)&&K(We)?fe(We,he+1):C(We,y?st:k++,je)===!1&&(Y=!0),!Y},j)}return fe(s,0),k},F.__iteratorUncached=function(C,j){var k=s.__iterator(C,j),Y=[],fe=0;return new ce(function(){for(;k;){var de=k.next();if(de.done!==!1){k=Y.pop();continue}var he=de.value;if(C===Lt&&(he=he[1]),(!p||Y.length<p)&&K(he))Y.push(k),k=he.__iterator(C,j);else return y?de:ge(C,fe++,he,de)}return g()})},F}function Ko(s,p,y){var F=Vi(s);return s.toSeq().map(function(C,j){return F(p.call(y,C,j,s))}).flatten(!0)}function gn(s,p){var y=on(s);return y.size=s.size&&s.size*2-1,y.__iterateUncached=function(F,C){var j=this,k=0;return s.__iterate(function(Y,fe){return(!k||F(p,k++,j)!==!1)&&F(Y,k++,j)!==!1},C),k},y.__iteratorUncached=function(F,C){var j=s.__iterator(Dt,C),k=0,Y;return new ce(function(){return(!Y||k%2)&&(Y=j.next(),Y.done)?Y:k%2?ge(F,k++,p):ge(F,k++,Y.value,Y)})},y}function ha(s,p,y){p||(p=li);var F=w(s),C=0,j=s.toSeq().map(function(k,Y){return[Y,k,C++,y?y(k,Y,s):k]}).toArray();return j.sort(function(k,Y){return p(k[3],Y[3])||k[2]-Y[2]}).forEach(F?function(k,Y){j[Y].length=2}:function(k,Y){j[Y]=k[1]}),F?vr(j):R(s)?_t(j):Br(j)}function ma(s,p,y){if(p||(p=li),y){var F=s.toSeq().map(function(C,j){return[C,y(C,j,s)]}).reduce(function(C,j){return ji(p,C[1],j[1])?j:C});return F&&F[0]}else return s.reduce(function(C,j){return ji(p,C,j)?j:C})}function ji(s,p,y){var F=s(y,p);return F===0&&y!==p&&(y==null||y!==y)||F>0}function Di(s,p,y){var F=on(s);return F.size=new Tr(y).map(function(C){return C.size}).min(),F.__iterate=function(C,j){for(var k=this.__iterator(Dt,j),Y,fe=0;!(Y=k.next()).done&&C(Y.value,fe++,this)!==!1;);return fe},F.__iteratorUncached=function(C,j){var k=y.map(function(de){return de=V(de),qe(j?de.reverse():de)}),Y=0,fe=!1;return new ce(function(){var de;return fe||(de=k.map(function(he){return he.next()}),fe=de.some(function(he){return he.done})),fe?g():ge(C,Y++,p.apply(null,de.map(function(he){return he.value})))})},F}function Ft(s,p){return _a(s)?p:s.constructor(p)}function go(s){if(s!==Object(s))throw new TypeError("Expected [K, V] tuple: "+s)}function ho(s){return jr(s.size),lt(s)}function Vi(s){return w(s)?A:R(s)?D:$}function on(s){return Object.create((w(s)?vr:R(s)?_t:Br).prototype)}function ya(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):nt.prototype.cacheResult.call(this)}function li(s,p){return s>p?1:s<p?-1:0}function hn(s){var p=qe(s);if(!p){if(!Gt(s))throw new TypeError("Expected iterable or array-like: "+s);p=qe(V(s))}return p}O(Vr,Qr);function Vr(s,p){var y,F=function(k){if(k instanceof F)return k;if(!(this instanceof F))return new F(k);if(!y){y=!0;var Y=Object.keys(s);Ho(C,Y),C.size=Y.length,C._name=p,C._keys=Y,C._defaultValues=s}this._map=ct(k)},C=F.prototype=Object.create(gr);return C.constructor=F,F}Vr.prototype.toString=function(){return this.__toString(Ni(this)+" {","}")},Vr.prototype.has=function(s){return this._defaultValues.hasOwnProperty(s)},Vr.prototype.get=function(s,p){if(!this.has(s))return p;var y=this._defaultValues[s];return this._map?this._map.get(s,y):y},Vr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var s=this.constructor;return s._empty||(s._empty=Mn(this,Kt()))},Vr.prototype.set=function(s,p){if(!this.has(s))throw new Error('Cannot set unknown key "'+s+'" on '+Ni(this));if(this._map&&!this._map.has(s)){var y=this._defaultValues[s];if(p===y)return this}var F=this._map&&this._map.set(s,p);return this.__ownerID||F===this._map?this:Mn(this,F)},Vr.prototype.remove=function(s){if(!this.has(s))return this;var p=this._map&&this._map.remove(s);return this.__ownerID||p===this._map?this:Mn(this,p)},Vr.prototype.wasAltered=function(){return this._map.wasAltered()},Vr.prototype.__iterator=function(s,p){var y=this;return A(this._defaultValues).map(function(F,C){return y.get(C)}).__iterator(s,p)},Vr.prototype.__iterate=function(s,p){var y=this;return A(this._defaultValues).map(function(F,C){return y.get(C)}).__iterate(s,p)},Vr.prototype.__ensureOwner=function(s){if(s===this.__ownerID)return this;var p=this._map&&this._map.__ensureOwner(s);return s?Mn(this,p,s):(this.__ownerID=s,this._map=p,this)};var gr=Vr.prototype;gr[le]=gr.remove,gr.deleteIn=gr.removeIn=tt.removeIn,gr.merge=tt.merge,gr.mergeWith=tt.mergeWith,gr.mergeIn=tt.mergeIn,gr.mergeDeep=tt.mergeDeep,gr.mergeDeepWith=tt.mergeDeepWith,gr.mergeDeepIn=tt.mergeDeepIn,gr.setIn=tt.setIn,gr.update=tt.update,gr.updateIn=tt.updateIn,gr.withMutations=tt.withMutations,gr.asMutable=tt.asMutable,gr.asImmutable=tt.asImmutable;function Mn(s,p,y){var F=Object.create(Object.getPrototypeOf(s));return F._map=p,F.__ownerID=y,F}function Ni(s){return s._name||s.constructor.name||"Record"}function Ho(s,p){try{p.forEach(xi.bind(void 0,s))}catch{}}function xi(s,p){Object.defineProperty(s,p,{get:function(){return this.get(p)},set:function(y){Qn(this.__ownerID,"Cannot set on an immutable record."),this.set(p,y)}})}O(Yt,Yn);function Yt(s){return s==null?Oa():Sa(s)&&!I(s)?s:Oa().withMutations(function(p){var y=$(s);jr(y.size),y.forEach(function(F){return p.add(F)})})}Yt.of=function(){return this(arguments)},Yt.fromKeys=function(s){return this(A(s).keySeq())},Yt.prototype.toString=function(){return this.__toString("Set {","}")},Yt.prototype.has=function(s){return this._map.has(s)},Yt.prototype.add=function(s){return na(this,this._map.set(s,!0))},Yt.prototype.remove=function(s){return na(this,this._map.remove(s))},Yt.prototype.clear=function(){return na(this,this._map.clear())},Yt.prototype.union=function(){var s=ye.call(arguments,0);return s=s.filter(function(p){return p.size!==0}),s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(p){for(var y=0;y<s.length;y++)$(s[y]).forEach(function(F){return p.add(F)})})},Yt.prototype.intersect=function(){var s=ye.call(arguments,0);if(s.length===0)return this;s=s.map(function(y){return $(y)});var p=this;return this.withMutations(function(y){p.forEach(function(F){s.every(function(C){return C.includes(F)})||y.remove(F)})})},Yt.prototype.subtract=function(){var s=ye.call(arguments,0);if(s.length===0)return this;s=s.map(function(y){return $(y)});var p=this;return this.withMutations(function(y){p.forEach(function(F){s.some(function(C){return C.includes(F)})&&y.remove(F)})})},Yt.prototype.merge=function(){return this.union.apply(this,arguments)},Yt.prototype.mergeWith=function(s){var p=ye.call(arguments,1);return this.union.apply(this,p)},Yt.prototype.sort=function(s){return yn(ha(this,s))},Yt.prototype.sortBy=function(s,p){return yn(ha(this,p,s))},Yt.prototype.wasAltered=function(){return this._map.wasAltered()},Yt.prototype.__iterate=function(s,p){var y=this;return this._map.__iterate(function(F,C){return s(C,C,y)},p)},Yt.prototype.__iterator=function(s,p){return this._map.map(function(y,F){return F}).__iterator(s,p)},Yt.prototype.__ensureOwner=function(s){if(s===this.__ownerID)return this;var p=this._map.__ensureOwner(s);return s?this.__make(p,s):(this.__ownerID=s,this._map=p,this)};function Sa(s){return!!(s&&s[Pe])}Yt.isSet=Sa;var Pe="@@__IMMUTABLE_SET__@@",Nr=Yt.prototype;Nr[Pe]=!0,Nr[le]=Nr.remove,Nr.mergeDeep=Nr.merge,Nr.mergeDeepWith=Nr.mergeWith,Nr.withMutations=tt.withMutations,Nr.asMutable=tt.asMutable,Nr.asImmutable=tt.asImmutable,Nr.__empty=Oa,Nr.__make=Mi;function na(s,p){return s.__ownerID?(s.size=p.size,s._map=p,s):p===s._map?s:p.size===0?s.__empty():s.__make(p)}function Mi(s,p){var y=Object.create(Nr);return y.size=s?s.size:0,y._map=s,y.__ownerID=p,y}var mn;function Oa(){return mn||(mn=Mi(Kt()))}O(yn,Yt);function yn(s){return s==null?si():mo(s)?s:si().withMutations(function(p){var y=$(s);jr(y.size),y.forEach(function(F){return p.add(F)})})}yn.of=function(){return this(arguments)},yn.fromKeys=function(s){return this(A(s).keySeq())},yn.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function mo(s){return Sa(s)&&I(s)}yn.isOrderedSet=mo;var ba=yn.prototype;ba[Z]=!0,ba.__empty=si,ba.__make=ki;function ki(s,p){var y=Object.create(ba);return y.size=s?s.size:0,y._map=s,y.__ownerID=p,y}var Gi;function si(){return Gi||(Gi=ki(Va()))}O(tr,Dn);function tr(s){return s==null?fi():ci(s)?s:fi().unshiftAll(s)}tr.of=function(){return this(arguments)},tr.prototype.toString=function(){return this.__toString("Stack [","]")},tr.prototype.get=function(s,p){var y=this._head;for(s=it(this,s);y&&s--;)y=y.next;return y?y.value:p},tr.prototype.peek=function(){return this._head&&this._head.value},tr.prototype.push=function(){if(arguments.length===0)return this;for(var s=this.size+arguments.length,p=this._head,y=arguments.length-1;y>=0;y--)p={value:arguments[y],next:p};return this.__ownerID?(this.size=s,this._head=p,this.__hash=void 0,this.__altered=!0,this):Na(s,p)},tr.prototype.pushAll=function(s){if(s=D(s),s.size===0)return this;jr(s.size);var p=this.size,y=this._head;return s.reverse().forEach(function(F){p++,y={value:F,next:y}}),this.__ownerID?(this.size=p,this._head=y,this.__hash=void 0,this.__altered=!0,this):Na(p,y)},tr.prototype.pop=function(){return this.slice(1)},tr.prototype.unshift=function(){return this.push.apply(this,arguments)},tr.prototype.unshiftAll=function(s){return this.pushAll(s)},tr.prototype.shift=function(){return this.pop.apply(this,arguments)},tr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):fi()},tr.prototype.slice=function(s,p){if(Je(s,p,this.size))return this;var y=mt(s,this.size),F=_e(p,this.size);if(F!==this.size)return Dn.prototype.slice.call(this,s,p);for(var C=this.size-y,j=this._head;y--;)j=j.next;return this.__ownerID?(this.size=C,this._head=j,this.__hash=void 0,this.__altered=!0,this):Na(C,j)},tr.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?Na(this.size,this._head,s,this.__hash):(this.__ownerID=s,this.__altered=!1,this)},tr.prototype.__iterate=function(s,p){if(p)return this.reverse().__iterate(s);for(var y=0,F=this._head;F&&s(F.value,y++,this)!==!1;)F=F.next;return y},tr.prototype.__iterator=function(s,p){if(p)return this.reverse().__iterator(s);var y=0,F=this._head;return new ce(function(){if(F){var C=F.value;return F=F.next,ge(s,y++,C)}return g()})};function ci(s){return!!(s&&s[yo])}tr.isStack=ci;var yo="@@__IMMUTABLE_STACK__@@",kn=tr.prototype;kn[yo]=!0,kn.withMutations=tt.withMutations,kn.asMutable=tt.asMutable,kn.asImmutable=tt.asImmutable,kn.wasAltered=tt.wasAltered;function Na(s,p,y,F){var C=Object.create(kn);return C.size=s,C._head=p,C.__ownerID=y,C.__hash=F,C.__altered=!1,C}var So;function fi(){return So||(So=Na(0))}function un(s,p){var y=function(F){s.prototype[F]=p[F]};return Object.keys(p).forEach(y),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(p).forEach(y),s}V.Iterator=ce,un(V,{toArray:function(){jr(this.size);var s=new Array(this.size||0);return this.valueSeq().__iterate(function(p,y){s[y]=p}),s},toIndexedSeq:function(){return new xn(this)},toJS:function(){return this.toSeq().map(function(s){return s&&typeof s.toJS=="function"?s.toJS():s}).__toJS()},toJSON:function(){return this.toSeq().map(function(s){return s&&typeof s.toJSON=="function"?s.toJSON():s}).__toJS()},toKeyedSeq:function(){return new Dr(this,!0)},toMap:function(){return ct(this.toKeyedSeq())},toObject:function(){jr(this.size);var s={};return this.__iterate(function(p,y){s[y]=p}),s},toOrderedMap:function(){return nr(this.toKeyedSeq())},toOrderedSet:function(){return yn(w(this)?this.valueSeq():this)},toSet:function(){return Yt(w(this)?this.valueSeq():this)},toSetSeq:function(){return new lr(this)},toSeq:function(){return R(this)?this.toIndexedSeq():w(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return tr(w(this)?this.valueSeq():this)},toList:function(){return Ht(w(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(s,p){return this.size===0?s+p:s+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+p},concat:function(){var s=ye.call(arguments,0);return Ft(this,qo(this,s))},includes:function(s){return this.some(function(p){return qt(p,s)})},entries:function(){return this.__iterator(Lt)},every:function(s,p){jr(this.size);var y=!0;return this.__iterate(function(F,C,j){if(!s.call(p,F,C,j))return y=!1,!1}),y},filter:function(s,p){return Ft(this,fo(this,s,p,!0))},find:function(s,p,y){var F=this.findEntry(s,p);return F?F[1]:y},forEach:function(s,p){return jr(this.size),this.__iterate(p?s.bind(p):s)},join:function(s){jr(this.size),s=s!==void 0?""+s:",";var p="",y=!0;return this.__iterate(function(F){y?y=!1:p+=s,p+=F!=null?F.toString():""}),p},keys:function(){return this.__iterator(gt)},map:function(s,p){return Ft(this,Ii(this,s,p))},reduce:function(s,p,y){jr(this.size);var F,C;return arguments.length<2?C=!0:F=p,this.__iterate(function(j,k,Y){C?(C=!1,F=j):F=s.call(y,F,j,k,Y)}),F},reduceRight:function(s,p,y){var F=this.toKeyedSeq().reverse();return F.reduce.apply(F,arguments)},reverse:function(){return Ft(this,ui(this,!0))},slice:function(s,p){return Ft(this,an(this,s,p,!0))},some:function(s,p){return!this.every(Ma(s),p)},sort:function(s){return Ft(this,ha(this,s))},values:function(){return this.__iterator(Dt)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(s,p){return lt(s?this.toSeq().filter(s,p):this)},countBy:function(s,p){return po(this,s,p)},equals:function(s){return fa(this,s)},entrySeq:function(){var s=this;if(s._cache)return new Tr(s._cache);var p=s.toSeq().map(Jo).toIndexedSeq();return p.fromEntrySeq=function(){return s.toSeq()},p},filterNot:function(s,p){return this.filter(Ma(s),p)},findEntry:function(s,p,y){var F=y;return this.__iterate(function(C,j,k){if(s.call(p,C,j,k))return F=[j,C],!1}),F},findKey:function(s,p){var y=this.findEntry(s,p);return y&&y[0]},findLast:function(s,p,y){return this.toKeyedSeq().reverse().find(s,p,y)},findLastEntry:function(s,p,y){return this.toKeyedSeq().reverse().findEntry(s,p,y)},findLastKey:function(s,p){return this.toKeyedSeq().reverse().findKey(s,p)},first:function(){return this.find(Qe)},flatMap:function(s,p){return Ft(this,Ko(this,s,p))},flatten:function(s){return Ft(this,ga(this,s,!0))},fromEntrySeq:function(){return new ra(this)},get:function(s,p){return this.find(function(y,F){return qt(F,s)},void 0,p)},getIn:function(s,p){for(var y=this,F=hn(s),C;!(C=F.next()).done;){var j=C.value;if(y=y&&y.get?y.get(j,Oe):Oe,y===Oe)return p}return y},groupBy:function(s,p){return vo(this,s,p)},has:function(s){return this.get(s,Oe)!==Oe},hasIn:function(s){return this.getIn(s,Oe)!==Oe},isSubset:function(s){return s=typeof s.includes=="function"?s:V(s),this.every(function(p){return s.includes(p)})},isSuperset:function(s){return s=typeof s.isSubset=="function"?s:V(s),s.isSubset(this)},keyOf:function(s){return this.findKey(function(p){return qt(p,s)})},keySeq:function(){return this.toSeq().map(Oo).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(s){return this.toKeyedSeq().reverse().keyOf(s)},max:function(s){return ma(this,s)},maxBy:function(s,p){return ma(this,p,s)},min:function(s){return ma(this,s?$i(s):Yo)},minBy:function(s,p){return ma(this,p?$i(p):Yo,s)},rest:function(){return this.slice(1)},skip:function(s){return this.slice(Math.max(0,s))},skipLast:function(s){return Ft(this,this.toSeq().reverse().skip(s).reverse())},skipWhile:function(s,p){return Ft(this,vn(this,s,p,!0))},skipUntil:function(s,p){return this.skipWhile(Ma(s),p)},sortBy:function(s,p){return Ft(this,ha(this,p,s))},take:function(s){return this.slice(0,Math.max(0,s))},takeLast:function(s){return Ft(this,this.toSeq().reverse().take(s).reverse())},takeWhile:function(s,p){return Ft(this,zo(this,s,p))},takeUntil:function(s,p){return this.takeWhile(Ma(s),p)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Bi(this))}});var dr=V.prototype;dr[q]=!0,dr[X]=dr.values,dr.__toJS=dr.toArray,dr.__toStringMapper=Gn,dr.inspect=dr.toSource=function(){return this.toString()},dr.chain=dr.flatMap,dr.contains=dr.includes,un(A,{flip:function(){return Ft(this,Pi(this))},mapEntries:function(s,p){var y=this,F=0;return Ft(this,this.toSeq().map(function(C,j){return s.call(p,[j,C],F++,y)}).fromEntrySeq())},mapKeys:function(s,p){var y=this;return Ft(this,this.toSeq().flip().map(function(F,C){return s.call(p,F,C,y)}).flip())}});var xa=A.prototype;xa[te]=!0,xa[X]=dr.entries,xa.__toJS=dr.toObject,xa.__toStringMapper=function(s,p){return JSON.stringify(p)+": "+Gn(s)},un(D,{toKeyedSeq:function(){return new Dr(this,!1)},filter:function(s,p){return Ft(this,fo(this,s,p,!1))},findIndex:function(s,p){var y=this.findEntry(s,p);return y?y[0]:-1},indexOf:function(s){var p=this.keyOf(s);return p===void 0?-1:p},lastIndexOf:function(s){var p=this.lastKeyOf(s);return p===void 0?-1:p},reverse:function(){return Ft(this,ui(this,!1))},slice:function(s,p){return Ft(this,an(this,s,p,!1))},splice:function(s,p){var y=arguments.length;if(p=Math.max(p|0,0),y===0||y===2&&!p)return this;s=mt(s,s<0?this.count():this.size);var F=this.slice(0,s);return Ft(this,y===1?F:F.concat(Be(arguments,2),this.slice(s+p)))},findLastIndex:function(s,p){var y=this.findLastEntry(s,p);return y?y[0]:-1},first:function(){return this.get(0)},flatten:function(s){return Ft(this,ga(this,s,!1))},get:function(s,p){return s=it(this,s),s<0||this.size===1/0||this.size!==void 0&&s>this.size?p:this.find(function(y,F){return F===s},void 0,p)},has:function(s){return s=it(this,s),s>=0&&(this.size!==void 0?this.size===1/0||s<this.size:this.indexOf(s)!==-1)},interpose:function(s){return Ft(this,gn(this,s))},interleave:function(){var s=[this].concat(Be(arguments)),p=Di(this.toSeq(),_t.of,s),y=p.flatten(!0);return p.size&&(y.size=p.size*s.length),Ft(this,y)},keySeq:function(){return Rt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(s,p){return Ft(this,vn(this,s,p,!1))},zip:function(){var s=[this].concat(Be(arguments));return Ft(this,Di(this,Qo,s))},zipWith:function(s){var p=Be(arguments);return p[0]=this,Ft(this,Di(this,s,p))}}),D.prototype[re]=!0,D.prototype[Z]=!0,un($,{get:function(s,p){return this.has(s)?s:p},includes:function(s){return this.has(s)},keySeq:function(){return this.valueSeq()}}),$.prototype.has=dr.includes,$.prototype.contains=$.prototype.includes,un(vr,A.prototype),un(_t,D.prototype),un(Br,$.prototype),un(Qr,A.prototype),un(Dn,D.prototype),un(Yn,$.prototype);function Oo(s,p){return p}function Jo(s,p){return[p,s]}function Ma(s){return function(){return!s.apply(this,arguments)}}function $i(s){return function(){return-s.apply(this,arguments)}}function Gn(s){return typeof s=="string"?JSON.stringify(s):String(s)}function Qo(){return Be(arguments)}function Yo(s,p){return s<p?1:s>p?-1:0}function Bi(s){if(s.size===1/0)return 0;var p=I(s),y=w(s),F=p?1:0,C=s.__iterate(y?p?function(j,k){F=31*F+Wi(wr(j),wr(k))|0}:function(j,k){F=F+Wi(wr(j),wr(k))|0}:p?function(j){F=31*F+wr(j)|0}:function(j){F=F+wr(j)|0});return Xo(C,F)}function Xo(s,p){return p=Vn(p,3432918353),p=Vn(p<<15|p>>>-15,461845907),p=Vn(p<<13|p>>>-13,5),p=(p+3864292196|0)^s,p=Vn(p^p>>>16,2246822507),p=Vn(p^p>>>13,3266489909),p=Xn(p^p>>>16),p}function Wi(s,p){return s^p+2654435769+(s<<6)+(s>>2)|0}var Zo={Iterable:V,Seq:nt,Collection:dn,Map:ct,OrderedMap:nr,List:Ht,Stack:tr,Set:Yt,OrderedSet:yn,Record:Vr,Range:Rt,Repeat:fr,is:qt,fromJS:Er};return Zo})},81136:(Te,ye)=>{"use strict";var O;/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=60103,A=60106,D=60107,$=60108,K=60114,w=60109,R=60110,M=60112,I=60113,q=60120,te=60115,re=60116,Z=60121,le=60122,be=60117,ae=60129,Le=60131;if(typeof Symbol=="function"&&Symbol.for){var Oe=Symbol.for;V=Oe("react.element"),A=Oe("react.portal"),D=Oe("react.fragment"),$=Oe("react.strict_mode"),K=Oe("react.profiler"),w=Oe("react.provider"),R=Oe("react.context"),M=Oe("react.forward_ref"),I=Oe("react.suspense"),q=Oe("react.suspense_list"),te=Oe("react.memo"),re=Oe("react.lazy"),Z=Oe("react.block"),le=Oe("react.server.block"),be=Oe("react.fundamental"),ae=Oe("react.debug_trace_mode"),Le=Oe("react.legacy_hidden")}function $e(_e){if(typeof _e=="object"&&_e!==null){var Jt=_e.$$typeof;switch(Jt){case V:switch(_e=_e.type,_e){case D:case K:case $:case I:case q:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case R:case M:case re:case te:case w:return _e;default:return Jt}}case A:return Jt}}}var Me=w,Ve=V,Se=M,rt=D,Be=re,lt=te,it=A,Qe=K,Je=$,mt=I;O=R,O=Me,O=Ve,O=Se,O=rt,O=Be,O=lt,O=it,O=Qe,O=Je,O=mt,O=function(){return!1},O=function(){return!1},ye.isContextConsumer=function(_e){return $e(_e)===R},O=function(_e){return $e(_e)===w},O=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===V},O=function(_e){return $e(_e)===M},O=function(_e){return $e(_e)===D},O=function(_e){return $e(_e)===re},O=function(_e){return $e(_e)===te},O=function(_e){return $e(_e)===A},O=function(_e){return $e(_e)===K},O=function(_e){return $e(_e)===$},O=function(_e){return $e(_e)===I},O=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===D||_e===K||_e===ae||_e===$||_e===I||_e===q||_e===Le||typeof _e=="object"&&_e!==null&&(_e.$$typeof===re||_e.$$typeof===te||_e.$$typeof===w||_e.$$typeof===R||_e.$$typeof===M||_e.$$typeof===be||_e.$$typeof===Z||_e[0]===le)},O=$e},10636:(Te,ye,O)=>{"use strict";Te.exports=O(81136)},1779:(Te,ye,O)=>{var V=O(48287).Buffer,A=function(){"use strict";function D(Z,le){return le!=null&&Z instanceof le}var $;try{$=Map}catch{$=function(){}}var K;try{K=Set}catch{K=function(){}}var w;try{w=Promise}catch{w=function(){}}function R(Z,le,be,ae,Le){typeof le=="object"&&(be=le.depth,ae=le.prototype,Le=le.includeNonEnumerable,le=le.circular);var Oe=[],$e=[],Me=typeof V<"u";typeof le>"u"&&(le=!0),typeof be>"u"&&(be=1/0);function Ve(Se,rt){if(Se===null)return null;if(rt===0)return Se;var Be,lt;if(typeof Se!="object")return Se;if(D(Se,$))Be=new $;else if(D(Se,K))Be=new K;else if(D(Se,w))Be=new w(function(Lt,ee){Se.then(function(H){Lt(Ve(H,rt-1))},function(H){ee(Ve(H,rt-1))})});else if(R.__isArray(Se))Be=[];else if(R.__isRegExp(Se))Be=new RegExp(Se.source,re(Se)),Se.lastIndex&&(Be.lastIndex=Se.lastIndex);else if(R.__isDate(Se))Be=new Date(Se.getTime());else{if(Me&&V.isBuffer(Se))return V.allocUnsafe?Be=V.allocUnsafe(Se.length):Be=new V(Se.length),Se.copy(Be),Be;D(Se,Error)?Be=Object.create(Se):typeof ae>"u"?(lt=Object.getPrototypeOf(Se),Be=Object.create(lt)):(Be=Object.create(ae),lt=ae)}if(le){var it=Oe.indexOf(Se);if(it!=-1)return $e[it];Oe.push(Se),$e.push(Be)}D(Se,$)&&Se.forEach(function(Lt,ee){var H=Ve(ee,rt-1),X=Ve(Lt,rt-1);Be.set(H,X)}),D(Se,K)&&Se.forEach(function(Lt){var ee=Ve(Lt,rt-1);Be.add(ee)});for(var Qe in Se){var Je;lt&&(Je=Object.getOwnPropertyDescriptor(lt,Qe)),!(Je&&Je.set==null)&&(Be[Qe]=Ve(Se[Qe],rt-1))}if(Object.getOwnPropertySymbols)for(var mt=Object.getOwnPropertySymbols(Se),Qe=0;Qe<mt.length;Qe++){var _e=mt[Qe],Jt=Object.getOwnPropertyDescriptor(Se,_e);Jt&&!Jt.enumerable&&!Le||(Be[_e]=Ve(Se[_e],rt-1),Jt.enumerable||Object.defineProperty(Be,_e,{enumerable:!1}))}if(Le)for(var gt=Object.getOwnPropertyNames(Se),Qe=0;Qe<gt.length;Qe++){var Dt=gt[Qe],Jt=Object.getOwnPropertyDescriptor(Se,Dt);Jt&&Jt.enumerable||(Be[Dt]=Ve(Se[Dt],rt-1),Object.defineProperty(Be,Dt,{enumerable:!1}))}return Be}return Ve(Z,be)}R.clonePrototype=function(le){if(le===null)return null;var be=function(){};return be.prototype=le,new be};function M(Z){return Object.prototype.toString.call(Z)}R.__objToStr=M;function I(Z){return typeof Z=="object"&&M(Z)==="[object Date]"}R.__isDate=I;function q(Z){return typeof Z=="object"&&M(Z)==="[object Array]"}R.__isArray=q;function te(Z){return typeof Z=="object"&&M(Z)==="[object RegExp]"}R.__isRegExp=te;function re(Z){var le="";return Z.global&&(le+="g"),Z.ignoreCase&&(le+="i"),Z.multiline&&(le+="m"),le}return R.__getRegExpFlags=re,R}();Te.exports&&(Te.exports=A)},36224:(Te,ye,O)=>{"use strict";O.d(ye,{jN:()=>CO,cG:()=>TO,gv:()=>Ve,oK:()=>OO,e_:()=>md,X3:()=>LO,To:()=>jn,oF:()=>Gt,se:()=>bO.s,YW:()=>nt,nj:()=>RO});var V={};O.r(V),O.d(V,{applyToJS:()=>ii,cleanJSX:()=>oi,deepEqual:()=>nn,deepFreeze:()=>Ii,defaultValue:()=>ur,escapeRegExp:()=>Va,getFirstDefined:()=>vo,getLogger:()=>po,isDirtyJSX:()=>Dr,isImmutable:()=>ta,isJSX:()=>xn,isJsonCompatible:()=>ui,isJsonLogic:()=>lr,logger:()=>an,mergeArraysSmart:()=>Pi,opDefKeysToOmit:()=>rn,shallowEqual:()=>Nn,sleep:()=>ra,toImmutableList:()=>ar,uuid:()=>Tt,widgetDefKeysToOmit:()=>Cn});var A={};O.r(A),O.d(A,{getItemInListValues:()=>Mn,getListValue:()=>Sa,getTitleInListValues:()=>Ni,getValueInListValues:()=>Ho,listValuesToArray:()=>gr,makeCustomListValue:()=>Vr,mapListValues:()=>xi,searchListValue:()=>Yt,toListValue:()=>hn});var D={};O.r(D),O.d(D,{expandTreePath:()=>Pe,expandTreeSubpath:()=>Nr,fixEmptyGroupsInTree:()=>Oa,fixPathsInTree:()=>mn,getFlatTree:()=>yn,getItemByPath:()=>na,getLightTree:()=>Gi,getSwitchValues:()=>si,getTotalReordableNodesCountInTree:()=>mo,getTotalRulesCountInTree:()=>ba,getTreeBadFields:()=>ki,hasChildren:()=>ci,immutableToJs:()=>ii,isEmptyTree:()=>tr,isImmutable:()=>ta,jsToImmutable:()=>dr,removeIsLockedInTree:()=>Mi,toImmutableList:()=>ar});var $={};O.r($),O.d($,{SqlString:()=>hr,mongoEmptyValue:()=>ka,spelEscape:()=>di,spelFixList:()=>ul,spelFormatConcat:()=>Fd,spelImportConcat:()=>Ed,sqlEmptyValue:()=>ln,stringifyForDisplay:()=>ll});var K={};O.r(K),O.d(K,{_loadFromJsonLogic:()=>Wi,_loadFromSpel:()=>Tl,checkTree:()=>Na,getTree:()=>yo,isImmutableTree:()=>fi,isJsonLogic:()=>lr,isTree:()=>un,isValidTree:()=>So,jsToImmutable:()=>dr,loadFromJsonLogic:()=>Xo,loadFromSpel:()=>Dd,loadTree:()=>kn});var w={};O.r(w),O.d(w,{createListFromArray:()=>Jd,defaultConjunction:()=>Wn,defaultGroupConjunction:()=>bo,defaultGroupProperties:()=>Fa,defaultItemProperties:()=>jl,defaultOperatorOptions:()=>zi,defaultRoot:()=>Hd,defaultRule:()=>Dl,defaultRuleProperties:()=>Bn,emptyProperies:()=>Qd,getDefaultField:()=>Pl,getDefaultFieldSrc:()=>ou,getDefaultOperator:()=>uu,getDefaultSubField:()=>Il});var R={};O.r(R),O.d(R,{completeFuncValue:()=>Nl,getCompatibleArgsOnFuncChange:()=>Ml,setArgValue:()=>lp,setArgValueSrc:()=>sp,setFunc:()=>up});var M={};O.r(M),O.d(M,{completeValue:()=>Ba,filterValueSourcesForField:()=>$a,formatFieldName:()=>aa,getFieldPartsConfigs:()=>$l,getFieldPathLabels:()=>qi,getFirstField:()=>kl,getFirstOperator:()=>cu,getFuncPathLabels:()=>cp,getNewValueForFieldOp:()=>Ga,getOperatorsForField:()=>To,getOperatorsForType:()=>Gl,getValueLabel:()=>fp,getValueSourcesForFieldOp:()=>Bl,getWidgetForFieldOp:()=>Zt,getWidgetsForFieldOp:()=>dp,isCompletedValue:()=>Ki,isEmptyGroupChildren:()=>pu,isEmptyItem:()=>du,isEmptyRuleGroupExtPropertiesAndChildren:()=>Wl,isEmptyRuleProperties:()=>vu,selectTypes:()=>Co});var I={};O.r(I),O.d(I,{_widgetDefKeysToOmit:()=>xp,applyJsonLogic:()=>yp,cleanJSX:()=>oi,compileConfig:()=>rs,compressConfig:()=>es,configKeys:()=>wo,decompressConfig:()=>ts,extendConfig:()=>ia,getFieldConfig:()=>He,getFieldParts:()=>sr,getFieldPath:()=>Fu,getFieldPathParts:()=>Np,getFieldRawConfig:()=>Tn,getFieldSrc:()=>fs,getFieldWidgetConfig:()=>$r,getFuncArgConfig:()=>bu,getFuncConfig:()=>_r,getFuncSignature:()=>Ou,getOperatorConfig:()=>Wt,isDirtyJSX:()=>Dr,isFieldDescendantOfField:()=>cs,isJSX:()=>xn,iterateFields:()=>ss,iterateFuncs:()=>hi,normalizeField:()=>_o});var q={};O.r(q),O.d(q,{ES_6_SYNTAX:()=>Ks,ES_7_SYNTAX:()=>qs,_mongodbFormat:()=>Ls,_spelFormat:()=>pl,_sqlFormat:()=>Is,compareToSign:()=>eu,elasticSearchFormat:()=>Hs,jsonLogicFormat:()=>Bp,mongodbFormat:()=>Hp,queryBuilderFormat:()=>Mp,queryString:()=>ov,spelFormat:()=>wd,sqlFormat:()=>ev});var te={};O.r(te),O.d(te,{fixListValuesGroupOrder:()=>Rv,getListValue:()=>Sa,listValueToOption:()=>_v,mergeListValues:()=>Tv,optionToListValue:()=>wv,optionsToListValues:()=>Lv,simulateAsyncFetch:()=>Cv});var re={};O.r(re),O.d(re,{Autocomplete:()=>te,ConfigUtils:()=>I,DefaultUtils:()=>w,ExportUtils:()=>$,FuncUtils:()=>R,ListUtils:()=>A,OtherUtils:()=>V,RuleUtils:()=>M,TreeUtils:()=>D,clone:()=>Sn(),compressConfig:()=>es,decompressConfig:()=>ts,getSwitchValues:()=>si,moment:()=>Ft(),uuid:()=>Tt,validateAndFixTree:()=>Zd,validateTree:()=>lu});var Z={};O.r(Z),O.d(Z,{LINEAR_REGRESSION:()=>Dv,LOWER:()=>Iv,NOW:()=>Av,RELATIVE_DATETIME:()=>Pv,UPPER:()=>jv});var le={};O.r(le),O.d(le,{addCaseGroup:()=>Fg,addDefaultCaseGroup:()=>bg,addGroup:()=>Eg,addRule:()=>Sg,moveItem:()=>Tg,removeGroup:()=>Cg,removeRule:()=>Og,setTree:()=>yg});var be={};O.r(be),O.d(be,{setConjunction:()=>wg,setLock:()=>_g,setNot:()=>Lg});var ae={};O.r(ae),O.d(ae,{setField:()=>Rg,setFieldSrc:()=>Ag,setOperator:()=>Pg,setOperatorOption:()=>Dg,setValue:()=>Ig,setValueSrc:()=>jg});var Le={};O.r(Le),O.d(Le,{bindActionCreators:()=>Bc,isUsingLegacyReactDomRender:()=>$c,liteShouldComponentUpdate:()=>ku,pureShouldComponentUpdate:()=>yi,useOnPropsChanged:()=>xr});var Oe={};O.r(Oe),O.d(Oe,{FuncWidget:()=>Ju,ValueFieldWidget:()=>td,VanillaBooleanWidget:()=>OS,VanillaButton:()=>VS,VanillaButtonGroup:()=>xS,VanillaConjs:()=>jS,VanillaDateTimeWidget:()=>TS,VanillaDateWidget:()=>ES,VanillaFieldSelect:()=>IS,VanillaIcon:()=>NS,VanillaMultiSelectWidget:()=>LS,VanillaNumberWidget:()=>AS,VanillaProvider:()=>$S,VanillaSelectWidget:()=>RS,VanillaSliderWidget:()=>PS,VanillaSwitch:()=>kS,VanillaTextAreaWidget:()=>FS,VanillaTextWidget:()=>bS,VanillaTimeWidget:()=>CS,VanillaValueSources:()=>MS,vanillaConfirm:()=>GS});var $e={};O.r($e),O.d($e,{ProximityOperator:()=>el});var Me=O(50877),Ve=(a=>(a.Timeseries="time_series",a.Table="table",a))(Ve||{});const Se=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],rt=a=>({label:a,value:a}),Be=Me.z??rt;var lt=O(13288),it=O(75505),Qe=O(81160),Je=O(41987),mt=O(92053),_e=O(43127),Jt=O(78368),gt=O(98765),Dt=O(26657),Lt=O(72574),ee=O(14110),H=O(17172),X=O(47773),ce=O(2543);class ge{transformMetricFindResponse(e){const t=[],n=e.fields.find(i=>i.name==="__text"),r=e.fields.find(i=>i.name==="__value");if(n&&r)for(let i=0;i<n.values.length;i++)t.push({text:""+n.values[i],value:""+r.values[i]});else for(const i of e.fields)for(const u of i.values)t.push({text:u});return(0,ce.uniqBy)(t,"text")}}var g=O(96540),we=O(16817),Re=O(68402),qe=(a=>(a.String="string",a))(qe||{}),xt=(a=>(a.Property="property",a.Operator="operator",a.Or="or",a.And="and",a.GroupBy="groupBy",a.Function="function",a.FunctionParameter="functionParameter",a))(xt||{});function Gt(a){return`SELECT ${a.map(t=>{let n="";return t.name&&t.alias?n+=`${t.name}(${t.parameters?.map(r=>`${r.name}`)}) AS ${t.alias}`:t.name?n+=`${t.name}(${t.parameters?.map(r=>`${r.name}`)})`:t.alias?n+=`${t.parameters?.map(r=>`${r.name}`)} AS ${t.alias}`:n+=`${t.parameters?.map(r=>`${r.name}`)}`,n}).join(", ")} `}const nt=a=>{if(!a)return!1;const e=a.some(n=>n.parameters?.length||n.parameters?.some(r=>r.name)),t=a.some(n=>n.name);return e||t};function vr(a){return{type:xt.GroupBy,property:{type:qe.String,name:a}}}function _t(a){return{type:xt.Property,property:{type:qe.String,name:a}}}function Br(a){return{type:xt.Function,name:a,parameters:[]}}function jn(a){let e=a?.editorMode||gt.lX.Builder;return a?.editorMode===void 0&&a?.rawSql!==void 0&&(e=gt.lX.Code),{...a,refId:a?.refId||"A",format:a?.format!==void 0?a.format:Ve.Table,rawSql:a?.rawSql||"",editorMode:e,sql:a?.sql??{columns:[Br()],groupBy:[vr()],limit:50}}}var Tr=O(73287),Fr=O(62938),cr=O(13544),Wr=O(6191),_a=O(22354),Za=O(31347),zt=O(9e4),kr=O(81580),cn=O(15292),Zr=O(55852),Ur=O(56034),ca=O(94354),Jn=O(37390),Er=O(14578);function Ra({isOpen:a,onCancel:e,onDiscard:t,onCopy:n}){const r=(0,g.useRef)(null);return(0,g.useEffect)(()=>{a&&r.current?.focus()},[a]),g.createElement(Jn.a,{title:g.createElement("div",{className:"modal-header-title"},g.createElement(Er.I,{name:"exclamation-triangle",size:"lg"}),g.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:e,isOpen:a},g.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),g.createElement("p",null,"Do you want to copy your code to the clipboard?"),g.createElement(Jn.a.ButtonRow,null,g.createElement(Zr.$n,{type:"button",variant:"secondary",onClick:e,fill:"outline"},"Cancel"),g.createElement(Zr.$n,{variant:"destructive",type:"button",onClick:t,ref:r},"Discard code and switch"),g.createElement(Zr.$n,{variant:"primary",onClick:n},"Copy code and switch")))}var Ir=O(88323),fn=O(32264);const qt=()=>!!fn.$.featureToggles.sqlDatasourceDatabaseSelection,fa=({dataset:a,db:e,dialect:t,onChange:n,preconfiguredDataset:r})=>{const i=!!r||t==="postgres",u=(0,we.A)(async()=>qt()&&i?(n(Be(r)),[Be(r)]):(a&&n(Be(a)),(await e.datasets()).map(Be)),[]);return(0,g.useEffect)(()=>{qt()||(a?u.value&&u.value.find(o=>o.value===a)===void 0&&u.value.length>0&&n(u.value[0]):u.value&&u.value[0]&&n(u.value[0]))},[u.value,n,a]),g.createElement(Ir.l6,{"aria-label":"Dataset selector",value:a,options:u.value,onChange:n,disabled:u.loading,isLoading:u.loading,menuShouldPortal:!0})},fr=({db:a,dataset:e,table:t,className:n,onChange:r})=>{const i=(0,we.A)(async()=>e?(await a.tables(e)).map(Me.z):[],[e]);return g.createElement(Ir.l6,{className:n,disabled:i.loading,"aria-label":"Table selector","data-testid":cr.Tp.components.SQLQueryEditor.headerTableSelector,value:t,options:i.value,onChange:r,isLoading:i.loading,menuShouldPortal:!0,placeholder:i.loading?"Loading tables":"Select table"})},Aa=[{label:"Builder",value:gt.lX.Builder},{label:"Code",value:gt.lX.Code}];function Qn({db:a,dialect:e,isQueryRunnable:t,onChange:n,onQueryRowChange:r,onRunQuery:i,preconfiguredDataset:u,query:o,queryRowFilter:l}){const{editorMode:c}=o,[f,d]=(0,Tr.A)(),[v,h]=(0,g.useState)(!1),m=a.toRawSql,S=(0,g.useCallback)(T=>{if(T===gt.lX.Code&&(0,ee.rR)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:gt.lX.Code}),c===gt.lX.Code){h(!0);return}n({...o,editorMode:T})},[c,n,o]),b=T=>{const P={...o,format:T.value!==void 0?T.value:Ve.Table};(0,ee.rR)("grafana_sql_format_changed",{datasource:o.datasource?.type,selectedFormat:P.format}),n(P)},E=T=>{if(T.value===o.dataset)return;const P={...o,dataset:T.value,table:void 0,sql:void 0,rawSql:""};n(P)},L=T=>{if(T.value===o.table)return;const P={...o,table:T.value,sql:void 0,rawSql:""};n(P)},_=()=>!(e==="influx"||!qt()&&e==="postgres");return g.createElement(g.Fragment,null,g.createElement(Wr.X,null,g.createElement(_a.W,{label:"Format",value:o.format,placeholder:"Select format",menuShouldPortal:!0,onChange:b,options:Se}),c===gt.lX.Builder&&g.createElement(g.Fragment,null,g.createElement(cn.K,{id:`sql-filter-${(0,Fr.A)()}}`,label:"Filter","data-testid":cr.Tp.components.SQLQueryEditor.headerFilterSwitch,transparent:!0,showLabel:!0,value:l.filter,onChange:T=>{T.target instanceof HTMLInputElement&&((0,ee.rR)("grafana_sql_filter_toggled",{datasource:o.datasource?.type,displayed:T.target.checked}),r({...l,filter:T.target.checked}))}}),g.createElement(cn.K,{id:`sql-group-${(0,Fr.A)()}}`,label:"Group","data-testid":cr.Tp.components.SQLQueryEditor.headerGroupSwitch,transparent:!0,showLabel:!0,value:l.group,onChange:T=>{T.target instanceof HTMLInputElement&&((0,ee.rR)("grafana_sql_group_toggled",{datasource:o.datasource?.type,displayed:T.target.checked}),r({...l,group:T.target.checked}))}}),g.createElement(cn.K,{id:`sql-order-${(0,Fr.A)()}}`,label:"Order","data-testid":cr.Tp.components.SQLQueryEditor.headerOrderSwitch,transparent:!0,showLabel:!0,value:l.order,onChange:T=>{T.target instanceof HTMLInputElement&&((0,ee.rR)("grafana_sql_order_toggled",{datasource:o.datasource?.type,displayed:T.target.checked}),r({...l,order:T.target.checked}))}}),g.createElement(cn.K,{id:`sql-preview-${(0,Fr.A)()}}`,label:"Preview","data-testid":cr.Tp.components.SQLQueryEditor.headerPreviewSwitch,transparent:!0,showLabel:!0,value:l.preview,onChange:T=>{T.target instanceof HTMLInputElement&&((0,ee.rR)("grafana_sql_preview_toggled",{datasource:o.datasource?.type,displayed:T.target.checked}),r({...l,preview:T.target.checked}))}})),g.createElement(Za.Z,{grow:1}),t?g.createElement(Zr.$n,{icon:"play",variant:"primary",size:"sm",onClick:()=>i()},"Run query"):g.createElement(Ur.m,{theme:"error",content:g.createElement(g.Fragment,null,"Your query is invalid. Check below for details. ",g.createElement("br",null),"However, you can still run this query."),placement:"top"},g.createElement(Zr.$n,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>i()},"Run query")),g.createElement(ca.z,{options:Aa,size:"sm",value:c,onChange:S}),g.createElement(Ra,{isOpen:v,onCopy:()=>{(0,ee.rR)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:gt.lX.Builder,type:"copy"}),h(!1),d(o.rawSql),n({...o,rawSql:m(o),editorMode:gt.lX.Builder})},onDiscard:()=>{(0,ee.rR)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:gt.lX.Builder,type:"discard"}),h(!1),n({...o,rawSql:m(o),editorMode:gt.lX.Builder})},onCancel:()=>{(0,ee.rR)("grafana_sql_editor_mode_changed",{datasource:o.datasource?.type,selectedEditorMode:gt.lX.Builder,type:"cancel"}),h(!1)}})),c===gt.lX.Builder&&g.createElement(g.Fragment,null,g.createElement(Re.$,{v:.5}),g.createElement(zt.U,null,_()&&g.createElement(kr.c,{label:"Dataset",width:25},g.createElement(fa,{db:a,dataset:o.dataset,dialect:e,preconfiguredDataset:u,onChange:E})),g.createElement(kr.c,{label:"Table",width:25},g.createElement(fr,{db:a,dataset:o.dataset||u,table:o.table,onChange:L})))))}var Rt=O(32196),da=O(49185),dn=O(70713),Qr=O(40845),Dn=O(6867);function Yn({children:a,onChange:e,query:t,width:n,height:r,editorLanguageDefinition:i}){const u=(0,g.useRef)(t);(0,g.useEffect)(()=>{u.current=t},[t]);const o=(0,g.useCallback)((l,c)=>{const f={...u.current,rawQuery:!0,rawSql:l};e(f,c)},[e]);return g.createElement(Dn.Y,{width:n,height:r,query:t.rawSql,onChange:o,language:i},a)}var Vn=O(66864),Xn=O(29158),wr=O(41053),ei=O(75198),pa=O(83195),ti=O(62930);function ri({db:a,query:e,onValidate:t,range:n}){const[r,i]=(0,g.useState)(),u=(0,Qr.$j)(),o=(0,g.useMemo)(()=>(0,pa.j_)("bytes"),[]),l=(0,g.useMemo)(()=>({error:(0,Rt.css)`
        color: ${u.colors.error.text};
        font-size: ${u.typography.bodySmall.fontSize};
        font-family: ${u.typography.fontFamilyMonospace};
      `,valid:(0,Rt.css)`
        color: ${u.colors.success.text};
      `,info:(0,Rt.css)`
        color: ${u.colors.text.secondary};
      `}),[u]),[c,f]=(0,wr.A)(async v=>v.rawSql?.trim()===""?null:await a.validateQuery(v,n),[a]),[,]=(0,ei.A)(async()=>{const v=await f(e);return v&&i(v),null},1e3,[e,f]);if((0,g.useEffect)(()=>{r?.isError&&t(!1),r?.isValid&&t(!0)},[r,t]),!c.value&&!c.loading)return null;const d=c.value?.error?Mt(c.value.error):"";return g.createElement(g.Fragment,null,c.loading&&g.createElement("div",{className:l.info},g.createElement(ti.y,{inline:!0,size:"xs"})," Validating query..."),!c.loading&&c.value&&g.createElement(g.Fragment,null,g.createElement(g.Fragment,null,c.value.isValid&&c.value.statistics&&g.createElement("div",{className:l.valid},g.createElement(Er.I,{name:"check"})," This query will process"," ",g.createElement("strong",null,(0,pa.cN)(o(c.value.statistics.TotalBytesProcessed)))," ","when run.")),g.createElement(g.Fragment,null,c.value.isError&&g.createElement("div",{className:l.error},d))))}function Mt(a){const e=a.split(":");return e.length>2?e.slice(2).join(":"):a}function zr({showTools:a,onFormatCode:e,onExpand:t,isExpanded:n,...r}){const i=(0,Qr.$j)(),[u,o]=(0,g.useState)(),l=(0,g.useMemo)(()=>({container:(0,Rt.css)`
        border: 1px solid ${i.colors.border.medium};
        border-top: none;
        padding: ${i.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${i.typography.bodySmall.fontSize};
      `,error:(0,Rt.css)`
        color: ${i.colors.error.text};
        font-size: ${i.typography.bodySmall.fontSize};
        font-family: ${i.typography.fontFamilyMonospace};
      `,valid:(0,Rt.css)`
        color: ${i.colors.success.text};
      `,info:(0,Rt.css)`
        color: ${i.colors.text.secondary};
      `,hint:(0,Rt.css)`
        color: ${i.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[i]);let c={};return!a&&u===void 0&&(c={height:0,padding:0,visibility:"hidden"}),g.createElement("div",{className:l.container,style:c},g.createElement("div",null,r.onValidate&&g.createElement(ri,{...r,onValidate:f=>{o(f),r.onValidate(f)}})),a&&g.createElement("div",null,g.createElement(Vn.Gy,{spacing:"sm"},e&&g.createElement(Xn.K,{onClick:()=>{(0,ee.rR)("grafana_sql_query_formatted",{datasource:r.query.datasource?.type}),e()},name:"brackets-curly",size:"xs",tooltip:"Format query"}),t&&g.createElement(Xn.K,{onClick:()=>{(0,ee.rR)("grafana_sql_editor_expand",{datasource:r.query.datasource?.type,expanded:!n}),t(!n)},name:n?"angle-up":"angle-down",size:"xs",tooltip:n?"Collapse editor":"Expand editor"}),g.createElement(Ur.m,{content:"Hit CTRL/CMD+Return to run query"},g.createElement(Er.I,{className:l.hint,name:"keyboard"})))))}function Pa({db:a,query:e,onChange:t,onRunQuery:n,onValidate:r,queryToValidate:i,range:u}){const o=(0,Qr.$j)(),l=(0,Qr.of)(Ia),[c,f]=(0,g.useState)(!1),[d,v]=(0,da.A)(),[h,m]=(0,da.A)(),S=(0,g.useMemo)(()=>a.getEditorLanguageDefinition(),[a]),b=(_,T)=>g.createElement(Yn,{editorLanguageDefinition:S,query:e,width:_,height:T?T-v.height:void 0,onChange:t},({formatQuery:P})=>g.createElement("div",{ref:d},g.createElement(zr,{db:a,query:i,onValidate:r,onFormatCode:P,showTools:!0,range:u,onExpand:f,isExpanded:c}))),E=(_=!1)=>_?g.createElement(dn.Ay,null,({width:T,height:P})=>b(T,P)):g.createElement("div",{ref:h},b()),L=()=>g.createElement("div",{style:{width:m.width,height:m.height,background:o.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return g.createElement(g.Fragment,null,c?L():E(),c&&g.createElement(Jn.a,{title:`Query ${e.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:l.modal,contentClassName:l.modalContent,isOpen:c,onDismiss:()=>{(0,ee.rR)("grafana_sql_editor_expand",{datasource:e.datasource?.type,expanded:!1}),f(!1)}},E(!0)))}function Ia(a){return{modal:(0,Rt.css)`
      width: 95vw;
      height: 95vh;
    `,modalContent:(0,Rt.css)`
      height: 100%;
      padding-top: 0;
    `}}var ja=O(71087),$t=O(11807);function Qt({query:a,onQueryChange:e,db:t}){return{onSqlChange:(0,g.useCallback)(r=>{const i=t.toRawSql,u=i({sql:r,dataset:a.dataset,table:a.table,refId:a.refId}),o={...a,sql:r,rawSql:u};e(o)},[t,e,a])}}var Gr=O(7650),en=O(81392),En=O(3721);function jr({sql:a,columns:e,onSqlChange:t}){const n=(0,g.useCallback)(r=>{const i=r.map(o=>vr(o.property?.name)),u={...a,groupBy:i};t(u)},[t,a]);return g.createElement(Gr.o,{items:a.groupBy,onChange:n,renderItem:ct({options:e})})}function ct({options:a}){return function(t,n,r){return g.createElement(en.M,null,g.createElement(Ir.l6,{value:t.property?.name?(0,Me.z)(t.property.name):null,"aria-label":"Group by",options:a,menuShouldPortal:!0,onChange:({value:i})=>i&&n(vr(i))}),g.createElement(En.Z,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:r}))}}function At({fields:a,query:e,onQueryChange:t,db:n}){const{onSqlChange:r}=Qt({query:e,onQueryChange:t,db:n});return g.createElement(jr,{columns:a,sql:e.sql,onSqlChange:r})}var Pt=O(10354);const tt=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function Zn({sql:a,onSqlChange:e,columns:t,showOffset:n}){const r=(0,g.useCallback)(l=>{const c={...a,orderByDirection:l};e(c)},[e,a]),i=(0,g.useCallback)(l=>{const c={...a,limit:Number.parseInt(l.currentTarget.value,10)};e(c)},[e,a]),u=(0,g.useCallback)(l=>{const c={...a,offset:Number.parseInt(l.currentTarget.value,10)};e(c)},[e,a]),o=(0,g.useCallback)(l=>{const c={...a,orderBy:_t(l?.value)};l===null&&(c.orderByDirection=void 0),e(c)},[e,a]);return g.createElement(g.Fragment,null,g.createElement(kr.c,{label:"Order by",width:25},g.createElement(en.M,null,g.createElement(Ir.l6,{"aria-label":"Order by",options:t,value:a.orderBy?.property.name?(0,Me.z)(a.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:o}),g.createElement(Re.$,{h:1.5}),g.createElement(ca.z,{options:tt,disabled:!a?.orderBy?.property.name,value:a.orderByDirection,onChange:r}))),g.createElement(kr.c,{label:"Limit",optional:!0,width:25},g.createElement(Pt.p,{type:"number",min:0,id:(0,ce.uniqueId)("limit-"),value:a.limit||"",onChange:i})),n&&g.createElement(kr.c,{label:"Offset",optional:!0,width:25},g.createElement(Pt.p,{type:"number",id:(0,ce.uniqueId)("offset-"),value:a.offset||"",onChange:u})))}function tn({fields:a,query:e,onQueryChange:t,db:n}){const{onSqlChange:r}=Qt({query:e,onQueryChange:t,db:n});let i=[];return a&&(i=[{value:"",label:"Selected columns",options:e.sql?.columns?.map((o,l)=>{const c=o.name?`${o.name}(${o.parameters?.map(f=>f.name)})`:o.parameters?.map(f=>f.name);return{value:c,label:`${l+1} - ${c}`}}),expanded:!0},...a]),g.createElement(Zn,{sql:e.sql,onSqlChange:r,columns:i})}const ea=["AVG","COUNT","MAX","MIN","SUM"],pn=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"];var Ue=O(46819);const Lr={label:"*",value:"*"};function U({sql:a,format:e,columns:t,onSqlChange:n,functions:r}){const i=(0,Qr.of)(oe),u=[Lr,...t||[]],o=[];e===Ve.Timeseries&&(o.push({label:"time",value:"time"}),o.push({label:"value",value:"value"}));const l=(0,g.useCallback)((h,m)=>S=>{let b={...h};h.parameters?.length?b.parameters=h.parameters.map(L=>L.type===xt.FunctionParameter?{...L,name:S.value}:L):b.parameters=[{type:xt.FunctionParameter,name:S.value}];const E={...a,columns:a.columns?.map((L,_)=>_===m?b:L)};n(E)},[n,a]),c=(0,g.useCallback)((h,m)=>S=>{const b={...h,name:S?.value},E={...a,columns:a.columns?.map((L,_)=>_===m?b:L)};n(E)},[n,a]),f=(0,g.useCallback)((h,m)=>S=>{let b={...h};S!==null?b={...h,alias:`"${S?.value?.trim()}"`}:delete b.alias;const E={...a,columns:a.columns?.map((L,_)=>_===m?b:L)};n(E)},[n,a]),d=(0,g.useCallback)(h=>()=>{const m=[...a.columns];m.splice(h,1);const S={...a,columns:m};n(S)},[n,a]),v=(0,g.useCallback)(()=>{const h={...a,columns:[...a.columns,Br()]};n(h)},[n,a]);return g.createElement(Ue.B,{gap:2,wrap:!0,direction:"column"},a.columns?.map((h,m)=>g.createElement("div",{key:m},g.createElement(Ue.B,{gap:2,alignItems:"end"},g.createElement(kr.c,{label:"Column",width:25},g.createElement(Ir.l6,{value:Ce(h),"data-testid":cr.Tp.components.SQLQueryEditor.selectColumn,options:u,inputId:`select-column-${m}-${(0,ce.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:l(h,m)})),g.createElement(kr.c,{label:"Aggregation",optional:!0,width:25},g.createElement(Ir.l6,{value:h.name?(0,Me.z)(h.name):null,inputId:`select-aggregation-${m}-${(0,ce.uniqueId)()}`,"data-testid":cr.Tp.components.SQLQueryEditor.selectAggregation,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:r,onChange:c(h,m)})),g.createElement(kr.c,{label:"Alias",optional:!0,width:15},g.createElement(Ir.l6,{value:h.alias?(0,Me.z)(h.alias):null,inputId:`select-alias-${m}-${(0,ce.uniqueId)()}`,"data-testid":cr.Tp.components.SQLQueryEditor.selectAlias,options:o,onChange:f(h,m),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),g.createElement(Zr.$n,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:d(m)})))),g.createElement(Zr.$n,{type:"button",onClick:v,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:i.addButton}))}const oe=()=>({addButton:(0,Rt.css)({alignSelf:"flex-start"})});function Ce({parameters:a}){const e=a?.find(t=>t.type===xt.FunctionParameter);return e?.name?(0,Me.z)(e.name):null}function at({fields:a,query:e,onQueryChange:t,db:n}){const{onSqlChange:r}=Qt({query:e,onQueryChange:t,db:n}),i=[...ea,...n.functions?.()||[]].map(Me.z);return g.createElement(U,{columns:a,sql:e.sql,format:e.format,functions:i,onSqlChange:r})}var Kt=O(24705);function ot(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(a){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(a)}function no(a,e){if(Yr(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var n=t.call(a,e||"default");if(Yr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function ni(a){var e=no(a,"string");return Yr(e)=="symbol"?e:e+""}function ao(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,ni(n.key),n)}}function Vt(a,e,t){return e&&ao(a.prototype,e),t&&ao(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function kt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function va(a,e){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},va(a,e)}function It(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&va(a,e)}function Nt(a,e){if(e&&(Yr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(a)}function ke(a){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(a)}var Ae=O(64467);function ai(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function io(a){if(Array.isArray(a))return ai(a)}function oo(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ri(a,e){if(a){if(typeof a=="string")return ai(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ai(a,e)}}function Uo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(a){return io(a)||oo(a)||Ri(a)||Uo()}function uo(a){if(Array.isArray(a))return a}function Ht(a,e){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n,r,i,u,o=[],l=!0,c=!1;try{if(i=(t=t.call(a)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=i.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(f){c=!0,r=f}finally{try{if(!l&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw r}}return o}}function Ai(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ye(a,e){return uo(a)||Ht(a,e)||Ri(a,e)||Ai()}var ft=O(82284),Ot=O(49790),Ke=O.n(Ot),lo=O(90179),Ct=O.n(lo),so=0;const Tt=function(){var a=(new Date().getTime().toString(16)+"FF").substr(0,11),e="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(t){var n=t==="s"?Math.floor(Math.random()*16):so++&15,r=t==="x"?n:n&3|8;return r.toString(16)});return e+a};var co=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},Cn=["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue","spelImportFuncs","spelImportValue"],rn=["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"],ur=function(e,t){return typeof e>"u"?t:e},nn=function(e,t){return e===t?!0:Ot.Map.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t)},Nn=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e===t?!0:Array.isArray(e)?Da(e,t,n):Ot.Map.isMap(e)?e.equals(t):(0,ft.A)(e)=="object"?nr(e,t,n):e===t};function Da(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=a.length;if(e.length!==n)return!1;for(var r=0;r<n;r++){var i=t?Nn(a[r],e[r],t):a[r]===e[r];if(!i)return!1}return!0}function nr(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=Object.keys(a),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var u=0;u<i;u++){var o=n[u],l=t?Nn(a[o],e[o],t):a[o]===e[o];if(!l)return!1}return!0}var ta=function(e){return(0,ft.A)(e)==="object"&&e!==null&&typeof e.toJS=="function"};function ar(a){return ta(a)?a:new(Ke()).List(a)}function ii(a){return ta(a)?a.toJS():a}var Va=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")},oi=function a(e){var t=["$$typeof","_owner","_store","ref","key"],n=function(o){return typeof o=="string"?o:typeof o=="function"?o.name:o};if(e instanceof Array)return e.map(function(u,o){return a(u)});if((0,ft.A)(e)==="object"&&e!==null&&Dr(e)){var r,i=Ct()(e,t);return i.type&&(i.type=n(i.type)),i!=null&&(r=i.props)!==null&&r!==void 0&&r.children&&(i.props.children=a(i.props.children)),i}return e},Dr=function(e){return(0,ft.A)(e)==="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).includes("type")&&Object.keys(e).includes("props")&&Object.keys(e).includes("key")&&Object.keys(e).includes("ref")&&Object.keys(e).includes("$$typeof")},xn=function(e){return(0,ft.A)(e)==="object"&&e!==null&&!Array.isArray(e)&&typeof e.type=="string"&&Object.keys(e).includes("props")},lr=function(e){var t=(0,ft.A)(e)==="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).length===1;return t};function ra(a){return new Promise(function(e){setTimeout(e,a)})}function Pi(a,e){return a||(a=[]),e||(e=[]),e.map(function(t){return[t,a.indexOf(t)]}).map(function(t,n,r){var i=Ye(t,2),u=i[0],o=i[1];if(o==-1){var l=r.slice(n+1),c=r.slice(0,n),f=c.reverse().find(function(v){var h=Ye(v,2),m=h[0],S=h[1];return S!=-1}),d=l.find(function(v){var h=Ye(v,2),m=h[0],S=h[1];return S!=-1});return d?[u,"before",d[0]]:f?[u,"after",f[0]]:[u,"append",null]}else return null}).filter(function(t){return t!==null}).reduce(function(t,n){var r=Ye(n,3),i=r[0],u=r[1],o=r[2],l=t.indexOf(o);return t.indexOf(i)==-1&&(l>-1?t.splice(l+(u=="after"?1:0),0,i):t.splice(u=="append"?1/0:0,0,i)),t},a.slice())}var Ii=function a(e){(0,ft.A)(e)==="object"&&e!==null&&(Object.keys(e).forEach(function(t){a(e[t])}),Object.freeze(e))},ui=function a(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(co(e)){if(e.var)return n[e.var]=t,!0;if(!co(t))return!1;for(var i in e){var u=e[i],o=t[i];if(!a(u,o,n,[].concat(Ge(r),[i])))return!1}return!0}else if(Array.isArray(e)){if(!Array.isArray(t))return!1;for(var l=0;l<e.length;l++){var c=e[l],f=t[l];if(!a(c,f,n,[].concat(Ge(r),[l])))return!1}return!0}else return e===t},fo=function(){return typeof process<"u"&&process.env&&!1},po=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=e??fo();return t?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},vo=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t,n=0;n<e.length;n++){var r=e[n];if(r!==void 0){t=r;break}}return t},an=po(),zo=O(54756),vn=O.n(zo),qo=O(55364),ga=O.n(qo),Ko=O(44383),gn=O.n(Ko),ha=O(6924),ma=O.n(ha),ji={formatField:function(e,t,n,r,i,u){return u?n:e},fieldSources:["field"],keepInputOnChangeFieldSrc:!0,fieldItemKeysForSearch:["label","path","altLabel","grouplabel"],listKeysForSearch:["title","value"],valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",canReorder:!0,canRegroup:!0,canDeleteLocked:!1,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],defaultGroupConjunction:"AND",locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:"Delete",addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"Delete",notLabel:"Not",fieldSourcesPopupTitle:"Select source",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null},Di=O(95093),Ft=O.n(Di);function go(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=ho(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function ho(a,e){if(a){if(typeof a=="string")return Vi(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vi(a,e)}}function Vi(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function on(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function ya(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?on(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var li=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},hn=function(e,t){if(!(e==null||e==""))return li(e)?ya(ya({},e),{},{title:e.title||e.value}):{value:e,title:t!==void 0?t:""+e}},Vr=function(e){var t=hn(e);return li(t)?ya(ya({},hn(e)),{},{isCustom:!0}):t},gr=function(e){if(Array.isArray(e))return e.map(function(i){return hn(i)});if(!li(e))return e;var t=[];for(var n in e){var r=e[n];t.push(hn(n,r))}return t},Mn=function(e,t){if(Array.isArray(e)){var n=e.map(function(r){return hn(r)});return n.find(function(r){return""+r.value==""+t})}else return e[t]!==void 0?hn(t,e[t]):void 0},Ni=function(e,t){if(e==null)return t;var n=Mn(e,t);return n!==void 0?n.title:t},Ho=function(e,t){if(e==null)return t;var n=Mn(e,t);return n!==void 0?n.value:t},xi=function(e,t){var n=[];if(Array.isArray(e)){var r=go(e),i;try{for(r.s();!(i=r.n()).done;){var u=i.value,o=t(hn(u));o!=null&&n.push(o)}}catch(f){r.e(f)}finally{r.f()}}else for(var l in e){var c=t(hn(l,e[l]));c!=null&&n.push(c)}return n},Yt=function(e,t){return xi(t,function(n){return"".concat(n.value).indexOf(e)!=-1||n.title.indexOf(e)!=-1?n:null}).filter(function(n){return n!==null}).shift()},Sa=function(e,t){return xi(t,function(n){return""+n.value==""+e?n:null}).filter(function(n){return n!==null}).shift()},Pe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.interpose("children1").withMutations(function(i){return i.skip(1),i.push.apply(i,n),i})},Nr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.interpose("children1").withMutations(function(i){return i.push.apply(i,n),i})},na=function(e,t){var n=new(Ke()).OrderedMap((0,Ae.A)({},e.get("id"),e)),r=e;return t.forEach(function(i){r=n.get(i),n=r.get("children1")}),r},Mi=function(e){var t=e;function n(r,i){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=i.push(r.get("id")),l=r.getIn(["properties","isLocked"]);u&&l&&(t=t.deleteIn(Pe(o,"properties","isLocked")));var c=r.get("children1");c&&c.map(function(f,d){n(f,o,l||u)})}return n(e,new(Ke()).List),t},mn=function(e){var t=e;function n(r,i,u,o){if(r){var l=r.get("path"),c=r.get("id"),f=c||o,d=i.push(f);(!l||!l.equals(d))&&(t=t.setIn(Pe(d,"path"),d)),c||(t=t.setIn(Pe(d,"id"),f));var v=r.get("children1");v&&(v.constructor.name=="Map"&&(t=t.setIn(Pe(d,"children1"),new(Ke()).OrderedMap(v))),v.map(function(h,m){n(h,d,u+1,m)}))}}return n(e,new(Ke()).List,0),t},Oa=function(e){var t=e;function n(r,i,u,o){if(!r)return!1;var l=r.get("id")||o,c=i.push(l),f=r.get("children1");if(f){var d=f.map(function(v,h){return n(v,c,u+1,h)}).reduce(function(v,h){return v&&h},!0);if((f.size==0||d)&&u>0)return t=t.deleteIn(Pe(c)),!0}return!1}return n(e,new(Ke()).List,0),t},yn=function(e){var t=[],n={},r=0;function i(f,d,v,h,m,S,b,E,L){var _=f.get("type"),T=f.get("collapsed"),P=f.get("id"),N=f.get("children1"),G=f.getIn(["properties","isLocked"]),J=N?N.map(function(me,Ee){return Ee}).toArray():null,W=_=="rule_group",B=!m&&(!N||W),Q=J?.length>0,se=t.length,z=r;t.push(P),v||(r+=1),b.height=(b.height||0)+1,n[P]={type:_,parent:d.length?d[d.length-1]:null,parentType:E,caseId:_=="case_group"?P:L,isDefaultCase:_=="case_group"&&!N,path:d.concat(P),lev:S,leaf:!N,index:se,id:P,children:J,leafsCount:0,_top:se,top:v?null:z,collapsed:T,node:f,isLocked:G||h};var ne;if(N){var ie={};N.map(function(me,Ee){i(me,d.concat(P),v||T,h||G,m||W,S+1,ie,_,_=="case_group"?P:L)}),T||(b.height=(b.height||0)+(ie.height||0),Q&&!W&&(ne=(ie.depth||0)+1))}L&&B&&n[L].leafsCount++;var ve=t.length,ue=r,pe=b.height;Object.assign(n[P],{_height:ve-se,height:pe,bottom:(v?null:z)+pe}),ne!=null&&(Object.assign(n[P],{depth:ne}),b.depth=Math.max(b.depth||0,ne))}i(e,[],!1,!1,!1,0,{},null,null);for(var u=0;u<t.length;u++){var o=u>0?t[u-1]:null,l=u<t.length-1?t[u+1]:null,c=n[t[u]];c.prev=o,c.next=l}return{flat:t,items:n}},mo=function(e){if(!e)return-1;var t=0;function n(r,i,u){var o,l,c;typeof r.get=="function"?(o=r.get("id"),l=r.get("children1"),c=r.get("type")):(o=r.id,l=r.children1,c=r.type);var f=c=="rule_group";t++,l&&!f&&l.map(function(d,v){n(d,i.concat(o),u+1)})}return n(e,[],0),t-1},ba=function(e){if(!e)return-1;var t=0;function n(r,i,u){var o,l,c;typeof r.get=="function"?(o=r.get("id"),l=r.get("children1"),c=r.get("type")):(o=r.id,l=r.children1,c=r.type),c=="rule"||c=="rule_group"?t++:l&&l.map(function(f,d){n(f,i.concat(o),u+1)})}return n(e,[],0),t},ki=function(e){var t=[];function n(r,i,u){var o=r.get("id"),l=r.get("children1"),c=r.getIn(["properties","valueError"]),f=r.getIn(["properties","field"]);c&&c.size>0&&c.filter(function(d){return d!=null}).size>0&&t.push(f),l&&l.map(function(d,v){n(d,i.concat(o),u+1)})}return e&&n(e,[],0),Array.from(new Set(t))},Gi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e;function r(i,u){i.path&&delete i.path,!t&&u&&delete i.id;var o=i.properties;o&&o.operatorOptions==null&&delete o.operatorOptions;var l=i.children1;if(l){for(var c in l)r(l[c],c);t&&(i.children1=Object.values(l))}}return r(e,null),n},si=function(e){var t=[],n=e.get("children1");return n&&n.map(function(r){var i=r.getIn(["properties","value"]),u;i&&i.size==1?(u=i.get(0),Array.isArray(u)&&u.length==0&&(u=null)):u=null,t=[].concat(Ge(t),[u])}),t},tr=function(e){return!e.get("children1")||e.get("children1").size==0},ci=function(e,t){return e.getIn(Pe(t,"children1")).size>0},yo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e){var r=e;return r=r.toJS(),t&&(r=Gi(r,n)),r}},kn=function(e){if(fi(e))return e;if(un(e))return dr(e);if(typeof e=="string"&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof e=="string")return dr(JSON.parse(e));throw"Can't load tree!"},Na=function(e,t){if(e){var n=ia(t,void 0,!0);return lu(e,null,n,n)}},So=function(e){return ki(e).length==0},fi=function(e){return Ot.Map.isMap(e)},un=function(e){return(0,ft.A)(e)=="object"&&(e.type=="group"||e.type=="switch_group")};function dr(a){var e=(0,Ot.fromJS)(a,function(t,n){var r;if(t=="properties"){r=n.toOrderedMap();for(var i=0;i<2;i++){var u;((u=r.get("value"))===null||u===void 0?void 0:u.get(i))===null&&(r=r.setIn(["value",i],void 0))}}else t=="value"&&Ke().Iterable.isIndexed(n)?r=n.map(function(o){var l,c=o==null||(l=o.toJS)===null||l===void 0?void 0:l.call(o);return c!=null&&c.func?o.toOrderedMap():o!=null&&o.toJS?c:o}).toList():t=="asyncListValues"?r=n.toJS():t=="children1"&&Ke().Iterable.isIndexed(n)?r=new(Ke()).OrderedMap(n.map(function(o){return[o.get("id"),o]})):r=Ke().Iterable.isIndexed(n)?n.toList():n.toOrderedMap();return r});return e}function xa(a){return uo(a)||oo(a)||Ri(a)||Ai()}function Oo(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Jo(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Jo(a,e){if(a){if(typeof a=="string")return Ma(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ma(a,e)}}function Ma(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function $i(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Gn(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$i(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):$i(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Qo=function(e){return Array.from(new Set(e))},Yo=function(e){return e.reduce(function(t,n){var r=_slicedToArray(n,2),i=r[0],u=r[1];return Gn(Gn({},t),{},_defineProperty({},i,u))},{})},Bi=function(){return{errors:[]}},Xo=function(e,t){return Wi(e,t,!1)},Wi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=Bi(),i=ia(t,void 0,!1),u=Zo(i),o=e?s(e,u,i,"rule",r):void 0;o&&o.type!="group"&&(o=de(o,i));var l=o?kn(o):void 0;return n?[l,r.errors]:(r.errors.length&&console.warn("Errors while importing from JsonLogic:",r.errors),l)},Zo=function(e){var t={};for(var n in e.operators){var r=e.operators[n];if(typeof r.jsonLogic=="string"){var i=(r._jsonLogicIsRevArgs?"#":"")+r.jsonLogic+"/"+ur(r.cardinality,1);t[i]||(t[i]=[]),t[i].push(n)}else if(typeof r.jsonLogic2=="string"){var u=r.jsonLogic2+"/"+ur(r.cardinality,1);t[u]||(t[u]=[]),t[u].push(n)}}var o={};for(var l in e.conjunctions){var c=e.conjunctions[l],f=c.jsonLogicConj||l.toLowerCase();o[f]=l}var d={},v=Oo(hi(e)),h;try{for(v.s();!(h=v.n()).done;){var m=Ye(h.value,2),S=m[0],b=m[1],E=void 0;b.jsonLogicIsMethod?E="#"+b.jsonLogic:typeof b.jsonLogic=="string"&&(E=b.jsonLogic),E&&(d[E]||(d[E]=[]),d[E].push(S))}}catch(P){v.e(P)}finally{v.f()}var L=e.settings.jsonLogic,_=L.groupVarKey,T=L.altVarKey;return{operators:t,conjunctions:o,funcs:d,varKeys:["var",_,T]}},s=function a(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d,v;lr(e)&&(d=Object.keys(e)[0],v=e[d],Array.isArray(v)||(v=[v]));var h,m=i.errors.length,S=n.settings.jsonLogic.lockedOp,b=d=="!"&&v.length==1&&v[0]&&lr(v[0])&&t.varKeys.includes(Object.keys(v[0])[0]),E=d=="!"&&!b,L=S&&d==S;L?h=a(v[0],t,n,r,i,u,o,l,c,!0):E?h=a(v[0],t,n,r,i,!u,o,l,c):r=="val"?h=y(d,v,t,n,u,i,c)||k(d,v,t,n,u,o,i,c)||p(e,o,l,n,i):r=="rule"&&(h=Y(d,v,t,n,u,i,c,!1)||We(d,v,t,n,u,i,c));var _=i.errors.length;return d!="!"&&h===void 0&&_==m&&i.errors.push("Can't parse logic ".concat(JSON.stringify(e))),L&&(h.properties.isLocked=!0),h},p=function(e,t,n,r,i){var u;if(e===void 0&&(e=t?.defaultValue),e!==void 0){var o=r.widgets[n||t?.mainWidget],l=t?.type;if(!o){i.errors.push("No widget for type ".concat(l));return}if(lr(e)){i.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)));return}if(l=="time"&&typeof e=="number"){var c=Math.floor(e/60/60)%24,f=Math.floor(e/60)%60,d=e%60,v=o.valueFormat;if(v){var h=new Date(e);h.setMilliseconds(0),h.setHours(c),h.setMinutes(f),h.setSeconds(d),e=Ft()(h).format(v)}else e="".concat(c,":").concat(f,":").concat(d)}if(["date","datetime"].includes(l)&&e&&!(e instanceof Date))try{var m=new Date(e);m instanceof Date&&m.toISOString()===e&&(e=m)}catch{i.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var S=o.valueFormat;S&&(e=Ft()(e).format(S))}var b;if(e&&t!==null&&t!==void 0&&(u=t.fieldSettings)!==null&&u!==void 0&&u.asyncFetch){var E=Array.isArray(e)?e:[e];b=E}return{valueSrc:"value",value:e,valueType:o.type,asyncListValues:b}}},y=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(n.varKeys.includes(e)&&typeof t[0]=="string"){var l=_o(r,t[0],o),c=He(r,l);if(!c){u.errors.push("No config for field ".concat(l));return}return{valueSrc:"field",value:l,valueType:c.type}}},F=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,f=Object.keys(t)[0],d=Object.values(t)[0],v=function(ve,ue){return C(ve,ue,r,i,u,l,c)||j(ve,ue,r,i,u,o,l,c)},h=l.errors.length,m,S,b,E,L=v(f,d);if(L&&(m=L.field,S=L.fieldSrc),e&&(E=!0,b=n[0],n=[]),f=="reduce"&&Array.isArray(d)&&d.length==3){var _=d,T=Ye(_,3),P=T[0],N=T[1],G=T[2];if(lr(P)&&G==0&&lr(N)&&Array.isArray(N["+"])&&N["+"][0]==1&&lr(N["+"][1])&&N["+"][1].var=="accumulator")if(f=Object.keys(P)[0],d=Object.values(P)[0],f=="filter"){var J=d,W=Ye(J,2),B=W[0],Q=W[1];if(lr(B)){f=Object.keys(B)[0],d=Object.values(B)[0];var se=v(f,d);se&&(m=se.field,S=se.fieldSrc,b=Q,E=!0)}}else{var z=v(f,d);z&&(m=z.field,S=z.fieldSrc,E=!0)}}var ne=l.errors.length;if(!m&&ne==h&&l.errors.push("Unknown LHS ".concat(JSON.stringify(t))),!!m)return{field:m,fieldSrc:S,having:b,isGroup:E,args:n}},C=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;Array.isArray(t)||(t=[t]);var l=y(e,t,n,r,i,u,o);if(l)return{fieldSrc:"field",field:l.value}},j=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=k(e,t,n,r,i,u,o,l);if(c)return{fieldSrc:"func",field:c.value}},k=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(e){var c,f,d,v=e=="method";if(v){var h,m,S=xa(t);h=S[0],c=S[1],m=S.slice(2),f=[h].concat(Ge(m))}else c=e,f=t;var b=(v?"#":"")+c,E=u?.type||u?.returnType,L=(n.funcs[b]||[]).filter(function(ue){return u?_r(r,ue).returnType==E:!0});if(L.length)d=L[0];else{var _=(0,Ae.A)({},e,t),T=Oo(hi(r)),P;try{for(T.s();!(P=T.n()).done;){var N=Ye(P.value,2),G=N[0],J=N[1];if(J.jsonLogicImport&&(!E||J.returnType==E)){var W=void 0;try{W=J.jsonLogicImport(_)}catch{}W&&(d=G,f=W)}}}catch(ue){T.e(ue)}finally{T.f()}}if(d&&d){var B=_r(r,d),Q=Object.keys(B.args||{}),se=f.reduce(function(ue,pe,me){var Ee=Q[me],Ie=B.args[Ee],Ne;return Ie&&(Ne=s(pe,n,r,"val",o,!1,Ie,null,l)),Ne!==void 0?Gn(Gn({},ue),{},(0,Ae.A)({},Ee,Ne)):ue},{});for(var z in B.args){var ne=B.args[z],ie=se[z];if(ie===void 0){if(ie=ne?.defaultValue,ie!==void 0){var ve;ie={value:ie,valueSrc:(ve=ie)!==null&&ve!==void 0&&ve.func?"func":"value",valueType:ne.type}}if(ie===void 0){if(!(ne!=null&&ne.isOptional)){o.errors.push("No value for arg ".concat(z," of func ").concat(d));return}}else se[z]=ie}}return{valueSrc:"func",value:{func:d,args:se},valueType:B.returnType}}}},Y=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=n.conjunctions[e],f=r.settings.fieldSeparator;if(c){var d="group",v=t.map(function(_){return s(_,n,r,"rule",u,!1,null,null,o)}).filter(function(_){return _!==void 0}).reduce(function(_,T){return Gn(Gn({},_),{},(0,Ae.A)({},T.id,T))},{}),h=Object.values(v).map(function(_){var T,P;return(_==null||(T=_.properties)===null||T===void 0?void 0:T.fieldSrc)=="field"&&(_==null||(P=_.properties)===null||P===void 0?void 0:P.field)}).filter(function(_){var T;return _==null||(T=_.includes)===null||T===void 0?void 0:T.call(_,f)}),m=Object.fromEntries(Qo(h).map(function(_){var T=_.split(f),P=Object.fromEntries(T.slice(0,-1).map(function(N,G,J){return[].concat(Ge(J.slice(0,G)),[N])}).map(function(N){return[N.join(f),He(r,N)]}).filter(function(N){var G=Ye(N,2),J=G[0],W=G[1];return W?.type=="!group"}));return[_,Object.keys(P)]})),S={conjunction:c,not:i},b=Tt(),E={},L={};return Object.entries(v).map(function(_){var T=Ye(_,2),P=T[0],N=T[1];if(N?.type=="group"||N?.type=="rule_group")E[P]=N;else{var G,J=N==null||(G=N.properties)===null||G===void 0?void 0:G.field,W=m[J]||[],B=W[W.length-1];if(!B)N&&(E[P]=N);else{var Q=E,se=sr(o,r),z=sr(B,r),ne=Nn(se,z.slice(0,se.length));ne||(se=[]);var ie=B.split(f).slice(se.length).map(function(ve,ue,pe){return[].concat(Ge(se),Ge(pe.slice(0,ue)),[ve]).join(f)}).map(function(ve){return{f:ve,fc:He(r,ve)||{}}}).filter(function(ve){var ue=ve.fc;return ue.type!="!struct"});ie.map(function(ve,ue){var pe=ve.f,me=ve.fc,Ee=L[pe];Ee||(Ee=Tt(),L[pe]=Ee,Q[Ee]={type:"rule_group",id:Ee,children1:{},properties:{conjunction:c,not:!1,field:pe,fieldSrc:"field",mode:me.mode}}),Q=Q[Ee].children1}),Q[P]=N}}}),{type:d,id:b,children1:E,properties:S}}},fe=function(e,t,n,r,i){if(e)return{type:"rule_group",id:Tt(),children1:(0,Ae.A)({},e.id,e),properties:{conjunction:i||bo(r,n),not:!1,field:t}}},de=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:Tt(),children1:(0,Ae.A)({},e.id,e),properties:{conjunction:Wn(t),not:n}}},he=function(e,t,n,r,i,u,o){var l=Bi(),c=je(e,t,n,r,i,u,!1,l);if(c||(c=je(e,t,n,r,i,u,!0,Bi())),!c){o.errors.push(l.errors.join("; ")||"Unknown op ".concat(e,"/").concat(t));return}return c},je=function(e,t,n,r,i,u,o,l){var c=(e=="all"||e=="some")&&lr(n[1])&&Object.keys(n[1])[0]=="in",f=!c&&u.settings.groupOperators.includes(e),d=["==","!="],v=f?0:t-1;f?v=0:d.includes(e)&&v==1&&n[1]===null&&(t=1,v=0,n=[n[0]]);var h=e+"/"+v,m=i.operators[(o?"#":"")+h];if(m){var S,b=[],E=["<","<=",">",">="];if(E.includes(e)&&t==3)S=n[1],b=[n[0],n[2]];else if(o)S=n[1],b=[n[0]];else{var L=n,_=xa(L);S=_[0],b=_.slice(1)}if(!lr(S)){l.errors.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(n)));return}var T=F(f,S,b,i,u,null,null,l,r);if(T){var P=T.field,N=T.fieldSrc,G=T.having,J=T.isGroup,W=T.args,B=He(u,P);if(!B){l.errors.push("No config for LHS ".concat(P));return}var Q=m[0];if(m.length>1&&B&&B.operators){if(m=m.filter(function(se){return B.operators.includes(se)}),m.length==0){l.errors.push("No corresponding ops for LHS ".concat(P));return}Q=m[0]}return{field:P,fieldSrc:N,fieldConfig:B,opKey:Q,args:W,having:G}}}},We=function a(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(e){var l=t.length;if((e=="all"||e=="some")&&lr(t[1])){var c=Object.keys(t[1])[0];c=="in"&&(t=[t[0],t[1][c][1]],e=e+"-"+c)}var f=he(e,l,t,o,n,r,u);if(f){var d=f.field,v=f.fieldSrc,h=f.fieldConfig,m=f.opKey,S=f.args,b=f.having,E=r.operators[m],L=h.showNot!==void 0?h.showNot:r.settings.showNot,_=!0,T,P,N=!1;if(h.type=="!group"&&b){T=Object.keys(b)[0],P=b[T],Array.isArray(P)||(P=[P]);var G=T=="!"&&P.length==1&&P[0]&&lr(P[0])&&n.varKeys.includes(Object.keys(P[0])[0]);T=="!"&&!G&&(N=!0,b=b["!"],T=Object.keys(b)[0],P=b[T],Array.isArray(P)||(P=[P]))}i&&_&&E.reversedOp&&(i=!1,m=E.reversedOp,E=r.operators[m]);var J=Zt(r,d,m,null),W=S.map(function(ie){return s(ie,n,r,"val",u,!1,h,J,o)});if(!W.filter(function(ie){return ie===void 0}).length){var B,Q=h.type;if((Q==="!group"||Q==="!struct")&&(Q=null),h.type=="!group"&&b){if(n.conjunctions[T]!==void 0)B=Y(T,P,n,r,N,u,d,!0),N=!1;else{var se=a(T,P,n,r,N,u,d);N=!1,B=fe(se,d,h,r,n.conjunctions.and)}if(!B)return;B.type="rule_group",Object.assign(B.properties,{field:d,mode:h.mode,operator:m}),h.mode=="array"&&Object.assign(B.properties,{value:W.map(function(ie){return ie.value}),valueSrc:W.map(function(ie){return ie.valueSrc}),valueType:W.map(function(ie){return ie.valueType})}),i&&(B=de(B,r,i))}else if(h.type=="!group"&&!b)B={type:"rule_group",id:Tt(),children1:{},properties:{conjunction:bo(r,h),not:i,mode:h.mode,field:d,operator:m}},h.mode=="array"&&Object.assign(B.properties,{value:W.map(function(ie){return ie.value}),valueSrc:W.map(function(ie){return ie.valueSrc}),valueType:W.map(function(ie){return ie.valueType})});else{var z=W.map(function(ie){return ie.asyncListValues}).filter(function(ie){return ie!=null}),ne=z.length?z[0]:void 0;B={type:"rule",id:Tt(),properties:Gn({field:d,fieldSrc:v,operator:m,value:W.map(function(ie){return ie.value}),valueSrc:W.map(function(ie){return ie.valueSrc}),valueType:W.map(function(ie){return ie.valueType})},ne?{asyncListValues:ne}:{})},i&&(B=de(B,r,i))}return B}}}},st=O(21450),pt=O(61526),Xt=O.n(pt),hr=Xt();hr.trim=function(a){return a.charAt(0)=="'"?a.substring(1,a.length-1):a},hr.escapeLike=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=hr.escape(a);return n=hr.trim(n),n=n.replace(/[%_]/g,"\\$&"),n=(e?"%":"")+n+(t?"%":""),n="'"+n+"'",n};var ln=function(e){var t="''",n=e?.type;return n=="date"?t="'0000-00-00'":n=="datetime"?t="'0000-00-00 00:00'":n=="time"?t="'00:00'":n=="number"&&(t="0"),t},ka=function(e){var t="",n=e?.type;return n=="number"&&(t=0),t},Od=function(e){return"'"+e.replace(/'/g,"''")+"'"},bd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n,r,i=["int","float"];e.map(function(l){if(l!=null){if(typeof l=="string")r="String";else if(typeof l=="number")r=Number.isInteger(l)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(l," in array"));if(!n)n=r;else if(n!=r)if(i.includes(n)&&i.includes(r))n="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(n," and ").concat(r))}}),n||(n="String");var u;n=="float"?u=e.map(function(l){return di(l,!0)}):u=e.map(function(l){return di(l)});var o;return t?o="new ".concat(n,"[]{").concat(u.join(", "),"}"):o="{".concat(u.join(", "),"}"),o},ul=function(e){return"".concat(e,".?[true]")},di=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e==null)return"null";switch((0,ft.A)(e)){case"boolean":return e?"true":"false";case"number":return!Number.isFinite(e)||isNaN(e)?void 0:e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return bd(e,n);throw new Error("spelEscape: Object is not supported");default:return Od(e)}},Fd=function(e){return e&&Array.isArray(e)&&e.length?e.map(function(t){if(t.type=="const")return di(t.value);if(t.type=="property")return""+t.value;if(t.type=="variable")return"#"+t.value}).filter(function(t){return t!=null}).join(" + "):"null"},Ed=function(e){if(e==null)return[void 0,[]];var t=[],n=e.valueType=="case_value"?e.value:[e],r=n.map(function(i){if(i.valueSrc=="value")return i.value===null?void 0:{type:"const",value:i.value};if(i.valueSrc=="field")return{type:i.isVariable?"variable":"property",value:i.value};t.push("Unsupported valueSrc ".concat(i.valueSrc," in concatenation"))}).filter(function(i){return i!=null});return[r,t]},ll=function(e){return e==null?"NULL":e.toString()};function sl(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Cd(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Cd(a,e){if(a){if(typeof a=="string")return cl(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cl(a,e)}}function cl(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function fl(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function dl(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fl(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):fl(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var eu="${0}.compareTo(${1})",Td={datetime:!0,time:!0,date:!0},wd=function(e,t){return pl(e,t,!1)},pl=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r={errors:[]},i=ia(t,void 0,!1),u=vl(e,i,r,null);return n?[u,r.errors]:(r.errors.length&&console.warn("Errors while exporting to SpEL:",r.errors),u)},vl=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(e){var i=e.get("type");if(i==="group"||i==="rule_group")return hl(e,t,n,r);if(i==="rule")return Rd(e,t,n,r);if(i=="switch_group")return Ld(e,t,n,r);if(i=="case_group")return gl(e,t,n,r)}},gl=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("type");if(i!="case_group"){n.errors.push("Unexpected child of type ".concat(i," inside switch"));return}var u=e.get("properties")||new Ot.Map,o=tu(t,u,n,null,r,"!case_value"),l=Ye(o,3),c=l[0],f=l[1],d=l[2],v=hl(e,t,n,r);return[v,c]},Ld=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Ot.Map,u=e.get("children1");if(u){var o=u.map(function(b){return gl(b,t,n,null)}).filter(function(b){return typeof b<"u"}).toArray();if(o.length){if(o.length==1&&!o[0][0])return o[0][1];for(var l=[],c=0;c<o.length;c++)c!=o.length-1&&!o[c][0]?n.errors.push("No condition for case ".concat(c)):(l.push(o[c]),c==o.length-1&&o[c][0]&&l.push([void 0,null]));for(var f="",d="",v=0;v<l.length;v++){var h=Ye(l[v],2),m=h[0],S=h[1];S==null&&(S="null"),m==null&&(m="true"),v!=l.length-1?(f+="(".concat(m," ? ").concat(S," : "),d+=")"):f+="".concat(S)}return f+d}}},hl=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("type"),u=e.get("properties")||new Ot.Map,o=u.get("mode"),l=e.get("children1")||new Ot.List,c=u.get("field"),f=u.get("conjunction");f||(f=Wn(t));var d=t.conjunctions[f],v=u.get("not"),h=i==="rule_group",m=h&&o!="struct",S=m?c:r,b=He(t,S)||{},E=b.isSpelArray,L=t.settings.fieldSeparator,_=u.get("operator");!_&&(!o||o=="some")&&(_="some");var T=yl(t,_,c),P=T!=_,N=_&&Wt(t,T,c)||null,G=h&&(!T||N.cardinality==0),J=tu(t,u,n,T,r,null),W=Ye(J,3),B=W[0],Q=W[1],se=W[2],z=l.map(function(Fe){return vl(Fe,t,n,S)}).filter(function(Fe){return typeof Fe<"u"});if(m&&!G){if(B==null)return}else if(!z.size)return;var ne=h,ie=z.size?d.spelFormatConj(z,f,v,ne):null,ve;if(m){var ue=nu(n,t,c,r),pe=L||".",me=pe+(E?"length":"size()"),Ee="".concat(ue).concat(me),Ie=ie?"".concat(ue,".?[").concat(ie,"]").concat(me):Ee,Ne=G?Ee:B;ve=ml(n,t,u,Ie,Ne,T,Q,se,P)}else ve=ie;return ve},_d=function(e,t,n){var r=t.spelOp;if(r){var i=r.includes("${0}"),u=Td[n],o=r,l,c=ur(t.cardinality,1);return u?l=function(d,v,h,m,S,b,E,L){var _=eu.replace(/\${(\w+)}/g,function(T,P){return P==0?d:c>1?h[P-1]:h});return"".concat(_," ").concat(o," 0")}:i?l=function(d,v,h,m,S,b,E,L){return r.replace(/\${(\w+)}/g,function(_,T){return T==0?d:c>1?h[T-1]:h})}:c==0?l=function(d,v,h,m,S,b,E,L){return"".concat(d," ").concat(o)}:c==1&&(l=function(d,v,h,m,S,b,E,L){return"".concat(d," ").concat(o," ").concat(h)}),l}},ml=function(e,t,n,r,i,u,o,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=n.get("field"),d=Wt(t,u,f)||{},v=He(t,f)||{},h=n.get("operatorOptions"),m=d.spelFormatOp||_d(u,d,l);if(!m){e.errors.push("Operator ".concat(u," is not supported"));return}var S=[r,u,i,o,l,Ct()(d,rn),h,v],b;return b=m.call.apply(m,[t.ctx].concat(S)),c&&(b=t.settings.spelFormatReverse(b)),b===void 0&&e.errors.push("Operator ".concat(u," is not supported for value source ").concat(o)),b},yl=function(e,t,n){if(t){var r=Wt(e,t,n)||{},i=r.reversedOp,u=Wt(e,i,n)||{},o=!1,l=r.spelOp||r.spelFormatOp,c=u.spelOp||u.spelFormatOp;if(!(!l&&!c)){if(!l&&c){o=!0;var f=[i,t];t=f[0],i=f[1];var d=[u,r];r=d[0],u=d[1]}return t}}},Rd=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Ot.Map,u=i.get("field"),o=i.get("fieldSrc"),l=i.get("operator");if(!(u==null||l==null)){var c=yl(t,l,u);if(!c){n.errors.push("Operator ".concat(l," is not supported"));return}var f=c!=l,d=tu(t,i,n,c,r,null),v=Ye(d,3),h=v[0],m=v[1],S=v[2];if(h!==void 0){var b=Ad(n,t,u,o,r);if(b!==void 0){var E=ml(n,t,i,b,h,c,m,S,f);return E}}}},Ad=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return r==="func"?Sl(e,t,n,i):nu(e,t,n,i)},tu=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=t.get("field"),l=t.get("valueSrc"),c=t.get("valueType");(u=="!case_value"||c&&c.get(0)=="case_value")&&(o="!case_value");var f=He(e,o)||{},d=Wt(e,r,o)||{},v=ur(d.cardinality,1),h=t.get("value"),m=t.get("asyncListValues"),S=[],b=[],E;if(h!=null){var L=h.map(function(T,P){var N=l?l.get(P):null,G=c?c.get(P):null,J=Ba(T,N,e),W=Zt(e,o,r,N),B=Ct()($r(e,o,r,W,N),["factory"]),Q=ru(n,e,J,N,G,B,f,r,d,i,m);return Q!==void 0&&(S.push(N),b.push(G)),Q}),_=L.filter(function(T){return T===void 0}).size>0;L.size<v||_||(E=v>1?L.toArray():v==1?L.first():null)}return[E,S.length>1?S:S[0],b.length>1?b:b[0]]},ru=function(e,t,n,r,i,u,o,l,c){var f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,d=arguments.length>10?arguments[10]:void 0;if(n!==void 0){var v;if(r=="field")v=nu(e,t,n,f);else if(r=="func")v=Sl(e,t,n,f);else if(typeof u.spelFormatValue=="function"){var h=u.spelFormatValue,m=[n,dl(dl({},gn()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Ct()(u,Cn)];if(l&&(m.push(l),m.push(c)),r=="field"){var S=He(t,n)||{};m.push(S)}v=h.call.apply(h,[t.ctx].concat(m))}else v=di(n);return v}},nu=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(n){var i=t.settings.fieldSeparator,u=He(t,n)||{},o=sr(n,t),l=$l(n,t,r),c=t.settings.formatSpelField,f=aa(n,t,e,r),d=l.map(function(h){var m=Ye(h,3),S=m[0],b=m[1],E=m[2],L;E&&(E.type=="!struct"||E.type=="!group"&&E.mode=="struct"?L=b.isSpelMap?"map":"class":E.type=="!group"?L=b.isSpelItemMap?"[map]":"[class]":L="class");var _=b?.isSpelVariable;return{key:S,parent:L,isSpelVariable:_,fieldSeparator:i}}),v=c.call(t.ctx,f,r,o,d,u,t);return v}},Sl=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=n.get("func"),u=n.get("args"),o=_r(t,i);if(!o){e.errors.push("Func ".concat(i," is not defined in config"));return}var l={},c=[],f=[];for(var d in o.args){var v,h=o.args[d],m=He(t,h),S=h.defaultValue,b=h.isOptional,E=S!=null&&S.func?"func":"value",L=u?u.get(d):void 0,_=L?L.get("value"):void 0,T=L?L.get("valueSrc"):void 0,P=L?L.get("asyncListValues"):void 0,N=(v=h.spelEscapeForFormat)!==null&&v!==void 0?v:!0,G=null,J=Zt(t,h,G,T),W=Ct()($r(t,h,G,J,T),["factory"]),B=ru(e,t,_,T,h.type,W,m,null,null,r,P);if(_!=null&&B===void 0){T!="func"&&e.errors.push("Can't format value of arg ".concat(d," for func ").concat(i));return}var Q=void 0;if(B===void 0&&!b&&S!=null){var se=Zt(t,h,G,E),z=Ct()($r(t,h,G,se,E),["factory"]);if(Q=ru(e,t,S,E,h.type,z,m,null,null,r,P),Q===void 0){E!="func"&&e.errors.push("Can't format default value of arg ".concat(d," for func ").concat(i));return}}var ne=B??Q;if(ne!==void 0){if(c.length){var ie=sl(c),ve;try{for(ie.s();!(ve=ie.n()).done;){var ue=ve.value;l[ue]=void 0}}catch(Xe){ie.e(Xe)}finally{ie.f()}c=[]}l[d]=N?ne:_??S}else b||f.push(d),c.push(d)}if(!f.length){var pe;if(typeof o.spelFormatFunc=="function"){var me=o.spelFormatFunc,Ee=[l];pe=me.call.apply(me,[t.ctx].concat(Ee))}else if(o.spelFunc){pe=o.spelFunc.replace(/\${(\w+)}/g,function(Xe,xe){var Ze;return(Ze=l[xe])!==null&&Ze!==void 0?Ze:Xe});var Ie=Object.keys(o.args||{}).reverse().filter(function(Xe){return!!o.args[Xe].isOptional}),Ne=sl(Ie),Fe;try{for(Ne.s();!(Fe=Ne.n()).done;){var De=Fe.value;if(l[De]!=null)break;pe=pe.replace(new RegExp("(, )?\\${"+De+"}","g"),"")}}catch(Xe){Ne.e(Xe)}finally{Ne.f()}pe=pe.replace(/\${(\w+)}/g,"null")}else e.errors.push("Func ".concat(i," is not supported"));return pe}};function $n(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Pd(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Pd(a,e){if(a){if(typeof a=="string")return Ol(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ol(a,e)}}function Ol(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function bl(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function St(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bl(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):bl(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Fl={number:"number",string:"text",boolean:"boolean",null:"null"},El={String:"text"},Id="multiselect",jd=function(e){return["length"].includes(e)},Cl=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},Dd=function(e,t){return Tl(e,t,!0)},Tl=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r={errors:[]},i=ia(t,void 0,!1),u=xd(i),o,l,c=void 0;try{var f=st.SpelExpressionEvaluator.compile(e);o=f._compiledExpression}catch(v){r.errors.push(v)}o&&(l=Vd(o,r),an.debug("convertedObj:",l,r),c=au(l,u,i,r),c&&c.type!="group"&&c.type!="switch_group"&&(c=Ui(c,i,l.not)),an.debug("jsTree:",c));var d=c?kn(c):void 0;return n?[d,r.errors]:(r.errors.length&&console.warn("Errors while importing from SpEL:",r.errors),d)},Vd=function a(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=e.getType(),i=e.getChildren().map(function(z){return a(z,t,e)});if((r=="op-or"||r=="op-and")&&(i=i.reduce(function(z,ne){var ie=ne.type==r&&!ne.not,ve=ie?ne.children:[ne];return[].concat(Ge(z),Ge(ve))},[])),r=="op-not")return i.length!=1&&t.errors.push("Operator NOT should have 1 child, but got ".concat(i.length,"}")),St(St({},i[0]),{},{not:!i[0].not});if(r=="compound"){i=i.filter(function(z){var ne=z.type=="selection"&&z.children.length==1&&z.children[0].type=="boolean"&&z.children[0].val==!0;return!ne});var u=i.find(function(z){return z.type=="selection"});u&&u.children.length!=1&&t.errors.push("Selection should have 1 child, but got ".concat(u.children.length));var o=u?u.children[0]:null,l=i[i.length-1],c=l.type=="method"&&l.val.methodName=="size"||l.type=="!func"&&l.methodName=="size",f=l.type=="property"&&l.val=="length",d=i.filter(function(z){return z!==u&&z!==l}),v={type:"compound",children:d},h=(c||f)&&wl(d)!=null;if(h)return{type:"!aggr",filter:o,source:v};if(i=i.filter(function(z){var ne=z.type=="variable"&&z.val=="this",ie=z.type=="variable"&&z.val=="root";return!(ne||ie)}),i=i.map(function(z){return z.type=="indexer"&&z.children.length==1?{type:"indexer",val:z.children[0].val,itype:z.children[0].type}:z}),l.type=="!func"){var m={},S=m;do{var b,E;Object.assign(S,l),i=i.filter(function(z){return z!==l}),l=i[i.length-1],((E=l)===null||E===void 0?void 0:E.type)=="!func"?(S.obj={},S=S.obj):i.length>1?S.obj={type:"compound",children:i}:S.obj=l}while(((b=l)===null||b===void 0?void 0:b.type)=="!func");return m}}var L;try{e.getRaw?L=e.getRaw():e.getValue.length==0&&(L=e.getValue())}catch(z){an.error("[spel2js] Error in getValue()",z)}if(r=="ternary"&&(L=Nd(i)),(0,ft.A)(L)==="object"&&L!==null&&(L.methodName||L.functionName)&&(L.args=L.args.map(function(z){return a(z,t,e)})),r=="list"&&(L=L.map(function(z){return a(z,t,e)}),!n&&L.length==1))return L[0];if(r=="constructorref"){var _=i.find(function(z){return z.type=="qualifiedidentifier"}),T=_?.val;if(!T){t.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(i)));return}var P=i.filter(function(z){return z.type!="qualifiedidentifier"});return{type:"!new",cls:T,args:P}}if(r=="typeref"){var N=i.find(function(z){return z.type=="qualifiedidentifier"}),G=N?.val;if(!G){t.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(i)));return}var J=i.filter(function(z){return z.type!="qualifiedidentifier"});return{type:"!type",cls:G}}if(r=="function"||r=="method"){var W=L,B=W.functionName,Q=W.methodName,se=W.args;return{type:"!func",methodName:B||Q,isVar:r=="function",args:se}}return{type:r,children:i,val:L}},Nd=function(e){var t=[];function n(r){var i=Ye(r,3),u=i[0],o=i[1],l=i[2];t.push([u,o]),l?.type=="ternary"?n(l.children):t.push([void 0,l])}return n(e),t},xd=function(e){var t={},n=function(ie){var ve=e.operators[ie];if(ve.spelOps)ve.spelOps.forEach(function(pe){var me=pe;t[me]||(t[me]=[]),t[me].push(ie)});else if(ve.spelOp){var ue=ve.spelOp;t[ue]||(t[ue]=[]),t[ue].push(ie)}else an.log("[spel] No spelOp for operator ".concat(ie))};for(var r in e.operators)n(r);var i={};for(var u in e.conjunctions){var o=e.conjunctions[u],l=o.spelConj||u.toLowerCase();i[l]=u}var c={},f=$n(hi(e)),d;try{var v=function(){var ie=Ye(d.value,2),ve=ie[0],ue=ie[1],pe=[],me=ue.spelFunc;if(typeof me=="string"){var Ee=Object.keys(ue.args||{}).reverse().filter(function(xe){return!!ue.args[xe].isOptional||ue.args[xe].defaultValue!=null}),Ie=me.replace(/\${(\w+)}/g,function(xe,Ze){return"?"}),Ne=Ee.reduce(function(xe,Ze){return[].concat(Ge(xe),[[Ze].concat(Ge(xe[xe.length-1]||[]))])},[]).map(function(xe){return me.replace(/(?:, )?\${(\w+)}/g,function(Ze,ze){return xe.includes(ze)?"":Ze}).replace(/\${(\w+)}/g,function(Ze,ze){return"?"})});pe=[Ie].concat(Ge(Ne))}var Fe=$n(pe),De;try{for(Fe.s();!(De=Fe.n()).done;){var Xe=De.value;c[Xe]||(c[Xe]=[]),c[Xe].push(ve)}}catch(xe){Fe.e(xe)}finally{Fe.f()}};for(f.s();!(d=f.n()).done;)v()}catch(ne){f.e(ne)}finally{f.f()}var h={};for(var m in e.widgets){var S=e.widgets[m],b=S.spelImportFuncs,E=S.type;if(b){var L=$n(b),_;try{for(L.s();!(_=L.n()).done;){var T=_.value;if(typeof T=="string"){var P=T.replace(/\${(\w+)}/g,function(ne,ie){return"?"}),N=Ge(T.matchAll(/\${(\w+)}/g)).map(function(ne){var ie=Ye(ne,2),ve=ie[0],ue=ie[1];return ue});h[P]||(h[P]=[]),h[P].push({w:m,argsOrder:N})}}}catch(ne){L.e(ne)}finally{L.f()}}}var G={};for(var J in e.operators){var W=e.operators[J],B=W.spelOp;if(B!=null&&B.includes("${0}")){var Q=B.replace(/\${(\w+)}/g,function(ne,ie){return"?"}),se=Ge(B.matchAll(/\${(\w+)}/g)).map(function(ne){var ie=Ye(ne,2),ve=ie[0],ue=ie[1];return ue});G[Q]||(G[Q]=[]),G[Q].push({op:J,argsOrder:se})}}var z=eu.replace(/\${(\w+)}/g,function(ne,ie){return"?"});return G[z]=[{op:"!compare",argsOrder:["0","1"]}],{operators:t,conjunctions:i,funcs:c,valueFuncs:h,opFuncs:G}},au=function a(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u,o=!0;if(e.type.indexOf("op-")===0||e.type==="matches")u=Md(e,t,n,r,i);else if(e.type=="!aggr"){var l,c=a(e.source,t,n,r,St(St({},e),{},{_groupField:i?._groupField})),f=a(e.filter,t,n,r,St(St({},e),{},{_groupField:c?.value}));((l=f)===null||l===void 0?void 0:l.type)=="rule"&&(f=Ui(f,n,e.filter.not)),u={groupFilter:f,groupFieldValue:c},i||(u=void 0,r.errors.push("Unexpected !aggr in root"),o=!1)}else if(e.type=="ternary"){var d={};e.val.forEach(function(h){var m=Ye(h,2),S=m[0],b=m[1],E=_l(S,b,t,n,r,e);E&&(d[E.id]=E)}),u={type:"switch_group",id:Tt(),children1:d,properties:{}}}if(!u&&o&&(u=pi(e,t,n,r,i)),u&&!u.type&&!i){var v=Ll(e,t,n,r);v?u=v:(u=void 0,r.errors.push("Can't convert rule of type ".concat(e.type,", it looks like var/literal")))}return u}},Md=function a(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u,o=e.type.startsWith("op-")?e.type.slice(3):e.type,l=(o=="minus"||o=="plus")&&e.children.length==1;if(l)return e.isUnary=!0,a(e.children[0],t,n,r,e);var c=o=="and"&&e.children.length==2&&e.children[0].type=="op-ge"&&e.children[1].type=="op-le",f=o=="or"&&e.children.length==2&&e.children[0].type=="op-lt"&&e.children[1].type=="op-gt",d=c||f;if(d){var v=Ye(e.children[0].children,2),h=v[0],m=v[1],S=Ye(e.children[1].children,2),b=S[0],E=S[1],L=zd(h,b,e,t,n,r,i);if(L){var _=m.val,T=E.val,P={type:"op-between",children:[h,m,E]};return a(P,t,n,r,i)}}var N=t.operators[o];o=="eq"&&e.children[1].type=="null"?N=["is_null"]:o=="ne"&&e.children[1].type=="null"?N=["is_not_null"]:o=="le"&&e.children[1].type=="string"&&e.children[1].val==""?N=["is_empty"]:o=="gt"&&e.children[1].type=="string"&&e.children[1].val==""?N=["is_not_empty"]:o=="between"&&(N=["between"]);var G=function(){var ht,Et=e.children.map(function(or){return au(or,t,n,r,St(St({},e),{},{_groupField:i?._groupField}))});return Et.length>=2&&((ht=Et)===null||ht===void 0||(ht=ht[0])===null||ht===void 0?void 0:ht.type)=="!compare"&&(Et=Et[0].children),Et};if(o=="and"||o=="or"){var J={},W=G();W.forEach(function(ze){if(ze){var ht=Tt();ze.id=ht,ze.type!=null?J[ht]=ze:r.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(ze)))}}),u={type:"group",id:Tt(),children1:J,properties:{conjunction:t.conjunctions[o],not:e.not}}}else if(N){var B,Q,se=G(),z=se[0],ne=se.slice(1),ie=z==null||(B=z.groupFieldValue)===null||B===void 0?void 0:B.value,ve=(Q=ne)===null||Q===void 0?void 0:Q[0],ue=N[0];if(N.length>1){var pe,me,Ee=((pe=se[0])===null||pe===void 0?void 0:pe.valueType)||((me=se[1])===null||me===void 0?void 0:me.valueType),Ie=z?.value,Ne=N.map(function(ze){return{op:ze,widget:Zt(n,Ie,ze)}});if(an.warn("[spel] Spel operator ".concat(o," can be mapped to ").concat(N,"."),"widgets:",Ne,"vals:",se,"valueType=",Ee),o=="eq"||o=="ne"){var Fe=Ne.find(function(ze){var ht=ze.op,Et=ze.widget;return Et&&Et!="field"});Fe&&(ue=Fe.op)}}z!=null&&z.groupFieldValue&&(ve&&ve.groupFieldValue&&ve.groupFieldValue.valueSrc=="field"&&ve.groupFieldValue.value==ie?(ue="all",ne=[]):ue=="equal"&&ve.valueSrc=="value"&&ve.valueType=="number"&&ve.value==0?(ue="none",ne=[]):ue=="greater"&&ve.valueSrc=="value"&&ve.valueType=="number"&&ve.value==0&&(ue="some",ne=[]));var De=!0,Xe=!1;if(e.not&&De){var xe=n.operators[ue];xe.reversedOp?(ue=xe.reversedOp,e.not=!1):Xe=!0}if(z)if(z.groupFieldValue)z.groupFieldValue.valueSrc!="field"&&r.errors.push("Expected group field ".concat(JSON.stringify(z))),u=Ud(z,ue,ne,n,r);else{z.valueSrc!="field"&&z.valueSrc!="func"&&r.errors.push("Expected field/func at LHS, but got ".concat(JSON.stringify(z)));var Ze=z.value;u=iu(n,r,Ze,ue,ne)}Xe&&(u.type!=="group"?u=Ui(u,n,e.not):u.properties.not=!u.properties.not)}else i||(u=Ll(e,t,n,r));return u},wl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=!1,i=e.map(function(u){if(u.type=="variable"||u.type=="property"||u.type=="indexer"&&u.itype=="string")return u.val;var o,l;r=!0,n&&(t==null||(o=t.errors)===null||o===void 0||(l=o.push)===null||l===void 0||l.call(o,"Unexpected item in field path compound: ".concat(JSON.stringify(u))))});return r?void 0:i},pi=function a(e,t,n,r,i){if(e!=null){var u=n.settings.fieldSeparator;if(e.type=="variable"||e.type=="property"){var o=_o(n,e.val,i?._groupField),l=He(n,o),c=e.type=="variable";return{valueSrc:"field",valueType:l?.type,isVariable:c,value:o}}else if(e.type=="compound"){var f=wl(e.children,r);if(f){var d,v=_o(n,f.join(u),i?._groupField),h=He(n,v),m=((d=e.children)===null||d===void 0||(d=d[0])===null||d===void 0?void 0:d.type)=="variable";return{valueSrc:"field",valueType:h?.type,isVariable:m,value:v}}}else if(Fl[e.type]){var S=e.val,b=Fl[e.type];return i!=null&&i.isUnary&&(S=-S),{valueSrc:"value",valueType:b,value:S}}else if(e.type=="!new"&&El[e.cls.at(-1)]){var E=e.args.map(function(B){return a(B,t,n,r,e)}),L=E?.[0],_=El[e.cls.at(-1)];return St(St({},L),{},{valueType:_})}else if(e.type=="list"){var T,P=e.val.map(function(B){return a(B,t,n,r,e)}),N=P.length?(T=P[0])===null||T===void 0?void 0:T.valueType:null,G=P.map(function(B){return B?.value}),J=Id;return{valueSrc:"value",valueType:J,value:G}}else if(e.type=="op-plus"&&i?.type=="ternary")return Rl(e,t,n,r);var W=$d(e,t,n,r,i);if(W!==void 0)return W;r.errors.push("Can't convert arg of type ".concat(e.type))}},kd=function(e){var t=[{s:"",params:[],objs:[]}];return Gd(e,t),t.map(function(n){var r=n.s,i=n.params;return{s:r,params:i}}).reverse().filter(function(n){var r=n.s;return r!==""&&r!=="?"})},Gd=function a(e,t){var n=[],r="",i=e.type,u=e.methodName,o=e.val,l=e.obj,c=e.args,f=e.isVar,d=e.cls,v=e.children,h=v?.[v.length-1],m=t[t.length-1];if(i==="!func"){for(var S=l;S;){var b,E=a(St(St({},S),{},{obj:null}),[{}]),L=Ye(E,2),_=L[0],T=L[1];if(_!=="?"){var P={s:m.s,params:Ge(m.params),objs:Ge(m.objs)};m.objs.unshift("?"),m.params.unshift(S),t.push(P),m=t[t.length-1]}m.objs.unshift(_),(b=m.params).unshift.apply(b,Ge(T)),S=S.type==="!func"?S.obj:null}var N=$n(t),G;try{for(N.s();!(G=N.n()).done;){var J,W=G.value;n=[].concat(Ge(W?.params||[]),Ge(c||[])),r="",W!=null&&(J=W.objs)!==null&&J!==void 0&&J.length&&(r+=W.objs.join(".")+"."),r+=(f?"#":"")+u,r+="("+(c||[]).map(function(B){return"?"}).join(", ")+")",W.s=r,W.params=n}}catch(B){N.e(B)}finally{N.f()}}else i==="!new"?(n=c||[],r="new ".concat(d.join("."),"(").concat(n.map(function(B){return"?"}).join(", "),")")):i==="!type"?r="T(".concat(d.join("."),")"):i==="compound"&&h.type==="property"&&jd(h.val)?r=v.map(function(B){var Q;if(B===h)return B.val;var se=a(St(St({},B),{},{obj:null}),[{}]),z=Ye(se,2),ne=z[0],ie=z[1];return(Q=n).push.apply(Q,Ge(ie)),ne}).join("."):(n=[e],r="?");return m&&(m.s=r,m.params=n),[r,n]},$d=function(e,t,n,r,i){var u,o=function(ue){return pi(ue,t,n,r,St(St({},e),{},{_groupField:i?._groupField}))},l=kd(e),c=l==null||(u=l[0])===null||u===void 0?void 0:u.s;l.length&&an.debug("Signatures for ",e,":",c,l);var f=Bd(e,t,n,r,i,l,o);if(f!==void 0)return f;var d=Wd(e,t,n,r,i,l,o);if(d!==void 0)return d;var v,h,m,S=$n(l),b;try{var E=function(){var ue=b.value,pe=ue.s,me=ue.params,Ee=t.funcs[pe];if(Ee){v=Ee[0],h=_r(n,v);var Ie=h,Ne=Ie.spelFunc,Fe=me.map(o),De=Ge(Ne.matchAll(/\${(\w+)}/g)).map(function(Xe){var xe=Ye(Xe,2),Ze=xe[0],ze=xe[1];return ze});return m=Object.fromEntries(De.map(function(Xe,xe){return[Xe,Fe[xe]]})),"break"}};for(S.s();!(b=S.n()).done;){var L=E();if(L==="break")break}}catch(ve){S.e(ve)}finally{S.f()}if(!v){var _=$n(hi(n)),T;try{for(_.s();!(T=_.n()).done;){var P=Ye(T.value,2),N=P[0],G=P[1];if(G.spelImport){var J=void 0;try{J=G.spelImport(e)}catch{}if(J){v=N,h=_r(n,v),m={};for(var W in J)m[W]=o(J[W])}}}}catch(ve){_.e(ve)}finally{_.f()}}if(v){var B={};for(var Q in h.args){var se=h.args[Q],z=m[Q];if(z===void 0)if(z=se?.defaultValue,z===void 0){if(!(se!=null&&se.isOptional)){r.errors.push("No value for arg ".concat(Q," of func ").concat(v));return}}else{var ne;z={value:z,valueSrc:(ne=z)!==null&&ne!==void 0&&ne.func?"func":"value",valueType:se.type}}z&&(B[Q]=z)}return{valueSrc:"func",value:{func:v,args:B},valueType:h.returnType}}var ie=e.methodName;ie&&r.errors.push("Signature ".concat(c," - failed to convert"))},Bd=function(e,t,n,r,i,u,o){var l,c,f,d=[];for(var v in n.widgets){var h=n.widgets[v],m=h.spelImportFuncs;if(m)for(var S=0;S<m.length;S++){var b=m[S];if(Cl(b)){var E={};if(ui(b,e,E)){for(var L in E)E[L]=o(E[L]);d.push({s:"widgets.".concat(v,".spelImportFuncs[").concat(S,"]"),w:v,argsObj:E})}}}}var _=$n(u),T;try{for(_.s();!(T=_.n()).done;){var P=T.value,N=P.s,G=P.params,J=t.valueFuncs[N]||[],W=$n(J),B;try{var Q=function(){var xe=B.value,Ze=xe.w,ze=xe.argsOrder,ht=G.map(o),Et=Object.fromEntries(ze.map(function(or,Rr){return[or,ht[Rr]]}));d.push({s:N,w:Ze,argsObj:Et})};for(W.s();!(B=W.n()).done;)Q()}catch(Xe){W.e(Xe)}finally{W.f()}}}catch(Xe){_.e(Xe)}finally{_.f()}for(var se=0,z=d;se<z.length;se++){var ne=z[se],ie=ne.s,ve=ne.w,ue=ne.argsObj,pe=n.widgets[ve],me=pe.spelImportValue,Ee=pe.type;f=ve,c=ie,l=[];for(var Ie in ue)["value"].includes(ue[Ie].valueSrc)||l.push("".concat(Ie," has unsupported value src ").concat(ue[Ie].valueSrc));var Ne=ue.v.value;if(me&&!l.length){var Fe=me.call(n.ctx,ue.v,pe,ue),De=Ye(Fe,2);Ne=De[0],l=De[1],l&&!Array.isArray(l)&&(l=[l])}if(!l.length)return{valueSrc:"value",valueType:Ee,value:Ne}}f&&l.length&&r.errors.push("Signature ".concat(c," - looks like convertable to ").concat(f,", but: ").concat(l.join("; ")))},Wd=function(e,t,n,r,i,u,o){var l,c,f,d=$n(u),v;try{for(d.s();!(v=d.n()).done;){var h=v.value,m=h.s,S=h.params,b=t.opFuncs[m]||[],E=$n(b),L;try{var _=function(){var N,G=L.value,J=G.op,W=G.argsOrder,B=S.map(o);if(c=J,J==="!compare"){if(i.type.startsWith("op-")&&i.children.length==2&&i.children[1].type=="number"&&i.children[1].val===0)return{v:{type:"!compare",children:B}};l.push("Result of compareTo() should be compared to 0")}f=m,l=[];var Q=n.operators[c],se=Q.spelOp,z=Q.valueTypes,ne=Object.fromEntries(W.map(function(pe,me){return[pe,B[me]]})),ie=ne[0],ve=Object.keys(ne).filter(function(pe){return parseInt(pe)>0}).map(function(pe){return ne[pe]}),ue=(N=B.filter(function(pe){return!!pe}).find(function(pe){var me=pe.valueSrc;return me==="value"}))===null||N===void 0?void 0:N.valueType;if(z&&ue&&!z.includes(ue)&&l.push("Op supports types ".concat(z,", but got ").concat(ue)),!l.length)return{v:iu(n,r,ie,c,ve,e)}};for(E.s();!(L=E.n()).done;){var T=_();if((0,ft.A)(T)==="object")return T.v}}catch(P){E.e(P)}finally{E.f()}}}catch(P){d.e(P)}finally{d.f()}c&&l.length&&r.errors.push("Signature ".concat(f," - looks like convertable to ").concat(c,", but: ").concat(l.join("; ")))},iu=function(e,t,n,r,i,u){var o;if(!i.filter(function(L){return L===void 0}).length){var l=(o=n)!==null&&o!==void 0&&o.func?"func":"field";Cl(n)&&n.valueSrc&&(l=n.valueSrc,n=n.value);var c=He(e,n);if(!c){t.errors.push("No config for field ".concat(n));return}var f=!0,d=!1;if(u!=null&&u.not&&f){var v=e.operators[r];v.reversedOp?(r=v.reversedOp,u.not=!1):d=!0}var h=Zt(e,n,r),m=e.widgets[h||c.mainWidget],S=i.map(function(L){return L.asyncListValues}).filter(function(L){return L!=null}),b=S.length?S[0]:void 0,E={type:"rule",id:Tt(),properties:St({field:n,fieldSrc:l,operator:r,value:i.map(function(L){return L.value}),valueSrc:i.map(function(L){return L.valueSrc}),valueType:i.map(function(L){return L.valueSrc=="value"&&(m?.type||c?.type)||L.valueType})},b?{asyncListValues:b}:{})};return d&&(E=Ui(E,e,u?.not),u!=null&&u.not&&(u.not=!1)),E}},Ud=function(e,t,n,r,i){var u=e.groupFilter,o=e.groupFieldValue;if(o.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(o));var l=o.value,c=iu(r,i,l,t,n);if(c){var f=He(r,l),d=f?.mode,v;return u?.type==="group"?v=St(St({},u||{}),{},{type:"rule_group",properties:St(St(St({},c.properties),u?.properties||{}),{},{mode:d})}):u?v=St(St({},c||{}),{},{type:"rule_group",children1:[u],properties:St(St({},c.properties),{},{mode:d})}):v=St(St({},c||{}),{},{type:"rule_group",properties:St(St({},c.properties),{},{mode:d})}),v.id||(v.id=Tt()),v}},zd=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(e.type==t.type)if(e.type=="!aggr"){var l=[e.source,t.source].map(function(b){return pi(b,r,i,u,St(St({},n),{},{_groupField:o?._groupField}))}),c=Ye(l,2),f=c[0],d=c[1];return f.value==d.value}else{var v=[e,t].map(function(b){return pi(b,r,i,u,St(St({},n),{},{_groupField:o?._groupField}))}),h=Ye(v,2),m=h[0],S=h[1];return m.value==S.value}return!1},Ll=function(e,t,n,r){var i={},u=null,o=_l(u,e,t,n,r);o&&(i[o.id]=o);var l={type:"switch_group",id:Tt(),children1:i,properties:{}};return l},_l=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=qd(r,i,n,t,u),l;return e?(l=au(e,n,r,i,u),l&&l.type?(l.type!="group"&&(l=Ui(l,r)),l.type="case_group"):(i.errors.push("Unexpected case: ".concat(JSON.stringify(l))),l=void 0)):l={id:Tt(),type:"case_group",properties:{}},l&&(l.properties=St(St({},l.properties),o)),l},Rl=function(e,t,n,r){var i=[];function u(o){o.map(function(l){if(l.type=="op-plus")u(l.children);else{var c=pi(l,t,n,r,e);c?i.push(c):r.errors.push("Can't convert ".concat(l.type," in concatenation"))}})}return u(e.children),{valueSrc:"value",valueType:"case_value",value:i}},qd=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u={},o;r?.type=="op-plus"?o=Rl(r,n,e,t):o=pi(r,n,e,t,i);var l=e.widgets.case_value,c=l?.spelImportValue;if(c){var f=c(o),d=Ye(f,2),v=d[0],h=d[1];h.map(function(m){return t.errors.push(m)}),v&&(u={value:[v],valueSrc:["value"],valueType:["case_value"]})}else t.errors.push("No fucntion to import case value");return u},AO=function(e,t,n,r,i){if(e)return{type:"rule_group",id:uuid(),children1:_defineProperty({},e.id,e),properties:{conjunction:i||defaultGroupConjunction(r,n),not:!1,field:t}}},Ui=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:Tt(),children1:(0,Ae.A)({},e.id,e),properties:{conjunction:Wn(t),not:n||!1}}};function Al(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Kd(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Al(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Al(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Pl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=e.settings.defaultField,i=(n?Il(e,n):r)||t&&kl(e,n)||null;return i!=null&&typeof i!="string"&&!ta(i)&&(i=dr(i)),i},Il=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!n)return null;var r=(e==null||(t=e.settings)===null||t===void 0?void 0:t.fieldSeparator)||".",i=He(e,n),u=i?.defaultField;return u&&(u=[].concat(Ge(sr(n)),[u]).join(r)),u},ou=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n&&((t=e.settings.fieldSources)===null||t===void 0?void 0:t[0])||"field"},uu=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.settings.defaultOperator,i=He(e,t),u=i?.operators||[];r&&!u.includes(r)&&(r=null);var o=i?.defaultOperator;o&&!u.includes(o)&&(o=null),!o&&n&&(o=cu(e,t));var l=i?._origDefaultOperator,c=l&&o||r||o;return c},zi=function(e,t,n){var r=t?Wt(e,t,n):null;return r&&r.options?new(Ke()).Map(r.options&&r.options.defaults||{}):null},Bn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=null,o=null,l=null,c=e.settings.showErrorMessage;if(n){var f,d,v;l=n==null||(f=n.properties)===null||f===void 0?void 0:f.fieldSrc,u=n==null||(d=n.properties)===null||d===void 0?void 0:d.field,o=n==null||(v=n.properties)===null||v===void 0?void 0:v.operator}else r?(u=Pl(e,i,t),u?l=ta(u)?"func":"field":l=ou(e),o=uu(e,u,!0)):l=ou(e);var h=new(Ke()).Map({fieldSrc:l,field:u,operator:o,value:new(Ke()).List,valueSrc:new(Ke()).List,operatorOptions:zi(e,o,u)});if(c&&(h=h.set("valueError",new(Ke()).List)),u&&o){var m=Ga(e,e,h,u,o,"operator",!1),S=m.newValue,b=m.newValueSrc,E=m.newValueType,L=m.newValueError;h=h.set("value",S).set("valueSrc",b).set("valueType",E),c&&(h=h.set("valueError",L))}return h},bo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;t=He(e,t);var n=t&&t.conjunctions||Object.keys(e.conjunctions);return n.length==1?n[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||n[0]},Wn=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]},Fa=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new(Ke()).Map({conjunction:bo(e,t),not:!1})},jl=function(e,t){var n;return t&&t.type=="group"?Fa(e,t==null||(n=t.properties)===null||n===void 0?void 0:n.field):Bn(e,null,t)},Dl=function(e,t){return(0,Ae.A)({},e,new(Ke()).Map({type:"rule",id:e,properties:Bn(t)}))},Hd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new(Ke()).Map({type:"group",id:Tt(),children1:new(Ke()).OrderedMap(t?Kd({},Dl(Tt(),e)):{}),properties:Fa(e)})},Jd=function(e){return new(Ke()).List(e)},Qd=function(){return new(Ke()).Map},Yd=function(e){return(0,ft.A)(e)=="object"&&e!==null&&Array.isArray(e)?"array":(0,ft.A)(e)},Xd=function(e,t){return Yd(e)==t||t=="number"&&!isNaN(e)},Zd=function(e,t,n,r,i,u){var o=lu(e,t,n,r,i,u);return o=mn(o),o},lu=function(e,t,n,r,i,u){i===void 0&&(i=n.settings.removeEmptyGroupsOnLoad),u===void 0&&(u=n.settings.removeIncompleteRulesOnLoad);var o={config:n,oldConfig:r,removeEmptyGroups:i,removeIncompleteRules:u};return Vl(e,[],null,{},o)};function Vl(a,e,t,n,r){var i=a.get("type"),u=a.get("children1");return(i==="group"||i==="rule_group"||i=="case_group"||i=="switch_group")&&u&&u.size?ep(a,e,t,n,r):i==="rule"?tp(a,e,t,n,r):a}function ep(a,e,t,n,r){var i=r.removeEmptyGroups,u=a.get("id"),o=a.get("children1"),l=o;!u&&t&&(u=t,a=a.set("id",u),n.sanitized=!0);var c={};o=o.map(function(d,v){return Vl(d,e.concat(u),v,c,r)}),i&&(o=o.filter(function(d){return d!=null}));var f=c.sanitized||l.size!=o.size;return!o.size&&i&&e.length&&(f=!0,a=void 0),f&&(n.sanitized=!0),f&&a&&(a=a.set("children1",o)),a}function tp(a,e,t,n,r){var i,u,o,l,c=r.removeIncompleteRules,f=r.config,d=r.oldConfig,v=f.settings.showErrorMessage,h=a.get("id"),m=a.get("properties"),S=m.get("field")||null,b=m.get("fieldSrc")||null,E=m.get("operator")||null,L=m.get("operatorOptions"),_=m.get("valueSrc"),T=m.get("value"),P=m.get("valueError"),N={field:((i=S)===null||i===void 0||(u=i.toJS)===null||u===void 0?void 0:u.call(i))||S,fieldSrc:b,operator:E,operatorOptions:L?L.toJS():{},valueSrc:_?_.toJS():null,value:T?T.toJS():null,valueError:P?P.toJS():null},G=S&&E&&T&&!T.includes(void 0);!h&&t&&(h=t,a=a.set("id",h),n.sanitized=!0);var J=S?He(f,S):null;S&&!J&&(an.warn("No config for field ".concat(S)),S=null),S==null&&(m=["operator","operatorOptions","valueSrc","value","valueError"].reduce(function(Ze,ze){return Ze.delete(ze)},m),E=null),b||(b=fs(S),m=m.set("fieldSrc",b)),(E=="range_between"||E=="range_not_between")&&(E=E=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(m.get("operator")," to ").concat(E)),m=m.set("operator",E));var W=E?Wt(f,E,S):null;E&&!W&&(console.warn("No config for operator ".concat(E)),E=null);var B=S?To(f,S):[];S&&(B!=null&&B.length?E&&B.indexOf(E)==-1&&(E=="is_empty"||E=="is_not_empty"?(E=E=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(m.get("operator")," to ").concat(E," for ").concat(S)),m=m.set("operator",E)):(console.warn("Operator ".concat(E," is not supported for field ").concat(S)),E=null)):(console.warn("Type of field ".concat(S," is not supported")),E=null)),E==null&&(m=m.delete("operatorOptions"),m=m.delete("valueSrc"),m=m.delete("value"),m=m.delete("valueError")),L=m.get("operatorOptions");var Q=E?ur(W.cardinality,1):null;!E||L&&!W.options?(L=null,m=m.delete("operatorOptions")):E&&!L&&W.options&&(L=zi(f,E,S),m=m.set("operatorOptions",L)),_=m.get("valueSrc"),T=m.get("value");var se=!v,z=!0,ne=Ga(f,d,m,S,E,null,se,z),ie=ne.newValue,ve=ne.newValueSrc,ue=ne.newValueError;T=ie,_=ve,P=ue,m=m.set("value",T),m=m.set("valueSrc",_),v?m=m.set("valueError",P):m=m.delete("valueError");var pe={field:((o=S)===null||o===void 0||(l=o.toJS)===null||l===void 0?void 0:l.call(o))||S,fieldSrc:b,operator:E,operatorOptions:L?L.toJS():{},valueSrc:_?_.toJS():null,value:T?T.toJS():null,valueError:P?P.toJS():null},me=!nn(N,pe),Ee=T&&T.filter(function(Ze,ze){return!Ki(Ze,_.get(ze),f)}).size==0,Ie=Ki(S,b,f),Ne=Ie&&E&&Ee;if(me&&(n.sanitized=!0),!Ne&&c){var Fe="Uncomplete rule";if(!Ie)Fe="Uncomplete LHS";else{var De,Xe,xe;Fe="Uncomplete RHS",(De=pe.valueSrc)!==null&&De!==void 0&&De[0]&&((Xe=pe.valueSrc)===null||Xe===void 0?void 0:Xe[0])!=((xe=N.valueSrc)===null||xe===void 0?void 0:xe[0])&&(Fe="Bad value src ".concat(pe.valueSrc))}console.warn("[RAQB validate]","Removing rule: ",N,"Reason: ".concat(Fe)),a=void 0}else me&&(a=a.set("properties",m));return a}var Fo=function(e,t,n,r,i,u,o,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,v=null,h=i;if(i!=null){if(o=="field"){var m=ap(t,n,i,o,u,l,e,r,f,c),S=Ye(m,2);v=S[0],h=S[1]}else if(o=="func"){var b=ip(t,n,i,o,u,l,e,r,f,c),E=Ye(b,2);v=E[0],h=E[1]}else if(o=="value"||!o){var L=np(t,n,i,o,u,l,e,r,f,c),_=Ye(L,2);v=_[0],h=_[1]}if(!v){var T=He(e,n),P=Zt(e,n,r,o),N=r?Wt(e,r,n):null,G=Ct()($r(e,n,r,P,o),["factory"]),J=o=="field"?He(e,i):null,W=G,B=G.validateValue;if(typeof B=="function"){var Q=[h,W,r,N];o=="field"&&Q.push(J);var se=B.call.apply(B,[e.ctx].concat(Q));typeof se=="boolean"?se==!1&&(v="Invalid value"):v=se}}}return d&&v&&console.warn("[RAQB validate]","Field ".concat(n,": ").concat(v)),[v,h]},rp=function(e,t,n,r,i){var u=Ot.List.isList(e)?e.toJS():e instanceof Array?Ge(e):void 0;if(u){var o=u.reduce(function(m,S){var b=Ye(m,2),E=b[0],L=b[1],_=Mn(t,S);return _==null?[E,[].concat(Ge(L),[S])]:[[].concat(Ge(E),[_.value]),L]},[[],[]]),l=Ye(o,2),c=l[0],f=l[1],d=f.length>1,v=f.length?"".concat(d?"Values":"Value"," ").concat(f.join(", ")," ").concat(d?"are":"is"," not in list of values"):null;return i!==void 0?n=i:n=n||r,[v,n?c:e]}else{var h=Mn(t,e);return h==null?["Value ".concat(e," is not in list of values"),e]:(e=h.value,[null,e])}},np=function(e,t,n,r,i,u,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(t){var d=He(o,t),v=Zt(o,t,l,r),h=o.widgets[v],m=h?.type,S=h?.jsType,b=d.fieldSettings,E=b?.treeValues||b?.listValues,L=!!(b!=null&&b.asyncFetch),_=E||L;if(i&&m&&i!=m)return["Value should have type ".concat(m,", but got value of type ").concat(i),n];if(S&&!Xd(n,S)&&!_)return["Value should have JS type ".concat(S,", but got value of type ").concat((0,ft.A)(n)),n];if(b){var T=u||E;if(T&&!b.allowCustomValues)return rp(n,T,f,c,o.settings.removeInvalidMultiSelectValuesOnLoad);if(b.min!=null&&n<b.min)return["Value ".concat(n," < min ").concat(b.min),f?b.min:n];if(b.max!=null&&n>b.max)return["Value ".concat(n," > max ").concat(b.max),f?b.max:n]}}return[null,n]},ap=function(e,t,n,r,i,u,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=o.settings.fieldSeparator,v=(0,ft.A)(t)=="object"&&t?._isFuncArg,h=Array.isArray(e)?e.join(d):e,m=Array.isArray(n)?n.join(d):n,S=He(o,n);return S?m==h&&!v?["Can't compare field ".concat(e," with itself"),n]:i&&i!=S.type?["Field ".concat(n," is of type ").concat(S.type,", but expected ").concat(i),n]:[null,n]:["Unknown field ".concat(n),n]},ip=function(e,t,n,r,i,u,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,d=n;if(n){var v=n.get("func");if(v){var h=_r(o,v);if(h){if(i&&h.returnType!=i)return["Function ".concat(v," should return value of type ").concat(h.returnType,", but got ").concat(i),n];for(var m in h.args){var S=h.args[m],b=d.get("args"),E=b?b.get(m):void 0,L=He(o,S),_=E?E.get("value"):void 0,T=E?E.get("valueSrc"):void 0;if(_!==void 0){var P=Fo(o,e,L,l,_,S.type,T,u,f,c,!1),N=Ye(P,2),G=N[0],J=N[1];if(G!==null)if(f)d=d.deleteIn(["args",m]),S.defaultValue!==void 0&&(d=d.setIn(["args",m,"value"],S.defaultValue),d=d.setIn(["args",m,"valueSrc"],"value"));else return["Invalid value of arg ".concat(m," for func ").concat(v,": ").concat(G),n];else J!==_&&(d=d.setIn(["args",m,"value"],J))}else if(c&&S.defaultValue===void 0&&!f&&!S.isOptional)return["Value of arg ".concat(m," for func ").concat(v," is required"),n]}}else return["Unknown function ".concat(v),n]}}return[null,d]},op=O(68090),Eo=O.n(op),su=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},Nl=function(e,t){if(e){var n=e.get("func"),r=n&&_r(t,n);if(r){var i=e,u=!1;for(var o in r.args){var l=r.args[o],c=l.valueSources,f=l.isOptional,d=l.defaultValue,v=$a(t,c,l),h=i.get("args"),m=v.length==1?v[0]:void 0,S=h?h.get(o):void 0,b=S?S.get("value"):void 0,E=(S?S.get("valueSrc"):void 0)||m;if(b!==void 0){var L=Ba(b,E,t);if(L===void 0||(L!==b&&(i=i.setIn(["args",o,"value"],L)),u))return}else if(d!==void 0&&!su(d))i=i.setIn(["args",o,"value"],xl(l)),i=i.setIn(["args",o,"valueSrc"],"value");else if(f)u=!0;else return}return i}}},up=function(e,t,n){var r=n.settings.fieldSeparator;e=e||new(Ke()).Map,Array.isArray(t)&&(t=t.join(r));var i=e.get("func"),u=e.get("args");e=e.set("func",t);var o=t&&_r(n,t),l=t&&Ou(n,t),c=i&&Ou(n,i),f=Ml(c,l,u,n);if(f.length){var d=Object.keys(l.args),v=d.filter(function(N){return!f.includes(N)});e=v.reduce(function(N,G){return N.deleteIn(["args",G])},e)}else e=e.set("args",new(Ke()).Map);if(o)for(var h in o.args){var m=o.args[h],S=m.valueSources,b=m.defaultValue,E=$a(n,S,m),L=E.length?E[0]:void 0,_=b?su(b)&&b.func?"func":"value":void 0,T=_||L,P=e.getIn(["args",h]);P||(b!==void 0&&(e=e.setIn(["args",h,"value"],xl(m))),T&&(e=e.setIn(["args",h,"valueSrc"],T)))}return e},xl=function(e){var t=e.defaultValue;return su(t)&&!Ke().Map.isMap(t)&&t.func?Ke().fromJS(t,function(n,r){return Ke().Iterable.isIndexed(r)?r.toList():r.toOrderedMap()}):t},lp=function(e,t,n,r,i){if(e&&e.get("func")){e=e.setIn(["args",t,"value"],n);var u=e.getIn(["args",t,"valueSrc"]),o=r.valueSources,l=$a(i,o,r),c=l.length==1?l[0]:void 0;!c&&l.includes("value")&&(c="value"),!u&&c&&(e=e.setIn(["args",t,"valueSrc"],c))}return e},sp=function(e,t,n,r,i){return e&&e.get("func")&&(e=e.setIn(["args",t],new(Ke()).Map({valueSrc:n}))),e},Ml=function(e,t,n,r){if(e?.returnType!=t?.returnType)return[];var i=!1,u=Object.keys(t.args),o=u.filter(function(l,c){var f=t.args[l],d=e.args[l],v=Object.keys(e.args).indexOf(l);if(!d&&(f.defaultValue!==void 0||f.isOptional))return!0;if(i&&c!==v||d?.type!=f.type||Co.includes(f.type)&&(!d.listValuesType||d.listValuesType!==f.listValuesType))return!1;if(n){var h=n.get(l),m=h?.get("value"),S=h?.get("valueSrc");if(f.valueSources&&!f.valueSources.includes(S))return!1;var b=null,E=null,L=f,_=null,T=!1,P=!0,N=Fo(r,b,L,E,m,L.type,S,_,T,P,!1),G=Ye(N,2),J=G[0],W=G[1];if(J)return!1}return!0});return o},Co=["select","multiselect","treeselect","treemultiselect"],Ga=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;t||(t=e);var c=e.settings.keepInputOnChangeFieldSrc,f=n.get("field"),d=n.get("fieldType"),v=n.get("operator"),h=n.get("value"),m=n.get("valueSrc",new(Ke()).List),S=n.get("valueType",new(Ke()).List),b=n.get("asyncListValues"),E=e.settings,L=E.convertableWidgets,_=E.clearValueOnChangeField,T=E.clearValueOnChangeOp,P=E.showErrorMessage,N=Wt(e,i,r),G=i?ur(N.cardinality,1):null,J=He(t,f),W=He(e,r),B=!f&&d&&c,Q=J?.type||d,se=W?.type||!r&&B&&Q,z=(f||B)&&v&&i&&h!=null;if(z=z&&(!u||u=="field"&&!_||u=="operator"&&!T),z=z&&Q&&se&&Q==se,z&&Co.includes(se)&&u=="field"){var ne=W?.listValuesType,ie=J?.listValuesType;ne&&ne===ie||(z=!1)}for(var ve=0;ve<G;ve++){var ue=m.get(ve)||null,pe=Zt(t,f,v,ue),me=Zt(e,r,i,ue),Ee=ue=="value"?pe:Zt(t,f,v,"value"),Ie=ue=="value"?me:Zt(e,r,i,"value"),Ne=Ie==Ee||(L[Ee]||[]).includes(Ie)||!Ee&&B;Ne||(z=!1)}v!=i&&[v,i].includes("proximity")&&(z=!1);var Fe=$r(e,r,i,null,m.first()),De=Bl(e,r,i,null);!r&&B&&(De=Object.keys(e.settings.valueSourcesInfo));var Xe={},xe=Array.from({length:G},function(){return null});if(z)for(var Ze=function(){var er=h.get(ze),wt=S.get(ze)||null,rr=m.get(ze)||null,sn=De.find(function(ro){return ro==rr})!=null;!sn&&ze>0&&rr==null&&(sn=!0);var _n=b,Kn=Fo(e,r,r,i,er,wt,rr,_n,o,l,!0),Kr=Ye(Kn,2),Hr=Kr[0],Ta=Kr[1],Qa=!Hr,Rn=Ta!==er,An=!sn||!Qa&&(u=="field"||!P&&!Rn),to=!!Hr&&P&&!An&&!Rn;if(to&&(xe[ze]=Hr),Rn&&(Xe[ze]=Ta),An)return z=!1,"break"},ze=0;ze<G;ze++){var ht=Ze();if(ht==="break")break}var Et=null,or=null,Rr=null,pr=null;if(Et=new(Ke()).List(Array.from({length:G},function(Ar,er){var wt=void 0;if(z)er<h.size&&(wt=h.get(er),Xe[er]!==void 0&&(wt=Xe[er]));else if(G==1){var rr;wt=vo([W?.defaultValue,W==null||(rr=W.fieldSettings)===null||rr===void 0?void 0:rr.defaultValue,Fe?.defaultValue])}return wt})),or=new(Ke()).List(Array.from({length:G},function(Ar,er){var wt=null;return z?er<m.size&&(wt=m.get(er)):(De.length==1||De.length>1)&&(wt=De[0]),wt})),P){if(N&&N.validateValues&&or.toJS().filter(function(Ar){return Ar=="value"||Ar==null}).length==G){var Sr=Fe&&Fe.toJS?Et.toJS().map(function(Ar){return Fe.toJS.call(e.ctx,Ar,Fe)}):Et.toJS(),Xr=N.validateValues(Sr);P&&xe.push(Xr)}pr=new(Ke()).List(xe)}return Rr=new(Ke()).List(Array.from({length:G},function(Ar,er){var wt=null;return z?er<S.size&&(wt=S.get(er)):G==1&&Fe&&Fe.type!==void 0?wt=Fe.type:G==1&&W&&W.type!==void 0&&(wt=W.type=="!group"?"number":W.type),wt})),{canReuseValue:z,newValue:Et,newValueSrc:or,newValueType:Rr,newValueError:pr,operatorCardinality:G}},kl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=e.settings.fieldSeparator,r=sr(t,e),i=t?Tn(e,t):e,u=i,o=null,l=[];do{var c,f=u===e?e.fields:(c=u)===null||c===void 0?void 0:c.subfields;if(!f||!Object.keys(f).length){u=o=null;break}o=Object.keys(f)[0],l.push(o),u=f[o]}while(u.type=="!struct"||u.type=="!group");return(r||[]).concat(l).join(n)},Gl=function(e,t){var n;return((n=e.types[t])===null||n===void 0?void 0:n.operators)||null},To=function(e,t){var n=He(e,t),r=n?n.operators:[];return r},cu=function(e,t){var n,r=To(e,t);return(n=r?.[0])!==null&&n!==void 0?n:null},cp=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return qi(e,t,n,"funcs","subfields")},qi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!e)return null;var u=t.settings.fieldSeparator,o=sr(e,t),l=sr(n,t),c=o.slice(l.length).map(function(f,d,v){return v.slice(0,d+1)}).map(function(f){return[].concat(Ge(l),Ge(f)).join(u)}).map(function(f){var d=Tn(t,f,r,i);return d&&d.label||Eo()(f.split(u))}).filter(function(f){return f!=null});return c},$l=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e)return null;var r=n&&Tn(t,n)||null,i=t.settings.fieldSeparator,u=sr(e,t),o=cs(e,n,t),l=o?sr(n,t):[];return u.slice(l.length).map(function(c,f,d){return d.slice(0,f+1)}).map(function(c){return{part:[].concat(Ge(l),Ge(c)).join(i),key:c[c.length-1]}}).map(function(c){var f=c.part,d=c.key,v=Tn(t,f);return{key:d,cnf:v}}).map(function(c,f,d){var v=c.key,h=c.cnf,m=f>0?d[f-1].cnf:r;return[v,h,m]})},fp=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=t&&(0,ft.A)(t)=="object"&&!!t.func&&!!t.arg,l=e.settings.showLabels,c=He(e,t),f=$r(e,t,n,null,i)||{},d=Wt(e,n,t)||{},v=u?1:d.cardinality,h=null;if(v>1){var m=f.valueLabels||d.valueLabels;m&&(h=m[r]),h&&(0,ft.A)(h)!="object"&&(h={label:h,placeholder:h}),h||(h={label:e.settings.valueLabel+" "+(r+1),placeholder:e.settings.valuePlaceholder+" "+(r+1)})}else{var S=f.valueLabel,b=f.valuePlaceholder;o&&(S||(S=c.label||t.arg),!b&&!l&&(b=c.label||t.arg)),h={label:S||e.settings.valueLabel,placeholder:b||e.settings.valuePlaceholder}}return h};function fu(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=[],i=[];if(!e)return{widgets:r,valueSrcs:i};var u=(0,ft.A)(e)=="object"&&(!!e.func&&!!e.arg||e._isFuncArg),o=He(a,e),l=t?a.operators[t]:null;if(o!=null&&o.widgets){var c=function(){var m=o.widgets[f];if(!a.widgets[f])return"continue";var S=a.widgets[f].valueSrc||"value",b=!0;if(f=="field"&&(b=b&&$a(a,["field"],o).length>0),f=="func"&&(b=b&&$a(a,["func"],o).length>0),n=="value"&&!m.operators&&!u&&e!="!case_value"&&(b=!1),m.operators&&t&&(b=b&&m.operators.indexOf(t)!=-1),n&&n!=S&&n!="const"&&(b=!1),l&&l.cardinality==0&&S!="value"&&(b=!1),b){var E,L;r.push(f);var _=((E=o.valueSources)===null||E===void 0?void 0:E.indexOf(S))!=-1;(l==null||(L=l.valueSources)===null||L===void 0?void 0:L.indexOf(S))==-1&&(_=!1),_&&!i.find(function(T){return T==S})&&i.push(S)}};for(var f in o.widgets)var d=c()}var v=function(m){var S=0;return o.preferWidgets?o.preferWidgets.includes(m)&&(S+=10-o.preferWidgets.indexOf(m)):m==o.mainWidget&&(S+=100),m=="field"&&(S-=1),m=="func"&&(S-=2),S};return r.sort(function(h,m){return v(m)-v(h)}),{widgets:r,valueSrcs:i}}var dp=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=fu(e,t,n,r),u=i.widgets;return u},$a=function(e,t,n){var r;if(!n)return t;var i=(r=n.type)!==null&&r!==void 0?r:n.returnType;return t||(t=Object.keys(e.settings.valueSourcesInfo)),t.filter(function(u){var o=!0;if(u=="field"&&e.__fieldsCntByType){var l=n._isFuncArg?0:1;o=o&&e.__fieldsCntByType[i]>l}return u=="func"&&(e.__funcsCntByType&&(o=o&&!!e.__funcsCntByType[i]),n.funcs&&(o=o&&n.funcs.length>0)),o})},Bl=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=fu(e,t,n,null),u=i.valueSrcs,o=$a(e,u,r);return o},Zt=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=fu(e,t,n,r),u=i.widgets,o=null;return u.length&&(o=u[0]),o},aa=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e){var u=He(t,e)||{},o=t.settings.fieldSeparator,l=sr(e,t),c=Array.isArray(e)?e.join(o):e;if(i!=null&&i.useTableName&&u.tableName){var f=Ge(l);f[0]=u.tableName,c=f.join(o)}if(u.fieldName&&(c=u.fieldName),r){var d=He(t,r)||{},v=r;c.indexOf(v+o)==0?c=c.slice((v+o).length):u.fieldName||n.errors.push("Can't cut group ".concat(v," from field ").concat(c))}return c}},du=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.get("type"),i=e.getIn(["properties","mode"]);return r=="rule_group"&&i=="array"?pp(e,t,n):r=="group"||r=="rule_group"?vp(e,t,n):gp(e,t,n)},pp=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.get("children1"),i=e.get("properties");return Wl(i.toObject(),r,t,n)},Wl=function(e,t,n){var r,i,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=e.operator,l=(r=(i=n.operators[o])===null||i===void 0?void 0:i.cardinality)!==null&&r!==void 0?r:1,c=[!vu(e,n,!1),l>0?!0:!pu(t,n,u)],f=c.filter(function(v){return!!v}).length,d=f==2;return!d},vp=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.get("children1");return pu(r,t,n)},pu=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||e.size==0||e.size>0&&e.filter(function(r){return!du(r,t,n)}).size==0},vu=function(e,t){var n,r,i=e.field,u=e.fieldSrc,o=e.fieldType,l=e.operator,c=e.value,f=e.valueSrc,d=e.valueType,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=(n=(r=t.operators[l])===null||r===void 0?void 0:r.cardinality)!==null&&n!==void 0?n:1,m=[v?i!==null||o!=null:Ki(i,u,t,v),!!l,c.filter(function(E,L){var _;return Ki(E,(f==null||(_=f.get)===null||_===void 0?void 0:_.call(f,L))||f?.[L],t,v)}).size>=h],S=m.filter(function(E){return!!E}).length,b=S==3;return!b},gp=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.get("properties");return vu(r.toObject(),t,n)},Ki=function a(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!r&&t=="func"&&e){var i=e.get("func"),u=_r(n,i);if(u){var o=e.get("args");for(var l in u.args){var c=u.args[l],f=o?o.get(l):void 0,d=f?f.get("value"):void 0,v=f?f.get("valueSrc"):void 0;if(d==null&&c?.defaultValue===void 0&&!(c!=null&&c.isOptional)||d!=null&&!a(d,v,n,r))return!1}return!0}}return e!=null},Ba=function(e,t,n){return t=="func"?Nl(e,n):e},hp=O(1779),Sn=O.n(hp),mp=O(18678),gu=O.n(mp);function Ul(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function zl(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ul(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ul(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function yp(a,e){return gu().apply(a,e)}function Sp(a,e){return gu().add_operation(a,e)}var ql={CALL:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.call.apply(e,[t].concat(r))},JSX:function(e,t){return{type:e,props:t}},mergeObjects:function(e,t){return zl(zl({},e),t)},fromEntries:function(e){return Object.fromEntries(e)},strlen:function(e){return e?.length||0},regexTest:function(e,t,n){return e?.match(new RegExp(t,n))!=null},now:function(){return new Date},date_add:function(e,t,n){return Ft()(e).add(t,n).toDate()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()}};function Op(){for(var a in ql)Sp(a,ql[a])}function bp(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Fp(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Fp(a,e){if(a){if(typeof a=="string")return Kl(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kl(a,e)}}function Kl(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function Hl(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ea(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hl(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Hl(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}Op();function Jl(a,e,t){var n;try{n=gu().apply(a,e)}catch(r){throw r.message="".concat(t.join(".")," :: ").concat(r.message),r}return n}function Ql(a,e,t,n){var r;try{r=e.call.apply(e,[a].concat(Ge(t)))}catch(i){throw i.message="".concat(n.join(".")," :: ").concat(i.message),i}return r}var wo=["conjunctions","fields","types","operators","widgets","settings","funcs","ctx"],Yl={asyncFetch:{type:"f",args:["search","offset"]},labelYes:{type:"r"},labelNo:{type:"r"},marks:{type:"r",isArr:!0},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]}},hu=Ea(Ea({},Yl),{},{factory:{type:"rf"},formatValue:{type:"f",args:["val","fieldDef","wgtDef","isForDisplay","op","opDef","rightFieldDef"]},sqlFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelImportValue:{type:"f",args:["val","wgtDef","args"]},mongoFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},elasticSearchFormatValue:{type:"f",args:["queryType","val","op","field","config"]},jsonLogic:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]},toJS:{type:"f",args:["val"]}}),Xl={options:{factory:{type:"rf"}},formatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","isForDisplay","fieldDef"]},mongoFormatOp:{type:"f",args:["field","op","vals","useExpr","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},sqlFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},spelFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},jsonLogic:{type:"f",ignore:"string",args:["field","op","vals","opDef","operatorOptions","fieldDef"]},elasticSearchQueryType:{type:"f",ignore:"string",args:["valueType"]},textSeparators:{type:"r",isArr:!0}},Ep={formatConj:{type:"f",args:["children","conj","not","isForDisplay"]},sqlFormatConj:{type:"f",args:["children","conj","not"]},spelFormatConj:{type:"f",args:["children","conj","not","omitBrackets"]}},Zl={widgetProps:hu,opProps:Xl},Cp={renderBrackets:{type:"r",isArr:!0},renderSeps:{type:"r",isArr:!0},jsonLogic:{type:"f",ignore:"string",args:["formattedArgs"]},jsonLogicImport:{type:"f",args:["val"]},spelImport:{type:"f",args:["spel"]},formatFunc:{type:"f",args:["formattedArgs","isForDisplay"]},sqlFormatFunc:{type:"f",args:["formattedArgs"]},mongoFormatFunc:{type:"f",args:["formattedArgs"]},spelFormatFunc:{type:"f",args:["formattedArgs"]}},Tp={locale:{mui:{type:"f",args:[],invokeWith:[],ignore:"jl"}},canCompareFieldWithField:{type:"f",args:["leftField","leftFieldConfig","rightField","rightFieldConfig","op"]},formatReverse:{type:"f",args:["q","op","reversedOp","operatorDefinition","revOperatorDefinition","isForDisplay"]},sqlFormatReverse:{type:"f",args:["q"]},spelFormatReverse:{type:"f",args:["q"]},formatField:{type:"f",args:["field","parts","label2","fieldDefinition","config","isForDisplay"]},formatSpelField:{type:"f",args:["field","parentField","parts","partsExt","fieldDefinition","config"]},formatAggr:{type:"f",args:["whereStr","aggrField","operator","value","valueSrc","valueType","opDef","operatorOptions","isForDisplay","aggrFieldDef"]},normalizeListValues:{type:"f",args:["listValues","type","fieldSettings"]},renderConfirm:{type:"f",args:["props"]},useConfirm:{type:"f",args:[]},renderField:{type:"rf"},renderOperator:{type:"rf"},renderFunc:{type:"rf"},renderConjs:{type:"rf"},renderButton:{type:"rf"},renderIcon:{type:"rf"},renderButtonGroup:{type:"rf"},renderValueSources:{type:"rf"},renderFieldSources:{type:"rf"},renderProvider:{type:"rf"},renderSwitch:{type:"rf"},renderSwitchPrefix:{type:"r"},renderItem:{type:"rf"},renderBeforeWidget:{type:"rf"},renderAfterWidget:{type:"rf"},renderBeforeActions:{type:"rf"},renderAfterActions:{type:"rf"},renderRuleError:{type:"rf"}},wp={fields:{x:{fieldSettings:Yl,widgets:{x:Zl},mainWidgetProps:hu}},widgets:{x:hu},conjunctions:{x:Ep},operators:{x:Xl},types:{x:{widgets:{x:Zl}}},funcs:{x:Cp},settings:Tp},vi=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},es=function(e,t){if(e.__fieldNames)throw new Error("Don't apply `compressConfig()` to extended config");var n=gn()(e,wo);delete n.ctx;for(var r=function c(f,d,v,h){if(vi(f)){if(Dr(f)&&(f=oi(f)),v[0]==="funcs"&&!d){var m=v[v.length-1];d=Tn({funcs:h.BasicFuncs},m,"funcs","subfields")||void 0,d&&(f.$$key=m)}if(d!==void 0&&vi(d))for(var S in d)Object.prototype.hasOwnProperty.call(d,S)&&(!Object.keys(f).includes(S)||f[S]===void 0&&d[S]!==void 0?f[S]="$$deleted":(f[S]=c(f[S],d[S],[].concat(Ge(v),[S]),h),f[S]===void 0&&delete f[S]));for(var b in f)if(Object.prototype.hasOwnProperty.call(f,b)){if(!d||!Object.keys(d).includes(b)){var E;f[b]=c(f[b],(E=d)===null||E===void 0?void 0:E[b],[].concat(Ge(v),[b]),h)}f[b]===void 0&&delete f[b]}Object.keys(f).length===0&&(f=void 0)}else Array.isArray(f)&&f.forEach(function(L,_){f[_]=c(f[_],void 0,[].concat(Ge(v),[_]),h)});if(!(d!==void 0&&Nn(f,d,!0))){if(typeof f=="function")throw new Error("compressConfig: function at ".concat(v.join(".")," should be converted to JsonLogic"));return f}},i=0,u=wo;i<u.length;i++){var o=u[i];if(o!=="ctx")if(o==="fields")n[o]=Sn()(n[o]),r(n[o],{},[o]);else if(o==="funcs"){n[o]=Sn()(n[o]||{});for(var l in n[o])r(n[o][l],null,[o,l],{BasicFuncs:Z})}else n[o]=Sn()(n[o]),r(n[o],t[o],[o])}return n},ts=function(e,t,n){if(!e.settings.useConfigCompress)throw new Error("Please enable `useConfigCompress` in config settings to use decompressConfig()");for(var r={},i=function f(d,v,h){if(vi(v)){vi(d)||(d={});for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(v[m]==="$$deleted"?delete d[m]:d[m]=f(d[m],v[m],[].concat(Ge(h),[m])))}else Array.isArray(v)?d=Sn()(v):d=v;return d},u=function f(d,v,h){var m=!1;if(vi(d)&&Object.prototype.hasOwnProperty.call(d,"$$key")&&d.$$key){var S=Tn({funcs:h.BasicFuncs},d.$$key,"funcs","subfields");if(S)delete d.$$key,d=i(Sn()(S),d,v),m=!0;else throw new Error("decompressConfig: basic function not found by key ".concat(d.$$key," at ").concat(v.join(".")))}if(!m){if(vi(d))for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(d[b]=f(d[b],[].concat(Ge(v),[b]),h));else if(Array.isArray(d)){var E=bp(d),L;try{for(E.s();!(L=E.n()).done;){var _=L.value;d[_]=f(d[_],[].concat(Ge(v),[_]),h)}}catch(T){E.e(T)}finally{E.f()}}}return d},o=0,l=wo;o<l.length;o++){var c=l[o];c==="ctx"?r[c]=ga()({},t.ctx||{},n||{}):c==="funcs"?(r[c]=Sn()(e[c]||{}),u(r[c],[c],{BasicFuncs:Z})):c==="fields"?r[c]=Sn()(e[c]||{}):(r[c]=Sn()(t[c]||{}),i(r[c],e[c]||{},[c]))}return r},rs=function(e){if(e.__compliled)return e;e=Sn()(e);var t={ctx:e.ctx},n=[];return Lo(e,e,t,wp,n),Object.defineProperty(e,"__compliled",{enumerable:!1,writable:!1,value:!0}),e};function Lo(a,e,t,n,r){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];if(e){var u=!i.length;for(var o in n){var l=n[o],c=o==="x"?i:[].concat(Ge(i),[o]);if(l.type==="r"){var f=e,d=f[o];if(l.isArr)for(var v in d){var h=gi(d[v],t,[].concat(Ge(c),[v]));h!==d[v]&&(r.push("Compiled ".concat(c.join("."),"[").concat(v,"]")),d[v]=h)}else{var m=gi(d,t,c,void 0);m!==d&&(r.push("Compiled R ".concat(c.join("."))),f[o]=m)}}else if(l.type==="rf"){var S=e,b=S[o],E=Lp(b,t,c,l.ignore);E!==b&&(r.push("Compiled JL-RF ".concat(c.join("."))),S[o]=E)}else if(l.type==="f"){var L=e,_=L[o],T=_p(_,t,c,l.args,l.ignore);if(l.invokeWith&&T&&typeof T=="function"){var P;T=(P=T).call.apply(P,[null].concat(Ge(l.invokeWith)))}T!==_&&(r.push("Compiled JL-F ".concat(c.join("."))),L[o]=T)}else if(o==="x")for(var N in e){c=[].concat(Ge(i),[N]);var G=e[N];Lo(a,G,t,l,r,c),G.subfields&&Lo(a,G.subfields,t,n,r,c)}else{var J=e[o];Lo(a,J,t,l,r,c)}}}}function Lp(a,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;return lr(a)?function(r,i){i=i||e?.ctx;var u={props:r,ctx:i},o=Jl(a,u,t);typeof o=="string"&&(o={type:o,props:r});var l=gi(o,{ctx:i},t);return l}:typeof a=="string"?function(r,i){i=i||e?.ctx;var u=a.split(".").reduce(function(c,f){return c?.[f]},i);if(u)return Ql(this,u,[r,i],t);var o={type:a,props:r},l=gi(o,{ctx:i},t);return l}:a}function _p(a,e,t,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;return lr(a)&&r!=="jl"?function(){for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];var l=this||e?.ctx,c=(n||[]).reduce(function(d,v,h){return Ea(Ea({},d),{},(0,Ae.A)({},v,u[h]))},{args:u,ctx:l}),f=Jl(a,c,t);return f}.bind(e?.ctx):typeof a=="string"&&r!=="string"?function(){var i=this||e?.ctx,u=a.split(".").reduce(function(f,d){return f?.[d]},i);if(u){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return Ql(this,u,l,t)}else throw new Error("".concat(t.join(".")," :: Function ").concat(a," is not found in ctx"))}.bind(e?.ctx):a}function Rp(a,e){var t;return(e==null||(t=e.components)===null||t===void 0?void 0:t[a])||e.W[a]||e.O[a]}function gi(a,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;if(xn(a)){var r,i=a.type,u=a.props;if(typeof i!="string")throw new Error("renderReactElement for ".concat(t.join("."),": type should be string"));var o=Rp(i,e.ctx)||i.toLowerCase(),l;n!==void 0&&(u=Ea(Ea({},u),{},{key:n})),(r=u)!==null&&r!==void 0&&r.children&&(l=gi(u.children,e,t),u=Ea(Ea({},u),{},{children:l}));var c=e.ctx.RCE(o,u);return c}else if(a instanceof Array)return a.map(function(f,d){return gi(f,e,t,""+d)});return a}function ns(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function mu(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ns(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ns(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Ap=vn().mark(hi),Pp=vn().mark(ss);function as(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Ip(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Ip(a,e){if(a){if(typeof a=="string")return is(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return is(a,e)}}function is(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var ia=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e.__configId)return e;n&&e.settings.useConfigCompress?e.__compliled?e=Sn()(e):e=rs(e):e=Sn()(e),e.settings=ma()({},ji,e.settings,yu),e.__fieldsCntByType={},e.__funcsCntByType={},e.__fieldNames={},jp(e.types,e),os(e.fields,e),us(e.funcs,e);var r=e.settings.locale.moment;return r&&Ft().locale(r),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:t||Tt()}),Ii(e),e};function jp(a,e){for(var t in a){var n=a[t];Dp(t,n,e)}}function Dp(a,e,t){var n=null,r=null;e.mainWidget=e.mainWidget||Object.keys(e.widgets).filter(function(d){return d!="field"&&d!="func"})[0];for(var i in e.widgets){var u=e.widgets[i];if(u.operators){var o=u.operators;e.excludeOperators&&(o=o.filter(function(d){return!e.excludeOperators.includes(d)})),n=Pi(n,o)}u.defaultOperator&&(r=u.defaultOperator),i==e.mainWidget&&(u=ga()({},{widgetProps:e.mainWidgetProps||{}},u)),e.widgets[i]=u}e.valueSources||(e.valueSources=Object.keys(t.settings.valueSourcesInfo));var l=as(e.valueSources),c;try{for(l.s();!(c=l.n()).done;){var f=c.value;f!="value"&&!e.widgets[f]&&(e.widgets[f]={})}}catch(d){l.e(d)}finally{l.f()}!e.operators&&n&&(e.operators=Array.from(new Set(n))),!e.defaultOperator&&r&&(e.defaultOperator=r)}function os(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var n in a)ls(a[n],e,[].concat(Ge(t),[n])),a[n].subfields&&os(a[n].subfields,e,[].concat(Ge(t),[n]))}function us(a,e){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(a){var r=(e==null||(t=e.settings)===null||t===void 0?void 0:t.fieldSeparator)||".";for(var i in a){var u=[].concat(Ge(n),[i]).join(r),o=a[i];o.returnType&&(e.__funcsCntByType[o.returnType]||(e.__funcsCntByType[o.returnType]=0),e.__funcsCntByType[o.returnType]++);for(var l in o.args)ls(o.args[l],e,null,!0);if(o.args){var c=Object.keys(o.args),f=!0,d=as(c.reverse()),v;try{for(d.s();!(v=d.n()).done;){var h=v.value,m=o.args[h];!f&&m.isOptional&&(an.info("Arg ".concat(h," for func ").concat(u," can't be optional")),delete m.isOptional),m.isOptional||(f=!1)}}catch(S){d.e(S)}finally{d.f()}}o.subfields&&us(o.subfields,e,[].concat(Ge(n),[i]))}}}function ls(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=null,i=null,u=e.types[a.type],o=a.excludeOperators||[];if(a.type!="!struct"&&a.type!="!group"){var l=["listValues","treeValues","allowCustomValues","validateValue"];a.fieldSettings||(a.fieldSettings={});for(var c=0,f=l;c<f.length;c++){var d=f[c];a[d]&&(a.fieldSettings[d]=a[d],delete a[d])}if(a.fieldSettings.listValues&&e.settings.normalizeListValues&&(a.fieldSettings.listValues=e.settings.normalizeListValues.call(e.ctx,a.fieldSettings.listValues,a.type,a.fieldSettings)),a.fieldSettings.treeValues&&e.settings.normalizeListValues&&(a.fieldSettings.treeValues=e.settings.normalizeListValues.call(e.ctx,a.fieldSettings.treeValues,a.type,a.fieldSettings)),!u){a.disabled=!0;return}n||(e.__fieldsCntByType[a.type]||(e.__fieldsCntByType[a.type]=0),e.__fieldsCntByType[a.type]++),a.widgets||(a.widgets={}),n&&(a._isFuncArg=!0),a.mainWidget=a.mainWidget||u.mainWidget,a.valueSources=a.valueSources||u.valueSources;var v=u.excludeOperators||[],h=function(){var _=a.widgets[m]||{},T=u.widgets[m]||{};if(!n){var P=[].concat(Ge(o),Ge(v)),N=a.preferWidgets&&(m=="field"||a.preferWidgets.includes(m))||P.length>0;if(_.operators){var G=_.operators.filter(function(W){return!P.includes(W)});r=[].concat(Ge(r||[]),Ge(G))}else if(N&&T.operators){var J=T.operators.filter(function(W){return!P.includes(W)});r=[].concat(Ge(r||[]),Ge(J))}_.defaultOperator&&(i=_.defaultOperator)}m==a.mainWidget&&(_=ga()({},{widgetProps:a.mainWidgetProps||{}},_)),a.widgets[m]=_};for(var m in u.widgets)h();n||(!a.operators&&r&&(a.operators=Array.from(new Set(r))),a._origDefaultOperator=a.defaultOperator,!a.defaultOperator&&i&&(a.defaultOperator=i))}var S=Vp(e,t),b=S.fieldName,E=S.inGroup;b&&(a.fieldName=b,e.__fieldNames[b]||(e.__fieldNames[b]=[]),e.__fieldNames[b].push({fullPath:t,inGroup:E}))}var yu=function(e,t,n,r,i,u){if(Array.isArray(e))return t};function hi(a){return vn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Su(a,a.funcs||{},[]),"t0",1);case 1:case"end":return t.stop()}},Ap)}function ss(a){return vn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Su(a,a.fields||{},[]),"t0",1);case 1:case"end":return t.stop()}},Pp)}function Su(a,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";return vn().mark(function r(i){var u,o,l;return vn().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u=(a==null||(i=a.settings)===null||i===void 0?void 0:i.fieldSeparator)||".",f.t0=vn().keys(e);case 2:if((f.t1=f.t0()).done){f.next=13;break}if(o=f.t1.value,l=e[o],!l[n]){f.next=9;break}return f.delegateYield(Su(a,l[n],[].concat(Ge(t),[o]),n),"t2",7);case 7:f.next=11;break;case 9:return f.next=11,[[].concat(Ge(t),[o]).join(u),l];case 11:f.next=2;break;case 13:case"end":return f.stop()}},r)})()}var Tn=function(e,t){var n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!t)return null;if(t=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var u=(e==null||(n=e.settings)===null||n===void 0?void 0:n.fieldSeparator)||".",o=sr(t,e),l=e[r];if(!l)return null;for(var c=l,f=null,d=[],v=0;v<o.length;v++){var h=o[v];d.push(h);var m=d.join(u);f=c[m],v<o.length-1&&(f&&f[i]?(c=f[i],d=[]):f=null)}return f},Vp=function(e,t){if(!t)return{};var n=e.settings.fieldSeparator,r=Ge(t).reduce(function(l,c,f,d){var v=l.computedPath,h=l.computed,m=l.inGroup,S=[].concat(Ge(d.slice(0,f)),[c]),b=Tn(e,S);return b?.type==="!group"&&f<d.length-1?(m=S.join(n),v=[]):b!=null&&b.fieldName?(h=!0,v=[b.fieldName]):v=[].concat(Ge(v),[c]),{computedPath:v,computed:h,inGroup:m}},{computedPath:[],computed:!1,inGroup:void 0}),i=r.computedPath,u=r.computed,o=r.inGroup;return u?{fieldName:i.join(n),inGroup:o}:{}},_o=function(e,t){var n,r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=e.settings.fieldSeparator,o=[i].concat(Ge(t.split(u))).filter(function(f){return f!=null}),l=t,c=(n=e.__fieldNames[l])===null||n===void 0||(r=n.find)===null||r===void 0||(r=r.call(n,function(f){var d=f.inGroup;return d?i?.startsWith(d):!0}))===null||r===void 0?void 0:r.fullPath;return(c||o).join(u)},Ou=function(e,t){if(!t)return null;var n=Tn(e,t,"funcs","subfields");if(!n)return null;var r=n.returnType,i=n.args,u=Object.fromEntries(Object.entries(i||{}).map(function(l){var c=Ye(l,2),f=c[0],d=c[1],v=gn()(d,["type","valueSources","defaultValue","fieldSettings","isOptional"]);return[f,v]})),o={returnType:r,args:u};return o},_r=function(e,t){if(!t)return null;var n=Tn(e,t,"funcs","subfields");if(!n)return null;var r=e.types[n.returnType]||{};return mu(mu(mu({},r),n),{},{type:n.returnType||n.type})},bu=function(e,t,n){var r=_r(e,t);if(!r)return null;var i=r.args&&r.args[n]||null;if(!i)return null;var u=e.types[i.type]||{},o=ma()({},u,i||{},yu);return o},cs=function(e,t){var n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t)return!1;var i=(r==null||(n=r.settings)===null||n===void 0?void 0:n.fieldSeparator)||".",u=Fu(e,r),o=Fu(t,r);return u.startsWith(o+i)},Fu=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string")return e;var r=(n==null||(t=n.settings)===null||t===void 0?void 0:t.fieldSeparator)||".";return sr(e,n).join(r)},sr=function(e){var t,n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!e)return[];if(Array.isArray(e))return e;var u=(i==null||(t=i.settings)===null||t===void 0?void 0:t.fieldSeparator)||".";if(e!=null&&e.func)return Array.isArray(e.func)?e.func:e.func.split(u);if(e!=null&&(n=e.get)!==null&&n!==void 0&&n.call(e,"func")){var o;return e==null||(o=e.get)===null||o===void 0?void 0:o.call(e,"func").split(u)}return(e==null||(r=e.split)===null||r===void 0?void 0:r.call(e,u))||[]},Np=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!e)return null;var r=t.settings.fieldSeparator,i=sr(e,t);return n?i:i.map(function(u,o,l){return l.slice(0,o+1)}).map(function(u){return u.join(r)})},fs=function(e){var t;if(!e)return null;if((0,ft.A)(e)=="object"){if(!e.func&&e.type)return"field";if(e.func)return e.func&&e.arg?null:"func"}return e!=null&&(t=e.get)!==null&&t!==void 0&&t.call(e,"func")?e!=null&&e.get("arg")?null:"func":"field"},He=function(e,t){var n;if(!t)return null;if((0,ft.A)(t)=="object"){if(!t.func&&t.type)return t;if(t.func)return t.func&&t.arg?bu(e,t.func,t.arg):_r(e,t.func)}if(t!=null&&(n=t.get)!==null&&n!==void 0&&n.call(t,"func"))return t!=null&&t.get("arg")?bu(e,t.get("func"),t.get("arg")):_r(e,t.get("func"));var r=Tn(e,t);if(!r)return null;var i=e.types[r.type]||{},u=ma()({},i,r||{},yu);return u},Wt=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t)return null;var r=e.operators[t];if(n){var i=He(e,n),u=Zt(e,n,t,null),o=e.widgets[u]||{},l=(i&&i.widgets?i.widgets[u]:{})||{},c=(o.opProps||{})[t],f=(l.opProps||{})[t],d=ga()({},r,c,f);return d}else return r},$r=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!t||!(n||r)&&i!="const"&&t!="!case_value")return null;var u=He(e,t);r||(r=Zt(e,t,n,i));var o=e.widgets[r]||{},l=(u&&u.widgets?u.widgets[r]:{})||{},c=l.widgetProps||{},f=(i=="value"||!i)&&u&&u.fieldSettings||{},d=ga()({},o,c,f);return d},xp=Cn;function ds(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function ps(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ds(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ds(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Mp=function(e,t){var n={usedFields:[]},r=vs(e,t,n);if(r)return ps(ps({},r),n)},vs=function(e,t,n){if(e){var r=e.get("type"),i=e.get("children1");if((r==="group"||r==="rule_group")&&i&&i.size)return kp(e,t,n);if(r==="rule")return Gp(e,t,n)}},kp=function(e,t,n){var r=e.get("properties")||new Ot.Map,i=e.get("children1"),u=e.get("id"),o=i.map(function(d){return vs(d,t,n)}).filter(function(d){return typeof d<"u"});if(o.size){var l=r.get("conjunction");l||(l=Wn(t));var c=r.get("not"),f={id:u,rules:o.toList(),condition:l.toUpperCase(),not:c};return f}},Gp=function(e,t,n){var r,i=e.get("properties")||new Ot.Map,u=e.get("id"),o=i.get("operator"),l=i.get("operatorOptions"),c=i.get("field"),f=i.get("value"),d=i.get("valueSrc"),v=i.get("valueType"),h=f.filter(function(B){return B===void 0}).size>0;if(!(c==null||o==null||h)){var m=He(t,c)||{},S=Wt(t,o,c)||{},b=m.type||"undefined",E=ur(S.cardinality,1),L=t.types[m.type]||{},_=aa(c,t,n);if(!(f.size<E)){n.usedFields.indexOf(c)==-1&&n.usedFields.push(c),f=f.toArray(),d=d.toArray(),v=((r=v)===null||r===void 0?void 0:r.toArray())||[];for(var T=[],P=0;P<f.length;P++){var N={type:v[P],value:f[P]};if(T.push(N),d[P]=="field"){var G=f[P];n.usedFields.indexOf(G)==-1&&n.usedFields.push(G)}}var J=l?l.toJS():null;J&&!Object.keys(J).length&&(J=null);var W={id:u,fieldName:_,type:b,input:L.mainWidget,operator:o};return J&&(W.operatorOptions=J),W.values=T,W}}};function gs(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function hs(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gs(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):gs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function ms(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=$p(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function $p(a,e){if(a){if(typeof a=="string")return ys(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ys(a,e)}}function ys(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var Bp=function(e,t){var n={usedFields:[],errors:[]},r=ia(t,void 0,!1),i=Ss(e,r,n,!0),u=n.errors,o=n.usedFields,l=r.settings.fieldSeparator,c={},f=ms(o),d;try{for(f.s();!(d=f.n()).done;)for(var v=d.value,h=sr(v,t),m=He(r,v)||{},S=c,b=0;b<h.length;b++){var E=h[b],L=He(r,h.slice(0,b+1))||{};b!=h.length-1?L.type=="!group"&&L.mode!="struct"?(S[E]||(S[E]=[{}]),S=S[E][0]):(S[E]||(S[E]={}),S=S[E]):S[E]||(S[E]=null)}}catch(_){f.e(_)}finally{f.f()}return{errors:u,logic:i,data:c}},Ss=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u=e.get("type"),o=e.get("properties")||new Ot.Map,l=o.get("isLocked"),c=t.settings.jsonLogic.lockedOp,f;return u==="group"||u==="rule_group"?f=Wp(e,t,n,r,i):u==="rule"&&(f=Up(e,t,n,i)),l&&f&&c&&(f=(0,Ae.A)({},c,f)),f}},Wp=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=e.get("type"),o=e.get("properties")||new Ot.Map,l=o.get("mode"),c=e.get("children1")||new Ot.List,f=o.get("field"),d=o.get("conjunction");d||(d=Wn(t));var v=t.conjunctions[d],h=v.jsonLogicConj||d.toLowerCase(),m=o.get("not"),S=u==="rule_group"&&!r,b=S&&l!="struct"?f:i,E=o.get("operator"),L=E&&Wt(t,E,f)||null,_=Os(t,o,n,E,i),T=S&&(!E||L.cardinality==0),P=c.map(function(Q){return Ss(Q,t,n,!1,b)}).filter(function(Q){return typeof Q<"u"});if(S&&l!="struct"&&!T){if(_==null)return}else if(!P.size)return;var N={};if(P.size==1&&!r?N=P.first():N[h]=P.toList().toJS(),m&&(N={"!":N}),S&&l!="struct"){var G=Cu(n,t,f,i);if(T){var J=E||"some";N=(0,Ae.A)({},J,[G,N])}else{var W=P.size?{filter:[G,N]}:G,B={reduce:[W,{"+":[1,{var:"accumulator"}]},0]};N=Fs(t,o,B,_,E)}}return N},Up=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e.get("properties")||new Ot.Map,u=i.get("field"),o=i.get("fieldSrc"),l=i.get("operator"),c=i.get("operatorOptions");if(c=c?c.toJS():null,c&&!Object.keys(c).length&&(c=null),!(u==null||l==null)){var f=He(t,u)||{},d=Wt(t,l,u)||{},v=d.reversedOp,h=Wt(t,v,u)||{},m=!1;if(!d.jsonLogic&&!h.jsonLogic){n.errors.push("Operator ".concat(l," is not supported"));return}if(!d.jsonLogic&&h.jsonLogic){m=!0;var S=[v,l];l=S[0],v=S[1];var b=[h,d];d=b[0],h=b[1]}var E=Os(t,i,n,l,r);if(E!==void 0){var L=o==="func"?bs(n,t,u,r):Cu(n,t,u,r);if(L!==void 0)return Fs(t,i,L,E,l,c,f,m)}}},Os=function(e,t,n,r,i){var u=t.get("field"),o=t.get("valueSrc"),l=t.get("valueType"),c=He(e,u)||{},f=Wt(e,r,u)||{},d=ur(f.cardinality,1),v=t.get("value"),h=t.get("asyncListValues");if(v!=null){var m=[],S=[],b=n.usedFields,E=v.map(function(_,T){var P=o?o.get(T):null,N=l?l.get(T):null,G=Ba(_,P,e),J=Zt(e,u,r,P),W=Ct()($r(e,u,r,J,P),["factory"]),B=Eu(n,e,G,P,N,W,c,r,f,i,h);return B!==void 0&&(m.push(P),S.push(N)),B}),L=E.filter(function(_){return _===void 0}).size>0;if(E.size<d||L){n.usedFields=b;return}return d>1?E.toArray():d==1?E.first():null}},Eu=function(e,t,n,r,i,u,o,l,c){var f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,d=arguments.length>10?arguments[10]:void 0;if(n!==void 0){var v;if(r=="field")v=Cu(e,t,n,f);else if(r=="func")v=bs(e,t,n,f);else if(typeof u.jsonLogic=="function"){var h=u.jsonLogic,m=[n,hs(hs({},gn()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Ct()(u,Cn)];l&&(m.push(l),m.push(c)),v=h.call.apply(h,[t.ctx].concat(m))}else v=n;return v}},bs=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=n.get("func"),u=n.get("args"),o=_r(t,i),l=sr(i,t),c=l[l.length-1];if(!o){e.errors.push("Func ".concat(i," is not defined in config"));return}if(!(o!=null&&o.jsonLogic)){e.errors.push("Func ".concat(i," is not supported"));return}var f={},d=[],v=[];for(var h in o.args){var m=o.args[h],S=He(t,m),b=m.defaultValue,E=m.isOptional,L=b!=null&&b.func?"func":"value",_=u?u.get(h):void 0,T=_?_.get("value"):void 0,P=_?_.get("valueSrc"):void 0,N=null,G=Zt(t,m,N,P),J=Ct()($r(t,m,N,G,P),["factory"]),W=Eu(e,t,T,P,m.type,J,S,null,null,r);if(T!=null&&W===void 0){P!="func"&&e.errors.push("Can't format value of arg ".concat(h," for func ").concat(i));return}var B=void 0;if(W===void 0&&!E&&b!=null){var Q=Zt(t,m,N,L),se=Ct()($r(t,m,N,Q,L),["factory"]);if(B=Eu(e,t,b,L,m.type,se,S,null,null,r),B===void 0){L!="func"&&e.errors.push("Can't format default value of arg ".concat(h," for func ").concat(i));return}}var z=W??B;if(z!==void 0){if(d.length){var ne=ms(d),ie;try{for(ne.s();!(ie=ne.n()).done;){var ve=ie.value;f[ve]=void 0}}catch(Xe){ne.e(Xe)}finally{ne.f()}d=[]}f[h]=z}else E||v.push(h),d.push(h)}if(!v.length){var ue=Object.values(f),pe;if(typeof o.jsonLogic=="function"){var me=o.jsonLogic,Ee=[f];pe=me.call.apply(me,[t.ctx].concat(Ee))}else{var Ie=o.jsonLogic||c,Ne=!!o.jsonLogicIsMethod;if(Ne){var Fe=ue[0],De=ue.slice(1);De.length?pe={method:[Fe,Ie,De]}:pe={method:[Fe,Ie]}}else pe=(0,Ae.A)({},Ie,ue)}return pe}},Cu=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=t.settings,u=i.fieldSeparator,o=i.jsonLogic,l;if(n){Array.isArray(n)&&(n=n.join(u));var c=He(t,n)||{},f=aa(n,t,e,r),d=c.jsonLogicVar||(c.type=="!group"?o.groupVarKey:"var");l=(0,Ae.A)({},d,f),e.usedFields.indexOf(n)==-1&&e.usedFields.push(n)}return l},zp=function(e,t,n,r){var i=e,u=ur(t.cardinality,1),o=ur(t._jsonLogicIsRevArgs,!1);typeof t.jsonLogic=="string"&&(i=t.jsonLogic);var l=["<","<=",">",">="],c=["==","!="],f=function(v,h,m,S,b){return u==0&&c.includes(i)?(0,Ae.A)({},i,[n,null]):u==0?(0,Ae.A)({},i,n):u==1&&o?(0,Ae.A)({},i,[r,n]):u==1?(0,Ae.A)({},i,[n,r]):u==2&&l.includes(i)?(0,Ae.A)({},i,[r[0],n,r[1]]):(0,Ae.A)({},i,[n].concat(Ge(r)))};return f},Fs=function(e,t,n,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=t.get("field"),f=Wt(e,i,c)||{},d=typeof f.jsonLogic=="function"?f.jsonLogic:zp(i,f,n,r),v=[n,i,r,Ct()(f,rn),u,o],h=d.call.apply(d,[e.ctx].concat(v));return l&&(h={"!":h}),h};function qp(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Kp(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Kp(a,e){if(a){if(typeof a=="string")return Es(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Es(a,e)}}function Es(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function Cs(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ts(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cs(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Cs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ws=function(e){return(0,ft.A)(e)=="object"&&e!==null&&!Array.isArray(e)},Hp=function(e,t){return Ls(e,t,!1)},Ls=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r={errors:[]},i=ia(t,void 0,!1),u=Tu([],e,i,r);return n?[u,r.errors]:(r.errors.length&&console.warn("Errors while exporting to MongoDb:",r.errors),u)},Tu=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(t){var c=t.get("type");if(c==="group"||c==="rule_group")return Jp(e,t,n,r,i,u,o,l);if(c==="rule")return Qp(e,t,n,r,i,u,o,l)}},Jp=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,c=t.get("type"),f=t.get("properties")||new Ot.Map,d=t.get("children1")||new Ot.List,v=n.settings,h=v.canShortMongoQuery,m=v.fieldSeparator,S=m,b=e.filter(function(me){return me.get("type")=="rule_group"}).length>0,E=e.filter(function(me){return me.get("type")=="rule_group"}).map(function(me){return me.get("properties").get("field")}).slice(-1).pop(),L=b&&E,_=c==="rule_group"?f.get("field"):null,T=aa(_,n,r,L),P=He(n,_)||{},N=P.mode,G=_&&N=="array",J=i?!f.get("not"):f.get("not"),W=d.map(function(me){return Tu([].concat(Ge(e),[t]),me,n,r,J,N!="array",N=="array"?function(Ee){return"$$el".concat(S).concat(Ee)}:void 0)}).filter(function(me){return typeof me<"u"});if(!(!G&&!W.size)){var B=f.get("conjunction");B||(B=Wn(n));var Q=n.conjunctions[B],se=Q.reversedConj;if(J&&se&&(B=se,Q=n.conjunctions[B]),!!Q){var z=Q.mongoConj,ne;if(W.size==1)ne=W.first();else if(W.size>1){var ie=W.toList().toJS(),ve=h&&z=="$and";ve&&(ne=ie.reduce(function(me,Ee){if(me){for(var Ie in Ee){if(Ie[0]=="$"){me=void 0;break}if(me[Ie]==null)me[Ie]=Ee[Ie];else{var Ne=me[Ie],Fe=Ee[Ie];ws(Ne)||(Ne={$eq:Ne}),ws(Fe)||(Fe={$eq:Fe});var De=Object.keys(Ne)[0],Xe=Object.keys(Fe)[0];if(De==Xe){me=void 0;break}me[Ie]=Object.assign({},Ne,Fe)}}return me}},{})),ne||(ne=(0,Ae.A)({},z,ie))}if(_)if(N=="array"){var ue={$size:{$ifNull:["$"+T,[]]}},pe=ne?{$size:{$ifNull:[{$filter:{input:"$"+T,as:"el",cond:ne}},[]]}}:ue;ne=Tu(e,t.set("type","rule"),n,r,!1,!1,function(me){return pe},ue),ne={$expr:ne}}else ne=(0,Ae.A)({},T,{$elemMatch:ne});return ne}}},Qp=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,c=t.get("properties")||new Ot.Map,f=e.filter(function(xe){return xe.get("type")=="rule_group"}).length>0,d=e.filter(function(xe){return xe.get("type")=="rule_group"}).map(function(xe){return xe.get("properties").get("field")}).slice(-1).pop(),v=f&&d,h=c.get("operator"),m=c.get("operatorOptions"),S=c.get("field"),b=c.get("fieldSrc"),E=c.get("value"),L=c.get("valueSrc"),_=c.get("valueType"),T=c.get("asyncListValues");if(!(S==null||h==null||E===void 0)){var P=He(n,S)||{},N=Wt(n,h,S)||{},G=N.reversedOp,J=Wt(n,G,S)||{},W=ur(N.cardinality,1),B=i;if(B&&G){var Q=[G,h];h=Q[0],G=Q[1];var se=[J,N];N=se[0],J=se[1],B=!1}var z,ne=!1;if(b=="func"){var ie=_s(r,n,S,v),ve=Ye(ie,2);z=ve[0],ne=ve[1]}else z=aa(S,n,r,v),o&&(ne=!0,z=o(z));if(z!=null){var ue=[],pe=[],me=E.map(function(xe,Ze){var ze=L?L.get(Ze):null,ht=_?_.get(Ze):null,Et=Ba(xe,ze,n),or=Zt(n,S,h,ze),Rr=Ct()($r(n,S,h,or,ze),["factory"]),pr=wu(r,n,Et,ze,ht,Rr,P,v,h,N,T),Sr=Ye(pr,2),Xr=Sr[0],Ar=Sr[1];return Xr!==void 0&&(ne=ne||Ar,ue.push(ze),pe.push(ht)),Xr}),Ee=ne&&u,Ie=me.filter(function(xe){return xe===void 0}).size>0;if(!(me.size<W||Ie)){var Ne=W>1?me.toArray():W==1?me.first():null,Fe=N.mongoFormatOp;if(!Fe){r.errors.push("Operator ".concat(h," is not supported"));return}var De=[z,h,l!==void 0&&Ne==null?l:Ne,ne,ue.length>1?ue:ue[0],pe.length>1?pe:pe[0],Ct()(N,rn),m,P],Xe=Fe.call.apply(Fe,[n.ctx].concat(De));return Ee&&(Xe={$expr:Xe}),B&&(Xe={$not:Xe}),Xe}}}},wu=function(e,t,n,r,i,u,o,l,c,f,d){if(n===void 0)return[void 0,!1];var v,h=!1;if(r=="field"){var m=Yp(e,t,n,l),S=Ye(m,2);v=S[0],h=S[1]}else if(r=="func"){var b=_s(e,t,n,l),E=Ye(b,2);v=E[0],h=E[1]}else if(typeof u.mongoFormatValue=="function"){var L=u.mongoFormatValue,_=[n,Ts(Ts({},gn()(o,["fieldSettings","listValues"])),{},{asyncListValues:d}),Ct()(u,Cn)];c&&(_.push(c),_.push(f)),v=L.call.apply(L,[t.ctx].concat(_))}else v=n;return[v,h]},Yp=function(e,t,n,r){var i=t.settings.fieldSeparator,u,o=!0;if(n){var l=He(t,n)||{},c=sr(n,t),f=qi(n,t),d=f?f.join(i):null,v=t.settings.formatField,h=aa(n,t,e,r),m=v(h,c,d,l,t,!1);u="$"+m}return[u,o]},_s=function(e,t,n,r){var i=!0,u,o=n.get("func"),l=n.get("args"),c=_r(t,o);if(!c)return e.errors.push("Func ".concat(o," is not defined in config")),[void 0,!1];var f=sr(o,t),d=f[f.length-1],v=c.mongoFunc||d,h=c.mongoArgsAsObject,m={},S=0,b=void 0,E=[],L=[];for(var _ in c.args){S++;var T=c.args[_],P=He(t,T),N=T.defaultValue,G=T.isOptional,J=N!=null&&N.func?"func":"value",W=l?l.get(_):void 0,B=W?W.get("value"):void 0,Q=W?W.get("valueSrc"):void 0,se=W?W.get("asyncListValues"):void 0,z=null,ne=Zt(t,T,z,Q),ie=Ct()($r(t,T,z,ne,Q),["factory"]),ve=wu(e,t,B,Q,T.type,ie,P,r,null,null,se),ue=Ye(ve,2),pe=ue[0],me=ue[1];if(B!=null&&pe===void 0)return Q!="func"&&e.errors.push("Can't format value of arg ".concat(_," for func ").concat(o)),[void 0,!1];var Ee=void 0;if(pe===void 0&&!G&&N!=null){var Ie=Zt(t,T,z,J),Ne=Ct()($r(t,T,z,Ie,J),["factory"]),Fe=void 0,De=wu(e,t,N,J,T.type,Ne,P,r,null,null,se),Xe=Ye(De,2);if(Ee=Xe[0],Fe=Xe[1],Ee===void 0)return J!="func"&&e.errors.push("Can't format default value of arg ".concat(_," for func ").concat(o)),[void 0,!1]}var xe=pe??Ee;if(xe!==void 0){if(E.length){var Ze=qp(E),ze;try{for(Ze.s();!(ze=Ze.n()).done;){var ht=ze.value;m[ht]=void 0}}catch(Rr){Ze.e(Rr)}finally{Ze.f()}E=[]}m[_]=xe,b=xe}else G||L.push(_),E.push(_)}if(L.length)return[void 0,!1];if(typeof c.mongoFormatFunc=="function"){var Et=c.mongoFormatFunc,or=[m];u=Et.call.apply(Et,[t.ctx].concat(or))}else{if(c.mongoFormatFunc===null)return e.errors.push("Functon ".concat(v," is not supported")),[void 0,!1];h?u=(0,Ae.A)({},v,m):S==1&&b!==void 0?u=(0,Ae.A)({},v,b):u=(0,Ae.A)({},v,Object.values(m))}return[u,i]};function Xp(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Zp(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Zp(a,e){if(a){if(typeof a=="string")return Rs(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Rs(a,e)}}function Rs(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function As(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ps(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?As(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):As(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ev=function(e,t){return Is(e,t,!1)},Is=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r={errors:[]},i=ia(t,void 0,!1),u=js(e,i,r);return n?[u,r.errors]:(r.errors.length&&console.warn("Errors while exporting to SQL:",r.errors),u)},js=function(e,t,n){if(e){var r=e.get("type"),i=e.get("children1");if(r==="group"||r==="rule_group")return tv(e,t,n);if(r==="rule")return nv(e,t,n)}},tv=function(e,t,n){var r=e.get("type"),i=e.get("properties")||new Ot.Map,u=e.get("children1")||new Ot.List,o=r==="rule_group",l=o?i.get("field"):null,c=He(t,l)||{},f=c.mode;f=="array"&&n.errors.push("Aggregation is not supported for ".concat(l));var d=i.get("not"),v=!1,h=u.map(function(b){return js(b,t,n)}).filter(function(b){return typeof b<"u"});if(!(!v&&!h.size)){var m=i.get("conjunction");m||(m=Wn(t));var S=t.conjunctions[m];return S.sqlFormatConj(h,m,d)}},rv=function(e,t){var n=t.sqlOp||e,r=ur(t.cardinality,1),i;return r==0?i=function(o,l,c,f,d,v,h,m){return"".concat(o," ").concat(n)}:r==1?i=function(o,l,c,f,d,v,h,m){return"".concat(o," ").concat(n," ").concat(c)}:r==2&&(i=function(o,l,c,f,d,v,h,m){var S=c.first(),b=c.get(1);return"".concat(o," ").concat(n," ").concat(S," AND ").concat(b)}),i},nv=function(e,t,n){var r=e.get("properties")||new Ot.Map,i=r.get("field"),u=r.get("fieldSrc"),o=r.get("operator"),l=r.get("operatorOptions"),c=r.get("valueSrc"),f=r.get("valueType"),d=r.get("value"),v=r.get("asyncListValues");if(!(i==null||o==null)){var h=He(t,i)||{},m=Wt(t,o,i)||{},S=m.reversedOp,b=Wt(t,S,i)||{},E=ur(m.cardinality,1),L=!1,_=m.sqlOp||m.sqlFormatOp,T=b.sqlOp||b.sqlFormatOp;if(!_&&!T){n.errors.push("Operator ".concat(o," is not supported"));return}if(!_&&T){L=!0;var P=[S,o];o=P[0],S=P[1];var N=[b,m];m=N[0],b=N[1]}var G=[],J=[],W=d.map(function(ve,ue){var pe=c?c.get(ue):null,me=f?f.get(ue):null,Ee=Ba(ve,pe,t),Ie=Zt(t,i,o,pe),Ne=Ct()($r(t,i,o,Ie,pe),["factory"]),Fe=Lu(n,t,Ee,pe,me,Ne,h,o,m,v);return Fe!==void 0&&(G.push(pe),J.push(me)),Fe}),B=W.filter(function(ve){return ve===void 0}).size>0;if(!(B||W.size<E)){var Q=E==1?W.first():W,se=m.sqlFormatOp||rv(o,m);if(!se){n.errors.push("Operator ".concat(o," is not supported"));return}var z=u=="func"?Vs(n,t,i):Ds(n,t,i);if(z!=null){var ne=[z,o,Q,G.length>1?G:G[0],J.length>1?J:J[0],Ct()(m,rn),l,h],ie;if(ie=se.call.apply(se,[t.ctx].concat(ne)),L&&(ie=t.settings.sqlFormatReverse(ie)),ie===void 0){n.errors.push("Operator ".concat(o," is not supported for value source ").concat(G.join(", ")));return}return ie}}}},Lu=function(e,t,n,r,i,u,o,l,c,f){if(n!==void 0){var d;if(r=="field")d=Ds(e,t,n);else if(r=="func")d=Vs(e,t,n);else if(typeof u.sqlFormatValue=="function"){var v=u.sqlFormatValue,h=[n,Ps(Ps({},gn()(o,["fieldSettings","listValues"])),{},{asyncListValues:f}),Ct()(u,Cn)];if(l&&(h.push(l),h.push(c)),r=="field"){var m=He(t,n)||{};h.push(m)}d=v.call.apply(v,[t.ctx].concat(h))}else Array.isArray(n)?d=n.map(function(S){return hr.escape(S)}):d=hr.escape(n);return d}},Ds=function(e,t,n){if(n){var r=t.settings.fieldSeparator,i=He(t,n)||{},u=sr(n,t),o=qi(n,t),l=o?o.join(r):null,c=t.settings.formatField,f=aa(n,t,e,null,{useTableName:!0}),d=c(f,u,l,i,t);return d}},Vs=function(e,t,n){var r=n.get("func"),i=n.get("args"),u=_r(t,r);if(!u){e.errors.push("Func ".concat(r," is not defined in config"));return}var o=sr(r,t),l=o[o.length-1],c=u.sqlFunc||l,f={},d=[],v=[];for(var h in u.args){var m=u.args[h],S=He(t,m),b=m.defaultValue,E=m.isOptional,L=b!=null&&b.func?"func":"value",_=i?i.get(h):void 0,T=_?_.get("value"):void 0,P=_?_.get("valueSrc"):void 0,N=_?_.get("asyncListValues"):void 0,G=Lu(e,t,T,P,m.type,S,m,null,null,N);if(T!=null&&G===void 0){P!="func"&&e.errors.push("Can't format value of arg ".concat(h," for func ").concat(r));return}var J=void 0;if(G===void 0&&!E&&b!=null&&(J=Lu(e,t,b,L,m.type,S,m,null,null,N),J===void 0)){L!="func"&&e.errors.push("Can't format default value of arg ".concat(h," for func ").concat(r));return}var W=G??J;if(W!==void 0){if(d.length){var B=Xp(h),Q;try{for(B.s();!(Q=B.n()).done;){var se=Q.value;f[se]=void 0}}catch(ue){B.e(ue)}finally{B.f()}d=[]}f[h]=W}else E||v.push(h),d.push(h)}if(!v.length){var z;if(typeof u.sqlFormatFunc=="function"){var ne=u.sqlFormatFunc,ie=[f];z=ne.call.apply(ne,[t.ctx].concat(ie))}else{var ve=Object.entries(f).map(function(ue){var pe=Ye(ue,2),me=pe[0],Ee=pe[1];return Ee}).join(", ");z="".concat(c,"(").concat(ve,")")}return z}};function av(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=iv(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function iv(a,e){if(a){if(typeof a=="string")return Ns(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ns(a,e)}}function Ns(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function xs(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ms(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xs(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):xs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ov=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r={errors:[]},i=ia(t,void 0,!1),u=ks(e,i,r,n,null);return r.errors.length&&console.warn("Errors while exporting to string:",r.errors),u},ks=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(e){var u=e.get("type"),o=e.get("children1");if(u==="group"||u==="rule_group")return uv(e,t,n,r,i);if(u==="rule")return Gs(e,t,n,r,i)}},uv=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=e.get("type"),o=e.get("properties")||new Ot.Map,l=o.get("mode"),c=e.get("children1")||new Ot.List,f=u==="rule_group",d=f&&l=="array"?o.get("field"):null,v=f&&l=="array",h=o.get("not"),m=c.map(function(G){return ks(G,t,n,r,d)}).filter(function(G){return typeof G<"u"});if(!(!v&&!m.size)){var S=o.get("conjunction");S||(S=Wn(t));var b=t.conjunctions[S],E=m.size?b.formatConj(m,S,h,r):null,L;if(d){var _=Gs(e,t,n,r,i,!0);if(_){var T,P=_.pop(),N=[E].concat(Ge(_));L=(T=t.settings).formatAggr.apply(T,Ge(N)),P&&(L=t.settings.formatReverse(L,null,null,null,null,r))}}else L=E;return L}},lv=function(e,t,n,r,i,u){var o=t.get("field"),l=t.get("valueSrc"),c=t.get("valueType"),f=He(e,o)||{},d=r||t.get("operator"),v=Wt(e,d,o)||{},h=ur(v.cardinality,1),m=t.get("value"),S=t.get("asyncListValues"),b=[],E=[],L;if(m!=null){var _=m.map(function(P,N){var G=l?l.get(N):null,J=c?c.get(N):null,W=Ba(P,G,e),B=Zt(e,o,d,G),Q=Ct()($r(e,o,d,B,G),["factory"]),se=_u(e,n,W,G,J,Q,f,d,v,i,u,S);return se!==void 0&&(b.push(G),E.push(J)),se}),T=_.filter(function(P){return P===void 0}).size>0;T||_.size<h||(L=h==1?_.first():_)}return[L,b.length>1?b:b[0],E.length>1?E:E[0]]},sv=function(e,t){var n=t.labelForFormat||e,r=ur(t.cardinality,1),i;return r==0?i=function(o,l,c,f,d,v,h,m){return"".concat(o," ").concat(n)}:r==1?i=function(o,l,c,f,d,v,h,m){return"".concat(o," ").concat(n," ").concat(c)}:r==2&&(i=function(o,l,c,f,d,v,h,m){var S=c.first(),b=c.get(1);return"".concat(o," ").concat(n," ").concat(S," AND ").concat(b)}),i},Gs=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=e.get("properties")||new Ot.Map,l=o.get("field"),c=o.get("fieldSrc"),f=o.get("operator"),d=o.get("operatorOptions");if(!(l==null||f==null)){var v=He(t,l)||{},h=Wt(t,f,l)||{},m=h.reversedOp,S=Wt(t,m,l)||{},b=!1,E=h.formatOp;if(!E&&m&&(E=S.formatOp,E)){b=!0;var L=[m,f];f=L[0],m=L[1];var _=[S,h];h=_[0],S=_[1]}if(E||(E=sv(f,h)),!!E){var T=c==="func"?Bs(t,n,l,r,i):$s(t,n,l,r,i);if(T!=null){var P=lv(t,o,n,f,r,i),N=Ye(P,3),G=N[0],J=N[1],W=N[2];if(G!==void 0){var B=[T,f,G,J,W,Ct()(h,rn),d,r,v,b];if(u)return B;var Q,se=(Q=E).call.apply(Q,[t.ctx].concat(B));return b&&(se=t.settings.formatReverse(se,f,m,h,S,r)),se}}}}},_u=function(e,t,n,r,i,u,o,l,c,f){var d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,v=arguments.length>11?arguments[11]:void 0;if(n!==void 0){var h;if(r=="field")h=$s(e,t,n,f,d);else if(r=="func")h=Bs(e,t,n,f,d);else if(typeof u.formatValue=="function"){var m=u.formatValue,S=[n,Ms(Ms({},gn()(o,["fieldSettings","listValues"])),{},{asyncListValues:v}),Ct()(u,Cn),f];if(l&&(S.push(l),S.push(c)),r=="field"){var b=He(e,n)||{};S.push(b)}h=m.call.apply(m,[e.ctx].concat(S))}else h=n;return h}},$s=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=e.settings,l=o.fieldSeparator,c=o.fieldSeparatorDisplay,f=null;if(n){var d=He(e,n)||{},v=sr(n,e),h=qi(n,e,u?i:null),m=h?h.join(c):null,S=d.label2||m,b=e.settings.formatField,E=aa(n,e,t,u?i:null,{useTableName:!0});f=b(E,v,S,d,e,r)}return f},Bs=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=n.get("func"),o=n.get("args"),l=_r(e,u);if(!l){t.errors.push("Func ".concat(u," is not defined in config"));return}var c=sr(u,e),f=c[c.length-1],d=r&&l.label||f,v={},h=[],m=[],S={};for(var b in l.args){var E=l.args[b],L=He(e,E),_=E.defaultValue,T=E.isOptional,P=_!=null&&_.func?"func":"value",N=r&&E.label||b,G=o?o.get(b):void 0,J=G?G.get("value"):void 0,W=G?G.get("valueSrc"):void 0,B=G?G.get("asyncListValues"):void 0,Q=_u(e,t,J,W,E.type,L,E,null,null,r,i,B);if(J!=null&&Q===void 0){W!="func"&&t.errors.push("Can't format value of arg ".concat(b," for func ").concat(u));return}var se=void 0;if(Q===void 0&&!T&&_!=null&&(se=_u(e,t,_,P,E.type,L,E,null,null,r,i,B),se===void 0)){P!="func"&&t.errors.push("Can't format default value of arg ".concat(b," for func ").concat(u));return}var z=Q??se;if(z!==void 0){if(h.length){var ne=av(b),ie;try{for(ne.s();!(ie=ne.n()).done;){var ve=Ye(ie.value,2),ue=ve[0],pe=ve[1];v[ue]=void 0}}catch(Fe){ne.e(Fe)}finally{ne.f()}h=[]}v[b]=z,S[N]=z}else T||m.push(b),h.push([b,N])}if(!m.length){var me=null;if(typeof l.formatFunc=="function"){var Ee=l.formatFunc,Ie=[v,r];me=Ee.call.apply(Ee,[e.ctx].concat(Ie))}else{var Ne=Object.entries(r?S:v).map(function(Fe){var De=Ye(Fe,2),Xe=De[0],xe=De[1];return r?"".concat(Xe,": ").concat(xe):"".concat(xe)}).join(", ");me="".concat(d,"(").concat(Ne,")")}return me}};function Ws(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Us(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ws(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ws(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function cv(a){if(a==null)return null;var e=a.split(",").map(Number);return{top_left:{lat:e[0],lon:e[1]},bottom_right:{lat:e[2],lon:e[3]}}}function fv(a,e){if(a.length>1)return{gte:"".concat(a[0]),lte:"".concat(a[1])};var t=a[0];switch(e){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(t,"||/d"),lte:"".concat(t,"||+1d")};case"less_or_equal":return{lte:"".concat(t)};case"greater_or_equal":return{gte:"".concat(t)};case"less":return{lt:"".concat(t)};case"greater":return{gt:"".concat(t)};default:return}}function dv(a){return{value:"*"+a+"*"}}function pv(a,e){switch(a){case"AND":return e?"must_not":"must";case"OR":return e?"should_not":"should";case"NOT":return e?"must":"must_not";default:return}}function vv(a){return{value:a}}function gv(a,e){return a}function hv(a,e,t,n,r,i){var u=gv(n,r);switch(a){case"filter":return{script:r.operators[t].elasticSearchScript(n,e)};case"exists":return{field:n};case"match":return(0,Ae.A)({},u,e[0]);case"term":return i===qs?(0,Ae.A)({},n,{value:e[0]}):(0,Ae.A)({},n,e[0]);case"geo_bounding_box":return(0,Ae.A)({},n,cv(e[0]));case"range":return(0,Ae.A)({},n,fv(e,t));case"wildcard":return(0,Ae.A)({},n,dv(e[0]));case"regexp":return(0,Ae.A)({},n,vv(e[0]));default:return}}function zs(a,e,t,n,r,i){if(!(!a||!t||e==null)){var u=t,o=n.operators[u];if(o){var l=o,c=l.elasticSearchQueryType,f=!1;if(!c&&o.reversedOp){f=!0,u=o.reversedOp,o=n.operators[u];var d=o;c=d.elasticSearchQueryType}var v=Zt(n,a,u,r),h=n.widgets[v];if(h){var m=h.elasticSearchFormatValue,S;if(typeof c=="function"?S=c(v):S=c,!!S){var b;return typeof m=="function"?b=m(S,e,u,a,n):b=hv(S,e,u,a,n,i),f?{bool:{must_not:(0,Ae.A)({},S,Us({},b))}}:(0,Ae.A)({},S,Us({},b))}}}}}function mv(a,e,t,n,r,i){if(!(!a||!a.size)){var u=a.valueSeq().toArray(),o=pv(e,t),l=u.map(function(f){return n(f,r,i)}).filter(function(f){return f!==void 0});if(l.length){var c=l.flat(1/0);return{bool:(0,Ae.A)({},o,c)}}}}var qs="ES_7_SYNTAX",Ks="ES_6_SYNTAX";function Hs(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ks;if(a){var n=a.get("type"),r=a.get("properties")||new Map;if(n==="rule"&&r.get("field")){var i,u,o=r.get("operator"),l=r.get("field"),c=r.get("fieldSrc"),f=r.get("value").toJS(),d=(i=r.get("valueType"))===null||i===void 0?void 0:i.get(0),v=(u=r.get("valueSrc"))===null||u===void 0?void 0:u.get(0);return v==="func"||c=="func"?void 0:f&&Array.isArray(f[0])?f[0].map(function(b){return zs(l,[b],o,e,v,t)}):zs(l,f,o,e,v,t)}if(n==="group"||n==="rule_group"){var h=r.get("not"),m=r.get("conjunction");m||(m=Wn(e));var S=a.get("children1");return mv(S,m,h,Hs,e,t)}}}var yv=O(53986);function Js(a,e,t,n,r,i,u){try{var o=a[i](u),l=o.value}catch(c){t(c);return}o.done?e(l):Promise.resolve(l).then(n,r)}function Sv(a){return function(){var e=this,t=arguments;return new Promise(function(n,r){var i=a.apply(e,t);function u(l){Js(i,n,r,u,o,"next",l)}function o(l){Js(i,n,r,u,o,"throw",l)}u(void 0)})}}var Ov=["title","value","disabled","groupTitle","grouplabel","renderTitle","children","label","isCustom","isHidden"];function bv(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Fv(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Fv(a,e){if(a){if(typeof a=="string")return Qs(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qs(a,e)}}function Qs(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function Ys(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ca(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ys(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ys(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Ev=function(e,t){if(e.findLastIndex)return e.findLastIndex(t);var n=Ge(e).reverse().findIndex(t);return n==-1?-1:e.length-1-n},Cv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var r=Sv(vn().mark(function i(u,o,l){var c,f,d,v,h,m,S,b;return vn().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(c=l?.pageSize!=null?l.pageSize:t,f=gr(e).filter(function(_){var T=_.title,P=_.value;return u==null?!0:T.toUpperCase().indexOf(u.toUpperCase())!=-1||"".concat(P).toUpperCase().indexOf(u.toUpperCase())!=-1}),d=c?Math.ceil(f.length/c):0,v=o||0,h=c?Math.ceil(v/c):null,m=c?f.slice(v,v+c):f,S=c?v+m.length:null,b=c?S<f.length:!1,!n){L.next=11;break}return L.next=11,ra(n);case 11:return L.abrupt("return",{values:m,hasMore:b});case 12:case"end":return L.stop()}},i)}));return function(i,u,o){return r.apply(this,arguments)}}()},Tv=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!t)return e;var i=e||[],u=t.filter(function(l){return i.find(function(c){return""+c.value==""+l.value})==null}).map(function(l){return r?Ca(Ca({},l),{},{isHidden:!0}):l}),o=n?[].concat(Ge(u),Ge(i)):[].concat(Ge(i),Ge(u));return o},wv=function(e,t,n){var r,i=e==null||e==""?void 0:(r=e?.value)!==null&&r!==void 0?r:e,u=Sa(i,t),o=n&&!u?Vr(i):void 0,l=u||o,c=l?[l]:void 0;return[i,c]},Lv=function(e,t,n){var r=e.map(function(u,o){var l,c=u==null||u==""?void 0:(l=u?.value)!==null&&l!==void 0?l:u,f=Sa(c,t),d=n&&!f?Vr(c):void 0,v=f||d;return v}).filter(function(u){return u!=null}),i=r.map(function(u){var o;return(o=u?.value)!==null&&o!==void 0?o:u});return i.length||(i=void 0),[i,r]},_v=function(e){if(e==null)return null;var t=e.title,n=e.value,r=e.disabled,i=e.groupTitle,u=e.grouplabel,o=e.renderTitle,l=e.children,c=e.label,f=e.isCustom,d=e.isHidden,v=(0,yv.A)(e,Ov),h={value:n,title:t||c||l};return r&&(h.disabled=r),f&&(h.isCustom=f),d&&(h.isHidden=d),(i||u)&&(h.groupTitle=i||u),o&&(h.renderTitle=o),h=Ca(Ca({},h),v),h},Rv=function(e){var t=[],n=[],r=bv(e),i;try{var u=function(){var l=i.value,c=Ev(t,function(f){var d,v;return((d=f.groupTitle)!==null&&d!==void 0?d:"")==((v=l.groupTitle)!==null&&v!==void 0?v:"")});l.groupTitle!=null&&!n.includes(l.groupTitle)&&(n.push(l.groupTitle),n.length===1&&(t=t.map(function(f){return Ca(Ca({},f),{},{groupTitle:""})}))),l.groupTitle==null&&n.length&&(l=Ca(Ca({},l),{},{groupTitle:""})),c!=-1?t.splice(c+1,0,l):t.push(l)};for(r.s();!(i=r.n()).done;)u()}catch(o){r.e(o)}finally{r.f()}return t},Av={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:{}},spelFunc:"T(java.time.LocalDateTime).now()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}},Pv={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],spelFormatFunc:function(e){var t=e.date,n=e.op,r=e.val,i=e.dim,u=i.charAt(0).toUpperCase()+i.slice(1)+"s",o=n+u;return"".concat(t,".").concat(o,"(").concat(r,")")},spelImport:function(e){var t,n,r,i,u,o=(t=e.methodName)===null||t===void 0?void 0:t.match(/^(minus|plus)(\w+)s$/);if(o&&(u=o[2].toLowerCase(),r=o[1],["minus","plus"].includes(r)&&["day","week","month","year"].includes(u)))return r={type:"string",val:r},u={type:"string",val:u},i=e.args[0],n=e.obj,{date:n,op:r,val:i,dim:u}},jsonLogic:function(e){var t=e.date,n=e.op,r=e.val,i=e.dim;return{date_add:[t,r*(n=="minus"?-1:1),i]}},jsonLogicImport:function(e){var t=e.date_add[0],n=Math.abs(e.date_add[1]),r=e.date_add[1]>=0?"plus":"minus",i=e.date_add[2];return[t,r,n,i]},jsonLogicCustomOps:{date_add:{}},sqlFormatFunc:function(e){var t=e.date,n=e.op,r=e.val,i=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(r)*(n=="minus"?-1:1)," ").concat(i.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,n=e.op,r=e.val,i=e.dim;return r?"".concat(t," ").concat(n=="minus"?"-":"+"," ").concat(r," ").concat(i):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field","value"],spelEscapeForFormat:!0},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}},spelEscapeForFormat:!1},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"],spelEscapeForFormat:!1},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}},spelEscapeForFormat:!1}}},Iv={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:"${str}.toLowerCase()",jsonLogicCustomOps:{toLowerCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},jv={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:"${str}.toUpperCase()",jsonLogicCustomOps:{toUpperCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},Dv={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var n=e.coef,r=e.bias,i=e.val;return"(".concat(n," * ").concat(i," + ").concat(r,")")},sqlFormatFunc:function(e){var t=e.coef,n=e.bias,r=e.val;return"(".concat(t," * ").concat(r," + ").concat(n,")")},spelFormatFunc:function(e){var t=e.coef,n=e.bias,r=e.val;return"(".concat(t," * ").concat(r," + ").concat(n,")")},spelImport:function(e){var t,n,r,i;if(e.type==="op-plus"){var u=Ye(e.children,2);if(i=u[0],r=u[1],i.type==="op-multiply"){var o=Ye(i.children,2);return t=o[0],n=o[1],{coef:t,val:n,bias:r}}}},mongoFormatFunc:function(e){var t=e.coef,n=e.bias,r=e.val;return{$sum:[{$multiply:[t,r]},n]}},jsonLogic:function(e){var t=e.coef,n=e.bias,r=e.val;return{"+":[{"*":[t,r]},n]}},jsonLogicImport:function(e){var t=e["+"][0]["*"][0],n=e["+"][0]["*"][1],r=e["+"][1];return[t,n,r]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}},Vv=function(e,t,n,r,i,u,o,l,c,f,d,v){var h=typeof r=="string"&&!r.startsWith("$")?"$"+r:r,m=t(u,v);if(m!==void 0)return n?!o&&(!e||e=="$eq")?(0,Ae.A)({},r,{$ne:m}):o?{$not:(0,Ae.A)({},e,[h,m])}:(0,Ae.A)({},r,{$not:(0,Ae.A)({},e,m)}):!o&&(!e||e=="$eq")?(0,Ae.A)({},r,m):o?(0,Ae.A)({},e,[h,m]):(0,Ae.A)({},r,(0,Ae.A)({},e,m))},Nv=function(e,t,n,r,i,u,o,l,c,f,d){var v=typeof n=="string"&&!n.startsWith("$")?"$"+n:n;if(t){var h;return u?{$not:{$and:[(0,Ae.A)({},e[0],[v,i[0]]),(0,Ae.A)({},e[1],[v,i[1]])]}}:(0,Ae.A)({},n,{$not:(h={},(0,Ae.A)(h,e[0],i[0]),(0,Ae.A)(h,e[1],i[1]),h)})}else{var m;return u?{$and:[(0,Ae.A)({},e[0],[v,i[0]]),(0,Ae.A)({},e[1],[v,i[1]])]}:(0,Ae.A)({},n,(m={},(0,Ae.A)(m,e[0],i[0]),(0,Ae.A)(m,e[1],i[1]),m))}},xv={utils:{SqlString:hr,moment:Ft(),mongoFormatOp1:Vv,mongoFormatOp2:Nv,mongoEmptyValue:ka,escapeRegExp:Va,sqlEmptyValue:ln,stringifyForDisplay:ll,getTitleInListValues:Ni,spelEscape:di,spelFixList:ul}};const Mv=xv;function kv(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Gv(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Gv(a,e){if(a){if(typeof a=="string")return Xs(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xs(a,e)}}function Xs(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function Zs(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function jt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zs(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Zs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var $v={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,n,r){return e.size>1?(n?"NOT ":"")+"("+e.join(" "+(r?"AND":"&&")+" ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},sqlFormatConj:function(e,t,n){return e.size>1?(n?"NOT ":"")+"("+e.join(" AND ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},spelFormatConj:function(e,t,n,r){return n&&(r=!1),e.size>1?(n?"!":"")+(r?"":"(")+e.join(" && ")+(r?"":")"):(n?"!(":"")+e.first()+(n?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,n,r){return e.size>1?(n?"NOT ":"")+"("+e.join(" "+(r?"OR":"||")+" ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},sqlFormatConj:function(e,t,n){return e.size>1?(n?"NOT ":"")+"("+e.join(" OR ")+")":(n?"NOT (":"")+e.first()+(n?")":"")},spelFormatConj:function(e,t,n,r){return n&&(r=!1),e.size>1?(n?"!":"")+(r?"":"(")+e.join(" || ")+(r?"":")"):(n?"!(":"")+e.first()+(n?")":"")}}},Bv={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,n,r,i,u,o,l,c){var f=l?"=":u.label;return i=="boolean"&&l?n=="No"?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(f," ").concat(n)},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,n,r,i,u,o,l,c){return i=="boolean"&&l?n=="No"?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(u.label," ").concat(n)},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$lt",function(i){return i},!1].concat(n))},jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$lte",function(i){return i},!1].concat(n))},jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(i){return i},!1].concat(n))},jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$gte",function(i){return i},!1].concat(n))},jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:"${0}.contains(${1})",valueTypes:["text"],mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?t.utils.escapeRegExp(u):void 0},!1].concat(r))},jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?t.utils.escapeRegExp(u):void 0},!0].concat(r))},valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:"${0}.startsWith(${1})",mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?"^"+t.utils.escapeRegExp(u):void 0},!1].concat(r))},jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:"${0}.endsWith(${1})",mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(u){return typeof u=="string"?t.utils.escapeRegExp(u)+"$":void 0},!1].concat(r))},jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,n,r,i,u,o,l){var c=n.first(),f=n.get(1);return l?"".concat(e," BETWEEN ").concat(c," AND ").concat(f):"".concat(e," >= ").concat(c," && ").concat(e," <= ").concat(f)},spelFormatOp:function(e,t,n,r,i,u,o,l){var c=n[0],f=n[1];return"".concat(e," >= ").concat(c," && ").concat(e," <= ").concat(f)},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!1].concat(n))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return e[0]!=null&&e[1]!=null?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return e==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,n,r,i,u,o,l){var c=n.first(),f=n.get(1);return l?"".concat(e," NOT BETWEEN ").concat(c," AND ").concat(f):"(".concat(e," < ").concat(c," || ").concat(e," > ").concat(f,")")},spelFormatOp:function(e,t,n,r,i,u,o,l){var c=n[0],f=n[1];return"(".concat(e," < ").concat(c," || ").concat(e," > ").concat(f,")")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!0].concat(n))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return e[0]!=null&&e[1]!=null?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,n,r,i,u,o,l){return l?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,n,r,i,u,o,l){var c=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(c,") = ").concat(c)},spelFormatOp:function(e,t,n,r,i,u,o,l){return"".concat(e," <= ''")},mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(u,o){return[t.utils.mongoEmptyValue(o),null]},!1].concat(r))},jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,n,r,i,u,o,l){return l?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,n,r,i,u,o,l){var c=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(c,") <> ").concat(c)},spelFormatOp:function(e,t,n,r,i,u,o,l){return"".concat(e," > ''")},mongoFormatOp:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(u,o){return[t.utils.mongoEmptyValue(o),null]},!1].concat(r))},jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,n,r,i,u,o,l){return l?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,n,r,i,u,o,l){return"".concat(e," == null")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return null},!1].concat(n))},jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,n,r,i,u,o,l){return l?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,n,r,i,u,o,l){return"".concat(e," != null")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return null},!1].concat(n))},jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,n,r,i,u,o,l){var c=l?"=":"==";return"".concat(e," ").concat(c," ").concat(n)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,n,r,i,u,o,l){return"".concat(e," != ").concat(n)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,n,r,i,u,o,l){return r=="value"?"".concat(e," IN (").concat(n.join(", "),")"):"".concat(e," IN (").concat(n,")")},sqlFormatOp:function(e,t,n,r,i,u,o,l){if(r=="value")return"".concat(e," IN (").concat(n.join(", "),")")},valueTypes:["multiselect"],spelOp:"${1}.contains(${0})",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(i){return i},!1].concat(n))},reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,n,r,i,u,o,l){return r=="value"?"".concat(e," NOT IN (").concat(n.join(", "),")"):"".concat(e," NOT IN (").concat(n,")")},sqlFormatOp:function(e,t,n,r,i,u,o,l){if(r=="value")return"".concat(e," NOT IN (").concat(n.join(", "),")")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(i){return i},!1].concat(n))},reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,t,n,r,i,u,o,l){return r=="value"?"".concat(e," CONTAINS [").concat(n.join(", "),"]"):"".concat(e," CONTAINS ").concat(n)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,t,n){return{some:[e,{in:[{var:""},n]}]}},spelOp:"T(CollectionUtils).containsAny(${0}, ${1})",elasticSearchQueryType:"term",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(i){return i},!1].concat(n))}},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,t,n,r,i,u,o,l){return r=="value"?"".concat(e," NOT CONTAINS [").concat(n.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(n)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,n,r,i,u,o,l){var c=l?"=":"==";return r=="value"?"".concat(e," ").concat(c," [").concat(n.join(", "),"]"):"".concat(e," ").concat(c," ").concat(n)},sqlFormatOp:function(e,t,n,r,i,u,o,l){var c=this;if(r=="value")return"".concat(e," = '").concat(n.map(function(f){return c.utils.SqlString.trim(f)}).join(","),"'")},spelOp:"${0}.equals(${1})",mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))},reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,n){return{all:[e,{in:[{var:""},n]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,n,r,i,u,o,l){return r=="value"?"".concat(e," != [").concat(n.join(", "),"]"):"".concat(e," != ").concat(n)},sqlFormatOp:function(e,t,n,r,i,u,o,l){var c=this;if(r=="value")return"".concat(e," != '").concat(n.map(function(f){return c.utils.SqlString.trim(f)}).join(","),"'")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(i){return i},!1].concat(n))},reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,n,r,i,u,o,l){var c=n.first(),f=n.get(1),d=o.get("proximity");return"".concat(e," ").concat(c," NEAR/").concat(d," ").concat(f)},sqlFormatOp:function(e,t,n,r,i,u,o,l){var c=n.first(),f=n.get(1),d=this.utils.SqlString.trim(c),v=this.utils.SqlString.trim(f),h=o.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(d,", ").concat(v,"), ").concat(h,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(i){return 0},!1].concat(n))}},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,n){return"".concat(e," == ").concat(n)},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return i},!1].concat(n))}},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(i){return 0},!1].concat(n))}}},Wv={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",formatValue:function(e,t,n,r){return r?this.utils.stringifyForDisplay(e):JSON.stringify(e)},spelFormatValue:function(e,t,n,r,i){return this.utils.spelEscape(e)},sqlFormatValue:function(e,t,n,r,i){return i.sqlOp=="LIKE"||i.sqlOp=="NOT LIKE"?this.utils.SqlString.escapeLike(e,r!="starts_with",r!="ends_with"):this.utils.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",formatValue:function(e,t,n,r){return r?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){return i.sqlOp=="LIKE"||i.sqlOp=="NOT LIKE"?this.utils.SqlString.escapeLike(e,r!="starts_with",r!="ends_with"):this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,n,r){return r?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,n){var r=n.step&&!Number.isInteger(n.step);return this.utils.spelEscape(e,r)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,n,r){return r?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},select:{type:"select",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,n,r){var i=this.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e);return r?this.utils.stringifyForDisplay(i):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,n,r){var i=this,u=e.map(function(o){return i.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,o)});return r?u.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,n,r,i){var u=this;return e.map(function(o){return u.utils.SqlString.escape(o)})},spelFormatValue:function(e,t,n,r,i){var u=i.spelOp&&i.spelOp.startsWith("${1}"),o=this.utils.spelEscape(e);return u&&(o=this.utils.spelFixList(o)),o},toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},date:{type:"date",jsType:"string",valueSrc:"value",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,n,r){var i=this.utils.moment(e,n.valueFormat);return r?i.format(n.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat),o=u.format("YYYY-MM-DD"),l="yyyy-MM-dd";return"T(java.time.LocalDate).parse('".concat(o,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat(l,"'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDate"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,n){var r,i,u,o;if(!t)return[void 0,"No widget def to get value format"];if(n!=null&&(r=n.fmt)!==null&&r!==void 0&&(r=r.value)!==null&&r!==void 0&&(i=r.includes)!==null&&i!==void 0&&i.call(r," ")||(u=n.fmt)!==null&&u!==void 0&&(u=u.value)!==null&&u!==void 0&&(o=u.toLowerCase)!==null&&o!==void 0&&o.call(u).includes("hh:mm"))return[void 0,"Invalid date format ".concat(JSON.stringify(n.fmt))];var l=this.utils.moment(e.value,this.utils.moment.ISO_8601);return l.isValid()?[l.format(t?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,n){return this.utils.moment(e,n.valueFormat).toDate()},toJS:function(e,t){var n=this.utils.moment(e,t.valueFormat);return n.isValid()?n.toDate():void 0},mongoFormatValue:function(e,t,n){var r=this.utils.moment(e,n.valueFormat);return r.isValid()?r.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,n,r){var i=this.utils.moment(e,n.valueFormat);return r?i.format(n.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.format("HH:mm:ss"))},spelFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat),o="HH:mm:ss",l=u.format("HH:mm:ss");return"T(java.time.LocalTime).parse('".concat(l,"')")},spelImportFuncs:["T(java.time.LocalTime).parse(${v})"],spelImportValue:function(e,t,n){var r,i,u;if(!t)return[void 0,"No widget def to get value format"];if(n!=null&&n.fmt&&(!((r=n.fmt)!==null&&r!==void 0&&(r=r.value)!==null&&r!==void 0&&(i=r.toLowerCase)!==null&&i!==void 0&&i.call(r).includes("hh:mm"))||(u=n.fmt)!==null&&u!==void 0&&(u=u.value)!==null&&u!==void 0&&u.includes(" ")))return[void 0,"Invalid time format ".concat(JSON.stringify(n.fmt))];var o=this.utils.moment(e.value,"HH:mm:ss");return o.isValid()?[o.format(t?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,n){var r=this.utils.moment(e,n.valueFormat);return r.get("hour")*60*60+r.get("minute")*60+r.get("second")},toJS:function(e,t){var n=this.utils.moment(e,t.valueFormat);return n.isValid()?n.get("hour")*60*60+n.get("minute")*60+n.get("second"):void 0},mongoFormatValue:function(e,t,n){var r=this.utils.moment(e,n.valueFormat);return r.get("hour")*60*60+r.get("minute")*60+r.get("second")},elasticSearchFormatValue:function(e,t,n,r){return{script:{script:{source:"doc[".concat(r,"][0].getHour() >== params.min && doc[").concat(r,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,n,r){var i=this.utils.moment(e,n.valueFormat);return r?i.format(n.dateFormat+" "+n.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat);return this.utils.SqlString.escape(u.toDate())},spelFormatValue:function(e,t,n,r,i){var u=this.utils.moment(e,n.valueFormat),o=u.format("YYYY-MM-DD HH:mm:ss"),l="yyyy-MM-dd HH:mm:ss";return"T(java.time.LocalDateTime).parse('".concat(o,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat(l,"'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDateTime"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,n){var r,i;if(!t)return[void 0,"No widget def to get value format"];if(!(n!=null&&(r=n.fmt)!==null&&r!==void 0&&(r=r.value)!==null&&r!==void 0&&(i=r.includes)!==null&&i!==void 0&&i.call(r," ")))return[void 0,"Invalid datetime format ".concat(JSON.stringify(n.fmt))];var u=this.utils.moment(e.value,this.utils.moment.ISO_8601);return u.isValid()?[u.format(t?.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,n){return this.utils.moment(e,n.valueFormat).toDate()},toJS:function(e,t){var n=this.utils.moment(e,t.valueFormat);return n.isValid()?n.toDate():void 0},mongoFormatValue:function(e,t,n){var r=this.utils.moment(e,n.valueFormat);return r.isValid()?r.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",labelYes:"Yes",labelNo:"No",formatValue:function(e,t,n,r){return r?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,n,r,i){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,n,r,i){return this.utils.spelEscape(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,n){return e}},field:{valueSrc:"field",formatValue:function(e,t,n,r,i,u,o){return r&&o.label||e},sqlFormatValue:function(e,t,n,r,i,u){return e},spelFormatValue:function(e,t,n,r,i){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare"},func:{valueSrc:"func",valueLabel:"Function",valuePlaceholder:"Select function"},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return this.utils.spelEscape(e===""?null:e)},spelImportValue:function(e){return[e.value,[]]}}},Uv={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"]},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},zv=jt(jt({},ji),{},{convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},formatSpelField:function(e,t,n,r,i,u){var o=this,l=r.map(function(c,f){var d=c.key,v=c.parent,h=c.fieldSeparator;return f==0?v=="[map]"?"#this[".concat(o.utils.spelEscape(d),"]"):(v=="[class]",d):v=="map"||v=="[map]"?"[".concat(o.utils.spelEscape(d),"]"):(v=="class"||v=="[class]","".concat(h).concat(d))}).join("");return i.fieldName&&(l=e),i.isSpelVariable&&(l="#"+l),l},sqlFormatReverse:function(e){if(e!=null)return"NOT("+e+")"},spelFormatReverse:function(e){if(e!=null)return"!("+e+")"},formatReverse:function(e,t,n,r,i,u){if(e!=null)return u?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,t,n,r,i,u,o,l,c,f){var d=o.labelForFormat,v=o.cardinality;if(v==0){var h=e?" HAVE ".concat(e):"";return"".concat(d," OF ").concat(t).concat(h)}else if(v==null||v==1){var m=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(m," ").concat(d," ").concat(r)}else if(v==2){var S=e?" WHERE ".concat(e):"",b=r.first(),E=r.get(1);return"COUNT OF ".concat(t).concat(S," ").concat(d," ").concat(b," AND ").concat(E)}},jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"},canCompareFieldWithField:function(e,t,n,r){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}}}),ec=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r={rangeslider:Hv,treeselect:Jv,treemultiselect:Qv,rangeable__date:Kv("date","date")},i=kv(t),u;try{for(i.s();!(u=i.n()).done;){var o=u.value,l=r[o];if(l)e=l(e,n);else throw new Error("Can't ".concat(n?"add":"remove"," mixin ").concat(o))}}catch(c){i.e(c)}finally{i.f()}return e},tc=function(e,t){return ec(e,t,!0)},qv=function(e,t){return ec(e,t,!1)},Kv=function(e,t){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=n.types;return i=jt(jt({},i),{},(0,Ae.A)({},e,jt(jt({},i[e]),{},{widgets:jt({},i[e].widgets)}))),r?i[e].widgets[t]=jt({opProps:{between:{isSpecialRange:!0,textSeparators:[null,null]},not_between:{isSpecialRange:!0,textSeparators:[null,null]}}},i[e].widgets[t]):delete i[e].widgets[t],jt(jt({},n),{},{types:i})}},Hv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,r=e.types;return n=jt({},n),t?n.rangeslider=jt({type:"number",jsType:"number",valueSrc:"value",valueLabel:"Range",valuePlaceholder:"Select range",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(u,o,l,c){return c?this.utils.stringifyForDisplay(u):JSON.stringify(u)},sqlFormatValue:function(u,o,l,c,f){return this.utils.SqlString.escape(u)},spelFormatValue:function(u){return this.utils.spelEscape(u)},singleWidget:"slider",toJS:function(u,o){return u}},n.rangeslider):delete n.rangeslider,r=jt(jt({},r),{},{number:jt(jt({},r.number),{},{widgets:jt({},r.number.widgets)})}),t?r.number.widgets.rangeslider=jt({opProps:{between:{isSpecialRange:!0},not_between:{isSpecialRange:!0}},operators:["between","not_between","is_null","is_not_null"]},r.number.widgets.rangeslider):delete r.number.widgets.rangeslider,jt(jt({},e),{},{widgets:n,types:r})},Jv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,r=e.types;return n=jt({},n),t?n.treeselect=jt({type:"treeselect",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(u,o,l,c){var f=o.fieldSettings.treeValues||o.fieldSettings.listValues||o.asyncListValues,d=this.utils.getTitleInListValues(f,u);return c?this.utils.stringifyForDisplay(d):JSON.stringify(u)},sqlFormatValue:function(u,o,l,c,f){return this.utils.SqlString.escape(u)},spelFormatValue:function(u){return this.utils.spelEscape(u)},toJS:function(u,o){return u}},n.treeselect):delete n.treeselect,r=jt({},r),t?r.treeselect=jt({mainWidget:"treeselect",defaultOperator:"select_equals",widgets:{treeselect:{operators:["select_equals","select_not_equals"]},treemultiselect:{operators:["select_any_in","select_not_any_in"]}}},r.treeselect):delete r.treeselect,jt(jt({},e),{},{widgets:n,types:r})},Qv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=e.widgets,r=e.types;return n=jt({},n),t?n.treemultiselect=jt({type:"treemultiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(u,o,l,c){var f=this,d=o.fieldSettings.treeValues||o.fieldSettings.listValues||o.asyncListValues,v=u.map(function(h){return f.utils.getTitleInListValues(d,h)});return c?v.map(this.utils.stringifyForDisplay):u.map(JSON.stringify)},sqlFormatValue:function(u,o,l,c,f){var d=this;return u.map(function(v){return d.utils.SqlString.escape(v)})},spelFormatValue:function(u){return this.utils.spelEscape(u)},toJS:function(u,o){return u}},n.treemultiselect):delete n.treemultiselect,r=jt({},r),t?r.treemultiselect=jt({defaultOperator:"multiselect_equals",widgets:{treemultiselect:{operators:["multiselect_equals","multiselect_not_equals"]}}},r.treemultiselect):delete r.treemultiselect,jt(jt({},e),{},{widgets:n,types:r})},Yv={addMixins:tc,removeMixins:qv},Ru={conjunctions:$v,operators:Bv,widgets:Wv,types:Uv,settings:zv,ctx:Mv};Ru=tc(Ru,["rangeslider","treeselect","treemultiselect"]);const ir=Ru;var rc="ADD_GROUP",Au="ADD_CASE_GROUP",nc="REMOVE_GROUP",ac="SET_CONJUNCTION",ic="SET_NOT",oc="ADD_RULE",uc="REMOVE_RULE",lc="SET_FIELD",sc="SET_FIELD_SRC",cc="SET_OPERATOR",fc="SET_VALUE",dc="SET_VALUE_SRC",pc="SET_OPERATOR_OPTION",vc="SET_LOCK",Pu="SET_TREE",gc="MOVE_ITEM",hc="after",mc="before",Iu="append",ju="prepend",yc="SET_DRAG_PROGRESS",Sc="SET_DRAG_START",Oc="SET_DRAG_END",Xv=O(73916),Ro=O.n(Xv);function bc(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Zv(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Zv(a,e){if(a){if(typeof a=="string")return Fc(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fc(a,e)}}function Fc(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function Ec(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Un(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ec(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ec(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Cc=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},c=u.settings.shouldCreateEmptyGroup,f=t.push(r),d=!c,v=!!(l!=null&&l.isDefaultCase),h=e;return e=Wa(e,t,n,r,Fa(u).merge(i||{}),u,o),e!==h&&(!o&&!v&&(e=e.setIn(Pe(f,"children1"),new(Ke()).OrderedMap),d&&(e=Wa(e,f,"rule",Tt(),Bn(u),u))),e=mn(e)),e},eg=function(e,t,n){e=Du(e,t);var r=n.settings.canLeaveEmptyGroup,i=t.slice(0,-1),u=!ci(e,i);if(u&&!r&&(e=Oa(e),tr(e)&&!r)){var o=!1,l=!1;e=Wa(e,new(Ke()).List,"rule",Tt(),Bn(n,void 0,void 0,o,l),n)}return e=mn(e),e},tg=function(e,t,n){e=Du(e,t);var r=n.settings.canLeaveEmptyGroup,i=t.pop(),u=e.getIn(Pe(i)),o=u.getIn(["properties","field"]),l=u.getIn(["properties","operator"]),c=u.getIn(["properties","value",0]),f=o?He(n,o):null,d=l?Wt(n,l,o):null,v=o&&l&&d.cardinality!=0,h=u.get("type")=="rule_group",m=!ci(e,i),S=h?v&&f.initialEmptyWhere:r;if(m&&!S&&(h&&(e=e.deleteIn(Pe(i))),e=Oa(e),tr(e)&&!r)){var b=!1,E=!1;e=Wa(e,new(Ke()).List,"rule",Tt(),Bn(n,void 0,void 0,b,E),n)}return e=mn(e),e},rg=function(e,t,n){return e.setIn(Pe(t,"properties","not"),n)},ng=function(e,t,n){return Mi(e.setIn(Pe(t,"properties","isLocked"),n))},ag=function(e,t,n){return e.setIn(Pe(t,"properties","conjunction"),n)},ig=function a(e,t,n){n&&Array.isArray(n)&&(t.children1=new(Ke()).OrderedMap(n.reduce(function(r,i){var u=Tt(),o=Un(Un({},i),{},{properties:jl(e,i).merge(i.properties||{}),id:u});return a(e,o,o.children1),Un(Un({},r),{},(0,Ae.A)({},u,new(Ke()).Map(o)))},{})))},Wa=function(e,t,n,r,i,u){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(n=="switch_group")throw new Error("Can't add switch_group programmatically");var l=u.settings,c=l.maxNumberOfCases,f=l.maxNumberOfRules,d=l.maxNesting,v=e.get("type"),h=v=="switch_group",m=e.getIn(Pe(t)),S=h?e.getIn(Pe(t.take(2))):null,b=Pe(t,"children1"),E=e.getIn(b),L=!!E&&E.size,_=L?E.size:null,T,P;n=="case_group"?(T=_,P=c):n=="group"?(T=t.size,P=d):m?.get("type")=="rule_group"||(T=ba(h?S:e),P=f);var N=P&&T?T<P:!0,G={type:n,id:r,properties:i};ig(u,G,o);var J=n=="case_group"&&L&&E.last().get("children1")==null;if(N){var W=new(Ke()).OrderedMap((0,Ae.A)({},r,new(Ke()).Map(G)));if(!L)e=e.setIn(b,W);else if(J){var B,Q=E.last(),se=new(Ke()).OrderedMap((B={},(0,Ae.A)(B,r,new(Ke()).Map(G)),(0,Ae.A)(B,Q.get("id"),Q),B));e=e.deleteIn(Pe(b,"children1",Q.get("id"))),e=e.mergeIn(b,se)}else e=e.mergeIn(b,W);e=mn(e)}return e},Du=function(e,t){return e=e.deleteIn(Pe(t)),e=mn(e),e},og=function(e,t,n,r,i){var u=na(e,t),o=t.pop(),l=t.size>1?na(e,o):null,c=l?l.get("children1"):null,f=na(e,n),d=r==Iu||r==ju?n:n.pop(),v=r==Iu||r==ju?f:n.size>1?na(e,d):null,h=v?v.get("children1"):null;if(!l||!v||!u)return e;var m=l.get("id")==v.get("id"),S=d.size<o.size&&nn(d.toArray(),o.toArray().slice(0,d.size)),b=d.size>o.size&&nn(o.toArray(),d.toArray().slice(0,o.size)),E=null,L=null;S?E=Ke().List(o.toArray().slice(d.size)):b&&(L=Ke().List(d.toArray().slice(o.size)));var _=h,T=c;return b||(T=T.delete(u.get("id"))),m?_=T:S&&(_=_.updateIn(Nr(E,"children1"),function(P){return T})),r==mc||r==hc?_=Ke().OrderedMap().withMutations(function(P){var N=bc(_.entries()),G;try{for(N.s();!(G=N.n()).done;){var J=Ye(G.value,2),W=J[0],B=J[1];W==f.get("id")&&r==mc&&P.set(u.get("id"),u),P.set(W,B),W==f.get("id")&&r==hc&&P.set(u.get("id"),u)}}catch(Q){N.e(Q)}finally{N.f()}}):r==Iu?_=_.merge((0,Ae.A)({},u.get("id"),u)):r==ju&&(_=Ke().OrderedMap((0,Ae.A)({},u.get("id"),u)).merge(_)),b&&(T=T.updateIn(Nr(L,"children1"),function(P){return _}),T=T.delete(u.get("id"))),!m&&!S&&(e=e.updateIn(Pe(o,"children1"),function(P){return T})),b||(e=e.updateIn(Pe(d,"children1"),function(P){return _})),e=mn(e),e},ug=function(e,t,n,r){var i=r.settings.keepInputOnChangeFieldSrc,u=e.getIn(Pe(t)),o=u.get("type"),l=u.get("properties"),c=l.get("field"),f=l.get("fieldType"),d=He(r,c),v=d?.type||f;(!v||v==="!group"||v==="!struct")&&(v=null);var h=!Co.includes(v),m=i&&!du(u,r,!0)&&h;return m?(e=e.setIn(Pe(t,"properties","field"),null),e=e.setIn(Pe(t,"properties","fieldType"),v)):e=e.setIn(Pe(t,"properties"),Bn(r,null,null,!1)),e=e.setIn(Pe(t,"properties","fieldSrc"),n),e},lg=function(e,t,n,r,i,u){var o,l;if(!n)return{tree:Du(e,t),isInternalValueChange:l};var c=r.settings,f=c.fieldSeparator,d=c.setOpOnChangeField,v=c.showErrorMessage,h=c.keepInputOnChangeFieldSrc;Array.isArray(n)&&(n=n.join(f));var m=e.getIn(Pe(t,"type")),S=e.getIn(Pe(t,"properties")),b=m=="rule_group",E=S.get("fieldSrc"),L=He(r,n);if(!L)return console.warn("No config for LHS ".concat(n)),{tree:e,isInternalValueChange:l};var _=L.type;(_==="!group"||_==="!struct")&&(_=null);var T=S.get("operator"),P=S.get("operatorOptions"),N=S.get("field"),G=S.get("value"),J=S.get("valueSrc",new(Ke()).List),W=S.get("valueType",new(Ke()).List),B=L.type=="!group",Q=B&&L.mode=="array",se=b!=B,z=!N&&E&&T,ne=L&&((o=L.operators)===null||o===void 0?void 0:o.indexOf(T))!==-1?T:null,ie=null,ve=E==="func"?Gl(r,_):To(r,n);if(ve&&ve.length==1)ie=ve[0];else if(ve&&ve.length>1){var ue=bc(d||[]),pe;try{for(ue.s();!(pe=ue.n()).done;){var me=pe.value;if(me=="keep"&&!se?ie=ne:me=="default"?ie=uu(r,n,!1):me=="first"&&(ie=cu(r,n)),ie)break}}catch(Ze){ue.e(Ze)}finally{ue.f()}}if(!B&&!L.operators)return console.warn("Type ".concat(L.type," is not supported")),{tree:e,isInternalValueChange:l};if(b&&!B&&(e=e.setIn(Pe(t,"type"),"rule"),e=e.deleteIn(Pe(t,"children1")),e=e.setIn(Pe(t,"properties"),new(Ke()).OrderedMap)),B){e=e.setIn(Pe(t,"type"),"rule_group");var Ee=Ga(r,r,S,n,ie,"field",!0),Ie=Ee.canReuseValue,Ne=Ee.newValue,Fe=Ee.newValueSrc,De=Ee.newValueType,Xe=Ee.operatorCardinality,xe=Fa(r,L).merge({field:n,fieldSrc:"field",mode:L.mode});Q&&(xe=xe.merge({operator:ie,value:Ne,valueSrc:Fe,valueType:De})),e=e.setIn(Pe(t,"children1"),new(Ke()).OrderedMap),e=e.setIn(Pe(t,"properties"),xe),L.initialEmptyWhere&&Xe==1||(e=Wa(e,t,"rule",Tt(),Bn(r,n),r)),e=mn(e)}else e=e.updateIn(Pe(t,"properties"),function(Ze){return Ze.withMutations(function(ze){var ht=Ga(r,r,ze,n,ie,"field",!0),Et=ht.canReuseValue,or=ht.newValue,Rr=ht.newValueSrc,pr=ht.newValueType,Sr=ht.newValueError;v&&(ze=ze.set("valueError",Sr));var Xr=Et?P:zi(r,ie,n);return l=u,ze.set("field",n).delete("fieldType").set("fieldSrc",E).set("operator",ie).set("operatorOptions",Xr).set("value",or).set("valueSrc",Rr).set("valueType",pr).delete("asyncListValues")})});return{tree:e,isInternalValueChange:l}},sg=function(e,t,n,r){var i=r.settings.showErrorMessage,u=e.getIn(Pe(t,"properties")),o=e.getIn(Pe(t,"children1")),l=u.get("field"),c=u.get("fieldSrc"),f=He(r,l),d=f?.type=="!group",v=Wt(r,n,l),h=v?ur(v.cardinality,1):null;return e=e.updateIn(Pe(t,"properties"),function(m){return m.withMutations(function(S){var b=S.get("field"),E=S.get("operatorOptions"),L=S.get("value",new(Ke()).List),_=S.get("valueSrc",new(Ke()).List),T=S.get("operator"),P=Ga(r,r,S,b,n,"operator",!0),N=P.canReuseValue,G=P.newValue,J=P.newValueSrc,W=P.newValueType,B=P.newValueError;i&&(S=S.set("valueError",B));var Q=N?E:zi(r,n,b);return N||(S=S.delete("asyncListValues")),S.set("operator",n).set("operatorOptions",Q).set("value",G).set("valueSrc",J).set("valueType",W)})}),d&&h==0&&o.size==0&&(e=Wa(e,t,"rule",Tt(),Bn(r,l),r)),e},cg=function(e,t,n,r,i,u,o,l){var c=u.settings,f=c.fieldSeparator,d=c.showErrorMessage,v,h=e.getIn(Pe(t,"properties","valueSrc",n+""))||null;h==="field"&&Array.isArray(r)&&(r=r.join(f));var m=e.getIn(Pe(t,"properties","field"))||null,S=e.getIn(Pe(t,"properties","operator"))||null,b=Wt(u,S,m),E=S?ur(b.cardinality,1):null,L=!1,_=i||vg(r,h,u),T=!1,P=Fo(u,m,m,S,r,_,h,o,T,L,!0),N=Ye(P,2),G=N[0],J=N[1],W=!G;if(J!==r&&(r=J),d){var B=Zt(u,m,S,h),Q=$r(u,m,S,B,h),se=Array.from({length:E},function(Ie,Ne){return e.getIn(Pe(t,"properties","valueSrc",Ne+""))||null});if(b&&b.validateValues&&se.filter(function(Ie){return Ie=="value"||Ie==null}).length==E){var z=Array.from({length:E},function(Ie,Ne){return Ne==n?r:e.getIn(Pe(t,"properties","value",Ne+""))||null}),ne=Q&&Q.toJS?z.map(function(Ie){return Q.toJS.call(u.ctx,Ie,Q)}):z,ie=b.validateValues(ne);e=e.setIn(Pe(t,"properties","valueError",E),ie)}}var ve=e.getIn(Pe(t,"properties","value"));ve||(e=e.setIn(Pe(t,"properties","value"),new(Ke()).List(new Array(E))).setIn(Pe(t,"properties","valueType"),new(Ke()).List(new Array(E))).setIn(Pe(t,"properties","valueError"),new(Ke()).List(new Array(E))));var ue=e.getIn(Pe(t,"properties","value",n+"")),pe=e.getIn(Pe(t,"properties","valueError",n)),me=ue==null,Ee=!!pe;return(W||d)&&(e=e.deleteIn(Pe(t,"properties","asyncListValues")),typeof r>"u"?(e=e.setIn(Pe(t,"properties","value",n+""),void 0),e=e.setIn(Pe(t,"properties","valueType",n+""),null)):(o&&(e=e.setIn(Pe(t,"properties","asyncListValues"),o)),e=e.setIn(Pe(t,"properties","value",n+""),r),e=e.setIn(Pe(t,"properties","valueType",n+""),_),v=l&&!me&&!Ee)),d&&(e=e.setIn(Pe(t,"properties","valueError",n),G)),l&&(W&&Ee||!W&&!Ee)&&(e=e.setIn(Pe(t,"properties","valueError",n),G),v=!1),{tree:e,isInternalValueChange:v}},fg=function(e,t,n,r,i){var u=i.settings.showErrorMessage,o=e.getIn(Pe(t,"properties","field"))||null,l=e.getIn(Pe(t,"properties","fieldSrc"))||null,c=e.getIn(Pe(t,"properties","operator"))||null;if(e=e.setIn(Pe(t,"properties","value",n+""),void 0),e=e.setIn(Pe(t,"properties","valueType",n+""),null),e=e.deleteIn(Pe(t,"properties","asyncListValues")),u){e=e.setIn(Pe(t,"properties","valueError",n),null);var f=Wt(i,c,o),d=c?ur(f.cardinality,1):null;f.validateValues&&(e=e.setIn(Pe(t,"properties","valueError",d),null))}if(typeof r>"u"?e=e.setIn(Pe(t,"properties","valueSrc",n+""),null):e=e.setIn(Pe(t,"properties","valueSrc",n+""),r),r){var v=e.getIn(Pe(t,"properties")),h=Ga(i,i,v,o,c,"valueSrc",!0),m=h.canReuseValue,S=h.newValue,b=h.newValueSrc,E=h.newValueType,L=h.newValueError;!m&&b.get(n)==r&&(e=e.setIn(Pe(t,"properties","value",n+""),S.get(n)),e=e.setIn(Pe(t,"properties","valueType",n+""),E.get(n)))}return e},dg=function(e,t,n,r){return e.setIn(Pe(t,"properties","operatorOptions",n),r)},pg=function(e,t){var n=t.settings.canLeaveEmptyGroup;return n||(e=Oa(e)),e},vg=function(e,t,n){var r=null;if(e){if(t==="field"){var i=He(n,e);i&&(r=i.type)}else if(t==="func"){var u=e.get("func");if(u){var o=_r(n,u);o&&(r=o.returnType)}}}return r},gg=function(e,t){var n=e.getIn(Pe(t,"properties","field"))||null;return n},Tc={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},hg=function(e,t){if(!e||!e.type)return null;var n=["config","asyncListValues","__isInternal"],r=[Pu,Sc,yc,Oc],i=Ro()(Ct()(e,n),ii),u=e.path&&gg(t.tree,e.path)||e.field;if(u){var o;(o=u)!==null&&o!==void 0&&o.toJS&&(u=u.toJS()),i.affectedField=u}return(r.includes(e.type)||e.type.indexOf("@@redux")==0)&&(i=null),i};const mg=function(a,e,t,n){var r=e,i=Un({tree:r},Tc);return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i,o=arguments.length>1?arguments[1]:void 0,l={__isInternalValueChange:void 0,__lastAction:void 0},c={},f=hg(o,u);switch(o?.type){case Pu:{var d=t(o.config,o.tree);c.tree=d;break}case Au:{c.tree=Cc(u.tree,o.path,"case_group",o.id,o.properties,o.config,o.children,o.meta);break}case rc:{c.tree=Cc(u.tree,o.path,"group",o.id,o.properties,o.config,o.children,o.meta);break}case nc:{c.tree=eg(u.tree,o.path,o.config);break}case oc:{c.tree=Wa(u.tree,o.path,o.ruleType,o.id,o.properties,o.config,o.children);break}case uc:{c.tree=tg(u.tree,o.path,o.config);break}case ac:{c.tree=ag(u.tree,o.path,o.conjunction);break}case ic:{c.tree=rg(u.tree,o.path,o.not);break}case lc:{var v=lg(u.tree,o.path,o.field,o.config,o.asyncListValues,o.__isInternal),h=v.tree,m=v.isInternalValueChange;c.__isInternalValueChange=m,c.tree=h;break}case sc:{c.tree=ug(u.tree,o.path,o.srcKey,o.config);break}case vc:{c.tree=ng(u.tree,o.path,o.lock);break}case cc:{c.tree=sg(u.tree,o.path,o.operator,o.config);break}case fc:{var S=cg(u.tree,o.path,o.delta,o.value,o.valueType,o.config,o.asyncListValues,o.__isInternal),b=S.tree,E=S.isInternalValueChange;c.__isInternalValueChange=E,c.tree=b;break}case dc:{c.tree=fg(u.tree,o.path,o.delta,o.srcKey,o.config);break}case pc:{c.tree=dg(u.tree,o.path,o.name,o.value);break}case gc:{c.tree=og(u.tree,o.fromPath,o.toPath,o.placement,o.config);break}case Sc:{c.dragStart=o.dragStart,c.dragging=o.dragging,c.mousePos=o.mousePos;break}case yc:{c.mousePos=o.mousePos,c.dragging=o.dragging;break}case Oc:{c.tree=pg(u.tree,a),c=Un(Un({},c),Tc);break}default:break}return f&&(c.__lastAction=f),n&&c.tree&&u.tree&&n(u.tree),Un(Un(Un({},u),l),c)}};var yg=function(e,t){return{type:Pu,tree:t,config:e}},Sg=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null;return{type:oc,ruleType:r,children:i,path:ar(t),id:Tt(),properties:Bn(e,u).merge(n||{}),config:e}},Og=function(e,t){return{type:uc,path:ar(t),config:e}},bg=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:Au,path:ar(t),children:r,id:Tt(),properties:Fa(e).merge(n||{}),config:e,meta:{isDefaultCase:!0}}},Fg=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:Au,path:ar(t),children:r,id:Tt(),properties:Fa(e).merge(n||{}),config:e}},Eg=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:rc,path:ar(t),children:r,id:Tt(),properties:Fa(e).merge(n||{}),config:e}},Cg=function(e,t){return{type:nc,path:ar(t),config:e}},Tg=function(e,t,n,r){return{type:gc,fromPath:ar(t),toPath:ar(n),placement:r,config:e}},wg=function(e,t,n){return{type:ac,path:ar(t),conjunction:n}},Lg=function(e,t,n){return{type:ic,path:ar(t),not:n}},_g=function(e,t,n){return{type:vc,path:ar(t),lock:n}},Rg=function(e,t,n,r,i){return{type:lc,path:ar(t),field:n,config:e,asyncListValues:r,__isInternal:i}},Ag=function(e,t,n){return{type:sc,path:ar(t),srcKey:n,config:e}},Pg=function(e,t,n){return{type:cc,path:ar(t),operator:n,config:e}},Ig=function(e,t,n,r,i,u,o){return{type:fc,path:ar(t),delta:n,value:r,valueType:i,asyncListValues:u,config:e,__isInternal:o}},jg=function(e,t,n,r){return{type:dc,path:ar(t),delta:n,srcKey:r,config:e}},Dg=function(e,t,n,r){return{type:pc,path:ar(t),name:n,value:r,config:e}};function wc(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Ao(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wc(Object(t),!0).forEach(function(n){(0,Ae.A)(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):wc(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var vt=Ao(Ao(Ao(Ao({},re),q),K),{},{ConfigMixins:Yv}),Vg=O(5556),x=O.n(Vg);const Ng=mg,Hi=g.createContext();var xg=O(23546),Lc=g.createContext(null);const PO=null;function Mg(a){a()}var _c=Mg,kg=function(e){return _c=e},Gg=function(){return _c};function $g(){var a=Gg(),e=null,t=null;return{clear:function(){e=null,t=null},notify:function(){a(function(){for(var r=e;r;)r.callback(),r=r.next})},get:function(){for(var r=[],i=e;i;)r.push(i),i=i.next;return r},subscribe:function(r){var i=!0,u=t={callback:r,next:null,prev:t};return u.prev?u.prev.next=u:e=u,function(){!i||e===null||(i=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var Rc={notify:function(){},get:function(){return[]}};function Ac(a,e){var t,n=Rc;function r(d){return l(),n.subscribe(d)}function i(){n.notify()}function u(){f.onStateChange&&f.onStateChange()}function o(){return!!t}function l(){t||(t=e?e.addNestedSub(u):a.subscribe(u),n=$g())}function c(){t&&(t(),t=void 0,n.clear(),n=Rc)}var f={addNestedSub:r,notifyNestedSubs:i,handleChangeWrapper:u,isSubscribed:o,trySubscribe:l,tryUnsubscribe:c,getListeners:function(){return n}};return f}var Pc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect;function Bg(a){var e=a.store,t=a.context,n=a.children,r=(0,g.useMemo)(function(){var o=Ac(e);return{store:e,subscription:o}},[e]),i=(0,g.useMemo)(function(){return e.getState()},[e]);Pc(function(){var o=r.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),i!==e.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[r,i]);var u=t||Lc;return g.createElement(u.Provider,{value:r},n)}const Wg=Bg;function bt(){return bt=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},bt.apply(this,arguments)}function Ji(a,e){if(a==null)return{};var t={},n=Object.keys(a),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=a[r]);return t}var Ug=O(4146),Ic=O.n(Ug),zg=O(10636),qg=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Kg=["reactReduxForwardedRef"],Hg=[],Jg=[null,null],IO=function(e){try{return JSON.stringify(e)}catch{return String(e)}};function Qg(a,e){var t=a[1];return[e.payload,t+1]}function jc(a,e,t){Pc(function(){return a.apply(void 0,e)},t)}function Yg(a,e,t,n,r,i,u){a.current=n,e.current=r,t.current=!1,i.current&&(i.current=null,u())}function Xg(a,e,t,n,r,i,u,o,l,c){if(a){var f=!1,d=null,v=function(){if(!f){var S=e.getState(),b,E;try{b=n(S,r.current)}catch(L){E=L,d=L}E||(d=null),b===i.current?u.current||l():(i.current=b,o.current=b,u.current=!0,c({type:"STORE_UPDATED",payload:{error:E}}))}};t.onStateChange=v,t.trySubscribe(),v();var h=function(){if(f=!0,t.tryUnsubscribe(),t.onStateChange=null,d)throw d};return h}}var Zg=function(){return[null,0]};function eh(a,e){e===void 0&&(e={});var t=e,n=t.getDisplayName,r=n===void 0?function(N){return"ConnectAdvanced("+N+")"}:n,i=t.methodName,u=i===void 0?"connectAdvanced":i,o=t.renderCountProp,l=o===void 0?void 0:o,c=t.shouldHandleStateChanges,f=c===void 0?!0:c,d=t.storeKey,v=d===void 0?"store":d,h=t.withRef,m=h===void 0?!1:h,S=t.forwardRef,b=S===void 0?!1:S,E=t.context,L=E===void 0?Lc:E,_=Ji(t,qg);if(0)var T;var P=L;return function(G){var J=G.displayName||G.name||"Component",W=r(J),B=bt({},_,{getDisplayName:r,methodName:u,renderCountProp:l,shouldHandleStateChanges:f,storeKey:v,displayName:W,wrappedComponentName:J,WrappedComponent:G}),Q=_.pure;function se(ue){return a(ue.dispatch,B)}var z=Q?g.useMemo:function(ue){return ue()};function ne(ue){var pe=(0,g.useMemo)(function(){var Kr=ue.reactReduxForwardedRef,Hr=Ji(ue,Kg);return[ue.context,Kr,Hr]},[ue]),me=pe[0],Ee=pe[1],Ie=pe[2],Ne=(0,g.useMemo)(function(){return me&&me.Consumer&&(0,zg.isContextConsumer)(g.createElement(me.Consumer,null))?me:P},[me,P]),Fe=(0,g.useContext)(Ne),De=!!ue.store&&!!ue.store.getState&&!!ue.store.dispatch,Xe=!!Fe&&!!Fe.store,xe=De?ue.store:Fe.store,Ze=(0,g.useMemo)(function(){return se(xe)},[xe]),ze=(0,g.useMemo)(function(){if(!f)return Jg;var Kr=Ac(xe,De?null:Fe.subscription),Hr=Kr.notifyNestedSubs.bind(Kr);return[Kr,Hr]},[xe,De,Fe]),ht=ze[0],Et=ze[1],or=(0,g.useMemo)(function(){return De?Fe:bt({},Fe,{subscription:ht})},[De,Fe,ht]),Rr=(0,g.useReducer)(Qg,Hg,Zg),pr=Rr[0],Sr=pr[0],Xr=Rr[1];if(Sr&&Sr.error)throw Sr.error;var Ar=(0,g.useRef)(),er=(0,g.useRef)(Ie),wt=(0,g.useRef)(),rr=(0,g.useRef)(!1),sn=z(function(){return wt.current&&Ie===er.current?wt.current:Ze(xe.getState(),Ie)},[xe,Sr,Ie]);jc(Yg,[er,Ar,rr,Ie,sn,wt,Et]),jc(Xg,[f,xe,ht,Ze,er,Ar,rr,wt,Et,Xr],[xe,ht,Ze]);var _n=(0,g.useMemo)(function(){return g.createElement(G,bt({},sn,{ref:Ee}))},[Ee,G,sn]),Kn=(0,g.useMemo)(function(){return f?g.createElement(Ne.Provider,{value:or},_n):_n},[Ne,_n,or]);return Kn}var ie=Q?g.memo(ne):ne;if(ie.WrappedComponent=G,ie.displayName=ne.displayName=W,b){var ve=g.forwardRef(function(pe,me){return g.createElement(ie,bt({},pe,{reactReduxForwardedRef:me}))});return ve.displayName=W,ve.WrappedComponent=G,Ic()(ve,G)}return Ic()(ie,G)}}function Dc(a,e){return a===e?a!==0||e!==0||1/a===1/e:a!==a&&e!==e}function Vu(a,e){if(Dc(a,e))return!0;if(typeof a!="object"||a===null||typeof e!="object"||e===null)return!1;var t=Object.keys(a),n=Object.keys(e);if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Dc(a[t[r]],e[t[r]]))return!1;return!0}function th(a,e){var t={},n=function(u){var o=a[u];typeof o=="function"&&(t[u]=function(){return e(o.apply(void 0,arguments))})};for(var r in a)n(r);return t}function Nu(a){return function(t,n){var r=a(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Vc(a){return a.dependsOnOwnProps!==null&&a.dependsOnOwnProps!==void 0?!!a.dependsOnOwnProps:a.length!==1}function Nc(a,e){return function(n,r){var i=r.displayName,u=function(l,c){return u.dependsOnOwnProps?u.mapToProps(l,c):u.mapToProps(l)};return u.dependsOnOwnProps=!0,u.mapToProps=function(l,c){u.mapToProps=a,u.dependsOnOwnProps=Vc(a);var f=u(l,c);return typeof f=="function"&&(u.mapToProps=f,u.dependsOnOwnProps=Vc(f),f=u(l,c)),f},u}}function rh(a){return typeof a=="function"?Nc(a,"mapDispatchToProps"):void 0}function nh(a){return a?void 0:Nu(function(e){return{dispatch:e}})}function ah(a){return a&&typeof a=="object"?Nu(function(e){return th(a,e)}):void 0}const ih=[rh,nh,ah];function oh(a){return typeof a=="function"?Nc(a,"mapStateToProps"):void 0}function uh(a){return a?void 0:Nu(function(){return{}})}const lh=[oh,uh];function sh(a,e,t){return bt({},t,a,e)}function ch(a){return function(t,n){var r=n.displayName,i=n.pure,u=n.areMergedPropsEqual,o=!1,l;return function(f,d,v){var h=a(f,d,v);return o?(!i||!u(h,l))&&(l=h):(o=!0,l=h),l}}}function fh(a){return typeof a=="function"?ch(a):void 0}function dh(a){return a?void 0:function(){return sh}}const ph=[fh,dh];var vh=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function gh(a,e,t,n){return function(i,u){return t(a(i,u),e(n,u),u)}}function hh(a,e,t,n,r){var i=r.areStatesEqual,u=r.areOwnPropsEqual,o=r.areStatePropsEqual,l=!1,c,f,d,v,h;function m(_,T){return c=_,f=T,d=a(c,f),v=e(n,f),h=t(d,v,f),l=!0,h}function S(){return d=a(c,f),e.dependsOnOwnProps&&(v=e(n,f)),h=t(d,v,f),h}function b(){return a.dependsOnOwnProps&&(d=a(c,f)),e.dependsOnOwnProps&&(v=e(n,f)),h=t(d,v,f),h}function E(){var _=a(c,f),T=!o(_,d);return d=_,T&&(h=t(d,v,f)),h}function L(_,T){var P=!u(T,f),N=!i(_,c);return c=_,f=T,P&&N?S():P?b():N?E():h}return function(T,P){return l?L(T,P):m(T,P)}}function mh(a,e){var t=e.initMapStateToProps,n=e.initMapDispatchToProps,r=e.initMergeProps,i=Ji(e,vh),u=t(a,i),o=n(a,i),l=r(a,i),c=i.pure?hh:gh;return c(u,o,l,a,i)}var yh=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function xu(a,e,t){for(var n=e.length-1;n>=0;n--){var r=e[n](a);if(r)return r}return function(i,u){throw new Error("Invalid value of type "+typeof a+" for "+t+" argument when connecting component "+u.wrappedComponentName+".")}}function Sh(a,e){return a===e}function Oh(a){var e=a===void 0?{}:a,t=e.connectHOC,n=t===void 0?eh:t,r=e.mapStateToPropsFactories,i=r===void 0?lh:r,u=e.mapDispatchToPropsFactories,o=u===void 0?ih:u,l=e.mergePropsFactories,c=l===void 0?ph:l,f=e.selectorFactory,d=f===void 0?mh:f;return function(h,m,S,b){b===void 0&&(b={});var E=b,L=E.pure,_=L===void 0?!0:L,T=E.areStatesEqual,P=T===void 0?Sh:T,N=E.areOwnPropsEqual,G=N===void 0?Vu:N,J=E.areStatePropsEqual,W=J===void 0?Vu:J,B=E.areMergedPropsEqual,Q=B===void 0?Vu:B,se=Ji(E,yh),z=xu(h,i,"mapStateToProps"),ne=xu(m,o,"mapDispatchToProps"),ie=xu(S,c,"mergeProps");return n(d,bt({methodName:"connect",getDisplayName:function(ue){return"Connect("+ue+")"},shouldHandleStateChanges:!!h,initMapStateToProps:z,initMapDispatchToProps:ne,initMergeProps:ie,pure:_,areStatesEqual:P,areOwnPropsEqual:G,areStatePropsEqual:W,areMergedPropsEqual:Q},se))}}const Po=Oh();function jO(){var a=useContext(ReactReduxContext);return a}function DO(a){a===void 0&&(a=ReactReduxContext);var e=a===ReactReduxContext?useDefaultReduxContext:function(){return useContext(a)};return function(){var n=e(),r=n.store;return r}}var VO=null;function NO(a){a===void 0&&(a=ReactReduxContext);var e=a===ReactReduxContext?useDefaultStore:createStoreHook(a);return function(){var n=e();return n.dispatch}}var xO=null,bh=function(e,t){return e===t};function Fh(a,e,t,n){var r=useReducer(function(m){return m+1},0),i=r[1],u=useMemo(function(){return createSubscription(t,n)},[t,n]),o=useRef(),l=useRef(),c=useRef(),f=useRef(),d=t.getState(),v;try{if(a!==l.current||d!==c.current||o.current){var h=a(d);f.current===void 0||!e(h,f.current)?v=h:v=f.current}else v=f.current}catch(m){throw o.current&&(m.message+=`
The error may be correlated with this previous error:
`+o.current.stack+`

`),m}return useIsomorphicLayoutEffect(function(){l.current=a,c.current=d,f.current=v,o.current=void 0}),useIsomorphicLayoutEffect(function(){function m(){try{var S=t.getState();if(S===c.current)return;var b=l.current(S);if(e(b,f.current))return;f.current=b,c.current=S}catch(E){o.current=E}i()}return u.onStateChange=m,u.trySubscribe(),m(),function(){return u.tryUnsubscribe()}},[t,u]),v}function MO(a){a===void 0&&(a=ReactReduxContext);var e=a===ReactReduxContext?useDefaultReduxContext:function(){return useContext(a)};return function(n,r){r===void 0&&(r=bh);var i=e(),u=i.store,o=i.subscription,l=Fh(n,r,u,o);return useDebugValue(l),l}}var kO=null,Eh=O(40961);kg(Eh.unstable_batchedUpdates);var GO="ADD_GROUP",$O="ADD_CASE_GROUP",BO="REMOVE_GROUP",WO="SET_CONJUNCTION",UO="SET_NOT",zO="ADD_RULE",qO="REMOVE_RULE",KO="SET_FIELD",HO="SET_FIELD_SRC",JO="SET_OPERATOR",QO="SET_VALUE",YO="SET_VALUE_SRC",XO="SET_OPERATOR_OPTION",ZO="SET_LOCK",eb="SET_TREE",tb="MOVE_ITEM",Io="after",jo="before",Ua="append",mi="prepend",Ch="SET_DRAG_PROGRESS",Th="SET_DRAG_START",wh="SET_DRAG_END",Lh=function(e,t){return{type:Ch,mousePos:e,dragging:t}},_h=function(e,t,n){return{type:Th,dragStart:e,dragging:t,mousePos:n}},Rh=function(){return{type:wh}},xc=le,Ah=be,Ph=ae;function Mu(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Ih(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function Ih(a,e){if(a){if(typeof a=="string")return Mc(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mc(a,e)}}function Mc(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var kc=vt.ConfigUtils,jh=kc.extendConfig,Do=kc.configKeys,Dh=function(e){return gn()(e,Do)},Vh=function(){var e=new Map,t=2,n=0,r=function(c){var f=jh(c,++n);return e.size+1>t&&e.delete(e.keys()[0]),e.set(c,f),f},i=function(c){var f=Mu(e.keys()),d;try{var v=function(){var S=d.value,b=e.get(S),E=Do.map(function(L){return b[L]===c[L]}).filter(function(L){return!L}).length===0;if(E)return{v:S}};for(f.s();!(d=f.n()).done;){var h=v();if(Yr(h)==="object")return h.v}}catch(m){f.e(m)}finally{f.f()}return c},u=function(c){var f=Mu(e.keys()),d;try{var v=function(){var _=d.value,T=Do.map(function(P){return _[P]===c[P]}).filter(function(P){return!P}).length===0;if(T)return{v:e.get(_)}};for(f.s();!(d=f.n()).done;){var h=v();if(Yr(h)==="object")return h.v}}catch(L){f.e(L)}finally{f.f()}var m=Mu(e.values()),S;try{var b=function(){var _=S.value,T=Do.map(function(P){return _[P]===c[P]}).filter(function(P){return!P}).length===0;if(T)return{v:_}};for(m.s();!(S=m.n()).done;){var E=b();if(Yr(E)==="object")return E.v}}catch(L){m.e(L)}finally{m.f()}return null},o=function(c){return u(c)||r(c)};return{getExtended:function(c){return o(Dh(c))},getBasic:i}},Nh=function(e,t){return typeof e>"u"?t:e},Vo=function(e,t,n){if(!t||e.length<=t)return e;var r=e.substr(0,t-1);return(n?r.substr(0,r.lastIndexOf(" ")):r)+"..."},za=function(e,t){return e===t?!0:e.equals(t)},qa=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e===t?!0:Array.isArray(e)?xh(e,t,n):e&&typeof e.equals=="function"?e.equals(t):Yr(e)==="object"?Mh(e,t,n):e===t};function xh(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=a.length;if(e.length!==n)return!1;for(var r=0;r<n;r++){var i=t?qa(a[r],e[r],t):a[r]===e[r];if(!i)return!1}return!0}function Mh(a,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a===e)return!0;if(!a||!e)return!1;var n=Object.keys(a),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var u=0;u<i;u++){var o=n[u],l=t?qa(a[o],e[o],t):a[o]===e[o];if(!l)return!1}return!0}var kh=function(){return typeof process<"u"&&process.env&&!1},Gh=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=e??kh();return t?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},$h=Gh(),Gc=vt.validateAndFixTree,Bh=function(){var e,t,n;return function(r,i){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return i?(r.__configId===n&&(za(i,e)||za(i,t))||(n=r.__configId,e=i,o===!1?t=Gc(i,null,r,u||r,!1,!1):t=Gc(i,null,r,u||r)),t):null}},Wh=function(e){if(e._reactRootContainer)return"root";if(Object.getOwnPropertyNames(e).filter(function(t){return t.startsWith("__reactContainer")}).length>0)return"container"},Uh=function a(e){if(e){var t=Wh(e);return t!==void 0?t:a(e.parentNode)}},$c=function(e){return Uh(e)==="root"},ku=function(e,t){return function(n,r){var i=e.props,u=e.state,o=n!=i||r!=u;if(o&&u==r&&i!=n){var l=[];for(var c in n){var f=n[c]!=i[c];f&&(t[c]=="ignore"?f=!1:t[c]=="shallow_deep"?f=!qa(n[c],i[c],!0):t[c]=="shallow"?f=!qa(n[c],i[c]):typeof t[c]=="function"&&(f=t[c](n[c],i[c],r))),f&&l.push(c)}l.length||(o=!1)}return o}},yi=function(e){return function(t,n){return!qa(e.props,t)||!qa(e.state,n)}},zh=function(){var e=g.version.split(".").map(parseInt.bind(null,10));return e[0]==16&&e[1]<3||e[0]<16},xr=function(e){if(e.shouldComponentUpdate||(e.shouldComponentUpdate=yi(e)),zh())e.componentWillReceiveProps=function(r){e.onPropsChanged(r)};else{var t=e.shouldComponentUpdate,n=function(i,u){var o=!qa(e.props,i);o&&e.onPropsChanged(i);var l=t.call(e,i,u);return l};e.shouldComponentUpdate=n.bind(e)}},Bc=function(e,t,n){return Ro()(e,function(r){return function(){for(var i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];return n(r.apply(void 0,[t].concat(u)))}})};function qr(a,e,t){return e=ni(e),e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Wc(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Gu(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wc(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Wc(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function qh(a){var e=Kh();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Kh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uc=function(a){It(t,a);var e=qh(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.shouldComponentUpdate=ku(kt(r),{tree:function(u){return!(u===r.oldValidatedTree&&r.oldValidatedTree===r.validatedTree)}}),xr(kt(r)),r._updateActions(n),r.validatedTree=n.getMemoizedTree(n.config,n.tree,void 0,n.sanitizeTree),r.oldValidatedTree=r.validatedTree,r}return Vt(t,[{key:"_updateActions",value:function(r){var i=r.config,u=r.dispatch;this.actions=Bc(Gu(Gu(Gu({},xc),Ah),Ph),i,u)}},{key:"onPropsChanged",value:function(r){var i=r.onChange,u=this.props.config,o=r.tree,l=this.props.tree,c=r.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=o,u!==c&&(this._updateActions(r),this.validatedTree=r.getMemoizedTree(c,o,u));var f=!za(this.validatedTree,this.oldValidatedTree);if(f){var d=r.getBasicConfig(c);i&&i(this.validatedTree,d,r.__lastAction)}}},{key:"render",value:function(){var r=this.props,i=r.config,u=r.renderBuilder,o=r.dispatch,l=r.__isInternalValueChange,c={tree:this.validatedTree,actions:this.actions,config:i,dispatch:o,__isInternalValueChange:l};return u(c)}}]),t}(g.Component);Uc.propTypes={config:x().object.isRequired,onChange:x().func,renderBuilder:x().func,tree:x().any};var zc=Po(function(a){return{tree:a.tree,__isInternalValueChange:a.__isInternalValueChange,__lastAction:a.__lastAction}},null,null,{context:Hi})(Uc);zc.displayName="ConnectedQuery";const Hh=zc;function Jh(a){var e=Qh();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Qh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qc=vt.DefaultUtils.defaultRoot,Kc=function(a){It(t,a);var e=Jh(t);function t(n,r){var i;ot(this,t),i=e.call(this,n,r),i.setLastTree=function(L){i.prevTree&&(i.prevprevTree=i.prevTree),i.prevTree=L},i.shouldComponentUpdate=ku(kt(i),{value:function(_,T,P){return!1}}),xr(kt(i));var u=Vh(),o=u.getExtended,l=u.getBasic;i.getMemoizedConfig=o,i.getBasicConfig=l,i.getMemoizedTree=Bh();var c=i.getMemoizedConfig(n),f=c.settings.shouldCreateEmptyGroup,d=!f,v=qc(c,d),h=!!n.value,m=n.value||v,S=i.getMemoizedTree(c,m,void 0,h),b=Ng(c,S,i.getMemoizedTree,i.setLastTree),E=(0,xg.createStore)(b);return i.config=c,i.state={store:E},i.QueryWrapper=function(L){return c.settings.renderProvider(L,c.ctx)},i}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=this.config,o=this.getMemoizedConfig(r),l=u!==o,c=this.state.store.getState().tree,f=!za(r.value,this.props.value)&&!za(r.value,c),d=f?r.value||qc(r):c,v=f&&!za(r.value,this.prevTree)&&!za(r.value,this.prevprevTree);if(this.sanitizeTree=v||l,l&&(i.settings.renderProvider!==r.settings.renderProvider&&(this.QueryWrapper=function(m){return o.settings.renderProvider(m,o.ctx)}),this.config=o),f||l){var h=this.getMemoizedTree(o,d,u,this.sanitizeTree);this.state.store.dispatch(xc.setTree(o,h))}}},{key:"render",value:function(){var r=this.props,i=r.renderBuilder,u=r.get_children,o=r.onChange,l=this.state.store,c=this.config,f=this.QueryWrapper;return g.createElement(f,{config:c},g.createElement(Wg,{store:l,context:Hi},g.createElement(Hh,{config:c,getMemoizedTree:this.getMemoizedTree,getBasicConfig:this.getBasicConfig,sanitizeTree:this.sanitizeTree,onChange:o,renderBuilder:i||u})))}}]),t}(g.Component);Kc.propTypes={conjunctions:x().object.isRequired,fields:x().object.isRequired,types:x().object.isRequired,operators:x().object.isRequired,widgets:x().object.isRequired,settings:x().object.isRequired,ctx:x().object.isRequired,onChange:x().func,renderBuilder:x().func,value:x().any};function Qi(a,e){if(a==null)return{};var t=Ji(a,e),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}var Yh=O(46942),wn=O.n(Yh);function Xh(a){var e=Zh();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Zh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var em=vt.ConfigUtils.getFieldConfig,tm=function(e){var t;return t=function(n){It(i,n);var r=Xh(i);function i(u){var o;return ot(this,i),o=r.call(this,u),o.dummyFn=function(){},o.removeSelf=function(){o.props.actions.removeRule(o.props.path)},o.setLock=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;o.props.actions.setLock(o.props.path,l)},o.setField=function(l,c,f){o.props.actions.setField(o.props.path,l,c,f)},o.setFieldSrc=function(l){o.props.actions.setFieldSrc(o.props.path,l)},o.setOperator=function(l){o.props.actions.setOperator(o.props.path,l)},o.setOperatorOption=function(l,c){o.props.actions.setOperatorOption(o.props.path,l,c)},o.setValue=function(l,c,f,d,v){o.props.actions.setValue(o.props.path,l,c,f,d,v)},o.setValueSrc=function(l,c){o.props.actions.setValueSrc(o.props.path,l,c)},o.pureShouldComponentUpdate=yi(kt(o)),o.dummyFn.isDummyFn=!0,o}return Vt(i,[{key:"shouldComponentUpdate",value:function(o,l){var c=this.props,f=this.state,d=this.pureShouldComponentUpdate(o,l);if(d&&f==l&&c!=o){var v=o.dragging.id||c.dragging.id,h=v==o.id,m=[];for(var S in o){var b=o[S]!=c[S];S=="dragging"&&!h&&(b=!1),b&&m.push(S)}m.length||(d=!1)}return d}},{key:"render",value:function(){var o=this.props.dragging.id==this.props.id,l=em(this.props.config,this.props.field),c=this.props.fieldType||l?.type||null,f=this.props.config.settings.showErrorMessage,d=l&&l.type=="!struct",v=!o&&this.props.isDraggingTempo,h=this.props.valueError,m=h&&h.toArray().filter(function(b){return!!b}).shift()||null,S=m!=null&&f;return g.createElement("div",{className:wn()("group-or-rule-container","rule-container",S?"rule-with-error":null),"data-id":this.props.id},[o?g.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setFieldSrc:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:c,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,g.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:o,isDraggingTempo:v,onDragStart:this.props.onDragStart,setLock:v?this.dummyFn:this.setLock,removeSelf:v?this.dummyFn:this.removeSelf,setField:v?this.dummyFn:this.setField,setFieldSrc:v?this.dummyFn:this.setFieldSrc,setOperator:v?this.dummyFn:this.setOperator,setOperatorOption:v?this.dummyFn:this.setOperatorOption,setValue:v?this.dummyFn:this.setValue,setValueSrc:v?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:c,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),i}(g.Component),t.propTypes={id:x().string.isRequired,groupId:x().string,config:x().object.isRequired,path:x().any.isRequired,operator:x().string,field:x().any,fieldSrc:x().string,fieldType:x().string,actions:x().object.isRequired,onDragStart:x().func,value:x().any,valueSrc:x().any,asyncListValues:x().array,valueError:x().any,operatorOptions:x().object,reordableNodesCnt:x().number,parentField:x().string,isLocked:x().bool,isTrueLocked:x().bool,dragging:x().object,isDraggingTempo:x().bool},t};const rm=function(a){var e=Po(function(t){return{dragging:t.dragging}},null,null,{context:Hi})(tm(a));return e.displayName="ConnectedRuleContainer",e};function $u(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function nm(a){if(Array.isArray(a))return $u(a)}function am(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Hc(a,e){if(a){if(typeof a=="string")return $u(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $u(a,e)}}function im(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ln(a){return nm(a)||am(a)||Hc(a)||im()}function om(a){var e=um();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function um(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jc=vt.clone,lm=vt.TreeUtils.getFlatTree,Bu=!1,sm=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t=function(r){It(u,r);var i=om(u);function u(o){var l;return ot(this,u),l=i.call(this,o),l._getEventTarget=function(c,f){return c&&c.__mocked_window||document.body||window},l.onDragStart=function(c,f,d){var v=f.closest(".query-builder");l._isUsingLegacyReactDomRender===void 0&&(l._isUsingLegacyReactDomRender=$c(v)),document.body.classList.add("qb-dragging"),v.classList.add("qb-dragging");var h=v.closest(".query-builder-container")||v;h=l._getScrollParent(h)||document.body;var m=h.scrollTop,S=l._getDraggableNodeEl(v),b=l._getPlaceholderNodeEl(v),E=v.querySelectorAll(".group--children"),L=E.length?E[0]:null,_;L&&(_=window.getComputedStyle(L,null).getPropertyValue("padding-left"),_=parseInt(_));var T={id:c,x:f.offsetLeft,y:f.offsetTop,w:f.offsetWidth,h:f.offsetHeight,itemInfo:l.tree.items[c],paddingLeft:_},P={id:c,x:f.offsetLeft,y:f.offsetTop,scrollTop:m,clientX:d.clientX,clientY:d.clientY,itemInfo:Jc(l.tree.items[c]),treeEl:v,treeElContainer:h},N={clientX:d.clientX,clientY:d.clientY},G=l._getEventTarget(d,P);l.eventTarget=G,G.addEventListener("mousemove",l.onDrag),G.addEventListener("mouseup",l.onDragEnd),l.props.setDragStart(P,T,N)},l.onDrag=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=Object.assign({},l.props.dragging),v=l.props.dragStart,h=d.paddingLeft,m=v.treeElContainer,S=m.scrollTop;if(d.itemInfo=l.tree.items[d.id],!!d.itemInfo){var b={clientX:c.clientX,clientY:c.clientY},E={clientX:v.clientX,clientY:v.clientY};if(c.__mock_dom){var L=v.treeEl,_=l._getDraggableNodeEl(L),T=l._getPlaceholderNodeEl(L);c.__mock_dom({treeEl:L,dragEl:_,plhEl:T})}if(!v.plX){var P=v.treeEl,N=l._getPlaceholderNodeEl(P);N&&(v.plX=N.getBoundingClientRect().left+window.scrollX,v.plY=N.getBoundingClientRect().top+window.scrollY)}var G=v.x,J=v.y,W=v.clientX,B=v.clientY,Q=v.scrollTop,se={x:G+(c.clientX-W),y:J+(c.clientY-B)+(S-Q)};d.x=se.x,d.y=se.y,d.paddingLeft=h,d.mousePos=b,d.startMousePos=E,l.props.setDragProgress(b,d);var z=f?l.handleDrag(d,c,n):!1;z||c.preventDefault&&c.preventDefault()}},l.onDragEnd=function(){var c=l.props.dragStart.treeEl;l.props.setDragEnd(),c.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),l._cacheEls={};var f=l.eventTarget||l._getEventTarget();f.removeEventListener("mousemove",l.onDrag),f.removeEventListener("mouseup",l.onDragEnd)},l.pureShouldComponentUpdate=yi(kt(l)),xr(kt(l)),l.onPropsChanged(o),l}return Vt(u,[{key:"onPropsChanged",value:function(l){this.tree=lm(l.tree)}},{key:"shouldComponentUpdate",value:function(l,c){var f=this.props,d=this.state,v=this.pureShouldComponentUpdate(l,c);if(v&&d==c&&f!=l){var h=[];for(var m in l){var S=l[m]!=f[m];S&&m!="dragging"&&m!="mousePos"&&h.push(m)}h.length||(v=!1)}return v}},{key:"componentDidUpdate",value:function(l,c){var f=this.props.dragging,d=this.props.dragStart;if(Bu=!1,d&&d.id&&(f.itemInfo=this.tree.items[f.id],f.itemInfo&&(f.itemInfo.index!=d.itemInfo.index||f.itemInfo.parent!=d.itemInfo.parent))){var v=d.treeEl,h=d.treeElContainer,m=this._getPlaceholderNodeEl(v,!0);if(m){var S=m.getBoundingClientRect().left+window.scrollX,b=m.getBoundingClientRect().top+window.scrollY,E=d.plX,L=d.plY,_=h.scrollTop;d.plX=S,d.plY=b,d.itemInfo=Jc(f.itemInfo),d.y=m.offsetTop,d.x=m.offsetLeft,d.clientY+=b-L,d.clientX+=S-E,h!=document.body&&(d.scrollTop=_),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(c==null)return null;this._cacheEls||(this._cacheEls={});var d=this._cacheEls[c];return d&&document.contains(d)&&!f||(d=l.querySelector('.group-or-rule-container[data-id="'+c+'"]'),this._cacheEls[c]=d),d}},{key:"_getDraggableNodeEl",value:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var f=this._cacheEls.draggable;if(f&&document.contains(f)&&!c)return f;var d=l.getElementsByClassName("qb-draggable");return f=d.length?d[0]:null,this._cacheEls.draggable=f,f}},{key:"_getPlaceholderNodeEl",value:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var f=this._cacheEls.placeholder;if(f&&document.contains(f)&&!c)return f;var d=l.getElementsByClassName("qb-placeholder");return f=d.length?d[0]:null,this._cacheEls.placeholder=f,f}},{key:"_isScrollable",value:function(l){var c=window.getComputedStyle(l)["overflow-y"];return(c==="scroll"||c==="auto")&&l.scrollHeight>l.offsetHeight}},{key:"_getScrollParent",value:function(l){return l==null?null:l===document.body||this._isScrollable(l)?l:this._getScrollParent(l.parentNode)}},{key:"handleDrag",value:function(l,c,f){var d=this,v=!0,h=l.itemInfo,m=l.paddingLeft,S=null,b=this.props.dragStart.treeEl,E=l.id,L=this._getDraggableNodeEl(b),_=this._getPlaceholderNodeEl(b),T,P,N,G;if(L&&_){if(T=L.getBoundingClientRect(),P=_.getBoundingClientRect(),!P.width)return;var J={hrz:0,vrt:0};T.top<P.top?J.vrt=-1:T.bottom>P.bottom&&(J.vrt=1),T.left>P.left?J.hrz=1:T.left<P.left&&(J.hrz=-1),G=b.getBoundingClientRect();var W={x:G.left+(G.right-G.left)/2,y:J.vrt>=0?T.bottom:T.top},B;if(c.__mocked_hov_container)B=c.__mocked_hov_container;else{var Q=document.elementFromPoint(W.x,W.y-1);if(B=Q?Q.closest(".group-or-rule-container"):null,!B&&Q&&Q.classList.contains("query-builder-container")){var se,z=Q==null||(se=Q.firstChild)===null||se===void 0?void 0:se.firstChild;z&&z.classList.contains("group-or-rule-container")&&(B=z)}}if(!B)$h.log("out of tree bounds!");else{var ne=B.classList.contains("group-container"),ie=B.getAttribute("data-id"),ve=B,ue=!1,pe=!1;if(ve){N=ve.getBoundingClientRect();var me=N.bottom-N.top,Ee=this.tree.items[ie];if(!Ee)throw new Error("There is an issue with rendering. If you use Next.js, please check getServerSideProps() method.");var Ie=null,Ne=null,Fe=null,De=null;if(J.vrt==0)Fe=h,Ne=_,Ne&&(Ie=Ne.getBoundingClientRect());else if(ne){if(J.vrt>0){var Xe=B.getElementsByClassName("group--header"),xe=Xe.length?Xe[0]:null;if(xe){var Ze=xe.getBoundingClientRect(),ze=Ze.bottom-Ze.top,ht=T.bottom-Ze.top>ze*3/4;ht&&Ee.top>l.itemInfo.top&&(Fe=Ee,Ie=Ze,Ne=xe,pe=!0)}}else if(J.vrt<0&&Ee.lev>=h.lev){var Et=N.bottom-T.top>=2;Et&&Ee.top<l.itemInfo.top&&(Fe=Ee,Ie=N,Ne=ve,ue=!0)}if(!pe&&!ue||v){var or=J.vrt<0?N.bottom-T.top>me-5:T.bottom-N.top>me-5;or&&(!pe&&!ue&&(Fe=Ee,Ie=N,Ne=ve),v&&(De=Ee))}}else{var Rr=J.vrt<0?N.bottom-T.top>me/2:T.bottom-N.top>me/2;Rr&&(Fe=Ee,Ie=N,Ne=ve)}var pr=Fe&&Fe.id==E;if(Ie){var Sr=T.left-G.left,Xr=Ie.left-G.left,Ar=Xr/m,er=Math.max(0,Math.round(Sr/m)),wt=[],rr=[];if(!pr){if(ne&&(ue?wt.push([Ua,Fe,Fe.lev+1]):pe&&wt.push([mi,Fe,Fe.lev+1]),v&&De)){var sn=De.lev==0,_n=De.type=="case_group"&&h.type!="case_group",Kn=De.prev&&this.tree.items[De.prev].caseId,Kr=De.next&&this.tree.items[De.next].caseId;h.caseId==Kn&&(Kn=null),h.caseId==Kr&&(Kr=null);var Hr=Kn&&this.tree.items[Kn],Ta=Kr&&this.tree.items[Kr];J.vrt>0?sn?rr.push([Ua,De,De.lev+1]):_n&&Ta?rr.push([mi,Ta,Ta.lev+1]):rr.push([Io,De,De.lev]):J.vrt<0&&(sn?rr.push([mi,De,De.lev+1]):_n&&Hr?rr.push([Ua,Hr,Hr.lev+1]):rr.push([jo,De,De.lev]))}!ue&&!pe&&(J.vrt<0?wt.push([jo,Fe,Fe.lev]):J.vrt>0&&wt.push([Io,Fe,Fe.lev]))}var Qa=function(bn){var Fn=bn[1],wa=h.caseId?d.tree.items[h.caseId]:null,ua=Fn.caseId?d.tree.items[Fn.caseId]:null;return[].concat(Ln(bn),[wa,ua])};wt=wt.map(Qa),rr=rr.map(Qa),wt=wt.filter(function(Bt){var bn=Bt[0],Fn=Bt[1];if((bn==jo||bn==Io)&&Fn.parent==null||Fn.collapsed&&(bn==Ua||bn==mi))return!1;var wa=Fn.id==h.id;if(!wa){for(var ua=Fn;ua.parent;)if(ua=d.tree.items[ua.parent],ua.id==h.id){wa=!0;break}}return!wa}).map(function(Bt){var bn=Bt[0],Fn=Bt[1],wa=Bt[2],ua=Bt[3],Or=Bt[4],et=null;return bn==Ua||bn==mi?et=Fn:et=d.tree.items[Fn.parent],et&&et.parent==null&&(et=null),Bt[5]=et,Bt});var Rn=null,An=wt.filter(function(Bt){return d.canMove(h,Bt[1],Bt[0],Bt[3],Bt[4],Bt[5],f)});v&&An.length==0&&rr.length>0&&(An=rr.filter(function(Bt){return d.canMove(h,Bt[1],Bt[0],Bt[3],Bt[4],Bt[5],f)}));var to=An.map(function(Bt){return Bt[2]}),ro=h.lev,oa=to.concat(ro),Ti=null;oa.indexOf(er)!=-1?Ti=er:er>Math.max.apply(Math,Ln(oa))?Ti=Math.max.apply(Math,Ln(oa)):er<Math.min.apply(Math,Ln(oa))&&(Ti=Math.min.apply(Math,Ln(oa))),Rn=An.find(function(Bt){return Bt[2]==Ti}),!pr&&!Rn&&An.length&&(Rn=An[0]),S=Rn}}}}return S?(this.move(h,S[1],S[0],S[3]),!0):!1}},{key:"canMove",value:function(l,c,f,d,v,h,m){if(!l||!c||l.id===c.id)return!1;var S=this.props.config.settings,b=S.canRegroup,E=S.canRegroupCases,L=S.maxNesting,_=S.maxNumberOfRules,T=S.canLeaveEmptyCase,P=h?h.lev+1:c.lev,N=P+(l.depth||0),G=f==jo||f==Io,J=f==mi||f==Ua,W=G&&c.lev==1||J&&c.lev==0,B=l.parent!=c.parent,Q=J||B,se=l.type=="case_group"&&!W||l.parentType=="rule_group"||c.type=="rule_group"||c.parentType=="rule_group"||l.type!="case_group"&&c.type=="case_group"&&G||l.type!="case_group"&&c.type=="switch_group"||!E&&l.caseId!=c.caseId,z=c.isLocked||l.isLocked||h&&h.isLocked;if(L&&N>L||Q&&(!b||se||z))return!1;if(l.type!="case_group"&&l.caseId!=c.caseId){var ne=d?d._height==2:!1,ie=v?v.leafsCount+1:0;if(_&&ie>_||ne&&!T)return!1}if(l.type=="case_group"&&(l.isDefaultCase||c.isDefaultCase||c.type=="switch_group"&&f==Ua))return!1;var ve=!0;return m&&(ve=m(l.node.toJS(),c.node.toJS(),f,h?h.node.toJS():null)),ve}},{key:"move",value:function(l,c,f,d){this._isUsingLegacyReactDomRender||(Bu=!0),this.props.actions.moveItem(l.path,c.path,f)}},{key:"render",value:function(){return g.createElement(e,bt({},this.props,{onDragStart:this.onDragStart}))}}]),u}(g.Component),t.propTypes={tree:x().any.isRequired,actions:x().object.isRequired},t};const cm=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=Po(function(n){return{dragging:n.dragging,dragStart:n.dragStart,mousePos:n.mousePos}},{setDragStart:_h,setDragProgress:Lh,setDragEnd:Rh},null,{context:Hi})(sm(a,e));return t.displayName="ConnectedSortableContainer",t};var fm=["isDraggingTempo","isDraggingMe","dragging"];function dm(a){var e=pm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function pm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}const Si=function(a){return function(e){var t;return t=function(n){It(i,n);var r=dm(i);function i(u){var o;return ot(this,i),o=r.call(this,u),o.handleDraggerMouseDown=function(l){var c=o.props.id,f=o.wrapper.current;o.props.onDragStart&&o.props.onDragStart(c,f,l)},o.wrapper=g.createRef(),o}return Vt(i,[{key:"render",value:function(){var o=this.props,l=o.isDraggingTempo,c=o.isDraggingMe,f=o.dragging,d=Qi(o,fm),v=d.isTrueLocked,h={};c&&l&&(Bu||(h={top:f.y,left:f.x,width:f.w}));var m=wn()(a,"group-or-rule",c&&l?"qb-draggable":null,c&&!l?"qb-placeholder":null,v?"locked":null);return g.createElement("div",{className:m,style:h,ref:this.wrapper,"data-id":this.props.id},g.createElement(e,bt({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:c,isDraggingTempo:l},d)))}}]),i}(g.PureComponent),t.propTypes={isDraggingTempo:x().bool,isDraggingMe:x().bool,onDragStart:x().func,dragging:x().object,isLocked:x().bool,isTrueLocked:x().bool},t}};var vm=O(95950),Oi=O.n(vm),gm=O(71086),hm=O.n(gm);function Qc(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function mm(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qc(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Qc(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function ym(a){var e=Sm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Sm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Yc=vt.ConfigUtils,Om=Yc.getFieldConfig,bm=Yc.getOperatorConfig,Xc=function(a){It(t,a);var e=ym(t);function t(n){var r;return ot(this,t),r=e.call(this,n),xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["config","selectedField","selectedFieldSrc","selectedFieldType","selectedOperator"],o=!this.meta||u.map(function(l){return r[l]!==i[l]}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i,u=r.config,o=r.selectedField,l=r.selectedFieldType,c=r.selectedOperator,f=Om(u,o),d=Ln(f?.operators||((i=u.types[l])===null||i===void 0?void 0:i.operators)||[]);!o&&!d.includes(c)&&d.push(c);var v=Ro()(hm()(u.operators,function(T,P){return d?.indexOf(P)!==-1}),function(T,P){return bm(u,P,o)}),h=this.buildOptions(u,v,d),m=v[c]||{},S=this.props.config.settings.operatorPlaceholder,b=c,E=b?[b]:null,L=E,_=m.label;return{placeholder:S,items:h,selectedKey:b,selectedKeys:E,selectedPath:L,selectedLabel:_,selectedOpts:m,fieldConfig:f}}},{key:"buildOptions",value:function(r,i,u){return!i||!u?null:Oi()(i).sort(function(o,l){return u.indexOf(o)-u.indexOf(l)}).map(function(o){var l=i[o],c=l.label;return{key:o,path:o,label:c}})}},{key:"render",value:function(){var r=this.props,i=r.config,u=r.customProps,o=r.setOperator,l=r.readonly,c=r.id,f=r.groupId,d=i.settings.renderOperator,v=mm({id:c,groupId:f,config:i,customProps:u,readonly:l,setField:o},this.meta);return v.items?d(v,i.ctx):null}}]),t}(g.Component);Xc.propTypes={id:x().string,groupId:x().string,config:x().object.isRequired,selectedField:x().any,selectedFieldType:x().string,selectedFieldSrc:x().string,selectedOperator:x().string,readonly:x().bool,setOperator:x().func.isRequired};var Fm=["children"],mr=function(e){var t=e.children,n=Qi(e,Fm);return g.createElement("div",n,t)},On=function(){},Zc=function(){return g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},g.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),g.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},bi=function(e){return function(t){var n=t.config.settings.useConfirm,r=n?n.call(t.config.ctx,t.config.ctx):null;return g.createElement(e,bt({},t,{confirmFn:r}))}};function Em(a){var e=Cm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Cm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ef=function(a){It(t,a);var e=Em(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedFieldSrc,l=r.selectedFieldType,c=r.selectedOperator,f=r.setOperator,d=r.selectedFieldParts,v=r.showOperator,h=r.showOperatorLabel,m=r.selectedFieldWidgetConfig,S=r.readonly,b=r.id,E=r.groupId,L=v&&g.createElement(mr,{key:"operators-for-"+(d||[]).join("_"),className:"rule--operator"},i.settings.showLabels&&g.createElement("label",{className:"rule--label"},i.settings.operatorLabel),g.createElement(Xc,{key:"operator",config:i,selectedField:u,selectedFieldSrc:o,selectedFieldType:l,selectedOperator:c,setOperator:f,readonly:S,id:b,groupId:E})),_=h&&g.createElement(mr,{key:"operators-for-"+(d||[]).join("_"),className:"rule--operator"},g.createElement("div",{className:"rule--operator-wrapper"},i.settings.showLabels?g.createElement("label",{className:"rule--label"},"\xA0"):null,g.createElement("div",{className:"rule--operator-text-wrapper"},g.createElement("span",{className:"rule--operator-text"},m.operatorInlineLabel))));return[L,_]}}]),t}(g.PureComponent);function tf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Tm(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):tf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function wm(a){var e=Lm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Lm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rf=vt.RuleUtils.getFieldPathLabels,Wu=vt.ConfigUtils,nf=Wu.getFieldConfig,af=Wu.getFieldParts,of=Wu.getFieldPathParts,uf=function(a){It(t,a);var e=wm(t);function t(n){var r;return ot(this,t),r=e.call(this,n),xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["selectedField","selectedFieldSrc","selectedFieldType","config","parentField"],o=!this.meta||u.map(function(l){return r[l]!==i[l]}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i=r.selectedField,u=r.selectedFieldType,o=r.config,l=r.parentField,c=i,f=o.settings,d=f.maxLabelsLength,v=f.fieldSeparatorDisplay,h=f.fieldPlaceholder,m=f.fieldSeparator,S=!!i,b=S?null:Vo(h,d),E=S?nf(o,c):null,L=E||{},_=of(c,o),T=of(c,o,!0),P=this.getFieldLabel(E,c,o),N=rf(c,o),G=N?N.join(v):null;(G==P||l)&&(G=null);var J=L.label2,W=af(l,o),B=l?nf(o,l):null,Q=l?B&&B.subfields:o.fields,se=!S&&u,z=this.buildOptions(W,o,Q,se,W),ne=se?"Please select field":null;return{placeholder:b,items:z,parentField:l,selectedKey:c,selectedKeys:_,selectedPath:T,selectedLabel:P,selectedOpts:L,selectedAltLabel:J,selectedFullLabel:G,errorText:ne}}},{key:"getFieldLabel",value:function(r,i,u){if(!i)return null;var o=u.settings.maxLabelsLength,l=af(i,u),c=r?.label||Eo()(l);return c=Vo(c,o),c}},{key:"buildOptions",value:function(r,i,u){var o=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null;if(!u)return null;var d=i.settings,v=d.fieldSeparator,h=d.fieldSeparatorDisplay,m=c!=null&&c.length?c.join(v)+v:"",S=function b(E){return Object.keys(E||{}).reduce(function(L,_){var T=E[_];return T.type==="!struct"?L+b(T.subfields):L+(T.type===l?1:0)},0)};return Oi()(u).map(function(b){var E=[].concat(Ln(c??[]),[b]),L=u[b],_=o.getFieldLabel(L,E,i),T=rf(E,i),P=T.join(h);(P==_||r!=null&&r.length)&&(P=null);var N=L.label2,G=L.tooltip,J=L.disabled;if(!L.hideForSelect)if(L.type=="!struct"){var W=o.buildOptions(r,i,L.subfields,l,E,{label:_,tooltip:G}),B=S(L.subfields)>0;return{disabled:J,key:b,path:m+b,label:_,fullLabel:P,altLabel:N,tooltip:G,items:W,matchesType:B}}else{var Q=l!==void 0?L.type===l:void 0;return{disabled:J,key:b,path:m+b,label:_,fullLabel:P,altLabel:N,tooltip:G,grouplabel:f?.label,group:f,matchesType:Q}}}).filter(function(b){return!!b})}},{key:"render",value:function(){var r=this.props,i=r.config,u=r.customProps,o=r.setField,l=r.setFieldSrc,c=r.readonly,f=r.id,d=r.groupId,v=i.settings.renderField,h=Tm({id:f,groupId:d,config:i,customProps:u,readonly:c,setField:o,setFieldSrc:l},this.meta);return v(h,i.ctx)}}]),t}(g.Component);uf.propTypes={id:x().string,groupId:x().string,config:x().object.isRequired,selectedField:x().any,selectedFieldSrc:x().string,selectedFieldType:x().string,parentField:x().string,customProps:x().object,readonly:x().bool,setField:x().func.isRequired,setFieldSrc:x().func};function _m(a){if(Array.isArray(a))return a}function Rm(a,e){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n,r,i,u,o=[],l=!0,c=!1;try{if(i=(t=t.call(a)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=i.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(f){c=!0,r=f}finally{try{if(!l&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw r}}return o}}function Am(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lf(a,e){return _m(a)||Rm(a,e)||Hc(a,e)||Am()}function sf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Pm(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):sf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Im(a){var e=jm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function jm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Dm=vt.clone,No=vt.ConfigUtils,cf=No.getFieldConfig,ff=No.getFuncConfig,Vm=No.getFieldParts,df=No.getFieldPathParts,pf=vt.RuleUtils,vf=pf.getFuncPathLabels,Nm=pf.getWidgetForFieldOp,gf=function(a){It(t,a);var e=Im(t);function t(n){var r;return ot(this,t),r=e.call(this,n),xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["config","field","fieldType","fieldSrc","operator","isFuncArg","isLHS"],o=["config","field","fieldType","fieldSrc","value","isLHS"],l=!this.items||u.map(function(f){return r[f]!==i[f]}).filter(function(f){return f}).length>0,c=!this.meta||o.map(function(f){return r[f]!==i[f]}).filter(function(f){return f}).length>0;c&&(this.meta=this.getMeta(r)),l&&(this.items=this.getItems(r,this.meta))}},{key:"getItems",value:function(r,i){var u=r.config,o=r.field,l=r.fieldType,c=r.isLHS,f=r.operator,d=r.parentFuncs,v=r.fieldDefinition,h=r.isFuncArg,m=i.lookingForFieldType,S=u.settings.canUseFuncForField,b=this.filterFuncs(u,u.funcs,o,l,c,f,S,d,h,v),E=this.buildOptions(u,b,m);return E}},{key:"getMeta",value:function(r){var i,u=r.config,o=r.field,l=r.fieldType,c=r.value,f=r.isLHS,d=r.isFuncArg,v=u.settings,h=v.funcPlaceholder,m=v.fieldSeparatorDisplay,S=c,b=!!c,E=cf(u,o),L=E==null||(i=E.widgets)===null||i===void 0?void 0:i.field,_=L&&L.widgetProps||{},T=b?null:h,P=b?ff(u,S):null,N=P||{},G=df(S,u),J=df(S,u,!0),W=this.getFuncLabel(P,S,u),B=vf(S,u),Q=B?B.join(m):null;Q==W&&(Q=null);var se=f&&!d,z=se&&!b&&l,ne=z?"Please select function":null;return{placeholder:T,selectedKey:S,selectedKeys:G,selectedPath:J,selectedLabel:W,selectedOpts:N,selectedFullLabel:Q,errorText:ne,lookingForFieldType:z}}},{key:"filterFuncs",value:function(r,i,u,o,l,c,f,d,v,h){i=Dm(i);var m=r.settings.fieldSeparator,S=cf(r,u),b=!1,E,L=S,_=Nm(r,u,c,"value"),T=_&&r.widgets[_];v?(L=h,E=h?.type):b&&T?E=T.type:S?E=S.type:l||(E=o);function P(N,G){for(var J in N){var W=N[J].subfields,B=(G||[]).concat(J),Q=B.join(m),se=ff(r,Q);if(se.type=="!struct")P(W,B)==0&&delete N[J];else{var z,ne=!E||se.returnType==E;(z=L)!==null&&z!==void 0&&z.funcs&&(ne=ne&&L.funcs.includes(Q)),f&&(ne=ne&&f(u,S,Q,se,c)),!se.allowSelfNesting&&d&&d.map(function(ie){var ve=lf(ie,2),ue=ve[0],pe=ve[1];return ue}).includes(Q)&&(ne=!1),ne||delete N[J]}}return Oi()(N).length}return P(i,[]),i}},{key:"buildOptions",value:function(r,i){var u=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!i)return null;var f=r.settings,d=f.fieldSeparator,v=f.fieldSeparatorDisplay,h=l!=null&&l.length?l.join(d)+d:"",m=function S(b){return Object.keys(b||{}).reduce(function(E,L){var _=b[L];return _.type==="!struct"?E+S(_.subfields):E+(_.type===o?1:0)},0)};return Oi()(i).map(function(S){var b=[].concat(Ln(l??[]),[S]),E=i[S],L=u.getFuncLabel(E,b,r),_=vf(b,r),T=_.join(v);T==L&&(T=null);var P=E.tooltip;if(E.type=="!struct"){var N=u.buildOptions(r,E.subfields,o,b,{label:L,tooltip:P}),G=m(E.subfields)>0;return{key:S,path:h+S,label:L,fullLabel:T,tooltip:P,items:N,matchesType:G}}else{var J=o!==void 0?E.returnType===o:void 0;return{key:S,path:h+S,label:L,fullLabel:T,tooltip:P,grouplabel:c?.label,group:c,matchesType:J}}})}},{key:"getFuncLabel",value:function(r,i,u){if(!i)return null;var o=u.settings.fieldSeparator,l=u.settings.maxLabelsLength,c=Vm(i,u),f=r?.label||Eo()(c);return f=Vo(f,l),f}},{key:"render",value:function(){var r=this.props,i=r.config,u=r.customProps,o=r.setValue,l=r.readonly,c=r.id,f=r.groupId,d=i.settings.renderFunc,v=Pm({config:i,customProps:u,readonly:l,setField:o,items:this.items,id:c,groupId:f},this.meta);return d(v,i.ctx)}}]),t}(g.Component);gf.propTypes={id:x().string,groupId:x().string,config:x().object.isRequired,field:x().any,fieldType:x().string,fieldSrc:x().string,operator:x().string,customProps:x().object,value:x().string,setValue:x().func.isRequired,readonly:x().bool,parentFuncs:x().array,fieldDefinition:x().object,isFuncArg:x().bool,isLHS:x().bool};var xm=O(23181),Uu=O.n(xm),Mm=["factory"];function hf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function zu(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):hf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var mf=vt.ListUtils.getTitleInListValues,km=vt.ConfigUtils._widgetDefKeysToOmit;const Gm=function(a){var e=a.delta,t=a.isFuncArg,n=a.valueSrc,r=a.value,i=a.valueError,u=a.asyncListValues,o=a.isSpecialRange,l=a.fieldDefinition,c=a.widget,f=a.widgetDefinition,d=a.widgetValueLabel,v=a.valueLabels,h=a.textSeparators,m=a.setValueHandler,S=a.config,b=a.field,E=a.fieldSrc,L=a.fieldType,_=a.isLHS,T=a.operator,P=a.readonly,N=a.parentField,G=a.parentFuncs,J=a.id,W=a.groupId,B=f.factory,Q=Qi(f,Mm),se=t&&l.valueSources&&l.valueSources.length==1&&l.valueSources[0]=="const",z=l.defaultValue;if(!B)return"?";var ne=o?[r.get(0),r.get(1)]:r?r.get(e):void 0,ie=i&&(o?[i.get(0),i.get(1)]:i.get(e))||null;o&&ne[0]===void 0&&ne[1]===void 0&&(ne=void 0);var ve=l||{},ue=ve.fieldSettings,pe=Ct()(zu(zu(zu({},Q),ue),{},{config:S,field:b,fieldSrc:E,fieldType:L,isLHS:_,parentField:N,parentFuncs:G,fieldDefinition:l,operator:T,delta:e,isSpecialRange:o,isFuncArg:t,value:ne,valueError:ie,label:d.label,placeholder:d.placeholder,placeholders:v?v.placeholder:null,textSeparators:h,setValue:m,readonly:P,asyncListValues:u,id:J,groupId:W}),[].concat(Ln(km),["toJS"]));if(c=="field",se&&z){var me=ue?.treeValues||ue?.listValues;return typeof z=="boolean"?z?pe.labelYes||"YES":pe.labelNo||"NO":me?Array.isArray(z)?z.map(function(Ee){return mf(me,Ee)||Ee}).join(", "):mf(me,z)||z:""+z}return B(pe,S.ctx)};function $m(a){var e=Bm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Bm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qu=vt.ConfigUtils,Wm=qu.getFieldConfig,Um=qu.getOperatorConfig,yf=qu.getFieldWidgetConfig,Ku=vt.RuleUtils,zm=Ku.getValueSourcesForFieldOp,Sf=Ku.getWidgetForFieldOp,xo=Ku.getValueLabel,Of=vt.DefaultUtils.createListFromArray,qm={cardinality:1},Yi=function(a){It(t,a);var e=$m(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r._setValue=function(i,u,o,l,c,f){if(i&&Array.isArray(l)){var d=[r.props.value.get(0),r.props.value.get(1)];d[0]!=l[0]&&r.props.setValue(0,l[0],o,c,f),d[1]!=l[1]&&r.props.setValue(1,l[1],o,c,f)}else r.props.setValue(u,l,o,c,f)},r._onChangeValueSrc=function(i,u){r.props.setValueSrc(i,u)},r.renderWidget=function(i,u,o){var l=o.config,c=o.isFuncArg,f=o.leftField,d=o.operator,v=o.value,h=o.valueError,m=o.readonly,S=o.parentField,b=o.parentFuncs,E=o.id,L=o.groupId,_=o.fieldSrc,T=o.fieldType,P=o.isLHS,N=l.settings,G=u.widgets,J=u.iValues,W=u.aField,B=u.valueSources,Q=c?J:v,se=c?f:W,z=G[i],ne=z.valueSrc,ie=z.valueLabel,ve=B.length>1&&!m,ue=N.showLabels?g.createElement("label",{className:"rule--label"},ie.label):null;return g.createElement("div",{key:"widget-"+se+"-"+i,className:wn()(ne=="func"?"widget--func":"widget--widget",ve?"widget--has-valuerscs":"widget--has-no-valuerscs")},ne=="func"?null:ue,g.createElement(Gm,bt({id:E,groupId:L,valueSrc:ne,delta:i,value:Q,valueError:h,isFuncArg:c,isLHS:P},gn()(u,["isSpecialRange","fieldDefinition","asyncListValues"]),gn()(G[i],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:l,field:se,fieldSrc:_,fieldType:T,parentField:S,parentFuncs:b,operator:d,readonly:m})))},r.renderValueSources=function(i,u,o){var l=o.config,c=o.isFuncArg,f=o.leftField,d=o.operator,v=o.readonly,h=l.settings,m=u.valueSources,S=u.widgets,b=u.aField,E=c?f:b,L=S[i],_=L.valueSrc,T=L.setValueSrcHandler,P=h.valueSourcesInfo,N=h.renderValueSources,G=m.map(function(B){return[B,{label:P[B].label}]}),J=function(Q){return N(Q,l.ctx)},W=h.showLabels?g.createElement("label",{className:"rule--label"},"\xA0"):null;return m.length>1&&!v&&g.createElement("div",{key:"valuesrc-"+E+"-"+i,className:"widget--valuesrc"},W,g.createElement(J,{key:"valuesrc-"+i,delta:i,valueSources:G,valueSrc:_,config:l,field:E,operator:d,setValueSrc:T,readonly:v,title:h.valueSourcesPopupTitle}))},r.renderSep=function(i,u,o){var l=o.config,c=u.widgets,f=l.settings,d=c[i].sepText,v=f.showLabels?g.createElement("label",{className:"rule--label"},"\xA0"):null;return d&&g.createElement("div",{key:"widget-separators-"+i,className:wn()("widget--sep",i==0&&"widget--sep-first")},v,g.createElement("span",null,d))},r.renderWidgetDelta=function(i){var u=r.renderSep(i,r.meta,r.props),o=r.renderValueSources(i,r.meta,r.props),l=r.renderWidget(i,r.meta,r.props);return[u,o,l]},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["config","field","fieldSrc","fieldType","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues","isLHS"],o=!this.meta||u.map(function(l){return r[l]!==i[l]||l=="isFuncArg"&&r.isFuncArg&&r.value!==i.value}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i=this,u=r.config,o=r.field,l=r.fieldSrc,c=r.fieldType,f=r.fieldFunc,d=r.fieldArg,v=r.operator,h=r.valueSrc,m=r.value,S=r.isForRuleGroup,b=r.isCaseValue,E=r.isFuncArg,L=r.leftField,_=r.asyncListValues,T=E?{func:f,arg:d}:o,P=!o&&c,N=h,G=m;(E||S||b)&&(N=Of([h]),G=Of([m]));var J=Wm(u,T);!J&&P&&(J=u.types[c]);var W=Sf(u,T,v);if(!W&&P){var B;W=(B=u.types[c])===null||B===void 0?void 0:B.mainWidget}var Q=E?qm:Um(u,v,T);if((J==null||Q==null)&&!b)return null;var se=Q?.isSpecialRange,z=se&&(N.get(0)=="field"||N.get(1)=="field"),ne=se&&!z,ie=ne?1:Nh(Q?.cardinality,1);if(ie===0)return null;var ve=zm(u,T,v,J);T||(ve=Object.keys(u.settings.valueSourcesInfo));var ue=Uu()(0,ie).map(function(pe){var me,Ee=N.get(pe)||null,Ie=Sf(u,T,v,Ee),Ne=yf(u,T,v,Ie,Ee);z&&(Ie=Ne.singleWidget,Ne=yf(u,T,v,Ie,Ee)),!Ne&&P&&(Ie=["func","field"].includes(Ee)?Ee:W,Ne=u.widgets[Ie]);var Fe=(me=Ne)===null||me===void 0?void 0:me.type,De=xo(u,T,v,pe,Ee,ne),Xe=xo(u,T,v,pe,null,ne),xe=Q!=null&&Q.textSeparators?Q?.textSeparators[pe]:null,Ze=i._onChangeValueSrc.bind(i,pe),ze=null,ht=null;se&&(ze=[xo(u,T,v,0),xo(u,T,v,1)],ze={placeholder:[ze[0].placeholder,ze[1].placeholder],label:[ze[0].label,ze[1].label]},ht=Q?.textSeparators);var Et=i._setValue.bind(i,se,pe,Fe);return{valueSrc:Ee,valueLabel:De,widget:Ie,sepText:xe,setValueSrcHandler:Ze,widgetDefinition:Ne,widgetValueLabel:Xe,valueLabels:ze,textSeparators:ht,setValueHandler:Et}});return{defaultWidget:W,fieldDefinition:J,operatorDefinition:Q,isSpecialRange:ne,cardinality:ie,valueSources:ve,widgets:ue,iValues:G,aField:T,asyncListValues:_}}},{key:"render",value:function(){if(!this.meta)return null;var r=this.meta,i=r.defaultWidget,u=r.cardinality;if(!i)return null;var o=i;return g.createElement(mr,{className:"rule--widget rule--widget--".concat(o.toUpperCase()),key:"widget-col-"+o},Uu()(0,u).map(this.renderWidgetDelta))}}]),t}(g.Component);Yi.propTypes={config:x().object.isRequired,value:x().any,valueSrc:x().any,valueError:x().any,field:x().any,fieldSrc:x().string,fieldType:x().string,operator:x().string,readonly:x().bool,asyncListValues:x().array,id:x().string,groupId:x().string,setValue:x().func,setValueSrc:x().func,isFuncArg:x().bool,fieldFunc:x().string,fieldArg:x().string,leftField:x().any,isForRuleGroup:x().bool,parentField:x().string,parentFuncs:x().array,isLHS:x().bool,isCaseValue:x().bool};function bf(a){var e=Km();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Km(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hm=vt.ConfigUtils.getFuncConfig,Hu=vt.FuncUtils,Jm=Hu.setFunc,Qm=Hu.setArgValue,Ym=Hu.setArgValueSrc,Ju=function(a){It(t,a);var e=bf(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.setFunc=function(i){r.props.setValue(Jm(r.props.value,i,r.props.config))},r.setArgValue=function(i,u,o,l){var c=r.props.config,f=r.meta.funcDefinition,d=f.args,v=d[i];r.props.setValue(Qm(r.props.value,i,u,v,c),o,l)},r.setArgValueSrc=function(i,u){var o=r.props.config,l=r.meta.funcDefinition,c=l.args,f=c[i];r.props.setValue(Ym(r.props.value,i,u,f,o))},r.renderFuncSelect=function(){var i=r.props,u=i.config,o=i.field,l=i.fieldType,c=i.fieldSrc,f=i.isLHS,d=i.operator,v=i.customProps,h=i.value,m=i.readonly,S=i.parentFuncs,b=i.id,E=i.groupId,L=i.isFuncArg,_=i.fieldDefinition,T=h?h.get("func"):null,P={value:T,setValue:r.setFunc,config:u,field:o,fieldType:l,fieldSrc:c,isLHS:f,operator:d,customProps:v,readonly:m,parentFuncs:S,isFuncArg:L,fieldDefinition:_,id:b,groupId:E},N=u.settings,G=N.showLabels,J=N.funcLabel,W=G?g.createElement("label",{className:"rule--label"},J):null;return g.createElement(mr,{key:"func",className:"rule--func"},W,g.createElement(gf,P))},r.renderArgLabel=function(i,u){var o=u.valueSources,l=u.type,c=u.showPrefix,f=u.label,d=r.props.config,v=o&&o.length==1&&o[0]=="const",h=!d.settings.showLabels&&(l=="boolean"||v)&&c;return h?g.createElement(mr,{className:"rule--func--arg-label"},f||i):null},r.renderArgLabelSep=function(i,u){var o=u.valueSources,l=u.type,c=u.showPrefix,f=r.props.config,d=o&&o.length==1&&o[0]=="const",v=!f.settings.showLabels&&(l=="boolean"||d)&&c;return v?g.createElement(mr,{className:"rule--func--arg-label-sep"},":"):null},r.renderArgVal=function(i,u,o){var l=r.props,c=l.config,f=l.field,d=l.fieldType,v=l.fieldSrc,h=l.isLHS,m=l.operator,S=l.value,b=l.readonly,E=l.parentFuncs,L=l.id,_=l.groupId,T=S?S.getIn(["args",u]):null,P=T?T.get("value"):void 0,N=o.valueSources.length==1?o.valueSources[0]:void 0,G=T?T.get("valueSrc")||N||"value":N,J={config:c,fieldFunc:i,fieldArg:u,leftField:f,fieldType:d,fieldSrc:v,isLHS:h,operator:null,value:P,valueSrc:G,setValue:r.setArgValue,setValueSrc:r.setArgValueSrc,funcKey:i,argKey:u,argDefinition:o,readonly:b,parentFuncs:E,id:L,groupId:_};return g.createElement(mr,{className:"rule--func--arg-value"},g.createElement(Ff,J))},r.renderArgSep=function(i,u,o,l){var c=l.renderSeps;return o?g.createElement(mr,{className:"rule--func--arg-sep"},c?c[o-1]:", "):null},r.renderBracketBefore=function(i){var u=i.renderBrackets;return g.createElement(mr,{key:"before_args",className:"rule--func--bracket-before"},u?u[0]:"(")},r.renderBracketAfter=function(i){var u=i.renderBrackets;return g.createElement(mr,{key:"after_args",className:"rule--func--bracket-after"},u?u[1]:")")},r.renderFuncArgs=function(){var i=r.meta,u=i.funcDefinition,o=i.funcKey;if(!o)return null;var l=u||{},c=l.args;return c?g.createElement(g.Fragment,null,r.renderBracketBefore(u),g.createElement(mr,{key:"args",className:"rule--func--args"},Object.keys(c).map(function(f,d){return g.createElement(mr,{key:"arg-".concat(f,"-").concat(d),className:"rule--func--arg"},r.renderArgSep(f,c[f],d,u),r.renderArgLabel(f,c[f]),r.renderArgLabelSep(f,c[f]),r.renderArgVal(o,f,c[f]))})),r.renderBracketAfter(u)):null},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["config","field","operator","value","fieldSrc","fieldType","isLHS"],o=!this.meta||u.map(function(l){return r[l]!==i[l]}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i=r.config,u=r.field,o=r.operator,l=r.value,c=l?l.get("func"):null,f=c?Hm(i,c):null;return{funcDefinition:f,funcKey:c}}},{key:"render",value:function(){return g.createElement(mr,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),t}(g.Component);Ju.propTypes={id:x().string,groupId:x().string,config:x().object.isRequired,field:x().any,fieldSrc:x().string,fieldType:x().string,operator:x().string,customProps:x().object,value:x().object,setValue:x().func.isRequired,readonly:x().bool,parentFuncs:x().array,fieldDefinition:x().object,isFuncArg:x().bool,isLHS:x().bool};var Ff=function(a){It(t,a);var e=bf(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.setValue=function(i,u,o,l,c){var f=r.props,d=f.setValue,v=f.argKey;d(v,u,l,c)},r.setValueSrc=function(i,u,o){var l=r.props,c=l.setValueSrc,f=l.argKey;c(f,u)},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["parentFuncs","funcKey","argKey"],o=!this.meta||u.map(function(l){return r[l]!==i[l]}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i=r.parentFuncs,u=r.funcKey,o=r.argKey,l=[].concat(Ln(i||[]),[[u,o]]);return{parentFuncs:l}}},{key:"render",value:function(){var r=this.meta.parentFuncs;return g.createElement(Yi,bt({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:r}))}}]),t}(g.Component);Ff.propTypes={funcKey:x().string.isRequired,argKey:x().string.isRequired,setValue:x().func.isRequired,setValueSrc:x().func.isRequired,readonly:x().bool,isLHS:x().bool,parentFuncs:x().array,id:x().string,groupId:x().string};function Xm(a){var e=Zm();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Zm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qu=function(a){It(t,a);var e=Xm(t);function t(){var n;ot(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i)),n.renderField=function(){var o=n.props,l=o.config,c=o.classname,f=o.selectedField,d=o.selectedFieldSrc,v=o.selectedFieldType,h=o.setField,m=o.parentField,S=o.readonly,b=o.id,E=o.groupId,L=["func","field"];if(!L.includes(d))return"?";var _=d==="func"?g.createElement(Ju,{isLHS:!0,config:l,value:f,fieldSrc:d,fieldType:v,parentField:m,setValue:h,readonly:S,id:b,groupId:E,key:"field-func-"+b}):g.createElement(uf,{config:l,selectedField:f,selectedFieldSrc:d,selectedFieldType:v,parentField:m,setField:h,customProps:l.settings.customFieldSelectProps,readonly:S,id:b,groupId:E,key:"field-"+b}),T=d==="func"?l.settings.funcLabel:l.settings.fieldLabel,P=l.settings.showLabels&&d!=="func"&&g.createElement("label",{className:"rule--label"},T);return g.createElement("div",{key:d,className:c},P,_)},n.renderFieldSources=function(){var o=n.props,l=o.config,c=o.readonly,f=o.selectedFieldSrc,d=o.setFieldSrc,v=o.id,h=l.settings,m=h.fieldSources,S=h.valueSourcesInfo,b=h.renderValueSources,E=m.map(function(T){return[T,{label:S[T].label}]}),L=function(P){return b(P,l.ctx)},_=h.showLabels?g.createElement("label",{className:"rule--label"},"\xA0"):null;return m.length>1&&!c&&g.createElement("div",{key:"fieldsrc",className:"rule--fieldsrc"},_,g.createElement(L,{key:"fieldsrc-"+v,valueSources:E,valueSrc:f,config:l,setValueSrc:d,readonly:c,title:h.fieldSourcesPopupTitle}))},n}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.classname,u=r.canSelectFieldSource,o=u&&this.renderFieldSources(),l=this.renderField();return u?g.createElement(mr,{className:"rule--field-wrapper"},o,l):l}}]),t}(g.PureComponent),ey=["factory"];function ty(a){var e=ry();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function ry(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ny=vt.ConfigUtils.getOperatorConfig,Ef=function(a){It(t,a);var e=ty(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var r=ny(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof r.options>"u")return null;var i=r.options,u=i.factory,o=Qi(i,ey),l=Object.assign({},o,{config:this.props.config,field:this.props.selectedField,fieldSrc:this.props.selectedFieldSrc,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),c=u(l,this.props.config.ctx),f=this.props.selectedOperator;return g.createElement("div",{className:"rule--operator rule--operator--".concat(f.toUpperCase())},c)}}]),t}(g.PureComponent);Ef.propTypes={config:x().object.isRequired,operatorOptions:x().any.isRequired,selectedField:x().any,selectedFieldSrc:x().string,selectedOperator:x().string.isRequired,readonly:x().bool,setOperatorOption:x().func.isRequired};function Cf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Tf(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Cf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function ay(a){var e=iy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function iy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Mo=vt.ConfigUtils,oy=Mo.getFieldConfig,uy=Mo.getOperatorConfig,ly=Mo.getFieldWidgetConfig,sy=Mo.getFieldParts,cy=vt.RuleUtils.isEmptyRuleProperties,wf=function(a){It(t,a);var e=ay(t);function t(n){var r;return ot(this,t),r=e.call(this,n),xr(kt(r)),r.removeSelf=r.removeSelf.bind(kt(r)),r.setLock=r.setLock.bind(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["selectedField","selectedFieldSrc","selectedFieldType","selectedOperator","config","reordableNodesCnt","isLocked"],o=!this.meta||u.map(function(l){return r[l]!==i[l]}).filter(function(l){return l}).length>0;o&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var i=r.selectedField,u=r.selectedFieldType,o=r.selectedOperator,l=r.config,c=r.reordableNodesCnt,f=r.isLocked,d=l.settings.keepInputOnChangeFieldSrc,v=sy(i,l),h=oy(l,i),m=h&&h.type=="!struct",S=d&&u,b=!!i||S,E=b&&o,L=uy(l,o,i),_=L&&L.options!=null,T=ly(l,i,o,null,null)||{},P=T.hideOperator,N=l.settings.canReorder&&c>1&&!f,G=b&&!P,J=b&&P&&T.operatorInlineLabel,W=E&&!m,B=E&&_;return{selectedFieldParts:v,selectedFieldWidgetConfig:T,showDragIcon:N,showOperator:G,showOperatorLabel:J,showWidget:W,showOperatorOptions:B}}},{key:"setLock",value:function(r){this.props.setLock(r)}},{key:"removeSelf",value:function(){var r=this,i=this.props,u=i.confirmFn,o=i.config,l=o.settings,c=l.renderConfirm,f=l.removeRuleConfirmOptions,d=function(){r.props.removeSelf()};f&&!this.isEmptyCurrentRule()?c.call(o.ctx,Tf(Tf({},f),{},{onOk:d,onCancel:null,confirmFn:u}),o.ctx):d()}},{key:"_buildWidgetProps",value:function(r){var i=r.selectedField,u=r.selectedFieldSrc,o=r.selectedFieldType,l=r.selectedOperator,c=r.operatorOptions,f=r.value,d=r.valueType,v=r.valueSrc,h=r.asyncListValues,m=r.valueError,S=r.parentField;return{field:i,fieldSrc:u,fieldType:o,operator:l,operatorOptions:c,value:f,valueType:d,valueSrc:v,asyncListValues:h,valueError:m,parentField:S}}},{key:"isEmptyCurrentRule",value:function(){var r=this.props.config,i=this._buildWidgetProps(this.props);return cy(i,r)}},{key:"renderField",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=r.parentField,l=r.groupId,c=r.id,f=r.selectedFieldSrc,d=r.selectedField,v=r.selectedFieldType,h=r.setField,m=r.setFieldSrc,S=i.settings.immutableFieldsMode;return g.createElement(Qu,{key:"field",classname:wn()(f=="func"?"rule--field--func":"rule--field"),config:i,canSelectFieldSource:!o,selectedField:d,selectedFieldSrc:f,selectedFieldType:v,setField:S?On:h,setFieldSrc:S?On:m,parentField:o,readonly:S||u,id:c,groupId:l})}},{key:"renderOperator",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=this.meta,l=o.selectedFieldParts,c=o.selectedFieldWidgetConfig,f=o.showOperator,d=o.showOperatorLabel,v=i.settings.immutableOpsMode;return g.createElement(ef,{key:"operator",config:i,selectedField:this.props.selectedField,selectedFieldSrc:this.props.selectedFieldSrc,selectedFieldType:this.props.selectedFieldType,selectedOperator:this.props.selectedOperator,setOperator:v?On:this.props.setOperator,selectedFieldParts:l,showOperator:f,showOperatorLabel:d,selectedFieldWidgetConfig:c,readonly:v||u,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=this.meta.showWidget,l=i.settings.immutableValuesMode;if(!o)return null;var c=g.createElement(Yi,bt({key:"values"},this._buildWidgetProps(this.props),{config:i,setValue:l?On:this.props.setValue,setValueSrc:l?On:this.props.setValueSrc,readonly:l||u,id:this.props.id,groupId:this.props.groupId}));return g.createElement(mr,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},c)}},{key:"renderOperatorOptions",value:function(){var r=this.props.config,i=this.meta.showOperatorOptions,u=r.settings,o=u.immutableOpsMode,l=u.immutableValuesMode;if(!i)return null;var c=g.createElement(Ef,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:o?On:this.props.setOperatorOption,config:r,readonly:l});return g.createElement(mr,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},c)}},{key:"renderBeforeWidget",value:function(){var r=this.props.config,i=r.settings.renderBeforeWidget;return i&&g.createElement(mr,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof i=="function"?i(this.props,r.ctx):i)}},{key:"renderAfterWidget",value:function(){var r=this.props.config,i=r.settings.renderAfterWidget;return i&&g.createElement(mr,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof i=="function"?i(this.props,r.ctx):i)}},{key:"renderError",value:function(){var r=this.props,i=r.config,u=r.valueError,o=i.settings,l=o.renderRuleError,c=o.showErrorMessage,f=u&&u.toArray().filter(function(d){return!!d}).shift()||null;return c&&f&&g.createElement("div",{className:"rule--error"},l?l({error:f},i.ctx):f)}},{key:"renderDrag",value:function(){var r=this.props.handleDraggerMouseDown,i=this.props.config,u=this.meta.showDragIcon,o=i.settings.renderIcon,l=function(d){return o?.(d,i.ctx)},c=g.createElement(l,{type:"drag"});return u&&g.createElement("div",{key:"rule-drag-icon",onMouseDown:r,className:"qb-drag-handler rule--drag-handler"},c)}},{key:"renderDel",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=i.settings,l=o.deleteLabel,c=o.immutableGroupsMode,f=o.renderButton,d=o.renderIcon,v=o.canDeleteLocked,h=function(b){return d(b,i.ctx)},m=function(b){return f(b,i.ctx)};return!c&&(!u||u&&v)&&g.createElement(m,{type:"delRule",onClick:this.removeSelf,label:l,config:i,renderIcon:h})}},{key:"renderLock",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=r.isTrueLocked,l=r.id,c=i.settings,f=c.lockLabel,d=c.lockedLabel,v=c.showLock,h=c.renderSwitch,m=function(b){return h(b,i.ctx)};return v&&!(u&&!o)&&g.createElement(m,{type:"lock",id:l,value:u,setValue:this.setLock,label:f,checkedLabel:d,hideLabel:!0,config:i})}},{key:"render",value:function(){var r=this.meta,i=r.showOperatorOptions,u=r.selectedFieldWidgetConfig,o=this.props,l=o.valueSrc,c=o.value,f=o.config,d=l.first()=="value"&&!i&&c.size==1&&u.fullWidth,v=f.settings.renderButtonGroup,h=function(P){return v(P,f.ctx)},m=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],S=g.createElement("div",{key:"rule-body",className:wn()("rule--body",d&&"can--shrink--value")},m),b=this.renderError(),E=this.renderDrag(),L=this.renderLock(),_=this.renderDel();return g.createElement(g.Fragment,null,E,g.createElement("div",{className:"rule--body--wrapper"},S,b),g.createElement("div",{className:"rule--header"},g.createElement(h,{config:f},L,_)))}}]),t}(g.Component);wf.propTypes={id:x().string.isRequired,groupId:x().string,selectedField:x().any,selectedFieldSrc:x().string,selectedFieldType:x().string,selectedOperator:x().string,operatorOptions:x().object,config:x().object.isRequired,value:x().any,valueSrc:x().any,valueType:x().any,asyncListValues:x().array,isDraggingMe:x().bool,isDraggingTempo:x().bool,parentField:x().string,valueError:x().any,isLocked:x().bool,isTrueLocked:x().bool,handleDraggerMouseDown:x().func,setField:x().func,setFieldSrc:x().func,setOperator:x().func,setOperatorOption:x().func,setLock:x().func,removeSelf:x().func,setValue:x().func,setValueSrc:x().func,reordableNodesCnt:x().number,totalRulesCnt:x().number,parentReordableNodesCnt:x().number};const fy=rm(Si("rule")(bi(wf)));var dy=O(22331),py=O.n(dy);function vy(a){var e=gy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function gy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hy=vt.DefaultUtils.defaultGroupConjunction,my=function(e,t){var n;return n=function(r){It(u,r);var i=vy(u);function u(o){var l;return ot(this,u),l=i.call(this,o),l._selectedConjunction=function(c){return c=c||l.props,c.conjunction||hy(c.config,c.field)},l.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setConjunction(l.props.path,c)},l.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setNot(l.props.path,c)},l.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setLock(l.props.path,c)},l.dummyFn=function(){},l.removeSelf=function(){l.props.actions.removeGroup(l.props.path)},l.addGroup=function(){l.props.actions.addGroup(l.props.path)},l.addCaseGroup=function(){l.props.actions.addCaseGroup(l.props.path)},l.addDefaultCaseGroup=function(){l.props.actions.addDefaultCaseGroup(l.props.path)},l.addRule=function(){var c=t=="rule_group"?l.props.field:null;l.props.actions.addRule(l.props.path,void 0,void 0,void 0,c)},l.setField=function(c,f,d){l.props.actions.setField(l.props.path,c,f,d)},l.setOperator=function(c){l.props.actions.setOperator(l.props.path,c)},l.setValue=function(c,f,d){l.props.actions.setValue(l.props.path,c,f,d)},l.pureShouldComponentUpdate=yi(kt(l)),xr(kt(l)),l.selectedConjunction=l._selectedConjunction(o),l.conjunctionOptions=l._getConjunctionOptions(o),l.dummyFn.isDummyFn=!0,l}return Vt(u,[{key:"shouldComponentUpdate",value:function(l,c){var f=this.props,d=this.state,v=this.pureShouldComponentUpdate(l,c);if(v&&d==c&&f!=l){var h=l.dragging.id||f.dragging.id,m=h==l.id,S=[];for(var b in l){var E=l[b]!=f[b];b=="dragging"&&!m&&(E=!1),E&&S.push(b)}S.length||(v=!1)}return v}},{key:"onPropsChanged",value:function(l){var c=l.config,f=l.id,d=l.conjunction,v=this.props.config,h=this.props.conjunction;(v!=c||h!=d)&&(this.selectedConjunction=this._selectedConjunction(l),this.conjunctionOptions=this._getConjunctionOptions(l))}},{key:"_getConjunctionOptions",value:function(l){var c=this;return Ro()(l.config.conjunctions,function(f,d){return{id:"conjunction-".concat(l.id,"-").concat(d),name:"conjunction[".concat(l.id,"]"),key:d,label:f.label,checked:d===c._selectedConjunction(l)}})}},{key:"render",value:function(){var l=this.props.dragging.id==this.props.id,c=this.props.path.size,f=this.props.config.settings.maxNesting,d=!l&&this.props.isDraggingTempo,v=this.props.fieldType||null,h=typeof f>"u"||c<f,m=c==1;return g.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[l?g.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:m,allowFurtherNesting:h,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:v,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,g.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:l,isDraggingTempo:d,onDragStart:this.props.onDragStart,isRoot:m,allowFurtherNesting:h,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:d?this.dummyFn:this.setConjunction,setNot:d?this.dummyFn:this.setNot,setLock:d?this.dummyFn:this.setLock,removeSelf:d?this.dummyFn:this.removeSelf,addGroup:d?this.dummyFn:this.addGroup,addCaseGroup:d?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:d?this.dummyFn:this.addDefaultCaseGroup,addRule:d?this.dummyFn:this.addRule,setField:d?this.dummyFn:this.setField,setOperator:d?this.dummyFn:this.setOperator,setValue:d?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:v,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),u}(g.Component),n.propTypes={config:x().object.isRequired,actions:x().object.isRequired,path:x().any.isRequired,id:x().string.isRequired,groupId:x().string,not:x().bool,conjunction:x().string,children1:x().any,onDragStart:x().func,reordableNodesCnt:x().number,field:x().any,fieldSrc:x().string,fieldType:x().string,parentField:x().string,isLocked:x().bool,isTrueLocked:x().bool,dragging:x().object,isDraggingTempo:x().bool},n};const Xi=function(a,e){var t=Po(function(n){return{dragging:n.dragging}},null,null,{context:Hi})(my(a,e));return t.displayName="ConnectedGroupContainer",t};function yy(a){var e=Sy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Sy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Oy={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},by="topRight",Lf=function(a){It(t,a);var e=yy(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.addGroup,l=r.removeSelf,c=r.setLock,f=r.isLocked,d=r.isTrueLocked,v=r.id,h=r.canAddGroup,m=r.canAddRule,S=r.canDeleteGroup,b=i.settings,E=b.immutableGroupsMode,L=b.addRuleLabel,_=b.addGroupLabel,T=b.delGroupLabel,P=b.groupActionsPosition,N=b.renderButton,G=b.renderIcon,J=b.renderSwitch,W=b.renderButtonGroup,B=b.lockLabel,Q=b.lockedLabel,se=b.showLock,z=b.canDeleteLocked,ne=function(De){return G(De,i.ctx)},ie=function(De){return N(De,i.ctx)},ve=function(De){return J(De,i.ctx)},ue=function(De){return W(De,i.ctx)},pe=Oy[P||by],me=se&&!(f&&!d)&&g.createElement(ve,{type:"lock",id:v,value:f,setValue:c,label:B,checkedLabel:Q,config:i}),Ee=!E&&m&&!f&&g.createElement(ie,{type:"addRule",onClick:u,label:L,readonly:f,config:i,renderIcon:ne}),Ie=!E&&h&&!f&&g.createElement(ie,{type:"addGroup",onClick:o,label:_,readonly:f,config:i,renderIcon:ne}),Ne=!E&&S&&(!f||f&&z)&&g.createElement(ie,{type:"delGroup",onClick:l,label:T,config:i,renderIcon:ne});return g.createElement("div",{className:"group--actions ".concat(pe)},g.createElement(ue,{config:i},me,Ee,Ie,Ne))}}]),t}(g.PureComponent);function _f(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Rf(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_f(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):_f(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Fy(a){var e=Ey();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Ey(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cy=vt.RuleUtils.isEmptyGroupChildren,Ty="topRight",zn=function(a){It(t,a);var e=Fy(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.childrenClassName=function(){return""},r.renderBeforeActions=function(){var i=r.props.config.settings.renderBeforeActions;return i==null?null:typeof i=="function"?i(r.props,r.props.config.ctx):i},r.renderAfterActions=function(){var i=r.props.config.settings.renderAfterActions;return i==null?null:typeof i=="function"?i(r.props,r.props.config.ctx):i},r.removeSelf=r.removeSelf.bind(kt(r)),r.setLock=r.setLock.bind(kt(r)),r.renderItem=r.renderItem.bind(kt(r)),r}return Vt(t,[{key:"isGroupTopPosition",value:function(){return py()(this.props.config.settings.groupActionsPosition||Ty,"top")}},{key:"setLock",value:function(r){this.props.setLock(r)}},{key:"removeSelf",value:function(){var r=this,i=this.props,u=i.confirmFn,o=i.config,l=o.settings,c=l.renderConfirm,f=l.removeGroupConfirmOptions,d=function(){r.props.removeSelf()};f&&!this.isEmptyCurrentGroup()?c.call(o.ctx,Rf(Rf({},f),{},{onOk:d,onCancel:null,confirmFn:u}),o.ctx):d()}},{key:"isEmptyCurrentGroup",value:function(){var r=this.props,i=r.children1,u=r.config;return Cy(i,u)}},{key:"render",value:function(){return g.createElement(g.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var r=this.props.config;return r.settings.showNot}},{key:"showConjs",value:function(){var r=this.props,i=r.conjunctionOptions,u=r.children1,o=r.config,l=Object.keys(i).length;return l>1||this.showNot()}},{key:"isNoChildren",value:function(){var r=this.props.children1;return r?r.size==0:!0}},{key:"isOneChild",value:function(){var r=this.props.children1;return r?r.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var r=this.props.children1;return r&&g.createElement("div",{key:"group-children",className:wn()("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var r=this.isGroupTopPosition();return g.createElement("div",{key:"group-header",className:wn()("group--header",this.isOneChild()?"one--child":"",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"")},this.renderHeader(),r&&this.renderBeforeActions(),r&&this.renderActions(),r&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var r=this.isGroupTopPosition();return!r&&g.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.addGroup,l=r.isLocked,c=r.isTrueLocked,f=r.id;return g.createElement(Lf,{config:i,addRule:u,addGroup:o,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:l,isTrueLocked:c,id:f})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var r=this.props.config.settings.maxNumberOfRules,i=this.props.totalRulesCnt;return r?i<r:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var r=this.props.children1;return r?r.map(this.renderItem).toList():null}},{key:"renderItem",value:function(r){var i=this.props,u=i.config,o=i.actions,l=i.onDragStart,c=i.isLocked,f=r.get("type")=="group"&&r.getIn(["properties","field"])!=null,d=f?"rule_group":r.get("type");return g.createElement(Xu,bt({},this.extraPropsForItem(r),{key:r.get("id"),id:r.get("id"),groupId:i.id,path:r.get("path"),type:d,properties:r.get("properties"),config:u,actions:o,children1:r.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(r),totalRulesCnt:this.totalRulesCntForItem(r),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:l,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:c}))}},{key:"extraPropsForItem",value:function(r){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(r){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(r){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var r=this.props,i=r.config,u=r.isRoot,o=r.isLocked,l=this.reordableNodesCnt();return i.settings.canReorder&&!u&&l>1&&!o}},{key:"renderDrag",value:function(){var r=this.props.handleDraggerMouseDown,i=this.props.config,u=i.settings.renderIcon,o=function(f){return u?.(f,i.ctx)},l=g.createElement(o,{type:"drag"});return this.showDragIcon()&&g.createElement("div",{key:"group-drag-icon",onMouseDown:r,className:"qb-drag-handler group--drag-handler"},l)}},{key:"conjunctionOptions",value:function(){var r=this.props.conjunctionOptions;return r}},{key:"renderConjs",value:function(){var r=this.props,i=r.config,u=r.children1,o=r.id,l=r.selectedConjunction,c=r.setConjunction,f=r.not,d=r.setNot,v=r.isLocked,h=i.settings,m=h.immutableGroupsMode,S=h.renderConjs,b=h.showNot,E=h.notLabel,L=this.conjunctionOptions();if(!this.showConjs()||!u||!u.size)return null;var _={disabled:this.isOneChild(),readonly:m||v,selectedConjunction:l,setConjunction:m?On:c,conjunctionOptions:L,config:i,not:f||!1,id:o,setNot:m?On:d,notLabel:E,showNot:this.showNot(),isLocked:v};return S(_,i.ctx)}},{key:"renderHeader",value:function(){return g.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),t}(g.Component);zn.propTypes={reordableNodesCnt:x().number,conjunctionOptions:x().object.isRequired,allowFurtherNesting:x().bool.isRequired,isRoot:x().bool.isRequired,not:x().bool,selectedConjunction:x().string,config:x().object.isRequired,id:x().string.isRequired,groupId:x().string,path:x().any,children1:x().any,isDraggingMe:x().bool,isDraggingTempo:x().bool,isLocked:x().bool,isTrueLocked:x().bool,handleDraggerMouseDown:x().func,onDragStart:x().func,addRule:x().func.isRequired,addGroup:x().func.isRequired,removeSelf:x().func.isRequired,setConjunction:x().func.isRequired,setNot:x().func.isRequired,setLock:x().func.isRequired,actions:x().object.isRequired};const wy=Xi(Si("group")(bi(zn)),"group");function Ly(a,e){for(;!Object.prototype.hasOwnProperty.call(a,e)&&(a=ke(a),a!==null););return a}function qn(){return typeof Reflect<"u"&&Reflect.get?qn=Reflect.get.bind():qn=function(e,t,n){var r=Ly(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qn.apply(this,arguments)}function _y(a){var e=Ry();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Ry(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ay=function(a){It(t,a);var e=_y(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.canAddRule,l=r.canDeleteGroup,c=r.removeSelf,f=r.setLock,d=r.isLocked,v=r.isTrueLocked,h=r.id,m=i.settings,S=m.immutableGroupsMode,b=m.addRuleLabel,E=m.delGroupLabel,L=m.renderButton,_=m.renderIcon,T=m.renderSwitch,P=m.renderButtonGroup,N=m.lockLabel,G=m.lockedLabel,J=m.showLock,W=m.canDeleteLocked,B=function(pe){return _(pe,i.ctx)},Q=function(pe){return L(pe,i.ctx)},se=function(pe){return T(pe,i.ctx)},z=function(pe){return P(pe,i.ctx)},ne=J&&!(d&&!v)&&g.createElement(se,{type:"lock",id:h,value:d,setValue:f,label:N,checkedLabel:G,hideLabel:!0,config:i}),ie=!S&&o&&!d&&g.createElement(Q,{type:"addRuleGroup",onClick:u,label:b,readonly:d,config:i,renderIcon:B}),ve=!S&&l&&(!d||d&&W)&&g.createElement(Q,{type:"delRuleGroup",onClick:c,label:E,config:i,renderIcon:B});return g.createElement("div",{className:"group--actions"},g.createElement(z,{config:i},ne,ie,ve))}}]),t}(g.PureComponent);function Af(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Pf(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Af(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Af(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Py(a){var e=Iy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Iy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var If=function(a){It(t,a);var e=Py(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.childrenClassName=function(){return"rule_group--children"},r.renderHeaderWrapper=function(){return null},r.renderFooterWrapper=function(){return null},r.renderConjs=function(){return null},r.canAddGroup=function(){return!1},r.canAddRule=function(){return!0},r.canDeleteGroup=function(){return!1},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){}},{key:"reordableNodesCntForItem",value:function(r){if(this.props.isLocked)return 0;var i=this.props.children1;return i?.size||0}},{key:"renderChildrenWrapper",value:function(){return g.createElement(g.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),qn(ke(t.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedFieldSrc,l=r.selectedFieldType,c=r.setField,f=r.setFieldSrc,d=r.parentField,v=r.id,h=r.groupId,m=r.isLocked,S=i.settings.immutableFieldsMode;return g.createElement(Qu,{key:"field",classname:"group--field",config:i,canSelectFieldSource:!1,selectedField:u,selectedFieldSrc:o,selectedFieldType:l,setField:c,setFieldSrc:f,parentField:d,readonly:S||m,id:v,groupId:h})}},{key:"renderActions",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.isLocked,l=r.isTrueLocked,c=r.id;return g.createElement(Ay,{config:i,addRule:u,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:l,id:c})}},{key:"extraPropsForItem",value:function(r){return{parentField:this.props.selectedField}}}]),t}(zn);If.propTypes=Pf(Pf({},zn.propTypes),{},{selectedField:x().any,selectedFieldSrc:x().string,parentField:x().string,setField:x().func,setFieldSrc:x().func});const jy=Xi(Si("group rule_group")(bi(If)),"rule_group");function Dy(a){var e=Vy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Vy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ny=function(a){It(t,a);var e=Dy(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.canAddRule,l=r.canDeleteGroup,c=r.removeSelf,f=r.setLock,d=r.isLocked,v=r.isTrueLocked,h=r.id,m=i.settings,S=m.immutableGroupsMode,b=m.addSubRuleLabel,E=m.delGroupLabel,L=m.renderButton,_=m.renderIcon,T=m.renderSwitch,P=m.renderButtonGroup,N=m.lockLabel,G=m.lockedLabel,J=m.showLock,W=m.canDeleteLocked,B=function(pe){return _(pe,i.ctx)},Q=function(pe){return L(pe,i.ctx)},se=function(pe){return T(pe,i.ctx)},z=function(pe){return P(pe,i.ctx)},ne=J&&!(d&&!v)&&g.createElement(se,{type:"lock",id:h,value:d,setValue:f,label:N,checkedLabel:G,config:i}),ie=!S&&o&&!d&&g.createElement(Q,{type:"addRuleGroupExt",onClick:u,label:b,readonly:d,config:i,renderIcon:B}),ve=!S&&l&&(!d||d&&W)&&g.createElement(Q,{type:"delRuleGroup",onClick:c,label:E,config:i,renderIcon:B});return g.createElement("div",{className:"group--actions group--actions--tr"},g.createElement(z,{config:i},ne,ie,ve))}}]),t}(g.PureComponent);function jf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Df(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):jf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function xy(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=My(a))||e&&a&&typeof a.length=="number"){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,u=!1,o;return{s:function(){t=t.call(a)},n:function(){var c=t.next();return i=c.done,c},e:function(c){u=!0,o=c},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(u)throw o}}}}function My(a,e){if(a){if(typeof a=="string")return Vf(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vf(a,e)}}function Vf(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function ky(a){var e=Gy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Gy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Nf=vt.ConfigUtils,xf=Nf.getFieldConfig,$y=Nf.getFieldWidgetConfig,By=vt.RuleUtils.isEmptyRuleGroupExtPropertiesAndChildren,Mf=function(a){It(t,a);var e=ky(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.childrenClassName=function(){return"rule_group_ext--children"},r.renderFooterWrapper=function(){return null},r.canAddGroup=function(){return!1},r.canAddRule=function(){return!0},r.canDeleteGroup=function(){return!0},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){}},{key:"renderHeaderWrapper",value:function(){return g.createElement("div",{key:"group-header",className:wn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return g.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return g.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedOperator,l=xf(i,u)||{};return l.showNot!=null?l.showNot:i.settings.showNot}},{key:"conjunctionOptions",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedOperator,l=xf(i,u)||{},c=qn(ke(t.prototype),"conjunctionOptions",this).call(this);if(l.conjunctions){var f={},d=xy(l.conjunctions),v;try{for(d.s();!(v=d.n()).done;){var h=v.value,m=c[h];m&&(f[h]=m)}}catch(S){d.e(S)}finally{d.f()}c=f}return c}},{key:"renderField",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedFieldSrc,l=r.selectedFieldType,c=r.setField,f=r.setFieldSrc,d=r.parentField,v=r.id,h=r.groupId,m=r.isLocked,S=i.settings.immutableFieldsMode;return g.createElement(Qu,{key:"field",classname:"rule--field",config:i,canSelectFieldSource:!1,selectedField:u,selectedFieldSrc:o,selectedFieldType:l,setField:c,setFieldSrc:f,parentField:d,readonly:S||m,id:v,groupId:h})}},{key:"renderOperator",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedFieldSrc,l=r.selectedOperator,c=r.setField,f=r.setOperator,d=r.isLocked,v=i.settings.immutableFieldsMode,h=$y(i,u,l)||{},m=h.hideOperator,S=u&&m&&h.operatorInlineLabel,b=u&&!m;return g.createElement(ef,{key:"operator",classname:"group--operator",config:i,selectedField:u,selectedFieldSrc:o,selectedOperator:l,setOperator:f,selectedFieldPartsLabels:["group"],showOperator:b,showOperatorLabel:S,selectedFieldWidgetConfig:h,readonly:v||d,id:this.props.id,groupId:this.props.groupId})}},{key:"isEmptyCurrentGroup",value:function(){var r=this.props,i=r.children1,u=r.config,o=this._buildWidgetProps(this.props);return By(o,i,u)}},{key:"_buildWidgetProps",value:function(r){var i=r.selectedField,u=r.selectedFieldSrc,o=r.selectedFieldType,l=r.selectedOperator,c=r.operatorOptions,f=r.value,d=r.valueType,v=r.valueSrc,h=r.asyncListValues,m=r.valueError,S=r.parentField;return{field:i,fieldSrc:u,fieldType:o,operator:l,operatorOptions:c,value:f,valueType:d,valueSrc:["value"],valueError:null,parentField:S}}},{key:"renderWidget",value:function(){var r=this.props,i=r.config,u=r.selectedField,o=r.selectedOperator,l=r.isLocked,c=i.settings.immutableValuesMode,f=u&&o,d=f;if(!d)return null;var v=g.createElement(Yi,bt({key:"values",isForRuleGroup:!0},this._buildWidgetProps(this.props),{config:i,setValue:c?On:this.props.setValue,setValueSrc:On,readonly:c||l,id:this.props.id,groupId:this.props.groupId}));return g.createElement(mr,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},v)}},{key:"renderActions",value:function(){var r=this.props,i=r.config,u=r.addRule,o=r.isLocked,l=r.isTrueLocked,c=r.id;return g.createElement(Ny,{config:i,addRule:u,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:l,id:c})}},{key:"reordableNodesCntForItem",value:function(r){if(this.props.isLocked)return 0;var i=this.props.children1;return i?.size||0}},{key:"extraPropsForItem",value:function(r){return{parentField:this.props.selectedField}}}]),t}(zn);Mf.propTypes=Df(Df({},zn.propTypes),{},{selectedField:x().any,selectedFieldSrc:x().string,selectedOperator:x().string,value:x().any,parentField:x().string,setField:x().func,setFieldSrc:x().func,setOperator:x().func,setValue:x().func});const Wy=Xi(Si("group rule_group_ext")(bi(Mf)),"rule_group");function Uy(a){var e=zy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function zy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qy={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},Ky="topRight",Hy=function(a){It(t,a);var e=Uy(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.config,u=r.addCaseGroup,o=r.addDefaultCaseGroup,l=r.setLock,c=r.isLocked,f=r.isTrueLocked,d=r.id,v=r.canAddGroup,h=r.canAddDefault,m=i.settings,S=m.immutableGroupsMode,b=m.addCaseLabel,E=m.addDefaultCaseLabel,L=m.groupActionsPosition,_=m.renderButton,T=m.renderIcon,P=m.renderSwitch,N=m.renderButtonGroup,G=m.lockLabel,J=m.lockedLabel,W=m.showLock,B=function(me){return T(me,i.ctx)},Q=function(me){return _(me,i.ctx)},se=function(me){return P(me,i.ctx)},z=function(me){return N(me,i.ctx)},ne=qy[L||Ky],ie=W&&!(c&&!f)&&g.createElement(se,{type:"lock",id:d,value:c,setValue:l,label:G,checkedLabel:J,config:i}),ve=!S&&v&&!c&&g.createElement(Q,{type:"addCaseGroup",onClick:u,label:b,readonly:c,config:i,renderIcon:B}),ue=!S&&h&&!c&&g.createElement(Q,{type:"addDefaultCaseGroup",onClick:o,label:E,readonly:c,config:i,renderIcon:B});return g.createElement("div",{className:"group--actions ".concat(ne)},g.createElement(z,{config:i},ie,ve,ue))}}]),t}(g.PureComponent);function kf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Jy(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):kf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Qy(a){var e=Yy();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function Yy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gf=vt.TreeUtils,Xy=Gf.getTotalReordableNodesCountInTree,Zy=Gf.getTotalRulesCountInTree,$f=function(a){It(t,a);var e=Qy(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.childrenClassName=function(){return"switch_group--children"},r.renderFooterWrapper=function(){return null},r.hasDefaultCase=function(){var i;return((i=r.props.children1)===null||i===void 0?void 0:i.size)&&r.props.children1.filter(function(u){return u.get("children1")==null}).size>0},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){}},{key:"canAddGroup",value:function(){var r,i=this.props.config.settings.maxNumberOfCases,u=((r=this.props.children1)===null||r===void 0?void 0:r.size)||0;return i?u<i:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var r,i=((r=this.props.children1)===null||r===void 0?void 0:r.size)||0,u=i;return this.hasDefaultCase()&&u--,u}},{key:"totalRulesCntForItem",value:function(r){return Zy(r)}},{key:"reordableNodesCntForItem",value:function(r){var i;if(this.props.isLocked)return 0;var u=this.props.config.settings,o=u.canLeaveEmptyCase,l=u.canRegroupCases,c=((i=this.props.children1)===null||i===void 0?void 0:i.size)||0,f=c;this.hasDefaultCase()&&f--;var d=Xy(r),v=d;return v==1&&l&&o&&f>1&&(v=111),v}},{key:"renderHeaderWrapper",value:function(){return g.createElement("div",{key:"group-header",className:wn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return g.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var r=this.props.config,i=r.settings.renderSwitchPrefix;return i||null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var r=this.props,i=r.config,u=r.addCaseGroup,o=r.addDefaultCaseGroup,l=r.isLocked,c=r.isTrueLocked,f=r.id;return g.createElement(Hy,{config:i,addCaseGroup:u,addDefaultCaseGroup:o,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:l,isTrueLocked:c,id:f})}}]),t}(zn);$f.propTypes=Jy({},zn.propTypes);const eS=Xi(Si("group switch_group")(bi($f)),"switch_group");function Bf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Wf(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Bf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function tS(a){var e=rS();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function rS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uf=function(a){It(t,a);var e=tS(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.childrenClassName=function(){return"case_group--children"},r.renderFooterWrapper=function(){return null},xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(r){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(r){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:qn(ke(t.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return g.createElement("div",{key:"group-header",className:wn()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:g.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var r=this.props.config.settings.defaultCaseLabel;return r||""}return g.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:qn(ke(t.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:qn(ke(t.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:qn(ke(t.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var r=this.props,i=r.config,u=r.isLocked,o=r.value,l=r.setValue,c=r.id,f=i.settings.immutableValuesMode,d=g.createElement(Yi,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:o,valueSrc:"value",valueError:null,config:i,setValue:f?On:l,setValueSrc:On,readonly:f||u,id:c,groupId:null});return g.createElement(mr,{className:"case_group--value"},d)}},{key:"renderActions",value:function(){var r=this.props,i=r.config,u=r.addGroup,o=r.addRule,l=r.isLocked,c=r.isTrueLocked,f=r.id;return g.createElement(Lf,{config:i,addGroup:u,addRule:o,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:l,isTrueLocked:c,id:f})}},{key:"isEmptyCurrentGroup",value:function(){var r=this.props.value,i=r&&r.size?r.get(0):null,u=i!=null&&(Array.isArray(i)?i.length>0:!0);return qn(ke(t.prototype),"isEmptyCurrentGroup",this).call(this)&&!u}}]),t}(zn);Uf.propTypes=Wf(Wf({},zn.propTypes),{},{parentReordableNodesCnt:x().number,value:x().any,setValue:x().func});const nS=Xi(Si("group case_group")(bi(Uf)),"case_group");var aS=["type"];function iS(a){var e=oS();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function oS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function Yu(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):zf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var uS=["rule","group","rule_group","switch_group","case_group"],Fi=function(e){var t,n=((t=e.properties)===null||t===void 0?void 0:t.toObject())||{},r=Yu({},n);return e.isParentLocked&&(r.isLocked=!0),n.isLocked&&(r.isTrueLocked=!0),r},lS={rule:function(e){return g.createElement(fy,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return g.createElement(wy,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return g.createElement(jy,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return g.createElement(Wy,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return g.createElement(eS,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return g.createElement(nS,bt({},Fi(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},Xu=function(a){It(t,a);var e=iS(t);function t(){return ot(this,t),e.apply(this,arguments)}return Vt(t,[{key:"render",value:function(){var r,i=this.props,u=i.type,o=Qi(i,aS),l=(r=o.properties)===null||r===void 0?void 0:r.get("mode"),c=l=="array"?"_ext":"",f=o.config.settings.renderItem,d=lS[u+c];return f?f(Yu(Yu({},o),{},{type:u,itemComponent:d}),o.config.ctx):d?d(o):null}}]),t}(g.PureComponent);Xu.propTypes={config:x().object.isRequired,id:x().string.isRequired,groupId:x().string,type:x().oneOf(uS).isRequired,path:x().any.isRequired,properties:x().any.isRequired,children1:x().any,actions:x().object.isRequired,reordableNodesCnt:x().number,onDragStart:x().func,parentField:x().string,isDraggingTempo:x().bool,isParentLocked:x().bool};function sS(a){var e=cS();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function cS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qf=vt.TreeUtils,fS=qf.getTotalReordableNodesCountInTree,dS=qf.getTotalRulesCountInTree,Kf=vt.DefaultUtils,pS=Kf.createListFromArray,Hf=Kf.emptyProperies,Jf=function(a){It(t,a);var e=sS(t);function t(n){var r;return ot(this,t),r=e.call(this,n),r.pureShouldComponentUpdate=yi(kt(r)),r._updPath(n),r}return Vt(t,[{key:"shouldComponentUpdate",value:function(r,i){var u=this.props,o=this.pureShouldComponentUpdate(r,i);if(o){var l=[];for(var c in r){var f=r[c]!==u[c];f&&c!="__isInternalValueChange"&&l.push(c)}l.length||(o=!1),l.length==1&&l[0]=="tree"&&r.__isInternalValueChange&&(o=!1)}return o}},{key:"_updPath",value:function(r){var i=r.tree.get("id");this.path=pS([i])}},{key:"render",value:function(){var r=this.props.tree,i=r.get("type"),u=i=="switch_group",o=u?null:fS(r),l=u?null:dS(r),c=r.get("id");return g.createElement(Xu,{key:c,id:c,path:this.path,type:i,properties:r.get("properties")||Hf(),config:this.props.config,actions:this.props.actions,children1:r.get("children1")||Hf(),reordableNodesCnt:o,totalRulesCnt:l,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),t}(g.Component);Jf.propTypes={tree:x().any.isRequired,config:x().object.isRequired,actions:x().object.isRequired,onDragStart:x().func};const vS=cm(Jf);function Qf(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function gS(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qf(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Qf(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function hS(a){var e=mS();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function mS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yS=vt.clone,Zu=vt.ConfigUtils,Zi=Zu.getFieldConfig,Yf=Zu.getFieldParts,Xf=Zu.getFieldPathParts,Zf=vt.RuleUtils,ed=Zf.getFieldPathLabels,SS=Zf.getWidgetForFieldOp,td=function(a){It(t,a);var e=hS(t);function t(n){var r;return ot(this,t),r=e.call(this,n),xr(kt(r)),r.onPropsChanged(n),r}return Vt(t,[{key:"onPropsChanged",value:function(r){var i=this.props,u=["config","field","fieldSrc","fieldType","operator","isFuncArg","parentField"],o=["config","field","fieldSrc","fieldType","operator","value","placeholder","isFuncArg","parentField"],l=!this.items||u.map(function(f){return r[f]!==i[f]}).filter(function(f){return f}).length>0,c=!this.meta||o.map(function(f){return r[f]!==i[f]}).filter(function(f){return f}).length>0;l&&(this.items=this.getItems(r)),c&&(this.meta=this.getMeta(r))}},{key:"getItems",value:function(r){var i=r.config,u=r.field,o=r.fieldType,l=r.operator,c=r.parentField,f=r.isFuncArg,d=r.fieldDefinition,v=i.settings.canCompareFieldWithField,h=i.settings.fieldSeparator,m=Yf(c,i),S=c?Zi(i,c):null,b=c?S?.subfields:i.fields,E=this.filterFields(i,b,u,c,m,l,v,f,d,o),L=this.buildOptions(m,i,E,m);return L}},{key:"getMeta",value:function(r){var i,u=r.config,o=r.field,l=r.fieldType,c=r.operator,f=r.value,d=r.placeholder,v=r.isFuncArg,h=r.parentField,m=u.settings,S=m.fieldPlaceholder,b=m.fieldSeparatorDisplay,E=f,L=!!f,_=o?Zi(u,o):{},T=_==null||(i=_.widgets)===null||i===void 0?void 0:i.field,P=T?.widgetProps||{},N=L?null:v&&d||P.valuePlaceholder||S,G=L?Zi(u,E):null,J=G||{},W=Xf(E,u),B=Xf(E,u,!0),Q=this.getFieldLabel(G,E,u),se=ed(E,u),z=se?se.join(b):null;(z==Q||h)&&(z=null);var ne=J.label2;return{placeholder:N,selectedKey:E,selectedKeys:W,selectedPath:B,selectedLabel:Q,selectedOpts:J,selectedAltLabel:ne,selectedFullLabel:z}}},{key:"filterFields",value:function(r,i,u,o,l,c,f,d,v,h){i=yS(i);var m=r.settings.fieldSeparator,S=Zi(r,u),b=!1,E=SS(r,u,c,"value"),L=r.widgets[E],_;d?_=v?.type:b&&L?_=L.type:S?_=S.type:_=h;function T(P,N){for(var G in P){var J=P[G].subfields,W=(N||[]).concat(G),B=W.join(m),Q=Zi(r,B);if(!Q)delete P[G];else if(Q.type=="!struct"||Q.type=="!group")T(J,W)==0&&delete P[G];else{var se=(!_||Q.type==_)&&(d?!0:B!=u),z=f||r.settings.canCompareFieldWithField;z&&(se=se&&z(u,S,B,Q,c)),se||delete P[G]}}return Oi()(P).length}return T(i,l||[]),i}},{key:"buildOptions",value:function(r,i,u){var o=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var f=i.settings,d=f.fieldSeparator,v=f.fieldSeparatorDisplay,h=l!=null&&l.length?l.join(d)+d:"";return Oi()(u).map(function(m){var S=[].concat(Ln(l??[]),[m]),b=u[m],E=o.getFieldLabel(b,S,i),L=ed(S,i),_=L.join(v);(_==E||r)&&(_=null);var T=b.label2,P=b.tooltip;if(!b.hideForCompare)return b.type=="!struct"||b.type=="!group"?{key:m,path:h+m,label:E,fullLabel:_,altLabel:T,tooltip:P,items:o.buildOptions(r,i,b.subfields,S,{label:E,tooltip:P})}:{key:m,path:h+m,label:E,fullLabel:_,altLabel:T,tooltip:P,grouplabel:c?.label,group:c}}).filter(function(m){return!!m})}},{key:"getFieldLabel",value:function(r,i,u){if(!i)return null;var o=u.settings.maxLabelsLength,l=Yf(i,u),c=r?.label||Eo()(l);return c=Vo(c,o),c}},{key:"render",value:function(){var r=this.props,i=r.config,u=r.customProps,o=r.setValue,l=r.readonly,c=r.id,f=r.groupId,d=i.settings.renderField,v=gS({isValueField:!0,config:i,customProps:u,setField:o,readonly:l,items:this.items,id:c,groupId:f},this.meta);return d(v,i.ctx)}}]),t}(g.Component);td.propTypes={id:x().string,groupId:x().string,setValue:x().func.isRequired,config:x().object.isRequired,field:x().any,fieldSrc:x().string,fieldType:x().string,value:x().string,operator:x().string,customProps:x().object,readonly:x().bool,parentField:x().string,fieldDefinition:x().object,isFuncArg:x().bool};const OS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.labelYes,i=a.labelNo,u=a.readonly,o=a.customProps,l=o===void 0?{}:o,c=l.radioYes||{},f=l.radioNo||{},d=function(m){return t(m.target.checked)},v=function(m){return t(m.target.value=="true")};return g.createElement(g.Fragment,null,g.createElement("input",bt({type:"radio",value:!0,checked:!!e,disabled:u,onChange:v},c))," ",r,g.createElement("input",bt({type:"radio",value:!1,checked:!e,disabled:u,onChange:v},f))," ",i)},bS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.readonly,i=a.placeholder,u=a.maxLength,o=a.customProps,l=function(d){var v=d.target.value;v===""&&(v=void 0),t(v)},c=e||"";return g.createElement("input",bt({type:"text",value:c,placeholder:i,disabled:r,onChange:l,maxLength:u},o))},FS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.readonly,i=a.placeholder,u=a.maxLength,o=a.maxRows,l=a.fullWidth,c=a.customProps,f=function(h){var m=h.target.value;m===""&&(m=void 0),t(m)},d=e||"";return g.createElement("textarea",bt({value:d,placeholder:i,disabled:r,onChange:f,maxLength:u,style:{width:l?"100%":void 0}},c))};var rb=vt.moment;const ES=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.valueFormat,i=a.readonly,u=a.customProps,o=function(c){var f=c.target.value;f==""&&(f=void 0),t(f)};return g.createElement("input",bt({type:"date",value:e||"",disabled:i,onChange:o},u))},CS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.valueFormat,i=a.use12Hours,u=a.readonly,o=a.customProps,l=function(f){var d=f.target.value;d==""&&(d=void 0),t(d)};return g.createElement("input",bt({type:"time",value:e||"",disabled:u,onChange:l},o))};var rd=vt.moment;const TS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.valueFormat,i=a.use12Hours,u=a.readonly,o=a.customProps,l=function(d){var v=d.target.value;v==""?v=void 0:v=rd(new Date(v)).format(r),t(v)},c=e;return e?c=rd(e).format("YYYY-MM-DDTHH:mm"):c="",g.createElement("input",bt({type:"datetime-local",value:c,disabled:u,onChange:l},o))};var wS=vt.ListUtils.mapListValues;const LS=function(a){var e=a.listValues,t=a.value,n=a.setValue,r=a.allowCustomValues,i=a.readonly,u=a.customProps,o=function(){return wS(e,function(d){var v=d.title,h=d.value;return g.createElement("option",{key:h,value:h},v)})},l=function(d){for(var v=[],h=d.options,m=0;m<h.length;m++){var S=h[m];S.selected&&v.push(S.value)}return v.length||(v=void 0),v},c=function(d){return n(l(d.target))};return g.createElement("select",bt({multiple:!0,onChange:c,value:t,disabled:i},Ct()(u,["showSearch","input","showCheckboxes"])),o())};var _S=vt.ListUtils.mapListValues;const RS=function(a){var e=a.listValues,t=a.value,n=a.setValue,r=a.allowCustomValues,i=a.readonly,u=a.customProps,o=function(){return _S(e,function(d){var v=d.title,h=d.value;return g.createElement("option",{key:h,value:h},v)})},l=function(d){return n(d.target.value)},c=t!=null;return g.createElement("select",bt({onChange:l,value:c?t:"",disabled:i},Ct()(u,["showSearch","input"])),!c&&g.createElement("option",{disabled:!0,value:""}),o())},AS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.readonly,i=a.min,u=a.max,o=a.step,l=a.placeholder,c=a.customProps,f=function(h){var m=h.target.value;m===""||m===null?m=void 0:m=Number(m),t(m)},d=e??"";return g.createElement("input",bt({type:"number",value:d,placeholder:l,disabled:r,min:i,max:u,step:o,onChange:f},c))},PS=function(a){var e=a.value,t=a.setValue,n=a.config,r=a.readonly,i=a.min,u=a.max,o=a.step,l=a.placeholder,c=a.customProps,f=c===void 0?{}:c,d=f.input||{},v=f.slider||f,h=function(b){var E=b.target.value;E===""||E===null?E=void 0:E=Number(E),t(E)},m=e??"";return g.createElement("div",{style:{display:"inline-flex"}},g.createElement("input",bt({key:"number",type:"number",value:m,placeholder:l,disabled:r,min:i,max:u,step:o,onChange:h},d)),g.createElement("input",bt({key:"range",type:"range",value:m,disabled:r,min:i,max:u,step:o,onChange:h},v)))},IS=function(a){var e=a.items,t=a.setField,n=a.selectedKey,r=a.readonly,i=a.errorText,u=function c(f){return f.map(function(d){var v=d.items,h=d.path,m=d.label,S=d.disabled,b=d.matchesType;if(v)return g.createElement("optgroup",{disabled:S,key:h,label:m},c(v));var E=b?{fontWeight:"bold"}:{};return g.createElement("option",{disabled:S,key:h,value:h,style:E},m)})},o=function(f){return t(f.target.value)},l=n!=null;return g.createElement("select",{onChange:o,value:l?n:"",disabled:r,style:{color:i?"red":null}},!l&&g.createElement("option",{disabled:!0,value:""}),u(e))},jS=function(a){var e=a.id,t=a.not,n=a.setNot,r=a.conjunctionOptions,i=a.setConjunction,u=a.disabled,o=a.readonly,l=a.config,c=a.showNot,f=a.notLabel,d=Object.keys(r).length,v=u,h=l.settings.forceShowConj,m=h||d>1&&!v,S=function(){return Object.keys(r).map(function(T){var P=r[T],N=P.id,G=P.name,J=P.label,W=P.checked,B=i.isDummyFn?"__dummy":"";return(o||u)&&!W?null:[g.createElement("input",{key:N+B,type:"radio",id:N+B,name:G+B,checked:W,disabled:o||u,value:T,onChange:E}),g.createElement("label",{key:N+B+"label",htmlFor:N+B},J)]})},b=function(){var T="not";return[g.createElement("input",{key:e+T,type:"checkbox",id:e+T,checked:t,disabled:o,onChange:L}),g.createElement("label",{key:e+T+"label",htmlFor:e+T},f||"NOT")]},E=function(T){return i(T.target.value)},L=function(T){return n(T.target.checked)};return[c&&b(),m&&S()]};var DS={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"};const VS=function(a){var e=a.type,t=a.label,n=a.onClick,r=a.readonly,i=t||DS[e];return g.createElement("button",{onClick:n,type:"button",disabled:r},i)},NS=function(a){var e=a.type,t={},n=t[e]||null;return!n&&e==="drag"&&(n=g.createElement(Zc,null)),n},xS=function(a){var e=a.children,t=a.config;return g.createElement(g.Fragment,null,e)},MS=function(a){var e=a.config,t=a.valueSources,n=a.valueSrc,r=a.title,i=a.setValueSrc,u=a.readonly,o=function(f){return f.map(function(d){var v=lf(d,2),h=v[0],m=v[1];return g.createElement("option",{key:h,value:h},m.label)})},l=function(f){return i(f.target.value)};return g.createElement("select",{onChange:l,value:n||"",disabled:u},o(t))},kS=function(a){var e=a.value,t=a.setValue,n=a.label,r=a.id,i=a.config,u=a.type,o=function(f){return t(f.target.checked)},l=u;return[g.createElement("input",{key:r+l,type:"checkbox",id:r+l,checked:!!e,onChange:o}),g.createElement("label",{key:r+l+"label",htmlFor:r+l},n)]},GS=function(a){var e=a.onOk,t=a.okText,n=a.cancelText,r=a.title;confirm(r)&&e()};var $S=function(e){var t=e.config,n=e.children;return n};function BS(a){var e=WS();return function(){var n=ke(a),r;if(e){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nt(this,r)}}function WS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var el=function(a){It(t,a);var e=BS(t);function t(){var n;ot(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i)),n.handleChange=function(o){n.props.setOption("proximity",parseInt(o))},n}return Vt(t,[{key:"render",value:function(){var r=this.props,i=r.defaults,u=r.options,o=r.config,l=r.optionLabel,c=r.optionPlaceholder,f=r.customProps,d=r.minProximity,v=r.maxProximity,h=r.optionTextBefore,m=r.readonly,S=o.settings,b=o.widgets,E=o.ctx,L=i?i.proximity:void 0,_=S.showLabels,T=u.get("proximity",L),P=Uu()(d,v+1).map(function(J){return{title:J,value:J}}),N=b.select.factory,G=function(W){return N(W,E)};return g.createElement("div",{className:"operator--PROXIMITY"},g.createElement("div",{className:"operator--options"},_&&g.createElement("label",{className:"rule--label"},l),!_&&h&&g.createElement("div",{className:"operator--options--sep"},g.createElement("span",null,h)),g.createElement(G,bt({config:o,value:T,listValues:P,setValue:this.handleChange,readonly:m,placeholder:c},f))),g.createElement("div",{className:"operator--widgets"},this.props.children))}}]),t}(g.PureComponent);el.propTypes={config:x().object.isRequired,setOption:x().func.isRequired,options:x().any.isRequired,minProximity:x().number,maxProximity:x().number,optionPlaceholder:x().string,optionTextBefore:x().string,optionLabel:x().string,customProps:x().object,readonly:x().bool},el.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null};function nd(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function ut(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nd(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):nd(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var US=ut({},ir.conjunctions),zS=ut(ut({},ir.operators),{},{proximity:ut(ut({},ir.operators.proximity),{},{options:ut(ut({},ir.operators.proximity.options),{},{factory:function(e,t){var n=t.RCE,r=t.O.ProximityOperator;return n(r,e)}})})}),qS={text:ut(ut({},ir.widgets.text),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaTextWidget;return n(r,e)}}),textarea:ut(ut({},ir.widgets.textarea),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaTextAreaWidget;return n(r,e)}}),number:ut(ut({},ir.widgets.number),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaNumberWidget;return n(r,e)}}),slider:ut(ut({},ir.widgets.slider),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaSliderWidget;return n(r,e)}}),select:ut(ut({},ir.widgets.select),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaSelectWidget;return n(r,e)}}),multiselect:ut(ut({},ir.widgets.multiselect),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaMultiSelectWidget;return n(r,e)}}),date:ut(ut({},ir.widgets.date),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaDateWidget;return n(r,e)}}),time:ut(ut({},ir.widgets.time),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaTimeWidget;return n(r,e)}}),datetime:ut(ut({},ir.widgets.datetime),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaDateTimeWidget;return n(r,e)}}),boolean:ut(ut({},ir.widgets.boolean),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaBooleanWidget;return n(r,e)}}),field:ut(ut({},ir.widgets.field),{},{factory:function(e,t){var n=t.RCE,r=t.W.ValueFieldWidget;return n(r,e)},customProps:{showSearch:!0}}),func:ut(ut({},ir.widgets.func),{},{factory:function(e,t){var n=t.RCE,r=t.W.FuncWidget;return n(r,e)},customProps:{}}),case_value:ut(ut({},ir.widgets.case_value),{},{factory:function(e,t){var n=t.RCE,r=t.W.VanillaTextWidget;return n(r,e)}})},KS=ut(ut({},ir.types),{},{select:ut(ut({},ir.types.select),{},{widgets:ut(ut({},ir.types.select.widgets),{},{select:ut(ut({},ir.types.select.widgets.select),{},{widgetProps:{customProps:{showSearch:!0}}})})})}),HS=ut(ut({},ir.settings),{},{renderField:function(e,t){var n=t.RCE,r=t.W.VanillaFieldSelect;return n(r,e)},renderOperator:function(e,t){var n=t.RCE,r=t.W.VanillaFieldSelect;return n(r,e)},renderFunc:function(e,t){var n=t.RCE,r=t.W.VanillaFieldSelect;return n(r,e)},renderConjs:function(e,t){var n=t.RCE,r=t.W.VanillaConjs;return n(r,e)},renderSwitch:function(e,t){var n=t.RCE,r=t.W.VanillaSwitch;return n(r,e)},renderButton:function(e,t){var n=t.RCE,r=t.W.VanillaButton;return n(r,e)},renderIcon:function(e,t){var n=t.RCE,r=t.W.VanillaIcon;return n(r,e)},renderButtonGroup:function(e,t){var n=t.RCE,r=t.W.VanillaButtonGroup;return n(r,e)},renderProvider:function(e,t){var n=t.RCE,r=t.W.VanillaProvider;return n(r,e)},renderValueSources:function(e,t){var n=t.RCE,r=t.W.VanillaValueSources;return n(r,e)},renderFieldSources:function(e,t){var n=t.RCE,r=t.W.VanillaValueSources;return n(r,e)},renderConfirm:function(e,t){var n=t.W.vanillaConfirm;return n(e)},renderSwitchPrefix:"Conditions",customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,renderSize:"small",maxLabelsLength:100,showLock:!1,showNot:!0,forceShowConj:!1,groupActionsPosition:"topRight"}),JS=ut(ut({},ir.ctx),{},{W:ut({},Oe),O:ut({},$e),RCE:function(e,t){return g.createElement(e,t)}}),tl={conjunctions:US,operators:zS,widgets:qS,types:KS,settings:HS,ctx:JS};tl=vt.ConfigMixins.removeMixins(tl,["rangeslider","treeselect","treemultiselect"]);const yr=tl;var nb=O(37794),ab=O(38221);function ad(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function ko(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ad(Object(t),!0).forEach(function(n){_defineProperty(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ad(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var eo=vt.Autocomplete,Go=eo.mergeListValues,id=eo.listValueToOption,QS=eo.optionToListValue,YS=eo.optionsToListValues,XS=eo.fixListValuesGroupOrder,Ei=vt.ListUtils,ZS=Ei.mapListValues,od=Ei.listValuesToArray,$o=Ei.getListValue,eO=Ei.makeCustomListValue,tO=Ei.searchListValue,ib=Ei.getItemInListValues;function rO(a){return new Promise(function(e){setTimeout(e,a)})}var ob=function(e,t){var n=e.asyncFetch,r=e.useLoadMore,i=e.useAsyncSearch,u=e.forceAsyncSearch,o=e.asyncListValues,l=e.listValues,c=e.allowCustomValues,f=e.value,d=e.setValue,v=e.placeholder,h=e.config,m=t.debounceTimeout,S=t.multiple,b=t.uif,E=["LOAD_MORE","LOADING_MORE"],L="Load more...",_="Loading more...",T=u?"Type to search":v,P=React.useState(!1),N=_slicedToArray(P,2),G=N[0],J=N[1],W=React.useState(void 0),B=_slicedToArray(W,2),Q=B[0],se=B[1],z=React.useState(0),ne=_slicedToArray(z,2),ie=ne[0],ve=ne[1],ue=React.useState(!1),pe=_slicedToArray(ue,2),me=pe[0],Ee=pe[1],Ie=React.useState(""),Ne=_slicedToArray(Ie,2),Fe=Ne[0],De=Ne[1],Xe=React.useState(void 0),xe=_slicedToArray(Xe,2),Ze=xe[0],ze=xe[1],ht=React.useRef(0),Et=React.useRef(0),or=React.useRef(!1),Rr=od(o),pr=n?o?Go(Ze,Rr,!0):Ze:l,Sr=n?Ze:l;c&&Fe&&!tO(Fe,Ze)&&(Sr=Go(Sr,[eO(Fe)],!0)),n&&!Ze&&o&&!Fe&&!G&&b==="antd"&&(Sr=pr),n&&!c&&o&&b==="mui"&&(Sr=Go(Sr,Rr,!0,!0));var Xr=ie>0,Ar=G&&n&&Ze===void 0&&(u?Fe:!0),er=Ar&&Xr,wt=!er&&pr&&pr.length>0&&Q&&Q.hasMore&&(Q.filter||"")===Fe,rr=!Xr&&wt,sn=ZS(Sr,id),_n=f!=null,Kn=!S&&_n?$o(f,pr):null,Kr=function(){var Or=_asyncToGenerator(_regeneratorRuntime.mark(function et(){var dt,yt,Ut,Mr,Cr,br,Pn,Pr,wi,Ya,Xa,Li,la,La,_i,sa=arguments;return _regeneratorRuntime.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return dt=sa.length>0&&sa[0]!==void 0?sa[0]:null,yt=sa.length>1&&sa[1]!==void 0?sa[1]:!1,!yt&&Q&&se(void 0),Ut=yt&&Ze?Ze.length:0,Mr=yt&&Q||!r&&{pageSize:0},Cr=++ht.current,In.next=8,n.call(h?.ctx,dt,Ut,Mr);case 8:if(br=In.sent,Pn=ht.current!=Cr,!(Pn||!Et.current)){In.next=12;break}return In.abrupt("return",null);case 12:return Pr=br!=null&&br.values?br:{values:br},wi=Pr.values,Ya=Pr.hasMore,Xa=Pr.meta,Li=od(wi),yt?(La=Go(Ze,Li,!1),la=La.length>Ze.length):(La=Li,r&&(la=La.length>0)),_i=Ya!=null||Xa!=null||la!=null?ko(ko(ko(ko({},la!=null?{hasMore:la}:{}),Ya!=null?{hasMore:Ya}:{}),Xa??{}),{},{filter:dt}):void 0,_i&&se(_i),In.abrupt("return",La);case 18:case"end":return In.stop()}},et)}));return function(){return Or.apply(this,arguments)}}(),Hr=function(){var Or=_asyncToGenerator(_regeneratorRuntime.mark(function et(){var dt,yt,Ut,Mr=arguments;return _regeneratorRuntime.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return dt=Mr.length>0&&Mr[0]!==void 0?Mr[0]:null,yt=Mr.length>1&&Mr[1]!==void 0?Mr[1]:!1,ve(function(Pn){return Pn+1}),Ee(yt),br.next=6,Kr(dt,yt);case 6:if(Ut=br.sent,Et.current){br.next=9;break}return br.abrupt("return");case 9:Ut!=null&&ze(Ut),ve(function(Pn){return Pn-1}),Ee(!1);case 12:case"end":return br.stop()}},et)}));return function(){return Or.apply(this,arguments)}}(),Ta=React.useCallback(debounce(Hr,m),[]);React.useEffect(function(){return Et.current++,Ar&&ie==0&&ht.current==0&&_asyncToGenerator(_regeneratorRuntime.mark(function Or(){return _regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,Hr();case 2:case"end":return dt.stop()}},Or)}))(),function(){Et.current--}},[Ar]);var Qa=function(){J(!0)},Rn=function(){var Or=_asyncToGenerator(_regeneratorRuntime.mark(function et(dt){var yt,Ut;return _regeneratorRuntime.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:if(yt=or.current,yt?(or.current=!1,S&&J(!1)):J(!1),!(b==="mui"&&!yt)){Cr.next=6;break}return Ut="",Cr.next=6,oa(null,Ut,"my-reset");case 6:case"end":return Cr.stop()}},et)}));return function(dt){return Or.apply(this,arguments)}}(),An=function(et){et?Qa():Rn()},to=function(et){var dt=et?.specialValue||et?.value;return E.includes(dt)},ro=function(){var Or=_asyncToGenerator(_regeneratorRuntime.mark(function et(dt,yt,Ut){var Mr,Cr,br,Pn,Pr,wi,Ya,Xa,Li,la,La,_i,sa,Wo,In,Sd;return _regeneratorRuntime.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(Cr=S&&b==="mui"&&Ut==="clear",br=!S&&b==="mui"&&Ut==="clear"&&dt?.type==="change",b==="mui"&&(Ut=yt,S?yt=Ut.map(function(Hn){var ol;return(ol=Hn?.value)!==null&&ol!==void 0?ol:Hn}):yt=(Pn=(Pr=Ut)===null||Pr===void 0?void 0:Pr.value)!==null&&Pn!==void 0?Pn:Ut),wi=S&&Array.isArray(Ut)&&Ut.map(function(Hn){return Hn?.specialValue}).find(function(Hn){return!!Hn})||((Mr=Ut)===null||Mr===void 0?void 0:Mr.specialValue),S&&yt&&!Array.isArray(yt)&&(yt=[].concat(_toConsumableArray(f||[]),[yt]),Ut=null),Ya=Cr&&yt.length===0&&Fe&&G||br,!Ya){Jr.next=8;break}return Jr.abrupt("return");case 8:if(Xa=S&&yt.length&&yt.length>(f||[]).length&&yt[yt.length-1]==Fe&&!$o(Fe,Ze),wi!="LOAD_MORE"){Jr.next=16;break}return De(Fe),or.current=!0,Jr.next=14,Hr(Fe,!0);case 14:Jr.next=32;break;case 16:if(wi!="LOADING_MORE"){Jr.next=20;break}or.current=!0,Jr.next=32;break;case 20:if(!S){Jr.next=30;break}if(Li=YS(yt,pr,c),la=_slicedToArray(Li,2),La=la[0],_i=la[1],d(La,n?_i:void 0),!Xa){Jr.next=28;break}return Jr.next=26,rO(0);case 26:return Jr.next=28,oa(null,"","my-reset");case 28:Jr.next=32;break;case 30:sa=QS(yt,pr,c),Wo=_slicedToArray(sa,2),In=Wo[0],Sd=Wo[1],d(In,n?Sd:void 0);case 32:case"end":return Jr.stop()}},et)}));return function(dt,yt,Ut){return Or.apply(this,arguments)}}(),oa=function(){var Or=_asyncToGenerator(_regeneratorRuntime.mark(function et(dt,yt,Ut){var Mr,Cr,br;return _regeneratorRuntime.wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(Mr=b==="mui"&&Ut==="reset",Cr=yt,!(Cr===L||Cr===_||Mr)){Pr.next=4;break}return Pr.abrupt("return");case 4:if(yt==Fe){Pr.next=13;break}if(De(Cr),br=i&&(u?!!Cr:!0),!br){Pr.next=12;break}return Pr.next=10,Ta(Cr);case 10:Pr.next=13;break;case 12:i&&u&&ze([]);case 13:case"end":return Pr.stop()}},et)}));return function(dt,yt,Ut){return Or.apply(this,arguments)}}(),Ti=function(et){var dt=_toConsumableArray(et);return r&&(rr?dt.push({specialValue:"LOAD_MORE",title:L}):me&&dt.push({specialValue:"LOADING_MORE",title:_,disabled:!0})),dt},Bt=function(et,dt){if(dt==null)return null;var yt=dt.value!=null?dt.value:dt;return et.value===yt},bn=function(et){return et&&et.disabled},Fn=function(et){var dt;if(et!=null&&et.isCustom)return!0;var yt=(dt=et?.value)!==null&&dt!==void 0?dt:et,Ut=$o(yt,pr);return Ut?.isCustom||!1},wa=function(et){if(et==null)return null;var dt=et.value!=null?et:id($o(et,pr));return!dt&&et.specialValue?et.title:!dt&&c||!dt?et:dt.title||dt.label||dt.value},ua=b==="mui"?XS(sn):sn;return{options:ua,listValues:pr,hasValue:_n,selectedListValue:Kn,open:G,onOpen:Qa,onClose:Rn,onDropdownVisibleChange:An,onChange:ro,inputValue:Fe,onInputChange:oa,canShowLoadMore:rr,isInitialLoading:er,isLoading:Xr,isLoadingMore:me,isSpecialValue:to,extendOptions:Ti,getOptionSelected:Bt,getOptionDisabled:bn,getOptionIsCustom:Fn,getOptionLabel:wa,aPlaceholder:T}};const ub=null;function ud(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,n)}return t}function ld(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ud(Object(t),!0).forEach(function(n){qr(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ud(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}const Ka=ld(ld({},vt),{},{ReactUtils:Le,DragIcon:Zc});var sd=O(47232),nO=O(63383);const rl={add:"Add",remove:"Remove"},cd={id:Ka.uuid(),type:"group"},fd="timeFilter",dd=[fd],aO={...yr.widgets,text:{...yr.widgets.text,factory:function(e){return g.createElement(Pt.p,{value:e?.value||"",placeholder:e?.placeholder,onChange:t=>e?.setValue(t.currentTarget.value)})}},number:{...yr.widgets.number,factory:function(e){return g.createElement(Pt.p,{value:e?.value,placeholder:e?.placeholder,type:"number",onChange:t=>e?.setValue(Number.parseInt(t.currentTarget.value,10))})}},datetime:{...yr.widgets.datetime,factory:function(e){if(e?.operator==="macros")return g.createElement(Ir.l6,{id:e.id,"aria-label":"Macros value selector",menuShouldPortal:!0,options:dd.map(Me.z),value:e?.value,onChange:n=>e.setValue(n.value)});const t=(0,sd.KQ)(e?.value).isValid()?(0,sd.KQ)(e?.value).utc():void 0;return g.createElement(nO.K,{onChange:n=>{e?.setValue(n.format(yr.widgets.datetime.valueFormat))},date:t})},sqlFormatValue:(a,e,t,n,r,i)=>n==="macros"?dd.includes(a)?a:void 0:typeof yr.widgets.datetime.sqlFormatValue=="string"||typeof yr.widgets.datetime.sqlFormatValue=="object"?void 0:yr.widgets.datetime.sqlFormatValue?.call(yr.ctx,a,e,t,n,r,i)||""}},iO={...yr.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:rl.add,deleteLabel:rl.remove,renderConjs:function(e){return g.createElement(Ir.l6,{id:e?.id,"aria-label":"Conjunction","data-testid":cr.Tp.components.SQLQueryEditor.filterConjunction,menuShouldPortal:!0,options:e?.conjunctionOptions?Object.keys(e?.conjunctionOptions).map(Me.z):void 0,value:e?.selectedConjunction,onChange:t=>e?.setConjunction(t.value)})},renderField:function(e){const t=e?.config?.fields||{};return g.createElement(Ir.l6,{id:e?.id,width:25,"aria-label":"Field","data-testid":cr.Tp.components.SQLQueryEditor.filterField,menuShouldPortal:!0,options:e?.items.map(n=>{const r=t[n.key].mainWidgetProps?.customProps?.icon;return{label:n.label,value:n.key,icon:r}}),value:e?.selectedKey,onChange:n=>{e?.setField(n.label)}})},renderButton:function(e){return g.createElement(Zr.$n,{type:"button",title:`${e?.label} filter`,onClick:e?.onClick,variant:"secondary",size:"md",icon:e?.label===rl.add?"plus":"times"})},renderOperator:function(e){return g.createElement(Ir.l6,{options:e?.items.map(t=>({label:t.label,value:t.key})),"aria-label":"Operator","data-testid":cr.Tp.components.SQLQueryEditor.filterOperator,menuShouldPortal:!0,value:e?.selectedKey,onChange:t=>{e?.setField(t.value||"")}})}};var oO=(a=>(a.IN="select_any_in",a.NOT_IN="select_not_any_in",a.MACROS="macros",a))(oO||{});const uO=dO(yr),pd=yr.types.text.widgets.text,lO=[...pd.operators||[],"select_any_in","select_not_any_in"],sO={...pd,operators:lO},cO={...yr.types,text:{...yr.types.text,widgets:{...yr.types.text.widgets,text:sO}},datetime:{...yr.types.datetime,widgets:{...yr.types.datetime.widgets,datetime:{...yr.types.datetime.widgets.datetime,operators:["macros",...yr.types.datetime.widgets.datetime.operators||[]]}}}},fO={...yr,widgets:aO,settings:iO,operators:uO,types:cO},vd=()=>"",gd=a=>typeof a=="function";function dO(a){const{...e}=a.operators,t=()=>{const o=e.select_any_in.sqlFormatOp;return gd(o)?o:vd},n=(o,l,c,f,d,v,h,m)=>t()(o,l,hd(c),f,d,v,h,m),r=()=>{const o=e.select_not_any_in.sqlFormatOp;return gd(o)?o:vd},i=(o,l,c,f,d,v,h,m)=>r()(o,l,hd(c),f,d,v,h,m);return{...e,select_any_in:{...e.select_any_in,sqlFormatOp:n},select_not_any_in:{...e.select_not_any_in,sqlFormatOp:i},macros:{label:"Macros",sqlFormatOp:(o,l,c)=>c===fd?`$__timeFilter(${o})`:c}}}function hd(a){return(0,ce.isString)(a)?a.split(","):a}function pO({sql:a,config:e,onSqlChange:t}){const[n,r]=(0,g.useState)(),i=(0,g.useMemo)(()=>({...fO,...e}),[e]);(0,g.useEffect)(()=>{if(!n){const o=Ka.checkTree(Ka.loadTree(a.whereJsonTree??cd),i);r(o)}},[i,a.whereJsonTree,n]),(0,g.useEffect)(()=>{a.whereJsonTree||r(Ka.checkTree(Ka.loadTree(cd),i))},[i,a.whereJsonTree]);const u=(0,g.useCallback)((o,l)=>{r(o);const c={...a,whereJsonTree:Ka.getTree(o),whereString:Ka.sqlFormat(o,l)};t(c)},[t,a]);return n?g.createElement(Kc,{...i,value:n,onChange:u,renderBuilder:o=>g.createElement(vS,{...o})}):null}function Bo(a){return`
    display: flex;
    gap: 8px;
    flex-direction: ${a};`}(0,Rt.injectGlobal)`
  .group--header {
    ${Bo("row")}
  }

  .group-or-rule {
    ${Bo("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${Bo("row")}
  }

  .group--children {
    ${Bo("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function vO({query:a,fields:e,onQueryChange:t,db:n}){const r=(0,Kt.A)(async()=>gO(e),[e]),{onSqlChange:i}=Qt({query:a,onQueryChange:t,db:n});return g.createElement(pO,{key:JSON.stringify(r.value),config:{fields:r.value||{}},sql:a.sql,onSqlChange:u=>{const o=(0,Lt.w)().getVariables();hO(u,o),i(u)}})}function gO(a){const e={};for(const t of a)e[t.value]={type:t.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:t.icon}}};return e}function hO(a,e){const t=n=>n.multi&&(a.whereString?.includes(`\${${n.name}}`)||a.whereString?.includes(`$${n.name}`));e.some(n=>t(n))&&(a.whereString=a.whereString?.replaceAll("')",")"),a.whereString=a.whereString?.replaceAll("('","("))}const mO=({query:a,db:e,queryRowFilter:t,onChange:n,onValidate:r,range:i})=>{const u=(0,we.A)(async()=>await e.fields(a),[e,a.dataset,a.table]);return g.createElement(g.Fragment,null,g.createElement(ja.D,null,g.createElement(zt.U,null,g.createElement(at,{fields:u.value||[],query:a,onQueryChange:n,db:e})),t.filter&&g.createElement(zt.U,null,g.createElement(kr.c,{label:"Filter by column value",optional:!0},g.createElement(vO,{fields:u.value||[],query:a,onQueryChange:n,db:e}))),t.group&&g.createElement(zt.U,null,g.createElement(kr.c,{label:"Group by column"},g.createElement(At,{fields:u.value||[],query:a,onQueryChange:n,db:e}))),t.order&&g.createElement(zt.U,null,g.createElement(tn,{fields:u.value||[],query:a,onQueryChange:n,db:e})),t.preview&&a.rawSql&&g.createElement(zt.U,null,g.createElement($t.l,{rawSql:a.rawSql,datasourceType:a.datasource?.type}))),g.createElement(zr,{db:e,query:a,onValidate:r,range:i}))};function md({datasource:a,query:e,onChange:t,onRunQuery:n,range:r,queryHeaderProps:i}){const[u,o]=(0,g.useState)(!0),l=a.getDB(),{preconfiguredDatabase:c}=a,f=i?.dialect??"other",{loading:d,error:v}=(0,we.A)(async()=>()=>{a.getDB(a.id).init!==void 0&&a.getDB(a.id).init()},[a]),h=jn(e),[m,S]=(0,g.useState)({filter:!!h.sql?.whereString,group:!!h.sql?.groupBy?.[0]?.property.name,order:!!h.sql?.orderBy?.property.name,preview:!0}),[b,E]=(0,g.useState)(h);(0,g.useEffect)(()=>()=>{a.getDB(a.id).dispose!==void 0&&a.getDB(a.id).dispose()},[a]);const L=(0,g.useCallback)(P=>{yO(P)&&n&&n()},[n]),_=(P,N=!0)=>{E(P),t(P),nt(P.sql?.columns)&&P.sql?.columns.some(G=>G.name)&&!m.group&&S({...m,group:!0}),N&&L(P)},T=P=>{E(P),t(P)};return d||v?null:g.createElement(g.Fragment,null,g.createElement(Qn,{db:l,preconfiguredDataset:c,onChange:T,onRunQuery:n,onQueryRowChange:S,queryRowFilter:m,query:h,isQueryRunnable:u,dialect:f}),g.createElement(Re.$,{v:.5}),h.editorMode!==gt.lX.Code&&g.createElement(mO,{db:l,query:h,onChange:P=>_(P,!1),queryRowFilter:m,onValidate:o,range:r}),h.editorMode===gt.lX.Code&&g.createElement(Pa,{db:l,query:h,queryToValidate:b,onChange:_,onRunQuery:n,onValidate:o,range:r}))}const yO=a=>!!a.rawSql;function SO(a){const e=typeof a.rawQuery=="string"?a.rawQuery:null;if(!e)return a;const t=jn({refId:"Annotation",...a.target??{},rawSql:e});return{...a,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:t}}class OO extends Dt.iy{constructor(e,t=(0,Lt.w)()){super(e),this.templateSrv=t,this.interpolateVariable=(r,i)=>typeof r=="string"?i.multi||i.includeAll?this.getQueryModel().quoteLiteral(r):String(r).replace(/'/g,"''"):typeof r=="number"?r:Array.isArray(r)?r.map(o=>this.getQueryModel().quoteLiteral(o)).join(","):r,this.name=e.name,this.responseParser=new ge,this.id=e.id;const n=e.jsonData||{};this.interval=n.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=n.database??"",this.annotations={prepareAnnotation:SO,QueryEditor:md}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(e,t){let n=e;return e&&e.length>0&&(n=e.map(r=>({...r,datasource:this.getRef(),rawSql:this.templateSrv.replace(r.rawSql,t,this.interpolateVariable),rawQuery:!0}))),n}filterQuery(e){return!e.hide}applyTemplateVariables(e,t){return{refId:e.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(e.rawSql,t,this.interpolateVariable),format:e.format}}query(e){if(qt()){const t=this.checkForDatabaseIssue(e);if(t){const n=new Error(t);return(0,lt.$)(()=>n)}}return e.targets.forEach(t=>{e.app===Je.Jk.Dashboard||e.app===Je.Jk.PanelViewer||(0,ee.rR)("grafana_sql_query_executed",{datasource:t.datasource?.type,editorMode:t.editorMode,format:t.format,app:e.app})}),super.query(e)}checkForDatabaseIssue(e){if(this.type==="postgres"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(e.app!==Je.Jk.Explore&&this.preconfiguredDatabase){for(const t of e.targets)if(t.editorMode===gt.lX.Builder&&t.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(e,t){const n=t?.range;if(n==null)return[];let r="tempvar";t&&t.variable&&t.variable.name&&(r=t.variable.name);const i={...t?.scopedVars,...(0,mt.c)({query:e,wildcardChar:"%",options:t})},u=this.templateSrv.replace(e,i,this.interpolateVariable),o={refId:r,datasource:this.getRef(),rawSql:u,format:Ve.Table};let l;try{l=await this.runMetaQuery(o,n)}catch(c){throw console.error(c),new Error("error when executing the sql query")}return this.getResponseParser().transformMetricFindResponse(l)}async runSql(e,t){const n=(0,_e.E2)(),r=await this.runMetaQuery({rawSql:e,format:Ve.Table,refId:t?.refId},n);return new Jt.R(r)}runMetaQuery(e,t){const n=e.refId||"meta",r=[{...e,datasource:e.datasource||this.getRef(),refId:n}];return(0,it.s)((0,H.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:t.from.valueOf().toString(),to:t.to.valueOf().toString(),queries:r},requestId:n}).pipe((0,Qe.T)(i=>(0,X.bE)(i,r).data[0]??{fields:[]})))}targetContainsTemplate(e){let t=e.rawSql;return pn.forEach(n=>{t=t?.replace(n,"")||""}),this.templateSrv.containsTemplate(t)}}var bO=O(94471),FO=O(29020),Ha=O(88575),Ja=O(60029),EO=O(76892);function nl({value:a,defaultValue:e,onChange:t,width:n}){const[r,i]=g.useState(!1);return g.createElement(Pt.p,{type:"number",placeholder:String(e),value:r?"":a,onChange:u=>{if(u.currentTarget.value?.trim()==="")i(!0),t(e);else{i(!1);const o=Number(u.currentTarget.value);Number.isNaN(o)||t(o)}},width:n})}const CO=a=>{const{onOptionsChange:e,options:t}=a,n=t.jsonData,r=n.maxIdleConnsAuto!==void 0?n.maxIdleConnsAuto:!1,i=f=>{const d={...t,jsonData:{...n,...f}};return e(d)},u=f=>d=>{i({[f]:d})},o=f=>{i(r&&f?{maxOpenConns:f,maxIdleConns:f}:{maxOpenConns:f})},l=()=>{let f,d;r?(d=n.maxOpenConns,f=n.maxIdleConns):n.maxOpenConns!==void 0&&(d=n.maxOpenConns,f=n.maxOpenConns),i({maxIdleConnsAuto:!r,maxIdleConns:f,maxOpenConns:d})},c=40;return g.createElement(FO.I,{title:"Connection limits"},g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(Ue.B,{gap:.5},g.createElement("span",null,"Max open"),g.createElement(Ur.m,{content:g.createElement("span",null,"The maximum number of open connections to the database. If ",g.createElement("i",null,"Max idle connections")," is greater than 0 and the ",g.createElement("i",null,"Max open connections")," is less than ",g.createElement("i",null,"Max idle connections"),", then",g.createElement("i",null,"Max idle connections")," will be reduced to match the ",g.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(nl,{value:n.maxOpenConns,defaultValue:fn.$.sqlConnectionLimits.maxOpenConns,onChange:f=>{o(f)},width:c})),g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(Ue.B,{gap:.5},g.createElement("span",null,"Auto max idle"),g.createElement(Ur.m,{content:g.createElement("span",null,"If enabled, automatically set the number of ",g.createElement("i",null,"Maximum idle connections")," to the same value as",g.createElement("i",null," Max open connections"),". If the number of maximum open connections is not set it will be set to the default (",fn.$.sqlConnectionLimits.maxIdleConns,").")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(cn.d,{value:r,onChange:l})),g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(Ue.B,{gap:.5},g.createElement("span",null,"Max idle"),g.createElement(Ur.m,{content:g.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",g.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",g.createElement("i",null,"Max idle connections"),", then the ",g.createElement("i",null,"Max idle connections")," ","will be reduced to match the ",g.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},r?g.createElement(EO.c,{width:c},t.jsonData.maxIdleConns):g.createElement(nl,{value:n.maxIdleConns,defaultValue:fn.$.sqlConnectionLimits.maxIdleConns,onChange:f=>{u("maxIdleConns")(f)},width:c})),g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(Ue.B,{gap:.5},g.createElement("span",null,"Max lifetime"),g.createElement(Ur.m,{content:g.createElement("span",null,"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(nl,{value:n.connMaxLifetime,defaultValue:fn.$.sqlConnectionLimits.connMaxLifetime,onChange:f=>{u("connMaxLifetime")(f)},width:c})))},TO=()=>{const a=(0,Qr.of)(wO);return g.createElement("hr",{className:a.horizontalDivider})},wO=a=>({horizontalDivider:(0,Rt.css)({borderTop:`1px solid ${a.colors.border.weak}`,margin:a.spacing(2,0),width:"100%"})});var Ci=O(22391),al=O(67061),il=O(58724);const LO=a=>{const{editorProps:e,showCACert:t,showKeyPair:n=!0}=a,{secureJsonFields:r}=e.options;return g.createElement(g.Fragment,null,n?g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(al.B,{gap:.5},g.createElement("span",null,"TLS/SSL Client Certificate"),g.createElement(Ur.m,{content:g.createElement("span",null,"To authenticate with an TLS/SSL client certificate, provide the client certificate here.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(il.lp,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:r&&r.tlsClientCert,onChange:(0,Ci.mn)(e,"tlsClientCert"),onReset:()=>{(0,Ci.QP)(e,"tlsClientCert")}})):null,t?g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(al.B,{gap:.5},g.createElement("span",null,"TLS/SSL Root Certificate"),g.createElement(Ur.m,{content:g.createElement("span",null,"If the selected TLS/SSL mode requires a server root certificate, provide it here.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(il.lp,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:r&&r.tlsCACert,onChange:(0,Ci.mn)(e,"tlsCACert"),onReset:()=>{(0,Ci.QP)(e,"tlsCACert")}})):null,n?g.createElement(Ha.D,{label:g.createElement(Ja.J,null,g.createElement(al.B,{gap:.5},g.createElement("span",null,"TLS/SSL Client Key"),g.createElement(Ur.m,{content:g.createElement("span",null,"To authenticate with a client TLS/SSL certificate, provide the key here.")},g.createElement(Er.I,{name:"info-circle",size:"sm"}))))},g.createElement(il.lp,{placeholder:"-----BEGIN RSA PRIVATE KEY-----",cols:45,rows:7,isConfigured:r&&r.tlsClientKey,onChange:(0,Ci.mn)(e,"tlsClientKey"),onReset:()=>{(0,Ci.QP)(e,"tlsClientKey")}})):null)};var _O=O(34867);const yd=(0,_O.DW)("features.plugins.sql");function RO({onOptionsChange:a,options:e}){(0,g.useEffect)(()=>{const t=e.jsonData;let n={...e},r=!1;if(e.database&&(yd.logDebug(`Migrating from options.database with value ${e.database} for ${e.name}`),n.database="",n.jsonData={...t,database:e.database},r=!0),t.maxOpenConns===void 0&&t.maxIdleConns===void 0&&t.maxIdleConnsAuto===void 0){const{maxOpenConns:i,maxIdleConns:u}=fn.$.sqlConnectionLimits;yd.logDebug(`Setting default max open connections to ${i} and setting max idle connection to ${u}`),n.jsonData={...n.jsonData,maxOpenConns:i,maxIdleConns:u,maxIdleConnsAuto:!0},r=!0}if(t.connMaxLifetime===void 0){const{connMaxLifetime:i}=fn.$.sqlConnectionLimits;n.jsonData={...n.jsonData,connMaxLifetime:i},r=!0}r&&a(n)},[a,e])}},18678:function(Te,ye,O){var V,A;(function(D,$){V=$,A=typeof V=="function"?V.call(ye,O,ye,Te):V,A!==void 0&&(Te.exports=A)})(this,function(){"use strict";Array.isArray||(Array.isArray=function(w){return Object.prototype.toString.call(w)==="[object Array]"});function D(w){for(var R=[],M=0,I=w.length;M<I;M++)R.indexOf(w[M])===-1&&R.push(w[M]);return R}var $={},K={"==":function(w,R){return w==R},"===":function(w,R){return w===R},"!=":function(w,R){return w!=R},"!==":function(w,R){return w!==R},">":function(w,R){return w>R},">=":function(w,R){return w>=R},"<":function(w,R,M){return M===void 0?w<R:w<R&&R<M},"<=":function(w,R,M){return M===void 0?w<=R:w<=R&&R<=M},"!!":function(w){return $.truthy(w)},"!":function(w){return!$.truthy(w)},"%":function(w,R){return w%R},log:function(w){return console.log(w),w},in:function(w,R){return!R||typeof R.indexOf>"u"?!1:R.indexOf(w)!==-1},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(w,R,M){if(M<0){var I=String(w).substr(R);return I.substr(0,I.length+M)}return String(w).substr(R,M)},"+":function(){return Array.prototype.reduce.call(arguments,function(w,R){return parseFloat(w,10)+parseFloat(R,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function(w,R){return parseFloat(w,10)*parseFloat(R,10)})},"-":function(w,R){return R===void 0?-w:w-R},"/":function(w,R){return w/R},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function(w,R){return w.concat(R)},[])},var:function(w,R){var M=R===void 0?null:R,I=this;if(typeof w>"u"||w===""||w===null)return I;for(var q=String(w).split("."),te=0;te<q.length;te++)if(I==null||(I=I[q[te]],I===void 0))return M;return I},missing:function(){for(var w=[],R=Array.isArray(arguments[0])?arguments[0]:arguments,M=0;M<R.length;M++){var I=R[M],q=$.apply({var:I},this);(q===null||q==="")&&w.push(I)}return w},missing_some:function(w,R){var M=$.apply({missing:R},this);return R.length-M.length>=w?[]:M}};return $.is_logic=function(w){return typeof w=="object"&&w!==null&&!Array.isArray(w)&&Object.keys(w).length===1},$.truthy=function(w){return Array.isArray(w)&&w.length===0?!1:!!w},$.get_operator=function(w){return Object.keys(w)[0]},$.get_values=function(w){return w[$.get_operator(w)]},$.apply=function(w,R){if(Array.isArray(w))return w.map(function(Le){return $.apply(Le,R)});if(!$.is_logic(w))return w;var M=$.get_operator(w),I=w[M],q,te,re,Z,le;if(Array.isArray(I)||(I=[I]),M==="if"||M=="?:"){for(q=0;q<I.length-1;q+=2)if($.truthy($.apply(I[q],R)))return $.apply(I[q+1],R);return I.length===q+1?$.apply(I[q],R):null}else if(M==="and"){for(q=0;q<I.length;q+=1)if(te=$.apply(I[q],R),!$.truthy(te))return te;return te}else if(M==="or"){for(q=0;q<I.length;q+=1)if(te=$.apply(I[q],R),$.truthy(te))return te;return te}else{if(M==="filter")return Z=$.apply(I[0],R),re=I[1],Array.isArray(Z)?Z.filter(function(Le){return $.truthy($.apply(re,Le))}):[];if(M==="map")return Z=$.apply(I[0],R),re=I[1],Array.isArray(Z)?Z.map(function(Le){return $.apply(re,Le)}):[];if(M==="reduce")return Z=$.apply(I[0],R),re=I[1],le=typeof I[2]<"u"?I[2]:null,Array.isArray(Z)?Z.reduce(function(Le,Oe){return $.apply(re,{current:Oe,accumulator:Le})},le):le;if(M==="all"){if(Z=$.apply(I[0],R),re=I[1],!Array.isArray(Z)||!Z.length)return!1;for(q=0;q<Z.length;q+=1)if(!$.truthy($.apply(re,Z[q])))return!1;return!0}else if(M==="none"){if(Z=$.apply(I[0],R),re=I[1],!Array.isArray(Z)||!Z.length)return!0;for(q=0;q<Z.length;q+=1)if($.truthy($.apply(re,Z[q])))return!1;return!0}else if(M==="some"){if(Z=$.apply(I[0],R),re=I[1],!Array.isArray(Z)||!Z.length)return!1;for(q=0;q<Z.length;q+=1)if($.truthy($.apply(re,Z[q])))return!0;return!1}}if(I=I.map(function(Le){return $.apply(Le,R)}),K.hasOwnProperty(M)&&typeof K[M]=="function")return K[M].apply(R,I);if(M.indexOf(".")>0){var be=String(M).split("."),ae=K;for(q=0;q<be.length;q++){if(!ae.hasOwnProperty(be[q]))throw new Error("Unrecognized operation "+M+" (failed at "+be.slice(0,q+1).join(".")+")");ae=ae[be[q]]}return ae.apply(R,I)}throw new Error("Unrecognized operation "+M)},$.uses_data=function(w){var R=[];if($.is_logic(w)){var M=$.get_operator(w),I=w[M];Array.isArray(I)||(I=[I]),M==="var"?R.push(I[0]):I.forEach(function(q){R.push.apply(R,$.uses_data(q))})}return D(R)},$.add_operation=function(w,R){K[w]=R},$.rm_operation=function(w){delete K[w]},$.rule_like=function(w,R){if(R===w||R==="@")return!0;if(R==="number")return typeof w=="number";if(R==="string")return typeof w=="string";if(R==="array")return Array.isArray(w)&&!$.is_logic(w);if($.is_logic(R)){if($.is_logic(w)){var M=$.get_operator(R),I=$.get_operator(w);if(M==="@"||M===I)return $.rule_like($.get_values(w,!1),$.get_values(R,!1))}return!1}if(Array.isArray(R))if(Array.isArray(w)){if(R.length!==w.length)return!1;for(var q=0;q<R.length;q+=1)if(!$.rule_like(w[q],R[q]))return!1;return!0}else return!1;return!1},$})},87805:(Te,ye,O)=>{var V=O(43360),A=O(75288);function D($,K,w){(w!==void 0&&!A($[K],w)||w===void 0&&!(K in $))&&V($,K,w)}Te.exports=D},85250:(Te,ye,O)=>{var V=O(37217),A=O(87805),D=O(86649),$=O(42824),K=O(23805),w=O(37241),R=O(14974);function M(I,q,te,re,Z){I!==q&&D(q,function(le,be){if(Z||(Z=new V),K(le))$(I,q,be,te,M,re,Z);else{var ae=re?re(R(I,be),le,be+"",I,q,Z):void 0;ae===void 0&&(ae=le),A(I,be,ae)}},w)}Te.exports=M},42824:(Te,ye,O)=>{var V=O(87805),A=O(93290),D=O(71961),$=O(23007),K=O(35529),w=O(72428),R=O(56449),M=O(83693),I=O(3656),q=O(1882),te=O(23805),re=O(11331),Z=O(37167),le=O(14974),be=O(69884);function ae(Le,Oe,$e,Me,Ve,Se,rt){var Be=le(Le,$e),lt=le(Oe,$e),it=rt.get(lt);if(it){V(Le,$e,it);return}var Qe=Se?Se(Be,lt,$e+"",Le,Oe,rt):void 0,Je=Qe===void 0;if(Je){var mt=R(lt),_e=!mt&&I(lt),Jt=!mt&&!_e&&Z(lt);Qe=lt,mt||_e||Jt?R(Be)?Qe=Be:M(Be)?Qe=$(Be):_e?(Je=!1,Qe=A(lt,!0)):Jt?(Je=!1,Qe=D(lt,!0)):Qe=[]:re(lt)||w(lt)?(Qe=Be,w(Be)?Qe=be(Be):(!te(Be)||q(Be))&&(Qe=K(lt))):Je=!1}Je&&(rt.set(lt,Qe),Ve(Qe,lt,Me,Se,rt),rt.delete(lt)),V(Le,$e,Qe)}Te.exports=ae},69302:(Te,ye,O)=>{var V=O(83488),A=O(56757),D=O(32865);function $(K,w){return D(A(K,w,V),K+"")}Te.exports=$},20999:(Te,ye,O)=>{var V=O(69302),A=O(36800);function D($){return V(function(K,w){var R=-1,M=w.length,I=M>1?w[M-1]:void 0,q=M>2?w[2]:void 0;for(I=$.length>3&&typeof I=="function"?(M--,I):void 0,q&&A(w[0],w[1],q)&&(I=M<3?void 0:I,M=1),K=Object(K);++R<M;){var te=w[R];te&&$(K,te,R,I)}return K})}Te.exports=D},14974:Te=>{function ye(O,V){if(!(V==="constructor"&&typeof O[V]=="function")&&V!="__proto__")return O[V]}Te.exports=ye},83693:(Te,ye,O)=>{var V=O(64894),A=O(40346);function D($){return A($)&&V($)}Te.exports=D},73916:(Te,ye,O)=>{var V=O(43360),A=O(30641),D=O(15389);function $(K,w){var R={};return w=D(w,3),A(K,function(M,I,q){V(R,I,w(M,I,q))}),R}Te.exports=$},55364:(Te,ye,O)=>{var V=O(85250),A=O(20999),D=A(function($,K,w){V($,K,w)});Te.exports=D},6924:(Te,ye,O)=>{var V=O(85250),A=O(20999),D=A(function($,K,w,R){V($,K,w,R)});Te.exports=D},71086:(Te,ye,O)=>{var V=O(34932),A=O(15389),D=O(97420),$=O(83349);function K(w,R){if(w==null)return{};var M=V($(w),function(I){return[I]});return R=A(R),D(w,M,function(I,q){return R(I,q[0])})}Te.exports=K},22331:(Te,ye,O)=>{var V=O(87133),A=O(77556),D=O(61489),$=O(13222);function K(w,R,M){return w=$(w),M=M==null?0:V(D(M),0,w.length),R=A(R),w.slice(M,M+R.length)==R}Te.exports=K},69884:(Te,ye,O)=>{var V=O(21791),A=O(37241);function D($){return V($,A($))}Te.exports=D},21450:function(Te){(function(O,V){Te.exports=V()})(this,function(){return function(ye){var O={};function V(A){if(O[A])return O[A].exports;var D=O[A]={i:A,l:!1,exports:{}};return ye[A].call(D.exports,D,D.exports,V),D.l=!0,D.exports}return V.m=ye,V.c=O,V.d=function(A,D,$){V.o(A,D)||Object.defineProperty(A,D,{configurable:!1,enumerable:!0,get:$})},V.n=function(A){var D=A&&A.__esModule?function(){return A.default}:function(){return A};return V.d(D,"a",D),D},V.o=function(A,D){return Object.prototype.hasOwnProperty.call(A,D)},V.p="",V(V.s=3)}([function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0});function A($,K){var w={},R=$||"Abstract",M=[],I=null,q;if(w._type=R,w.getType=function(){return R},w.setType=function(le){R=le},w.getChildren=function(){return M},w.addChild=function(le){if(le){if(!le.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(le)};le.setParent(w),M.push(le)}},w.getParent=function(){return I},w.setParent=function(le){I=le},w.getContext=function(le){return q||le.activeContext.peek()},w.setContext=function(le){q=le},w.getStartPosition=function(){return K>>16},w.getEndPosition=function(){return K&65535},w.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},w.toString=function(){var le="Kind: "+w.getType();le+=", Children: [";for(var be=0,ae=w.getChildren().length;be<ae;be+=1)le+="{"+w.getChildren()[be]+"}, ";return le+="]",le},K===0)throw{name:"Error",message:"Position cannot be 0"};for(var te=arguments.length,re=Array(te>2?te-2:0),Z=2;Z<te;Z++)re[Z-2]=arguments[Z];return re&&re.forEach(function(le){w.addChild(le)}),w}var D=O.SpelNode={create:A}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Stack=A;function A(D){this.elements=D||[]}A.prototype.push=function(D){return this.elements.push(D),D},A.prototype.pop=function(){return this.elements.pop()},A.prototype.peek=function(){return this.elements[this.elements.length-1]},A.prototype.empty=function(){return this.elements.length>0},A.prototype.search=function(D){return this.elements.length-this.elements.indexOf(D)}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0});var A={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function D(K){this.type=K,this.tokenChars=A[K],this._hasPayload=typeof A[K]!="string",typeof A[K]=="number"&&(this._ordinal=A[K])}for(var $ in A)A.hasOwnProperty($)&&(D[$]=new D($));D.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},D.prototype.getLength=function(){return this.tokenChars.length},D.prototype.hasPayload=function(){return this._hasPayload},D.prototype.valueOf=function(K){for(var w in A)if(A.hasOwnProperty(w)&&A[w]===K)return D[w]},D.prototype.ordinal=function(){return this._ordinal},O.TokenKind=D},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.StandardContext=O.SpelExpressionEvaluator=void 0;var A=V(4),D=V(50);O.SpelExpressionEvaluator=A.SpelExpressionEvaluator,O.StandardContext=D.StandardContext},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.SpelExpressionEvaluator=void 0;var A=V(5),D=V(1),$={};function K(w,R,M){var I=new D.Stack,q;return R||(R={}),I.push(R),q={rootContext:R,activeContext:I,locals:M},w.getValue(q)}$.compile=function(w){var R=(0,A.SpelExpressionParser)().parse(w);return{eval:function(I,q){return K(R,I,q)},_compiledExpression:R}},$.eval=function(w,R,M){return $.compile(w).eval(R,M)},O.SpelExpressionEvaluator=$},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.SpelExpressionParser=void 0;var A=V(2),D=V(6),$=V(8),K=V(9),w=V(10),R=V(11),M=V(12),I=V(13),q=V(14),te=V(15),re=V(16),Z=V(17),le=V(18),be=V(19),ae=V(20),Le=V(21),Oe=V(22),$e=V(23),Me=V(24),Ve=V(25),Se=V(26),rt=V(27),Be=V(28),lt=V(29),it=V(30),Qe=V(31),Je=V(32),mt=V(33),_e=V(34),Jt=V(35),gt=V(36),Dt=V(37),Lt=V(38),ee=V(39),H=V(40),X=V(41),ce=V(42),ge=V(43),g=V(44),we=V(45),Re=V(46),qe=V(47),xt=V(48),Gt=V(49),nt=O.SpelExpressionParser=function(){var _t=new RegExp("[\\p{L}\\p{N}_$]+"),Br,jn=[],Tr,Fr,cr,Wr;function _a(U){Br=U}function Za(U,oe){try{Tr=U,Fr=D.Tokenizer.tokenize(U),cr=Fr.length,Wr=0,jn=[];var Ce=zt();return ct()&&tt(Pt().startPos,"MORE_INPUT",At().toString()),Ce}catch(at){throw at.message}}function zt(){var U=kr();if(ct()){var oe=Pt();if(oe.getKind()===A.TokenKind.ASSIGN){U===null&&(U=R.NullLiteral.create(Lr(oe.startPos-1,oe.endPos-1))),At();var Ce=kr();return le.Assign.create(Ue(oe),U,Ce)}if(oe.getKind()===A.TokenKind.ELVIS){U===null&&(U=R.NullLiteral.create(Lr(oe.startPos-1,oe.endPos-2))),At();var at=zt();return at===null&&(at=R.NullLiteral.create(Lr(oe.startPos+1,oe.endPos+1))),Lt.Elvis.create(Ue(oe),U,at)}if(oe.getKind()===A.TokenKind.QMARK){U===null&&(U=R.NullLiteral.create(Lr(oe.startPos-1,oe.endPos-1))),At();var Kt=zt();$t(A.TokenKind.COLON);var ot=zt();return Dt.Ternary.create(Ue(oe),U,Kt,ot)}}return U}function kr(){for(var U=cn();En("or")||Qt(A.TokenKind.SYMBOLIC_OR);){var oe=At(),Ce=cn();tn(oe,U,Ce),U=Jt.OpOr.create(Ue(oe),U,Ce)}return U}function cn(){for(var U=Zr();En("and")||Qt(A.TokenKind.SYMBOLIC_AND);){var oe=At(),Ce=Zr();tn(oe,U,Ce),U=_e.OpAnd.create(Ue(oe),U,Ce)}return U}function Zr(){var U=Ur(),oe=ja();if(oe!==null){var Ce=At(),at=Ur();tn(Ce,U,at);var Kt=oe.kind;if(oe.isNumericRelationalOperator()){var ot=Ue(Ce);return Kt===A.TokenKind.GT?Oe.OpGT.create(ot,U,at):Kt===A.TokenKind.LT?Me.OpLT.create(ot,U,at):Kt===A.TokenKind.LE?$e.OpLE.create(ot,U,at):Kt===A.TokenKind.GE?Le.OpGE.create(ot,U,at):Kt===A.TokenKind.EQ?be.OpEQ.create(ot,U,at):ae.OpNE.create(ot,U,at)}return Kt===A.TokenKind.INSTANCEOF?ge.OpInstanceof.create(Ue(Ce),U,at):Kt===A.TokenKind.MATCHES?gt.OpMatches.create(Ue(Ce),U,at):g.OpBetween.create(Ue(Ce),U,at)}return U}function Ur(){for(var U=ca();en(A.TokenKind.PLUS,A.TokenKind.MINUS,A.TokenKind.INC);){var oe=At(),Ce=ca();pn(oe,Ce),oe.getKind()===A.TokenKind.PLUS?U=Ve.OpPlus.create(Ue(oe),U,Ce):oe.getKind()===A.TokenKind.MINUS&&(U=Se.OpMinus.create(Ue(oe),U,Ce))}return U}function ca(){for(var U=Jn();en(A.TokenKind.STAR,A.TokenKind.DIV,A.TokenKind.MOD);){var oe=At(),Ce=Jn();tn(oe,U,Ce),oe.getKind()===A.TokenKind.STAR?U=rt.OpMultiply.create(Ue(oe),U,Ce):oe.getKind()===A.TokenKind.DIV?U=Be.OpDivide.create(Ue(oe),U,Ce):U=lt.OpModulus.create(Ue(oe),U,Ce)}return U}function Jn(){var U=Er(),oe;if(Qt(A.TokenKind.POWER)){oe=At();var Ce=Er();return pn(oe,Ce),it.OpPower.create(Ue(oe),U,Ce)}return U!==null&&en(A.TokenKind.INC,A.TokenKind.DEC)?(oe=At(),oe.getKind()===A.TokenKind.INC?Qe.OpInc.create(Ue(oe),!0,U):Je.OpDec.create(Ue(oe),!0,U)):U}function Er(){var U,oe;return en(A.TokenKind.PLUS,A.TokenKind.MINUS,A.TokenKind.NOT)?(U=At(),oe=Er(),U.getKind()===A.TokenKind.NOT?mt.OpNot.create(Ue(U),oe):U.getKind()===A.TokenKind.PLUS?Ve.OpPlus.create(Ue(U),oe):Se.OpMinus.create(Ue(U),oe)):en(A.TokenKind.INC,A.TokenKind.DEC)?(U=At(),oe=Er(),U.getKind()===A.TokenKind.INC?Qe.OpInc.create(Ue(U),!1,oe):Je.OpDec.create(Ue(U),!1,oe)):Ra()}function Ra(){var U=[],oe=da();for(U.push(oe);Ir();)U.push(zr());return U.length===1?U[0]:re.CompoundExpression.create(Lr(oe.getStartPosition(),U[U.length-1].getEndPosition()),U)}function Ir(){var U=null;return en(A.TokenKind.DOT,A.TokenKind.SAFE_NAVI)?U=qt():U=fn(),U===null?!1:(Mt(U),!0)}function fn(){return Qt(A.TokenKind.LSQUARE)&&Xn()?zr():null}function qt(){var U=At(),oe=U.getKind()===A.TokenKind.SAFE_NAVI;return ti(oe)||fa()||Yn(oe)||wr(oe)?zr():(Pt()===null?tt(U.startPos,"OOD"):tt(U.startPos,"UNEXPECTED_DATA_AFTER_DOT",Zn(Pt())),null)}function fa(){if(!Qt(A.TokenKind.HASH))return!1;var U=At(),oe=$t(A.TokenKind.IDENTIFIER),Ce=fr();return Ce===null?(Mt(te.VariableReference.create(oe.data,Lr(U.startPos,oe.endPos))),!0):(Mt(M.FunctionReference.create(oe.data,Lr(U.startPos,oe.endPos),Ce)),!0)}function fr(){if(!Qt(A.TokenKind.LPAREN))return null;var U=[];return Qn(U),$t(A.TokenKind.RPAREN),U}function Aa(U){Qt(A.TokenKind.LPAREN)||tt(Ue(Pt()),"MISSING_CONSTRUCTOR_ARGS"),Qn(U),$t(A.TokenKind.RPAREN)}function Qn(U){var oe=Pt().startPos,Ce;do{At();var at=Pt();at===null&&tt(oe,"RUN_OUT_OF_ARGUMENTS"),at.getKind()!==A.TokenKind.RPAREN&&U.push(zt()),Ce=Pt()}while(Ce!==null&&Ce.kind===A.TokenKind.COMMA);Ce===null&&tt(oe,"RUN_OUT_OF_ARGUMENTS")}function Rt(U){return U===null?Tr.length:U.startPos}function da(){return Pa()||Ia()||Qr()||Dn()||ri()||ti(!1)||fa()||dn()||Yn(!1)||wr(!1)||Xn()||Vn()?zr():null}function dn(){if(Qt(A.TokenKind.BEAN_REF)){var U=At(),oe=null,Ce=null;Qt(A.TokenKind.IDENTIFIER)?(oe=$t(A.TokenKind.IDENTIFIER),Ce=oe.data):Qt(A.TokenKind.LITERAL_STRING)?(oe=$t(A.TokenKind.LITERAL_STRING),Ce=oe.stringValue(),Ce=Ce.substring(1,Ce.length()-1)):tt(U.startPos,"INVALID_BEAN_REFERENCE");var at=Re.BeanReference.create(Ue(oe),Ce);return Mt(at),!0}return!1}function Qr(){if(Qt(A.TokenKind.IDENTIFIER)){var U=Pt();if(U.stringValue()!=="T")return!1;var oe=At();if(Qt(A.TokenKind.RSQUARE))return Mt(q.PropertyReference.create(oe.stringValue(),Ue(oe))),!0;$t(A.TokenKind.LPAREN);for(var Ce=ei(),at=0;Gr(A.TokenKind.LSQUARE,!0);)$t(A.TokenKind.RSQUARE),at++;return $t(A.TokenKind.RPAREN),Mt(we.TypeReference.create(Ue(U),Ce,at)),!0}return!1}function Dn(){if(Qt(A.TokenKind.IDENTIFIER)){var U=Pt();return U.stringValue().toLowerCase()!=="null"?!1:(At(),Mt(R.NullLiteral.create(Ue(U))),!0)}return!1}function Yn(U){var oe=Pt();if(!Gr(A.TokenKind.PROJECT,!0))return!1;var Ce=zt();return $t(A.TokenKind.RSQUARE),Mt(ce.Projection.create(U,Ue(oe),Ce)),!0}function Vn(){var U=Pt(),oe=[];if(!Gr(A.TokenKind.LCURLY,!0))return!1;var Ce=null,at=Pt();if(Gr(A.TokenKind.RCURLY,!0))Ce=ee.InlineList.create(Lr(U.startPos,at.endPos));else if(Gr(A.TokenKind.COLON,!0))at=$t(A.TokenKind.RCURLY),Ce=H.InlineMap.create(Lr(U.startPos,at.endPos));else{var Kt=zt();if(Qt(A.TokenKind.RCURLY))oe.push(Kt),at=$t(A.TokenKind.RCURLY),Ce=ee.InlineList.create(Lr(U.startPos,at.endPos),oe);else if(Gr(A.TokenKind.COMMA,!0)){oe.push(Kt);do oe.push(zt());while(Gr(A.TokenKind.COMMA,!0));at=$t(A.TokenKind.RCURLY),Ce=ee.InlineList.create(Ue(U.startPos,at.endPos),oe)}else if(Gr(A.TokenKind.COLON,!0)){var ot=[];for(ot.push(Kt),ot.push(zt());Gr(A.TokenKind.COMMA,!0);)ot.push(zt()),$t(A.TokenKind.COLON),ot.push(zt());at=$t(A.TokenKind.RCURLY),Ce=H.InlineMap.create(Lr(U.startPos,at.endPos),ot)}else tt(U.startPos,"OOD")}return Mt(Ce),!0}function Xn(){var U=Pt();if(!Gr(A.TokenKind.LSQUARE,!0))return!1;var oe=zt();return $t(A.TokenKind.RSQUARE),Mt(Z.Indexer.create(Ue(U),oe)),!0}function wr(U){var oe=Pt();if(!jr())return!1;At();var Ce=zt();return Ce===null&&tt(Ue(oe),"MISSING_SELECTION_EXPRESSION"),$t(A.TokenKind.RSQUARE),oe.getKind()===A.TokenKind.SELECT_FIRST?Mt(X.Selection.create(U,X.Selection.FIRST,Ue(oe),Ce)):oe.getKind()===A.TokenKind.SELECT_LAST?Mt(X.Selection.create(U,X.Selection.LAST,Ue(oe),Ce)):Mt(X.Selection.create(U,X.Selection.ALL,Ue(oe),Ce)),!0}function ei(){for(var U=[],oe=Pt();pa(oe);)At(),oe.kind!==A.TokenKind.DOT&&U.push(qe.Identifier.create(oe.stringValue(),Ue(oe))),oe=Pt();U.length||(oe===null&&tt(Tr.length(),"OOD"),tt(oe.startPos,"NOT_EXPECTED_TOKEN","qualified ID",oe.getKind().toString().toLowerCase()));var Ce=Lr(U[0].getStartPosition(),U[U.length-1].getEndPosition());return xt.QualifiedIdentifier.create(Ce,U)}function pa(U){if(U===null||U.kind===A.TokenKind.LITERAL_STRING)return!1;if(U.kind===A.TokenKind.DOT||U.kind===A.TokenKind.IDENTIFIER)return!0;var oe=U.stringValue();return oe&&oe.length&&_t.test(oe)}function ti(U){if(Qt(A.TokenKind.IDENTIFIER)){var oe=At(),Ce=fr();return Ce===null?(Mt(q.PropertyReference.create(U,oe.stringValue(),Ue(oe))),!0):(Mt(I.MethodReference.create(U,oe.stringValue(),Ue(oe),Ce)),!0)}return!1}function ri(){if(En("new")){var U=At();if(Qt(A.TokenKind.RSQUARE))return Mt(q.PropertyReference.create(U.stringValue(),Ue(U))),!0;var oe=ei(),Ce=[];if(Ce.push(oe),Qt(A.TokenKind.LSQUARE)){for(var at=[];Gr(A.TokenKind.LSQUARE,!0);)Qt(A.TokenKind.RSQUARE)?at.push(null):at.push(zt()),$t(A.TokenKind.RSQUARE);Vn()&&Ce.push(zr()),Mt(Gt.ConstructorReference.create(Ue(U),at,Ce))}else Aa(Ce),Mt(Gt.ConstructorReference.create(Ue(U),Ce));return!0}return!1}function Mt(U){jn.push(U)}function zr(){return jn.pop()}function Pa(){var U=Pt();if(U===null)return!1;if(U.getKind()===A.TokenKind.LITERAL_INT||U.getKind()===A.TokenKind.LITERAL_LONG)Mt(K.NumberLiteral.create(parseInt(U.stringValue(),10),Ue(U)));else if(U.getKind()===A.TokenKind.LITERAL_REAL||U.getKind()===A.TokenKind.LITERAL_REAL_FLOAT)Mt(K.NumberLiteral.create(parseFloat(U.stringValue()),Ue(U)));else if(U.getKind()===A.TokenKind.LITERAL_HEXINT||U.getKind()===A.TokenKind.LITERAL_HEXLONG)Mt(K.NumberLiteral.create(parseInt(U.stringValue(),16),Ue(U)));else if(En("true"))Mt($.BooleanLiteral.create(!0,Ue(U)));else if(En("false"))Mt($.BooleanLiteral.create(!1,Ue(U)));else if(U.getKind()===A.TokenKind.LITERAL_STRING)Mt(w.StringLiteral.create(U.stringValue(),Ue(U)));else return!1;return At(),!0}function Ia(){if(Qt(A.TokenKind.LPAREN)){At();var U=zt();return $t(A.TokenKind.RPAREN),Mt(U),!0}else return!1}function ja(){var U=Pt();if(U===null)return null;if(U.isNumericRelationalOperator())return U;if(U.isIdentifier()){var oe=U.stringValue();if(oe.toLowerCase()==="instanceof")return U.asInstanceOfToken();if(oe.toLowerCase()==="matches")return U.asMatchesToken();if(oe.toLowerCase()==="between")return U.asBetweenToken()}return null}function $t(U){var oe=At();return oe===null&&tt(Tr.length,"OOD"),oe.getKind()!==U&&tt(oe.startPos,"NOT_EXPECTED_TOKEN",U.toString().toLowerCase(),oe.getKind().toString().toLowerCase()),oe}function Qt(U){return Gr(U,!1)}function Gr(U,oe){if(!ct())return!1;var Ce=Pt();return Ce.getKind()===U?(oe&&Wr++,!0):U===A.TokenKind.IDENTIFIER&&Ce.getKind().ordinal()>=A.TokenKind.DIV.ordinal()&&Ce.getKind().ordinal()<=A.TokenKind.NOT.ordinal()&&Ce.data!==null}function en(){if(!ct())return!1;for(var U=Pt(),oe=Array.prototype.slice.call(arguments),Ce=0,at=oe.length;Ce<at;Ce+=1)if(U.getKind()===oe[Ce])return!0;return!1}function En(U){if(!ct())return!1;var oe=Pt();return oe.getKind()===A.TokenKind.IDENTIFIER&&oe.stringValue().toLowerCase()===U.toLowerCase()}function jr(){if(!ct())return!1;var U=Pt();return U.getKind()===A.TokenKind.SELECT||U.getKind()===A.TokenKind.SELECT_FIRST||U.getKind()===A.TokenKind.SELECT_LAST}function ct(){return Wr<Fr.length}function At(){return Wr>=cr?null:Fr[Wr++]}function Pt(){return Wr>=cr?null:Fr[Wr]}function tt(U,oe,Ce,at){throw Ce&&(oe+=`
Expected: `+Ce),at&&(oe+=`
Actual: `+at),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+Tr+"' at position "+U+". Message: "+oe}}function Zn(U){return U.getKind().hasPayload()?U.stringValue():U.getKind().toString().toLowerCase()}function tn(U,oe,Ce){ea(U,oe),pn(U,Ce)}function ea(U,oe){oe===null&&tt(U.startPos,"LEFT_OPERAND_PROBLEM")}function pn(U,oe){oe===null&&tt(U.startPos,"RIGHT_OPERAND_PROBLEM")}function Ue(U){return(U.startPos<<16)+U.endPos}function Lr(U,oe){return(U<<16)+oe}return{setConfiguration:_a,parse:Za}}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Tokenizer=void 0;var A=V(7),D=V(2),$=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],K=[],w=1,R=2,M=4;function I(){var re;for(re=48;re<=57;re+=1)K[re]|=w|R;for(re=65;re<=70;re+=1)K[re]|=R;for(re=97;re<=102;re+=1)K[re]|=R;for(re=65;re<=90;re+=1)K[re]|=M;for(re=97;re<=122;re+=1)K[re]|=M}I();function q(re){var Z=re,le=re+"\0",be=le.length,ae=0,Le=[];function Oe(){for(var g;ae<be;)if(g=le[ae],ce(g))Se();else switch(g){case"+":Qe(D.TokenKind.INC)?mt(D.TokenKind.INC):Je(D.TokenKind.PLUS);break;case"_":Se();break;case"-":Qe(D.TokenKind.DEC)?mt(D.TokenKind.DEC):Je(D.TokenKind.MINUS);break;case":":Je(D.TokenKind.COLON);break;case".":Je(D.TokenKind.DOT);break;case",":Je(D.TokenKind.COMMA);break;case"*":Je(D.TokenKind.STAR);break;case"/":Je(D.TokenKind.DIV);break;case"%":Je(D.TokenKind.MOD);break;case"(":Je(D.TokenKind.LPAREN);break;case")":Je(D.TokenKind.RPAREN);break;case"[":Je(D.TokenKind.LSQUARE);break;case"#":Je(D.TokenKind.HASH);break;case"]":Je(D.TokenKind.RSQUARE);break;case"{":Je(D.TokenKind.LCURLY);break;case"}":Je(D.TokenKind.RCURLY);break;case"@":Je(D.TokenKind.BEAN_REF);break;case"^":Qe(D.TokenKind.SELECT_FIRST)?mt(D.TokenKind.SELECT_FIRST):Je(D.TokenKind.POWER);break;case"!":Qe(D.TokenKind.NE)?mt(D.TokenKind.NE):Qe(D.TokenKind.PROJECT)?mt(D.TokenKind.PROJECT):Je(D.TokenKind.NOT);break;case"=":Qe(D.TokenKind.EQ)?mt(D.TokenKind.EQ):Je(D.TokenKind.ASSIGN);break;case"&":if(!Qe(D.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+Z+") at position "+ae};mt(D.TokenKind.SYMBOLIC_AND);break;case"|":if(!Qe(D.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+Z+") at position "+ae};mt(D.TokenKind.SYMBOLIC_OR);break;case"?":Qe(D.TokenKind.SELECT)?mt(D.TokenKind.SELECT):Qe(D.TokenKind.ELVIS)?mt(D.TokenKind.ELVIS):Qe(D.TokenKind.SAFE_NAVI)?mt(D.TokenKind.SAFE_NAVI):Je(D.TokenKind.QMARK);break;case"$":Qe(D.TokenKind.SELECT_LAST)?mt(D.TokenKind.SELECT_LAST):Se();break;case">":Qe(D.TokenKind.GE)?mt(D.TokenKind.GE):Je(D.TokenKind.GT);break;case"<":Qe(D.TokenKind.LE)?mt(D.TokenKind.LE):Je(D.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Ve(g==="0");break;case" ":case"	":case"\r":case`
`:ae+=1;break;case"'":$e();break;case'"':Me();break;case"\0":ae+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+Z+") at position "+ae};default:throw{name:"SpelParseException",message:"Cannot handle character '"+g+"' in expression ("+Z+") at position "+ae}}}function $e(){for(var g=ae,we=!1,Re;!we;)if(ae+=1,Re=le[ae],Re==="'"&&(le[ae+1]==="'"?ae+=1:we=!0),Re.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+Z+") at position "+ae};ae+=1,Le.push(new A.Token(D.TokenKind.LITERAL_STRING,it(g,ae),g,ae))}function Me(){for(var g=ae,we=!1,Re;!we;)if(ae+=1,Re=le[ae],Re==='"'&&(le[ae+1]==='"'?ae+=1:we=!0),Re.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+Z+") at position "+ae};ae+=1,Le.push(new A.Token(D.TokenKind.LITERAL_STRING,it(g,ae),g,ae))}function Ve(g){var we=!1,Re=ae,qe=le[ae+1],xt=qe==="x"||qe==="X",Gt,nt,vr,_t;if(g&&xt){ae=ae+1;do ae+=1;while(ge(le[ae]));gt("L","l")?(Be(it(Re+2,ae),!0,Re,ae),ae+=1):Be(it(Re+2,ae),!1,Re,ae);return}do ae+=1;while(X(le[ae]));if(qe=le[ae],qe==="."){we=!0,Gt=ae;do ae+=1;while(X(le[ae]));if(ae===Gt+1){ae=Gt,rt(it(Re,ae),!1,Re,ae);return}}if(nt=ae,gt("L","l")){if(we)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+Z+") at position "+ae};rt(it(Re,nt),!0,Re,nt),ae+=1}else if(Dt(le[ae])){we=!0,ae+=1,vr=le[ae],H(vr)&&(ae+=1);do ae+=1;while(X(le[ae]));_t=!1,Lt(le[ae])?(_t=!0,ae+=1,nt=ae):ee(le[ae])&&(ae+=1,nt=ae),lt(it(Re,ae),_t,Re,ae)}else qe=le[ae],_t=!1,Lt(qe)?(we=!0,_t=!0,ae+=1,nt=ae):ee(qe)&&(we=!0,ae+=1,nt=ae),we?lt(it(Re,nt),_t,Re,nt):rt(it(Re,nt),!1,Re,nt)}function Se(){var g=ae,we,Re,qe;do ae+=1;while(Jt(le[ae]));if(we=it(g,ae),(ae-g===2||ae-g===3)&&(Re=we.toUpperCase(),qe=$.indexOf(Re),qe>=0)){_e(D.TokenKind.valueOf(Re),g,we);return}Le.push(new A.Token(D.TokenKind.IDENTIFIER,we.replace("\0",""),g,ae))}function rt(g,we,Re,qe){we?Le.push(new A.Token(D.TokenKind.LITERAL_LONG,g,Re,qe)):Le.push(new A.Token(D.TokenKind.LITERAL_INT,g,Re,qe))}function Be(g,we,Re,qe){if(g.length===0)throw we?{name:"SpelParseException",message:"Not a long in expression ("+Z+") at position "+ae}:{name:"SpelParseException",message:"Not an int in expression ("+Z+") at position "+ae};we?Le.push(new A.Token(D.TokenKind.LITERAL_HEXLONG,g,Re,qe)):Le.push(new A.Token(D.TokenKind.LITERAL_HEXINT,g,Re,qe))}function lt(g,we,Re,qe){we?Le.push(new A.Token(D.TokenKind.LITERAL_REAL_FLOAT,g,Re,qe)):Le.push(new A.Token(D.TokenKind.LITERAL_REAL,g,Re,qe))}function it(g,we){return le.substring(g,we)}function Qe(g){return g.tokenChars.length===2&&le[ae]===g.tokenChars[0]?le[ae+1]===g.tokenChars[1]:!1}function Je(g){Le.push(new A.Token(g,null,ae,ae+1)),ae+=1}function mt(g){Le.push(new A.Token(g,null,ae,ae+2)),ae+=2}function _e(g,we,Re){Le.push(new A.Token(g,Re,we,we+g.getLength()))}function Jt(g){return ce(g)||X(g)||g==="_"||g==="$"}function gt(g,we){var Re=le[ae];return Re===g||Re===we}function Dt(g){return g==="e"||g==="E"}function Lt(g){return g==="f"||g==="F"}function ee(g){return g==="d"||g==="D"}function H(g){return g==="+"||g==="-"}function X(g){return g.charCodeAt(0)>255?!1:(K[g.charCodeAt(0)]&w)!==0}function ce(g){return g.charCodeAt(0)>255?!1:(K[g.charCodeAt(0)]&M)!==0}function ge(g){return g.charCodeAt(0)>255?!1:(K[g.charCodeAt(0)]&R)!==0}return Oe(),Le}var te=O.Tokenizer={tokenize:q}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Token=void 0;var A=V(2);function D($,K,w,R){this.kind=$,this.startPos=w,this.endPos=R,K&&(this.data=K)}D.prototype.getKind=function(){return this.kind},D.prototype.toString=function(){var $="[";return $+=this.kind.toString(),this.kind.hasPayload()&&($+=":"+this.data),$+="]",$+="("+this.startPos+","+this.endPos+")",$},D.prototype.isIdentifier=function(){return this.kind===A.TokenKind.IDENTIFIER},D.prototype.isNumericRelationalOperator=function(){return this.kind===A.TokenKind.GT||this.kind===A.TokenKind.GE||this.kind===A.TokenKind.LT||this.kind===A.TokenKind.LE||this.kind===A.TokenKind.EQ||this.kind===A.TokenKind.NE},D.prototype.stringValue=function(){return this.data},D.prototype.asInstanceOfToken=function(){return new D(A.TokenKind.INSTANCEOF,this.startPos,this.endPos)},D.prototype.asMatchesToken=function(){return new D(A.TokenKind.MATCHES,this.startPos,this.endPos)},D.prototype.asBetweenToken=function(){return new D(A.TokenKind.BETWEEN,this.startPos,this.endPos)},D.prototype.getStartPosition=function(){return this.startPos},D.prototype.getEndPosition=function(){return this.endPos},O.Token=D},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BooleanLiteral=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("boolean",w);return R.getValue=function(){return K},R.setValue=function(M){return K=M},R}var $=O.BooleanLiteral={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.NumberLiteral=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("number",w);return R.getValue=function(){return K},R.setValue=function(M){return K=M},R}var $=O.NumberLiteral={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.StringLiteral=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("string",w);function M(I){return(I[0]==="'"&&I[I.length-1]==="'"||I[0]==='"'&&I[I.length-1]==='"')&&(I=I.substring(1,I.length-1)),I.replace(/''/g,"'").replace(/""/g,'"')}return K=M(K),R.getValue=function(){return K},R.setValue=function(I){return K=I},R}var $=O.StringLiteral={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.NullLiteral=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("null",w);return R.getValue=function(){return null},R}var $=O.NullLiteral={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.FunctionReference=void 0;var A=V(0),D=V(1);function $(w,R,M){var I=A.SpelNode.create("function",R);return I.getRaw=function(){return{functionName:w,args:M}},I.getValue=function(q){var te=q.locals||{},re=q.rootContext,Z=[];if(M.forEach(function(le){var be=q.activeContext;q.activeContext=new D.Stack,q.activeContext.push(q.rootContext),Z.push(le.getValue(q)),q.activeContext=be}),te[w])return te[w].apply(re,Z);throw{name:"FunctionDoesNotExistException",message:"Function '"+w+"' does not exist."}},I}var K=O.FunctionReference={create:$}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.MethodReference=void 0;var A=V(0),D=V(1);function $(w,R,M,I){var q=A.SpelNode.create("method",M);return q.getRaw=function(){return{methodName:R,args:I}},q.getValue=function(te){var re=te.activeContext.peek(),Z=[],le;if(!re)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+R+"' for an undefined context."};function be(ae){if(ae==null){if(w)return null;throw{name:"NullPointerException",message:"Method "+R+" does not exist."}}return ae}if(I.forEach(function(ae){var Le=te.activeContext;te.activeContext=new D.Stack,te.activeContext.push(te.rootContext),Z.push(ae.getValue(te)),te.activeContext=Le}),R.substr(0,3)==="get"&&!re[R])return be(re[R.charAt(3).toLowerCase()+R.substring(4)]);if(R.substr(0,3)==="set"&&!re[R])return re[R.charAt(3).toLowerCase()+R.substring(4)]=Z[0];if(Array.isArray(re)){if(R==="size")return re.length;if(R==="contains")return re.includes(Z[0])}return le=be(re[R]),le?le.apply(re,Z):null},q}var K=O.MethodReference={create:$}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.PropertyReference=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("property",R);return M.getRaw=function(){return w},M.getValue=function(I){var q=I.activeContext.peek();if(!q){if(K)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+w+"' for an undefined context."}}if(q[w]===void 0||q[w]===null){if(K)return null;if(w==="size"&&Array.isArray(q))return q.length;throw{name:"NullPointerException",message:"Property '"+w+"' does not exist."}}return q[w]},M.setValue=function(I,q){var te=q.activeContext.peek();if(!te)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+w+"' for an undefined context."};return te[w]=I},M.getName=function(){return w},M}var $=O.PropertyReference={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.VariableReference=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("variable",w);return R.getRaw=function(){return K},R.getValue=function(M){var I=M.activeContext.peek(),q=M.locals;if(!I)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+K+"' for an undefined context."};return K==="this"?I:K==="root"?M.rootContext:q[K]},R.setValue=function(M,I){var q=I.locals;return q[K]=M},R}var $=O.VariableReference={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.CompoundExpression=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create.apply(null,["compound",K].concat(w));function M(I){var q=R.getChildren().length,te;for(te=0;te<q;te+=1)R.getChildren()[te].getType()==="indexer"?I.activeContext.push(I.activeContext.peek()[R.getChildren()[te].getValue(I)]):I.activeContext.push(R.getChildren()[te].getValue(I));return function(){for(te=0;te<q;te+=1)I.activeContext.pop()}}return R.getValue=function(I){var q=I.activeContext.peek(),te;if(!q)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var re=M(I);return te=I.activeContext.peek(),re(),te},R.setValue=function(I,q){var te=M(q),re=R.getChildren().length;return q.activeContext.pop(),I=R.getChildren()[re-1].setValue(I,q),q.activeContext.push(null),te(),I},R}var $=O.CompoundExpression={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Indexer=void 0;var A=V(0),D=V(1);function $(w,R){var M=A.SpelNode.create.apply(null,["indexer",w].concat(R));return M.getValue=function(I){var q=I.activeContext,te,re=M.getChildren().length,Z,le;if(I.activeContext=new D.Stack,I.activeContext.push(I.rootContext),te=I.activeContext.peek(),!te)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(Z=0;Z<re;Z+=1)I.activeContext.push(M.getChildren()[Z].getValue(I));for(le=I.activeContext.peek(),Z=0;Z<re;Z+=1)I.activeContext.pop();return I.activeContext=q,le},M}var K=O.Indexer={create:$}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Assign=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("assign",K,w,R);return M.getValue=function(I){var q=I.activeContext.peek();if(!q)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+w.getValue(I)+"' for an undefined context."};return w.setValue(R.getValue(I),I)},M}var $=O.Assign={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpEQ=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-eq",K,w,R);return M.getValue=function(I){return w.getValue(I)===R.getValue(I)},M}var $=O.OpEQ={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpNE=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-ne",K,w,R);return M.getValue=function(I){return w.getValue(I)!==R.getValue(I)},M}var $=O.OpNE={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpGE=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-ge",K,w,R);return M.getValue=function(I){return w.getValue(I)>=R.getValue(I)},M}var $=O.OpGE={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpGT=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-gt",K,w,R);return M.getValue=function(I){return w.getValue(I)>R.getValue(I)},M}var $=O.OpGT={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpLE=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-le",K,w,R);return M.getValue=function(I){return w.getValue(I)<=R.getValue(I)},M}var $=O.OpLE={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpLT=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-lt",K,w,R);return M.getValue=function(I){return w.getValue(I)<R.getValue(I)},M}var $=O.OpLT={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpPlus=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-plus",K,w,R);return M.getValue=function(I){return R?w.getValue(I)+R.getValue(I):+w.getValue(I)},M}var $=O.OpPlus={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpMinus=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-minus",K,w,R);return M.getValue=function(I){return R?w.getValue(I)-R.getValue(I):-w.getValue(I)},M}var $=O.OpMinus={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpMultiply=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-multiply",K,w,R);return M.getValue=function(I){var q=w.getValue(I),te=R.getValue(I);if(typeof q=="number"&&typeof te=="number")return q*te;if(typeof q=="string"&&typeof te=="number"){for(var re="",Z=0;Z<te;Z+=1)re+=q;return re}return null},M}var $=O.OpMultiply={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpDivide=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-divide",K,w,R);return M.getValue=function(I){return w.getValue(I)/R.getValue(I)},M}var $=O.OpDivide={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpModulus=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-modulus",K,w,R);return M.getValue=function(I){return w.getValue(I)%R.getValue(I)},M}var $=O.OpModulus={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpPower=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-power",K,w,R);return M.getValue=function(I){return Math.pow(w.getValue(I),R.getValue(I))},M}var $=O.OpPower={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpInc=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-inc",K,R);return M.getValue=function(I){var q=R.getValue(I);return R.setValue(q+1,I),w?q:q+1},M}var $=O.OpInc={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpDec=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-dec",K,R);return M.getValue=function(I){var q=R.getValue(I);return R.setValue(q-1,I),w?q:q-1},M}var $=O.OpDec={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpNot=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("op-not",K,w);return R.getValue=function(M){return!w.getValue(M)},R}var $=O.OpNot={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpAnd=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-and",K,w,R);return M.getValue=function(I){return!!w.getValue(I)&&!!R.getValue(I)},M}var $=O.OpAnd={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpOr=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("op-or",K,w,R);return M.getValue=function(I){return!!w.getValue(I)||!!R.getValue(I)},M}var $=O.OpOr={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpMatches=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("matches",K,w,R);return M.getValue=function(I){var q=w.getValue(I),te=R.getValue(I);try{var re=new RegExp(te);return!!re.exec(q)}catch(Z){throw{name:"EvaluationException",message:Z.toString()}}},M}var $=O.OpMatches={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Ternary=void 0;var A=V(0);function D(K,w,R,M){var I=A.SpelNode.create("ternary",K,w,R,M);return I.getValue=function(q){return w.getValue(q)?R.getValue(q):M.getValue(q)},I}var $=O.Ternary={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Elvis=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("elvis",K,w,R);return M.getValue=function(I){return w.getValue(I)!==null?w.getValue(I):R.getValue(I)},M}var $=O.Elvis={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.InlineList=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("list",K),M=[].concat(w||[]);return R.getRaw=function(){return M},R.getValue=function(I){return M.map(function(q){return q.getValue(I)})},R}var $=O.InlineList={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.InlineMap=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("map",K),M=[].concat(w||[]);return R.getValue=function(I){var q=!0,te=null,re={};return M.forEach(function(Z){q?Z.getType()==="property"?te=Z.getName():te=Z.getValue(I):re[te]=Z.getValue(I),q=!q}),re},R}var $=O.InlineMap={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Selection=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},D=V(0);function $(I,q,te){var re=!1;return te.activeContext.push(I),re=q.getValue(te),te.activeContext.pop(),re}function K(I,q,te,re){var Z=I.filter(function(le){return $(le,te,re)});switch(q){case"ALL":return Z;case"FIRST":return Z[0]||null;case"LAST":return Z.length?Z[Z.length-1]:null}}function w(I,q,te,re){var Z={},le,be,ae=[],Le={};for(be in I)I.hasOwnProperty(be)&&(le={key:be,value:I[be]},$(le,te,re)&&ae.push(le));switch(q){case"ALL":return ae.forEach(function(Oe){Z[Oe.key]=Oe.value}),Z;case"FIRST":return ae.length?(Le[ae[0].key]=ae[0].value,Le):null;case"LAST":return ae.length?(Le[ae[ae.length-1].key]=ae[ae.length-1].value,Le):null}ae.forEach(function(Oe){Z[Oe.key]=Oe.value})}function R(I,q,te,re){var Z=D.SpelNode.create("selection",te,re);return Z.getValue=function(le){var be=le.activeContext.peek();if(be){if(Array.isArray(be))return K(be,q,re,le);if((typeof be>"u"?"undefined":A(be))==="object")return w(be,q,re,le)}return null},Z}var M=O.Selection={create:R,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Projection=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},D=V(0);function $(R,M,I){return R.map(function(q){var te;return I.activeContext.push(q),te=M.getValue(I),I.activeContext.pop(),te})}function K(R,M,I){var q=D.SpelNode.create("projection",M,I);return q.getValue=function(te){var re=te.activeContext.peek(),Z=[],le;if(Array.isArray(re))return $(re,I,te);if((typeof re>"u"?"undefined":A(re))==="object"){for(le in re)re.hasOwnProperty(le)&&Z.push(re[le]);return $(Z,I,te)}return null},q}var w=O.Projection={create:K}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpInstanceof=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("instanceof",K,w,R);return M.getValue=function(I){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},M}var $=O.OpInstanceof={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.OpBetween=void 0;var A=V(0);function D(K,w,R){var M=A.SpelNode.create("between",K,w,R);return M.getValue=function(I){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},M}var $=O.OpBetween={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.TypeReference=void 0;var A=V(0);function D(K,M,R){var M=A.SpelNode.create("typeref",K,M);return M.getValue=function(I){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},M}var $=O.TypeReference={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BeanReference=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("beanref",K);return R.getValue=function(M){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},R}var $=O.BeanReference={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Identifier=void 0;var A=V(0);function D(K,w){var R=A.SpelNode.create("identifier",w);return R.getRaw=function(){return K},R.getValue=function(M){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},R}var $=O.Identifier={create:D}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.QualifiedIdentifier=void 0;var A=V(0);function D(w){if(Array.isArray(w)){for(var R=0,M=Array(w.length);R<w.length;R++)M[R]=w[R];return M}else return Array.from(w)}function $(w,R){var M=A.SpelNode.create.apply(A.SpelNode,["qualifiedidentifier",w].concat(D(R)));return M.getRaw=function(){return R.map(function(I){return I.getRaw()})},M.getValue=function(I){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},M}var K=O.QualifiedIdentifier={create:$}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ConstructorReference=void 0;var A=V(0),D=V(1);function $(M){if(Array.isArray(M)){for(var I=0,q=Array(M.length);I<M.length;I++)q[I]=M[I];return q}else return Array.from(M)}function K(M){return Array.isArray(M)?M:Array.from(M)}function w(M,I,q){var te=q!==void 0,re;te?re=I.length&&I[0]&&I[0].getType()==="number"?I[0].getValue():null:(q=I,I=void 0);var Z=q,le=K(Z),be=le[0],ae=le.slice(1),Le=A.SpelNode.create.apply(A.SpelNode,["constructorref",M].concat($(q)));return Le.getRaw=function(){return re},Le.getValue=function(Oe){if(te&&ae.length<=1){var $e=[];return ae.forEach(function(Me){var Ve=Oe.activeContext;Oe.activeContext=new D.Stack,Oe.activeContext.push(Oe.rootContext),$e.push(Me.getValue(Oe)),Oe.activeContext=Ve}),ae.length===1?$e[0]:re?new Array(re):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},Le}var R=O.ConstructorReference={create:w}},function(ye,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0});function A($,K){var w={};return w.authentication=$||{},w.principal=K||{},w.hasRole=function(R){var M=!1;return!R||!w.authentication&&!Array.isArray(w.authentication.authorities)?!1:(w.authentication.authorities.forEach(function(I){I.authority.toLowerCase()===R.toLowerCase()&&(M=!0)}),M)},w.hasPermission=function(){var R=Array.prototype.slice.call(arguments);if(R.length===1)return w.hasRole(R[0])},w}var D=O.StandardContext={create:A}}])})},61526:(Te,ye,O)=>{Te.exports=O(88319)},88319:(Te,ye,O)=>{var V=O(48287).Buffer,A=ye,D=/`/g,$=/\./g,K=/[\0\b\t\n\r\x1a\"\'\\]/g,w={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};A.escapeId=function(te,re){if(Array.isArray(te)){for(var Z="",le=0;le<te.length;le++)Z+=(le===0?"":", ")+A.escapeId(te[le],re);return Z}else return re?"`"+String(te).replace(D,"``")+"`":"`"+String(te).replace(D,"``").replace($,"`.`")+"`"},A.escape=function(te,re,Z){if(te==null)return"NULL";switch(typeof te){case"boolean":return te?"true":"false";case"number":return te+"";case"object":return Object.prototype.toString.call(te)==="[object Date]"?A.dateToString(te,Z||"local"):Array.isArray(te)?A.arrayToList(te,Z):V.isBuffer(te)?A.bufferToString(te):typeof te.toSqlString=="function"?String(te.toSqlString()):re?R(te.toString()):A.objectToValues(te,Z);default:return R(te)}},A.arrayToList=function(te,re){for(var Z="",le=0;le<te.length;le++){var be=te[le];Array.isArray(be)?Z+=(le===0?"":", ")+"("+A.arrayToList(be,re)+")":Z+=(le===0?"":", ")+A.escape(be,!0,re)}return Z},A.format=function(te,re,Z,le){if(re==null)return te;Array.isArray(re)||(re=[re]);for(var be=0,ae=/\?+/g,Le="",Oe=0,$e;Oe<re.length&&($e=ae.exec(te));){var Me=$e[0].length;if(!(Me>2)){var Ve=Me===2?A.escapeId(re[Oe]):A.escape(re[Oe],Z,le);Le+=te.slice(be,$e.index)+Ve,be=ae.lastIndex,Oe++}}return be===0?te:be<te.length?Le+te.slice(be):Le},A.dateToString=function(te,re){var Z=new Date(te);if(isNaN(Z.getTime()))return"NULL";var le,be,ae,Le,Oe,$e,Me;if(re==="local")le=Z.getFullYear(),be=Z.getMonth()+1,ae=Z.getDate(),Le=Z.getHours(),Oe=Z.getMinutes(),$e=Z.getSeconds(),Me=Z.getMilliseconds();else{var Ve=I(re);Ve!==!1&&Ve!==0&&Z.setTime(Z.getTime()+Ve*6e4),le=Z.getUTCFullYear(),be=Z.getUTCMonth()+1,ae=Z.getUTCDate(),Le=Z.getUTCHours(),Oe=Z.getUTCMinutes(),$e=Z.getUTCSeconds(),Me=Z.getUTCMilliseconds()}var Se=M(le,4)+"-"+M(be,2)+"-"+M(ae,2)+" "+M(Le,2)+":"+M(Oe,2)+":"+M($e,2)+"."+M(Me,3);return R(Se)},A.bufferToString=function(te){return"X"+R(te.toString("hex"))},A.objectToValues=function(te,re){var Z="";for(var le in te){var be=te[le];typeof be!="function"&&(Z+=(Z.length===0?"":", ")+A.escapeId(le)+" = "+A.escape(be,!0,re))}return Z},A.raw=function(te){if(typeof te!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return te}}};function R(q){for(var te=K.lastIndex=0,re="",Z;Z=K.exec(q);)re+=q.slice(te,Z.index)+w[Z[0]],te=K.lastIndex;return te===0?"'"+q+"'":te<q.length?"'"+re+q.slice(te)+"'":"'"+re+"'"}function M(q,te){for(q=q.toString();q.length<te;)q="0"+q;return q}function I(q){if(q==="Z")return 0;var te=q.match(/([\+\-\s])(\d\d):?(\d\d)?/);return te?(te[1]==="-"?-1:1)*(parseInt(te[2],10)+(te[3]?parseInt(te[3],10):0)/60)*60:!1}},4633:(Te,ye,O)=>{var V=O(73738).default;function A(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Te.exports=A=function(){return $},Te.exports.__esModule=!0,Te.exports.default=Te.exports;var D,$={},K=Object.prototype,w=K.hasOwnProperty,R=Object.defineProperty||function(ee,H,X){ee[H]=X.value},M=typeof Symbol=="function"?Symbol:{},I=M.iterator||"@@iterator",q=M.asyncIterator||"@@asyncIterator",te=M.toStringTag||"@@toStringTag";function re(ee,H,X){return Object.defineProperty(ee,H,{value:X,enumerable:!0,configurable:!0,writable:!0}),ee[H]}try{re({},"")}catch{re=function(X,ce,ge){return X[ce]=ge}}function Z(ee,H,X,ce){var ge=H&&H.prototype instanceof Me?H:Me,g=Object.create(ge.prototype),we=new Dt(ce||[]);return R(g,"_invoke",{value:mt(ee,X,we)}),g}function le(ee,H,X){try{return{type:"normal",arg:ee.call(H,X)}}catch(ce){return{type:"throw",arg:ce}}}$.wrap=Z;var be="suspendedStart",ae="suspendedYield",Le="executing",Oe="completed",$e={};function Me(){}function Ve(){}function Se(){}var rt={};re(rt,I,function(){return this});var Be=Object.getPrototypeOf,lt=Be&&Be(Be(Lt([])));lt&&lt!==K&&w.call(lt,I)&&(rt=lt);var it=Se.prototype=Me.prototype=Object.create(rt);function Qe(ee){["next","throw","return"].forEach(function(H){re(ee,H,function(X){return this._invoke(H,X)})})}function Je(ee,H){function X(ge,g,we,Re){var qe=le(ee[ge],ee,g);if(qe.type!=="throw"){var xt=qe.arg,Gt=xt.value;return Gt&&V(Gt)=="object"&&w.call(Gt,"__await")?H.resolve(Gt.__await).then(function(nt){X("next",nt,we,Re)},function(nt){X("throw",nt,we,Re)}):H.resolve(Gt).then(function(nt){xt.value=nt,we(xt)},function(nt){return X("throw",nt,we,Re)})}Re(qe.arg)}var ce;R(this,"_invoke",{value:function(g,we){function Re(){return new H(function(qe,xt){X(g,we,qe,xt)})}return ce=ce?ce.then(Re,Re):Re()}})}function mt(ee,H,X){var ce=be;return function(ge,g){if(ce===Le)throw Error("Generator is already running");if(ce===Oe){if(ge==="throw")throw g;return{value:D,done:!0}}for(X.method=ge,X.arg=g;;){var we=X.delegate;if(we){var Re=_e(we,X);if(Re){if(Re===$e)continue;return Re}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(ce===be)throw ce=Oe,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);ce=Le;var qe=le(ee,H,X);if(qe.type==="normal"){if(ce=X.done?Oe:ae,qe.arg===$e)continue;return{value:qe.arg,done:X.done}}qe.type==="throw"&&(ce=Oe,X.method="throw",X.arg=qe.arg)}}}function _e(ee,H){var X=H.method,ce=ee.iterator[X];if(ce===D)return H.delegate=null,X==="throw"&&ee.iterator.return&&(H.method="return",H.arg=D,_e(ee,H),H.method==="throw")||X!=="return"&&(H.method="throw",H.arg=new TypeError("The iterator does not provide a '"+X+"' method")),$e;var ge=le(ce,ee.iterator,H.arg);if(ge.type==="throw")return H.method="throw",H.arg=ge.arg,H.delegate=null,$e;var g=ge.arg;return g?g.done?(H[ee.resultName]=g.value,H.next=ee.nextLoc,H.method!=="return"&&(H.method="next",H.arg=D),H.delegate=null,$e):g:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,$e)}function Jt(ee){var H={tryLoc:ee[0]};1 in ee&&(H.catchLoc=ee[1]),2 in ee&&(H.finallyLoc=ee[2],H.afterLoc=ee[3]),this.tryEntries.push(H)}function gt(ee){var H=ee.completion||{};H.type="normal",delete H.arg,ee.completion=H}function Dt(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(Jt,this),this.reset(!0)}function Lt(ee){if(ee||ee===""){var H=ee[I];if(H)return H.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var X=-1,ce=function ge(){for(;++X<ee.length;)if(w.call(ee,X))return ge.value=ee[X],ge.done=!1,ge;return ge.value=D,ge.done=!0,ge};return ce.next=ce}}throw new TypeError(V(ee)+" is not iterable")}return Ve.prototype=Se,R(it,"constructor",{value:Se,configurable:!0}),R(Se,"constructor",{value:Ve,configurable:!0}),Ve.displayName=re(Se,te,"GeneratorFunction"),$.isGeneratorFunction=function(ee){var H=typeof ee=="function"&&ee.constructor;return!!H&&(H===Ve||(H.displayName||H.name)==="GeneratorFunction")},$.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,Se):(ee.__proto__=Se,re(ee,te,"GeneratorFunction")),ee.prototype=Object.create(it),ee},$.awrap=function(ee){return{__await:ee}},Qe(Je.prototype),re(Je.prototype,q,function(){return this}),$.AsyncIterator=Je,$.async=function(ee,H,X,ce,ge){ge===void 0&&(ge=Promise);var g=new Je(Z(ee,H,X,ce),ge);return $.isGeneratorFunction(H)?g:g.next().then(function(we){return we.done?we.value:g.next()})},Qe(it),re(it,te,"Generator"),re(it,I,function(){return this}),re(it,"toString",function(){return"[object Generator]"}),$.keys=function(ee){var H=Object(ee),X=[];for(var ce in H)X.push(ce);return X.reverse(),function ge(){for(;X.length;){var g=X.pop();if(g in H)return ge.value=g,ge.done=!1,ge}return ge.done=!0,ge}},$.values=Lt,Dt.prototype={constructor:Dt,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach(gt),!H)for(var X in this)X.charAt(0)==="t"&&w.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=D)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var X=this;function ce(xt,Gt){return we.type="throw",we.arg=H,X.next=xt,Gt&&(X.method="next",X.arg=D),!!Gt}for(var ge=this.tryEntries.length-1;ge>=0;--ge){var g=this.tryEntries[ge],we=g.completion;if(g.tryLoc==="root")return ce("end");if(g.tryLoc<=this.prev){var Re=w.call(g,"catchLoc"),qe=w.call(g,"finallyLoc");if(Re&&qe){if(this.prev<g.catchLoc)return ce(g.catchLoc,!0);if(this.prev<g.finallyLoc)return ce(g.finallyLoc)}else if(Re){if(this.prev<g.catchLoc)return ce(g.catchLoc,!0)}else{if(!qe)throw Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return ce(g.finallyLoc)}}}},abrupt:function(H,X){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var ge=this.tryEntries[ce];if(ge.tryLoc<=this.prev&&w.call(ge,"finallyLoc")&&this.prev<ge.finallyLoc){var g=ge;break}}g&&(H==="break"||H==="continue")&&g.tryLoc<=X&&X<=g.finallyLoc&&(g=null);var we=g?g.completion:{};return we.type=H,we.arg=X,g?(this.method="next",this.next=g.finallyLoc,$e):this.complete(we)},complete:function(H,X){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&X&&(this.next=X),$e},finish:function(H){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.finallyLoc===H)return this.complete(ce.completion,ce.afterLoc),gt(ce),$e}},catch:function(H){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.tryLoc===H){var ge=ce.completion;if(ge.type==="throw"){var g=ge.arg;gt(ce)}return g}}throw Error("illegal catch attempt")},delegateYield:function(H,X,ce){return this.delegate={iterator:Lt(H),resultName:X,nextLoc:ce},this.method==="next"&&(this.arg=D),$e}},$}Te.exports=A,Te.exports.__esModule=!0,Te.exports.default=Te.exports},73738:Te=>{function ye(O){"@babel/helpers - typeof";return Te.exports=ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},Te.exports.__esModule=!0,Te.exports.default=Te.exports,ye(O)}Te.exports=ye,Te.exports.__esModule=!0,Te.exports.default=Te.exports},54756:(Te,ye,O)=>{var V=O(4633)();Te.exports=V;try{regeneratorRuntime=V}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=V:Function("r","regeneratorRuntime = r")(V)}},48422:(Te,ye,O)=>{var V=O(36453).default;function A(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Te.exports=A=function(){return $},Te.exports.__esModule=!0,Te.exports.default=Te.exports;var D,$={},K=Object.prototype,w=K.hasOwnProperty,R=Object.defineProperty||function(ee,H,X){ee[H]=X.value},M=typeof Symbol=="function"?Symbol:{},I=M.iterator||"@@iterator",q=M.asyncIterator||"@@asyncIterator",te=M.toStringTag||"@@toStringTag";function re(ee,H,X){return Object.defineProperty(ee,H,{value:X,enumerable:!0,configurable:!0,writable:!0}),ee[H]}try{re({},"")}catch{re=function(X,ce,ge){return X[ce]=ge}}function Z(ee,H,X,ce){var ge=H&&H.prototype instanceof Me?H:Me,g=Object.create(ge.prototype),we=new Dt(ce||[]);return R(g,"_invoke",{value:mt(ee,X,we)}),g}function le(ee,H,X){try{return{type:"normal",arg:ee.call(H,X)}}catch(ce){return{type:"throw",arg:ce}}}$.wrap=Z;var be="suspendedStart",ae="suspendedYield",Le="executing",Oe="completed",$e={};function Me(){}function Ve(){}function Se(){}var rt={};re(rt,I,function(){return this});var Be=Object.getPrototypeOf,lt=Be&&Be(Be(Lt([])));lt&&lt!==K&&w.call(lt,I)&&(rt=lt);var it=Se.prototype=Me.prototype=Object.create(rt);function Qe(ee){["next","throw","return"].forEach(function(H){re(ee,H,function(X){return this._invoke(H,X)})})}function Je(ee,H){function X(ge,g,we,Re){var qe=le(ee[ge],ee,g);if(qe.type!=="throw"){var xt=qe.arg,Gt=xt.value;return Gt&&V(Gt)=="object"&&w.call(Gt,"__await")?H.resolve(Gt.__await).then(function(nt){X("next",nt,we,Re)},function(nt){X("throw",nt,we,Re)}):H.resolve(Gt).then(function(nt){xt.value=nt,we(xt)},function(nt){return X("throw",nt,we,Re)})}Re(qe.arg)}var ce;R(this,"_invoke",{value:function(g,we){function Re(){return new H(function(qe,xt){X(g,we,qe,xt)})}return ce=ce?ce.then(Re,Re):Re()}})}function mt(ee,H,X){var ce=be;return function(ge,g){if(ce===Le)throw Error("Generator is already running");if(ce===Oe){if(ge==="throw")throw g;return{value:D,done:!0}}for(X.method=ge,X.arg=g;;){var we=X.delegate;if(we){var Re=_e(we,X);if(Re){if(Re===$e)continue;return Re}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(ce===be)throw ce=Oe,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);ce=Le;var qe=le(ee,H,X);if(qe.type==="normal"){if(ce=X.done?Oe:ae,qe.arg===$e)continue;return{value:qe.arg,done:X.done}}qe.type==="throw"&&(ce=Oe,X.method="throw",X.arg=qe.arg)}}}function _e(ee,H){var X=H.method,ce=ee.iterator[X];if(ce===D)return H.delegate=null,X==="throw"&&ee.iterator.return&&(H.method="return",H.arg=D,_e(ee,H),H.method==="throw")||X!=="return"&&(H.method="throw",H.arg=new TypeError("The iterator does not provide a '"+X+"' method")),$e;var ge=le(ce,ee.iterator,H.arg);if(ge.type==="throw")return H.method="throw",H.arg=ge.arg,H.delegate=null,$e;var g=ge.arg;return g?g.done?(H[ee.resultName]=g.value,H.next=ee.nextLoc,H.method!=="return"&&(H.method="next",H.arg=D),H.delegate=null,$e):g:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,$e)}function Jt(ee){var H={tryLoc:ee[0]};1 in ee&&(H.catchLoc=ee[1]),2 in ee&&(H.finallyLoc=ee[2],H.afterLoc=ee[3]),this.tryEntries.push(H)}function gt(ee){var H=ee.completion||{};H.type="normal",delete H.arg,ee.completion=H}function Dt(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(Jt,this),this.reset(!0)}function Lt(ee){if(ee||ee===""){var H=ee[I];if(H)return H.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var X=-1,ce=function ge(){for(;++X<ee.length;)if(w.call(ee,X))return ge.value=ee[X],ge.done=!1,ge;return ge.value=D,ge.done=!0,ge};return ce.next=ce}}throw new TypeError(V(ee)+" is not iterable")}return Ve.prototype=Se,R(it,"constructor",{value:Se,configurable:!0}),R(Se,"constructor",{value:Ve,configurable:!0}),Ve.displayName=re(Se,te,"GeneratorFunction"),$.isGeneratorFunction=function(ee){var H=typeof ee=="function"&&ee.constructor;return!!H&&(H===Ve||(H.displayName||H.name)==="GeneratorFunction")},$.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,Se):(ee.__proto__=Se,re(ee,te,"GeneratorFunction")),ee.prototype=Object.create(it),ee},$.awrap=function(ee){return{__await:ee}},Qe(Je.prototype),re(Je.prototype,q,function(){return this}),$.AsyncIterator=Je,$.async=function(ee,H,X,ce,ge){ge===void 0&&(ge=Promise);var g=new Je(Z(ee,H,X,ce),ge);return $.isGeneratorFunction(H)?g:g.next().then(function(we){return we.done?we.value:g.next()})},Qe(it),re(it,te,"Generator"),re(it,I,function(){return this}),re(it,"toString",function(){return"[object Generator]"}),$.keys=function(ee){var H=Object(ee),X=[];for(var ce in H)X.push(ce);return X.reverse(),function ge(){for(;X.length;){var g=X.pop();if(g in H)return ge.value=g,ge.done=!1,ge}return ge.done=!0,ge}},$.values=Lt,Dt.prototype={constructor:Dt,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach(gt),!H)for(var X in this)X.charAt(0)==="t"&&w.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=D)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var X=this;function ce(xt,Gt){return we.type="throw",we.arg=H,X.next=xt,Gt&&(X.method="next",X.arg=D),!!Gt}for(var ge=this.tryEntries.length-1;ge>=0;--ge){var g=this.tryEntries[ge],we=g.completion;if(g.tryLoc==="root")return ce("end");if(g.tryLoc<=this.prev){var Re=w.call(g,"catchLoc"),qe=w.call(g,"finallyLoc");if(Re&&qe){if(this.prev<g.catchLoc)return ce(g.catchLoc,!0);if(this.prev<g.finallyLoc)return ce(g.finallyLoc)}else if(Re){if(this.prev<g.catchLoc)return ce(g.catchLoc,!0)}else{if(!qe)throw Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return ce(g.finallyLoc)}}}},abrupt:function(H,X){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var ge=this.tryEntries[ce];if(ge.tryLoc<=this.prev&&w.call(ge,"finallyLoc")&&this.prev<ge.finallyLoc){var g=ge;break}}g&&(H==="break"||H==="continue")&&g.tryLoc<=X&&X<=g.finallyLoc&&(g=null);var we=g?g.completion:{};return we.type=H,we.arg=X,g?(this.method="next",this.next=g.finallyLoc,$e):this.complete(we)},complete:function(H,X){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&X&&(this.next=X),$e},finish:function(H){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.finallyLoc===H)return this.complete(ce.completion,ce.afterLoc),gt(ce),$e}},catch:function(H){for(var X=this.tryEntries.length-1;X>=0;--X){var ce=this.tryEntries[X];if(ce.tryLoc===H){var ge=ce.completion;if(ge.type==="throw"){var g=ge.arg;gt(ce)}return g}}throw Error("illegal catch attempt")},delegateYield:function(H,X,ce){return this.delegate={iterator:Lt(H),resultName:X,nextLoc:ce},this.method==="next"&&(this.arg=D),$e}},$}Te.exports=A,Te.exports.__esModule=!0,Te.exports.default=Te.exports},36453:Te=>{function ye(O){"@babel/helpers - typeof";return Te.exports=ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},Te.exports.__esModule=!0,Te.exports.default=Te.exports,ye(O)}Te.exports=ye,Te.exports.__esModule=!0,Te.exports.default=Te.exports},37794:(Te,ye,O)=>{var V=O(48422)();Te.exports=V;try{regeneratorRuntime=V}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=V:Function("r","regeneratorRuntime = r")(V)}}}]);

//# sourceMappingURL=6224.14ad68dacd59bbbe57ca.js.map