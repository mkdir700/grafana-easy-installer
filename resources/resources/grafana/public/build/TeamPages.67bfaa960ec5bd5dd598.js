"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2212],{31084:(J,S,t)=>{t.d(S,{Y:()=>d});var O=t(96540),e=t(41053),p=t(10096),R=t(31678),T=t(37425),D=t(85927);const d=({teamId:C,roleOptions:u,disabled:o,roles:f,onApplyRoles:M,pendingRoles:A,apply:K=!1,maxWidth:j,width:V,isLoading:W})=>{const[{loading:P,value:z=f||[]},E]=(0,e.A)(async()=>{try{if(f)return f;if(K&&A?.length)return A;if(p.TP.hasPermission(R.AccessControlAction.ActionTeamsRolesList)&&C>0)return await(0,D.xN)(C)}catch(U){console.error("Error loading options",U)}return[]},[C,A,f]);(0,O.useEffect)(()=>{E()},[E]);const v=async U=>{K?M&&M(U):(await(0,D.G3)(U,C),await E())},H=p.TP.hasPermission(R.AccessControlAction.ActionTeamsRolesAdd)&&p.TP.hasPermission(R.AccessControlAction.ActionTeamsRolesRemove);return O.createElement(T.n,{apply:K,onRolesChange:v,roleOptions:u,appliedRoles:z,isLoading:P||W,disabled:o,basicRoleDisabled:!0,canUpdateRoles:H,maxWidth:j,width:V})}},54939:(J,S,t)=>{t.d(S,{o:()=>D});var O=t(96540),e=t(24705),p=t(10096),R=t(31678),T=t(85927);const D=d=>{const[C,u]=(0,O.useState)(d),{value:o=[]}=(0,e.A)(async()=>p.TP.licensedAccessControlEnabled()&&p.TP.hasPermission(R.AccessControlAction.ActionRolesList)?(0,T.RL)(C):Promise.resolve([]),[C]);return[{roleOptions:o},u]}},39745:(J,S,t)=>{t.d(S,{A:()=>Y,u:()=>U});var O=t(32196),e=t(96540),p=t(97594),R=t(41987),T=t(13544),D=t(14110),d=t(32264),C=t(84167),u=t(88575),o=t(88323),f=t(60029),M=t(20333),A=t(15648),K=t(86460),j=t(55852),V=t(3911),W=t(59429),P=t(44836),z=t(74513),E=t(65615),v=t(2769);function H(){const m=z.Yj.map(c=>({value:c.code,label:c.name})).sort((c,L)=>c.value===z.wi?1:L.value===z.wi?-1:c.label.localeCompare(L.label));return[{value:"",label:(0,P.t)("common.locale.default","Default")},...m]}class U extends e.PureComponent{constructor(l){super(l),this.onSubmitForm=async c=>{if(c.preventDefault(),this.props.onConfirm?await this.props.onConfirm():!0){const{homeDashboardUID:w,theme:$,timezone:N,weekStart:_,language:F,queryHistory:x}=this.state;await this.service.update({homeDashboardUID:w,theme:$,timezone:N,weekStart:_,language:F,queryHistory:x}),window.location.reload()}},this.onThemeChanged=c=>{this.setState({theme:c.value}),c.value&&(0,v.K)(c.value,!0)},this.onTimeZoneChanged=c=>{typeof c=="string"&&this.setState({timezone:c})},this.onWeekStartChanged=c=>{this.setState({weekStart:c})},this.onHomeDashboardChanged=c=>{this.setState({homeDashboardUID:c})},this.onLanguageChanged=c=>{this.setState({language:c}),(0,D.rR)("grafana_preferences_language_changed",{toLanguage:c,preferenceType:this.props.preferenceType})},this.service=new E.W(l.resourceUri),this.state={theme:"",timezone:"",weekStart:"",language:"",queryHistory:{homeTab:""}},this.themeOptions=(0,p.k)(d.$.featureToggles.extraThemes).map(c=>({value:c.id,label:i(c)})),this.themeOptions.unshift({value:"",label:(0,P.t)("shared-preferences.theme.default-label","Default")})}async componentDidMount(){const l=await this.service.load();this.setState({homeDashboardUID:l.homeDashboardUID,theme:l.theme,timezone:l.timezone,weekStart:l.weekStart,language:l.language,queryHistory:l.queryHistory})}render(){const{theme:l,timezone:c,weekStart:L,homeDashboardUID:w,language:$}=this.state,{disabled:N}=this.props,_=r(),F=H(),x=this.themeOptions.find(G=>G.value===l)??this.themeOptions[0];return e.createElement("form",{onSubmit:this.onSubmitForm,className:_.form},e.createElement(C.n,{label:e.createElement(P.x6,{i18nKey:"shared-preferences.title"},"Preferences"),disabled:N},e.createElement(u.D,{label:(0,P.t)("shared-preferences.fields.theme-label","Interface theme")},e.createElement(o.l6,{options:this.themeOptions,value:x,onChange:this.onThemeChanged,inputId:"shared-preferences-theme-select"})),e.createElement(u.D,{label:e.createElement(f.J,{htmlFor:"home-dashboard-select"},e.createElement("span",{className:_.labelText},e.createElement(P.x6,{i18nKey:"shared-preferences.fields.home-dashboard-label"},"Home Dashboard"))),"data-testid":"User preferences home dashboard drop down"},e.createElement(W.b,{value:w,onChange:G=>this.onHomeDashboardChanged(G?.uid??""),defaultOptions:!0,isClearable:!0,placeholder:(0,P.t)("shared-preferences.fields.home-dashboard-placeholder","Default dashboard"),inputId:"home-dashboard-select"})),e.createElement(u.D,{label:(0,P.t)("shared-dashboard.fields.timezone-label","Timezone"),"data-testid":T.Tp.components.TimeZonePicker.containerV2},e.createElement(M.U,{includeInternal:!0,value:c,onChange:this.onTimeZoneChanged,inputId:"shared-preferences-timezone-picker"})),e.createElement(u.D,{label:(0,P.t)("shared-preferences.fields.week-start-label","Week start"),"data-testid":T.Tp.components.WeekStartPicker.containerV2},e.createElement(A.l,{value:L||"",onChange:this.onWeekStartChanged,inputId:"shared-preferences-week-start-picker"})),e.createElement(u.D,{label:e.createElement(f.J,{htmlFor:"locale-select"},e.createElement("span",{className:_.labelText},e.createElement(P.x6,{i18nKey:"shared-preferences.fields.locale-label"},"Language")),e.createElement(K.y,{featureState:R.Ay.beta})),"data-testid":"User preferences language drop down"},e.createElement(o.l6,{value:F.find(G=>G.value===$),onChange:G=>this.onLanguageChanged(G.value??""),options:F,placeholder:(0,P.t)("shared-preferences.fields.locale-placeholder","Choose language"),inputId:"locale-select"}))),e.createElement(j.$n,{type:"submit",variant:"primary","data-testid":T.Tp.components.UserProfile.preferencesSaveButton},e.createElement(P.x6,{i18nKey:"common.save"},"Save")))}}const Y=U,r=(0,V.N)(()=>({labelText:(0,O.css)({marginRight:"6px"}),form:(0,O.css)({width:"100%",maxWidth:"600px"})}));function i(m){switch(m.id){case"dark":return(0,P.t)("shared.preferences.theme.dark-label","Dark");case"light":return(0,P.t)("shared.preferences.theme.light-label","Light");case"system":return(0,P.t)("shared.preferences.theme.system-label","System preference");default:return m.name}}},92886:(J,S,t)=>{t.r(S),t.d(S,{TeamPages:()=>k,default:()=>Te});var O=t(2543),e=t(96540),p=t(63329),R=t(33378),T=t(40845),D=t(17205),d=t(32196),C=t(14110),u=t(14578),o=t(55852);const f=({featureName:a,className:s,children:n,text:g,featureId:h,eventVariant:y="",size:I="md",...b})=>{const B=(0,T.of)(M,I);return(0,e.useEffect)(()=>{(0,C.Xp)(`feature-highlights-${h}`,"test",y)},[y,h]),e.createElement("div",{className:(0,d.cx)(B.box,s),...b},e.createElement(u.I,{name:"rocket",className:B.icon}),e.createElement("div",{className:B.inner},e.createElement("p",{className:B.text},"You\u2019ve discovered a Pro feature! ",g||`Get the Grafana Pro plan to access ${a}.`),e.createElement(o.z9,{variant:"secondary",size:I,className:B.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer"},"Upgrade")))},M=(a,s)=>{const n=a.shape.borderRadius(2),g=s==="md"?"body":"bodySmall";return{box:(0,d.css)`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${n};
      background: ${a.colors.success.transparent};
      padding: ${a.spacing(2)};
      color: ${a.colors.success.text};
      font-size: ${a.typography[g].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${a.spacing(0,"auto",3,"auto")};
      max-width: ${a.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:(0,d.css)`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:(0,d.css)`
      margin: 0;
    `,button:(0,d.css)`
      background-color: ${a.colors.success.main};
      font-weight: ${a.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${a.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${a.colors.text.primary};
        outline: 2px solid ${a.colors.primary.main};
      }
    `,icon:(0,d.css)`
      margin: ${a.spacing(.5,1,.5,.5)};
    `}},A=({listItems:a,image:s,featureUrl:n,featureName:g,description:h,caption:y,action:I})=>{const b=(0,T.of)(K);return e.createElement("div",{className:b.container},e.createElement("div",{className:b.content},e.createElement("h3",{className:b.title},"Get started with ",g),h&&e.createElement("h6",{className:b.description},h),e.createElement("ul",{className:b.list},a.map((B,Q)=>e.createElement("li",{key:Q},e.createElement(u.I,{name:"check",size:"xl",className:b.icon})," ",B))),I?.link&&e.createElement(o.z9,{variant:"primary",href:I.link},I.text),I?.onClick&&e.createElement(o.$n,{variant:"primary",onClick:I.onClick},I.text),n&&e.createElement(o.z9,{fill:"text",href:n,className:b.link,target:"_blank",rel:"noreferrer noopener"},"Learn more")),e.createElement("div",{className:b.media},e.createElement("img",{src:W(s),alt:"Feature screenshot"}),y&&e.createElement("p",{className:b.caption},y)))},K=a=>({container:(0,d.css)`
      display: flex;
      justify-content: space-between;
    `,content:(0,d.css)`
      width: 45%;
      margin-right: ${a.spacing(4)};
    `,media:(0,d.css)`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:(0,d.css)`
      color: ${a.colors.text.maxContrast};
    `,description:(0,d.css)`
      color: ${a.colors.text.primary};
      font-weight: ${a.typography.fontWeightLight};
    `,list:(0,d.css)`
      list-style: none;
      margin: ${a.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${a.colors.text.primary};
        padding: ${a.spacing(1,0)};
      }
    `,icon:(0,d.css)`
      color: ${a.colors.success.main};
      margin-right: ${a.spacing(1)};
    `,link:(0,d.css)`
      margin-left: ${a.spacing(2)};
    `,caption:(0,d.css)`
      font-weight: ${a.typography.fontWeightLight};
      margin: ${a.spacing(1,0,0)};
    `}),j=({featureName:a,description:s,featureUrl:n,image:g})=>{const h=useStyles2(V);return React.createElement("div",{className:h.container},React.createElement("h3",{className:h.title},"Get started with ",a),s&&React.createElement("h6",{className:h.description},s),React.createElement(LinkButton,{fill:"text",href:n,target:"_blank",rel:"noreferrer noopener"},"Learn more"),React.createElement("div",{className:h.media},React.createElement("img",{src:W(g),alt:"Feature screenshot"})))},V=a=>({container:css`
      overflow: auto;
      height: 100%;
    `,title:css`
      color: ${a.colors.text.maxContrast};
    `,description:css`
      color: ${a.colors.text.primary};
      font-weight: ${a.typography.fontWeightLight};
    `,media:css`
      width: 100%;
      margin-top: ${a.spacing(2)};

      img {
        width: 100%;
      }
    `}),W=a=>a.startsWith("http")?a:"/public/img/enterprise/highlights/"+a;var P=t(2913),z=t(17422),E=t(16233),v=t(31678),H=t(56034),U=t(39268),Y=t(14186),r=t(10354),i=t(9025),m=t(25469),l=t(7521),c=t(35538),L=t(33667);const w=a=>a.groups,$=(a,s)=>a.team.id===parseInt(s,10)?a.team:null;function N(a){return{groups:w(a.team)}}const _={loadTeamGroups:L.aK,addTeamGroup:L.It,removeTeamGroup:L.nC},F=(0,p.connect)(N,_),x="Sync LDAP, OAuth or SAML groups with your Grafana teams.";class G extends e.PureComponent{constructor(s){super(s),this.onToggleAdding=()=>{this.setState({isAdding:!this.state.isAdding})},this.onNewGroupIdChanged=n=>{this.setState({newGroupId:n.target.value})},this.onAddGroup=n=>{n.preventDefault(),this.props.addTeamGroup(this.state.newGroupId),this.setState({isAdding:!1,newGroupId:""})},this.onRemoveGroup=n=>{this.props.removeTeamGroup(n.groupId)},this.state={isAdding:!1,newGroupId:""}}componentDidMount(){this.fetchTeamGroups()}async fetchTeamGroups(){await this.props.loadTeamGroups()}isNewGroupValid(){return this.state.newGroupId.length>1}renderGroup(s){const{isReadOnly:n}=this.props;return e.createElement("tr",{key:s.groupId},e.createElement("td",null,s.groupId),e.createElement("td",{style:{width:"1%"}},e.createElement(o.$n,{size:"sm",variant:"destructive",onClick:()=>this.onRemoveGroup(s),disabled:n,"aria-label":`Remove group ${s.groupId}`},e.createElement(u.I,{name:"times"}))))}render(){const{isAdding:s,newGroupId:n}=this.state,{groups:g,isReadOnly:h}=this.props;return e.createElement("div",null,(0,c.z5)()&&e.createElement(f,{featureId:"team-sync",eventVariant:"trial",featureName:"team sync",text:"Add a group to enable team sync for free during your trial of Grafana Pro."}),e.createElement("div",{className:"page-action-bar"},(!(0,c.z5)()||g.length>0)&&e.createElement(e.Fragment,null,e.createElement("h3",{className:"page-sub-heading"},"External group sync"),e.createElement(H.m,{placement:"auto",content:x},e.createElement(u.I,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"}))),e.createElement("div",{className:"page-action-bar__spacer"}),g.length>0&&e.createElement(o.$n,{className:"pull-right",onClick:this.onToggleAdding,disabled:h},e.createElement(u.I,{name:"plus"})," Add group")),e.createElement(i.a,{in:s},e.createElement("div",{className:"cta-form"},e.createElement(m.J,{onClick:this.onToggleAdding}),e.createElement("form",{onSubmit:this.onAddGroup},e.createElement(U.C,null,e.createElement(Y.I,{label:"Add External Group",tooltip:"LDAP Group Example: cn=users,ou=groups,dc=grafana,dc=org."},e.createElement(r.p,{type:"text",id:"add-external-group",placeholder:"",value:n,onChange:this.onNewGroupIdChanged,disabled:h})),e.createElement(o.$n,{type:"submit",disabled:h||!this.isNewGroupValid(),style:{marginLeft:4}},"Add group"))))),g.length===0&&!s&&((0,c.z5)()?e.createElement(Z,{action:{onClick:this.onToggleAdding,text:"Add group"}}):e.createElement(l.A,{onClick:this.onToggleAdding,buttonIcon:"users-alt",title:"There are no external groups to sync with",buttonTitle:"Add group",proTip:x,proTipLinkTitle:"Learn more",proTipLink:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-team-sync/",proTipTarget:"_blank",buttonDisabled:h})),g.length>0&&e.createElement("div",{className:"admin-list-table"},e.createElement("table",{className:"filter-table filter-table--hover form-inline"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"External Group ID"),e.createElement("th",{style:{width:"1%"}}))),e.createElement("tbody",null,g.map(y=>this.renderGroup(y))))))}}const Z=({action:a})=>{const s=(0,T.$j)();return e.createElement(A,{action:a,listItems:["Stop managing user access in two places - assign users to groups in SAML, LDAP or Oauth, and manage access at a Team level in Grafana","Update users\u2019 permissions immediately when you add or remove them from an LDAP group, with no need for them to sign out and back in"],image:`team-sync-${s.isLight?"light":"dark"}.png`,featureName:"team sync",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/team-sync",description:"Team Sync makes it easier for you to manage users\u2019 access in Grafana, by immediately updating each user\u2019s Grafana teams and permissions based on their single sign-on group membership, instead of when users sign in."})},te=(0,p.connect)(N,_)(G);var ae=t(5108);const ne=a=>{const s=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsPermissionsWrite,a.team);return e.createElement(ae.x,{title:"",addPermissionTitle:"Add member",buttonLabel:"Add member",emptyLabel:"There are no members in this team or you do not have the permissions to list the current members.",resource:"teams",resourceId:a.team.id,canSetPermissions:s})};var se=t(49785),re=t(67061),oe=t(84167),X=t(88575),ie=t(31084),ce=t(85927),le=t(54939),me=t(39745);const de={updateTeam:L.n7},ue=(0,p.connect)(null,de)(({team:a,updateTeam:s})=>{const n=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsWrite,a),g=E.TP.user.orgId,[{roleOptions:h}]=(0,le.o)(g),[y,I]=(0,e.useState)([]),{handleSubmit:b,register:B,formState:{errors:Q}}=(0,se.mN)({defaultValues:a}),q=E.TP.hasPermission(v.AccessControlAction.ActionTeamsRolesAdd)&&E.TP.hasPermission(v.AccessControlAction.ActionTeamsRolesRemove),Pe=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsRolesList,a)&&E.TP.hasPermission(v.AccessControlAction.ActionRolesList),ve=async ee=>{E.TP.licensedAccessControlEnabled()&&q&&await(0,ce.G3)(y,a.id),s(ee.name,ee.email||"")};return e.createElement(re.B,{direction:"column",gap:3},e.createElement("form",{onSubmit:b(ve),style:{maxWidth:"600px"}},e.createElement(oe.n,{label:"Team details"},e.createElement(X.D,{label:"Name",disabled:!n,required:!0,invalid:!!Q.name,error:"Name is required"},e.createElement(r.p,{...B("name",{required:!0}),id:"name-input"})),E.TP.licensedAccessControlEnabled()&&Pe&&e.createElement(X.D,{label:"Role"},e.createElement(ie.Y,{teamId:a.id,roleOptions:h,disabled:!q,apply:!0,onApplyRoles:I,pendingRoles:y,maxWidth:"100%"})),e.createElement(X.D,{label:"Email",description:"This is optional and is primarily used to set the team profile avatar (via gravatar service).",disabled:!n},e.createElement(r.p,{...B("email"),placeholder:"team@email.com",type:"email",id:"email-input"})),e.createElement(o.$n,{type:"submit",disabled:!n},"Update"))),e.createElement(me.u,{resourceUri:`teams/${a.id}`,disabled:!n,preferenceType:"team"}))});var ge=t(78319),pe=(a=>(a.Members="members",a.Settings="settings",a.GroupSync="groupsync",a))(pe||{});function he(a,s){const n=parseInt(s.match.params.id,10),g=$(a.team,n);let h="members";(!g||!E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsPermissionsRead,g))&&(h="settings");const y=s.match.params.page??h,I=(0,ge.X)(y);return{pageNav:(0,z.tc)(a.navIndex,`team-${y}-${n}`,I).main,teamId:n,pageName:y,team:g}}const Ee={loadTeam:L.eo},fe=(0,p.connect)(he,Ee);class k extends e.PureComponent{constructor(s){super(s),this.textsAreEqual=(n,g)=>!n&&!g?!0:!n||!g?!1:n.toLocaleLowerCase()===g.toLocaleLowerCase(),this.state={isLoading:!1,isSyncEnabled:(0,R.a)("teamsync")}}async componentDidMount(){await this.fetchTeam()}async fetchTeam(){const{loadTeam:s,teamId:n}=this.props;this.setState({isLoading:!0});const g=await s(n);return this.setState({isLoading:!1}),g}getCurrentPage(){const s=["members","settings","groupsync"],n=this.props.pageName;return(0,O.includes)(s,n)?n:s[0]}renderPage(){const{isSyncEnabled:s}=this.state,{team:n}=this.props,g=this.getCurrentPage(),h=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsRead,n),y=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsPermissionsRead,n),I=E.TP.hasPermissionInMetadata(v.AccessControlAction.ActionTeamsPermissionsWrite,n);switch(g){case"members":if(y)return e.createElement(ne,{team:n});case"settings":return h&&e.createElement(ue,{team:n});case"groupsync":if(s){if(y)return e.createElement(te,{isReadOnly:!I})}else if(P.Ay.featureToggles.featureHighlights)return e.createElement(e.Fragment,null,e.createElement(f,{featureName:"team sync",featureId:"team-sync"}),e.createElement(Z,null))}return null}render(){const{team:s,pageNav:n}=this.props;return e.createElement(D.Y,{navId:"teams",pageNav:n},e.createElement(D.Y.Contents,{isLoading:this.state.isLoading},s&&Object.keys(s).length!==0&&this.renderPage()))}}const Te=fe((0,T.cV)(k))},33667:(J,S,t)=>{t.d(S,{Bu:()=>o,It:()=>H,To:()=>A,Vk:()=>V,aK:()=>v,eo:()=>M,n7:()=>E,nC:()=>U,nM:()=>K,yd:()=>j});var O=t(2543),e=t.n(O),p=t(17172),R=t(82467),T=t(10096),D=t(80714),d=t(31678),C=t(78319),u=t(34655);function o(r=!1){return async(i,m)=>{const{query:l,page:c,perPage:L,sort:w}=m().teams;if(!T.TP.hasPermission(d.AccessControlAction.ActionTeamsRead)){i((0,u.Q9)({teams:[],totalCount:0,page:1,perPage:L,noTeams:!0}));return}const $=await(0,p.AI)().get("/api/teams/search",(0,D.F)({query:l,page:c,perpage:L,sort:w}));let N=!1;if(r&&(N=$.teams.length===0),T.TP.licensedAccessControlEnabled()&&T.TP.hasPermission(d.AccessControlAction.ActionTeamsRolesList)){i((0,u.dJ)());const _=$?.teams.map(x=>x.id),F=await(0,p.AI)().post("/api/access-control/teams/roles/search",{teamIds:_});$.teams.forEach(x=>{x.roles=F?F[x.id]||[]:[]}),i((0,u.jE)())}i((0,u.Q9)({noTeams:N,...$}))}}const f=(0,O.debounce)(r=>r(o()),500);function M(r){return async i=>{const m=await(0,p.AI)().get(`/api/teams/${r}`,(0,D.F)());i((0,u.$T)(m)),i((0,R.Vz)((0,C.R)(m)))}}function A(r){return async i=>{await(0,p.AI)().delete(`/api/teams/${r}`),await T.TP.fetchUserPermissions(),i(o())}}function K(r){return async i=>{i((0,u.L5)(r)),f(i)}}function j(r){return async i=>{i((0,u.EC)(r)),i(o())}}function V({sortBy:r}){const i=r.length?`${r[0].id}-${r[0].desc?"desc":"asc"}`:void 0;return async m=>{m((0,u.$u)(i)),m(o())}}function W(){return async(r,i)=>{const m=i().team.team,l=await getBackendSrv().get(`/api/teams/${m.id}/members`);r(teamMembersLoaded(l))}}function P(r){return async(i,m)=>{const l=m().team.team;await getBackendSrv().post(`/api/teams/${l.id}/members`,{userId:r}),i(W())}}function z(r){return async(i,m)=>{const l=m().team.team;await getBackendSrv().delete(`/api/teams/${l.id}/members/${r}`),i(W())}}function E(r,i){return async(m,l)=>{const c=l().team.team;await(0,p.AI)().put(`/api/teams/${c.id}`,{name:r,email:i}),m(M(c.id))}}function v(){return async(r,i)=>{const m=i().team.team,l=await(0,p.AI)().get(`/api/teams/${m.id}/groups`);r((0,u.tC)(l))}}function H(r){return async(i,m)=>{const l=m().team.team;await(0,p.AI)().post(`/api/teams/${l.id}/groups`,{groupId:r}),i(v())}}function U(r){return async(i,m)=>{const l=m().team.team;await(0,p.AI)().delete(`/api/teams/${l.id}/groups?groupId=${encodeURIComponent(r)}`),i(v())}}function Y(r){return async i=>{await getBackendSrv().put(`/api/teams/${r.teamId}/members/${r.userId}`,{permission:r.permission}),i(W())}}},78319:(J,S,t)=>{t.d(S,{R:()=>C,X:()=>u});var O=t(33378),e=t(76323),p=t(2913),R=t(16233),T=t(35538),D=t(31678);const d={avatarUrl:"public/img/user_profile.png",id:1,name:"Loading",email:"loading",memberCount:0,permission:D.TeamPermissionLevel.Member,accessControl:{isEditor:!1},orgId:0,updated:""};function C(o){const f={img:o.avatarUrl,id:"team-"+o.id,subTitle:"Manage members and settings",url:"",text:o.name,children:[{active:!1,icon:"sliders-v-alt",id:`team-settings-${o.id}`,text:"Settings",url:`org/teams/edit/${o.id}/settings`}]};(o===d||R.TP.hasPermissionInMetadata(D.AccessControlAction.ActionTeamsPermissionsRead,o))&&f.children.unshift({active:!1,icon:"users-alt",id:`team-members-${o.id}`,text:"Members",url:`org/teams/edit/${o.id}/members`});const M={active:!1,icon:"sync",id:`team-groupsync-${o.id}`,text:"External group sync",url:`org/teams/edit/${o.id}/groupsync`},A=o===d;return(0,T.z5)()&&(M.tabSuffix=()=>(0,e.J)({experimentId:A?"":"feature-highlights-team-sync-badge",eventVariant:"trial"})),(0,O.a)("teamsync")?(A||R.TP.hasPermissionInMetadata(D.AccessControlAction.ActionTeamsPermissionsRead,o))&&f.children.push(M):p.Ay.featureToggles.featureHighlights&&f.children.push({...M,tabSuffix:()=>(0,e.J)({experimentId:A?"":"feature-highlights-team-sync-badge"})}),f}function u(o){const f=C(d);let M;for(const A of f.children)if(A.id.indexOf(o)>0){A.active=!0,M=A;break}return{main:f,node:M}}}}]);

//# sourceMappingURL=TeamPages.67bfaa960ec5bd5dd598.js.map