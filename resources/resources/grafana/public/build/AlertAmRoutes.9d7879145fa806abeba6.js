"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6719,1488],{40715:(re,W,t)=>{t.d(W,{o:()=>v});var o=t(96540),e=t(31678),T=t(97007);function v(C){const y=(0,e.useDispatch)(),G=(0,o.useRef)(C);G.current=C,(0,o.useEffect)(()=>()=>{y((0,T.N)({cleanupAction:G.current}))},[y])}},34708:(re,W,t)=>{t.r(W),t.d(W,{default:()=>_n,findRoutesMatchingFilters:()=>Yt});var o=t(32196),e=t(96540),T=t(41053),v=t(40845),C=t(63021),y=t(40675),G=t(40980),H=t(39558),Q=t(42418),g=t(67061),N=t(66602),c=t(83277),d=t(31678),I=t(40715),A=t(82843),S=t(55740),x=t(49962),V=t(68788);const Y=x.H.injectEndpoints({endpoints:n=>({contactPointsState:n.query({queryFn:async({amSourceName:a})=>{try{return{data:await(0,V.pB)(a)}}catch(r){return{error:r}}}})})}),J=n=>{const a={receivers:{},errorCount:0},{currentData:r}=Y.useContactPointsStateQuery({amSourceName:n??""},{skip:!n,pollingInterval:S.cB});return r??a};var oe=t(37959),Ee=t(57895),fe=t(42941),K=t(55852),$e=t(96374),u=t(38138),L=t(39938),ee=t(50720),te=t(29158),ue=t(64756),E=t(64853),M=t(19073),j=t(51488),me=t(23770),Z=t(57220),O=t(56361),de=t(54486),it=t(75591),$t=t(23088);const Ye=({buttonIcon:n,buttonLabel:a,buttonSize:r="lg",buttonVariant:l="primary",onButtonClick:s,text:p,href:m,showButton:i=!0})=>{const f=(0,v.of)(Wt),D={className:f.button,icon:n,size:r,variant:l};return e.createElement($t.Z,null,e.createElement(e.Fragment,null,e.createElement("p",{className:f.text},p),i&&(m?e.createElement(K.z9,{href:m,type:"button",...D},a):e.createElement(K.$n,{onClick:s,type:"button",...D},a))))},Wt=n=>({container:(0,o.css)`
      background-color: ${n.colors.background.secondary};
      color: ${n.colors.text.secondary};
      padding: ${n.spacing(4)};
      text-align: center;
    `,text:(0,o.css)`
      margin-bottom: ${n.spacing(2)};
    `,button:(0,o.css)`
      margin: ${n.spacing(2,0,1)};
    `});var Je=t(48205),ct=t(26058),We=t(79938),we=t(16293),Xe=t(76648),ye=t(84029);const pe=({exportFormat:n,onClose:a})=>{const{currentData:r="",isFetching:l}=We.hK.useExportMuteTimingsQuery({format:n}),s=`mute-timings-${new Date().getTime()}`;return l?e.createElement(H._,{text:"Loading...."}):e.createElement(we.J,{format:n,textDefinition:r,downloadFileName:s,onClose:a})},Ge=({exportFormat:n,onClose:a,muteTimingName:r})=>{const{currentData:l="",isFetching:s}=We.hK.useExportMuteTimingQuery({format:n,muteTiming:r}),p=`mute-timing-${r}-${new Date().getTime()}`;return s?e.createElement(H._,{text:"Loading...."}):e.createElement(we.J,{format:n,textDefinition:l,downloadFileName:p,onClose:a})},Re=({onClose:n,muteTimingName:a})=>{const[r,l]=(0,e.useState)("yaml");return e.createElement(Xe.m,{activeTab:r,onTabChange:l,onClose:n,formatProviders:Object.values(ye.sl)},a?e.createElement(Ge,{exportFormat:r,onClose:n,muteTimingName:a}):e.createElement(pe,{exportFormat:r,onClose:n}))};var Ze=t(4724);const wt=Symbol("all mute timings"),Xt=()=>{const[n,a]=(0,e.useState)(null),[r,l]=(0,fe.A)(!1),s=(0,e.useCallback)(()=>{a(null),l(!1)},[l]),p=i=>{a(i),l(!0)};return[(0,e.useMemo)(()=>!n||!r?null:n===wt?e.createElement(Re,{onClose:s}):e.createElement(Re,{muteTimingName:n,onClose:s}),[r,s,n]),p]},Zt=({alertManagerSourceName:n,muteTimingNames:a,hideActions:r})=>{const l=(0,v.of)(ut),s=(0,ue.wA)(),{currentData:p}=(0,j.f)(n,{refetchOnFocus:!0,refetchOnReconnect:!0}),m=p?.alertmanager_config,[i,f]=(0,e.useState)(""),D=(0,e.useMemo)(()=>{const w=m?(0,Ze.IT)(m):[],ne=m?.muteTimeProvenances??{};return w.filter(({name:F})=>a?a.includes(F):!0).map(F=>({id:F.name,data:{...F,provenance:ne[F.name]}}))},[a,m]),[P,$]=(0,M.L7)(M.QI.CreateMuteTiming),[R,b]=Xt(),[h,z]=(0,M.L7)(M.QI.ExportMuteTimings),B=kt(n,r,f,b);return e.createElement("div",{className:l.container},e.createElement(g.B,{direction:"row",alignItems:"center"},e.createElement("span",null,"Enter specific time intervals when not to send notifications or freeze notifications for recurring periods of time."),e.createElement(ct.h,null),!r&&D.length>0&&e.createElement(E._,{actions:[M.QI.CreateMuteTiming]},e.createElement(K.z9,{className:l.muteTimingsButtons,icon:"plus",variant:"primary",href:(0,O.nL)("alerting/routes/mute-timing/new",n)},"Add mute timing")),h&&e.createElement(K.$n,{icon:"download-alt",className:l.muteTimingsButtons,variant:"secondary","aria-label":"export all",disabled:!z,onClick:()=>b(wt)},"Export all")),D.length>0?e.createElement(it.E,{items:D,cols:B,pagination:{itemsPerPage:25}}):r?e.createElement(Ye,{text:"No mute timings configured",buttonLabel:"",showButton:!1}):e.createElement(Ye,{text:"You haven't created any mute timings yet",buttonLabel:"Add mute timing",buttonIcon:"plus",buttonSize:"lg",href:(0,O.nL)("alerting/routes/mute-timing/new",n),showButton:$}),!r&&e.createElement($e.u,{isOpen:!!i,title:"Delete mute timing",body:`Are you sure you would like to delete "${i}"`,confirmText:"Delete",onConfirm:()=>{s((0,me.$8)(n,i)),f("")},onDismiss:()=>f("")}),R)};function kt(n,a=!1,r,l){const[[s,p],[m,i]]=(0,M.Hl)([M.QI.UpdateMuteTiming,M.QI.DeleteMuteTiming]),f=!a&&(p||i),[D,P]=(0,M.L7)(M.QI.ExportMuteTimings),$=(0,v.of)(ut);return(0,e.useMemo)(()=>{const R=[{id:"name",label:"Name",renderCell:function({data:h}){return e.createElement(e.Fragment,null,h.name," ",h.provenance&&e.createElement(Je.rS,null))},size:"250px"},{id:"timeRange",label:"Time range",renderCell:({data:b})=>(0,Ze.av)(b)}];return f&&R.push({id:"actions",label:"",renderCell:function({data:h}){return e.createElement(qt,{muteTiming:h,alertManagerSourceName:n,setMuteTimingName:r})},size:"150px",className:$.actionsColumn}),D&&R.push({id:"actions",label:"",renderCell:function({data:h}){return e.createElement("div",null,e.createElement(u.W.Item,{icon:"download-alt",label:"Export",ariaLabel:"export",disabled:!P,"data-testid":"export",onClick:()=>l(h.name)}))},size:"100px"}),R},[n,r,f,D,P,l,$.actionsColumn])}function qt({muteTiming:n,alertManagerSourceName:a,setMuteTimingName:r}){const l=(0,v.of)(ut),s=a===Z.hY;return n.provenance?e.createElement(g.B,{direction:"row",alignItems:"center",justifyContent:"flex-end"},(0,de.d6)(n)&&!s&&e.createElement(L.E,{text:"Disabled",color:"orange",className:l.disabledBadge}),e.createElement(ee.N,{href:(0,O.nL)("/alerting/routes/mute-timing/edit",a,{muteName:n.name})},e.createElement(te.K,{name:"file-alt",tooltip:"View mute timing"}))):e.createElement(g.B,{direction:"row",alignItems:"center",justifyContent:"flex-end"},(0,de.d6)(n)&&!s&&e.createElement(L.E,{text:"Disabled",color:"orange",className:l.disabledBadge}),e.createElement(E._,{actions:[M.QI.UpdateMuteTiming]},e.createElement(ee.N,{href:(0,O.nL)("/alerting/routes/mute-timing/edit",a,{muteName:n.name})},e.createElement(te.K,{name:"edit",tooltip:"Edit mute timing",className:l.editButton}))),e.createElement(E._,{actions:[M.QI.DeleteMuteTiming]},e.createElement(te.K,{name:"trash-alt",tooltip:"Delete mute timing",onClick:()=>r(n.name)})))}const ut=n=>({container:(0,o.css)`
    display: flex;
    flex-flow: column nowrap;
  `,muteTimingsButtons:(0,o.css)`
    margin-bottom: ${n.spacing(2)};
    align-self: flex-end;
  `,disabledBadge:(0,o.css)({height:"fit-content"}),editButton:(0,o.css)({display:"flex"}),actionsColumn:(0,o.css)({justifyContent:"flex-end"})});var se=t(2543),_=t(88575),_t=t(60029),Be=t(56034),Le=t(14578),mt=t(10354),Se=t(88323),dt=t(94753),en=t(39964),Oe=t(98164),Gt=t(32642);const tn=({receivers:n,onChangeReceiver:a,onChangeMatchers:r,matchingCount:l})=>{const[s,p]=(0,en.l)(),m=(0,e.useRef)(null),{queryString:i,contactPoint:f}=rn(s),D=(0,v.of)(on),P=(0,e.useCallback)(()=>(0,se.debounce)(r,500),[r]);(0,e.useEffect)(()=>{a(f)},[f,a]),(0,e.useEffect)(()=>{const B=(0,Oe.J$)(i??"").map(Oe.NL);P()(B)},[P,i]);const $=(0,e.useCallback)(()=>{m.current&&(m.current.value=""),p({contactPoint:void 0,queryString:void 0})},[p]),R=n.map(an),b=R.find(B=>B.value===f)??null,h=i||f,z=i&&i.length>3?(0,Oe.J$)(i).length===0:!1;return e.createElement(g.B,{direction:"row",alignItems:"flex-end",gap:1},e.createElement(_.D,{className:D.noBottom,label:e.createElement(_t.J,null,e.createElement(g.B,{gap:.5},e.createElement("span",null,"Search by matchers"),e.createElement(Be.m,{content:e.createElement("div",null,"Filter silences by matchers using a comma separated list of matchers, ie:",e.createElement("pre",null,"severity=critical, instance=~cluster-us-.+"))},e.createElement(Le.I,{name:"info-circle",size:"sm"})))),invalid:z,error:z?"Query must use valid matcher syntax":null},e.createElement(mt.p,{ref:m,"data-testid":"search-query-input",placeholder:"Search",width:46,prefix:e.createElement(Le.I,{name:"search"}),onChange:B=>{p({queryString:B.currentTarget.value})},defaultValue:i})),e.createElement(_.D,{label:"Search by contact point",style:{marginBottom:0}},e.createElement(Se.l6,{id:"receiver","aria-label":"Search by contact point",value:b,options:R,onChange:B=>{p({contactPoint:B?.value})},width:28,isClearable:!0})),h&&e.createElement(g.B,{alignItems:"center"},e.createElement(K.$n,{variant:"secondary",icon:"times",onClick:$},"Clear filters"),e.createElement(dt.E,{variant:"bodySmall",color:"secondary"},l===0&&"No policies matching filters.",l===1&&`${l} policy matches the filters.`,l>1&&`${l} policies match the filters.`)))};function Lt(n,a){const r=new Map;function l(s,p){const m=[...p,s];if(a(s)){const i=r.get(s)??[];r.set(s,[...i,...m])}s.routes?.forEach(i=>l(i,m))}return l(n,[]),r}function nn(n,a){const r=(0,Gt.J$)(n);return a.every(l=>r.some(s=>(0,se.isEqual)(l,s)))}const an=n=>({label:n.name,value:n.name}),rn=n=>({queryString:n.get("queryString")??void 0,contactPoint:n.get("contactPoint")??void 0}),on=()=>({noBottom:(0,o.css)({marginBottom:0})});var be=t(37390),ln=t(62930),Ne=t(60021),sn=t(35016),cn=t(26423),un=t(12210),pt=t(99494),mn=t(37534);const dn=()=>{const{installed:n}=(0,un._)(pt.W.OnCall),{data:a}=cn.WG.useGrafanaOnCallIntegrationsQuery(void 0,{skip:!n});return l=>{const s=a??[];if(n&&(0,mn.p8)(l,s))return pt.W.OnCall}},Nt=n=>{const a=dn(),r=l=>({label:l.name,value:l.name,grafanaAppReceiverType:a(l)});return n.map(r)};var pn=t(55127),Fe=t.n(pn);const gn=({active:n=0,suppressed:a=0,unprocessed:r=0})=>{const l=[],s=n+a+r;return n&&l.push(e.createElement(L.E,{color:"red",key:"firing",text:`${n} firing`})),a&&l.push(e.createElement(L.E,{color:"blue",key:"suppressed",text:`${a} suppressed`})),r&&l.push(e.createElement(L.E,{color:"orange",key:"unprocessed",text:`${r} unprocessed`})),l.length>1&&l.unshift(e.createElement(e.Fragment,{key:"total"},s," ",Fe()("instance",s))),!!l.length?e.createElement(g.B,{gap:.5},l):null};var Te=t(49785),En=t(82762),X=t(79657),xe=t(33915),Ft=t(99903),ke=t(27835);const fn=({actionButtons:n,alertManagerSourceName:a,onSubmit:r,receivers:l,route:s})=>{const p=(0,v.of)(Ft.t),[m,i]=(0,e.useState)(!1),[f,D]=(0,e.useState)((0,X.gY)(s.group_by)),P=(0,X.YE)(s),{handleSubmit:$,register:R,control:b,formState:{errors:h},setValue:z,getValues:B}=(0,Te.mN)({defaultValues:{...P,overrideTimings:!0,overrideGrouping:!0}});return e.createElement("form",{onSubmit:$(r)},e.createElement(_.D,{label:"Default contact point",invalid:!!h.receiver,error:h.receiver?.message},e.createElement(e.Fragment,null,e.createElement("div",{className:p.container,"data-testid":"am-receiver-select"},e.createElement(Te.xI,{render:({field:{onChange:w,ref:ne,...F}})=>e.createElement(Se.l6,{"aria-label":"Default contact point",...F,className:p.input,onChange:le=>w((0,X.eb)(le)),options:l}),control:b,name:"receiver",rules:{required:{value:!0,message:"Required."}}}),e.createElement("span",null,"or"),e.createElement(ee.N,{className:p.linkText,href:(0,O.nL)("/alerting/notifications/receivers/new",a)},"Create a contact point")))),e.createElement(_.D,{label:"Group by",description:"Group alerts when you receive a notification based on labels.","data-testid":"am-group-select"},e.createElement(Te.xI,{render:({field:{onChange:w,ref:ne,...F}})=>e.createElement(Se.KF,{"aria-label":"Group by",...F,allowCustomValue:!0,className:p.input,onCreateOption:le=>{D(ie=>[...ie,(0,X.Mk)(le)]),z("groupBy",[...F.value||[],le])},onChange:le=>w((0,X.ie)(le)),options:[...X.Yl,...f]}),control:b,name:"groupBy"})),e.createElement(En.S,{collapsible:!0,className:p.collapse,isOpen:m,label:"Timing options",onToggle:i},e.createElement("div",{className:p.timingFormContainer},e.createElement(_.D,{label:"Group wait",description:"The waiting time until the initial notification is sent for a new group created by an incoming alert. Default 30 seconds.",invalid:!!h.groupWaitValue,error:h.groupWaitValue?.message,"data-testid":"am-group-wait"},e.createElement(xe.V,{...R("groupWaitValue",{validate:X.hH}),placeholder:ke.H.group_wait,className:p.promDurationInput,"aria-label":"Group wait"})),e.createElement(_.D,{label:"Group interval",description:"The waiting time to send a batch of new alerts for that group after the first notification was sent. Default 5 minutes.",invalid:!!h.groupIntervalValue,error:h.groupIntervalValue?.message,"data-testid":"am-group-interval"},e.createElement(xe.V,{...R("groupIntervalValue",{validate:X.hH}),placeholder:ke.H.group_interval,className:p.promDurationInput,"aria-label":"Group interval"})),e.createElement(_.D,{label:"Repeat interval",description:"The waiting time to resend an alert after they have successfully been sent. Default 4 hours. Should be a multiple of Group interval.",invalid:!!h.repeatIntervalValue,error:h.repeatIntervalValue?.message,"data-testid":"am-repeat-interval"},e.createElement(xe.V,{...R("repeatIntervalValue",{validate:w=>{const ne=B("groupIntervalValue");return(0,X.DY)(w,ne)}}),placeholder:ke.H.repeat_interval,className:p.promDurationInput,"aria-label":"Repeat interval"})))),e.createElement("div",{className:p.container},n))};var gt=t(15292),vn=t(72093),Ut=t(70383);function hn(){const{selectedAlertmanager:n}=(0,Ut.VI)(),{currentData:a}=(0,j.f)(n),r=a?.alertmanager_config;return(0,e.useMemo)(()=>(r?(0,Ze.IT)(r):[])?.map(p=>({value:p.name,label:p.name,description:p.time_intervals.map(m=>(0,Oe.LF)(m)).join(", AND ")}))??[],[r])}var Ce=t(97174);const Vt=({actionButtons:n,receivers:a,route:r,onSubmit:l,defaults:s})=>{const p=(0,v.of)(bn),m=(0,v.of)(Ft.t),[i,f]=(0,e.useState)((0,X.gY)(r?.group_by)),D=hn(),P=[{name:"",operator:Ne.ho.equal,value:""}],$=a.sort(yn),R={...(0,X.YE)(r),...s},b={...R,object_matchers:r?R.object_matchers:P},{handleSubmit:h,control:z,register:B,formState:{errors:w},setValue:ne,watch:F,getValues:le}=(0,Te.mN)({defaultValues:b}),{fields:ie,append:Ie,remove:he}=(0,Te.jz)({control:z,name:"object_matchers"});return e.createElement("form",{onSubmit:h(l)},e.createElement("input",{type:"hidden",...B("id")}),e.createElement(g.B,{direction:"column",alignItems:"flex-start"},e.createElement("div",null,"Matching labels"),ie.length===0&&e.createElement(L.E,{color:"orange",className:p.noMatchersWarning,icon:"exclamation-triangle",text:"If no matchers are specified, this notification policy will handle all alert instances."}),ie.length>0&&e.createElement("div",{className:p.matchersContainer},ie.map((k,q)=>e.createElement(g.B,{direction:"row",key:k.id,alignItems:"center"},e.createElement(_.D,{label:"Label",invalid:!!w.object_matchers?.[q]?.name,error:w.object_matchers?.[q]?.name?.message},e.createElement(mt.p,{...B(`object_matchers.${q}.name`,{required:"Field is required"}),defaultValue:k.name,placeholder:"label",autoFocus:!0})),e.createElement(_.D,{label:"Operator"},e.createElement(Te.xI,{render:({field:{onChange:U,ref:ce,...Me}})=>e.createElement(Se.l6,{...Me,className:p.matchersOperator,onChange:Pe=>U(Pe?.value),options:Oe.xH,"aria-label":"Operator"}),defaultValue:k.operator,control:z,name:`object_matchers.${q}.operator`,rules:{required:{value:!0,message:"Required."}}})),e.createElement(_.D,{label:"Value",invalid:!!w.object_matchers?.[q]?.value,error:w.object_matchers?.[q]?.value?.message},e.createElement(mt.p,{...B(`object_matchers.${q}.value`),defaultValue:k.value,placeholder:"value"})),e.createElement(te.K,{tooltip:"Remove matcher",name:"trash-alt",onClick:()=>he(q)},"Remove")))),e.createElement(K.$n,{className:p.addMatcherBtn,icon:"plus",onClick:()=>Ie(X.Rg),variant:"secondary",type:"button"},"Add matcher")),e.createElement(_.D,{label:"Contact point"},e.createElement(Te.xI,{render:({field:{onChange:k,ref:q,...U}})=>e.createElement(Se.l6,{"aria-label":"Contact point",...U,className:m.input,onChange:ce=>k((0,X.eb)(ce)),options:$,isClearable:!0}),control:z,name:"receiver"})),e.createElement(_.D,{label:"Continue matching subsequent sibling nodes"},e.createElement(gt.d,{id:"continue-toggle",...B("continue")})),e.createElement(_.D,{label:"Override grouping"},e.createElement(gt.d,{id:"override-grouping-toggle",...B("overrideGrouping")})),F().overrideGrouping&&e.createElement(_.D,{label:"Group by",description:"Group alerts when you receive a notification based on labels. If empty it will be inherited from the parent policy."},e.createElement(Te.xI,{rules:{validate:k=>!k||k.length===0?"At least one group by option is required.":!0},render:({field:{onChange:k,ref:q,...U},fieldState:{error:ce}})=>e.createElement(e.Fragment,null,e.createElement(Se.KF,{"aria-label":"Group by",...U,invalid:!!ce,allowCustomValue:!0,className:m.input,onCreateOption:Me=>{f(Pe=>[...Pe,(0,X.Mk)(Me)]),ne("groupBy",[...U.value||[],Me])},onChange:Me=>k((0,X.ie)(Me)),options:[...X.Yl,...i]}),ce&&e.createElement(vn.P,null,ce.message)),control:z,name:"groupBy"})),e.createElement(_.D,{label:"Override general timings"},e.createElement(gt.d,{id:"override-timings-toggle",...B("overrideTimings")})),F().overrideTimings&&e.createElement(e.Fragment,null,e.createElement(_.D,{label:Ce.G.groupWait.label,description:Ce.G.groupWait.description,invalid:!!w.groupWaitValue,error:w.groupWaitValue?.message},e.createElement(xe.V,{...B("groupWaitValue",{validate:X.hH}),"aria-label":Ce.G.groupWait.ariaLabel,className:m.promDurationInput})),e.createElement(_.D,{label:Ce.G.groupInterval.label,description:Ce.G.groupInterval.description,invalid:!!w.groupIntervalValue,error:w.groupIntervalValue?.message},e.createElement(xe.V,{...B("groupIntervalValue",{validate:X.hH}),"aria-label":Ce.G.groupInterval.ariaLabel,className:m.promDurationInput})),e.createElement(_.D,{label:Ce.G.repeatInterval.label,description:Ce.G.repeatInterval.description,invalid:!!w.repeatIntervalValue,error:w.repeatIntervalValue?.message},e.createElement(xe.V,{...B("repeatIntervalValue",{validate:(k="")=>{const q=le("groupIntervalValue");return(0,X.DY)(k,q)}}),"aria-label":Ce.G.repeatInterval.ariaLabel,className:m.promDurationInput}))),e.createElement(_.D,{label:"Mute timings","data-testid":"am-mute-timing-select",description:"Add mute timing to policy",invalid:!!w.muteTimeIntervals},e.createElement(Te.xI,{render:({field:{onChange:k,ref:q,...U}})=>e.createElement(Se.KF,{"aria-label":"Mute timings",...U,className:m.input,onChange:ce=>k((0,X.ie)(ce)),options:D}),control:z,name:"muteTimeIntervals"})),n)};function yn(n){return n.grafanaAppReceiverType===pt.W.OnCall?-1:0}const bn=n=>{const a=n.spacing(3.5);return{addMatcherBtn:(0,o.css)`
      margin-bottom: ${a};
    `,matchersContainer:(0,o.css)`
      background-color: ${n.colors.background.secondary};
      padding: ${n.spacing(1.5)} ${n.spacing(2)};
      padding-bottom: 0;
      width: fit-content;
    `,matchersOperator:(0,o.css)`
      min-width: 120px;
    `,noMatchersWarning:(0,o.css)`
      padding: ${n.spacing(1)} ${n.spacing(2)};
      margin-bottom: ${n.spacing(1)};
    `}};var jt=t(26928);const In=(n=[],a,r)=>{const[l,s]=(0,e.useState)(!1),[p,m]=(0,e.useState)(void 0),[i,f]=(0,e.useState)(),D=Nt(n),P=(0,e.useCallback)(()=>{f(void 0),m(void 0),s(!1)},[]),$=(0,e.useCallback)((b,h)=>{f(b),m(h),s(!0)},[]);return[(0,e.useMemo)(()=>r?e.createElement(Et,{isOpen:l}):e.createElement(be.a,{isOpen:l,onDismiss:P,closeOnBackdropClick:!0,closeOnEscape:!0,title:"Add notification policy"},e.createElement(Vt,{receivers:D,defaults:{groupBy:i?.group_by},onSubmit:b=>{i&&p&&a(b,i,p)},actionButtons:e.createElement(be.a.ButtonRow,null,e.createElement(K.$n,{type:"button",variant:"secondary",onClick:P,fill:"outline"},"Cancel"),e.createElement(K.$n,{type:"submit"},"Save policy"))})),[D,a,P,p,r,i,l]),$,P]},Mn=(n,a,r,l)=>{const[s,p]=(0,e.useState)(!1),[m,i]=(0,e.useState)(!1),[f,D]=(0,e.useState)(),P=Nt(a),$=(0,e.useCallback)(()=>{D(void 0),p(!1)},[]),R=(0,e.useCallback)((h,z)=>{i(z??!1),D(h),p(!0)},[]);return[(0,e.useMemo)(()=>l?e.createElement(Et,{isOpen:s}):e.createElement(be.a,{isOpen:s,onDismiss:$,closeOnBackdropClick:!0,closeOnEscape:!0,title:"Edit notification policy"},m&&f&&e.createElement(fn,{alertManagerSourceName:n,onSubmit:r,receivers:P,route:f,actionButtons:e.createElement(be.a.ButtonRow,null,e.createElement(K.$n,{type:"button",variant:"secondary",onClick:$,fill:"outline"},"Cancel"),e.createElement(K.$n,{type:"submit"},"Update default policy"))}),!m&&e.createElement(Vt,{receivers:P,route:f,onSubmit:r,actionButtons:e.createElement(be.a.ButtonRow,null,e.createElement(K.$n,{type:"button",variant:"secondary",onClick:$,fill:"outline"},"Cancel"),e.createElement(K.$n,{type:"submit"},"Update policy"))})),[P,n,$,r,m,l,f,s]),R,$]},Pn=(n,a)=>{const[r,l]=(0,e.useState)(!1),[s,p]=(0,e.useState)(),m=(0,e.useCallback)(()=>{p(void 0),l(!1)},[p]),i=(0,e.useCallback)(P=>{p(P),l(!0)},[]),f=(0,e.useCallback)(()=>{s&&n(s)},[n,s]);return[(0,e.useMemo)(()=>a?e.createElement(Et,{isOpen:r}):e.createElement(be.a,{isOpen:r,onDismiss:m,closeOnBackdropClick:!0,closeOnEscape:!0,title:"Delete notification policy"},e.createElement("p",null,"Deleting this notification policy will permanently remove it."),e.createElement("p",null,"Are you sure you want to delete this policy?"),e.createElement(be.a.ButtonRow,null,e.createElement(K.$n,{type:"button",variant:"destructive",onClick:f},"Yes, delete policy"),e.createElement(K.$n,{type:"button",variant:"secondary",onClick:m},"Cancel"))),[m,f,a,r]),i,m]},Tn=()=>{const[n,a]=(0,e.useState)(!1),[r,l]=(0,e.useState)([]),[s,p]=(0,e.useState)([]),[m,i]=(0,e.useState)("default"),f=(0,e.useCallback)(()=>{a(!1),l([]),p([])},[]),D=(0,e.useCallback)((R,b,h)=>{l(R),b&&p(b),h&&i(h),a(!0)},[]),P=(0,e.useMemo)(()=>{const R=r.flatMap(b=>b.alerts);return(0,se.groupBy)(R,b=>b.status.state)},[r]);return[(0,e.useMemo)(()=>e.createElement(be.a,{isOpen:n,onDismiss:f,closeOnBackdropClick:!0,closeOnEscape:!0,title:e.createElement(g.B,{direction:"row",alignItems:"center",gap:1,wrap:"wrap"},e.createElement(g.B,{direction:"row",alignItems:"center",gap:.5},e.createElement(Le.I,{name:"x"})," Matchers"),e.createElement(jt.s,{matchers:s,formatter:m}))},e.createElement(g.B,{direction:"column"},e.createElement(gn,{active:P[Ne.Or.Active]?.length,suppressed:P[Ne.Or.Suppressed]?.length,unprocessed:P[Ne.Or.Unprocessed]?.length}),e.createElement("div",null,r.map((R,b)=>e.createElement(sn._,{key:b,alertManagerSourceName:"",group:R})))),e.createElement(be.a.ButtonRow,null,e.createElement(K.$n,{type:"button",variant:"secondary",onClick:f},"Cancel"))),[r,f,P,s,m,n]),D,f]},Et=({isOpen:n})=>e.createElement(be.a,{isOpen:n,onDismiss:()=>{},closeOnBackdropClick:!1,closeOnEscape:!1,title:e.createElement(g.B,{direction:"row",alignItems:"center",gap:.5},"Updating... ",e.createElement(ln.y,{inline:!0}))},"Please wait while we update your notification policies.");var qe=t(52594),Cn=t(32264),Kt=t(83122),An=t(69613),ft=t(23896),Dn=t(19645),zt=t(79581),vt=t(35108),ht=t(8406),Ae=t(55196),ve=t(94855);const Sn=({exportFormat:n,onClose:a})=>{const{currentData:r="",isFetching:l}=We.hK.useExportPoliciesQuery({format:n}),s=`policies-${new Date().getTime()}`;return l?e.createElement(H._,{text:"Loading...."}):e.createElement(we.J,{format:n,textDefinition:r,downloadFileName:s,onClose:a})},On=({onClose:n})=>{const[a,r]=(0,e.useState)("yaml");return e.createElement(Xe.m,{activeTab:a,onTabChange:r,onClose:n,formatProviders:Object.values(ye.sl)},e.createElement(Sn,{exportFormat:a,onClose:n}))},Ht=n=>{const{receivers:a=[],contactPointsState:r,readOnly:l=!1,provisioned:s=!1,alertGroups:p=[],alertManagerSourceName:m,currentRoute:i,routeTree:f,inheritedProperties:D,routesMatchingFilters:P={filtersApplied:!1,matchedRoutesWithPath:new Map},matchingInstancesPreview:$={enabled:!1},onEditPolicy:R,onAddPolicy:b,onDeletePolicy:h,onShowAlertInstances:z,isAutoGenerated:B=!1}=n,w=(0,v.of)(Ue),ne=i===f,F=i.receiver,le=i.continue??!1,ie=(0,Gt.J$)(i),Ie=!!(ie&&ie.length),{filtersApplied:he,matchedRoutesWithPath:k}=P,q=Array.from(k.keys()),U=he&&q.some(ae=>ae.id===i.id),ce=Array.from(k.values()).flat(),Me=ce.some(ae=>ae.id===i.id),Pe=[],et=!Ie&&!ne&&!le,bt=F??D?.receiver??"",It=r?jn(bt,r):[],tt=i.routes??[],Ve=he?tt.filter(ae=>ce.some(Qe=>Qe.id===ae.id)):tt,je=Ve.length>0,[Mt,nt]=(0,fe.A)(!1),Ke=$?.groupsMap?.get(i.id),Pt=Ke?(0,se.sumBy)(Ke,ae=>ae.alerts.length):void 0,[Tt,Ct]=(0,M.L7)(M.QI.ViewAutogeneratedPolicyTree),ze=Qt(i),[He,At]=(0,fe.A)(!ze),Dt=i.group_by,St=i.mute_time_intervals??[],Jt={group_wait:i.group_wait,group_interval:i.group_interval,repeat_interval:i.repeat_interval};It.forEach(ae=>{Pe.push(ae)});const at=20,[rt,Ot]=(0,e.useState)(at),ot=Bn(B,ne,s,R,i,nt,h);if(B&&(!Ct||!Tt)||he&&!Me)return null;const ge=ne||ze,De=Ve.filter(ae=>ce.some(Qe=>Qe.id===ae.id)),lt=he?De:Ve,st=lt.slice(0,rt),xt=lt.length-st.length,ea=xt>0;return e.createElement(e.Fragment,null,e.createElement(g.B,{direction:"column",gap:1.5},e.createElement("div",{className:w.policyWrapper(U),"data-testid":ne?"am-root-route-container":"am-route-container"},le&&e.createElement(Wn,null),et&&e.createElement(wn,null),e.createElement("div",{className:w.policyItemWrapper},e.createElement(g.B,{direction:"column",gap:1},e.createElement("div",null,e.createElement(g.B,{direction:"row",alignItems:"center",gap:1},je?e.createElement(te.K,{name:He?"angle-down":"angle-right",onClick:At,"aria-label":He?"Collapse":"Expand"}):null,ge?ze?e.createElement(Ln,null):e.createElement(Gn,null):Ie?e.createElement(jt.s,{matchers:ie??[],formatter:(0,Oe.VE)(m)}):e.createElement("span",{className:w.metadata},"No matchers"),e.createElement(ct.h,null),Pe.length>0&&e.createElement($n,{errors:Pe}),s&&e.createElement(Je.rS,null),e.createElement(g.B,{direction:"row",gap:.5},!B&&!l&&e.createElement(E._,{actions:[M.QI.CreateNotificationPolicy]},e.createElement(ft.A,{shouldWrap:s,wrap:yt},ne?e.createElement(K.$n,{variant:"secondary",icon:"plus",size:"sm",disabled:s,type:"button",onClick:()=>b(i,"child")},"New child policy"):e.createElement(Kt.m,{overlay:e.createElement(u.W,null,e.createElement(u.W.Item,{label:"Insert above",icon:"arrow-up",onClick:()=>b(i,"above")}),e.createElement(u.W.Item,{label:"Insert below",icon:"arrow-down",onClick:()=>b(i,"below")}),e.createElement(u.W.Divider,null),e.createElement(u.W.Item,{label:"New child policy",icon:"plus",onClick:()=>b(i,"child")}))},e.createElement(K.$n,{size:"sm",variant:"secondary",disabled:s,icon:"angle-down",type:"button"},"Add new policy")))),ot.length>0&&e.createElement(Kt.m,{overlay:e.createElement(u.W,null,ot)},e.createElement(K.$n,{icon:"ellipsis-h",variant:"secondary",size:"sm",type:"button","aria-label":"more-actions","data-testid":"more-actions"}))))),e.createElement(Rn,{matchingInstancesPreview:$,numberOfAlertInstances:Pt,contactPoint:F??void 0,groupBy:Dt,muteTimings:St,timingOptions:Jt,inheritedProperties:D,alertManagerSourceName:m,receivers:a,matchingAlertGroups:Ke,matchers:ie,isDefaultPolicy:ne,onShowAlertInstances:z})))),e.createElement("div",{className:w.childPolicies},He&&e.createElement(e.Fragment,null,st.map(ae=>{const Qe=(0,zt.W$)(i,ae,D),ta=Qt(ae)||B,na=l||s||B;return e.createElement(Ht,{key:ae.id,routeTree:f,currentRoute:ae,receivers:a,contactPointsState:r,readOnly:na,inheritedProperties:Qe,onAddPolicy:b,onEditPolicy:R,onDeletePolicy:h,onShowAlertInstances:z,alertManagerSourceName:m,alertGroups:p,routesMatchingFilters:P,matchingInstancesPreview:$,isAutoGenerated:ta,provisioned:s})}),ea&&e.createElement(K.$n,{size:"sm",icon:"angle-down",variant:"secondary",className:w.moreButtons,onClick:()=>Ot(rt+at)},xt," additional ",Fe()("policy",xt)))),Mt&&e.createElement(On,{onClose:nt})))};function Rn({numberOfAlertInstances:n,isDefaultPolicy:a,timingOptions:r,groupBy:l,muteTimings:s=[],matchingInstancesPreview:p,inheritedProperties:m,matchingAlertGroups:i,onShowAlertInstances:f,matchers:D,contactPoint:P,alertManagerSourceName:$,receivers:R}){const b=(0,v.of)(Ue),h=m&&m.group_by,z=m&&Object.keys(m).length>0,B=(0,se.isArray)(l)&&l[0]==="...",w=!B&&(0,se.isArray)(l)&&l.length>0,ne=a&&(0,se.isArray)(l)&&l.length===0,F=!!s.length;return e.createElement("div",{className:b.metadataRow},e.createElement(g.B,{direction:"row",alignItems:"center",gap:1},p.enabled&&e.createElement(Ae.P,{icon:"layers-alt",onClick:()=>{i&&f(i,D,(0,Oe.VE)($))},"data-testid":"matching-instances"},e.createElement(ve.O,null,n??"-"),e.createElement("span",null,Fe()("instance",n))),P&&e.createElement(Ae.P,{icon:"at","data-testid":"contact-point"},e.createElement("span",null,"Delivered to"),e.createElement(Vn,{alertManagerSourceName:$,receivers:R,contactPoint:P})),!h&&e.createElement(e.Fragment,null,w&&e.createElement(Ae.P,{icon:"layer-group","data-testid":"grouping"},e.createElement("span",null,"Grouped by"),e.createElement(ve.O,null,l.join(", "))),ne&&e.createElement(Ae.P,{icon:"layer-group"},e.createElement("span",null,"Single group")),B&&e.createElement(Ae.P,{icon:"layer-group"},e.createElement("span",null,"Not grouping"))),F&&e.createElement(Ae.P,{icon:"calendar-slash","data-testid":"mute-timings"},e.createElement("span",null,"Muted when"),e.createElement(Fn,{timings:s,alertManagerSourceName:$})),r&&e.createElement(Un,{timingOptions:a?(0,se.defaults)(r,ke.H):r}),z&&e.createElement(e.Fragment,null,e.createElement(Ae.P,{icon:"corner-down-right-alt","data-testid":"inherited-properties"},e.createElement("span",null,"Inherited"),e.createElement(Nn,{properties:m})))))}const Bn=(n,a,r,l,s,p,m)=>{const[[i,f],[D,P],[$,R]]=(0,M.Hl)([M.QI.UpdateNotificationPolicyTree,M.QI.DeleteNotificationPolicy,M.QI.ExportNotificationPolicies]),b=[],h=R&&$&&a&&!n,z=i&&f,B=D&&P&&!a&&!n;return z&&b.push(e.createElement(e.Fragment,{key:"edit-policy"},e.createElement(ft.A,{shouldWrap:r,wrap:yt},e.createElement(u.W.Item,{icon:"edit",disabled:r||n,label:"Edit",onClick:()=>l(s,a)})))),h&&b.push(e.createElement(u.W.Item,{key:"export-policy",icon:"download-alt",label:"Export",onClick:p})),B&&b.push(e.createElement(e.Fragment,{key:"delete-policy"},e.createElement(u.W.Divider,null),e.createElement(ft.A,{shouldWrap:r,wrap:yt},e.createElement(u.W.Item,{destructive:!0,icon:"trash-alt",disabled:r||n,label:"Delete",onClick:()=>m(s)})))),b},xn="__grafana_autogenerated__";function Qt(n){return!(Cn.$.featureToggles.alertingSimplifiedRouting??!1)||!n.object_matchers?!1:n.object_matchers.some(r=>r[0]===xn&&r[1]===Ne.ho.equal&&r[2]==="true")??!1}const yt=n=>e.createElement(Be.m,{content:"Provisioned items cannot be edited in the UI",placement:"top"},e.createElement("span",null,n)),$n=({errors:n})=>e.createElement(vt.j,{arrow:!0,placement:"top",content:e.createElement(g.B,{direction:"column",gap:.5},n.map(a=>e.createElement(e.Fragment,{key:(0,se.uniqueId)()},a)))},e.createElement("span",null,e.createElement(L.E,{icon:"exclamation-circle",color:"red",text:Fe()("error",n.length,!0)}))),Wn=()=>{const n=(0,v.of)(Ue);return e.createElement(Be.m,{placement:"top",content:"This route will continue matching other policies"},e.createElement("div",{className:n.gutterIcon,"data-testid":"continue-matching"},e.createElement(Le.I,{name:"arrow-down"})))},wn=()=>{const n=(0,v.of)(Ue);return e.createElement(Be.m,{placement:"top",content:"This policy matches all labels"},e.createElement("div",{className:n.gutterIcon,"data-testid":"matches-all"},e.createElement(Le.I,{name:"exclamation-triangle"})))};function Gn(){const n=(0,v.of)(Ue);return e.createElement(e.Fragment,null,e.createElement("strong",null,"Default policy"),e.createElement("span",{className:n.metadata},"All alert instances will be handled by the default policy if no other matching policies are found."))}function Ln(){return e.createElement("strong",null," Auto-generated policies")}const Nn=({properties:n})=>e.createElement(vt.j,{arrow:!0,placement:"top",content:e.createElement(g.B,{direction:"row",gap:.5},Object.entries(n).map(([a,r])=>r?e.createElement(ht.J,{key:a,label:Kn(a),value:e.createElement(ve.O,null,zn(a,r))}):null))},e.createElement("div",null,e.createElement(ve.O,null,Fe()("property",Object.keys(n).length,!0)))),Fn=({timings:n,alertManagerSourceName:a})=>e.createElement("div",null,e.createElement(ve.O,null,n.map(r=>e.createElement(qe.Link,{key:r,to:(0,O.i7)(r,a)},r)))),Un=({timingOptions:n})=>{const a=n.group_wait,r=n.group_interval;return!a&&!r?null:e.createElement(Ae.P,{icon:"hourglass","data-testid":"timing-options"},e.createElement("span",null,"Wait"),a&&e.createElement(Be.m,{placement:"top",content:"How long to initially wait to send a notification for a group of alert instances."},e.createElement("span",null,e.createElement(ve.O,null,a)," ",e.createElement("span",null,"to group instances"),a&&r&&",")),r&&e.createElement(Be.m,{placement:"top",content:"How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent."},e.createElement("span",null,e.createElement(ve.O,null,r)," ",e.createElement("span",null,"before sending updates"))))},Vn=({alertManagerSourceName:n,contactPoint:a,receivers:r})=>{const l=r.find(m=>m.name===a);if(!l)return e.createElement(qe.Link,{to:(0,O.bg)(a,n)},e.createElement(ve.O,null,a));if(!l.grafana_managed_receiver_configs)return e.createElement(qe.Link,{to:(0,O.bg)(a,n)},e.createElement(ve.O,null,a));const p=(0,se.groupBy)(l.grafana_managed_receiver_configs,m=>m.type);return e.createElement(vt.j,{arrow:!0,placement:"top",header:e.createElement(Ae.P,{icon:"at"},e.createElement("div",null,"Contact Point"),e.createElement(ve.O,null,a)),key:(0,se.uniqueId)(),content:e.createElement(g.B,{direction:"row",gap:.5},Object.entries(p).map(([m,i])=>e.createElement(ht.J,{key:(0,se.uniqueId)(),label:i.length>1?i.length:void 0,icon:Dn.M[m],value:(0,se.upperFirst)(m)})))},e.createElement(qe.Link,{to:(0,O.bg)(a,n)},e.createElement(ve.O,null,a)))};function jn(n,a){return Object.entries(a[n]?.notifiers??[]).reduce((s=[],[p,m])=>{const i=m.filter(f=>f.lastNotifyAttemptError).map(f=>e.createElement(ht.J,{icon:"at",key:(0,se.uniqueId)(),label:`Contact Point \u203A ${f.name}`,value:f.lastNotifyAttemptError}));return s.concat(i)},[])}const Kn=n=>{switch(n){case"receiver":return"Contact Point";case"group_by":return"Group by";case"group_interval":return"Group interval";case"group_wait":return"Group wait";case"repeat_interval":return"Repeat interval";default:return n}},zn=(n,a)=>{const r=n==="group_by"&&Array.isArray(a)&&a[0]==="...",l=n==="group_by"&&Array.isArray(a)&&a.length===0;return r?e.createElement(dt.E,{variant:"bodySmall",color:"secondary"},"Not grouping"):l?e.createElement(dt.E,{variant:"bodySmall",color:"secondary"},"Single group"):Array.isArray(a)?a.join(", "):a},Ue=n=>({matcher:a=>{const{color:r,borderColor:l}=(0,An.MC)(a);return{wrapper:(0,o.css)({color:"#fff",background:r,padding:`${n.spacing(.33)} ${n.spacing(.66)}`,fontSize:n.typography.bodySmall.fontSize,border:`solid 1px ${l}`,borderRadius:n.shape.radius.default})}},childPolicies:(0,o.css)({marginLeft:n.spacing(4),position:"relative","&:before":{content:'""',position:"absolute",height:"calc(100% - 10px)",borderLeft:`solid 1px ${n.colors.border.weak}`,marginTop:0,marginLeft:"-20px"}}),policyItemWrapper:(0,o.css)({padding:n.spacing(1.5)}),metadataRow:(0,o.css)({borderBottomLeftRadius:n.shape.borderRadius(2),borderBottomRightRadius:n.shape.borderRadius(2)}),policyWrapper:(a=!1)=>(0,o.css)({flex:1,position:"relative",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,border:`solid 1px ${n.colors.border.weak}`,...a&&{borderColor:n.colors.primary.border,background:n.colors.primary.transparent}}),metadata:(0,o.css)({color:n.colors.text.secondary,fontSize:n.typography.bodySmall.fontSize,fontWeight:n.typography.bodySmall.fontWeight}),break:(0,o.css)({width:"100%",height:0,marginBottom:n.spacing(2)}),gutterIcon:(0,o.css)({position:"absolute",top:0,transform:"translateY(50%)",left:`-${n.spacing(4)}`,color:n.colors.text.secondary,background:n.colors.background.primary,width:"25px",height:"25px",textAlign:"center",border:`solid 1px ${n.colors.border.weak}`,borderRadius:n.shape.radius.default,padding:0}),moreButtons:(0,o.css)({marginTop:n.spacing(.5),marginBottom:n.spacing(1.5)})});var Hn=t(19143),Qn=t(88467),_e=t(67332),Yn=(n=>(n.NotificationPolicies="notification_policies",n.MuteTimings="mute_timings",n))(Yn||{});const Jn=()=>{const n=(0,d.useDispatch)(),a=(0,v.of)(Zn),{useGetAlertmanagerAlertGroupsQuery:r}=A.m,[l,s]=(0,c.s)(),{tab:p}=kn(l),[m,i]=(0,e.useState)(p),[f,D]=(0,e.useState)(!1),[P,$]=(0,e.useState)(),[R,b]=(0,e.useState)([]),{selectedAlertmanager:h,hasConfigurationAPI:z,isGrafanaAlertmanager:B}=(0,Ut.VI)(),{getRouteGroupsMap:w}=(0,Hn.L)(),ne=J(h??""),{currentData:F,isLoading:le,error:ie}=(0,j.f)(h,{refetchOnFocus:!0,refetchOnReconnect:!0}),Ie=F?.alertmanager_config,{currentData:he,refetch:k}=r({amSourceName:h??""},{skip:!h}),q=Ie?.receivers??[],U=(0,e.useMemo)(()=>{if(Ie?.route)return(0,X.QM)(Ie.route)},[Ie?.route]),[{value:ce,error:Me},Pe]=(0,T.A)(w,[w]);(0,e.useEffect)(()=>{U&&he&&Pe(U,he,{unquoteMatchers:!B})},[U,he,Pe,B]);const et=(0,e.useMemo)(()=>U?Yt(U,{contactPointFilter:P,labelMatchersFilter:R}):{filtersApplied:!1,matchedRoutesWithPath:new Map},[P,R,U]),bt=!!Ie?.route?.provenance;function It(ge){if(!U)return;const De=(0,_e.AB)(h??"",ge,U);je(De)}function tt(ge){if(!U)return;const De=(0,_e.AS)(ge,U);je(De)}function Ve(ge,De,lt){if(!U)return;const st=(0,_e.I8)(h??"",ge,De,U,lt);je(st)}function je(ge){if(!F)return;const De=(0,_e.dn)(ge);D(!0),n((0,me.RW)({newConfig:{...F,alertmanager_config:{...F.alertmanager_config,route:De}},oldConfig:F,alertManagerSourceName:h,successMessage:"Updated notification policies"})).unwrap().then(()=>{h&&k(),Ct(),Ke(),At()}).finally(()=>{D(!1)})}const[Mt,nt,Ke]=In(q,Ve,f),[Pt,Tt,Ct]=Mn(h??"",q,It,f),[ze,He,At]=Pn(tt,f),[Dt,St]=Tn();if((0,I.o)(ge=>ge.unifiedAlerting.saveAMConfig=Qn.jA),!h)return null;const at=(F?.alertmanager_config?(0,Ze.IT)(F?.alertmanager_config):[]).length,rt=F&&!ie&&!le,Ot=!F&&le,ot=ie&&!le,Rt=m==="mute_timings",Bt=m==="notification_policies";return e.createElement(e.Fragment,null,e.createElement(C.U,null,e.createElement(y.o,{label:"Notification Policies",active:Bt,onChangeTab:()=>{i("notification_policies"),s({tab:"notification_policies"})}}),e.createElement(y.o,{label:"Mute Timings",active:Rt,counter:at,onChangeTab:()=>{i("mute_timings"),s({tab:"mute_timings"})}})),e.createElement(G.J,{className:a.tabContent},Ot&&e.createElement(H._,{text:"Loading Alertmanager config..."}),ot&&e.createElement(Q.F,{severity:"error",title:"Error loading Alertmanager config"},ie.message||"Unknown error."),rt&&e.createElement(e.Fragment,null,Bt&&e.createElement(e.Fragment,null,e.createElement(Ee.M,{currentAlertmanager:h}),e.createElement(g.B,{direction:"column",gap:1},U&&e.createElement(tn,{receivers:q,onChangeMatchers:b,onChangeReceiver:$,matchingCount:et.matchedRoutesWithPath.size}),U&&e.createElement(Ht,{receivers:q,routeTree:U,currentRoute:U,alertGroups:he??[],contactPointsState:ne.receivers,readOnly:!z,provisioned:bt,alertManagerSourceName:h,onAddPolicy:nt,onEditPolicy:Tt,onDeletePolicy:He,onShowAlertInstances:St,routesMatchingFilters:et,matchingInstancesPreview:{groupsMap:ce,enabled:!Me},isAutoGenerated:!1})),Mt,Pt,ze,Dt),Rt&&e.createElement(Zt,{alertManagerSourceName:h,hideActions:!z}))))},Yt=(n,a)=>{const{contactPointFilter:r,labelMatchersFilter:l=[]}=a,s=r||l.length>0,p=!!r&&l.length>0;if(!s)return{filtersApplied:!1,matchedRoutesWithPath:new Map};let m=[];const i=(0,zt._I)(n),f=r?Lt(i,b=>b.receiver===r):new Map,D=Array.from(f.keys());D&&m.push(D);const P=l.length?Lt(i,b=>nn(b,l)):new Map,$=Array.from(P.keys());return P.size>0&&m.push($),{filtersApplied:!0,matchedRoutesWithPath:p?Xn(P,f):new Map([...P,...f])}};function Xn(...n){const a=new Map;for(const r of n[0].keys())n.every(l=>l.has(r))&&a.set(r,n[0].get(r));return a}const Zn=n=>({tabContent:(0,o.css)`
    margin-top: ${n.spacing(2)};
  `});function kn(n){let a="notification_policies";return n.tab==="notification_policies"&&(a="notification_policies"),n.tab==="mute_timings"&&(a="mute_timings"),{tab:a}}const qn=()=>e.createElement(oe.y,{navId:"am-routes",accessType:"notification"},e.createElement(Jn,null)),_n=(0,N.Xc)(qn,{style:"page"})},23088:(re,W,t)=>{t.d(W,{Z:()=>v});var o=t(32196),e=t(96540),T=t(40845);const v=({children:y})=>{const G=(0,T.of)(C);return e.createElement("div",{className:G.container},y)},C=y=>({container:(0,o.css)`
      background-color: ${y.colors.background.secondary};
      color: ${y.colors.text.secondary};
      padding: ${y.spacing(4)};
      text-align: center;
    `})},35016:(re,W,t)=>{t.d(W,{_:()=>te});var o=t(32196),e=t(96540),T=t(40845),v=t(67061),C=t(60021),y=t(69087),G=t(64047),H=t(55196),Q=t(94855),g=t(70416),N=t(10562),c=t(97754),d=t(55852),I=t(16233),A=t(31678),S=t(19073),x=t(57220),V=t(56361),Y=t(71223),J=t(64853);const oe=({alert:E,alertManagerSourceName:M})=>{const j=(0,T.of)(Ee),Z=(0,x.z2)(M)?I.TP.hasPermission(A.AccessControlAction.AlertingRuleRead):!0;return e.createElement(e.Fragment,null,e.createElement("div",{className:j.actionsRow},E.status.state===C.Or.Suppressed&&e.createElement(J._,{actions:[S.QI.CreateSilence,S.QI.UpdateSilence]},e.createElement(d.z9,{href:`${(0,V.nL)("/alerting/silences",M)}&silenceIds=${E.status.silencedBy.join(",")}`,className:j.button,icon:"bell",size:"sm"},"Manage silences")),E.status.state===C.Or.Active&&e.createElement(J._,{actions:[S.QI.CreateSilence]},e.createElement(d.z9,{href:(0,V.BK)(M,E.labels),className:j.button,icon:"bell-slash",size:"sm"},"Silence")),Z&&E.generatorURL&&e.createElement(d.z9,{className:j.button,href:E.generatorURL,icon:"chart-line",size:"sm"},"See source")),Object.entries(E.annotations).map(([O,de])=>e.createElement(Y.s,{key:O,annotationKey:O,value:de})),e.createElement("div",{className:j.receivers},"Receivers:"," ",E.receivers.map(({name:O})=>O).filter(O=>!!O).join(", ")))},Ee=E=>({button:(0,o.css)`
    & + & {
      margin-left: ${E.spacing(1)};
    }
  `,actionsRow:(0,o.css)`
    padding: ${E.spacing(2,0)} !important;
    border-bottom: 1px solid ${E.colors.border.medium};
  `,receivers:(0,o.css)`
    padding: ${E.spacing(1,0)};
  `}),fe=({alerts:E,alertManagerSourceName:M})=>{const j=(0,T.of)(K),me=(0,e.useMemo)(()=>[{id:"state",label:"State",renderCell:({data:O})=>e.createElement(e.Fragment,null,e.createElement(c.y,{state:O.status.state}),e.createElement("span",{className:j.duration},"for"," ",(0,g.dU)({start:new Date(O.startsAt),end:new Date(O.endsAt)}))),size:"220px"},{id:"labels",label:"Labels",renderCell:({data:{labels:O}})=>e.createElement(y.m,{labels:O,size:"sm"}),size:1}],[j]),Z=(0,e.useMemo)(()=>E.map(O=>({id:O.fingerprint,data:O})),[E]);return e.createElement("div",{className:j.tableWrapper,"data-testid":"alert-group-table"},e.createElement(N.B,{cols:me,items:Z,isExpandable:!0,renderExpandedContent:({data:O})=>e.createElement(oe,{alert:O,alertManagerSourceName:M})}))},K=E=>({tableWrapper:(0,o.css)`
    margin-top: ${E.spacing(3)};
    ${E.breakpoints.up("md")} {
      margin-left: ${E.spacing(4.5)};
    }
  `,duration:(0,o.css)`
    margin-left: ${E.spacing(1)};
    font-size: ${E.typography.bodySmall.fontSize};
  `});var $e=t(55127),u=t.n($e);const L=E=>({[C.Or.Active]:(0,o.css)`
    color: ${E.colors.error.text};
  `,[C.Or.Suppressed]:(0,o.css)`
    color: ${E.colors.primary.text};
  `,[C.Or.Unprocessed]:(0,o.css)`
    color: ${E.colors.secondary.text};
  `}),ee=({group:E})=>{const M=(0,T.of)(L),j=E.alerts.length,me=E.alerts.reduce((Z,O)=>(Z[O.status.state]?Z[O.status.state]+=1:Z[O.status.state]=1,Z),{});return e.createElement("div",null,`${j} ${u()("alert",j)}: `,Object.entries(me).map(([Z,O],de)=>e.createElement("span",{key:`${JSON.stringify(E.labels)}-notifications-${de}`,className:M[Z]},de>0&&", ",`${O} ${Z}`)))},te=({alertManagerSourceName:E,group:M})=>{const[j,me]=(0,e.useState)(!0),Z=(0,T.of)(ue),O=M.receiver.name!=="NONE";return e.createElement("div",{className:Z.wrapper},e.createElement("div",{className:Z.header},e.createElement("div",{className:Z.group,"data-testid":"alert-group"},e.createElement(G.e,{size:"sm",isCollapsed:j,onToggle:()=>me(!j),"data-testid":"alert-group-collapse-toggle"}),Object.keys(M.labels).length?e.createElement(v.B,{direction:"row",alignItems:"center"},e.createElement(y.m,{labels:M.labels,size:"sm"}),O&&e.createElement(H.P,{icon:"at"},"Delivered to ",e.createElement(Q.O,null,M.receiver.name))):e.createElement("span",null,"No grouping")),e.createElement(ee,{group:M})),!j&&e.createElement(fe,{alertManagerSourceName:E,alerts:M.alerts}))},ue=E=>({wrapper:(0,o.css)({"& + &":{marginTop:E.spacing(2)}}),header:(0,o.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",padding:`${E.spacing(1)} ${E.spacing(1)} ${E.spacing(1)} 0`,backgroundColor:E.colors.background.secondary,width:"100%"}),group:(0,o.css)({display:"flex",flexDirection:"row",alignItems:"center"}),summary:(0,o.css)({}),[C.Or.Active]:(0,o.css)({color:E.colors.error.main}),[C.Or.Suppressed]:(0,o.css)({color:E.colors.primary.main}),[C.Or.Unprocessed]:(0,o.css)({color:E.colors.secondary.main})})},4724:(re,W,t)=>{t.d(W,{Hy:()=>y,IT:()=>G,av:()=>Q,oB:()=>H});var o=t(95093),e=t.n(o),T=t(96540),v=t(98164);const C=/^((([01][0-9])|(2[0-3])):[0-5][0-9])$|(^24:00$)/,y=g=>g?C.test(g):!0,G=g=>[...g.mute_time_intervals??[],...g.time_intervals??[]],H=(g,N)=>{if(!g&&!N)return!0;if(!g&&N||g&&!N)return!1;const c="HH:mm",d=e()().startOf("day").add(g,c),I=e()().startOf("day").add(N,c);return!!(g&&N&&d.isBefore(I)||g&&N&&I.isAfter(d))};function Q(g){return g.time_intervals.map((c,d)=>{const{times:I,weekdays:A,days_of_month:S,months:x,years:V,location:Y}=c,J=(0,v.Dm)(I,Y),oe=(0,v.uH)(A),Ee=(0,v.UL)(S),fe=(0,v.$P)(x),K=(0,v.mP)(V);return T.createElement(T.Fragment,{key:JSON.stringify(c)+d},`${J} ${oe}`,T.createElement("br",null),[Ee,fe,K].join(" | "),T.createElement("br",null))})}},26928:(re,W,t)=>{t.d(W,{s:()=>g});var o=t(32196),e=t(2543),T=t.n(e),v=t(96540),C=t(40845),y=t(67061),G=t(69613),H=t(32642),Q=t(35108);const g=({matchers:d,formatter:I="default"})=>{const A=(0,C.of)(c),S=5,x=(0,e.take)(d,S),V=(0,e.takeRight)(d,d.length-S),Y=V.length>0;return v.createElement("span",{"data-testid":"label-matchers"},v.createElement(y.B,{direction:"row",gap:1,alignItems:"center",wrap:"wrap"},x.map(J=>v.createElement(N,{key:(0,e.uniqueId)(),matcher:J,formatter:I})),Y&&v.createElement(Q.j,{arrow:!0,placement:"top",content:v.createElement(v.Fragment,null,V.map(J=>v.createElement(N,{key:(0,e.uniqueId)(),matcher:J})))},v.createElement("span",null,v.createElement("div",{className:A.metadata},`and ${V.length} more`)))))},N=({matcher:d,formatter:I="default"})=>{const A=(0,C.of)(c);return v.createElement("div",{className:A.matcher(d[0]).wrapper},v.createElement(y.B,{direction:"row",gap:0,alignItems:"baseline"},H.t8[I](d)))},c=d=>({matcher:I=>{const{color:A,borderColor:S}=(0,G.MC)(I);return{wrapper:(0,o.css)`
        color: #fff;
        background: ${A};
        padding: ${d.spacing(.33)} ${d.spacing(.66)};
        font-size: ${d.typography.bodySmall.fontSize};

        border: solid 1px ${S};
        border-radius: ${d.shape.borderRadius(2)};
      `}},metadata:(0,o.css)`
    color: ${d.colors.text.secondary};

    font-size: ${d.typography.bodySmall.fontSize};
    font-weight: ${d.typography.bodySmall.fontWeight};
  `})},33915:(re,W,t)=>{t.d(W,{V:()=>N});var o=t(96540),e=t(10354),T=t(14578),v=t(35108),C=t(32196),y=t(40845),G=t(41068);function H(){const c=(0,y.of)(g);return o.createElement("div",null,"Prometheus duration format consist of a number followed by a time unit.",o.createElement("br",null),"Different units can be combined for more granularity.",o.createElement("hr",null),o.createElement("div",{className:c.list},o.createElement("div",{className:c.header},o.createElement("div",null,"Symbol"),o.createElement("div",null,"Time unit"),o.createElement("div",null,"Example")),o.createElement(Q,{unit:G.y.seconds,name:"seconds",example:"20s"}),o.createElement(Q,{unit:G.y.minutes,name:"minutes",example:"10m"}),o.createElement(Q,{unit:G.y.hours,name:"hours",example:"4h"}),o.createElement(Q,{unit:G.y.days,name:"days",example:"3d"}),o.createElement(Q,{unit:G.y.weeks,name:"weeks",example:"2w"}),o.createElement("div",{className:c.examples},o.createElement("div",null,"Multiple units combined"),o.createElement("code",null,"1m30s, 2h30m20s, 1w2d"))))}function Q({unit:c,name:d,example:I}){const A=(0,y.of)(g);return o.createElement(o.Fragment,null,o.createElement("div",{className:A.unit},c),o.createElement("div",null,d),o.createElement("code",null,I))}const g=c=>({unit:(0,C.css)`
    font-weight: ${c.typography.fontWeightBold};
  `,list:(0,C.css)`
    display: grid;
    grid-template-columns: max-content 1fr 2fr;
    gap: ${c.spacing(1,3)};
  `,header:(0,C.css)`
    display: contents;
    font-weight: ${c.typography.fontWeightBold};
  `,examples:(0,C.css)`
    display: contents;
    & > div {
      grid-column: 1 / span 2;
    }
  `}),N=o.forwardRef((c,d)=>o.createElement(e.p,{suffix:o.createElement(v.j,{content:o.createElement(H,null),disabled:!1},o.createElement(T.I,{name:"info-circle",size:"lg"})),...c,ref:d}));N.displayName="PromDurationInput"},99903:(re,W,t)=>{t.d(W,{t:()=>e});var o=t(32196);const e=T=>({container:(0,o.css)`
      align-items: center;
      display: flex;
      flex-flow: row nowrap;

      & > * + * {
        margin-left: ${T.spacing(1)};
      }
    `,input:(0,o.css)`
      flex: 1;
    `,promDurationInput:(0,o.css)`
      max-width: ${T.spacing(32)};
    `,timingFormContainer:(0,o.css)`
      padding: ${T.spacing(1)};
    `,linkText:(0,o.css)`
      text-decoration: underline;
    `,collapse:(0,o.css)`
      border: none;
      background: none;
      color: ${T.colors.text.primary};
    `})},97174:(re,W,t)=>{t.d(W,{G:()=>o});const o={groupWait:{label:"Group wait",description:"The waiting time until the initial notification is sent for a new group created by an incoming alert. If empty it will be inherited from the parent policy.",ariaLabel:"Group wait value"},groupInterval:{label:"Group interval",description:"The waiting time to send a batch of new alerts for that group after the first notification was sent. If empty it will be inherited from the parent policy.",ariaLabel:"Group interval value"},repeatInterval:{label:"Repeat interval",description:"The waiting time to resend an alert after they have successfully been sent.",ariaLabel:"Repeat interval value"}}},27835:(re,W,t)=>{t.d(W,{H:()=>o});const o={group_wait:"30s",group_interval:"5m",repeat_interval:"4h"}},97754:(re,W,t)=>{t.d(W,{y:()=>C});var o=t(96540),e=t(60021),T=t(65415);const v={[e.Or.Active]:"bad",[e.Or.Unprocessed]:"neutral",[e.Or.Suppressed]:"info"},C=({state:y})=>o.createElement(T.O,{state:v[y]},y)},51488:(re,W,t)=>{t.d(W,{f:()=>e});var o=t(82843);function e(T,v){const C=o.m.endpoints.getAlertmanagerConfiguration.useQuery(T??"",{...v,skip:!T});return{...C,error:C.error}}},19143:(re,W,t)=>{t.d(W,{L:()=>Q});var o=t(14590),e=t(96540),T=t(25027),v=t(67278);const C=()=>new v.c(new URL(t.p+t.u(5398),t.b));let y;function G(){let g;if(y===void 0)try{g=C(),y=o.LV(g)}catch(c){c instanceof Error&&(0,T.vV)(c)}return{disposeWorker:()=>{g&&y&&(y[o.A2](),g.terminate(),y=void 0,g=void 0)}}}function H(g){if(!y)throw new Error("Route Matcher has not been initialized")}function Q(){(0,e.useEffect)(()=>{const{disposeWorker:c}=G();return c},[]);const g=(0,e.useCallback)(async(c,d,I)=>{H(y);const A=performance.now(),S=await y.getRouteGroupsMap(c,d,I),x=performance.now()-A;return(0,T.fH)(`Route Groups Matched in  ${x} ms`,{matchingTime:x.toString(),alertGroupsCount:d.length.toString(),topLevelRoutesCount:c.routes?.length.toString()??"0"}),S},[]),N=(0,e.useCallback)(async(c,d,I)=>{H(y);const A=performance.now(),S=await y.matchInstancesToRoute(c,d,I),x=performance.now()-A;return(0,T.fH)(`Instances Matched in  ${x} ms`,{matchingTime:x.toString(),instancesToMatchCount:d.length.toString(),topLevelRoutesCount:c.routes?.length.toString()??"0"}),S},[]);return{getRouteGroupsMap:g,matchInstancesToRoute:N}}},79657:(re,W,t)=>{t.d(W,{DY:()=>$e,Mk:()=>Y,QM:()=>S,Rg:()=>c,SJ:()=>V,YE:()=>x,Yl:()=>I,eb:()=>oe,gY:()=>J,hH:()=>fe,ie:()=>Ee});var o=t(2543),e=t.n(o),T=t(60021),v=t(98164),C=t(57220),y=t(32642),G=t(67332),H=t(25968);const Q=(u,L)=>Object.entries(u??{}).reduce((ee,[te,ue])=>[...ee,{name:te,value:ue,operator:L?T.ho.regex:T.ho.equal}],[]),g=u=>u.value,N=u=>(u??[]).map(g),c={name:"",value:"",operator:T.ho.equal},d=["grafana_folder","alertname"],I=[{label:"grafana_folder",value:"grafana_folder",isFixed:!0},{label:"alertname",value:"alertname",isFixed:!0},{label:"Disable (...)",value:"..."}],A={id:"",overrideGrouping:!1,groupBy:d,object_matchers:[],routes:[],continue:!1,receiver:"",overrideTimings:!1,groupWaitValue:"",groupIntervalValue:"",repeatIntervalValue:"",muteTimeIntervals:[]};function S(u){return{id:(0,o.uniqueId)("route-"),...u,routes:(u.routes??[]).map(S)}}const x=u=>{if(!u)return A;const L="id"in u?u.id:(0,o.uniqueId)("route-");if(Object.keys(u).length===0)return{...A,id:L};const ee=[];u.routes?.forEach(E=>{const M=x(E);ee.push(M)});const te=u.object_matchers?.map(E=>({name:E[0],operator:E[1],value:E[2]}))??[],ue=u.matchers?.flatMap(E=>(0,y.So)(E).flatMap(v.MU)).map(({name:E,operator:M,value:j})=>({name:(0,y.Ig)(E),operator:M,value:(0,y.Ig)(j)}))??[];return{id:L,object_matchers:[...ue,...te,...Q(u.match,!1),...Q(u.match_re,!0)],continue:u.continue??!1,receiver:u.receiver??"",overrideGrouping:Array.isArray(u.group_by)&&u.group_by.length>0,groupBy:u.group_by??void 0,overrideTimings:[u.group_wait,u.group_interval,u.repeat_interval].some(Boolean),groupWaitValue:u.group_wait??"",groupIntervalValue:u.group_interval??"",repeatIntervalValue:u.repeat_interval??"",routes:ee,muteTimeIntervals:u.mute_time_intervals??[]}},V=(u,L,ee)=>{const te=(0,G.eM)(L.id??"",ee),{overrideGrouping:ue,groupBy:E,overrideTimings:M,groupWaitValue:j,groupIntervalValue:me,repeatIntervalValue:Z,receiver:O}=L,de=void 0,it=ue?E:de,Ye=M&&j?j:de,Je=M&&me?me:de,We=M&&Z?Z:de,we=L.object_matchers?.filter(pe=>pe.name&&pe.operator&&pe.value!==null&&pe.value!==void 0).map(({name:pe,operator:Ge,value:Re})=>[pe,Ge,Re]),Xe=L.routes?.map(pe=>V(u,pe,ee)),ye={...te??{},continue:L.continue,group_by:it,object_matchers:we,match:void 0,match_re:void 0,group_wait:Ye,group_interval:Je,repeat_interval:We,routes:Xe,mute_time_intervals:L.muteTimeIntervals,receiver:O};return u!==C.hY?(ye.matchers=L.object_matchers?.map(({name:pe,operator:Ge,value:Re})=>`${(0,y.ot)(pe)}${Ge}${(0,y.ot)(Re)}`),ye.object_matchers=void 0):(ye.object_matchers=(0,y.J$)(ye),ye.matchers=void 0),L.receiver&&(ye.receiver=L.receiver),ye},Y=u=>({label:u,value:u}),J=u=>(u??[]).map(Y),oe=u=>u===null?null:u?g(u)??"":"",Ee=u=>u?N(u):[];function fe(u){return!u||u.length===0?!0:(0,H.TN)(u)||"Invalid duration format. Must be {number}{time_unit}"}const K=u=>u.map(L=>{const[ee,te,ue]=L;return`${ee}${te}${ue}`}),$e=(u,L="")=>{if(u.length===0)return!0;const ee=fe(u),te=fe(L);if(ee!==!0)return ee;if(te!==!0)return te;const ue=(0,H.ge)(u),E=(0,H.ge)(L);return E!==0&&ue<E?"Repeat interval should be higher or equal to Group interval":!0}},54486:(re,W,t)=>{t.d(W,{KR:()=>v,Ww:()=>y,d6:()=>N,iF:()=>H,jU:()=>T,jb:()=>g,oU:()=>C});var o=t(2543),e=t.n(o);const T=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],v=["january","february","march","april","may","june","july","august","september","october","november","december"],C={times:[{start_time:"",end_time:""}],weekdays:"",days_of_month:"",months:"",years:"",location:"",disable:!1},y=(c,d,I)=>c?c.split(",").map(A=>A.trim()).every(A=>A.split(":").every(d))||I:!0,G=c=>c?c.split(",").map(d=>d.trim()):void 0,H=c=>{const d=c.time_intervals.map(({times:I,weekdays:A,days_of_month:S,months:x,years:V,location:Y,disable:J})=>{const oe={times:Q(I,J),weekdays:G(A)?.map(Ee=>Ee.toLowerCase()),days_of_month:G(S),months:G(x),years:G(V),location:Y||void 0};return(0,o.omitBy)(oe,o.isUndefined)});return{name:c.name,time_intervals:d}};function Q(c,d){if(d)return[];const I=c?.filter(({start_time:A,end_time:S})=>!!A&&!!S);return I?.length?I:void 0}function g(c){return c.times?.length===0||c.weekdays?.length===0||c.days_of_month?.length===0||c.months?.length===0||c.years?.length===0}function N(c){return c.time_intervals.every(d=>g(d))}},67332:(re,W,t)=>{t.d(W,{AB:()=>y,AS:()=>G,I8:()=>H,dn:()=>g,eM:()=>N});var o=t(1932),e=t(2543),T=t.n(e),v=t(14588),C=t(79657);const y=(c,d,I)=>{if(!N(d.id??"",I))throw new Error(`No such route with ID '${d.id}'`);function S(x){let V=x;if(x.id===d.id){const Y=(0,C.SJ)(c,d,I);V={...x,...Y}}return{...V,routes:x.routes?.map(S)}}return S(I)},G=(c,d)=>{if(c.id===d.id)throw new Error("You cant remove the root policy");function I(A){return{...A,routes:A.routes?.reduce((S=[],x)=>(x.id===c.id||S.push(I(x)),S),[])}}return I(d)},H=(c,d,I,A,S)=>{const x=(0,C.SJ)(c,d,A);return(0,o.jM)(A,V=>{const[Y,J,oe]=Q(V,I);if(Y===void 0||J===void 0||oe===void 0)throw new Error(`could not find reference route "${I.id}" in tree`);S==="child"&&(Y.routes?Y.routes.push(x):Y.routes=[x]),S==="above"&&(J.routes=(0,v.insertBeforeImmutably)(J.routes??[],x,oe)),S==="below"&&(J.routes=(0,v.insertAfterImmutably)(J.routes??[],x,oe))})};function Q(c,d){let I,A,S;function x(V,Y,J){I||(V.id===d.id&&(I=V,A=J,S=Y),V.routes&&V.routes.forEach((oe,Ee)=>x(oe,Ee,V)))}return x(c,0,c),[I,A,S]}function g(c){return(0,e.omit)({...c,routes:c.routes?.map(d=>g(d))},"id")}function N(c,d){return d.id===c?d:d.routes?.find(I=>N(c,I))}}}]);

//# sourceMappingURL=AlertAmRoutes.9d7879145fa806abeba6.js.map