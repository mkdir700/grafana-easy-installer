"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5857],{96589:(tt,Se,y)=>{y.d(Se,{w:()=>Fe});var d=y(32196),te=y(96540),Ce=y(40845);const me=10,Fe=({colorPalette:q,min:le,max:he,display:$,hoverValue:ce,useStopsPercentage:ye})=>{const[ae,fe]=(0,te.useState)([]),[ne,pe]=(0,te.useState)({isShown:!1,value:0}),[ue,Le]=(0,te.useState)(null),Ie=(0,Ce.$j)(),ie=Ee(Ie,ae);(0,te.useEffect)(()=>{fe(re({colorArray:q,stops:me,useStopsPercentage:ye}))},[q,ye]);const Be=Ne=>{const He=Ne.nativeEvent.offsetX,$e=Ne.currentTarget.offsetWidth,se=Math.floor(He*100/$e+1),de=Math.floor((he-le)*se/100+le);pe({isShown:!0,value:de}),Le(se)},Ae=()=>{pe({isShown:!1,value:0})};return(0,te.useEffect)(()=>{Le(ce==null?null:r((ce-le)/(he-le)))},[ce,le,he]),te.createElement("div",{className:ie.scaleWrapper,onMouseMove:Be,onMouseLeave:Ae},te.createElement("div",{className:ie.scaleGradient},$&&(ne.isShown||ce!==void 0)&&te.createElement("div",{className:ie.followerContainer},te.createElement("div",{className:ie.follower,style:{left:`${ue}%`}}))),$&&te.createElement("div",{className:ie.followerContainer},te.createElement("div",{className:ie.legendValues},te.createElement("span",{className:ie.disabled},$(le)),te.createElement("span",{className:ie.disabled},$(he))),ue!=null&&(ne.isShown||ce!==void 0)&&te.createElement("span",{className:ie.hoverValue,style:{left:`${ue}%`}},$(ce??ne.value))))},re=({colorArray:q,stops:le,useStopsPercentage:he=!0})=>{const $=q.length;if(he&&$<=20){const fe=1/$*100;let ne=0;const pe=[];for(const ue of q)ne>0?pe.push(`${ue} ${ne}%`):pe.push(ue),ne+=fe,pe.push(`${ue} ${ne}%`);return pe}const ce=q[$-1],ye=Math.ceil($/le),ae=new Set;for(let fe=0;fe<$;fe+=ye)ae.add(q[fe]);return ae.add(ce),[...ae]};function r(q){return q>1?100:q<0?0:q*100}const Ee=(q,le)=>({scaleWrapper:(0,d.css)({width:"100%",fontSize:"11px",opacity:1}),scaleGradient:(0,d.css)({background:`linear-gradient(90deg, ${le.join()})`,height:"9px",pointerEvents:"none",borderRadius:q.shape.radius.default}),legendValues:(0,d.css)({display:"flex",justifyContent:"space-between",pointerEvents:"none"}),hoverValue:(0,d.css)({position:"absolute",marginTop:"-14px",padding:"3px 15px",transform:"translateX(-50%)"}),followerContainer:(0,d.css)({position:"relative",pointerEvents:"none",whiteSpace:"nowrap"}),follower:(0,d.css)({position:"absolute",height:"13px",width:"13px",borderRadius:q.shape.radius.default,transform:"translateX(-50%) translateY(-50%)",border:`2px solid ${q.colors.text.primary}`,top:"5px"}),disabled:(0,d.css)({color:q.colors.text.disabled})})},46369:(tt,Se,y)=>{y.r(Se),y.d(Se,{plugin:()=>kt});var d=y(96540),te=y(65158),Ce=y(37055),me=y(11261),Fe=y(27310),re=y(32264),r=y(52622),Ee=y(38248),q=y(11404),le=y(96589),he=y(27825),$=y(3290),ce=y(32196),ye=y(94624),ae=y(41260),fe=y(97152),ne=y(40845),pe=y(79041),ue=y(67266),Le=y(81297),Ie=y(68268),ie=y(10175),Be=y(77455),Ae=y(17464),Ne=y(69503),He=y(62567),$e=y(86106),se=y(36613),de=y(83195),Ve=y(28240),lt=y(66864),at=y(55852),Ke=y(14792),Re=y(1819),Qe=y(21164);function Ge(e,n,l,o,t,i,c){let s=e.current?.getContext("2d");if(s!=null){let p=i;for(;o[p-1]===o[i];)p--;let D=p+c,L=0,v=p;for(;v<D;){let P=t[v];L=Math.max(L,P),v++}let z=new Path2D,K=new Path2D;v=p;let U=0;for(;v<D;){let P=t[v];if(P>0){let w=P/L,b=U/c,O=v===i?z:K;const N=n*b+1,h=n/c-1;O.rect(N,Math.round(l*(1-w)),h,Math.round(l*w))}v++,U++}s.clearRect(0,0,n,l),s.fillStyle="#2E3036",s.fill(K),s.fillStyle="#5794F2",s.fill(z)}}const nt=e=>e.hover.seriesIdx===2?d.createElement(Re.e,{data:e.data.exemplars,rowIndex:e.hover.dataIdx,header:"Exemplar"}):d.createElement(ot,{...e}),ot=({data:e,hover:n,showHistogram:l=!1})=>{const o=n.dataIdx,[t]=(0,d.useState)(()=>e.heatmap?.meta?.type===ae.m.HeatmapCells&&!(0,$.Nb)(e.heatmap)),i=e.heatmap?.fields[0],c=e.heatmap?.fields[1],s=e.heatmap?.fields[2],a=M=>i?.display?(0,de.cN)(i.display(M)):i?.type===me.PU.time?(0,Ke.UA)().getCurrent()?.formatDate(M,"YYYY-MM-DD HH:mm:ss"):`${M}`,p=i?.values,D=c?.values,L=s?.values,v=(0,$.eE)(e.heatmap),z=c?.display?M=>(0,de.cN)(c.display(M)):M=>`${M}`,K=o%(e.yBucketCount??1),U=Math.floor(o/(e.yBucketCount??1));let P,w,b;if(v.yOrdinalDisplay){const M=e.yLayout===r.D7.le?K-1:K,k=e.yLayout===r.D7.le?K:K+1;P=M<0?v.yMinDisplay:`${v.yOrdinalDisplay[M]}`,w=`${v.yOrdinalDisplay[k]}`,(!v.yOrdinalLabel||Number.isNaN(+v.yOrdinalLabel[0]))&&(b=e.yLayout===r.D7.le?w:P)}else{const M=D?.[K];if(e.yLayout===r.D7.le)if(w=`${M}`,e.yLog){let Q=(e.yLog===2?Math.log2:Math.log10)(M)-1/e.yLogSplit;P=`${e.yLog**Q}`}else P=`${M-e.yBucketSize}`;else if(P=`${M}`,e.yLog){let Q=(e.yLog===2?Math.log2:Math.log10)(M)+1/e.yLogSplit;w=`${e.yLog**Q}`}else w=`${M+e.yBucketSize}`}let O,N;e.xLayout===r.D7.le?(N=p?.[o],O=N-e.xBucketSize):(O=p?.[o],N=O+e.xBucketSize);const h=L?.[o];let C=[];const F=e.series?.fields[K+1];if(F!=null){const M=!F.config.custom?.hideFrom?.tooltip,k=(F.config.links?.length??0)>0;M&&k&&(C=(0,Qe.u)(F,U))}let I=(0,d.useRef)(null),Z=264,X=64,A=Math.round(Z*se.A.pxRatio),ee=Math.round(X*se.A.pxRatio);if((0,d.useEffect)(()=>{l&&p!=null&&L!=null&&Ge(I,A,ee,p,L,o,e.yBucketCount)},[o]),t)return d.createElement("div",null,d.createElement(Re.e,{data:e.heatmap,rowIndex:o}));const j=()=>{if(b)return d.createElement("div",null,"Name: ",b);switch(e.yLayout){case r.D7.unknown:return d.createElement("div",null,z(P))}return d.createElement("div",null,"Bucket: ",z(P)," - ",z(w))};return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("div",null,a(O)),e.xLayout!==r.D7.unknown&&d.createElement("div",null,a(N))),l&&d.createElement("canvas",{width:A,height:ee,ref:I,style:{width:Z+"px",height:X+"px"}}),d.createElement("div",null,j(),d.createElement("div",null,(0,Ve.Ct)(s,e.heatmap),": ",e.display(h))),C.length>0&&d.createElement(lt.gW,null,C.map((M,k)=>d.createElement(at.z9,{key:k,icon:"external-link-alt",target:M.target,href:M.href,onClick:M.onClick,fill:"text",style:{width:"100%"}},M.title))))};var it=y(11389),st=y(58749),rt=y(52415),De=y(79871),ct=y(22731);const Ue=(e,n)=>{const l=e.heatmapColors?.palette,o=e.heatmapColors?.values[n];let t;return o!=null&&(t=l[o]),{cellColor:t,colorPalette:l}},Oe={year:1e3*60*60*24*365,month:1e3*60*60*24*30,week:1e3*60*60*24*7,day:1e3*60*60*24,h:1e3*60*60,m:1e3*60,s:1e3,ms:1},ut=new Set(["ms","s","m","h"]),dt=e=>{let n=1,l="ms";for(l in Oe)if(e>=Oe[l]){n=Math.floor(e/Oe[l]);break}const t=n!==1&&!ut.has(l)?l+"s":l;return`${n} ${t}`},Te=(e,n,l)=>{let o;switch(n){case"x":o=l?e?.fields.find(({name:t})=>t==="x"||t==="xMin"||t==="xMax"):e?.fields[0];break;case"y":o=l?e?.fields.find(({name:t})=>t==="y"||t==="yMin"||t==="yMax"):e?.fields[1];break;case"count":o=l?e?.fields.find(({name:t})=>t==="count"):e?.fields[2];break}return o},We=(e,n)=>{let l=e.heatmap.fields,o=l.find(s=>s.name==="xMax"),t=l.find(s=>s.name==="yMin"),i=l.find(s=>s.name==="yMax"),c=o.config.interval;return{xBucketMin:o.values[n]-c,xBucketMax:o.values[n],yBucketMin:t.values[n],yBucketMax:i.values[n]}},mt=e=>e.seriesIdx===2?d.createElement(Re.e,{data:e.dataRef.current.exemplars,rowIndex:e.dataIdxs[2],header:"Exemplar",padding:8}):d.createElement(ft,{...e}),ft=({dataIdxs:e,dataRef:n,showHistogram:l,isPinned:o,showColorScale:t=!1,mode:i,annotate:c})=>{const s=e[1],a=n.current,[p]=(0,d.useState)(()=>a.heatmap?.meta?.type===ae.m.HeatmapCells&&!(0,$.Nb)(a.heatmap)),D=Te(a.heatmap,"x",p),L=Te(a.heatmap,"y",p),v=Te(a.heatmap,"count",p),z=E=>D?.display?(0,de.cN)(D.display(E)):D?.type===me.PU.time?(0,Ke.UA)().getCurrent()?.formatDate(E,"YYYY-MM-DD HH:mm:ss"):`${E}`,K=D.values,U=L.values,P=v.values,w=(0,$.eE)(a.heatmap),b=L?.display?E=>(0,de.cN)(L.display(E)):E=>`${E}`;let O=D?.config.interval,N,h,C,F,I,Z=[];const X=E=>E%(a.yBucketCount??1);let A=X(s);const ee=Math.floor(s/(a.yBucketCount??1)),j=(E=s)=>{if(w.yOrdinalDisplay){const x=a.yLayout===r.D7.le?A-1:A,H=a.yLayout===r.D7.le?A:A+1;N=x<0?w.yMinDisplay:`${w.yOrdinalDisplay[x]}`,h=`${w.yOrdinalDisplay[H]}`,(!w.yOrdinalLabel||Number.isNaN(+w.yOrdinalLabel[0]))&&(I=a.yLayout===r.D7.le?h:N)}else{const x=U?.[A];if(a.yLayout===r.D7.le)if(h=`${x}`,a.yLog){let G=(a.yLog===2?Math.log2:Math.log10)(x)-1/a.yLogSplit;N=`${a.yLog**G}`}else N=`${x-a.yBucketSize}`;else if(N=`${x}`,a.yLog){let G=(a.yLog===2?Math.log2:Math.log10)(x)+1/a.yLogSplit;h=`${a.yLog**G}`}else h=`${x+a.yBucketSize}`}a.xLayout===r.D7.le?(F=K[E],C=F-a.xBucketSize):(C=K[E],F=C+a.xBucketSize)};p?{xBucketMin:C,xBucketMax:F,yBucketMin:N,yBucketMax:h}=We(a,s):j();const{cellColor:M,colorPalette:k}=Ue(a,s),Q=(E,x)=>{let H=[];for(let G=E;G<=x;G++){if(!P?.[G])continue;const ge=Ue(a,G).cellColor;J=oe(G),p?{xBucketMin:C,xBucketMax:F,yBucketMin:N,yBucketMax:h}=We(a,G):(A=X(G),j(G));const{label:Pt,value:Ft}=Y()[0];H.push({label:Pt,value:Ft,color:ge??"#FFF",isActive:s===G})}return H},Y=()=>{const E=i===r.$N.Multi&&!o;if(I)return E?[{label:`Name ${I}`,value:a.display(J)}]:[{label:"Name",value:I}];switch(a.yLayout){case r.D7.unknown:return E?[{label:b(N),value:a.display(J)}]:[{label:"",value:b(N)}]}return E?[{label:`Bucket ${b(N)}-${b(h)}`,value:a.display(J)}]:[{label:"Bucket",value:`${b(N)}-${b(h)}`}]},oe=E=>P?.[E];let J=oe(s);if(i===r.$N.Single||o){const E=O?[{label:"Duration",value:dt(O)}]:[];Z=[{label:(0,Ve.Ct)(v,a.heatmap),value:a.display(J),color:M??"#FFF",colorPlacement:De.lJ.trailing,colorIndicator:De.fX.value},...Y(),...E]}if(i===r.$N.Multi&&!o){let E=D.values[s],x=s,H=s;for(;D.values[x-1]===E;)x--;for(;D.values[H+1]===E;)H++;Q(x,H).forEach(ge=>{Z.push({label:ge.label,value:ge.value,color:ge.color??"#FFF",colorIndicator:De.fX.value,colorPlacement:De.lJ.trailing,isActive:ge.isActive})})}let T;if(o){let E=[];const x=a.series?.fields[A+1];if(x!=null){const H=!x.config.custom?.hideFrom?.tooltip,G=(x.config.links?.length??0)>0;H&&G&&(E=(0,Qe.u)(x,ee))}T=d.createElement(st.S,{dataLinks:E,annotate:c})}let f=(0,d.useRef)(null),u=264,m=64,S=Math.round(u*se.A.pxRatio),g=Math.round(m*se.A.pxRatio);(0,d.useEffect)(()=>{l&&K!=null&&P!=null&&i===r.$N.Single&&Ge(f,S,g,K,P,s,a.yBucketCount)},[s]);const V={label:"",value:z(F)};let W=[];i===r.$N.Single&&(l&&!p&&W.push(d.createElement("canvas",{width:S,height:g,ref:f,style:{width:u+"px",height:m+"px"}})),k&&t&&W.push(d.createElement(le.w,{colorPalette:k,min:a.heatmapColors?.minValue,max:a.heatmapColors?.maxValue,display:a.display,hoverValue:J})));const R=(0,ne.of)(ct.$),_=(0,ne.$j)();return d.createElement("div",{className:R.wrapper},d.createElement(rt.A,{item:V,isPinned:o}),d.createElement(it.o,{items:Z,isPinned:o},W?.map((E,x)=>d.createElement("div",{key:x,style:{padding:`${_.spacing(1)} 0`}},E))),T)};var Ye=y(90708),pt=y(73060),ht=y(57875),ve=y(39132),xe=y(77678),yt=y(51336),je=y(4134);function gt(e){const{dataRef:n,theme:l,onhover:o,onclick:t,isToolTipOpen:i,timeZone:c,getTimeRange:s,cellGap:a,hideLE:p,hideGE:D,yAxisConfig:L,ySizeDivisor:v,sync:z,eventsScope:K="__global_"}=e,U="x";let P=!0;n.current?.heatmap?.fields[0].type!==me.PU.time&&(P=!1);const w=devicePixelRatio;let b=n.current?.heatmap?.meta?.type;const O=l.visualization.getColorByName(e.exemplarColor);let N,h,C=new yt.e(c),F;C.addHook("init",f=>{f.root.querySelectorAll(".u-cursor-pt").forEach(u=>{Object.assign(u.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})}),t&&f.over.addEventListener("mouseup",u=>{f.cursor.drag._x||f.cursor.drag._y||t(u)},!0)}),P&&C.addHook("setData",f=>{let{min:u,max:m}=f.scales.x,S=s().from.valueOf(),g=s().to.valueOf();(u!==S||m!==g)&&queueMicrotask(()=>{f.setScale(U,{min:S,max:g})})}),C.addHook("syncRect",(f,u)=>{F=u});let I;o&&C.addHook("setLegend",f=>{if(f.cursor.idxs!=null)for(let u=0;u<f.cursor.idxs.length;u++){const m=f.cursor.idxs[u];if(m!=null){const{left:S,top:g}=f.cursor;i?.current||(I&&(clearTimeout(I),I=0),o({seriesIdx:u,dataIdx:m,pageX:F.left+S,pageY:F.top+g}));return}}i?.current||I||(I=setTimeout(()=>{o(null)},100))}),C.addHook("drawClear",f=>{N=N||new je.C$(0,0,f.bbox.width,f.bbox.height),N.clear(),f.series.forEach((u,m)=>{m>0&&(u._paths=null)})}),C.setMode(2),C.addScale({scaleKey:U,isTime:P,orientation:r.Lt.Horizontal,direction:r.ON.Right,range:(f,u,m)=>{if(P)return[s().from.valueOf(),s().to.valueOf()];if(n.current?.xLayout===r.D7.le)return[u-n.current?.xBucketSize,m];if(n.current?.xLayout===r.D7.ge)return[u,m+n.current?.xBucketSize];{let S=n.current?.xBucketSize/2;return[u-S,m+S]}}});let Z;if(!P){Z=[];for(let f=0;f<10;f++)Z.push(f*n.current?.xBucketSize)}C.addAxis({scaleKey:U,placement:r.vM.Bottom,incrs:Z,isTime:P,theme:l,timeZone:c});const X=n.current?.heatmap?.fields[1];if(!X)return C;const ee=X.config?.custom?.scaleDistribution??{type:r.L4.Linear},j=!!L.reverse,M=b===ae.m.HeatmapCells&&!(0,$.Nb)(n.current?.heatmap),k=ee.type!==r.L4.Linear||M,Q=(0,$.eE)(n.current?.heatmap).yOrdinalDisplay!=null,Y="y_"+(Math.random()+1).toString(36).substring(7);C.addScale({scaleKey:Y,isTime:!1,orientation:r.Lt.Vertical,direction:j?r.ON.Down:r.ON.Up,distribution:k?r.L4.Log:r.L4.Linear,log:ee.log??2,range:M?(f,u,m)=>{let S=f.data[1][2][0]/f.data[1][1][0];m*=S;let g,V;if([g,V]=k?se.A.rangeLog(u,m,ee.log??2,!0):[u,m],k&&!Q){let W=f.scales[Y].log,R=W===2?Math.log2:Math.log10,{min:_,max:E}=L;if(_!=null&&_>0){let x=R(_);g=W**(0,xe.rs)(x,1)}if(E!=null&&E>0){let x=R(E);V=W**(0,xe.Uh)(x,1)}}return[g,V]}:(f,u,m)=>{let S=u,g=m,{min:V,max:W}=L;if(k){let R=f.scales[Y].log,_=!1,E=!1,x=R===2?Math.log2:Math.log10;if(v!==1){let H=x(u),G=x(m);Number.isInteger(H)||(S=R**(0,xe.rs)(H,1),_=!0),Number.isInteger(G)||(g=R**(0,xe.Uh)(G,1),E=!0)}if(n.current?.yLayout===r.D7.le?_||(S/=R):n.current?.yLayout===r.D7.ge?E||(g*=R):(S/=R/2,g*=R/2),!Q){if(V!=null&&V>0){let H=x(V);S=R**(0,xe.rs)(H,1)}if(W!=null&&W>0){let H=x(W);g=R**(0,xe.Uh)(H,1)}}}else{let R=n.current?.yBucketSize;R===0&&(R=1),R&&(n.current?.yLayout===r.D7.le?S-=R:n.current?.yLayout===r.D7.ge?g+=R:(S-=R/2,g+=R/2)),Q||(S=V??S,g=W??g)}return[S,g]}});const oe=X.display??(0,de.j_)("short");C.addAxis({scaleKey:Y,show:L.axisPlacement!==r.vM.Hidden,placement:L.axisPlacement||r.vM.Left,size:L.axisWidth||null,label:L.axisLabel,theme:l,formatValue:(f,u)=>(0,de.cN)(oe(f,u)),splits:Q?f=>{const u=(0,$.eE)(n.current?.heatmap);if(!u.yOrdinalDisplay)return[0,1];let m=u.yOrdinalDisplay.map((S,g)=>g);switch(n.current?.yLayout){case r.D7.le:m.unshift(-1);break;case r.D7.ge:m.push(m.length);break}if(f.height<60)m=[m[0],m[m.length-1]];else for(;m.length>3&&(f.height-15)/m.length<10;)m=m.filter((S,g)=>g%2===0);return m}:void 0,values:Q?(f,u)=>{const m=(0,$.eE)(n.current?.heatmap);return m.yOrdinalDisplay?u.map(S=>S<0?m.yMinDisplay??"":m.yOrdinalDisplay[S]??""):u}:void 0});const J=M?Mt:xt;C.addSeries({facets:[{scale:U,auto:!0,sorted:1},{scale:Y,auto:!0}],pathBuilder:J({each:(f,u,m,S,g,V,W)=>{N.add({x:S-f.bbox.left,y:g-f.bbox.top,w:V,h:W,sidx:u,didx:m})},gap:a,hideLE:p,hideGE:D,xAlign:n.current?.xLayout===r.D7.le?-1:n.current?.xLayout===r.D7.ge?1:0,yAlign:(n.current?.yLayout===r.D7.le?-1:n.current?.yLayout===r.D7.ge?1:0)*(j?-1:1),ySizeDivisor:v,disp:{fill:{values:(f,u)=>n.current?.heatmapColors?.values,index:n.current?.heatmapColors?.palette}}}),theme:l,scaleKey:""}),C.addSeries({facets:[{scale:U,auto:!0,sorted:1},{scale:Y,auto:!0}],pathBuilder:vt({each:(f,u,m,S,g,V,W)=>{N.add({x:S-f.bbox.left,y:g-f.bbox.top,w:V,h:W,sidx:u,didx:m})}},O,n.current.yLayout),theme:l,scaleKey:""});const T={drag:{x:!0,y:!1,setScale:!1},dataIdx:(f,u)=>{if(u===1){h=null;let m=f.cursor.left*w,S=f.cursor.top*w;N.get(m,S,1,1,g=>{(0,je.ur)(m,S,g.x,g.y,g.x+g.w,g.y+g.h)&&(h=g)})}return h&&u===h.sidx?h.didx:null},focus:{prox:1e3,dist:(f,u)=>h?.sidx===u?0:1/0},points:{fill:"rgba(255,255,255, 0.3)",bbox:(f,u)=>{let m=h&&u===h.sidx;return{left:m?h.x/w:-10,top:m?h.y/w:-10,width:m?h.w/w:0,height:m?h.h/w:0}}}};return z&&z()!==ye.y.Off&&(T.sync={key:K,scales:[U,null]},C.setSync()),C.setCursor(T),C}const Je=4;function xt(e){const{disp:n,each:l,gap:o=1,hideLE:t=-1/0,hideGE:i=1/0,xAlign:c=1,yAlign:s=1,ySizeDivisor:a=1}=e,p=devicePixelRatio,D=o>=Je?Math.round:v=>v,L=Math.round(o*p);return(v,z)=>(se.A.orient(v,z,(K,U,P,w,b,O,N,h,C,F,I,Z,X,A,ee)=>{let j=v.data[z];const M=j[0],k=j[1],Q=j[2],Y=M.length;let oe=n.fill.values(v,z),J=n.fill.index??[...new Set(oe)],T=J.map(x=>new Path2D),f=Y-k.lastIndexOf(k[0]),u=Y/f,m=k[1]-k[0]||b.max-b.min,S=M[f]-M[0],g,V;w.distr===3?g=Math.abs(O(M[0]*w.log,w,F,h)-O(M[0],w,F,h)):g=Math.abs(O(S,w,F,h)-O(0,w,F,h)),b.distr===3?V=Math.abs(N(k[0]*b.log,b,I,C)-N(k[0],b,I,C))/a:V=Math.abs(N(m,b,I,C)-N(0,b,I,C))/a,g=Math.max(1,D(g-L)),V=Math.max(1,D(V-L));let W=c===-1?-g:c===0?-g/2:0,R=s===1?-V:s===0?-V/2:0,_=k.slice(0,f).map(x=>D(N(x,b,I,C)+R)),E=Array.from({length:u},(x,H)=>D(O(M[H*f],w,F,h)+W));for(let x=0;x<Y;x++)if(Q[x]>t&&Q[x]<i){let H=E[~~(x/f)],G=_[x%f],ge=T[oe[x]];A(ge,H,G,g,V),l(v,1,x,H,G,g,V)}return v.ctx.save(),v.ctx.rect(v.bbox.left,v.bbox.top,v.bbox.width,v.bbox.height),v.ctx.clip(),T.forEach((x,H)=>{v.ctx.fillStyle=J[H],v.ctx.fill(x)}),v.ctx.restore(),null}),null)}function vt(e,n,l){return(o,t)=>(se.A.orient(o,t,(i,c,s,a,p,D,L,v,z,K,U,P,w,b,O)=>{let N=new Path2D,h=[N],C=[n??"rgba(255,0,255,0.7)"],F=l===r.D7.le?-.5:l===r.D7.ge?.5:0;for(let I=0;I<c.length;I++){let Z=s[I];p.distr===3&&p.log===2||(Z+=F);let A=D(c[I],a,K,v),ee=L(Z,p,U,z),j=8,M=8;b(N,A-j/2,ee-M/2,j,M),e.each(o,t,I,A-j/2,ee-M/2,j,M)}o.ctx.save(),o.ctx.rect(o.bbox.left,o.bbox.top,o.bbox.width,o.bbox.height),o.ctx.clip(),h.forEach((I,Z)=>{o.ctx.fillStyle=C[Z],o.ctx.fill(I)}),o.ctx.restore()}),null)}function Mt(e){const{disp:n,each:l,gap:o=1,hideLE:t=-1/0,hideGE:i=1/0}=e,c=devicePixelRatio,s=o>=Je?Math.round:p=>p,a=Math.round(o*c);return(p,D)=>(se.A.orient(p,D,(L,v,z,K,U,P,w,b,O,N,h,C,F,I,Z)=>{let X=p.data[D];const A=X[0],ee=X[1],j=X[2],M=X[3],k=A.length;let Q=n.fill.values(p,D),Y=n.fill.index??[...new Set(Q)],oe=Y.map(u=>new Path2D),J=new Map,T=new Map;for(let u=0;u<A.length;u++){let m=A[u],S=ee[u],g=j[u];J.has(m)||J.set(m,s(P(m,K,N,b))),T.has(S)||T.set(S,s(w(S,U,h,O))),T.has(g)||T.set(g,s(w(g,U,h,O)))}let f=J.get(A.find(u=>u!==A[0]))-J.get(A[0]);for(let u=0;u<k;u++){if(M[u]<=t||M[u]>=i)continue;let m=A[u],S=ee[u],g=j[u],V=J.get(m),W=T.get(S),R=T.get(g),_=f,E=W-R;_=Math.max(1,_-a),E=Math.max(1,E-a);let x=V-a/2-_,H=R+a/2,G=oe[Q[u]];I(G,x,H,_,E),l(p,1,u,x,H,_,E)}p.ctx.save(),p.ctx.rect(p.bbox.left,p.bbox.top,p.bbox.width,p.bbox.height),p.ctx.clip(),oe.forEach((u,m)=>{p.ctx.fillStyle=Y[m],p.ctx.fill(u)}),p.ctx.restore()}),null)}const Ze=(e,n,l,o=-1/0,t=1/0)=>{if(n==null){n=1/0;for(let i=0;i<e.length;i++)e[i]>o&&e[i]<t&&(n=Math.min(n,e[i]))}if(l==null){l=-1/0;for(let i=0;i<e.length;i++)e[i]>o&&e[i]<t&&(l=Math.max(l,e[i]))}return[n,l]},Xe=(e,n,l,o)=>{let t=o-l||1,i=n.length,c=Array(e.length);for(let s=0;s<e.length;s++)c[s]=e[s]<l?0:e[s]>o?i-1:Math.min(i-1,Math.floor(i*(e[s]-l)/t));return c};function ze(e,n,l,o,t,i=c=>c){if(!e?.length)return{};(0,Ve.Fm)(e);const c=n?.find(a=>a.name==="exemplar");if(c?.fields.forEach(a=>{a.getLinks=(0,Ye._M)(c,a,a.state?.scopedVars??{},i)}),l.calculate){if(re.$.featureToggles.transformationsVariableSupport){const a={...l,calculation:{xBuckets:{...l.calculation?.xBuckets},yBuckets:{...l.calculation?.yBuckets}}};return a.calculation?.xBuckets?.value&&i!==void 0&&(a.calculation.xBuckets.value=i(a.calculation.xBuckets.value)),a.calculation?.yBuckets?.value&&i!==void 0&&(a.calculation.yBuckets.value=i(a.calculation.yBuckets.value)),we((0,$.VQ)(e,a.calculation??{}),c,a,o,t)}return we((0,$.VQ)(e,l.calculation??{}),c,l,o,t)}let s;for(const a of e)switch(a.meta?.type){case ae.m.HeatmapCells:return(0,$.Nb)(a)?we(a,c,l,o,t):St(a,c,l,o,t);case ae.m.HeatmapRows:s=a}if(s==null)if(e.length>1)e.every(p=>!Number.isNaN((0,ve.L)(p.fields[1].state?.displayName)))&&e.sort(ve.Bm),s=(0,pt.Fd)({frames:e,keepDisplayNames:!0});else{let a=e[0],p=a.fields.filter(L=>L.type===me.PU.number);p.every(L=>!Number.isNaN((0,ve.L)(L.state?.displayName)))?(p.sort((L,v)=>(0,ve.L)(L.state?.displayName)-(0,ve.L)(v.state?.displayName)),s={...a,fields:[a.fields.find(L=>L.type===me.PU.time),...p]}):s=a}return s.fields.forEach(a=>{(a.config.links?.length??0)!==0&&(a.getLinks=(0,Ye._M)(s,a,a.state?.scopedVars??{},i))}),{...we((0,$.yJ)({unit:l.yAxis?.unit,decimals:l.yAxis?.decimals,...l.rowsFrame,frame:s}),c,l,o,t),series:s}}const St=(e,n,l,o,t)=>{if(e.meta?.type!==ae.m.HeatmapCells||(0,$.Nb)(e))return{warning:"Expected sparse heatmap format",heatmap:e};be(e.fields[1],l.yAxis,t);const i=e.fields[3],c=be(i,l.cellValues,t);let[s,a]=Ze(i.values,l.color.min,l.color.max,l.filterValues?.le,l.filterValues?.ge);return{heatmap:e,heatmapColors:{palette:o,values:Xe(i.values,o,s,a),minValue:s,maxValue:a},exemplars:n,display:p=>(0,de.cN)(c(p))}},we=(e,n,l,o,t)=>{if(e.meta?.type!==ae.m.HeatmapCells)return{warning:"Expected heatmap scanlines format",heatmap:e};if(e.fields.length<2||e.length<2)return{heatmap:e};const i=(0,$.eE)(e);let c,s,a;for(const C of e.fields)switch(C.name){case"y":s=C.name;case"yMin":case"yMax":{s||(s=C.name),i.yOrdinalDisplay==null&&be(C,l.yAxis,t);break}case"x":case"xMin":case"xMax":c=C.name;break;default:C.type===me.PU.number&&!a&&(a=C)}if(!s)return{warning:"Missing Y field",heatmap:e};if(!s)return{warning:"Missing X field",heatmap:e};if(!a)return{warning:"Missing value field",heatmap:e};const p=be(a,l.cellValues,t),D=e.fields[0].values,L=e.fields[1].values,v=D.length;let z=v-L.lastIndexOf(L[0]),K=v/z,U=L[1]-L[0],P=D[z]-D[0],[w,b]=Ze(a.values,l.color.min,l.color.max,l.filterValues?.le,l.filterValues?.ge),O=l.calculation?.xBuckets,N=l.calculation?.yBuckets;return{heatmap:e,heatmapColors:{palette:o,values:Xe(a.values,o,w,b),minValue:w,maxValue:b},exemplars:n?.length?n:void 0,xBucketSize:P,yBucketSize:U,xBucketCount:K,yBucketCount:z,yLog:N?.scale?.log??0,xLog:O?.scale?.log??0,xLogSplit:O?.scale?.log?+(O?.value??"1"):1,yLogSplit:N?.scale?.log?+(N?.value??"1"):1,xLayout:c==="xMax"?r.D7.le:c==="xMin"?r.D7.ge:r.D7.unknown,yLayout:s==="yMax"?r.D7.le:s==="yMin"?r.D7.ge:r.D7.unknown,display:C=>(0,de.cN)(p(C))}};function be(e,n,l){if(n?.unit?.length||n?.decimals!=null){const{unit:o,decimals:t}=n;e.display=void 0,e.config={...e.config},o?.length&&(e.config.unit=o),t!=null&&(e.config.decimals=t)}return e.display||(e.display=(0,ht.J)({field:e,theme:l})),e.display}var qe=y(21313),Ct=y(37634),_e=y(84140),B=y(52995);const Me=[{name:"BrBG",invert:"always"},{name:"PiYG",invert:"always"},{name:"PRGn",invert:"always"},{name:"PuOr",invert:"always"},{name:"RdBu",invert:"always"},{name:"RdGy",invert:"always"},{name:"RdYlBu",invert:"always"},{name:"RdYlGn",invert:"always"},{name:"Spectral",invert:"always"},{name:"Blues",invert:"dark"},{name:"Greens",invert:"dark"},{name:"Greys",invert:"dark"},{name:"Oranges",invert:"dark"},{name:"Purples",invert:"dark"},{name:"Reds",invert:"dark"},{name:"Turbo",invert:"light"},{name:"Cividis",invert:"light"},{name:"Viridis",invert:"light"},{name:"Magma",invert:"light"},{name:"Inferno",invert:"light"},{name:"Plasma",invert:"light"},{name:"Warm",invert:"light"},{name:"Cool",invert:"light"},{name:"Cubehelix",invert:"light",name2:"CubehelixDefault"},{name:"BuGn",invert:"dark"},{name:"BuPu",invert:"dark"},{name:"GnBu",invert:"dark"},{name:"OrRd",invert:"dark"},{name:"PuBuGn",invert:"dark"},{name:"PuBu",invert:"dark"},{name:"PuRd",invert:"dark"},{name:"RdPu",invert:"dark"},{name:"YlGnBu",invert:"dark"},{name:"YlGn",invert:"dark"},{name:"YlOrBr",invert:"dark"},{name:"YlOrRd",invert:"dark"},{name:"Rainbow",invert:"always"},{name:"Sinebow",invert:"always"}],Et=Me.find(e=>e.name==="Spectral");function ke(e,n){const l={...B.KQ.color,...e},o=[],t=(l.steps??128)-1;if(e.mode===B.P7.Opacity){const i=(0,_e.A)(n.visualization.getColorByName(e.fill)).toPercentageRgb(),c=l.scale===B.uM.Exponential?qe.scalePow().exponent(l.exponent).domain([0,1]).range([0,1]):qe.scaleLinear().domain([0,1]).range([0,1]);for(let s=0;s<=t;s++)i.a=c(s/t),o.push((0,_e.A)(i).toString("hex8"))}else{const i=Me.find(a=>a.name===l.scheme)??Et;let c="interpolate"+(i.name2??i.name);const s=Ct[c];for(let a=0;a<=t;a++){let p=s(a/t),D=p.indexOf("rgb")===0?"#"+[...p.matchAll(/\d+/g)].map(L=>(+L[0]).toString(16).padStart(2,"0")).join(""):p;o.push(D)}(i.invert==="always"||i.invert==="dark"&&n.isDark||i.invert==="light"&&n.isLight)&&o.reverse(),e.reverse&&o.reverse()}return o}const Lt=({data:e,id:n,timeRange:l,timeZone:o,width:t,height:i,options:c,fieldConfig:s,eventBus:a,onChangeTimeRange:p,replaceVariables:D})=>{const L=(0,ne.$j)(),v=(0,ne.of)(Bt),{sync:z,canAddAnnotations:K}=(0,pe.d2)(),U=(0,d.useCallback)(()=>z?.()===ye.y.Tooltip,[]),P=(0,d.useCallback)(()=>z?.()!==ye.y.Off,[]),[w,b]=(0,d.useState)(null);let O=(0,d.useRef)(l);O.current=l;const N=(0,d.useMemo)(()=>ke(c.color,L),[c.color,L]),h=(0,d.useMemo)(()=>{try{return ze(e.series,e.annotations,c,N,L,D)}catch(T){return{warning:`${T}`}}},[e.series,e.annotations,c,N,L,D]),C=(0,d.useMemo)(()=>{let T=[],f=[];const u=(0,$.eE)(h.heatmap);return h.exemplars?.length&&(T=h.exemplars?.fields[0].values,u.yMatchWithLabel&&u.yOrdinalDisplay!=null?f=(h.exemplars?.fields.find(g=>g.name===u.yMatchWithLabel).values).map(g=>u.yOrdinalLabel?.indexOf(g)):f=h.exemplars?.fields[1].values),[null,h.heatmap?.fields.map(m=>m.values),[T,f]]},[h.heatmap,h.exemplars]),[F,I]=(0,d.useState)(void 0),[Z,X]=(0,d.useState)(!1),A=(0,d.useRef)(!1),ee=()=>{A.current=!1,X(!1),M(null)},j=()=>{A.current=!A.current,X(A.current)},M=(0,d.useCallback)(T=>{I(T??void 0)},[c,e.structureRev]),k=(0,d.useRef)(h);k.current=h;const Q=!!re.$.featureToggles.newVizTooltips,Y=(0,d.useMemo)(()=>{const T=k.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;return gt({dataRef:k,theme:L,onhover:Q?null:M,onclick:!Q&&c.tooltip.mode!==r.$N.None?j:null,isToolTipOpen:A,timeZone:o,getTimeRange:()=>O.current,sync:z,cellGap:c.cellGap,hideLE:c.filterValues?.le,hideGE:c.filterValues?.ge,exemplarColor:c.exemplars?.color??"rgba(255,0,255,0.7)",yAxisConfig:c.yAxis,ySizeDivisor:T?.type===r.L4.Log?+(c.calculation?.yBuckets?.value||1):1})},[c,o,e.structureRev]),oe=()=>{if(!h.heatmap||!c.legend.show)return null;let u=k.current?.heatmap?.meta?.type===ae.m.HeatmapCells&&!(0,$.Nb)(k.current?.heatmap)?3:2;const m=h.heatmap.fields[u];let S;return F&&h.heatmap.fields&&F.seriesIdx===1&&(S=m.values[F.dataIdx]),d.createElement(ue.KU.Legend,{placement:"bottom",maxHeight:"20%"},d.createElement("div",{className:v.colorScaleWrapper},d.createElement(le.w,{hoverValue:S,colorPalette:N,min:k.current.heatmapColors?.minValue,max:k.current.heatmapColors?.maxValue,display:h.display})))};if(h.warning||!h.heatmap)return d.createElement(fe.a,{panelId:n,fieldConfig:s,data:e,needsNumberField:!0,message:h.warning});const J=!!(K&&K());return d.createElement(d.Fragment,null,d.createElement(ue.KU,{width:t,height:i,legend:oe()},(T,f)=>d.createElement(Le.Z,{config:Y,data:C,width:T,height:f},d.createElement(Ie.K,{config:Y,sync:P,eventBus:a,frame:h.series??h.heatmap}),!Q&&d.createElement(ie.j,{config:Y,onZoom:p}),Q&&d.createElement(d.Fragment,null,c.tooltip.mode!==r.$N.None&&d.createElement(Be.xl,{config:Y,hoverMode:Be.b3.xyOne,queryZoom:p,syncTooltip:U,render:(u,m,S,g,V,W,R)=>{if(J&&W!=null){b(W),V();return}const _=()=>{let E=u.posToVal(u.cursor.left,"x");b({from:E,to:E}),V()};return d.createElement(mt,{mode:R?r.$N.Multi:c.tooltip.mode,dataIdxs:m,seriesIdx:S,dataRef:k,isPinned:g,dismiss:V,showHistogram:c.tooltip.yHistogram,showColorScale:c.tooltip.showColorScale,panelData:e,annotate:J?_:void 0})},maxWidth:c.tooltip.maxWidth,maxHeight:c.tooltip.maxHeight}),d.createElement(He.W,{annotations:e.annotations??[],config:Y,timeZone:o,newRange:w,setNewRange:b,canvasRegionRendering:!1})))),!Q&&d.createElement(d.Fragment,null,d.createElement(Ae.ZL,null,F&&c.tooltip.mode!==r.$N.None&&d.createElement(Ne.o,{position:{x:F.pageX,y:F.pageY},offset:{x:10,y:10},allowPointerEvents:A.current},Z&&d.createElement($e.d,{onClick:ee}),d.createElement(nt,{timeRange:l,data:h,hover:F,showHistogram:c.tooltip.yHistogram,replaceVars:D})))))},Bt=e=>({colorScaleWrapper:(0,ce.css)({marginLeft:"25px",padding:"10px 0",maxWidth:"300px"})}),Nt=e=>{if(Object.keys(e.options??{}).length===0)return et(e,"heatmap",{angular:e},e.fieldConfig);let n=e.options?.tooltip?.show;return n!==void 0&&(n===!0?e.options.tooltip.mode=r.$N.Single:n===!1&&(e.options.tooltip.mode=r.$N.None),delete e.options.tooltip?.show),e.options},et=(e,n,l,o)=>{if(n==="heatmap"&&l.angular){const{fieldConfig:t,options:i}=Dt({...l.angular,fieldConfig:o});return e.fieldConfig=t,i}if(n==="heatmap-new"){const{bucketFrame:t,...i}=e.options;return t?{...i,rowsFrame:t}:e.options}return{}};function Dt(e){const n={defaults:{},overrides:[]},l=e.dataFormat!=="tsbuckets",o={...B.KQ.calculation},t={logBase:1,...e.yAxis};l&&(e.xBucketSize?o.xBuckets={mode:r.J1.Size,value:`${e.xBucketSize}`}:e.xBucketNumber&&(o.xBuckets={mode:r.J1.Count,value:`${e.xBucketNumber}`}),e.yBucketSize?o.yBuckets={mode:r.J1.Size,value:`${e.yBucketSize}`}:e.xBucketNumber&&(o.yBuckets={mode:r.J1.Count,value:`${e.yBucketNumber}`}),t.logBase>1&&(o.yBuckets={mode:r.J1.Count,value:+t.splitFactor>0?`${t.splitFactor}`:void 0,scale:{type:r.L4.Log,log:t.logBase}}));const i=Pe(e.cards?.cardPadding,2),c={calculate:l,calculation:o,color:{...B.KQ.color,steps:128},cellGap:i||1,cellRadius:Pe(e.cards?.cardRound),yAxis:{axisPlacement:t.show===!1?r.vM.Hidden:r.vM.Left,reverse:!!e.reverseYBuckets,axisWidth:Pe(t.width),min:t.min,max:t.max,unit:t.format,decimals:t.decimals},cellValues:{decimals:Pe(e.tooltipDecimals)},rowsFrame:{layout:wt(e.yBucketBound)},legend:{show:!!e.legend?.show},showValue:r.yL.Never,tooltip:{mode:e.tooltip?.show?r.$N.Single:r.$N.None,yHistogram:!!e.tooltip?.showHistogram},exemplars:{...B.KQ.exemplars}};e.hideZeroBuckets&&(c.filterValues={...B.KQ.filterValues});const s=e.color??{};switch(s?.mode){case"spectrum":{c.color.mode=B.P7.Scheme;const a=s.colorScheme;let p=Me.find(D=>D.name===a);p||(p=Me.find(D=>a.indexOf(D.name)>=0)),c.color.scheme=p?p.name:B.KQ.color.scheme;break}case"opacity":{c.color.mode=B.P7.Opacity,c.color.scale=s.scale;break}}return c.color.fill=s.cardColor,c.color.min=s.min,c.color.max=s.max,typeof s.min=="number"&&typeof s.max=="number"&&s.min>s.max&&(c.color.min=s.max,c.color.max=s.min,c.color.reverse=!0),{fieldConfig:n,options:c}}function wt(e){switch(e){case"upper":return r.D7.ge;case"lower":return r.D7.le;case"middle":return r.D7.unknown}return r.D7.auto}function Pe(e,n){if(e==null||e==="")return n;const l=+e;return isNaN(l)?n:l}class bt{getSuggestionsForData(n){const{dataSummary:l}=n;if(!n.data?.series||!l.hasData||l.timeFieldCount<1||l.numberFieldCount<2||l.numberFieldCount>10)return;const o=ke(B.KQ.color,re.$.theme2),t=ze(n.data.series,void 0,B.KQ,o,re.$.theme2);!t||t.warning||n.getListAppender({name:"",pluginId:"heatmap",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}})}}const kt=new te.m(Lt).useFieldConfig({disableStandardOptions:Object.values(Ce.uo).filter(e=>e!==Ce.uo.Links),useCustomConfig:e=>{e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Y axis scale",category:["Heatmap"],editor:Ee.W,override:Ee.W,defaultValue:{type:r.L4.Linear},shouldApply:n=>n.type===me.PU.number,process:Fe.hS,hideFromDefaults:!0}),(0,q.e)(e)}}).setPanelChangeHandler(et).setMigrationHandler(Nt).setPanelOptions((e,n)=>{const l=n.options??B.KQ;let o=!1;if(n.data.length>0)try{const i=ke(l.color,re.$.theme2),c=ze(n.data,void 0,l,i,re.$.theme2);o=(0,$.eE)(c.heatmap).yOrdinalDisplay!=null}catch{}let t=["Heatmap"];e.addRadio({path:"calculate",name:"Calculate from data",defaultValue:B.KQ.calculate,category:t,settings:{options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}),l.calculate&&(0,he.J)("calculation.",e,l.calculation,t),t=["Y Axis"],e.addRadio({path:"yAxis.axisPlacement",name:"Placement",defaultValue:B.KQ.yAxis.axisPlacement??r.vM.Left,category:t,settings:{options:[{label:"Left",value:r.vM.Left},{label:"Right",value:r.vM.Right},{label:"Hidden",value:r.vM.Hidden}]}}).addUnitPicker({category:t,path:"yAxis.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:t,path:"yAxis.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),o||e.addNumberInput({path:"yAxis.min",name:"Min value",settings:{placeholder:"Auto"},category:t}).addTextInput({path:"yAxis.max",name:"Max value",settings:{placeholder:"Auto"},category:t}),e.addNumberInput({path:"yAxis.axisWidth",name:"Axis width",defaultValue:B.KQ.yAxis.axisWidth,settings:{placeholder:"Auto",min:5},category:t}).addTextInput({path:"yAxis.axisLabel",name:"Axis label",defaultValue:B.KQ.yAxis.axisLabel,settings:{placeholder:"Auto"},category:t}),l.calculate||e.addRadio({path:"rowsFrame.layout",name:"Tick alignment",defaultValue:B.KQ.rowsFrame?.layout??r.D7.auto,category:t,settings:{options:[{label:"Auto",value:r.D7.auto},{label:"Top (LE)",value:r.D7.le},{label:"Middle",value:r.D7.unknown},{label:"Bottom (GE)",value:r.D7.ge}]}}),e.addBooleanSwitch({path:"yAxis.reverse",name:"Reverse",defaultValue:B.KQ.yAxis.reverse===!0,category:t}),t=["Colors"],e.addRadio({path:"color.mode",name:"Mode",defaultValue:B.KQ.color.mode,category:t,settings:{options:[{label:"Scheme",value:B.P7.Scheme},{label:"Opacity",value:B.P7.Opacity}]}}),e.addColorPicker({path:"color.fill",name:"Color",defaultValue:B.KQ.color.fill,category:t,showIf:i=>i.color.mode===B.P7.Opacity}),e.addRadio({path:"color.scale",name:"Scale",defaultValue:B.KQ.color.scale,category:t,settings:{options:[{label:"Exponential",value:B.uM.Exponential},{label:"Linear",value:B.uM.Linear}]},showIf:i=>i.color.mode===B.P7.Opacity}),e.addSliderInput({path:"color.exponent",name:"Exponent",defaultValue:B.KQ.color.exponent,category:t,settings:{min:.1,max:2,step:.1},showIf:i=>i.color.mode===B.P7.Opacity&&i.color.scale===B.uM.Exponential}),e.addSelect({path:"color.scheme",name:"Scheme",description:"",defaultValue:B.KQ.color.scheme,category:t,settings:{options:Me.map(i=>({value:i.name,label:i.name}))},showIf:i=>i.color.mode!==B.P7.Opacity}),e.addSliderInput({path:"color.steps",name:"Steps",defaultValue:B.KQ.color.steps,category:t,settings:{min:2,max:128,step:1}}).addBooleanSwitch({path:"color.reverse",name:"Reverse",defaultValue:B.KQ.color.reverse,category:t}).addCustomEditor({id:"__scale__",path:"__scale__",name:"",category:t,editor:()=>{const i=ke(l.color,re.$.theme2);return d.createElement("div",null,d.createElement(le.w,{colorPalette:i,min:1,max:100}))}}),e.addNumberInput({path:"color.min",name:"Start color scale from value",defaultValue:B.KQ.color.min,settings:{placeholder:"Auto (min)"},category:t}).addNumberInput({path:"color.max",name:"End color scale at value",defaultValue:B.KQ.color.max,settings:{placeholder:"Auto (max)"},category:t}),t=["Cell display"],l.calculate||e.addTextInput({path:"rowsFrame.value",name:"Value name",defaultValue:B.KQ.rowsFrame?.value,settings:{placeholder:"Value"},category:t}),e.addUnitPicker({category:t,path:"cellValues.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:t,path:"cellValues.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),e.addSliderInput({name:"Cell gap",path:"cellGap",defaultValue:B.KQ.cellGap,category:t,settings:{min:0,max:25}}).addNumberInput({path:"filterValues.le",name:"Hide cells with values <=",defaultValue:B.KQ.filterValues?.le,settings:{placeholder:"None"},category:t}).addNumberInput({path:"filterValues.ge",name:"Hide cells with values >=",defaultValue:B.KQ.filterValues?.ge,settings:{placeholder:"None"},category:t}),t=["Tooltip"],e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:t,defaultValue:r.$N.Single,settings:{options:[{value:r.$N.Single,label:"Single"},{value:r.$N.Multi,label:"All"},{value:r.$N.None,label:"Hidden"}]}}),e.addBooleanSwitch({path:"tooltip.yHistogram",name:"Show histogram (Y axis)",defaultValue:B.KQ.tooltip.yHistogram,category:t,showIf:i=>i.tooltip.mode===r.$N.Single}),e.addBooleanSwitch({path:"tooltip.showColorScale",name:"Show color scale",defaultValue:B.KQ.tooltip.showColorScale,category:t,showIf:i=>i.tooltip.mode===r.$N.Single&&re.$.featureToggles.newVizTooltips}),e.addNumberInput({path:"tooltip.maxWidth",name:"Max width",category:t,settings:{integer:!0},showIf:i=>!1}),e.addNumberInput({path:"tooltip.maxHeight",name:"Max height",category:t,defaultValue:600,settings:{integer:!0},showIf:i=>!1}),t=["Legend"],e.addBooleanSwitch({path:"legend.show",name:"Show legend",defaultValue:B.KQ.legend.show,category:t}),t=["Exemplars"],e.addColorPicker({path:"exemplars.color",name:"Color",defaultValue:B.KQ.exemplars.color,category:t})}).setSuggestionsSupplier(new bt).setDataSupport({annotations:!0})}}]);

//# sourceMappingURL=heatmapPanel.45deac0a3caf808d9902.js.map