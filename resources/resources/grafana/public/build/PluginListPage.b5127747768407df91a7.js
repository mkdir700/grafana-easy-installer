"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4519],{50691:(se,N,n)=>{n.d(N,{fk:()=>A,yf:()=>f,Df:()=>c,Uj:()=>L,Jn:()=>z,z$:()=>$});var o=n(96540),e=n(43429),y=n(39938);function c({error:l}){const h=x(l);return o.createElement(y.E,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:h})}function x(l){switch(l){case e.ZK.modifiedSignature:return"Plugin disabled due to modified content";case e.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${l?`: ${l}`:""}`}}var d=n(40845),P=n(32196);const B=l=>(0,P.css)`
  background: ${l.colors.background.primary};
  border-color: ${l.colors.border.strong};
  color: ${l.colors.text.secondary};
`;function z(){const l=(0,d.of)(B);return o.createElement(y.E,{text:"Installed",color:"orange",className:l})}var D=n(33378),G=n(66864),R=n(98624),T=n(55852);function L({plugin:l}){const h=(0,d.of)(B),U=j=>{j.preventDefault(),window.open(`https://grafana.com/grafana/plugins/${l.id}?utm_source=grafana_catalog_learn_more`,"_blank","noopener,noreferrer")};return(0,D.a)("enterprise.plugins")?o.createElement(y.E,{text:"Enterprise",color:"blue"}):o.createElement(G.Gy,null,o.createElement(R.B,{status:l.signature}),o.createElement(y.E,{icon:"lock","aria-label":"lock icon",text:"Enterprise",color:"blue",className:h}),o.createElement(T.$n,{size:"sm",fill:"text",icon:"external-link-alt",onClick:U},"Learn more"))}function $({plugin:l}){const h=(0,d.of)(M);return o.createElement("p",{className:h.hasUpdate},"Update available!")}const M=l=>({hasUpdate:(0,P.css)`
      color: ${l.colors.text.secondary};
      font-size: ${l.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function A(){return o.createElement(y.E,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function f(){return o.createElement(y.E,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},65965:(se,N,n)=>{n.r(N),n.d(N,{default:()=>ne});var o=n(32196),e=n(96540),y=n(58476),c=n(12131),x=n(40845),d=n(88575),P=n(88323),B=n(94354),z=n(56034),D=n(17205),G=n(17422),R=n(6320),T=n(31678),L=n(42930),$=n(32264),M=n(69529),A=n(71259),f=n(44836),l=n(66253),h=n(70255),U=n(14110),j=n(14578),ae=n(67061),J=n(39938),Y=n(72129),V=n(43429),H=n(66864),w=n(98624),E=n(50691);function k({plugin:s}){const g=s.hasUpdate&&!s.isCore&&s.type!==V.QE.renderer;return s.isEnterprise?e.createElement(H.Gy,{height:"auto",wrap:!0},e.createElement(E.Uj,{plugin:s}),s.isDisabled&&e.createElement(E.Df,{error:s.error}),g&&e.createElement(E.z$,{plugin:s}),s.angularDetected&&e.createElement(E.fk,null)):e.createElement(H.Gy,{height:"auto",wrap:!0},e.createElement(w.B,{status:s.signature}),s.isDisabled&&e.createElement(E.Df,{error:s.error}),s.isDeprecated&&e.createElement(E.yf,null),s.isInstalled&&e.createElement(E.Jn,null),g&&e.createElement(E.z$,{plugin:s}),s.angularDetected&&e.createElement(E.fk,null))}function q({alt:s,className:g,src:r,height:u}){return e.createElement("img",{src:r,className:g,alt:s,loading:"lazy",height:u})}const F="48px";function _({plugin:s,pathName:g,displayMode:r=l.fy.Grid}){const u=(0,x.of)(O),p=r===l.fy.List,Z=()=>{c.Ny.getSearchObject()?.q&&(0,U.rR)("plugins_search_user_click",{})};return e.createElement("a",{href:`${g}/${s.id}`,className:(0,o.cx)(u.container,{[u.list]:p}),onClick:Z},e.createElement(q,{src:s.info.logos.small,className:u.pluginLogo,height:F,alt:""}),e.createElement("h2",{className:(0,o.cx)(u.name,"plugin-name")},s.name),e.createElement("div",{className:(0,o.cx)(u.content,"plugin-content")},e.createElement("p",null,"By ",s.orgName),e.createElement(k,{plugin:s})),e.createElement("div",{className:u.pluginType},s.type&&e.createElement(j.I,{name:l.Ip[s.type],title:`${s.type} plugin`})))}const W=({displayMode:s=l.fy.Grid,rootProps:g})=>{const r=(0,x.of)(O),u=s===l.fy.List;return e.createElement("div",{className:(0,o.cx)(r.container,{[r.list]:u}),...g},e.createElement(h.A,{containerClassName:(0,o.cx)(r.pluginLogo,(0,o.css)({lineHeight:1})),width:F,height:F}),e.createElement("h2",{className:r.name},e.createElement(h.A,{width:100})),e.createElement("div",{className:r.content},e.createElement("p",null,e.createElement(h.A,{width:120})),e.createElement(ae.B,{direction:"row"},e.createElement(J.E.Skeleton,null),e.createElement(J.E.Skeleton,null))),e.createElement("div",{className:r.pluginType},e.createElement(h.A,{width:16,height:16})))},K=(0,Y.j)(_,W),O=s=>({container:(0,o.css)({display:"grid",gridTemplateColumns:`${F} 1fr ${s.spacing(3)}`,gridTemplateRows:"auto",gap:s.spacing(2),gridAutoFlow:"row",background:s.colors.background.secondary,borderRadius:s.shape.radius.default,padding:s.spacing(3),transition:s.transitions.create(["background-color","box-shadow","border-color","color"],{duration:s.transitions.duration.short}),"&:hover":{background:s.colors.emphasize(s.colors.background.secondary,.03)}}),list:(0,o.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:s.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,o.css)({gridArea:"1 / 3 / 2 / 4",color:s.colors.text.secondary}),pluginLogo:(0,o.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,o.css)({gridArea:"3 / 1 / 4 / 3",color:s.colors.text.secondary}),name:(0,o.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:s.typography.h4.fontSize,color:s.colors.text.primary,margin:0})}),ee=({plugins:s,displayMode:g,isLoading:r})=>{const u=g===l.fy.List,{pathname:p}=(0,y.zy)(),Z=$.$.appSubUrl+(p.endsWith("/")?p.slice(0,-1):p);return!r&&s.length===0?e.createElement(M.p,{variant:"not-found",message:(0,f.t)("plugins.empty-state.message","No plugins found")}):e.createElement(A.x,{gap:3,...u?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list"},r?new Array(50).fill(null).map((C,b)=>e.createElement(K.Skeleton,{key:b,displayMode:g})):s.map(C=>e.createElement(K,{key:C.id,plugin:C,pathName:Z,displayMode:g})))};var te=n(40996),t=n(67647);const a=(s,g=0,r=[])=>{const u=(0,e.useRef)(!0),p=[...r,u];return(0,te.A)(()=>{if(u.current){u.current=!1;return}return s()},g,p)},i=({value:s,onSearch:g})=>{const[r,u]=(0,e.useState)(s);return a(()=>g(r??""),500,[r]),e.createElement(t.Z,{value:r,onKeyDown:p=>{(p.key==="Enter"||p.keyCode===13)&&g(p.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:p=>{u(p)},width:46})};var m=n(5129);const v=()=>({push:({query:s})=>{c.Ny.partial(s)}});var I=n(83391);function ne({route:s}){const g=(0,y.zy)(),r=(0,c.SE)(g.search),u=(0,T.useSelector)(S=>(0,G.tc)(S.navIndex,"plugins")),{displayMode:p,setDisplayMode:Z}=(0,I.Tr)(),C=(0,x.of)(ue),b=v(),de=(0,I.pw)(),le=r.q?.toString()||"",Q=r.filterBy?.toString()||"installed",X=r.filterByType||"all",oe=r.sortBy||m.by.nameAsc,{isLoading:ge,error:re,plugins:me}=(0,I.PW)({keyword:le,type:X!=="all"?X:void 0,isInstalled:Q==="installed"?!0:void 0},oe),ce=[{value:"all",label:"All"},{value:"installed",label:"Installed"}],pe=S=>{b.push({query:{sortBy:S.value}})},ie=S=>{b.push({query:{filterBy:S}})},ye=S=>{b.push({query:{filterByType:S.value}})},fe=S=>{b.push({query:{filterBy:Q,filterByType:X,q:S}})};if(re)return console.error(re.message),null;const he=e.createElement("div",null,"Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",e.createElement("a",{className:"external-link",href:`${R.b.AddNewConnection}?cat=data-source`},"Connections"),".");return e.createElement(D.Y,{navModel:u,subTitle:he},e.createElement(D.Y.Contents,null,e.createElement(L.G,{wrap:!0},e.createElement(d.D,{label:"Search"},e.createElement(i,{value:le,onSearch:fe})),e.createElement(L.G,{wrap:!0,className:C.actionBar},e.createElement(d.D,{label:"Type"},e.createElement(P.l6,{"aria-label":"Plugin type filter",value:X,onChange:ye,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})),de?e.createElement(d.D,{label:"State"},e.createElement(B.z,{value:Q,onChange:ie,options:ce})):e.createElement(z.m,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top"},e.createElement("div",null,e.createElement(d.D,{label:"State"},e.createElement(B.z,{disabled:!0,value:Q,onChange:ie,options:ce})))),e.createElement(d.D,{label:"Sort"},e.createElement(P.l6,{"aria-label":"Sort Plugins List",width:24,value:oe,onChange:pe,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})),e.createElement(d.D,{label:"View"},e.createElement(B.z,{className:C.displayAs,value:p,onChange:Z,options:[{value:l.fy.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:l.fy.List,icon:"list-ul",description:"Display plugins in list"}]})))),e.createElement("div",{className:C.listWrap},e.createElement(ee,{plugins:me,displayMode:p,isLoading:ge}))))}const ue=s=>({actionBar:(0,o.css)({[s.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,o.css)({marginTop:s.spacing(2)}),displayAs:(0,o.css)({svg:{marginRight:0}})})},83391:(se,N,n)=>{n.d(N,{Tr:()=>te,A5:()=>ee,wr:()=>q,m5:()=>k,PW:()=>U,F9:()=>J,ob:()=>j,xX:()=>Y,XN:()=>F,pw:()=>w,Gp:()=>H,qG:()=>_,SQ:()=>V});var o=n(96540),e=n(31678),y=n(5129),c=n(20701),x=n(31326),d=n(1081),P=n(54479),B=n(14110),z=n(66253);const D=t=>t.plugins,G=(0,d.Mz)(D,({items:t})=>t),R=(0,d.Mz)(D,({settings:t})=>t.displayMode),{selectAll:T,selectById:L}=x.AI.getSelectors(G),$=t=>(0,d.Mz)(T,a=>{const i=t.keyword?(0,P.xb)(t.keyword.toLowerCase()):"",m=i!==""?(0,y.TD)(a,i):null;return i&&(0,B.rR)("plugins_search",{resultsCount:m?.length}),a.filter(v=>!(i&&m==null||i&&!m?.includes(v.id)||t.type&&v.type!==t.type||t.isInstalled!==void 0&&v.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&v.isEnterprise!==t.isEnterprise))}),M=t=>(0,d.Mz)(T,a=>{const i=[];for(const m of a)m.error&&(!t||m.type===t)&&i.push({pluginId:m.id,errorCode:m.error,pluginType:m.type});return i}),A=t=>(0,d.Mz)(D,({requests:a={}})=>a[t]),f=t=>(0,d.Mz)(A(t),a=>a?.status===z.IZ.Pending),l=t=>(0,d.Mz)(A(t),a=>a?.status===z.IZ.Rejected?a?.error:null),h=t=>(0,d.Mz)(A(t),a=>a===void 0),U=(t,a=y.by.nameAsc)=>{W();const i=(0,o.useMemo)(()=>$(t),[t]),m=(0,e.useSelector)(i),{isLoading:v,error:I}=E(),ne=(0,y.Xc)(m,a);return{isLoading:v,error:I,plugins:ne}},j=t=>(W(),O(t),(0,e.useSelector)(a=>L(a,t))),ae=t=>(K(),useSelector(a=>selectById(a,t))),J=t=>(W(),(0,e.useSelector)(M(t))),Y=()=>{const t=(0,e.useDispatch)();return(a,i,m)=>t((0,c.ai)({id:a,version:i,isUpdating:m}))},V=()=>{const t=(0,e.useDispatch)();return()=>t((0,c.nT)())},H=()=>{const t=(0,e.useDispatch)();return a=>t((0,c.JC)(a))},w=()=>(0,e.useSelector)(l(c.JJ.typePrefix))===null,E=()=>{const t=(0,e.useSelector)(f("plugins/fetchLocal")),a=(0,e.useSelector)(l("plugins/fetchLocal"));return{isLoading:t,error:a}},k=()=>{const t=(0,e.useSelector)(f(c.mj.typePrefix)),a=(0,e.useSelector)(f("plugins/fetchLocal")),i=(0,e.useSelector)(f("plugins/fetchRemote")),m=t||a||i,v=(0,e.useSelector)(l(c.mj.typePrefix));return{isLoading:m,error:v}},q=()=>{const t=(0,e.useSelector)(f(c.t5.typePrefix)),a=(0,e.useSelector)(l(c.t5.typePrefix));return{isLoading:t,error:a}},F=()=>{const t=(0,e.useSelector)(f(c.ai.typePrefix)),a=(0,e.useSelector)(l(c.ai.typePrefix));return{isInstalling:t,error:a}},_=()=>{const t=(0,e.useSelector)(f(c.JC.typePrefix)),a=(0,e.useSelector)(l(c.JC.typePrefix));return{isUninstalling:t,error:a}},W=()=>{const t=(0,e.useDispatch)(),a=(0,e.useSelector)(h(c.mj.typePrefix));(0,o.useEffect)(()=>{a&&t((0,c.mj)())},[])},K=()=>{const t=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&t(fetchAllLocal())},[])},O=t=>{const a=(0,e.useDispatch)(),i=(0,e.useSelector)(I=>L(I,t)),v=!(0,e.useSelector)(f(c.t5.typePrefix))&&i&&!i.details;(0,o.useEffect)(()=>{v&&a((0,c.t5)(t))},[i])},ee=()=>{const t=(0,e.useDispatch)();return a=>t((0,c.t5)(a))},te=()=>{const t=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(R),setDisplayMode:i=>t((0,x.qo)(i))}}}}]);

//# sourceMappingURL=PluginListPage.b5127747768407df91a7.js.map