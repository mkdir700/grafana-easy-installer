{"version":3,"file":"alert-rules-toolbar-button.c3471911eca32a32d3c4.js","mappings":"4PAOA,MAAMA,EAA0B,OAC9B,IAAM,8BACR,EAOO,SAASC,EAAiB,CAAE,aAAAC,EAAc,UAAAC,CAAU,EAAU,CACnE,OACE,gBAACC,EAAA,EAAM,CAAC,MAAM,cAAc,SAAU,gBAACC,EAAA,CAAe,aAAAH,CAAA,CAA4B,EAAI,QAASC,EAAW,KAAK,MAC7G,gBAAC,YAAe,SAAU,gBAACG,EAAA,EAAkB,CAAC,KAAK,qBAAsB,IACvE,gBAACN,EAAA,CAAwB,aAAAE,CAAA,CAA4B,CACvD,CACF,CAEJ,CAEA,SAASG,EAAe,CAAE,aAAAH,CAAa,EAA6B,CAClE,MAAMK,EAAe,IAAI,gBAAgB,CAAE,OAAQ,aAAaL,CAAY,EAAG,CAAC,EAEhF,OACE,gBAACM,EAAA,EAAK,CAAC,IAAK,GACV,gBAAC,cAAK,KAAE,wCAAyC,uCAAuC,CAAE,EAC1F,gBAACC,EAAA,EAAQ,CAAC,QAAM,KAAU,mBAAmBF,EAAa,SAAS,CAAC,EAAE,MACnE,KAAE,6CAA8C,0BAA0B,CAC7E,CACF,CAEJ,CCvBe,SAASG,EAAwB,CAAE,aAAAR,CAAa,EAAiC,CAC9F,KAAM,CAAE,UAAAS,EAAW,UAAAC,CAAU,KAAI,cAAWC,EAAA,EAAa,EAEnD,CAAE,KAAMC,EAAa,CAAC,CAAE,EAAIC,EAAA,GAAa,UAAU,yBAAyB,SAAS,CACzF,eAAgB,KAChB,aAAAb,CACF,CAAC,EAED,GAAIY,EAAW,SAAW,EACxB,OAAO,KAGT,MAAME,EAAe,IAAM,CACzBL,EAAUV,EAAkB,CAC1B,aAAAC,EACA,UAAWU,CACb,CAAC,CACH,EAEA,OACE,gBAACK,EAAA,GACC,WAAS,KAAE,gCAAiC,aAAa,EACzD,KAAK,OACL,QAASD,EACT,IAAI,kBACN,CAEJ,C","sources":["webpack://grafana/./public/app/features/alerting/unified/integration/AlertRulesDrawer.tsx","webpack://grafana/./public/app/features/alerting/unified/integration/AlertRulesToolbarButton.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Drawer, LoadingPlaceholder, Stack, TextLink } from '@grafana/ui';\n\nimport { t } from '../../../../core/internationalization';\nimport { createUrl } from '../utils/url';\n\nconst AlertRulesDrawerContent = React.lazy(\n  () => import(/* webpackChunkName: \"alert-rules-drawer-content\" */ './AlertRulesDrawerContent')\n);\n\ninterface Props {\n  dashboardUid: string;\n  onDismiss: () => void;\n}\n\nexport function AlertRulesDrawer({ dashboardUid, onDismiss }: Props) {\n  return (\n    <Drawer title=\"Alert rules\" subtitle={<DrawerSubtitle dashboardUid={dashboardUid} />} onClose={onDismiss} size=\"lg\">\n      <React.Suspense fallback={<LoadingPlaceholder text=\"Loading alert rules\" />}>\n        <AlertRulesDrawerContent dashboardUid={dashboardUid} />\n      </React.Suspense>\n    </Drawer>\n  );\n}\n\nfunction DrawerSubtitle({ dashboardUid }: { dashboardUid: string }) {\n  const searchParams = new URLSearchParams({ search: `dashboard:${dashboardUid}` });\n\n  return (\n    <Stack gap={2}>\n      <div>{t('dashboard.alert-rules-drawer.subtitle', 'Alert rules related to this dashboard')}</div>\n      <TextLink href={createUrl(`/alerting/list/?${searchParams.toString()}`)}>\n        {t('dashboard.alert-rules-drawer.redirect-link', 'List in Grafana Alerting')}\n      </TextLink>\n    </Stack>\n  );\n}\n","import React, { useContext } from 'react';\n\nimport { ModalsContext, ToolbarButton } from '@grafana/ui';\n\nimport { t } from '../../../../core/internationalization';\nimport { alertRuleApi } from '../api/alertRuleApi';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nimport { AlertRulesDrawer } from './AlertRulesDrawer';\n\ninterface AlertRulesToolbarButtonProps {\n  dashboardUid: string;\n}\n\nexport default function AlertRulesToolbarButton({ dashboardUid }: AlertRulesToolbarButtonProps) {\n  const { showModal, hideModal } = useContext(ModalsContext);\n\n  const { data: namespaces = [] } = alertRuleApi.endpoints.prometheusRuleNamespaces.useQuery({\n    ruleSourceName: GRAFANA_RULES_SOURCE_NAME,\n    dashboardUid: dashboardUid,\n  });\n\n  if (namespaces.length === 0) {\n    return null;\n  }\n\n  const onShowDrawer = () => {\n    showModal(AlertRulesDrawer, {\n      dashboardUid: dashboardUid,\n      onDismiss: hideModal,\n    });\n  };\n\n  return (\n    <ToolbarButton\n      tooltip={t('dashboard.toolbar.alert-rules', 'Alert rules')}\n      icon=\"bell\"\n      onClick={onShowDrawer}\n      key=\"button-alerting\"\n    />\n  );\n}\n"],"names":["AlertRulesDrawerContent","AlertRulesDrawer","dashboardUid","onDismiss","Drawer","DrawerSubtitle","LoadingPlaceholder","searchParams","Stack","TextLink","AlertRulesToolbarButton","showModal","hideModal","ModalsContext","namespaces","alertRuleApi","onShowDrawer","ToolbarButton"],"sourceRoot":""}