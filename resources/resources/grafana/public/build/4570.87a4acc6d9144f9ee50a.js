(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4570],{76287:(Q,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(96540),n=e(94841);function r(s){const{children:o,instanceSettings:m}=s,i=(0,t.useMemo)(()=>({instanceSettings:m,meta:m.meta}),[m]);return t.createElement(n.o.Provider,{value:i},o)}},94841:(Q,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(96540);const n=(0,t.createContext)(void 0)},13834:(Q,I,e)=>{"use strict";e.d(I,{a:()=>r});var t=e(96540),n=e(94841);function r(s){const{children:o,...m}=s;return t.createElement(n.o.Provider,{value:m},o)}},95187:(Q,I,e)=>{"use strict";e.d(I,{S:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},92470:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>r});var t=e(96540),n=e(94841);function r(){const s=(0,t.useContext)(n.o);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},33948:(Q,I,e)=>{"use strict";e.d(I,{I:()=>s,f:()=>r});var t=e(11261),n=e(14236);class r{constructor(l,d){return this.fields=[],this.length=0,s(l,d)}}function s(i,l){const d={fields:[],length:i.length};if(!i?.length)return d;if(l){if(!m(i))throw new Error("source is not an array of objects");for(const g of l)d.fields.push(o(g,i.map(u=>u&&u[g])));return d}if(i.find(g=>g)===null)return d;if(m(i)){const g=i.find(u=>u);d.fields=Object.keys(g||{}).map(u=>o(u,i.map(E=>E&&E[u])))}else d.fields.push(o(t.Bc,i));return d}function o(i,l){const d={name:i,config:{},values:l,type:t.PU.other};return d.type=(0,n.dF)(d)??t.PU.other,d}function m(i){const l=i.find(d=>d);return i.length>0&&typeof l=="object"}},33526:(Q,I,e)=>{"use strict";e.d(I,{x:()=>r});var t=e(36120),n=e(37471);class r extends n.k{constructor(o){super(void 0,m=>new t.$({...o,buffer:m}))}}},89667:(Q,I,e)=>{"use strict";e.d(I,{EL:()=>o,Nw:()=>l,or:()=>i,t:()=>s});var t=e(11261),n=e(14236);const r={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(d,c){for(const g in d){const u=r[g];for(const E of d[g])E<c.length&&(c[E]=u)}}function o(d,c){for(let g=0;g<c.length;g++)c[g]=d[Number(c[g])]}function m(d,c){for(const g of c)if(g!=null)return(0,n.by)(d,g);return t.PU.other}function i(d){const{schema:c,data:g}=d;if(!c||!c.fields)throw new Error("JSON needs a fields definition");const u=g?g.values.reduce((p,b)=>Math.max(p,b.length),0):0,E=c.fields.map((p,b)=>{let a=g?g.values[b]:[],h=a.length,P=p.type;h!==u&&(a.length=u,a.fill(void 0,h));let y=g?.entities?.[b];y&&s(y,a);let C=g?.enums?.[b];C&&(o(C,a),P=t.PU.string);const f=g?.nanos?.[b],D={...p,type:P??m(p.name,a),config:p.config??{},values:a,entities:y??{}};return f!=null&&(D.nanos=f),D});return{...c,fields:E,length:u}}function l(d){const c={values:[]},g=[];let u=!1;const E={refId:d.refId,meta:d.meta,name:d.name,fields:d.fields.map(p=>{const{values:b,nanos:a,state:h,display:P,...y}=p;return"entities"in y&&delete y.entities,c.values.push(b),a!=null?(g.push(a),u=!0):g.push(null),y})};return u&&(c.nanos=g),{schema:E,data:c}}},78368:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n});var t=e(18008);class n extends t.F{constructor(s){super(),this.data=s,this.index=0;const o={},m={};for(let i=0;i<s.fields.length;i++){const l=s.fields[i];if(!l.name)continue;m[l.name]=l;const d=()=>l.values.get(this.index);o.hasOwnProperty(l.name)||Object.defineProperty(o,l.name,{enumerable:!0,get:d}),o.hasOwnProperty(i.toString())||Object.defineProperty(o,i,{enumerable:!1,get:d})}this.obj=o,this.fields=m}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const o=this.dataFrame.fields[s];if(!(!o||!o.display))return o.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,o)=>({...this.get(o)}))}}},85404:(Q,I,e)=>{"use strict";e.d(I,{L:()=>r});var t=e(11261),n=e(14236);class r{constructor(o){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=o.fields.map((m,i)=>({...m,index:i}));for(let m=0;m<o.fields.length;m++){const i=o.fields[m];if(i.type===t.PU.other){const l=(0,n.dF)(i);l&&(i.type=l)}this.fieldByType[i.type]||(this.fieldByType[i.type]=[]),this.fieldByType[i.type].push({...i,index:m}),this.fieldByName[i.name]?console.warn("Duplicate field names in DataFrame: ",i.name):this.fieldByName[i.name]={...i,index:m}}}getFields(o){if(!o)return[...this.fields];const m=this.fieldByType[o];return m?[...m]:[]}hasFieldOfType(o){const m=this.fieldByType[o];return m&&m.length>0}getFirstFieldOfType(o,m=!1){return this.fieldByType[o]?.find(d=>m||!d.config.custom?.hidden)}hasFieldNamed(o){return!!this.fieldByName[o]}hasFieldWithNameAndType(o,m){return!!this.fieldByName[o]&&this.fieldByType[m].filter(i=>i.name===o).length>0}getFieldByName(o){return this.fieldByName[o]}getFieldsByLabel(o,m){return Object.values(this.fieldByName).filter(i=>i.labels&&i.labels[o]===m)}}},37471:(Q,I,e)=>{"use strict";e.d(I,{p:()=>m,k:()=>i});var t=e(2543),n=e(11261),r=e(14236);function s(l,d){return d.type||(d.name==="time"||d.name==="Time"?d.type=n.PU.time:d.type=(0,r.HW)(l)),d.type===n.PU.number?c=>parseFloat(c):d.type===n.PU.boolean?c=>!(c[0]==="F"||c[0]==="f"||c[0]==="0"):c=>c}var o=e(18008);const m=void 0;class i extends o.F{constructor(d,c){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=c||(g=>g??[]),d){const{name:g,refId:u,meta:E,fields:p}=d;if(g&&(this.name=g),u&&(this.refId=u),E&&(this.meta=E),p)for(const b of p)this.addField(b)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(d,c){return this.addField({name:c||"",type:(0,r.HW)(d)})}addField(d,c){let g;d.values&&(g=d.values);let u=d.type;!u&&(d.name==="time"||d.name==="Time")?u=n.PU.time:(!u&&g&&g.length&&(u=(0,r.HW)(g[0])),u||(u=n.PU.other));let E=d.name;E||(E=`Field ${this.fields.length+1}`);const p={...d,name:E,type:u,config:d.config||{},values:this.creator(g)};if(u===n.PU.other&&(u=(0,r.dF)(p),u&&(p.type=u)),this.fields.push(p),this.first=this.fields[0].values,c)for(;p.values.length<c;)p.values.push(m);else this.validate();return p}validate(){const d=this.fields.reduce((c,g)=>Math.max(c,g.values.length),0);for(const c of this.fields)for(;c.values.length!==d;)c.values.push(m)}setParser(d,c){return this.parsers||(this.parsers=new Map),this.parsers.set(d,c),c}parseValue(d,c){let g=this.parsers?.get(d);return g||(g=this.setParser(d,s(c,d))),g(c)}appendRow(d){for(let c=this.fields.length;c<d.length;c++)this.addField({name:`Field ${c+1}`,type:(0,r.HW)(d[c])});if(this.length<1)for(let c=0;c<this.fields.length;c++){const g=this.fields[c];(!g.type||g.type===n.PU.other)&&(g.type=(0,r.HW)(d[c]))}for(let c=0;c<this.fields.length;c++){const g=this.fields[c];let u=d[c];g.type!==n.PU.string&&(0,t.isString)(u)&&(u=this.parseValue(g,u)),g.values.push(u)}}push(...d){for(const c of d)this.add(c);return this.length}reverse(){for(const d of this.fields)d.values.reverse();return this}add(d){const c=d;for(const g of this.fields){let u=c[g.name];g.type!==n.PU.string&&(0,t.isString)(u)&&(u=this.parseValue(g,u)),u===void 0&&(u=m),g.values.push(u)}}set(d,c){if(d>this.length)throw new Error("Unable to set value beyond current length");const g=c||{};for(const u of this.fields)u.values[d]=g[u.name]}get(d){const c={};for(const g of this.fields)c[g.name]=g.values[d];return c}toJSON(){return(0,r.Kl)(this)}}},9631:(Q,I,e)=>{"use strict";e.d(I,{Kh:()=>i,Ls:()=>E,k9:()=>c,m8:()=>g,wC:()=>b});var t=e(11261),n=e(8249),r=e(73060),s=e(43659),o=e(14236),m=e(89667),i=(C=>(C.Append="append",C.Replace="replace",C))(i||{});const l="__name__";var d=(C=>(C[C.wide=0]="wide",C[C.labels=1]="labels",C))(d||{});class c{constructor(f){this.options=f,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(D,T,M)=>{const O=T?Object.assign({},{...this.options,...T}):this.options,S=(0,o.By)(this,D),v=P(S.fields.map(A=>A.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,O.maxLength):O.maxLength,this.timeFieldIndex,O.maxDelta);S.fields=S.fields.map(A=>({...A,values:A.values?.slice(v)}));const x=S.fields[0]?.values?.length??0;return{...S,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:x,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:O}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(T=>({...T,type:T.type??t.PU.other,config:T.config??{},values:T.values??[]})),h(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:T})=>{const M=D&&this.options.maxLength<D,O=T&&this.options.maxDelta<T,S=T&&this.options.maxDelta===1/0;return!!(M||O||S)},this.resize=({maxLength:D,maxDelta:T})=>{T&&(this.options.maxDelta===1/0?this.options.maxDelta=T:this.options.maxDelta=Math.max(T,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?a(this.fields.map(M=>M.values),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((M,O)=>{this.fields[O]&&(this.fields[O].values=M)}),h(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const T=this.fields?.[0]?.values.length;T!==void 0&&(this.length=T)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((T,M)=>D(T)?M:void 0).filter(T=>T!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const T=D.values;return T.slice(Math.max(T.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}static{this.deserialize=f=>{const D=new c(f.options);return D.initFromSerialized(f),D}}static{this.empty=f=>new c(g(f))}static{this.fromDataFrameJSON=(f,D)=>{const T=new c(g(D));return T.push(f),T}}get alwaysReplace(){return this.options.action==="replace"}push(f){const{schema:D,data:T}=f;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(v=>v.type===t.PU.time);const M=D.fields[0];this.timeFieldIndex===1&&M.type===t.PU.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const O=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:S}=this.options;if(y(this.schemaFields,O)){const v=O.length;this.fields.forEach((x,A)=>{const R=O[A%v];x.config=R.config??{},x.labels=R.labels}),S&&this.fields.forEach(x=>{const A={[l]:x.name,...x.labels};x.config.displayNameFromDS=(0,s.j)(S,A)})}else{this.packetInfo.schemaChanged=!0;const v=this.pushMode===0;this.fields=O.map(x=>{const A=x.config??{};if(S){const R={[l]:x.name,...x.labels};A.displayNameFromDS=(0,s.j)(S,R)}return{config:A,name:x.name,labels:x.labels,type:x.type??t.PU.other,values:v?this.fields.find(R=>R.name===x.name&&x.type===R.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=O}if(T&&T.values.length&&T.values[0].length){let{values:M,entities:O}=T;if(O&&O.forEach((v,x)=>{v&&(0,m.t)(v,M[x])}),this.pushMode===1){const v=u(M);for(const R of v.keys())this.labels.has(R)||(this.packetInfo.schemaChanged=!0,this.addLabel(R));let x=Array(this.schemaFields.length).fill([]),A=[];this.labels.forEach(R=>{A.push(v.get(R)??x)}),M=(0,r.fj)(A)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((v,x)=>{let A=`Field ${x}`,R=(0,o.HW)(v[0]);return x===0&&R===t.PU.number&&v[0]>1600016688632&&(R=t.PU.time,A="Time"),{name:A,type:R,config:{},values:[]}})}let S=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",S=this.fields.map(v=>v.values),a(S,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),S.forEach((v,x)=>{const A=this.fields[x],{state:R}=A;A.values=v,R&&(R.calcs=void 0)}),this.length=S[0].length}return{...this.packetInfo}}addLabel(f){const{displayNameFormat:D}=this.options,T=this.labels.size,M=p(f);if(T===0)this.fields.forEach((O,S)=>{if(S>0&&(O.labels=M,D)){const v={[l]:O.name,...M};O.config.displayNameFromDS=(0,s.j)(D,v)}});else for(let O=1;O<this.schemaFields.length;O++){let S=this.schemaFields[O];const v=S.config??{};if(D){const x={[l]:S.name,...M};v.displayNameFromDS=(0,s.j)(D,x)}this.fields.push({...S,config:v,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(f)}}function g(C){return{maxLength:C?.maxLength??1e3,maxDelta:C?.maxDelta??1/0,action:C?.action??"append",displayNameFormat:C?.displayNameFormat}}function u(C){let f=new Set(C[0]),D=new Map;f.forEach(T=>{let M=Array(C.length-1).fill(null).map(()=>[]);D.set(T,M)});for(let T=0;T<C[0].length;T++){let M=D.get(C[0][T]);for(let O=1;O<C.length;O++)M[O-1].push(C[O][T])}return D}function E(C,f,D,T){let M;D=D||0,T=T||f.length-1;let O=T<=2147483647;for(;T-D>1;)M=O?D+T>>1:Math.floor((D+T)/2),f[M]<C?D=M:T=M;return C-f[D]<=f[T]-C?D:T}function p(C){if(!C.length)return{};if(C.charAt(0)==="{")return(0,n.Xy)(C);const f={};return C.split(",").forEach(D=>{const[T,M]=D.trim().split("=");f[T]=M}),f}function b(C){const f=C.packetInfo;return f?.action?f:void 0}function a(C,f,D=1/0,T=0,M=1/0){for(let O=0;O<C.length;O++)for(let S=0;S<f[O].length;S++)C[O].push(f[O][S]);return h(C,D,T,M)}function h(C,f=1/0,D=0,T=1/0){const M=P(C,f,D,T);if(M)for(let O=0;O<C.length;O++)C[O].splice(0,M);return M}function P(C,f=1/0,D=0,T=1/0){if(!C[0]?.length)return 0;const M=C[0].length;let O=0;if(M>f&&(O=M-f),T!==1/0&&D>=0){const S=C[D],v=S[O],x=S[M-1];x-v>T&&(O=E(x-T,S,O))}return O}function y(C,f){if(C?.length!==f.length)return!1;for(let D=0;D<C.length;D++){const T=C[D],M=f[D];if(T.name!==M.name||T.type!==M.type)return!1}return!0}},61443:(Q,I,e)=>{"use strict";e.d(I,{Km:()=>o,P4:()=>r,WK:()=>s,g6:()=>n,r4:()=>t,xB:()=>m});const t=(i,l)=>({name:i,columns:l}),n=i=>i.columns,r=(i,l)=>i.columns[l],s=(i,l,d)=>i.columns[l].values[d],o=(i,l,d)=>i.columns.map(c=>c.values[d]),m=(i,l)=>i[l]},21423:(Q,I,e)=>{"use strict";e.d(I,{J3:()=>s,ab:()=>m,bW:()=>r});var t=e(2543),n=e.n(t);function r(i,l,d){if(i===l)return!0;if(i?.fields?.length!==l?.fields?.length||i.name!==l.name)return!1;for(let c=0;c<i.fields.length;c++){const g=i.fields[c],u=l.fields[c];if(g.type!==u.type||g.name!==u.name)return!1;if(d)continue;if(g.labels&&u.labels&&!m(g.labels,u.labels))return!1;const E=g.config,p=u.config;let b=Object.keys(E),a=Object.keys(p);if(b.length!==a.length)return!1;for(const h of b){if(!(h in p))return!1;if(h!=="interval"&&!(0,t.isEqual)(E[h],p[h]))return!1}}return!0}function s(i,l,d){if(i===l)return!0;if(i?.length!==l?.length)return!1;for(let c=0;c<i.length;c++)if(!d(i[c],l[c]))return!1;return!0}const o=(i,l)=>i===l;function m(i,l,d=o){if(i===l)return!0;const c=Object.keys(i),g=Object.keys(l);if(c.length!==g.length)return!1;for(let u of c)if(!d(i[u],l[u]))return!1;return!0}},48120:(Q,I,e)=>{"use strict";e.d(I,{Bt:()=>s.Bt,By:()=>s.By,EI:()=>s.EI,EL:()=>i.EL,ES:()=>s.ES,HW:()=>s.HW,Ij:()=>m.I,J3:()=>l.J3,KR:()=>s.KR,Kh:()=>c.Kh,Kl:()=>s.Kl,Km:()=>o.Km,LI:()=>s.LI,Lc:()=>n.L,Ls:()=>c.Ls,N$:()=>s.N$,Nw:()=>i.Nw,P4:()=>o.P4,Rh:()=>t.R,S1:()=>d.S1,Vc:()=>s.Vc,WK:()=>o.WK,XQ:()=>s.XQ,Yn:()=>s.Yn,aH:()=>d.aH,ab:()=>l.ab,bW:()=>l.bW,by:()=>s.by,ci:()=>s.ci,dF:()=>s.dF,fG:()=>m.f,g6:()=>o.g6,hF:()=>d.hF,jq:()=>d.jq,k2:()=>r.k,k9:()=>c.k9,oE:()=>s.oE,or:()=>i.or,pH:()=>s.pH,pk:()=>r.p,q7:()=>s.q7,r4:()=>o.r4,t:()=>i.t,t9:()=>d.t9,tP:()=>d.tP,uY:()=>d.uY,w3:()=>s.w3,xB:()=>o.xB});var t=e(78368),n=e(85404),r=e(37471),s=e(14236),o=e(61443),m=e(33948),i=e(89667),l=e(21423),d=e(19845),c=e(9631)},14236:(Q,I,e)=>{"use strict";e.d(I,{Bt:()=>U,By:()=>A,EI:()=>K,ES:()=>O,HW:()=>h,KR:()=>R,Kl:()=>x,LI:()=>D,N$:()=>w,Vc:()=>T,XQ:()=>y,Yn:()=>v,by:()=>b,ci:()=>f,dF:()=>P,oE:()=>a,pH:()=>C,q7:()=>S,w3:()=>M});var t=e(2543),n=e.n(t),r=e(47232),s=e(48241),o=e(28240),m=e(11261),i=e(39070),l=e(33948),d=e(89667);function c(N){const L=N.columns.map(V=>{const{text:F,type:z,...Y}=V,H=[];return{name:F?.length?F:V,config:Y||{},values:H,type:z&&Object.values(m.PU).includes(z)?z:m.PU.other}});if(!(0,t.isArray)(N.rows))throw new Error(`Expected table rows to be array, got ${typeof N.rows}.`);for(const V of N.rows)for(let F=0;F<L.length;F++)L[F].values.push(V[F]);for(const V of L)if(V.type===m.PU.other){const F=P(V);F&&(V.type=F)}return{fields:L,refId:N.refId,meta:N.meta,name:N.name,length:N.rows.length}}function g(N){const L=[],V=[],F=N.datapoints||N.points;for(const Y of F)V.push(Y[0]),L.push(Y[1]);const z=[{name:m.LE,type:m.PU.time,config:{},values:L},{name:m.Bc,type:m.PU.number,config:{unit:N.unit},values:V,labels:N.tags}];return N.title&&(z[1].config.displayNameFromDS=N.title),{name:N.target||N.name,refId:N.refId,meta:N.meta,fields:z,length:V.length}}function u(N){const L=[],V=[];for(let F=0;F<N.data.length;F++){const z=N.data[F];L.push(z[1]),V.push(z[0])}return{name:N.label,fields:[{name:N.label||m.Bc,type:m.PU.number,config:{},values:L},{name:m.LE,type:m.PU.time,config:{unit:"dateTimeAsIso"},values:V}],length:L.length}}function E(N){const L=[{name:N.target,type:m.PU.other,labels:N.tags,config:{unit:N.unit,filterable:N.filterable},values:[]}];for(const V of N.datapoints)L[0].values.push(V);return{name:N.target,refId:N.target,meta:{json:!0},fields:L,length:N.datapoints.length}}const p=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function b(N,L){return N&&(N=N.toLowerCase(),N==="date"||N==="time")?m.PU.time:h(L)}function a(N){return N instanceof Date||(0,r.Ar)(N)?m.PU.time:(0,t.isNumber)(N)?m.PU.number:(0,t.isString)(N)?m.PU.string:(0,t.isBoolean)(N)?m.PU.boolean:m.PU.other}function h(N){return N instanceof Date||(0,r.Ar)(N)?m.PU.time:(0,t.isNumber)(N)?m.PU.number:(0,t.isString)(N)?p.test(N)?m.PU.number:N==="true"||N==="TRUE"||N==="True"||N==="false"||N==="FALSE"||N==="False"?m.PU.boolean:m.PU.string:(0,t.isBoolean)(N)?m.PU.boolean:m.PU.other}function P(N){if(N.name){const L=N.name.toLowerCase();if(L==="date"||L==="time")return m.PU.time}for(let L=0;L<N.values.length;L++){const V=N.values[L];if(V!=null)return h(V)}}const y=(N,L=!1)=>{for(const V of N.fields)if(!V.type||V.type===m.PU.other||L)return{...N,fields:N.fields.map(F=>F.type&&F.type!==m.PU.other&&!L?F:{...F,type:P(F)||m.PU.other})};return N},C=N=>!!(N&&N.hasOwnProperty("columns")),f=N=>!!(N&&N.hasOwnProperty("fields")),D=N=>!!(f(N)&&N.hasOwnProperty("value"));function T(N){if("fields"in N)return"length"in N&&N.fields[0]?.values?.get?N:K(N);if(N.hasOwnProperty("type")&&N.type==="docs")return E(N);if(N.hasOwnProperty("datapoints")||N.hasOwnProperty("points"))return g(N);if(N.hasOwnProperty("data"))return N.hasOwnProperty("schema")?(0,d.or)(N):u(N);if(N.hasOwnProperty("columns"))return c(N);if(Array.isArray(N))return(0,l.I)(N);throw console.warn("Can not convert",N),new Error("Unsupported data format")}const M=N=>{const{fields:L}=N,V=N.length,F=[];if(L.length===2){const{timeField:z,timeIndex:Y}=R(N);if(z){const k=L[Y===0?1:0],ee=L[Y];for(let ie=0;ie<V;ie++)F.push([k.values[ie],ee.values[ie]]);return{alias:N.name,target:(0,o.Ct)(k,N),datapoints:F,unit:L[0].config?L[0].config.unit:void 0,refId:N.refId,meta:N.meta}}}for(let z=0;z<V;z++){const Y=[];for(let H=0;H<L.length;H++)Y.push(L[H].values[z]);F.push(Y)}return N.meta&&N.meta.json?{alias:L[0].name||N.name,target:L[0].name||N.name,datapoints:L[0].values,filterable:L[0].config?L[0].config.filterable:void 0,type:"docs"}:{columns:L.map(z=>{const{name:Y,config:H}=z;if(H){const{...k}=H;return k.text=Y,k}return{text:Y}}),type:"table",refId:N.refId,meta:N.meta,rows:F}};function O(N,L,V=!1){const F=N.fields[L];if(!F)return N;const z=[];for(let H=0;H<N.length;H++)z.push(H);const Y=(0,s.i)(F,V);return z.sort(Y),{...N,fields:N.fields.map(H=>{const k={...H,values:H.values.map((ie,fe)=>H.values[z[fe]])},{nanos:ee}=H;return ee!==void 0&&(k.nanos=ee.map((ie,fe)=>ee[z[fe]])),k})}}function S(N){return{...N,fields:N.fields.map(L=>{const V=[...L.values];V.reverse();const F={...L,values:V},{nanos:z}=L;if(z!==void 0){const Y=[...z];Y.reverse(),F.nanos=Y}return F})}}function v(N,L){const V=[];for(const F of N.fields)V.push(F.values[L]);return V}function x(N){return A(N)}function A(N,L){return{fields:(L?N.fields.filter(L):N.fields).map(z=>{let Y=z.values;return{name:z.name,type:z.type,config:z.config,values:Y,labels:z.labels}}),refId:N.refId,meta:N.meta,name:N.name}}const R=N=>{for(let L=0;L<N.fields.length;L++)if(N.fields[L].type===m.PU.time)return{timeField:N.fields[L],timeIndex:L};return{}};function B(N){const L=y(T(N));if(L.fields&&L.fields.length)for(const V of L.fields)V.state=null;return L}function U(N){return!N||!(0,t.isArray)(N)?[]:N.map(L=>B(L))}function w(N,L){const{series:V,annotations:F}=N;if(N.state===i.Gu.Loading&&V.length===0)return L||(L=N),{...L,state:i.Gu.Loading,request:N.request};const z=performance.now(),Y=V.map(ee=>B(ee)),H=U(F),k=performance.now();return{...N,series:Y,annotations:H,timings:{dataProcessingTime:k-z}}}function K(N){let L=0;const V=N.fields.map((F,z)=>{const{state:Y,...H}=F;return H.name||(H.name=`Field ${z+1}`),H.config||(H.config={}),H.values?H.values.length>L&&(L=H.values.length):H.values=new Array(L),H.type||(H.type=P(H)??m.PU.other),H});return{...N,fields:V,length:L}}},19845:(Q,I,e)=>{"use strict";e.d(I,{S1:()=>l,aH:()=>s,hF:()=>m,jq:()=>o,t9:()=>d,tP:()=>i,uY:()=>c});var t=e(11261),n=e(14236);const r=100;function s(g){if(g.fields.length<2)return!1;const u=g.fields.find(p=>p.type===t.PU.number);let E=!1;for(const p of g.fields)if(m(p)){E=!0;break}return E&&u!==void 0}function o(g){return!g.find(u=>!s(u))}function m(g){if(g.type!==t.PU.time)return!1;let u=null,E=g.values.length>r?r:g.values.length;for(let p=0;p<E;p++){const b=g.values[p];if(u===null||b!==null&&b>u)u=b;else return!1}return!0}function i(g){for(let u=0;u<g.length;u++){const E=(0,n.KR)(g[u]);if(E.timeField!==void 0&&E.timeIndex!==void 0)return!0}return!1}function l(g){return g.fields.some(u=>u.type===t.PU.time)}function d(g,u){if(g.meta?.uniqueRowIdFields!==void 0)return g.meta.uniqueRowIdFields.map(E=>g.fields[E].values[u]).join("-")}function c(g,u){if(u instanceof Array)for(let E=0;E<u.length;E++)g.fields[E].values.push(u[E]);else for(const E of g.fields)E.values.push(u[E.name]);try{g.length++}catch{}}},1933:(Q,I,e)=>{"use strict";e.d(I,{G:()=>o,O:()=>m});var t=e(2543),n=e.n(t),r=e(43127);let s=()=>r.lE;const o=i=>{s=i??s},m=i=>i?.timeZone&&!(0,t.isEmpty)(i.timeZone)?i.timeZone:s()??r.lE},85858:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{isMathString:()=>o,isValid:()=>i,parse:()=>m,parseDateMath:()=>l,roundToFiscal:()=>d});var t=e(2543),n=e.n(t),r=e(47232);const s=["y","M","w","d","h","m","s","Q"];function o(c){return c?!!(typeof c=="string"&&(c.substring(0,3)==="now"||c.includes("||"))):!1}function m(c,g,u,E){if(c){if(typeof c!="string")return(0,r.Ar)(c)?c:(0,t.isDate)(c)?(0,r.KQ)(c):void 0;{let p,b="",a,h;return c.substring(0,3)==="now"?(p=(0,r.oZ)(u),b=c.substring(3)):(a=c.indexOf("||"),a===-1?(h=c,b=""):(h=c.substring(0,a),b=c.substring(a+2)),p=(0,r.KQ)(h,r.mt)),b.length?l(b,p,g,E):p}}}function i(c){const g=m(c);return g&&(0,r.Ar)(g)?g.isValid():!1}function l(c,g,u,E=0){const p=c.replace(/\s/g,""),b=(0,r.KQ)(g);let a=0;const h=p.length;for(;a<h;){const P=p.charAt(a++);let y,C,f,D=!1;if(P==="/")y=0;else if(P==="+")y=1;else if(P==="-")y=2;else return;if(isNaN(parseInt(p.charAt(a),10)))C=1;else if(p.length===2)C=parseInt(p.charAt(a),10);else{const M=a;for(;!isNaN(parseInt(p.charAt(a),10));)if(a++,a>10)return;C=parseInt(p.substring(M,a),10)}if(y===0&&C!==1)return;f=p.charAt(a++),f==="f"&&(f=p.charAt(a++),D=!0);const T=f;if((0,t.includes)(s,T))y===0?D?d(E,b,T,u):u?b.endOf(T):b.startOf(T):y===1?b.add(C,T):y===2&&b.subtract(C,T);else return}return b}function d(c,g,u,E){switch(u){case"y":return E?d(c,g,u,!1).add(11,"M").endOf("M"):g.subtract((g.month()-c+12)%12,"M").startOf("M"),g;case"Q":return E?d(c,g,u,!1).add(2,"M").endOf("M"):g.subtract((g.month()-c+12)%3,"M").startOf("M"),g;default:return}}},70416:(Q,I,e)=>{"use strict";e.d(I,{E9:()=>m,Ri:()=>i,V3:()=>u,WT:()=>l,dU:()=>o,di:()=>c,pp:()=>g,vd:()=>d});var t=e(89369),n=e(68284),r=e(25579);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function o(p,b=!0){if((0,t.d)(p.start,p.end))return"";const a=(0,n.F)(p);return Object.entries(a).reduce((h,[P,y])=>y&&y!==0&&!(P==="seconds"&&!b&&h)?h+`${h!==""?" ":""}${y}${s[P][0]}`:h,"")}function m(p){return p.split(" ").reduce((b,a)=>{const h=a.match(/(\d+)(.+)/),P=h?.[1],y=h?.[2];if(!(P&&y))return b;const C=Object.entries(s).find(([D,T])=>T?.includes(h[2])),f=parseInt(P,10);return C?{...b,[C[0]]:f}:b},{})}function i(p,b){return(0,r.W)(p,b)}function l(p){const b=new Date;return i(b,p).getTime()-b.getTime()}function d(p){return!isNaN(Date.parse(p))}function c(p){for(const b of p.trim().split(" ")){const a=b.match(/(\d+)(.+)/);if(a===null||a.length!==3||!Object.entries(s).find(([P,y])=>y?.includes(a[2]))?.[0])return!1}return!0}function g(p){return E(p,["h","m","s","ms","us","\xB5s","ns"])}function u(p){return E(p,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function E(p,b){for(const a of p.trim().split(" ")){const h=a.match(/([0-9]*[.]?[0-9]+)(.+)/);if(h===null||h.length!==3||!b.includes(h[2]))return!1}return!0}},42994:(Q,I,e)=>{"use strict";e.d(I,{JE:()=>r,Od:()=>s,WC:()=>o});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class r{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(l){this.fullDate=l.fullDate,this.interval=l.interval,l.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(l){return`time:${l?this.fullDateMS:this.fullDate}`}}function s(i,l,d){if(m())return d??t;!l&&navigator&&(l=[...navigator.languages]);const c=new Intl.DateTimeFormat(l||void 0,i),g=c.formatToParts(new Date),E={year:"YYYY",month:"MM",day:"DD",hour:c.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return g.map(p=>E[p.type]||p.value).join("")}const o=new r,m=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},72724:(Q,I,e)=>{"use strict";e.d(I,{LE:()=>o,M7:()=>m,_Q:()=>l,fq:()=>i,jw:()=>d});var t=e(84743),n=e.n(t),r=e(1933),s=e(42994);const o=(u,E)=>g(u,(0,r.O)(E)).format(c(E)),m=(u,E)=>g(u,(0,r.O)(E)).format(),i=(u,E)=>g(u,(0,r.O)(E)).fromNow(),l=(u,E)=>g(u,(0,r.O)(E)).format(`${s.WC.fullDate} z`),d=(u,E)=>g(u,(0,r.O)(E)).format("z"),c=u=>u?.defaultWithMS?u?.format??s.WC.fullDateMS:u?.format??s.WC.fullDate,g=(u,E)=>{const p=u,b=n().tz.zone(E);if(b&&b.name)return n().utc(p).tz(b.name);switch(E){case"utc":return n().utc(p);default:return n().utc(p).local()}}},38698:(Q,I,e)=>{"use strict";e.d(I,{$D:()=>r.$D,AN:()=>r.AN,Ah:()=>r.Ah,Ar:()=>r.Ar,E9:()=>l.E9,GZ:()=>d.G,HD:()=>s.HD,IM:()=>l.pp,Ii:()=>n,JE:()=>o.JE,JK:()=>r.JK,KQ:()=>r.KQ,LE:()=>m.LE,M7:()=>m.M7,O:()=>d.O,Od:()=>o.Od,P3:()=>s.P3,QZ:()=>s.QZ,Ri:()=>l.Ri,U3:()=>s.U3,V3:()=>l.V3,WC:()=>o.WC,WT:()=>l.WT,XN:()=>r.XN,_Q:()=>m._Q,bQ:()=>i.b,dU:()=>l.dU,di:()=>l.di,fq:()=>m.fq,g$:()=>s.g$,jw:()=>m.jw,le:()=>s.le,mt:()=>r.mt,ns:()=>t,oZ:()=>r.oZ,pp:()=>r.pp,u8:()=>r.u8,vd:()=>l.vd,xQ:()=>r.xQ,xS:()=>r.xS,yT:()=>r.yT});var t=e(85858),n=e(65879),r=e(47232),s=e(91410),o=e(42994),m=e(72724),i=e(53531),l=e(70416),d=e(1933)},47232:(Q,I,e)=>{"use strict";e.d(I,{$D:()=>a,AN:()=>u,Ah:()=>c,Ar:()=>l,JK:()=>o,KQ:()=>g,XN:()=>m,mt:()=>r,oZ:()=>E,pp:()=>b,u8:()=>i,xQ:()=>p,xS:()=>s,yT:()=>d});var t=e(95093),n=e.n(t);const r=n().ISO_8601,s=h=>{n().locale(h)},o=()=>n().locale(),m=()=>n().localeData(),i=h=>h===null||typeof h=="string"||typeof h=="number"||h instanceof Date||Array.isArray(h)&&h.every(P=>typeof P=="string"||typeof P=="number")||l(h),l=h=>n().isMoment(h),d=(h,P)=>n().utc(h,P),c=(h,P)=>n().duration(h,P),g=(h,P)=>n()(h,P),u=h=>g(h),E=(h,P,y)=>{if(h&&h!=="browser"){let C;if(typeof P=="string"&&y?C=n().tz(P,y,h):C=n().tz(P,h),l(C))return C}return g(P,y)},p=h=>n().weekdays().findIndex(P=>P.toLowerCase()===h.toLowerCase()),b=h=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(P=>P.toLowerCase()===h.toLowerCase()),a=h=>{const P="-weekStart",y=o().replace(P,""),C=h?b(h):-1;C!==-1?n().locale(y+P,{parentLocale:y,week:{dow:C}}):s(y)}},53531:(Q,I,e)=>{"use strict";e.d(I,{b:()=>d});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r),o=e(1933),m=e(85858),i=e(42994),l=e(47232);const d=(u,E)=>(0,l.Ar)(u)?u:typeof u=="string"?c(u,E):g(u,E),c=(u,E)=>{if(u.indexOf("now")!==-1)return(0,m.isValid)(u)&&(0,m.parse)(u,E?.roundUp,E?.timeZone,E?.fiscalYearStartMonth)||s()();const p=(0,o.O)(E),b=s().tz.zone(p),a=E?.format??i.WC.fullDate;if(b&&b.name)return s().tz(u,a,b.name);switch((0,t.lowerCase)(p)){case"utc":return s().utc(u,a);default:return s()(u,a)}},g=(u,E)=>{const p=u,b=(0,o.O)(E),a=s().tz.zone(b);if(a&&a.name)return s().tz(p,a.name);switch((0,t.lowerCase)(b)){case"utc":return s().utc(p);default:return s()(p)}}},65879:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{calculateInterval:()=>f,convertRawToRange:()=>b,describeInterval:()=>M,describeTextRange:()=>g,describeTimeRange:()=>u,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>S,intervalToSeconds:()=>O,isFiscal:()=>h,isRelativeTime:()=>a,isRelativeTimeRange:()=>P,isValidTimeSpan:()=>E,msRangeToTimeString:()=>C,relativeToTimeRange:()=>A,roundInterval:()=>v,secondsToHms:()=>y,timeRangeToRelative:()=>x});var t=e(2543),n=e.n(t),r=e(85858),s=e(72724),o=e(47232),m=e(53531);const i={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},l=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],d=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],c={};(0,t.each)(l,R=>{c[R.from+" to "+R.to]=R}),(0,t.each)(d,R=>{c[R.from+" to "+R.to]=R});function g(R){const B=R.indexOf("+")!==0;R.indexOf("now")===-1&&(R=(B?"now-":"now")+R);let U=c[R+" to now"];if(U)return U;B?U={from:R,to:"now",display:""}:U={from:"now",to:R,display:""};const w=/^now([-+])(\d+)(\w)/.exec(R);if(w){const K=w[3],N=parseInt(w[2],10),L=i[K];L&&(U.display=B?"Last ":"Next ",U.display+=N+" "+L.display,U.section=L.section,N>1&&(U.display+="s"))}else U.display=U.from+" to "+U.to,U.invalid=!0;return U}function u(R,B){const U=c[R.from.toString()+" to "+R.to.toString()];if(U)return U.display;const w={timeZone:B};if((0,o.Ar)(R.from)&&(0,o.Ar)(R.to))return(0,s.LE)(R.from,w)+" to "+(0,s.LE)(R.to,w);if((0,o.Ar)(R.from)){const K=r.parse(R.to,!0,"utc");return K?(0,s.LE)(R.from,w)+" to "+(0,s.fq)(K,w):""}if((0,o.Ar)(R.to)){const K=r.parse(R.from,!1,"utc");return K?(0,s.fq)(K,w)+" to "+(0,s.LE)(R.to,w):""}return R.to.toString()==="now"?g(R.from).display:R.from.toString()+" to "+R.to.toString()}const E=R=>R.indexOf("$")===0||R.indexOf("+$")===0?!0:g(R).invalid!==!0,p=(R,B)=>{if((0,o.Ar)(R.from))return(0,s.jw)(R.from,{timeZone:B});const U=r.parse(R.from,!0);return U?(0,s.jw)(U,{timeZone:B}):""},b=(R,B,U,w)=>{const K=(0,m.b)(R.from,{roundUp:!1,timeZone:B,fiscalYearStartMonth:U,format:w}),N=(0,m.b)(R.to,{roundUp:!0,timeZone:B,fiscalYearStartMonth:U,format:w});return r.isMathString(R.from)||r.isMathString(R.to)?{from:K,to:N,raw:R}:{from:K,to:N,raw:{from:K,to:N}}};function a(R){return typeof R=="string"?R.indexOf("now")>=0:!1}function h(R){return typeof R.raw.from=="string"&&R.raw.from.indexOf("f")>0?!0:typeof R.raw.to=="string"&&R.raw.to.indexOf("f")>0}function P(R){return a(R.from)||a(R.to)}function y(R){const B=Math.floor(R/31536e3);if(B)return B+"y";const U=Math.floor(R%31536e3/86400);if(U)return U+"d";const w=Math.floor(R%31536e3%86400/3600);if(w)return w+"h";const K=Math.floor(R%31536e3%86400%3600/60);if(K)return K+"m";const N=Math.floor(R%31536e3%86400%3600%60);if(N)return N+"s";const L=Math.floor(R*1e3);return L?L+"ms":"less than a millisecond"}function C(R){const B=Number((R/1e3).toFixed()),U=Math.floor(B/60/60),w=Math.floor(B/60)-U*60,K=Number((B%60).toFixed());let N=U?U+"h":"",L=w?w+"min":"",V=K?K+"sec":"";return N&&L?N=N+" ":N=N,(L||N)&&V?L=L+" ":L=L,N+L+V||"less than 1sec"}function f(R,B,U){let w=1;U&&(w=S(U));let K=v((R.to.valueOf()-R.from.valueOf())/B);return w>K&&(K=w),{intervalMs:K,interval:y(K/1e3)}}const D=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,T={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(R){if(Number(R))return{sec:T.s,type:"s",count:parseInt(R,10)};const B=R.match(D);if(!B||!(0,t.has)(T,B[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(T).join(", ")}"`);return{sec:T[B[2]],type:B[2],count:parseInt(B[1],10)}}function O(R){const B=M(R);return B.sec*B.count}function S(R){const B=M(R);return B.sec*1e3*B.count}function v(R){switch(!0){case R<10:return 1;case R<15:return 10;case R<35:return 20;case R<75:return 50;case R<150:return 100;case R<350:return 200;case R<750:return 500;case R<1500:return 1e3;case R<3500:return 2e3;case R<7500:return 5e3;case R<12500:return 1e4;case R<17500:return 15e3;case R<25e3:return 2e4;case R<45e3:return 3e4;case R<9e4:return 6e4;case R<21e4:return 12e4;case R<45e4:return 3e5;case R<75e4:return 6e5;case R<105e4:return 9e5;case R<15e5:return 12e5;case R<27e5:return 18e5;case R<54e5:return 36e5;case R<9e6:return 72e5;case R<162e5:return 108e5;case R<324e5:return 216e5;case R<864e5:return 432e5;case R<6048e5:return 864e5;case R<18144e5:return 6048e5;case R<36288e5:return 2592e6;default:return 31536e6}}function x(R,B=(0,o.KQ)()){const U=B.unix()-R.from.unix(),w=B.unix()-R.to.unix();return{from:U,to:w}}function A(R,B=(0,o.KQ)()){const U=(0,o.KQ)(B).subtract(R.from,"s"),w=R.to===0?(0,o.KQ)(B):(0,o.KQ)(B).subtract(R.to,"s");return{from:U,to:w,raw:{from:U,to:w}}}},91410:(Q,I,e)=>{"use strict";e.d(I,{HD:()=>l,P3:()=>c,QZ:()=>d,U3:()=>g,g$:()=>m,le:()=>i});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r),o=e(1933),m=(h=>(h.default="",h.localBrowserTime="browser",h.utc="utc",h))(m||{});const i=h=>{switch((0,o.O)({timeZone:h})){case"browser":return"Local browser time";case"utc":return"UTC";default:return h}},l=h=>s().tz.zone(h),d=(h,P)=>{const y=u(h,P);return y||p(h,P)},c=(0,t.memoize)((h=!1)=>{const P=[];return h===!0?P.push("","browser","utc"):h&&P.push(...h),s().tz.names().reduce((y,C)=>{const f=a[C];return!Array.isArray(f)||f.length===0||y.push(C),y},P)}),g=(0,t.memoize)((h=!1)=>{const y=c(h).reduce((C,f)=>{const D=f.indexOf("/");if(D===-1){const M="";return C[M]=C[M]??[],C[M].push(f),C}const T=f.slice(0,D);return C[T]=C[T]??[],C[T].push(f),C},{});return Object.keys(y).map(C=>({name:C,zones:y[C]}))}),u=(h,P)=>{switch(h){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:h,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const y=(0,o.O)(),f=y==="browser"||y==="utc"?u(y,P):p(y,P);return{countries:a[y]??[],abbreviation:"",offsetInMins:0,...f,ianaName:f?.ianaName??"",name:"Default",zone:h}}case"browser":{const y=s().tz.guess(!0),C=p(y,P);return{countries:a[y]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C?.ianaName??"",zone:h}}default:return}},E=h=>/^(\+|\-).+/.test(h)?"":h,p=(h,P)=>{const y=s().tz.zone(h);if(y)return{name:h,ianaName:y.name,zone:h,countries:a[h]??[],abbreviation:E(y.abbr(P)),offsetInMins:y.utcOffset(P)}},b={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},a=s().tz.countries().reduce((h,P)=>s().tz.zonesForCountry(P).reduce((C,f)=>{C[f]||(C[f]=[]);const D=b[P];return D&&C[f].push({code:P,name:D}),C},h),{})},18226:(Q,I,e)=>{"use strict";e.d(I,{o:()=>s});var t=e(74486),n=e(88483),r=e(16126);class s{constructor(){this.subscribers=new Map,this.emitter=new t.A}publish(i){this.emitter.emit(i.type,i)}subscribe(i,l){return this.getStream(i).subscribe({next:l})}getStream(i){return new n.c(l=>{const d=c=>{l.next(c)};return this.emitter.on(i.type,d),this.subscribers.set(d,l),()=>{this.emitter.off(i.type,d),this.subscribers.delete(d)}})}newScopedBus(i,l){return new o([i],this,l)}emit(i,l){typeof i=="string"?this.emitter.emit(i,{type:i,payload:l}):this.emitter.emit(i.name,{type:i.name,payload:l})}on(i,l,d){if(l.wrapper=c=>{l(c.payload)},typeof i=="string"?this.emitter.on(i,l.wrapper):this.emitter.on(i.name,l.wrapper),d){const c=d.$on("$destroy",()=>{this.off(i,l),c()})}}off(i,l){if(typeof i=="string"){this.emitter.off(i,l.wrapper);return}this.emitter.off(i.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[i,l]of this.subscribers)l.complete(),this.subscribers.delete(i)}}class o{constructor(i,l,d){this.path=i,this.eventBus=l,this.filterConfig=d??{onlyLocal:!1}}publish(i){i.origin||(i.origin=this),this.eventBus.publish(i)}filter(i){return this.filterConfig.onlyLocal?i.origin===this:!0}getStream(i){return this.eventBus.getStream(i).pipe((0,r.p)(this.filter.bind(this)))}subscribe(i,l){return this.getStream(i).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(i,l){return new o([...this.path,i],this,l)}}},69129:(Q,I,e)=>{"use strict";e.d(I,{LL:()=>d,LO:()=>s,NI:()=>l,We:()=>o,b_:()=>n,gc:()=>m,ql:()=>r,wE:()=>i});var t=e(65463);class n extends t.x{static{this.type="data-hover"}}class r extends t.a{static{this.type="data-hover-clear"}}class s extends t.x{static{this.type="data-select"}}class o extends t.x{static{this.type="annotation-event"}}class m extends t.x{static{this.type="dashboard-loaded"}}class i extends t.a{static{this.type="datasource-updated-successfully"}}class l extends t.a{static{this.type="datasource-test-succeeded"}}class d extends t.a{static{this.type="datasource-test-failed"}}},89550:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n});const t=new Set;function n(r){if(t.has(r))throw new Error(`There is already an event defined with type '${r}'`);return t.add(r),{name:r}}},56302:(Q,I,e)=>{"use strict";e.d(I,{LL:()=>s.LL,LO:()=>s.LO,NI:()=>s.NI,Rb:()=>t.R,We:()=>s.We,aV:()=>n.a,b_:()=>s.b_,gc:()=>s.gc,or:()=>r.o,ql:()=>s.ql,wE:()=>s.wE,x$:()=>n.x});var t=e(89550),n=e(65463),r=e(18226),s=e(69129)},65463:(Q,I,e)=>{"use strict";e.d(I,{a:()=>t,x:()=>n});class t{constructor(){this.type=this.__proto__.constructor.type}setTags(s){return this.tags=new Set(s),this}}class n extends t{constructor(s){super(),this.payload=s}}},66670:(Q,I,e)=>{"use strict";e.d(I,{K:()=>n});var t=e(83077);class n extends t.O{}},57875:(Q,I,e)=>{"use strict";e.d(I,{H:()=>p,J:()=>u});var t=e(2543),n=e.n(t),r=e(14236),s=e(53531),o=e(47232),m=e(11261),i=e(28802),l=e(62398),d=e(83195),c=e(58563);const g={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function u(a){if(!a||(0,t.isEmpty)(a)||!a.field)return E;const h=a.field,P=h.config??{},{palette:y}=a.theme.visualization;let C=P.unit,f=C&&(g[C]||C.startsWith("time:")),D=!1;if(h.type===m.PU.time&&!f){if(C="dateTimeAsSystem",f=!0,h.values&&h.values.length>1){let R=h.values[0],B=h.values[h.values.length-1];typeof R=="string"?(R=(0,s.b)(R).unix(),B=(0,s.b)(B).unix()):(R/=1e3,B/=1e3),D=Math.abs(B-R)<60}}else h.type===m.PU.boolean?(0,d.j9)(C)||(C="bool"):!C&&h.type===m.PU.string&&(C="string");const T=C?.startsWith("currency"),M=(0,d.j9)(C),O=h.type===m.PU.number,v=!f&&!T&&!M&&!(C==="locale")&&O&&P.decimals==null,x=(0,d.j_)(C||"none"),A=(0,c.jc)(h,a.theme);return(R,B)=>{const{mappings:U}=P,w=C==="string";f&&typeof R=="string"&&(R=(0,o.yT)(R).valueOf());let K=w?NaN:(0,i.t)(R),N,L,V,F,z,Y;if(U&&U.length>0){const k=(0,l.Zz)(U,R);k&&(k.text!=null&&(N=k.text),k.color!=null&&(F=a.theme.visualization.getColorByName(k.color)),k.icon!=null&&(z=k.icon))}else if(h.type===m.PU.enum){if(R==null)return{text:"",numeric:NaN};const k=+R;if(P&&P.type&&P.type.enum){const{text:ee,color:ie}=P.type.enum;if(N=ee?ee[k]:`${R}`,F=ie?ie[k]:void 0,F==null){const fe=y[k%y.length];F=a.theme.visualization.getColorByName(fe)}}}if(!Number.isNaN(K)){if(N==null&&!(0,t.isBoolean)(R)){let k;v&&B!=null?(k=x(K,B,null,a.timeZone,D),k.text=+k.text+""):k=x(K,P.decimals,null,a.timeZone,D),N=k.text,V=k.suffix,L=k.prefix}if(F==null){const k=A(K);F=k.color,Y=k.percent}}if(N==null&&(0,t.isArray)(R)&&(N=(0,t.join)(R,", ")),N==null&&(N=(0,t.toString)(R),N||(P.noValue?N=P.noValue:N="")),!F){const k=A(-1/0);F=k.color,Y=k.percent}const H={text:N,numeric:K,prefix:L,suffix:V,color:F};return z!=null&&(H.icon=z),Y!=null&&(H.percent=Y),H}}function E(a){return{text:(0,t.toString)(a),numeric:(0,i.t)(a)}}function p(){return a=>({text:(0,r.oE)(a)==="other"?`${JSON.stringify(a,b())}`:`${a}`,numeric:null})}const b=()=>{const a=new WeakSet;return(h,P)=>{if(typeof P=="object"&&P!==null){if(a.has(P))return;a.add(P)}return P}}},8066:(Q,I,e)=>{"use strict";e.d(I,{Hs:()=>p,Qi:()=>E,lz:()=>b,uf:()=>g});var t=e(21197),n=e(55459),r=e.n(n),s=e(84140),o=e(23596),m=e(75059),i=e(24293),l=e(83077),d=e(58563),c=e(47737);const g=new l.O(()=>[{id:i.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:a},{id:i.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:h},{id:i.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(P,y)=>(C,f,D)=>{const T=D??c.QS;return y.visualization.getColorByName(T.color)}},new u({id:i.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:P=>P.visualization.palette}),new u({id:i.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:P=>P.visualization.palette.filter(y=>o.getContrastRatio(P.visualization.getColorByName(y),P.colors.background.primary)>=P.colors.contrastThreshold)}),new u({id:i.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:P=>["green","yellow","red"]}),new u({id:i.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:P=>["red","yellow","green"]}),new u({id:i.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:P=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:i.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:P=>["super-light-yellow","dark-red"]}),new u({id:i.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:P=>["blue","purple"]}),new u({id:i.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:P=>["super-light-yellow","dark-blue"]}),new u({id:i.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:P=>["panel-bg","dark-blue"]}),new u({id:i.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:P=>["panel-bg","dark-red"]}),new u({id:i.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:P=>["panel-bg","dark-green"]}),new u({id:i.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:P=>["panel-bg","dark-purple"]})]);class u{constructor(y){this.id=y.id,this.name=y.name,this.description=y.description,this.getNamedColors=y.getColors,this.isContinuous=y.isContinuous,this.isByValue=y.isByValue,this.useSeriesName=y.useSeriesName}getColors(y){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===y?this.colorCache:(this.colorCache=this.getNamedColors(y).map(y.visualization.getColorByName),this.colorCacheTheme=y,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.Ik)(this.colorCache)),this.interpolator}getCalculator(y,C){const f=this.getColors(C);return this.isByValue?this.isContinuous?(D,T,M)=>this.getInterpolator()(T):(D,T,M)=>f[T*(f.length-1)]:this.useSeriesName?(D,T,M)=>f[Math.abs(r()(y.name))%f.length]:(D,T,M)=>{const O=y.state?.seriesIndex??0;return f[O%f.length]}}}function E(P){return g.get(P.config.color?.mode??i.Y.Thresholds)}function p(P){return g.get(P??i.Y.Thresholds)}function b(P,y){const C=E(P);if(!C.isByValue)return{color:C.getCalculator(P,y)(0,0),threshold:c.QS,percent:1};const f=(0,d.jc)(P,y),D=P.config.color?.seriesBy??"last",M=(0,m.Nw)({field:P,reducers:[D]})[D]??0;return f(M)}function a(P,y){return()=>y.visualization.getColorByName(P.config.color?.fixedColor??i.F)}function h(P,y){return()=>{const C=y.visualization.getColorByName(P.config.color?.fixedColor??i.F),f=[C],D=6,T=10,M=35,O=35;for(let v=1;v<D;v++)f.push((0,s.A)(C).spin(v/D*T).brighten(v/D*M).toHexString()),f.push((0,s.A)(C).spin(-(v/D)*T).darken(v/D*O).toHexString());const S=P.state?.seriesIndex??0;return f[S%f.length]}}},56323:(Q,I,e)=>{"use strict";e.d(I,{PI:()=>h,Pm:()=>a,XS:()=>D,Zo:()=>O,a_:()=>b,eG:()=>f,k3:()=>g,k_:()=>p,nF:()=>E,py:()=>u});var t=e(2543),n=e.n(t),r=e(78368),s=e(14236),o=e(85200),m=e(75059),i=e(1173),l=e(11261),d=e(57875),c=e(28240);const g="__series.name",u="__field.displayName",E="__field.labels",p="__calc",b="__cell_",a=25,h=v=>{const{replaceVariables:x,reduceOptions:A,timeZone:R,theme:B}=v,U=A.calcs.length?A.calcs:[m.gy.last],w=[],K=(0,o.NS)(A.fields?{id:i.Ct.byRegexp,options:A.fields}:{id:i.Ct.numeric}),N=v.data??[],L=A.limit?A.limit:a;let V=!1;for(let F=0;F<N.length&&!V;F++){const z=N[F],{timeField:Y}=(0,s.KR)(z),H=new r.R(z);for(let k=0;k<z.fields.length&&!V;k++){const ee=z.fields[k],ie=ee.getLinks;if(!K(ee,z,N))continue;let fe=ee.config;ee.state?.range&&(fe={...fe,...ee.state?.range});let q=ee.config.displayName??"";const Z=ee.display??(0,d.J)({field:ee,theme:v.theme,timeZone:R});if(A.values)for(let J=0;J<ee.values.length;J++){ee.state=y(ee,w.length);const G=S(ee,J),ne=Z(ee.values[J]),te=P(z,ee,J,x,G),oe=C(te,v.fieldConfig,B);if(w.push({name:"",field:fe,display:{...ne,title:te,color:oe??ne.color},view:H,colIndex:k,rowIndex:J,getLinks:ie?()=>ie({valueRowIndex:J}):()=>[],hasLinks:f(ee)}),w.length>=L){V=!0;break}}else{const J=(0,m.Nw)({field:ee,reducers:U});for(const G of U){const ne=ee.state?.scopedVars??{};ne[p]={value:G,text:G};const te=Z(J[G]);q!==""?te.title=x(q,ne):te.title=(0,c.Ct)(ee,z,N),te.percentChange=v.percentChange?(0,m.Nw)({field:ee,reducers:[m.gy.diffperc]}).diffperc:void 0;let oe;v.sparkline&&(oe={y:z.fields[k],x:Y},G===m.gy.last?oe.highlightIndex=oe.y.values.length-1:G===m.gy.first&&(oe.highlightIndex=0));const le=z.length===1?0:void 0;w.push({name:G,field:fe,display:te,sparkline:oe,view:H,colIndex:k,getLinks:ie?()=>ie({calculatedValue:te,valueRowIndex:le}):()=>[],hasLinks:f(ee)})}}}}return w.length===0&&w.push(T(v)),w};function P(v,x,A,R,B){const U=x.config.displayName;if(U)return U.indexOf(b)?R(O(U),B):R(U,B);let w=[],K=0;for(const N of v.fields)if(N!==x)if(N.type===l.PU.string){const L=N.values[A]??"",V=N.display?N.display(L).text:L;V.length>0&&w.push(V)}else N.type===l.PU.number&&K++;return(K||w.length===0)&&w.push((0,c.Ct)(x,v)),w.join(" ")}function y(v,x){return{...v.state,seriesIndex:x}}function C(v,x,A){for(const R of x.overrides)if(R.matcher.id==="byName"&&R.matcher.options===v){for(const B of R.properties)if(B.id==="color"&&B.value)return A.visualization.getColorByName(B.value.fixedColor)}return null}function f(v){return v.config?.links?.length?v.config.links.length>0:!1}function D(v){let x="",A="",R="",B="";for(let U=0;U<v.length;U++){const w=v[U].display;w.text&&w.text.length>A.length&&(A=w.text),w.title&&w.title.length>x.length&&(x=w.title),w.prefix&&w.prefix.length>R.length&&(R=w.prefix),w.suffix&&w.suffix.length>B.length&&(B=w.suffix)}return{text:A,title:x,suffix:B,prefix:R}}function T(v){const x="No data",{fieldConfig:A,timeZone:R}=v,{defaults:B}=A,w=(0,d.J)({field:{type:l.PU.other,config:B},theme:v.theme,timeZone:R})(null),K=M(w,x);return{name:x,field:{...B,max:B.max??0,min:B.min??0},display:{text:K,numeric:0,color:w.color},hasLinks:!1}}function M(v,x){return!v||(0,t.isEmpty)(v.text)?x:v.text}function O(v){return v.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(x,A,R,B,U,w,K)=>`\${__data.fields[${A??B??w}]${R??U??K}}`)}function S(v,x){return v.state?.scopedVars?.__dataContext?{...v.state?.scopedVars,__dataContext:{value:{...v.state?.scopedVars?.__dataContext.value,rowIndex:x}}}:v.state?.scopedVars}},90708:(Q,I,e)=>{"use strict";e.d(I,{BF:()=>O,K3:()=>x,_M:()=>v,nJ:()=>P,rJ:()=>A,we:()=>y});var t=e(2543),n=e.n(t),r=e(96540),s=e(80292),o=e(52622),m=e(14236),i=e(21423),l=e(23596),d=e(75059),c=e(85200),g=e(11261),u=e(24293),E=e(71733),p=e(6709),b=e(57875),a=e(58563),h=e(69550);function P(B){let U=null,w=null;const K=[d.gy.min,d.gy.max];for(const N of B)for(const L of N.fields)if(L.type===g.PU.number){const V=(0,d.Nw)({field:L,reducers:K}),F=V[d.gy.min],z=V[d.gy.max];(U===null||F<U)&&(U=F),(w===null||z>w)&&(w=z)}return{min:U,max:w,delta:(w??0)-(U??0)}}function y(B){if(!B.data)return[];const U=B.fieldConfig;if(!U)return B.data;const w=B.fieldConfigRegistry??h.G;let K=0,N;const L=[];if(U.overrides)for(const V of U.overrides){const F=c.sJ.get(V.matcher.id);F&&L.push({match:F.get(V.matcher.options),properties:V.properties})}return B.data.map((V,F)=>{const z={...V};z.fields=z.fields.map(Y=>({...Y,config:(0,t.cloneDeep)(Y.config),state:{...Y.state}}));for(const Y of z.fields){const H=Y.config;Y.state.scopedVars={__dataContext:{value:{data:B.data,frame:z,frameIndex:F,field:Y}}};const k={field:Y,data:B.data,dataFrameIndex:F,replaceVariables:B.replaceVariables,fieldConfigRegistry:w};T(H,U.defaults,k);for(const q of L)if(q.match(Y,z,B.data))for(const Z of q.properties)D(H,Z,k);let ee=Y.type;if(!ee||ee===g.PU.other){const q=(0,m.dF)(Y);q&&(ee=q)}const{range:ie,newGlobalRange:fe}=C(H,Y,N,B.data);if(N=fe,Y.state.seriesIndex=K,Y.state.range=ie,Y.type=ee,Y.type!==g.PU.time&&K++,Y.display=(0,b.J)({field:Y,theme:B.theme,timeZone:B.timeZone}),Y.config.unit!=="dateTimeFromNow"&&(Y.display=f(Y.display,2500)),Y.getLinks=v(z,Y,Y.state.scopedVars,k.replaceVariables,B.timeZone,B.dataLinkPostProcessor),Y.type===g.PU.nestedFrames)for(const q of Y.values)for(let Z=0;Z<q.length;Z++)for(const J of q[Z].fields)J.display=(0,b.J)({field:J,theme:B.theme,timeZone:B.timeZone}),J.state={scopedVars:{__dataContext:{value:{data:q,frame:q[Z],frameIndex:Z,field:J}}}},J.getLinks=v(q[Z],J,J.state.scopedVars,k.replaceVariables,B.timeZone,B.dataLinkPostProcessor)}return z})}function C(B,U,w,K){if(U.type!==g.PU.number||(0,t.isNumber)(B.min)&&(0,t.isNumber)(B.max))return{newGlobalRange:w};if(B.fieldMinMax){const F=(0,a.AP)(U),z=B.min??F.min,Y=B.max??F.max;return{range:{min:z,max:Y,delta:Y-z},newGlobalRange:w}}const N=w??P(K),L=B.min??N.min,V=B.max??N.max;return{range:{min:L,max:V,delta:V-L},newGlobalRange:N}}function f(B,U=2500){const w=new Map;for(let K=-1;K<=15;K++)w.set(K,new Map);return(K,N)=>{let L=w.get(N??-1),V=L.get(K);return V||(L.size===U&&L.clear(),V=B(K,N),V.color&&(V.color=(0,l.asHexString)(V.color)),L.set(K,V)),V}}function D(B,U,w){const N=w.fieldConfigRegistry.getIfExists(U.id);if(!N)return;const L=N.process(U.value,w,N.settings);L==null?N.isCustom&&B.custom?(0,t.unset)(B.custom,N.path):(0,t.unset)(B,N.path):N.isCustom?(B.custom||(B.custom={}),(0,t.set)(B.custom,N.path,L)):(0,t.set)(B,N.path,L)}function T(B,U,w){B.links&&U.links&&(B.links=[...B.links,...U.links]);for(const K of w.fieldConfigRegistry.list())K.isCustom&&!B.custom&&(B.custom={}),M(K.isCustom?B.custom:B,K.isCustom?U.custom:U,K,w);O(B)}function M(B,U,w,K){const N=(0,t.get)(B,w.path);if(N==null){const L=K.fieldConfigRegistry.getIfExists(w.id);if(!L)return;if(L&&L.shouldApply(K.field)){const V=L.process((0,t.get)(U,L.path),K,L.settings);V!=null&&(0,t.set)(B,L.path,V)}}}function O(B){const{thresholds:U}=B;if(B.color?B.color.mode||delete B.color:U&&(B.color={mode:u.Y.Thresholds}),B.hasOwnProperty("min")&&B.hasOwnProperty("max")&&B.min>B.max){const w=B.max;B.max=B.min,B.min=w}}const S=B=>{const{link:U,linkModel:w,dataLinkScopedVars:K,field:N,replaceVariables:L}=B;return U.internal?(0,p.u)({link:U,internalLink:U.internal,scopedVars:K,field:N,range:U.internal.range,replaceVariables:L}):w},v=(B,U,w,K,N,L)=>V=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(z=>{const Y=R(B,U,w),H={...w,__dataContext:Y},k=(ie,fe,q)=>K(ie,{...H,...fe},q);V.valueRowIndex!==void 0&&!isNaN(V.valueRowIndex)?Y.value.rowIndex=V.valueRowIndex:Y.value.calculatedValue=V.calculatedValue;let ee;if(z.onClick)ee={href:z.url,title:K(z.title||"",H),target:z.targetBlank?"_blank":void 0,onClick:(ie,fe)=>{z.onClick({origin:fe??U,e:ie,replaceVariables:k})},origin:U};else{let ie=z.onBuildUrl?z.onBuildUrl({origin:U,replaceVariables:k}):z.url;ie&&(ie=E.I.assureBaseUrl(ie.replace(/\n/g,"")),ie=K(ie,H,o.$m.UriEncode),ie=E.I.processUrl(ie)),ee={href:ie,title:K(z.title||"",H),target:z.targetBlank?"_blank":void 0,origin:U}}return(L||S)({frame:B,field:U,dataLinkScopedVars:H,replaceVariables:K,config:V,link:z,linkModel:ee})}).filter(z=>!!z);function x(B){if(!B||B.length===0)return[];const U=[...B],w=(0,b.H)();for(let K=0;K<U.length;K++){const N={...U[K]},L=[...N.fields];for(let V=0;V<L.length;V++)L[V]={...L[V],display:w};U[K]={...N,fields:L}}return U}function A(B,U,w,K,N,L,V){const F=B?.fieldConfigRegistry,z=(0,r.useRef)(0),Y=(0,s.A)(w?.series);return(0,r.useMemo)(()=>{if(!F||!U||!w)return;const H=w?.series;w.structureRev==null&&H&&Y&&!(0,i.J3)(H,Y,i.bW)&&z.current++;const k={structureRev:z.current,...w,series:y({data:H,fieldConfig:U,fieldConfigRegistry:F,replaceVariables:L,theme:N,timeZone:K,dataLinkPostProcessor:V})};return w.annotations&&w.annotations.length>0&&(k.annotations=y({data:w.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:L,theme:N,timeZone:K,dataLinkPostProcessor:V})),k},[F,U,w,Y,K,N,L,V])}function R(B,U,w){return w?.__dataContext?{value:{...w.__dataContext.value}}:{value:{frame:B,field:U,data:[B]}}}},28240:(Q,I,e)=>{"use strict";e.d(I,{Ct:()=>i,Fm:()=>o,Ri:()=>s,fk:()=>d,j2:()=>m});var t=e(85200),n=e(11261),r=e(8249);function s(g,u){if(g.name)return g.name;const E=[];for(const p of g.fields)if(p.type!==n.PU.time){if(E.length>1)break;E.push(i(p,g))}return E.length===1?E[0]:u===void 0&&g.fields.length>0?g.fields.filter(p=>p.type!==n.PU.time).map(p=>i(p,g)).join(", "):g.refId?`Series (${g.refId})`:`Series (${u})`}function o(g){g.forEach(u=>{u.fields.forEach(E=>{i(E,u,g)})})}function m(g,u){g.forEach(E=>{E.fields.forEach(p=>{const b={legend:!1,tooltip:!1,viz:!1,...u.defaults.custom?.hideFrom},a=p.config.custom?.hideFrom;u.overrides.forEach(h=>{if("__systemRef"in h)return;if((0,t.NS)(h.matcher)(p,E,g))for(const y of h.properties)y.id==="custom.hideFrom"&&Object.assign(b,y.value)}),p.state={...p.state,hideFrom:{...a}},p.config.custom.hideFrom=b})})}function i(g,u,E){const p=g.state?.displayName,b=!!(E&&E.length>1);if(p&&b===g.state?.multipleFrames)return p;const a=l(g,u,E);return g.state=g.state||{},g.state.displayName=a,g.state.multipleFrames=b,a}function l(g,u,E){const p=g.config?.displayName&&g.config?.displayName.length,b=!!u?.meta?.timeCompare?.isTimeShiftQuery;let a=p?g.config.displayName:g.name;if(p)return b?`${a} (comparison)`:a;if(u&&g.config?.displayNameFromDS)return b?`${g.config.displayNameFromDS} (comparison)`:g.config.displayNameFromDS;if(g.type===n.PU.time&&!g.labels)return a??n.LE;let h=[],P=!1;if(E&&E.length>1){for(let f=1;f<E.length;f++)if(E[f].name!==E[f-1].name){P=!0;break}}let y=!1,C=!1;if(P&&u?.name&&(h.push(u.name),y=!0),g.name&&g.name!==n.Bc&&h.push(g.name),g.labels&&u){let f=c(E??[u]);if(f)g.labels[f]&&(h.push(g.labels[f]),C=!0);else{let D=(0,r.h6)(g.labels);D&&(h.push(D),C=!0)}}return u&&!y&&!C&&g.name===n.Bc&&u.name&&u.name.length>0&&(h.push(u.name),y=!0),h.length?a=h.join(" "):g.name?a=g.name:a=n.Bc,a===g.name&&(a=d(g,u)),b&&(a=`${a} (comparison)`),a}function d(g,u){let E=0,p=!1;if(u)for(let b=0;b<u.fields.length;b++){const a=u.fields[b];if(g===a){if(p=!0,E>0){E++;break}}else if(g.name===a.name&&(E++,p))break}return E?`${g.name} ${E}`:g.name}function c(g){let u=null;for(let E=0;E<g.length;E++){const p=g[E];for(const b of p.fields)if(b.labels){for(const a in b.labels)if(u===null)u=a;else if(a!==u)return null}}return u}},92461:(Q,I,e)=>{"use strict";e.d(I,{F:()=>o});var t=e(2543),n=e.n(t),r=e(83195),s=e(57875);function o(m){return new Proxy({},{get:(i,l)=>{let d=m.frame.fields.find(E=>l===E.name);if(!d){const E=(0,t.toNumber)(l);d=m.frame.fields[E]}if(d||(d=m.frame.fields.find(E=>l===E.config.displayName)),d||(d=m.frame.fields.find(E=>E.labels?l===E.labels.name:!1)),!d)return;const c=d.display??(0,s.J)(),g=d.values[m.rowIndex],u=c(g);return u.toString=()=>(0,r.cN)(u),u}})}},63877:(Q,I,e)=>{"use strict";e.d(I,{AM:()=>s.AM,AP:()=>g.AP,BF:()=>l.BF,Ch:()=>s.Ch,Ct:()=>c.Ct,DJ:()=>r.D,FM:()=>s.FM,FU:()=>d.F,Fm:()=>c.Fm,Gs:()=>r.G,HB:()=>n.H,Hs:()=>o.Hs,JO:()=>n.J,K3:()=>l.K3,Kr:()=>m.K,N7:()=>s.N7,OU:()=>s.OU,PI:()=>t.PI,Pm:()=>t.Pm,Qi:()=>o.Qi,RU:()=>i.RU,Ri:()=>c.Ri,X4:()=>s.X4,XS:()=>t.XS,Zo:()=>t.Zo,a_:()=>t.a_,eG:()=>t.eG,fk:()=>c.fk,hL:()=>s.hL,hS:()=>s.hS,jc:()=>g.jc,k3:()=>t.k3,k_:()=>t.k_,lG:()=>s.lG,lz:()=>o.lz,m0:()=>s.m0,nF:()=>t.nF,py:()=>t.py,rJ:()=>l.rJ,uf:()=>o.uf,we:()=>l.we,xT:()=>s.xT,xg:()=>g.xg,yQ:()=>i.yQ});var t=e(56323),n=e(57875),r=e(69550),s=e(27310),o=e(8066),m=e(66670),i=e(47737),l=e(90708),d=e(92461),c=e(28240),g=e(58563)},27310:(Q,I,e)=>{"use strict";e.d(I,{AM:()=>r,Ch:()=>s,FM:()=>c,N7:()=>l,OU:()=>i,X4:()=>g,hL:()=>m,hS:()=>t,lG:()=>d,m0:()=>n,xT:()=>o});const t=u=>u,n=(u,E,p)=>{if(u!=null)return parseFloat(u)},r=(u,E,p)=>(delete E.field?.state?.displayName,i(u,E,p)),s=(u,E,p)=>u,o=(u,E,p)=>u,m=(u,E,p)=>u,i=(u,E,p)=>u==null?u:p&&p.expandTemplateVars&&E.replaceVariables&&typeof u=="string"?E.replaceVariables(u,E.field.state.scopedVars):`${u}`,l=(u,E,p)=>u,d=(u,E,p)=>u,c=(u,E,p)=>u;var g=(u=>(u.IncludeAll="all",u.ExcludeBaseNames="exclude",u.OnlyBaseNames="only",u))(g||{})},58563:(Q,I,e)=>{"use strict";e.d(I,{AP:()=>d,jc:()=>i,xg:()=>c});var t=e(2543),n=e.n(t),r=e(75059),s=e(11261),o=e(8066),m=e(47737);function i(g,u){if(g.type===s.PU.boolean)return l(g,u);const p=(0,o.Qi)(g).getCalculator(g,u),b=g.state?.range??d(g);return a=>{let h=0;a!==-1/0&&(h=(a-b.min)/b.delta,Number.isNaN(h)&&(h=0));const P=(0,m.k5)(g,a,h);return{percent:h,threshold:P,color:p(a,h,P)}}}function l(g,u){const E={color:u.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:u.visualization.getColorByName("red"),percent:0,threshold:void 0},b=(0,o.Qi)(g);if(b.isContinuous&&b.getColors){const a=b.getColors(u);E.color=a[a.length-1],p.color=a[0]}return a=>a?E:p}function d(g){if(g.type!==s.PU.number)return{min:0,max:100,delta:100};let u=g.config.min,E=g.config.max;if(!(0,t.isNumber)(u)||!(0,t.isNumber)(E))if(g.values&&g.values.length){const p=(0,r.Nw)({field:g,reducers:[r.gy.min,r.gy.max]});(0,t.isNumber)(u)||(u=p[r.gy.min]),(0,t.isNumber)(E)||(E=p[r.gy.max])}else u=0,E=100;return{min:u,max:E,delta:E-u}}function c(g,u){const{config:E}=g;let{min:p,max:b}=E;return(0,t.isNumber)(p)&&(0,t.isNumber)(b)?E:u||!g.state?.range?{...E,...d(g)}:{...E,...g.state.range}}},69550:(Q,I,e)=>{"use strict";e.d(I,{D:()=>s,G:()=>r});var t=e(83077),n=e(66670);const r=new n.K,s=new t.O},47737:(Q,I,e)=>{"use strict";e.d(I,{QS:()=>r,RU:()=>m,k5:()=>o,yQ:()=>s});var t=e(24293),n=e(50082);const r={value:0,color:t.F};function s(i,l){if(!l||l.length===0)return r;let d=l[0];for(const c of l)if(i>=c.value)d=c;else break;return d}function o(i,l,d){const{thresholds:c}=i.config;return c?.mode===n.O.Percentage?s(d*100,c?.steps):s(l,c?.steps)}function m(i){return i.sort((l,d)=>l.value-d.value)}},10361:(Q,I,e)=>{"use strict";e.d(I,{a:()=>t.aG});var t=e(52622)},39954:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{AnnotationChangeEvent:()=>c.We,ArrayDataFrame:()=>s.fG,ArrayVector:()=>S.L,BinaryOperationID:()=>t.kP,BusEventBase:()=>c.aV,BusEventWithPayload:()=>c.x$,ByNamesMatcherMode:()=>o.PP,CSVHeaderStyle:()=>t.F7,CSVReader:()=>t.i8,CircularDataFrame:()=>v.x,CircularVector:()=>M.$,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>d.Pm,DashboardLoadedEvent:()=>c.gc,DataFrameView:()=>s.Rh,DataHoverClearEvent:()=>c.ql,DataHoverEvent:()=>c.b_,DataLinkBuiltInVars:()=>t.cI,DataSelectEvent:()=>c.LO,DataSourcePluginContextProvider:()=>C.p,DataSourceTestFailed:()=>c.LL,DataSourceTestSucceeded:()=>c.NI,DataSourceUpdatedSuccessfully:()=>c.wE,DataTransformerID:()=>o.Fy,DocsId:()=>t.fu,EventBusSrv:()=>c.or,FieldCache:()=>s.Lc,FieldConfigEditorBuilder:()=>t.bk,FieldConfigOptionsRegistry:()=>d.Kr,FieldMatcherID:()=>o.Ct,FieldNamePickerBaseNameMode:()=>d.X4,FrameGeometrySourceMode:()=>E.a,FrameMatcherID:()=>o.jR,ISO_8601:()=>m.mt,InternalTimeZones:()=>m.g$,LayoutModes:()=>b.R,LegacyMappingType:()=>t.An,MISSING_VALUE:()=>s.pk,MatcherID:()=>o.cV,MutableDataFrame:()=>s.k2,NodeGraphDataFrameFieldNames:()=>t.uc,PanelOptionsEditorBuilder:()=>t.pv,PanelPlugin:()=>a.m,PluginContextProvider:()=>y.a,ReducerID:()=>o.gy,Registry:()=>t.OR,StreamingDataFrame:()=>s.k9,StreamingFrameAction:()=>s.Kh,SystemDateFormatsState:()=>m.JE,ThemeContext:()=>g.Dx,TransformerCategory:()=>o.m_,UnaryOperationID:()=>t._G,VAR_CALC:()=>d.k_,VAR_CELL_PREFIX:()=>d.a_,VAR_FIELD_LABELS:()=>d.nF,VAR_FIELD_NAME:()=>d.py,VAR_SERIES_NAME:()=>d.k3,ValueMatcherID:()=>o.Js,addDurationToDate:()=>m.Ri,addRow:()=>s.uY,anySeriesWithTimeField:()=>s.tP,anyToNumber:()=>t.to,applyFieldOverrides:()=>d.we,applyNullInsertThreshold:()=>o.MS,applyRawFieldOverrides:()=>d.K3,arrayToDataFrame:()=>s.Ij,arrayUtils:()=>t.XC,binaryOperators:()=>t.bP,booleanOverrideProcessor:()=>d.FM,booleanValueFormatter:()=>l.Qc,buildHistogram:()=>o.p3,cacheFieldDisplayNames:()=>d.Fm,classicColors:()=>t.tj,closestIdx:()=>s.Ls,colorManipulator:()=>g.MV,compareArrayValues:()=>s.J3,compareDataFrameStructures:()=>s.bW,containsSearchFilter:()=>t.Eg,convertOldAngularValueMappings:()=>t.bh,createDataFrame:()=>s.EI,createDimension:()=>s.r4,createFieldConfigRegistry:()=>P.O,createTheme:()=>g.an,dataFrameFromJSON:()=>s.or,dataFrameToJSON:()=>s.Nw,dataLinksOverrideProcessor:()=>d.Ch,dateMath:()=>m.ns,dateTime:()=>m.KQ,dateTimeAsMoment:()=>m.AN,dateTimeForTimeZone:()=>m.oZ,dateTimeFormat:()=>m.LE,dateTimeFormatISO:()=>m.M7,dateTimeFormatTimeAgo:()=>m.fq,dateTimeFormatWithAbbrevation:()=>m._Q,dateTimeParse:()=>m.bQ,decodeFieldValueEntities:()=>s.t,decodeFieldValueEnums:()=>s.EL,defaultCalcs:()=>o.C6,deprecationWarning:()=>t.lt,displayNameOverrideProcessor:()=>d.AM,doStandardCalcs:()=>o.H3,durationToMilliseconds:()=>m.WT,ensureTimeField:()=>o.ks,escapeRegex:()=>i.$f,escapeStringForRegex:()=>i.jD,eventFactory:()=>c.Rb,fieldColorModeRegistry:()=>d.uf,fieldMatchers:()=>o.sJ,fieldReducers:()=>o.AS,filterFieldConfigOverrides:()=>h.aW,findCommonLabels:()=>t.yO,findHighlightChunksInText:()=>i.Oq,findMatchesInText:()=>i.bs,findUniqueLabels:()=>t.s6,fixCellTemplateExpressions:()=>d.Zo,formatLabels:()=>t.h6,formattedValueToString:()=>l.cN,frameMatchers:()=>o.RE,getActiveThreshold:()=>d.yQ,getAllValuesFromDimension:()=>s.Km,getBuiltInThemes:()=>g.k7,getColumnFromDimension:()=>s.P4,getColumnsFromDimension:()=>s.g6,getDataFrameRow:()=>s.Yn,getDataSourceRef:()=>t.p$,getDataSourceUID:()=>t.Iz,getDimensionByName:()=>s.xB,getDisplayProcessor:()=>d.JO,getDisplayValueAlignmentFactors:()=>d.XS,getFieldColorMode:()=>d.Hs,getFieldColorModeForField:()=>d.Qi,getFieldConfigWithMinMax:()=>d.xg,getFieldDisplayName:()=>d.Ct,getFieldDisplayValues:()=>d.PI,getFieldDisplayValuesProxy:()=>d.FU,getFieldMatcher:()=>o.NS,getFieldSeriesColor:()=>d.lz,getFieldTypeFromValue:()=>s.oE,getFlotPairs:()=>t.RZ,getFlotPairsConstant:()=>t.rG,getFrameDisplayName:()=>d.Ri,getFrameMatchers:()=>o.Dq,getHistogramFields:()=>o.ix,getLinksSupplier:()=>T._M,getLocale:()=>m.JK,getLocaleData:()=>m.XN,getMinMaxAndDelta:()=>d.AP,getNextRefId:()=>p.M,getPanelOptionsWithDefaults:()=>h.F,getProcessedDataFrames:()=>s.Bt,getRawDisplayProcessor:()=>d.HB,getRowUniqueId:()=>s.t9,getScaleCalculator:()=>d.jc,getSearchFilterScopedVar:()=>t.cs,getSeriesTimeStep:()=>t.tY,getThemeById:()=>g.gh,getTimeField:()=>s.KR,getTimeZone:()=>m.O,getTimeZoneGroups:()=>m.U3,getTimeZoneInfo:()=>m.QZ,getTimeZones:()=>m.P3,getUniqueFieldName:()=>d.fk,getValueFormat:()=>l.j_,getValueFormats:()=>l.Ke,getValueFormatterIndex:()=>l.uH,getValueFromDimension:()=>s.WK,getValueMatcher:()=>o.kK,getWeekdayIndex:()=>m.xQ,getWeekdayIndexByEnglishName:()=>m.pp,getZone:()=>m.HD,guessDecimals:()=>t.E6,guessFieldTypeForField:()=>s.dF,guessFieldTypeFromNameAndValue:()=>s.by,guessFieldTypeFromValue:()=>s.HW,guessFieldTypes:()=>s.XQ,hasLinks:()=>d.eG,hasMsResolution:()=>t.dO,hasTimeField:()=>s.S1,histogramBucketSizes:()=>o.rW,histogramFieldInfo:()=>o.Rt,histogramFieldsToFrame:()=>o.cg,histogramFrameBucketMaxFieldName:()=>o.dA,histogramFrameBucketMinFieldName:()=>o.d$,histogramTransformer:()=>o.OA,identityOverrideProcessor:()=>d.hS,incrRound:()=>o.ZU,incrRoundDn:()=>o.rs,incrRoundUp:()=>o.Uh,intervalToAbbreviatedDurationString:()=>m.dU,isBooleanUnit:()=>l.j9,isCustomFieldProp:()=>h.TQ,isDataFrame:()=>s.ci,isDataFrameWithValue:()=>s.LI,isDataSourcePluginContext:()=>D.S,isDataSourceRef:()=>t.fN,isDateTime:()=>m.Ar,isDateTimeInput:()=>m.u8,isEmptyObject:()=>t.RI,isHistogramFrameBucketMaxFieldName:()=>o.H1,isHistogramFrameBucketMinFieldName:()=>o.NX,isLikelyAscendingVector:()=>o.g2,isReducerID:()=>o.Em,isStandardFieldProp:()=>h.nx,isTableData:()=>s.pH,isTimeSeriesField:()=>s.hF,isTimeSeriesFrame:()=>s.aH,isTimeSeriesFrames:()=>s.jq,isValidDate:()=>m.vd,isValidDuration:()=>m.di,isValidGoDuration:()=>m.IM,isValidGrafanaDuration:()=>m.V3,localTimeFormat:()=>m.Od,locale:()=>l.Hg,locationUtil:()=>t.Ig,makeClassES5Compatible:()=>t.Yi,mapInternalLinkToExplore:()=>t.uS,matchAllLabels:()=>t._p,matchPluginId:()=>t._8,monacoLanguageRegistry:()=>u.l,nullToValue:()=>o.CF,numberOverrideProcessor:()=>d.m0,objRemoveUndefined:()=>t.wm,onUpdateDatasourceJsonDataOption:()=>t.PG,onUpdateDatasourceJsonDataOptionChecked:()=>t.EX,onUpdateDatasourceJsonDataOptionSelect:()=>t.BD,onUpdateDatasourceOption:()=>t.zX,onUpdateDatasourceResetOption:()=>t.yV,onUpdateDatasourceSecureJsonDataOption:()=>t.mn,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.wY,outerJoinDataFrames:()=>o.KP,parseDuration:()=>m.E9,parseFlags:()=>i.bQ,parseLabels:()=>t.Xy,preProcessPanelData:()=>s.N$,rangeUtil:()=>m.Ii,readCSV:()=>t.Jh,reduceField:()=>o.Nw,renderLegendFormat:()=>t.j_,renderMarkdown:()=>i.Gc,renderTextPanelMarkdown:()=>i.Pn,restoreCustomOverrideRules:()=>h.H9,reverseDataFrame:()=>s.q7,roundDecimals:()=>t.hB,scaledUnits:()=>l.yP,selectOverrideProcessor:()=>d.hL,serializeStateToUrlParam:()=>t.Pp,setLocale:()=>m.xS,setTimeZoneResolver:()=>m.GZ,setWeekStart:()=>m.$D,shallowCompare:()=>s.ab,simpleCountUnit:()=>l.UR,sortDataFrame:()=>s.ES,sortThresholds:()=>d.RU,standardEditorsRegistry:()=>d.DJ,standardFieldConfigEditorRegistry:()=>d.Gs,standardTransformers:()=>o.c9,standardTransformersRegistry:()=>o.h9,stringFormater:()=>l.cH,stringOverrideProcessor:()=>d.OU,stringStartsAsRegEx:()=>i.AP,stringToJsRegex:()=>i.dO,stringToMs:()=>i.dc,systemDateFormats:()=>m.WC,textUtil:()=>i.sQ,thresholdsOverrideProcessor:()=>d.N7,timeZoneAbbrevation:()=>m.jw,timeZoneFormatUserFriendly:()=>m.le,toCSV:()=>t._O,toDataFrame:()=>s.Vc,toDataFrameDTO:()=>s.Kl,toDuration:()=>m.Ah,toFilteredDataFrameDTO:()=>s.By,toFixed:()=>l.Mg,toFixedScaled:()=>l.gZ,toFixedUnit:()=>l.G8,toFloatOrUndefined:()=>i.$D,toIntegerOrUndefined:()=>i.vb,toLegacyResponseData:()=>s.w3,toNumberString:()=>i.kT,toOption:()=>t.zL,toPascalCase:()=>i.MX,toURLRange:()=>t.sQ,toUtc:()=>m.yT,transformDataFrame:()=>o.m6,unEscapeStringFromRegex:()=>i.xb,unaryOperators:()=>t.j7,unitOverrideProcessor:()=>d.lG,updateDatasourcePluginJsonDataOption:()=>t.lO,updateDatasourcePluginOption:()=>t.pN,updateDatasourcePluginResetOption:()=>t.QP,updateDatasourcePluginSecureJsonDataOption:()=>t.wp,urlUtil:()=>t.kM,useFieldOverrides:()=>d.rJ,usePluginContext:()=>f.Q,validateFieldConfig:()=>d.BF,valueMappingsOverrideProcessor:()=>d.xT,valueMatchers:()=>o.hI,vectorator:()=>O.E,withLoadingIndicator:()=>t.kz});var t=e(94032),n=e(64572),r={};for(const x in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","CircularVector","vectorator","ArrayVector","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","matchPluginId","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(x)<0&&(r[x]=()=>n[x]);e.d(I,r);var s=e(48120),o=e(34687),m=e(38698),i=e(40672),l=e(56496),d=e(63877),c=e(56302),g=e(74529),u=e(58612),E=e(10361),p=e(21809),b=e(19484),a=e(65158),h=e(581),P=e(28528),y=e(13834),C=e(76287),f=e(92470),D=e(95187),T=e(90708),M=e(36120),O=e(18008),S=e(79178),v=e(33526)},58612:(Q,I,e)=>{"use strict";e.d(I,{l:()=>t.l});var t=e(96915)},96915:(Q,I,e)=>{"use strict";e.d(I,{l:()=>n});var t=e(83077);const n=new t.O},65158:(Q,I,e)=>{"use strict";e.d(I,{m:()=>l});var t=e(2543),n=e.n(t),r=e(66670),s=e(43429),o=e(95344),m=e(60264),i=e(28528);class l extends s.Ud{constructor(c){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new r.K,this.dataSupport={annotations:!1,alertStates:!1},this.panel=c}get defaults(){let c=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const g=new m.pv;this.optionsSupplier(g,{data:[]});for(const u of g.getItems())u.defaultValue!=null&&(0,t.set)(c,u.path,u.defaultValue)}return c}get fieldConfigDefaults(){const c=this._fieldConfigDefaults.defaults;c.custom={};for(const g of this.fieldConfigRegistry.list())g.defaultValue!==void 0&&(0,t.set)(c,g.id,g.defaultValue);return{defaults:{...c},overrides:this._fieldConfigDefaults.overrides}}setDefaults(c){return(0,o.l)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=c,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(c){return(0,o.l)("PanelPlugin","setEditor","setPanelOptions"),this.editor=c,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(c){return this.onPanelMigration=c,this}setPanelChangeHandler(c){return this.onPanelTypeChanged=c,this}setPanelOptions(c){return this.optionsSupplier=c,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(c){return this.dataSupport={...this.dataSupport,...c},this}useFieldConfig(c={}){return this._initConfigRegistry=()=>(0,i.O)(c,this.meta.name),this}setSuggestionsSupplier(c){return this.suggestionsSupplier=c,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(c){return this.meta.id===c}}},581:(Q,I,e)=>{"use strict";e.d(I,{F:()=>i,H9:()=>E,TQ:()=>p,aW:()=>d,nx:()=>b});var t=e(2543),n=e.n(t),r=e(8066),s=e(24293),o=e(37055),m=e(50082);function i({plugin:a,currentOptions:h,currentFieldConfig:P,isAfterPluginChange:y}){const C=(0,t.mergeWith)({},a.defaults,h||{},(T,M)=>{if((0,t.isArray)(M))return M}),f=l(P,a),D=g(a,f,y);return{options:C,fieldConfig:D}}function l(a,h){const P=h.fieldConfigDefaults,y={defaults:(0,t.mergeWith)({},P.defaults,a?a.defaults:{},(C,f)=>{if((0,t.isArray)(f))return f}),overrides:a?.overrides??[]};c(y.defaults,"",h.fieldConfigRegistry),y.defaults.thresholds&&u(y.defaults.thresholds),y.overrides=d(y.overrides,C=>h.fieldConfigRegistry.getIfExists(C.id)!==void 0);for(const C of y.overrides)for(const f of C.properties)f.id==="thresholds"&&u(f.value);return y}function d(a,h){return a.map(P=>{const y=P.properties.filter(h);return{...P,properties:y}}).filter(P=>P.properties.length>0)}function c(a,h,P){let y=!1;for(const[C,f]of Object.entries(a)){const D=`${h}${C}`,T=!!P.getIfExists(D);if(T){y=!0;continue}(0,t.isArray)(f)||!(0,t.isObject)(f)?T||(0,t.unset)(a,C):c(f,`${D}.`,P)||(0,t.unset)(a,C)}return y}function g(a,h,P){if(!P)return h;const y=a.fieldConfigRegistry.getIfExists(o.uo.Color);if(y&&y.settings){const C=y.settings,f=r.uf.getIfExists(h.defaults.color?.mode);if(!C.byValueSupport&&(!f||f.isByValue))return h.defaults.color={mode:s.Y.PaletteClassic},h;if(C.byValueSupport&&C.preferThresholdsMode&&f?.id!==s.Y.Fixed&&(!f||!f.isByValue))return h.defaults.color={mode:s.Y.Thresholds},h;if(C.bySeriesSupport&&f?.isByValue)return h.defaults.color={mode:s.Y.PaletteClassic},h}return h}function u(a){a.mode||(a.mode=m.O.Absolute),a.steps?a.steps.length&&(a.steps[0].value=-1/0):a.steps=[]}function E(a,h){const P={defaults:{...a.defaults,custom:h.defaults.custom},overrides:[...a.overrides]};for(const y of h.overrides)for(const C of y.properties)if(p(C)){const f=P.overrides.find(D=>(0,t.isEqual)(D.matcher,y.matcher));f?f!==y&&f.properties.push(C):P.overrides.push(y)}return P}function p(a){return a.id.startsWith("custom.")}function b(a){return!p(a)}},28528:(Q,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(66670),n=e(69550),r=e(60264);function s(m={},i){const l=new t.K,d=n.G.list(),c={};if(m.useCustomConfig){const g=new r.bk;m.useCustomConfig(g);for(const u of g.getRegistry().list())if(u.isCustom=!0,u.id="custom."+u.id,o(u,d)){const E=c[u.category[0]]??[];E.push(u),c[u.category[0]]=E}else l.register(u)}for(let g of d){const u=g.id;if(!(m.disableStandardOptions&&m.disableStandardOptions.indexOf(u)>-1)){if(m.standardOptions){const E=m.standardOptions[u]?.hideFromDefaults,p=m.standardOptions[u]?.defaultValue,b=m.standardOptions[u]?.settings;E&&(g={...g,hideFromDefaults:E}),p&&(g={...g,defaultValue:p}),b&&(g={...g,settings:g.settings?{...g.settings,...b}:b})}if(l.register(g),g.category&&c[g.category[0]])for(let E of c[g.category[0]])l.register(E)}}for(const g of l.list())if(g.path.indexOf("[")>0)throw new Error(`[${i}] Field config paths do not support arrays: ${g.id}`);return l}function o(m,i){return!!i.find(l=>m.category&&l.category&&m.category[0]===l.category[0])}},21809:(Q,I,e)=>{"use strict";e.d(I,{M:()=>t.M});var t=e(77789)},77789:(Q,I,e)=>{"use strict";e.d(I,{M:()=>t});const t=r=>{for(let s=0;;s++){const o=n(s);if(!r.some(m=>m.refId===o))return o}};function n(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return r<s.length?s[r]:n(Math.floor(r/s.length)-1)+s[r%s.length]}},40672:(Q,I,e)=>{"use strict";e.d(I,{$D:()=>t.$D,$f:()=>t.$f,AP:()=>t.AP,Gc:()=>n.G,MX:()=>t.MX,Oq:()=>r.Oq,Pn:()=>n.P,bQ:()=>r.bQ,bs:()=>r.bs,dO:()=>t.dO,dc:()=>t.dc,jD:()=>t.jD,kT:()=>t.kT,sQ:()=>o,vb:()=>t.vb,xb:()=>t.xb});var t=e(54479),n=e(36663),r=e(21),s=e(80997);const o={escapeHtml:s.ZD,hasAnsiCodes:s.kE,sanitize:s.aj,sanitizeTextPanelContent:s.G$,sanitizeUrl:s.Jf,sanitizeSVGContent:s.rX,sanitizeTrustedTypes:s.oI,sanitizeTrustedTypesRSS:s.kc}},36663:(Q,I,e)=>{"use strict";e.d(I,{G:()=>m,P:()=>i});var t=e(60023),n=e(33836),r=e(80997);let s=!1;const o={pedantic:!1,gfm:!0,breaks:!1};function m(l,d){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...o}),s=!0);let c;d?.breaks&&(c={...o,breaks:!0});const g=(0,t.xI)(l||"",c);if(typeof g!="string")throw new Error("Failed to process markdown synchronously.");return d?.noSanitize?g:(0,r.G$)(g)}function i(l,d){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...o}),s=!0);const c=(0,t.xI)(l||"");if(typeof c!="string")throw new Error("Failed to process markdown synchronously.");return d?.noSanitize?c:(0,r.G$)(c)}},80997:(Q,I,e)=>{"use strict";e.d(I,{G$:()=>g,Jf:()=>E,ZD:()=>b,aj:()=>l,kE:()=>p,kc:()=>d,oI:()=>c,rX:()=>u});var t=e(16750),n=e(42838),r=e.n(n),s=e(34005),o=e.n(s);const m=Object.keys(s.whiteList).reduce((a,h)=>(a[h]=s.whiteList[h]?.concat(["class","style"]),a),{}),i=new s.FilterXSS({whiteList:m,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function l(a){try{return r().sanitize(a,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",a),b(a)}}function d(a){return r().sanitize(a,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function c(a){return r().sanitize(a,{RETURN_TRUSTED_TYPE:!0})}function g(a){try{return i.process(a)}catch{return console.error("String could not be sanitized",a),"Text string could not be sanitized"}}function u(a){return r().sanitize(a,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function E(a){return(0,t.J)(a)}function p(a){return/\u001b\[\d{1,2}m/.test(a)}function b(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},54479:(Q,I,e)=>{"use strict";e.d(I,{$D:()=>p,$f:()=>a,AP:()=>d,MX:()=>b,dO:()=>c,dc:()=>g,jD:()=>i,kT:()=>u,vb:()=>E,xb:()=>l});var t=e(2543),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",o=new RegExp(s,"g"),m=new RegExp("(\\\\)"+s,"g");function i(h){return h&&h.replace(o,"\\$1")}function l(h){return h&&h.replace(m,"$2")}function d(h){return h?h[0]==="/":!1}function c(h){if(!d(h))return new RegExp(`^${h}$`);const P=h.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!P)throw new Error(`'${h}' is not a valid regular expression.`);return new RegExp(P[1],P[2])}function g(h){if(!h)return 0;const P=parseInt(h,10),y=h.slice(String(P).length),C=1e3,f=C*60,D=f*60,T=D*24;switch(y){case"s":return P*C;case"m":return P*f;case"h":return P*D;case"d":return P*T;default:if(!y)return isNaN(P)?0:P;throw new Error("Not supported unit: "+y)}}function u(h){return h!=null&&Number.isFinite(h)?h.toString():""}function E(h){if(!h)return;const P=parseInt(h,10);return isNaN(P)?void 0:P}function p(h){if(!h)return;const P=parseFloat(h);return isNaN(P)?void 0:P}function b(h){const P=(0,t.camelCase)(h);return P.charAt(0).toUpperCase()+P.substring(1)}function a(h){return h.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},21:(Q,I,e)=>{"use strict";e.d(I,{Oq:()=>t,bQ:()=>m,bs:()=>r});function t({searchWords:i,textToHighlight:l}){const d=[];for(const c of i)typeof c=="string"&&d.push(...r(l,c));return d}const n=i=>i.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function r(i,l){if(!i||!l)return[];const d=[],{cleaned:c,flags:g}=m(n(l));let u;try{u=new RegExp(`(?:${c})`,g)}catch{return d}return i.replace(u,(E,...p)=>{if(E){const b=p[p.length-2];d.push({text:E,start:b,length:E.length,end:b+E.length})}return""}),d}const s="-",o=/\(\?([ims-]+)\)/g;function m(i){const l=new Set(["g"]);return{cleaned:i.replace(o,(c,g)=>{const u=g.startsWith(s);for(let E=0;E<g.length;++E){const p=g.charAt(E);u||g.charAt(E-1)===s?l.delete(p):p!==s&&l.add(p)}return""}),flags:Array.from(l).join("")}}},23596:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{alpha:()=>p,asHexString:()=>m,asRgbString:()=>i,darken:()=>b,decomposeColor:()=>d,emphasize:()=>E,getContrastRatio:()=>g,getLuminance:()=>u,hexToRgb:()=>r,hslToRgb:()=>l,lighten:()=>a,recomposeColor:()=>c,rgbToHex:()=>o});var t=e(84140);function n(h,P=0,y=1){return Math.min(Math.max(P,h),y)}function r(h){h=h.slice(1);const P=new RegExp(`.{1,${h.length>=6?2:1}}`,"g");let y=h.match(P);if(!y)return"";let C=Array.from(y);return C[0].length===1&&(C=C.map(f=>f+f)),C?`rgb${C.length===4?"a":""}(${C.map((f,D)=>D<3?parseInt(f,16):Math.round(parseInt(f,16)/255*1e3)/1e3).join(", ")})`:""}function s(h){const P=h.toString(16);return P.length===1?`0${P}`:P}function o(h){if(h.indexOf("#")===0)return h;const{values:P}=d(h);return`#${P.map(y=>s(y)).join("")}`}function m(h){if(h[0]==="#")return h;const P=(0,t.A)(h);return P.getAlpha()===1?P.toHexString():P.toHex8String()}function i(h){return h.startsWith("rgb")?h:(0,t.A)(h).toRgbString()}function l(h){const P=d(h),{values:y}=P,C=y[0],f=y[1]/100,D=y[2]/100,T=f*Math.min(D,1-D),M=(v,x=(v+C/30)%12)=>D-T*Math.max(Math.min(x-3,9-x,1),-1);let O="rgb";const S=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return P.type==="hsla"&&(O+="a",S.push(y[3])),c({type:O,values:S})}function d(h){if(typeof h!="string")return h;if(h.charAt(0)==="#")return d(r(h));const P=h.indexOf("("),y=h.substring(0,P);if(["rgb","rgba","hsl","hsla","color"].indexOf(y)===-1)throw new Error(`Unsupported '${h}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let C=h.substring(P+1,h.length-1),f;if(y==="color"){if(C=C.split(" "),f=C.shift(),C.length===4&&C[3].charAt(0)==="/"&&(C[3]=C[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(f)===-1)throw new Error(`Unsupported ${f} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else C=C.split(",");return C=C.map(D=>parseFloat(D)),{type:y,values:C,colorSpace:f}}function c(h){const{type:P,colorSpace:y}=h;let C=h.values;return P.indexOf("rgb")!==-1?C=C.map((f,D)=>D<3?parseInt(f,10):f):P.indexOf("hsl")!==-1&&(C[1]=`${C[1]}%`,C[2]=`${C[2]}%`),P.indexOf("color")!==-1?C=`${y} ${C.join(" ")}`:C=`${C.join(", ")}`,`${P}(${C})`}function g(h,P,y){const C=u(h),f=u(P,y);return(Math.max(C,f)+.05)/(Math.min(C,f)+.05)}function u(h,P){const y=d(h);let C=y.type==="hsl"?d(l(h)).values:y.values;if(P&&y.type==="rgba"){const D=d(P),T=C[3];C[0]=C[0]*T+D.values[0]*(1-T),C[1]=C[1]*T+D.values[1]*(1-T),C[2]=C[2]*T+D.values[2]*(1-T)}const f=C.map(D=>(y.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*f[0]+.7152*f[1]+.0722*f[2]).toFixed(3))}function E(h,P=.15){return u(h)>.5?b(h,P):a(h,P)}function p(h,P){if(h==="")return"#000000";if(P=n(P),h[0]==="#"){if(h.length===9)h=h.substring(0,7);else if(h.length<=5){let C="#";for(let f=1;f<4;f++)C+=h[f]+h[f];h=C}return h+Math.round(P*255).toString(16).padStart(2,"0")}else{if(h[3]==="(")return h.replace(")",`, ${P})`);if(h[4]==="(")return h.substring(0,h.lastIndexOf(","))+`, ${P})`}const y=d(h);return y.type==="color"?y.values[3]=`/${P}`:y.values[3]=P,c(y)}function b(h,P){const y=d(h);if(P=n(P),y.type.indexOf("hsl")!==-1)y.values[2]*=1-P;else if(y.type.indexOf("rgb")!==-1||y.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)y.values[C]*=1-P;return c(y)}function a(h,P){const y=d(h);if(P=n(P),y.type.indexOf("hsl")!==-1)y.values[2]+=(100-y.values[2])*P;else if(y.type.indexOf("rgb")!==-1)for(let C=0;C<3;C+=1)y.values[C]+=(255-y.values[C])*P;else if(y.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)y.values[C]+=(1-y.values[C])*P;return c(y)}},60578:(Q,I,e)=>{"use strict";e.d(I,{D:()=>r});var t=e(96540),n=e(75972);const r=t.createContext((0,n.a)());r.displayName="ThemeContext"},75972:(Q,I,e)=>{"use strict";e.d(I,{a:()=>U});function t(){const K=["xs","sm","md","lg","xl","xxl"],N="px",L={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function V(z){return`@media (min-width:${typeof z=="number"?z:L[z]}${N})`}function F(z){return`@media (max-width:${(typeof z=="number"?z:L[z])-5/100}${N})`}return{values:L,up:V,down:F,keys:K,unit:N}}var n=e(2543),r=e(23596);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class o{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:s.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class m{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:s.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function i(w){const K=new o,N=new m,L=(w.mode??"dark")==="dark"?K:N,{primary:V=L.primary,secondary:F=L.secondary,info:z=L.info,warning:Y=L.warning,success:H=L.success,error:k=L.error,tonalOffset:ee=L.tonalOffset,hoverFactor:ie=L.hoverFactor,contrastThreshold:fe=L.contrastThreshold,...q}=w;function Z(G,ne=fe){return(0,r.getContrastRatio)(K.text.maxContrast,G,L.background.primary)>=ne?K.text.maxContrast:N.text.maxContrast}const J=({color:G,name:ne})=>{if(G={...G,name:ne},!G.main)throw new Error(`Missing main color for ${ne}`);return G.text||(G.text=G.main),G.border||(G.border=G.text),G.shade||(G.shade=L.mode==="light"?(0,r.darken)(G.main,ee):(0,r.lighten)(G.main,ee)),G.transparent||(G.transparent=(0,r.alpha)(G.main,.15)),G.contrastText||(G.contrastText=Z(G.main)),G.borderTransparent||(G.borderTransparent=(0,r.alpha)(G.border,.25)),G};return(0,n.merge)({...L,primary:J({color:V,name:"primary"}),secondary:J({color:F,name:"secondary"}),info:J({color:z,name:"info"}),error:J({color:k,name:"error"}),success:J({color:H,name:"success"}),warning:J({color:Y,name:"warning"}),getContrastText:Z,emphasize:(G,ne)=>(0,r.emphasize)(G,ne??ie)},q)}function l(w,K){const N={padding:1,headerHeight:4,background:w.background.primary,borderColor:w.border.weak,boxShadow:"none"},L={borderColor:w.border.medium,borderHover:w.border.strong,text:w.text.primary,background:w.mode==="dark"?w.background.canvas:w.background.primary};return{height:{sm:3,md:4,lg:6},input:L,panel:N,dropdown:{background:L.background},tooltip:{background:w.background.secondary,text:w.text.primary},dashboard:{background:w.background.canvas,padding:1},overlay:{background:w.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:w.warning.contrastText,background:w.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:w.emphasize(w.background.primary,.03)}}}function d(w){return w.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function c(w){const K=w.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:V=>`${(V??1)*K}px`}}function g(w={}){const{gridSize:K=8}=w,N=V=>typeof V=="string"?V:V*K,L=(...V)=>(V.length===0&&(V[0]=1),V.map(F=>{const z=N(F);return typeof z=="number"?`${z}px`:z}).join(" "));return L.gridSize=K,L.x0="0px",L.x0_25="2px",L.x0_5="4px",L.x1="8px",L.x1_5="12px",L.x2="16px",L.x2_5="20px",L.x3="24px",L.x4="32px",L.x5="40px",L.x6="48px",L.x8="64px",L.x10="80px",L}const u={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},E={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(w=["all"],K={}){const{duration:N=E.standard,easing:L=u.easeInOut,delay:V=0}=K;return(Array.isArray(w)?w:[w]).map(F=>`${F} ${typeof N=="string"?N:a(N)} ${L} ${typeof V=="string"?V:a(V)}`).join(",")}function b(w){if(!w)return 0;const K=w/36;return Math.round((4+15*K**.25+K/5)*10)}function a(w){return`${Math.round(w)}ms`}function h(){return{create:p,duration:E,easing:u,getAutoHeightDuration:b}}const P='"Inter", "Helvetica", "Arial", sans-serif',y="'Roboto Mono', monospace";function C(w,K={}){const{fontFamily:N=P,fontFamilyMonospace:L=y,fontSize:V=14,fontWeightLight:F=300,fontWeightRegular:z=400,fontWeightMedium:Y=500,fontWeightBold:H=500,htmlFontSize:k=14}=K,ee=V/14,ie=J=>`${J/k*ee}rem`,fe=(J,G,ne,te,oe)=>{if(ne%2!==0||G%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:N,fontWeight:J,fontSize:ie(G),lineHeight:ne/G,...N===P?{letterSpacing:`${f(te/G)}em`}:{},...oe}},q={h1:fe(z,28,32,-.25),h2:fe(z,24,28,0),h3:fe(z,22,24,0),h4:fe(z,18,22,.25),h5:fe(z,16,22,0),h6:fe(Y,14,22,.15),body:fe(z,V,22,.15),bodySmall:fe(z,12,18,.15),code:{...fe(z,14,16,.15),fontFamily:L}};return{htmlFontSize:k,pxToRem:ie,fontFamily:N,fontFamilyMonospace:L,fontSize:V,fontWeightLight:F,fontWeightRegular:z,fontWeightMedium:Y,fontWeightBold:H,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...q}}function f(w){return Math.round(w*1e5)/1e5}var D=e(25137);function T(w){const K={name:"Grafana Default",typography:{fontFamily:{sansSerif:w.typography.fontFamily,monospace:w.typography.fontFamilyMonospace},size:{base:`${w.typography.fontSize}px`,xs:w.typography.size.xs,sm:w.typography.size.sm,md:w.typography.size.md,lg:w.typography.size.lg},heading:{h1:w.typography.h1.fontSize,h2:w.typography.h2.fontSize,h3:w.typography.h3.fontSize,h4:w.typography.h4.fontSize,h5:w.typography.h5.fontSize,h6:w.typography.h6.fontSize},weight:{light:w.typography.fontWeightLight,regular:w.typography.fontWeightRegular,semibold:w.typography.fontWeightMedium,bold:w.typography.fontWeightBold},lineHeight:{xs:w.typography.bodySmall.lineHeight,sm:w.typography.bodySmall.lineHeight,md:w.typography.body.lineHeight,lg:w.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${w.breakpoints.values.xs}px`,sm:`${w.breakpoints.values.sm}px`,md:`${w.breakpoints.values.md}px`,lg:`${w.breakpoints.values.lg}px`,xl:`${w.breakpoints.values.xl}px`,xxl:`${w.breakpoints.values.xxl}px`},spacing:{base:w.spacing.gridSize,insetSquishMd:w.spacing(.5,1),d:w.spacing(2),xxs:w.spacing(.25),xs:w.spacing(.5),sm:w.spacing(1),md:w.spacing(2),lg:w.spacing(3),xl:w.spacing(4),gutter:w.spacing(4),formSpacingBase:w.spacing.gridSize,formMargin:`${w.spacing.gridSize*4}px`,formFieldsetMargin:`${w.spacing.gridSize*2}px`,formInputHeight:w.spacing.gridSize*4,formButtonHeight:w.spacing.gridSize*4,formInputPaddingHorizontal:`${w.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${w.spacing.gridSize/2}px`,formInputMargin:`${w.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${w.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:w.shape.borderRadius(1),md:w.shape.borderRadius(2),lg:w.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:w.spacing.gridSize*w.components.height.sm,md:w.spacing.gridSize*w.components.height.md,lg:w.spacing.gridSize*w.components.height.lg},panelPadding:w.components.panel.padding*w.spacing.gridSize,panelHeaderHeight:w.spacing.gridSize*w.components.panel.headerHeight,zIndex:w.zIndex},N={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},L={bg1:w.colors.background.primary,bg2:w.colors.background.secondary,bg3:w.colors.action.hover,dashboardBg:w.colors.background.canvas,bgBlue1:w.colors.primary.main,bgBlue2:w.colors.primary.shade},V={border1:w.colors.border.weak,border2:w.colors.border.medium,border3:w.colors.border.strong},F={textStrong:w.colors.text.maxContrast,textHeading:w.colors.text.primary,text:w.colors.text.primary,textSemiWeak:w.colors.text.secondary,textWeak:w.colors.text.secondary,textFaint:w.colors.text.disabled,textBlue:w.colors.primary.text},z={formLabel:w.colors.text.primary,formDescription:w.colors.text.secondary,formInputBg:w.components.input.background,formInputBgDisabled:w.colors.action.disabledBackground,formInputBorder:w.components.input.borderColor,formInputBorderHover:w.components.input.borderHover,formInputBorderActive:w.colors.primary.border,formInputBorderInvalid:w.colors.error.border,formInputPlaceholderText:w.colors.text.disabled,formInputText:w.components.input.text,formInputDisabledText:w.colors.action.disabledText,formFocusOutline:w.colors.primary.main,formValidationMessageText:w.colors.error.contrastText,formValidationMessageBg:w.colors.error.main};return{...K,type:w.colors.mode==="dark"?D.I.Dark:D.I.Light,isDark:w.isDark,isLight:w.isLight,name:w.name,palette:{...N,brandPrimary:N.orange,brandSuccess:w.colors.success.main,brandWarning:w.colors.warning.main,brandDanger:w.colors.error.main,queryRed:w.colors.error.text,queryGreen:w.colors.success.text,queryPurple:"#fe85fc",queryOrange:N.orange,online:w.colors.success.main,warn:w.colors.success.main,critical:w.colors.success.main},colors:{...L,...V,...z,...F,bodyBg:w.colors.background.canvas,panelBg:w.components.panel.background,panelBorder:w.components.panel.borderColor,pageHeaderBg:w.colors.background.canvas,pageHeaderBorder:w.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:N.black,dropdownOptionHoverBg:L.bg2,link:w.colors.text.primary,linkDisabled:w.colors.text.disabled,linkHover:w.colors.text.maxContrast,linkExternal:w.colors.text.link},shadows:{listItem:"none"},visualization:w.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var O=e(24293);function S(w){const K=w.mode==="light"?x():v(),N={};for(const F of K)for(const z of F.shades)if(N[z.name]=z.color,z.aliases)for(const Y of z.aliases)N[Y]=z.color;N.transparent=w.mode==="light"?"rgba(255, 255, 255, 0)":"rgba(0,0,0,0)",N["panel-bg"]=w.background.primary,N.text=w.text.primary;const L=F=>{if(!F)return O.F;const z=N[F];if(z)return z;if(F[0]==="#"||F.indexOf("rgb")>-1)return F;const Y=R[F.toLowerCase()];return Y?(N[F]=Y,Y):F},V=A();return{hues:K,palette:V,getColorByName:L}}function v(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function x(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function A(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function U(w={}){const{colors:K={},spacing:N={},shape:L={},typography:V={}}=w,F=i(K),z=t(),Y=g(N),H=c(L),k=C(F,V),ee=d(F),ie=h(),fe=l(F,ee),q=S(F),Z={name:F.mode==="dark"?"Dark":"Light",isDark:F.mode==="dark",isLight:F.mode==="light",colors:F,breakpoints:z,spacing:Y,shape:H,components:fe,typography:k,shadows:ee,transitions:ie,visualization:q,zIndex:{...B},flags:{}};return{...Z,v1:T(Z)}}},74529:(Q,I,e)=>{"use strict";e.d(I,{Dx:()=>s.D,MV:()=>r,an:()=>t.a,gh:()=>n.g,k7:()=>n.k});var t=e(75972),n=e(97594),r=e(23596),s=e(60578)},97594:(Q,I,e)=>{"use strict";e.d(I,{g:()=>r,k:()=>s});var t=e(83077),n=e(75972);function r(d){return(o.getIfExists(d)??o.get("dark")).build()}function s(d){return o.list().filter(c=>d?!0:!c.isExtra)}const o=new t.O(()=>[{id:"system",name:"System preference",build:m},{id:"dark",name:"Dark",build:()=>(0,n.a)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,n.a)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:l,isExtra:!0},{id:"midnight",name:"Midnight",build:i,isExtra:!0}]);function m(){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return r(c)}function i(){const d="204, 204, 220";return(0,n.a)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${d}, 0.17)`,medium:`rgba(${d}, 0.25)`,strong:`rgba(${d}, 0.35)`}}})}function l(){return(0,n.a)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},75059:(Q,I,e)=>{"use strict";e.d(I,{AS:()=>d,C6:()=>c,Em:()=>i,H3:()=>g,Nw:()=>l,gy:()=>m});var t=e(2543),n=e.n(t),r=e(39070),s=e(11261),o=e(83077),m=(y=>(y.sum="sum",y.max="max",y.min="min",y.logmin="logmin",y.mean="mean",y.variance="variance",y.stdDev="stdDev",y.last="last",y.first="first",y.count="count",y.range="range",y.diff="diff",y.diffperc="diffperc",y.delta="delta",y.step="step",y.firstNotNull="firstNotNull",y.lastNotNull="lastNotNull",y.changeCount="changeCount",y.distinctCount="distinctCount",y.allIsZero="allIsZero",y.allIsNull="allIsNull",y.allValues="allValues",y.uniqueValues="uniqueValues",y))(m||{});function i(y){return Object.keys(m).includes(y)}function l(y){const{field:C,reducers:f}=y;if(!C||!f||f.length<1)return{};if(C.state?.calcs){const x=[];for(const A of f)C.state.calcs.hasOwnProperty(A)||x.push(A);if(x.length<1)return{...C.state.calcs}}C.state||(C.state={});const D=d.list(f),T=C.values;if(T&&T.length<1){const x={...C.state.calcs};for(const A of D)x[A.id]=A.emptyInputResult!==null?A.emptyInputResult:null;return C.state.calcs=x}const{nullValueMode:M=r.UW.Ignore}=C.config,O=M===r.UW.Ignore,S=M===r.UW.AsZero;if(D.length===1&&D[0].reduce){const x=D[0].reduce(C,O,S);return C.state.calcs={...C.state.calcs,...x},x}let v=g(C,O,S);for(const x of D)!v.hasOwnProperty(x.id)&&x.reduce&&(v={...v,...x.reduce(C,O,S)});return C.state.calcs={...C.state.calcs,...v},v}const d=new o.O(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:b,preservesUnits:!0},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:p,preservesUnits:!0},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:E,preservesUnits:!0},{id:"first",name:"First",description:"First Value",standard:!0,reduce:u,preservesUnits:!0},{id:"min",name:"Min",description:"Minimum Value",standard:!0,preservesUnits:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0,preservesUnits:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"],preservesUnits:!0},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:a,preservesUnits:!0},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:a,preservesUnits:!0},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"],preservesUnits:!0},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0,preservesUnits:!1},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0,preservesUnits:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0,preservesUnits:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0,preservesUnits:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0,preservesUnits:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0,preservesUnits:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0,preservesUnits:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0,preservesUnits:!1},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:h,preservesUnits:!1},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:P,preservesUnits:!1},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0,preservesUnits:!1},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:y=>({allValues:[...y.values]}),preservesUnits:!1},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:y=>({uniqueValues:[...new Set(y.values)]}),preservesUnits:!1}]),c={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0};function g(y,C,f){const D={...c},T=y.values;if(!T)return D;const M=y.type===s.PU.number||y.type===s.PU.time;for(let O=0;O<T.length;O++){let S=T[O];if(O===0&&(D.first=S),D.last=S,S==null){if(C)continue;f&&(S=0)}if(D.count++,S!=null&&!Number.isNaN(S)){const v=D.firstNotNull===null;if(v&&(D.firstNotNull=S),M){if(D.sum+=S,D.allIsNull=!1,D.nonNullCount++,!v){const x=S-D.lastNotNull;D.step>x&&(D.step=x),D.lastNotNull>S?(D.previousDeltaUp=!1,O===T.length-1&&(D.delta+=S)):(D.previousDeltaUp?D.delta+=x:D.delta+=S,D.previousDeltaUp=!0)}S>D.max&&(D.max=S),S<D.min&&(D.min=S),S<D.logmin&&S>0&&(D.logmin=S)}S!==0&&(D.allIsZero=!1),D.lastNotNull=S}}return D.max===-Number.MAX_VALUE&&(D.max=null),D.min===Number.MAX_VALUE&&(D.min=null),D.step===Number.MAX_VALUE&&(D.step=null),D.nonNullCount>0&&(D.mean=D.sum/D.nonNullCount),D.allIsNull&&(D.allIsZero=!1),D.max!==null&&D.min!==null&&(D.range=D.max-D.min),(0,t.isNumber)(D.firstNotNull)&&(0,t.isNumber)(D.lastNotNull)&&(D.diff=D.lastNotNull-D.firstNotNull),(0,t.isNumber)(D.firstNotNull)&&(0,t.isNumber)(D.diff)&&(D.diffperc=D.diff/D.firstNotNull),D}function u(y,C,f){return{first:y.values[0]}}function E(y,C,f){const D=y.values;for(let T=0;T<D.length;T++){const M=D[T];if(M!=null&&!Number.isNaN(M))return{firstNotNull:M}}return{firstNotNull:null}}function p(y,C,f){const D=y.values;return{last:D[D.length-1]}}function b(y,C,f){const D=y.values;let T=D.length-1;for(;T>=0;){const M=D[T--];if(M!=null&&!Number.isNaN(M))return{lastNotNull:M}}return{lastNotNull:null}}function a(y,C,f){if(!(y.type===s.PU.number||y.type===s.PU.time))return{variance:0,stdDev:0};let D=0,T=0,M=0;const O=y.values;for(let S=0;S<O.length;S++){const v=O[S];if(v!=null){M++;let x=T;T+=(v-x)/M,D+=(v-x)*(v-T)}}if(M>0){const S=D/M;return{variance:S,stdDev:Math.sqrt(S)}}return{variance:0,stdDev:0}}function h(y,C,f){const D=y.values;let T=0,M=!0,O=null;for(let S=0;S<D.length;S++){let v=D[S];if(v===null){if(C)continue;f&&(v=0)}!M&&O!==v&&T++,M=!1,O=v}return{changeCount:T}}function P(y,C,f){const D=y.values,T=new Set;for(let M=0;M<D.length;M++){let O=D[M];if(O===null){if(C)continue;f&&(O=0)}T.add(O)}return{distinctCount:T.size}}},34687:(Q,I,e)=>{"use strict";e.d(I,{AS:()=>o.AS,C6:()=>o.C6,CF:()=>E.C,Ct:()=>t.Ct,Dq:()=>r.Dq,Em:()=>o.Em,Fy:()=>n.F,H1:()=>c.H1,H3:()=>o.H3,Js:()=>t.Js,KP:()=>d.Fd,MS:()=>u.M,NS:()=>r.NS,NX:()=>c.NX,Nw:()=>o.Nw,OA:()=>c.OA,PP:()=>l.PP,RE:()=>r.RE,Rt:()=>c.Rt,Uh:()=>c.Uh,ZU:()=>c.ZU,c9:()=>s.c,cV:()=>t.cV,cg:()=>c.cg,d$:()=>c.d$,dA:()=>c.dA,g2:()=>d.g2,gy:()=>o.gy,h9:()=>i.h,hI:()=>r.hI,ix:()=>c.ix,jR:()=>t.jR,kK:()=>r.kK,ks:()=>g.ks,m6:()=>m.m,m_:()=>i.m,p3:()=>c.p3,rW:()=>c.rW,rs:()=>c.rs,sJ:()=>r.sJ});var t=e(1173),n=e(18282),r=e(85200),s=e(57934),o=e(75059),m=e(2514),i=e(97497),l=e(58972),d=e(73060),c=e(77678),g=e(50311),u=e(46294),E=e(39624)},85200:(Q,I,e)=>{"use strict";e.d(I,{Dq:()=>P,NS:()=>h,RE:()=>b,hI:()=>a,kK:()=>y,sJ:()=>p});var t=e(83077),n=e(7029),r=e(24814),s=e(58972),o=e(72693),m=e(8549),i=e(83855),l=e(60005),d=e(21262),c=e(70218),g=e(55008),u=e(16378),E=e(75754);const p=new t.O(()=>[...(0,o.nz)(),...(0,n._)(),...(0,s.P7)(),...(0,i.W)(),r.u]),b=new t.O(()=>[...(0,o.UM)(),...(0,s.Y7)(),...(0,m.i)()]),a=new t.O(()=>[...(0,d._)(),...(0,c.E)(),...(0,l.d)(),...(0,E.m)(),...(0,g.G)(),...(0,u.z)()]);function h(C){const f=p.get(C.id);if(!f)throw new Error("Unknown field matcher: "+C.id);return f.get(C.options)}function P(C){const f=b.get(C.id);if(!f)throw new Error("Unknown frame matcher: "+C.id);return f.get(C.options)}function y(C){const f=a.get(C.id);if(!f)throw new Error("Unknown value matcher: "+C.id);return f.get(C.options)}},58972:(Q,I,e)=>{"use strict";e.d(I,{P7:()=>p,PP:()=>o,Y7:()=>b});var t=e(28240),n=e(54479),r=e(11261),s=e(1173),o=(a=>(a.exclude="exclude",a.include="include",a))(o||{});const m={id:s.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:a=>{const P=l(new Set([a]));return(y,C,f)=>a===y.name||a===(0,t.Ct)(y,C,f)||!!(P&&P(y,C,f))},getOptionsDisplayText:a=>`Field name: ${a}`},i={id:s.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:a=>{const{names:h,mode:P="include"}=a,y=new Set(h??[]),C=l(y),f=(D,T,M)=>y.has(D.name)||y.has((0,t.Ct)(D,T,M))||!!(C&&C(D,T,M));return P==="exclude"?(D,T,M)=>!f(D,T,M):f},getOptionsDisplayText:a=>{const{names:h,mode:P}=a,y=(h??[]).join(", ");return P==="exclude"?`All except: ${y}`:`All of: ${y}`}};function l(a){let h;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(a.has(r.Bc)?h=(y,C)=>!!y.labels&&y.labels?.__name__===y.name:(a.has("Time")||a.has("time"))&&(h=(y,C)=>C.meta?.typeVersion==null&&y.type===r.PU.time)),h}const d={id:s.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:a=>{const h=u(a);return(P,y,C)=>{const f=(0,t.Ct)(P,y,C);return!!h&&h.test(f)}},getOptionsDisplayText:a=>`Field name by pattern: ${a}`},c={id:s.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:a=>(h,P,y)=>P.refId===a,getOptionsDisplayText:a=>`Math all fields returned by query with reference ID: ${a}`},g={id:s.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:a=>{const h=d.get(a?.pattern||""),P=i.get({mode:"include",names:a?.names??[]});return(y,C,f)=>P(y,C,f)||h(y,C,f)},getOptionsDisplayText:a=>{const h=a?.pattern??"",P=a?.names?.join(",")??"";return`Field name by pattern: ${h} or names: ${P}`}},u=a=>{if(a)try{return(0,n.dO)(a)}catch(h){console.error(h);return}},E={id:s.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:a=>{const h=(0,n.dO)(a);return P=>h.test(P.name||"")},getOptionsDisplayText:a=>`Frame name: ${a}`};function p(){return[m,d,i,g,c]}function b(){return[E]}},72693:(Q,I,e)=>{"use strict";e.d(I,{UM:()=>C,Yg:()=>c,nz:()=>y,zx:()=>E});var t=e(11261),n=e(85200),r=e(1173);const s={id:r.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const D=f.map(T=>(0,n.NS)(T));return(T,M,O)=>{for(const S of D)if(S(T,M,O))return!0;return!1}},getOptionsDisplayText:f=>{let D="";for(const T of f){D.length>0&&(D+=" OR ");const M=n.sJ.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},o={id:r.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const D=f.map(T=>(0,n.Dq)(T));return T=>{for(const M of D)if(M(T))return!0;return!1}},getOptionsDisplayText:f=>{let D="";for(const T of f){D.length>0&&(D+=" OR ");const M=n.RE.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},m={id:r.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const D=f.map(T=>(0,n.NS)(T));return(T,M,O)=>{for(const S of D)if(!S(T,M,O))return!1;return!0}},getOptionsDisplayText:f=>{let D="";for(const T of f){D.length>0&&(D+=" AND ");const M=n.sJ.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},i={id:r.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const D=f.map(T=>(0,n.Dq)(T));return T=>{for(const M of D)if(!M(T))return!1;return!0}},getOptionsDisplayText:f=>{let D="";for(const T of f){D.length>0&&(D+=" AND ");const M=n.RE.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},l={id:r.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:f=>{const D=(0,n.NS)(f);return(T,M,O)=>!D(T,M,O)},getOptionsDisplayText:f=>{const D=n.sJ.get(f.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(f.options):D.name)}},d={id:r.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:f=>{const D=(0,n.Dq)(f);return T=>!D(T)},getOptionsDisplayText:f=>{const D=n.RE.get(f.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(f.options):D.name)}},c=f=>!0,g=f=>!0,u=f=>!1,E=f=>f.type!==t.PU.time,p=f=>!1,b={id:r.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:f=>c,getOptionsDisplayText:f=>"Always"},a={id:r.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:f=>g,getOptionsDisplayText:f=>"Always"},h={id:r.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:f=>u,getOptionsDisplayText:f=>"Never"},P={id:r.cV.neverMatch,name:"No Frames",description:"Never Match",get:f=>p,getOptionsDisplayText:f=>"Never"};function y(){return[s,m,l,b,h]}function C(){return[o,i,d,a,P]}},97497:(Q,I,e)=>{"use strict";e.d(I,{h:()=>r,m:()=>n});var t=e(83077),n=(s=>(s.Combine="combine",s.CalculateNewFields="calculateNewFields",s.CreateNewVisualization="createNewVisualization",s.Filter="filter",s.PerformSpatialOperations="performSpatialOperations",s.Reformat="reformat",s.ReorderAndRename="reorderAndRename",s))(n||{});const r=new t.O},2514:(Q,I,e)=>{"use strict";e.d(I,{m:()=>d});var t=e(62467),n=e(69862),r=e(81160),s=e(85200),o=e(97497);const m=(g,u)=>E=>{const p=o.h.get(g.id);if(!p)return E;const a={...p.transformation.defaultOptions??{},...g.options},h=g.filter?.options?(0,s.Dq)(g.filter):void 0;return E.pipe((0,n.Z)(P=>(0,t.of)(i(P,h)).pipe(p.transformation.operator(a,u),l(P,p,h))))};function i(g,u){return u?g.filter(E=>u(E)):g}const l=(g,u,E)=>p=>p.pipe((0,r.T)(b=>{if(b===g)return b;if(E){let a=0;const h=g.filter((P,y)=>{const C=!E(P);return C&&!a&&(a=y),C});h.length&&b.splice(a,0,...h)}return b}));function d(g,u,E){const p=(0,t.of)(u);if(!g.length)return p;const b=[],a=E??{interpolate:h=>h};for(let h=0;h<g.length;h++){const P=g[h];if(c(P))b.push(P(a));else{if(P.disabled)continue;b.push(m(P,a))}}return p.pipe.apply(p,b)}function c(g){return typeof g=="function"}},57934:(Q,I,e)=>{"use strict";e.d(I,{c:()=>he});var t=e(66350),n=e(82150),r=e(50311),s=e(34125),o=e(64224),m=e(35602),i=e(1173),l=e(18282);const d={id:l.F.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(re,De)=>Fe=>{const Ee={};return re.include&&(Ee.include={id:i.jR.byRefId,options:re.include}),re.exclude&&(Ee.exclude={id:i.jR.byRefId,options:re.exclude}),Fe.pipe(o.I.operator(Ee,De))}};var c=e(73376),g=e(15400),u=e(81160),E=e(28240),p=e(81010);const b={id:l.F.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:re=>{for(const De of re)for(const Fe of De.fields)if(Fe.type==="time")return p.M.Applicable;return p.M.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:(re,De)=>Fe=>Fe.pipe((0,u.T)(Ee=>a(re,Ee,De)))},a=({timeField:re,outputFormat:De,timezone:Fe},Ee,Me)=>!Array.isArray(Ee)||Ee.length===0?Ee:((0,E.Fm)(Ee),De=Me?.interpolate(De)??De,Ee.map(ze=>({...ze,fields:ze.fields.map(xe=>(xe.state?.displayName===re&&(xe=(0,r.Xv)(xe,De,{timeZone:Fe})),xe))})));var h=e(25094),P=e(68133),y=e(11261),C=e(85200);const f="Time",D="Time",T="Value",M=p.N.Empty,O=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,S={id:l.F.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:f,rowField:D,valueField:T},isApplicable:re=>{let De=0;for(const Fe of re)De+=Fe.fields.length;return De>=3?p.M.Applicable:p.M.NotApplicable},isApplicableDescription:re=>{let De=0;for(const Fe of re)De+=Fe.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${De} fields.`},operator:re=>De=>De.pipe((0,u.T)(Fe=>{const Ee=re.columnField||f,Me=re.rowField||D,ze=re.valueField||T,xe=re.emptyValue||M;if(Fe.length!==1)return Fe;const We=Fe[0],be=x(We,Ee),pe=x(We,Me),Ue=x(We,ze),we=`${Me}\\${Ee}`;if(!be||!pe||!Ue)return Fe;const je=v(be.values),He=v(pe.values),rt={};for(let Ve=0;Ve<Ue.values.length;Ve++){const Oe=be.values[Ve],Ne=pe.values[Ve],ye=Ue.values[Ve];rt[Oe]||(rt[Oe]={}),rt[Oe][Ne]=ye}const Je=[{name:we,values:He,type:y.PU.string,config:{}}];for(const Ve of je){let Oe=[];for(const Ne of He){const ye=rt[Ve][Ne]??A(xe);Oe.push(ye)}O&&typeof Ve=="number"&&(Ue.config={...Ue.config,displayNameFromDS:void 0}),Je.push({name:Ve.toString(),values:Oe,config:Ue.config,type:Ue.type})}return[{fields:Je,length:He.length}]}))};function v(re){const De=new Set;for(let Fe=0;Fe<re.length;Fe++)De.add(re[Fe]);return Array.from(De)}function x(re,De){for(let Fe=0;Fe<re.fields.length;Fe++){const Ee=re.fields[Fe];let Me;if(O?Me=C.sJ.get(i.Ct.byName).get(De)(Ee,re,[re]):Me=De===(0,E.Ct)(Ee),Me)return Ee}return null}function A(re){switch(re){case p.N.False:return!1;case p.N.True:return!0;case p.N.Null:return null;case p.N.Empty:default:return""}}var R=e(77678),B=e(41511),U=e(6829),w=e(67641);const K=10,N={id:l.F.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:K},operator:(re,De)=>Fe=>Fe.pipe((0,u.T)(Ee=>{let Me=K;return re.limitField!==void 0&&(typeof re.limitField=="string"?(0,w.w)()?Me=parseInt(De.interpolate(re.limitField),10):Me=parseInt(re.limitField,10):Me=re.limitField),Ee.map(ze=>ze.length>Me?{...ze,fields:ze.fields.map(xe=>({...xe,values:xe.values.slice(0,Me)})),length:Me}:ze)}))};var L=e(58140),V=e(64586),F=e(82280);const z={id:l.F.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:re=>De=>De.pipe((0,u.T)(Fe=>{const Ee=Y(re.renameByName);return!Array.isArray(Fe)||Fe.length===0?Fe:Fe.map(Me=>({...Me,fields:Ee(Me)}))}))},Y=re=>De=>!re||Object.keys(re).length===0?De.fields:De.fields.map(Fe=>{const Ee=(0,E.Ct)(Fe,De),Me=re[Ee];return typeof Me!="string"||Me.length===0?Fe:{...Fe,config:{...Fe.config,displayName:Me},state:{...Fe.state,displayName:Me}}}),H={id:l.F.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:re=>re.length>1?p.M.NotPossible:p.M.Applicable,operator:(re,De)=>Fe=>Fe.pipe(m.D.operator({include:re.includeByName?{names:k(re.includeByName)}:void 0,exclude:{names:k(re.excludeByName)}},De),F.x.operator(re,De),z.operator(re,De))},k=re=>re?Object.keys(re).filter(De=>re[De]):[];var ee=e(21128),ie=e(54479);const fe={id:l.F.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:re=>De=>De.pipe((0,u.T)(Fe=>!Array.isArray(Fe)||Fe.length===0?Fe:Fe.map(q(re))))},q=re=>De=>{const Fe=(0,ie.dO)(re.regex),Ee=De.fields.map(Me=>{const ze=(0,E.Ct)(Me,De);if(!Fe.test(ze))return Me;const xe=ze.replace(Fe,re.renamePattern);return{...Me,config:{...Me.config,displayName:xe},state:{...Me.state,displayName:xe}}});return{...De,fields:Ee}};var Z=e(2543),J=e(37471),G=e(14236),ne=e(19845);const te={id:l.F.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:re=>De=>De.pipe((0,u.T)(Fe=>{if(!Array.isArray(Fe)||Fe.length===0||(Fe=Fe.filter(We=>We.length>0),!(0,ne.jq)(Fe)))return Fe;const Ee={},Me=new Set,ze=new J.k,xe={name:y.aI,values:[],config:{},type:y.PU.string};for(let We=0;We<Fe.length;We++){const be=Fe[We];for(let pe=0;pe<be.fields.length;pe++){const Ue=be.fields[pe];if(Ue.type===y.PU.time){Ee[We]=pe,Me.has(y.LE)||(ze.addField(oe(Ue,y.LE)),ze.addField(xe),Me.add(y.LE));continue}Me.has(y.Bc)||(ze.addField(oe(Ue,y.Bc)),Me.add(y.Bc))}}for(let We=0;We<Fe.length;We++){const be=Fe[We];for(let pe=0;pe<be.length;pe++){const Ue=Ee[We],we=Ue===0?1:0;ze.add({[y.LE]:be.fields[Ue].values[pe],[y.aI]:(0,E.Ri)(be),[y.Bc]:be.fields[we].values[pe]})}}return[(0,G.ES)(ze,0,!0)]}))},oe=(re,De)=>({...(0,Z.omit)(re,["values","state","labels","config","name"]),name:De,values:[],config:{...(0,Z.omit)(re.config,["displayName","displayNameFromDS"])}}),le={id:l.F.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(re,De)=>Fe=>Fe.pipe((0,u.T)(Ee=>!Array.isArray(Ee)||Ee.length===0||!re?.sort?.length?Ee:ue(Ee,re.sort,De)))};function ue(re,De,Fe){return re.map(Ee=>{const Me=Te(Ee,De,Fe);return Me.length&&Me[0].index!=null?(0,G.ES)(Ee,Me[0].index,Me[0].desc):Ee})}function Te(re,De,Fe){return De.map(Ee=>Ee.index!=null?Ee:(0,w.w)()?{...Ee,index:re.fields.findIndex(Me=>Fe.interpolate(Ee.field)===(0,E.Ct)(Me,re))}:{...Ee,index:re.fields.findIndex(Me=>Ee.field===(0,E.Ct)(Me,re))})}const he={noopTransformer:V.W,filterFieldsTransformer:o.z,filterFieldsByNameTransformer:m.D,filterFramesTransformer:o.I,filterFramesByRefIdTransformer:d,filterByValueTransformer:c.Sv,formatStringTransformer:g.yt,formatTimeTransformer:b,orderFieldsTransformer:F.x,organizeFieldsTransformer:H,reduceTransformer:ee.Wj,concatenateTransformer:n.vz,calculateFieldTransformer:t.SC,joinByFieldTransformer:B.L,seriesToColumnsTransformer:B.L,seriesToRowsTransformer:te,renameFieldsTransformer:z,labelsToFieldsTransformer:U.V,ensureColumnsTransformer:s.b,groupByTransformer:h.of,sortByTransformer:le,mergeTransformer:L.o,renameByRegexTransformer:fe,histogramTransformer:R.OA,convertFieldTypeTransformer:r.zM,groupingToMatrixTransformer:S,limitTransformer:N,groupToNestedTable:P._}},66350:(Q,I,e)=>{"use strict";e.d(I,{Bp:()=>h,SC:()=>T,UY:()=>a,Uj:()=>C,ip:()=>P,sw:()=>K});var t=e(2543),n=e.n(t),r=e(81160),s=e(14236),o=e(28240),m=e(11261),i=e(39070),l=e(11710),d=e(27618),c=e(75059),g=e(85200),u=e(1173),E=e(34125),p=e(18282),b=e(64586),a=(N=>(N.ReduceRow="reduceRow",N.CumulativeFunctions="cumulativeFunctions",N.WindowFunctions="windowFunctions",N.BinaryOperation="binary",N.UnaryOperation="unary",N.Index="index",N))(a||{}),h=(N=>(N.Percentage="percentage",N.Fixed="fixed",N))(h||{}),P=(N=>(N.Trailing="trailing",N.Centered="centered",N))(P||{});const y={reducer:c.gy.sum},C={reducer:c.gy.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},f={left:"",operator:l.k.Add,right:""},D={operator:d._.Abs,fieldName:""},T={id:p.F.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:c.gy.sum}},operator:(N,L)=>V=>{const F=N&&N.timeSeries!==!1?E.b.operator(null,L):b.W.operator({},L);return N.alias!=null&&(N.alias=L.interpolate(N.alias)),V.pipe(F,(0,r.T)(z=>{const Y=N.mode??"reduceRow";let H;switch(Y){case"reduceRow":H=R((0,t.defaults)(N.reduce,y),z);break;case"cumulativeFunctions":H=A((0,t.defaults)(N.cumulative,y),z);break;case"windowFunctions":H=M((0,t.defaults)(N.window,C),z);break;case"unary":H=w((0,t.defaults)(N.unary,D),z);break;case"binary":const k={...N.binary,left:L.interpolate(N.binary?.left),right:L.interpolate(N.binary?.right)};H=U((0,t.defaults)(k,f),z);break;case"index":return z.map(ee=>{const ie=[...Array(ee.length).keys()];if(N.index?.asPercentile)for(let q=0;q<ie.length;q++)ie[q]=ie[q]/ie.length;const fe={name:N.alias??"Row",type:m.PU.number,values:ie,config:N.index?.asPercentile?{unit:"percentunit"}:{}};return{...ee,fields:N.replaceFields?[fe]:[...ee.fields,fe]}})}return H?z.map(k=>{const ee=H(k);if(!ee)return k;const ie={name:K(N),type:m.PU.number,config:{},values:ee};let fe=[];if(N.replaceFields){const{timeField:q}=(0,s.KR)(k);q&&N.timeSeries!==!1?fe=[q,ie]:fe=[ie]}else fe=[...k.fields,ie];return{...k,fields:fe}}):z}))}};function M(N,L){if(N.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let V=(0,g.NS)({id:u.Ct.numeric});return N.field&&(V=(0,g.NS)({id:u.Ct.byNames,options:{names:[N.field]}})),F=>{const z=Math.ceil(N.windowSize*(N.windowSizeMode==="percentage"?F.length:1));let Y=null;for(const H of F.fields)if(V(H,F,L)){Y=H;break}if(Y){if(![c.gy.mean,c.gy.stdDev,c.gy.variance].includes(N.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${N.reducer}`);return N.windowAlignment==="centered"?S(F,N.reducer,Y,z):O(F,N.reducer,Y,z)}}}function O(N,L,V,F){const z=[];let Y=0,H=0;for(let k=0;k<N.length;k++)if(L===c.gy.mean){const ee=V.values[k];ee!=null&&(H++,Y+=ee,k>F-1&&(Y-=V.values[k-F],H--)),z.push(H===0?0:Y/H)}else if(L===c.gy.variance){const ee=Math.max(0,k-F+1),ie=k+1;z.push(v(V.values.slice(ee,ie)))}else if(L===c.gy.stdDev){const ee=Math.max(0,k-F+1),ie=k+1;z.push(x(V.values.slice(ee,ie)))}return z}function S(N,L,V,F){const z=[];let Y=0,H=0;const k=Math.ceil(F/2)-1,ee=Math.floor(F/2);for(let ie=0;ie<N.length;ie++){const fe=ie-ee,q=ie+k;if(L===c.gy.mean){if(ie===0)for(let Z=0;Z<k+1&&Z<V.values.length;Z++)V.values[Z]!=null&&(Y+=V.values[Z],H++);else q<V.values.length&&V.values[q]!=null&&(Y+=V.values[q],H++),fe>0&&V.values[fe-1]!=null&&(Y-=V.values[fe-1],H--);z.push(H===0?0:Y/H)}else if(L===c.gy.variance){const Z=V.values.slice(Math.max(0,fe),Math.min(q+1,V.values.length));z.push(v(Z))}else if(L===c.gy.stdDev){const Z=V.values.slice(Math.max(0,fe),Math.min(q+1,V.values.length));z.push(x(Z))}}return z}function v(N){if(N.length<1)return 0;let L=0,V=0,F=0;for(let Y=0;Y<N.length;Y++){const H=N[Y];if(H!=null){F++;let k=V;V+=(H-k)/F,L+=(H-k)*(H-V)}}return F===0?0:L/F}function x(N){return Math.sqrt(v(N))}function A(N,L){let V=(0,g.NS)({id:u.Ct.numeric});if(N.field&&(V=(0,g.NS)({id:u.Ct.byNames,options:{names:[N.field]}})),![c.gy.mean,c.gy.sum].includes(N.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${N.reducer}`);return F=>{let z=null;for(const k of F.fields)if(V(k,F,L)){z=k;break}if(!z)return;const Y=[];let H=0;for(let k=0;k<F.length;k++)H+=z.values[k]??0,N.reducer===c.gy.sum?Y.push(H):N.reducer===c.gy.mean&&Y.push(H/(k+1));return Y}}function R(N,L){let V=(0,g.NS)({id:u.Ct.numeric});N.include&&N.include.length&&(V=(0,g.NS)({id:u.Ct.byNames,options:{names:N.include}}));const F=c.AS.get(N.reducer);if(!F)throw new Error(`Unknown reducer: ${N.reducer}`);const z=F.reduce??c.H3,Y=N.nullValueMode===i.UW.Ignore,H=N.nullValueMode===i.UW.AsZero;return k=>{const ee=[];for(const Z of k.fields)V(Z,k,L)&&ee.push(Z.values);const ie=ee.length,fe={name:"temp",values:new Array(ie),type:m.PU.number,config:{}},q=[];for(let Z=0;Z<k.length;Z++){for(let J=0;J<ie;J++)fe.values[J]=ee[J][Z];q.push(z(fe,Y,H)[N.reducer])}return q}}function B(N,L,V){if(!L)return;for(const z of N.fields)if(L===(0,o.Ct)(z,N,V))return z.type===m.PU.boolean?z.values.map(Y=>Y?1:0):z.values;const F=parseFloat(L);if(!isNaN(F))return new Array(N.length).fill(F)}function U(N,L){const V=l.b.getIfExists(N.operator);return F=>{const z=B(F,N.left,L),Y=B(F,N.right,L);if(!z||!Y||!V)return;const H=new Array(z.length);for(let k=0;k<H.length;k++)H[k]=V.operation(z[k],Y[k]);return H}}function w(N,L){const V=d.j.getIfExists(N.operator);return F=>{let z=[];for(const H of F.fields)N.fieldName===(0,o.Ct)(H,F,L)&&H.type===m.PU.number&&(z=H.values);if(!z.length||!V)return;const Y=new Array(z.length);for(let H=0;H<Y.length;H++)Y[H]=V.operation(z[H]);return Y}}function K(N){if(N.alias?.length)return N.alias;switch(N.mode){case"cumulativeFunctions":{const{cumulative:L}=N;return`cumulative ${L?.reducer??""}${L?.field?`(${L.field})`:""}`}case"windowFunctions":{const{window:L}=N;return`${L?.windowAlignment??""} moving ${L?.reducer??""}${L?.field?`(${L.field})`:""}`}case"unary":{const{unary:L}=N;return`${L?.operator??""}${L?.fieldName?`(${L.fieldName})`:""}`}case"binary":{const{binary:L}=N;return`${L?.left??""} ${L?.operator??""} ${L?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const L=c.AS.getIfExists(N.reduce?.reducer);if(L)return L.name}break;case"index":return"Row"}return"math"}},82150:(Q,I,e)=>{"use strict";e.d(I,{vz:()=>o,x1:()=>s});var t=e(81160),n=e(11261),r=e(18282),s=(i=>(i.Drop="drop",i.FieldName="field",i.Label="label",i))(s||{});const o={id:r.F.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:i=>l=>l.pipe((0,t.T)(d=>!Array.isArray(d)||d.length<2?d:[m(d,i)]))};function m(i,l){let d=!0,c=i[0].length;const g=l.frameNameLabel??"frame";let u=[];for(const E of i){c!==E.length&&(d=!1,c=Math.max(c,E.length));for(const p of E.fields){const b={...p};b.state=void 0,E.name&&(l.frameNameMode==="drop"||(l.frameNameMode==="label"?(b.labels={...p.labels},b.labels[g]=E.name):!b.name||b.name===n.Bc?b.name=E.name:b.name=`${E.name} \xB7 ${p.name}`)),u.push(b)}}return d||(u=u.map(E=>{if(E.values.length===c)return E;const p=E.values.slice();return p.length=c,{...E,values:p}})),{fields:u,length:c}}},50311:(Q,I,e)=>{"use strict";e.d(I,{Xv:()=>p,ks:()=>a,s7:()=>d,zM:()=>i});var t=e(81160),n=e(53531),r=e(11261),s=e(85200),o=e(1173),m=e(18282);const i={id:m.F.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(P,y)=>C=>C.pipe((0,t.T)(f=>i.transformer(P,y)(f))),transformer:P=>y=>!Array.isArray(y)||y.length===0?y:l(P,y)??[]};function l(P,y){if(!P.conversions.length)return y;const C=y.map(f=>({...f}));for(const f of P.conversions){if(!f.targetField)continue;const D=s.sJ.get(o.Ct.byName).get(f.targetField);for(const T of C)T.fields=T.fields.map(M=>D(M,T,C)?d(M,f):M)}return C}function d(P,y){switch(y.destinationType){case r.PU.time:return a(P,y.dateFormat);case r.PU.number:return u(P);case r.PU.string:return p(P,y.dateFormat,{timeZone:y.timezone},y.joinWith);case r.PU.boolean:return E(P);case r.PU.enum:return h(P,y.enumConfig);case r.PU.other:return b(P);default:return P}}const c=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function g(P,y){let C=y?{format:y}:void 0;const f=P.values.slice();let D=f.find(M=>M!=null),T=typeof D=="string"&&c.test(D);for(let M=0;M<f.length;M++)if(f[M]){let O=T?Date.parse(f[M]):(0,n.b)(f[M],C).valueOf();f[M]=Number.isFinite(O)?O:null}else f[M]=null;return{...P,type:r.PU.time,values:f}}function u(P){const y=P.values.slice(),C=y.some(f=>typeof f=="string");for(let f=0;f<y.length;f++){let D=y[f];C&&D!=null&&typeof D=="string"&&(D=D.replace(/,/g,""));const T=+D;y[f]=Number.isFinite(T)?T:null}return{...P,type:r.PU.number,values:y}}function E(P){const y=P.values.slice();for(let C=0;C<y.length;C++)y[C]=!!y[C];return{...P,type:r.PU.boolean,values:y}}function p(P,y,C,f){let D=P.values;switch(P.type){case r.PU.time:D=D.map(T=>(0,n.b)(T,C).format(y));break;case r.PU.other:D=D.map(T=>f?.length&&Array.isArray(T)?T.join(f):JSON.stringify(T));break;default:D=D.map(T=>`${T}`)}return{...P,type:r.PU.string,values:D}}function b(P){const y=P.values.slice();for(let C=0;C<y.length;C++)try{y[C]=JSON.parse(y[C])}catch{y[C]=null}return{...P,type:r.PU.other,values:y}}function a(P,y){const C=typeof P.values[0]=="number";return P.type===r.PU.time&&C?P:C?{...P,type:r.PU.time}:g(P,y)}function h(P,y){const C={...y},f=P.values.slice(),D=new Map;if(C.text&&C.text.length>0)for(let T=0;T<C.text.length;T++)D.set(C.text[T],T);else return P;for(let T=0;T<f.length;T++){const M=f[T];f[T]=D.get(M)}return{...P,config:{...P.config,type:{enum:C}},type:r.PU.enum,values:f}}},34125:(Q,I,e)=>{"use strict";e.d(I,{b:()=>o});var t=e(81160),n=e(14236),r=e(18282),s=e(41511);const o={id:r.F.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(i,l)=>d=>d.pipe((0,t.T)(c=>o.transformer(i,l)(c))),transformer:(i,l)=>d=>{const c=m(d);return d.length>1&&c?s.L.transformer({byField:c},l)(d):d}};function m(i){let l;for(const d of i){const{timeField:c}=(0,n.KR)(d);if(!c)return;if(!l)l=c.name;else if(l!==c.name)return}return l}},64224:(Q,I,e)=>{"use strict";e.d(I,{I:()=>m,z:()=>o});var t=e(81160),n=e(85200),r=e(18282),s=e(64586);const o={id:r.F.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(i,l)=>d=>!i.include&&!i.exclude?d.pipe(s.W.operator({},l)):(typeof i.include?.options=="string"?i.include.options=l.interpolate(i.include?.options):typeof i.include?.options?.pattern=="string"&&(i.include.options.pattern=l.interpolate(i.include?.options.pattern)),typeof i.exclude?.options=="string"?i.exclude.options=l.interpolate(i.exclude?.options):typeof i.exclude?.options?.pattern=="string"&&(i.exclude.options.pattern=l.interpolate(i.exclude?.options.pattern)),d.pipe((0,t.T)(c=>{const g=i.include?(0,n.NS)(i.include):null,u=i.exclude?(0,n.NS)(i.exclude):null,E=[];for(const p of c){const b=[];for(let h=0;h<p.fields.length;h++){const P=p.fields[h];if(u){if(u(P,p,c))continue;g||b.push(P)}g&&g(P,p,c)&&b.push(P)}if(!b.length)continue;const a={...p,fields:b};E.push(a)}return E})))},m={id:r.F.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(i,l)=>d=>!i.include&&!i.exclude?d.pipe(s.W.operator({},l)):d.pipe((0,t.T)(c=>{const g=i.include?(0,n.Dq)(i.include):null,u=i.exclude?(0,n.Dq)(i.exclude):null,E=[];for(const p of c){if(u){if(u(p))continue;g||E.push(p)}g&&g(p)&&E.push(p)}return E}))}},35602:(Q,I,e)=>{"use strict";e.d(I,{D:()=>s,R:()=>o});var t=e(1173),n=e(64224),r=e(18282);const s={id:r.F.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(m,i)=>l=>l.pipe(n.z.operator({include:o(i,m.include,m.byVariable),exclude:o(i,m.exclude,m.byVariable)},i))},o=(m,i,l)=>{if(!i)return;const{names:d,pattern:c,variable:g}=i;if(l&&g){const u=m.interpolate(g);if(/\{.*\}/.test(u)){const E=u.slice(1).slice(0,-1).split(",");return{id:t.Ct.byNames,options:{names:E}}}return{id:t.Ct.byNames,options:{names:u.split(",")}}}if(!((!Array.isArray(d)||d.length===0)&&!c))return c?!Array.isArray(d)||d.length===0?{id:t.Ct.byRegexp,options:c}:{id:t.Ct.byRegexpOrNames,options:i}:{id:t.Ct.byNames,options:{names:d}}}},73376:(Q,I,e)=>{"use strict";e.d(I,{Sm:()=>d,Sv:()=>c,j4:()=>l});var t=e(81160),n=e(28240),r=e(85200),s=e(1173),o=e(18282),m=e(64586),i=e(67641),l=(E=>(E.exclude="exclude",E.include="include",E))(l||{}),d=(E=>(E.all="all",E.any="any",E))(d||{});const c={id:o.F.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(E,p)=>b=>{const a=E.filters,h=E.match==="all",P=E.type==="include";if(!Array.isArray(a)||a.length===0)return b.pipe(m.W.operator({},p));const y=[];return(0,i.w)()&&y.push(...a.map(C=>{if(C.config.id===s.Js.between){const f=p.interpolate(C.config.options.from),D=p.interpolate(C.config.options.to);return{...C,config:{...C.config,options:{...C.config.options,to:D,from:f}}}}else{if(C.config.id===s.Js.regex)return C;if(C.config.options.value){const f=p.interpolate(C.config.options.value),D={...C,config:{...C.config,options:{...C.config.options,value:f}}};return D.config.options.value=f,D}}return C})),b.pipe((0,t.T)(C=>{if(C.length===0)return C;const f=[],D=u(C);for(const T of C){const M=new Set;let O;(0,i.w)()?O=g(y,D):O=g(a,D);for(let x=0;x<T.length;x++){if(M.has(x))continue;let A=!0;for(const R of O){const B=R(x,T,C);if(!h&&B){A=!0;break}if(h&&!B){A=!1;break}A=B}A&&M.add(x)}const S=[],v=P?M.size:C[0].length-M.size;for(const x of T.fields){const A=[];for(let R=0;R<T.length;R++){if(P&&M.has(R)){A.push(x.values[R]);continue}if(!P&&!M.has(R)){A.push(x.values[R]);continue}}S.push({...x,values:A,state:{}})}f.push({...T,fields:S,length:v})}return f}))}},g=(E,p)=>{const b=()=>!1;return E.map(a=>{const h=p[a.fieldName]??-1;if(h<0)return console.warn(`[FilterByValue] Could not find index for field name: ${a.fieldName}`),b;const P=(0,r.kK)(a.config);return(y,C,f)=>P(y,C.fields[h],C,f)})},u=E=>{const p={};for(const b of E)b.fields.forEach((a,h)=>{const P=(0,n.Ct)(a,b,E);p[P]=h});return p}},15400:(Q,I,e)=>{"use strict";e.d(I,{gs:()=>m,yt:()=>d});var t=e(81160),n=e(11261),r=e(85200),s=e(1173),o=e(18282),m=(g=>(g.UpperCase="Upper Case",g.LowerCase="Lower Case",g.SentenceCase="Sentence Case",g.TitleCase="Title Case",g.PascalCase="Pascal Case",g.CamelCase="Camel Case",g.SnakeCase="Snake Case",g.KebabCase="Kebab Case",g.Trim="Trim",g.Substring="Substring",g))(m||{});const i=g=>{const u=g.split(" ");for(let E=0;E<u.length;E++)u[E]=u[E].charAt(0).toUpperCase()+u[E].slice(1).toLowerCase();return u},l=g=>u=>u.values.map(E=>{switch(g.outputFormat){case"Upper Case":return E.toUpperCase();case"Lower Case":return E.toLowerCase();case"Sentence Case":return E.charAt(0).toUpperCase()+E.slice(1);case"Title Case":return i(E).join(" ");case"Pascal Case":return i(E).join("");case"Camel Case":return E=i(E).join(""),E.charAt(0).toLowerCase()+E.slice(1);case"Snake Case":return E.toLowerCase().split(" ").join("_");case"Kebab Case":return E.toLowerCase().split(" ").join("-");case"Trim":return E.trim();case"Substring":return E.substring(g.substringStart,g.substringEnd)}}),d={id:o.F.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:g=>u=>u.pipe((0,t.T)(E=>{if(E.length===0)return E;const p=r.sJ.get(s.Ct.byName).get(g.stringField),b=l(g),a=c(p,b);return E.map(h=>({...h,fields:a(h,E)}))}))},c=(g,u)=>(E,p)=>E.fields.map(b=>{if(g(b,E,p)){const a=u(b);return{...b,type:n.PU.string,values:a}}return b})},25094:(Q,I,e)=>{"use strict";e.d(I,{Ce:()=>p,R3:()=>l,Y2:()=>E,of:()=>d});var t=e(81160),n=e(14236),r=e(28240),s=e(81010),o=e(11261),m=e(75059),i=e(18282),l=(b=>(b.aggregate="aggregate",b.groupBy="groupby",b))(l||{});const d={id:i.F.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:b=>{let a=0;for(const h of b)h.fields.length>a&&(a=h.fields.length);return a>=2?s.M.Applicable:s.M.NotApplicable},isApplicableDescription:b=>{let a=0;for(const h of b)h.fields.length>a&&(a=h.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${a}`},operator:b=>a=>a.pipe((0,t.T)(h=>{if(!Object.keys(b.fields).find(C=>b.fields[C].operation==="groupby"))return h;const y=[];for(const C of h){const f=C.fields.filter(M=>c(M,b));if(f.length===0)continue;const D=E(C,f),T=p(f,D);for(const M of C.fields){if(!g(M,b))continue;const O=(0,r.Ct)(M),S=b.fields[O].aggregations,v={};D.forEach(x=>{const A=x[O],R=(0,m.Nw)({field:A,reducers:S});for(const B of S)Array.isArray(v[B])||(v[B]=[]),v[B].push(R[B])});for(const x of S){const A={name:`${O} (${x})`,values:v[x]??[],type:o.PU.other,config:{}};A.type=u(x,M,A),T.push(A)}}y.push({fields:T,length:D.size})}return y}))},c=(b,a)=>{const h=(0,r.Ct)(b);return a?.fields[h]?.operation==="groupby"},g=(b,a)=>{const h=(0,r.Ct)(b);return a?.fields[h]?.operation==="aggregate"&&Array.isArray(a?.fields[h].aggregations)&&a?.fields[h].aggregations.length>0};function u(b,a,h){switch(b){case m.gy.allIsNull:return o.PU.boolean;case m.gy.last:case m.gy.lastNotNull:case m.gy.first:case m.gy.firstNotNull:return a.type;default:return(0,n.dF)(h)??o.PU.string}}function E(b,a){const h=new Map;for(let P=0;P<b.length;P++){const y=String(a.map(f=>f.values[P])),C=h.get(y)??{};h.has(y)||h.set(y,C);for(let f of b.fields){const D=(0,r.Ct)(f);C[D]||(C[D]={name:D,type:f.type,config:{...f.config},values:[]}),C[D].values.push(f.values[P])}}return h}function p(b,a){const h=[];for(const P of b){const y=[],C=(0,r.Ct)(P);a.forEach(f=>{y.push(f[C].values[0])}),h.push({name:P.name,type:P.type,config:{...P.config},values:y})}return h}},68133:(Q,I,e)=>{"use strict";e.d(I,{_:()=>c,l:()=>l});var t=e(81160),n=e(14236),r=e(28240),s=e(11261),o=e(75059),m=e(25094),i=e(18282);const l=!0;var d=(a=>(a.aggregate="aggregate",a.groupBy="groupby",a))(d||{});const c={id:i.F.groupToNestedTable,name:"Group to nested tables",description:"Group data by a field value and create nested tables with the grouped data",defaultOptions:{showSubframeHeaders:l,fields:{}},operator:a=>h=>h.pipe((0,t.T)(P=>{if(!Object.keys(a.fields).find(f=>a.fields[f].operation==="groupby"))return P;const C=[];for(const f of P){const D=f.fields.filter(S=>u(S,a));if(D.length===0)continue;const T=(0,m.Y2)(f,D),M=(0,m.Ce)(D,T),O=b(T,a);for(let S=0;S<f.fields.length;S++){const v=f.fields[S];if(!E(v,a))continue;const x=(0,r.Ct)(v),A=a.fields[x].aggregations,R={};T.forEach(B=>{const U=B[x],w=(0,o.Nw)({field:U,reducers:A});for(const K of A)Array.isArray(R[K])||(R[K]=[]),R[K].push(w[K])});for(const B of A){const U={name:`${x} (${B})`,values:R[B],type:s.PU.other,config:{}};U.type=p(B,v,U),M.push(U)}}M.push({config:{},name:"Nested frames",type:s.PU.nestedFrames,values:O}),C.push({fields:M,length:T.size})}return C}))};function g(a,h,P){return{meta:{custom:{noHeader:!(P.showSubframeHeaders===void 0?l:P.showSubframeHeaders)}},length:h,fields:a}}const u=(a,h)=>{const P=(0,r.Ct)(a);return h?.fields[P]?.operation==="groupby"},E=(a,h)=>{const P=(0,r.Ct)(a);return h?.fields[P]?.operation==="aggregate"&&Array.isArray(h?.fields[P].aggregations)&&h?.fields[P].aggregations.length>0},p=(a,h,P)=>{switch(a){case o.gy.allIsNull:return s.PU.boolean;case o.gy.last:case o.gy.lastNotNull:case o.gy.first:case o.gy.firstNotNull:return h.type;default:return(0,n.dF)(P)??s.PU.string}};function b(a,h){const P=[];for(const[,y]of a){const C=[];for(const[f,D]of Object.entries(y)){const T=h.fields[f];(T===void 0||T.aggregations===void 0||T.operation==="aggregate"&&T.aggregations.length===0||T.operation===null||T.operation===void 0)&&C.push(D)}C.length>0?P.push([g(C,C[0].values.length,h)]):P.push([g([],0,h)])}return P}},77678:(Q,I,e)=>{"use strict";e.d(I,{H1:()=>C,NX:()=>P,OA:()=>a,Rt:()=>b,Uh:()=>M,ZU:()=>T,cg:()=>v,d$:()=>h,dA:()=>y,ix:()=>f,p3:()=>D,rW:()=>g,rs:()=>O});var t=e(81160),n=e(57875),r=e(75972),s=e(41260),o=e(11261),m=e(97706),i=e(18282),l=e(73060),d=e(39624),c=e(67641);const g=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=30,E=[],p=(x,A)=>x-A,b={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},a={id:i.F.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(x,A)=>R=>R.pipe((0,t.T)(B=>a.transformer(x,A)(B))),transformer:(x,A)=>R=>{if(!Array.isArray(R)||R.length===0)return R;let B,U;x.bucketSize&&((0,c.w)()&&(x.bucketSize=A.interpolate(x.bucketSize.toString())),typeof x.bucketSize=="string"?B=parseFloat(x.bucketSize):B=x.bucketSize,isNaN(B)&&(B=void 0)),x.bucketOffset&&((0,c.w)()&&(x.bucketOffset=A.interpolate(x.bucketOffset.toString())),typeof x.bucketOffset=="string"?U=parseFloat(x.bucketOffset):U=x.bucketOffset,isNaN(U)&&(U=void 0));const w={bucketSize:B,bucketOffset:U,combine:x.combine},K=D(R,w);return K==null?[]:[v(K)]}},h="xMin";function P(x){return x===h||x==="BucketMin"}const y="xMax";function C(x){return x===y||x==="BucketMax"}function f(x){if(x.meta?.type===s.m.HeatmapCells){let U=x.fields.find(z=>z.name==="yMin"),w=x.fields.find(z=>z.name==="yMax"),K=x.fields.find(z=>z.name==="count"),N=[...new Set(w.values)].sort((z,Y)=>z-Y),L=[...new Set(U.values)].sort((z,Y)=>z-Y),V=new Map;N.forEach(z=>V.set(z,0));for(let z=0;z<w.values.length;z++){let Y=w.values[z];V.set(Y,V.get(Y)+K.values[z])}return{xMin:{...U,name:"xMin",values:L},xMax:{...w,name:"xMax",values:N},counts:[{...K,values:[...V.values()]}]}}else if(x.meta?.type===s.m.HeatmapRows){let U=[],w=[],K=[],N="0";return x.fields.forEach(V=>{if(V.type===o.PU.number){let F=V.values.reduce((z,Y)=>z+Y,0);K.push(F),U.push(N),w.push(N=V.name)}}),K.push(0),U.push(N),w.push(N),{xMin:{...x.fields[1],name:"xMin",type:o.PU.string,values:U},xMax:{...x.fields[1],name:"xMax",type:o.PU.string,values:w},counts:[{...x.fields[1],name:"count",type:o.PU.number,values:K}]}}let A,R;const B=[];for(const U of x.fields)P(U.name)?A=U:C(U.name)?R=U:U.type===o.PU.number&&B.push(U);if(!R&&A&&A.values.length>1){let U=A.values,w=(0,m.h)(U[1]-U[0],6);R={...A,name:y,values:U.map(K=>K+w)}}if(!A&&R&&R?.values.length>1){let U=R.values,w=(0,m.h)(U[1]-U[0],6);A={...R,name:h,values:U.map(K=>K-w)}}if(A&&R&&B.length)return{xMin:A,xMax:R,counts:B}}function D(x,A){let R=A?.bucketSize,B=A?.bucketCount??u,U=A?.bucketOffset??0;if(x=x.map(H=>({...H,fields:H.fields.map(k=>{if(k.type===o.PU.number){const ee=Number(k.config.noValue);Number.isNaN(ee)?k={...k,values:k.values.filter(ie=>ie!=null)}:k=(0,d.A)(k,ee)}return k})})),!R||R<0){let H=[];for(const Z of x)for(const J of Z.fields)J.type===o.PU.number&&(H=H.concat(J.values));H.sort((Z,J)=>Z-J);let k=1/0;if(H.length===1)k=1;else for(let Z=1;Z<H.length;Z++){let J=H[Z]-H[Z-1];J!==0&&(k=Math.min(k,J))}let ee=H[0];const q=(H[H.length-1]-ee)/B;for(let Z=0;Z<g.length;Z++){let J=g[Z];if(q<J&&J>=k){R=J;break}}}const w=H=>(0,m.h)(O(H-U,R)+U,9);let K=((""+R).match(/\.\d+$/)??["."])[0].length-1,N=[],L=[],V;for(const H of x)for(const k of H.fields)if(k.type===o.PU.number){let ee=S(k.values,w,E,p);N.push(ee),L.push({...k,config:{...k.config,unit:k.config.unit==="short"?"short":void 0}}),!V&&k.config.unit&&(V=k.config)}if(!L.length)return null;let F=(0,l.fj)(N);for(let H=1;H<F.length;H++){let k=F[H];for(let ee=0;ee<k.length;ee++)k[ee]==null&&(k[ee]=0)}const z={name:h,values:F[0],type:o.PU.number,state:void 0,config:K===0?V??{}:{...V,decimals:K}},Y={...z,name:y,values:F[0].map(H=>H+R)};if(A?.combine){const H=new Array(F[0].length).fill(0);for(let k=1;k<F.length;k++)for(let ee=0;ee<H.length;ee++)H[ee]+=F[k][ee];L=[{...L[0],name:"count",values:H,type:o.PU.number,state:{...L[0].state,displayName:"Count",multipleFrames:!1,origin:{frameIndex:0,fieldIndex:2}}}]}else L.forEach((H,k)=>{H.values=F[k+1]});return{xMin:z,xMax:Y,counts:L}}function T(x,A){return Math.round(x/A)*A}function M(x,A){return Math.ceil(x/A)*A}function O(x,A){return Math.floor(x/A)*A}function S(x,A,R,B){let U=new Map;for(let L=0;L<x.length;L++){let V=x[L];V!=null&&(V=A(V));let F=U.get(V);F?F.count++:U.set(V,{value:V,count:1})}R&&R.forEach(L=>U.delete(L));let w=[...U.values()];B&&w.sort((L,V)=>B(L.value,V.value));let K=Array(w.length),N=Array(w.length);for(let L=0;L<w.length;L++)K[L]=w[L].value,N[L]=w[L].count;return[K,N]}function v(x,A){if(!x.xMin.display){const R=(0,n.J)({field:x.xMin,theme:A??(0,r.a)()});x.xMin.display=R,x.xMax.display=R}return x.counts[0].display=(0,n.J)({field:x.counts[0],theme:A??(0,r.a)()}),{length:x.xMin.values.length,meta:{type:s.m.Histogram},fields:[x.xMin,x.xMax,...x.counts]}}},41511:(Q,I,e)=>{"use strict";e.d(I,{L:()=>i,W:()=>m});var t=e(81160),n=e(85200),r=e(1173),s=e(18282),o=e(73060),m=(l=>(l.outer="outer",l.inner="inner",l.outerTabular="outerTabular",l))(m||{});const i={id:s.F.joinByField,aliasIds:[s.F.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(l,d)=>c=>c.pipe((0,t.T)(g=>i.transformer(l,d)(g))),transformer:(l,d)=>{let c;return g=>{if(g.length>1){l.byField&&!c&&(c=n.sJ.get(r.Ct.byName).get(d.interpolate(l.byField)));const u=(0,o.Fd)({frames:g,joinBy:c,mode:l.mode});if(u)return[u]}return g}}}},73060:(Q,I,e)=>{"use strict";e.d(I,{Fd:()=>c,JI:()=>p,RC:()=>u,WO:()=>E,Yj:()=>d,fj:()=>a,g2:()=>h});var t=e(86643),n=e(14236),r=e(11261),s=e(85200),o=e(1173),m=e(41511);function i(P){const{timeField:y}=(0,n.KR)(P[0]);if(y)return s.sJ.get(o.Ct.firstTimeField).get({});let C=[];for(const f of P[0].fields)f.type===r.PU.number&&C.push(f.name);for(let f=1;f<P.length;f++){const D=[];for(const T of P[0].fields)T.type===r.PU.number&&D.push(T.name);C=C.filter(T=>!D.includes(T))}return s.sJ.get(o.Ct.byName).get(C[0])}function l(P){return P.joinBy??i(P.frames)}function d(P,y){if(y>=0){let C=P.fields[y];C.type!==r.PU.string&&!h(C.values)&&(P=(0,n.ES)(P,y))}return P}function c(P){if(!P.frames?.length)return;const y=P.nullMode??(v=>{let x=v.config.custom?.spanNulls;return x===!0?u:x===-1?E:p});if(P.frames.length===1){let v=P.frames[0],x=v;const A=l(P);let R=x.fields.findIndex(B=>A(B,x,P.frames));if(P.keepOriginIndices&&(x={...v,fields:v.fields.map((B,U)=>{const w={...B},K={frameIndex:0,fieldIndex:U};return w.state?w.state.origin=K:w.state={origin:K},w})},R>0)){const B=x.fields[R],U=x.fields.filter((w,K)=>K!==R);U.unshift(B),x.fields=U,R=0}if(R>=0&&(x=d(x,R)),P.keep){let B=x.fields.filter((U,w)=>w===R||P.keep(U,x,P.frames));v!==x?x.fields=B:x={...v,fields:B}}return x}const C=[],f=[],D=[],T=[];let M=1;const O=l(P);for(let v=0;v<P.frames.length;v++){const x=P.frames[v];if(!x||!x.fields?.length)continue;const A=[u];let R,B=[],U=[];for(let K=0;K<x.fields.length;K++){const N=x.fields[K];if(N.state=N.state||{},!R&&O(N,x,P.frames))R=N;else{if(P.keep&&!P.keep(N,x,P.frames))continue;A.push(y(N));let L=N.labels??{},V=N.name;x.name&&(N.name===r.Bc?V=x.name:L={...L,name:x.name}),B.push({...N,name:V,labels:L})}P.keepOriginIndices&&(N.state.origin={frameIndex:v,fieldIndex:K})}if(!R)continue;D.length===0&&D.push(R),C.push(A);const w=[R.values];for(const K of B)w.push(K.values),D.push(K),P.keepDisplayNames||delete K.state?.displayName,U.push(M),M++;T.push(U),f.push(w)}let S=[];return P.mode===m.W.outerTabular?S=g(f,T,D.length,C):S=a(f,C,P.mode),{length:S[0]?S[0].length:0,fields:D.map((v,x)=>({...v,values:S[x]}))}}function g(P,y,C,f){let D={};for(let M=0;M<P.length;M++){let O=P[M],S=O[0];for(let v=0;v<P.length;v++){if(v===M)continue;let x=P[v],A=x[0];for(let R=0;R<S.length;R++){const B=S[R],U=C-1;let w=[B].concat(new Array(U)),K=0;for(let N=1;N<O.length;N++){const L=y[M][K];w[L]=O[N][R],K++}for(let N=0;N<A.length;N++)if(S[R]===A[N]){let L=0;for(let V=1;V<x.length;V++){const F=y[v][L];w[F]=x[V][N],L++}break}D[JSON.stringify(w)]=w}}}let T=[];for(let M=0;M<C;M++)T.push(new Array(0));for(let M in D){const O=D[M];for(let S=0;S<O.length;S++)T[S].push(O[S])}return T}const u=0,E=1,p=2;function b(P,y,C){for(let f=0,D,T=-1;f<y.length;f++){let M=y[f];if(M>T){for(D=M-1;D>=0&&P[D]==null;)P[D--]=null;for(D=M+1;D<C&&P[D]==null;)P[T=D++]=null}}}function a(P,y,C=m.W.outer){let f;if(C===m.W.inner)f=new Set((0,t.A)(P.map(O=>O[0])));else{f=new Set;for(let O=0;O<P.length;O++){let v=P[O][0],x=v.length;for(let A=0;A<x;A++)f.add(v[A])}}let D=[Array.from(f).sort((O,S)=>O-S)],T=D[0].length,M=new Map;for(let O=0;O<T;O++)M.set(D[0][O],O);for(let O=0;O<P.length;O++){let S=P[O],v=S[0];for(let x=1;x<S.length;x++){let A=S[x],R=Array(T).fill(void 0),B=y?y[O][x]:E,U=[];for(let w=0;w<A.length;w++){let K=A[w],N=M.get(v[w]);K===null?B!==u&&(R[N]=K,B===p&&U.push(N)):R[N]=K}b(R,U,T),D.push(R)}}return D}function h(P,y=50){const C=P.length;if(C<=1)return!0;let f=0,D=C-1;for(;f<=D&&P[f]==null;)f++;for(;D>=f&&P[D]==null;)D--;if(D<=f)return!0;const T=Math.max(1,Math.floor((D-f+1)/y));for(let M=P[f],O=f+T;O<=D;O+=T){const S=P[O];if(S!=null){if(S<=M)return!1;M=S}}return!0}},6829:(Q,I,e)=>{"use strict";e.d(I,{V:()=>m,n:()=>o});var t=e(81160),n=e(28240),r=e(11261),s=e(18282),o=(l=>(l.Columns="columns",l.Rows="rows",l))(o||{});const m={id:s.F.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,d)=>c=>c.pipe((0,t.T)(g=>m.transformer(l,d)(g))),transformer:l=>d=>{if(l.mode==="rows")return i(d,l.keepLabels);const c=[],g=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const u of d){const E=[],p={};for(const b of u.fields){if(!b.labels){E.push(b);continue}const a={...b,config:{...b.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};E.push(a);for(const h of Object.keys(b.labels)){if(g&&!g.has(h))continue;if(l.valueLabel===h){a.name=b.labels[h];continue}(p[h]??(p[h]=new Set)).add(b.labels[h])}}for(const b in p)for(const a of p[b]){const h=new Array(u.length).fill(a);E.push({name:b,type:r.PU.string,values:h,config:{}})}c.push({...u,fields:E,length:u.length})}return c}};function i(l,d){const c=[];for(const g of l)for(const u of g.fields)if(u.labels){const E=[],p=[];if(d)for(const b of d)E.push(b),p.push(u.labels[b]);else for(const[b,a]of Object.entries(u.labels))E.push(b),p.push(a);p.length&&c.push({...g,name:(0,n.Ct)(u,g,l),fields:[{name:"label",type:r.PU.string,config:{},values:E},{name:"value",type:r.PU.string,config:{},values:p}],length:p.length})}return c}},58140:(Q,I,e)=>{"use strict";e.d(I,{o:()=>i});var t=e(2543),n=e.n(t),r=e(81160),s=e(37471),o=e(81010),m=e(18282);const i={id:m.F.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:p=>p.length>1?o.M.Applicable:o.M.NotApplicable,isApplicableDescription:p=>`The merge transformation requires at least 2 data series to work. There is currently ${p.length} data series.`,operator:p=>b=>b.pipe((0,r.T)(a=>{if(!Array.isArray(a)||a.length<=1)return a;const h=a.filter(S=>S.fields.length>0);if(h.length===0)return[a[0]];const P=new Set,y={},C=[],f=new s.k;for(let S=0;S<h.length;S++){const v=h[S];for(let x=0;x<v.fields.length;x++){const A=v.fields[x];P.has(A.name)||(f.addField(l(A)),P.add(A.name)),y[A.name]=y[A.name]||{},y[A.name][S]=x,h.length-1===S&&u(y,A,h)&&C.push(A.name)}}if(C.length===0)return a;const D={},T=[],M=d(h,y,C),O=c(h,P,y);for(let S=0;S<h.length;S++){const v=h[S];for(let x=0;x<v.length;x++){const A=M(S,x),R=O(S,x);if(!Array.isArray(D[A])){D[A]=[R],T.push(E(A,D));continue}let B=!1;D[A]=D[A].map(U=>g(U,R)?(B=!0,{...U,...R}):U),B||(D[A].push(R),T.push(E(A,D)))}}for(const S of T){const v=D[S.key][S.index];v&&f.add(v)}return[f]}))},l=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(p.config,"displayName")}}),d=(p,b,a)=>{const h=a.reduce((P,y)=>Object.keys(b[y]).reduce((C,f)=>(C[f]=C[f]||[],C[f].push(b[y][f]),C),P),{});return(P,y)=>h[P].reduce((C,f)=>C+p[P].fields[f].values[y],"")},c=(p,b,a)=>(h,P)=>{const y={},C=Array.from(b);for(const f of C){const D=a[f];if(!D)continue;const T=D[h];if(typeof T!="number")continue;const M=p[h];if(!M||!M.fields)continue;const O=M.fields[T];!O||!O.values||(y[f]=O.values[P])}return y},g=(p,b)=>{let a=!0;for(const h in b)if(!(typeof p[h]>"u")&&p[h]!==null&&p[h]!==b[h]){a=!1;break}return a},u=(p,b,a)=>Object.keys(p[b.name]).length===a.length,E=(p,b)=>({key:p,index:b[p].length-1})},64586:(Q,I,e)=>{"use strict";e.d(I,{W:()=>n});var t=e(18282);const n={id:t.F.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:r=>s=>s,transformer:r=>s=>s}},46294:(Q,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(11261);const n={threshold:(m,i,l)=>m+l,midpoint:(m,i,l)=>(m+i)/2,plusone:(m,i,l)=>m+1};function r(m,i){return m.fields.find(l=>i!=null?l.name===i:l.type===t.PU.time)}function s(m){if(m.frame.length===0)return m.frame;let i=!0,{frame:l,refFieldName:d,refFieldPseudoMax:c,refFieldPseudoMin:g,insertMode:u}=m;u||(u=n.threshold);const E=r(l,d);if(E==null)return l;E.state={...E.state,nullThresholdApplied:!0};const p=l.fields.map(a=>a.config.custom?.insertNulls||E.config.interval||null),b=new Set(p);if(b.delete(null),b.size===0)return l;if(b.size===1){const a=b.values().next().value;if(a<=0)return l;const h=E.values,P=l.fields.map(C=>C.values),y=o(h,P,a,g,c,u,i);return y===P?l:{...l,length:y[0].length,fields:l.fields.map((C,f)=>({...C,values:y[f]}))}}return l}function o(m,i,l,d=null,c=null,g,u){const E=m.length,p=[];if(d!=null&&d<m[0]){let P=Math.ceil((m[0]-d)/l),y=m[0]-P*l;for(;y<m[0];)p.push(g(y-l,y,l)),y+=l}p.push(m[0]);let b=m[0];for(let P=1;P<E;P++){const y=m[P];for(;y-b>l&&(p.push(g(b,y,l)),b+=l,!!u););p.push(y),b=y}if(c!=null&&c>b)for(;b+l<c;)p.push(g(b,c,l)),b+=l;const a=p.length;if(a===E)return i;const h=[];for(let P of i){let y;if(P!==m){y=Array(a);for(let C=0,f=0;C<a;C++)y[C]=m[f]===p[C]?P[f++]:null}else y=p;h.push(y)}return h}},39624:(Q,I,e)=>{"use strict";e.d(I,{A:()=>n,C:()=>t});function t(r){return{...r,fields:r.fields.map(s=>{const o=Number(s.config.noValue);return Number.isNaN(o)?s:n(s,o)})}}function n(r,s){const o=r.values.slice();for(let m=0;m<o.length;m++)o[m]===null&&(o[m]=s);return{...r,values:o}}},82280:(Q,I,e)=>{"use strict";e.d(I,{X:()=>i,x:()=>m});var t=e(2543),n=e.n(t),r=e(81160),s=e(28240),o=e(18282);const m={id:o.F.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:c=>g=>g.pipe((0,r.T)(u=>{const E=l(c.indexByName);return!Array.isArray(u)||u.length===0?u:u.map(p=>({...p,fields:E(p.fields,u,p)}))}))},i=c=>(g,u)=>d(g,c)-d(u,c),l=c=>(g,u,E)=>{if(!Array.isArray(g)||g.length===0||!c||Object.keys(c).length===0)return g;const p=i(c);return(0,t.clone)(g).sort((b,a)=>p((0,s.Ct)(b,E,u),(0,s.Ct)(a,E,u)))},d=(c,g)=>Number.isInteger(g[c])?g[c]:Number.MAX_SAFE_INTEGER},21128:(Q,I,e)=>{"use strict";e.d(I,{Wj:()=>c,rV:()=>d});var t=e(81160),n=e(14236),r=e(28240),s=e(11261),o=e(75059),m=e(85200),i=e(72693),l=e(18282),d=(a=>(a.SeriesToRows="seriesToRows",a.ReduceFields="reduceFields",a))(d||{});const c={id:l.F.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[o.gy.max]},operator:a=>h=>h.pipe((0,t.T)(P=>{if(!a?.reducers?.length)return P;const y=a.fields?(0,m.NS)(a.fields):a.includeTimeField&&a.mode==="reduceFields"?i.Yg:i.zx;if(a.mode==="reduceFields")return p(P,y,a.reducers);const C=g(P,y,a.reducers,a.labelsToFields);return C?[C]:[]}))};function g(a,h,P,y){const C=o.AS.list(P),f=C.map(M=>M.id),D=[],T=y?u(a):[];for(const M of a){const O=M.fields.filter(B=>h(B,M,a)),S=O.length,v=[],x=new Array(S);v.push({name:"Field",type:s.PU.string,values:x,config:{}});const A={};if(y)for(const B of T)A[B]=new Array(S),v.push({name:B,type:s.PU.string,values:A[B],config:{}});const R={};for(const B of C)R[B.id]=new Array(S),v.push({name:B.name,type:s.PU.other,values:R[B.id],config:{}});for(let B=0;B<O.length;B++){const U=O[B],w=(0,o.Nw)({field:U,reducers:f});if(y){if(x[B]=U.name,U.labels)for(const K of Object.keys(U.labels))A[K][B]=U.labels[K]}else x[B]=(0,r.Ct)(U,M,a);for(const K of C){const N=w[K.id];R[K.id][B]=N}}for(const B of v)if(B.type===s.PU.other){const U=(0,n.dF)(B);U&&(B.type=U)}D.push({...M,fields:v,length:S})}return E(D)}function u(a){const h=new Set;for(const P of a)for(const y of P.fields)if(y.labels)for(const C of Object.keys(y.labels))h.add(C);return[...h]}function E(a){if(!a?.length)return;const h=a[0];for(let P=1;P<a.length;P++){const y=a[P];for(let C=0;C<h.fields.length;C++){const f=h.fields[C];for(let D=0;D<y.fields.length;D++){const T=y.fields[D],M=C===0&&D===0,O=f.type===T.type&&f.name===T.name;if(M||O){const S=f.values,v=T.values;f.values=S.concat(v)}}}}return h.name=void 0,h.length=h.fields[0].values.length,h}function p(a,h,P){const C=o.AS.list(P).map(D=>D.id),f=[];for(const D of a){const T=[];for(const M of D.fields)if(h(M,D,a)){const O=(0,o.Nw)({field:M,reducers:C});for(const S of C){const v=O[S],x={...M,type:b(S,M),values:[v]};x.state=void 0,C.length>1&&(x.labels||(x.labels={}),x.labels.reducer=o.AS.get(S).name),T.push(x)}}T.length&&f.push({...D,fields:T,length:1})}return f}function b(a,h){switch(a){case o.gy.allValues:case o.gy.uniqueValues:return s.PU.other;case o.gy.first:case o.gy.firstNotNull:case o.gy.last:case o.gy.lastNotNull:return h.type;default:return s.PU.number}}},67641:(Q,I,e)=>{"use strict";e.d(I,{w:()=>t});const t=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},22544:()=>{"use strict"},12463:()=>{"use strict"},43585:(Q,I,e)=>{"use strict";e.d(I,{O:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},8790:(Q,I,e)=>{"use strict";e.d(I,{V:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},41987:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>o,Jk:()=>r,hX:()=>s});var t=e(43429),n=e(74135),r=(m=>(m.CloudAlerting="cloud-alerting",m.UnifiedAlerting="unified-alerting",m.Dashboard="dashboard",m.Explore="explore",m.Correlations="correlations",m.Unknown="unknown",m.PanelEditor="panel-editor",m.PanelViewer="panel-viewer",m))(r||{});class s extends t.Ud{constructor(){super(...arguments),this._extensionConfigs=[]}init(i){}setRootPage(i){return this.root=i,this}setComponentsFromLegacyExports(i){if(i.ConfigCtrl&&(this.angularConfigCtrl=i.ConfigCtrl),this.meta&&this.meta.includes){for(const l of this.meta.includes)if(l.type===t.ib.page&&l.component&&!i[l.component]){console.warn("App Page uses unknown component: ",l.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(i){return this._extensionConfigs.push({...i,type:n.u.link}),this}configureExtensionComponent(i){return this._extensionConfigs.push({...i,type:n.u.component}),this}}var o=(m=>(m.alpha="alpha",m.beta="beta",m))(o||{})},61268:(Q,I,e)=>{"use strict";e.d(I,{r:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},58649:(Q,I,e)=>{"use strict";e.d(I,{En:()=>r,d1:()=>n,tw:()=>t});const t=0,n=100,r="SAML"},94624:(Q,I,e)=>{"use strict";e.d(I,{y:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},39070:(Q,I,e)=>{"use strict";e.d(I,{Gu:()=>t,Gv:()=>m,Nx:()=>n,UW:()=>r,zz:()=>s});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var r=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(r||{});const s=i=>!!i;function o(i){return i}function m(i){return typeof i=="object"&&i!==null?!0:!1}},11261:(Q,I,e)=>{"use strict";e.d(I,{Bc:()=>n,LE:()=>r,PU:()=>t,aI:()=>s});var t=(o=>(o.time="time",o.number="number",o.string="string",o.boolean="boolean",o.trace="trace",o.geo="geo",o.enum="enum",o.other="other",o.frame="frame",o.nestedFrames="nestedFrames",o))(t||{});const n="Value",r="Time",s="Metric"},41260:(Q,I,e)=>{"use strict";e.d(I,{m:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.NumericWide="numeric-wide",n.NumericMulti="numeric-multi",n.NumericLong="numeric-long",n.LogLines="log-lines",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},91890:(Q,I,e)=>{"use strict";e.d(I,{$0:()=>r,CC:()=>n,uP:()=>s,x0:()=>t});var t=(o=>(o.Datasource="Datasource",o.Correlations="Correlations",o.ExploreCorrelationsEditor="CorrelationsEditor",o))(t||{}),n=(o=>(o.Regex="regex",o.Logfmt="logfmt",o))(n||{}),r=(o=>(o.Series="series",o.Field="field",o.Fields="fields",o.Value="value",o.BuiltIn="built-in",o.Template="template",o))(r||{}),s=(o=>(o.Values="values",o))(s||{})},40187:(Q,I,e)=>{"use strict";e.d(I,{Is:()=>i,ZF:()=>o,mA:()=>s,tD:()=>r,v2:()=>m});var t=e(92341),n=e(43429);class r extends n.Ud{constructor(d){super(),this.DataSourceClass=d,this.components={}}setConfigEditor(d){return this.components.ConfigEditor=d,this}setConfigCtrl(d){return this.angularConfigCtrl=d,this}setQueryCtrl(d){return this.components.QueryCtrl=d,this}setAnnotationQueryCtrl(d){return this.components.AnnotationsQueryCtrl=d,this}setQueryEditor(d){return this.components.QueryEditor=d,this}setExploreQueryField(d){return this.components.ExploreQueryField=d,this}setExploreMetricsQueryField(d){return this.components.ExploreMetricsQueryField=d,this}setExploreLogsQueryField(d){return this.components.ExploreLogsQueryField=d,this}setQueryEditorHelp(d){return this.components.QueryEditorHelp=d,this}setExploreStartPage(d){return this.setQueryEditorHelp(d)}setVariableQueryEditor(d){return this.components.VariableQueryEditor=d,this}setMetadataInspector(d){return this.components.MetadataInspector=d,this}setComponentsFromLegacyExports(d){this.angularConfigCtrl=d.ConfigCtrl,this.components.QueryCtrl=d.QueryCtrl,this.components.AnnotationsQueryCtrl=d.AnnotationsQueryCtrl,this.components.ExploreQueryField=d.ExploreQueryField,this.components.QueryEditor=d.QueryEditor,this.components.QueryEditorHelp=d.QueryEditorHelp,this.components.VariableQueryEditor=d.VariableQueryEditor}}class s{constructor(d){this.name=d.name,this.id=d.id,this.type=d.type,this.meta=d.meta,this.cachingConfig=d.cachingConfig,this.uid=d.uid}filterQuery(d){return!0}getRef(){return{type:this.type,uid:this.uid}}}var o=(l=>(l.Logs="Logs",l.Metrics="Metrics",l.Tracing="Tracing",l))(o||{}),m=(l=>(l.Cancelled="cancelled",l.Timeout="timeout",l.Unknown="unknown",l))(m||{});class i{}i=(0,t.Y)(i),s=(0,t.Y)(s)},50349:()=>{"use strict"},50219:()=>{"use strict"},24293:(Q,I,e)=>{"use strict";e.d(I,{F:()=>n,Y:()=>t});var t=(r=>(r.Thresholds="thresholds",r.PaletteClassic="palette-classic",r.PaletteClassicByName="palette-classic-by-name",r.PaletteSaturated="palette-saturated",r.ContinuousGrYlRd="continuous-GrYlRd",r.ContinuousRdYlGr="continuous-RdYlGr",r.ContinuousBlYlRd="continuous-BlYlRd",r.ContinuousYlRd="continuous-YlRd",r.ContinuousBlPu="continuous-BlPu",r.ContinuousYlBl="continuous-YlBl",r.ContinuousBlues="continuous-blues",r.ContinuousReds="continuous-reds",r.ContinuousGreens="continuous-greens",r.ContinuousPurples="continuous-purples",r.Fixed="fixed",r.Shades="shades",r))(t||{});const n="#808080"},37055:(Q,I,e)=>{"use strict";e.d(I,{Ow:()=>n,ZW:()=>t,uo:()=>r});function t(s){return o=>"__systemRef"in o&&o.__systemRef===s}const n=s=>"__systemRef"in s&&typeof s.__systemRef=="string";var r=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(r||{})},93015:()=>{"use strict"},58318:()=>{"use strict"},49812:()=>{"use strict"},8887:(Q,I,e)=>{"use strict";e.d(I,{Uo:()=>r,az:()=>t,n6:()=>n});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,"application-observability":!0,apps:!0,"archive-alt":!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,asserts:!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,docker:!0,"document-info":!0,"document-layout-left":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,enter:!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-edit-alt":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"frontend-observability":!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,globe:!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,paragraph:!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,spinner:!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"table-collapse-all":!0,"table-expand-all":!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unarchive:!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function r(s){if(n(s))return s}},64572:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{AbstractLabelOperator:()=>i.D_,AlertState:()=>fe.O,AnnotationEventFieldSource:()=>l.V,AppEvents:()=>z.r1,AppPlugin:()=>O.hX,CoreApp:()=>O.Jk,CustomVariableSupport:()=>H.f5,DEFAULT_SAML_NAME:()=>t.En,DashboardCursorSync:()=>m.y,DataFrameType:()=>s.m,DataLinkConfigOrigin:()=>o.x0,DataQueryErrorType:()=>S.v2,DataSourceApi:()=>S.mA,DataSourcePlugin:()=>S.tD,DataSourceVariableSupport:()=>H.ZV,DataTopic:()=>i.QR,DefaultTimeZone:()=>E.lE,ExploreMode:()=>S.ZF,FALLBACK_COLOR:()=>R.F,FeatureState:()=>O.Ay,FieldColorModeId:()=>R.Y,FieldConfigProperty:()=>T.uo,FieldType:()=>r.PU,GAUGE_DEFAULT_MAXIMUM:()=>t.d1,GAUGE_DEFAULT_MINIMUM:()=>t.tw,GrafanaPlugin:()=>x.Ud,GrafanaThemeType:()=>B.I,LanguageProvider:()=>S.Is,LegacyGraphHoverClearEvent:()=>z.Tq,LegacyGraphHoverEvent:()=>z.kb,LiveChannelConnectionState:()=>Y.ZF,LiveChannelEventType:()=>Y.o4,LiveChannelScope:()=>Y.qD,LiveChannelType:()=>Y.os,LoadingState:()=>n.Gu,LogLevel:()=>d.$b,LogRowContextQueryDirection:()=>d.ZF,LogsDedupDescription:()=>d._C,LogsDedupStrategy:()=>d.fY,LogsMetaKind:()=>d.tG,LogsSortOrder:()=>d.uH,LogsVolumeType:()=>d.Aj,MappingType:()=>b.d,NullValueMode:()=>n.UW,OrgRole:()=>U.X,PageLayoutType:()=>c.k,PanelEvents:()=>z.ee,PluginErrorCode:()=>x.ZK,PluginExtensionPoints:()=>te.S,PluginExtensionTypes:()=>te.u,PluginIncludeType:()=>x.ib,PluginSignatureStatus:()=>x.Ac,PluginSignatureType:()=>x.kv,PluginState:()=>x.pn,PluginType:()=>x.QE,SpecialValue:()=>D.N,SpecialValueMatch:()=>b.W,StandardVariableSupport:()=>H.J$,SupplementaryQueryType:()=>d.cF,SupportedTransformationType:()=>o.CC,TIME_FORMAT:()=>E.G$,TIME_SERIES_METRIC_FIELD_NAME:()=>r.aI,TIME_SERIES_TIME_FIELD_NAME:()=>r.LE,TIME_SERIES_VALUE_FIELD_NAME:()=>r.Bc,ThresholdsMode:()=>p.O,TransformationApplicabilityLevels:()=>D.M,VariableHide:()=>A.zL,VariableOrigin:()=>o.$0,VariableRefresh:()=>A.CO,VariableSort:()=>A.ZG,VariableSuggestionsScope:()=>o.uP,VariableSupportBase:()=>H.xi,VariableSupportType:()=>H.Qz,VisualizationSuggestionScore:()=>v.nQ,VisualizationSuggestionsBuilder:()=>v.v2,VisualizationSuggestionsListAppender:()=>v.NV,VizOrientation:()=>v.wV,availableIconsIndex:()=>ne.az,getDefaultRelativeTimeRange:()=>E.Cn,getDefaultTimeRange:()=>E.E2,hasLogsContextSupport:()=>d.Ol,hasLogsContextUiSupport:()=>d.wj,hasQueryExportSupport:()=>i.Ee,hasQueryImportSupport:()=>i.FL,hasQueryModificationSupport:()=>d._0,hasSupplementaryQuerySupport:()=>d.Nc,hasToggleableQueryFiltersSupport:()=>d.FP,isIconName:()=>ne.n6,isLiveChannelJoinEvent:()=>Y.Cz,isLiveChannelLeaveEvent:()=>Y.jQ,isLiveChannelMessageEvent:()=>Y.Z7,isLiveChannelStatusEvent:()=>Y.ew,isObject:()=>n.Gv,isSystemOverride:()=>T.Ow,isSystemOverrideWithRef:()=>T.ZW,isTruthy:()=>n.zz,isUnsignedPluginSignature:()=>ie.x,isValidLiveChannelAddress:()=>Y.aj,parseLiveChannelAddress:()=>Y.DG,patchArrayVectorProrotypeMethods:()=>M.V,preferredVisualizationTypes:()=>n.Nx,toIconName:()=>ne.Uo,toLiveChannelId:()=>Y.Qp});var t=e(58649),n=e(39070),r=e(11261),s=e(41260),o=e(91890),m=e(94624),i=e(73372),l=e(8790),d=e(9557),c=e(64388),g=e(98102),u=e.n(g),ue={};for(const Te in g)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(Te)<0&&(ue[Te]=()=>g[Te]);e.d(I,ue);var E=e(43127),p=e(50082),b=e(25019),a=e(50349),h=e.n(a),ue={};for(const Te in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Te)<0&&(ue[Te]=()=>a[Te]);e.d(I,ue);var P=e(49812),y=e.n(P),ue={};for(const Te in P)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Te)<0&&(ue[Te]=()=>P[Te]);e.d(I,ue);var C=e(22544),f=e.n(C),ue={};for(const Te in C)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Te)<0&&(ue[Te]=()=>C[Te]);e.d(I,ue);var D=e(81010),T=e(37055),M=e(35853),O=e(41987),S=e(40187),v=e(47070),x=e(43429),A=e(12470),R=e(24293),B=e(25137),U=e(62625),w=e(93015),K=e.n(w),ue={};for(const Te in w)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Te)<0&&(ue[Te]=()=>w[Te]);e.d(I,ue);var N=e(38893),L=e.n(N),ue={};for(const Te in N)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Te)<0&&(ue[Te]=()=>N[Te]);e.d(I,ue);var V=e(50219),F=e.n(V),ue={};for(const Te in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Te)<0&&(ue[Te]=()=>V[Te]);e.d(I,ue);var z=e(26272),Y=e(55004),H=e(29505),k=e(58318),ee=e.n(k),ue={};for(const Te in k)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(Te)<0&&(ue[Te]=()=>k[Te]);e.d(I,ue);var ie=e(51527),fe=e(43585),q=e(64367),Z=e.n(q),ue={};for(const Te in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Te)<0&&(ue[Te]=()=>q[Te]);e.d(I,ue);var J=e(12463),G=e.n(J),ue={};for(const Te in J)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Te)<0&&(ue[Te]=()=>J[Te]);e.d(I,ue);var ne=e(8887),te=e(74135),oe=e(37891),le=e.n(oe),ue={};for(const Te in oe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState","availableIconsIndex","isIconName","toIconName"].indexOf(Te)<0&&(ue[Te]=()=>oe[Te]);e.d(I,ue)},19484:(Q,I,e)=>{"use strict";e.d(I,{R:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},26272:(Q,I,e)=>{"use strict";e.d(I,{Tq:()=>m,ee:()=>s,kb:()=>o,r1:()=>r});var t=e(89550),n=e(65463);const r={alertSuccess:(0,t.R)("alert-success"),alertWarning:(0,t.R)("alert-warning"),alertError:(0,t.R)("alert-error")},s={refresh:(0,t.R)("refresh"),componentDidMount:(0,t.R)("component-did-mount"),dataReceived:(0,t.R)("data-received"),dataError:(0,t.R)("data-error"),dataFramesReceived:(0,t.R)("data-frames-received"),dataSnapshotLoad:(0,t.R)("data-snapshot-load"),editModeInitialized:(0,t.R)("init-edit-mode"),initPanelActions:(0,t.R)("init-panel-actions"),initialized:(0,t.R)("panel-initialized"),panelTeardown:(0,t.R)("panel-teardown"),render:(0,t.R)("render")};class o extends n.x{static{this.type="graph-hover"}}class m extends n.a{constructor(){super(...arguments),this.payload={point:{}}}static{this.type="graph-hover-clear"}}},55004:(Q,I,e)=>{"use strict";e.d(I,{Cz:()=>m,DG:()=>d,Qp:()=>g,Z7:()=>l,ZF:()=>r,aj:()=>c,ew:()=>o,jQ:()=>i,o4:()=>s,os:()=>n,qD:()=>t});var t=(u=>(u.DataSource="ds",u.Plugin="plugin",u.Grafana="grafana",u.Stream="stream",u))(t||{}),n=(u=>(u.DataStream="stream",u.DataFrame="frame",u.JSON="json",u))(n||{}),r=(u=>(u.Pending="pending",u.Connected="connected",u.Connecting="connecting",u.Disconnected="disconnected",u.Shutdown="shutdown",u.Invalid="invalid",u))(r||{}),s=(u=>(u.Status="status",u.Join="join",u.Leave="leave",u.Message="message",u))(s||{});function o(u){return u.type==="status"}function m(u){return u.type==="join"}function i(u){return u.type==="leave"}function l(u){return u.type==="message"}function d(u){if(u?.length){let E=u.trim().split("/");if(E.length>=3)return{scope:E[0],namespace:E[1],path:E.slice(2).join("/")}}}function c(u){return!!(u?.path&&u.namespace&&u.scope)}function g(u){if(!u.scope)return"";let E=u.scope;return!u.namespace||(E+="/"+u.namespace,!u.path)?E:E+"/"+u.path}},9557:(Q,I,e)=>{"use strict";e.d(I,{$b:()=>n,Aj:()=>l,FP:()=>g,Nc:()=>d,Ol:()=>m,ZF:()=>o,_0:()=>u,_C:()=>s,cF:()=>i,fY:()=>t.fY,tG:()=>r,uH:()=>t.uH,wj:()=>c});var t=e(52622),n=(E=>(E.emerg="critical",E.fatal="critical",E.alert="critical",E.crit="critical",E.critical="critical",E.warn="warning",E.warning="warning",E.err="error",E.eror="error",E.error="error",E.info="info",E.information="info",E.informational="info",E.notice="info",E.dbug="debug",E.debug="debug",E.trace="trace",E.unknown="unknown",E))(n||{}),r=(E=>(E[E.Number=0]="Number",E[E.String=1]="String",E[E.LabelsMap=2]="LabelsMap",E[E.Error=3]="Error",E))(r||{}),s=(E=>(E.none="No de-duplication",E.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",E.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",E.signature="De-duplication of successive lines that have identical punctuation and whitespace.",E))(s||{}),o=(E=>(E.Backward="BACKWARD",E.Forward="FORWARD",E))(o||{});const m=E=>!E||typeof E!="object"?!1:"getLogRowContext"in E;var i=(E=>(E.LogsVolume="LogsVolume",E.LogsSample="LogsSample",E))(i||{}),l=(E=>(E.FullRange="FullRange",E.Limited="Limited",E))(l||{});const d=(E,p)=>E?("getDataProvider"in E||"getSupplementaryRequest"in E)&&"getSupplementaryQuery"in E&&"getSupportedSupplementaryQueryTypes"in E&&E.getSupportedSupplementaryQueryTypes().includes(p):!1,c=E=>!E||typeof E!="object"?!1:"getLogRowContextUi"in E,g=E=>E!=null&&typeof E=="object"&&"toggleQueryFilter"in E&&"queryHasFilter"in E,u=E=>E!=null&&typeof E=="object"&&"modifyQuery"in E&&"getSupportedQueryModifications"in E},64388:(Q,I,e)=>{"use strict";e.d(I,{k:()=>t});var t=(n=>(n[n.Standard=0]="Standard",n[n.Canvas=1]="Canvas",n[n.Custom=2]="Custom",n))(t||{})},62625:(Q,I,e)=>{"use strict";e.d(I,{X:()=>t});var t=(n=>(n.None="None",n.Viewer="Viewer",n.Editor="Editor",n.Admin="Admin",n))(t||{})},47070:(Q,I,e)=>{"use strict";e.d(I,{NV:()=>i,nQ:()=>o,v2:()=>m,wV:()=>s});var t=e(2543),n=e.n(t),r=e(11261),s=(l=>(l.Auto="auto",l.Vertical="vertical",l.Horizontal="horizontal",l))(s||{}),o=(l=>(l[l.Best=100]="Best",l[l.Good=70]="Good",l[l.OK=50]="OK",l))(o||{});class m{constructor(d,c){this.list=[],this.data=d,this.panel=c,this.dataSummary=this.computeDataSummary()}getListAppender(d){return new i(this.list,d)}computeDataSummary(){const d=this.data?.series||[];let c=0,g=0,u=0,E=0,p=0,b=0,a;for(const h of d){E+=h.length,h.meta?.preferredVisualisationType&&(a=h.meta.preferredVisualisationType);for(const P of h.fields)switch(b++,P.type){case r.PU.number:c+=1;break;case r.PU.time:g+=1;break;case r.PU.string:u+=1;break}h.length>p&&(p=h.length)}return{numberFieldCount:c,timeFieldCount:g,stringFieldCount:u,rowCountTotal:E,rowCountMax:p,fieldCount:b,preferredVisualisationType:a,frameCount:d.length,hasData:E>0,hasTimeField:g>0,hasNumberField:c>0,hasStringField:u>0}}getList(){return this.list}}class i{constructor(d,c){this.list=d,this.defaults=c}append(d){this.list.push((0,t.defaultsDeep)(d,this.defaults))}}},43429:(Q,I,e)=>{"use strict";e.d(I,{Ac:()=>r,QE:()=>n,Ud:()=>i,ZK:()=>o,ib:()=>m,kv:()=>s,pn:()=>t});var t=(l=>(l.alpha="alpha",l.beta="beta",l.stable="stable",l.deprecated="deprecated",l))(t||{}),n=(l=>(l.panel="panel",l.datasource="datasource",l.app="app",l.renderer="renderer",l.secretsmanager="secretsmanager",l))(n||{}),r=(l=>(l.internal="internal",l.valid="valid",l.invalid="invalid",l.modified="modified",l.missing="missing",l))(r||{}),s=(l=>(l.grafana="grafana",l.commercial="commercial",l.community="community",l.private="private",l.core="core",l))(s||{}),o=(l=>(l.missingSignature="signatureMissing",l.invalidSignature="signatureInvalid",l.modifiedSignature="signatureModified",l))(o||{}),m=(l=>(l.dashboard="dashboard",l.page="page",l.panel="panel",l.datasource="datasource",l))(m||{});class i{addConfigPage(d){return this.configPages||(this.configPages=[]),this.configPages.push(d),this}setChannelSupport(){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},74135:(Q,I,e)=>{"use strict";e.d(I,{S:()=>n,u:()=>t});var t=(r=>(r.link="link",r.component="component",r))(t||{}),n=(r=>(r.AlertInstanceAction="grafana/alerting/instance/action",r.CommandPalette="grafana/commandpalette/action",r.DashboardPanelMenu="grafana/dashboard/panel/menu",r.DataSourceConfig="grafana/datasources/config",r.ExploreToolbarAction="grafana/explore/toolbar/action",r.UserProfileTab="grafana/user/profile/tab",r))(n||{})},51527:(Q,I,e)=>{"use strict";e.d(I,{x:()=>n});var t=e(43429);function n(r){return r&&r!==t.Ac.valid&&r!==t.Ac.internal}},73372:(Q,I,e)=>{"use strict";e.d(I,{D_:()=>n,Ee:()=>s,FL:()=>r,QR:()=>t.QR});var t=e(52622),n=(o=>(o.Equal="Equal",o.NotEqual="NotEqual",o.EqualRegEx="EqualRegEx",o.NotEqualRegEx="NotEqualRegEx",o))(n||{});const r=o=>!o||typeof o!="object"?!1:"importFromAbstractQueries"in o,s=o=>!o||typeof o!="object"?!1:"exportToAbstractQueries"in o},37891:()=>{"use strict"},98102:()=>{"use strict"},64367:()=>{"use strict"},12470:(Q,I,e)=>{"use strict";e.d(I,{CO:()=>t,ZG:()=>n,zL:()=>r});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s[s.naturalAsc=7]="naturalAsc",s[s.naturalDesc=8]="naturalDesc",s))(n||{}),r=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(r||{})},25137:(Q,I,e)=>{"use strict";e.d(I,{I:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},50082:(Q,I,e)=>{"use strict";e.d(I,{O:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},43127:(Q,I,e)=>{"use strict";e.d(I,{Cn:()=>m,E2:()=>o,G$:()=>s,lE:()=>r});var t=e(52622),n=e(47232);const r=t.vp,s="YYYY-MM-DD HH:mm:ss";function o(){const i=(0,n.KQ)();return{from:(0,n.KQ)(i).subtract(6,"hour"),to:i,raw:{from:"now-6h",to:"now"}}}function m(){return{from:600,to:0}}},38893:()=>{"use strict"},81010:(Q,I,e)=>{"use strict";e.d(I,{M:()=>t,N:()=>n});var t=(r=>(r[r.NotPossible=-1]="NotPossible",r[r.NotApplicable=0]="NotApplicable",r[r.Applicable=1]="Applicable",r[r.HighlyApplicable=2]="HighlyApplicable",r))(t||{}),n=(r=>(r.True="true",r.False="false",r.Null="null",r.Empty="empty",r))(n||{})},25019:(Q,I,e)=>{"use strict";e.d(I,{W:()=>n,d:()=>t});var t=(r=>(r.ValueToText="value",r.RangeToText="range",r.RegexToText="regex",r.SpecialValue="special",r))(t||{}),n=(r=>(r.True="true",r.False="false",r.Null="null",r.NaN="nan",r.NullAndNaN="null+nan",r.Empty="empty",r))(n||{})},29505:(Q,I,e)=>{"use strict";e.d(I,{J$:()=>r,Qz:()=>t,ZV:()=>o,f5:()=>s,xi:()=>n});var t=(m=>(m.Legacy="legacy",m.Standard="standard",m.Custom="custom",m.Datasource="datasource",m))(t||{});class n{}class r extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class o extends n{getType(){return"datasource"}}},35853:(Q,I,e)=>{"use strict";e.d(I,{V:()=>t});function t(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(n,r){this[n]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(n){this.push(n)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}t()},60264:(Q,I,e)=>{"use strict";e.d(I,{bk:()=>i,pv:()=>c,iF:()=>d});var t=e(2543),n=e(69550),r=e(27310),s=e(39070),o=e(83077);class m{constructor(){this.properties=[]}addCustomEditor(u){return this.properties.push(u),this}getRegistry(){return new o.O(()=>this.properties)}getItems(){return this.properties}}class i extends m{addNumberInput(u){return this.addCustomEditor({...u,id:u.path,override:n.D.get("number").editor,editor:n.D.get("number").editor,process:r.m0,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addSliderInput(u){return this.addCustomEditor({...u,id:u.path,override:n.D.get("slider").editor,editor:n.D.get("slider").editor,process:r.m0,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addTextInput(u){return this.addCustomEditor({...u,id:u.path,override:n.D.get("text").editor,editor:n.D.get("text").editor,process:r.OU,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addSelect(u){return this.addCustomEditor({...u,id:u.path,override:n.D.get("select").editor,editor:n.D.get("select").editor,process:r.hL,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{options:[]}})}addRadio(u){return this.addCustomEditor({...u,id:u.path,override:n.D.get("radio").editor,editor:n.D.get("radio").editor,process:r.hL,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{options:[]}})}addBooleanSwitch(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addColorPicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("color").editor,override:n.D.get("color").editor,process:r.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addUnitPicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:r.lG,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addFieldNamePicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("field-name").editor,override:n.D.get("field-name").editor,process:r.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addGenericEditor(u,E){return this.addCustomEditor({...u,id:u.path,editor:E,override:E,process:r.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}}class l{constructor(u){this.cfg=u,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=E=>{const p=this.cfg.values;return p?p(E):{getValue:b=>E.getValue(`${this.path}.${b}`),onChange:(b,a)=>E.onChange(`${this.path}.${b}`,a)}},this.path=u.path,this.category=u.category,this.defaultValue=this.getDefaultValue(u)}getDefaultValue(u){let E=(0,s.Gv)(u.defaultValue)?(0,t.cloneDeep)(u.defaultValue):{};const p=new c;u.build(p,{data:[]});for(const b of p.getItems())b.defaultValue!=null&&(0,t.set)(E,b.path,b.defaultValue);return E}}function d(g){return(0,s.Gv)(g)&&"id"in g&&g.id==="nested-panel-options"}class c extends m{addNestedOptions(u){const E=new l(u);return this.addCustomEditor(E)}addNumberInput(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("number").editor})}addSliderInput(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("slider").editor})}addTextInput(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("text").editor})}addStringArray(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("strings").editor})}addSelect(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("select").editor})}addMultiSelect(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("multi-select").editor})}addRadio(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("radio").editor})}addBooleanSwitch(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("boolean").editor})}addColorPicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("color").editor,settings:u.settings||{}})}addTimeZonePicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("timezone").editor,settings:u.settings||{}})}addUnitPicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("unit").editor})}addFieldNamePicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("field-name").editor})}addDashboardPicker(u){return this.addCustomEditor({...u,id:u.path,editor:n.D.get("dashboard-uid").editor})}}},28802:(Q,I,e)=>{"use strict";e.d(I,{t:()=>r});var t=e(2543),n=e.n(t);function r(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},14588:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{insertAfterImmutably:()=>s,insertBeforeImmutably:()=>r,moveItemImmutably:()=>n,sortValues:()=>i});var t=e(52622);function n(l,d,c){const g=[...l];return Array.prototype.splice.call(g,c,0,Array.prototype.splice.call(g,d,1)[0]),g}function r(l,d,c){if(c<0||c>l.length)throw new Error("Index out of bounds");const g=[...l];return g.splice(c,0,d),g}function s(l,d,c){if(c<0||c>l.length)throw new Error("Index out of bounds");const g=[...l];return g.splice(c+1,0,d),g}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),m=(l,d)=>l-d;function i(l){return(d,c)=>{if(d===c)return 0;if(c==null||typeof c=="string"&&c.trim()==="")return-1;if(d==null||typeof d=="string"&&d?.trim()==="")return 1;let g=o.compare;return typeof d=="number"&&typeof c=="number"&&(g=m),l===t.xB.Descending?g(c,d):g(d,c)}}},11710:(Q,I,e)=>{"use strict";e.d(I,{b:()=>r,k:()=>n});var t=e(83077),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const r=new t.O(()=>[{id:"+",name:"Add",operation:(s,o)=>s+o,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(s,o)=>s-o,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(s,o)=>s*o,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(s,o)=>s/o,binaryOperationID:"/"}])},72436:(Q,I,e)=>{"use strict";e.d(I,{F7:()=>c,Jh:()=>g,_O:()=>P,i8:()=>E});var t=e(2543),n=e.n(t),r=e(44809),s=e.n(r),o=e(37471),m=e(14236),i=e(28240),l=e(11261),d=e(83195),c=(y=>(y[y.full=0]="full",y[y.name=1]="name",y[y.none=2]="none",y))(c||{});function g(y,C){return new E(C).readCSV(y)}var u=(y=>(y[y.Starting=0]="Starting",y[y.InHeader=1]="InHeader",y[y.ReadingRows=2]="ReadingRows",y))(u||{});class E{constructor(C){this.chunk=(f,D)=>{for(let T=0;T<f.data.length;T++){const M=f.data[T];if(M.length<1)continue;const O=M[0];if(O){if(O.startsWith("#")){const S=O.indexOf("#",2);if(S>0){const v=O.slice(1,S),x=v==="name";if(x||{unit:"#"}.hasOwnProperty(v)){this.state===2&&(this.current=new o.k({fields:[]}),this.data.push(this.current));const R=O.slice(S+1);if(x){this.current.addFieldFor(void 0,R);for(let B=1;B<M.length;B++)this.current.addFieldFor(void 0,M[B])}else{const{fields:B}=this.current;for(let U=0;U<B.length;U++){B[U].config||(B[U].config={});const w=B[U].config;w[v]=U===0?R:M[U]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,m.HW)(O)===l.PU.string){for(const v of M)this.current.addFieldFor(void 0,v);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:S}=this.current;for(let v=S.length;v<M.length;v++)this.current.addFieldFor(M[v]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},C||(C={}),this.config=C.config||{},this.callback=C.callback,this.current=new o.k({fields:[]}),this.state=0,this.data=[]}readCSV(C){this.current=new o.k({fields:[]}),this.data=[this.current];const f={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(C,f),this.data}}function p(y,C){if(y==null)return"";const f=y.toString();return f.includes('"')?C.quoteChar+f.replace(/"/gi,'""')+C.quoteChar:f.includes(`
`)||C.delimiter&&f.includes(C.delimiter)?C.quoteChar+f+C.quoteChar:f}function b(y,C){return y.display?f=>{const D=y.display(f);return p((0,d.cN)(D),C)}:f=>p(f,C)}function a(y,C,f){const D=y==="name",T=y==="type";for(const M of C){const O=M.config;if(D||T||O&&O.hasOwnProperty(y)){let S="#"+y+"#";for(let v=0;v<C.length;v++){v>0&&(S=S+f.delimiter);let x=C[v].name;T?x=C[v].type:D||(x=C[v].config[y]),x&&(S=S+p(x,f))}return S+f.newline}}return""}function h(){const y=["x","y"];return y.toLocaleString?y.toLocaleString().charAt(1):","}function P(y,C){if(!y)return"";C=(0,t.defaults)(C,{delimiter:h(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let f=C.useExcelHeader?`sep=${C.delimiter}${C.newline}`:"";for(let D=0;D<y.length;D++){const T=y[D],{fields:M}=T;if(M.length===0)continue;if(C.headerStyle===0)f=f+a("name",M,C)+a("type",M,C)+a("unit",M,C)+a("dateFormat",M,C);else if(C.headerStyle===1){for(let S=0;S<M.length;S++)S>0&&(f+=C.delimiter),f+=`"${(0,i.Ct)(M[S],T).replace(/"/g,'""')}"`;f+=C.newline}const O=M[0].values.length;if(O>0){const S=M.map(v=>b(v,C));for(let v=0;v<O;v++){for(let x=0;x<M.length;x++){x>0&&(f=f+C.delimiter);const A=M[x].values[v];A!==null&&(f=f+S[x](A))}v!==O-1&&(f=f+C.newline)}}D!==y.length-1&&(f=f+C.newline)}return f}},6709:(Q,I,e)=>{"use strict";e.d(I,{c:()=>r,u:()=>s});var t=e(71733),n=e(76885);const r={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(l){const{onClickFn:d,replaceVariables:c,link:g,scopedVars:u,range:E,field:p,internalLink:b}=l,a=m(g.internal?.query,u,c),h=m(g.internal?.panelsState,u,c),P=m(g.internal?.meta?.correlationData,u,c),y=g.title?g.title:b.datasourceName;return{title:c(y,u),href:o(b.datasourceUid,a,E,h),onClick:d?C=>{C.preventDefault&&C.preventDefault(),d({datasourceUid:b.datasourceUid,queries:[a],panelsState:h,correlationHelperData:P,range:E})}:void 0,target:g?.targetBlank?"_blank":"_self",origin:p}}function o(l,d,c,g){return t.I.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.Pp)({...c?.raw?{range:(0,n.sQ)(c.raw)}:{},datasource:l,queries:[d],panelsState:g}))}`)}function m(l,d,c){if(!l)return l;if(typeof l=="string")return c(l,d);const g=JSON.parse(JSON.stringify(l));return i(g,d,c)}function i(l,d,c){for(const g of Object.keys(l))typeof l[g]=="string"?l[g]=c(l[g],d):typeof l[g]=="object"&&l[g]!==null&&(l[g]=i(l[g],d,c));return l}},22391:(Q,I,e)=>{"use strict";e.d(I,{BD:()=>d,EX:()=>c,Iz:()=>o,PG:()=>i,QP:()=>a,fN:()=>s,lO:()=>p,mn:()=>l,p$:()=>r,pN:()=>E,wY:()=>g,wp:()=>b,yV:()=>u,zX:()=>m});var t=e(2543),n=e.n(t);function r(h){return{uid:h.uid,type:h.type}}function s(h){return typeof h=="object"&&typeof h?.uid=="string"}function o(h){if(s(h))return h.uid;if((0,t.isString)(h))return h}const m=(h,P)=>y=>{E(h,P,y.currentTarget.value)},i=(h,P)=>y=>{p(h,P,y.currentTarget.value)},l=(h,P)=>y=>{b(h,P,y.currentTarget.value)},d=(h,P)=>y=>{p(h,P,y.value)},c=(h,P)=>y=>{p(h,P,y.currentTarget.checked)},g=(h,P)=>y=>{b(h,P,y.value)},u=(h,P)=>y=>{a(h,P)};function E(h,P,y){const C=h.options;h.onOptionsChange({...C,[P]:y})}const p=(h,P,y)=>{const C=h.options;h.onOptionsChange({...C,jsonData:{...C.jsonData,[P]:y}})},b=(h,P,y)=>{const C=h.options;h.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[P]:y}})},a=(h,P)=>{const y=h.options;h.onOptionsChange({...y,secureJsonData:{...y.secureJsonData?y.secureJsonData:{},[P]:""},secureJsonFields:{...y.secureJsonFields,[P]:!1}})}},95344:(Q,I,e)=>{"use strict";e.d(I,{l:()=>n});const t={},n=(r,s,o)=>{let m=`[Deprecation warning] ${r}: ${s} is deprecated`;o&&(m+=`. Use ${o} instead`);const i=Date.now(),l=t[m];(!l||i-l>1e4)&&(console.warn(m),t[m]=i)}},87885:(Q,I,e)=>{"use strict";e.d(I,{f:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},39306:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n,r:()=>r});var t=e(39070);function n({xField:s,yField:o,nullValueMode:m}){const i=s.values,l=o.values,d=i.length;if(l.length!==d)throw new Error("Unexpected field length");const c=m===t.UW.Ignore,g=m===t.UW.AsZero,u=[];for(let E=0;E<d;E++){const p=i[E];let b=l[E];if(b===null){if(c)continue;g&&(b=0)}p!==null&&u.push([p,b])}return u}function r(s,o){if(!o.from||!o.to||!s||s.length===0)return[];const m=o.from.valueOf(),i=o.to.valueOf(),l=s[0][1];return[[m,l],[i,l]]}},94032:(Q,I,e)=>{"use strict";e.d(I,{kP:()=>u.k,F7:()=>o.F7,i8:()=>o.i8,cI:()=>C.c,fu:()=>f.f,bk:()=>a.bk,An:()=>O.An,uc:()=>p.u,pv:()=>a.pv,OR:()=>n.O,_G:()=>E._,to:()=>T.t,XC:()=>t,bP:()=>u.b,tj:()=>d,Eg:()=>S.E,bh:()=>O.bh,lt:()=>s.l,yO:()=>m.yO,s6:()=>m.s6,h6:()=>m.h6,p$:()=>r.p$,Iz:()=>r.Iz,RZ:()=>h.R,rG:()=>h.r,cs:()=>S.c,tY:()=>c,E6:()=>i.E,dO:()=>g,fN:()=>r.fN,RI:()=>l.R,Ig:()=>P.I,Yi:()=>D.Y,uS:()=>C.u,_p:()=>m._p,_8:()=>x._,wm:()=>l.w,PG:()=>r.PG,EX:()=>r.EX,BD:()=>r.BD,zX:()=>r.zX,yV:()=>r.yV,mn:()=>r.mn,wY:()=>r.wY,Xy:()=>m.Xy,Jh:()=>o.Jh,j_:()=>v.j,hB:()=>i.h,Pp:()=>y.Pp,_O:()=>o._O,zL:()=>b.z,sQ:()=>y.sQ,j7:()=>E.j,lO:()=>r.lO,pN:()=>r.pN,QP:()=>r.QP,wp:()=>r.wp,kM:()=>y.kM,kz:()=>M.k});var t=e(14588),n=e(83077),r=e(22391),s=e(95344),o=e(72436),m=e(8249),i=e(97706),l=e(92041);const d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],c=A=>{let R,B,U=Number.MAX_VALUE;for(let w=0;w<A.values.length;w++){const K=A.values[w];if(R!==void 0){const N=K-R;B===void 0&&(U=N),N<U&&(U=N)}R=K}return U},g=A=>{for(let R=0;R<A.values.length;R++){const B=A.values[R];if(B!=null){const U=B.toString();if(U.length===13&&U%1e3!==0)return!0}}return!1};var u=e(11710),E=e(27618),p=e(25352),b=e(50877),a=e(60264),h=e(39306),P=e(71733),y=e(76885),C=e(6709),f=e(87885),D=e(92341),T=e(28802),M=e(72495),O=e(62398),S=e(92053),v=e(43659),x=e(80147)},8249:(Q,I,e)=>{"use strict";e.d(I,{Xy:()=>n,_p:()=>o,h6:()=>m,s6:()=>s,yO:()=>r});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(i){const l={};return i.replace(t,(d,c,g,u)=>(l[c]=u,"")),l}function r(i){return i.reduce((l,d)=>{if(!d)throw new Error("Need parsed labels to find common labels.");return Object.keys(d).forEach(c=>{(l[c]===void 0||l[c]!==d[c])&&delete l[c]}),Object.keys(l).forEach(c=>{d[c]===void 0&&delete l[c]}),l},{...i[0]})}function s(i,l){const d={...i};return Object.keys(l).forEach(c=>{delete d[c]}),d}function o(i,l){if(!i)return!0;for(const[d,c]of Object.entries(i))if(!l||l[d]!==c)return!1;return!0}function m(i,l="",d){if(!i||Object.keys(i).length===0)return l;const g=Object.keys(i).sort().map(u=>`${u}="${i[u]}"`).join(", ");return d?g:["{",g,"}"].join("")}},71733:(Q,I,e)=>{"use strict";e.d(I,{I:()=>g});var t=e(40672),n=e(76885);let r={appSubUrl:""},s,o;const m=u=>{try{return new URL(u)}catch{return}},i=u=>{const E=m(u);if(E&&E.origin!==window.location.origin)return u;const p=r.appSubUrl??"",b=p.endsWith("/")?1:0,a=u.startsWith("http");let h=p;return(!u.startsWith("/")||a)&&(h=`${window.location.origin}${p}`),u.length>0&&(u.indexOf(h+"/")===0||u===h)?u.slice(h.length-b):u},l=u=>u.startsWith("/")?`${r.appSubUrl}${i(u)}`:u,g={initialize:u=>{r=u.config,s=u.getTimeRangeForUrl,o=u.getVariablesUrlParams},stripBaseFromUrl:i,assureBaseUrl:l,updateSearchParams:(u,E)=>{const p=new URLSearchParams(E);try{const b=new URL(u);return p.forEach((a,h)=>b.searchParams.set(h,a)),b.href}catch{const b=new URLSearchParams(u);return p.forEach((a,h)=>{b.set(h,a)}),"?"+b.toString()}},getTimeRangeUrlParams:()=>s?n.kM.toUrlParams(s()):null,getVariablesUrlParams:u=>{if(!o)return null;const E=o(u);return n.kM.toUrlParams(E)},getUrlForPartial:(u,E)=>{const p=n.kM.parseKeyValue(u.search.startsWith("?")?u.search.substring(1):u.search);for(const b of Object.keys(E))E[b]===null||E[b]===void 0?delete p[b]:p[b]=E[b];return l(n.kM.renderUrl(u.pathname,p))},processUrl:u=>r.disableSanitizeHtml?u:t.sQ.sanitizeUrl(u)}},92341:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>t});function t(n){return new Proxy(n,{apply(r,s,o){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(r,o,s.constructor)}})}},80147:(Q,I,e)=>{"use strict";e.d(I,{_:()=>t});function t(n,r){return r.id===n?!0:r.aliasIDs?r.aliasIDs.includes(n):!1}},25352:(Q,I,e)=>{"use strict";e.d(I,{u:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n.nodeRadius="noderadius",n.thickness="thickness",n.highlighted="highlighted",n.strokeDasharray="strokedasharray",n))(t||{})},97706:(Q,I,e)=>{"use strict";e.d(I,{E:()=>n,h:()=>t});function t(r,s=0){if(Number.isInteger(r))return r;let o=10**s,m=r*o*(1+Number.EPSILON);return Math.round(m)/o}function n(r){return((""+r).split(".")[1]||"").length}},92041:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n,w:()=>t});const t=r=>Object.keys(r).reduce((s,o)=>(r[o]!==void 0&&(s[o]=r[o]),s),{}),n=r=>typeof r=="object"&&r!==null&&Object.keys(r).length===0},50877:(Q,I,e)=>{"use strict";e.d(I,{z:()=>t});const t=n=>({label:n,value:n})},27618:(Q,I,e)=>{"use strict";e.d(I,{_:()=>n,j:()=>r});var t=e(83077),n=(s=>(s.Abs="abs",s.Exp="exp",s.Ln="ln",s.Floor="floor",s.Ceil="ceil",s))(n||{});const r=new t.O(()=>[{id:"abs",name:"Absolute value",operation:s=>Math.abs(s),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:s=>Math.exp(s),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:s=>Math.log(s),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:s=>Math.floor(s),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:s=>Math.ceil(s),unaryOperationID:"ceil"}])},76885:(Q,I,e)=>{"use strict";e.d(I,{Pp:()=>g,kM:()=>c,sQ:()=>u});var t=e(47232);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function n(E,p){return p&&Object.keys(p).length>0&&(E+="?"+s(p)),E}function r(E,p){return encodeURIComponent(E).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,p?"%20":"+").replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})}function s(E,p=!0){const b=[],a=/\[\]$/,h=p?(f,D)=>r(f,D):(f,D)=>encodeURIComponent(f),P=f=>Object.prototype.toString.call(f)==="[object Array]",y=(f,D)=>{if(D=typeof D=="function"?D():D===null||D===void 0?"":D,typeof D!="boolean")b[b.length]=h(f,!0)+"="+h(D,!0);else{const T=D?"":"="+h("false",!0);b[b.length]=h(f,!0)+T}},C=(f,D)=>{let T,M,O;if(f)if(P(D))for(T=0,M=D.length;T<M;T++)a.test(f)?y(f,D[T]):C(f,D[T]);else if(D&&String(D)==="[object Object]")for(O in D)C(f+"["+O+"]",D[O]);else y(f,D);else if(P(D))for(T=0,M=D.length;T<M;T++)y(D[T].name,D[T].value);else for(O in D)C(O,D[O]);return b};return C("",E).join("&")}function o(E){return s(E,!1)}function m(E,p){if(p!=null&&p!==""){const b=E.indexOf("?");b!==-1?E.length-b>1&&(E+="&"):E+="?",E+=p}return E}function i(){const p=window.location.search.substring(1).split("&"),b={};for(const a of p){const h=a.split("=");if(h.length>1){const P=decodeURIComponent(h[0]),y=decodeURIComponent(h[1]);P in b?b[P]=[...b[P],y]:b[P]=[y]}else if(h.length===1){const P=decodeURIComponent(h[0]);b[P]=!0}}return b}function l(E){const p={},b=(E||"").split("&");for(let a of b){let h,P,y;if(a&&(P=a=a.replace(/\+/g,"%20"),h=a.indexOf("="),h!==-1&&(P=a.substring(0,h),y=a.substring(h+1)),P=d(P),P!==void 0)){y=y!==void 0?d(y):!0;let C;typeof y=="string"&&y!==""?C=y==="true"||y==="false"?y==="true":y:C=y,p.hasOwnProperty(P)?Array.isArray(p[P])?p[P].push(y):p[P]=[p[P],isNaN(C)?y:C]:p[P]=isNaN(C)?y:C}}return p}function d(E){try{return decodeURIComponent(E)}catch{return}}const c={renderUrl:n,toUrlParams:s,appendQueryToUrl:m,getUrlSearchParams:i,parseKeyValue:l,serializeParams:o};function g(E,p){return p!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(E)}const u=E=>{let p=E.from;(0,t.Ar)(p)&&(p=p.valueOf().toString());let b=E.to;return(0,t.Ar)(b)&&(b=b.valueOf().toString()),{from:p,to:b}}},62398:(Q,I,e)=>{"use strict";e.d(I,{An:()=>m,Zz:()=>s,bh:()=>i});var t=e(47737),n=e(54479),r=e(25019);function s(d,c){for(const g of d)switch(g.type){case r.d.ValueToText:if(c==null)continue;const u=g.options[c];if(u)return u;break;case r.d.RangeToText:if(c==null)continue;const E=parseFloat(c);if(isNaN(E)||!isNaN(g.options.from)&&E<g.options.from||!isNaN(g.options.to)&&E>g.options.to)continue;return g.options.result;case r.d.RegexToText:if(c==null||typeof c!="string")continue;const a=(0,n.dO)(g.options.pattern);if(c.match(a)){const h={...g.options.result};return h.text!=null&&(h.text=c.replace(a,g.options.result.text||"")),h}case r.d.SpecialValue:switch(g.options.match){case r.W.Null:{if(c==null)return g.options.result;break}case r.W.NaN:{if(typeof c=="number"&&isNaN(c))return g.options.result;break}case r.W.NullAndNaN:{if(typeof c=="number"&&isNaN(c)||c==null)return g.options.result;break}case r.W.True:{if(c===!0||c==="true")return g.options.result;break}case r.W.False:{if(c===!1||c==="false")return g.options.result;break}case r.W.Empty:{if(c==="")return g.options.result;break}}}return null}function o(d){return(typeof d=="number"||typeof d=="string"&&d.trim()!=="")&&!isNaN(d)}var m=(d=>(d[d.ValueToText=1]="ValueToText",d[d.RangeToText=2]="RangeToText",d))(m||{});function i(d,c){const g=[];let u=d.mappingType;if(d.mappingType||(d.valueMaps&&d.valueMaps.length?u=1:d.rangeMaps&&d.rangeMaps.length&&(u=2)),u===1)for(let E=0;E<d.valueMaps.length;E++){const p=d.valueMaps[E];g.push(l({...p,id:E,type:r.d.ValueToText},d.fieldConfig?.defaults?.thresholds||c))}else if(u===2)for(let E=0;E<d.rangeMaps.length;E++){const p=d.rangeMaps[E];g.push(l({...p,id:E,type:r.d.RangeToText},d.fieldConfig?.defaults?.thresholds||c))}return g}function l(d,c){const g={type:r.d.ValueToText,options:{}},u=[];let E;const p=parseFloat(d.text);if(c&&!isNaN(p)){const b=(0,t.yQ)(p,c.steps);b&&b.color&&(E=b.color)}switch(d.type){case 1:case r.d.ValueToText:d.value!=null&&(d.value==="null"?u.push({type:r.d.SpecialValue,options:{match:r.W.Null,result:{text:d.text,color:E}}}):g.options[String(d.value)]={text:d.text,color:E});break;case 2:case r.d.RangeToText:d.from==="null"||d.to==="null"?u.push({type:r.d.SpecialValue,options:{match:r.W.Null,result:{text:d.text,color:E}}}):u.push({type:r.d.RangeToText,options:{from:+d.from,to:+d.to,result:{text:d.text,color:E}}});break}return Object.keys(g.options).length>0&&u.unshift(g),u[0]}},92053:(Q,I,e)=>{"use strict";e.d(I,{E:()=>n,c:()=>r});const t="__searchFilter",n=s=>s&&typeof s=="string"?s.indexOf(t)!==-1:!1,r=s=>{const{query:o,wildcardChar:m}=s;if(!n(o))return{};let{options:i}=s;return i=i||{searchFilter:""},{__searchFilter:{value:i.searchFilter?`${i.searchFilter}${m}`:`${m}`,text:""}}}},72495:(Q,I,e)=>{"use strict";e.d(I,{k:()=>o});var t=e(44240),n=e(39697),r=e(65961),s=e(67791);function o({whileLoading:m,source:i}){return(0,t.h)((0,n.O)(200).pipe((0,r.u)(m),(0,s.Q)(i)),i)}},56496:(Q,I,e)=>{"use strict";e.d(I,{G8:()=>t.G8,Hg:()=>t.Hg,Ke:()=>t.Ke,Mg:()=>t.Mg,Qc:()=>t.Qc,UR:()=>t.UR,cH:()=>t.cH,cN:()=>t.cN,gZ:()=>t.gZ,j9:()=>t.j9,j_:()=>t.j_,uH:()=>t.uH,yP:()=>t.yP});var t=e(83195)},26517:(Q,I,e)=>{"use strict";e.d(I,{Gl:()=>n,cL:()=>o,rT:()=>l,yW:()=>i});var t=e(83195);function n(d,c){const g=["","K","M","B","T"],u=(0,t.yP)(1e3,g);return(E,p,b)=>{if(E==null)return{text:""};const a=E<0;a&&(E=Math.abs(E));const h=u(E,p,b);return c?h.suffix=h.suffix!==void 0?`${h.suffix}${d}`:void 0:h.prefix=d,a&&(h.prefix=`-${h.prefix?.length?h.prefix:""}`),h}}const r=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=r.indexOf("");function o(d){const c=r.findIndex(g=>g.normalize("NFKD")===d.normalize("NFKD"));return c<0?0:c-s}const m=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function i(d,c=0){const g=m.map(u=>" "+u+d);return(0,t.yP)(1024,g,c)}function l(d,c=0){const g=r.map(u=>" "+u+d);return(0,t.yP)(1e3,g,s+c)}},83195:(Q,I,e)=>{"use strict";e.d(I,{Qc:()=>ne,cN:()=>Y,j_:()=>re,Ke:()=>Fe,uH:()=>De,j9:()=>G,Hg:()=>le,yP:()=>oe,UR:()=>ue,cH:()=>Te,Mg:()=>ie,gZ:()=>q,G8:()=>J});var t=e(2543);function n(Ee,Me){return Ee===null?{text:""}:{text:ie(Ee,Me),suffix:"%"}}function r(Ee,Me){return Ee===null?{text:""}:{text:ie(100*Ee,Me),suffix:"%"}}function s(Ee,Me){if(Ee==null)return{text:""};const ze=o(Ee,Me);return ze.text.substring(0,1)==="-"?ze.text="-0x"+ze.text.substring(1):ze.text="0x"+ze.text,ze}function o(Ee,Me){return Ee==null?{text:""}:{text:parseFloat(ie(Ee,Me)).toString(16).toUpperCase()}}function m(Ee,Me){return Ee==null?{text:""}:{text:Ee.toExponential(Me??void 0)}}var i=e(72724),l=e(42994),d=e(47232),c=(Ee=>(Ee.Year="year",Ee.Month="month",Ee.Week="week",Ee.Day="day",Ee.Hour="hour",Ee.Minute="minute",Ee.Second="second",Ee.Millisecond="millisecond",Ee))(c||{});const g=["year","month","week","day","hour","minute","second","millisecond"],u={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function E(Ee,Me){return Ee===null?{text:""}:Math.abs(Ee)<1e3?{text:ie(Ee,Me),suffix:" ns"}:Math.abs(Ee)<1e6?q(Ee/1e3,Me," \xB5s"):Math.abs(Ee)<1e9?q(Ee/1e6,Me," ms"):Math.abs(Ee)<6e10?q(Ee/1e9,Me," s"):Math.abs(Ee)<36e11?q(Ee/6e10,Me," min"):Math.abs(Ee)<864e11?q(Ee/36e11,Me," hour"):q(Ee/864e11,Me," day")}function p(Ee,Me){return Ee===null?{text:""}:Math.abs(Ee)<1e3?{text:ie(Ee,Me),suffix:" \xB5s"}:Math.abs(Ee)<1e6?q(Ee/1e3,Me," ms"):q(Ee/1e6,Me," s")}function b(Ee,Me,ze){return Ee===null?{text:""}:Math.abs(Ee)<1e3?{text:ie(Ee,Me),suffix:" ms"}:Math.abs(Ee)<6e4?q(Ee/1e3,Me," s"):Math.abs(Ee)<36e5?q(Ee/6e4,Me," min"):Math.abs(Ee)<864e5?q(Ee/36e5,Me," hour"):Math.abs(Ee)<31536e6?q(Ee/864e5,Me," day"):q(Ee/31536e6,Me," year")}function a(Ee,Me){return Ee===null?{text:""}:Ee===0?{text:"0",suffix:" s"}:Math.abs(Ee)<1e-6?q(Ee*1e9,Me," ns"):Math.abs(Ee)<.001?q(Ee*1e6,Me," \xB5s"):Math.abs(Ee)<1?q(Ee*1e3,Me," ms"):Math.abs(Ee)<60?{text:ie(Ee,Me),suffix:" s"}:Math.abs(Ee)<3600?q(Ee/60,Me," min"):Math.abs(Ee)<86400?q(Ee/3600,Me," hour"):Math.abs(Ee)<604800?q(Ee/86400,Me," day"):Math.abs(Ee)<31536e3?q(Ee/604800,Me," week"):q(Ee/31556900,Me," year")}function h(Ee,Me){return Ee===null?{text:""}:Math.abs(Ee)<60?{text:ie(Ee,Me),suffix:" min"}:Math.abs(Ee)<1440?q(Ee/60,Me," hour"):Math.abs(Ee)<10080?q(Ee/1440,Me," day"):Math.abs(Ee)<604800?q(Ee/10080,Me," week"):q(Ee/525948,Me," year")}function P(Ee,Me){return Ee===null?{text:""}:Math.abs(Ee)<24?{text:ie(Ee,Me),suffix:" hour"}:Math.abs(Ee)<168?q(Ee/24,Me," day"):Math.abs(Ee)<8760?q(Ee/168,Me," week"):q(Ee/8760,Me," year")}function y(Ee,Me){return Ee===null?{text:""}:Math.abs(Ee)<7?{text:ie(Ee,Me),suffix:" day"}:Math.abs(Ee)<365?q(Ee/7,Me," week"):q(Ee/365,Me," year")}function C(Ee,Me,ze){if(Ee===null)return{text:""};if(Ee===0)return{text:"0",suffix:" "+ze+"s"};if(Ee<0){const pe=C(-Ee,Me,ze);return pe.suffix||(pe.suffix=""),pe.suffix+=" ago",pe}Ee*=u[ze]*1e3;const xe=[];let We=!1,be=0;Me!=null&&(be=Me);for(let pe=0;pe<g.length&&be>=0;pe++){const Ue=u[g[pe]]*1e3,we=Ee/Ue;if(we>=1||We){We=!0;const je=Math.floor(we),He=g[pe]+(je!==1?"s":"");xe.push(je+" "+He),Ee=Ee%Ue,be--}}return{text:xe.join(", ")}}function f(Ee,Me){if(Ee===null)return{text:""};if(Ee<1e3)return{text:(0,d.yT)(Ee).format("SSS\\m\\s")};if(Ee<6e4){let be="ss\\s:SSS\\m\\s";return Me===0&&(be="ss\\s"),{text:(0,d.yT)(Ee).format(be)}}if(Ee<36e5){let be="mm\\m:ss\\s:SSS\\m\\s";return Me===0?be="mm\\m":Me===1&&(be="mm\\m:ss\\s"),{text:(0,d.yT)(Ee).format(be)}}let ze="mm\\m:ss\\s:SSS\\m\\s";const xe=`${("0"+Math.floor((0,d.Ah)(Ee,"milliseconds").asHours())).slice(-2)}h`;return Me===0?ze="":Me===1?ze="mm\\m":Me===2&&(ze="mm\\m:ss\\s"),{text:ze?`${xe}:${(0,d.yT)(Ee).format(ze)}`:xe}}function D(Ee,Me){return C(Ee,Me,"millisecond")}function T(Ee,Me){return C(Ee,Me,"second")}function M(Ee){if(Ee<0){const be=M(-Ee);return be.suffix||(be.suffix=""),be.suffix+=" ago",be}const Me=[],ze=Math.floor(Ee/3600),xe=Math.floor(Ee%3600/60),We=Math.floor(Ee%3600%60);return ze>9?Me.push(""+ze):Me.push("0"+ze),xe>9?Me.push(""+xe):Me.push("0"+xe),We>9?Me.push(""+We):Me.push("0"+We),{text:Me.join(":")}}function O(Ee){if(Ee<0){const We=O(-Ee);return We.suffix||(We.suffix=""),We.suffix+=" ago",We}let Me="";const ze=Math.floor(Ee/(24*3600));ze>0&&(Me=ze+" d ");const xe=M(Ee-ze*24*3600);return{text:Me+xe.text}}function S(Ee,Me){return a(Ee/100,Me)}function v(Ee,Me){return f(Ee,Me)}function x(Ee,Me){return f(Ee*1e3,Me)}function A(Ee,Me){return(ze,xe,We,be)=>Me&&(0,d.KQ)().isSame(ze,"day")?{text:(0,i.LE)(ze,{format:Me,timeZone:be})}:{text:(0,i.LE)(ze,{format:Ee,timeZone:be})}}const R=A("YYYY-MM-DD HH:mm:ss"),B=A("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),U=A("MM/DD/YYYY h:mm:ss a"),w=A("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function K(){return A((0,l.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function N(){return A((0,l.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,l.Od)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function L(Ee,Me,ze,xe,We){return{text:(0,i.LE)(Ee,{format:We?l.WC.fullDateMS:l.WC.fullDate,timeZone:xe})}}function V(Ee,Me,ze,xe){return{text:(0,i.fq)(Ee,{timeZone:xe})}}var F=e(26517);const z=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:J("")},{name:"String",id:"string",fn:Te},{name:"short",id:"short",fn:oe(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"SI short",id:"sishort",fn:(0,F.rT)("")},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:r},{name:"Humidity (%H)",id:"humidity",fn:J("%H")},{name:"Decibel",id:"dB",fn:J("dB")},{name:"Candela (cd)",id:"candela",fn:(0,F.rT)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:o},{name:"Scientific notation",id:"sci",fn:m},{name:"Locale format",id:"locale",fn:le},{name:"Pixels",id:"pixel",fn:J("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:J("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:J("f/sec\xB2")},{name:"G unit",id:"accG",fn:J("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:J("\xB0")},{name:"Radians",id:"radian",fn:J("rad")},{name:"Gradian",id:"grad",fn:J("grad")},{name:"Arc Minutes",id:"arcmin",fn:J("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:J("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:J("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:J("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:J("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:J("ac")},{name:"Hectares (ha)",id:"hectares",fn:J("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,F.rT)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,F.rT)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,F.rT)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,F.rT)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,F.rT)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,F.rT)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,F.rT)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,F.rT)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:J("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:J("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:J("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:J("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:J("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:J("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:J("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:J("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:J("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:J("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:J("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:J("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,F.Gl)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,F.Gl)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,F.Gl)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,F.Gl)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,F.Gl)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,F.Gl)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,F.Gl)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,F.Gl)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,F.Gl)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,F.Gl)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,F.Gl)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,F.Gl)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,F.Gl)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,F.Gl)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,F.Gl)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,F.Gl)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,F.Gl)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,F.Gl)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,F.Gl)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,F.Gl)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,F.Gl)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,F.Gl)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,F.Gl)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,F.Gl)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,F.Gl)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,F.Gl)("XPF")},{name:"Bulgarian Lev (BGN)",id:"currencyBGN",fn:(0,F.Gl)("BGN")},{name:"Guaran\xED (\u20B2)",id:"currencyPYG",fn:(0,F.Gl)("\u20B2")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,F.yW)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,F.rT)("B")},{name:"bits(IEC)",id:"bits",fn:(0,F.yW)("b")},{name:"bits(SI)",id:"decbits",fn:(0,F.rT)("b")},{name:"kibibytes",id:"kbytes",fn:(0,F.yW)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,F.rT)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,F.yW)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,F.rT)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,F.yW)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,F.rT)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,F.yW)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,F.rT)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,F.yW)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,F.rT)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,F.rT)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,F.yW)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,F.rT)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,F.yW)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,F.rT)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,F.yW)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,F.yW)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,F.rT)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,F.rT)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,F.yW)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,F.yW)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,F.rT)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,F.rT)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,F.yW)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,F.yW)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,F.rT)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,F.rT)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,F.yW)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,F.yW)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,F.rT)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,F.rT)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,F.yW)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,F.yW)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,F.rT)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,F.rT)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:R},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:B},{name:"Datetime US",id:"dateTimeAsUS",fn:U},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:w},{name:"Datetime local",id:"dateTimeAsLocal",fn:K()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:N()},{name:"Datetime default",id:"dateTimeAsSystem",fn:L},{name:"From Now",id:"dateTimeFromNow",fn:V}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,F.rT)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,F.rT)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,F.rT)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,F.rT)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,F.rT)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:J("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,F.rT)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,F.rT)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,F.rT)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,F.rT)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,F.rT)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,F.rT)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,F.rT)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,F.rT)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,F.rT)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,F.rT)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,F.rT)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,F.rT)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,F.rT)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,F.rT)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,F.rT)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,F.rT)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,F.rT)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,F.rT)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,F.rT)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,F.rT)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,F.rT)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,F.rT)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,F.rT)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,F.rT)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,F.rT)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,F.rT)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,F.rT)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,F.rT)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,F.rT)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,F.rT)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,F.rT)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,F.rT)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,F.rT)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,F.rT)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:J("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:J("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:J("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:J("cfm")},{name:"Litre/hour",id:"litreh",fn:J("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:J("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:J("mL/min")},{name:"Lux (lx)",id:"lux",fn:J("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,F.rT)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,F.rT)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,F.rT)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,F.rT)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,F.rT)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,F.rT)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,F.rT)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,F.rT)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,F.rT)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,F.rT)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,F.rT)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,F.rT)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,F.rT)("g")},{name:"pound (lb)",id:"masslb",fn:J("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,F.rT)("g",1)},{name:"metric ton (t)",id:"masst",fn:J("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,F.rT)("m",-1)},{name:"inch (in)",id:"lengthin",fn:J("in")},{name:"feet (ft)",id:"lengthft",fn:J("ft")},{name:"meter (m)",id:"lengthm",fn:(0,F.rT)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,F.rT)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:J("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,F.rT)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,F.rT)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,F.rT)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,F.rT)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:J("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:J("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:J('"Hg')},{name:"PSI",id:"pressurepsi",fn:oe(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,F.rT)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,F.rT)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,F.rT)("Gy")},{name:"rad",id:"radrad",fn:(0,F.rT)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,F.rT)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,F.rT)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,F.rT)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,F.rT)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,F.rT)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,F.rT)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,F.rT)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,F.rT)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,F.rT)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:J("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,F.rT)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,F.rT)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,F.rT)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,F.rT)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:J("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:J("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:J("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:J("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:J("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,F.rT)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:E},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:b},{name:"seconds (s)",id:"s",fn:a},{name:"minutes (m)",id:"m",fn:h},{name:"hours (h)",id:"h",fn:P},{name:"days (d)",id:"d",fn:y},{name:"duration (ms)",id:"dtdurationms",fn:D},{name:"duration (s)",id:"dtdurations",fn:T},{name:"duration (hh:mm:ss)",id:"dthms",fn:M},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:S},{name:"clock (ms)",id:"clockms",fn:v},{name:"clock (s)",id:"clocks",fn:x}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ue("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ue("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ue("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ue("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ue("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ue("io/s")},{name:"events/sec (eps)",id:"eps",fn:ue("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:ue("msg/s")},{name:"records/sec (rps)",id:"recps",fn:ue("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:ue("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:ue("c/m")},{name:"ops/min (opm)",id:"opm",fn:ue("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ue("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ue("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ue("wr/m")},{name:"events/min (epm)",id:"epm",fn:ue("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:ue("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:ue("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:ue("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:J("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:J("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:J("mph")},{name:"knot (kn)",id:"velocityknot",fn:J("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,F.rT)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,F.rT)("L")},{name:"cubic meter",id:"m3",fn:J("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:J("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:J("dm\xB3")},{name:"gallons",id:"gallons",fn:J("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ne("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ne("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ne("On","Off")}]}];function Y(Ee){return`${Ee.prefix??""}${Ee.text}${Ee.suffix??""}`}let H=[];const k={};let ee=!1;function ie(Ee,Me){if(Ee===null)return"";if(Ee===Number.NEGATIVE_INFINITY||Ee===Number.POSITIVE_INFINITY)return Ee.toLocaleString();if(Me==null&&(Me=fe(Ee)),Ee===0)return Ee.toFixed(Me);const ze=Me?Math.pow(10,Math.max(0,Me)):1,xe=String(Math.round(Ee*ze)/ze);if(xe.indexOf("e")!==-1||Ee===0)return xe;const We=xe.indexOf("."),be=We===-1?0:xe.length-We-1;return be<Me?(be?xe:xe+".")+String(ze).slice(1,Me-be+1):xe}function fe(Ee){const Me=Math.abs(Ee);let xe=-Math.floor(Math.log(Me)/Math.LN10)+1;const We=Math.pow(10,-xe);return Me/We>2.25&&++xe,Ee%1===0&&(xe=0),Math.max(0,xe)}function q(Ee,Me,ze){return{text:ie(Ee,Me),suffix:Z(ze,Math.abs(Ee)>1)}}function Z(Ee,Me){if(!Me)return Ee;switch(Ee){case" min":case" hour":case" day":case" week":case" year":return`${Ee}s`;default:return Ee}}function J(Ee,Me){return(ze,xe)=>{if(ze===null)return{text:""};const We=ie(ze,xe);return Ee?Me?{text:We,prefix:Ee}:{text:We,suffix:" "+Ee}:{text:We}}}function G(Ee){return Ee&&Ee.startsWith("bool")}function ne(Ee,Me){return ze=>({text:ze?Ee:Me})}const te=(Ee,Me)=>Math.log10(Me)/Math.log10(Ee);function oe(Ee,Me,ze=0){return(xe,We)=>{if(xe==null)return{text:""};if(xe===Number.NEGATIVE_INFINITY||xe===Number.POSITIVE_INFINITY||isNaN(xe))return{text:xe.toLocaleString()};const be=xe===0?0:Math.floor(te(Ee,Math.abs(xe))),pe=Me[(0,t.clamp)(ze+be,0,Me.length-1)];return{text:ie(xe/Ee**(0,t.clamp)(be,-ze,Me.length-ze-1),We),suffix:pe}}}function le(Ee,Me){return Ee==null?{text:""}:{text:Ee.toLocaleString(void 0,{maximumFractionDigits:Me??void 0})}}function ue(Ee){const ze=oe(1e3,["","K","M","B","T"]);return(xe,We,be)=>{if(xe===null)return{text:""};const pe=ze(xe,We,be);return pe.suffix+=" "+Ee,pe}}function Te(Ee){return{text:`${Ee}`}}function he(){H=z();for(const Ee of H)for(const Me of Ee.formats)k[Me.id]=Me.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Ee=>{const Me=k[Ee.to];Me&&(k[Ee.from]=Me)}),ee=!0}function re(Ee){if(!Ee)return J("");ee||he();const Me=k[Ee];if(!Me&&Ee){let ze=Ee.indexOf(":");if(ze>0){const xe=Ee.substring(0,ze),We=Ee.substring(ze+1);if(xe==="prefix")return J(We,!0);if(xe==="suffix")return J(We,!1);if(xe==="time")return A(We);if(xe==="si"){const be=(0,F.cL)(We.charAt(0)),pe=be===0?We:We.substring(1);return(0,F.rT)(pe,be)}if(xe==="count")return ue(We);if(xe==="currency")return(0,F.Gl)(We);if(xe==="bool"){if(ze=We.indexOf("/"),ze>=0){const be=We.substring(0,ze),pe=We.substring(ze+1);return ne(be,pe)}return ne(We,"-")}}return J(Ee)}return Me}function De(){return ee||he(),k}function Fe(){return ee||he(),H.map(Ee=>({text:Ee.name,submenu:Ee.formats.map(Me=>({text:Me.name,value:Me.id}))}))}},79178:(Q,I,e)=>{"use strict";e.d(I,{L:()=>r});const t="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let n=!1;class r extends Array{get buffer(){return this}set buffer(o){this.length=0;const m=o?.length;if(m){let i=65e3,l=Math.ceil(m/i);for(let d=0;d<l;d++)this.push.apply(this,o.slice(d*i,(d+1)*i))}}constructor(o){super(),this.buffer=o??[],n||(console.warn(t),n=!0)}toJSON(){return[...this]}}},36120:(Q,I,e)=>{"use strict";e.d(I,{$:()=>n});var t=e(18008);class n extends t.F{constructor(s){return super(),this.buffer=s.buffer||[],this.capacity=this.buffer.length,this.tail=s.append!=="head",this.index=0,this.add=this.getAddFunction(),s.capacity&&this.setCapacity(s.capacity),new Proxy(this,{get(o,m,i){if(typeof m!="symbol"){const l=+m;if(String(l)===m)return o.get(l)}return Reflect.get(o,m,i)},set(o,m,i,l){if(typeof m!="symbol"){const d=+m;if(String(d)===m)return o.set(d,i),!0}return Reflect.set(o,m,i,l)}})}getAddFunction(){return this.capacity>this.buffer.length?this.tail?s=>{this.buffer.push(s),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:s=>{this.buffer.unshift(s),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?s=>{this.buffer[this.index]=s,this.index=(this.index+1)%this.buffer.length}:s=>{let o=this.index-1;o<0&&(o=this.buffer.length-1),this.buffer[o]=s,this.index=o}}setCapacity(s){if(this.capacity===s)return;const o=this.toArray();if(s>this.length)this.buffer=o;else if(s<this.capacity){const m=this.length-s;this.tail?this.buffer=o.slice(m,o.length):this.buffer=o.slice(0,o.length-m)}this.capacity=s,this.index=0,this.add=this.getAddFunction()}setAppendMode(s){const o=s!=="head";o!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=o,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(s){return this.buffer[(s+this.index)%this.buffer.length]}set(s,o){this.buffer[(s+this.index)%this.buffer.length]=o}get length(){return this.buffer.length}}},18008:(Q,I,e)=>{"use strict";e.d(I,{E:()=>s,F:()=>n});var t;class n{constructor(){this[t]={}}static{t=Symbol.unscopables}*iterator(){for(let m=0;m<this.length;m++)yield this.get(m)}set(m,i){throw"unsupported operation"}add(m){throw"unsupported operation"}push(...m){for(const i of m)this.add(i);return this.length}[Symbol.iterator](){return this.iterator()}forEach(m){return s(this).forEach(m)}map(m){return s(this).map(m)}filter(m){return s(this).filter(m)}at(m){return this.get(m)}toArray(){const m=new Array(this.length);for(let i=0;i<this.length;i++)m[i]=this.get(i);return m}join(m){return this.toArray().join(m)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...m){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(m){throw new Error("Method not implemented.")}splice(m,i,...l){throw new Error("Method not implemented.")}unshift(...m){throw new Error("Method not implemented.")}fill(m,i,l){throw new Error("Method not implemented.")}copyWithin(m,i,l){throw new Error("Method not implemented.")}slice(m,i){return this.toArray().slice(m,i)}indexOf(m,i){return this.toArray().indexOf(m,i)}lastIndexOf(m,i){return this.toArray().lastIndexOf(m,i)}every(m,i){return this.toArray().every(m,i)}some(m,i){return this.toArray().some(m,i)}reduce(m,i){throw new Error("Method not implemented.")}reduceRight(m,i){throw new Error("Method not implemented.")}find(m,i){return this.toArray().find(m,i)}findIndex(m,i){return this.toArray().findIndex(m,i)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(m,i){return this.toArray().includes(m,i)}flatMap(m,i){return this.toArray().flatMap(m,i)}flat(m){throw new Error("Method not implemented.")}}const r=[];function s(o){return{*[Symbol.iterator](){for(let m=0;m<o.length;m++)yield o.get(m)},forEach(m){for(let i=0;i<o.length;i++)m(o.get(i),i,r)},map(m){const i=[];for(let l=0;l<o.length;l++)i.push(m(o.get(l),l,r));return i},filter(m){const i=[];let l=0;for(const d of this)m(d,l++,r)&&i.push(d);return i}}}},13390:(Q,I,e)=>{"use strict";e.d(I,{X:()=>t});const t={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",copyTimeRange:"data-testid TimePicker copy button",pasteTimeRange:"data-testid TimePicker paste button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"data-testid Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",manageAlerts:"prometheus-alerts-manager",scrapeInterval:"data-testid scrape interval",queryTimeout:"data-testid query timeout",defaultEditor:"data-testid default editor",disableMetricLookup:"disable-metric-lookup",prometheusType:"data-testid prometheus type",prometheusVersion:"data-testid prometheus version",cacheLevel:"data-testid cache level",incrementalQuerying:"prometheus-incremental-querying",queryOverlapWindow:"data-testid query overlap window",disableRecordingRules:"disable-recording-rules",customQueryParameters:"data-testid custom query parameters",httpMethod:"data-testid http method",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch"},queryEditor:{explain:"data-testid prometheus explain switch wrapper",editorToggle:"data-testid QueryEditorModeToggle",options:"data-testid prometheus options",legend:"data-testid prometheus legend wrapper",format:"data-testid prometheus format",step:"prometheus-step",type:"data-testid prometheus type",exemplars:"prometheus-exemplars",builder:{metricSelect:"data-testid metric select",hints:"data-testid prometheus hints",metricsExplorer:"data-testid metrics explorer",queryAdvisor:"data-testid query advisor"},code:{queryField:"data-testid prometheus query field",metricsBrowser:{openButton:"data-testid open metrics browser",selectMetric:"data-testid select a metric",metricList:"data-testid metric list",labelNamesFilter:"data-testid label names filter",labelValuesFilter:"data-testid label values filter",useQuery:"data-testid use query",useAsRateQuery:"data-testid use as rate query",validateSelector:"data-testid validate selector",clear:"data-testid clear"}}},exemplarMarker:"data-testid Exemplar marker",variableQueryEditor:{queryType:"data-testid query type",labelnames:{metricRegex:"data-testid label names metric regex"},labelValues:{labelSelect:"data-testid label values label select"},metricNames:{metricRegex:"data-testid metric names metric regex"},varQueryResult:"data-testid variable query result",seriesQuery:"data-testid prometheus series query",classicQuery:"data-testid prometheus classic query"},annotations:{minStep:"prometheus-annotation-min-step",title:"data-testid prometheus annotation title",tags:"data-testid prometheus annotation tags",text:"data-testid prometheus annotation text",seriesValueAsTimestamp:"data-testid prometheus annotation series value as timestamp"}}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`data-testid Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,status:n=>`data-testid Panel status ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"},PanelDataErrorMessage:"data-testid Panel data error message"},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:n=>`data-testid VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper",subtitle:"data-testid drawer subtitle"},DashboardSaveDrawer:{saveButton:"data-testid Save dashboard drawer button",saveAsButton:"data-testid Save as dashboard drawer button",saveAsTitleInput:"Save dashboard title field"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`,fieldInput:n=>`data-testid Panel editor option pane field input ${n}`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query",queryGroupTopSection:"data-testid query group top section",addExpression:"data-testid query-tab-add-expression"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`data-testid ${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"data-testid Alert editor tab content"},AlertRules:{groupToggle:"data-testid group-collapse-toggle",toggle:"data-testid collapse-toggle",expandedContent:"data-testid expanded-content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:n=>`data-testid New transform ${n}`,transformationEditor:n=>`data-testid Transformation editor ${n}`,transformationEditorDebugger:n=>`data-testid Transformation editor debugger ${n}`},Transforms:{card:n=>`data-testid New transform ${n}`,disableTransformationButton:"data-testid Disable transformation button",Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button",removeAllTransformationsButton:"data-testid remove all transformations button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar",shareDashboard:"data-testid Share dashboard",markAsFavorite:"data-testid Mark as favorite",editDashboard:{editButton:"data-testid Edit dashboard button",saveButton:"data-testid Save dashboard button",exitButton:"data-testid Exit edit mode button",settingsButton:"data-testid Dashboard settings",addRowButton:"data-testid Add row button",addLibraryPanelButton:"data-testid Add a panel from the panel library button",addVisualizationButton:"data-testid Add new visualization menu item",pastePanelButton:"data-testid Paste panel button",discardChangesButton:"data-testid Discard changes button",discardLibraryPanelButton:"data-testid Discard library panel button",unlinkLibraryPanelButton:"data-testid Unlink library panel button",saveLibraryPanelButton:"data-testid Save library panel button",backToDashboardButton:"data-testid Back to dashboard button"}},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"data-testid folder-picker-input"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source",dataSourceList:"data-testid Data source list dropdown",advancedModal:{dataSourceList:"data-testid Data source list",builtInDataSourceList:"data-testid Built in data source list"}},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container",changeTimeSettingsButton:"data-testid Time zone picker Change time settings button"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:n=>`data-testid Value picker button ${n}`,select:n=>`data-testid Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"data-testid Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:n=>`data-testid-extension-point-tab-${n}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input",editor:{testButton:"data-testid annotations-test-button",resultContainer:"data-testid annotations-query-result-container"}},Tooltip:{container:"data-testid tooltip"},ReturnToPrevious:{buttonGroup:"data-testid dismissable button group",backButton:"data-testid back",dismissButton:"data-testid dismiss"},SQLQueryEditor:{selectColumn:"data-testid select-column",selectAggregation:"data-testid select-aggregation",selectAlias:"data-testid select-alias",filterConjunction:"data-testid filter-conjunction",filterField:"data-testid filter-field",filterOperator:"data-testid filter-operator",headerTableSelector:"data-testid header-table-selector",headerFilterSwitch:"data-testid header-filter-switch",headerGroupSwitch:"data-testid header-group-switch",headerOrderSwitch:"data-testid header-order-switch",headerPreviewSwitch:"data-testid header-preview-switch"}}},13544:(Q,I,e)=>{"use strict";e.d(I,{Tp:()=>r});var t=e(13390);const r={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag",shareButton:"data-testid share-button",scrollContainer:"data-testid Dashboard canvas scroll container",playlistControls:{prev:"data-testid playlist previous dashboard button",stop:"data-testid playlist stop dashboard button",next:"data-testid playlist next dashboard button"}},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.X.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.X.CallToActionCard.buttonV2("Add annotation query"),annotations:"data-testid list-annotations"},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview",delete:"data-testid annotations-delete",apply:"data-testid annotations-apply",enable:"data-testid annotation-enable",hide:"data-testid annotation-hide"}},Variables:{List:{addVariableCTA:t.X.CallToActionCard.button("Add variable"),addVariableCTAV2:t.X.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"data-testid Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"data-testid Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"data-testid Variable editor Preview of Values option",submitButton:"data-testid Variable editor Run Query button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.X.DataSourcePicker.inputV2,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"data-testid Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input",autoEnabledCheckbox:"data-testid interval variable auto value checkbox",stepCountIntervalSelect:"data-testid interval variable step count input",minIntervalInput:"data-testid interval variable mininum interval input"},GroupByVariable:{dataSourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid group by variable info text",modeToggle:"data-testid group by variable mode toggle"},AdHocFiltersVariable:{datasourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid ad-hoc filters variable info text",modeToggle:"data-testid ad-hoc filters variable mode toggle"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox",saveRefresh:"Dashboard settings Save Dashboard Modal Save refresh checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}},PublicDashboardScene:{Tab:"Tab Public Dashboard"}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"},footer:"public-dashboard-footer"},PublicDashboardScene:{loadingPage:"public-dashboard-scene-loading-page",page:"public-dashboard-scene-page",controls:"public-dashboard-controls"},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:s=>`data-testid browse dashboards row ${s}`,checkbox:s=>`data-testid ${s} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UserAnonListPage:{container:"data-testid user-anon-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}},ProfilePage:{url:"/profile"}},components:t.X}},76365:(Q,I,e)=>{"use strict";e.d(I,{Jz:()=>E,oA:()=>u,Ik:()=>g});var t=e(11261),n=e(75972),r=e(57875),s=e(5546),o=e(2543);function m(b,a){const h=i(b);return l(h,a,"parents")}function i(b){return b.map(a=>{if(!a.parents?.length)return a;const h={...a,children:[]},P=[{child:h,parent:a.parents[0]}];for(;P.length;){const y=P.shift(),C={...y.parent,children:y.child?[y.child]:[],parents:[]};y.child&&(C.value=y.child.value,y.child.parents=[C]),y.parent.parents?.length&&P.push({child:C,parent:y.parent.parents[0]})}return h})}function l(b,a,h="children"){const P=h==="parents"?"children":"parents",y=[],C=[{previous:void 0,items:b,level:0}];for(;C.length;){const f=C.shift(),D=f.items.flatMap(S=>S.itemIndexes),T={value:f.items.reduce((S,v)=>S+v.value,0),itemIndexes:D,children:[],parents:[],start:0,level:f.level};if(y[f.level]=y[f.level]||[],y[f.level].push(T),f.previous){T[P]=[f.previous];const S=f.previous[h]?.reduce((v,x)=>v+x.value,0)||0;T.start=f.previous.start+S,f.previous[h].push(T)}const M=f.items.flatMap(S=>S[h]||[]),O=(0,o.groupBy)(M,S=>a.getLabel(S.itemIndexes[0]));for(const S of Object.values(O))C.push({previous:T,items:S,level:f.level+1})}return h==="parents"&&(y.reverse(),y.forEach((f,D)=>{f.forEach(T=>{T.level=D})})),y}function d(b,a){const h=[];let P=0,y;const C={};for(let D=0;D<b.data.length;D++){const T=b.getLevel(D),M=D>0?b.getLevel(D-1):void 0;if(h[T]=h[T]||[],M&&M>=T){const S=h[T][h[T].length-1];P=S.start+b.getValue(S.itemIndexes[0])+b.getValueRight(S.itemIndexes[0]),y=S.parents[0]}const O={itemIndexes:[D],value:b.getValue(D)+b.getValueRight(D),valueRight:b.isDiffFlamegraph()?b.getValueRight(D):void 0,start:P,parents:y&&[y],children:[],level:T};C[b.getLabel(D)]?C[b.getLabel(D)].push(O):C[b.getLabel(D)]=[O],y&&y.children.push(O),y=O,h[T].push(O)}const f=new c(a?.collapsingThreshold);return a?.collapsing&&f.addTree(h[0][0]),[h,C,f.getMap()]}class c{constructor(a){this.map=new Map,this.threshold=.99,a!==void 0&&(this.threshold=a)}addTree(a){const h=[a];for(;h.length;){const P=h.shift();P.parents?.length&&this.addItem(P,P.parents[0]),P.children.length&&h.unshift(...P.children)}}addItem(a,h){if(h&&a.value>h.value*this.threshold&&h.children.length===1)if(this.map.has(h)){const P=this.map.get(h);this.map.set(a,P),P.items.push(a)}else{const P={items:[h,a],collapsed:!0};this.map.set(h,P),this.map.set(a,P)}}getMap(){return new Map(this.map)}}function g(b){return b.missingFields.length?`Data is missing fields: ${b.missingFields.join(", ")}`:b.wrongTypeFields.length?`Data has fields of wrong type: ${b.wrongTypeFields.map(a=>`${a.name} has type ${a.type} but should be ${a.expectedTypes.join(" or ")}`).join(", ")}`:""}function u(b){const a=[["label",[t.PU.string,t.PU.enum]],["level",[t.PU.number]],["value",[t.PU.number]],["self",[t.PU.number]]],h=[],P=[];for(const y of a){const[C,f]=y,D=b.fields.find(T=>T.name===C);if(!D){h.push(C);continue}f.includes(D.type)||P.push({name:C,expectedTypes:f,type:D.type})}if(h.length>0||P.length>0)return{wrongTypeFields:P,missingFields:h}}class E{constructor(a,h,P=(0,n.a)()){this.data=a,this.options=h;const y=u(a);if(y)throw new Error(g(y));if(this.labelField=a.fields.find(f=>f.name==="label"),this.levelField=a.fields.find(f=>f.name==="level"),this.valueField=a.fields.find(f=>f.name==="value"),this.selfField=a.fields.find(f=>f.name==="self"),this.valueRightField=a.fields.find(f=>f.name==="valueRight"),this.selfRightField=a.fields.find(f=>f.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const C=this.labelField?.config?.type?.enum;C?(this.labelDisplayProcessor=(0,r.J)({field:this.labelField,theme:P}),this.uniqueLabels=C.text||[]):(this.labelDisplayProcessor=f=>({text:f+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,r.J)({field:this.valueField,theme:P})}isDiffFlamegraph(){return!!(this.valueRightField&&this.selfRightField)}getLabel(a){return this.labelDisplayProcessor(this.labelField.values[a]).text}getLevel(a){return this.levelField.values[a]}getValue(a){return p(this.valueField,a)}getValueRight(a){return p(this.valueRightField,a)}getSelf(a){return p(this.selfField,a)}getSelfRight(a){return p(this.selfRightField,a)}getSelfDisplay(a){return this.valueDisplayProcessor(this.getSelf(a))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case s.Zk.Bytes:return"RAM";case s.Zk.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(a){const h=this.getNodesWithLabel(a);if(!h?.length)return[[],[]];const P=m(h,this),y=l(h,this);return[P,y]}getNodesWithLabel(a){return this.initLevels(),this.uniqueLabelsMap[a]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[a,h,P]=d(this,this.options);this.levels=a,this.uniqueLabelsMap=h,this.collapsedMap=P}}}function p(b,a){return b?(typeof a=="number"?[a]:a).reduce((P,y)=>P+b.values[y],0):0}},85194:(Q,I,e)=>{"use strict";e.d(I,{A:()=>na});var t=e(32196),n=e(53076),r=e(96540),s=e(49185),o=e(60578),m=e(14578);const i=22*window.devicePixelRatio,l=10*window.devicePixelRatio,d=.5*window.devicePixelRatio,c=20*window.devicePixelRatio,g=.5*window.devicePixelRatio,u=4*window.devicePixelRatio,E=3*window.devicePixelRatio,p=3*window.devicePixelRatio,b=4*window.devicePixelRatio,a=2*window.devicePixelRatio,h=800,P=120;var y=e(64539),C=e(59093),f=e(28122);const T=({data:Ut,itemData:on,onMenuItemClick:mn,onItemFocus:vn,onSandwich:pn,collapseConfig:Un,onExpandGroup:Bn,onCollapseGroup:kn,onExpandAllGroups:Mn,onCollapseAllGroups:xn,getExtraContextMenuButtons:Vn,collapsing:aa,allGroupsExpanded:Jn,allGroupsCollapsed:_n,selectedView:Hn,search:ba})=>{function va(){const Ca=Vn?.(on,Ut.data,{selectedView:Hn,isDiff:Ut.isDiffFlamegraph(),search:ba,collapseConfig:Un})||[];return r.createElement(r.Fragment,null,r.createElement(y.D,{label:"Focus block",icon:"eye",onClick:()=>{vn(),mn()}}),r.createElement(y.D,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(on.label).then(()=>{mn()})}}),r.createElement(y.D,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{pn(),mn()}}),Ca.map(({label:dn,icon:pt,onClick:Dt})=>r.createElement(y.D,{label:dn,icon:pt,onClick:()=>Dt(),key:dn})),aa&&r.createElement(C.r,{label:"Grouping"},Un?Un.collapsed?r.createElement(y.D,{label:"Expand group",icon:"angle-double-down",onClick:()=>{Bn(),mn()}}):r.createElement(y.D,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{kn(),mn()}}):null,!Jn&&r.createElement(y.D,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{Mn(),mn()}}),!_n&&r.createElement(y.D,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{xn(),mn()}})))}return r.createElement("div",{"data-testid":"contextMenu"},r.createElement(f.t,{renderMenuItems:va,x:on.posX+10,y:on.posY,focusOnOpen:!1}))};var M=e(83195),O=e(40845),S=e(48840),v=e(17464),x=e(69503);const A=({data:Ut,item:on,totalTicks:mn,position:vn,collapseConfig:pn})=>{const Un=(0,O.of)(w);if(!(on&&vn))return null;let Bn;if(Ut.isDiffFlamegraph()){const kn=B(Ut,on,mn);Bn=r.createElement(S.j,{className:Un.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:kn,getRowId:Mn=>Mn.rowId})}else{const kn=R(Ut,on,mn);Bn=r.createElement("p",{className:Un.lastParagraph},kn.unitTitle,r.createElement("br",null),"Total: ",r.createElement("b",null,kn.unitValue)," (",kn.percentValue,"%)",r.createElement("br",null),"Self: ",r.createElement("b",null,kn.unitSelf)," (",kn.percentSelf,"%)",r.createElement("br",null),"Samples: ",r.createElement("b",null,kn.samples))}return r.createElement(v.ZL,null,r.createElement(x.o,{className:Un.tooltipContainer,position:vn,offset:{x:15,y:0}},r.createElement("div",{className:Un.tooltipContent},r.createElement("p",{className:Un.tooltipName},Ut.getLabel(on.itemIndexes[0]),pn&&pn.collapsed?r.createElement("span",null,r.createElement("br",null),"and ",pn.items.length," similar items"):""),Bn)))},R=(Ut,on,mn)=>{const vn=Ut.valueDisplayProcessor(on.value),pn=Ut.getSelfDisplay(on.itemIndexes),Un=Math.round(1e4*(vn.numeric/mn))/100,Bn=Math.round(1e4*(pn.numeric/mn))/100;let kn=vn.text+vn.suffix,Mn=pn.text+pn.suffix;const xn=Ut.getUnitTitle();return xn==="Count"&&(vn.suffix||(kn=vn.text),pn.suffix||(Mn=pn.text)),{percentValue:Un,percentSelf:Bn,unitTitle:xn,unitValue:kn,unitSelf:Mn,samples:vn.numeric.toLocaleString()}},B=(Ut,on,mn)=>{const pn=Ut.getLevels()[0][0].valueRight,Un=mn-pn,Bn=on.value-on.valueRight,kn=Math.round(1e4*Bn/Un)/100,Mn=Math.round(1e4*on.valueRight/pn)/100,xn=(Mn-kn)/kn*100,Vn=U(Ut,Ut.valueDisplayProcessor(Bn)),aa=U(Ut,Ut.valueDisplayProcessor(on.valueRight)),Jn=(0,M.j_)("short");return[{rowId:"1",label:"% of total",baseline:kn+"%",comparison:Mn+"%",diff:Jn(xn).text+"%"},{rowId:"2",label:"Value",baseline:Vn,comparison:aa,diff:U(Ut,Ut.valueDisplayProcessor(on.valueRight-Bn))},{rowId:"3",label:"Samples",baseline:Jn(Bn).text,comparison:Jn(on.valueRight).text,diff:Jn(on.valueRight-Bn).text}]};function U(Ut,on){let mn=on.text+on.suffix;return Ut.getUnitTitle()==="Count"&&(on.suffix||(mn=on.text)),mn}const w=Ut=>({tooltipContainer:(0,t.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,t.css)`
    title: tooltipContent;
    font-size: ${Ut.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,t.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,t.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,t.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,t.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),K=A;var N=e(84140),L=e(5546),V=e(21313);function F(Ut,on=0){let mn,vn,pn,Un,Bn,kn,Mn,xn;for(mn=Ut.length&3,vn=Ut.length-mn,pn=on,Bn=3432918353,kn=461845907,xn=0;xn<vn;)Mn=Ut.charCodeAt(xn)&255|(Ut.charCodeAt(++xn)&255)<<8|(Ut.charCodeAt(++xn)&255)<<16|(Ut.charCodeAt(++xn)&255)<<24,++xn,Mn=(Mn&65535)*Bn+(((Mn>>>16)*Bn&65535)<<16)&4294967295,Mn=Mn<<15|Mn>>>17,Mn=(Mn&65535)*kn+(((Mn>>>16)*kn&65535)<<16)&4294967295,pn^=Mn,pn=pn<<13|pn>>>19,Un=(pn&65535)*5+(((pn>>>16)*5&65535)<<16)&4294967295,pn=(Un&65535)+27492+(((Un>>>16)+58964&65535)<<16);switch(Mn=0,mn){case 3:Mn^=(Ut.charCodeAt(xn+2)&255)<<16;case 2:Mn^=(Ut.charCodeAt(xn+1)&255)<<8;case 1:Mn^=Ut.charCodeAt(xn)&255;default:Mn=(Mn&65535)*Bn+(((Mn>>>16)*Bn&65535)<<16)&4294967295,Mn=Mn<<15|Mn>>>17,Mn=(Mn&65535)*kn+(((Mn>>>16)*kn&65535)<<16)&4294967295,pn^=Mn}return pn^=Ut.length,pn^=pn>>>16,pn=(pn&65535)*2246822507+(((pn>>>16)*2246822507&65535)<<16)&4294967295,pn^=pn>>>13,pn=(pn&65535)*3266489909+(((pn>>>16)*3266489909&65535)<<16)&4294967295,pn^=pn>>>16,pn>>>0}const z=[(0,N.A)({h:24,s:69,l:60}),(0,N.A)({h:34,s:65,l:65}),(0,N.A)({h:194,s:52,l:61}),(0,N.A)({h:163,s:45,l:55}),(0,N.A)({h:211,s:48,l:60}),(0,N.A)({h:246,s:40,l:65}),(0,N.A)({h:305,s:63,l:79}),(0,N.A)({h:47,s:100,l:73}),(0,N.A)({r:183,g:219,b:171}),(0,N.A)({r:244,g:213,b:152}),(0,N.A)({r:78,g:146,b:249}),(0,N.A)({r:249,g:186,b:143}),(0,N.A)({r:242,g:145,b:145}),(0,N.A)({r:130,g:181,b:216}),(0,N.A)({r:229,g:168,b:226}),(0,N.A)({r:174,g:162,b:224}),(0,N.A)({r:154,g:196,b:138}),(0,N.A)({r:242,g:201,b:109}),(0,N.A)({r:101,g:197,b:219}),(0,N.A)({r:249,g:147,b:78}),(0,N.A)({r:234,g:100,b:96}),(0,N.A)({r:81,g:149,b:206}),(0,N.A)({r:214,g:131,b:206}),(0,N.A)({r:128,g:110,b:183})],Y=ie(1,100,0,1),H=ie(100,100,0,1),k=`linear-gradient(90deg, ${Y} 0%, ${H} 100%)`,ee=`linear-gradient(90deg, ${z[0]} 0%, ${z[2]} 30%, ${z[6]} 50%, ${z[7]} 70%, ${z[8]} 100%)`;function ie(Ut,on,mn,vn){const pn=Math.min(1,Ut/on/(vn-mn)),Un=50-50*pn,Bn=65+7*pn;return(0,N.A)({h:Un,s:100,l:Bn})}function fe(Ut,on){const mn=oe(Ut),pn=F(mn||"",0)%z.length;let Un=z[pn].clone();return on.isLight&&(Un=Un.brighten(15)),Un}const q=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],Z=`linear-gradient(90deg, ${q[0]} 0%, ${q[1]} 50%, ${q[2]} 100%)`,J=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],G=`linear-gradient(90deg, ${J[0]} 0%, ${J[1]} 50%, ${J[2]} 100%)`;function ne(Ut,on,mn,vn,pn){const Un=pn===L.yU.Default?q:J,Bn=(0,V.scaleLinear)().domain([-100,0,100]).range(Un),kn=Ut-on,Mn=mn-vn;if(vn===0||Mn===0){const _n=Bn(0);return(0,N.A)(_n)}const xn=Math.round(1e4*kn/Mn)/100,aa=(Math.round(1e4*on/vn)/100-xn)/xn*100,Jn=Bn(aa);return(0,N.A)(Jn)}const te=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function oe(Ut){for(const[on,mn]of te){const vn=Ut.match(mn);if(vn)return vn.groups?.packageName||""}}function le(Ut){const{canvasRef:on,data:mn,root:vn,depth:pn,direction:Un,wrapperWidth:Bn,rangeMin:kn,rangeMax:Mn,matchedLabels:xn,textAlign:Vn,totalViewTicks:aa,totalColorTicks:Jn,totalTicksRight:_n,colorScheme:Hn,focusedItemData:ba,collapsedMap:va}=Ut,Ca=De(on,Bn,pn),dn=(0,O.$j)(),pt=(0,r.useMemo)(()=>{const gn=(0,N.A)(dn.colors.background.secondary);return dn.isLight?gn.darken(10).toHexString():gn.lighten(10).toHexString()},[dn]),Dt=re(Jn,_n,Hn,dn,pt,kn,Mn,xn,ba?ba.item.level:0),nn=ue(Ca,mn,Dt,Vn,va);(0,r.useEffect)(()=>{if(!Ca)return;Ca.clearRect(0,0,Ca.canvas.width,Ca.canvas.height);const gn=new Path2D;he(vn,Un,mn,aa,kn,Mn,Bn,va,(Cn,In,fa,ga,sa,da,Ma)=>{Ma?gn.rect(In,fa,ga,sa):nn(Cn,In,fa,ga,sa,da)}),Ca.fillStyle=pt,Ca.fill(gn)},[Ca,mn,vn,Bn,kn,Mn,aa,Un,nn,va,pt])}function ue(Ut,on,mn,vn,pn){return(0,r.useMemo)(()=>Ut?(Bn,kn,Mn,xn,Vn,aa)=>{Ut.beginPath(),Ut.rect(kn+g,Mn,xn,Vn),Ut.fillStyle=mn(Bn,aa,!1),Ut.stroke(),Ut.fill();const Jn=pn.get(Bn);let _n=aa;Jn&&Jn.collapsed&&(_n=`(${Jn.items.length}) `+aa),xn>=c&&(Jn?(Fe(Ut,on,_n,Bn,xn,vn==="left"?kn+b+a:kn,Mn,vn),Te(Ut,kn,Mn,Vn,Bn,Jn)):Fe(Ut,on,_n,Bn,xn,kn,Mn,vn))}:()=>{},[Ut,mn,vn,on,pn])}function Te(Ut,on,mn,vn,pn,Un){const Bn=on+b;Ut.beginPath(),Ut.rect(on,mn,Bn-on+E+p,vn),Ut.fill(),Ut.beginPath(),Un.collapsed?Ut.rect(Bn,mn+vn/4,E,vn/2):Un.items[0]===pn?Ut.rect(Bn,mn+vn/2,E,vn/2):Un.items[Un.items.length-1]===pn?Ut.rect(Bn,mn,E,vn/2):Ut.rect(Bn,mn,E,vn),Ut.fillStyle="#666",Ut.fill()}function he(Ut,on,mn,vn,pn,Un,Bn,kn,Mn){const xn=[];xn.push({item:Ut,levelOffset:0});const Vn=Bn*window.devicePixelRatio/vn/(Un-pn);let aa;for(;xn.length>0;){const{item:Jn,levelOffset:_n}=xn.shift();let Hn=Jn.value;const ba=Hn*Vn<=l,va=Hn*Vn-(ba?0:g*2),Ca=i;if(va<d)continue;let dn=0,pt=!1;const Dt=kn.get(Jn),nn=Dt&&Dt.collapsed;if(nn&&aa===Dt.items[0]?(dn=on==="children"?-1:1,pt=!0):aa=void 0,!pt){const Cn=Ee(Jn.start,vn,pn,Vn),In=(Jn.level+_n)*i;let fa=mn.getLabel(Jn.itemIndexes[0]);nn&&(aa=Jn),Mn(Jn,Cn,In,va,Ca,fa,ba)}const gn=on==="children"?Jn.children:Jn.parents;gn&&xn.unshift(...gn.map(Cn=>({item:Cn,levelOffset:_n+dn})))}}function re(Ut,on,mn,vn,pn,Un,Bn,kn,Mn){return(0,r.useCallback)(function(Vn,aa,Jn){if(Jn&&!kn)return pn;const _n=Vn.valueRight!==void 0&&(mn===L.yU.Default||mn===L.yU.DiffColorBlind)?ne(Vn.value,Vn.valueRight,Ut,on,mn):mn===L.zM.ValueBased?ie(Vn.value,Ut,Un,Bn):fe(aa,vn);return kn?kn.has(aa)?_n.toHslString():pn:Vn.level>Mn-1?_n.toHslString():_n.lighten(15).toHslString()},[Ut,on,mn,vn,Un,Bn,kn,Mn,pn])}function De(Ut,on,mn){const[vn,pn]=(0,r.useState)();return(0,r.useEffect)(()=>{if(!(mn&&Ut.current))return;const Un=Ut.current.getContext("2d"),Bn=i*mn;Ut.current.width=Math.round(on*window.devicePixelRatio),Ut.current.height=Math.round(Bn),Ut.current.style.width=`${on}px`,Ut.current.style.height=`${Bn/window.devicePixelRatio}px`,Un.textBaseline="middle",Un.font=12*window.devicePixelRatio+"px monospace",Un.strokeStyle="white",pn(Un)},[Ut,pn,on,mn]),vn}function Fe(Ut,on,mn,vn,pn,Un,Bn,kn){Ut.save(),Ut.clip(),Ut.fillStyle="#222";const Mn=on.valueDisplayProcessor(vn.value),xn=Mn.suffix?Mn.text+Mn.suffix:Mn.text,Vn=Ut.measureText(mn),aa=pn-u;let Jn=`${mn} (${xn})`,_n=Math.max(Un,0)+u;Vn.width>aa&&(Ut.textAlign=kn,kn==="right"&&(Jn=mn,_n=Un+pn-u)),Ut.fillText(Jn,_n,Bn+i/2+2),Ut.restore()}function Ee(Ut,on,mn,vn){return(Ut-on*mn)*vn}const Me=({data:Ut,rangeMin:on,rangeMax:mn,matchedLabels:vn,setRangeMin:pn,setRangeMax:Un,onItemFocused:Bn,focusedItemData:kn,textAlign:Mn,onSandwich:xn,colorScheme:Vn,totalProfileTicks:aa,totalProfileTicksRight:Jn,totalViewTicks:_n,root:Hn,direction:ba,depth:va,showFlameGraphOnly:Ca,collapsedMap:dn,setCollapsedMap:pt,collapsing:Dt,getExtraContextMenuButtons:nn,selectedView:gn,search:Cn})=>{const In=We(),[fa,{width:ga}]=(0,s.A)(),sa=(0,r.useRef)(null),[da,Ma]=(0,r.useState)(),[_a,Xa]=(0,r.useState)();le({canvasRef:sa,colorScheme:Vn,data:Ut,focusedItemData:kn,root:Hn,direction:ba,depth:va,rangeMax:mn,rangeMin:on,matchedLabels:vn,textAlign:Mn,totalViewTicks:_n,totalColorTicks:Ut.isDiffFlamegraph()?aa:_n,totalTicksRight:Jn,wrapperWidth:ga,collapsedMap:dn});const ps=(0,r.useCallback)(ss=>{Ma(void 0);const Rs=sa.current.clientWidth/_n/(mn-on),Cs=be({x:ss.nativeEvent.offsetX,y:ss.nativeEvent.offsetY},Hn,ba,va,Rs,_n,on,dn);Xa(Cs?{posY:ss.clientY,posX:ss.clientX,item:Cs,label:Ut.getLabel(Cs.itemIndexes[0])}:void 0)},[Ut,on,mn,_n,Hn,ba,va,dn]),[As,ys]=(0,r.useState)(),vs=(0,r.useCallback)(ss=>{if(_a===void 0){Ma(void 0),ys(void 0);const Rs=sa.current.clientWidth/_n/(mn-on),Cs=be({x:ss.nativeEvent.offsetX,y:ss.nativeEvent.offsetY},Hn,ba,va,Rs,_n,on,dn);Cs&&(ys({x:ss.clientX,y:ss.clientY}),Ma(Cs))}},[on,mn,_n,_a,ys,Hn,ba,va,dn]),ar=(0,r.useCallback)(()=>{Ma(void 0)},[]);return(0,r.useEffect)(()=>{const ss=Rs=>{Rs.target instanceof HTMLElement&&Rs.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&Xa(void 0)};return window.addEventListener("click",ss),()=>window.removeEventListener("click",ss)},[Xa]),r.createElement("div",{className:In.graph},r.createElement("div",{className:In.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:fa},r.createElement("canvas",{ref:sa,"data-testid":"flameGraph",onClick:ps,onMouseMove:vs,onMouseLeave:ar})),r.createElement(K,{position:As,item:da,data:Ut,totalTicks:_n,collapseConfig:da?dn.get(da):void 0}),!Ca&&_a&&r.createElement(T,{data:Ut,itemData:_a,collapsing:Dt,collapseConfig:dn.get(_a.item),onMenuItemClick:()=>{Xa(void 0)},onItemFocus:()=>{pn(_a.item.start/_n),Un((_a.item.start+_a.item.value)/_n),Bn(_a)},onSandwich:()=>{xn(Ut.getLabel(_a.item.itemIndexes[0]))},onExpandGroup:()=>{pt(ze(dn,_a.item,!1))},onCollapseGroup:()=>{pt(ze(dn,_a.item,!0))},onExpandAllGroups:()=>{pt(xe(dn,!1))},onCollapseAllGroups:()=>{pt(xe(dn,!0))},allGroupsCollapsed:Array.from(dn.values()).every(ss=>ss.collapsed),allGroupsExpanded:Array.from(dn.values()).every(ss=>!ss.collapsed),getExtraContextMenuButtons:nn,selectedView:gn,search:Cn}))};function ze(Ut,on,mn){const vn=new Map(Ut),pn=Ut.get(on),Un={...pn,collapsed:mn};for(const Bn of pn.items)vn.set(Bn,Un);return vn}function xe(Ut,on){const mn=new Map(Ut);for(const vn of Ut.keys()){const Un={...Ut.get(vn),collapsed:on};mn.set(vn,Un)}return mn}const We=()=>({graph:(0,t.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,t.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,t.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,t.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,t.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),be=(Ut,on,mn,vn,pn,Un,Bn,kn)=>{let Mn=on,xn=mn==="children"?0:vn-1;const Vn=Math.floor(Ut.y/(i/window.devicePixelRatio));let aa;for(;Mn;){const Jn=Mn;if(Mn=void 0,xn===Vn){aa=Jn;break}const _n=mn==="children"?Jn.children:Jn.parents||[];for(const Hn of _n){const ba=Ee(Hn.start,Un,Bn,pn),va=Ee(Hn.start+Hn.value,Un,Bn,pn);if(ba<=Ut.x&&Ut.x<va){Mn=Hn;const Ca=kn.get(Hn);(!Ca||!Ca.collapsed||Ca.items[0]===Hn)&&(xn=xn+(mn==="children"?1:-1));break}}}return aa},pe=Me;var Ue=e(29158);const we=r.memo(({data:Ut,focusedItem:on,totalTicks:mn,sandwichedLabel:vn,onFocusPillClick:pn,onSandwichPillClick:Un})=>{const Bn=(0,O.of)(je),kn=[],Mn=(0,M.j_)("short")(mn),xn=Ut.valueDisplayProcessor(mn);let Vn=xn.text+xn.suffix;const aa=Ut.getUnitTitle();if(aa==="Count"&&(xn.suffix||(Vn=xn.text)),kn.push(r.createElement("div",{className:Bn.metadataPill,key:"default"},Vn," | ",Mn.text,Mn.suffix," samples (",aa,")")),vn&&kn.push(r.createElement("span",{key:"sandwich"},r.createElement(m.I,{size:"sm",name:"angle-right"}),r.createElement("div",{className:Bn.metadataPill},r.createElement(m.I,{size:"sm",name:"gf-show-context"})," ",r.createElement("span",{className:Bn.metadataPillName},vn.substring(vn.lastIndexOf("/")+1)),r.createElement(Ue.K,{className:Bn.pillCloseButton,name:"times",size:"sm",onClick:Un,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),on){const Jn=Math.round(1e4*(on.item.value/mn))/100;kn.push(r.createElement("span",{key:"focus"},r.createElement(m.I,{size:"sm",name:"angle-right"}),r.createElement("div",{className:Bn.metadataPill},r.createElement(m.I,{size:"sm",name:"eye"})," ",Jn,"% of total",r.createElement(Ue.K,{className:Bn.pillCloseButton,name:"times",size:"sm",onClick:pn,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return r.createElement(r.Fragment,null,r.createElement("div",{className:Bn.metadata},kn))});we.displayName="FlameGraphMetadata";const je=Ut=>({metadataPill:(0,t.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${Ut.colors.background.secondary};
    border-radius: ${Ut.shape.borderRadius(8)};
    padding: ${Ut.spacing(.5,1)};
    font-size: ${Ut.typography.bodySmall.fontSize};
    font-weight: ${Ut.typography.fontWeightMedium};
    line-height: ${Ut.typography.bodySmall.lineHeight};
    color: ${Ut.colors.text.secondary};
  `,pillCloseButton:(0,t.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Ut.spacing(0,.5)};
  `,metadata:(0,t.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,t.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${Ut.spacing(.5)};
  `}),He=we,rt=({data:Ut,rangeMin:on,rangeMax:mn,matchedLabels:vn,setRangeMin:pn,setRangeMax:Un,onItemFocused:Bn,focusedItemData:kn,textAlign:Mn,onSandwich:xn,sandwichItem:Vn,onFocusPillClick:aa,onSandwichPillClick:Jn,colorScheme:_n,showFlameGraphOnly:Hn,getExtraContextMenuButtons:ba,collapsing:va,selectedView:Ca,search:dn})=>{const pt=Je(),[Dt,nn]=(0,r.useState)(new Map),[gn,Cn]=(0,r.useState)(),[In,fa]=(0,r.useState)(),[ga,sa]=(0,r.useState)(0),[da,Ma]=(0,r.useState)(),[_a,Xa]=(0,r.useState)(0);if((0,r.useEffect)(()=>{if(Ut){nn(Ut.getCollapsedMap());let ys=Ut.getLevels(),vs=ys.length?ys[0][0].value:0,ar=ys.length?ys[0][0].valueRight:void 0,ss=vs,Rs;if(Vn){const[Cs,ws]=Ut.getSandwichLevels(Vn);ys=ws,Rs=Cs,ss=ws[0]?.[0]?.value??0}Cn(ys),fa(Rs),sa(vs),Ma(ar),Xa(ss)}},[Ut,Vn]),!gn)return null;const ps={data:Ut,rangeMin:on,rangeMax:mn,matchedLabels:vn,setRangeMin:pn,setRangeMax:Un,onItemFocused:Bn,focusedItemData:kn,textAlign:Mn,onSandwich:xn,colorScheme:_n,totalProfileTicks:ga,totalProfileTicksRight:da,totalViewTicks:_a,showFlameGraphOnly:Hn,collapsedMap:Dt,setCollapsedMap:nn,getExtraContextMenuButtons:ba,collapsing:va,search:dn,selectedView:Ca},As=In?r.createElement(r.Fragment,null,r.createElement("div",{className:pt.sandwichCanvasWrapper},r.createElement("div",{className:pt.sandwichMarker},"Callers",r.createElement(m.I,{className:pt.sandwichMarkerIcon,name:"arrow-down"})),r.createElement(pe,{...ps,root:In[In.length-1][0],depth:In.length,direction:"parents",collapsing:!1})),r.createElement("div",{className:pt.sandwichCanvasWrapper},r.createElement("div",{className:(0,t.cx)(pt.sandwichMarker,pt.sandwichMarkerCalees)},r.createElement(m.I,{className:pt.sandwichMarkerIcon,name:"arrow-up"}),"Callees"),r.createElement(pe,{...ps,root:gn[0][0],depth:gn.length,direction:"children",collapsing:!1}))):r.createElement(pe,{...ps,root:gn[0][0],depth:gn.length,direction:"children"});return r.createElement("div",{className:pt.graph},r.createElement(He,{data:Ut,focusedItem:kn,sandwichedLabel:Vn,totalTicks:_a,onFocusPillClick:aa,onSandwichPillClick:Jn}),As)},Je=()=>({graph:(0,t.css)`
    label: graph;
    overflow: auto;
    flex-grow: 1;
    flex-basis: 50%;
  `,sandwichCanvasWrapper:(0,t.css)`
    label: sandwichCanvasWrapper;
    display: flex;
    margin-bottom: ${i/window.devicePixelRatio}px;
  `,sandwichMarker:(0,t.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerCalees:(0,t.css)`
    label: sandwichMarkerCalees;
    text-align: right;
  `,sandwichMarkerIcon:(0,t.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),Ve=rt;var Oe=e(76365),Ne=e(75198),ye=e(80292),se=e(55852),ae=e(10354),ge=e(94354),Pe=e(38138),Re=e(83122);const Be=({search:Ut,setSearch:on,selectedView:mn,setSelectedView:vn,containerWidth:pn,onReset:Un,textAlign:Bn,onTextAlignChange:kn,showResetButton:Mn,colorScheme:xn,onColorSchemeChange:Vn,stickyHeader:aa,extraHeaderElements:Jn,vertical:_n,isDiffMode:Hn})=>{const ba=(0,O.of)(st,aa),[va,Ca]=at(Ut,on),dn=va!==""?r.createElement(se.$n,{icon:"times",fill:"text",size:"sm",onClick:()=>{on(""),Ca("")}},"Clear"):null;return r.createElement("div",{className:ba.header},r.createElement("div",{className:ba.inputContainer},r.createElement(ae.p,{value:va||"",onChange:pt=>{Ca(pt.currentTarget.value)},placeholder:"Search...",suffix:dn})),r.createElement("div",{className:ba.rightContainer},Mn&&r.createElement(se.$n,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{Un()},className:ba.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),r.createElement(_e,{value:xn,onChange:Vn,isDiffMode:Hn}),r.createElement(ge.z,{size:"sm",disabled:mn===L.F8.TopTable,options:Xe,value:Bn,onChange:kn,className:ba.buttonSpacing}),r.createElement(ge.z,{size:"sm",options:tt(pn,_n),value:mn,onChange:vn}),Jn&&r.createElement("div",{className:ba.extraElements},Jn)))};function _e(Ut){const on=(0,O.of)(st,!1);let mn=r.createElement(Pe.W,null,r.createElement(Pe.W.Item,{label:"By package name",onClick:()=>Ut.onChange(L.zM.PackageBased)}),r.createElement(Pe.W.Item,{label:"By value",onClick:()=>Ut.onChange(L.zM.ValueBased)}));Ut.isDiffMode&&(mn=r.createElement(Pe.W,null,r.createElement(Pe.W.Item,{label:"Default (green to red)",onClick:()=>Ut.onChange(L.yU.Default)}),r.createElement(Pe.W.Item,{label:"Color blind (blue to red)",onClick:()=>Ut.onChange(L.yU.DiffColorBlind)})));const vn={[L.zM.ValueBased]:on.colorDotByValue,[L.zM.PackageBased]:on.colorDotByPackage,[L.yU.DiffColorBlind]:on.colorDotDiffColorBlind,[L.yU.Default]:on.colorDotDiffDefault}[Ut.value]||on.colorDotByValue;return r.createElement(Re.m,{overlay:mn},r.createElement(se.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:on.buttonSpacing,"aria-label":"Change color scheme"},r.createElement("span",{className:(0,t.cx)(on.colorDot,vn)})))}const Xe=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function tt(Ut,on){let mn=[{value:L.F8.TopTable,label:"Top Table",description:"Only show top table"},{value:L.F8.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(Ut>=h||on)&&mn.push({value:L.F8.Both,label:"Both",description:"Show both the top table and flame graph"}),mn}function at(Ut,on){const[mn,vn]=(0,r.useState)(Ut),pn=(0,ye.A)(Ut);return(0,Ne.A)(()=>{on(mn)},250,[mn]),(0,r.useEffect)(()=>{pn!==Ut&&Ut!==mn&&vn(Ut)},[Ut,pn,mn]),[mn,vn]}const st=(Ut,on)=>({header:(0,t.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${on?(0,t.css)`
          z-index: ${Ut.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${Ut.spacing(1)};
          padding-top: ${Ut.spacing(1)};
          background: ${Ut.colors.background.primary};
        `:""};
  `,inputContainer:(0,t.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,t.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,t.css)`
    label: buttonSpacing;
    margin-right: ${Ut.spacing(1)};
  `,resetButton:(0,t.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Ut.spacing(2)};
  `,resetButtonIconWrapper:(0,t.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Ut.colors.text.disabled};
  `,colorDot:(0,t.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,t.css)`
    label: colorDotByValue;
    background: ${k};
  `,colorDotByPackage:(0,t.css)`
    label: colorDotByPackage;
    background: ${ee};
  `,colorDotDiffDefault:(0,t.css)`
    label: colorDotDiffDefault;
    background: ${Z};
  `,colorDotDiffColorBlind:(0,t.css)`
    label: colorDotDiffColorBlind;
    background: ${G};
  `,extraElements:(0,t.css)`
    label: extraElements;
    margin-left: ${Ut.spacing(1)};
  `}),dt=Be;var ot=e(70713),ft=e(11261),yt=e(25019),Tt=e(90708),Kt=e(77093),Gt=e(52622);const _t=r.memo(({data:Ut,onSymbolClick:on,search:mn,matchedLabels:vn,onSearch:pn,sandwichItem:Un,onSandwich:Bn,onTableSort:kn})=>{const Mn=(0,r.useMemo)(()=>{let _n={};for(let Hn=0;Hn<Ut.data.length;Hn++){const ba=Ut.getValue(Hn),va=Ut.getValueRight(Hn),Ca=Ut.getSelf(Hn),dn=Ut.getLabel(Hn);(!vn||vn.has(dn))&&(_n[dn]=_n[dn]||{},_n[dn].self=_n[dn].self?_n[dn].self+Ca:Ca,_n[dn].total=_n[dn].total?_n[dn].total+ba:ba,_n[dn].totalRight=_n[dn].totalRight?_n[dn].totalRight+va:va)}return _n},[Ut,vn]),xn=(0,O.of)(Vt),Vn=(0,O.$j)(),[aa,Jn]=(0,r.useState)([{displayName:"Self",desc:!0}]);return r.createElement("div",{className:xn.topTableContainer,"data-testid":"topTable"},r.createElement(ot.Ay,{style:{width:"100%"}},({width:_n,height:Hn})=>{if(_n<3||Hn<3)return null;const ba=it(Ut,Mn,_n,on,pn,Bn,Vn,mn,Un);return r.createElement(Kt.X,{initialSortBy:aa,onSortByChange:va=>{va&&va.length&&kn?.(va[0].displayName+"_"+(va[0].desc?"desc":"asc")),Jn(va)},data:ba,width:_n,height:Hn})}))});_t.displayName="FlameGraphTopTableContainer";function it(Ut,on,mn,vn,pn,Un,Bn,kn,Mn){const xn=lt(Un,pn,kn,Mn),Vn={type:ft.PU.string,name:"Symbol",values:[],config:{custom:{width:mn-Dn-P*2},links:[{title:"Highlight symbol",url:"",onClick:_n=>{const ba=_n.origin.field.values[_n.origin.rowIndex];vn(ba)}}]}};let aa;if(Ut.isDiffFlamegraph()){Vn.config.custom.width=mn-Dn-P*3;const _n=Mt("Baseline","percent"),Hn=Mt("Comparison","percent"),ba=Mt("Diff","percent");ba.config.custom.cellOptions.type=Gt.ob.ColorText,ba.config.mappings=[{type:yt.d.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:yt.d.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:yt.d.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:yt.d.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const va=Ut.getLevels(),Ca=va.length?va[0][0].value:0,dn=va.length?va[0][0].valueRight:void 0;for(let pt in on){xn.values.push(null),Vn.values.push(pt);const Dt=on[pt].total,nn=on[pt].totalRight,gn=Ca-dn,Cn=Math.round(1e4*Dt/gn)/100,In=Math.round(1e4*nn/dn)/100,fa=(In-Cn)/Cn*100;ba.values.push(fa),_n.values.push(Cn),Hn.values.push(In)}aa={fields:[xn,Vn,_n,Hn,ba],length:Vn.values.length}}else{const _n=Mt("Self",Ut.selfField.config.unit),Hn=Mt("Total",Ut.valueField.config.unit);for(let ba in on)xn.values.push(null),Vn.values.push(ba),_n.values.push(on[ba].self),Hn.values.push(on[ba].total);aa={fields:[xn,Vn,_n,Hn],length:Vn.values.length}}return(0,Tt.we)({data:[aa],fieldConfig:{defaults:{},overrides:[]},replaceVariables:_n=>_n,theme:Bn})[0]}function Mt(Ut,on){const mn={width:P,align:"auto",inspect:!1,cellOptions:{type:Gt.ob.Auto}};return{type:ft.PU.number,name:Ut,values:[],config:{unit:on,custom:mn}}}const Dn=61;function lt(Ut,on,mn,vn){const pn={type:Gt.ob.Custom,cellComponent:Bn=>r.createElement(Ct,{frame:Bn.frame,onSandwich:Ut,onSearch:on,search:mn,sandwichItem:vn,rowIndex:Bn.rowIndex})},Un={filterable:!1,width:Dn,hideHeader:!0,inspect:!1,align:"auto",cellOptions:pn};return{type:ft.PU.number,name:"actions",values:[],config:{custom:Un}}}function Ct(Ut){const on=qt(),mn=Ut.frame.fields.find(Un=>Un.name==="Symbol")?.values[Ut.rowIndex],vn=Ut.search===mn,pn=Ut.sandwichItem===mn;return r.createElement("div",{className:on.actionCellWrapper},r.createElement(Ue.K,{className:on.actionCellButton,name:"search",variant:vn?"primary":"secondary",tooltip:vn?"Clear from search":"Search for symbol","aria-label":vn?"Clear from search":"Search for symbol",onClick:()=>{Ut.onSearch(vn?"":mn)}}),r.createElement(Ue.K,{className:on.actionCellButton,name:"gf-show-context",tooltip:pn?"Remove from sandwich view":"Show in sandwich view",variant:pn?"primary":"secondary","aria-label":pn?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Ut.onSandwich(pn?void 0:mn)}}))}const Vt=Ut=>({topTableContainer:(0,t.css)({label:"topTableContainer",padding:Ut.spacing(1),backgroundColor:Ut.colors.background.secondary,height:"100%"})}),qt=()=>({actionCellWrapper:(0,t.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,t.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),rn=_t,en=new n.A,Jt=({data:Ut,onTableSymbolClick:on,onViewSelected:mn,onTextAlignSelected:vn,onTableSort:pn,getTheme:Un,stickyHeader:Bn,extraHeaderElements:kn,vertical:Mn,showFlameGraphOnly:xn,disableCollapsing:Vn,getExtraContextMenuButtons:aa})=>{const[Jn,_n]=(0,r.useState)(),[Hn,ba]=(0,r.useState)(0),[va,Ca]=(0,r.useState)(1),[dn,pt]=(0,r.useState)(""),[Dt,nn]=(0,r.useState)(L.F8.Both),[gn,{width:Cn}]=(0,s.A)(),[In,fa]=(0,r.useState)("left"),[ga,sa]=(0,r.useState)(),da=Un(),Ma=(0,r.useMemo)(()=>{if(Ut)return new Oe.Jz(Ut,{collapsing:!Vn},da)},[Ut,da,Vn]),[_a,Xa]=hn(Ma),ps=Kn(da),As=Fn(dn,Ma);(0,r.useEffect)(()=>{Cn>0&&Cn<h&&Dt===L.F8.Both&&!Mn&&nn(L.F8.FlameGraph)},[Dt,nn,Cn,Mn]);const ys=(0,r.useCallback)(()=>{_n(void 0),ba(0),Ca(1)},[_n,Ca,ba]);function vs(){sa(void 0)}(0,r.useEffect)(()=>{ys(),vs()},[Ut,ys]);const ar=(0,r.useCallback)(ws=>{dn===ws?pt(""):(on?.(ws),pt(ws),ys())},[pt,ys,on,dn]);if(!Ma)return null;const ss=r.createElement(Ve,{data:Ma,rangeMin:Hn,rangeMax:va,matchedLabels:As,setRangeMin:ba,setRangeMax:Ca,onItemFocused:ws=>_n(ws),focusedItemData:Jn,textAlign:In,sandwichItem:ga,onSandwich:ws=>{ys(),sa(ws)},onFocusPillClick:ys,onSandwichPillClick:vs,colorScheme:_a,showFlameGraphOnly:xn,collapsing:!Vn,getExtraContextMenuButtons:aa,selectedView:Dt,search:dn}),Rs=r.createElement(rn,{data:Ma,onSymbolClick:ar,search:dn,matchedLabels:As,sandwichItem:ga,onSandwich:sa,onSearch:pt,onTableSort:pn});let Cs;return xn||Dt===L.F8.FlameGraph?Cs=ss:Dt===L.F8.TopTable?Cs=r.createElement("div",{className:ps.tableContainer},Rs):Dt===L.F8.Both&&(Mn?Cs=r.createElement("div",null,r.createElement("div",{className:ps.verticalGraphContainer},ss),r.createElement("div",{className:ps.verticalTableContainer},Rs)):Cs=r.createElement("div",{className:ps.horizontalContainer},r.createElement("div",{className:ps.horizontalTableContainer},Rs),r.createElement("div",{className:ps.horizontalGraphContainer},ss))),r.createElement(o.D.Provider,{value:da},r.createElement("div",{ref:gn,className:ps.container},!xn&&r.createElement(dt,{search:dn,setSearch:pt,selectedView:Dt,setSelectedView:ws=>{nn(ws),mn?.(ws)},containerWidth:Cn,onReset:()=>{ys(),vs()},textAlign:In,onTextAlignChange:ws=>{fa(ws),vn?.(ws)},showResetButton:!!(Jn||ga),colorScheme:_a,onColorSchemeChange:Xa,stickyHeader:!!Bn,extraHeaderElements:kn,vertical:Mn,isDiffMode:Ma.isDiffFlamegraph()}),r.createElement("div",{className:ps.body},Cs)))};function hn(Ut){const on=Ut?.isDiffFlamegraph()?L.yU.Default:L.zM.PackageBased,[mn,vn]=(0,r.useState)(on);return(0,r.useEffect)(()=>{vn(on)},[on]),[mn,vn]}function Fn(Ut,on){return(0,r.useMemo)(()=>{if(Ut&&on){const mn=new Set;let vn=en.filter(on.getUniqueLabels(),Ut);if(vn)for(let pn of vn)mn.add(on.getUniqueLabels()[pn]);return mn}},[Ut,on])}function Kn(Ut){return{container:(0,t.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Ut.spacing(1)}),body:(0,t.css)({label:"body",flexGrow:1}),tableContainer:(0,t.css)({height:800}),horizontalContainer:(0,t.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:Ut.spacing(1),width:"100%"}),horizontalGraphContainer:(0,t.css)({flexBasis:"50%"}),horizontalTableContainer:(0,t.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,t.css)({marginBottom:Ut.spacing(1)}),verticalTableContainer:(0,t.css)({height:800})}}const na=Jt},5546:(Q,I,e)=>{"use strict";e.d(I,{F8:()=>n,Zk:()=>t,yU:()=>s,zM:()=>r});var t=(o=>(o.Bytes="bytes",o.Short="short",o.Nanoseconds="ns",o))(t||{}),n=(o=>(o.TopTable="topTable",o.FlameGraph="flameGraph",o.Both="both",o))(n||{}),r=(o=>(o.ValueBased="valueBased",o.PackageBased="packageBased",o))(r||{}),s=(o=>(o.Default="default",o.DiffColorBlind="diffColorBlind",o))(s||{})},80822:(Q,I,e)=>{"use strict";e.d(I,{Wn:()=>o,_k:()=>s});var t=e(41260),n=e(11261),r=e(21423);function s(u,E){const p=o({data:u.series},{data:E.series}).data;return{...u,series:p}}function o(u,E){if(!u)return d(E);E.data.forEach(h=>{const P=u.data.find(y=>g(y,h));if(!P){u.data.push(c(h));return}m(P,h)});const p=[...u.errors??[],...E.errors??[]];p.length>0&&(u.errors=p);const b=u.error??E.error;b!=null&&(u.error=b);const a=[...u.traceIds??[],...E.traceIds??[]];return a.length>0&&(u.traceIds=a),u}function m(u,E){const p=Math.max(u.fields.length,E.fields.length);for(let b=0;b<p;b++){if(!u.fields[b])continue;const a=u.fields[b].name?E.fields.find(h=>h.name===u.fields[b].name):E.fields[b];if(a&&(u.fields[b].values=[].concat.apply(a.values,u.fields[b].values),a.nanos)){const h=u.fields[b].nanos?.slice()||[];u.fields[b].nanos=E.fields[b].nanos?.concat(h)}}u.length+=E.length,u.meta={...u.meta,stats:l(u.meta?.stats??[],E.meta?.stats??[])}}const i="Summary: total bytes processed";function l(u,E){const p=u.find(h=>h.displayName===i),b=E.find(h=>h.displayName===i);if(b!=null&&p!=null)return[{value:b.value+p.value,displayName:i,unit:p.unit}];const a=b??p;return a!=null?[a]:[]}function d(u){return{...u,data:u.data.map(c)}}function c(u){return{...u,fields:u.fields.map(E=>({...E,values:E.values}))}}function g(u,E){if(u.refId!==E.refId)return!1;const p=u.meta?.type,b=E.meta?.type;if(p!==b)return!1;if(p===t.m.TimeSeriesMulti){const P=u.fields.find(C=>C.type===n.PU.number),y=E.fields.find(C=>C.type===n.PU.number);return P===void 0||y===void 0?!1:(0,r.ab)(P.labels??{},y.labels??{})}const a=u.meta?.custom?.frameType,h=E.meta?.custom?.frameType;return a==="LabeledTimeValues"&&h==="LabeledTimeValues"}},20719:(Q,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>d,n6:()=>l});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],r=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],m=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],i=m.map(c=>c.label),l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${m.map(c=>c.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/},d=l},32370:(Q,I,e)=>{"use strict";e.d(I,{l:()=>C,z:()=>f});var t=e(20719),n=e(1220),r=e(75161),s=e(38961),o=e(15145);function m(){return[{id:o.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},{id:o.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:n.kf,addOperationHandler:n.iZ},{id:o.jN.Ln,name:"Ln",params:[],defaultParams:[],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},l(o.jN.Changes),l(o.jN.Rate,!0),l(o.jN.Irate),l(o.jN.Increase,!0),l(o.jN.Idelta),l(o.jN.Delta),i({id:o.jN.HoltWinters,params:[(0,n.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:g,changeTypeHandler:d}),i({id:o.jN.PredictLinear,params:[(0,n.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:g,changeTypeHandler:d}),i({id:o.jN.QuantileOverTime,params:[(0,n.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:n.Kl,addOperationHandler:g,changeTypeHandler:d}),...r.Iu,{id:o.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.Ag.BinaryOps,renderer:(T,M,O)=>O,addOperationHandler:u},i({id:o.jN.Abs}),i({id:o.jN.Absent}),i({id:o.jN.Acos,category:o.Ag.Trigonometric}),i({id:o.jN.Acosh,category:o.Ag.Trigonometric}),i({id:o.jN.Asin,category:o.Ag.Trigonometric}),i({id:o.jN.Asinh,category:o.Ag.Trigonometric}),i({id:o.jN.Atan,category:o.Ag.Trigonometric}),i({id:o.jN.Atanh,category:o.Ag.Trigonometric}),i({id:o.jN.Ceil}),i({id:o.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),i({id:o.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),i({id:o.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),i({id:o.jN.Cos,category:o.Ag.Trigonometric}),i({id:o.jN.Cosh,category:o.Ag.Trigonometric}),i({id:o.jN.DayOfMonth,category:o.Ag.Time}),i({id:o.jN.DayOfWeek,category:o.Ag.Time}),i({id:o.jN.DayOfYear,category:o.Ag.Time}),i({id:o.jN.DaysInMonth,category:o.Ag.Time}),i({id:o.jN.Deg}),l(o.jN.Deriv),i({id:o.jN.Exp}),i({id:o.jN.Floor}),i({id:o.jN.Group}),i({id:o.jN.Hour}),i({id:o.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:E,addOperationHandler:p}),i({id:o.jN.Log10}),i({id:o.jN.Log2}),i({id:o.jN.Minute}),i({id:o.jN.Month}),i({id:o.jN.Pi,renderer:T=>`${T.id}()`}),i({id:o.jN.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:n.jY}),i({id:o.jN.Rad}),l(o.jN.Resets),i({id:o.jN.Round,category:o.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),i({id:o.jN.Scalar}),i({id:o.jN.Sgn}),i({id:o.jN.Sin,category:o.Ag.Trigonometric}),i({id:o.jN.Sinh,category:o.Ag.Trigonometric}),i({id:o.jN.Sort}),i({id:o.jN.SortDesc}),i({id:o.jN.Sqrt}),i({id:o.jN.Stddev}),i({id:o.jN.Tan,category:o.Ag.Trigonometric}),i({id:o.jN.Tanh,category:o.Ag.Trigonometric}),i({id:o.jN.Time,renderer:T=>`${T.id}()`}),i({id:o.jN.Timestamp}),i({id:o.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:T=>`${T.id}(${T.params[0]})`}),i({id:o.jN.Year})]}function i(D){return{...D,id:D.id,name:D.name??(0,n.DQ)(D.id),params:D.params??[],defaultParams:D.defaultParams??[],category:D.category??o.Ag.Functions,renderer:D.renderer??(D.params?n.kf:n.jY),addOperationHandler:D.addOperationHandler??n.iZ}}function l(D,T=!1){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)(T)],defaultParams:[T?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:c,addOperationHandler:g,changeTypeHandler:d}}function d(D,T){return(D.params[0]==="$__rate_interval"&&T.defaultParams[0]!=="$__rate_interval"||D.params[0]==="$__interval"&&T.defaultParams[0]!=="$__interval")&&(D.params=T.defaultParams),D}function c(D,T,M){let O=(D.params??[])[0]??"5m";return`${T.id}(${M}[${O}])`}function g(D,T,M){const O={id:D.id,params:D.defaultParams};return T.operations.length>0&&M.getOperationDef(T.operations[0].id).addOperationHandler===g?{...T,operations:[O,...T.operations.slice(1)]}:{...T,operations:[O,...T.operations]}}function u(D,T){return{...T,binaryQueries:[...T.binaryQueries??[],{operator:"/",query:T}]}}function E(D,T,M){if(typeof D.params[1]!="string")throw"The separator must be a string";const O=`"${D.params[1]}"`;return`${D.id}(${M}, "${D.params[0]}", ${O}, "${D.params.slice(2).join(O)}")`}function p(D,T){const M={id:D.id,params:D.defaultParams};return{...T,operations:[...T.operations,M]}}function b(){return[...(0,n.G3)(o.jN.Sum),...(0,n.G3)(o.jN.Avg),...(0,n.G3)(o.jN.Min),...(0,n.G3)(o.jN.Max),...(0,n.G3)(o.jN.Count),...(0,n.jC)(o.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),a(o.jN.SumOverTime),a(o.jN.AvgOverTime),a(o.jN.MinOverTime),a(o.jN.MaxOverTime),a(o.jN.CountOverTime),a(o.jN.LastOverTime),a(o.jN.PresentOverTime),a(o.jN.AbsentOverTime),a(o.jN.StddevOverTime)]}function a(D){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:h,addOperationHandler:g}}function h(D,T,M){let O=(D.params??[])[0]??"$__interval";return`${T.id}(${M}[${O}])`}var P=e(83077);class y{constructor(T){this.categories=[],this.operationsRegistry=new P.O(T)}setOperationCategories(T){this.categories=T}getOperationsForCategory(T){return this.operationsRegistry.list().filter(M=>M.category===T&&!M.hideFromList)}getAlternativeOperations(T){return this.operationsRegistry.list().filter(M=>M.alternativesKey&&M.alternativesKey===T)}getCategories(){return this.categories}getOperationDef(T){return this.operationsRegistry.getIfExists(T)}renderOperations(T,M){for(const O of M){const S=this.operationsRegistry.getIfExists(O.id);if(!S)throw new Error(`Could not find operation ${O.id} in the registry`);T=S.renderer(O,S,T)}return T}renderBinaryQueries(T,M){if(M)for(const O of M)T=`${this.renderBinaryQuery(T,O)}`;return T}renderBinaryQuery(T,M){let O=T+` ${M.operator} `;return M.vectorMatches&&(O+=`${M.vectorMatchesType}(${M.vectorMatches}) `),O+this.renderQuery(M.query,!0)}renderLabels(T){if(T.length===0)return"";let M="{";for(const O of T)M!=="{"&&(M+=", "),M+=`${O.label}${O.op}"${O.value}"`;return M+"}"}renderQuery(T,M){let O=`${T.metric??""}${this.renderLabels(T.labels)}`;return O=this.renderOperations(O,T.operations),!M&&this.hasBinaryOp(T)&&T.binaryQueries?.length&&(O=`(${O})`),O=this.renderBinaryQueries(O,T.binaryQueries),M&&(this.hasBinaryOp(T)||T.binaryQueries?.length)&&(O=`(${O})`),O}hasBinaryOp(T){return T.operations.find(M=>this.getOperationDef(M.id)?.category===o.Ag.BinaryOps)!==void 0}}class C extends y{constructor(){super(()=>{const T=[...m(),...b()];for(const M of T){const O=t.AW.find(S=>S.insertText===M.id);O&&(M.documentation=O.documentation)}return T}),this.setOperationCategories([o.Ag.Aggregations,o.Ag.RangeFunctions,o.Ag.Functions,o.Ag.BinaryOps,o.Ag.Trigonometric,o.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const f=new C},75161:(Q,I,e)=>{"use strict";e.d(I,{AE:()=>s,C8:()=>r,Iu:()=>o});var t=e(1220),n=e(15145);const r=[{id:n.jN.Addition,name:"Add scalar",sign:"+"},{id:n.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.jN.Exponent,name:"Exponent",sign:"^"},{id:n.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=r.reduce((i,l)=>(i[l.sign]={id:l.id,comparison:l.comparison},i),{}),o=r.map(i=>{const l=[{name:"Value",type:"number"}],d=[2];return i.comparison&&(l.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),d.push(!1)),{id:i.id,name:i.name,params:l,defaultParams:d,alternativesKey:"binary scalar operations",category:n.Ag.BinaryOps,renderer:m(i.sign),addOperationHandler:t.iZ}});function m(i){return function(d,c,g){let u=d.params[0],E="";return d.params.length===2&&(E=d.params[1]?" bool":""),`${g} ${i}${E} ${u}`}}},38961:(Q,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(50877),r=e(88323),s=e(32370),o=e(1220);function m({onChange:l,index:d,operationId:c,value:g,query:u,datasource:E}){const[p,b]=(0,t.useState)({});return t.createElement(r.l6,{inputId:(0,o.OS)(c,d),autoFocus:g===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{b({isLoading:!0});const a=await i(u,E);b({options:a,isLoading:void 0})},isLoading:p.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:p.options,value:(0,n.z)(g),onChange:a=>l(d,a.value)})}async function i(l,d){let c=l.labels;d.type==="prometheus"&&(c=[{label:"__name__",op:"=",value:l.metric},...l.labels]);const g=s.z.renderLabels(c),u=await d.languageProvider.fetchLabelsWithMatch(g);return Object.keys(u).map(E=>({label:E,value:E}))}},1220:(Q,I,e)=>{"use strict";e.d(I,{DQ:()=>p,G3:()=>h,Kl:()=>g,OS:()=>b,iZ:()=>E,jC:()=>P,jY:()=>i,kf:()=>l,nU:()=>c,z2:()=>a});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(38961),m=e(15145);function i(S,v,x){const A=u(S,v,x),R=S.id+"(";return x&&A.push(x),R+A.join(", ")+")"}function l(S,v,x){const A=u(S,v,x),R=S.id+"(";return x&&A.unshift(x),R+A.join(", ")+")"}function d(S,v,x,A){if(v.params.length<2)throw`Cannot render a function with params of length [${v.params.length}]`;let R=(S.params??[])[0]??"5m";const B=u({...S,params:S.params.slice(1)},{...v,params:v.params.slice(1),defaultParams:v.defaultParams.slice(1)},x),U=S.id+"(";return x&&(A?B.push(`${x}[${R}]`):B.unshift(`${x}[${R}]`)),U+B.join(", ")+")"}function c(S,v,x){return d(S,v,x,!1)}function g(S,v,x){return d(S,v,x,!0)}function u(S,v,x){return(S.params??[]).map((A,R)=>v.params[R].type==="string"?'"'+A+'"':A)}function E(S,v){const x={id:S.id,params:S.defaultParams};return{...v,operations:[...v.operations,x]}}function p(S){return(0,t.capitalize)(S.replace(/_/g," "))}function b(S,v){return`operations.${S}.param.${v}`}function a(S=!1){const v={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return S&&v.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),v}function h(S,v={}){return[{id:S,name:p(S),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:m.Ag.Aggregations,renderer:i,paramChangedHandler:M(`__${S}_by`),explainHandler:f(S,""),addOperationHandler:E,...v},{id:`__${S}_by`,name:`${p(S)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:y(S),paramChangedHandler:T(S),explainHandler:f(S,"by"),addOperationHandler:E,hideFromList:!0,...v},{id:`__${S}_without`,name:`${p(S)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:C(S),paramChangedHandler:T(S),explainHandler:f(S,"without"),addOperationHandler:E,hideFromList:!0,...v}]}function P(S,v,x={}){const A=h(S,x);return A[0].params.unshift(...v.params),A[1].params.unshift(...v.params),A[2].params.unshift(...v.params),A[0].defaultParams=v.defaultParams,A[1].defaultParams=[...v.defaultParams,""],A[2].defaultParams=[...v.defaultParams,""],A[1].renderer=D(S),A[2].renderer=D(S),A}function y(S){return function(x,A,R){return`${S} by(${x.params.join(", ")}) (${R})`}}function C(S){return function(x,A,R){return`${S} without(${x.params.join(", ")}) (${R})`}}function f(S,v){return function(A){const R=A.params.map(U=>`\`${U}\``).join(" and "),B=s()("label",A.params.length);switch(v){case"by":return`Calculates ${S} over dimensions while preserving ${B} ${R}.`;case"without":return`Calculates ${S} over the dimensions ${R}. All other labels are preserved.`;default:return`Calculates ${S} over the dimensions.`}}}function D(S){return function(x,A,R){const B=A.params.findIndex(K=>K.restParam),U=x.params.slice(0,B),w=x.params.slice(B);return`${S} by(${w.join(", ")}) (${U.map((K,N)=>A.params[N].type==="string"?`"${K}"`:K).join(", ")}, ${R})`}}function T(S){return function(x,A,R){return A.params.length<R.params.length?{...A,id:S}:A}}function M(S){return function(x,A,R){return A.params.length===R.params.length?{...A,id:S}:A}}function O(S,v){if(!S.label||!S.op||!S.value||v.length<2)return!1;const x=S.op.toString().startsWith("!");return v.filter(B=>B.label===S.label&&B.value===S.value&&B.op!==S.op).some(B=>!!(x&&B?.op?.toString().startsWith("!")===!1||x===!1&&B?.op?.toString().startsWith("!")))}},76040:(Q,I,e)=>{"use strict";e.d(I,{u:()=>s});var t=e(21489),n=e(75161),r=e(26115);function s(a){const h=(0,r.qk)(a),y=t.K3.parse(h).topNode,f={query:{metric:"",labels:[],operations:[]},errors:[]};try{m(h,y,f)}catch(D){console.error(D),D instanceof Error&&f.errors.push({text:D.message})}return b(f.query)&&(f.errors=[]),o(a)&&(f.errors=[]),f}function o(a){const h={query:{metric:"",labels:[],operations:[]},errors:[]};a=a.replace(/\$__interval/g,"1s"),a=a.replace(/\$__interval_ms/g,"1000"),a=a.replace(/\$__rate_interval/g,"1s"),a=a.replace(/\$__range_ms/g,"1000"),a=a.replace(/\$__range_s/g,"1"),a=a.replace(/\$__range/g,"1s");const y=t.K3.parse(a).topNode;try{m(a,y,h)}catch{return!1}return h.errors.length===0}function m(a,h,P){const y=P.query;switch(h.type.id){case t.iP:{y.metric=(0,r.AA)(a,h);break}case t.BG:{y.labels.push(l(a,h));const C=h.getChild(r.Ql);C&&P.errors.push((0,r.xz)(a,C));break}case t.R6:{c(a,h,P);break}case t.Fn:{g(a,h,P);break}case t.df:{E(a,h,P);break}case r.Ql:{if(i(h))break;P.errors.push((0,r.xz)(a,h));break}default:{h.type.id===t.ek&&P.errors.push((0,r.xz)(a,h));let C=h.firstChild;for(;C;)m(a,C,P),C=C.nextSibling}}}function i(a){return a.prevSibling?.type.id===t.GN&&a.prevSibling?.firstChild?.type.id===t.Fb}function l(a,h){const P=(0,r.AA)(a,h.getChild(t.IC)),y=(0,r.AA)(a,h.getChild(t.Lf)),C=(0,r.AA)(a,h.getChild(t.LW)).replace(/"/g,"");return{label:P,op:y,value:C}}const d=["changes","rate","irate","increase","delta"];function c(a,h,P){const y=P.query,C=h.getChild(t.m3),f=(0,r.AA)(a,C),T=h.getChild(t.Dh).getChild(t.qI),M=[];let O="";if(d.includes(f)||f.endsWith("_over_time")){let v=(0,r.AA)(a,h).match(/\[(.+)\]/);v?.[1]&&(O=v[1],M.push(v[1]))}const S={id:f,params:M};if(y.operations.unshift(S),T){if((0,r.AA)(a,T)===O+"]")return;u(a,T,P,S)}}function g(a,h,P){const y=P.query,C=h.getChild(t.xb);let f=(0,r.AA)(a,C);const D=h.getChild(t.hI),T=[];D&&(D.getChild("By")&&f&&(f=`__${f}_by`),D.getChild(t.xB)&&(f=`__${f}_without`),T.push(...(0,r.R1)(a,D,t._p)));const O=h.getChild(t.Dh).getChild(t.qI),v=O?.getChild(t.GN)?.getChild(t.df);v&&P.errors.push({text:"Query parsing is ambiguous.",from:v.from,to:v.to});const x={id:f,params:[]};y.operations.unshift(x),u(a,O,P,x),x.params.push(...T)}function u(a,h,P,y){if(h)switch(h.type.id){case t.GN:case t.qI:{let C=h.firstChild;for(;C;){const D=C.getChild(t.GN)?.getChild(t.df);D&&P.errors.push({text:"Query parsing is ambiguous.",from:D.from,to:D.to}),u(a,C,P,y),C=C.nextSibling}break}case t.Po:{y.params.push(parseFloat((0,r.AA)(a,h)));break}case t.LW:{y.params.push((0,r.AA)(a,h).replace(/"/g,""));break}default:m(a,h,P)}}function E(a,h,P){const y=P.query,C=h.firstChild,f=(0,r.AA)(a,C.nextSibling),D=p(a,h.getChild(t.Wy)),T=h.lastChild,M=n.AE[f],O=C.getChild(t.Po),S=T.getChild(t.Po),v=T.getChild(t.df);if(O||m(a,C,P),S)y.operations.push((0,r.rq)(M,a,T,!!D?.isBool));else if(v){const x=(0,r.z9)(T);x?.type.id===t.Po&&y.operations.push((0,r.rq)(M,a,x,!!D?.isBool)),m(a,T,P)}else{y.binaryQueries=y.binaryQueries||[];const x={operator:f,query:{metric:"",labels:[],operations:[]}};D?.isMatcher&&(x.vectorMatchesType=D.matchType,x.vectorMatches=D.matches),y.binaryQueries.push(x),m(a,T,{query:x.query,errors:P.errors})}}function p(a,h){if(h){if(h.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const P=h.getChild(t.UX);return P?{isMatcher:!0,isBool:!1,matches:(0,r.AA)(a,P.getChild(t.x$)?.getChild(t.qJ)),matchType:P.getChild(t.On)?"on":"ignoring"}:void 0}}}function b(a){return a.labels.length===0&&a.operations.length===0&&!a.metric}},26115:(Q,I,e)=>{"use strict";e.d(I,{AA:()=>l,Ql:()=>t,R1:()=>c,b4:()=>g,qk:()=>o,rq:()=>d,xz:()=>r,z9:()=>n});const t=0;function n(u){return u.firstChild?n(u.firstChild):u}function r(u,E){return{text:l(u,E),from:E.from,to:E.to,parentType:E.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(u){return u.replace(s,(E,p,b,a,h,P,y)=>{const C=a||y;let f=p,D="0";return b&&(f=b,D="1"),h&&(f=h,D="2"),`__V_${D}__`+f+"__V__"+(C?"__F__"+C+"__F__":"")})}const m=[(u,E)=>`$${u}`,(u,E)=>`[[${u}${E?`:${E}`:""}]]`,(u,E)=>`\${${u}${E?`:${E}`:""}}`];function i(u){return u.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(E,p,b,a)=>m[parseInt(p,10)](b,a))}function l(u,E){return E?i(u.substring(E.from,E.to)):""}function d(u,E,p,b){const a=[parseFloat(l(E,p))];return u.comparison&&a.push(b),{id:u.id,params:a}}function c(u,E,p){if(E.type.id===p||E.name===p)return[l(u,E)];const b=[];let a=0,h=E.childAfter(a);for(;h;)b.push(...c(u,h,p)),a=h.to,h=E.childAfter(a);return b}const g=u=>u.split(" ").map(p=>`${p}.*`).join("")},15145:(Q,I,e)=>{"use strict";e.d(I,{Ag:()=>t,jN:()=>n,n5:()=>r});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),r=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(r||{})},5261:(Q,I,e)=>{"use strict";e.d(I,{L:()=>n,y:()=>r});var t=e(32264);function n(s){return{grafana_version:t.$.buildInfo.version,plugin_type:String(s.type),plugin_version:s.info.version,plugin_id:s.id,plugin_name:s.name}}function r(s){return{...n(s.meta),datasource_uid:s.uid}}},44027:(Q,I,e)=>{"use strict";e.d(I,{G:()=>i});var t=e(96540),n=e(92470),r=e(95187),s=e(14110),o=e(5261);const m="grafana_plugin_";function i(){const d=(0,n.Q)();return(0,t.useMemo)(()=>{const c=(0,r.S)(d)?(0,o.y)(d.instanceSettings):(0,o.L)(d.meta);return(g,u)=>{if(!l(g))throw new Error(`Interactions reported in plugins should start with: "${m}".`);return(0,s.rR)(g,{...u,...c})}},[d])}function l(d){return d.startsWith(m)&&d.length>m.length}},61298:(Q,I,e)=>{"use strict";e.d(I,{fX:()=>r,nB:()=>n,n_:()=>t,p6:()=>s});var t=(o=>(o.DashboardView="dashboard-view",o.DataRequest="data-request",o))(t||{});const n=o=>!!o.payload.page,r=o=>!!o.payload.interactionName,s=o=>!!o.payload.experimentId},14110:(Q,I,e)=>{"use strict";e.d(I,{G$:()=>s,Jy:()=>o,Xp:()=>i,rR:()=>m});var t=e(32264),n=e(12131),r=e(63415);const s=l=>{(0,r.x$)().addEvent({type:r.on.MetaAnalytics,payload:l})},o=()=>{const l=n.Ny.getLocation(),d=`${t.$.appSubUrl??""}${l.pathname}${l.search}${l.hash}`;(0,r.x$)().addEvent({type:r.on.Pageview,payload:{page:d}})},m=(l,d)=>{(0,r.x$)().addEvent({type:r.on.Interaction,payload:{interactionName:l,properties:d}})},i=(l,d,c)=>{(0,r.x$)().addEvent({type:r.on.ExperimentView,payload:{experimentId:l,experimentGroup:d,experimentVariant:c}})}},55882:(Q,I,e)=>{"use strict";e.d(I,{s:()=>c});var t=e(96540),n=e(22391),r=e(51527),s=e(13544),o=e(88323),m=e(66864),i=e(98624),l=e(19347),d=e(26657);class c extends t.PureComponent{constructor(u){super(u),this.dataSourceSrv=(0,l.l)(),this.state={},this.onChange=(E,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const b=this.dataSourceSrv.getInstanceSettings(E.value);b&&(this.props.onChange(b),this.setState({error:void 0}))}}static{this.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}}componentDidMount(){const{current:u}=this.props;this.dataSourceSrv.getInstanceSettings(u)||this.setState({error:"Could not find data source "+u})}getCurrentValue(){const{current:u,hideTextValue:E,noDefault:p}=this.props;if(!u&&p)return;const b=this.dataSourceSrv.getInstanceSettings(u);if(b)return{label:b.name.slice(0,37),value:b.uid,imgUrl:b.meta.info.logos.small,hideText:E,meta:b.meta};const a=(0,n.Iz)(u);return a===d.dR.uid||a===d.dR.name?{label:a,value:a,hideText:E}:{label:(a??"no name")+" - not found",value:a??void 0,imgUrl:"",hideText:E}}getDataSourceOptions(){const{alerting:u,tracing:E,metrics:p,mixed:b,dashboard:a,variables:h,annotations:P,pluginId:y,type:C,filter:f,logs:D}=this.props;return this.dataSourceSrv.getList({alerting:u,tracing:E,metrics:p,logs:D,dashboard:a,mixed:b,variables:h,annotations:P,pluginId:y,filter:f,type:C}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:u,onBlur:E,onClear:p,openMenuOnFocus:b,placeholder:a,width:h,inputId:P,disabled:y=!1,isLoading:C=!1}=this.props,{error:f}=this.state,D=this.getDataSourceOptions(),T=this.getCurrentValue(),M=typeof p=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.Tp.components.DataSourcePicker.container},t.createElement(o.l6,{isLoading:C,disabled:y,"aria-label":"Select a data source","data-testid":s.Tp.components.DataSourcePicker.inputV2,inputId:P||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:D,autoFocus:u,onBlur:E,width:h,openMenuOnFocus:b,maxMenuHeight:500,placeholder:a,noOptionsMessage:"No datasources found",value:T??null,invalid:!!f||!!this.props.invalid,getOptionLabel:O=>O.meta&&(0,r.x)(O.meta.signature)&&O!==T?t.createElement(m.Gy,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,O.label)," ",t.createElement(i.B,{status:O.meta.signature})):O.label||""}))}}},96937:(Q,I,e)=>{"use strict";e.d(I,{f:()=>t,p:()=>n});let t=()=>{throw new Error("EmbeddedDashboard requires runtime initialization")};function n(r){t=r}},97152:(Q,I,e)=>{"use strict";e.d(I,{a:()=>n,e:()=>r});var t=e(96540);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function r(s){n=s}},24308:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>r,m:()=>n});var t=e(96540);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function r(s){n=s}},46235:(Q,I,e)=>{"use strict";e.d(I,{V:()=>n,l:()=>r});var t=e(96540);let n=({children:s})=>t.createElement("div",null,s);function r(s){n=s}},32264:(Q,I,e)=>{"use strict";e.d(I,{$:()=>c,p:()=>o});var t=e(2543),n=e.n(t),r=e(42994),s=e(97594);class o{constructor(u){this.publicDashboardsEnabled=!0,this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.namespace="default",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.anonymousDeviceLimit=void 0,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.rendererDefaultImageWidth=1e3,this.rendererDefaultImageHeight=500,this.rendererDefaultImageScale=1,this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1,userIdentityFallbackCredentialsEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.analytics={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=u.bootData;const E={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,E,u),this.buildInfo=u.buildInfo||E.buildInfo,this.dateFormats&&r.WC.update(this.dateFormats),this.buildInfo.env==="development"&&i(this),m(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.g)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function m(g){const u=g.featureToggles,p=window.localStorage.getItem("grafana.featureToggles");if(p){const b=p.split(",");for(const a of b){const[h,P]=a.split("="),y=P==="true"||P==="1";u[h]=y,console.log(`Setting feature toggle ${h} = ${y} via localstorage`)}}}function i(g){if(window.location.href.indexOf("__feature")===-1)return;const u=new Set(["autoMigrateOldPanels","autoMigrateGraphPanel","autoMigrateTablePanel","autoMigratePiechartPanel","autoMigrateWorldmapPanel","autoMigrateStatPanel","disableAngular"]);new URLSearchParams(window.location.search).forEach((p,b)=>{if(b.startsWith("__feature.")){const a=g.featureToggles,h=b.substring(10);if(u.has(h))return;const P=p==="true"||p==="";P!==a[b]&&(a[h]=P,console.log(`Setting feature toggle ${h} = ${P} via url`))}})}const l=window.grafanaBootData||{settings:{},user:{},navTree:[]},d=l.settings;d.bootData=l;const c=new o(d)},13303:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{CopyPanelEvent:()=>c.ah,DataSourcePicker:()=>S.s,DataSourceWithBackend:()=>y.iy,EchoEventType:()=>o.on,EmbeddedDashboard:()=>R.f,FakeEchoSrv:()=>o.c_,GrafanaBootConfig:()=>E.p,HealthCheckError:()=>y.b1,HealthStatus:()=>y.VQ,HistoryWrapper:()=>d.K9,MetaAnalyticsEventName:()=>p.n_,PanelDataErrorView:()=>D.a,PanelRenderer:()=>f.m,PluginPage:()=>O.V,RefreshEvent:()=>c._,StreamingFrameAction:()=>l.Kh,ThemeChangedEvent:()=>c.E8,TimeRangeUpdatedEvent:()=>c.sR,config:()=>E.$,createDataSourcePluginEventProperties:()=>v.y,createMonitoringLogger:()=>P.DW,createPluginEventProperties:()=>v.L,createQueryRunner:()=>M.d,featureEnabled:()=>h.a,frameToMetricFindValue:()=>C.$h,getAngularLoader:()=>n.E,getAppEvents:()=>c.J7,getBackendSrv:()=>t.AI,getDataSourceSrv:()=>r.l,getEchoSrv:()=>o.x$,getGrafanaLiveSrv:()=>l.oF,getLegacyAngularInjector:()=>i.C,getLocationSrv:()=>s.X,getPluginComponentExtensions:()=>g.Dp,getPluginExtensions:()=>g.O3,getPluginImportUtils:()=>b.o,getPluginLinkExtensions:()=>g.Kf,getRunRequest:()=>M.XJ,getTemplateSrv:()=>m.w,isExperimentViewEvent:()=>p.p6,isExpressionReference:()=>y.s9,isFetchError:()=>t.NF,isInteractionEvent:()=>p.fX,isPageviewEvent:()=>p.nB,isPluginExtensionComponent:()=>u.a,isPluginExtensionLink:()=>u.D,loadPluginCss:()=>b.PL,locationSearchToObject:()=>d.SE,locationService:()=>d.Ny,logDebug:()=>P.MD,logError:()=>P.vV,logInfo:()=>P.fH,logWarning:()=>P.FF,navigationLogger:()=>d.Lc,registerEchoBackend:()=>o.pl,reportExperimentView:()=>a.Xp,reportInteraction:()=>a.rR,reportMetaAnalytics:()=>a.G$,reportPageview:()=>a.Jy,setAngularLoader:()=>n.w,setAppEvents:()=>c.H8,setBackendSrv:()=>t.u5,setDataSourceSrv:()=>r.h,setEchoSrv:()=>o.H2,setEmbeddedDashboard:()=>R.p,setGrafanaLiveSrv:()=>l.S8,setLegacyAngularInjector:()=>i.j,setLocationService:()=>d.vG,setLocationSrv:()=>s.T,setPluginExtensionGetter:()=>g.cE,setPluginImportUtils:()=>b.se,setQueryRunnerFactory:()=>M.HC,setReturnToPreviousHook:()=>A._,setRunRequest:()=>M.pC,setTemplateSrv:()=>m.d,toDataQueryError:()=>T.u,toDataQueryResponse:()=>C.bE,usePluginInteractionReporter:()=>x.G,useReturnToPrevious:()=>A.i});var t=e(17172),n=e(7376),r=e(19347),s=e(23509),o=e(63415),m=e(72574),i=e(81634),l=e(78731),d=e(12131),c=e(3591),g=e(4402),u=e(80882),E=e(32264),p=e(61298),b=e(89191),a=e(14110),h=e(33378),P=e(34867),y=e(26657),C=e(47773),f=e(24308),D=e(97152),T=e(12091),M=e(63639),O=e(46235),S=e(55882),v=e(5261),x=e(44027),A=e(14778),R=e(96937)},7376:(Q,I,e)=>{"use strict";e.d(I,{E:()=>r,w:()=>n});let t;function n(s){t=s}function r(){return t}},63415:(Q,I,e)=>{"use strict";e.d(I,{H2:()=>r,c_:()=>m,on:()=>t,pl:()=>o,x$:()=>s});var t=(i=>(i.Performance="performance",i.MetaAnalytics="meta-analytics",i.Pageview="pageview",i.Interaction="interaction",i.ExperimentView="experimentview",i.GrafanaJavascriptAgent="grafana-javascript-agent",i))(t||{});let n;function r(i){if(n instanceof m)for(const l of n.buffer)i.addEvent(l.event,l.meta);n=i}function s(){return n||(n=new m),n}const o=i=>{s().addBackend(i)};class m{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(l){}addEvent(l,d){this.buffer.push({event:l,meta:d})}}},12131:(Q,I,e)=>{"use strict";e.d(I,{K9:()=>i,Lc:()=>u,Ny:()=>d,SE:()=>l,vG:()=>c});var t=e(69235),n=e(76885),r=e(95344),s=e(91040),o=e(40621),m=e(32264);class i{constructor(p){this.history=p||t.zR({basename:m.$.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,b){const a=this.history.location,h=this.getSearchObject();for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete h[y]:h[y]=p[y];const P=n.kM.renderUrl(a.pathname,h);b?this.history.replace(P,this.history.location.state):this.history.push(P,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return l(this.history.location.search)}update(p){if((0,r.l)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const b={pathname:p.path};p.query&&(b.search=n.kM.toUrlParams(p.query)),p.replace?this.replace(b):this.push(b)}}}function l(E){let p=typeof E=="number"?String(E):E;return p.length>0?p.startsWith("?")?n.kM.parseKeyValue(p.substring(1)):n.kM.parseKeyValue(p):{}}let d=new i;const c=E=>{throw new Error("locationService can be only overriden in test environment")},g=(0,s.h)("Router"),u=g.logger;(0,o.h)("location",d,g)},23509:(Q,I,e)=>{"use strict";e.d(I,{T:()=>n,X:()=>r});let t;function n(s){t=s}function r(){return t}},63639:(Q,I,e)=>{"use strict";e.d(I,{HC:()=>n,XJ:()=>m,d:()=>r,pC:()=>o});let t;const n=i=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=i},r=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function o(i){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=i}function m(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},3591:(Q,I,e)=>{"use strict";e.d(I,{E8:()=>r,H8:()=>i,J7:()=>l,_:()=>n,ah:()=>o,sR:()=>s});var t=e(65463);class n extends t.a{static{this.type="refresh"}}class r extends t.x{static{this.type="theme-changed"}}class s extends t.x{static{this.type="time-range-updated"}}class o extends t.x{static{this.type="copy-panel"}}let m;function i(d){m=d}function l(){return m}},17172:(Q,I,e)=>{"use strict";e.d(I,{AI:()=>s,NF:()=>t,u5:()=>r});function t(o){return typeof o=="object"&&o!==null&&"status"in o&&"data"in o}let n;const r=o=>{n=o},s=()=>n},19347:(Q,I,e)=>{"use strict";e.d(I,{h:()=>n,l:()=>r});let t;function n(s){t=s}function r(){return t}},81634:(Q,I,e)=>{"use strict";e.d(I,{C:()=>r,j:()=>n});let t;const n=s=>{t=s},r=()=>t},78731:(Q,I,e)=>{"use strict";e.d(I,{Kh:()=>t.Kh,S8:()=>r,oF:()=>s});var t=e(9631);let n;const r=o=>{n=o},s=()=>n},4402:(Q,I,e)=>{"use strict";e.d(I,{Dp:()=>i,Kf:()=>m,O3:()=>o,cE:()=>r});var t=e(80882);let n;function r(l){if(n)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");n=l}function s(){if(!n)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return n}const o=l=>s()(l),m=l=>{const{extensions:d}=o(l);return{extensions:d.filter(t.D)}},i=l=>{const{extensions:d}=o(l);return{extensions:d.filter(t.a)}}},80882:(Q,I,e)=>{"use strict";e.d(I,{D:()=>n,a:()=>r});var t=e(74135);function n(s){return s?s.type===t.u.link&&("path"in s||"onClick"in s):!1}function r(s){return s?s.type===t.u.component&&"component"in s:!1}},72574:(Q,I,e)=>{"use strict";e.d(I,{d:()=>n,w:()=>r});let t;const n=s=>{t=s},r=()=>t},26657:(Q,I,e)=>{"use strict";e.d(I,{iy:()=>T,dR:()=>P,b1:()=>C,VQ:()=>f,s9:()=>y,ph:()=>O,x7:()=>M});var t=e(62467),n=e(75505),r=e(44240),s=e(63720),o=e(66847),m=e(40187),i=e(22391),l=e(55004),d=e(89667),c=e(92341),g=e(32264),u=e(19347),E=e(78731),p=e(17172),b=e(9631),a=e(47773);function h(S){const{intervalMs:v,maxDataPoints:x,requestId:A,panelId:R,queryCachingTTL:B,range:{from:U,to:w}}=S;if(!S.targets.length)return(0,t.of)({data:[]});const K={intervalMs:v,maxDataPoints:x,queryCachingTTL:B,timeRange:{from:U.valueOf().toString(),to:w.valueOf().toString(),timezone:S.timezone}};return(0,p.AI)().fetch({url:`/api/public/dashboards/${g.$.publicDashboardAccessToken}/panels/${R}/query`,method:"POST",data:K,requestId:A}).pipe((0,s.n)(N=>(0,t.of)((0,a.bE)(N,S.targets))),(0,o.W)(N=>(0,t.of)((0,a.bE)(N))))}const P=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function y(S){if(!S)return!1;const v=typeof S=="string"?S:S.type;return v===P.type||v===P.name||v==="-100"}class C extends Error{constructor(v,x){super(v),this.details=x,this.name="HealthCheckError"}}var f=(S=>(S.Unknown="UNKNOWN",S.OK="OK",S.Error="ERROR",S))(f||{}),D=(S=>(S.PluginID="X-Plugin-Id",S.DatasourceUID="X-Datasource-Uid",S.DashboardUID="X-Dashboard-Uid",S.PanelID="X-Panel-Id",S.PanelPluginId="X-Panel-Plugin-Id",S.QueryGroupID="X-Query-Group-Id",S.FromExpression="X-Grafana-From-Expr",S.SkipQueryCache="X-Cache-Skip",S))(D||{});class T extends m.mA{constructor(v){super(v),this.streamOptionsProvider=O}query(v){if(g.$.publicDashboardAccessToken)return h(v);const{intervalMs:x,maxDataPoints:A,queryCachingTTL:R,range:B,requestId:U,hideFromInspector:w=!1}=v;let K=v.targets,N=!1;const L=new Set,V=new Set,F=K.map(k=>{let ee=this.getRef(),ie=this.id,fe=!0;if(y(k.datasource))return N=!0,{...k,datasource:P};if(k.datasource){const q=(0,u.l)().getInstanceSettings(k.datasource,v.scopedVars);if(!q)throw new Error(`Unknown Datasource: ${JSON.stringify(k.datasource)}`);const Z=q.rawRef??(0,i.p$)(q),J=q.id;(Z.uid!==ee.uid||ie!==J)&&(ee=Z,ie=J,fe=!1)}return ee.type?.length&&L.add(ee.type),ee.uid?.length&&V.add(ee.uid),{...fe?this.applyTemplateVariables(k,v.scopedVars,v.filters):k,datasource:ee,datasourceId:ie,intervalMs:x,maxDataPoints:A,queryCachingTTL:R}});if(!F.length)return(0,t.of)({data:[]});const z={queries:F,from:B?.from.valueOf().toString(),to:B?.to.valueOf().toString()};if(g.$.featureToggles.queryOverLive)return(0,E.oF)().getQueryData({request:v,body:z});const Y={};Y["X-Plugin-Id"]=Array.from(L).join(", "),Y["X-Datasource-Uid"]=Array.from(V).join(", ");let H="/api/ds/query?ds_type="+this.type;return N&&(Y["X-Grafana-From-Expr"]="true",H+="&expression=true"),U&&(H+=`&requestId=${U}`),v.dashboardUID&&(Y["X-Dashboard-Uid"]=v.dashboardUID),v.panelId&&(Y["X-Panel-Id"]=`${v.panelId}`),v.panelPluginId&&(Y["X-Panel-Plugin-Id"]=`${v.panelPluginId}`),v.queryGroupId&&(Y["X-Query-Group-Id"]=`${v.queryGroupId}`),v.skipQueryCache&&(Y["X-Cache-Skip"]="true"),(0,p.AI)().fetch({url:H,method:"POST",data:z,requestId:U,hideFromInspector:w,headers:Y}).pipe((0,s.n)(k=>{const ee=(0,a.bE)(k,F);return ee.data?.length&&ee.data.find(ie=>ie.meta?.channel)?M(ee,v,this.streamOptionsProvider):(0,t.of)(ee)}),(0,o.W)(k=>(0,t.of)((0,a.bE)(k))))}getRequestHeaders(){const v={};return v["X-Plugin-Id"]=this.type,v["X-Datasource-Uid"]=this.uid,v}interpolateVariablesInQueries(v,x,A){return v.map(R=>this.applyTemplateVariables(R,x,A))}applyTemplateVariables(v,x,A){return v}async getResource(v,x,A){const R=this.getRequestHeaders();return(await(0,n.s)((0,p.AI)().fetch({...A,method:"GET",headers:A?.headers?{...A.headers,...R}:R,params:x??A?.params,url:`/api/datasources/uid/${this.uid}/resources/${v}`}))).data}async postResource(v,x,A){const R=this.getRequestHeaders();return(await(0,n.s)((0,p.AI)().fetch({...A,method:"POST",headers:A?.headers?{...A.headers,...R}:R,data:x??{...x},url:`/api/datasources/uid/${this.uid}/resources/${v}`}))).data}async callHealthCheck(){return(0,n.s)((0,p.AI)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(v=>v.data).catch(v=>v.data)}async testDatasource(){return this.callHealthCheck().then(v=>v.status==="OK"?{status:"success",message:v.message}:Promise.reject({status:"error",message:v.message,error:new C(v.message,v.details)}))}}function M(S,v,x){const A=(0,E.oF)();if(!A)return(0,t.of)(S);const R=[],B=[];for(const U of S.data){const w=(0,l.DG)(U.meta?.channel);if(w){const K=U;B.push(A.getDataStream({addr:w,buffer:x(v,K),frame:(0,d.Nw)(U)}))}else R.push(U)}return R.length&&B.push((0,t.of)({...S,data:R})),B.length===1?B[0]:(0,r.h)(...B)}const O=(S,v)=>{const x={maxLength:S.maxDataPoints??500,action:b.Kh.Append};return S.rangeRaw?.to==="now"&&(x.maxDelta=S.range.to.valueOf()-S.range.from.valueOf()),x};T=(0,c.Y)(T)},33378:(Q,I,e)=>{"use strict";e.d(I,{a:()=>n});var t=e(32264);const n=r=>{const{enabledFeatures:s}=t.$.licenseInfo;return s&&s[r]}},34867:(Q,I,e)=>{"use strict";e.d(I,{DW:()=>d,FF:()=>o,MD:()=>m,fH:()=>s,l$:()=>l,vV:()=>i});var t=e(32631),n=e(37930),r=e(32264);function s(c,g){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([c],{level:n.$b.INFO,context:g})}function o(c,g){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([c],{level:n.$b.WARN,context:g})}function m(c,g){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([c],{level:n.$b.DEBUG,context:g})}function i(c,g){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushError(c,{context:g})}function l(c,g,u){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushMeasurement({type:c,values:g,context:u})}function d(c,g){const u=E=>({source:c,...g,...E});return{logDebug:(E,p)=>m(E,u(p)),logInfo:(E,p)=>s(E,u(p)),logWarning:(E,p)=>o(E,u(p)),logError:(E,p)=>i(E,u(p)),logMeasurement:(E,p,b)=>l(E,p,u(b))}}},89191:(Q,I,e)=>{"use strict";e.d(I,{PL:()=>n,o:()=>o,se:()=>s});var t=e(32264);async function n(m){try{const i=t.$.bootData.user.theme==="light"?m.light:m.dark;return window.System.import(i)}catch(i){console.error(i)}}let r;function s(m){if(r)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");r=m}function o(){if(!r)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return r}},47773:(Q,I,e)=>{"use strict";e.d(I,{$h:()=>g,bE:()=>i});var t=e(39070),n=e(89667),r=e(14236),s=e(11261),o=e(12091);const m={severity:"info",text:"Cached response"};function i(u,E){const p={data:[],state:t.Gu.Done},b="traceId"in u?u.traceId:void 0;b!=null&&(p.traceIds=[b]);const a=u;if(a.data?.results){const h=a.data.results,P=E?.length?E.map(f=>f.refId):Object.keys(h),y=l(a),C=[];for(const f of P){const D=h[f];D&&(D.refId=f,C.push(D))}for(const f of C){if(f.error){const D={refId:f.refId,message:f.error,status:f.status};b!=null&&(D.traceId=b),p.error||(p.error={...D}),p.errors?p.errors.push({...D}):p.errors=[{...D}],p.state=t.Gu.Error}if(f.frames?.length){for(let D of f.frames){y&&(D=d(D));const T=(0,n.or)(D);T.refId||(T.refId=f.refId),p.data.push(T)}continue}if(f.series?.length)for(const D of f.series)D.refId||(D.refId=f.refId),p.data.push((0,r.Vc)(D));if(f.tables?.length)for(const D of f.tables)D.refId||(D.refId=f.refId),p.data.push((0,r.Vc)(D))}}return a.status&&a.status!==200&&(p.state!==t.Gu.Error&&(p.state=t.Gu.Error),p.error||(p.error=(0,o.u)(u))),p}function l(u){const E=u?.headers;return!E||!E.get?!1:E.get("X-Cache")==="HIT"}function d(u){return{...u,schema:{...u.schema,fields:[...u.schema?.fields??[]],meta:{...u.schema?.meta,notices:[...u.schema?.meta?.notices??[],m],isCachedResponse:!0}}}}function c(u){const E=i(u);if(E.error?.data?.message)return{status:"error",message:E.error.data.message,details:E.error?.data?.error?{message:E.error.data.error}:void 0};if(E.error?.refId&&E.error?.message)return{status:"error",message:E.error.message};throw u}function g(u){if(!u||!u.length)return[];const E=[];let p=u.fields.find(b=>b.type===s.PU.string);if(p||(p=u.fields.find(b=>b.type!==s.PU.time)),p)for(let b=0;b<p.values.length;b++)E.push({text:""+p.values[b]});return E}},14778:(Q,I,e)=>{"use strict";e.d(I,{_:()=>n,i:()=>r});let t;const n=s=>{t=s},r=()=>t?t():()=>console.error("ReturnToPrevious hook not found")},52622:(Q,I,e)=>{"use strict";e.d(I,{$N:()=>U,$l:()=>L,$m:()=>ee,$p:()=>A,D7:()=>l,F8:()=>R,GR:()=>E,J1:()=>i,L4:()=>a,Lt:()=>C,Ly:()=>T,NU:()=>p,Nj:()=>y,ON:()=>f,QH:()=>n,QR:()=>t,RU:()=>s,SV:()=>B,T6:()=>F,TZ:()=>V,WQ:()=>r,Wq:()=>Y,Y$:()=>g,aG:()=>m,dx:()=>b,eX:()=>N,fY:()=>ie,gs:()=>P,lm:()=>M,ob:()=>z,on:()=>h,qM:()=>k,q_:()=>o,uH:()=>d,vM:()=>c,vp:()=>Z,wV:()=>S,xB:()=>w,yL:()=>u,yp:()=>x,zT:()=>fe});var t=(J=>(J.AlertStates="alertStates",J.Annotations="annotations",J.Series="series",J))(t||{}),n=(J=>(J.Linear="linear",J.Quad="quad",J))(n||{}),r=(J=>(J.Clamped="clamped",J.Mod="mod",J))(r||{}),s=(J=>(J.Field="field",J.Fixed="fixed",J.Template="template",J))(s||{}),o=(J=>(J.Field="field",J.Fixed="fixed",J.Mapping="mapping",J))(o||{}),m=(J=>(J.Auto="auto",J.Coords="coords",J.Geohash="geohash",J.Lookup="lookup",J))(m||{}),i=(J=>(J.Count="count",J.Size="size",J))(i||{}),l=(J=>(J.auto="auto",J.ge="ge",J.le="le",J.unknown="unknown",J))(l||{}),d=(J=>(J.Ascending="Ascending",J.Descending="Descending",J))(d||{}),c=(J=>(J.Auto="auto",J.Bottom="bottom",J.Hidden="hidden",J.Left="left",J.Right="right",J.Top="top",J))(c||{}),g=(J=>(J.Series="series",J.Text="text",J))(g||{}),u=(J=>(J.Always="always",J.Auto="auto",J.Never="never",J))(u||{}),E=(J=>(J.Bars="bars",J.Line="line",J.Points="points",J))(E||{}),p=(J=>(J.Constant="constant",J.NegativeY="negative-Y",J))(p||{}),b=(J=>(J.Linear="linear",J.Smooth="smooth",J.StepAfter="stepAfter",J.StepBefore="stepBefore",J))(b||{}),a=(J=>(J.Linear="linear",J.Log="log",J.Ordinal="ordinal",J.Symlog="symlog",J))(a||{}),h=(J=>(J.Hue="hue",J.None="none",J.Opacity="opacity",J.Scheme="scheme",J))(h||{}),P=(J=>(J.None="none",J.Normal="normal",J.Percent="percent",J))(P||{}),y=(J=>(J[J.After=1]="After",J[J.Before=-1]="Before",J[J.Center=0]="Center",J))(y||{}),C=(J=>(J[J.Horizontal=0]="Horizontal",J[J.Vertical=1]="Vertical",J))(C||{}),f=(J=>(J[J.Down=-1]="Down",J[J.Left=-1]="Left",J[J.Right=1]="Right",J[J.Up=1]="Up",J))(f||{});const D={dash:[]};var T=(J=>(J.Area="area",J.Dashed="dashed",J.DashedAndArea="dashed+area",J.Line="line",J.LineAndArea="line+area",J.Off="off",J.Series="series",J))(T||{}),M=(J=>(J.Hidden="hidden",J.List="list",J.Table="table",J))(M||{});const O={calcs:[]};var S=(J=>(J.Auto="auto",J.Horizontal="horizontal",J.Vertical="vertical",J))(S||{});const v={timezone:[]};var x=(J=>(J.Background="background",J.BackgroundSolid="background_solid",J.None="none",J.Value="value",J))(x||{}),A=(J=>(J.Area="area",J.Line="line",J.None="none",J))(A||{}),R=(J=>(J.Auto="auto",J.Center="center",J))(R||{}),B=(J=>(J.Auto="auto",J.Name="name",J.None="none",J.Value="value",J.ValueAndName="value_and_name",J))(B||{}),U=(J=>(J.Multi="multi",J.None="none",J.Single="single",J))(U||{}),w=(J=>(J.Ascending="asc",J.Descending="desc",J.None="none",J))(w||{});const K={calcs:[]};var N=(J=>(J.Basic="basic",J.Gradient="gradient",J.Lcd="lcd",J))(N||{}),L=(J=>(J.Color="color",J.Hidden="hidden",J.Text="text",J))(L||{}),V=(J=>(J.Auto="auto",J.Left="left",J.Top="top",J))(V||{}),F=(J=>(J.Auto="auto",J.Manual="manual",J))(F||{}),z=(J=>(J.Auto="auto",J.BasicGauge="basic",J.ColorBackground="color-background",J.ColorBackgroundSolid="color-background-solid",J.ColorText="color-text",J.Custom="custom",J.DataLinks="data-links",J.Gauge="gauge",J.GradientGauge="gradient-gauge",J.Image="image",J.JSONView="json-view",J.LcdGauge="lcd-gauge",J.Sparkline="sparkline",J))(z||{}),Y=(J=>(J.Basic="basic",J.Gradient="gradient",J))(Y||{});const H={fields:[],reducer:[]};var k=(J=>(J.Lg="lg",J.Md="md",J.Sm="sm",J))(k||{}),ee=(J=>(J.CSV="csv",J.Date="date",J.Distributed="distributed",J.DoubleQuote="doublequote",J.Glob="glob",J.HTML="html",J.JSON="json",J.Lucene="lucene",J.PercentEncode="percentencode",J.Pipe="pipe",J.QueryParam="queryparam",J.Raw="raw",J.Regex="regex",J.SQLString="sqlstring",J.SingleQuote="singlequote",J.Text="text",J.UriEncode="uriencode",J))(ee||{}),ie=(J=>(J.exact="exact",J.none="none",J.numbers="numbers",J.signature="signature",J))(ie||{}),fe=(J=>(J.EQ="eq",J.GT="gt",J.GTE="gte",J.LT="lt",J.LTE="lte",J.NEQ="neq",J))(fe||{});const q={align:"auto",inspect:!1},Z="browser"},33623:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.0",r={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:t.wV.Auto,showValue:t.yL.Auto,stacking:t.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},16371:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.0",r={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},37827:(Q,I,e)=>{"use strict";e.d(I,{K:()=>n});const t="11.0.0",n={selectedSeries:0}},44955:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.0",r={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:t.T6.Auto}},87487:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>n});const t="11.0.0",n={layers:[]},r={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var s=(m=>(m.Details="details",m.None="none",m))(s||{}),o=(m=>(m.Coords="coords",m.Fit="fit",m.Zero="zero",m))(o||{})},96529:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>o});var t=e(52622);const n="11.0.0";var r=(m=>(m.Opacity="opacity",m.Scheme="scheme",m))(r||{}),s=(m=>(m.Exponential="exponential",m.Linear="linear",m))(s||{});const o={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}}},42226:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.0",r={bucketCount:30,bucketOffset:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},69383:(Q,I,e)=>{"use strict";e.d(I,{K:()=>n});const t="11.0.0",n={showImage:!0}},65391:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>m});const t="11.0.0";var n=(i=>(i.Donut="donut",i.Pie="pie",i))(n||{}),r=(i=>(i.Name="name",i.Percent="percent",i.Value="value",i))(r||{}),s=(i=>(i.Percent="percent",i.Value="value",i))(s||{});const o={values:[]},m={displayLabels:[]}},89607:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.0",r={colorMode:t.yp.Value,graphMode:t.$p.Area,justifyMode:t.F8.Auto,showPercentChange:!1,textMode:t.SV.Auto,wideLayout:!0}},15821:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.0",r={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:0}},64337:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.0",r={colWidth:.9,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:1}},52037:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.0",r={cellHeight:t.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},12183:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>m});const t="11.0.0";var n=(i=>(i.Code="code",i.HTML="html",i.Markdown="markdown",i))(n||{}),r=(i=>(i.Go="go",i.Html="html",i.Json="json",i.Markdown="markdown",i.Plaintext="plaintext",i.Sql="sql",i.Typescript="typescript",i.Xml="xml",i.Yaml="yaml",i))(r||{});const s="plaintext",o={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},m={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},10055:(Q,I,e)=>{"use strict";e.d(I,{KQ:()=>i,QB:()=>m});var t=e(52622);const n="11.0.0";var r=(l=>(l.Auto="auto",l.Manual="manual",l))(r||{}),s=(l=>(l.Lines="lines",l.Points="points",l.PointsAndLines="points+lines",l))(s||{});const o={exclude:[]},m={label:t.yL.Auto,show:"points"},i={series:[]}},73134:(Q,I,e)=>{"use strict";e.d(I,{CO:()=>m,GW:()=>T,OA:()=>y,Ol:()=>u,QB:()=>D,Ye:()=>M,ZG:()=>l,aD:()=>r,bf:()=>s,bt:()=>C,dM:()=>p,lt:()=>a,rw:()=>o,ss:()=>f,yV:()=>h});const t={tags:[]},n={exclude:!1,ids:[]},r={list:[]},s={builtIn:0,enable:!0,hide:!1},o={includeAll:!1,multi:!1,options:[],skipUrlSync:!1};var m=(O=>(O[O.never=0]="never",O[O.onDashboardLoad=1]="onDashboardLoad",O[O.onTimeRangeChanged=2]="onTimeRangeChanged",O))(m||{}),i=(O=>(O[O.dontHide=0]="dontHide",O[O.hideLabel=1]="hideLabel",O[O.hideVariable=2]="hideVariable",O))(i||{}),l=(O=>(O[O.alphabeticalAsc=1]="alphabeticalAsc",O[O.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",O[O.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",O[O.alphabeticalDesc=2]="alphabeticalDesc",O[O.disabled=0]="disabled",O[O.naturalAsc=7]="naturalAsc",O[O.naturalDesc=8]="naturalDesc",O[O.numericalAsc=3]="numericalAsc",O[O.numericalDesc=4]="numericalDesc",O))(l||{});const d={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var c=(O=>(O.ContinuousBlPu="continuous-BlPu",O.ContinuousBlYlRd="continuous-BlYlRd",O.ContinuousBlues="continuous-blues",O.ContinuousGrYlRd="continuous-GrYlRd",O.ContinuousGreens="continuous-greens",O.ContinuousPurples="continuous-purples",O.ContinuousRdYlGr="continuous-RdYlGr",O.ContinuousReds="continuous-reds",O.ContinuousYlBl="continuous-YlBl",O.ContinuousYlRd="continuous-YlRd",O.Fixed="fixed",O.PaletteClassic="palette-classic",O.PaletteClassicByName="palette-classic-by-name",O.Shades="shades",O.Thresholds="thresholds",O))(c||{});const g={h:9,w:12,x:0,y:0};var u=(O=>(O.Absolute="absolute",O.Percentage="percentage",O))(u||{});const E={steps:[]};var p=(O=>(O.RangeToText="range",O.RegexToText="regex",O.SpecialValue="special",O.ValueToText="value",O))(p||{}),b=(O=>(O.Empty="empty",O.False="false",O.NaN="nan",O.Null="null",O.NullAndNan="null+nan",O.True="true",O))(b||{});const a={hidden:!1,refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"]};var h=(O=>(O[O.Crosshair=1]="Crosshair",O[O.Off=0]="Off",O[O.Tooltip=2]="Tooltip",O))(h||{});const P=0,y={links:[],repeatDirection:"h",targets:[],transformations:[],transparent:!1},C={overrides:[]},f={id:""},D={links:[],mappings:[]},T={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},39651:(Q,I,e)=>{"use strict";e.d(I,{Gu:()=>r,gB:()=>n});var t=e(52622);const n={align:"auto",inspect:!1,cellOptions:{type:t.ob.Auto}};var r=(s=>(s.NotStarted="NotStarted",s.Loading="Loading",s.Streaming="Streaming",s.Done="Done",s.Error="Error",s))(r||{})},79422:(Q,I,e)=>{"use strict";e.d(I,{Ye:()=>r,lt:()=>o,rw:()=>s,zL:()=>n});var t=e(73134),n=(E=>(E[E.dontHide=0]="dontHide",E[E.hideLabel=1]="hideLabel",E[E.hideVariable=2]="hideVariable",E))(n||{});const r=t.Ye,s={...t.rw},o=t.lt,m=t.OA,i=t.GW,l=t.QB,d=t.bt,c=t.ss,g=t.bf,u=t.aD},11807:(Q,I,e)=>{"use strict";e.d(I,{l:()=>c});var t=e(32196),n=e(96540),r=e(73287),s=e(14110),o=e(40845),m=e(29158),i=e(88575),l=e(32372),d=e(94471);function c({rawSql:u,datasourceType:E}){const[p,b]=(0,r.A)(),a=(0,o.of)(g),h=y=>{b(y),(0,s.rR)("grafana_sql_preview_copied",{datasource:E})},P=n.createElement("div",{className:a.labelWrapper},n.createElement("span",{className:a.label},"Preview"),n.createElement(m.K,{tooltip:"Copy to clipboard",onClick:()=>h(u),name:"copy"}));return n.createElement(i.D,{label:P,className:a.grow},n.createElement(l.B,{language:"sql",height:80,value:(0,d.s)(u),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function g(u){return{grow:(0,t.css)({flexGrow:1}),label:(0,t.css)({fontSize:12,fontWeight:u.typography.fontWeightMedium}),labelWrapper:(0,t.css)({display:"flex",justifyContent:"space-between",paddingBottom:u.spacing(.5)})}}},94471:(Q,I,e)=>{"use strict";e.d(I,{s:()=>n});var t=e(27633);function n(r){return t.Ay.format(r).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,s=>s.replace(/\s/g,""))}},42418:(Q,I,e)=>{"use strict";e.d(I,{F:()=>d});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(55852),m=e(14578),i=e(90613),l=e(94753);const d=n.forwardRef(({title:u,onRemove:E,children:p,buttonContent:b,elevated:a,bottomSpacing:h,topSpacing:P,className:y,severity:C="error",...f},D)=>{const T=(0,s.$j)(),O=g(T,C,!!u,a,h,P),S={error:"alert",warning:"alert",info:"status",success:"status"},v=f.role||S[C],x=f["aria-label"]||u;return n.createElement("div",{ref:D,className:(0,t.cx)(O.wrapper,y),role:v,"aria-label":x,...f},n.createElement(i.a,{"data-testid":r.Tp.components.Alert.alertV2(C),display:"flex",backgroundColor:C,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:C,alignItems:"stretch",boxShadow:a?"z3":void 0},n.createElement(i.a,{paddingTop:1,paddingRight:2},n.createElement("div",{className:O.icon},n.createElement(m.I,{size:"xl",name:c(C)}))),n.createElement(i.a,{paddingY:1,grow:1},n.createElement(l.E,{color:"primary",weight:"medium"},u),p&&n.createElement("div",{className:O.content},p)),E&&!b&&n.createElement("div",{className:O.close},n.createElement(o.$n,{"aria-label":"Close alert",icon:"times",onClick:E,type:"button",fill:"text",variant:"secondary"})),E&&b&&n.createElement(i.a,{marginLeft:1,display:"flex",alignItems:"center"},n.createElement(o.$n,{"aria-label":"Close alert",variant:"secondary",onClick:E,type:"button"},b))))});d.displayName="Alert";const c=u=>{switch(u){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},g=(u,E,p,b,a,h)=>{const P=u.colors[E];return{wrapper:(0,t.css)({flexGrow:1,marginBottom:u.spacing(a??2),marginTop:u.spacing(h??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:u.colors.background.primary,zIndex:-1}}),icon:(0,t.css)({color:P.text}),content:(0,t.css)({color:u.colors.text.primary,paddingTop:p?u.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,t.css)({position:"relative",color:u.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},28270:(Q,I,e)=>{"use strict";e.d(I,{p:()=>E});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(88575),m=e(32982);const i=r.memo(()=>{const b=(0,s.of)(l);return r.createElement("div",{className:b.ellipsis},r.createElement("span",{className:b.firstDot},"."),r.createElement("span",{className:b.secondDot},"."),r.createElement("span",{className:b.thirdDot},"."))});i.displayName="EllipsisAnimated";const l=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${d} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${c} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${g} 2s linear infinite`})}),d=(0,t.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,g=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,u=2*1e3;function E(b){const{invalid:a,loading:h,onFinishChange:P,saveErrorMessage:y="Error saving this value",error:C,children:f,disabled:D,...T}=b,[M,O]=r.useState({isLoading:!1,showSuccess:!1,showError:a}),S=(0,r.useRef)(null);r.useEffect(()=>{let B;if(M.showSuccess){const U=M.showError?0:u;B=setTimeout(()=>{O({...M,showSuccess:!1})},U)}return()=>{window.clearTimeout(B)}},[M]);const v=(0,r.useCallback)(B=>{a||(O({...M,isLoading:!0,showSuccess:!1}),P(B).then(()=>{O({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{O({...M,isLoading:!1,showError:!0})}))},[a,M,P]),x=(0,r.useMemo)(()=>(0,n.debounce)(v,600,{leading:!1}),[v]),A=a||M.showError||void 0,R=(0,s.of)(p);return r.createElement(r.Fragment,null,r.createElement(o.D,{...T,loading:h||void 0,invalid:A,disabled:D,error:C||M.showError&&y,ref:S,className:R.widthFitContent},r.cloneElement(f(B=>{x(B)}))),M.isLoading&&r.createElement(m.r,{referenceElement:S.current,placement:"right"},"Saving ",r.createElement(i,null)),M.showSuccess&&r.createElement(m.r,{suffixIcon:"check",referenceElement:S.current,placement:"right"},"Saved!"))}E.displayName="AutoSaveField";const p=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},39938:(Q,I,e)=>{"use strict";e.d(I,{E:()=>g});var t=e(32196),n=e(96540),r=e(70255),s=e(84140),o=e(40845),m=e(72129),i=e(14578),l=e(56034);const d=n.memo(({icon:p,color:b,text:a,tooltip:h,className:P,...y})=>{const C=(0,o.of)(E,b),f=n.createElement("div",{className:(0,t.cx)(C.wrapper,P),...y},p&&n.createElement(i.I,{name:p,size:"sm"}),a);return h?n.createElement(l.m,{content:h,placement:"auto"},f):f});d.displayName="Badge";const c=({rootProps:p})=>{const b=(0,o.of)(u);return n.createElement(r.A,{width:60,height:22,containerClassName:b.container,...p})},g=(0,m.j)(d,c),u=()=>({container:(0,t.css)({lineHeight:1})}),E=(p,b)=>{let a=p.visualization.getColorByName(b),h="",P="",y="";return p.isDark?(P=(0,s.A)(a).setAlpha(.15).toString(),h=(0,s.A)(a).setAlpha(.25).toString(),y=(0,s.A)(a).lighten(15).toString()):(P=(0,s.A)(a).setAlpha(.15).toString(),h=(0,s.A)(a).setAlpha(.25).toString(),y=(0,s.A)(a).darken(20).toString()),{wrapper:(0,t.css)({display:"inline-flex",padding:"1px 4px",borderRadius:p.shape.radius.default,background:P,border:`1px solid ${h}`,color:y,fontWeight:p.typography.fontWeightRegular,gap:"2px",fontSize:p.typography.bodySmall.fontSize,lineHeight:p.typography.bodySmall.lineHeight,alignItems:"center"})}}},97696:(Q,I,e)=>{"use strict";e.d(I,{xE:()=>f});var t=e(32196),n=e(96540),r=e(84140),s=e(47070),o=e(50082),m=e(58649),i=e(83195),l=e(24293),d=e(8066),c=e(13544),g=e(52622),u=e(29413),E=e(55852),p=e(9286);const b=18,a=50,h=150,P=1.5,y=1,C=10;class f extends n.PureComponent{static{this.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:g.eX.Gradient,orientation:s.wV.Horizontal,field:{min:0,max:100,thresholds:{mode:o.O.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0}}render(){const{onClick:w,className:K,theme:N}=this.props,{title:L}=this.props.value,V=M(this.props);return w?n.createElement("button",{type:"button",style:V.wrapper,onClick:w,className:(0,t.cx)((0,E.my)(N),K)},n.createElement("div",{style:V.title},L),this.renderBarAndValue()):n.createElement("div",{style:V.wrapper,className:K},L&&n.createElement("div",{style:V.title},L),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:w,showUnfilled:K,valueDisplayMode:N}=this.props,L=x(this.props);return n.createElement("div",{style:L.wrapper},N!==g.$l.Hidden&&n.createElement(p.i,{"data-testid":c.Tp.components.Panels.Visualization.BarGauge.valueV2,value:w,style:L.value}),K&&n.createElement("div",{style:L.emptyBar}),n.createElement("div",{style:L.bar}))}renderRetroBars(){const{display:w,field:K,value:N,itemSpacing:L,alignmentFactors:V,orientation:F,lcdCellWidth:z,text:Y,valueDisplayMode:H,theme:k}=this.props,{valueHeight:ee,valueWidth:ie,maxBarHeight:fe,maxBarWidth:q,wrapperWidth:Z,wrapperHeight:J}=O(this.props),G=K.min??m.tw,ne=K.max??m.d1,te=D(F),oe=ne-G,le=te?fe:q,ue=L,Te=Math.floor(le/z),he=Math.floor((le-ue*Te)/Te),re=R(this.props),Fe=B(V||N,re,ie,ee,F,Y),Ee={width:`${Z}px`,height:`${J}px`,display:"flex"};te?(Ee.flexDirection="column-reverse",Ee.alignItems="center"):(Ee.flexDirection="row",Ee.alignItems="center",Fe.justifyContent="flex-end");const Me=[];for(let ze=0;ze<Te;ze++){const xe=G+oe/Te*ze,We=S(xe,N,w),be={borderRadius:k.shape.radius.default};We.isLit?be.backgroundImage=`radial-gradient(${We.background} 10%, ${We.backgroundShade})`:be.backgroundColor=We.background,te?(be.height=`${he}px`,be.width=`${q}px`,be.marginTop=`${ue}px`):(be.width=`${he}px`,be.height=`${fe}px`,be.marginRight=`${ue}px`),Me.push(n.createElement("div",{key:ze.toString(),style:be}))}return n.createElement("div",{style:Ee},Me,H!==g.$l.Hidden&&n.createElement(p.i,{"data-testid":c.Tp.components.Panels.Visualization.BarGauge.valueV2,value:N,style:Fe}))}}function D(U){return U===s.wV.Vertical}function T(U){const{height:w,width:K,alignmentFactors:N,orientation:L,text:V,namePlacement:F}=U,z=N?N.title:U.value.title;if(!z)return{fontSize:0,width:0,height:0,placement:"above"};if(D(L)){const q=V?.titleSize??14;return{fontSize:q,width:K,height:q*P,placement:"below"}}if(w>40&&F===g.TZ.Auto||F===g.TZ.Top){if(V?.titleSize)return{fontSize:V?.titleSize,width:0,height:V.titleSize*P,placement:"above"};const Z=Math.max(Math.min(w*.45,a),17);return{fontSize:Z/P,width:0,height:Z,placement:"above"}}const ee=Math.max(w*.6,b)/P,ie=(0,u.kD)(z,ee),fe=Math.min(ie.width+15,K*.4);return{fontSize:V?.titleSize??ee,height:0,width:fe,placement:"left"}}function M(U){const w={display:"flex",overflow:"hidden",width:"100%"},K=T(U),N={fontSize:`${K.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(U.orientation)?(w.flexDirection="column-reverse",N.textAlign="center"):K.placement==="above"?w.flexDirection="column":(w.flexDirection="row",N.width=`${K.width}px`,N.textAlign="right",N.paddingRight="10px"),{wrapper:w,title:N}}function O(U){const{height:w,width:K,orientation:N,text:L,alignmentFactors:V,valueDisplayMode:F}=U,z=T(U),Y=V??U.value,H=(0,i.cN)(Y);let k=0,ee=0,ie=0,fe=0,q=0,Z=0;const J=L?.valueSize??Math.max(z.fontSize,12),ne=(0,u.kD)(H,J).width+C*2;return D(N)?(L?.valueSize?ie=L.valueSize*y:ie=Math.min(Math.max(w*.1,b),a),fe=K,F===g.$l.Hidden&&(ie=0,fe=0),k=w-(z.height+ie),ee=K,q=K,Z=w-z.height):(F===g.$l.Hidden?(ie=0,fe=0):(ie=w-z.height,fe=Math.max(Math.min(K*.2,h),ne)),k=w-z.height,ee=K-fe-z.width,z.placement==="above"?(q=K,Z=w-z.height):(q=K-z.width,Z=w)),{valueWidth:fe,valueHeight:ie,maxBarWidth:ee,maxBarHeight:k,wrapperHeight:Z,wrapperWidth:q}}function S(U,w,K){if(U===null)return{background:l.F,border:l.F};const N=K?K(U).color:null;return N?w===null||isNaN(w.numeric)||U!==null&&U>w.numeric?{background:(0,r.A)(N).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,r.A)(N).setAlpha(.95).toRgbString(),backgroundShade:(0,r.A)(N).setAlpha(.55).toRgbString(),border:(0,r.A)(N).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.F,border:l.F}}function v(U,w,K){const N=Math.min((U-w)/(K-w),1);return isNaN(N)?0:N}function x(U){const{displayMode:w,field:K,value:N,alignmentFactors:L,orientation:V,theme:F,text:z}=U,{valueWidth:Y,valueHeight:H,maxBarHeight:k,maxBarWidth:ee}=O(U),ie=K.min??m.tw,fe=K.max??m.d1,q=v(N.numeric,ie,fe),Z=R(U),J=N.color??l.F,ne=B(L||N,Z,Y,H,V,z),te=w==="basic",oe={display:"flex",flexGrow:1},le={borderRadius:F.shape.radius.default,position:"relative",zIndex:1},ue={background:F.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:F.shape.radius.default,position:"relative"};if(D(V)){const Te=Math.max(q*k,1);oe.flexDirection="column",oe.justifyContent="flex-end",le.transition="height 1s",le.height=`${Te}px`,le.width=`${ee}px`,ue.bottom="-3px",ue.width=`${Y}px`,te?(le.background=`${(0,r.A)(J).setAlpha(.35).toRgbString()}`,le.borderTop=`2px solid ${J}`):le.background=A(U,k)}else{const Te=Math.max(q*ee,1);oe.flexDirection="row-reverse",oe.justifyContent="flex-end",oe.alignItems="stretch",le.transition="width 1s",le.height=`${k}px`,le.width=`${Te}px`,ue.left="-3px",ue.height=`${H}px`,te?(le.background=`${(0,r.A)(J).setAlpha(.35).toRgbString()}`,le.borderRight=`2px solid ${J}`):le.background=A(U,ee)}return{wrapper:oe,bar:le,value:ne,emptyBar:ue}}function A(U,w){const{field:K,value:N,orientation:L,theme:V}=U,F=D(L)?"0deg":"90deg",z=K.min,Y=K.max;let H="",k=0,ee=(0,d.Hs)(K.color?.mode);if(ee.id===l.Y.Thresholds){const ie=K.thresholds;for(let fe=0;fe<ie.steps.length;fe++){const q=ie.steps[fe],Z=U.theme.visualization.getColorByName(q.color),J=ie.mode===o.O.Percentage?q.value/100:v(q.value,z,Y),G=J*w,ne=Math.round(G-(G-k)/2),te=ie.mode===o.O.Percentage?z+(Y-z)*J:q.value;if(H==="")H=`linear-gradient(${F}, ${Z}, ${Z}`;else{if(N.numeric<te)break;k=G,H+=` ${ne}px, ${Z}`}}return H+")"}if(ee.isContinuous&&ee.getColors){const ie=ee.getColors(V);for(let fe=0;fe<ie.length;fe++){const q=ie[fe];if(H==="")H=`linear-gradient(${F}, ${q} 0px`;else{const J=fe/(ie.length-1)*w;H+=`, ${q} ${J}px`}}return H+")"}return N.color??l.F}function R(U){if(U.valueDisplayMode==="text")return U.theme.colors.text.primary;const{value:w}=U;return w.color?w.color:l.F}function B(U,w,K,N,L,V){const F={color:w,height:`${N}px`,width:`${K}px`,display:"flex",alignItems:"center",lineHeight:y};let z=K;const Y=(0,i.cN)(U);return D(L)?(F.fontSize=V?.valueSize??(0,u.Vr)(Y,z,N,y),F.justifyContent="center"):(F.fontSize=V?.valueSize??(0,u.Vr)(Y,z-C*2,N,y),F.justifyContent="flex-end",F.paddingLeft=`${C}px`,F.paddingRight=`${C}px`,z-=C),F}},37494:(Q,I,e)=>{"use strict";e.d(I,{yV:()=>R,yp:()=>S,$p:()=>v,F8:()=>x,SV:()=>A});var t=e(32196),n=e(96540),r=e(55852),s=e(9286),o=e(84140),m=e(11261),i=e(83195),l=e(52622),d=e(24284),c=e(29413),g=e(5926),u=e(14578);const E=({percentChange:B,styles:U})=>{const w=B&&(B>0?"arrow-up":B<0?"arrow-down":void 0);return n.createElement("div",{style:U.containerStyles},w&&n.createElement(u.I,{name:w,height:U.iconSize,width:U.iconSize,viewBox:"6 6 12 12"}),p(B))},p=B=>B?.toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3})??"",b=1.2,a=30,h=500;class P{constructor(U){this.props=U;const{width:w,height:K,value:N,text:L}=U;this.valueColor=N.color??"gray",this.panelPadding=K>100?12:8,this.textValues=O(U),this.justifyCenter=M(U.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=w-this.panelPadding*2,this.maxTextHeight=K-this.panelPadding*2,L&&(L.titleSize&&(this.titleFontSize=L.titleSize,this.titleToAlignTo=void 0),L.valueSize&&(this.valueFontSize=L.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const U={fontSize:`${this.titleFontSize}px`,lineHeight:b};return(this.props.colorMode===S.Background||this.props.colorMode===S.BackgroundSolid)&&(U.color=(0,d.mZ)(this.valueColor,this.props.theme.isDark)),U}getValueStyles(){const U={fontSize:this.valueFontSize,fontWeight:h,lineHeight:b,position:"relative",zIndex:1};switch(this.justifyCenter&&(U.textAlign="center"),this.props.colorMode){case S.Value:U.color=this.valueColor;break;case S.Background:case S.BackgroundSolid:U.color=(0,d.mZ)(this.valueColor,this.props.theme.isDark);break;case S.None:U.color=this.props.theme.colors.text.primary;break}return U}getPercentChangeStyles(U){const K=this.getValueAndTitleContainerStyles(),N=Math.max(this.valueFontSize/2.5,12);let L=Math.max(this.valueFontSize/3,10);const V=U>0?this.props.theme.visualization.getColorByName("green"):this.props.theme.visualization.getColorByName("red"),F={fontSize:N,fontWeight:h,lineHeight:b,position:"relative",display:"flex",alignItems:"center",gap:Math.max(N/3,4),zIndex:1,color:V};switch(this.justifyCenter&&(F.textAlign="center"),K.flexDirection==="column"&&N>12&&(F.marginTop=-(N/4)),K.flexDirection==="row"&&(F.alignItems="baseline",F.lineHeight=b*2.5),this.props.colorMode){case S.Background:case S.BackgroundSolid:F.color=(0,d.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===A.None&&(F.fontSize=(0,c.Vr)(p(U),this.maxTextWidth*.8,this.maxTextHeight*.8,b,void 0,h),L=F.fontSize*.8),{containerStyles:F,iconSize:L}}getValueAndTitleContainerStyles(){const U={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(U.alignItems="center",U.justifyContent="center",U.flexGrow=1,U.gap="0.75ch"),U}getPanelStyles(){const{width:U,height:w,theme:K,colorMode:N,textMode:L}=this.props,V={width:`${U}px`,height:`${w}px`,padding:`${L===A.None?2:this.panelPadding}px`,borderRadius:K.shape.radius.default,position:"relative",display:"flex"},F=K.isDark?1:-.7;switch(N){case S.Background:const z=(0,o.A)(this.valueColor).darken(15*F).spin(8).toRgbString(),Y=(0,o.A)(this.valueColor).darken(5*F).spin(-8).toRgbString();V.background=`linear-gradient(120deg, ${z}, ${Y})`;break;case S.BackgroundSolid:V.background=(0,o.A)(this.valueColor).toString();break;case S.Value:V.background="transparent";break}return this.justifyCenter&&(V.alignItems="center",V.flexDirection="row"),V}renderChart(){const{sparkline:U,colorMode:w}=this.props;if(!U||U.y?.type!==m.PU.number)return null;let K,N;switch(w){case S.Background:case S.BackgroundSolid:K="rgba(255,255,255,0.4)",N=(0,o.A)(this.valueColor).brighten(40).toRgbString();break;case S.None:case S.Value:default:N=this.valueColor,K=(0,o.A)(this.valueColor).setAlpha(.2).toRgbString();break}const L={custom:{drawStyle:l.GR.Line,lineWidth:1,fillColor:K,lineColor:N}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(g.O,{height:this.chartHeight,width:this.chartWidth,sparkline:U,config:L,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class y extends P{constructor(U){super(U);const w=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,c.Vr)(this.valueToAlignTo,this.maxTextWidth*w,this.maxTextHeight,b,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,b,a),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="row",U.alignItems="center",U.flexGrow=1,this.justifyCenter||(U.justifyContent="space-between"),U}renderChart(){return null}getPanelStyles(){const U=super.getPanelStyles();return U.alignItems="center",U}}class C extends P{constructor(U){super(U);const{width:w,height:K}=U,N=.5,L=.6,V=1-L,F=.4;this.chartWidth=w,this.chartHeight=K*N,this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.Vr)(this.titleToAlignTo,this.maxTextWidth*L,this.maxTextHeight*F,b,a)),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.Vr)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*N,b,void 0,h))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="row",U.flexGrow=1,this.justifyCenter||(U.justifyContent="space-between"),U}getPanelStyles(){const U=super.getPanelStyles();return U.flexDirection="row",U.justifyContent="space-between",U}}class f extends P{constructor(U){super(U);const{width:w,height:K}=U,N=.15,L=.25;let V=0;this.chartHeight=K*L,this.chartWidth=w,this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.Vr)(this.titleToAlignTo,this.maxTextWidth,K*N,b,a),V=this.titleFontSize*b),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,b,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=K-this.titleFontSize*b-this.valueFontSize*b}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="column",U.justifyContent="center",U}getPanelStyles(){const U=super.getPanelStyles();return U.flexDirection="column",U}}class D extends P{constructor(U){super(U);const{height:w}=U,K=.15;let N=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.Vr)(this.titleToAlignTo,this.maxTextWidth,w*K,b,a),N=this.titleFontSize*b),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-N,b,void 0,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="column",U.flexGrow=1,U}renderChart(){return null}getPanelStyles(){const U=super.getPanelStyles();return U.alignItems="center",U}}function T(B){const{width:U,height:w,sparkline:K}=B;return U/w>2.5&&!B.disableWideLayout?w>50&&K&&K.y.values.length>1?new C(B):new y(B):w>100&&K&&K.y.values.length>1?new f(B):new D(B)}function M(B,U){return B===x.Center?!0:(U??"").length===0}function O(B){const{value:U,alignmentFactors:w,count:K}=B;let{textMode:N}=B;const L=w?w.title:U.title,V=(0,i.cN)(w||U);switch(N===A.Auto&&(K??1)===1&&(N=A.Value),N){case A.Name:return{...U,title:void 0,prefix:void 0,suffix:void 0,text:U.title||"",titleToAlignTo:void 0,valueToAlignTo:L??"",tooltip:(0,i.cN)(U)};case A.Value:return{...U,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:U.title};case A.None:return{numeric:U.numeric,color:U.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${U.title}
Value: ${(0,i.cN)(U)}`};case A.ValueAndName:default:return{...U,titleToAlignTo:L,valueToAlignTo:V}}}var S=(B=>(B.Background="background",B.BackgroundSolid="background_solid",B.None="none",B.Value="value",B))(S||{}),v=(B=>(B.None="none",B.Line="line",B.Area="area",B))(v||{}),x=(B=>(B.Auto="auto",B.Center="center",B))(x||{}),A=(B=>(B.Auto="auto",B.Value="value",B.ValueAndName="value_and_name",B.Name="name",B.None="none",B))(A||{});class R extends n.PureComponent{static{this.defaultProps={justifyMode:"auto"}}render(){const{onClick:U,className:w,hasLinks:K,theme:N}=this.props,L=T(this.props),V=L.getPanelStyles(),F=L.getValueAndTitleContainerStyles(),z=L.getValueStyles(),Y=L.getTitleStyles(),H=L.textValues,k=this.props.value.percentChange,ee=k!=null&&!Number.isNaN(k),ie=K?void 0:H.tooltip;return U?n.createElement("button",{type:"button",className:(0,t.cx)((0,r.my)(N),w),style:V,onClick:U,title:ie},n.createElement("div",{style:F},H.title&&n.createElement("div",{style:Y},H.title),n.createElement(s.i,{value:H,style:z})),L.renderChart()):n.createElement("div",{className:w,style:V,title:ie},n.createElement("div",{style:F},H.title&&n.createElement("div",{style:Y},H.title),n.createElement(s.i,{value:H,style:z}),ee&&n.createElement(E,{percentChange:k,styles:L.getPercentChangeStyles(k)})),L.renderChart())}}},54438:(Q,I,e)=>{"use strict";e.d(I,{J:()=>i});var t=e(32196),n=e(96540),r=e(23257),s=e.n(r),o=e(40845),m=e(5313);const i=(0,n.forwardRef)(({name:d,value:c,hidden:g,facets:u,onClick:E,className:p,loading:b,searchTerm:a,active:h,style:P,title:y,highlightParts:C,...f},D)=>{const T=(0,o.$j)(),M=l(T),O=a?[a]:[],S=(0,n.useCallback)(x=>{E&&!g&&E(d,c,x)},[E,d,g,c]);let v=c||d;return u&&(v=`${v} (${u})`),n.createElement("button",{key:v,ref:D,onClick:S,style:P,title:y||v,type:"button",role:"option","aria-selected":!!h,className:(0,t.cx)(M.base,h&&M.active,b&&M.loading,g&&M.hidden,p,E&&!g&&M.hover),...f},C!==void 0?n.createElement(m.z,{text:v,highlightClassName:M.matchHighLight,highlightParts:C}):n.createElement(s(),{textToHighlight:v,searchWords:O,autoEscape:!0,highlightClassName:M.matchHighLight}))});i.displayName="Label";const l=d=>({base:(0,t.css)({display:"inline-block",cursor:"pointer",fontSize:d.typography.size.sm,lineHeight:d.typography.bodySmall.lineHeight,backgroundColor:d.colors.background.secondary,color:d.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:d.spacing(.5),borderRadius:d.shape.radius.default,border:"none",marginRight:d.spacing(1),marginBottom:d.spacing(.5)}),loading:(0,t.css)({fontWeight:d.typography.fontWeightMedium,backgroundColor:d.colors.primary.shade,color:d.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:d.colors.text.primary},"50%":{color:d.colors.text.secondary},"100%":{color:d.colors.text.disabled}}}),active:(0,t.css)({fontWeight:d.typography.fontWeightMedium,backgroundColor:d.colors.primary.main,color:d.colors.primary.contrastText}),matchHighLight:(0,t.css)({background:"inherit",color:d.components.textHighlight.text,backgroundColor:d.components.textHighlight.background}),hidden:(0,t.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})})},55852:(Q,I,e)=>{"use strict";e.d(I,{$n:()=>c,Ez:()=>h,U_:()=>b,hs:()=>u,my:()=>a,z9:()=>g});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(87266),m=e(14578),i=e(56034);const l=null,d=null,c=n.forwardRef(({variant:P="primary",size:y="md",fill:C="solid",icon:f,fullWidth:D,children:T,className:M,type:O="button",tooltip:S,tooltipPlacement:v,...x},A)=>{const R=(0,r.$j)(),B=u({theme:R,size:y,variant:P,fill:C,fullWidth:D,iconOnly:!T}),U=n.createElement("button",{className:(0,t.cx)(B.button,M),type:O,...x,ref:S?void 0:A},f&&n.createElement(m.I,{name:f,size:y,className:B.icon}),T&&n.createElement("span",{className:B.content},T));return S?n.createElement(i.m,{ref:A,content:S,placement:v},U):U});c.displayName="Button";const g=n.forwardRef(({variant:P="primary",size:y="md",fill:C="solid",icon:f,fullWidth:D,children:T,className:M,onBlur:O,onFocus:S,disabled:v,tooltip:x,tooltipPlacement:A,...R},B)=>{const U=(0,r.$j)(),w=u({theme:U,fullWidth:D,size:y,variant:P,fill:C,iconOnly:!T}),K=(0,t.cx)(w.button,{[(0,t.css)(w.disabled,{pointerEvents:"none"})]:v},M),N=n.createElement("a",{className:K,...R,tabIndex:v?-1:0,"aria-disabled":v,ref:x?void 0:B},f&&n.createElement(m.I,{name:f,size:y,className:w.icon}),T&&n.createElement("span",{className:w.content},T));return x?n.createElement(i.m,{ref:B,content:x,placement:A},N):N});g.displayName="LinkButton";const u=P=>{const{theme:y,variant:C,fill:f="solid",size:D,iconOnly:T,fullWidth:M}=P,{height:O,padding:S,fontSize:v}=(0,o.SM)(D,y),x=b(y,C,f),A=p(y,C,f),R=(0,s.getFocusStyles)(y),B=y.spacing.gridSize*S-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:v,fontWeight:y.typography.fontWeightMedium,fontFamily:y.typography.fontFamily,padding:`0 ${B}px`,height:y.spacing(O),lineHeight:`${y.spacing.gridSize*O-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:y.shape.radius.default,"&:focus":R,"&:focus-visible":R,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(y),...M&&{flexGrow:1,justifyContent:"center"},...x,":disabled":A,"&[disabled]":A}),disabled:(0,t.css)(A),img:(0,t.css)({width:"16px",height:"16px",margin:y.spacing(0,1,0,.5)}),icon:T?(0,t.css)({marginRight:y.spacing(-S/2),marginLeft:y.spacing(-S/2)}):(0,t.css)({marginRight:y.spacing(S/2)}),content:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function E(P,y,C){let f=y.border,D="transparent",T="transparent";return y.name==="secondary"&&(D=y.border,T=P.colors.emphasize(y.border,.25),f=P.colors.border.strong),C==="outline"?{background:"transparent",color:y.text,border:`1px solid ${f}`,transition:P.transitions.create(["background-color","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:y.transparent,borderColor:P.colors.emphasize(f,.25),color:y.text}}:C==="text"?{background:"transparent",color:y.text,border:"1px solid transparent",transition:P.transitions.create(["background-color","color"],{duration:P.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:y.transparent,textDecoration:"none"}}:{background:y.main,color:y.contrastText,border:`1px solid ${D}`,transition:P.transitions.create(["background-color","box-shadow","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:y.shade,color:y.contrastText,boxShadow:P.shadows.z1,borderColor:T}}}function p(P,y,C){const f={cursor:"not-allowed",boxShadow:"none",color:P.colors.text.disabled,transition:"none"};return C==="text"?{...f,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...f,background:"transparent",border:`1px solid ${P.colors.border.weak}`}:{...f,background:P.colors.action.disabledBackground,border:"1px solid transparent"}}function b(P,y,C){switch(y){case"secondary":return E(P,P.colors.secondary,C);case"destructive":return E(P,P.colors.error,C);case"success":return E(P,P.colors.success,C);case"primary":default:return E(P,P.colors.primary,C)}}const a=P=>(0,t.css)({background:"transparent",color:P.colors.text.primary,border:"none",padding:0}),h=P=>(0,t.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},19727:(Q,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=(0,n.forwardRef)(({className:m,children:i,...l},d)=>{const c=(0,r.of)(o);return n.createElement("div",{ref:d,className:(0,t.cx)("button-group",c.wrapper,m),...l},i)});s.displayName="ButtonGroup";const o=m=>({wrapper:(0,t.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},61458:(Q,I,e)=>{"use strict";e.d(I,{V:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({className:m,children:i})=>{const l=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(l,m)},i)},o=()=>(0,t.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}})},32012:(Q,I,e)=>{"use strict";e.d(I,{H:()=>l});var t=e(32196),n=e(43546),r=e(96540),s=e(40845),o=e(55852),m=e(58898),i=e(14578);const l=c=>{const{onChange:g,className:u,loadData:E,icon:p,buttonProps:b,hideDownIcon:a,variant:h,disabled:P,...y}=c,C=(0,s.of)(d);let f=c.children;return a||(f=[c.children,r.createElement(i.I,{key:"down-icon",name:"angle-down",className:C.icons.right})]),r.createElement(n.A,{onChange:(0,m.k)(g),loadData:(0,m.W)(E),dropdownClassName:C.popup,...y,expandIcon:null},r.createElement(o.$n,{icon:p,disabled:P,variant:h,...b??{}},f))};l.displayName="ButtonCascader";const d=c=>({popup:(0,t.css)({label:"popup",zIndex:c.zIndex.dropdown}),icons:{right:(0,t.css)({margin:"1px 0 0 4px"}),left:(0,t.css)({margin:"-1px 4px 0 0"})}})},76442:(Q,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({message:m,callToActionElement:i,footer:l,className:d})=>{const c=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)([c.wrapper,d])},m&&n.createElement("div",{className:c.message},m),i,l&&n.createElement("div",{className:c.footer},l))},o=m=>({wrapper:(0,t.css)({label:"call-to-action-card",background:m.colors.background.secondary,borderRadius:m.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:m.spacing(3),[m.breakpoints.down("sm")]:{padding:m.spacing(3,1)}}),message:(0,t.css)({marginBottom:m.spacing(3),fontStyle:"italic"}),footer:(0,t.css)({marginTop:m.spacing(3)})})},10860:(Q,I,e)=>{"use strict";e.d(I,{H:()=>D,Z:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(81507);const m=n.createContext(null),i=({disabled:T,href:M,onClick:O,children:S,isSelected:v,isCompact:x,className:A,...R})=>{const B=(0,n.useMemo)(()=>n.Children.toArray(S).some(N=>n.isValidElement(N)&&N.type===l),[S]),U=T||!O&&!M,w=O&&!T?O:void 0,K=(0,r.of)(o.i,T,U,v,x);return n.createElement(o.Q,{disableEvents:T,disableHover:U,isSelected:v,className:(0,t.cx)(K.container,A),...R},n.createElement(m.Provider,{value:{href:M,onClick:w,disabled:T,isSelected:v}},!B&&n.createElement(l,null),S))},l=({children:T,className:M,"aria-label":O})=>{const S=(0,n.useContext)(m),v=(0,r.of)(d),{href:x,onClick:A,isSelected:R}=S??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(v.heading,M)},x?n.createElement("a",{href:x,className:v.linkHack,"aria-label":O,onClick:A},T):A?n.createElement("button",{onClick:A,className:v.linkHack,"aria-label":O,type:"button"},T):n.createElement(n.Fragment,null,T),R!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",checked:R,readOnly:!0}))};l.displayName="Heading";const d=T=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:T.typography.size.md,letterSpacing:"inherit",lineHeight:T.typography.body.lineHeight,color:T.colors.text.primary,fontWeight:T.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:T.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(T),zIndex:1}}})}),c=({children:T,className:M})=>{const O=(0,r.of)(g);return n.createElement("div",{className:(0,t.cx)(O.tagList,M)},T)};c.displayName="Tags";const g=T=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),u=({children:T,className:M})=>{const O=(0,r.of)(E);return n.createElement("p",{className:(0,t.cx)(O.description,M)},T)};u.displayName="Description";const E=T=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:T.spacing(1,0,0),color:T.colors.text.secondary,lineHeight:T.typography.body.lineHeight})}),p=({children:T,align:M="start",className:O})=>{const S=(0,r.of)(b);return n.createElement("div",{className:(0,t.cx)(S.media,O,(0,t.css)({alignSelf:M}))},T)};p.displayName="Figure";const b=T=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:T.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),a=(0,n.memo)(({children:T,className:M,separator:O="|"})=>{const S=(0,r.of)(h);let v=T;const x=n.Children.toArray(T).filter(Boolean);return x.length?(v=x.map((A,R)=>n.createElement("div",{key:`element_${R}`,className:S.metadataItem},A)),x.length>1&&O&&(v=x.reduce((A,R,B)=>[A,n.createElement("span",{key:`separator_${B}`,className:S.separator},O),R])),n.createElement("div",{className:(0,t.cx)(S.metadata,M)},v)):null});a.displayName="Meta";const h=T=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:T.typography.size.sm,color:T.colors.text.secondary,margin:T.spacing(.5,0,0),lineHeight:T.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${T.spacing(1)}`})}),P=({children:T,disabled:M,variant:O,className:S})=>{const v=(0,r.of)(y),A=(0,n.useContext)(m)?.disabled||M,R=O==="primary"?v.actions:v.secondaryActions;return n.createElement("div",{className:(0,t.cx)(R,S)},n.Children.map(T,B=>n.isValidElement(B)?(0,n.cloneElement)(B,{disabled:A,...B.props}):null))},y=T=>({actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Actions",marginTop:T.spacing(2)}),secondaryActions:(0,t.css)({alignSelf:"center",color:T.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Secondary",marginTop:T.spacing(2)})}),C=({children:T,disabled:M,className:O})=>n.createElement(P,{variant:"primary",disabled:M,className:O},T);C.displayName="Actions";const f=({children:T,disabled:M,className:O})=>n.createElement(P,{variant:"secondary",disabled:M,className:O},T);f.displayName="SecondaryActions";const D=T=>({inner:(0,t.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...d(T),...h(T),...E(T),...b(T),...y(T),...g(T)});i.Heading=l,i.Tags=c,i.Figure=p,i.Meta=a,i.Actions=C,i.SecondaryActions=f,i.Description=u},81507:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>i,i:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(16797);const o=({children:d,href:c})=>{const{inner:g}=(0,r.of)(m);return c?n.createElement("a",{className:g,href:c},d):n.createElement(n.Fragment,null,d)},m=d=>({inner:(0,t.css)({display:"flex",width:"100%",padding:d.spacing(2)})}),i=({children:d,disableEvents:c,disableHover:g,isSelected:u,className:E,href:p,...b})=>{const{oldContainer:a}=(0,r.of)(l,c,g,u);return n.createElement("div",{...b,className:(0,t.cx)(a,E)},n.createElement(o,{href:p},d))},l=(d,c=!1,g=!1,u,E)=>{const p=u!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:d.spacing(E?1:2),background:d.colors.background.secondary,borderRadius:d.shape.radius.default,marginBottom:"8px",pointerEvents:c?"none":"auto",transition:d.transitions.create(["background-color","box-shadow","border-color","color"],{duration:d.transitions.duration.short}),...!g&&{"&:hover":{background:d.colors.emphasize(d.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(d)},...p&&{cursor:"pointer"},...u&&{outline:`solid 2px ${d.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:d.colors.background.secondary,borderRadius:d.shape.radius.default,position:"relative",pointerEvents:c?"none":"auto",marginBottom:d.spacing(1),transition:d.transitions.create(["background-color","box-shadow","border-color","color"],{duration:d.transitions.duration.short}),...!g&&{"&:hover":{background:d.colors.emphasize(d.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(d)}})}}},3988:(Q,I,e)=>{"use strict";e.d(I,{v:()=>p});var t=e(32196),n=e(47078),r=e.n(n),s=e(43546),o=e(96540),m=e(14578),i=e(29158),l=e(10354),d=e(67061),c=e(88323),g=e(58898);const u=(0,t.css)({"&:focus":{outline:"none"}}),E=" / ";class p extends o.PureComponent{constructor(a){super(a),this.flattenOptions=(C,f=[])=>{let D=[];for(const T of C){const M=[...f];M.push(T),!T.items||T.items.length===0?D.push({singleLabel:M[M.length-1].label,label:M.map(O=>O.label).join(this.props.separator||E),value:M.map(O=>O.value)}):D=[...D,...this.flattenOptions(T.items,M)]}return D},this.getSearchableOptions=r()(C=>this.flattenOptions(C)),this.onChange=(C,f)=>{const D=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?f.map(M=>M.label).join(this.props.separator||E):f[f.length-1].label,T={rcValue:{value:C,label:D},focusCascade:!0,activeLabel:D,isSearching:!1,inputValue:D};this.setState(T),this.props.onSelect(f[f.length-1].value)},this.onSelect=C=>{const f=C.value||[],D=this.props.displayAllSelectedLevels?C.label:C.singleLabel||"",T={activeLabel:D,inputValue:D,rcValue:{value:f,label:D},isSearching:!1,focusCascade:!1};this.setState(T),this.props.onSelect(f[f.length-1])},this.onCreateOption=C=>{this.setState({activeLabel:C,inputValue:C,rcValue:[],isSearching:!1}),this.props.onSelect(C)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=C=>{if(["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight"].includes(C.key))return;const{activeLabel:f}=this.state;this.setState({focusCascade:!1,isSearching:!0,inputValue:f})},this.onSelectInputChange=C=>{this.setState({inputValue:C})};const h=this.getSearchableOptions(a.options),{rcValue:P,activeLabel:y}=this.setInitialValue(h,a.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:P,activeLabel:y,inputValue:""}}static{this.defaultProps={changeOnSelect:!0}}setInitialValue(a,h){if(!h)return{rcValue:[],activeLabel:""};for(const P of a){const y=P.value||[];if(y[y.length-1]===h)return{rcValue:y,activeLabel:this.props.displayAllSelectedLevels?P.label:P.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:h}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:a,formatCreateLabel:h,placeholder:P,width:y,changeOnSelect:C,options:f,disabled:D,id:T,isClearable:M}=this.props,{focusCascade:O,isSearching:S,rcValue:v,activeLabel:x,inputValue:A}=this.state,R=this.getSearchableOptions(f);return o.createElement("div",null,S?o.createElement(c.l6,{allowCustomValue:a,placeholder:P,autoFocus:!O,onChange:this.onSelect,onBlur:this.onBlur,options:R,onCreateOption:this.onCreateOption,formatCreateLabel:h,width:y,onInputChange:this.onSelectInputChange,disabled:D,inputValue:A,inputId:T}):o.createElement(s.A,{onChange:(0,g.k)(this.onChange),options:f,changeOnSelect:C,value:v.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,disabled:D},o.createElement("div",{className:u},o.createElement(l.p,{autoFocus:this.props.autoFocus,width:y,placeholder:P,onBlur:this.onBlurCascade,value:x,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:o.createElement(d.B,{gap:.5},M&&x!==""&&o.createElement(i.K,{name:"times","aria-label":"Clear selection",onClick:B=>{B.preventDefault(),B.stopPropagation(),this.setState({rcValue:[],activeLabel:"",inputValue:""}),this.props.onSelect("")}}),o.createElement(m.I,{name:O?"angle-up":"angle-down"})),disabled:D,id:T}))))}}},58898:(Q,I,e)=>{"use strict";e.d(I,{W:()=>n,k:()=>t});const t=o=>(m,i)=>{o&&o(m.map(l=>String(l)),r(i))},n=o=>m=>{o&&o(r(m))},r=o=>o.map(s),s=o=>({value:o.value??"",label:o.label})},8866:(Q,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(96540);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const o=this.myRef.current;(!o||s.target instanceof Node&&!o.contains(s.target))&&this.props.onClick()}}static{this.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}},10534:(Q,I,e)=>{"use strict";e.d(I,{b:()=>d});var t=e(32196),n=e(96540),r=e(76412),s=e(40845),o=e(55852),m=e(14578),i=e(32982);const l=2*1e3;function d({onClipboardCopy:u,onClipboardError:E,children:p,getText:b,icon:a,variant:h,...P}){const y=(0,s.of)(g),[C,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return C&&(M=setTimeout(()=>{f(!1)},l)),()=>{window.clearTimeout(M)}},[C]);const D=(0,n.useRef)(null),T=(0,n.useCallback)(async()=>{const M=b();try{await c(M,D),f(!0),u?.(M)}catch(O){E?.(M,O)}},[b,u,E]);return n.createElement(n.Fragment,null,C&&n.createElement(i.r,{placement:"top",referenceElement:D.current},n.createElement(r.x,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(o.$n,{onClick:T,icon:a,variant:C?"success":h,"aria-label":C?"Copied":void 0,...P,className:(0,t.cx)(y.button,C&&y.successButton,P.className),ref:D},p,C&&n.createElement("div",{className:y.successOverlay},n.createElement(m.I,{name:"check"}))))}const c=async(u,E)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(u);{const p=document.createElement("textarea");E.current?.appendChild(p),p.value=u,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},g=u=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},57418:(Q,I,e)=>{"use strict";e.d(I,{M:()=>d});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(16797),i=e(14578),l=e(62930);const d=({label:g,isOpen:u,onToggle:E,className:p,contentClassName:b,children:a,labelId:h,loading:P=!1,headerDataTestId:y,contentDataTestId:C})=>{const[f,D]=(0,s.useState)(u),T=(0,o.of)(c),M=v=>{v.target instanceof HTMLElement&&v.target.tagName==="A"||(v.preventDefault(),v.stopPropagation(),E?.(!f),D(!f))},{current:O}=(0,s.useRef)((0,n.uniqueId)()),S=h??`collapse-label-${O}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(T.header,p)},s.createElement("button",{type:"button",id:`collapse-button-${O}`,className:T.button,onClick:M,"aria-expanded":f&&!P,"aria-controls":`collapse-content-${O}`,"aria-labelledby":S},P?s.createElement(l.y,{className:T.spinner}):s.createElement(i.I,{name:f?"angle-up":"angle-down",className:T.icon})),s.createElement("div",{className:T.label,id:`collapse-label-${O}`,"data-testid":y},g)),f&&s.createElement("div",{id:`collapse-content-${O}`,className:(0,t.cx)(T.content,b),"data-testid":C},a))},c=g=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:g.typography.size.lg,padding:`${g.spacing(.5)} 0`,"&:focus-within":(0,m.getFocusStyles)(g)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:g.colors.text.secondary}),content:(0,t.css)({padding:`${g.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:g.spacing(2)}),label:(0,t.css)({display:"flex"})})},82762:(Q,I,e)=>{"use strict";e.d(I,{S:()=>l,a:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=d=>({collapse:(0,t.css)({label:"collapse",marginBottom:d.spacing(1),backgroundColor:d.colors.background.primary,border:`1px solid ${d.colors.border.weak}`,position:"relative",borderRadius:d.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,t.css)({label:"collapse__body",padding:d.spacing(d.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,t.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,t.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:d.spacing(.5)}),loaderActive:(0,t.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:d.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,t.css)({label:"collapse__header",padding:d.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,t.css)({label:"collapse__header--collapsed",padding:d.spacing(1,2,1,2)}),headerLabel:(0,t.css)({label:"collapse__header-label",fontWeight:d.typography.fontWeightMedium,marginRight:d.spacing(1),fontSize:d.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,t.css)({label:"collapse__icon",margin:d.spacing(.25,1,0,-1)})}),i=({isOpen:d,onToggle:c,...g})=>{const[u,E]=(0,n.useState)(d);return n.createElement(l,{isOpen:u,collapsible:!0,...g,onToggle:()=>{E(!u),c&&c(!u)}})},l=({isOpen:d,label:c,loading:g,collapsible:u,onToggle:E,className:p,children:b})=>{const a=(0,r.of)(s.my),h=(0,r.of)(m),P=()=>{E&&E(!d)},y=(0,t.cx)([h.collapse,p]),C=g?(0,t.cx)([h.loader,h.loaderActive]):(0,t.cx)([h.loader]),f=u?(0,t.cx)([h.header]):(0,t.cx)([h.headerCollapsed]);return n.createElement("div",{className:y},n.createElement("button",{type:"button",className:(0,t.cx)(a,f),onClick:P},u&&n.createElement(o.I,{className:h.icon,name:d?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([h.headerLabel])},c)),d&&n.createElement("div",{className:(0,t.cx)([h.collapseBody])},n.createElement("div",{className:C}),n.createElement("div",{className:h.bodyContentWrapper},b)))};l.displayName="Collapse"},36314:(Q,I,e)=>{"use strict";e.d(I,{A:()=>d});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(84140),m=e(40845),i=e(10354);const l=(0,s.forwardRef)(({color:u,onChange:E,isClearable:p=!1,onClick:b,onBlur:a,disabled:h,buttonAriaLabel:P,...y},C)=>{const[f,D]=(0,s.useState)(u),[T,M]=(0,s.useState)(u),O=(0,s.useMemo)(()=>(0,n.debounce)(E,100),[]);(0,s.useEffect)(()=>{const x=(0,o.A)(u);x.isValid()&&u!==T&&(D(x.toString()),M(u))},[u,T]);const S=x=>{const{value:A}=x.currentTarget;if(D(A),A===""&&p){O(A);return}const R=(0,o.A)(A);R.isValid()&&O(R.toString())},v=x=>{(0,o.A)(f).isValid()||D(u),a?.(x)};return s.createElement(i.p,{...y,value:f,onChange:S,disabled:h,onClick:b,onBlur:v,addonBefore:s.createElement(c,{onClick:b,ariaLabel:P,disabled:h,color:u}),ref:C})});l.displayName="ColorInput";const d=l,c=({color:u,onClick:E,disabled:p,ariaLabel:b})=>{const a=(0,m.of)(g);return s.createElement("button",{type:"button",onClick:E,"aria-label":b,disabled:p||!E,className:(0,t.cx)(a,(0,t.css)({backgroundColor:u}))})},g=u=>(0,t.css)({height:"100%",width:`${u.spacing.gridSize*4}px`,borderRadius:`${u.shape.radius.default} 0 0 ${u.shape.radius.default}`,border:`1px solid ${u.colors.border.medium}`})},83598:(Q,I,e)=>{"use strict";e.d(I,{Dp:()=>E,sk:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(3911),o=e(40321),m=e(13840),i=e(95868),l=e(70045),d=e(83876),c=e(70104);const g=(b,a="ColorPicker")=>class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}static{this.displayName=a}render(){const{theme:P,children:y,onChange:C,color:f}=this.props,D=p(P),T=n.createElement(b,{...this.props,children:null,onChange:C});return n.createElement(i.I,{content:T,hideAfter:300},(M,O,S)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(m.A,{...S,referenceElement:this.pickerTriggerRef.current,wrapperClassName:D.colorPicker,onMouseLeave:O,onMouseEnter:M,onKeyDown:v=>(0,o.Q)(v,O)}),y?y({ref:this.pickerTriggerRef,showColorPicker:M,hideColorPicker:O}):n.createElement(d.q,{ref:this.pickerTriggerRef,onClick:M,onMouseLeave:O,color:P.visualization.getColorByName(f||"#000000"),"aria-label":f})))}},u=(0,r.cV)(g(l.$,"ColorPicker")),E=(0,r.cV)(g(c.o,"SeriesColorPicker")),p=(0,s.N)(b=>({colorPicker:(0,t.css)({position:"absolute",zIndex:b.zIndex.tooltip,color:b.colors.text.primary,maxWidth:"400px",fontSize:b.typography.size.sm})}))},99128:(Q,I,e)=>{"use strict";e.d(I,{i:()=>c});var t=e(32196),n=e(96540),r=e(7612),s=e(65229),o=e(23596),m=e(40845),i=e(8866),l=e(36314),d=e(95151);const c=(0,n.forwardRef)(({value:u="",onChange:E,returnColorAs:p="rgb",...b},a)=>{const[h,P]=(0,n.useState)(u),[y,C]=(0,n.useState)(!1),f=(0,m.$j)(),D=(0,m.of)(g),T=(0,m.of)(d.$);return(0,s.A)(M=>{if(M===u)return;if(!M){E("");return}const O=f.visualization.getColorByName(M);E(p==="rgb"?o.asRgbString(O):o.asHexString(O))},500,[h]),n.createElement(i.N,{onClick:()=>C(!1)},n.createElement("div",{className:D.wrapper},y&&!b.disabled&&n.createElement(r.p9,{"data-testid":"color-popover",color:h,onChange:P,className:(0,t.cx)(T.root,D.picker)}),n.createElement(l.A,{...b,theme:f,color:h,onChange:P,buttonAriaLabel:"Open color picker",onClick:()=>C(!0),onBlur:()=>C(!1),ref:a,isClearable:!0})))});c.displayName="ColorPickerInput";const g=u=>({wrapper:(0,t.css)({position:"relative"}),picker:(0,t.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,t.css)({position:"absolute"})})},70045:(Q,I,e)=>{"use strict";e.d(I,{$:()=>h});var t=e(32196),n=e(7887),r=e(96540),s=e(23596),o=e(40845),m=e(3911),i=e(83876),l=e(2543);function d(y,C){const f=new Array(y.length);for(let D=0;D<y.length;D++){const T=y.length-1-D;f[D]=C(y[T],T,y)}return f}const g=({hue:y,selectedColor:C,onColorSelect:f,...D})=>{const T=(0,l.upperFirst)(y.name),M=(0,o.of)(u);return r.createElement("div",{className:M.colorRow},r.createElement("div",{className:M.colorLabel},T),r.createElement("div",{...D,className:M.swatchRow},d(y.shades,O=>r.createElement(i.q,{key:O.name,"aria-label":O.name,variant:O.primary?i.h.Large:i.h.Small,isSelected:O.name===C,color:O.color,onClick:()=>f(O.name)}))))},u=y=>({colorRow:(0,t.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:y.spacing(2),padding:y.spacing(.5,0),"&:hover":{background:y.colors.background.secondary}}),colorLabel:(0,t.css)({paddingLeft:y.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,t.css)({display:"flex",gap:y.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),E=({color:y,onChange:C})=>{const f=(0,o.$j)(),D=(0,o.of)(p),T=[];for(const M of f.visualization.hues)T.push(r.createElement(g,{key:M.name,selectedColor:y,hue:M,onColorSelect:C}));return r.createElement(r.Fragment,null,r.createElement("div",{className:D.swatches},T),r.createElement("div",{className:D.extraColors},r.createElement(i.q,{isSelected:y==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>C("transparent")}),r.createElement(i.q,{isSelected:y==="text",color:f.colors.text.primary,label:"Text color",onClick:()=>C("text")})))},p=y=>({container:(0,t.css)({display:"flex",flexDirection:"column"}),extraColors:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:y.spacing(1),padding:y.spacing(1,0)}),swatches:(0,t.css)({display:"grid",flexGrow:1})});var b=e(95151);class a extends r.Component{constructor(C){super(C),this.getTabClassName=f=>{const{activePicker:D}=this.state;return`ColorPickerPopover__tab ${D===f&&"ColorPickerPopover__tab--active"}`},this.handleChange=f=>{const{onChange:D,enableNamedColors:T,theme:M}=this.props;if(T)return D(f);D(s.asHexString(M.visualization.getColorByName(f)))},this.onTabChange=f=>()=>this.setState({activePicker:f}),this.renderPicker=()=>{const{activePicker:f}=this.state,{color:D}=this.props;switch(f){case"spectrum":return r.createElement(b.A,{color:D,onChange:this.handleChange});case"palette":return r.createElement(E,{color:D,onChange:this.handleChange});default:return this.renderCustomPicker(f)}},this.renderCustomPicker=f=>{const{customPickers:D,color:T,theme:M}=this.props;return D?r.createElement(D[f].tabComponent,{color:T,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:f}=this.props;return f?r.createElement(r.Fragment,null,Object.keys(f).map(D=>r.createElement("button",{className:this.getTabClassName(D),onClick:this.onTabChange(D),key:D,type:"button"},f[D].name))):null},this.state={activePicker:"palette"}}render(){const{theme:C}=this.props,f=P(C);return r.createElement(n.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},r.createElement("div",{tabIndex:-1,className:f.colorPickerPopover},r.createElement("div",{className:f.colorPickerPopoverTabs},r.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),r.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),r.createElement("div",{className:f.colorPickerPopoverContent},this.renderPicker())))}}const h=(0,o.cV)(a);h.displayName="ColorPickerPopover";const P=(0,m.N)(y=>({colorPickerPopover:(0,t.css)({borderRadius:y.shape.radius.default,boxShadow:y.shadows.z3,background:y.colors.background.primary,border:`1px solid ${y.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:y.spacing(1,0),background:y.colors.background.secondary,color:y.colors.text.secondary,fontSize:y.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:y.colors.text.primary,fontWeight:y.typography.fontWeightMedium,background:y.colors.background.primary}}),colorPickerPopoverContent:(0,t.css)({width:"246px",fontSize:y.typography.bodySmall.fontSize,minHeight:"184px",padding:y.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,t.css)({display:"flex",width:"100%",borderRadius:`${y.shape.radius.default} ${y.shape.radius.default} 0 0`})}))},83876:(Q,I,e)=>{"use strict";e.d(I,{h:()=>i,q:()=>l});var t=e(32196),n=e(7887),r=e(96540),s=e(84140),o=e(13544),m=e(40845),i=(c=>(c.Small="small",c.Large="large",c))(i||{});const l=r.forwardRef(({color:c,label:g,variant:u="small",isSelected:E,"aria-label":p,...b},a)=>{const h=(0,m.$j)(),{isFocusVisible:P,focusProps:y}=(0,n.og)(),C=d(h,u,c,P,E),f=!!g,D=p||g;return r.createElement("div",{ref:a,className:C.wrapper,"data-testid":o.Tp.components.ColorSwatch.name,...b},f&&r.createElement("span",{className:C.label},g),r.createElement("button",{className:C.swatch,...y,"aria-label":D?`${D} color`:"Pick a color",type:"button"}))}),d=(c,g,u,E,p)=>{const b=(0,s.A)(u),h=g==="small"?"16px":"32px";let P="none";return b.getAlpha()<.1&&(P=`2px solid ${c.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:c.spacing(1)}),swatch:(0,t.css)({width:h,height:h,background:`${u}`,border:P,borderRadius:c.shape.radius.circle,outlineOffset:"1px",outline:E?`2px solid  ${c.colors.primary.main}`:"none",boxShadow:p?`inset 0 0 0 2px ${u}, inset 0 0 0 4px ${c.colors.getContrastText(u)}`:"none",transition:c.transitions.create(["transform"],{duration:c.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};l.displayName="ColorSwatch"},70104:(Q,I,e)=>{"use strict";e.d(I,{o:()=>m,t:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(74716),o=e(70045);const m=d=>{const c=(0,r.of)(l),{yaxis:g,onToggleAxis:u,color:E,...p}=d,b=u?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.d,{key:"yaxisSwitch",label:"Use right y-axis",className:c.colorPickerAxisSwitch,labelClass:c.colorPickerAxisSwitchLabel,checked:g===2,onChange:()=>{u&&u()}})}}}:void 0;return n.createElement(o.$,{...p,color:E||"#000000",customPickers:b})},i=(0,r.cV)(m),l=()=>({colorPickerAxisSwitch:(0,t.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,t.css)({display:"flex",flexGrow:1})})},95151:(Q,I,e)=>{"use strict";e.d(I,{$:()=>c,A:()=>g});var t=e(32196),n=e(96540),r=e(7612),s=e(65229),o=e(84140),m=e(23596),i=e(40845),l=e(36314);const d=({color:u,onChange:E})=>{const[p,b]=(0,n.useState)(u);(0,s.A)(y=>{E(m.asHexString(a.visualization.getColorByName(y)))},500,[p]);const a=(0,i.$j)(),h=(0,i.of)(c),P=(0,n.useMemo)(()=>p.startsWith("rgba")?p:(0,o.A)(a.visualization.getColorByName(u)).toRgbString(),[p,a,u]);return n.createElement("div",{className:h.wrapper},n.createElement(r.p9,{className:h.root,color:P,onChange:b}),n.createElement(l.A,{theme:a,color:P,onChange:b,className:h.colorInput}))},c=u=>({wrapper:(0,t.css)({flexGrow:1}),root:(0,t.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${u.shape.radius.default} ${u.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${u.shape.radius.default} ${u.shape.radius.default}`},"&__alpha, &__hue":{height:u.spacing(2),position:"relative"},"&__pointer":{height:u.spacing(2),width:u.spacing(2)}}}),colorInput:(0,t.css)({marginTop:u.spacing(2)})}),g=d},82702:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(55852);const o=({children:i,className:l,closeOnConfirm:d,confirmText:c="Save",confirmVariant:g="primary",disabled:u=!1,onCancel:E,onClick:p,onConfirm:b,size:a="md"})=>{const h=(0,n.useRef)(null),P=(0,n.useRef)(null),[y,C]=(0,n.useState)(!1),[f,D]=(0,n.useState)(!1),T=(0,r.of)(m);(0,n.useEffect)(()=>{y?(P.current?.focus(),D(!0)):f&&(h.current?.focus(),D(!1))},[f,y]);const M=R=>{R&&R.preventDefault(),C(!0),p?.()},O=R=>{R&&R.preventDefault(),C(!1),h.current?.focus(),E?.()},S=R=>{R&&R.preventDefault(),b?.(),d&&C(!1)},v=(0,t.cx)(l,T.mainButton,{[T.mainButtonHide]:y}),x=(0,t.cx)(T.confirmButton,{[T.confirmButtonHide]:!y}),A=(0,t.cx)(T.confirmButtonContainer,{[T.confirmButtonContainerHide]:!y});return n.createElement("div",{className:T.container},n.createElement("span",{className:v},typeof i=="string"?n.createElement(s.$n,{disabled:u,size:a,fill:"text",onClick:M,ref:h},i):n.cloneElement(i,{disabled:u,onClick:M,ref:h})),n.createElement("div",{className:A},n.createElement("span",{className:x},n.createElement(s.$n,{size:a,variant:g,onClick:S,ref:P},c),n.createElement(s.$n,{size:a,fill:"text",onClick:O},"Cancel"))))};o.displayName="ConfirmButton";const m=i=>({container:(0,t.css)({alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative"}),mainButton:(0,t.css)({opacity:1,transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.shortest,easing:i.transitions.easing.easeOut}),zIndex:2}),mainButtonHide:(0,t.css)({opacity:0,transition:i.transitions.create(["opacity","visibility"],{duration:i.transitions.duration.shortest,easing:i.transitions.easing.easeIn}),visibility:"hidden",zIndex:0}),confirmButtonContainer:(0,t.css)({overflow:"visible",position:"absolute",pointerEvents:"all",right:0}),confirmButtonContainerHide:(0,t.css)({overflow:"hidden",pointerEvents:"none"}),confirmButton:(0,t.css)({alignItems:"flex-start",background:i.colors.background.primary,display:"flex",opacity:1,transform:"translateX(0)",transition:i.transitions.create(["opacity","transform"],{duration:i.transitions.duration.shortest,easing:i.transitions.easing.easeOut}),zIndex:1}),confirmButtonHide:(0,t.css)({opacity:0,transform:"translateX(100%)",transition:i.transitions.create(["opacity","transform","visibility"],{duration:i.transitions.duration.shortest,easing:i.transitions.easing.easeIn}),visibility:"hidden"})})},91605:(Q,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(96540),n=e(55852),r=e(82702);const s=({size:o,disabled:m,onConfirm:i,"aria-label":l,closeOnConfirm:d})=>t.createElement(r.Z,{confirmText:"Delete",confirmVariant:"destructive",size:o||"md",disabled:m,onConfirm:i,closeOnConfirm:d},t.createElement(n.$n,{"aria-label":l,variant:"destructive",icon:"times",size:o||"sm"}))},96374:(Q,I,e)=>{"use strict";e.d(I,{u:()=>g});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(55852),i=e(10354),l=e(90613),d=e(67061),c=e(37390);const g=({isOpen:E,title:p,body:b,description:a,confirmText:h,confirmVariant:P="destructive",confirmationText:y,dismissText:C="Cancel",dismissVariant:f="secondary",alternativeText:D,modalClass:T,icon:M="exclamation-triangle",onConfirm:O,onDismiss:S,onAlternative:v,confirmButtonVariant:x="destructive"})=>{const[A,R]=(0,n.useState)(!!y),B=(0,o.of)(u),U=(0,n.useRef)(null),w=L=>{R(y?.toLowerCase().localeCompare(L.currentTarget.value.toLowerCase())!==0)};(0,n.useEffect)(()=>{E&&U.current?.focus()},[E]),(0,n.useEffect)(()=>{E&&R(!!y)},[E,y]);const K=async()=>{R(!0);try{await O()}finally{R(!1)}},{handleSubmit:N}=(0,r.mN)();return n.createElement(c.a,{className:(0,t.cx)(B.modal,T),title:p,icon:M,isOpen:E,onDismiss:S},n.createElement("form",{onSubmit:N(K)},n.createElement("div",{className:B.modalText},b,a?n.createElement("div",{className:B.modalDescription},a):null,y?n.createElement("div",{className:B.modalConfirmationInput},n.createElement(d.B,{alignItems:"flex-start"},n.createElement(l.a,null,n.createElement(i.p,{placeholder:`Type "${y}" to confirm`,onChange:w})))):null),n.createElement(c.a.ButtonRow,null,n.createElement(m.$n,{variant:f,onClick:S,fill:"outline"},C),n.createElement(m.$n,{type:"submit",variant:x,disabled:A,ref:U,"data-testid":s.Tp.pages.ConfirmModal.delete},h),v?n.createElement(m.$n,{variant:"primary",onClick:v},D):null)))},u=E=>({modal:(0,t.css)({width:"500px"}),modalText:(0,t.css)({fontSize:E.typography.h5.fontSize,color:E.colors.text.primary}),modalDescription:(0,t.css)({fontSize:E.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:E.spacing(1)})})},28122:(Q,I,e)=>{"use strict";e.d(I,{t:()=>m});var t=e(96540),n=e(29647),r=e(13544),s=e(38138),o=e(17464);const m=t.memo(({x:i,y:l,onClose:d,focusOnOpen:c=!0,renderMenuItems:g,renderHeader:u})=>{const E=(0,t.useRef)(null),[p,b]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const C=E.current;if(C){const f=C.getBoundingClientRect(),D=5,T={right:window.innerWidth<i+f.width,bottom:window.innerHeight<l+f.height+D};b({position:"fixed",left:T.right?i-f.width-D:i-D,top:Math.max(0,T.bottom?l-f.height-D:l+D)})}},[i,l]),(0,n.A)(E,()=>{d?.()});const a=u?.(),h=g?.(),P=C=>{c&&C(0)},y=C=>{C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),d?.())};return t.createElement(o.ZL,null,t.createElement(s.W,{header:a,ref:E,style:p,ariaLabel:r.Tp.components.Menu.MenuComponent("Context"),onOpen:P,onClick:d,onKeyDown:y},h))});m.displayName="ContextMenu"},51686:(Q,I,e)=>{"use strict";e.d(I,{n:()=>r});var t=e(96540),n=e(28122);const r=({children:s,renderMenuItems:o,focusOnOpen:m=!0})=>{const[i,l]=(0,t.useState)(!1),[d,c]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:g=>{l(!0),c({x:g.pageX,y:g.pageY})}}),i&&t.createElement(n.t,{onClose:()=>l(!1),x:d.x,y:d.y,renderMenuItems:o,focusOnOpen:m}))}},40276:(Q,I,e)=>{"use strict";e.d(I,{E:()=>i,A:()=>l});var t=e(32196),n=e(96540),r=e(62295),s=e(40845);const o=({children:c})=>{const[g,u]=(0,n.useState)(!1),[E,p]=(0,n.useState)(!1),b=(0,n.useRef)(null),a=(0,n.useRef)(null),h=(0,s.of)(m);return(0,n.useEffect)(()=>{const P=new IntersectionObserver(y=>{y.forEach(C=>{C.target===b.current?u(!C.isIntersecting):C.target===a.current&&p(!C.isIntersecting)})});return[b,a].forEach(y=>{y.current&&P.observe(y.current)}),()=>P.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(h.scrollIndicator,h.scrollTopIndicator,{[h.scrollIndicatorVisible]:g})}),n.createElement("div",{className:h.scrollContent},n.createElement("div",{ref:b}),c,n.createElement("div",{ref:a})),n.createElement("div",{className:(0,t.cx)(h.scrollIndicator,h.scrollBottomIndicator,{[h.scrollIndicatorVisible]:E})}))},m=c=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:c.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:c.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${c.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${c.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1})}),i=({autoHide:c=!1,autoHideTimeout:g=200,setScrollTop:u,className:E,testId:p,autoHeightMin:b="0",autoHeightMax:a="100%",hideTracksWhenNotNeeded:h=!1,hideHorizontalTrack:P,hideVerticalTrack:y,scrollRefCallback:C,showScrollIndicators:f=!1,updateAfterMountMs:D,scrollTop:T,onScroll:M,children:O})=>{const S=(0,n.useRef)(null),v=(0,s.of)(d);(0,n.useEffect)(()=>{S.current&&C&&C(S.current.view)},[S,C]),(0,n.useEffect)(()=>{S.current&&T!=null&&S.current.scrollTop(T)},[T]),(0,n.useEffect)(()=>{D&&setTimeout(()=>{const N=S.current;N?.update&&N.update()},D)},[D]);function x(N,L,V){return V.style&&L&&(V.style.display="none"),n.createElement("div",{...V,className:N})}const A=(0,n.useCallback)(N=>x("track-horizontal",P,N),[P]),R=(0,n.useCallback)(N=>x("track-vertical",y,N),[y]),B=(0,n.useCallback)(N=>n.createElement("div",{...N,className:"thumb-horizontal"}),[]),U=(0,n.useCallback)(N=>n.createElement("div",{...N,className:"thumb-vertical"}),[]),w=(0,n.useCallback)(N=>(N.style&&N.style.WebkitOverflowScrolling==="touch"&&(N.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...N,className:"scrollbar-view"})),[]),K=(0,n.useCallback)(()=>{S.current&&u&&u(S.current.getValues())},[u]);return n.createElement(r.Ay,{"data-testid":p,ref:S,className:(0,t.cx)(v.customScrollbar,E,{[v.scrollbarWithScrollIndicators]:f}),onScrollStop:K,autoHeight:!0,autoHide:c,autoHideTimeout:g,hideTracksWhenNotNeeded:h,autoHeightMax:a,autoHeightMin:b,renderTrackHorizontal:A,renderTrackVertical:R,renderThumbHorizontal:B,renderThumbVertical:U,renderView:w,onScroll:M},f?n.createElement(o,null,O):O)},l=i,d=c=>({customScrollbar:(0,t.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:c.shape.borderRadius(2),width:`${c.spacing(1)} !important`,right:0,bottom:c.spacing(.25),top:c.spacing(.25)},".track-horizontal":{borderRadius:c.shape.borderRadius(2),height:`${c.spacing(1)} !important`,right:c.spacing(.25),bottom:c.spacing(.25),left:c.spacing(.25)},".thumb-vertical":{background:c.colors.action.focus,borderRadius:c.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:c.colors.action.focus,borderRadius:c.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,t.css)({".scrollbar-view":{position:"static !important"}})})},14689:(Q,I,e)=>{"use strict";e.d(I,{R:()=>r});var t=e(96540),n=e(55852);function r({link:s,buttonProps:o}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?m=>{!(m.ctrlKey||m.metaKey||m.shiftKey)&&s.onClick&&(m.preventDefault(),s.onClick(m))}:void 0},t.createElement(n.$n,{icon:s.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...o},s.title))}},64078:(Q,I,e)=>{"use strict";e.d(I,{l:()=>O});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(28848),m=e.n(o),i=e(96540),l=e(80292),d=e(52845),c=e(29317),g=e(91890),u=e(6709),E=e(41781),p=e(40845),b=e(72307),a=e(40276),h=e(10354),P=e(17464),y=e(43538);class C{getBoundingClientRect(){const x=window.getSelection(),A=x&&x.anchorNode;return A&&A.parentElement?A.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const f=(v,x)=>v-x*Math.floor(v/x),D={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,E.D)({onlyIn:v=>"type"in v&&v.type==="code_block",getSyntax:()=>"links"},{...m().languages,links:D})],M=v=>({input:(0,h.n)({theme:v,invalid:!1}).input,editor:(0,t.css)({".token.builtInVariable":{color:v.colors.success.text},".token.variable":{color:v.colors.primary.text}}),suggestionsWrapper:(0,t.css)({boxShadow:v.shadows.z2}),wrapperOverrides:(0,t.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),O=(0,i.memo)(({value:v,onChange:x,suggestions:A,placeholder:R="http://your-grafana.com/d/000000010/annotations"})=>{const B=(0,i.useRef)(null),U=(0,p.of)(M),[w,K]=(0,i.useState)(!1),[N,L]=(0,i.useState)(0),[V,F]=(0,i.useState)((0,b.mO)(v)),z=(0,l.A)(V),[Y,H]=(0,i.useState)(0),k=[(0,n.cY)(({rects:te})=>({alignmentAxis:te.reference.width})),(0,r.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{refs:ee,floatingStyles:ie}=(0,s.we)({open:w,placement:"bottom-start",onOpenChange:K,middleware:k,whileElementsMounted:r.ll,strategy:"fixed"}),fe=(0,i.useRef)({showingSuggestions:w,suggestions:A,suggestionsIndex:N,linkUrl:V,onChange:x});fe.current={showingSuggestions:w,suggestions:A,suggestionsIndex:N,linkUrl:V,onChange:x};const q=(0,i.useRef)(null);(0,i.useEffect)(()=>{H(S(q.current,N))},[N]);const Z=i.useCallback((te,oe)=>{if(!fe.current.showingSuggestions){if(te.key==="="||te.key==="$"||te.keyCode===32&&te.ctrlKey){const le=new C;return ee.setReference(le),K(!0)}return oe()}switch(te.key){case"Backspace":case"Escape":return K(!1),L(0);case"Enter":return te.preventDefault(),G(fe.current.suggestions[fe.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":te.preventDefault();const le=te.key==="ArrowDown"?1:-1;return L(ue=>f(ue+le,fe.current.suggestions.length));default:return oe()}},[]);(0,i.useEffect)(()=>{z&&z.selection.isFocused&&!V.selection.isFocused&&fe.current.onChange(d.A.serialize(V))},[V,z]);const J=i.useCallback(({value:te})=>{F(te)},[]),G=(te,oe=B.current)=>{const ue=ne()==="$";te.origin!==g.$0.Template||te.value===u.c.includeVars?oe.insertText(`${ue?"":"$"}{${te.value}}`):oe.insertText(`${ue?"":"$"}{${te.value}:queryparam}`),F(oe.value),K(!1),L(0),fe.current.onChange(d.A.serialize(oe.value))},ne=()=>{const te=document.getElementById("data-link-input");let oe="",le,ue;return window.getSelection&&(le=window.getSelection(),le&&le.rangeCount>0&&(ue=le.getRangeAt(0).cloneRange(),ue.collapse(!0),ue.setStart(te,0),oe=ue.toString().slice(-1))),oe};return i.createElement("div",{className:U.wrapperOverrides},i.createElement("div",{className:"slate-query-field__wrapper"},i.createElement("div",{id:"data-link-input",className:"slate-query-field"},w&&i.createElement(P.ZL,null,i.createElement("div",{ref:ee.setFloating,style:ie},i.createElement(a.A,{scrollTop:Y,autoHeightMax:"300px",setScrollTop:({scrollTop:te})=>H(te)},i.createElement(y.k,{activeRef:q,suggestions:fe.current.suggestions,onSuggestionSelect:G,onClose:()=>K(!1),activeIndex:N})))),i.createElement(c.KE,{schema:b.yx,ref:B,placeholder:R,value:fe.current.linkUrl,onChange:J,onKeyDown:(te,oe,le)=>Z(te,le),plugins:T,className:(0,t.cx)(U.editor,U.input,(0,t.css)({padding:"3px 8px"}))}))))});O.displayName="DataLinkInput";function S(v,x){return(v?.clientHeight??0)*x}},43538:(Q,I,e)=>{"use strict";e.d(I,{k:()=>d});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(37151),m=e(40845),i=e(33552);const l=g=>({list:(0,t.css)({borderBottom:`1px solid ${g.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,t.css)({background:g.colors.background.primary,width:"250px"}),item:(0,t.css)({background:"none",padding:"2px 8px",userSelect:"none",color:g.colors.text.primary,cursor:"pointer","&:hover":{background:g.colors.action.hover}}),label:(0,t.css)({color:g.colors.text.secondary}),activeItem:(0,t.css)({background:g.colors.background.secondary,"&:hover":{background:g.colors.background.secondary}}),itemValue:(0,t.css)({fontFamily:g.typography.fontFamilyMonospace,fontSize:g.typography.size.sm})}),d=({suggestions:g,...u})=>{const E=(0,s.useRef)(null);(0,o.A)(E,()=>{u.onClose&&u.onClose()});const p=(0,s.useMemo)(()=>(0,n.groupBy)(g,a=>a.origin),[g]),b=(0,m.of)(l);return s.createElement("div",{role:"menu",ref:E,className:b.wrapper},Object.keys(p).map((a,h)=>{const P=h===0?0:Object.keys(p).reduce((y,C,f)=>f>=h?y:y+p[C].length,0);return s.createElement(c,{...u,suggestions:p[a],label:`${(0,n.capitalize)(a)}`,activeIndex:u.activeIndex,activeIndexOffset:P,key:a})}))};d.displayName="DataLinkSuggestions";const c=s.memo(({activeIndex:g,activeIndexOffset:u,label:E,onClose:p,onSuggestionSelect:b,suggestions:a,activeRef:h})=>{const P=(0,m.of)(l);return s.createElement(s.Fragment,null,s.createElement(i.B,{className:P.list,items:a,renderItem:(y,C)=>{const f=C+u===g;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(P.item,f&&P.activeItem),ref:f?h:void 0,onClick:()=>{b(y)},title:y.documentation},s.createElement("span",{className:P.itemValue},s.createElement("span",{className:P.label},E)," ",y.label))}}))});c.displayName="DataLinkSuggestionsList"},59796:(Q,I,e)=>{"use strict";e.d(I,{e:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(14555),o=e(51686),m=e(59093),i=e(64539);const l=({children:d,links:c,style:g})=>{const u=[{items:(0,s.J)(c),label:"Data links"}],E=u[0].items.length,p=()=>u.map((a,h)=>n.createElement(m.r,{key:`${a.label}${h}`,label:a.label},(a.items||[]).map((P,y)=>n.createElement(i.D,{key:`${a.label}-${h}-${y}}`,url:P.url,label:P.label,target:P.target,icon:P.icon,active:P.active,onClick:P.onClick})))),b=(0,t.css)({cursor:"context-menu"});if(E>1)return n.createElement(o.n,{renderMenuItems:p},({openMenu:a})=>d({openMenu:a,targetClassName:b}));{const a=c()[0];return n.createElement("a",{href:a.href,onClick:a.onClick,target:a.target,title:a.title,style:{...g,overflow:"hidden",display:"flex"},"data-testid":r.Tp.components.DataLinksContextMenu.singleLink},d({}))}}},64919:(Q,I,e)=>{"use strict";e.d(I,{e:()=>y});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(55852),m=e(37390),i=e(14555),l=e(88575),d=e(10354),c=e(15292),g=e(64078);const u=f=>({listItem:(0,t.css)({marginBottom:f.spacing()}),infoText:(0,t.css)({paddingBottom:f.spacing(2),marginLeft:"66px",color:f.colors.text.secondary})}),E=r.memo(({index:f,value:D,onChange:T,suggestions:M,isLast:O})=>{const S=(0,s.of)(u),v=(R,B)=>{T(f,{...D,url:R},B)},x=R=>{T(f,{...D,title:R.target.value})},A=()=>{T(f,{...D,targetBlank:!D.targetBlank})};return r.createElement("div",{className:S.listItem},r.createElement(l.D,{label:"Title"},r.createElement(d.p,{value:D.title,onChange:x,placeholder:"Show details"})),r.createElement(l.D,{label:"URL",invalid:(0,i.F)(D.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},r.createElement(g.l,{value:D.url,onChange:v,suggestions:M})),r.createElement(l.D,{label:"Open in new tab"},r.createElement(c.d,{value:D.targetBlank||!1,onChange:A})),O&&r.createElement("div",{className:S.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});E.displayName="DataLinkEditor";const p=({link:f,index:D,getSuggestions:T,onSave:M,onCancel:O})=>{const[S,v]=(0,r.useState)(f);return r.createElement(r.Fragment,null,r.createElement(E,{value:S,index:D,isLast:!1,suggestions:T(),onChange:(x,A)=>{v(A)}}),r.createElement(m.a.ButtonRow,null,r.createElement(o.$n,{variant:"secondary",onClick:()=>O(D),fill:"outline"},"Cancel"),r.createElement(o.$n,{onClick:()=>{M(D,S)}},"Save")))};var b=e(72093),a=e(29158);const h=({link:f,onEdit:D,onRemove:T})=>{const M=(0,s.of)(P),{title:O="",url:S=""}=f,v=O.trim()!=="",x=S.trim()!=="",A=(0,i.F)(S);return r.createElement("div",{className:M.wrapper},r.createElement("div",{className:M.titleWrapper},r.createElement("div",{className:(0,t.cx)(M.url,!x&&M.notConfigured,A&&M.errored)},v?O:"Data link title not provided"),r.createElement("div",{className:M.actionButtons},r.createElement(a.K,{name:"pen",onClick:D,tooltip:"Edit data link title"}),r.createElement(a.K,{name:"times",onClick:T,tooltip:"Remove data link title"}))),r.createElement("div",{className:(0,t.cx)(M.url,!x&&M.notConfigured,A&&M.errored),title:S},x?S:"Data link url not provided"),A&&r.createElement(b.P,null,"Explore data link may not work in the future. Please edit."))},P=f=>({wrapper:(0,t.css)({marginBottom:f.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,t.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,t.css)({marginLeft:f.spacing(1),display:"flex"}),errored:(0,t.css)({color:f.colors.error.text,fontStyle:"italic"}),notConfigured:(0,t.css)({fontStyle:"italic"}),title:(0,t.css)({color:f.colors.text.primary,fontSize:f.typography.size.sm,fontWeight:f.typography.fontWeightMedium}),url:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})}),y=({links:f,onChange:D,getSuggestions:T,data:M})=>{const[O,S]=(0,r.useState)(null),[v,x]=(0,r.useState)(!1),A=(0,s.of)(C),R=f??[],B=O!==null,U=(L,V)=>{if(v)if(V.title.trim()===""&&V.url.trim()===""){x(!1),S(null);return}else S(null),x(!1);const F=(0,n.cloneDeep)(R);F[L]=V,D(F),S(null)},w=()=>{let L=(0,n.cloneDeep)(R);S(L.length),x(!0)},K=L=>{v&&x(!1),S(null)},N=L=>{const V=(0,n.cloneDeep)(R);V.splice(L,1),D(V)};return r.createElement(r.Fragment,null,R.length>0&&r.createElement("div",{className:A.wrapper},R.map((L,V)=>r.createElement(h,{key:`${L.title}/${V}`,index:V,link:L,onChange:U,onEdit:()=>S(V),onRemove:()=>N(V),data:M}))),B&&O!==null&&r.createElement(m.a,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{K(O)}},r.createElement(p,{index:O,link:v?{title:"",url:""}:R[O],data:M,onSave:U,onCancel:K,getSuggestions:T})),r.createElement(o.$n,{size:"sm",icon:"plus",onClick:w,variant:"secondary"},"Add link"))},C=f=>({wrapper:(0,t.css)({marginBottom:f.spacing(2)})})},79961:(Q,I,e)=>{"use strict";e.d(I,{n:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(14689);function m({links:l}){const d=(0,r.of)(i);if(l.length===1)return n.createElement(o.R,{link:l[0]});const c=l.filter(u=>u.target==="_blank"),g=l.filter(u=>u.target==="_self");return n.createElement(n.Fragment,null,g.map((u,E)=>n.createElement(o.R,{key:E,link:u})),n.createElement("div",{className:d.wrapper},n.createElement("p",{className:d.externalLinksHeading},"External links"),c.map((u,E)=>n.createElement("a",{key:E,href:u.href,target:u.target,className:d.externalLink},n.createElement(s.I,{name:"external-link-alt"}),u.title))))}const i=l=>({wrapper:(0,t.css)({flexBasis:"150px",width:"100px",marginTop:l.spacing(1)}),externalLinksHeading:(0,t.css)({color:l.colors.text.secondary,fontWeight:l.typography.fontWeightRegular,fontSize:l.typography.size.sm,margin:0}),externalLink:(0,t.css)({color:l.colors.text.link,fontWeight:l.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:l.spacing(1)}})})},19849:(Q,I,e)=>{"use strict";e.d(I,{i:()=>s});var t=e(96540),n=e(15292),r=e(14186);function s({options:o,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r.I,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:o.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.K,{value:o.jsonData.manageAlerts!==!1,onChange:i=>m({...o,jsonData:{...o.jsonData,manageAlerts:i.currentTarget.checked}})}))))))}},28623:(Q,I,e)=>{"use strict";e.d(I,{K:()=>i});var t=e(96540),n=e(55852),r=e(14186),s=e(39268),o=e(10354),m=e(21744);const i=({hasCert:l,label:d,onChange:c,onClick:g,placeholder:u})=>t.createElement(s.C,null,t.createElement(r.I,{label:d,labelWidth:14,disabled:l},l?t.createElement(o.p,{type:"text",value:"configured",width:24}):t.createElement(m.f,{rows:7,onChange:c,placeholder:u,required:!0})),l&&t.createElement(n.$n,{variant:"secondary",onClick:g,style:{marginLeft:4}},"Reset"))},11184:(Q,I,e)=>{"use strict";e.d(I,{P:()=>u});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(55852),i=e(90090),l=e(14578),d=e(56286);const c=()=>({layout:(0,t.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),g=({header:p,onBlur:b,onChange:a,onRemove:h,onReset:P})=>{const y=(0,o.of)(c);return s.createElement("div",{className:y.layout},s.createElement(i.z,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:C=>a({...p,name:C.target.value}),onBlur:b}),s.createElement(d.L,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>P(p.id),onChange:C=>a({...p,value:C.target.value}),onBlur:b}),s.createElement(m.$n,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:C=>h(p.id)},s.createElement(l.I,{name:"trash-alt"})))};g.displayName="CustomHeaderRow";class u extends s.PureComponent{constructor(b){super(b),this.state={headers:[]},this.updateSettings=()=>{const{headers:y}=this.state,C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([D,T])=>!D.startsWith("httpHeaderName"))),f=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([D,T])=>!D.startsWith("httpHeaderValue")));for(const[D,T]of y.entries())C[`httpHeaderName${D+1}`]=T.name,T.configured||(f[`httpHeaderValue${D+1}`]=T.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:C,secureJsonData:f})},this.onHeaderAdd=()=>{this.setState(y=>({headers:[...y.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(y,C)=>{this.setState(({headers:f})=>({headers:f.map((D,T)=>y!==T?D:{...C})}))},this.onHeaderReset=y=>{this.setState(({headers:C})=>({headers:C.map((f,D)=>f.id!==y?f:{...f,value:"",configured:!1})}))},this.onHeaderRemove=y=>{this.setState(({headers:C})=>({headers:C.filter(f=>f.id!==y)}),this.updateSettings)};const{jsonData:a,secureJsonData:h,secureJsonFields:P}=this.props.dataSourceConfig;this.state={headers:Object.keys(a).sort().filter(y=>y.startsWith("httpHeaderName")).map((y,C)=>({id:(0,n.uniqueId)(),name:a[y],value:h!==void 0?h[y]:"",configured:P&&P[`httpHeaderValue${C+1}`]||!1}))}}render(){const{headers:b}=this.state,{dataSourceConfig:a}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,b.map((h,P)=>s.createElement(g,{key:h.id,header:h,onChange:y=>{this.onHeaderChange(P,y)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!a.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(m.$n,{variant:"secondary",icon:"plus",type:"button",onClick:h=>{this.onHeaderAdd()}},"Add header")))}}var E=null},91409:(Q,I,e)=>{"use strict";e.d(I,{t:()=>M});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(90090),m=e(38894),i=e(14186),l=e(91634),d=e(14578),c=e(88323),g=e(15292),u=e(79924),E=e(56286);const p=({dataSourceConfig:O,onChange:S})=>{const v=O.secureJsonData?O.secureJsonData.basicAuthPassword:"",x=()=>{S({...O,secureJsonData:{...O.secureJsonData,basicAuthPassword:""},secureJsonFields:{...O.secureJsonFields,basicAuthPassword:!1}})},A=R=>{S({...O,secureJsonData:{...O.secureJsonData,basicAuthPassword:R.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(i.I,{disabled:O.readOnly},n.createElement(o.z,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:O.basicAuthUser,onChange:R=>S({...O,basicAuthUser:R.currentTarget.value})})),n.createElement(i.I,{disabled:O.readOnly},n.createElement(E.L,{isConfigured:!!(O.secureJsonFields&&O.secureJsonFields.basicAuthPassword),value:v||"",inputWidth:18,labelWidth:10,onReset:x,onChange:A})))};var b=e(11184);const a=26,h=({dataSourceConfig:O,onChange:S,showForwardOAuthIdentityOption:v=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"TLS Client Auth",labelWidth:a,disabled:O.readOnly},n.createElement(g.K,{id:"http-settings-tls-client-auth",value:O.jsonData.tlsAuth||!1,onChange:x=>S({...O.jsonData,tlsAuth:x.currentTarget.checked})})),n.createElement(i.I,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:a,disabled:O.readOnly},n.createElement(g.K,{id:"http-settings-ca-cert",value:O.jsonData.tlsAuthWithCACert||!1,onChange:x=>S({...O.jsonData,tlsAuthWithCACert:x.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"Skip TLS Verify",labelWidth:a,disabled:O.readOnly},n.createElement(g.K,{id:"http-settings-skip-tls-verify",value:O.jsonData.tlsSkipVerify||!1,onChange:x=>S({...O.jsonData,tlsSkipVerify:x.currentTarget.checked})}))),v&&n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:a,disabled:O.readOnly},n.createElement(g.K,{id:"http-settings-forward-oauth",value:O.jsonData.oauthPassThru||!1,onChange:x=>S({...O.jsonData,oauthPassThru:x.currentTarget.checked})}))));var P=e(17081),y=e(95180);const C=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],f={label:"Server (default)",value:"proxy"},D=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),T=26,M=O=>{const{defaultUrl:S,dataSourceConfig:v,onChange:x,showAccessOptions:A,sigV4AuthToggleEnabled:R,showForwardOAuthIdentityOption:B,azureAuthSettings:U,renderSigV4Editor:w,secureSocksDSProxyEnabled:K,urlLabel:N,urlDocs:L}=O,[V,F]=(0,n.useState)(!1),[z,Y]=(0,n.useState)(!1),H=(0,s.$j)();let k;const ee=(0,n.useCallback)(ne=>{const te=U?.azureAuthSupported&&U.getAzureAuthEnabled(v)||!1;if(Y(te),te){const oe=v.jsonData.oauthPassThru!==void 0?v.jsonData.oauthPassThru:!1;ne={...ne,jsonData:{...v.jsonData,oauthPassThru:te?!1:oe}}}x({...v,...ne})},[U,v,x]);switch(v.access){case"direct":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",L);break;case"proxy":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",L);break;default:k=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",L)}const ie=n.createElement(c.l6,{"aria-label":"Access",className:"width-20 gf-form-input",options:C,value:C.filter(ne=>ne.value===v.access)[0]||f,onChange:ne=>ee({access:ne.value}),disabled:v.readOnly}),fe=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(v.url),q=(0,t.css)({boxShadow:`inset 0 0px 5px ${H.v1.palette.red}`}),Z=(0,t.cx)({"width-20":!0,[q]:!fe}),J=(0,n.useId)(),G=n.createElement(l.p,{id:J,className:Z,placeholder:S,value:v.url,"data-testid":r.Tp.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ne=>ee({url:ne.currentTarget.value}),disabled:v.readOnly});return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(o.z,{interactive:!!L,label:N??"URL",labelWidth:13,tooltip:k,inputEl:G})),A&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(o.z,{label:"Access",labelWidth:13,inputWidth:20,inputEl:ie})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>F(ne=>!ne)},"Help\xA0",n.createElement(d.I,{name:V?"angle-down":"angle-right",style:{marginBottom:0}})))),V&&n.createElement(D,null)),v.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(u.u,{tags:v.jsonData.keepCookies,width:40,onChange:ne=>ee({jsonData:{...v.jsonData,keepCookies:ne}}),disabled:v.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(o.z,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:v.jsonData.timeout,onChange:ne=>{ee({jsonData:{...v.jsonData,timeout:parseInt(ne.currentTarget.value,10)}})},disabled:v.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"Basic auth",labelWidth:T,disabled:v.readOnly},n.createElement(g.K,{id:"http-settings-basic-auth",value:v.basicAuth,onChange:ne=>{ee({basicAuth:ne.currentTarget.checked})}})),n.createElement(i.I,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:T,disabled:v.readOnly},n.createElement(g.K,{id:"http-settings-with-credentials",value:v.withCredentials,onChange:ne=>{ee({withCredentials:ne.currentTarget.checked})}}))),U?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:T,disabled:v.readOnly},n.createElement(g.K,{id:"http-settings-azure-auth",value:z,onChange:ne=>{ee(U.setAzureAuthEnabled(v,ne.currentTarget.checked))}}))),R&&n.createElement("div",{className:"gf-form-inline"},n.createElement(i.I,{label:"SigV4 auth",labelWidth:T,disabled:v.readOnly},n.createElement(g.K,{id:"http-settings-sigv4-auth",value:v.jsonData.sigV4Auth||!1,onChange:ne=>{ee({jsonData:{...v.jsonData,sigV4Auth:ne.currentTarget.checked}})}}))),v.access==="proxy"&&n.createElement(h,{dataSourceConfig:v,onChange:ne=>ee({jsonData:ne}),showForwardOAuthIdentityOption:z?!1:B})),v.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(p,{...O}))),U?.azureAuthSupported&&z&&U.azureSettingsUI&&n.createElement(U.azureSettingsUI,{dataSourceConfig:v,onChange:x}),v.jsonData.sigV4Auth&&R&&w,(v.jsonData.tlsAuth||v.jsonData.tlsAuthWithCACert)&&n.createElement(y.j,{dataSourceConfig:v,onChange:x}),v.access==="proxy"&&n.createElement(b.P,{dataSourceConfig:v,onChange:x})),K&&n.createElement(P.Y,{options:v,onOptionsChange:x}))}},17081:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>s});var t=e(96540),n=e(15292),r=e(14186);function s({options:o,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r.I,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.K,{value:o.jsonData.enableSecureSocksProxy??!1,onChange:i=>m({...o,jsonData:{...o.jsonData,enableSecureSocksProxy:i.currentTarget.checked}})}))))))}},95180:(Q,I,e)=>{"use strict";e.d(I,{j:()=>i});var t=e(32196),n=e(96540),r=e(90090),s=e(14578),o=e(56034),m=e(28623);const i=({dataSourceConfig:l,onChange:d})=>{const c=l.secureJsonFields&&l.secureJsonFields.tlsCACert,g=l.secureJsonFields&&l.secureJsonFields.tlsClientCert,u=l.secureJsonFields&&l.secureJsonFields.tlsClientKey,E=l.jsonData&&l.jsonData.serverName,p=h=>P=>{P.preventDefault();const y={...l.secureJsonFields};y[h]=!1,d({...l,secureJsonFields:y})},b=h=>P=>{const y={...l.secureJsonData};y[h]=P.currentTarget.value,d({...l,secureJsonData:y})},a=h=>{const P={...l.jsonData,serverName:h.currentTarget.value};d({...l,jsonData:P})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",(0,t.css)({alignItems:"baseline"}))},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(o.m,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement(s.I,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),n.createElement("div",null,l.jsonData.tlsAuthWithCACert&&n.createElement(m.K,{hasCert:!!c,onChange:b("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),l.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(r.z,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:E&&l.jsonData.serverName,onChange:a})),n.createElement(m.K,{hasCert:!!g,label:"Client Cert",onChange:b("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),n.createElement(m.K,{hasCert:!!u,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:b("tlsClientKey"),onClick:p("tlsClientKey")}))))}},56181:(Q,I,e)=>{"use strict";e.d(I,{l:()=>l});var t=e(32196),n=e(96540),r=e(29426),s=e(40845),o=e(8866),m=e(14578),i=e(72265);const l=(0,n.memo)(g=>{const u=(0,s.of)(c),{isOpen:E,onClose:p}=g;return E?n.createElement(o.N,{useCapture:!0,includeButtonPress:!1,onClick:p},n.createElement("div",{className:u.modal,"data-testid":"date-picker"},n.createElement(d,{...g}))):null});l.displayName="DatePicker";const d=(0,n.memo)(({value:g,minDate:u,maxDate:E,onChange:p})=>{const b=(0,s.of)(i.h2);return n.createElement(r.Ay,{className:b.body,tileClassName:b.title,value:g||new Date,minDate:u,maxDate:E,nextLabel:n.createElement(m.I,{name:"angle-right"}),prevLabel:n.createElement(m.I,{name:"angle-left"}),onChange:a=>{a&&!Array.isArray(a)&&p(a)},locale:"en"})});d.displayName="Body";const c=g=>({modal:(0,t.css)({zIndex:g.zIndex.modal,boxShadow:g.shadows.z3,backgroundColor:g.colors.background.primary,border:`1px solid ${g.colors.border.weak}`,borderTopLeftRadius:g.shape.radius.default,borderBottomLeftRadius:g.shape.radius.default,"button:disabled":{color:g.colors.text.disabled}})})},98239:(Q,I,e)=>{"use strict";e.d(I,{l:()=>c});var t=e(32196),n=e(18491),r=e(36376),s=e(96540),o=e(47232),m=e(40845),i=e(10354),l=e(56181);const d=u=>(0,o.KQ)(u).format("L"),c=({value:u,minDate:E,maxDate:p,onChange:b,closeOnSelect:a,placeholder:h="Date",...P})=>{const[y,C]=(0,s.useState)(!1),f=(0,m.of)(g),D=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{context:T,refs:M,floatingStyles:O}=(0,r.we)({open:y,placement:"bottom-start",onOpenChange:C,middleware:D,whileElementsMounted:n.ll,strategy:"fixed"}),S=(0,r.kp)(T),v=(0,r.s9)(T),{getReferenceProps:x,getFloatingProps:A}=(0,r.bv)([v,S]);return s.createElement("div",{className:f.container},s.createElement(i.p,{ref:M.setReference,type:"text",autoComplete:"off",placeholder:h,value:u&&d(u),onChange:R=>{R.target.value===""&&b("")},className:f.input,...P,...x()}),s.createElement("div",{className:f.popover,ref:M.setFloating,style:O,...A()},s.createElement(l.l,{isOpen:y,value:u&&typeof u!="string"?u:(0,o.KQ)().toDate(),minDate:E,maxDate:p,onChange:R=>{b(R),a&&C(!1)},onClose:()=>C(!1)})))},g=u=>({container:(0,t.css)({position:"relative"}),input:(0,t.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}}),popover:(0,t.css)({zIndex:u.zIndex.tooltip})})},63383:(Q,I,e)=>{"use strict";e.d(I,{K:()=>S});var t=e(32196),n=e(18491),r=e(36376),s=e(80279),o=e(7887),m=e(87073),i=e(96540),l=e(29426),d=e(49045),c=e(72724),g=e(47232),u=e(1933),E=e(13390),p=e(40845),b=e(55852),a=e(14186),h=e(14578),P=e(10354),y=e(66864),C=e(88448),f=e(17464),D=e(66070),T=e(72265),M=e(47619),O=e(99225);const S=({date:R,maxDate:B,minDate:U,label:w,onChange:K,disabledHours:N,disabledMinutes:L,disabledSeconds:V,showSeconds:F=!0})=>{const[z,Y]=(0,i.useState)(!1),H=(0,i.useRef)(null),{overlayProps:k,underlayProps:ee}=(0,m.e)({onClose:()=>Y(!1),isDismissable:!0,isOpen:z,shouldCloseOnInteractOutside:ue=>{const Te=document.getElementsByClassName(D.i)[0];return!(Te&&Te.contains(ue))}},H),{dialogProps:ie}=(0,s.s)({},H),fe=(0,p.$j)(),{modalBackdrop:q}=(0,p.of)(C.o),Z=(0,d.A)(`(min-width: ${fe.breakpoints.values.lg}px)`),J=(0,p.of)(A),G=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{refs:ne,floatingStyles:te}=(0,r.we)({open:z,placement:"bottom-start",onOpenChange:Y,middleware:G,whileElementsMounted:n.ll,strategy:"fixed"}),oe=(0,i.useCallback)(ue=>{Y(!1),K(ue)},[K]),le=(0,i.useCallback)(ue=>{ue.preventDefault(),Y(!0)},[Y]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(v,{date:R,onChange:K,isFullscreen:Z,onOpen:le,label:w,ref:ne.setReference,showSeconds:F}),z?Z?i.createElement(f.ZL,null,i.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:H,...k,...ie},i.createElement(x,{date:R,onChange:oe,isFullscreen:!0,onClose:()=>Y(!1),maxDate:B,minDate:U,ref:ne.setFloating,style:te,showSeconds:F,disabledHours:N,disabledMinutes:L,disabledSeconds:V})))):i.createElement(f.ZL,null,i.createElement("div",{className:q,...ee}),i.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:H,...k,...ie},i.createElement("div",{className:J.modal},i.createElement(x,{date:R,maxDate:B,minDate:U,onChange:oe,isFullscreen:!1,onClose:()=>Y(!1),showSeconds:F,disabledHours:N,disabledMinutes:L,disabledSeconds:V}))))):null)},v=i.forwardRef(({date:R,label:B,onChange:U,onOpen:w,showSeconds:K=!0},N)=>{const L=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[V,F]=(0,i.useState)(()=>({value:R?(0,c.LE)(R):(0,c.LE)((0,g.KQ)()),invalid:!1}));(0,i.useEffect)(()=>{R&&F({invalid:!(0,M.f)((0,c.LE)(R,{format:L})),value:(0,g.Ar)(R)?(0,c.LE)(R,{format:L}):R})},[R,L]);const z=(0,i.useCallback)(k=>{const ee=!(0,M.f)(k.currentTarget.value);F({value:k.currentTarget.value,invalid:ee})},[]),Y=(0,i.useCallback)(()=>{if(!V.invalid){const k=(0,g.oZ)((0,u.O)(),V.value);U(k)}},[V,U]),H=i.createElement(b.$n,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:w});return i.createElement(a.I,{label:B,invalid:!!(V.value&&V.invalid),className:(0,t.css)({marginBottom:0})},i.createElement(P.p,{onChange:z,addonAfter:H,value:V.value,onBlur:Y,"data-testid":E.X.DateTimePicker.input,placeholder:"Select date/time",ref:N}))});v.displayName="DateTimeInput";const x=i.forwardRef(({date:R,onClose:B,onChange:U,isFullscreen:w,maxDate:K,minDate:N,style:L,showSeconds:V=!0,disabledHours:F,disabledMinutes:z,disabledSeconds:Y},H)=>{const k=(0,p.of)(T.h2),ee=(0,p.of)(A),[ie,fe]=(0,i.useState)(()=>R&&R.isValid()?(0,g.oZ)((0,u.O)(),R):(0,g.oZ)((0,u.O)(),new Date)),[q,Z]=(0,i.useState)(()=>R&&R.isValid()?(0,O.Q)(R.toDate(),(0,u.O)()):new Date),J=(0,i.useCallback)(te=>{te&&!Array.isArray(te)&&Z(te)},[]),G=(0,i.useCallback)(te=>{fe(te)},[]),ne=()=>{const te=(0,g.KQ)(ie);te.set("date",q.getDate()),te.set("month",q.getMonth()),te.set("year",q.getFullYear()),U(te)};return i.createElement("div",{className:(0,t.cx)(ee.container,{[ee.fullScreen]:w}),style:L,ref:H},i.createElement(l.Ay,{next2Label:null,prev2Label:null,value:q,nextLabel:i.createElement(h.I,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(h.I,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:J,locale:"en",className:k.body,tileClassName:k.title,maxDate:K,minDate:N}),i.createElement("div",{className:ee.time},i.createElement(D.R,{showSeconds:V,onChange:G,value:ie,disabledHours:F,disabledMinutes:z,disabledSeconds:Y})),i.createElement(y.Gy,null,i.createElement(b.$n,{type:"button",onClick:ne},"Apply"),i.createElement(b.$n,{variant:"secondary",type:"button",onClick:B},"Cancel")))});x.displayName="DateTimeCalendar";const A=R=>({container:(0,t.css)({padding:R.spacing(1),border:`1px ${R.colors.border.weak} solid`,borderRadius:R.shape.radius.default,backgroundColor:R.colors.background.primary,zIndex:R.zIndex.modal}),fullScreen:(0,t.css)({position:"absolute"}),time:(0,t.css)({marginBottom:R.spacing(2)}),modal:(0,t.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:R.zIndex.modal,maxWidth:"280px"})})},5308:(Q,I,e)=>{"use strict";e.d(I,{N:()=>x});var t=e(32196),n=e(18491),r=e(36376),s=e(80279),o=e(7887),m=e(87073),i=e(96540),l=e(40845),d=e(76412),c=e(55852),g=e(40276),u=e(88575),E=e(14578),p=e(10354),b=e(56034),a=e(42617),h=e(65172),P=e(32432);const y=/^now$|^now\-(\d{1,10})([wdhms])$/,C=w=>({from:M(w.from),to:M(w.to)}),f=w=>{const K=S(w.from),N=S(w.to);return{from:K,to:N,display:`${K} to ${N}`}},D=(w,K=Date.now())=>T(w)?M(w)>Math.ceil(K/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},T=w=>y.test(w),M=w=>{const K=y.exec(w);if(!K||K.length!==3)return 0;const[,N,L]=K,V=parseInt(N,10);return isNaN(V)?0:V*O[L]},O={w:604800,d:86400,h:3600,m:60,s:1},S=w=>w<=0?"now":w>=O.w&&w%O.w===0?`now-${w/O.w}w`:w>=O.d&&w%O.d===0?`now-${w/O.d}d`:w>=O.h&&w%O.h===0?`now-${w/O.h}h`:w>=O.m&&w%O.m===0?`now-${w/O.m}m`:`now-${w}s`,v=P.o.filter(w=>T(w.from));function x(w){const{timeRange:K,onChange:N}=w,[L,V]=(0,i.useState)(!1),F=(0,i.useCallback)(()=>V(!1),[]),z=f(K),[Y,H]=(0,i.useState)({value:z.from,validation:D(z.from)}),[k,ee]=(0,i.useState)({value:z.to,validation:D(z.to)}),ie=(0,i.useRef)(null),{overlayProps:fe,underlayProps:q}=(0,m.e)({onClose:()=>V(!1),isDismissable:!0,isOpen:L},ie),{dialogProps:Z}=(0,s.s)({},ie),J=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{context:G,refs:ne,floatingStyles:te}=(0,r.we)({open:L,placement:"bottom-start",onOpenChange:V,middleware:J,whileElementsMounted:n.ll,strategy:"fixed"}),oe=(0,r.kp)(G),le=(0,r.s9)(G),{getReferenceProps:ue,getFloatingProps:Te}=(0,r.bv)([le,oe]),he=(0,l.of)(B(Y.validation.errorMessage,k.validation.errorMessage)),re=Ee=>{const Me=C(Ee);Me&&(F(),H({...Y,value:Ee.from}),ee({...k,value:Ee.to}),N(Me))},De=(0,i.useCallback)(Ee=>{Ee.stopPropagation(),Ee.preventDefault(),V(!L)},[L]),Fe=Ee=>{if(Ee.preventDefault(),!k.validation.isValid||!Y.validation.isValid)return;const Me=C({from:Y.value,to:k.value,display:""});Me&&(N(Me),V(!1))};return i.createElement("div",{className:he.container},i.createElement("button",{ref:ne.setReference,className:he.pickerInput,type:"button",onClick:De,...ue()},i.createElement("span",{className:he.clockIcon},i.createElement(E.I,{name:"clock-nine"})),i.createElement("span",null,z.from," to ",z.to),i.createElement("span",{className:he.caretIcon},i.createElement(E.I,{name:L?"angle-up":"angle-down",size:"lg"}))),L&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:he.backdrop,...q}),i.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:ie,...fe,...Z},i.createElement("div",{className:he.content,ref:ne.setFloating,style:te,...Te()},i.createElement("div",{className:he.body},i.createElement(g.A,{className:he.leftSide,hideHorizontalTrack:!0},i.createElement(h.l,{title:(0,d.t)("time-picker.time-range.example-title","Example time ranges"),options:v,onChange:re,value:z})),i.createElement("div",{className:he.rightSide},i.createElement("div",{className:he.title},i.createElement(a.e,null,i.createElement(b.m,{content:i.createElement(A,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(d.x,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(E.I,{name:"info-circle"})))))),i.createElement(u.D,{label:"From",invalid:!Y.validation.isValid,error:Y.validation.errorMessage},i.createElement(p.p,{onClick:Ee=>Ee.stopPropagation(),onBlur:()=>H({...Y,validation:D(Y.value)}),onChange:Ee=>H({...Y,value:Ee.currentTarget.value}),value:Y.value})),i.createElement(u.D,{label:"To",invalid:!k.validation.isValid,error:k.validation.errorMessage},i.createElement(p.p,{onClick:Ee=>Ee.stopPropagation(),onBlur:()=>ee({...k,validation:D(k.value)}),onChange:Ee=>ee({...k,value:Ee.currentTarget.value}),value:k.value})),i.createElement(c.$n,{"aria-label":"TimePicker submit button",onClick:Fe},"Apply time range"))))))))}const A=()=>{const w=(0,l.of)(R);return i.createElement(i.Fragment,null,i.createElement("div",{className:w.supported},"Supported formats: ",i.createElement("code",{className:w.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:w.tooltip},"From: now-10m To: now"),i.createElement("div",{className:w.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(E.I,{name:"external-link-alt"})),"."))},R=w=>({supported:(0,t.css)({marginBottom:w.spacing(1)}),tooltip:(0,t.css)({margin:0}),link:(0,t.css)({marginTop:w.spacing(1)})}),B=(w,K)=>N=>{const L=(0,p.n)({theme:N,invalid:!1}),F=250+U(N,w)+U(N,K);return{backdrop:(0,t.css)({position:"fixed",zIndex:N.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,t.css)({display:"flex",position:"relative"}),pickerInput:(0,t.cx)(L.input,L.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${N.spacing.gridSize*N.components.height.md-2}px`})),caretIcon:(0,t.cx)(L.suffix,(0,t.css)({position:"relative",marginLeft:N.spacing(.5)})),clockIcon:(0,t.cx)(L.prefix,(0,t.css)({position:"relative",marginRight:N.spacing(.5)})),content:(0,t.css)({background:N.colors.background.primary,boxShadow:N.shadows.z3,position:"absolute",zIndex:N.zIndex.modal,width:"500px",top:"100%",borderRadius:N.shape.radius.default,border:`1px solid ${N.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,t.css)({display:"flex",height:`${F}px`}),description:(0,t.css)({color:N.colors.text.secondary,fontSize:N.typography.size.sm}),leftSide:(0,t.css)({width:"50% !important",borderRight:`1px solid ${N.colors.border.medium}`}),rightSide:(0,t.css)({width:"50%",padding:N.spacing(1)}),title:(0,t.css)({marginBottom:N.spacing(1)})}};function U(w,K){return K?K.length>34?w.spacing.gridSize*6.5:w.spacing.gridSize*4:0}},66070:(Q,I,e)=>{"use strict";e.d(I,{R:()=>c,i:()=>d});var t=e(32196),n=e(79770),r=e(96540),s=e(47232),o=e(40845),m=e(16797),i=e(87266),l=e(14578);const d="time-of-day-picker-panel",c=({minuteStep:E=1,showHour:p=!0,showSeconds:b=!1,onChange:a,value:h,size:P="auto",disabled:y,disabledHours:C,disabledMinutes:f,disabledSeconds:D})=>{const T=(0,o.of)(u);return r.createElement(n.A,{className:(0,t.cx)((0,i.lH)()[P],T.input),popupClassName:(0,t.cx)(T.picker,d),defaultValue:(0,s.AN)(),onChange:M=>{if((0,s.u8)(M))return a((0,s.KQ)(M))},allowEmpty:!1,showSecond:b,value:(0,s.AN)(h),showHour:p,minuteStep:E,inputIcon:r.createElement(g,{wrapperStyle:T.caretWrapper}),disabled:y,disabledHours:C,disabledMinutes:f,disabledSeconds:D})},g=({wrapperStyle:E=""})=>r.createElement("div",{className:E},r.createElement(l.I,{name:"angle-down"})),u=E=>{const p=E.components.input.background,b=E.v1.palette.black,a=E.colors.background.secondary,h=E.shape.radius.default,P=E.components.input.borderColor;return{caretWrapper:(0,t.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:E.colors.text.secondary}),picker:(0,t.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:p,color:E.colors.text.secondary,borderColor:P,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${E.v1.palette.orange}`,borderRadius:h,color:E.colors.text.primary},"&:hover":{background:a,color:E.colors.text.primary},"&.rc-time-picker-panel-select-option-disabled":{color:E.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${b}`,backgroundColor:p,borderColor:P,borderRadius:h,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:p,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,t.css)({".rc-time-picker-input":{backgroundColor:p,borderRadius:h,borderColor:P,color:E.colors.text.primary,height:E.spacing(4),"&:focus":(0,m.getFocusStyles)(E),"&:disabled":{backgroundColor:E.colors.action.disabledBackground,color:E.colors.action.disabledText,border:`1px solid ${E.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},54230:(Q,I,e)=>{"use strict";e.d(I,{b:()=>b});var t=e(32196),n=e(96540),r=e(47232),s=e(43127),o=e(13544),m=e(40845),i=e(8866),l=e(14578),d=e(10354),c=e(85068),g=e(3799),u=e(32432),E=e(47619);const p=()=>{},b=({value:h,onChange:P,onChangeTimeZone:y=p,clearable:C,hideTimeZone:f=!0,timeZone:D="browser",placeholder:T="Select time range",isReversed:M=!0,hideQuickRanges:O=!1,disabled:S=!1,showIcon:v=!1})=>{const[x,A]=(0,n.useState)(!1),R=(0,m.of)(a,S),B=N=>{N.stopPropagation(),N.preventDefault(),!S&&A(!x)},U=()=>{A(!1)},w=N=>{U(),P(N)},K=N=>{N.stopPropagation();const L=(0,r.KQ)(null),V=(0,r.KQ)(null);P({from:L,to:V,raw:{from:L,to:V}})};return n.createElement("div",{className:R.container},n.createElement("button",{type:"button",className:R.pickerInput,"data-testid":o.Tp.components.TimePicker.openButton,onClick:B},v&&n.createElement(l.I,{name:"clock-nine",size:"sm",className:R.icon}),n.createElement(g.f,{value:h,timeZone:D,placeholder:T}),!S&&n.createElement("span",{className:R.caretIcon},(0,E.X)(h)&&C&&n.createElement(l.I,{className:R.clearIcon,name:"times",size:"lg",onClick:K}),n.createElement(l.I,{name:x?"angle-up":"angle-down",size:"lg"}))),x&&n.createElement(i.N,{includeButtonPress:!1,onClick:U},n.createElement(c.r,{timeZone:D,value:(0,E.X)(h)?h:(0,s.E2)(),onChange:w,quickOptions:u.o,onChangeTimeZone:y,className:R.content,hideTimeZone:f,isReversed:M,hideQuickRanges:O})))},a=(h,P=!1)=>{const y=(0,d.n)({theme:h,invalid:!1});return{container:(0,t.css)({display:"flex",position:"relative"}),content:(0,t.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:h.zIndex.dropdown}),pickerInput:(0,t.cx)(y.input,P&&y.inputDisabled,y.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${h.spacing.gridSize*4-2}px`})),caretIcon:(0,t.cx)(y.suffix,(0,t.css)({position:"relative",top:"-1px",marginLeft:h.spacing(.5)})),clearIcon:(0,t.css)({marginRight:h.spacing(.5),"&:hover":{color:h.colors.text.maxContrast}}),placeholder:(0,t.css)({color:h.colors.text.disabled,opacity:1}),icon:(0,t.css)({marginRight:h.spacing(.5)})}}},15666:(Q,I,e)=>{"use strict";e.d(I,{$6:()=>y,_8:()=>D,xS:()=>f});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(65879),i=e(72724),l=e(91410),d=e(85858),c=e(13544),g=e(40845),u=e(76412),E=e(19727),p=e(88448),b=e(27746),a=e(56034),h=e(85068),P=e(32432);function y(S){const[v,x]=(0,o.useState)(!1),{value:A,onMoveBackward:R,onMoveForward:B,onZoom:U,onError:w,timeZone:K,fiscalYearStartMonth:N,timeSyncButton:L,isSynced:V,history:F,onChangeTimeZone:z,onChangeFiscalYearStartMonth:Y,hideQuickRanges:H,widthOverride:k,isOnCanvas:ee,onToolbarTimePickerClick:ie}=S,fe=Ee=>{S.onChange(Ee),x(!1)};(0,o.useEffect)(()=>{v&&ie&&ie()},[v,ie]);const q=()=>{x(Ee=>!Ee)},Z=()=>{x(!1)},J=(0,o.createRef)(),G=(0,o.createRef)(),{overlayProps:ne,underlayProps:te}=(0,s.e)({onClose:Z,isDismissable:!0,isOpen:v,shouldCloseOnInteractOutside:Ee=>!G.current?.contains(Ee)},J),{dialogProps:oe}=(0,n.s)({},J),le=(0,g.of)(M),{modalBackdrop:ue}=(0,g.of)(p.o),Te=!m.isRelativeTime(A.raw.from)||!m.isRelativeTime(A.raw.to),he=V?"active":ee?"canvas":"default",De=A?.to?.isBefore(A.from)?"exclamation-triangle":"clock-nine",Fe=T(A,K);return o.createElement(E.e,{className:le.container},Te&&o.createElement(b.I,{"aria-label":(0,u.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:he,onClick:R,icon:"angle-left",narrow:!0}),o.createElement(a.m,{ref:G,content:o.createElement(f,{timeRange:A,timeZone:K}),placement:"bottom",interactive:!0},o.createElement(b.I,{"data-testid":c.Tp.components.TimePicker.openButton,"aria-label":(0,u.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Fe}),"aria-controls":"TimePickerContent",onClick:q,icon:De,isOpen:v,variant:he},o.createElement(D,{...S}))),v&&o.createElement("div",{"data-testid":c.Tp.components.TimePicker.overlayContent},o.createElement("div",{role:"presentation",className:(0,t.cx)(ue,le.backdrop),...te}),o.createElement(r.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{className:le.content,ref:J,...ne,...oe},o.createElement(h.r,{timeZone:K,fiscalYearStartMonth:N,value:A,onChange:fe,quickOptions:P.o,history:F,showHistory:!0,widthOverride:k,onChangeTimeZone:z,onChangeFiscalYearStartMonth:Y,hideQuickRanges:H,onError:w})))),L,Te&&o.createElement(b.I,{"aria-label":(0,u.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:B,icon:"angle-right",narrow:!0,variant:he}),o.createElement(a.m,{content:C,placement:"bottom"},o.createElement(b.I,{"aria-label":(0,u.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:U,icon:"search-minus",variant:he})))}y.displayName="TimeRangePicker";const C=()=>o.createElement(o.Fragment,null,o.createElement(u.x,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",o.createElement("br",null)," CTRL+Z")),f=({timeRange:S,timeZone:v})=>{const x=(0,g.of)(O);return o.createElement(o.Fragment,null,(0,i.LE)(S.from,{timeZone:v}),o.createElement("div",{className:"text-center"},o.createElement(u.x,{i18nKey:"time-picker.range-picker.to"},"to")),(0,i.LE)(S.to,{timeZone:v}),o.createElement("div",{className:"text-center"},o.createElement("span",{className:x.utc},(0,l.le)(v))))},D=(0,o.memo)(({hideText:S,value:v,timeZone:x})=>{const A=(0,g.of)(O);return S?null:o.createElement("span",{className:A.container},o.createElement("span",null,T(v,x)),o.createElement("span",{className:A.utc},m.describeTimeRangeAbbreviation(v,x)))});D.displayName="TimePickerButtonLabel";const T=(S,v)=>{const x={to:d.isMathString(S.raw.to)?S.raw.to:S.to,from:d.isMathString(S.raw.from)?S.raw.from:S.from};return m.describeTimeRange(x,v)},M=S=>({container:(0,t.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,t.css)({display:"none",[S.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:S.zIndex.dropdown,[S.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:S.zIndex.modal}})}),O=S=>({container:(0,t.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,t.css)({color:S.v1.palette.orange,fontSize:S.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:S.typography.fontWeightMedium})})},72265:(Q,I,e)=>{"use strict";e.d(I,{h2:()=>u,nB:()=>l});var t=e(32196),n=e(96540),r=e(29426),s=e(53531),o=e(40845),m=e(14578),i=e(99225);function l({onChange:E,from:p,to:b,timeZone:a}){const h=d(p,b,new Date,a),P=c(E,a),y=(0,o.of)(u);return n.createElement(r.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:y.body,tileClassName:y.title,value:h,nextLabel:n.createElement(m.I,{name:"angle-right"}),prevLabel:n.createElement(m.I,{name:"angle-left"}),onChange:P,locale:"en"})}l.displayName="Body";function d(E,p,b=new Date,a){let h=E.isValid()?E.toDate():b,P=p.isValid()?p.toDate():b;return a&&(h=(0,i.Q)(h,a),P=(0,i.Q)(P,a)),h>P?[P,h]:[h,P]}function c(E,p){return(0,n.useCallback)(b=>{if(!Array.isArray(b))return console.error("onCalendarChange: should be run in selectRange={true}");if(b[0]&&b[1]){const a=(0,s.b)(g(b[0]),{timeZone:p}),h=(0,s.b)(g(b[1]),{timeZone:p});E(a,h)}},[E,p])}function g(E){return[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds()]}const u=E=>{const p=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,t.css)({color:E.colors.text.primary,backgroundColor:E.colors.background.primary,fontSize:E.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:E.colors.action.disabledText}}),body:(0,t.css)({zIndex:E.zIndex.modal,backgroundColor:E.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:E.colors.text.primary,border:0,fontWeight:E.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:E.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${p}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,abbr:{backgroundColor:E.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${p}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${p}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},85068:(Q,I,e)=>{"use strict";e.d(I,{r:()=>le});var t=e(32196),n=e(96540),r=e(47232),s=e(65879),o=e(13544),m=e(40845),i=e(16797),l=e(76412),d=e(40276),c=e(67647),g=e(14578),u=e(2543),E=e(91410),p=e(55852),b=e(88575),a=e(94354),h=e(88323),P=e(20333),y=e(79451),C=e(17624),f=e(67459),D=e(32432);const T=xe=>{const{timeZone:We,fiscalYearStartMonth:be,timestamp:pe=Date.now(),onChangeTimeZone:Ue,onChangeFiscalYearStartMonth:we}=xe,[je,He]=(0,n.useState)(!1),[rt,Je]=(0,n.useState)("tz"),Ve=(0,n.useCallback)(ye=>{ye&&ye.stopPropagation(),He(!je)},[je,He]),Oe=(0,m.of)(M);if(!(0,u.isString)(We))return null;const Ne=(0,E.QZ)(We,pe);return Ne?n.createElement("div",null,n.createElement("section",{"aria-label":(0,l.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Oe.container},n.createElement("div",{className:Oe.timeZoneContainer},n.createElement("div",{className:Oe.timeZone},n.createElement(f.U,{title:Ne.name}),n.createElement("div",{className:Oe.spacer}),n.createElement(y.E,{info:Ne})),n.createElement(C.X,{timeZone:We,timestamp:pe})),n.createElement("div",{className:Oe.spacer}),n.createElement(p.$n,{"data-testid":o.Tp.components.TimeZonePicker.changeTimeSettingsButton,variant:"secondary",onClick:Ve,size:"sm"},n.createElement(l.x,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),je?n.createElement("div",{className:Oe.editContainer},n.createElement("div",null,n.createElement(a.z,{value:rt,options:[{label:(0,l.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,l.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Je})),rt==="tz"?n.createElement("section",{"data-testid":o.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer)},n.createElement(P.U,{includeInternal:!0,onChange:ye=>{Ve(),(0,u.isString)(ye)&&Ue(ye)},onBlur:Ve,menuShouldPortal:!1})):n.createElement("section",{"data-testid":o.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer)},n.createElement(b.D,{className:Oe.fiscalYearField,label:(0,l.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(h.l6,{value:be,menuShouldPortal:!1,options:D.Z,onChange:ye=>{we&&we(ye.value??0)}})))):null):null},M=xe=>({container:(0,t.css)({borderTop:`1px solid ${xe.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,t.css)({borderTop:`1px solid ${xe.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,t.css)({marginLeft:"7px"}),timeSettingContainer:(0,t.css)({paddingTop:xe.spacing(1)}),fiscalYearField:(0,t.css)({marginBottom:0}),timeZoneContainer:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var O=e(42617),S=e(53531),v=e(72724),x=e(10354),A=e(56034),R=e(47619),B=e(80279),U=e(7887),w=e(87073),K=e(88448),N=e(72265),L=e(67061);function V({onClose:xe,onApply:We}){return n.createElement(L.B,{gap:2,justifyContent:"space-between"},n.createElement(p.$n,{variant:"secondary",onClick:xe},n.createElement(l.x,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")),n.createElement(p.$n,{onClick:We},n.createElement(l.x,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")))}V.displayName="Footer";var F=e(29158);function z({onClose:xe}){return n.createElement(L.B,{justifyContent:"space-between"},n.createElement(O.e,null,n.createElement(l.x,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(F.K,{"data-testid":o.Tp.components.TimePicker.calendar.closeButton,tooltip:(0,l.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:xe}))}z.displayName="Header";const Y=(xe,We=!1)=>({container:(0,t.css)({top:0,position:"absolute",[`${We?"left":"right"}`]:"546px"}),modalContainer:(0,t.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,t.css)({display:"flex",flexDirection:"column",gap:xe.spacing(1),padding:xe.spacing(1),label:"calendar",boxShadow:xe.shadows.z3,backgroundColor:xe.colors.background.primary,border:`1px solid ${xe.colors.border.weak}`,borderRadius:xe.shape.radius.default}),modal:(0,t.css)({label:"modal",boxShadow:xe.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:xe.zIndex.modal})});function H(xe){const We=(0,m.$j)(),{modalBackdrop:be}=(0,m.of)(K.o),pe=Y(We,xe.isReversed),{isOpen:Ue,isFullscreen:we,onClose:je}=xe,He=n.createRef(),{dialogProps:rt}=(0,B.s)({"aria-label":o.Tp.components.TimePicker.calendar.label},He),{overlayProps:Je}=(0,w.e)({isDismissable:!0,isOpen:Ue,onClose:je},He),Ve=!we;if(!Ue)return null;const Oe=n.createElement("section",{className:pe.calendar,ref:He,...Je,...rt,"data-testid":o.Tp.components.TimePicker.calendar.label},n.createElement(z,{...xe}),n.createElement(N.nB,{...xe}),Ve&&n.createElement(V,{...xe}));return Ve?n.createElement(w.Sf,null,n.createElement("div",{className:be}),n.createElement(U.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{className:pe.modal},n.createElement("div",{className:pe.modalContainer},Oe)))):n.createElement(U.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("div",{className:pe.container},Oe))}const k=(0,n.memo)(H);H.displayName="TimePickerCalendar";const ee={default:()=>(0,l.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,l.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ie=xe=>{const{value:We,isFullscreen:be=!1,timeZone:pe,onApply:Ue,isReversed:we,fiscalYearStartMonth:je,onError:He}=xe,[rt,Je]=q(We.raw.from,We.raw.to,pe),Ve=(0,m.of)(J),[Oe,Ne]=(0,n.useState)(rt),[ye,se]=(0,n.useState)(Je),[ae,ge]=(0,n.useState)(!1),Pe=(0,n.useId)(),Re=(0,n.useId)();(0,n.useEffect)(()=>{const[Tt,Kt]=q(We.raw.from,We.raw.to,pe);Ne(Tt),se(Kt)},[We.raw.from,We.raw.to,pe]);const Be=(0,n.useCallback)(Tt=>{Tt.preventDefault(),ge(!0)},[ge]),_e=(0,n.useCallback)(()=>{if(ye.invalid||Oe.invalid)return;const Tt={from:Oe.value,to:ye.value},Kt=s.convertRawToRange(Tt,pe,je);Ue(Kt)},[Oe.invalid,Oe.value,Ue,pe,ye.invalid,ye.value,je]),Xe=(0,n.useCallback)((Tt,Kt)=>{const[Gt,_t]=q(Tt,Kt,pe);Ne(Gt),se(_t)},[pe]),tt=Tt=>{Tt.key==="Enter"&&_e()},at=()=>{const Tt={from:Oe.value,to:ye.value};navigator.clipboard.writeText(JSON.stringify(Tt))},st=async()=>{const Tt=await navigator.clipboard.readText();let Kt;try{Kt=JSON.parse(Tt)}catch{He&&He(Tt);return}const[Gt,_t]=q(Kt.from,Kt.to,pe);Ne(Gt),se(_t)},dt=s.convertRawToRange({from:"now/fy",to:"now/fy"},pe,je),ot=(0,l.t)("time-picker.range-content.fiscal-year","Fiscal year"),ft=n.createElement("div",{className:Ve.tooltip},s.isFiscal(We)?n.createElement(A.m,{content:`${ot}: ${dt.from.format("MMM-DD")} - ${dt.to.format("MMM-DD")}`},n.createElement(g.I,{name:"info-circle"})):null),yt=n.createElement(p.$n,{"aria-label":(0,l.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":o.Tp.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Be});return n.createElement("div",null,n.createElement("div",{className:Ve.fieldContainer},n.createElement(b.D,{label:(0,l.t)("time-picker.range-content.from-input","From"),invalid:Oe.invalid,error:Oe.errorMessage},n.createElement(x.p,{id:Pe,onClick:Tt=>Tt.stopPropagation(),onChange:Tt=>Xe(Tt.currentTarget.value,ye.value),addonAfter:yt,onKeyDown:tt,"data-testid":o.Tp.components.TimePicker.fromField,value:Oe.value})),ft),n.createElement("div",{className:Ve.fieldContainer},n.createElement(b.D,{label:(0,l.t)("time-picker.range-content.to-input","To"),invalid:ye.invalid,error:ye.errorMessage},n.createElement(x.p,{id:Re,onClick:Tt=>Tt.stopPropagation(),onChange:Tt=>Xe(Oe.value,Tt.currentTarget.value),addonAfter:yt,onKeyDown:tt,"data-testid":o.Tp.components.TimePicker.toField,value:ye.value})),ft),n.createElement("div",{className:Ve.buttonsContainer},n.createElement(p.$n,{"data-testid":o.Tp.components.TimePicker.copyTimeRange,icon:"copy",variant:"secondary",tooltip:(0,l.t)("time-picker.copy-paste.tooltip-copy","Copy time range to clipboard"),type:"button",onClick:at}),n.createElement(p.$n,{"data-testid":o.Tp.components.TimePicker.pasteTimeRange,icon:"clipboard-alt",variant:"secondary",tooltip:(0,l.t)("time-picker.copy-paste.tooltip-paste","Paste time range"),type:"button",onClick:st}),n.createElement(p.$n,{"data-testid":o.Tp.components.TimePicker.applyTimeRange,type:"button",onClick:_e},n.createElement(l.x,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range"))),n.createElement(k,{isFullscreen:be,isOpen:ae,from:(0,S.b)(Oe.value,{timeZone:pe}),to:(0,S.b)(ye.value,{timeZone:pe}),onApply:_e,onClose:()=>ge(!1),onChange:Xe,timeZone:pe,isReversed:we}))};function fe(xe,We,be){const pe={from:xe,to:We},Ue=s.convertRawToRange(pe,be);return!(Ue.from.isSame(Ue.to)||Ue.from.isBefore(Ue.to))}function q(xe,We,be){const pe=Z(xe,be),Ue=Z(We,be),we=!(0,R.f)(pe,!1,be),je=!(0,R.f)(Ue,!0,be),He=fe(pe,Ue,be)&&!je;return[{value:pe,invalid:we||He,errorMessage:He&&!we?ee.range():ee.default()},{value:Ue,invalid:je,errorMessage:ee.default()}]}function Z(xe,We){return(0,r.Ar)(xe)?(0,v.LE)(xe,{timeZone:We}):xe}function J(xe){return{fieldContainer:(0,t.css)({display:"flex"}),buttonsContainer:(0,t.css)({display:"flex",gap:xe.spacing(.5),marginTop:xe.spacing(1)}),tooltip:(0,t.css)({paddingLeft:xe.spacing(1),paddingTop:xe.spacing(3)})}}var G=e(65172);const ne=(xe,We)=>s.convertRawToRange({from:xe.from,to:xe.to},We),te=(xe,We)=>{const be=(0,v.LE)(xe.from,{timeZone:We}),pe=(0,v.LE)(xe.to,{timeZone:We});return{from:be,to:pe,display:`${be} to ${pe}`}},oe=xe=>{const{quickOptions:We=[],isReversed:be,isFullscreen:pe,hideQuickRanges:Ue,timeZone:we,fiscalYearStartMonth:je,value:He,onChange:rt,history:Je,showHistory:Ve,className:Oe,hideTimeZone:Ne,onChangeTimeZone:ye,onChangeFiscalYearStartMonth:se}=xe,ae=!Je?.length,ge=pe&&Ve||!pe&&(Ve&&!ae||!Ue),Pe=(0,m.of)(Fe,be,Ue,ge,pe),Re=re(Je,we),Be=De(He.raw,We),[_e,Xe]=(0,n.useState)(""),tt=We.filter(st=>st.display.toLowerCase().includes(_e.toLowerCase())),at=st=>rt(ne(st));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Pe.container,Oe)},n.createElement("div",{className:Pe.body},(!pe||!Ue)&&n.createElement("div",{className:Pe.rightSide},n.createElement("div",{className:Pe.timeRangeFilter},n.createElement(c.Z,{width:0,value:_e,onChange:Xe,placeholder:(0,l.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(d.E,null,!pe&&n.createElement(ue,{...xe,historyOptions:Re}),!Ue&&n.createElement(G.l,{options:tt,onChange:at,value:Be}))),pe&&n.createElement("div",{className:Pe.leftSide},n.createElement(Te,{...xe,historyOptions:Re}))),!Ne&&pe&&n.createElement(T,{timeZone:we,fiscalYearStartMonth:je,onChangeTimeZone:ye,onChangeFiscalYearStartMonth:se}))},le=xe=>{const{widthOverride:We}=xe,be=(0,m.$j)(),pe=(We||window.innerWidth)>=be.breakpoints.values.lg;return n.createElement(oe,{...xe,isFullscreen:pe})},ue=xe=>{const{value:We,hideQuickRanges:be,onChange:pe,timeZone:Ue,historyOptions:we=[],showHistory:je,onError:He}=xe,rt=(0,m.of)(Ee),Je=(0,r.Ar)(We.raw.from)||(0,r.Ar)(We.raw.to),[Ve,Oe]=(0,n.useState)(!Je),Ne=be?!1:Ve,ye=se=>pe(ne(se,Ue));return n.createElement("fieldset",null,n.createElement("div",{className:rt.header},n.createElement("button",{type:"button",className:rt.expandButton,onClick:()=>{be||Oe(!Ne)},"data-testid":o.Tp.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Ne,"aria-controls":"expanded-timerange"},n.createElement(O.e,null,n.createElement(l.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!be&&n.createElement(g.I,{name:Ne?"angle-down":"angle-up"}))),!Ne&&n.createElement("div",{className:rt.body,id:"expanded-timerange"},n.createElement("div",{className:rt.form},n.createElement(ie,{value:We,onApply:pe,timeZone:Ue,isFullscreen:!1,onError:He})),je&&n.createElement(G.l,{title:(0,l.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:we,onChange:ye,placeholderEmpty:null})))},Te=xe=>{const{onChange:We,value:be,timeZone:pe,fiscalYearStartMonth:Ue,isReversed:we,historyOptions:je,onError:He}=xe,rt=(0,m.of)(Me,xe.hideQuickRanges),Je=Ve=>We(ne(Ve,pe));return n.createElement(n.Fragment,null,n.createElement("div",{className:rt.container},n.createElement("div",{className:rt.title,"data-testid":o.Tp.components.TimePicker.absoluteTimeRangeTitle},n.createElement(O.e,null,n.createElement(l.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(ie,{value:be,timeZone:pe,fiscalYearStartMonth:Ue,onApply:We,isFullscreen:!0,isReversed:we,onError:He})),xe.showHistory&&n.createElement("div",{className:rt.recent},n.createElement(G.l,{title:(0,l.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:je||[],onChange:Je,placeholderEmpty:n.createElement(he,null)})))},he=(0,n.memo)(()=>{const xe=(0,m.of)(ze),We=(0,l.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return n.createElement("div",{className:xe.container},n.createElement("div",null,n.createElement("span",null,We)),n.createElement(l.x,{i18nKey:"time-picker.content.empty-recent-list-docs"},n.createElement("div",null,n.createElement("a",{className:xe.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function re(xe,We){return!Array.isArray(xe)||xe.length===0?[]:xe.map(be=>te(be,We))}he.displayName="EmptyRecentList";const De=(xe,We)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(xe))return We.find(be=>be.from===xe.from&&be.to===xe.to)},[xe,We]),Fe=(xe,We,be,pe,Ue)=>({container:(0,t.css)({background:xe.colors.background.primary,boxShadow:xe.shadows.z3,width:`${Ue?"546px":"262px"}`,borderRadius:xe.shape.radius.default,border:`1px solid ${xe.colors.border.weak}`,[`${We?"left":"right"}`]:0,display:"flex",flexDirection:"column"}),body:(0,t.css)({display:"flex",flexDirection:"row-reverse",height:`${pe?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,t.css)({display:"flex",flexDirection:"column",borderRight:`${We?"none":`1px solid ${xe.colors.border.weak}`}`,width:`${be?"100%":"60%"}`,overflow:"auto",order:We?1:0}),rightSide:(0,t.css)({width:`${Ue?"40%":"100%"}; !important`,borderRight:We?`1px solid ${xe.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,t.css)({padding:xe.spacing(1)}),spacing:(0,t.css)({marginTop:"16px"})}),Ee=xe=>({header:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${xe.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,t.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,i.getFocusStyles)(xe)}),body:(0,t.css)({borderBottom:`1px solid ${xe.colors.border.weak}`}),form:(0,t.css)({padding:"7px 9px 7px 9px"})}),Me=(xe,We)=>({container:(0,t.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:We?"11px":"20%"}),title:(0,t.css)({marginBottom:"11px"}),recent:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:xe.spacing(1)})}),ze=xe=>({container:(0,t.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,t.css)({color:xe.colors.text.link})})},42617:(Q,I,e)=>{"use strict";e.d(I,{e:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=m=>({text:(0,t.css)({fontSize:m.typography.size.md,fontWeight:m.typography.fontWeightMedium,color:m.colors.text.primary,margin:0,display:"flex"})}),o=(0,n.memo)(({children:m})=>{const i=(0,r.of)(s);return n.createElement("h3",{className:i.text},m)});o.displayName="TimePickerTitle"},3799:(Q,I,e)=>{"use strict";e.d(I,{f:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(15666),o=e(47619);const m=(0,n.memo)(function({hideText:d,value:c,timeZone:g="browser",placeholder:u="No time range selected",className:E}){const p=(0,r.of)(i);return d?null:n.createElement("span",{className:E},(0,o.X)(c)?n.createElement(s._8,{value:c,timeZone:g}):n.createElement("span",{className:p.placeholder},u))}),i=l=>({placeholder:(0,t.css)({color:l.colors.text.disabled,opacity:1})})},65172:(Q,I,e)=>{"use strict";e.d(I,{l:()=>c});var t=e(32196),n=e(96540),r=e(40845),s=e(76412),o=e(42617),m=e(62938),i=e(16797);const l=a=>({container:(0,t.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,t.css)({background:a.colors.action.selected,fontWeight:a.typography.fontWeightMedium}),radio:(0,t.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,i.getFocusStyles)(a)}),label:(0,t.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:a.colors.action.hover,cursor:"pointer"}})}),d=(0,n.memo)(({value:a,onSelect:h,selected:P=!1,name:y})=>{const C=(0,r.of)(l),f=(0,m.A)();return n.createElement("li",{className:(0,t.cx)(C.container,P&&C.selected)},n.createElement("input",{className:C.radio,checked:P,name:y,type:"checkbox",id:f,onChange:()=>h(a)}),n.createElement("label",{className:C.label,htmlFor:f},a.display))});d.displayName="TimeRangeOption";const c=a=>{const h=(0,r.of)(p),{title:P,options:y,placeholderEmpty:C}=a;return typeof C<"u"&&y.length<=0?n.createElement(n.Fragment,null,C):P?n.createElement("section",{"aria-label":P},n.createElement("fieldset",null,n.createElement("div",{className:h.title},n.createElement(o.e,null,P)),n.createElement(g,{...a}))):n.createElement(g,{...a})},g=({options:a,value:h,onChange:P,title:y})=>{const C=(0,r.of)(b);return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((f,D)=>n.createElement(d,{key:u(f,D),value:f,selected:E(f,h),onSelect:P,name:y??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function u(a,h){return`${a.from}-${a.to}-${h}`}function E(a,h){return!h||!a?!1:h.from===a.from&&h.to===a.to}const p=()=>({title:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),b=()=>({grow:(0,t.css)({flexGrow:1,alignItems:"flex-start"})})},20333:(Q,I,e)=>{"use strict";e.d(I,{U:()=>P});var t=e(2543),n=e(96540),r=e(91410),s=e(76412),o=e(88323),m=e(32196),i=e(40845);const l=M=>{const{children:O,label:S}=M,v=(0,i.of)(d);return S?n.createElement("div",null,n.createElement("div",{className:v.header},n.createElement("span",{className:v.label},S)),O):n.createElement("div",null,O)},d=M=>({header:(0,m.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${M.colors.border.weak}`,textTransform:"capitalize"}),label:(0,m.css)({fontSize:M.typography.size.sm,color:M.colors.text.secondary,fontWeight:M.typography.fontWeightMedium})});var c=e(17624),g=e(14578),u=e(79451),E=e(67459);const p="tz-utc-offset",b=M=>{const{children:O,innerProps:S,innerRef:v,data:x,isSelected:A,isFocused:R}=M,B=(0,i.of)(h),U=Date.now(),w=(0,m.cx)(B.container,R&&B.containerFocused);if(!(0,t.isString)(x.value))return null;const K=(0,r.QZ)(x.value,U);return n.createElement("div",{className:w,...S,ref:v,"aria-label":"Select option"},n.createElement("div",{className:(0,m.cx)(B.leftColumn,B.row)},n.createElement("div",{className:(0,m.cx)(B.leftColumn,B.wideRow)},n.createElement(E.U,{title:O}),n.createElement("div",{className:B.spacer}),n.createElement(u.E,{info:K})),n.createElement("div",{className:B.rightColumn},n.createElement(c.X,{timeZone:K?.ianaName||x.value,timestamp:U,className:p}),A&&n.createElement("span",null,n.createElement(g.I,{name:"check"})))))},a=M=>{const{children:O,innerProps:S,innerRef:v,data:x,isSelected:A,isFocused:R}=M,B=(0,i.of)(h),U=Date.now(),w=(0,m.cx)(B.container,R&&B.containerFocused);if(!(0,t.isString)(x.value))return null;const K=(0,r.QZ)(x.value,U);return n.createElement("div",{className:w,...S,ref:v,"aria-label":"Select option"},n.createElement("div",{className:B.body},n.createElement("div",{className:B.row},n.createElement("div",{className:B.leftColumn},n.createElement(E.U,{title:O})),n.createElement("div",{className:B.rightColumn},A&&n.createElement("span",null,n.createElement(g.I,{name:"check"})))),n.createElement("div",{className:B.row},n.createElement("div",{className:B.leftColumn},n.createElement(u.E,{info:K})),n.createElement("div",{className:B.rightColumn},n.createElement(c.X,{timestamp:U,timeZone:K?.ianaName||x.value,className:p})))))},h=M=>({container:(0,m.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:M.colors.action.hover}}),containerFocused:(0,m.css)({background:M.colors.action.hover}),body:(0,m.css)({display:"flex",fontWeight:M.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,m.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,m.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,m.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,m.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,m.css)({marginLeft:"6px"})}),P=M=>{const{onChange:O,width:S,autoFocus:v=!1,onBlur:x,value:A,includeInternal:R=!1,disabled:B=!1,inputId:U,menuShouldPortal:w=!0,openMenuOnFocus:K=!0}=M,N=y(R),L=C(N,A),V=D(),F=S&&S<=45?a:b,z=(0,n.useCallback)(Y=>{if(!Y||!(0,t.isString)(Y.value))return O(A);O(Y.value)},[O,A]);return n.createElement(o.l6,{inputId:U,value:L,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:v,menuShouldPortal:w,openMenuOnFocus:K,width:S,filterOption:V,options:N,onChange:z,onBlur:x,components:{Option:F,Group:l},disabled:B,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},y=M=>{const O=Date.now();return(0,r.U3)(M).map(v=>{const x=v.zones.reduce((A,R)=>{const B=(0,r.QZ)(R,O);return B&&A.push({label:B.name,value:B.zone,searchIndex:T(B,O)}),A},[]);return{label:v.name,options:x}})},C=(M,O)=>(0,n.useMemo)(()=>{if(O===void 0)return;const S=(0,t.toLower)(O);return M.find(x=>x.label?S.startsWith((0,t.toLower)(x.label)):f(S))?.options.find(x=>(0,t.isEmpty)(S)?x.value===r.g$.default:(0,t.toLower)(x.value)===S)},[M,O]),f=M=>{switch(M){case r.g$.default:case r.g$.localBrowserTime:case r.g$.utc:return!0;default:return!1}},D=()=>(0,n.useCallback)((M,O)=>!O||!M.data||!M.data.searchIndex?!0:M.data.searchIndex.indexOf((0,t.toLower)(O))>-1,[]),T=(M,O)=>{const S=[(0,t.toLower)(M.name),(0,t.toLower)(M.abbreviation),(0,t.toLower)((0,c.t)(O,M.zone))];for(const v of M.countries)S.push((0,t.toLower)(v.name)),S.push((0,t.toLower)(v.code));return S.join("|")}},79451:(Q,I,e)=>{"use strict";e.d(I,{E:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({info:i})=>{const l=(0,r.of)(m),d=o(i);return i?n.createElement("div",{className:l.description},d):null},o=i=>(0,n.useMemo)(()=>{const l=[];if(!i)return"";if(i.name==="Europe/Simferopol")return"Ukraine, EEST";if(i.countries.length>0){const d=i.countries[0];l.push(d.name)}return i.abbreviation&&l.push(i.abbreviation),l.join(", ")},[i]),m=i=>({description:(0,t.css)({fontWeight:"normal",fontSize:i.typography.size.sm,color:i.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},17624:(Q,I,e)=>{"use strict";e.d(I,{X:()=>i,t:()=>l});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(72724),m=e(40845);const i=c=>{const{timestamp:g,timeZone:u,className:E}=c,p=(0,m.of)(d);return(0,n.isString)(u)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(p.offset,E)},l(g,u))):null},l=(c,g)=>`UTC${(0,o.LE)(c,{timeZone:g,format:"Z"})}`,d=c=>{const g=(0,t.css)({fontWeight:"normal",fontSize:c.typography.size.sm,color:c.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,t.css)(g,{color:c.colors.text.primary,background:c.colors.background.secondary,padding:"2px 5px",borderRadius:c.shape.radius.default,marginLeft:"4px"})}}},67459:(Q,I,e)=>{"use strict";e.d(I,{U:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({title:m})=>{const i=(0,r.of)(o);return m?n.createElement("span",{className:i.title},m):null},o=m=>({title:(0,t.css)({fontWeight:m.typography.fontWeightRegular,textOverflow:"ellipsis"})})},15648:(Q,I,e)=>{"use strict";e.d(I,{l:()=>o});var t=e(96540),n=e(13544),r=e(88323);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],o=m=>{const{onChange:i,width:l,autoFocus:d=!1,onBlur:c,value:g,disabled:u=!1,inputId:E}=m,p=(0,t.useCallback)(b=>{b.value!==void 0&&i(b.value)},[i]);return t.createElement(r.l6,{inputId:E,value:s.find(b=>b.value===g)?.value,placeholder:n.Tp.components.WeekStartPicker.placeholder,autoFocus:d,openMenuOnFocus:!0,width:l,options:s,onChange:p,onBlur:c,disabled:u})}},32432:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>n,o:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},47619:(Q,I,e)=>{"use strict";e.d(I,{X:()=>o,f:()=>s});var t=e(47232),n=e(85858),r=e(53531);function s(m,i,l){return(0,t.Ar)(m)?m.isValid():n.isMathString(m)?n.isValid(m):(0,r.b)(m,{roundUp:i,timeZone:l}).isValid()}function o(m){return n.isValid(m.from)&&n.isValid(m.to)}},99225:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>n});var t=e(91410);function n(r,s){const o=(0,t.HD)(s);if(!o)return r;const m=o.utcOffset(r.getTime()),i=r.getTimezoneOffset(),l=m-i;return new Date(r.getTime()-l*1e3*60)}},25994:(Q,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({direction:m="horizontal",spacing:i=2})=>{const l=(0,r.of)(o,i);return m==="vertical"?n.createElement("div",{className:l.verticalDivider}):n.createElement("hr",{className:l.horizontalDivider})};s.displayName="Divider";const o=(m,i)=>({horizontalDivider:(0,t.css)({borderTop:`1px solid ${m.colors.border.weak}`,margin:m.spacing(i,0),width:"100%"}),verticalDivider:(0,t.css)({borderRight:`1px solid ${m.colors.border.weak}`,margin:m.spacing(0,i),height:"100%"})})},69144:(Q,I,e)=>{"use strict";e.d(I,{l:()=>n});var t=e(32196);const n=(r,s)=>{const o=s||"middle",m=r.colors.emphasize(r.colors.background.secondary,.15),i=r.colors.primary.border,l=r.spacing(2),d=4,c=200;let g="50%",u="50%";switch(o){case"start":{g="0%",u="0%";break}case"end":{g="100%",u="100%";break}}const E=(0,t.css)({position:"relative","&:before":{content:'""',position:"absolute",transition:r.transitions.create("border-color"),zIndex:1},"&:after":{background:m,content:'""',position:"absolute",transition:r.transitions.create("background"),transform:"translate(-50%, -50%)",borderRadius:r.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:i},"&:after":{background:i}}});return{dragHandleVertical:(0,t.cx)(E,(0,t.css)({cursor:"col-resize",width:l,"&:before":{borderRight:"1px solid transparent",height:"100%",left:g,transform:"translateX(-50%)"},"&:after":{left:g,top:"50%",height:c,width:d}})),dragHandleHorizontal:(0,t.cx)(E,(0,t.css)({height:l,cursor:"row-resize","&:before":{borderTop:"1px solid transparent",top:u,transform:"translateY(-50%)",width:"100%"},"&:after":{left:"50%",top:u,height:d,width:c}}))}}},87978:(Q,I,e)=>{"use strict";e.d(I,{_:()=>p});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(8772),m=e(96540),i=e(13544),l=e(40845),d=e(76412),c=e(40276),g=e(69144),u=e(29158),E=e(94753);function p({children:f,onClose:D,closeOnMaskClick:T=!0,scrollableContent:M=!0,title:O,subtitle:S,width:v,size:x="md",tabs:A}){const[R,B,U]=b(),w=(0,l.of)(P),K=(0,l.of)(C,x,R??v),N=(0,l.of)(g.l),L=m.useRef(null),{dialogProps:V,titleProps:F}=(0,n.s)({},L),{overlayProps:z}=(0,s.e)({isDismissable:!1,isOpen:!0,onClose:D},L);h();const Y=(0,t.cx)(w.drawer,K),H=m.createElement("div",{className:w.content},f);return m.createElement(o.A,{open:!0,onClose:D,placement:"right",getContainer:".main-view",className:w.drawerContent,rootClassName:Y,width:"",motion:{motionAppear:!0,motionName:w.drawerMotion},maskClassName:w.mask,maskClosable:T,maskMotion:{motionAppear:!0,motionName:w.maskMotion}},m.createElement(r.n1,{restoreFocus:!0,contain:!0,autoFocus:!0},m.createElement("div",{"aria-label":typeof O=="string"?i.Tp.components.Drawer.General.title(O):i.Tp.components.Drawer.General.title("no title"),className:w.container,...z,...V,ref:L},m.createElement("div",{className:(0,t.cx)(N.dragHandleVertical,w.resizer),onMouseDown:B,onTouchStart:U}),typeof O=="string"&&m.createElement("div",{className:(0,t.cx)(w.header,!!A&&w.headerWithTabs)},m.createElement("div",{className:w.actions},m.createElement(u.K,{name:"times",variant:"secondary",onClick:D,"data-testid":i.Tp.components.Drawer.General.close,tooltip:(0,d.t)("grafana-ui.drawer.close","Close")})),m.createElement("div",{className:w.titleWrapper},m.createElement(E.E,{element:"h3",...F},O),S&&m.createElement("div",{className:w.subtitle,"data-testid":i.Tp.components.Drawer.General.subtitle},S),A&&m.createElement("div",{className:w.tabsWrapper},A))),typeof O!="string"&&O,M?m.createElement(c.E,null,H):H)))}function b(){const[f,D]=(0,m.useState)(void 0),T=(0,m.useCallback)(A=>{D(a(A.clientX))},[]),M=(0,m.useCallback)(A=>{const R=A.touches[0];D(a(R.clientX))},[]),O=(0,m.useCallback)(A=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",O)},[T]),S=(0,m.useCallback)(A=>{document.removeEventListener("touchmove",M),document.removeEventListener("touchend",S)},[M]);function v(A){A.stopPropagation(),A.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("mouseup",O)}function x(A){A.stopPropagation(),A.preventDefault(),document.addEventListener("touchmove",M),document.addEventListener("touchend",S)}return[f,v,x]}function a(f){let D=document.body.offsetWidth-(f-document.body.offsetLeft);return`${Math.min(D/document.body.clientWidth*100,98).toFixed(2)}vw`}function h(){(0,m.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const P=f=>({container:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,t.css)({".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:f.shadows.z3}}),drawerContent:(0,t.css)({backgroundColor:`${f.colors.background.primary} !important`,display:"flex",overflow:"unset",flexDirection:"column"}),drawerMotion:(0,t.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${f.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,t.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${f.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,t.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:f.transitions.create("opacity")}}}),header:(0,t.css)({label:"drawer-header",flexGrow:0,padding:f.spacing(2,2,3),borderBottom:`1px solid ${f.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:f.spacing(1),top:f.spacing(1)}),titleWrapper:(0,t.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,t.css)({label:"drawer-subtitle",color:f.colors.text.secondary,paddingTop:f.spacing(1)}),content:(0,t.css)({padding:f.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,t.css)({label:"drawer-tabs",paddingLeft:f.spacing(2),margin:f.spacing(1,-1,-3,-3)}),resizer:(0,t.css)({top:0,left:f.spacing(-1),bottom:0,position:"absolute",zIndex:f.zIndex.modal})}),y={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function C(f,D,T){let M=T??y[D].width,O=y[D].minWidth;return(0,t.css)({".rc-drawer-content-wrapper":{label:`drawer-content-wrapper-${D}`,width:M,minWidth:O,overflow:"unset",[f.breakpoints.down("md")]:{width:`calc(100% - ${f.spacing(2)}) !important`,minWidth:0}}})}},9261:(Q,I,e)=>{"use strict";e.d(I,{f:()=>u});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(7887),m=e(96540),i=e(40845),l=e(38138),d=e(64539),c=e(27746);const g=p=>{const{className:b,options:a,value:h,onChange:P,narrow:y,variant:C,...f}=p,D=(0,i.of)(E),[T,M]=(0,m.useState)(!1),O=[(0,n.cY)(0),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:S,refs:v,floatingStyles:x}=(0,s.we)({open:T,placement:"bottom-end",onOpenChange:M,middleware:O,whileElementsMounted:r.ll}),A=(0,s.kp)(S),R=(0,s.s9)(S),{getReferenceProps:B,getFloatingProps:U}=(0,s.bv)([R,A]),w=K=>{P(K),M(!1)};return m.createElement("div",{className:D.wrapper},m.createElement(c.I,{className:b,isOpen:T,narrow:y,variant:C,ref:v.setReference,...B(),...f},h?.label||(h?.value!=null?String(h?.value):null)),T&&m.createElement("div",{className:D.menuWrapper,ref:v.setFloating,...U(),style:x},m.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},m.createElement(l.W,{tabIndex:-1,onClose:()=>M(!1)},a.map(K=>m.createElement(d.D,{key:`${K.value}`,label:K.label??String(K.value),onClick:()=>w(K),active:K.value===h?.value,ariaChecked:K.value===h?.value,ariaLabel:K.ariaLabel||K.label,role:"menuitemradio"}))))))};g.displayName="ButtonSelect";const u=m.memo(g),E=p=>({wrapper:(0,t.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,t.css)({zIndex:p.zIndex.dropdown})})},83122:(Q,I,e)=>{"use strict";e.d(I,{m:()=>c});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(96540),m=e(66588),i=e(67892),l=e(18976),d=e(17464);const c=o.memo(({children:u,overlay:E,placement:p,offset:b,onVisibleChange:a})=>{const[h,P]=(0,o.useState)(!1),y=(0,o.useRef)(null);(0,o.useEffect)(()=>{a?.(h)},[a,h]);const C=[(0,n.cY)({mainAxis:b?.[0]??8,crossAxis:b?.[1]??0}),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:f,refs:D,floatingStyles:T}=(0,s.we)({open:h,placement:(0,l.O)(p),onOpenChange:P,middleware:C,whileElementsMounted:r.ll}),M=(0,s.kp)(f),O=(0,s.s9)(f),{getReferenceProps:S,getFloatingProps:v}=(0,s.bv)([O,M]),x=150,A=g(x),R=()=>{P(!1)},B=U=>{U.key==="Tab"&&P(!1)};return o.createElement(o.Fragment,null,o.cloneElement(u,{ref:D.setReference,...S()}),h&&o.createElement(d.ZL,null,o.createElement(s.s3,{context:f},o.createElement("div",{ref:D.setFloating,style:T,onClick:R,onKeyDown:B},o.createElement(m.A,{nodeRef:y,appear:!0,in:!0,timeout:{appear:x,exit:0,enter:0},classNames:A},o.createElement("div",{ref:y},i.renderOrCallToRender(E,{...v()})))))))});c.displayName="Dropdown";const g=u=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${u}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${u}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},41670:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m})=>{const i=(0,r.of)(o);return n.createElement("div",{className:i.container},m)},o=m=>({container:(0,t.css)({borderLeft:`3px solid ${m.colors.info.main}`,backgroundColor:`${m.colors.background.secondary}`,padding:m.spacing(2),minWidth:"350px",borderRadius:m.shape.radius.default,marginBottom:m.spacing(4)})})},69529:(Q,I,e)=>{"use strict";e.d(I,{p:()=>C});var t=e(32196),n=e(96540),r=e(8867),s=e(40845),o=e(90613),m=e(67061),i=e(94753),l=e(36348);const d=({width:T="auto",height:M})=>{const O=(0,s.of)(c);return n.createElement(r.default,{src:l,className:O.svg,height:M,width:T})};d.displayName="GrotCTA";const c=T=>({svg:(0,t.css)({"#grot-cta-cactus-1, #grot-cta-cactus-2":{fill:T.isDark?"#58558c":"#c9c5f4"}})});var g=e(22687);const u=-20,E=5,p=-5,b=5,a=({width:T="auto",height:M})=>{const O=(0,n.useRef)(null),S=(0,s.of)(h);return(0,n.useEffect)(()=>{const v=x=>{const A=O.current?.querySelector("#grot-not-found-arm"),R=O.current?.querySelector("#grot-not-found-magnifier"),{clientX:B,clientY:U}=x,{innerWidth:w,innerHeight:K}=window,N=U/K,L=B/w,V=P(N,u,E),F=P(L,p,b);window.requestAnimationFrame(()=>{A?.setAttribute("style",`transform: rotate(${V}deg) translateX(${F}%)`),R?.setAttribute("style",`transform: rotate(${V}deg) translateX(${F}%)`)})};return window.addEventListener("mousemove",v),()=>{window.removeEventListener("mousemove",v)}},[]),n.createElement(r.default,{innerRef:O,src:g,className:S.svg,height:M,width:T})};a.displayName="GrotNotFound";const h=T=>({svg:(0,t.css)({"#grot-not-found-arm, #grot-not-found-magnifier":{transformOrigin:"center"}})}),P=(T,M,O)=>T*(O-M)+M;var y=e(9886);const C=({button:T,children:M,image:O,message:S,hideImage:v=!1,variant:x})=>{const A=(0,s.of)(D),R=O??f(x);return n.createElement(o.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center"},n.createElement("div",{className:A.container},!v&&R,n.createElement(m.B,{direction:"column",alignItems:"center"},n.createElement(i.E,{variant:"h4",textAlignment:"center"},S),M&&n.createElement(i.E,{color:"secondary",textAlignment:"center"},M)),T))};function f(T){switch(T){case"call-to-action":return n.createElement(d,{width:300});case"not-found":return n.createElement(a,{width:300});case"completed":return n.createElement(r.default,{src:y,width:300});default:throw new Error(`Unknown variant: ${T}`)}}const D=T=>({container:(0,t.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:T.spacing(4),maxWidth:"600px"})})},66602:(Q,I,e)=>{"use strict";e.d(I,{Xc:()=>i,Xw:()=>m,tH:()=>o});var t=e(96540),n=e(32631),r=e(42418),s=e(52446);class o extends t.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(d,c){n.P?.api?.pushError(d),this.setState({error:d,errorInfo:c}),this.props.onError&&this.props.onError(d)}componentDidUpdate(d){const{dependencies:c,onRecover:g}=this.props;if(this.state.error&&c&&d.dependencies){for(let u=0;u<c.length;u++)if(c[u]!==d.dependencies[u]){this.setState({error:null,errorInfo:null}),g&&g();break}}}render(){const{children:d}=this.props,{error:c,errorInfo:g}=this.state;return d({error:c,errorInfo:g})}}class m extends t.PureComponent{static{this.defaultProps={title:"An unexpected error happened",style:"alertbox"}}render(){const{title:d,children:c,style:g,dependencies:u}=this.props;return t.createElement(o,{dependencies:u},({error:E,errorInfo:p})=>p?g==="alertbox"?t.createElement(r.F,{title:d||""},t.createElement("details",{style:{whiteSpace:"pre-wrap"}},E&&E.toString(),t.createElement("br",null),p.componentStack)):t.createElement(s.D,{title:d||"",error:E,errorInfo:p}):c)}}function i(l,d={}){const c=g=>t.createElement(m,{...d},t.createElement(l,{...g}));return c.displayName="WithErrorBoundary",c}},52446:(Q,I,e)=>{"use strict";e.d(I,{D:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({error:m,errorInfo:i,title:l})=>{const d=(0,r.of)(o);return n.createElement("div",{className:d},n.createElement("h2",null,l),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},m&&m.toString(),n.createElement("br",null),i&&i.componentStack))};s.displayName="ErrorWithStack";const o=()=>(0,t.css)({width:"500px",margin:"64px auto"})},37270:(Q,I,e)=>{"use strict";e.d(I,{gH:()=>u,wI:()=>b});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(20978),m=e(47172),i=e(83195),l=e(40845),d=e(42418),c=e(14578),g=e(73569);function u({options:C,children:f,readAs:D,onLoad:T,fileListRenderer:M,onFileRemove:O}){const[S,v]=(0,s.useState)([]),[x,A]=(0,s.useState)([]),R=(0,i.j_)("decbytes")(C?.maxSize?C?.maxSize:0),B=(0,s.useCallback)((ee,ie)=>{v(fe=>fe.map(q=>(q.id===ee.id&&ie(q),q)))},[]),U=(0,s.useCallback)((ee,ie,fe)=>{let q=ee.map(P);if(C?.multiple===!1?v(q):v(Z=>[...Z,...q]),Y(ie),C?.onDrop)C.onDrop(ee,ie,fe);else for(const Z of q){const J=new FileReader,G=()=>{D?J[D](Z.file):J.readAsText(Z.file)};B(Z,ne=>{ne.abortUpload=()=>{J.abort()},ne.retryUpload=()=>{B(Z,te=>{te.error=null,te.progress=void 0}),G()}}),J.onabort=()=>{B(Z,ne=>{ne.error=new DOMException("Aborted")})},J.onprogress=ne=>{B(Z,te=>{te.progress=ne.loaded})},J.onload=()=>{T?.(J.result)},J.onerror=()=>{B(Z,ne=>{ne.error=J.error})},G()}},[T,C,D,B]),w=ee=>{const ie=S.filter(fe=>ee.id!==fe.id);v(ie),O?.(ee)},{getRootProps:K,getInputProps:N,isDragActive:L}=(0,o.VB)({...C,useFsAccessApi:!1,onDrop:U,accept:p(C?.accept)}),V=(0,l.$j)(),F=y(V,L),z=S.map(ee=>M?M(ee,w):s.createElement(g.I,{key:ee.id,file:ee,removeFile:w})),Y=ee=>{let ie=[];ee.map(fe=>{fe.errors.map(q=>{ie.findIndex(Z=>Z.code===q.code&&Z.message===q.message)===-1&&ie.push(q)})}),A(ie)},H=ee=>s.createElement("div",{className:F.errorAlert},s.createElement(d.F,{title:"Upload failed",severity:"error",onRemove:k},ee.map(ie=>{switch(ie.code){case m.O4.FileTooLarge:return s.createElement("div",{key:ie.message+ie.code},"File is larger than ",(0,i.cN)(R));default:return s.createElement("div",{key:ie.message+ie.code},ie.message)}}))),k=()=>{A([])};return s.createElement("div",{className:F.container},s.createElement("div",{"data-testid":"dropzone",...K({className:F.dropzone})},s.createElement("input",{...N()}),f??s.createElement(b,{primaryText:a(S,C)})),x.length>0&&H(x),s.createElement("small",{className:(0,t.cx)(F.small,F.acceptContainer)},C?.maxSize&&`Max file size: ${(0,i.cN)(R)}`,C?.maxSize&&C?.accept&&s.createElement("span",{className:F.acceptSeparator},"|"),C?.accept&&h(C.accept)),z)}function E(C){return["txt","json","csv","xls","yml"].some(f=>C.match(f))?"text/plain":"application/octet-stream"}function p(C){return(0,n.isString)(C)?{[E(C)]:[C]}:Array.isArray(C)?C.reduce((f,D)=>{const T=E(D);return f[T]=f[T]?[...f[T],D]:[D],f},{}):C}function b({primaryText:C="Drop file here or click to upload",secondaryText:f=""}){const D=(0,l.$j)(),T=y(D);return s.createElement("div",{className:(0,t.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children"},s.createElement(c.I,{className:(0,t.cx)(T.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(T.primaryText)},C),s.createElement("small",{className:T.small},f))}function a(C,f){return f?.multiple===void 0||f?.multiple?"Upload file":C.length?"Replace file":"Upload file"}function h(C){return(0,n.isString)(C)?`Accepted file type: ${C}`:Array.isArray(C)?`Accepted file types: ${C.join(", ")}`:`Accepted file types: ${Object.values(C).flat().join(", ")}`}function P(C){return{id:(0,n.uniqueId)("file"),file:C,error:null}}function y(C,f){return{container:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",padding:C.spacing(2),borderRadius:C.shape.radius.default,border:`1px dashed ${C.colors.border.strong}`,backgroundColor:f?C.colors.background.secondary:C.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,t.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,t.css)({textAlign:"center"}),icon:(0,t.css)({marginBottom:C.spacing(1)}),primaryText:(0,t.css)({marginBottom:C.spacing(1)}),acceptContainer:(0,t.css)({textAlign:"center",margin:0}),acceptSeparator:(0,t.css)({margin:`0 ${C.spacing(1)}`}),small:(0,t.css)({color:C.colors.text.secondary}),errorAlert:(0,t.css)({paddingTop:"10px"})}}},73569:(Q,I,e)=>{"use strict";e.d(I,{I:()=>c});var t=e(32196),n=e(96540),r=e(83195),s=e(40845),o=e(53550),m=e(55852),i=e(14578),l=e(29158);const d="Remove file";function c({file:u,removeFile:E}){const p=(0,s.of)(g),{file:b,progress:a,error:h,abortUpload:P,retryUpload:y}=u,C=()=>h?n.createElement(n.Fragment,null,n.createElement("span",{className:p.error},h.message),y&&n.createElement(l.K,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:y}),E&&n.createElement(l.K,{className:y?p.marginLeft:"",name:"trash-alt",onClick:()=>E(u),tooltip:d})):a&&b.size>a?n.createElement(n.Fragment,null,n.createElement("progress",{className:p.progressBar,max:b.size,value:a}),n.createElement("span",{className:p.paddingLeft},Math.round(a/b.size*100),"%"),P&&n.createElement(m.$n,{variant:"secondary",type:"button",fill:"text",onClick:P},"Cancel upload")):E&&n.createElement(l.K,{name:"trash-alt",onClick:()=>E(u),tooltip:d,tooltipPlacement:"top"}),f=(0,r.j_)("decbytes")(b.size);return n.createElement("div",{className:p.fileListContainer},n.createElement("span",{className:p.fileNameWrapper},n.createElement(i.I,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:p.padding},(0,o.i)(b.name)),n.createElement("span",null,(0,r.cN)(f))),n.createElement("div",{className:p.fileNameWrapper},C()))}function g(u){return{fileListContainer:(0,t.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:u.spacing(2),border:`1px dashed ${u.colors.border.medium}`,backgroundColor:`${u.colors.background.secondary}`,marginTop:u.spacing(1)}),fileNameWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,t.css)({padding:u.spacing(0,1)}),paddingLeft:(0,t.css)({paddingLeft:u.spacing(2)}),marginLeft:(0,t.css)({marginLeft:u.spacing(1)}),error:(0,t.css)({paddingRight:u.spacing(2),color:u.colors.error.text}),progressBar:(0,t.css)({borderRadius:u.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:u.colors.border.weak,borderRadius:u.shape.radius.default},"::-webkit-progress-value":{backgroundColor:u.colors.primary.main,borderRadius:u.shape.radius.default}})}}},92887:(Q,I,e)=>{"use strict";e.d(I,{IB:()=>n.I,gH:()=>t.gH,wI:()=>t.wI});var t=e(37270),n=e(73569)},73546:(Q,I,e)=>{"use strict";e.d(I,{e:()=>c});var t=e(32196),n=e(96540),r=e(62938),s=e(13544),o=e(40845),m=e(16797),i=e(53550),l=e(55852),d=e(14578);const c=({onFileUpload:u,className:E,children:p="Upload file",accept:b="*",size:a="md",showFileName:h})=>{const P=(0,o.of)(g(a)),[y,C]=(0,n.useState)(""),f=(0,r.A)(),D=(0,n.useCallback)(T=>{const M=T.currentTarget?.files?.[0];M&&C(M.name??""),u(T)},[u]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:f,className:P.fileUpload,onChange:D,multiple:!1,accept:b,"data-testid":s.Tp.components.FileUpload.inputField}),n.createElement("label",{htmlFor:f,className:(0,t.cx)(P.labelWrapper,E)},n.createElement(d.I,{name:"upload",className:P.icon}),p),h&&y&&n.createElement("span",{"aria-label":"File name",className:P.fileName,"data-testid":s.Tp.components.FileUpload.fileNameSpan},(0,i.i)(y)))},g=u=>E=>{const p=(0,l.hs)({theme:E,variant:"primary",size:u,iconOnly:!1}),b=(0,m.getFocusStyles)(E);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":b,"&:focus-visible + label":b}),labelWrapper:p.button,icon:p.icon,fileName:(0,t.css)({marginLeft:E.spacing(.5)})}}},67647:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(96540),n=e(54479);function r(...l){const d=t.useRef(null);return t.useEffect(()=>{l.forEach(c=>{c&&(typeof c=="function"?c(d.current):c.current=d.current)})},[l]),d}var s=e(55852),o=e(14578),m=e(10354);const i=t.forwardRef(({value:l,width:d,onChange:c,escapeRegex:g=!0,...u},E)=>{const p=t.useRef(null),b=r(E,p),a=l!==""?t.createElement(s.$n,{icon:"times",fill:"text",size:"sm",onClick:h=>{p.current?.focus(),c(""),h.stopPropagation()}},"Clear"):null;return t.createElement(m.p,{prefix:t.createElement(o.I,{name:"search"}),suffix:a,width:d,type:"text",value:g?(0,n.xb)(l??""):l,onChange:h=>c(g?(0,n.jD)(h.currentTarget.value):h.currentTarget.value),...u,ref:b})});i.displayName="FilterInput"},92174:(Q,I,e)=>{"use strict";e.d(I,{m:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=({label:l,selected:d,onClick:c,icon:g="check"})=>{const u=(0,r.of)(i),E=(0,r.of)(s.my);return n.createElement("button",{type:"button",className:(0,t.cx)(E,u.wrapper,d&&u.selected),onClick:c},n.createElement("span",null,l),d&&n.createElement(o.I,{name:g,className:u.icon}))},i=l=>({wrapper:(0,t.css)({background:l.colors.background.secondary,borderRadius:l.shape.radius.pill,padding:l.spacing(0,2),fontSize:l.typography.bodySmall.fontSize,fontWeight:l.typography.fontWeightMedium,lineHeight:l.typography.bodySmall.lineHeight,color:l.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${l.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:l.colors.action.hover,color:l.colors.text.primary}}),selected:(0,t.css)({color:l.colors.text.primary,background:l.colors.action.selected,"&:hover":{background:l.colors.action.focus}}),icon:(0,t.css)({marginLeft:l.spacing(.5)})})},90090:(Q,I,e)=>{"use strict";e.d(I,{z:()=>o});var t=e(32196),n=e(96540),r=e(38894);const s={labelWidth:6,inputWidth:12},o=({label:i,tooltip:l,labelWidth:d,inputWidth:c,inputEl:g,className:u,interactive:E,...p})=>{const b=m();return n.createElement("div",{className:(0,t.cx)(b.formField,u)},n.createElement(r.I,{width:d,tooltip:l,interactive:E},i),g||n.createElement("input",{type:"text",className:`gf-form-input ${c?`width-${c}`:""}`,...p,disabled:p.disabled}))};o.displayName="FormField",o.defaultProps=s;const m=()=>({formField:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},38894:(Q,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(46942),n=e.n(t),r=e(96540),s=e(14578),o=e(56034);const i=({children:l,isFocused:d,isInvalid:c,className:g,htmlFor:u,tooltip:E,width:p,interactive:b,...a})=>{const h=n()(g,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":d,"gf-form-label--is-invalid":c});return r.createElement("label",{className:h,...a,htmlFor:u},l,E&&r.createElement(o.m,{placement:"top",content:E,theme:"info",interactive:b},r.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},9286:(Q,I,e)=>{"use strict";e.d(I,{i:()=>r});var t=e(96540);function n(s){return s<20?.9:s<26?.8:.6}const r=({value:s,className:o,style:m,...i})=>{const l=(s.prefix??"").length>0,d=(s.suffix??"").length>0;let c;if(m&&m.fontSize&&typeof m.fontSize=="number"){const g=m.fontSize,u=n(g);c={fontSize:g*u}}return t.createElement("div",{className:o,style:m,...i},t.createElement("div",null,l&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),d&&t.createElement("span",{style:c},s.suffix)))};r.displayName="FormattedDisplayValue"},10880:(Q,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(60029);const m=n.forwardRef(({label:l,description:d,value:c,htmlValue:g,onChange:u,disabled:E,className:p,indeterminate:b,invalid:a,...h},P)=>{const y=(0,n.useCallback)(D=>{u&&u(D)},[u]),C=(0,r.of)(i,a),f=b?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(C.wrapper,p)},n.createElement("div",{className:C.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(C.input,b&&C.inputIndeterminate),checked:c,disabled:E,onChange:y,value:g,"aria-checked":f,...h,ref:P}),n.createElement("span",{className:C.checkmark})),l&&n.createElement("span",{className:C.label},l),d&&n.createElement("span",{className:C.description},d))}),i=(l,d=!1)=>{const c=(0,o.f)(l),g=2,u=1,E=p=>d?l.colors.error.border:p;return{wrapper:(0,t.css)({display:"inline-grid",alignItems:"center",columnGap:l.spacing(u),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,t.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,s.getFocusStyles)(l),"&:focus:not(:focus-visible) + span":(0,s.getMouseFocusStyles)(l),"&:checked + span":{background:l.colors.primary.main,border:`1px solid ${E(l.colors.primary.main)}`,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${l.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:l.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${E(l.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:l.colors.action.disabledBackground},"&:after":{borderColor:l.colors.action.disabledText}}}),inputIndeterminate:(0,t.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${E(l.colors.primary.main)}`,background:l.colors.primary.main,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${l.colors.primary.contrastText}`,backgroundColor:l.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:l.colors.action.disabledBackground,border:`1px solid ${E(l.colors.error.transparent)}`,"&:after":{borderColor:l.colors.action.disabledText}}}),checkboxWrapper:(0,t.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,t.css)({position:"relative",zIndex:2,display:"inline-block",width:l.spacing(g),height:l.spacing(g),borderRadius:l.shape.radius.default,background:l.components.input.background,border:`1px solid ${E(l.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:E(l.components.input.borderHover)}}),label:(0,t.cx)(c.label,(0,t.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:l.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,t.cx)(c.description,(0,t.css)({gridColumnStart:2,gridRowStart:2,lineHeight:l.typography.bodySmall.lineHeight,marginTop:0}))}};m.displayName="Checkbox"},88575:(Q,I,e)=>{"use strict";e.d(I,{D:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(67892),o=e(72093),m=e(60029);const i=n.forwardRef(({label:c,description:g,horizontal:u,invalid:E,loading:p,disabled:b,required:a,error:h,children:P,className:y,validationMessageHorizontalOverflow:C,htmlFor:f,...D},T)=>{const M=(0,r.of)(d),O=f??(0,s.getChildId)(P),S=typeof c=="string"?n.createElement(m.J,{htmlFor:O,description:g},`${c}${a?" *":""}`):c,v=l({invalid:E,disabled:b,loading:p});return n.createElement("div",{className:(0,t.cx)(M.field,u&&M.fieldHorizontal,y),...D},S,n.createElement("div",null,n.createElement("div",{ref:T},n.cloneElement(P,v)),E&&h&&!u&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,{[M.validationMessageHorizontalOverflow]:!!C})},n.createElement(o.P,null,h))),E&&h&&u&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,M.fieldValidationWrapperHorizontal,{[M.validationMessageHorizontalOverflow]:!!C})},n.createElement(o.P,null,h)))});i.displayName="Field";function l(c){for(const g in c)c[g]===void 0&&delete c[g];return c}const d=c=>({field:(0,t.css)({display:"flex",flexDirection:"column",marginBottom:c.spacing(2)}),fieldHorizontal:(0,t.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,t.css)({marginTop:c.spacing(.5)}),fieldValidationWrapperHorizontal:(0,t.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,t.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},95984:(Q,I,e)=>{"use strict";e.d(I,{E:()=>n});var t=e(49785);const n=({name:r,control:s,children:o,...m})=>{const{fields:i,append:l,prepend:d,remove:c,swap:g,move:u,insert:E}=(0,t.jz)({control:s,name:r,...m});return o({fields:i,append:l,prepend:d,remove:c,swap:g,move:u,insert:E})}},84167:(Q,I,e)=>{"use strict";e.d(I,{n:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(17408);const o=({label:i,children:l,className:d,...c})=>{const g=(0,r.of)(m);return n.createElement("fieldset",{className:(0,t.cx)(g.wrapper,d),...c},i&&n.createElement(s.s,null,i),l)},m=i=>({wrapper:(0,t.css)({marginBottom:i.spacing(4),"&:last-child":{marginBottom:0}})})},72093:(Q,I,e)=>{"use strict";e.d(I,{P:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(14578);const o=({children:i,horizontal:l,className:d})=>{const c=(0,r.of)(m),g=(0,t.cx)(l?c.horizontal:c.vertical,d);return n.createElement("div",{role:"alert",className:g},n.createElement(s.I,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),i)},m=i=>{const l=`
      font-size: ${i.typography.size.sm};
      font-weight: ${i.typography.fontWeightMedium};
      padding: ${i.spacing(.5,1)};
      color: ${i.colors.error.contrastText};
      background: ${i.colors.error.main};
      border-radius: ${i.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${i.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,t.css)(l,{margin:i.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${i.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,t.css)(l,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,t.css)({marginRight:i.spacing()})}}},51253:(Q,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(32196),n=e(96540),r=e(49785);function s({defaultValues:o,onSubmit:m,validateOnMount:i=!1,validateFieldsOnMount:l,children:d,validateOn:c="onSubmit",maxWidth:g=600,...u}){const{handleSubmit:E,trigger:p,formState:b,...a}=(0,r.mN)({mode:c,defaultValues:o});return(0,n.useEffect)(()=>{i&&p(l)},[p,l,i]),n.createElement("form",{className:(0,t.css)({maxWidth:g!=="none"?g+"px":g,width:"100%"}),onSubmit:E(m),...u},d({errors:b.errors,formState:b,trigger:p,...a}))}},14186:(Q,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(67892),o=e(72093),m=e(76892);const i=({children:d,label:c,tooltip:g,labelWidth:u="auto",invalid:E,loading:p,disabled:b,required:a,className:h,htmlFor:P,grow:y,shrink:C,error:f,transparent:D,interactive:T,...M})=>{const O=(0,r.$j)(),S=l(O,y,C),v=P??(0,s.getChildId)(d),x=typeof c=="string"?n.createElement(m.c,{interactive:T,width:u,tooltip:g,htmlFor:v,transparent:D},`${c}${a?" *":""}`):c;return n.createElement("div",{className:(0,t.cx)(S.container,h),...M},x,n.createElement("div",{className:S.childContainer},n.cloneElement(d,{invalid:E,disabled:b,loading:p}),E&&f&&n.createElement("div",{className:(0,t.cx)(S.fieldValidationWrapper)},n.createElement(o.P,null,f))))};i.displayName="InlineField";const l=(d,c,g)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${c?1:0} ${g?1:0} auto`,margin:`0 ${d.spacing(.5)} ${d.spacing(.5)} 0`}),childContainer:(0,t.css)({flex:`${c?1:0} ${g?1:0} auto`}),fieldValidationWrapper:(0,t.css)({marginTop:d.spacing(.5)})})},39268:(Q,I,e)=>{"use strict";e.d(I,{C:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:i,...l})=>{const d=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(d.container,i),...l},m)},o=m=>({container:(0,t.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:m.spacing(.5)})})},76892:(Q,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(56034);const m=({children:l,className:d,tooltip:c,width:g,transparent:u,interactive:E,as:p="label",...b})=>{const a=(0,r.of)(i,u,g);return n.createElement(p,{className:(0,t.cx)(a.label,d),...b},l,c&&n.createElement(o.m,{interactive:E,placement:"top",content:c,theme:"info"},n.createElement(s.I,{tabIndex:0,name:"info-circle",size:"sm",className:a.icon})))},i=(l,d=!1,c)=>({label:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:l.spacing(0,1),fontWeight:l.typography.fontWeightMedium,fontSize:l.typography.size.sm,backgroundColor:d?"transparent":l.colors.background.secondary,height:l.spacing(l.components.height.md),lineHeight:l.spacing(l.components.height.md),marginRight:l.spacing(.5),borderRadius:l.shape.radius.default,border:"none",width:c?c!=="auto"?`${8*c}px`:c:"100%",color:l.colors.text.primary}),icon:(0,t.css)({color:l.colors.text.secondary,marginLeft:"10px",":hover":{color:l.colors.text.primary}})})},63056:(Q,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:i,grow:l,...d})=>{const c=(0,r.of)(o,l);return n.createElement("div",{className:(0,t.cx)(c.container,i),...d},m)};s.displayName="InlineSegmentGroup";const o=(m,i)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${i?1:0} 0 auto`,marginBottom:m.spacing(.5)})})},60029:(Q,I,e)=>{"use strict";e.d(I,{J:()=>o,f:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578);const o=({children:i,description:l,className:d,category:c,...g})=>{const u=(0,r.of)(m),E=c?.map((p,b)=>n.createElement("span",{className:u.categories,key:`${p}/${b}`},n.createElement("span",null,p),n.createElement(s.I,{name:"angle-right",className:u.chevron})));return n.createElement("div",{className:(0,t.cx)(u.label,d)},n.createElement("label",{...g},n.createElement("div",{className:u.labelContent},E,i),l&&n.createElement("span",{className:u.description},l)))},m=i=>({label:(0,t.css)({label:"Label",fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightMedium,lineHeight:1.25,marginBottom:i.spacing(.5),color:i.colors.text.primary,maxWidth:"480px"}),labelContent:(0,t.css)({display:"flex",alignItems:"center"}),description:(0,t.css)({label:"Label-description",color:i.colors.text.secondary,fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightRegular,marginTop:i.spacing(.25),display:"block"}),categories:(0,t.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,t.css)({margin:i.spacing(0,.25)})})},91634:(Q,I,e)=>{"use strict";e.d(I,{O:()=>o,p:()=>m});var t=e(46942),n=e.n(t),r=e(96540),s=e(29734),o=(i=>(i.Invalid="invalid",i.Valid="valid",i))(o||{});class m extends r.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=l=>d=>{const c=(0,s.tf)(d.target.value,l);this.setState(g=>({...g,error:c?c[0]:null}))},this.populateEventPropsWithStatus=(l,d)=>{const c={...l};return d&&Object.keys(s.Pw).forEach(g=>{((0,s.K)(g,d)||l[g])&&(c[g]=async u=>{u.persist(),(0,s.K)(g,d)&&await this.validatorAsync(d[g]).apply(this,[u]),l[g]&&l[g].apply(null,[u,this.status])})}),c}}static{this.defaultProps={className:""}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:l,className:d,hideErrorMessage:c,inputRef:g,...u}=this.props,{error:E}=this.state,p=n()("gf-form-input",{invalid:this.isInvalid},d),b=this.populateEventPropsWithStatus(u,l);return r.createElement("div",{style:{flexGrow:1}},r.createElement("input",{...b,ref:g,className:p}),E&&!c&&r.createElement("span",null,E))}}},24169:(Q,I,e)=>{"use strict";e.d(I,{A:()=>o,s:()=>s});var t=e(96540),n=e(71332),r=e(14578);const s=m=>{const i=m.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...m},t.createElement(r.I,{name:i?"angle-up":"angle-down",style:{marginTop:"7px"}}))},o=s},11206:(Q,I,e)=>{"use strict";e.d(I,{A:()=>s,l:()=>r});var t=e(96540),n=e(71332);const r=o=>{const{children:m}=o;return t.createElement(n.c.NoOptionsMessage,{...o},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},m)))},s=r},99091:(Q,I,e)=>{"use strict";e.d(I,{DW:()=>f,l6:()=>C});var t=e(46942),n=e.n(t),r=e(96540),s=e(71332),o=e(46005),m=e(8539),i=e(66963),l=e(60578),d=e(40276),c=e(80970),g=e(62235),u=e(23731),E=e(56034),p=e(24169),b=e(11206),a=e(14578);const h=M=>{const{children:O,isSelected:S,data:v}=M;return r.createElement(s.c.Option,{...M},r.createElement("div",{className:"gf-form-select-box__desc-option"},v.imgUrl&&r.createElement("img",{className:"gf-form-select-box__desc-option__img",src:v.imgUrl,alt:""}),r.createElement("div",{className:"gf-form-select-box__desc-option__body"},r.createElement("div",null,O),v.description&&r.createElement("div",{className:"gf-form-select-box__desc-option__desc"},v.description)),S&&r.createElement(a.I,{name:"check","aria-hidden":"true"})))},P=null,y=M=>r.createElement(s.c.MenuList,{...M},r.createElement(d.E,{autoHide:!1,autoHeightMax:"inherit"},M.children));class C extends r.PureComponent{static{this.contextType=l.D}static{this.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:h,SingleValue:g.K,IndicatorsContainer:p.A,MenuList:y,Group:c.n}}}render(){const{defaultValue:O,getOptionLabel:S,getOptionValue:v,onChange:x,options:A,placeholder:R,width:B,value:U,className:w,isDisabled:K,isLoading:N,isSearchable:L,isClearable:V,backspaceRemovesValue:F,isMulti:z,autoFocus:Y,openMenuOnFocus:H,onBlur:k,maxMenuHeight:ee,noOptionsMessage:ie,isOpen:fe,components:q,tooltipContent:Z,tabSelectsValue:J,onCloseMenu:G,onOpenMenu:ne,allowCustomValue:te,formatCreateLabel:oe,"aria-label":le}=this.props;let ue="";B&&(ue="width-"+B);let Te=o.Ay;const he={};te&&(Te=i.A,he.formatCreateLabel=oe??(Fe=>Fe));const re=n()("gf-form-input","gf-form-input--form-dropdown",ue,w),De={...C.defaultProps.components,...q};return r.createElement(D,{onCloseMenu:G,onOpenMenu:ne,tooltipContent:Z,isOpen:fe},(Fe,Ee)=>r.createElement(Te,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:re,components:De,defaultValue:O,value:U,getOptionLabel:S,getOptionValue:v,menuShouldScrollIntoView:!1,isSearchable:L,onChange:x,options:A,placeholder:R||"Choose",styles:(0,u.A)(this.context),isDisabled:K,isLoading:N,isClearable:V,autoFocus:Y,onBlur:k,openMenuOnFocus:H,maxMenuHeight:ee,noOptionsMessage:ie,isMulti:z,backspaceRemovesValue:F,menuIsOpen:fe,onMenuOpen:Fe,onMenuClose:Ee,tabSelectsValue:J,"aria-label":le,...he}))}}class f extends r.PureComponent{static{this.contextType=l.D}static{this.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300}}render(){const{defaultValue:O,getOptionLabel:S,getOptionValue:v,onChange:x,placeholder:A,width:R,value:B,className:U,loadOptions:w,defaultOptions:K,isLoading:N,loadingMessage:L,noOptionsMessage:V,isDisabled:F,isSearchable:z,isClearable:Y,backspaceRemovesValue:H,autoFocus:k,onBlur:ee,openMenuOnFocus:ie,maxMenuHeight:fe,isMulti:q,tooltipContent:Z,onCloseMenu:J,onOpenMenu:G,isOpen:ne}=this.props;let te="";R&&(te="width-"+R);const oe=n()("gf-form-input","gf-form-input--form-dropdown",te,U);return r.createElement(D,{onCloseMenu:J,onOpenMenu:G,tooltipContent:Z,isOpen:ne},(le,ue)=>r.createElement(m.A,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:oe,components:{Option:h,SingleValue:g.K,IndicatorsContainer:p.A,NoOptionsMessage:b.A},defaultValue:O,value:B,getOptionLabel:S,getOptionValue:v,menuShouldScrollIntoView:!1,onChange:x,loadOptions:w,isLoading:N,defaultOptions:K,placeholder:A||"Choose",styles:(0,u.A)(this.context),loadingMessage:L,noOptionsMessage:V,isDisabled:F,isSearchable:z,isClearable:Y,autoFocus:k,onBlur:ee,openMenuOnFocus:ie,maxMenuHeight:fe,isMulti:q,backspaceRemovesValue:H}))}}class D extends r.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!1})}}render(){const{children:O,isOpen:S,tooltipContent:v}=this.props,{isOpenInternal:x}=this.state;let A;return(x||S)&&(A=!1),v?r.createElement(E.m,{show:A,content:v,placement:"bottom"},r.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))):r.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))}}const T=null},74716:(Q,I,e)=>{"use strict";e.d(I,{d:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(14578),o=e(56034);class m extends r.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=l=>{l.stopPropagation(),this.props.onChange(l)}}render(){const{labelClass:l="",switchClass:d="",label:c,checked:g,disabled:u,transparent:E,className:p,tooltip:b,tooltipPlacement:a}=this.props,h=this.state.id,P=`gf-form-label ${l} ${E?"gf-form-label--transparent":""} pointer`,y=`gf-form-switch ${d} ${E?"gf-form-switch--transparent":""}`;return r.createElement("div",{className:"gf-form-switch-container-react"},r.createElement("label",{htmlFor:h,className:`gf-form gf-form-switch-container ${p||""}`},c&&r.createElement("div",{className:P},c,b&&r.createElement(o.m,{placement:a||"auto",content:b,theme:"info"},r.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),r.createElement("div",{className:y},r.createElement("input",{disabled:u,id:h,type:"checkbox",checked:g,onChange:this.internalOnChange}),r.createElement("span",{className:"gf-form-switch__slider"}))))}}},17408:(Q,I,e)=>{"use strict";e.d(I,{s:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=m=>({legend:(0,t.css)({fontSize:m.typography.h3.fontSize,fontWeight:m.typography.fontWeightRegular,margin:m.spacing(0,0,2,0)})}),o=({children:m,className:i,...l})=>{const d=(0,r.of)(s);return n.createElement("legend",{className:(0,t.cx)(d.legend,i),...l},m)}},94354:(Q,I,e)=>{"use strict";e.d(I,{z:()=>E});var t=e(32196),n=e(2543),r=e(96540),s=e(8887),o=e(40845),m=e(14578),i=e(13544),l=e(16797),d=e(56034),c=e(87266);const g=r.forwardRef(({children:b,active:a=!1,disabled:h=!1,size:P="md",onChange:y,onClick:C,id:f,name:D=void 0,description:T,fullWidth:M,"aria-label":O},S)=>{const v=(0,o.of)(u,P,M),x=r.createElement("input",{type:"radio",className:v.radio,onChange:y,onClick:C,disabled:h,id:f,checked:a,name:D,"aria-label":O,ref:S});return T?r.createElement("div",{className:v.radioOption,"data-testid":i.Tp.components.RadioButton.container},r.createElement(d.m,{content:T,placement:"bottom"},x),r.createElement("label",{className:v.radioLabel,htmlFor:f,title:T||O},b)):r.createElement("div",{className:v.radioOption,"data-testid":i.Tp.components.RadioButton.container},x,r.createElement("label",{className:v.radioLabel,htmlFor:f,title:T||O},b))});g.displayName="RadioButton";const u=(b,a,h)=>{const{fontSize:P,height:y,padding:C}=(0,c.SM)(a,b),f=b.colors.text.secondary,D=b.colors.text.primary,T=y*b.spacing.gridSize-4-2;return{radioOption:(0,t.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:h?"1 0 0":"none",textAlign:"center"}),radio:(0,t.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:b.colors.text.primary,fontWeight:b.typography.fontWeightMedium,background:b.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,l.getFocusStyles)(b),"&:focus:not(:focus-visible) + label":(0,l.getMouseFocusStyles)(b),"&:disabled + label":{color:b.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:P,height:`${T}px`,lineHeight:`${T}px`,color:f,padding:b.spacing(0,C),borderRadius:b.shape.radius.default,background:b.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:D}})}};function E({options:b,value:a,onChange:h,onClick:P,disabled:y,disabledOptions:C,size:f="md",id:D,className:T,fullWidth:M=!1,autoFocus:O=!1,"aria-label":S,invalid:v=!1}){const x=(0,r.useCallback)(K=>()=>{h&&h(K.value)},[h]),A=(0,r.useCallback)(K=>()=>{P&&P(K.value)},[P]),R=D??(0,n.uniqueId)("radiogroup-"),B=(0,r.useRef)(R),U=(0,o.of)(p),w=(0,r.useRef)(null);return(0,r.useEffect)(()=>{O&&w.current&&w.current.focus()},[O]),r.createElement("div",{role:"radiogroup","aria-label":S,className:(0,t.cx)(U.radioGroup,M&&U.fullWidth,v&&U.invalid,T)},b.map((K,N)=>{const L=C&&K.value&&C.includes(K.value),V=K.icon?(0,s.Uo)(K.icon):void 0,F=!!(K.imgUrl||K.label||K.component);return r.createElement(g,{size:f,disabled:L||y,active:a===K.value,key:`o.label-${N}`,"aria-label":K.ariaLabel,onChange:x(K),onClick:A(K),id:`option-${K.value}-${R}`,name:B.current,description:K.description,fullWidth:M,ref:a===K.value?w:void 0},V&&r.createElement(m.I,{name:V,className:(0,t.cx)(F&&U.icon)}),K.imgUrl&&r.createElement("img",{src:K.imgUrl,alt:K.label,className:U.img}),K.label," ",K.component?r.createElement(K.component,null):null)}))}E.displayName="RadioButtonGroup";const p=b=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${b.components.input.borderColor}`,borderRadius:b.shape.radius.default,padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:(0,t.css)({marginRight:"6px"}),img:(0,t.css)({width:b.spacing(2),height:b.spacing(2),marginRight:b.spacing(1)}),invalid:(0,t.css)({border:`1px solid ${b.colors.error.border}`})})},5173:(Q,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(32196),n=e(2543),r=e(96540),s=e(40845);const o=({id:d,name:c,label:g,checked:u,value:E,disabled:p,description:b,onChange:a})=>{const h=(0,s.of)(m);return r.createElement("label",{title:b,className:h.label},r.createElement("input",{id:d,name:c,type:"radio",checked:u,value:E,disabled:p,className:h.input,onChange:()=>a&&a(d)}),r.createElement("div",null,g,b&&r.createElement("div",{className:h.description},b)))},m=d=>({input:(0,t.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:d.colors.background.canvas,width:`${d.spacing(2)} !important`,height:d.spacing(2),border:`1px solid ${d.colors.border.medium}`,borderRadius:d.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:d.v1.palette.white,border:`5px solid ${d.colors.primary.main}`},":disabled":{backgroundColor:`${d.colors.action.disabledBackground} !important`,borderColor:d.colors.border.weak},":disabled:checked":{border:`1px solid ${d.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:d.colors.text.disabled,borderRadius:d.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${d.colors.background.canvas}, 0 0 0 3px ${d.colors.primary.main}`}}),label:(0,t.css)({fontSize:d.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${d.spacing(2)} auto`,gap:d.spacing(1)}),description:(0,t.css)({fontSize:d.typography.size.sm,color:d.colors.text.secondary})});function i({name:d,id:c,options:g,value:u,onChange:E,className:p,disabled:b,disabledOptions:a=[]}){const h=(0,s.of)(l),P=c??(0,n.uniqueId)("radiogroup-list-");return r.createElement("div",{id:c,className:(0,t.cx)(h.container,p),role:"radiogroup"},g.map((y,C)=>{const f=`${P}-${C}`,D=u&&u===y.value,T=b||a.some(O=>O===y.value),M=()=>E&&y.value&&E(y.value);return r.createElement(o,{key:C,id:f,name:d,label:y.label,description:y.description,checked:D,value:y.value,disabled:T,onChange:M})}))}const l=d=>({container:(0,t.css)({display:"grid",gap:d.spacing(1)})})},87266:(Q,I,e)=>{"use strict";e.d(I,{SM:()=>l,Xb:()=>s,g$:()=>o,gm:()=>r,lH:()=>m});var t=e(32196),n=e(16797);const r=d=>(0,t.css)({"&:focus":(0,n.getFocusStyles)(d)}),s=(d,c=!1)=>{const g=c?d.colors.error.border:d.components.input.borderColor,u=c?d.colors.error.shade:d.components.input.borderHover,E=d.components.input.background,p=d.components.input.text,b=d.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(o(d),(0,t.css)({background:E,lineHeight:d.typography.body.lineHeight,fontSize:d.typography.size.md,color:p,border:`1px solid ${g}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${p} !important`,borderColor:b},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${d.colors.background.primary}, 0 0 0px 4px ${d.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${p} !important`},"&:hover":{borderColor:u},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:d.colors.action.disabledBackground,color:d.colors.action.disabledText,border:`1px solid ${d.colors.action.disabledBackground}`,"&:hover":{borderColor:g}},"&::placeholder":{color:d.colors.text.disabled,opacity:1}}))},o=d=>(0,t.css)({padding:d.spacing(0,1,0,1)}),m=()=>({sm:(0,t.css)({width:i("sm")}),md:(0,t.css)({width:i("md")}),lg:(0,t.css)({width:i("lg")}),auto:(0,t.css)({width:i("auto")})}),i=d=>{switch(d){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function l(d,c){switch(d){case"sm":return{padding:1,fontSize:c.typography.size.sm,height:c.components.height.sm};case"lg":return{padding:3,fontSize:c.typography.size.lg,height:c.components.height.lg};case"md":default:return{padding:2,fontSize:c.typography.size.md,height:c.components.height.md}}}},95164:(Q,I,e)=>{"use strict";e.d(I,{_:()=>b});var t=e(34796),n=e.n(t),r=e(96540),s=e(83195),o=e(58649),m=e(50082),i=e(52622),l=e(29413),d=e(55852),c=e(24293),g=e(47737);const u={mode:m.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function E(a,h,P,y){const C=P!=null,f=y===i.wV.Vertical?h:a,D=Math.min(f*.15/1.5,20),T=D*1.5,M=C?h-T:h,O=Math.min(M,a);return{showLabel:C,gaugeHeight:O,titleFontSize:D}}function p(a,h,P,y){if(h.color?.mode!==c.Y.Thresholds)return[{value:h.min??o.tw,color:P.color??c.F}];const C=h.thresholds??u,f=C.mode===m.O.Percentage,D=C.steps;let T=h.min??o.tw,M=h.max??o.d1;f&&(T=0,M=100);const O=(0,g.yQ)(T,D),S=(0,g.yQ)(M,D),v=[{value:+T.toFixed(a),color:y.visualization.getColorByName(O.color)}];let x=!0;for(let A=0;A<D.length;A++){const R=D[A];if(x){O===R&&(x=!1);continue}const B=D[A-1];if(v.push({value:R.value,color:y.visualization.getColorByName(B.color)}),R===S)break}return v.push({value:+M.toFixed(a),color:y.visualization.getColorByName(S.color)}),v}class b extends r.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:h,value:P,height:y,onClick:C,text:f,theme:D,orientation:T}=this.props,M=E(h,y,P.title,T),O=T===i.wV.Vertical?`${M.gaugeHeight}px`:"100%",S=r.createElement("div",{style:{height:`${M.gaugeHeight}px`,width:O},ref:v=>this.canvasElement=v});return r.createElement(r.Fragment,null,C?r.createElement("button",{className:(0,d.my)(D),type:"button",onClick:C},S):S,M.showLabel&&r.createElement("div",{style:{textAlign:"center",fontSize:f?.titleSize??M.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:O,top:"-4px",cursor:"default"}},P.title))}}static{this.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:u}}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:h,showThresholdLabels:P,showThresholdMarkers:y,width:C,height:f,theme:D,value:T,orientation:M}=this.props,O=E(C,f,T.title),S=M===i.wV.Vertical?O.gaugeHeight:C,v=Math.min(S,O.gaugeHeight),x=D.colors.background.secondary,A=P?1.5:1,R=Math.min(v/5.5,40)/A,B=R/5,U=(0,s.cN)(T),K=Math.min(S,v*1.3)*.9-((R+(y?B:0)+(P?10:0))*2+10),N=this.props.text?.valueSize??(0,l.Vr)(U,K,v,1,R*1.7),L=Math.max(N/2.5,12);let V=h.min??o.tw,F=h.max??o.d1,z=T.numeric;h.thresholds?.mode===m.O.Percentage&&(V=0,F=100,T.percent===void 0?z=(z-V)/(F-V)*100:z=T.percent*100);const Y=h.decimals===void 0?2:h.decimals;y&&(V=+V.toFixed(Y),F=+F.toFixed(Y));const H={series:{gauges:{gauge:{min:V,max:F,neutralValue:h.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:R},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(Y,h,T,D),label:{show:P,margin:B+1,font:{size:L}},show:y,width:B},value:{color:T.color,formatter:()=>U,font:{size:N,family:D.typography.fontFamily}},show:!0}}},k={data:[[0,z]],label:T.title};try{this.canvasElement&&n().plot(this.canvasElement,[k],H)}catch(ee){console.error("Gauge rendering error",ee,H,T)}}render(){return r.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}},14578:(Q,I,e)=>{"use strict";e.d(I,{I:()=>l});var t=e(32196),n=e(96540),r=e(8867),s=e(8887),o=e(40845),m=e(78318);const i=d=>({icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"}),orange:(0,t.css)({fill:d.v1.palette.orange})}),l=n.forwardRef(({size:d="md",type:c="default",name:g,className:u,style:E,title:p="",...b},a)=>{const h=(0,o.of)(i);(0,s.n6)(g)||console.warn("Icon component passed an invalid icon name",g);const P=g==="fa fa-spinner"?"spinner":g,y=(0,m.Wj)(),C=(0,m.cs)(d),f=C,D=g.startsWith("gf-bar-align")?16:g.startsWith("gf-interp")?30:C,T=(0,m.Xi)(P,c),M=`${y}${T}/${P}.svg`,O=(0,t.cx)(h.icon,u,c==="mono"?{[h.orange]:g==="favorite"}:"",P==="spinner"&&"fa-spin");return n.createElement(r.default,{innerRef:a,src:M,width:D,height:f,title:p,className:O,style:E,...b})});l.displayName="Icon"},78318:(Q,I,e)=>{"use strict";e.d(I,{Wj:()=>o,Xi:()=>n,cs:()=>r});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(m,i){return m?.startsWith("gf-")?"custom":t.includes(m)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function r(m){switch(m){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let s;function o(){if(s)return s;const m=typeof window<"u"&&window.__grafana_public_path__;return m?s=m+"img/icons/":s="public/img/icons/",s}},29158:(Q,I,e)=>{"use strict";e.d(I,{K:()=>c});var t=e(32196),n=e(96540),r=e(95344),s=e(23596),o=e(40845),m=e(16797),i=e(14578),l=e(78318),d=e(56034);const c=n.forwardRef((u,E)=>{const{size:p="md",variant:b="secondary"}=u;let a;p==="xxl"||p==="xxxl"?((0,r.l)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),a="xl"):a=p;const h=(0,o.of)(g,a,b);let P,y;if("tooltip"in u){const{tooltip:C}=u;P=typeof C=="string"?C:void 0}else if("ariaLabel"in u||"aria-label"in u){const{ariaLabel:C,["aria-label"]:f}=u;P=f||C,y=E}if("tooltip"in u){const{name:C,iconType:f,className:D,tooltip:T,tooltipPlacement:M,...O}=u;return n.createElement(d.m,{ref:E,content:T,placement:M},n.createElement("button",{...O,ref:y,"aria-label":P,className:(0,t.cx)(h.button,D),type:"button"},n.createElement(i.I,{name:C,size:a,className:h.icon,type:f})))}else{const{name:C,iconType:f,className:D,...T}=u;return n.createElement("button",{...T,ref:y,"aria-label":P,className:(0,t.cx)(h.button,D),type:"button"},n.createElement(i.I,{name:C,size:a,className:h.icon,type:f}))}});c.displayName="IconButton";const g=(u,E,p)=>{const b=(0,l.cs)(E)+u.spacing.gridSize;let a=u.colors.text.primary;return p==="primary"?a=u.colors.primary.text:p==="destructive"&&(a=u.colors.error.text),{button:(0,t.css)({zIndex:0,position:"relative",margin:`0 ${u.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:a,"&[disabled], &:disabled":{cursor:"not-allowed",color:u.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${b}px`,height:`${b}px`,borderRadius:u.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,m.getFocusStyles)(u),"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(u),"&:hover":{"&:before":{backgroundColor:p==="secondary"?u.colors.action.hover:s.alpha(a,.12),opacity:1}}}),icon:(0,t.css)({verticalAlign:"baseline"})}}},86460:(Q,I,e)=>{"use strict";e.d(I,{e:()=>i,y:()=>d});var t=e(32196),n=e(96540),r=e(41987),s=e(40845),o=e(39938),m=e(37166);const i=n.memo(n.forwardRef(({title:g,featureState:u,...E},p)=>{const b=(0,s.of)(l),a=u?n.createElement(n.Fragment,null,n.createElement("div",{className:b.badge},n.createElement(d,{featureState:u})),n.createElement("h3",null,g)):n.createElement("h3",null,g);return n.createElement(m.w,{branded:!0,title:a,urlTitle:"Read documentation",ref:p,...E})}));i.displayName="FeatureInfoBox";const l=g=>({badge:(0,t.css)({marginBottom:g.spacing(1)})}),d=({featureState:g,tooltip:u})=>{const E=c(g);return n.createElement(o.E,{text:E.text,color:E.color,icon:E.icon,tooltip:u})};function c(g){switch(g){case r.Ay.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},37166:(Q,I,e)=>{"use strict";e.d(I,{w:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(42418),o=e(14578);const m=n.memo(n.forwardRef(({title:l,className:d,children:c,branded:g,url:u,urlTitle:E,onDismiss:p,severity:b="info",...a},h)=>{const P=(0,r.of)(i);return n.createElement(s.F,{severity:b,className:d,...a,ref:h,title:l},n.createElement("div",null,c),u&&n.createElement("a",{href:u,className:(0,t.cx)("external-link",P.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(o.I,{name:"book"})," ",E||"Read more"))}));m.displayName="InfoBox";const i=l=>({docsLink:(0,t.css)({display:"inline-block",marginTop:l.spacing(2)})})},32982:(Q,I,e)=>{"use strict";e.d(I,{r:()=>d});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(96540),m=e(40845),i=e(14578),l=e(17464);function d({referenceElement:u,children:E,suffixIcon:p,placement:b}){const a=(0,m.of)(c),h=(0,m.$j)(),P=[(0,n.cY)(8),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:y,refs:C,floatingStyles:f}=(0,s.we)({open:!0,placement:b,middleware:P,whileElementsMounted:r.ll,strategy:"fixed"});(0,o.useLayoutEffect)(()=>{C.setReference(u)},[u,C]);const{styles:D}=(0,s.DL)(y,{initial:({side:T})=>({opacity:0,transform:g(T,h)}),duration:h.transitions.duration.shortest});return o.createElement(l.ZL,null,o.createElement("div",{style:{display:"inline-block",...f},ref:C.setFloating,"aria-live":"polite"},o.createElement("span",{className:(0,t.cx)(a.root),style:D},E&&o.createElement("span",null,E),p&&o.createElement(i.I,{name:p}))))}const c=u=>({root:(0,t.css)({...u.typography.bodySmall,willChange:"transform",background:u.components.tooltip.background,color:u.components.tooltip.text,padding:u.spacing(.5,1.5),borderRadius:u.shape.radius.pill,display:"inline-flex",gap:u.spacing(.5),alignItems:"center"})}),g=(u,E)=>{switch(u){case"top":return`translateY(${E.spacing(1)})`;case"bottom":return`translateY(-${E.spacing(1)})`;case"left":return`translateX(${E.spacing(1)})`;case"right":return`translateX(-${E.spacing(1)})`}}},51440:(Q,I,e)=>{"use strict";e.d(I,{D:()=>s});var t=e(96540),n=e(29413),r=e(10354);const s=t.forwardRef((m,i)=>{const{defaultValue:l="",minWidth:d=10,maxWidth:c,onCommitChange:g,onKeyDown:u,onBlur:E,...p}=m,[b,a]=t.useState(l),[h,P]=t.useState(d);return(0,t.useEffect)(()=>{P(o(b.toString(),d,c))},[b,c,d]),t.createElement(r.p,{...p,ref:i,value:b.toString(),onChange:y=>{a(y.currentTarget.value)},width:h,onBlur:y=>{E?E(y):g&&g(y)},onKeyDown:y=>{u?u(y):y.key==="Enter"&&g&&g(y)},"data-testid":"autosize-input"})});function o(m,i,l){if(!m)return i;const c=(0,n.kD)(m.toString(),14).width/8+3;return i&&c<i?i:l&&c>l?l:c}s.displayName="AutoSizeInput"},10354:(Q,I,e)=>{"use strict";e.d(I,{n:()=>d,p:()=>l});var t=e(32196),n=e(96540),r=e(71473),s=e(40845),o=e(3911),m=e(87266),i=e(62930);const l=n.forwardRef((c,g)=>{const{className:u,addonAfter:E,addonBefore:p,prefix:b,suffix:a,invalid:h,loading:P,width:y=0,...C}=c,[f,D]=(0,r.A)(),[T,M]=(0,r.A)(),O=(0,s.$j)(),S=d({theme:O,invalid:!!h,width:y});return n.createElement("div",{className:(0,t.cx)(S.wrapper,u),"data-testid":"input-wrapper"},!!p&&n.createElement("div",{className:S.addon},p),n.createElement("div",{className:S.inputWrapper},b&&n.createElement("div",{className:S.prefix,ref:f},b),n.createElement("input",{ref:g,className:S.input,...C,style:{paddingLeft:b?D.width+12:void 0,paddingRight:a||P?M.width+12:void 0}}),(a||P)&&n.createElement("div",{className:S.suffix,ref:T},P&&n.createElement(i.y,{className:S.loadingIndicator,inline:!0}),a)),!!E&&n.createElement("div",{className:S.addon},E))});l.displayName="Input";const d=(0,o.N)(({theme:c,invalid:g=!1,width:u})=>{const E="28px",p=(0,t.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:c.typography.size.md,height:"100%",minWidth:E,color:c.colors.text.secondary});return{wrapper:(0,t.cx)((0,t.css)({label:"input-wrapper",display:"flex",width:u?c.spacing(u):"100%",height:c.spacing(c.components.height.md),borderRadius:c.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:g?c.colors.error.border:c.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,t.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:E},"&:not(:last-child)":{paddingRight:E},"&[readonly]":{cursor:"default"}}}),input:(0,t.cx)((0,m.gm)(c),(0,m.Xb)(c,g),(0,t.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:c.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,t.css)({backgroundColor:c.colors.action.disabledBackground,color:c.colors.action.disabledText,border:`1px solid ${c.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,t.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,t.cx)(p,(0,t.css)({label:"input-prefix",paddingLeft:c.spacing(1),paddingRight:c.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,t.cx)(p,(0,t.css)({label:"input-suffix",paddingLeft:c.spacing(1),paddingRight:c.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,t.css)({"& + *":{marginLeft:c.spacing(.5)}})}})},16504:(Q,I,e)=>{"use strict";e.d(I,{e:()=>n});var t=e(49785);const n=t.xI},48840:(Q,I,e)=>{"use strict";e.d(I,{j:()=>h});var t=e(32196),n=e(2543),r=e(96540),s=e(32885),o=e(39070),m=e(40845),i=e(14578),l=e(19384),d=e(56034),c=e(29158);const g=(0,t.css)({display:"flex",alignItems:"center",height:"100%"});function u({row:f,__rowID:D}){return r.createElement("div",{className:g},r.createElement(c.K,{tooltip:"toggle row expanded","aria-controls":D,name:f.isExpanded?"angle-down":"angle-right","aria-expanded":f.isExpanded,...f.getToggleRowExpandedProps(),size:"lg"}))}function E({isAllRowsExpanded:f,toggleAllRowsExpanded:D}){return r.createElement("div",{className:g},r.createElement(c.K,{"aria-label":f?"Collapse all rows":"Expand all rows",name:f?"table-collapse-all":"table-expand-all",onClick:()=>D(),size:"lg",tooltip:f?"Collapse all rows":"Expand all rows",variant:"secondary"}))}const p="__expander";function b(f,D=!1){return[{id:p,Cell:u,...D&&{Header:E},disableSortBy:!0,width:0},...f.map(T=>({id:T.id,accessor:T.id,Header:T.header||(()=>null),sortType:T.sortType||"alphanumeric",disableSortBy:!T.sortType,width:T.disableGrow?0:void 0,visible:T.visible,...T.cell&&{Cell:T.cell}}))]}const a=f=>{const D=f.colors.emphasize(f.colors.background.primary,.03);return{container:(0,t.css)({display:"flex",gap:f.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,t.css)({borderRadius:f.shape.radius.default,width:"100%",td:{padding:f.spacing(1)},"td, th":{minWidth:f.spacing(3)}}),disableGrow:(0,t.css)({width:0}),header:(0,t.css)({borderBottom:`1px solid ${f.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:f.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:f.spacing(2.5),textAlign:"left",fontWeight:f.typography.fontWeightMedium}}),row:(0,t.css)({label:"row",borderBottom:`1px solid ${f.colors.border.weak}`,"&:hover":{backgroundColor:D},"&:last-child":{borderBottom:0}}),expandedRow:(0,t.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,t.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${f.colors.border.weak}`,position:"relative",padding:f.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:f.spacing(2),background:f.colors.border.medium}}}),sortableHeader:(0,t.css)({"&&":{padding:0}})}};function h({className:f,columns:D,data:T,getRowId:M,headerTooltips:O,pageSize:S=0,renderExpandedRow:v,showExpandAll:x=!1,fetchData:A}){const R=(0,m.of)(a),B=(0,r.useMemo)(()=>b(D,x),[D,x]),U=P(),w=(0,r.useCallback)(ee=>`${U}-${ee.id}`.replace(/\s/g,""),[U]),K=[s.useSortBy,s.useExpanded],N=T.length>S,L=S>0;L&&K.push(s.usePagination);const V=(0,s.useTable)({columns:B,data:T,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!A,getRowId:M,initialState:{hiddenColumns:[!v&&p,...B.filter(ee=>!(!ee.visible||ee.visible(T))).map(ee=>ee.id).filter(o.zz)].filter(o.zz)}},...K),{getTableProps:F,getTableBodyProps:z,headerGroups:Y,prepareRow:H}=V,{sortBy:k}=V.state;return(0,r.useEffect)(()=>{A&&A({sortBy:k})},[k,A]),(0,r.useEffect)(()=>{L&&V.setPageSize(S)},[L,S,V.setPageSize,V]),r.createElement("div",{className:R.container},r.createElement("table",{...F(),className:(0,t.cx)(R.table,f)},r.createElement("thead",null,Y.map(ee=>{const{key:ie,...fe}=ee.getHeaderGroupProps();return r.createElement("tr",{key:ie,...fe},ee.headers.map(q=>{const{key:Z,...J}=q.getHeaderProps(),G=O?.[q.id];return r.createElement("th",{key:Z,className:(0,t.cx)(R.header,{[R.disableGrow]:q.width===0,[R.sortableHeader]:q.canSort}),...J,...q.isSorted&&{"aria-sort":q.isSortedDesc?"descending":"ascending"}},r.createElement(C,{column:q,headerTooltip:G}))}))})),r.createElement("tbody",{...z()},(L?V.page:V.rows).map(ee=>{H(ee);const{key:ie,...fe}=ee.getRowProps(),q=w(ee),Z=ee.isExpanded;return r.createElement(r.Fragment,{key:ie},r.createElement("tr",{...fe,className:(0,t.cx)(R.row,Z&&R.expandedRow)},ee.cells.map(J=>{const{key:G,...ne}=J.getCellProps();return r.createElement("td",{key:G,...ne},J.render("Cell",{__rowID:q}))})),Z&&v&&r.createElement("tr",{...fe,id:q,className:R.expandedContentRow},r.createElement("td",{colSpan:ee.cells.length},v(ee.original))))}))),L&&N&&r.createElement("span",null,r.createElement(l.d,{currentPage:V.state.pageIndex+1,numberOfPages:V.pageOptions.length,onNavigate:ee=>V.gotoPage(ee-1)})))}const P=()=>(0,r.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),y=f=>({sortIcon:(0,t.css)({position:"absolute",top:f.spacing(1)}),headerTooltipIcon:(0,t.css)({marginLeft:f.spacing(.5)})});function C({column:{canSort:f,render:D,isSorted:T,isSortedDesc:M,getSortByToggleProps:O},headerTooltip:S}){const v=(0,m.of)(y),{onClick:x}=O(),A=r.createElement(r.Fragment,null,D("Header"),S&&r.createElement(d.m,{theme:"info-alt",content:S.content,placement:"top-end"},r.createElement(i.I,{className:v.headerTooltipIcon,name:S.iconName||"info-circle","data-testid":"header-tooltip-icon"})),T&&r.createElement("span",{"aria-hidden":"true",className:v.sortIcon},r.createElement(i.I,{name:M?"angle-down":"angle-up"})));return f?r.createElement("button",{type:"button",onClick:x},A):A}},24022:(Q,I,e)=>{"use strict";e.d(I,{B:()=>r});var t=e(96540),n=e(44533);class r extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:o,config:m,open:i,onDidRender:l}=this.props,d=this.wrapperRef.current,c=new n.O(o,i,m);d.hasChildNodes()?d.replaceChild(c.render(),d.lastChild):d.appendChild(c.render()),l&&l(c.json)}}static{this.defaultProps={open:3,config:{animateOpen:!0}}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:o}=this.props;return t.createElement("div",{className:o,ref:this.wrapperRef})}}},44533:(Q,I,e)=>{"use strict";e.d(I,{O:()=>h});var t=e(2543);function n(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function r(P){return!!P&&typeof P==="object"}function s(P){if(P===void 0)return"";if(P===null||typeof P=="object"&&!P.constructor)return"Object";const C=/function ([^(]*)/.exec(P.constructor.toString());return C&&C.length>1?C[1]:""}function o(P){return P===null?"null":typeof P}function m(P,y){const C=o(P);return C==="null"||C==="undefined"?C:(C==="string"&&(y='"'+n(y)+'"'),C==="function"?P.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":y)}let i="";function l(P){return r(P)?(i=s(P),Array.isArray(P)&&(i+="["+P.length+"]")):i=m(P,P.toString()),i}function d(P){return`json-formatter-${P}`}function c(P,y,C){const f=document.createElement(P);return y&&f.classList.add(d(y)),C!==void 0&&(C instanceof Node?f.appendChild(C):f.appendChild(document.createTextNode(String(C)))),f}const g=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,u=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,E=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,b=typeof window<"u"&&window.requestAnimationFrame||(P=>(P(),0)),a={animateOpen:!0,animateClose:!0};class h{constructor(y,C=1,f=a,D){this.json=y,this.open=C,this.config=f,this.key=D,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(y){this._isOpen=y}get isDate(){return this.type==="string"&&(g.test(this.json)||E.test(this.json)||u.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return r(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return o(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(y=>y||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(d("open")))}openAtDepth(y=1){y<0||(this.open=y,this.isOpen=y!==0,this.element&&(this.removeChildren(!1),y===0?this.element.classList.remove(d("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(d("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const y=c("span");return y.appendChild(c("span","bracket","[")),this.isNumberArray()?(this.json.forEach((C,f)=>{f>0&&y.appendChild(c("span","array-comma",",")),y.appendChild(c("span","number",C))}),this.skipChildren=!0):y.appendChild(c("span","number",this.json.length)),y.appendChild(c("span","bracket","]")),y}render(y=!1){this.element=c("div","row");const C=c("a","toggler-link"),f=c("span","toggler");if(this.isObject&&C.appendChild(f),this.hasKey&&C.appendChild(c("span","key",`${this.key}:`)),this.isObject){const T=c("span","value"),M=c("span"),O=c("span","constructor-name",this.constructorName);if(M.appendChild(O),this.isArray){const S=this.renderArray();M.appendChild(S)}T.appendChild(M),C.appendChild(T)}else{const T=this.isUrl?c("a"):c("span");T.classList.add(d(this.type)),this.isDate&&T.classList.add(d("date")),this.isUrl&&(T.classList.add(d("url")),T.setAttribute("href",this.json));const M=m(this.json,this.json);T.appendChild(document.createTextNode(M)),C.appendChild(T)}const D=c("div","children");return this.isObject&&D.classList.add(d("object")),this.isArray&&D.classList.add(d("array")),this.isEmpty&&D.classList.add(d("empty")),this.config&&this.config.theme&&this.element.classList.add(d(this.config.theme)),this.isOpen&&this.element.classList.add(d("open")),y||this.element.appendChild(C),this.skipChildren?C.removeChild(f):this.element.appendChild(D),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&C.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(y=!1){const C=this.element&&this.element.querySelector(`div.${d("children")}`);if(!(!C||this.isEmpty))if(y){let f=0;const D=()=>{const T=this.keys[f],M=new h(this.json[T],this.open-1,this.config,T);C.appendChild(M.render()),f+=1,f<this.keys.length&&(f>p?D():b(D))};b(D)}else this.keys.forEach(f=>{const D=new h(this.json[f],this.open-1,this.config,f);C.appendChild(D.render())})}removeChildren(y=!1){const C=this.element&&this.element.querySelector(`div.${d("children")}`);if(y){let f=0;const D=()=>{C&&C.children.length&&(C.removeChild(C.children[0]),f+=1,f>p?D():b(D))};b(D)}else C&&(C.innerHTML="")}}},90613:(Q,I,e)=>{"use strict";e.d(I,{a:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=(0,n.forwardRef)((d,c)=>{const{children:g,margin:u,marginX:E,marginY:p,marginTop:b,marginBottom:a,marginLeft:h,marginRight:P,padding:y,paddingX:C,paddingY:f,paddingTop:D,paddingBottom:T,paddingLeft:M,paddingRight:O,display:S,backgroundColor:v,grow:x,shrink:A,basis:R,flex:B,borderColor:U,borderStyle:w,borderRadius:K,direction:N,justifyContent:L,alignItems:V,boxShadow:F,element:z,gap:Y,...H}=d,k=(0,r.of)(l,u,E,p,b,a,h,P,y,C,f,D,T,M,O,S,v,x,A,R,B,U,w,K,N,L,V,F,Y),ee=z??"div";return n.createElement(ee,{ref:c,className:k.root,...H},g)});o.displayName="Box";const m=(d,c)=>{switch(d){case"error":case"success":case"info":case"warning":return c.colors[d].borderTransparent;default:return d?c.colors.border[d]:void 0}},i=(d,c)=>{switch(d){case"error":case"success":case"info":case"warning":return c.colors[d].transparent;default:return d?c.colors.background[d]:void 0}},l=(d,c,g,u,E,p,b,a,h,P,y,C,f,D,T,M,O,S,v,x,A,R,B,U,w,K,N,L,V)=>({root:(0,t.css)([(0,s.Y)(d,c,F=>({margin:d.spacing(F)})),(0,s.Y)(d,g,F=>({marginLeft:d.spacing(F),marginRight:d.spacing(F)})),(0,s.Y)(d,u,F=>({marginTop:d.spacing(F),marginBottom:d.spacing(F)})),(0,s.Y)(d,E,F=>({marginTop:d.spacing(F)})),(0,s.Y)(d,p,F=>({marginBottom:d.spacing(F)})),(0,s.Y)(d,b,F=>({marginLeft:d.spacing(F)})),(0,s.Y)(d,a,F=>({marginRight:d.spacing(F)})),(0,s.Y)(d,h,F=>({padding:d.spacing(F)})),(0,s.Y)(d,P,F=>({paddingLeft:d.spacing(F),paddingRight:d.spacing(F)})),(0,s.Y)(d,y,F=>({paddingTop:d.spacing(F),paddingBottom:d.spacing(F)})),(0,s.Y)(d,C,F=>({paddingTop:d.spacing(F)})),(0,s.Y)(d,f,F=>({paddingBottom:d.spacing(F)})),(0,s.Y)(d,D,F=>({paddingLeft:d.spacing(F)})),(0,s.Y)(d,T,F=>({paddingRight:d.spacing(F)})),(0,s.Y)(d,M,F=>({display:F})),(0,s.Y)(d,O,F=>({backgroundColor:i(F,d)})),(0,s.Y)(d,w,F=>({flexDirection:F})),(0,s.Y)(d,S,F=>({flexGrow:F})),(0,s.Y)(d,v,F=>({flexShrink:F})),(0,s.Y)(d,x,F=>({flexBasis:F})),(0,s.Y)(d,A,F=>({flex:F})),(0,s.Y)(d,B,F=>({borderStyle:F})),(0,s.Y)(d,R,F=>({borderColor:m(F,d)})),(B||R)&&{borderWidth:"1px"},(0,s.Y)(d,K,F=>({justifyContent:F})),(0,s.Y)(d,N,F=>({alignItems:F})),(0,s.Y)(d,U,F=>({borderRadius:d.shape.radius[F]})),(0,s.Y)(d,L,F=>({boxShadow:d.shadows[F]})),(0,s.Y)(d,V,F=>({gap:d.spacing(F)}))])})},71259:(Q,I,e)=>{"use strict";e.d(I,{x:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=(0,n.forwardRef)((i,l)=>{const{alignItems:d,children:c,gap:g,columns:u,minColumnWidth:E,...p}=i,b=(0,r.of)(m,g,u,E,d);return n.createElement("div",{ref:l,...p,className:b.grid},c)});o.displayName="Grid";const m=(i,l,d,c,g)=>({grid:(0,t.css)([{display:"grid"},(0,s.Y)(i,l,u=>({gap:i.spacing(u)})),c&&(0,s.Y)(i,c,u=>({gridTemplateColumns:`repeat(auto-fill, minmax(${i.spacing(u)}, 1fr))`})),d&&(0,s.Y)(i,d,u=>({gridTemplateColumns:`repeat(${u}, 1fr)`})),(0,s.Y)(i,g,u=>({alignItems:u}))])})},66864:(Q,I,e)=>{"use strict";e.d(I,{Gy:()=>m,PE:()=>o,gW:()=>i,mc:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=(u=>(u[u.Horizontal=0]="Horizontal",u[u.Vertical=1]="Vertical",u))(s||{});const o=({children:u,orientation:E=0,spacing:p="sm",justify:b="flex-start",align:a="normal",wrap:h=!1,width:P="100%",height:y="100%",...C})=>{const f=(0,r.of)(d,E,p,b,a,h);return n.createElement("div",{className:f.layout,style:{width:P,height:y},...C},n.Children.toArray(u).filter(Boolean).map((D,T)=>n.createElement("div",{className:f.childWrapper,key:T},D)))},m=({children:u,spacing:E,justify:p,align:b="center",wrap:a,width:h,height:P})=>n.createElement(o,{spacing:E,justify:p,orientation:0,align:b,width:h,height:P,wrap:a},u),i=({children:u,spacing:E,justify:p,align:b,width:a,height:h})=>n.createElement(o,{spacing:E,justify:p,orientation:1,align:b,width:a,height:h},u),l=({children:u,padding:E,margin:p,grow:b,shrink:a})=>{const h=(0,r.of)(g,E,p);return n.createElement("div",{className:(0,t.cx)(h.wrapper,b!==void 0&&(0,t.css)({flexGrow:b}),a!==void 0&&(0,t.css)({flexShrink:a}))},u)},d=(u,E,p,b,a,h)=>{const P=p!=="none"?u.spacing(c[p]):0,y=E===0&&!h||E===1?0:`-${P}`,C=E===1?"vertical-group":"horizontal-group";return{layout:(0,t.css)({label:C,display:"flex",flexDirection:E===1?"column":"row",flexWrap:h?"wrap":"nowrap",justifyContent:b,alignItems:a,height:"100%",maxWidth:"100%",marginBottom:y}),childWrapper:(0,t.css)({label:"layoutChildrenWrapper",marginBottom:E===0&&!h?0:P,marginRight:E===0?P:0,display:"flex",alignItems:a,"&:last-child":{marginBottom:E===1?0:void 0,marginRight:E===0?0:void 0}})}},c={none:0,xs:.5,sm:1,md:2,lg:3},g=(u,E,p)=>{const b=E&&E!=="none"&&u.spacing(c[E])||0,a=p&&p!=="none"&&u.spacing(c[p])||0;return{wrapper:(0,t.css)({label:"container",margin:a,padding:b})}}},68402:(Q,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(96540),n=e(90613);const r=({v:s=0,h:o=0,layout:m})=>t.createElement(n.a,{paddingRight:o,paddingBottom:s,display:m==="inline"?"inline-block":"block"})},67061:(Q,I,e)=>{"use strict";e.d(I,{B:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=n.forwardRef((i,l)=>{const{gap:d=1,alignItems:c,justifyContent:g,direction:u,wrap:E,children:p,grow:b,shrink:a,basis:h,flex:P,...y}=i,C=(0,r.of)(m,d,c,g,u,E,b,a,h,P);return n.createElement("div",{ref:l,className:C.flex,...y},p)});o.displayName="Stack";const m=(i,l,d,c,g,u,E,p,b,a)=>({flex:(0,t.css)([{display:"flex"},(0,s.Y)(i,g,h=>({flexDirection:h})),(0,s.Y)(i,u,h=>({flexWrap:h})),(0,s.Y)(i,d,h=>({alignItems:h})),(0,s.Y)(i,c,h=>({justifyContent:h})),(0,s.Y)(i,l,h=>({gap:i.spacing(h)})),(0,s.Y)(i,E,h=>({flexGrow:h})),(0,s.Y)(i,p,h=>({flexShrink:h})),(0,s.Y)(i,b,h=>({flexBasis:h})),(0,s.Y)(i,a,h=>({flex:h}))])})},16795:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>n});function t(r,s,o,m){const i=s[m];if(i!=null)return{[r.breakpoints.up(m)]:o(i)}}function n(r,s,o){return s==null?null:typeof s!="object"||!("xs"in s)?o(s):[t(r,s,o,"xs"),t(r,s,o,"sm"),t(r,s,o,"md"),t(r,s,o,"lg"),t(r,s,o,"xl"),t(r,s,o,"xxl")]}},50720:(Q,I,e)=>{"use strict";e.d(I,{N:()=>o});var t=e(96540),n=e(52594),r=e(71733),s=e(40672);const o=(0,t.forwardRef)(({href:m,children:i,...l},d)=>{const c=r.I.stripBaseFromUrl(s.sQ.sanitizeUrl(m??""));return t.createElement(n.Link,{ref:d,to:c,...l},i)});o.displayName="Link"},72109:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>c});var t=e(32196),n=e(96540),r=e(40672),s=e(71733),o=e(40845),m=e(14578),i=e(71356),l=e(50720);const d={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},c=(0,n.forwardRef)(({href:u,color:E="link",external:p=!1,inline:b=!0,variant:a="body",weight:h,icon:P,children:y,...C},f)=>{const D=r.sQ.sanitizeUrl(u??""),T=(0,o.$j)(),M=g(T,b,a,h,E),O=P||"external-link-alt";if(p)return n.createElement("a",{href:D,ref:f,...C,target:"_blank",rel:"noreferrer",className:M},y,n.createElement(m.I,{size:d[a]||"md",name:O}));const S=s.I.stripBaseFromUrl(D);return n.createElement(l.N,{ref:f,href:S,...C,className:M},y,P&&n.createElement(m.I,{name:P,size:d[a]||"md"}))});c.displayName="TextLink";const g=(u,E,p,b,a)=>(0,t.css)([p&&{...u.typography[p]},b&&{fontWeight:(0,i.iV)(b,u)},a&&{color:u.colors.text[a]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:u.colors.text.link}},E&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},85918:(Q,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(3911);const s=(0,r.N)((m=!1)=>({list:(0,t.css)({listStyleType:"none",margin:0,padding:0}),item:(0,t.css)({display:m&&"inline-block"||"block"})}));class o extends n.PureComponent{constructor(i){super(i)}render(){const{items:i,renderItem:l,getItemKey:d,className:c,inline:g}=this.props,u=s(g);return n.createElement("ul",{className:(0,t.cx)(u.list,c)},i.map((E,p)=>n.createElement("li",{className:u.item,key:d?d(E):p},l(E,p))))}}},1551:(Q,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(96540),n=e(85918);class r extends t.PureComponent{render(){return t.createElement(n.p,{inline:!0,...this.props})}}},33552:(Q,I,e)=>{"use strict";e.d(I,{B:()=>r});var t=e(96540),n=e(85918);class r extends t.PureComponent{render(){return t.createElement(n.p,{...this.props})}}},57514:(Q,I,e)=>{"use strict";e.d(I,{G:()=>c});var t=e(32196),n=e(96540),r=e(40845);const s=28,o=2.4,m=500,i=4e3,l=300,d=100/s*100;function c({width:u,delay:E=l,ariaLabel:p="Loading bar"}){const b=Math.min(Math.max(Math.round(u*o),m),i),a=(0,r.of)(g,E,b),h={overflow:"hidden"};return n.createElement("div",{style:h},n.createElement("div",{"aria-label":p,className:a.bar}))}const g=(u,E,p)=>{const b=(0,t.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${d}%)`}});return{bar:(0,t.css)({width:s+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:b,animationDelay:`${E}ms`,animationDuration:`${p}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},39558:(Q,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(62930);const o=({text:i,className:l,...d})=>{const c=(0,r.of)(m);return n.createElement("div",{className:(0,t.cx)(c.container,l),...d},i," ",n.createElement(s.y,{inline:!0}))},m=i=>({container:(0,t.css)({marginBottom:i.spacing(4)})})},76218:(Q,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(96540),n=e(88323),r=e(64278);const s=({value:o,onChange:m,context:i,item:l})=>{const d=l.settings??{},c=(0,r.sE)(i.data,d?.filter),g=(0,r.m3)(c,o,void 0,void 0,d.baseNameMode),u=(0,t.useCallback)(p=>{if(!(p&&!(0,r.v3)(p.value,c)))return m(p?.value)},[c,m]),E=g.find(p=>p.value===o);return t.createElement(t.Fragment,null,t.createElement(n.l6,{value:E,placeholder:d.placeholderText??"Select field",options:g,onChange:u,noOptionsMessage:d.noFieldsMessage,width:d.width,isClearable:d.isClearable!==!1}))}},9988:(Q,I,e)=>{"use strict";e.d(I,{bx:()=>l,cH:()=>g});var t=e(96540),n=e(11261),r=e(1173),s=e(85200),o=e(4025),m=e(88323);const i=(0,t.memo)(u=>{const{data:E,options:p,onChange:b,id:a}=u,h=d(E),P=c(h,p),y=(0,t.useCallback)(f=>b(f.value),[b]),C=P.find(f=>f.value===p);return t.createElement(m.l6,{inputId:a,value:C,options:P,onChange:y})});i.displayName="FieldTypeMatcherEditor";const l=[{value:n.PU.number,label:"Number",icon:(0,o.lV)(n.PU.number)},{value:n.PU.string,label:"String",icon:(0,o.lV)(n.PU.string)},{value:n.PU.time,label:"Time",icon:(0,o.lV)(n.PU.time)},{value:n.PU.boolean,label:"Boolean",icon:(0,o.lV)(n.PU.boolean)},{value:n.PU.trace,label:"Traces",icon:(0,o.lV)(n.PU.trace)},{value:n.PU.enum,label:"Enum",icon:(0,o.lV)(n.PU.enum)},{value:n.PU.other,label:"Other",icon:(0,o.lV)(n.PU.other)}],d=u=>(0,t.useMemo)(()=>{const E=new Map;for(const p of l)E.set(p.value,0);for(const p of u)for(const b of p.fields){const a=b.type||n.PU.other;let h=E.get(a);h||(h=0),E.set(a,h+1)}return E},[u]),c=(u,E)=>(0,t.useMemo)(()=>{let p=!1;const b=[];for(const a of l){const h=u.get(a.value),P=E===a.value;(h||P)&&b.push({...a,label:`${a.label} (${u.get(a.value)})`}),P&&(p=!0)}return E&&!p&&b.push({value:E,label:`${E} (No matches)`}),b},[u,E]),g={id:r.Ct.byType,component:i,matcher:s.sJ.get(r.Ct.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:u=>u}},19346:(Q,I,e)=>{"use strict";e.d(I,{N:()=>c,r1:()=>p});var t=e(32196),n=e(96540),r=e(75059),s=e(1173),o=e(85200),m=e(52622),i=e(40845),l=e(10354),d=e(88323);const c=[{label:"==",value:m.zT.EQ},{label:"!=",value:m.zT.NEQ},{label:">",value:m.zT.GT},{label:">=",value:m.zT.GTE},{label:"<",value:m.zT.LT},{label:"<=",value:m.zT.LTE}];function g(b){return b===r.gy.allIsNull||b===r.gy.allIsZero}const u=({options:b,onChange:a})=>{const h=(0,i.of)(E),P=(0,n.useMemo)(()=>r.AS.selectOptions([b?.reducer]),[b?.reducer]),y=(0,n.useCallback)(M=>a({...b,reducer:M.value}),[b,a]),C=(0,n.useCallback)(M=>a({...b,op:M.value}),[b,a]),f=(0,n.useCallback)(M=>{const O=M.currentTarget.valueAsNumber;return a({...b,value:O})},[b,a]),D=b??{},T=g(b.reducer);return n.createElement("div",{className:h.spot},n.createElement(d.l6,{value:P.current,options:P.options,onChange:y,placeholder:"Select field reducer"}),D.reducer&&!T&&n.createElement(n.Fragment,null,n.createElement(d.l6,{value:c.find(M=>M.value===D.op),options:c,onChange:C,"aria-label":"Comparison operator",width:19}),n.createElement(l.p,{type:"number",value:D.value,onChange:f})))},E=b=>({spot:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),p={id:s.Ct.byValue,component:u,matcher:o.sJ.get(s.Ct.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:b=>`${b?.reducer} ${b?.op} ${b?.value}`}},74668:(Q,I,e)=>{"use strict";e.d(I,{R:()=>c,X:()=>i});var t=e(96540),n=e(28240),r=e(1173),s=e(85200),o=e(88323);const m=(g,u,E)=>{if(!E)return;let p=g.find(b=>!u.some(a=>b===a));if(p)return p};function i({value:g,data:u,onChange:E,placeholder:p}){const b=(0,t.useMemo)(()=>l(u),[u]),[a,h]=(0,t.useState)({refIds:[],value:void 0}),P=(0,t.useMemo)(()=>b.find(C=>C.value===g)??m(b,a.refIds,a.value),[g,b,a]),y=(0,t.useCallback)(C=>{E(C?.value)},[E]);return(b!==a.refIds||P?.value!==a.value)&&h({refIds:b,value:P?.value}),t.createElement(o.l6,{options:b,onChange:y,isClearable:!0,placeholder:p??"Select query refId",value:P})}function l(g){const u=new Map;for(const p of g){const b=p.refId??"",a=u.get(b)??[];a.length===0&&u.set(b,a),a.push(p)}const E=[];for(const[p,b]of u.entries())E.push({value:p,label:`Query: ${p??"(missing refId)"}`,description:d(b)});return E}function d(g){return`Frames (${g.length}):
    ${g.slice(0,Math.min(3,g.length)).map(u=>(0,n.Ri)(u)).join(", ")} ${g.length>3?"...":""}`}const c={id:r.Ct.byFrameRefID,component:g=>t.createElement(i,{value:g.options,data:g.data,onChange:g.onChange}),matcher:s.sJ.get(r.Ct.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:g=>g}},84349:(Q,I,e)=>{"use strict";e.d(I,{g:()=>h});var t=e(83077),n=e(96540),r=e(1173),s=e(85200),o=e(10354);const m=(0,n.memo)(P=>{const{options:y,onChange:C}=P,f=(0,n.useCallback)(D=>C(D.target.value),[C]);return n.createElement(o.p,{placeholder:"Enter regular expression",defaultValue:y,onBlur:f})});m.displayName="FieldNameByRegexMatcherEditor";const i={id:r.Ct.byRegexp,component:m,matcher:s.sJ.get(r.Ct.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:P=>P};var l=e(88323),d=e(64278);const c=(0,n.memo)(P=>{const{data:y,options:C,onChange:f,id:D}=P,T=(0,d.sE)(y),M=(0,d.m3)(T,C),O=(0,n.useCallback)(v=>{if((0,d.v3)(v.value,T))return f(v.value)},[T,f]),S=M.find(v=>v.value===C);return n.createElement(l.l6,{value:S,options:M,onChange:O,inputId:D})});c.displayName="FieldNameMatcherEditor";const g={id:r.Ct.byName,component:c,matcher:s.sJ.get(r.Ct.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:P=>P},u=(0,n.memo)(P=>{const{data:y,options:C,onChange:f}=P,{readOnly:D,prefix:T}=C,M=(0,d.sE)(y),O=(0,d.m3)(M,void 0),S=(0,n.useCallback)(v=>{if(Array.isArray(v))return f({...C,names:v.reduce((x,A)=>((0,d.v3)(A.value,M)&&x.push(A.value),x),[])})},[M,f,C]);if(D){const v=(C.names??[]).join(", ");return n.createElement(o.p,{value:v,readOnly:!0,disabled:!0,prefix:T})}return n.createElement(l.KF,{value:C.names,options:O,onChange:S})});u.displayName="FieldNameMatcherEditor";const E={id:r.Ct.byNames,component:u,matcher:s.sJ.get(r.Ct.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:P=>(P.names??[]).join(", "),excludeFromPicker:!0};var p=e(9988),b=e(19346),a=e(74668);const h=new t.O(()=>[g,i,p.cH,a.R,E,b.r1])},64278:(Q,I,e)=>{"use strict";e.d(I,{BP:()=>m,m3:()=>l,sE:()=>i,v3:()=>o});var t=e(96540),n=e(28240),r=e(27310),s=e(4025);function o(d,c){return d?c.display.has(d)||c.raw.has(d):!1}function m(d,c){const g={display:new Set,raw:new Set,fields:new Map};for(const u of d)for(const E of u.fields){if(c&&!c(E))continue;const p=(0,n.Ct)(E,u,d);g.display.add(p),g.fields.set(p,E),E.name&&p!==E.name&&(g.raw.add(E.name),g.fields.set(E.name,E))}return g}function i(d,c){return(0,t.useMemo)(()=>m(d,c),[d,c])}function l(d,c,g,u,E){return(0,t.useMemo)(()=>{let p=!1;const b=[];if(g&&b.push(g),E===r.X4.OnlyBaseNames)for(const a of d.raw)!p&&a===c&&(p=!0),b.push({value:a,label:`${a} (base field name)`});else{for(const a of d.display){!p&&a===c&&(p=!0);const h=d.fields.get(a);(!u||u===h?.type)&&b.push({value:a,label:a,icon:h?(0,s.SS)(h):void 0})}if(E!==r.X4.ExcludeBaseNames)for(const a of d.raw)d.display.has(a)||(!p&&a===c&&(p=!0),b.push({value:a,label:`${a} (base field name)`}))}return c&&!p&&b.push({value:c,label:`${c} (not found)`}),b},[d,c,g,u,E])}},38138:(Q,I,e)=>{"use strict";e.d(I,{W:()=>c});var t=e(32196),n=e(96540),r=e(40845),s=e(90613),o=e(27183),m=e(59093),i=e(64539),l=e(32653);const d=n.forwardRef(({header:u,children:E,ariaLabel:p,onOpen:b,onClose:a,onKeyDown:h,...P},y)=>{const C=(0,r.of)(g),f=(0,n.useRef)(null);(0,n.useImperativeHandle)(y,()=>f.current);const[D]=(0,l.t)({isMenuOpen:!0,localRef:f,onOpen:b,onClose:a,onKeyDown:h});return n.createElement(s.a,{...P,"aria-label":p,backgroundColor:"primary",borderRadius:"default",boxShadow:"z3",display:"inline-block",onKeyDown:D,paddingX:0,paddingY:.5,ref:f,role:"menu",tabIndex:-1},u&&n.createElement("div",{className:(0,t.cx)(C.header,!!E&&n.Children.toArray(E).length>0&&C.headerBorder)},u),E)});d.displayName="Menu";const c=Object.assign(d,{Item:i.D,Divider:o.N,Group:m.r}),g=u=>({header:(0,t.css)({padding:u.spacing(.5,1,1,1)}),headerBorder:(0,t.css)({borderBottom:`1px solid ${u.colors.border.weak}`})})},27183:(Q,I,e)=>{"use strict";e.d(I,{N:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s(){const m=(0,r.of)(o);return n.createElement("div",{className:m.divider})}const o=m=>({divider:(0,t.css)({height:1,backgroundColor:m.colors.border.weak,margin:m.spacing(.5,0)})})},59093:(Q,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845);const m=({label:l,ariaLabel:d,children:c})=>{const g=(0,o.of)(i),u=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!d&&l?u:void 0,"aria-label":d},l&&s.createElement("label",{id:u,className:g.groupLabel,"aria-hidden":!0},l),c)};m.displayName="MenuGroup";const i=l=>({groupLabel:(0,t.css)({color:l.colors.text.secondary,fontSize:l.typography.size.sm,padding:l.spacing(.5,1)})})},64539:(Q,I,e)=>{"use strict";e.d(I,{D:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(14578),m=e(67061),i=e(13544),l=e(32653);const d=p=>{if(!p)return!1;const b=p.parentElement.getBoundingClientRect(),a=p.getBoundingClientRect();return a.width!==0&&b.right+a.width+10>window.innerWidth},c=n.memo(({items:p,isOpen:b,close:a,customStyle:h})=>{const P=(0,r.of)(g),y=(0,n.useRef)(null),[C]=(0,l.t)({localRef:y,isMenuOpen:b,close:a}),[f,D]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{b&&y.current&&D(d(y.current))},[b]),n.createElement(n.Fragment,null,n.createElement("div",{className:P.iconWrapper,"aria-hidden":!0,"data-testid":i.Tp.components.Menu.SubMenu.icon},n.createElement(o.I,{name:"angle-right",className:P.icon})),b&&n.createElement("div",{ref:y,className:(0,t.cx)(P.subMenu,{[P.pushLeft]:f}),"data-testid":i.Tp.components.Menu.SubMenu.container,style:h},n.createElement("div",{tabIndex:-1,className:P.itemsWrapper,role:"menu",onKeyDown:C},p)))});c.displayName="SubMenu";const g=p=>({iconWrapper:(0,t.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,t.css)({opacity:.7,marginLeft:p.spacing(1),color:p.colors.text.secondary}),itemsWrapper:(0,t.css)({background:p.colors.background.primary,boxShadow:p.shadows.z3,display:"inline-block",borderRadius:p.shape.radius.default}),pushLeft:(0,t.css)({right:"100%",left:"unset"}),subMenu:(0,t.css)({position:"absolute",top:0,left:"100%",zIndex:p.zIndex.dropdown})}),u=n.memo(n.forwardRef((p,b)=>{const{url:a,icon:h,label:P,description:y,ariaLabel:C,ariaChecked:f,target:D,onClick:T,className:M,active:O,disabled:S,destructive:v,childItems:x,role:A="menuitem",tabIndex:R=-1,customSubMenuContainerStyles:B,shortcut:U,testId:w}=p,K=(0,r.of)(E),[N,L]=(0,n.useState)(O),[V,F]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{S||(F(!0),L(!0))},[S]),Y=(0,n.useCallback)(()=>{S||(F(!1),L(!1))},[S]),H=x&&x.length>0,k=H?"div":a===void 0?"button":"a",ee=(0,t.cx)({[K.item]:!0,[K.active]:N,[K.disabled]:S,[K.destructive]:v&&!S},M),ie={[k==="button"?"disabled":"aria-disabled"]:S,...k==="a"&&S&&{href:void 0,onClick:void 0},...S&&{tabIndex:-1,"data-disabled":S}},fe=(0,n.useRef)(null);(0,n.useImperativeHandle)(b,()=>fe.current);const q=G=>{switch(G.key){case"ArrowRight":G.preventDefault(),G.stopPropagation(),H&&(F(!0),L(!0));break;default:break}},Z=()=>{F(!1),L(!1),fe?.current?.focus()},J=!!(U&&U.length>0);return n.createElement(k,{target:D,className:ee,rel:D==="_blank"?"noopener noreferrer":void 0,href:a,onClick:T,onMouseEnter:z,onMouseLeave:Y,onKeyDown:q,role:a===void 0?A:void 0,"data-role":"menuitem",ref:fe,"data-testid":w,"aria-label":C,"aria-checked":f,tabIndex:R,...ie},n.createElement(m.B,{direction:"row",justifyContent:"flex-start",alignItems:"center"},h&&n.createElement(o.I,{name:h,className:K.icon,"aria-hidden":!0}),n.createElement("span",{className:K.ellipsis},P),n.createElement("div",{className:(0,t.cx)(K.rightWrapper,{[K.withShortcut]:J})},J&&n.createElement("div",{className:K.shortcut},n.createElement(o.I,{name:"keyboard",title:"keyboard shortcut"}),U),H&&n.createElement(c,{items:x,isOpen:V,close:Z,customStyle:B}))),y&&n.createElement("div",{className:(0,t.cx)(K.description,K.ellipsis,{[K.descriptionWithIcon]:h!==void 0})},y))}));u.displayName="MenuItem";const E=p=>({item:(0,t.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:p.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",padding:p.spacing(.5,2),minHeight:p.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus-visible":{background:p.colors.action.hover,color:p.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,s.getFocusStyles)(p)}),active:(0,t.css)({background:p.colors.action.hover}),destructive:(0,t.css)({color:p.colors.error.text,svg:{color:p.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:p.colors.error.main,color:p.colors.error.contrastText,svg:{color:p.colors.error.contrastText}}}),disabled:(0,t.css)({color:p.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:p.colors.action.disabledText}}),icon:(0,t.css)({opacity:.7,color:p.colors.text.secondary}),rightWrapper:(0,t.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,t.css)({minWidth:p.spacing(10.5)}),shortcut:(0,t.css)({display:"flex",alignItems:"center",gap:p.spacing(1),marginLeft:p.spacing(2),color:p.colors.text.secondary,opacity:.7}),description:(0,t.css)({...p.typography.bodySmall,color:p.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,t.css)({marginLeft:p.spacing(3)}),ellipsis:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},32653:(Q,I,e)=>{"use strict";e.d(I,{t:()=>o});var t=e(96540),n=e(94701);const r=(m,i)=>(m%i+i)%i,s=-1,o=({localRef:m,isMenuOpen:i,close:l,onOpen:d,onClose:c,onKeyDown:g})=>{const[u,E]=(0,t.useState)(s);return(0,t.useEffect)(()=>{i&&E(0)},[i]),(0,t.useEffect)(()=>{const b=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');b?.[u]?.focus(),b?.forEach((a,h)=>{a.tabIndex=h===u?0:-1})},[m,u]),(0,n.A)(()=>{d?.(E)}),[b=>{const a=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),h=a?.length??0;switch(b.key){case"ArrowUp":b.preventDefault(),b.stopPropagation(),E(r(u-1,h));break;case"ArrowDown":b.preventDefault(),b.stopPropagation(),E(r(u+1,h));break;case"ArrowLeft":b.preventDefault(),b.stopPropagation(),E(s),l?.();break;case"Home":b.preventDefault(),b.stopPropagation(),E(0);break;case"End":b.preventDefault(),b.stopPropagation(),E(h-1);break;case"Enter":b.preventDefault(),b.stopPropagation(),a?.[u]?.click();break;case"Escape":c?.();break;case"Tab":b.preventDefault(),c?.();break;default:break}g?.(b)}]}},37390:(Q,I,e)=>{"use strict";e.d(I,{a:()=>u});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(40845),i=e(76412),l=e(29158),d=e(66864),c=e(29473),g=e(88448);function u(b){const{title:a,children:h,isOpen:P=!1,closeOnEscape:y=!0,closeOnBackdropClick:C=!0,className:f,contentClassName:D,onDismiss:T,onClickBackdrop:M,trapFocus:O=!0}=b,S=(0,m.of)(g.o),v=(0,o.useRef)(null),{overlayProps:x,underlayProps:A}=(0,s.e)({isKeyboardDismissDisabled:!y,isOpen:P,onClose:T},v),{dialogProps:R,titleProps:B}=(0,n.s)({},v);if(!P)return null;const U=(0,t.cx)(S.modalHeader,typeof a!="string"&&S.modalHeaderWithTabs);return o.createElement(s.Sf,null,o.createElement("div",{role:"presentation",className:S.modalBackdrop,onClick:M||(C?T:void 0),...A}),o.createElement(r.n1,{contain:O,autoFocus:!0,restoreFocus:!0},o.createElement("div",{className:(0,t.cx)(S.modal,f),ref:v,...x,...R},o.createElement("div",{className:U},typeof a=="string"&&o.createElement(p,{...b,title:a,id:B.id}),typeof a!="string"&&a,o.createElement("div",{className:S.modalHeaderClose},o.createElement(l.K,{name:"times",size:"xl",onClick:T,"aria-label":(0,i.t)("grafana-ui.modal.close-tooltip","Close")}))),o.createElement("div",{className:(0,t.cx)(S.modalContent,D)},h))))}function E({leftItems:b,children:a}){const h=(0,m.of)(g.o);return b?o.createElement("div",{className:h.modalButtonRow},o.createElement(d.Gy,{justify:"space-between"},o.createElement(d.Gy,{justify:"flex-start",spacing:"md"},b),o.createElement(d.Gy,{justify:"flex-end",spacing:"md"},a))):o.createElement("div",{className:h.modalButtonRow},o.createElement(d.Gy,{justify:"flex-end",spacing:"md",wrap:!0},a))}u.ButtonRow=E;function p({icon:b,iconTooltip:a,title:h,id:P}){return o.createElement(c.r,{icon:b,iconTooltip:a,title:h,id:P})}},29473:(Q,I,e)=>{"use strict";e.d(I,{r:()=>s});var t=e(96540),n=e(40845),r=e(88448);const s=({icon:o,iconTooltip:m,title:i,children:l,id:d})=>{const c=(0,n.of)(r.o);return t.createElement(t.Fragment,null,t.createElement("h2",{className:c.modalHeaderTitle,id:d},i),l)}},95246:(Q,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(96540);const n=({children:r})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},r)))},25897:(Q,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(96540),n=e(40675),r=e(63021),s=e(29473);const o=({icon:m,title:i,tabs:l,activeTab:d,onChangeTab:c})=>t.createElement(s.r,{icon:m,title:i},t.createElement(r.U,{hideBorder:!0},l.map((g,u)=>t.createElement(n.o,{key:`${g.value}-${u}`,label:g.label,icon:g.icon,suffix:g.tabSuffix,active:g.value===d,onChangeTab:()=>c(g)}))))},71678:(Q,I,e)=>{"use strict";e.d(I,{$s:()=>o,EO:()=>s,YO:()=>r,wE:()=>n});var t=e(96540);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class r extends t.Component{constructor(i){super(i),this.showModal=(l,d)=>{this.setState({component:l,props:d})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:i.component||null,props:i.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:m,props:i})=>m?t.createElement(m,{...i}):null),o=n.Consumer},88448:(Q,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(32196);const n=r=>{const s=r.shape.radius.default;return{modal:(0,t.css)({position:"fixed",zIndex:r.zIndex.modal,background:r.colors.background.primary,boxShadow:r.shadows.z3,borderRadius:s,border:`1px solid ${r.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,t.css)({position:"fixed",zIndex:r.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:r.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,t.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:r.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,t.css)({borderBottom:`1px solid ${r.colors.border.weak}`}),modalHeaderTitle:(0,t.css)({fontSize:r.typography.size.lg,margin:r.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,t.css)({marginRight:r.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,t.css)({height:"100%",display:"flex",alignItems:"center",color:r.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,t.css)({overflow:"auto",padding:r.spacing(3),width:"100%"}),modalButtonRow:(0,t.css)({paddingTop:r.spacing(3)})}}},32372:(Q,I,e)=>{"use strict";e.d(I,{B:()=>E});var t=e(32196),n=e(96540),r=e(96915),s=e(13544),o=e(40845),m=e(85828),i=e(19716);function l(b){for(let a=b.length-1;a>0;a--){const h=b.charAt(a);if(h==="$")return{index:a,prefix:b.substring(a)};if(h===" "||h==="	"||h==='"'||h==="'")return{index:a+1,prefix:b.substring(a+1)}}return{index:0,prefix:b}}function d(b,a,h,P){const y=[];for(const C of h)a&&!C.label.startsWith(a)||y.push({...C,kind:c(b,C.kind),range:P,insertText:C.insertText??C.label});return y}function c(b,a){switch(a){case i.q.Method:return b.languages.CompletionItemKind.Method;case i.q.Field:return b.languages.CompletionItemKind.Field;case i.q.Property:return b.languages.CompletionItemKind.Property;case i.q.Constant:return b.languages.CompletionItemKind.Constant;case i.q.Text:return b.languages.CompletionItemKind.Text}return b.languages.CompletionItemKind.Text}function g(b,a,h,P){if(!(!a||!h))return b.languages.registerCompletionItemProvider(a,{triggerCharacters:["$"],provideCompletionItems:(y,C,f)=>{if(y.id!==P)return;const D={startLineNumber:C.lineNumber,endLineNumber:C.lineNumber,startColumn:C.column,endColumn:C.column};if(f.triggerCharacter==="$")return D.startColumn=C.column-1,{suggestions:d(b,"$",h(),D)};const T=y.getValueInRange({startLineNumber:C.lineNumber,startColumn:1,endLineNumber:C.lineNumber,endColumn:C.column}),{index:M,prefix:O}=l(T);D.startColumn=M+1;const S=d(b,O,h(),D);if(S.length)return{suggestions:S}}})}class u extends n.PureComponent{constructor(a){super(a),this.loadCustomLanguage=()=>{const{language:h}=this.props,P=r.l.getIfExists(h);return P?P.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:h}=this.props;h&&h(this.getEditorValue())},this.onFocus=()=>{const{onFocus:h}=this.props;h&&h(this.getEditorValue())},this.onSave=()=>{const{onSave:h}=this.props;h&&h(this.getEditorValue())},this.handleBeforeMount=h=>{this.monaco=h;const{onBeforeEditorMount:P}=this.props;P?.(h)},this.handleOnMount=(h,P)=>{const{getSuggestions:y,language:C,onChange:f,onEditorDidMount:D}=this.props;this.modelId=h.getModel()?.id,this.getEditorValue=()=>h.getValue(),y&&this.modelId&&(this.completionCancel=g(P,C,y,this.modelId)),h.onKeyDown(T=>{T.keyCode===P.KeyCode.KeyS&&(T.ctrlKey||T.metaKey)&&(T.preventDefault(),this.onSave())}),f&&h.getModel()?.onDidChangeContent(()=>f(h.getValue())),D&&D(h,P)}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose(),this.props.onEditorWillUnmount?.()}componentDidUpdate(a){const{getSuggestions:h,language:P}=this.props,y=a.language!==P;if(a.getSuggestions!==h||y){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}h&&this.modelId&&(this.completionCancel=g(this.monaco,P,h,this.modelId))}y&&this.loadCustomLanguage()}render(){const{theme:a,language:h,width:P,height:y,showMiniMap:C,showLineNumbers:f,readOnly:D,monacoOptions:T}=this.props,{alwaysConsumeMouseWheel:M,...O}=T??{},S=this.props.value??"",v=S.length>100,x=this.props.containerStyles??p(a).container,A={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:v&&C,renderCharacters:!1},readOnly:D,lineNumbersMinChars:4,lineDecorationsWidth:1*a.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*a.spacing.gridSize,bottom:.5*a.spacing.gridSize},fixedOverflowWidgets:!0,scrollbar:{alwaysConsumeMouseWheel:M??!1}};return f||(A.glyphMargin=!1,A.folding=!1,A.lineNumbers="off",A.lineNumbersMinChars=0),n.createElement("div",{className:x,onFocus:this.onFocus,onBlur:this.onBlur,"data-testid":s.Tp.components.CodeEditor.container},n.createElement(m.m,{width:P,height:y,language:h,value:S,options:{...A,...O??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const E=(0,o.cV)(u),p=b=>({container:(0,t.css)({borderRadius:b.shape.radius.default,border:`1px solid ${b.components.input.borderColor}`})})},85828:(Q,I,e)=>{"use strict";e.d(I,{m:()=>m});var t=e(96540),n=e(16817);const r=i=>{const l=(0,n.A)(async()=>await i);return{...l,dependency:l.value}};var s=e(52446),o=e(39558);const m=i=>{const{loading:l,error:d,dependency:c}=r(Promise.all([e.e(8477),e.e(6556),e.e(8926)]).then(e.bind(e,16556)));if(l)return t.createElement(o._,{text:""});if(d)return t.createElement(s.D,{title:"React Monaco Editor failed to load",error:d,errorInfo:{componentStack:d?.stack||""}});const g=c.ReactMonacoEditor;return t.createElement(g,{...i})}},19716:(Q,I,e)=>{"use strict";e.d(I,{q:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},99544:(Q,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(19716);function n(r){const s="${"+r.value+"}",o=r.value===r.label?r.origin:`${r.label} / ${r.origin}`;return{label:s,kind:t.q.Property,detail:o,documentation:r.documentation}}},95247:(Q,I,e)=>{"use strict";e.d(I,{d:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(16797),m=e(14578),i=e(29158),l=e(50720),d=e(15068);const c=n.memo(({title:u,section:E,parent:p,pageIcon:b,onGoBack:a,children:h,titleHref:P,parentHref:y,leftItems:C,isFullscreen:f,className:D,"aria-label":T,buttonOverflowAlignment:M="right",forceShowLeftItems:O=!1})=>{const S=(0,s.of)(g),v=(0,t.cx)("page-toolbar",S.toolbar,{"page-toolbar--fullscreen":f,[S.noPageIcon]:!b},D),x=n.createElement(n.Fragment,null,n.createElement("span",{className:S.truncateText},u),E&&n.createElement("span",{className:S.pre}," / ",E));return n.createElement("nav",{className:v,"aria-label":T},n.createElement("div",{className:S.leftWrapper},b&&!a&&n.createElement("div",{className:S.pageIcon},n.createElement(m.I,{name:b,size:"lg","aria-hidden":!0})),a&&n.createElement("div",{className:S.pageIcon},n.createElement(i.K,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","data-testid":r.Tp.components.BackButton.backArrow,onClick:a})),n.createElement("nav",{"aria-label":"Search links",className:S.navElement},p&&y&&n.createElement(n.Fragment,null,n.createElement(l.N,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,t.cx)(S.titleText,S.parentLink,S.titleLink,S.truncateText),href:y},p," ",n.createElement("span",{className:S.parentIcon})),P&&n.createElement("span",{className:(0,t.cx)(S.titleText,S.titleDivider),"aria-hidden":!0},"/")),(u||!!C?.length)&&n.createElement("div",{className:S.titleWrapper},u&&n.createElement("h1",{className:S.h1Styles},P?n.createElement(l.N,{"aria-label":"Search dashboard by name",className:(0,t.cx)(S.titleText,S.titleLink),href:P},x):n.createElement("div",{className:S.titleText},x)),C?.map((A,R)=>n.createElement("div",{className:(0,t.cx)(S.leftActionItem,{[S.forceShowLeftActionItems]:O}),key:R},A))))),n.createElement(d.U,{alignment:M},n.Children.toArray(h).filter(Boolean)))});c.displayName="PageToolbar";const g=u=>{const{spacing:E,typography:p}=u,b=(0,o.getFocusStyles)(u);return{pre:(0,t.css)({whiteSpace:"pre"}),toolbar:(0,t.css)({alignItems:"center",background:u.colors.background.canvas,display:"flex",gap:u.spacing(2),justifyContent:"space-between",padding:u.spacing(1.5,2),[u.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,t.css)({[u.breakpoints.down("md")]:{paddingLeft:u.spacing(2)}}),leftWrapper:(0,t.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,t.css)({display:"none",[u.breakpoints.up("sm")]:{display:"flex",paddingRight:u.spacing(1),alignItems:"center"}}),truncateText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,t.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,t.css)({margin:E(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,t.css)({marginLeft:u.spacing(.5)}),titleText:(0,t.css)({display:"flex",fontSize:p.size.lg,margin:0,borderRadius:u.shape.radius.default}),titleLink:(0,t.css)({"&:focus-visible":b}),titleDivider:(0,t.css)({padding:E(0,.5,0,.5),display:"none",[u.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,t.css)({display:"none",[u.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,t.css)({display:"none",alignItems:"center",paddingRight:E(.5),[u.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,t.css)({display:"flex"})}}},19384:(Q,I,e)=>{"use strict";e.d(I,{d:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=({currentPage:l,numberOfPages:d,onNavigate:c,hideWhenSinglePage:g,showSmallVersion:u,className:E})=>{const p=(0,r.of)(i),b=u?1:8,a=(0,n.useMemo)(()=>{const h=[...new Array(d).keys()],P=d>b,y=(C,f)=>n.createElement("li",{key:C,className:p.item},n.createElement(s.$n,{size:"sm",variant:f,onClick:()=>c(C)},C));return h.reduce((C,f)=>{const D=f+1,T=D===l?"primary":"secondary",M=b,O=d-b+1,S=O-M,v=D===1||D===d,x=S>-1&&l>=M&&l<=O,A=u?1:3,R=u?0:2;return P?v||l<M&&D<M||S>=0&&l>O&&D>O||S<0&&l>=M&&D>O||x&&D>=l-R&&D<=l+R?C.push(y(D,T)):(D===M&&l<M||D===O&&l>O||x&&(D===l-A||D===l+A))&&C.push(n.createElement("li",{key:D,className:p.item},n.createElement(o.I,{className:p.ellipsis,name:"ellipsis-v"}))):C.push(y(D,T)),C},[])},[l,d,c,b,u,p.ellipsis,p.item]);return g&&d<=1?null:n.createElement("div",{className:(0,t.cx)(p.container,E)},n.createElement("ol",null,n.createElement("li",{className:p.item},n.createElement(s.$n,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>c(l-1),disabled:l===1},n.createElement(o.I,{name:"angle-left"}))),a,n.createElement("li",{className:p.item},n.createElement(s.$n,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>c(l+1),disabled:l===d},n.createElement(o.I,{name:"angle-right"})))))},i=()=>({container:(0,t.css)({float:"right"}),item:(0,t.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,t.css)({transform:"rotate(90deg)"})})},89963:(Q,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(14578),m=e(56034);const i=({onCancel:d,loading:c})=>{const g=(0,s.of)(l);return c?n.createElement(m.m,{content:"Cancel query"},n.createElement(o.I,{className:(0,t.cx)("spin-clockwise",{[g.clickable]:!!d}),name:"sync",size:"sm",onClick:d,"data-testid":r.Tp.components.LoadingIndicator.icon})):null},l=()=>({clickable:(0,t.css)({cursor:"pointer"})})},79041:(Q,I,e)=>{"use strict";e.d(I,{XF:()=>s,d2:()=>o,e4:()=>r});var t=e(96540),n=e(18226);const r=t.createContext({eventsScope:"global",eventBus:new n.o}),s=r.Provider,o=()=>t.useContext(r)},91052:(Q,I,e)=>{"use strict";e.d(I,{NR:()=>B});var t=e(89963),n=e(32196),r=e(96540),s=e(42941),o=e(49185),m=e(39070),i=e(13544),l=e(40845),d=e(16797);function c({children:U,delay:w}){const[K,N]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{window.setTimeout(()=>{N(!0)},w)},[U,w]),r.createElement(r.Fragment,null,K?U:null)}var g=e(14578),u=e(57514),E=e(56034),p=e(83122),b=e(27746);function a({menu:U,title:w,placement:K="bottom",offset:N,dragClassCancel:L,menuButtonClass:V,onOpenMenu:F}){const z=w?i.Tp.components.Panels.Panel.menu(w):"panel-menu-button",Y=(0,r.useCallback)(H=>{H&&F&&F()},[F]);return r.createElement(p.m,{overlay:U,placement:K,offset:N,onVisibleChange:Y},r.createElement(b.I,{"aria-label":`Menu for panel with ${w?`title ${w}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":z,className:(0,n.cx)(V,L)}))}function h({menu:U,title:w,dragClass:K,children:N,offset:L=-32,onOpenMenu:V}){const F=(0,l.of)(P),z=(0,r.useRef)(null),Y=i.Tp.components.Panels.Panel.HoverWidget,H=(0,r.useCallback)(ee=>{z.current?.setPointerCapture(ee.pointerId)},[]),k=(0,r.useCallback)(ee=>{z.current?.releasePointerCapture(ee.pointerId)},[]);return N===void 0||r.Children.count(N)===0?null:r.createElement("div",{className:(0,n.cx)(F.container,"show-on-hover"),style:{top:L},"data-testid":Y.container},K&&r.createElement("div",{className:(0,n.cx)(F.square,F.draggable,K),onPointerDown:H,onPointerUp:k,ref:z,"data-testid":Y.dragIcon},r.createElement(g.I,{name:"expand-arrows",className:F.draggableIcon})),N,U&&r.createElement(a,{menu:U,title:w,placement:"bottom",menuButtonClass:F.menuButton,onOpenMenu:V}))}function P(U){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:U.colors.background.secondary,color:U.colors.text.primary,border:`1px solid ${U.colors.border.weak}`,borderRadius:U.shape.radius.default,height:U.spacing(4),boxShadow:U.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:U.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[U.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:U.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:U.colors.text.secondary,"&:hover":{color:U.colors.text.primary}})}}var y=e(55852);const C=(0,r.forwardRef)(({className:U,children:w,href:K,onClick:N,target:L,title:V,...F},z)=>{const Y=(0,l.of)(f);return K?r.createElement("a",{ref:z,href:K,onClick:N,target:L,title:V,className:(0,n.cx)(Y.linkItem,U),...F},w):N?r.createElement(y.$n,{ref:z,className:(0,n.cx)(Y.item,U),variant:"secondary",fill:"text",onClick:N},w):r.createElement("span",{ref:z,className:(0,n.cx)(Y.item,U),...F},w)});C.displayName="TitleItem";const f=U=>{const w=(0,n.css)({color:`${U.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${U.shape.radius.default}`,padding:`${U.spacing(0,1)}`,height:`${U.spacing(U.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,d.getFocusStyles)(U),zIndex:1},"&: focus:not(:focus-visible)":(0,d.getMouseFocusStyles)(U),"&:hover ":{boxShadow:`${U.shadows.z1}`,background:`${U.colors.background.secondary}`,color:`${U.colors.text.primary}`}});return{item:w,linkItem:(0,n.cx)(w,(0,n.css)({cursor:"pointer"}))}};function D({description:U,className:w}){const K=(0,l.of)(T),N=()=>{const L=typeof U=="function"?U():U;return r.createElement("div",{className:"panel-info-content markdown-html"},r.createElement("div",{dangerouslySetInnerHTML:{__html:L}}))};return U!==""?r.createElement(E.m,{interactive:!0,content:N},r.createElement(C,{className:(0,n.cx)(w,K.description)},r.createElement(g.I,{name:"info-circle",size:"md"}))):null}const T=U=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function M({message:U,onClick:w,ariaLabel:K="status"}){const N=(0,l.of)(O);return r.createElement(b.I,{className:N.buttonStyles,onClick:w,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:U||"","aria-label":K,"data-testid":i.Tp.components.Panels.Panel.status("error")})}const O=U=>{const{headerHeight:w,padding:K}=U.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:U.spacing(K),width:U.spacing(w),height:U.spacing(w),borderRadius:U.shape.radius.default})}};function S({width:U,height:w,children:K,padding:N="md",title:L="",description:V="",displayMode:F="default",titleItems:z,menu:Y,dragClass:H,dragClassCancel:k,hoverHeader:ee=!1,hoverHeaderOffset:ie,loadingState:fe,statusMessage:q,statusMessageOnClick:Z,leftItems:J,actions:G,onCancelQuery:ne,onOpenMenu:te,collapsible:oe=!1,collapsed:le,onToggleCollapse:ue}){const Te=(0,l.$j)(),he=(0,l.of)(R),re=(0,r.useId)(),De=!ee,[Fe,Ee]=(0,s.A)(!0);le===void 0&&(le=!Fe);const Me="show-on-hover",ze=F==="transparent",xe=x(Te,De),{contentStyle:We,innerWidth:be,innerHeight:pe}=A(N,Te,xe,le,w,U),Ue={height:xe,cursor:H?"move":"auto"},we={width:U,height:le?void 0:w},[je,{width:He}]=(0,o.A)();J&&(G=J);const rt=typeof L=="string"?i.Tp.components.Panels.Panel.title(L):"Panel",Je=r.createElement(r.Fragment,null,!oe&&L&&r.createElement("h6",{title:typeof L=="string"?L:void 0,className:he.title},L),oe&&r.createElement("h6",{className:he.title},r.createElement("button",{type:"button",className:he.clearButtonStyles,onClick:()=>{Ee(),ue&&ue(!le)},"aria-expanded":!le,"aria-controls":le?void 0:re},r.createElement(g.I,{name:le?"angle-right":"angle-down","aria-hidden":!!L,"aria-label":L?void 0:"toggle collapse panel"}),L)),r.createElement("div",{className:(0,n.cx)(he.titleItems,k),"data-testid":"title-items-container"},r.createElement(D,{description:V,className:k}),z),fe===m.Gu.Streaming&&r.createElement(E.m,{content:ne?"Stop streaming":"Streaming"},r.createElement(C,{className:k,"data-testid":"panel-streaming",onClick:ne},r.createElement(g.I,{name:"circle-mono",size:"md",className:he.streaming}))),fe===m.Gu.Loading&&ne&&r.createElement(c,{delay:2e3},r.createElement(E.m,{content:"Cancel query"},r.createElement(C,{className:(0,n.cx)(k,he.pointer),"data-testid":"panel-cancel-query",onClick:ne},r.createElement(g.I,{name:"sync-slash",size:"md"})))),r.createElement("div",{className:he.rightAligned},G&&r.createElement("div",{className:he.rightActions},v(G,Ve=>Ve))));return r.createElement("div",{className:(0,n.cx)(he.container,{[he.transparentContainer]:ze}),style:we,"data-testid":rt,tabIndex:0,ref:je},r.createElement("div",{className:he.loadingBarContainer},fe===m.Gu.Loading?r.createElement(u.G,{width:He,ariaLabel:"Panel loading bar"}):null),ee&&r.createElement(r.Fragment,null,r.createElement(h,{menu:Y,title:typeof L=="string"?L:void 0,offset:ie,dragClass:H,onOpenMenu:te},Je),q&&r.createElement("div",{className:he.errorContainerFloating},r.createElement(M,{message:q,onClick:Z,ariaLabel:"Panel status"}))),De&&r.createElement("div",{className:(0,n.cx)(he.headerContainer,H),style:Ue,"data-testid":"header-container"},q&&r.createElement("div",{className:k},r.createElement(M,{message:q,onClick:Z,ariaLabel:"Panel status"})),Je,Y&&r.createElement(a,{menu:Y,title:typeof L=="string"?L:void 0,placement:"bottom-end",menuButtonClass:(0,n.cx)(he.menuItem,k,Me),onOpenMenu:te})),!le&&r.createElement("div",{id:re,className:(0,n.cx)(he.content,w===void 0&&he.containNone),style:We},typeof K=="function"?K(be,pe):K))}const v=(U,w)=>{const K=r.Children.toArray(U).filter(Boolean);return K.length>0?w(K):null},x=(U,w)=>w?U.spacing.gridSize*U.components.panel.headerHeight:0,A=(U,w,K,N,L,V)=>{const F=(U==="md"?w.components.panel.padding:0)*w.spacing.gridSize,z=F*2,Y=1*2;let H=0;V&&(H=V-z-Y);let k=0;return L&&(k=L-K-z-Y),N&&(k=K),{contentStyle:{padding:F},innerWidth:H,innerHeight:k}},R=U=>{const{background:w,borderColor:K,padding:N}=U.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:w,border:`1px solid ${K}`,position:"relative",borderRadius:U.shape.radius.default,height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,d.getFocusStyles)(U),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${K}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:U.colors.success.text,"&:hover":{color:U.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:U.spacing(0,N),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:U.typography.h6.fontSize,fontWeight:U.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:U.colors.secondary.main,"&:hover":{background:U.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,n.css)({display:"flex",padding:U.spacing(0,N),gap:U.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:U.spacing(.5),background:"transparent",color:U.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:U.typography.h6.fontSize,fontWeight:U.typography.h6.fontWeight})}},B=S;B.LoadingIndicator=t.I,B.TitleItem=C},88895:(Q,I,e)=>{"use strict";e.d(I,{B:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},52494:(Q,I,e)=>{"use strict";e.d(I,{_:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:i,...l})=>{const d=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(d,i),...l},m)},o=m=>(0,t.css)({backgroundColor:m.components.panel.background,border:`1px solid ${m.components.panel.borderColor}`,borderRadius:m.shape.radius.default})},98624:(Q,I,e)=>{"use strict";e.d(I,{B:()=>s});var t=e(96540),n=e(43429),r=e(39938);const s=({status:m,color:i,...l})=>{const d=o(m);return t.createElement(r.E,{text:d.text,color:d.color,icon:d.icon,tooltip:d.tooltip,...l})};s.displayName="PluginSignatureBadge";function o(m){switch(m||(m=n.Ac.invalid),m){case n.Ac.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Ac.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Ac.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Ac.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Ac.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},17464:(Q,I,e)=>{"use strict";e.d(I,{ZL:()=>s,gF:()=>o,qB:()=>m});var t=e(96540),n=e(40961),r=e(40845);function s(l){const{children:d,className:c,root:g,forwardedRef:u}=l,E=(0,r.$j)(),p=(0,t.useRef)(null),b=g??o();return p.current||(p.current=document.createElement("div"),c&&(p.current.className=c),p.current.style.position="relative",p.current.style.zIndex=`${E.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(p.current&&b.appendChild(p.current),()=>{p.current&&b.removeChild(p.current)}),[b]),n.createPortal(t.createElement("div",{ref:u},d),p.current)}function o(){return window.document.getElementById("grafana-portal-container")??document.body}function m(){return t.createElement("div",{id:"grafana-portal-container"})}const i=t.forwardRef((l,d)=>t.createElement(s,{...l,forwardedRef:d}));i.displayName="RefForwardingPortal"},20084:(Q,I,e)=>{"use strict";e.d(I,{X:()=>f});var t=e(32196),n=e(46942),r=e.n(n),s=e(2543),o=e.n(s),m=e(96540),i=e(52845),l=e(29317),d=e(13544),c=e(80903),g=e(4269),u=e(88295),E=e(74738),p=e(31589),b=e(1020),a=e(99453),h=e(40845),P=e(16797),y=e(72307);class C extends m.PureComponent{constructor(M){super(M),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(A,R)=>{const B=A.document!==this.state.value.document,U=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(A),this.setState({value:A},()=>{if(B){const w=i.A.serialize(U)!==i.A.serialize(A);w&&R&&this.runOnChangeAndRunQuery(),w&&!R&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:A}=this.props,R=i.A.serialize(this.state.value);A&&A(this.cleanText(R))},this.runOnRunQuery=()=>{const{onRunQuery:A}=this.props;A&&(A(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(A,R,B)=>{const{onBlur:U}=this.props;if(U)U();else{const w=this.lastExecutedValue?i.A.serialize(this.lastExecutedValue):"",K=i.A.serialize(R.value);w!==K&&this.runOnChangeAndRunQuery()}return B()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:O,cleanText:S,portalOrigin:v,onWillApplySuggestion:x}=M;this.plugins=[(0,c.Pz)({onTypeahead:O,cleanText:S,portalOrigin:v,onWillApplySuggestion:x}),(0,g.U)({handler:this.runOnChangeAndRunQuery}),(0,u.O)(),(0,E.v)(),(0,p.l)(),(0,b.T)(),(0,a.s)(),...M.additionalPlugins||[]].filter(A=>A),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,y.mO)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,O){const{query:S,syntax:v,syntaxLoaded:x}=this.props;if(!M.syntaxLoaded&&x&&this.editor){const R=this.editor.insertText(" ").deleteBackward(1);this.onChange(R.value,!0)}const{value:A}=this.state;S!==M.query&&S!==i.A.serialize(A)&&this.setState({value:(0,y.mO)(S||"",v)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:O}=this.props,S=r()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),v=D(O);return m.createElement("div",{className:(0,t.cx)(S,v.wrapper)},m.createElement("div",{className:"slate-query-field","data-testid":d.Tp.components.QueryField.container},m.createElement(l.KE,{ref:x=>this.editor=x,schema:y.yx,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:x=>{this.onChange(x.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const f=(0,h.cV)(C);f.defaultProps={onBlur:()=>{}};const D=T=>{const M=(0,P.getFocusStyles)(T);return{wrapper:(0,t.css)({"&:focus-within":M})}}},11134:(Q,I,e)=>{"use strict";e.d(I,{cC:()=>c,cb:()=>d});var t=e(91e3),n=e(96540),r=e(70416),s=e(13544),o=e(76412),m=e(19727),i=e(9261),l=e(27746);const d=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class c extends n.PureComponent{constructor(p){super(p),this.onChangeSelect=b=>{const{onIntervalChanged:a}=this.props;a&&b.value!=null&&a(b.value)}}static{this.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"}}static{this.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}}static{this.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"}}static{this.isLive=p=>p===c.liveOption.value}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:b,tooltip:a,value:h,text:P,isLoading:y,noIntervalPicker:C,width:f,showAutoInterval:D}=this.props,T=h||"",M=this.getVariant(),O=u({intervals:b,showAutoInterval:D}),S=O.find(({value:L})=>L===T),v=g(c.offOption.value);let x=S||v;x.label===v.label&&(x={value:""});const A=x.ariaLabel,R=(0,o.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:A}),B=(0,o.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),U=x.value===""?B:R,w=(0,o.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),K=(0,o.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),N=x.value===""?K:w;return n.createElement(m.e,{className:"refresh-picker"},n.createElement(l.I,{"aria-label":P,tooltip:a,onClick:p,variant:M,icon:y?"spinner":"sync",style:f?{width:f}:void 0,"data-testid":s.Tp.components.RefreshPicker.runButtonV2},P),!C&&n.createElement(i.f,{value:x,options:O,onChange:this.onChangeSelect,variant:M,"data-testid":s.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":U,tooltip:N}))}}function g(E){switch(E){case c.liveOption.value:return{label:(0,o.t)("refresh-picker.live-option.label","Live"),value:E,ariaLabel:(0,o.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case c.offOption.value:return{label:(0,o.t)("refresh-picker.off-option.label","Off"),value:E,ariaLabel:(0,o.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case c.autoOption.value:return{label:(0,o.t)("refresh-picker.auto-option.label",c.autoOption.label),value:E,ariaLabel:(0,o.t)("refresh-picker.auto-option.aria-label",c.autoOption.ariaLabel)}}return{label:E,value:E}}function u({intervals:E=d,showAutoInterval:p=!1}={}){const b=E.map(a=>{const h=(0,r.E9)(a),P=(0,t.a)(h);return{label:a,value:a,ariaLabel:P}});return p&&b.unshift(g(c.autoOption.value)),b.unshift(g(c.offOption.value)),b}},44522:(Q,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(96540),n=e(40672);function r({component:s,content:o,...m}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.sQ.sanitize(o)},...m})}},56286:(Q,I,e)=>{"use strict";e.d(I,{L:()=>l});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(55852),m=e(90090);const i=()=>({noRadiusInput:(0,t.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,t.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),l=({label:d="Password",labelWidth:c,inputWidth:g=12,onReset:u,isConfigured:E,tooltip:p,placeholder:b="Password",interactive:a,...h})=>{const P=i();return s.createElement(m.z,{label:d,tooltip:p,interactive:a,labelWidth:c,inputEl:E?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${g}`,P.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(h,"value")}),s.createElement(o.$n,{onClick:u,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${g}`,placeholder:b,...h})})};l.displayName="SecretFormField"},9226:(Q,I,e)=>{"use strict";e.d(I,{L4:()=>i});var t=e(96540),n=e(55852),r=e(10354),s=e(67061);const o="configured",m="Reset",i=({isConfigured:l,onReset:d,...c})=>t.createElement(s.B,null,!l&&t.createElement(r.p,{...c,type:"password"}),l&&t.createElement(t.Fragment,null,t.createElement(r.p,{...c,type:"text",disabled:!0,value:o}),t.createElement(n.$n,{onClick:d,variant:"secondary"},m)))},49718:(Q,I,e)=>{"use strict";e.d(I,{L:()=>t.L4});var t=e(9226)},58724:(Q,I,e)=>{"use strict";e.d(I,{lp:()=>c});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(66864),m=e(21744);const i="configured",l="Reset",d=g=>({configuredStyle:(0,t.css)({minHeight:g.spacing(g.components.height.md),paddingTop:g.spacing(.5),resize:"none"})}),c=({isConfigured:g,onReset:u,...E})=>{const p=(0,r.of)(d);return n.createElement(o.Gy,null,!g&&n.createElement(m.f,{...E}),g&&n.createElement(m.f,{...E,rows:1,disabled:!0,value:i,className:(0,t.cx)(p.configuredStyle)}),g&&n.createElement(s.$n,{onClick:u,variant:"secondary"},l))}},7968:(Q,I,e)=>{"use strict";e.d(I,{l:()=>t.lp});var t=e(58724)},38401:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>c});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(76892),i=e(13102),l=e(86997),d=e(2336);function c({options:g,value:u,onChange:E,Component:p,className:b,allowCustomValue:a,allowEmptyValue:h,placeholder:P,disabled:y,inputMinWidth:C,inputPlaceholder:f,onExpandedChange:D,autofocus:T=!1,...M}){const[O,S,v,x]=(0,d.Q)(T,D),A=C?Math.max(C,S):S,R=(0,o.of)(l.m);if(!v){const B=(0,n.isObject)(u)?u.label:u,U=B!=null?String(B):void 0;return s.createElement(O,{disabled:y,Component:p||s.createElement(m.c,{className:(0,t.cx)(R.segment,{[R.queryPlaceholder]:P!==void 0&&!u,[R.disabled]:y},b)},U||P)})}return s.createElement(i.a,{...M,value:u&&!(0,n.isObject)(u)?{value:u}:u,placeholder:f,options:g,width:A,onClickOutside:()=>x(!1),allowCustomValue:a,allowEmptyValue:h,onChange:B=>{x(!1),E(B)}})}},83684:(Q,I,e)=>{"use strict";e.d(I,{s:()=>u});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(41053),m=e(40845),i=e(76412),l=e(76892),d=e(13102),c=e(86997),g=e(2336);function u({value:p,onChange:b,loadOptions:a,reloadOptionsOnChange:h=!1,Component:P,className:y,allowCustomValue:C,allowEmptyValue:f,disabled:D,placeholder:T,inputMinWidth:M,inputPlaceholder:O,autofocus:S=!1,onExpandedChange:v,noOptionMessageHandler:x=E,...A}){const[R,B]=(0,o.A)(a,[a]),[U,w,K,N]=(0,g.Q)(S,v),L=M?Math.max(M,w):w,V=(0,m.of)(c.m);if(!K){const F=(0,n.isObject)(p)?p.label:p,z=F!=null?String(F):void 0;return s.createElement(U,{onClick:h?void 0:B,disabled:D,Component:P||s.createElement(l.c,{className:(0,t.cx)(V.segment,{[V.queryPlaceholder]:T!==void 0&&!p,[V.disabled]:D},y)},z||T)})}return s.createElement(d.a,{...A,value:p&&!(0,n.isObject)(p)?{value:p}:p,placeholder:O,options:R.value??[],loadOptions:h?B:void 0,width:L,noOptionsMessage:x(R),allowCustomValue:C,allowEmptyValue:f,onClickOutside:()=>{N(!1)},onChange:F=>{N(!1),b(F)}})}function E(p){return p.loading?(0,i.t)("grafana-ui.segment-async.loading","Loading options..."):p.error?(0,i.t)("grafana-ui.segment-async.error","Failed to load options"):(0,i.t)("grafana-ui.segment-async.no-options","No options found")}},57752:(Q,I,e)=>{"use strict";e.d(I,{o:()=>c});var t=e(32196),n=e(96540),r=e(37151),s=e(40845),o=e(29413),m=e(76892),i=e(86997),l=e(2336);const d=14;function c({value:g,onChange:u,Component:E,className:p,placeholder:b,inputPlaceholder:a,disabled:h,autofocus:P=!1,onExpandedChange:y,...C}){const f=(0,n.useRef)(null),[D,T]=(0,n.useState)(g),[M,O]=(0,n.useState)((0,o.kD)((g||"").toString(),d).width),[S,,v,x]=(0,l.Q)(P,y),A=(0,s.of)(i.m);if((0,r.A)(f,()=>{x(!1),u(D)}),!v)return n.createElement(S,{disabled:h,Component:E||n.createElement(m.c,{className:(0,t.cx)(A.segment,{[A.queryPlaceholder]:b!==void 0&&!D,[A.disabled]:h},p)},g||b)});const R=(0,t.css)({width:`${Math.max(M+20,32)}px`});return n.createElement("input",{...C,ref:f,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",R),value:D,placeholder:a,onChange:B=>{const{width:U}=(0,o.kD)(B.target.value,d);O(U),T(B.target.value)},onBlur:()=>{x(!1),u(D)},onKeyDown:B=>{[13,27].includes(B.keyCode)&&(x(!1),u(D))}})}},64765:(Q,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(39268),o=e(76892);const m=({label:l,htmlFor:d,children:c,fill:g})=>{const u=(0,r.of)(i);return n.createElement(n.Fragment,null,n.createElement(s.C,null,n.createElement(o.c,{htmlFor:d,width:12,className:u.label},l),c,g&&n.createElement("div",{className:u.fill},n.createElement(o.c,null,""))))},i=l=>({label:(0,t.css)({color:l.colors.primary.text}),fill:(0,t.css)({flexGrow:1,marginBottom:l.spacing(.5)})})},13102:(Q,I,e)=>{"use strict";e.d(I,{a:()=>s});var t=e(96540),n=e(40845),r=e(88323);function s({value:o,placeholder:m="",options:i=[],onChange:l,onClickOutside:d,loadOptions:c=void 0,width:g,noOptionsMessage:u="",allowCustomValue:E=!1,allowEmptyValue:p=!1,...b}){const a=(0,t.useRef)(null),h=(0,n.$j)();let P=g>0?g/h.spacing.gridSize:void 0,y,C={};return c?(y=r.DW,C={loadOptions:c,defaultOptions:!0}):y=r.l6,t.createElement("div",{...b,ref:a},t.createElement(y,{width:P,noOptionsMessage:u,placeholder:m,autoFocus:!0,isOpen:!0,onChange:l,options:i,value:o,closeMenuOnSelect:!1,onCloseMenu:()=>{if(a&&a.current){const f=a.current.querySelector('input[id^="react-select-"]');f&&(f.value||p)?l({value:f.value,label:f.value}):d()}},allowCustomValue:E,...C}))}},86997:(Q,I,e)=>{"use strict";e.d(I,{m:()=>n});var t=e(32196);const n=r=>{const s="v1"in r?r.v1.palette:r.palette;return{segment:(0,t.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,t.css)({color:s.gray2}),disabled:(0,t.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},2336:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(96540),n=e(40845),r=e(55852);const s=(o,m)=>{const i=(0,t.useRef)(null),l=(0,n.of)(r.my),[d,c]=(0,t.useState)(o),[g,u]=(0,t.useState)(0),E=b=>{c(b),m&&m(b)};return[({Component:b,onClick:a,disabled:h})=>t.createElement("button",{type:"button",className:l,ref:i,disabled:h,onClick:()=>{E(!0),i&&i.current&&u(i.current.clientWidth*1.25),a?.()}},b),g,d,E]}},5342:(Q,I,e)=>{"use strict";e.d(I,{O:()=>o,p:()=>m});var t=e(96540),n=e(40845),r=e(29158),s=e(88824);const o=({innerProps:i,children:l})=>{const d=(0,n.$j)(),c=(0,s.J)(d);return t.createElement("div",{...i,className:c.multiValueContainer},l)},m=({children:i,innerProps:l})=>{const d=(0,n.$j)(),c=(0,s.J)(d);return t.createElement(r.K,{...l,name:"times",size:"sm",className:c.multiValueRemove,tooltip:"Remove"})}},88323:(Q,I,e)=>{"use strict";e.d(I,{Iv:()=>Y,DW:()=>V,gZ:()=>z,KF:()=>L,l6:()=>N,KA:()=>y.K,ip:()=>F});var t=e(96540),n=e(72635),r=e(46005),s=e(8539),o=e(93943),m=e(66963),i=e(50877),l=e(40845),d=e(14578),c=e(62930);function g({selectProps:H}){const k=H.menuIsOpen,ee=k?"search":"angle-down",ie=k?"sm":"md";return t.createElement(d.I,{name:ee,size:ie})}var u=e(32196),E=e(10354);const p=t.forwardRef((H,k)=>{const{children:ee}=H,ie=(0,l.$j)(),fe=(0,E.n)({theme:ie,invalid:!1});return t.createElement("div",{className:(0,u.cx)(fe.suffix,(0,u.css)({position:"relative"})),ref:k},ee)});p.displayName="IndicatorsContainer";var b=e(87266);const a=t.forwardRef(function({focused:k,invalid:ee,disabled:ie,children:fe,innerProps:q,prefix:Z,...J},G){const ne=(0,l.of)(h,ee,!!Z);return t.createElement("div",{className:ne.input,...q,ref:G},Z&&t.createElement("div",{className:(0,u.cx)(ne.prefix)},Z),fe)}),h=(H,k,ee)=>{const ie=(0,E.n)({theme:H,invalid:k});return{input:(0,u.cx)((0,b.g$)(H),(0,u.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),ee&&(0,u.css)({paddingLeft:0})),prefix:(0,u.cx)(ie.prefix,(0,u.css)({position:"relative"}))}};var P=e(5342),y=e(4603),C=e(12681),f=e(80970),D=e(62235),T=e(88824);class M extends t.Component{render(){const{children:k}=this.props,{selectProps:ee}=this.props;if(ee&&Array.isArray(k)&&Array.isArray(k[0])&&ee.maxVisibleValues!==void 0&&!(ee.showAllSelectedWhenOpen&&ee.menuIsOpen)){const[ie,...fe]=k,q=ie.slice(0,ee.maxVisibleValues);return this.renderContainer([q,...fe])}return this.renderContainer(k)}renderContainer(k){const{isMulti:ee,theme:ie,selectProps:fe}=this.props,q=this.props.selectProps?.noMultiValueWrap&&!this.props.selectProps?.menuIsOpen,Z=(0,T.J)(ie),J=fe["data-testid"],G=(0,u.cx)(Z.valueContainer,{[Z.valueContainerMulti]:ee&&!q,[Z.valueContainerMultiNoWrap]:ee&&q});return t.createElement("div",{"data-testid":J,className:G},k)}}const O=(0,l.cV)(M);var S=e(23731);const v=(H,k)=>{if(Array.isArray(H)){const ee=H.filter(Boolean);return ee?.length?ee:void 0}if(typeof H=="object")return[H];if(typeof H=="string"||typeof H=="number"){const ee=x(H,k);if(ee)return[ee]}},x=(H,k)=>{for(const ee of k)if("options"in ee){let ie=x(H,ee.options);if(ie)return ie}else if("value"in ee&&ee.value===H)return ee;return null},A=H=>H.map(({description:k,...ee})=>ee),R=H=>{const{children:k,innerProps:ee,selectProps:{menuIsOpen:ie,onMenuClose:fe,onMenuOpen:q},isFocused:Z,isMulti:J,getValue:G,innerRef:ne}=H,te=H.selectProps;return te.renderControl?t.createElement(te.renderControl,{isOpen:ie,value:J?G():G()[0],ref:ne,onClick:ie?fe:q,onBlur:fe,disabled:!!te.disabled,invalid:!!te.invalid}):t.createElement(a,{ref:ne,innerProps:ee,prefix:te.prefix,focused:Z,invalid:!!te.invalid,disabled:!!te.disabled},k)};function B({allowCustomValue:H=!1,allowCreateWhileLoading:k=!1,"aria-label":ee,"data-testid":ie,autoFocus:fe=!1,backspaceRemovesValue:q=!0,blurInputOnSelect:Z,cacheOptions:J,className:G,closeMenuOnSelect:ne=!0,components:te,createOptionPosition:oe="last",defaultOptions:le,defaultValue:ue,disabled:Te=!1,filterOption:he,formatCreateLabel:re,getOptionLabel:De,getOptionValue:Fe,inputValue:Ee,invalid:Me,isClearable:ze=!1,id:xe,isLoading:We=!1,isMulti:be=!1,inputId:pe,isOpen:Ue,isOptionDisabled:we,isSearchable:je=!0,loadOptions:He,loadingMessage:rt="Loading options...",maxMenuHeight:Je=300,minMenuHeight:Ve,maxVisibleValues:Oe,menuPlacement:Ne="auto",menuPosition:ye,menuShouldPortal:se=!0,noOptionsMessage:ae=(0,n.t)("grafana-ui.select.no-options-label","No options found"),onBlur:ge,onChange:Pe,onCloseMenu:Re,onCreateOption:Be,onInputChange:_e,onKeyDown:Xe,onMenuScrollToBottom:tt,onMenuScrollToTop:at,onOpenMenu:st,onFocus:dt,openMenuOnFocus:ot=!1,options:ft=[],placeholder:yt=(0,n.t)("grafana-ui.select.placeholder","Choose"),prefix:Tt,renderControl:Kt,showAllSelectedWhenOpen:Gt=!0,tabSelectsValue:_t=!0,value:it,virtualized:Mt=!1,noMultiValueWrap:Dn,width:lt,isValidNewOption:Ct,formatOptionLabel:Vt,hideSelectedOptions:qt,...rn}){const en=(0,l.$j)(),Jt=(0,T.J)(en),hn=(0,t.useRef)(null),[Fn,Kn]=(0,t.useState)(!1),na=(0,S.z)(en,lt),[Ut,on]=(0,t.useState)(!!Ee);(0,t.useEffect)(()=>{if(He&&Ue&&hn.current&&hn.current.controlRef&&Ne==="auto"){const xn=window.innerHeight-hn.current.controlRef.getBoundingClientRect().bottom;Kn(xn<Je)}},[Je,Ne,He,Ue]);const mn=(0,t.useCallback)((xn,Vn)=>{if(be&&xn==null)return Pe([],Vn);Pe(xn,Vn)},[be,Pe]);let vn=r.Ay;const pn={};let Un={},Bn;if(be&&He)Bn=it;else if(be&&it&&Array.isArray(it)&&!He)Bn=it.map(xn=>{const Vn=x(xn.value??xn,ft);return!H||Vn?Vn:typeof xn=="string"?(0,i.z)(xn):xn});else if(He){const xn=ue||it;Bn=xn?[xn]:[]}else Bn=v(it,ft);const kn={"aria-label":ee,"data-testid":ie,autoFocus:fe,backspaceRemovesValue:q,blurInputOnSelect:Z,captureMenuScroll:tt||at,closeMenuOnSelect:ne,defaultValue:ue,disabled:Te,filterOption:Ut?he:null,getOptionLabel:De,getOptionValue:Fe,hideSelectedOptions:qt,inputValue:Ee,invalid:Me,isClearable:ze,id:xe,isDisabled:Te,isLoading:We,isMulti:be,inputId:pe,isOptionDisabled:we,isSearchable:je,maxMenuHeight:Je,minMenuHeight:Ve,maxVisibleValues:Oe,menuIsOpen:Ue,menuPlacement:Ne==="auto"&&Fn?"top":Ne,menuPosition:ye,menuShouldBlockScroll:!0,menuPortalTarget:se&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:ge,onChange:mn,onInputChange:(xn,Vn)=>{const aa=_e?.(xn,Vn)??xn,Jn=!!aa;return Jn!==Ut&&on(Jn),aa},onKeyDown:Xe,onMenuClose:Re,onMenuOpen:st,onMenuScrollToBottom:tt,onMenuScrollToTop:at,onFocus:dt,formatOptionLabel:Vt,openMenuOnFocus:ot,options:Mt?A(ft):ft,placeholder:yt,prefix:Tt,renderControl:Kt,showAllSelectedWhenOpen:Gt,tabSelectsValue:_t,value:be?Bn:Bn?.[0],noMultiValueWrap:Dn};H&&(vn=m.A,pn.allowCreateWhileLoading=k,pn.formatCreateLabel=re??U,pn.onCreateOption=Be,pn.createOptionPosition=oe,pn.isValidNewOption=Ct),He&&(vn=H?o.A:s.A,Un={loadOptions:He,cacheOptions:J,defaultOptions:le});const Mn=Mt?C.zd:C.eB;return t.createElement(t.Fragment,null,t.createElement(vn,{ref:hn,components:{MenuList:Mn,Group:f.n,ValueContainer:O,IndicatorsContainer:w,IndicatorSeparator:K,Control:R,Option:C.o5,ClearIndicator(xn){const{clearValue:Vn}=xn;return t.createElement(d.I,{name:"times",role:"button","aria-label":"select-clear-value",className:Jt.singleValueRemove,onMouseDown:aa=>{aa.preventDefault(),aa.stopPropagation(),Vn()}})},LoadingIndicator(){return t.createElement(c.y,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Jt.loadingMessage},rt)},NoOptionsMessage(){return t.createElement("div",{className:Jt.loadingMessage,"aria-label":"No options provided"},ae)},DropdownIndicator:g,SingleValue(xn){return t.createElement(D.K,{...xn,isDisabled:Te})},SelectContainer:y.K,MultiValueContainer:P.O,MultiValueRemove:Te?()=>null:P.p,...te},styles:na,className:G,...kn,...pn,...Un,...rn}))}function U(H){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,H),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function w(H){const{showAllSelectedWhenOpen:k,maxVisibleValues:ee,menuIsOpen:ie}=H.selectProps,fe=H.getValue();if(ee!==void 0&&Array.isArray(H.children)){const q=fe.length;if(q>ee&&!(k&&ie)){const Z=[...H.children];return Z.splice(-1,0,t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",q-ee,")")),t.createElement(p,{...H},Z)}}return t.createElement(p,{...H})}function K(){return t.createElement(t.Fragment,null)}function N(H){return t.createElement(B,{...H})}function L(H){return t.createElement(B,{...H,isMulti:!0})}function V(H){return t.createElement(B,{...H})}function F(H){return t.createElement(B,{virtualized:!0,...H})}function z(H){return t.createElement(B,{virtualized:!0,...H})}function Y(H){return t.createElement(B,{...H,isMulti:!0})}},4603:(Q,I,e)=>{"use strict";e.d(I,{K:()=>l});var t=e(32196),n=e(96540),r=e(71332),s=e(40845),o=e(16797),m=e(87266),i=e(10354);const l=c=>{const{isDisabled:g,isFocused:u,children:E,selectProps:{invalid:p=!1}}=c,b=(0,s.of)(d,u,g,p);return n.createElement(r.c.SelectContainer,{...c,className:(0,t.cx)(b.wrapper,c.className)},E)},d=(c,g,u,E)=>{const p=(0,i.n)({theme:c,invalid:E});return{wrapper:(0,t.cx)(p.wrapper,(0,m.Xb)(c,E),g&&(0,t.css)((0,o.getFocusStyles)(c)),u&&p.inputDisabled,(0,t.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:u?"not-allowed":"pointer"}))}}},12681:(Q,I,e)=>{"use strict";e.d(I,{eB:()=>g,o5:()=>h,zd:()=>a});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(97222),m=e(8887),i=e(40845),l=e(40276),d=e(14578),c=e(88824);const g=({children:P,maxHeight:y,innerRef:C,innerProps:f})=>{const D=(0,i.$j)(),T=(0,c.J)(D);return s.createElement("div",{...f,className:T.menu,style:{maxHeight:y},"aria-label":"Select options menu"},s.createElement(l.E,{scrollRefCallback:C,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},P))};g.displayName="SelectMenu";const u=37,E=8,p=8,b=36,a=({children:P,maxHeight:y,options:C,getValue:f})=>{const D=(0,i.$j)(),T=(0,c.J)(D),[M]=f(),S=(M?C.findIndex(B=>B.value===M.value):0)*u;if(!Array.isArray(P))return null;const x=((0,n.max)(C.map(B=>B.label?.length))??0)*E+p*2+b,A=Math.min(C.length*u,y),R=Math.max(0,S-A/2);return s.createElement(o.Y1,{className:T.menu,height:A,width:x,"aria-label":"Select options menu",itemCount:P.length,itemSize:u,initialScrollOffset:R},({index:B,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},P[B]))};a.displayName="VirtualizedSelectMenu";const h=({children:P,data:y,innerProps:C,innerRef:f,isFocused:D,isSelected:T,renderOptionLabel:M})=>{const O=(0,i.$j)(),S=(0,c.J)(O),v=y.icon?(0,m.Uo)(y.icon):void 0,{onMouseMove:x,onMouseOver:A,...R}=C;return s.createElement("div",{ref:f,className:(0,t.cx)(S.option,D&&S.optionFocused,T&&S.optionSelected,y.isDisabled&&S.optionDisabled),...R,"aria-label":"Select option",title:y.title},v&&s.createElement(d.I,{name:v,className:S.optionIcon}),y.imgUrl&&s.createElement("img",{className:S.optionImage,src:y.imgUrl,alt:y.label||String(y.value)}),s.createElement("div",{className:S.optionBody},s.createElement("span",null,M?M(y):P),y.description&&s.createElement("div",{className:S.optionDescription},y.description),y.component&&s.createElement(y.component,null)))};h.displayName="SelectMenuOptions"},80970:(Q,I,e)=>{"use strict";e.d(I,{n:()=>l});var t=e(32196),n=e(96540),r=e(3911),s=e(40845),o=e(14578);const m=(0,r.N)(d=>({header:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${d.colors.background.secondary}`,"&:hover":{color:d.colors.text.maxContrast}}),label:(0,t.css)({flexGrow:1}),icon:(0,t.css)({paddingRight:"2px"})}));class i extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(c=>({expanded:!c.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:c}=this.props.selectProps.value;c&&this.props.options.some(g=>g.value===c)&&this.setState({expanded:!0})}}componentDidUpdate(c){c.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:c,label:g,theme:u}=this.props,{expanded:E}=this.state,p=m(u);return n.createElement("div",null,n.createElement("div",{className:p.header,onClick:this.onToggleChildren,role:"presentation"},n.createElement("span",{className:p.label},g),n.createElement(o.I,{className:p.icon,name:E?"angle-up":"angle-down"})),E&&c)}}const l=(0,s.cV)(i)},62235:(Q,I,e)=>{"use strict";e.d(I,{K:()=>u});var t=e(32196),n=e(96540),r=e(71332),s=e(8887),o=e(40845);function m(p,b={}){const{duration:a=250,delay:h=250}=b,[P,y]=(0,n.useState)(p),C=(0,n.useRef)();return(0,n.useEffect)(()=>{let f;if(p)f=setTimeout(()=>{C.current=new Date,y(p)},h);else{const D=C.current?Date.now()-C.current.valueOf():0,T=()=>{C.current=void 0,y(p)};D>=a?T():f=setTimeout(T,a-D)}return()=>{f&&(clearTimeout(f),f=void 0)}},[p,a,h]),P}var i=e(14578),l=e(62930),d=e(31511),c=e(72960);const g=p=>({singleValue:(0,t.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,t.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,t.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,t.css)({marginRight:p.spacing(1),color:p.colors.text.secondary}),disabled:(0,t.css)({color:p.colors.text.disabled}),isOpen:(0,t.css)({color:p.colors.text.disabled})}),u=p=>{const{children:b,data:a,isDisabled:h}=p,P=(0,o.of)(g),y=m(a.loading||!1,{delay:250,duration:750}),C=a.icon?(0,s.Uo)(a.icon):void 0;return n.createElement(r.c.SingleValue,{...p,className:(0,t.cx)(P.singleValue,h&&P.disabled,p.selectProps.menuIsOpen&&P.isOpen)},a.imgUrl?n.createElement(E,{loading:y,imgUrl:a.imgUrl,styles:P,alt:String(a.label??a.value)}):n.createElement(n.Fragment,null,n.createElement(c.n,{horizontal:!0,size:16,visible:y,duration:150},n.createElement("div",{className:P.spinnerWrapper},n.createElement(l.y,{className:P.spinnerIcon,inline:!0}))),C&&n.createElement(i.I,{name:C,role:"img",className:P.optionIcon})),!a.hideText&&b)},E=p=>n.createElement("div",{className:p.styles.spinnerWrapper},n.createElement(d.A,{duration:150,visible:p.loading},n.createElement(l.y,{className:p.styles.spinnerIcon,inline:!0})),n.createElement(d.A,{duration:150,visible:!p.loading},n.createElement("img",{className:p.styles.spinnerIcon,src:p.imgUrl,alt:p.alt})))},88824:(Q,I,e)=>{"use strict";e.d(I,{J:()=>r});var t=e(32196),n=e(3911);const r=(0,n.N)(s=>({menu:(0,t.css)({label:"grafana-select-menu",background:s.components.dropdown.background,boxShadow:s.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,t.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:s.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}}),optionIcon:(0,t.css)({marginRight:s.spacing(1)}),optionImage:(0,t.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,t.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:s.typography.size.sm,color:s.colors.text.secondary,whiteSpace:"normal",lineHeight:s.typography.body.lineHeight}),optionBody:(0,t.css)({label:"grafana-select-option-body",display:"flex",fontWeight:s.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,t.css)({label:"grafana-select-option-focused",background:s.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}),optionSelected:(0,t.css)({background:s.colors.action.selected}),optionDisabled:(0,t.css)({label:"grafana-select-option-disabled",backgroundColor:s.colors.action.disabledBackground,color:s.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,t.css)({label:"grafana-select-single-value",color:s.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,t.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,t.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),valueContainerMultiNoWrap:(0,t.css)({display:"grid",gridAutoFlow:"column"}),loadingMessage:(0,t.css)({label:"grafana-select-loading-message",padding:s.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,t.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:s.colors.background.secondary,borderRadius:s.shape.radius.default,margin:s.spacing(.25,1,.25,0),padding:s.spacing(.25,0,.25,1),color:s.colors.text.primary,fontSize:s.typography.size.sm,overflow:"hidden",whiteSpace:"nowrap","&:hover":{background:s.colors.emphasize(s.colors.background.secondary)}}),multiValueRemove:(0,t.css)({label:"grafana-select-multi-value-remove",margin:s.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,t.css)({cursor:"pointer","&:hover":{color:s.colors.text.primary}})}))},23731:(Q,I,e)=>{"use strict";e.d(I,{A:()=>n,z:()=>r});var t=e(96540);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(o){return{...o,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:o})=>({maxHeight:o}),multiValue:()=>({}),multiValueLabel:()=>({overflow:"hidden",textOverflow:"ellipsis"}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:o=>({...o,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function r(s,o){return(0,t.useMemo)(()=>({...n(s),menuPortal:m=>({...m,zIndex:s.zIndex.portal}),menu:({top:m,bottom:i,position:l})=>({top:m,bottom:i,position:l,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:o?s.spacing(o):"100%",display:o==="auto"?"inline-flex":"flex"}),option:(m,i)=>({...m,opacity:i.isDisabled?.5:1})}),[s,o])}},62883:()=>{"use strict"},67570:(Q,I,e)=>{"use strict";e.d(I,{u:()=>E});var t=e(2543),n=e.n(t),r=e(96540),s=e(13752),o=e(62467),m=e(11150),i=e(96083),l=e(63720),d=e(59099),c=e(54479),g=e(11134);function u(p){return{label:p,value:stringToMs(p)}}class E extends r.PureComponent{constructor(b){super(b),this.propsSubject=new s.B,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,l.n)(b=>g.cC.isLive(b.interval)?(0,o.of)({}):b.loading?m.t:(0,i.Y)((0,c.dc)(b.interval))),(0,d.M)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(b){g.cC.isLive(b.interval)&&g.cC.isLive(this.props.interval)||(0,t.isEqual)(b,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},63250:(Q,I,e)=>{"use strict";e.d(I,{I1:()=>h,_$:()=>E,gl:()=>g});var t=e(2543),n=e.n(t),r=e(75059),s=e(47070),o=e(50082),m=e(62398),i=e(24293),l=e(90708),d=e(47737);const c=["reduceOptions","orientation"];function g(P,y,C){let f=P.options;if(P.fieldConfig=P.fieldConfig||{defaults:{},overrides:[]},y==="singlestat"&&C.angular)return u(P,C);for(const D of c)C.hasOwnProperty(D)&&(f[D]=(0,t.cloneDeep)(C[D]));return f}function u(P,y){const C=y.angular,f=r.AS.getIfExists(C.valueName),D={reduceOptions:{calcs:[f?f.id:r.gy.mean]},orientation:s.wV.Horizontal},T={};if(C.format&&(T.unit=C.format),C.tableColumn&&(D.reduceOptions.fields=`/^${C.tableColumn}$/`),C.nullPointMode&&(T.nullValueMode=C.nullPointMode),C.nullText&&(T.noValue=C.nullText),(C.decimals||C.decimals===0)&&(T.decimals=C.decimals),C.thresholds&&C.colors){const O=C.thresholds.split(",").map(v=>Number(v.trim())),S=[];for(const v of C.colors){const x=S.length-1;x>=0?S.push({value:O[x],color:v}):S.push({value:-1/0,color:v})}T.thresholds={mode:o.O.Absolute,steps:S}}const M=(0,m.bh)(C,T.thresholds);return M&&M.length&&(T.mappings=M),C.gauge&&C.gauge.show&&(T.min=C.gauge.minValue,T.max=C.gauge.maxValue),P.fieldConfig.defaults=T,D}function E(P){if(!P.options)return{};const y=parseFloat(P.pluginVersion||"6.1");let C=P.options;y<6.2&&(C=b(C)),y<6.3&&(C=p(C));const{fieldOptions:f}=C;if(y<6.6&&f){if(f&&f.override){const{override:M,...O}=C.fieldOptions;C={...C,fieldOptions:{...O,overrides:[]}}}let D=f?.defaults?.thresholds;D?delete f.defaults.thresholds:(D=f?.thresholds,delete f.thresholds),D&&(f.defaults.thresholds={mode:o.O.Absolute,steps:D});const{defaults:T}=f;T.color&&typeof T.color=="string"&&(T.color={mode:i.Y.Fixed,fixedColor:T.color}),(0,l.BF)(T)}if(y<7&&(P.fieldConfig=P.fieldConfig||{defaults:{},overrides:[]},P.fieldConfig={defaults:f&&f.defaults?{...P.fieldConfig.defaults,...f.defaults}:P.fieldConfig.defaults,overrides:f&&f.overrides?[...P.fieldConfig.overrides,...f.overrides]:P.fieldConfig.overrides},f&&(C.reduceOptions={values:f.values,limit:f.limit,calcs:f.calcs}),delete C.fieldOptions),y<7.1){const D=P.fieldConfig.defaults.title;D!=null&&(P.fieldConfig.defaults.displayName=D,delete P.fieldConfig.defaults.title)}if(y<8){const D=P.fieldConfig?.defaults;let T=D?.unit;T==="percent"?((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=100)):T==="percentunit"&&((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=1))}return C}function p(P){const{fieldOptions:y}=P;if(!y)return P;const{mappings:C,...f}=P.fieldOptions;let D;return P.thresholds&&(D={mode:o.O.Absolute,steps:a(P.thresholds)}),{...P,fieldOptions:{...f,defaults:{...y.defaults,mappings:C,thresholds:D}}}}function b(P){const{valueOptions:y}=P;if(!y)return P;const C={},f={};if(C.mappings=P.valueMappings,C.thresholds=P.thresholds,C.defaults=f,f.unit=y.unit,f.decimals=y.decimals,y.stat){const T=r.AS.get(y.stat);T&&(C.calcs=[T.id])}f.min=P.minValue,f.max=P.maxValue;const D={...P,fieldOptions:C};return(0,t.omit)(D,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function a(P){if(!P||!P.length)return;const y=P.map(C=>({value:C.value===null?-1/0:C.value,color:C.color}));return(0,d.RU)(y),y[0].value=-1/0,y}function h(P){return(0,m.bh)(P)}},37713:(Q,I,e)=>{"use strict";e.d(I,{I1:()=>t.I1,_$:()=>t._$,gl:()=>t.gl});var t=e(63250)},47097:(Q,I,e)=>{"use strict";e.d(I,{F:()=>g});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(5994);const i=u=>{const{value:E,children:p,visible:b,placement:a,tipFormatter:h,...P}=u,y=(0,s.useRef)(null),C=(0,s.useRef)(null),f=(0,o.of)(l);function D(){C.current!==null&&cancelAnimationFrame(C.current)}function T(){C.current=requestAnimationFrame(()=>{y.current?.forceAlign()})}return(0,s.useEffect)(()=>(b?T():D(),D),[E,b]),s.createElement(m.A,{overlayClassName:f.tooltip,placement:a,overlay:h??E,overlayInnerStyle:{minHeight:"auto"},ref:y,visible:b,...P},p)},l=u=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:u.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:u.zIndex.tooltip})}),d=i;var c=e(24849);const g=({min:u,max:E,onChange:p,onAfterChange:b,orientation:a="horizontal",reverse:h,step:P,formatTooltipResult:y,value:C,tooltipAlwaysVisible:f=!0})=>{const D=(0,s.useCallback)(v=>{p?.(typeof v=="number"?[v,v]:v)},[p]),T=(0,s.useCallback)(v=>{b?.(typeof v=="number"?[v,v]:v)},[b]),M=a==="horizontal",O=(0,o.of)(c.$,M),S=(v,x)=>s.createElement(d,{value:x.value,visible:f||x.dragging,tipFormatter:y?()=>y(x.value):void 0,placement:M?"top":"right"},v);return s.createElement("div",{className:(0,t.cx)(O.container,O.slider)},s.createElement(n.Global,{styles:O.tooltip}),s.createElement(r.A,{min:u,max:E,step:P,defaultValue:C,range:!0,onChange:D,onChangeComplete:T,vertical:!M,reverse:h,handleRender:S}))};g.displayName="RangeSlider"},77014:(Q,I,e)=>{"use strict";e.d(I,{A:()=>l});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(10354),i=e(24849);const l=({min:d,max:c,onChange:g,onAfterChange:u,orientation:E="horizontal",reverse:p,step:b,value:a,ariaLabelForHandle:h,marks:P,included:y})=>{const C=E==="horizontal",f=(0,o.of)(i.$,C,!!P),D=r.A,[T,M]=(0,s.useState)(a??d),O=(0,s.useCallback)(B=>{const U=typeof B=="number"?B:B[0];M(U),g?.(U)},[M,g]),S=(0,s.useCallback)(B=>{let U=+B.target.value;Number.isNaN(U)&&(U=0),M(U),g&&g(U),u&&u(U)},[g,u]),v=(0,s.useCallback)(B=>{const U=+B.target.value;U>c?M(c):U<d&&M(d)},[c,d]),x=(0,s.useCallback)(B=>{const U=typeof B=="number"?B:B[0];u?.(U)},[u]),A=C?[]:[f.sliderInputVertical],R=C?[]:[f.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(f.container,f.slider)},s.createElement(n.Global,{styles:f.tooltip}),s.createElement("div",{className:(0,t.cx)(f.sliderInput,...A)},s.createElement(D,{min:d,max:c,step:b,defaultValue:a,value:T,onChange:O,onChangeComplete:x,vertical:!C,reverse:p,ariaLabelForHandle:h,marks:P,included:y}),s.createElement(m.p,{type:"text",className:(0,t.cx)(f.sliderInputField,...R),value:T,onChange:S,onBlur:v,min:d,max:c})))};l.displayName="Slider"},24849:(Q,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(32196),n=e(94659);const r=(s,o,m=!1)=>{const{spacing:i}=s,l=s.colors.border.strong,d=s.colors.primary.main,c=s.colors.primary.main,u=`box-shadow: 0px 0px 0px 6px ${s.colors.primary.transparent}`;return{container:(0,t.css)({width:"100%",margin:o?"inherit":i(1,3,1,1),paddingBottom:o&&m?s.spacing(1):"inherit",height:o?"auto":"100%"}),slider:(0,t.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${s.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${s.colors.text.disabled};
        font-size: ${s.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${s.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${c};
        box-shadow: ${s.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${u};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${s.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${s.colors.text.primary};
        border-color: ${s.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${d};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:(0,n.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${s.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${s.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,t.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,t.css)({marginLeft:s.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,t.css)({margin:`0 0 ${s.spacing(3)} 0`,order:1})}}},5926:(Q,I,e)=>{"use strict";e.d(I,{O:()=>a});var t=e(2543),n=e(96540),r=e(39624),s=e(21423),o=e(11261),m=e(8066),i=e(52622),l=e(81297),d=e(51336),c=e(16895),g=e(73060),u=e(14236),E=e(46294);function p(h,P){const y=h.y.values.length,C={...h.y.config,...P},f=h.x??{name:"",values:[...Array(y).keys()],type:o.PU.number,config:{}};let D={refId:"sparkline",fields:[f,{...h.y,config:C}],length:y};return(0,g.g2)(f.values)||(D=(0,u.ES)(D,0)),(0,E.M)({frame:D,refFieldPseudoMin:h.timeRange?.from.valueOf(),refFieldPseudoMax:h.timeRange?.to.valueOf()})}const b={drawStyle:i.GR.Line,showPoints:i.yL.Auto,axisPlacement:i.vM.Hidden,pointSize:2};class a extends n.PureComponent{constructor(P){super(P);const y=p(P.sparkline,P.config);this.state={data:(0,c.bq)(y,(0,c.ro)(y)),alignedDataFrame:y,configBuilder:this.prepareConfig(y)}}static getDerivedStateFromProps(P,y){const C=p(P.sparkline,P.config),f=(0,r.C)(C);return f?{...y,data:(0,c.bq)(f,(0,c.ro)(f)),alignedDataFrame:f}:{...y}}componentDidUpdate(P,y){const{alignedDataFrame:C}=this.state;if(!C)return;let f=!1;P.sparkline!==this.props.sparkline?f=!(0,s.bW)(this.state.alignedDataFrame,y.alignedDataFrame):f=!(0,t.isEqual)(P.config,this.props.config),f&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(P){let{min:y,max:C}=this.state.alignedDataFrame.fields[1].state?.range;const f=+this.state.alignedDataFrame.fields[1].config?.noValue;return Number.isNaN(f)||(y=Math.min(y,+f),C=Math.max(C,+f)),y===C?(y===0?C=100:(y=0,C*=2),[y,C]):[Math.max(y,P.config.min??-1/0),Math.min(C,P.config.max??1/0)]}prepareConfig(P){const{theme:y}=this.props,C=new d.e;C.setCursor({show:!1,x:!1,y:!1});const f=P.fields[0];C.addScale({scaleKey:"x",orientation:i.Lt.Horizontal,direction:i.ON.Right,isTime:!1,range:()=>{const{sparkline:D}=this.props;if(D.x){if(D.timeRange&&D.x.type===o.PU.time)return[D.timeRange.from.valueOf(),D.timeRange.to.valueOf()];const T=D.x.values;return[T[0],T[T.length-1]]}return[0,D.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:y,placement:i.vM.Hidden});for(let D=0;D<P.fields.length;D++){const T=P.fields[D],M=T.config,O={...b,...M.custom};if(T===f||T.type!==o.PU.number)continue;const S=M.unit||"__fixed";C.addScale({scaleKey:S,orientation:i.Lt.Vertical,direction:i.ON.Up,range:()=>this.getYRange(T)}),C.addAxis({scaleKey:S,theme:y,placement:i.vM.Hidden});const v=(0,m.Qi)(T),x=v.getCalculator(T,y)(0,0),A=O.drawStyle===i.GR.Points?i.yL.Always:O.showPoints;C.addSeries({pxAlign:!1,scaleKey:S,theme:y,colorMode:v,thresholds:M.thresholds,drawStyle:O.drawStyle,lineColor:O.lineColor??x,lineWidth:O.lineWidth,lineInterpolation:O.lineInterpolation,showPoints:A,pointSize:O.pointSize,fillOpacity:O.fillOpacity,fillColor:O.fillColor,lineStyle:O.lineStyle,gradientMode:O.gradientMode})}return C}render(){const{data:P,configBuilder:y}=this.state,{width:C,height:f}=this.props;return n.createElement(l.Z,{data:P,config:y,width:C,height:f})}}},62930:(Q,I,e)=>{"use strict";e.d(I,{y:()=>l});var t=e(32196),n=e(96540),r=e(8867),s=e(40845),o=e(4025),m=e(14578),i=e(78318);const l=({className:g,inline:u=!1,iconClassName:E,style:p,size:b="md"})=>{const a=(0,s.of)(d),h=(0,s.of)(c,b);if(typeof b!="string"||!(0,o.rJ)(b)){const P=(0,i.Wj)(),y="spinner",C=(0,i.Xi)(y,"default"),f=`${P}${C}/${y}.svg`;return n.createElement("div",{"data-testid":"Spinner",style:p,className:(0,t.cx)({[a.inline]:u},h.wrapper,g)},n.createElement(r.default,{src:f,width:b,height:b,className:(0,t.cx)("fa-spin",h.icon,g),style:p}))}return n.createElement("div",{"data-testid":"Spinner",style:p,className:(0,t.cx)({[a.inline]:u},g)},n.createElement(m.I,{className:(0,t.cx)("fa-spin",E),name:"spinner",size:b,"aria-label":"loading spinner"}))},d=g=>({inline:(0,t.css)({display:"inline-block"})}),c=(g,u)=>({wrapper:(0,t.css)({fontSize:typeof u=="string"?u:`${u}px`}),icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"})})},21633:(Q,I,e)=>{"use strict";e.d(I,{h:()=>g});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(69144);const i=.3,l=new Set(["ArrowUp","ArrowDown"]),d=new Set(["ArrowLeft","ArrowRight"]),c={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function g(a){const{direction:h,initialSize:P=.5,dragPosition:y="middle",onResizing:C,onSizeChanged:f}=a,D=16,T=(0,s.useRef)(null),M=(0,s.useRef)(null),O=(0,s.useRef)(null),S=(0,s.useRef)(null),v=(0,s.useRef)(null),x=(0,s.useRef)("1fr"),A=(0,s.useRef)(void 0),R=(0,s.useRef)(void 0),B=c[h].dim,U=c[h].axis,w=c[h].min,K=c[h].max;p(S.current,ne=>{for(const te of ne){if(!te.target.isSameNode(S.current)||!M.current)return;const oe=M.current.getBoundingClientRect()[B],le=E(M.current);T.current.ariaValueNow=u(oe,le[w],le[K])}},500,[K,w,h,B]);const N=(0,s.useRef)(null),L=(0,s.useCallback)(ne=>{M.current&&(x.current=M.current.getBoundingClientRect()[B],v.current=S.current.getBoundingClientRect()[B],N.current=ne[U],T.current.setPointerCapture(ne.pointerId),A.current=E(M.current),R.current=void 0)},[B,U]),V=(0,s.useCallback)(ne=>{if(N.current!==null&&x.current!=="1fr"){const te=ne[U]-N.current,oe=A.current,le=(0,n.clamp)(x.current+te,oe[w],oe[K]),ue=le/(v.current-D);M.current.style.flexGrow=`${ue}`,O.current.style.flexGrow=`${1-ue}`,T.current.ariaValueNow=u(le,oe[w],oe[K]),C?.(ue,le)}},[D,U,w,K,C]),F=(0,s.useCallback)(ne=>{ne.preventDefault(),ne.stopPropagation(),T.current.releasePointerCapture(ne.pointerId),N.current=null,typeof x.current=="number"&&f?.(parseFloat(M.current.style.flexGrow),x.current)},[f]),z=(0,s.useRef)(new Set),Y=(0,s.useRef)(null),H=(0,s.useCallback)(ne=>{if(z.current.size===0){Y.current=null;return}else if(x.current==="1fr")return;const le=(ne-(Y.current??ne))*i;let ue=0;h==="row"?(z.current.has("ArrowLeft")&&(ue-=le),z.current.has("ArrowRight")&&(ue+=le)):(z.current.has("ArrowUp")&&(ue-=le),z.current.has("ArrowDown")&&(ue+=le));const Te=A.current,he=M.current.getBoundingClientRect()[B],re=(0,n.clamp)(he+ue,Te[w],Te[K]),De=re/(v.current-D);M.current.style.flexGrow=`${De}`,O.current.style.flexGrow=`${1-De}`,T.current.ariaValueNow=u(re,Te[w],Te[K]),C?.(De,re),Y.current=ne,window.requestAnimationFrame(H)},[h,D,w,K,B,C]),k=(0,s.useCallback)(ne=>{if(!M.current||!O.current||!T.current||!S.current)return;if(ne.key==="Enter"){R.current===void 0?(R.current=M.current.style.flexGrow,M.current.style.flexGrow="0",O.current.style.flexGrow="1"):(M.current.style.flexGrow=R.current,O.current.style.flexGrow=`${1-parseFloat(R.current)}`,R.current=void 0);return}else if(ne.key==="Home"){A.current=E(M.current),v.current=S.current.getBoundingClientRect()[B];const oe=A.current[w]/(v.current-D);M.current.style.flexGrow=`${oe}`,O.current.style.flexGrow=`${1-oe}`,T.current.ariaValueNow="0";return}else if(ne.key==="End"){A.current=E(M.current),v.current=S.current.getBoundingClientRect()[B];const oe=A.current[K]/(v.current-D);M.current.style.flexGrow=`${oe}`,O.current.style.flexGrow=`${1-oe}`,T.current.ariaValueNow="100";return}if(!(h==="column"&&l.has(ne.key)||h==="row"&&d.has(ne.key))||z.current.has(ne.key))return;if(R.current=void 0,ne.preventDefault(),ne.stopPropagation(),x.current=M.current.getBoundingClientRect()[B],v.current=S.current.getBoundingClientRect()[B],A.current=E(M.current),!z.current.has(ne.key)){const oe=z.current.size===0;z.current.add(ne.key),oe&&window.requestAnimationFrame(H)}},[h,H,D,K,B,w]),ee=(0,s.useCallback)(ne=>{h==="row"&&!d.has(ne.key)||h==="column"&&!l.has(ne.key)||(z.current.delete(ne.key),typeof x.current=="number"&&f?.(parseFloat(M.current.style.flexGrow),x.current))},[h,f]),ie=(0,s.useCallback)(()=>{if(!M.current||!O.current)return;M.current.style.flexGrow="0.5",O.current.style.flexGrow="0.5";const ne=E(M.current);A.current=ne,x.current=M.current.getBoundingClientRect()[B],T.current.ariaValueNow=`${u(x.current,ne[w],ne[K])}`},[K,B,w]),fe=(0,s.useCallback)(()=>{z.current.size>0&&(z.current.clear(),N.current=null,typeof x.current=="number"&&f?.(parseFloat(M.current.style.flexGrow),x.current))},[f]),q=(0,o.of)(b,h),Z=(0,o.of)(m.l,y),J=h==="column"?Z.dragHandleHorizontal:Z.dragHandleVertical,G=(0,s.useId)();return{containerProps:{ref:S,className:q.container},primaryProps:{ref:M,className:q.panel,style:{[w]:"min-content",flexGrow:(0,n.clamp)(P??.5,0,1)}},secondaryProps:{ref:O,className:q.panel,style:{flexGrow:(0,n.clamp)(1-P,0,1),[w]:"min-content"}},splitterProps:{onPointerUp:F,onPointerDown:L,onPointerMove:V,onKeyDown:k,onKeyUp:ee,onDoubleClick:ie,onBlur:fe,ref:T,style:{[B]:`${D}px`},role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":P*100,"aria-controls":`start-panel-${G}`,"aria-label":"Pane resize widget",tabIndex:0,className:J}}}function u(a,h,P){return`${(0,n.clamp)((a-h)/(P-h)*100,0,100)}`}function E(a){const h=document.body.style.overflow,P=a.style.width,y=a.style.height,C=a.style.flexGrow;document.body.style.overflow="hidden",a.style.flexGrow="0";const{width:f,height:D}=a.getBoundingClientRect();a.style.flexGrow="100";const{width:T,height:M}=a.getBoundingClientRect();return document.body.style.overflow=h,a.style.width=P,a.style.height=y,a.style.flexGrow=C,{minWidth:f,maxWidth:T,minHeight:D,maxHeight:M}}function p(a,h,P=0,y){const C=(0,n.throttle)(h,P);(0,s.useLayoutEffect)(()=>{if(!a)return;const f=new ResizeObserver(C);return f.observe(a,{box:"device-pixel-content-box"}),()=>f.disconnect()},y)}function b(a,h){return{container:(0,t.css)({display:"flex",flexDirection:h==="row"?"row":"column",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,t.css)({display:"flex",position:"relative",flexBasis:0})}}},42734:(Q,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(75059),o=e(88323);class m extends r.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:l,allowMultiple:d,defaultStat:c,onChange:g}=this.props,u=s.AS.list(l);if(u.length!==l.length){const E=u.map(b=>b.id),p=(0,t.difference)(l,E);console.warn("Unknown stats",p,l),g(u.map(b=>b.id))}!d&&l.length>1&&(console.warn("Removing extra stat",l),g([l[0]])),c&&l.length<1&&g([c])},this.onSelectionChange=l=>{const{onChange:d}=this.props;Array.isArray(l)?d(l.map(c=>c.value)):d(l&&l.value?[l.value]:[])}}static{this.defaultProps={allowMultiple:!1}}componentDidMount(){this.checkInput()}componentDidUpdate(l){this.checkInput()}render(){const{stats:l,allowMultiple:d,defaultStat:c,placeholder:g,className:u,menuPlacement:E,width:p,inputId:b,filterOptions:a}=this.props,h=s.AS.selectOptions(l,a);return r.createElement(o.l6,{value:h.current,className:u,isClearable:!c,isMulti:d,width:p,isSearchable:!0,options:h.options,placeholder:g,onChange:this.onSelectionChange,menuPlacement:E,inputId:b})}}},15292:(Q,I,e)=>{"use strict";e.d(I,{K:()=>d,d:()=>l});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(95344),m=e(40845),i=e(16797);const l=s.forwardRef(({value:g,checked:u,onChange:E,id:p,label:b,disabled:a,invalid:h=!1,...P},y)=>{u&&(0,o.l)("Switch","checked prop","value");const C=(0,m.of)(c),f=(0,s.useRef)(p||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch,h&&C.invalid)},s.createElement("input",{type:"checkbox",disabled:a,checked:g,onChange:D=>{!a&&E?.(D)},id:f.current,...P,ref:y}),s.createElement("label",{htmlFor:f.current,"aria-label":b??"Toggle switch"}))});l.displayName="Switch";const d=s.forwardRef(({transparent:g,className:u,showLabel:E,label:p,value:b,id:a,invalid:h,...P},y)=>{const C=(0,m.of)(c,g);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,u,P.disabled&&C.disabled,h&&C.invalid)},E&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(C.inlineLabel,b&&C.inlineLabelEnabled,"inline-switch-label")},p),s.createElement(l,{...P,id:a,label:p,ref:y,value:b}))});d.displayName="Switch";const c=(g,u)=>({switch:(0,t.css)({width:"32px",height:"16px",position:"relative",lineHeight:1,input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:checked + label":{background:g.colors.primary.main,borderColor:g.colors.primary.main,"&:hover":{background:g.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:g.colors.primary.contrastText}},"&:disabled + label":{background:g.colors.action.disabledBackground,borderColor:g.colors.border.weak,cursor:"not-allowed","&:hover":{background:g.colors.action.disabledBackground}},"&:disabled:checked + label":{"&::after":{background:g.colors.text.disabled}},"&:focus + label, &:focus-visible + label":(0,i.getFocusStyles)(g),"&:focus:not(:focus-visible) + label":(0,i.getMouseFocusStyles)(g)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:g.shape.radius.pill,background:g.components.input.background,border:`1px solid ${g.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:g.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:g.shape.radius.circle,background:g.colors.text.secondary,boxShadow:g.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,t.css)({padding:g.spacing(0,1),height:g.spacing(g.components.height.md),display:"inline-flex",alignItems:"center",background:u?"transparent":g.components.input.background,border:`1px solid ${u?"transparent":g.components.input.borderColor}`,borderRadius:g.shape.radius.default,"&:hover":{border:`1px solid ${u?"transparent":g.components.input.borderHover}`,".inline-switch-label":{color:g.colors.text.primary}}}),disabled:(0,t.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,t.css)({cursor:"pointer",paddingRight:g.spacing(1),color:g.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,t.css)({color:g.colors.text.primary}),invalid:(0,t.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${g.colors.error.border}`}})})},60734:(Q,I,e)=>{"use strict";e.d(I,{q:()=>d});var t=e(32196),n=e(96540),r=e(29158),s=e(63021),o=e(40675),m=e(40980),i=e(40845),l=e(40276);function d({tabs:g,defaultTab:u,closeIconTooltip:E,onClose:p}){const[b,a]=(0,n.useState)(g.some(f=>f.value===u)?u:g[0].value),h=(0,i.of)(c),P=(0,i.$j)(),y=f=>{a(f.value)},C=`calc(100% - (${P.components.menuTabs.height}px + ${P.spacing(1)}))`;return n.createElement("div",{className:h.container},n.createElement(s.U,{className:h.tabs},g.map(f=>n.createElement(o.o,{key:f.value,label:f.label,active:f.value===b,onChangeTab:()=>y(f),icon:f.icon})),n.createElement(r.K,{className:h.close,onClick:p,name:"times",tooltip:E??"Close"})),n.createElement(l.E,{autoHeightMin:C,autoHeightMax:C},n.createElement(m.J,{className:h.tabContent},g.find(f=>f.value===b)?.content)))}const c=g=>({container:(0,t.css)({height:"100%"}),tabContent:(0,t.css)({padding:g.spacing(2),backgroundColor:g.colors.background.primary,height:"100%"}),close:(0,t.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:g.typography.size.lg}),tabs:(0,t.css)({paddingTop:g.spacing(1),borderColor:g.colors.border.weak,ul:{marginLeft:g.spacing(2)}})})},92015:(Q,I,e)=>{"use strict";e.d(I,{u:()=>i,d:()=>d});var t=e(96540),n=e(75059),r=e(13544),s=e(32196);const o=c=>{const g=(0,s.css)({width:"100%",listStyle:"none"}),u=(0,s.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return c.value&&!Array.isArray(c.value)?t.createElement("span",null,c.value):c.value&&Array.isArray(c.value)&&c.value.length>0?t.createElement("ul",{className:g},c.value.map((E,p)=>{const b=Object.keys(E)[0];return t.createElement("li",{className:u,key:p},t.createElement("span",null,b),t.createElement("span",null,E[b]))})):m},m=()=>t.createElement("span",null,"\xA0");function i(c){const{totalColumnsWidth:g,footerGroups:u,isPaginationVisible:E,tableStyles:p}=c,b=r.Tp.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:E?"relative":"absolute",width:g?`${g}px`:"100%",bottom:"0px"}},u.map(a=>{const{key:h,...P}=a.getFooterGroupProps();return t.createElement("div",{className:p.tfoot,...P,key:h,"data-testid":b.footer},a.headers.map(y=>l(y,p)))}))}function l(c,g){const u=c.getHeaderProps();return u?(u.style=u.style??{},u.style.position="absolute",u.style.justifyContent=c.justifyContent,t.createElement("div",{className:g.headerCell,...u},c.render("Footer"))):null}function d(c,g,u){if(g===void 0)return m;if(u){if(g[c]===void 0)return m;const E=n.AS.get(n.gy.count).name;return o({value:[{[E]:String(g[c])}]})}return o({value:g[c]})}},30355:(Q,I,e)=>{"use strict";e.d(I,{a:()=>u,t:()=>g});var t=e(96540),n=e(58563),r=e(14236),s=e(11261),o=e(52622),m=e(40845),i=e(29413),l=e(9286),d=e(5926),c=e(77659);const g={type:o.ob.Sparkline,drawStyle:o.GR.Line,lineInterpolation:o.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:o.on.Hue,pointSize:2,barAlignment:o.Nj.Center,showPoints:o.yL.Never,hideValue:!1},u=b=>{const{field:a,innerWidth:h,tableStyles:P,cell:y,cellProps:C,timeRange:f}=b,D=E(y.value),T=(0,m.$j)();if(!D)return t.createElement("div",{...C,className:P.cellContainer},a.config.noValue||"no data");D.x&&!D.x.config.interval&&D.x.values.length>1&&(D.x.config.interval=D.x.values[1]-D.x.values[0]),D.y.values=D.y.values.map(R=>Number.isFinite(R)?R:null);const M=(0,n.AP)(D.y);D.y.config.min=M.min,D.y.config.max=M.max,D.y.state={range:M},D.timeRange=f;const O=p(a),S={color:a.config.color,custom:{...g,...O}},v=a.config.custom?.cellOptions?.hideValue;let x=0,A=null;if(!v){const R=(0,r.LI)(y.value)?y.value.value:null,B=a.display(R),U=(0,c.zi)(a,B,y.row.index);x=(0,i.kD)(`${U.prefix??""}${U.text}${U.suffix??""}`,16).width+T.spacing.gridSize,A=t.createElement(l.i,{style:{width:`${x-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:B})}return t.createElement("div",{...C,className:P.cellContainer},A,t.createElement("div",null,t.createElement(d.O,{width:h-x,height:P.cellHeightInner,sparkline:D,config:S,theme:P.theme})))};function E(b){if(Array.isArray(b))return{y:{name:"test",type:s.PU.number,values:b,config:{}}};if((0,r.ci)(b)){const a=b.fields.find(P=>P.type===s.PU.time),h=b.fields.find(P=>P.type===s.PU.number);if(a&&h)return{x:a,y:h}}}function p(b){let a=(0,c.bk)(b);if(a.type===o.ob.Auto&&(a={...a,type:o.ob.Sparkline}),a.type===o.ob.Sparkline)return a;throw new Error(`Expected options type ${o.ob.Sparkline} but got ${a.type}`)}},77093:(Q,I,e)=>{"use strict";e.d(I,{X:()=>ze});var t=e(96540),n=e(32885),r=e(75059),s=e(11261),o=e(19845),m=e(13544),i=e(52622),l=e(40845),d=e(40276),c=e(19384),g=e(92015),u=e(4025),E=e(14578),p=e(32196),b=e(13840),a=e(97222),h=e(83195),P=e(67061),y=e(67647),C=e(9261),f=e(60029),D=e(10880);const T=28,M=T*5,O={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},S=Object.values(O),v=O.Contains,x=O.Expression,A=xe=>{if(xe=xe.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(xe)){const pe=new Date(xe);if(!isNaN(pe.getTime())){const Ue=(0,h.j_)("dateTimeAsIso");return(0,h.cN)(Ue(pe.getTime()))}}const We=parseFloat(xe);if(!isNaN(We))return We;const be=xe.toLowerCase();return be==="true"||be==="false"?be==="true":xe},R=({options:xe,values:We,caseSensitive:be,showOperators:pe,onChange:Ue,searchFilter:we,setSearchFilter:je,operator:He,setOperator:rt})=>{const Je=(0,t.useMemo)(()=>new RegExp(we,be?void 0:"i"),[we,be]),Ve=(0,t.useMemo)(()=>xe.filter(tt=>{if(!pe||!we||He.value===v.value)return tt.label===void 0?!1:Je.test(tt.label);if(He.value===x.value){if(tt.value===void 0)return!1;try{const at=we.replace(/\\/g,""),st=new Function("$",`'use strict'; return ${at};`),dt=A(tt.value);return st(dt)}catch{}return!1}else{if(tt.value===void 0)return!1;const at=A(tt.value),st=A(we);switch(He.value){case"=":return at===st;case"!=":return at!==st;case">":return at>st;case">=":return at>=st;case"<":return at<st;case"<=":return at<=st}return!1}}),[xe,Je,pe,He,we]),Oe=(0,t.useMemo)(()=>Ve.filter(tt=>We.includes(tt)),[Ve,We]),Ne=(0,t.useMemo)(()=>Ve.length===Oe.length,[Ve,Oe]),ye=(0,t.useMemo)(()=>Oe.length>0&&Ve.length>Oe.length,[Ve,Oe]),se=(0,t.useMemo)(()=>Oe.length?`${Oe.length} selected`:"Select all",[Oe]),ae=(0,t.useMemo)(()=>Ve.length!==Oe.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[Ve,Oe]),ge=(0,l.of)(B),Re=(0,l.$j)().spacing.gridSize,Be=(0,t.useMemo)(()=>Math.min(Ve.length*T,M)+Re,[Re,Ve.length]),_e=(0,t.useCallback)(tt=>at=>{const st=at.currentTarget.checked?We.concat(tt):We.filter(dt=>dt.value!==tt.value);Ue(st)},[Ue,We]),Xe=(0,t.useCallback)(()=>{if(Ve.length===Oe.length){const tt=We.filter(at=>!Ve.includes(at));Ue(tt)}else{const tt=[...new Set([...We,...Ve])];Ue(tt)}},[Ue,We,Ve,Oe]);return t.createElement(P.B,{direction:"column",gap:.25},!pe&&t.createElement(y.Z,{placeholder:"Filter values",onChange:je,value:we}),pe&&t.createElement(P.B,{direction:"row",gap:0},t.createElement(C.f,{variant:"canvas",options:S,onChange:rt,value:He,tooltip:He.description}),t.createElement(y.Z,{placeholder:"Filter values",onChange:je,value:we})),!Ve.length&&t.createElement(f.J,null,"No values"),Ve.length&&t.createElement(a.Y1,{height:Be,itemCount:Ve.length,itemSize:T,width:"100%",className:ge.filterList},({index:tt,style:at})=>{const st=Ve[tt],{value:dt,label:ot}=st,ft=We.find(yt=>yt.value===dt)!==void 0;return t.createElement("div",{className:ge.filterListRow,style:at,title:ot},t.createElement(D.S,{value:ft,label:ot,onChange:_e(st)}))}),Ve.length&&t.createElement(P.B,{direction:"column",gap:.25},t.createElement("div",{className:(0,p.cx)(ge.selectDivider)}),t.createElement("div",{className:(0,p.cx)(ge.filterListRow)},t.createElement(D.S,{value:Ne,indeterminate:ye,label:se,description:ae,onChange:Xe}))))},B=xe=>({filterList:(0,p.css)({label:"filterList"}),filterListRow:(0,p.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:xe.spacing(.5),":hover":{backgroundColor:xe.colors.action.hover}}),selectDivider:(0,p.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${xe.colors.border.medium}`,padding:xe.spacing(.5,2)})});var U=e(8866),w=e(66864),K=e(29158),N=e(55852),L=e(77659);const V=({column:{preFilteredRows:xe,filterValue:We,setFilter:be},onClose:pe,field:Ue,searchFilter:we,setSearchFilter:je,operator:He,setOperator:rt})=>{const Je=(0,l.$j)(),Ve=(0,t.useMemo)(()=>(0,L.MY)(xe,Ue),[xe,Ue]),Oe=(0,t.useMemo)(()=>(0,L.Yz)(Ve),[Ve]),Ne=(0,t.useMemo)(()=>(0,L.Sj)(Oe,We),[Oe,We]),[ye,se]=(0,t.useState)(Ne),[ae,ge]=(0,t.useState)(!1),Pe=(0,t.useCallback)(tt=>pe(),[pe]),Re=(0,t.useCallback)(tt=>{const at=ye.length?ye:void 0;be(at),pe()},[be,ye,pe]),Be=(0,t.useCallback)(tt=>{be(void 0),pe()},[be,pe]),_e=(0,t.useMemo)(()=>We!==void 0,[We]),Xe=(0,l.of)(F);return t.createElement(U.N,{onClick:Pe,useCapture:!0},t.createElement("div",{className:(0,p.cx)(Xe.filterContainer),onClick:z},t.createElement(w.gW,{spacing:"lg"},t.createElement(w.gW,{spacing:"xs"},t.createElement(w.Gy,{justify:"space-between",align:"center"},t.createElement(f.J,{className:Xe.label},"Filter by values:"),t.createElement(K.K,{name:"text-fields",tooltip:"Match case",style:{color:ae?Je.colors.text.link:Je.colors.text.disabled},onClick:()=>{ge(tt=>!tt)}})),t.createElement("div",{className:(0,p.cx)(Xe.listDivider)}),t.createElement(R,{onChange:se,values:ye,options:Oe,caseSensitive:ae,showOperators:!0,searchFilter:we,setSearchFilter:je,operator:He,setOperator:rt})),t.createElement(w.Gy,{spacing:"lg"},t.createElement(w.Gy,null,t.createElement(N.$n,{size:"sm",onClick:Re},"Ok"),t.createElement(N.$n,{size:"sm",variant:"secondary",onClick:Pe},"Cancel")),_e&&t.createElement(w.Gy,null,t.createElement(N.$n,{fill:"text",size:"sm",onClick:Be},"Clear filter"))))))},F=xe=>({filterContainer:(0,p.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:xe.colors.background.primary,border:`1px solid ${xe.colors.border.weak}`,padding:xe.spacing(2),boxShadow:xe.shadows.z3,borderRadius:xe.shape.radius.default}),listDivider:(0,p.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${xe.colors.border.medium}`,padding:xe.spacing(.5,2)}),label:(0,p.css)({marginBottom:0})}),z=xe=>{xe.stopPropagation()},Y=({column:xe,field:We,tableStyles:be})=>{const pe=(0,t.useRef)(null),[Ue,we]=(0,t.useState)(!1),je=(0,l.of)(H),He=(0,t.useMemo)(()=>!!xe.filterValue,[xe.filterValue]),rt=(0,t.useCallback)(()=>we(!0),[we]),Je=(0,t.useCallback)(()=>we(!1),[we]),[Ve,Oe]=(0,t.useState)(""),[Ne,ye]=(0,t.useState)(v);return!We||!We.config.custom?.filterable?null:t.createElement("button",{className:(0,p.cx)(be.headerFilter,He?je.filterIconEnabled:je.filterIconDisabled),ref:pe,type:"button",onClick:rt},t.createElement(E.I,{name:"filter"}),Ue&&pe.current&&t.createElement(b.A,{content:t.createElement(V,{column:xe,tableStyles:be,field:We,onClose:Je,searchFilter:Ve,setSearchFilter:Oe,operator:Ne,setOperator:ye}),placement:"bottom-start",referenceElement:pe.current,show:!0}))},H=xe=>({filterIconEnabled:(0,p.css)({label:"filterIconEnabled",color:xe.colors.primary.text}),filterIconDisabled:(0,p.css)({label:"filterIconDisabled",color:xe.colors.text.disabled})}),k=xe=>{const{headerGroups:We,showTypeIcons:be,tableStyles:pe}=xe,Ue=m.Tp.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:pe.headerRow},We.map(we=>{const{key:je,...He}=we.getHeaderGroupProps();return t.createElement("div",{className:pe.thead,...He,key:je,"aria-label":Ue.header,role:"row"},we.headers.map((rt,Je)=>ee(rt,pe,be)))}))};function ee(xe,We,be){const pe=xe.getHeaderProps(),Ue=xe.field??null,we=Ue?.config.custom;xe.canResize&&(pe.style.userSelect=xe.isResizing?"none":"auto"),pe.style.position="absolute",pe.style.justifyContent=xe.justifyContent,pe.style.left=xe.totalLeft;let je=xe.render("Header"),He=xe.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...xe.getSortByToggleProps(),className:We.headerCellLabel},be&&t.createElement(E.I,{name:(0,u.SS)(Ue),title:Ue?.type,size:"sm",className:We.typeIcon}),t.createElement("div",null,je),xe.isSorted&&(xe.isSortedDesc?t.createElement(E.I,{size:"lg",name:"arrow-down",className:We.sortIcon}):t.createElement(E.I,{name:"arrow-up",size:"lg",className:We.sortIcon}))),xe.canFilter&&t.createElement(Y,{column:xe,tableStyles:We,field:Ue}));return He&&we?.headerComponent?He=t.createElement(we.headerComponent,{field:Ue,defaultContent:He}):we?.headerComponent&&(je=t.createElement(we.headerComponent,{field:Ue,defaultContent:je})),t.createElement("div",{className:We.headerCell,...pe,role:"columnheader"},xe.canSort&&He,!xe.canSort&&je,!xe.canSort&&xe.canFilter&&t.createElement(Y,{column:xe,tableStyles:We,field:Ue}),xe.canResize&&t.createElement("div",{...xe.getResizerProps(),className:We.resizeHandle}))}var ie=e(64423),fe=e(56978),q=e(69129),Z=e(79041);function J({tableStyles:xe,nestedData:We,rowIndex:be,width:pe,cellHeight:Ue}){const we=We.values,je=[],He=(0,l.$j)(),rt=(0,l.of)(G);let Je=xe.rowHeight+He.spacing.gridSize;return we[be].forEach((Ve,Oe)=>{const Ne=!!Ve.meta?.custom?.noHeader,ye=xe.rowHeight*(Ve.length+(Ne?0:1)),se={height:ye,paddingLeft:L.jV,position:"absolute",top:Je};Je+=ye+He.spacing.gridSize,je.push(t.createElement("div",{style:se,key:`subTable_${be}_${Oe}`},t.createElement(ze,{data:Ve,width:pe-L.jV,height:xe.rowHeight*(Ve.length+1),noHeader:Ne,cellHeight:Ue})))}),t.createElement("div",{className:rt.subTables},je)}const G=xe=>({subTables:(0,p.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:xe.spacing(5),left:xe.spacing(1),bottom:xe.spacing(2),background:xe.colors.border.medium}})});function ne(xe,We,be){return xe.values[We].reduce((we,je)=>{if(je.length){const He=!!je.meta?.custom?.noHeader;return we+be.rowHeight*(je.length+(He?0:1))+8}return we},be.rowHeight)??be.rowHeight}var te=e(49618);const oe=xe=>{const{data:We,rows:be,headerHeight:pe,footerPaginationEnabled:Ue,rowHeight:we,itemCount:je,pageIndex:He,tableState:rt,prepareRow:Je,onCellFilterAdded:Ve,width:Oe,cellHeight:Ne=i.qM.Sm,timeRange:ye,tableStyles:se,nestedDataField:ae,listHeight:ge,listRef:Pe,enableSharedCrosshair:Re=!1,initialRowIndex:Be=void 0}=xe,[_e,Xe]=(0,t.useState)(Be),tt=(0,l.$j)(),at=(0,Z.d2)(),st=(0,t.useMemo)(()=>{const Mt=We.fields.find(Dn=>Dn.type===s.PU.time);return Mt?(0,L.HY)(Mt):0},[We]),dt=(0,t.useCallback)((Mt,Dn)=>{if(!at||!Re||!(0,o.S1)(Dn))return;const lt=Dn.fields.find(Ct=>Ct.type===s.PU.time);at.eventBus.publish(new q.b_({point:{time:lt.values[Mt]}}))},[Re,at]),ot=(0,t.useCallback)(()=>{!at||!Re||at.eventBus.publish(new q.ql)},[Re,at]),ft=(0,t.useCallback)(Mt=>{if(Mt.payload.point?.time&&Mt.payload.rowIndex!==void 0){const Dn=We.fields.find(qt=>qt.type===s.PU.time),lt=Dn.values[Mt.payload.rowIndex],Ct=Mt.payload.point.time;if((0,L.Iy)(Ct,lt,st)){Xe(Mt.payload.rowIndex);return}const Vt=Dn.values.findIndex(qt=>(0,L.Iy)(Ct,qt,st));if(Vt!==-1){Xe(Vt);return}Xe(void 0)}},[We.fields,st]);(0,t.useEffect)(()=>{if(!at||!Re||!(0,o.S1)(We)||Ue)return;const Mt=new ie.yU;return Mt.add(at.eventBus.getStream(q.b_).pipe((0,fe.B)(250)).subscribe({next:Dn=>{at.eventBus!==Dn.origin&&ft(Dn)}})),Mt.add(at.eventBus.getStream(q.ql).pipe((0,fe.B)(250)).subscribe({next:Dn=>{at.eventBus!==Dn.origin&&Xe(void 0)}})),()=>{Mt.unsubscribe()}},[We,Re,Ue,ft,at]);let yt;if(_e!==void 0){const Mt=be.findIndex(Dn=>Dn.index===_e);Mt!==-1&&(yt=pe+(Mt-1)*we)}const Tt=(0,t.useCallback)(Mt=>rt.pageIndex*rt.pageSize+Mt,[rt.pageIndex,rt.pageSize]);let Kt;for(const Mt of We.fields){const Dn=Mt.config.custom;Dn!==void 0&&Dn.cellOptions!==void 0&&Dn.cellOptions.type===i.ob.ColorBackground&&Dn.cellOptions.applyToRow&&(Kt=lt=>{const Ct=Mt.display(Mt.values.get(lt));return(0,L.HW)(se,Dn.cellOptions,Ct)})}const Gt=(0,t.useCallback)(({index:Mt,style:Dn,rowHighlightIndex:lt})=>{const Ct=Tt(Mt),Vt=be[Ct];let qt={};Je(Vt);const rn=rt.expanded[Vt.id]?(0,p.css)({"&:hover":{background:"inherit"}}):{};if(lt!==void 0&&Vt.index===lt&&(Dn={...Dn,backgroundColor:tt.components.table.rowHoverBackground},qt={"aria-selected":"true"}),Kt){const{bgColor:en,textColor:Jt}=Kt(Vt.index);Dn.background=en,Dn.color=Jt}return t.createElement("div",{...Vt.getRowProps({style:Dn,...qt}),className:(0,p.cx)(se.row,rn),onMouseEnter:()=>dt(Mt,We),onMouseLeave:ot},ae&&rt.expanded[Vt.id]&&t.createElement(J,{nestedData:ae,tableStyles:se,rowIndex:Mt,width:Oe,cellHeight:Ne}),Vt.cells.map((en,Jt)=>t.createElement(te.n,{key:Jt,tableStyles:se,cell:en,onCellFilterAdded:Ve,columnIndex:Jt,columnCount:Vt.cells.length,timeRange:ye,frame:We,rowStyled:Kt!==void 0})))},[Ne,We,ae,Ve,dt,ot,Je,Tt,be,rt.expanded,se,tt.components.table.rowHoverBackground,ye,Oe,Kt]),_t=Mt=>{const Dn=Tt(Mt),lt=be[Dn];return rt.expanded[lt.id]&&ae?ne(ae,Mt,se):se.rowHeight},it=Mt=>{const{scrollTop:Dn}=Mt.currentTarget;Pe.current!==null&&Pe.current.scrollTo(Dn)};return t.createElement(t.Fragment,null,t.createElement(d.A,{onScroll:it,hideHorizontalTrack:!0,scrollTop:yt},t.createElement(a._m,{key:we+He,height:ge,itemCount:je,itemSize:_t,width:"100%",ref:Pe,style:{overflow:void 0}},({index:Mt,style:Dn})=>Gt({index:Mt,style:Dn,rowHighlightIndex:_e}))))};function le(xe,We){(0,t.useEffect)(()=>{if(xe.current&&We.current){const be=xe.current.querySelector(".track-vertical"),pe=We.current.firstChild;pe&&be&&(be.remove(),pe instanceof HTMLElement&&(pe.querySelector(":scope > .track-vertical")?.remove(),pe.append(be)))}})}function ue(xe,We,be,pe){const Ue=JSON.stringify(Object.keys(xe.expanded));(0,t.useEffect)(()=>{let we=0;pe||(Number.isFinite(xe.lastExpandedOrCollapsedIndex)&&(we=xe.lastExpandedOrCollapsedIndex),we=xe.pageIndex===0?we-1:we-xe.pageIndex-xe.pageIndex*xe.pageSize),We.current?.resetAfterIndex(Math.max(we,0))},[xe.lastExpandedOrCollapsedIndex,xe.pageSize,xe.pageIndex,We,be,Ue,pe])}var Te=e(28240);function he({onColumnResize:xe,onSortByChange:We,data:be}){return(0,t.useCallback)((pe,Ue)=>{switch(Ue.type){case"columnDoneResizing":if(xe){const je=pe.columnResizing.headerIdWidths[0][0],He=parseInt(je,10),rt=Math.round(pe.columnResizing.columnWidths[je]),Je=be.fields[He];if(!Je)return pe;const Ve=(0,Te.Ct)(Je,be);xe(Ve,rt)}case"toggleSortBy":if(We){const we=[];for(const je of pe.sortBy){const He=be.fields[parseInt(je.id,10)];He&&we.push({displayName:(0,Te.Ct)(He,be),desc:je.desc})}We(we)}case"toggleRowExpanded":if(Ue.id)return{...pe,lastExpandedOrCollapsedIndex:parseInt(Ue.id,10)}}return pe},[be,xe,We])}function re(xe,We){const be={};if(xe){be.sortBy=[];for(const pe of xe)for(const Ue of We)Ue.Header===pe.displayName&&be.sortBy.push({id:Ue.id,desc:pe.desc})}return be}var De=e(69770);const Fe=150,Ee=36,Me="No data",ze=(0,t.memo)(xe=>{const{ariaLabel:We,data:be,height:pe,onCellFilterAdded:Ue,width:we,columnMinWidth:je=Fe,noHeader:He,resizable:rt=!0,initialSortBy:Je,footerOptions:Ve,showTypeIcons:Oe,footerValues:Ne,enablePagination:ye,cellHeight:se=i.qM.Sm,timeRange:ae,enableSharedCrosshair:ge=!1,initialRowIndex:Pe=void 0,fieldConfig:Re}=xe,Be=(0,t.useRef)(null),_e=(0,t.useRef)(null),Xe=(0,t.useRef)(null),tt=(0,l.$j)(),at=(0,De.k)(tt,se),st=He?0:at.rowHeight,[dt,ot]=(0,t.useState)(Ne),ft=Re?.defaults?.noValue??Me,yt=(0,t.useMemo)(()=>{const xn=Ee;let Vn=0;if(!dt)return 0;for(const aa of dt)Array.isArray(aa)&&aa.length>Vn&&(Vn=aa.length);return Vn>1?xn*Vn:xn},[dt]),Tt=(0,t.useMemo)(()=>be.fields.length?Array(be.length).fill(0):[],[be]),Kt=!!(Ve?.countRows&&Ve.reducer&&Ve.reducer.length&&Ve.reducer[0]===r.gy.count),Gt=be.fields.find(xn=>xn.type===s.PU.nestedFrames),_t=Gt!==void 0,it=(0,t.useMemo)(()=>(0,L.GH)(be,we,je,_t,dt,Kt),[be,we,je,dt,_t,Kt]),Mt=(0,t.useRef)(),Dn=he({...xe,onSortByChange:xn=>{Mt.current(!1),xe.onSortByChange&&xe.onSortByChange(xn)}}),lt=!!be.meta?.uniqueRowIdFields?.length,Ct=(0,t.useMemo)(()=>{const xn={columns:it,data:Tt,disableResizing:!rt,stateReducer:Dn,autoResetPage:!1,initialState:re(Je,it),autoResetFilters:!1,sortTypes:{number:L.Ok,"alphanumeric-insensitive":L.IM}};return lt&&(xn.getRowId=(Vn,aa)=>(0,o.t9)(be,aa),xn.autoResetExpanded=!1),xn},[Je,it,Tt,rt,Dn,lt,be]),{getTableProps:Vt,headerGroups:qt,footerGroups:rn,rows:en,prepareRow:Jt,totalColumnsWidth:hn,page:Fn,state:Kn,gotoPage:na,setPageSize:Ut,pageOptions:on,toggleAllRowsExpanded:mn}=(0,n.useTable)(Ct,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),vn=Kn;Mt.current=mn,(0,t.useEffect)(()=>{Ve||ot(Ne)},[Ne,Ve]),(0,t.useEffect)(()=>{if(!Ve)return;if(!Ve.show){ot(void 0);return}if(Kt){const Vn=[];Vn[0]=qt[0]?.headers[0]?.filteredRows.length.toString()??be.length.toString(),ot(Vn);return}const xn=(0,L.Ux)(qt[0].headers,(0,L.XX)(en),Ve,tt);ot(xn)},[Ve,tt,Kn.filters,be]);let pn=pe-(st+yt);ye&&(pn-=at.cellHeight);const Un=Math.round(pn/at.rowHeight)-1;(0,t.useEffect)(()=>{Un<=0||Ut(Un)},[Un,Ut]),(0,t.useEffect)(()=>{be.length/Un<Kn.pageIndex&&na(0)},[be]),ue(vn,Be,be,lt),le(Xe,_e);const Bn=(0,t.useCallback)(xn=>{na(xn-1)},[na]),kn=ye?Fn.length:en.length;let Mn=null;if(ye){const xn=Kn.pageIndex*Kn.pageSize+1;let Vn=xn+Kn.pageSize-1;const aa=we<550;Vn>be.length&&(Vn=be.length),Mn=t.createElement("div",{className:at.paginationWrapper},t.createElement(c.d,{currentPage:Kn.pageIndex+1,numberOfPages:on.length,showSmallVersion:aa,onNavigate:Bn}),aa?null:t.createElement("div",{className:at.paginationSummary},xn," - ",Vn," of ",be.length," rows"))}return t.createElement("div",{...Vt(),className:at.table,"aria-label":We,role:"table",ref:_e,style:{width:we,height:pe}},t.createElement(d.E,{hideVerticalTrack:!0},t.createElement("div",{className:at.tableContentWrapper(hn)},!He&&t.createElement(k,{headerGroups:qt,showTypeIcons:Oe,tableStyles:at}),kn>0?t.createElement("div",{"data-testid":m.Tp.components.Panels.Visualization.Table.body,ref:Xe},t.createElement(oe,{data:be,rows:en,width:we,cellHeight:se,headerHeight:st,rowHeight:at.rowHeight,itemCount:kn,pageIndex:Kn.pageIndex,listHeight:pn,listRef:Be,tableState:Kn,prepareRow:Jt,timeRange:ae,onCellFilterAdded:Ue,nestedDataField:Gt,tableStyles:at,footerPaginationEnabled:!!ye,enableSharedCrosshair:ge,initialRowIndex:Pe})):t.createElement("div",{style:{height:pe-st,width:we},className:at.noData},ft),dt&&t.createElement(g.u,{isPaginationVisible:!!ye,footerValues:dt,footerGroups:rn,totalColumnsWidth:hn,tableStyles:at}))),Mn)});ze.displayName="Table"},49618:(Q,I,e)=>{"use strict";e.d(I,{n:()=>n});var t=e(96540);const n=({cell:r,tableStyles:s,onCellFilterAdded:o,timeRange:m,userProps:i,frame:l,rowStyled:d})=>{const c=r.getCellProps(),g=r.column.field;if(!g?.display)return null;c.style&&(c.style.minWidth=c.style.width,c.style.justifyContent=r.column.justifyContent);let u=(typeof r.column.width=="number"?r.column.width:24)-s.cellPadding*2;return t.createElement(t.Fragment,null,r.render("Cell",{field:g,tableStyles:s,onCellFilterAdded:o,cellProps:c,innerWidth:u,timeRange:m,userProps:i,frame:l,rowStyled:d}))}},69770:(Q,I,e)=>{"use strict";e.d(I,{k:()=>n});var t=e(32196);function n(s,o){const m=s.colors.border.weak,i=s.colors.primary.border,l=6,d=r(s,o,l),c=d+2,g=28,u=(E,p,b,a,h,P)=>(0,t.css)({label:b?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${l}px`,width:"100%",height:`${c-1}px`,display:"flex",...a?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${m}`,color:P?"inherit":E??void 0,background:P?void 0:p??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:b?"visible":void 0,width:h||!b?"auto":"auto !important",height:h||b?"auto !important":`${c-1}px`,minHeight:`${c-1}px`,wordBreak:h?"break-word":void 0,whiteSpace:h&&b?"normal":"nowrap",boxShadow:b?`0 0 2px ${s.colors.primary.main}`:void 0,background:P?"inherit":p??s.colors.background.primary,zIndex:1,".cellActions":{color:"#FFF",visibility:"visible",opacity:1,width:"auto",background:"rgba(0, 0, 0, 0.6)"}},a:{color:"inherit"},".cellActions":{display:"flex",position:b?void 0:"absolute",top:b?void 0:"1px",right:b?void 0:0,margin:b?s.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:s.spacing(1,.5,1,1),background:p?"none":"rgba(0, 0, 0, 0.5)",svg:{color:E}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:s,cellHeight:d,buildCellContainerStyle:u,cellPadding:l,cellHeightInner:d-l*2,rowHeight:c,table:(0,t.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,t.css)({label:"thead",height:`${g}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,t.css)({label:"tfoot",height:`${g}px`,borderTop:`1px solid ${m}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`}),headerCell:(0,t.css)({height:"100%",padding:`0 ${l}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:s.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,t.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:s.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:s.spacing(.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellContainerText:u(void 0,void 0,!0,!0),cellContainerTextNoOverflow:u(void 0,void 0,!1,!0),cellContainer:u(void 0,void 0,!0,!1),cellContainerNoOverflow:u(void 0,void 0,!1,!1),cellText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,t.css)({marginLeft:s.spacing(.5)}),cellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:s.colors.text.link,fontWeight:s.typography.fontWeightMedium,paddingRight:s.spacing(1.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellLinkForColoredCell:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:s.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,t.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,t.css)({display:"flex",height:`${d}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,t.css)({color:s.colors.text.secondary,fontSize:s.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:s.spacing(0,1,0,2)}),tableContentWrapper:E=>{const p=E!==void 0?`${E}px`:"100%";return(0,t.css)({label:"tableContentWrapper",width:p,display:"flex",flexDirection:"column"})},row:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`,"&:hover":{backgroundColor:s.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,t.css)({height:"100%"}),resizeHandle:(0,t.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:i,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:s.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,t.css)({marginRight:s.spacing(1),color:s.colors.text.secondary}),noData:(0,t.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${c}px`,cursor:"pointer"})}}function r(s,o,m){const i=s.typography.fontSize,l=s.typography.body.lineHeight;switch(o){case"md":return 42;case"lg":return 48;case"sm":default:return m*2+i*l}}},88407:(Q,I,e)=>{"use strict";e.d(I,{Zi:()=>n,mc:()=>t});const t="=",n="!="},77659:(Q,I,e)=>{"use strict";e.d(I,{jV:()=>J,HY:()=>He,MY:()=>le,XX:()=>xe,zi:()=>we,HW:()=>rt,bk:()=>be,GH:()=>ne,Sj:()=>re,Ux:()=>Me,j1:()=>G,Iy:()=>je,o7:()=>pe,IM:()=>De,Ok:()=>Fe,Yz:()=>Te});var t=e(2543),n=e(47078),r=e.n(n),s=e(84140),o=e(11261),m=e(28240),i=e(14236),l=e(19845),d=e(83195),c=e(75059),g=e(57875),u=e(52622),E=e(24284),p=e(96540),b=e(50082),a=e(58563),h=e(47070),P=e(97696),y=e(59796);const C={mode:b.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},f=Je=>{const{field:Ve,innerWidth:Oe,tableStyles:Ne,cell:ye,cellProps:se,row:ae}=Je,ge=Ve.display(ye.value),Pe=be(Ve);let Re=(0,a.xg)(Ve,!1);Re.thresholds||(Re={...Re,thresholds:C});let Be=u.eX.Gradient,_e;Pe.type===u.ob.Gauge&&(Be=Pe.mode??u.eX.Gradient,_e=Pe.valueDisplayMode!==void 0?Pe.valueDisplayMode:u.$l.Text);const Xe=()=>(0,t.isFunction)(Ve.getLinks)?Ve.getLinks({valueRowIndex:ae.index}):[],tt=!!Xe().length,at=we(Ve,ge,ye.row.index),st=dt=>{const{openMenu:ot,targetClassName:ft}=dt;return p.createElement(P.xE,{width:Oe,height:Ne.cellHeightInner,field:Re,display:Ve.display,text:{valueSize:14},value:ge,orientation:h.wV.Horizontal,theme:Ne.theme,alignmentFactors:at,onClick:ot,className:ft,itemSpacing:1,lcdCellWidth:8,displayMode:Be,valueDisplayMode:_e})};return p.createElement("div",{...se,className:Ne.cellContainer},tt&&p.createElement(y.e,{links:Xe,style:{display:"flex",width:"100%"}},dt=>st(dt)),!tt&&st({}))};var D=e(90914);const T=Je=>{const{field:Ve,row:Oe,cellProps:Ne,tableStyles:ye}=Je,se=(0,D.k)(Ve,Oe);return p.createElement("div",{...Ne,className:ye.cellContainerText},se&&se.map((ae,ge)=>p.createElement("span",{key:ge,className:ye.cellLink,onClick:ae.onClick},p.createElement("a",{href:ae.href,target:ae.target},ae.title))))};var M=e(32196),O=e(40845),S=e(55852),v=e(29158),x=e(66864),A=e(10534),R=e(37390),B=e(32372);function U({value:Je,onDismiss:Ve,mode:Oe}){let Ne=Je;if((0,t.isString)(Je)){const se=Je.trim();if(se[0]==="{"||se[0]==="["||Oe==="code")try{Je=JSON.parse(Je),Oe="code"}catch{Oe="text"}else Oe="text"}else Ne=JSON.stringify(Je,null," ");let ye=Ne;return Oe==="code"&&(ye=JSON.stringify(Je,null," ")),p.createElement(R.a,{onDismiss:Ve,isOpen:!0,title:"Inspect value"},Oe==="code"?p.createElement(B.B,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(ye&&ye.length)>100,value:ye,readOnly:!0}):p.createElement("pre",null,ye),p.createElement(R.a.ButtonRow,null,p.createElement(A.b,{icon:"copy",getText:()=>ye},"Copy to Clipboard")))}var w=e(88407);function K({field:Je,cell:Ve,previewMode:Oe,showFilters:Ne,onCellFilterAdded:ye}){const[se,ae]=(0,p.useState)(!1),ge=G(Je)==="flex-end",Pe=!!Je.config.custom?.inspect,Re={size:"sm",tooltipPlacement:"top"},Be=(0,p.useCallback)(Xe=>{ye&&ye({key:Je.name,operator:w.mc,value:Ve.value})},[Ve,Je,ye]),_e=(0,p.useCallback)(Xe=>{ye&&ye({key:Je.name,operator:w.Zi,value:Ve.value})},[Ve,Je,ye]);return p.createElement(p.Fragment,null,p.createElement("div",{className:`cellActions${ge?" cellActionsLeft":""}`},p.createElement(x.Gy,{spacing:"xs"},Pe&&p.createElement(v.K,{name:"eye",tooltip:"Inspect value",onClick:()=>{ae(!0)},...Re}),Ne&&p.createElement(v.K,{name:"search-plus",onClick:Be,tooltip:"Filter for value",...Re}),Ne&&p.createElement(v.K,{name:"search-minus",onClick:_e,tooltip:"Filter out value",...Re}))),se&&p.createElement(U,{mode:Oe,value:Ve.value,onDismiss:()=>{ae(!1)}}))}const N=Je=>{const{field:Ve,cell:Oe,tableStyles:Ne,row:ye,cellProps:se,frame:ae,rowStyled:ge}=Je,Pe=!!Ve.config.custom?.inspect,Re=Ve.display(Oe.value),Be=Je.onCellFilterAdded&&Ve.config.filterable,_e=Be&&Oe.value!==void 0||Pe,Xe=be(Ve),tt=!!(0,D.k)(Ve,ye)?.length,at=(0,O.of)(S.Ez),[st,dt]=(0,p.useState)(!1);let ot;const ft=140,yt=()=>{dt(!1)},Tt=()=>{dt(!0)};if(Xe.type===u.ob.Custom){const it=Xe.cellComponent;ot=p.createElement(it,{field:Ve,value:Oe.value,rowIndex:ye.index,frame:ae})}else p.isValidElement(Oe.value)?ot=Oe.value:ot=(0,d.cN)(Re);const Kt=typeof ot=="string",Gt=Re.text.length<=ft&&/\s/.test(Re.text),_t=L(Ne,Xe,Re,Pe,Kt,Gt,ge);if(Kt){let it=se.style?.justifyContent;it==="flex-end"?se.style={...se.style,textAlign:"right"}:it==="center"&&(se.style={...se.style,textAlign:"center"})}return p.createElement("div",{...se,onMouseEnter:_e?Tt:void 0,onMouseLeave:_e?yt:void 0,className:_t},!tt&&(Kt?`${ot}`:p.createElement("div",{className:Ne.cellText},ot)),tt&&p.createElement(y.e,{links:()=>(0,D.k)(Ve,ye)||[]},it=>it.openMenu?p.createElement("button",{className:(0,M.cx)(at,V(Ne,Xe,it.targetClassName)),onClick:it.openMenu},ot):p.createElement("div",{className:V(Ne,Xe,it.targetClassName)},ot)),st&&_e&&p.createElement(K,{...Je,previewMode:"text",showFilters:Be}))};function L(Je,Ve,Oe,Ne=!1,ye=!1,se=!1,ae=!1){let ge,Pe;const Re=rt(Je,Ve,Oe);return ge=Re.textColor,Pe=Re.bgColor,Je.buildCellContainerStyle(ge,Pe,!Ne,ye,se,ae)}function V(Je,Ve,Oe){return Ve.type===u.ob.Auto?(0,M.cx)(Je.cellLink,Oe):(0,M.cx)(Je.cellLinkForColoredCell,Oe)}var F=e(92015),z=e(64136),Y=e(27430);function H(Je){const{cell:Ve,tableStyles:Oe,cellProps:Ne}=Je;let ye="";return Ve.value instanceof Y.A?ye=new z.A().writeGeometry(Ve.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Ve.value!=null&&(ye=`${Ve.value}`),p.createElement("div",{...Ne,className:Oe.cellContainer},p.createElement("div",{className:Oe.cellText,style:{fontFamily:"monospace"}},ye))}const k=10,ee=Je=>{const{field:Ve,cell:Oe,tableStyles:Ne,row:ye,cellProps:se}=Je,ae=Ve.display(Oe.value),ge=!!(0,D.k)(Ve,ye)?.length;return p.createElement("div",{...se,className:Ne.cellContainer},!ge&&p.createElement("img",{src:ae.text,className:Ne.imageCell,alt:""}),ge&&p.createElement(y.e,{style:{height:Ne.cellHeight-k,width:"auto"},links:()=>(0,D.k)(Ve,ye)||[]},Pe=>{const Re=p.createElement("img",{style:{height:Ne.cellHeight-k,width:"auto"},src:ae.text,className:Ne.imageCell,alt:""});return Pe.openMenu?p.createElement("div",{onClick:Pe.openMenu,role:"button",tabIndex:0,onKeyDown:Be=>{Be.key==="Enter"&&Pe.openMenu&&Pe.openMenu(Be)}},Re):Re}))};function ie(Je){const{cell:Ve,tableStyles:Oe,cellProps:Ne,field:ye,row:se}=Je,ae=!!ye.config.custom?.inspect,ge=(0,M.css)({cursor:"pointer",fontFamily:"monospace"});let Pe=Ve.value,Re=Pe;if((0,t.isString)(Pe))try{Pe=JSON.parse(Pe)}catch{}else Re=JSON.stringify(Pe,null," ");const Be=!!(0,D.k)(ye,se)?.length,_e=(0,O.of)(S.Ez);return p.createElement("div",{...Ne,className:ae?Oe.cellContainerNoOverflow:Oe.cellContainer},p.createElement("div",{className:(0,M.cx)(Oe.cellText,ge)},!Be&&p.createElement("div",{className:Oe.cellText},Re),Be&&p.createElement(y.e,{links:()=>(0,D.k)(ye,se)||[]},Xe=>Xe.openMenu?p.createElement(S.$n,{className:(0,M.cx)(_e),onClick:Xe.openMenu},Re):p.createElement(p.Fragment,null,Re))),ae&&p.createElement(K,{...Je,previewMode:"code"}))}var fe=e(14578);function q({row:Je,tableStyles:Ve}){return p.createElement("div",{className:Ve.expanderCell,...Je.getToggleRowExpandedProps()},p.createElement(fe.I,{"aria-label":Je.isExpanded?"Collapse row":"Expand row",name:Je.isExpanded?"angle-down":"angle-right",size:"lg"}))}var Z=e(30355);const J=50;function G(Je){if(!Je)return"flex-start";if(Je.config.custom)switch(Je.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Je.type===o.PU.number?"flex-end":"flex-start"}function ne(Je,Ve,Oe,Ne,ye,se){const ae=[];let ge=0;Ne&&(ae.push({Header:()=>null,id:"expander",Cell:q,width:J,minWidth:J,filter:(Re,Be,_e)=>[],justifyContent:"left",field:Je.fields[0],sortType:"basic"}),Ve-=J);for(const[Re,Be]of Je.fields.entries()){const _e=Be.config.custom||{};if(_e.hidden||Be.type===o.PU.nestedFrames)continue;_e.width?Ve-=_e.width:ge++;const Xe=at=>{switch(at){case o.PU.number:case o.PU.frame:return"number";case o.PU.time:return"basic";default:return"alphanumeric-insensitive"}},tt=te(_e.cellOptions?.type,Be);ae.push({Cell:tt,id:Re.toString(),field:Be,Header:_e.hideHeader?"":(0,m.Ct)(Be,Je),accessor:(at,st)=>Be.values[st],sortType:Xe(Be.type),width:_e.width,minWidth:_e.minWidth??Oe,filter:r()(oe(Be)),justifyContent:G(Be),Footer:(0,F.d)(Re,ye,se)})}let Pe=Ve/ge;for(let Re=ge;Re>0;Re--)for(const Be of ae)!Be.width&&Be.minWidth>Pe&&(Be.width=Be.minWidth,Ve-=Be.width,ge-=1,Pe=Ve/ge);for(const Re of ae)Re.width||(Re.width=Pe),Re.minWidth=50;return ae}function te(Je,Ve){switch(Je){case u.ob.Custom:case u.ob.ColorText:case u.ob.ColorBackground:return N;case u.ob.Image:return ee;case u.ob.Gauge:return f;case u.ob.Sparkline:return Z.a;case u.ob.JSONView:return ie;case u.ob.DataLinks:return T}if(Ve.type===o.PU.geo)return H;if(Ve.type===o.PU.frame){const Oe=Ve.values[0];return(0,i.ci)(Oe)&&(0,l.aH)(Oe)?Z.a:ie}return Ve.type===o.PU.other?ie:N}function oe(Je){return function(Ve,Oe,Ne){return Ve.length===0||!Ne||!Je?Ve:Ve.filter(ye=>{if(!ye.values.hasOwnProperty(Oe))return!1;const se=ue(ye,Je);return Ne.find(ae=>ae.value===se)!==void 0})}}function le(Je,Ve){if(!Ve||Je.length===0)return{};const Oe={};for(let Ne=0;Ne<Je.length;Ne++){const ye=ue(Je[Ne],Ve);Oe[ye||"(Blanks)"]=ye}return Oe}function ue(Je,Ve){if(!Ve||!Je)return"";const Oe=Ve.values[Je.index],Ne=Ve.display?Ve.display(Oe):Oe;return Ve.display?(0,d.cN)(Ne):Ne}function Te(Je){return Object.keys(Je).reduce((Ve,Oe)=>Ve.concat({value:Je[Oe],label:Oe}),[]).sort(he)}function he(Je,Ve){return Je.label===void 0&&Ve.label===void 0?0:Je.label===void 0&&Ve.label!==void 0?-1:Je.label!==void 0&&Ve.label===void 0?1:Je.label<Ve.label?-1:Je.label>Ve.label?1:0}function re(Je,Ve){return Ve?Je.filter(Oe=>Ve.some(Ne=>Ne.value===Oe.value)):[]}function De(Je,Ve,Oe){return String(Je.values[Oe]).localeCompare(String(Ve.values[Oe]),void 0,{sensitivity:"base"})}function Fe(Je,Ve,Oe){const Ne=Ee(Je.values[Oe]),ye=Ee(Ve.values[Oe]);return Ne===ye?0:Ne>ye?1:-1}function Ee(Je){return(0,i.LI)(Je)?Je.value??Number.NEGATIVE_INFINITY:Je==null||Je===""||isNaN(Je)?Number.NEGATIVE_INFINITY:typeof Je=="number"?Je:Number(Je)}function Me(Je,Ve,Oe,Ne){return Ue(Je),Je.map((ye,se)=>{if(ye?.field?.type!==o.PU.number)return se===0&&Oe.reducer&&Oe.reducer.length>0?c.AS.get(Oe.reducer[0]).name:void 0;let ae=(0,t.clone)(ye.field);return ae.values=Ve[ye.id],ae.state=void 0,ye.field=ae,Oe.fields&&Oe.fields.length>0?Oe.fields.find(Pe=>Pe===ye?.field?.name)?ze(ye.field,Oe.reducer,Ne):void 0:ze(ye.field,Oe.reducer||[],Ne)})}function ze(Je,Ve,Oe){const Ne=Ve[0];if(Ne===void 0)return"";const ye=Je.display??(0,g.J)({field:Je,theme:Oe}),se=(0,c.Nw)({field:Je,reducers:Ve})[Ne];return c.AS.get(Ne).preservesUnits?(0,d.cN)(ye(se)):(0,d.cN)({text:se})}function xe(Je){const Ve=[];for(const Oe in Je)for(const[Ne,ye]of Object.entries(Je[Oe].values))Ve[Ne]===void 0&&(Ve[Ne]=[]),Ve[Ne].push(ye);return Ve}const We={type:u.ob.Auto};function be(Je){return Je.config.custom?.displayMode?pe(Je.config.custom?.displayMode):Je.config.custom?.cellOptions?Je.config.custom.cellOptions:We}function pe(Je){switch(Je){case"basic":case"gradient-gauge":case"lcd-gauge":let Ve=u.eX.Basic;return Je==="gradient-gauge"?Ve=u.eX.Gradient:Je==="lcd-gauge"&&(Ve=u.eX.Lcd),{type:u.ob.Gauge,mode:Ve};case"color-background":case"color-background-solid":let Oe=u.Wq.Basic;return Je==="color-background"&&(Oe=u.Wq.Gradient),{type:u.ob.ColorBackground,mode:Oe};default:return{type:Je}}}function Ue(Je){const Ve=Je.findIndex((Oe,Ne)=>Oe?.id!==String(Ne));Ve===-1||Je[Ve]?.id==="expander"||(Je.splice(Ve,0,{id:String(Ve)}),Ue(Je))}function we(Je,Ve,Oe){let Ne=Je.state?.alignmentFactors;if(Ne)return Ne.text.length<Ve.text.length&&(Ne.text=Ve.text),Ne;{Ne={...Ve};const ye=Math.min(Je.values.length,Oe+1e3);for(let se=Oe+1;se<ye;se++)Je.display(Je.values[se]).text.length>Ne.text.length&&(Ne.text=Ve.text);return Je.state?Je.state.alignmentFactors=Ne:Je.state={alignmentFactors:Ne},Ne}}function je(Je,Ve,Oe){return Math.abs(Math.floor(Je)-Ve)<Oe}function He(Je){let Ve=-Number.MAX_VALUE,Oe=Number.MAX_VALUE;if(Je.values.length<2)return 0;for(let Ne=0;Ne<Je.values.length;Ne++){const ye=Je.values[Ne];ye>Ve&&(Ve=ye),ye<Oe&&(Oe=ye)}return(Ve-Oe)/Je.values.length}function rt(Je,Ve,Oe){const Ne=Je.theme.isDark?1:-.7;let ye,se;if(Ve.type===u.ob.ColorText)ye=Oe.color;else if(Ve.type===u.ob.ColorBackground){const ae=Ve.mode??u.Wq.Gradient;if(ae===u.Wq.Basic)ye=(0,E.mZ)(Oe.color,Je.theme.isDark),se=(0,s.A)(Oe.color).setAlpha(.9).toRgbString();else if(ae===u.Wq.Gradient){const ge=(0,s.A)(Oe.color).darken(10*Ne).spin(5);ye=(0,E.mZ)(Oe.color,Je.theme.isDark),se=`linear-gradient(120deg, ${ge.toRgbString()}, ${Oe.color})`}}return{textColor:ye,bgColor:se}}},14746:(Q,I,e)=>{"use strict";e.d(I,{b:()=>g});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(72436),m=e(40845),i=e(3911),l=e(14578),d=e(21744);class c extends s.PureComponent{constructor(p){super(p),this.readCSV=(0,n.debounce)(()=>{const{config:h}=this.props,{text:P}=this.state;this.setState({data:(0,o.Jh)(P,{config:h})})},150),this.onTextChange=h=>{this.setState({text:h.target.value})};const{text:b,config:a}=p;this.state={text:b,data:(0,o.Jh)(b,{config:a})}}componentDidUpdate(p,b){const{text:a}=this.state;(a!==b.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==a&&this.setState({text:this.props.text}),this.state.data!==b.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:b,theme:a}=this.props,{data:h}=this.state,P=u(a);return s.createElement("div",{className:P.tableInputCsv},s.createElement(d.f,{style:{width:p,height:b},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:P.textarea}),h&&s.createElement("footer",{className:P.footer},h.map((y,C)=>s.createElement("span",{key:C},"Rows:",y.length,", Columns:",y.fields.length," \xA0",s.createElement(l.I,{name:"check-circle"})))))}}const g=(0,m.cV)(c);g.displayName="TableInputCSV";const u=(0,i.N)(E=>({tableInputCsv:(0,t.css)({position:"relative"}),textarea:(0,t.css)({height:"100%",width:"100%"}),footer:(0,t.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:E.colors.success.main,padding:`1px ${E.spacing(.5)}`,fontSize:"80%"})}))},53402:(Q,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(83195),s=e(40845);const o=({value:i})=>{const l=(0,s.of)(m);return n.createElement("span",{className:l.counter},(0,r.Hg)(i,0).text)},m=i=>({counter:(0,t.css)({label:"counter",marginLeft:i.spacing(1),borderRadius:i.spacing(3),backgroundColor:i.colors.action.hover,padding:i.spacing(.25,1),color:i.colors.text.secondary,fontWeight:i.typography.fontWeightMedium,fontSize:i.typography.size.sm})})},40675:(Q,I,e)=>{"use strict";e.d(I,{o:()=>d});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(16797),m=e(55852),i=e(14578),l=e(53402);const d=n.forwardRef(({label:g,active:u,icon:E,onChangeTab:p,counter:b,suffix:a,className:h,href:P,...y},C)=>{const f=(0,s.of)(c),D=(0,s.of)(m.my),T=()=>n.createElement(n.Fragment,null,E&&n.createElement(i.I,{name:E}),g,typeof b=="number"&&n.createElement(l.p,{value:b}),a&&n.createElement(a,{className:f.suffix})),O={className:(0,t.cx)(D,f.link,u?f.activeStyle:f.notActive),...y,onClick:p,"aria-label":y["aria-label"]||r.Tp.components.Tab.title(g),role:"tab","aria-selected":u};return P?n.createElement("div",{className:f.item},n.createElement("a",{...O,href:P,ref:C},T())):n.createElement("div",{className:f.item},n.createElement("button",{...O,type:"button",ref:C},T()))});d.displayName="Tab";const c=g=>({item:(0,t.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:g.spacing(.5)}),link:(0,t.css)({color:g.colors.text.secondary,padding:g.spacing(1,1.5,.5),borderRadius:g.shape.radius.default,display:"block",height:"100%",svg:{marginRight:g.spacing(1)},"&:focus-visible":(0,o.getFocusStyles)(g),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:g.shape.radius.default,bottom:0}}),notActive:(0,t.css)({"a:hover, &:hover, &:focus":{color:g.colors.text.primary,"&::before":{backgroundColor:g.colors.action.hover}}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:g.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:g.colors.gradients.brandHorizontal}}),suffix:(0,t.css)({marginLeft:g.spacing(1)})})},40980:(Q,I,e)=>{"use strict";e.d(I,{J:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:i,...l})=>{const d=(0,r.of)(o);return n.createElement("div",{...l,className:(0,t.cx)(d.tabContent,i)},m)},o=m=>({tabContent:(0,t.css)({background:m.colors.background.primary})})},63021:(Q,I,e)=>{"use strict";e.d(I,{U:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=n.forwardRef(({children:m,className:i,hideBorder:l=!1},d)=>{const c=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(c.tabsWrapper,l&&c.noBorder,i),ref:d},n.createElement("div",{className:c.tabs,role:"tablist"},m))}),o=m=>({tabsWrapper:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,t.css)({borderBottom:0}),tabs:(0,t.css)({position:"relative",display:"flex",height:`${m.components.menuTabs.height}px`,alignItems:"center"})});s.displayName="TabsBar"},90685:(Q,I,e)=>{"use strict";e.d(I,{s:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(14578),m=e(53402);const i=n.forwardRef(({label:d,active:c,icon:g,counter:u,className:E,suffix:p,onChangeTab:b,href:a,...h},P)=>{const y=(0,s.of)(l),C=()=>n.createElement(n.Fragment,null,g&&n.createElement(o.I,{name:g}),d,typeof u=="number"&&n.createElement(m.p,{value:u}),p&&n.createElement(p,{className:y.suffix})),f=(0,t.cx)(y.link,c&&y.activeStyle);return n.createElement("a",{href:a,className:f,...h,onClick:b,"aria-label":h["aria-label"]||r.Tp.components.Tab.title(d),role:"tab","aria-selected":c,ref:P},C())});i.displayName="Tab";const l=d=>({link:(0,t.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:d.colors.text.primary,svg:{marginRight:d.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:d.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:d.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,t.css)({marginLeft:d.spacing(1)})})},78369:(Q,I,e)=>{"use strict";e.d(I,{v:()=>c});var t=e(32196),n=e(96540),r=e(70255),s=e(40845),o=e(69613),m=e(72129),i=e(14578);const l=(0,n.forwardRef)(({name:E,onClick:p,icon:b,className:a,colorIndex:h,...P},y)=>{const C=(0,s.$j)(),f=u(C,E,h),D=M=>{M.preventDefault(),M.stopPropagation(),p?.(E,M)},T=(0,t.cx)(f.wrapper,a,{[f.hover]:p!==void 0});return p?n.createElement("button",{...P,className:T,onClick:D,ref:y},b&&n.createElement(i.I,{name:b}),E):n.createElement("span",{...P,className:T,ref:y},b&&n.createElement(i.I,{name:b}),E)});l.displayName="Tag";const d=({rootProps:E})=>{const p=(0,s.of)(g);return n.createElement(r.A,{width:60,height:22,containerClassName:p.container,...E})},c=(0,m.j)(l,d),g=()=>({container:(0,t.css)({lineHeight:1})}),u=(E,p,b)=>{let a;return b===void 0?a=(0,o.MC)(p):a=(0,o.yC)(b),{wrapper:(0,t.css)({appearance:"none",borderStyle:"none",fontWeight:E.typography.fontWeightMedium,fontSize:E.typography.size.sm,lineHeight:E.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:a.color,color:E.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:E.shape.radius.default}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},64149:(Q,I,e)=>{"use strict";e.d(I,{L:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(72129),o=e(78369);const m=(0,n.memo)((0,n.forwardRef)(({displayMax:g,tags:u,icon:E,onClick:p,className:b,getAriaLabel:a,getColorIndex:h},P)=>{const y=(0,r.$j)(),C=c(y,!!(g&&g>0)),f=u.length,D=g?u.slice(0,g):u;return n.createElement("ul",{className:(0,t.cx)(C.wrapper,b),"aria-label":"Tags",ref:P},D.map((T,M)=>n.createElement("li",{className:C.li,key:T},n.createElement(o.v,{name:T,icon:E,onClick:p,"aria-label":a?.(T,M),"data-tag-id":M,colorIndex:h?.(T,M)}))),g&&g>0&&f-g>0&&n.createElement("span",{className:C.moreTagsLabel},"+ ",f-g))}));m.displayName="TagList";const i=({rootProps:g})=>{const u=(0,r.of)(d);return n.createElement("div",{className:u.container,...g},n.createElement(o.v.Skeleton,null),n.createElement(o.v.Skeleton,null))},l=(0,s.j)(m,i),d=g=>({container:(0,t.css)({display:"flex",gap:g.spacing(1)})}),c=(g,u)=>({wrapper:(0,t.css)({position:"relative",alignItems:u?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:u?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,t.css)({color:g.colors.text.secondary,fontSize:g.typography.size.sm}),li:(0,t.css)({listStyle:"none"})})},79924:(Q,I,e)=>{"use strict";e.d(I,{u:()=>c});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(10354),m=e(69613),i=e(29158);const l=({name:u,disabled:E,onRemove:p})=>{const{color:b,borderColor:a}=(0,n.useMemo)(()=>(0,m.MC)(u),[u]),h=(0,r.of)(d);return n.createElement("li",{className:h.itemStyle,style:{backgroundColor:b,borderColor:a}},n.createElement("span",{className:h.nameStyle},u),n.createElement(i.K,{name:"times",size:"lg",disabled:E,tooltip:`Remove "${u}" tag`,onClick:()=>p(u),className:h.buttonStyles}))},d=u=>{const E=u.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${E}px`,lineHeight:`${E-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:u.shape.radius.default,padding:`0 ${u.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:u.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},c=({placeholder:u="New tag (enter key to add)",tags:E=[],onChange:p,width:b,className:a,disabled:h,addOnBlur:P,invalid:y,id:C})=>{const[f,D]=(0,n.useState)(""),T=(0,r.of)(g),M=(0,r.$j)(),O=(0,n.useCallback)(R=>{D(R.target.value)},[]),S=R=>{p(E.filter(B=>B!==R))},v=R=>{R?.preventDefault(),E.includes(f)||p(E.concat(f)),D("")},x=()=>{P&&f&&v()},A=R=>{R.key==="Enter"&&f!==""&&v(R)};return n.createElement("div",{className:(0,t.cx)(T.wrapper,a,b?(0,t.css)({width:M.spacing(b)}):"")},n.createElement(o.p,{id:C,disabled:h,placeholder:u,onChange:O,value:f,onKeyDown:A,onBlur:x,invalid:y,suffix:n.createElement(s.$n,{fill:"text",className:T.addButtonStyle,onClick:v,size:"md",disabled:f.length<=0},"Add")}),E?.length>0&&n.createElement("ul",{className:T.tags},E.map(R=>n.createElement(l,{key:R,name:R,onRemove:S,disabled:h}))))},g=u=>({wrapper:(0,t.css)({minHeight:u.spacing(4),display:"flex",flexDirection:"column",gap:u.spacing(1),flexWrap:"wrap"}),tags:(0,t.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:u.spacing(.5)}),addButtonStyle:(0,t.css)({margin:`0 -${u.spacing(1)}`})})},94753:(Q,I,e)=>{"use strict";e.d(I,{E:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(65848),o=e(56034);const m=n.forwardRef(({childElement:c,children:g},u)=>{const[E,p]=(0,n.useState)(!1),b=(0,n.useRef)(null);(0,n.useImperativeHandle)(u,()=>b.current);const a=(0,n.useMemo)(()=>new ResizeObserver(P=>{for(const y of P)y.target.clientWidth&&y.target.scrollWidth&&(y.target.scrollWidth>y.target.clientWidth&&p(!0),y.target.scrollWidth<=y.target.clientWidth&&p(!1))}),[]);(0,n.useEffect)(()=>{const{current:P}=b;return P&&a.observe(P),()=>{a.disconnect()}},[p,a]);const h=P=>typeof P=="string"?P:s.renderToStaticMarkup(n.createElement(n.Fragment,null,P)).replace(/(<([^>]+)>)/gi,"");return E?n.createElement(o.m,{ref:b,content:h(g)},c(void 0)):c(b)});m.displayName="TruncatedText";var i=e(71356);const l=n.forwardRef(({element:c="span",variant:g,weight:u,color:E,truncate:p,italic:b,textAlignment:a,children:h,...P},y)=>{const C=(0,r.of)(d,c,g,E,u,p,b,a),f=D=>(0,n.createElement)(c,{...P,style:void 0,className:C,ref:D},h);return!p||c==="span"?f(void 0):n.createElement(m,{childElement:f,children:h,ref:y})});l.displayName="Text";const d=(c,g,u,E,p,b,a,h)=>(0,t.css)([{margin:0,padding:0,...(0,i.d$)(c,g,u)},u&&{...c.typography[u]},E&&{color:(0,i.vT)(E,c)},p&&{fontWeight:(0,i.iV)(p,c)},b&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a&&{fontStyle:"italic"},h&&{textAlign:h}])},71356:(Q,I,e)=>{"use strict";e.d(I,{d$:()=>r,iV:()=>t,vT:()=>n});const t=(s,o)=>{switch(s){case"bold":return o.typography.fontWeightBold;case"medium":return o.typography.fontWeightMedium;case"light":return o.typography.fontWeightLight;case"regular":case void 0:return o.typography.fontWeightRegular}},n=(s,o)=>{switch(s){case"error":return o.colors.error.text;case"success":return o.colors.success.text;case"info":return o.colors.info.text;case"warning":return o.colors.warning.text;default:return s?o.colors.text[s]:void 0}},r=(s,o,m)=>{if(m)return s.typography[m];switch(o){case"span":return;case"h1":return s.typography.h1;case"h2":return s.typography.h2;case"h3":return s.typography.h3;case"h4":return s.typography.h4;case"h5":return s.typography.h5;case"h6":return s.typography.h6;default:return s.typography.body}}},21744:(Q,I,e)=>{"use strict";e.d(I,{f:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(87266);const o=n.forwardRef(({invalid:i,className:l,...d},c)=>{const g=(0,r.of)(m,i);return n.createElement("textarea",{...d,className:(0,t.cx)(g.textarea,l),ref:c})}),m=(i,l=!1)=>({textarea:(0,t.cx)((0,s.Xb)(i),(0,s.gm)(i),(0,t.css)({display:"block",borderRadius:i.shape.radius.default,padding:`${i.spacing.gridSize/4}px ${i.spacing.gridSize}px`,width:"100%",borderColor:l?i.colors.error.border:i.components.input.borderColor}))});o.displayName="TextArea"},60782:(Q,I,e)=>{"use strict";e.d(I,{G:()=>c});var t=e(32196),n=e(95361),r=e(18491),s=e(34743),o=e(36376),m=e(96540),i=e(40845),l=e(18976),d=e(29158);const c=m.memo(({children:u,theme:E="info",placement:p="auto",content:b,title:a,closeButton:h=!0,onClose:P,footer:y,fitContent:C=!1,onOpen:f,show:D})=>{const T=(0,m.useRef)(null),M=(0,i.$j)(),O=(0,i.of)(g),S=O[E],[v,x]=(0,m.useState)(D),A=D??v,R=[(0,n.cY)(8),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)(),(0,s.UE)({element:T})],{context:B,refs:U,floatingStyles:w}=(0,o.we)({open:A,placement:(0,l.O)(p),onOpenChange:F=>{D===void 0&&x(F),F?f?.():P?.()},middleware:R,whileElementsMounted:r.ll,strategy:"fixed"}),K=(0,o.kp)(B),N=(0,o.s9)(B),{getReferenceProps:L,getFloatingProps:V}=(0,o.bv)([N,K]);return m.createElement(m.Fragment,null,m.cloneElement(u,{ref:U.setReference,tabIndex:0,"aria-expanded":A,...L()}),A&&m.createElement(o.s3,{context:B,modal:!1,closeOnFocusOut:!1},m.createElement("div",{"data-testid":"toggletip-content",className:(0,t.cx)(S.container,{[O.fitContent]:C}),ref:U.setFloating,style:w,...V()},m.createElement(o.ie,{strokeWidth:.3,stroke:M.colors.border.weak,className:S.arrow,ref:T,context:B}),!!a&&m.createElement("div",{className:S.header},a),h&&m.createElement("div",{className:S.headerClose},m.createElement(d.K,{"aria-label":"Close",name:"times","data-testid":"toggletip-header-close",onClick:()=>{x(!1),P?.()}})),m.createElement("div",{className:S.body},(typeof b=="string"||m.isValidElement(b))&&b,typeof b=="function"&&b({})),!!y&&m.createElement("div",{className:S.footer},y))))});c.displayName="Toggletip";const g=u=>{const E=(0,l.f)(u,u.colors.background.primary,u.colors.border.weak,u.components.tooltip.text,{topBottom:2,rightLeft:2}),p=(0,l.f)(u,u.colors.error.main,u.colors.error.main,u.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:E,error:p,fitContent:(0,t.css)({maxWidth:"fit-content"})}}},27746:(Q,I,e)=>{"use strict";e.d(I,{I:()=>c});var t=e(32196),n=e(96540),r=e(8887),s=e(13544),o=e(40845),m=e(16797),i=e(55852),l=e(14578),d=e(56034);const c=(0,n.forwardRef)(({tooltip:p,icon:b,iconSize:a,className:h,children:P,imgSrc:y,imgAlt:C,fullWidth:f,isOpen:D,narrow:T,variant:M="default",iconOnly:O,"aria-label":S,isHighlighted:v,...x},A)=>{const R=(0,o.of)(E),B=(0,t.cx)({[R.button]:!0,[R.buttonFullWidth]:f,[R.narrow]:T},R[M],h),U=(0,t.cx)({[R.content]:!0,[R.contentWithIcon]:!!b,[R.contentWithRightIcon]:D!==void 0}),w=n.createElement("button",{ref:A,className:B,"aria-label":g(S,p),"aria-expanded":D,...x},u(b,a),y&&n.createElement("img",{className:R.img,src:y,alt:C??""}),P&&!O&&n.createElement("div",{className:U},P),D===!1&&n.createElement(l.I,{name:"angle-down"}),D===!0&&n.createElement(l.I,{name:"angle-up"}),v&&n.createElement("div",{className:R.highlight}));return p?n.createElement(d.m,{ref:A,content:p,placement:"bottom"},w):w});c.displayName="ToolbarButton";function g(p,b){return p||(b?s.Tp.components.PageToolbar.item(b):void 0)}function u(p,b){return p?(0,r.n6)(p)?n.createElement(l.I,{name:p,size:`${b||"lg"}`}):p:null}const E=p=>{const b=(0,i.U_)(p,"primary","solid"),a=(0,i.U_)(p,"destructive","solid"),h=(0,t.css)({color:p.colors.text.primary,background:p.colors.secondary.main,"&:hover":{color:p.colors.text.primary,background:p.colors.secondary.shade,border:`1px solid ${p.colors.border.medium}`}});return{button:(0,t.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:p.spacing(p.components.height.md),padding:p.spacing(0,1),borderRadius:p.shape.radius.default,lineHeight:`${p.components.height.md*p.spacing.gridSize-2}px`,fontWeight:p.typography.fontWeightMedium,border:`1px solid ${p.colors.secondary.border}`,whiteSpace:"nowrap",transition:p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,m.getFocusStyles)(p),zIndex:1},"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(p),"&:hover":{boxShadow:p.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:p.colors.action.disabledOpacity,background:p.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:p.colors.text.disabled,background:p.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,t.css)({color:p.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:p.colors.text.primary,background:p.colors.background.secondary}}),canvas:h,active:(0,t.cx)(h,(0,t.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:p.shape.radius.default,backgroundImage:p.colors.gradients.brandHorizontal}})),primary:(0,t.css)(b),destructive:(0,t.css)(a),narrow:(0,t.css)({padding:p.spacing(0,.5)}),img:(0,t.css)({width:"16px",height:"16px",marginRight:p.spacing(1)}),buttonFullWidth:(0,t.css)({flexGrow:1}),content:(0,t.css)({flexGrow:1}),contentWithIcon:(0,t.css)({display:"none",paddingLeft:p.spacing(1),[`@media ${m.mediaUp(p.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,t.css)({paddingRight:p.spacing(.5)}),highlight:(0,t.css)({backgroundColor:p.colors.success.main,borderRadius:p.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},15068:(Q,I,e)=>{"use strict";e.d(I,{U:()=>d});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(40845),i=e(17464),l=e(27746);const d=(0,o.forwardRef)(({alignment:g="left",className:u,children:E,...p},b)=>{const a=o.Children.toArray(E).filter(A=>A!=null),[h,P]=(0,o.useState)(Array(a.length).fill(!1)),y=(0,o.useRef)(null),[C,f]=(0,o.useState)(!1),D=(0,o.useRef)(null),T=(0,o.createRef)(),{overlayProps:M}=(0,s.e)({onClose:()=>f(!1),isDismissable:!0,isOpen:C,shouldCloseOnInteractOutside:A=>{const R=(0,i.gF)();return!D.current?.contains(A)&&!R.contains(A)}},T),{dialogProps:O}=(0,n.s)({},T),S=(0,m.$j)(),v=g==="left"?h.indexOf(!1)-1:h.length,x=c(S,v,g);return(0,o.useLayoutEffect)(()=>{const A=new IntersectionObserver(R=>{R.forEach(B=>{if(B.target instanceof HTMLElement&&B.target.parentNode){const U=Array.prototype.indexOf.call(B.target.parentNode.children,B.target);P(w=>{const K=[...w];return K[U]=B.isIntersecting,K})}})},{threshold:1,root:y.current});return y.current&&Array.from(y.current.children).forEach(R=>{R instanceof HTMLElement&&R!==D.current&&A.observe(R)}),()=>A.disconnect()},[E]),o.createElement("div",{ref:y,className:(0,t.cx)(x.container,u),...p},a.map((A,R)=>o.createElement("div",{key:R,style:{order:R,visibility:h[R]?"visible":"hidden"},className:x.childWrapper},A)),h.includes(!1)&&o.createElement("div",{ref:D,className:x.overflowButton},o.createElement(l.I,{variant:C?"active":"default",tooltip:"Show more items",onClick:()=>f(!C),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),C&&o.createElement(r.n1,{contain:!0,autoFocus:!0},o.createElement("div",{className:x.overflowItems,ref:T,...M,...O},a.map((A,R)=>!h[R]&&A)))))});d.displayName="ToolbarButtonRow";const c=(g,u,E)=>({overflowButton:(0,t.css)({order:u}),overflowItems:(0,t.css)({alignItems:"center",backgroundColor:g.colors.background.primary,borderRadius:g.shape.radius.default,boxShadow:g.shadows.z2,display:"flex",flexWrap:"wrap",gap:g.spacing(1),marginTop:g.spacing(1),maxWidth:"80vw",padding:g.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:g.zIndex.dropdown}),container:(0,t.css)({alignItems:"center",display:"flex",gap:g.spacing(1),justifyContent:E==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:g.spacing(1)})})},13840:(Q,I,e)=>{"use strict";e.d(I,{A:()=>d});var t=e(95361),n=e(18491),r=e(34743),s=e(36376),o=e(96540),m=e(40845),i=e(18976),l=e(17464);function d({content:c,show:g,placement:u,className:E,wrapperClassName:p,referenceElement:b,renderArrow:a,...h}){const P=(0,m.$j)(),y=(0,o.useRef)(null),C=[(0,t.cY)(8),(0,n.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.BN)()];a&&C.push((0,r.UE)({element:y}));const{context:f,refs:D,floatingStyles:T}=(0,s.we)({open:g,placement:(0,i.O)(u),middleware:C,whileElementsMounted:n.ll,strategy:"fixed"});(0,o.useLayoutEffect)(()=>{D.setReference(b)},[b,D]);const{styles:M}=(0,s.DL)(f,{initial:()=>({opacity:0}),duration:P.transitions.duration.enteringScreen});return g?o.createElement(l.ZL,null,o.createElement("div",{ref:D.setFloating,style:{...T,...M},className:p,...h},o.createElement("div",{className:E},a&&o.createElement(s.ie,{fill:P.colors.border.weak,ref:y,context:f}),typeof c=="string"&&c,o.isValidElement(c)&&o.cloneElement(c),typeof c=="function"&&c({})))):void 0}},95868:(Q,I,e)=>{"use strict";e.d(I,{I:()=>n});var t=e(96540);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:o,placement:m="auto"}=this.props,{show:i}=this.state;return s(this.showPopper,this.hidePopper,{show:i,placement:m,content:o})}}},56034:(Q,I,e)=>{"use strict";e.d(I,{m:()=>c});var t=e(95361),n=e(18491),r=e(34743),s=e(36376),o=e(96540),m=e(13544),i=e(40845),l=e(18976),d=e(17464);const c=o.forwardRef(({children:u,theme:E,interactive:p,show:b,placement:a,content:h},P)=>{const y=(0,o.useRef)(null),[C,f]=(0,o.useState)(b),D=b??C,T=[(0,t.cY)(8),(0,n.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.BN)(),(0,r.UE)({element:y})],{context:M,refs:O,floatingStyles:S}=(0,s.we)({open:D,placement:(0,l.O)(a),onOpenChange:f,middleware:T,whileElementsMounted:n.ll}),v=(0,o.useId)(),x=(0,s.Mk)(M,{delay:{close:p?100:0},move:!1}),A=(0,s.iQ)(M),R=(0,s.s9)(M),{getReferenceProps:B,getFloatingProps:U}=(0,s.bv)([R,x,A]),w=typeof h=="function",N=(0,i.of)(g)[E??"info"],L=(0,o.useCallback)(F=>{O.setReference(F),typeof P=="function"?P(F):P&&(P.current=F)},[P,O]),V="aria-label"in u.props&&u.props["aria-label"]===h;return o.createElement(o.Fragment,null,o.cloneElement(u,{ref:L,tabIndex:0,"aria-describedby":!V&&D?v:void 0,...B()}),D&&o.createElement(d.ZL,null,o.createElement("div",{ref:O.setFloating,style:S,...U()},o.createElement(s.ie,{className:N.arrow,ref:y,context:M}),o.createElement("div",{"data-testid":m.Tp.components.Tooltip.container,id:v,role:"tooltip",className:N.container},typeof h=="string"&&h,o.isValidElement(h)&&o.cloneElement(h),w&&h({})))))});c.displayName="Tooltip";const g=u=>{const E=(0,l.f)(u,u.components.tooltip.background,u.components.tooltip.background,u.components.tooltip.text,{topBottom:.5,rightLeft:1}),p=(0,l.f)(u,u.colors.error.main,u.colors.error.main,u.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:E,"info-alt":E,error:p}}},5313:(Q,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(96540);function n(s,o){const m=[];return s.forEach(i=>{m.push(i.start,i.end+1)}),m[0]!==0&&m.unshift(0),m[m.length-1]!==o&&m.push(o),m}const r=s=>{let{highlightParts:o,text:m,highlightClassName:i}=s;if(!o?.length)return null;let l=[],d=n(o,m.length),c=o[0].start===0;for(let g=1;g<d.length;g++){let u=d[g-1],E=d[g];l.push((0,t.createElement)(c?"mark":"span",{key:g-1,className:c?i:void 0},m.substring(u,E))),c=!c}return t.createElement("div",null,l)}},2056:(Q,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(96540),n=e(83195),r=e(3988);function s(m){return`Custom unit: ${m}`}class o extends t.PureComponent{constructor(){super(...arguments),this.onChange=i=>{this.props.onChange(i.value)}}render(){const{value:i,width:l}=this.props;let d;const g=(0,n.Ke)().map(u=>{const E=u.submenu.map(p=>{const b={label:p.text,value:p.value};return p.value===i&&(d=b),b});return{label:u.text,value:u.text,items:E}});return i&&!d&&(d={value:i,label:i}),t.createElement(r.v,{width:l,initialValue:d&&d.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:g,placeholder:"Choose",isClearable:!0,onSelect:this.props.onChange})}}},12942:(Q,I,e)=>{"use strict";e.d(I,{e:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=({src:i,alt:l,width:d,height:c})=>{const g=(0,r.of)(m,d,c);return n.createElement("img",{className:g.image,src:i,alt:l})},m=(i,l=3,d=3)=>({image:(0,t.css)([(0,s.Y)(i,l,c=>({width:i.spacing(c)})),(0,s.Y)(i,d,c=>({height:i.spacing(c)})),{borderRadius:i.shape.radius.circle}])})},99635:(Q,I,e)=>{"use strict";e.d(I,{n:()=>l});var t=e(32196),n=e(96540),r=e(47232),s=e(40845),o=e(56034);const m=g=>{const E=(0,r.KQ)(g).diff((0,r.KQ)(),"hours",!1);return`Active last ${(Math.floor(-E/24)+1)*24}h`},i=g=>{if(!g)return"";const[u,E]=g.split(" ");return`${u?.[0]??""}${E?.[0]??""}`.toUpperCase()},l=({userView:g,className:u,children:E,onClick:p,showTooltip:b=!0})=>{const{user:a,lastActiveAt:h}=g,P=(0,r.KQ)(h).diff((0,r.KQ)(),"minutes",!0)>=-15,y=(0,s.$j)(),C=(0,n.useMemo)(()=>c(y,P),[y,P]),f=n.createElement("button",{type:"button",onClick:p,className:(0,t.cx)(C.container,p&&C.pointer,u),"aria-label":`${a.name} icon`},E?n.createElement("div",{className:(0,t.cx)(C.content,C.textContent)},E):a.avatarUrl?n.createElement("img",{className:C.content,src:a.avatarUrl,alt:`${a.name} avatar`}):n.createElement("div",{className:(0,t.cx)(C.content,C.textContent)},i(a.name)));if(b){const D=n.createElement("div",{className:C.tooltipContainer},n.createElement("div",{className:C.tooltipName},a.name),n.createElement("div",{className:C.tooltipDate},P?n.createElement("div",{className:C.dotContainer},n.createElement("span",null,"Active last 15m"),n.createElement("span",{className:C.dot})):m(h)));return n.createElement(o.m,{content:D},f)}else return f},d=g=>`0 0 0 1px ${g}`,c=(g,u)=>{const E=u?g.colors.primary.main:g.colors.border.medium,p=u?g.colors.primary.text:g.colors.border.strong;return{container:(0,t.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:g.shape.radius.circle,"& > *":{borderRadius:g.shape.radius.circle}}),content:(0,t.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${g.colors.background.primary} solid`,boxShadow:d(E),backgroundClip:"padding-box","&:hover":{boxShadow:d(p)}}),textContent:(0,t.css)({background:g.colors.background.primary,padding:0,color:g.colors.text.secondary,textAlign:"center",fontSize:g.typography.size.sm,"&:focus":{boxShadow:d(E)}}),tooltipContainer:(0,t.css)({textAlign:"center",padding:g.spacing(0,1)}),tooltipName:(0,t.css)({fontWeight:g.typography.fontWeightBold}),tooltipDate:(0,t.css)({fontWeight:g.typography.fontWeightRegular}),dotContainer:(0,t.css)({display:"flex",alignItems:"center"}),dot:(0,t.css)({height:"6px",width:"6px",backgroundColor:g.colors.primary.main,borderRadius:g.shape.radius.circle,display:"inline-block",marginLeft:g.spacing(1)}),pointer:(0,t.css)({cursor:"pointer"})}}},51986:(Q,I,e)=>{"use strict";e.d(I,{i:()=>m});var t=e(96540),n=e(13544),r=e(40845),s=e(55852),o=e(88323);function m({"aria-label":i,label:l,icon:d,options:c,onChange:g,variant:u,minWidth:E=16,size:p="sm",isFullWidth:b=!0,menuPlacement:a,fill:h,buttonCss:P}){const[y,C]=(0,t.useState)(!1),f=(0,r.$j)();return t.createElement(t.Fragment,null,!y&&t.createElement(s.$n,{size:p||"sm",className:P,icon:d||"plus",onClick:()=>C(!0),variant:u,fill:h,fullWidth:b,"data-testid":n.Tp.components.ValuePicker.button(i??l)},l),y&&t.createElement("span",{style:{minWidth:f.spacing(E),flexGrow:b?1:void 0}},t.createElement(o.l6,{placeholder:l,options:c,"aria-label":n.Tp.components.ValuePicker.select(i??l),isOpen:!0,onCloseMenu:()=>C(!1),autoFocus:!0,onChange:D=>{C(!1),g(D)},menuPlacement:a})))}},67266:(Q,I,e)=>{"use strict";e.d(I,{KU:()=>i});var t=e(32196),n=e(96540),r=e(49185),s=e(40845),o=e(16797),m=e(40276);const i=({width:c,height:g,legend:u,children:E})=>{const p=(0,s.$j)(),b=(0,s.of)(l),a={display:"flex",width:`${c}px`,height:`${g}px`},[h,P]=(0,r.A)();if(!u)return n.createElement(n.Fragment,null,n.createElement("div",{style:a,className:b.viz},E(c,g)));let{placement:y,maxHeight:C="35%",maxWidth:f="60%"}=u.props;document.body.clientWidth<p.breakpoints.values.lg&&(y="bottom");let D=null;const T={};switch(y){case"bottom":a.flexDirection="column",T.maxHeight=C,P.height&&(D={width:c,height:g-P.height});break;case"right":a.flexDirection="row",T.maxWidth=f,P.width&&(D={width:c-P.width,height:g}),u.props.width&&(T.width=u.props.width,D={width:c-u.props.width,height:g});break}return D?.width===0&&(D.width=c),D?.height===0&&(D.height=g),n.createElement("div",{style:a},n.createElement("div",{className:b.viz},D&&E(D.width,D.height)),n.createElement("div",{style:T,ref:h},n.createElement(m.E,{hideHorizontalTrack:!0},u)))},l=c=>({viz:(0,t.css)({flexGrow:2,borderRadius:c.shape.radius.default,"&:focus-visible":(0,o.getFocusStyles)(c)})}),d=({children:c})=>n.createElement(n.Fragment,null,c);i.Legend=d},94536:(Q,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(8066),s=e(40845);const o=n.memo(n.forwardRef(({color:i,className:l,gradient:d,...c},g)=>{const u=(0,s.$j)(),E=(0,s.of)(m);let p;if(d){const a=r.uf.get(d).getColors?.(u);a?.length?p=`linear-gradient(90deg, ${a.join(", ")})`:p=u.visualization.getColorByName("")}else p=i;const b={background:p,width:"14px",height:"4px",borderRadius:u.shape.radius.pill,display:"inline-block",marginRight:"8px"};return n.createElement("div",{"data-testid":"series-icon",ref:g,className:(0,t.cx)(l,E.forcedColors),style:b,...c})})),m=()=>({forcedColors:(0,t.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});o.displayName="SeriesIcon"},55726:(Q,I,e)=>{"use strict";e.d(I,{t:()=>O});var t=e(96540),n=e(69129),r=e(52622),s=e(79041),o=e(88895),m=e(32196),i=e(40845),l=e(1551),d=e(33552),c=e(34375);const g=({items:S,itemRenderer:v,onLabelMouseOver:x,onLabelMouseOut:A,onLabelClick:R,placement:B,className:U,readonly:w})=>{const K=(0,i.of)(u);v||(v=L=>t.createElement(c.M,{item:L,onLabelClick:R,onLabelMouseOver:x,onLabelMouseOut:A,readonly:w}));const N=L=>`${L.getItemKey?L.getItemKey():L.label}`;switch(B){case"right":{const L=(V,F)=>t.createElement("span",{className:K.itemRight},v(V,F));return t.createElement("div",{className:(0,m.cx)(K.rightWrapper,U)},t.createElement(d.B,{items:S,renderItem:L,getItemKey:N}))}case"bottom":default:{const L=S.filter(z=>z.yAxis===1),V=S.filter(z=>z.yAxis!==1),F=(z,Y)=>t.createElement("span",{className:K.itemBottom},v(z,Y));return t.createElement("div",{className:(0,m.cx)(K.bottomWrapper,U)},L.length>0&&t.createElement("div",{className:K.section},t.createElement(l.c,{items:L,renderItem:F,getItemKey:N})),V.length>0&&t.createElement("div",{className:(0,m.cx)(K.section,K.sectionRight)},t.createElement(l.c,{items:V,renderItem:F,getItemKey:N})))}}};g.displayName="VizLegendList";const u=S=>{const v=(0,m.css)({paddingRight:"10px",display:"flex",fontSize:S.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:v,itemRight:(0,m.cx)(v,(0,m.css)({marginBottom:S.spacing(.5)})),rightWrapper:(0,m.css)({paddingLeft:S.spacing(.5)}),bottomWrapper:(0,m.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:S.spacing(.5),gap:"15px 25px"}),section:(0,m.css)({display:"flex"}),sectionRight:(0,m.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var E=e(14578),p=e(83195),b=e(16797),a=e(94134);const h=({item:S,onLabelClick:v,onLabelMouseOver:x,onLabelMouseOut:A,className:R,readonly:B})=>{const U=(0,i.of)(P),w=(0,t.useCallback)(L=>{x&&x(S,L)},[S,x]),K=(0,t.useCallback)(L=>{A&&A(S,L)},[S,A]),N=(0,t.useCallback)(L=>{v&&v(S,L)},[S,v]);return t.createElement("tr",{className:(0,m.cx)(U.row,R)},t.createElement("td",null,t.createElement("span",{className:U.itemWrapper},t.createElement(a.R,{color:S.color,seriesName:S.fieldName??S.label,readonly:B}),t.createElement("button",{disabled:B,type:"button",title:S.label,onBlur:K,onFocus:w,onMouseOver:w,onMouseOut:K,onClick:B?void 0:N,className:(0,m.cx)(U.label,S.disabled&&U.labelDisabled)},S.label," ",S.yAxis===2&&t.createElement("span",{className:U.yAxisLabel},"(right y-axis)")))),S.getDisplayValues&&S.getDisplayValues().map((L,V)=>t.createElement("td",{className:U.value,key:`${L.title}-${V}`},(0,p.cN)(L))))};h.displayName="LegendTableItem";const P=S=>{const v=b.hoverColor(S.colors.background.primary,S);return{row:(0,m.css)({label:"LegendRow",fontSize:S.v1.typography.size.sm,borderBottom:`1px solid ${S.colors.border.weak}`,td:{padding:S.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:v}}),label:(0,m.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden",userSelect:"text"}),labelDisabled:(0,m.css)({label:"LegendLabelDisabled",color:S.colors.text.disabled}),itemWrapper:(0,m.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,m.css)({textAlign:"right"}),yAxisLabel:(0,m.css)({color:S.colors.text.secondary})}},y="Name",C=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,f=({items:S,sortBy:v,sortDesc:x,itemRenderer:A,className:R,onToggleSort:B,onLabelClick:U,onLabelMouseOver:w,onLabelMouseOut:K,readonly:N,isSortable:L})=>{const V=(0,i.of)(D),F={};L&&(F[y]="");for(const z of S)if(z.getDisplayValues)for(const Y of z.getDisplayValues())F[Y.title??"?"]=Y.description??"";if(v!=null){let z=new Map;S.forEach(H=>{if(v!==y&&H.getDisplayValues){const k=H.getDisplayValues().find(ie=>ie.title===v),ee=k==null||Number.isNaN(k.numeric)?-1/0:k.numeric;z.set(H,ee)}});let Y=x?-1:1;v===y?S.sort((H,k)=>Y*C(H.label,k.label)):S.sort((H,k)=>{const ee=z.get(H)??0,ie=z.get(k)??0;return Y*(ee-ie)})}return A||(A=(z,Y)=>t.createElement(h,{key:`${z.label}-${Y}`,item:z,onLabelClick:U,onLabelMouseOver:w,onLabelMouseOut:K,readonly:N})),t.createElement("table",{className:(0,m.cx)(V.table,R)},t.createElement("thead",null,t.createElement("tr",null,!L&&t.createElement("th",null),Object.keys(F).map(z=>t.createElement("th",{title:F[z],key:z,className:(0,m.cx)(V.header,B&&V.headerSortable,L&&V.nameHeader,{[V.withIcon]:v===z}),onClick:()=>{B&&B(z)}},z,v===z&&t.createElement(E.I,{size:"xs",name:x?"angle-down":"angle-up"}))))),t.createElement("tbody",null,S.map(A)))},D=S=>({table:(0,m.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${S.colors.border.weak}`}}),header:(0,m.css)({color:S.colors.primary.text,fontWeight:S.typography.fontWeightMedium,borderBottom:`1px solid ${S.colors.border.weak}`,padding:S.spacing(.25,1,.25,1),fontSize:S.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,m.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,m.css)({paddingRight:"4px"}),headerSortable:(0,m.css)({cursor:"pointer"})});var T=e(29995);function M(S){return S.ctrlKey||S.metaKey||S.shiftKey?o.B.AppendToSelection:o.B.ToggleSelection}function O({items:S,displayMode:v,sortBy:x,seriesVisibilityChangeBehavior:A=T.K.Isolate,sortDesc:R,onLabelClick:B,onToggleSort:U,placement:w,className:K,itemRenderer:N,readonly:L,isSortable:V}){const{eventBus:F,onToggleSeriesVisibility:z,onToggleLegendSort:Y}=(0,s.d2)(),H=(0,t.useCallback)((ie,fe)=>{F?.publish({type:n.b_.type,payload:{raw:fe,x:0,y:0,dataId:ie.label}})},[F]),k=(0,t.useCallback)((ie,fe)=>{F?.publish({type:n.ql.type,payload:{raw:fe,x:0,y:0,dataId:ie.label}})},[F]),ee=(0,t.useCallback)((ie,fe)=>{B&&B(ie,fe),z&&z(ie.fieldName??ie.label,A===T.K.Hide?o.B.AppendToSelection:M(fe))},[z,B,A]);switch(v){case r.lm.Table:return t.createElement(f,{className:K,items:S,placement:w,sortBy:x,sortDesc:R,onLabelClick:ee,onToggleSort:U||Y,onLabelMouseOver:H,onLabelMouseOut:k,itemRenderer:N,readonly:L,isSortable:V});case r.lm.List:return t.createElement(g,{className:K,items:S,placement:w,onLabelMouseOver:H,onLabelMouseOut:k,onLabelClick:ee,itemRenderer:N,readonly:L});default:return null}}O.displayName="VizLegend"},34375:(Q,I,e)=>{"use strict";e.d(I,{M:()=>g});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(94134),m=e(2543),i=e(83195),l=e(1551);const d=({stats:E})=>{const p=(0,s.of)(c);return E.length===0?null:n.createElement(l.c,{className:p.list,items:E,renderItem:b=>n.createElement("div",{className:p.item,title:b.description},b.title&&`${(0,m.capitalize)(b.title)}:`," ",(0,i.cN)(b))})},c=()=>({list:(0,t.css)({flexGrow:1,textAlign:"right"}),item:(0,t.css)({marginLeft:"8px"})});d.displayName="VizLegendStatsList";const g=({item:E,onLabelClick:p,onLabelMouseOver:b,onLabelMouseOut:a,className:h,readonly:P})=>{const y=(0,s.of)(u),C=(0,n.useCallback)(T=>{b&&b(E,T)},[E,b]),f=(0,n.useCallback)(T=>{a&&a(E,T)},[E,a]),D=(0,n.useCallback)(T=>{p&&p(E,T)},[E,p]);return n.createElement("div",{className:(0,t.cx)(y.itemWrapper,E.disabled&&y.itemDisabled,h),"data-testid":r.Tp.components.VizLegend.seriesName(E.label)},n.createElement(o.R,{seriesName:E.fieldName??E.label,color:E.color,gradient:E.gradient,readonly:P}),n.createElement("button",{disabled:P,type:"button",onBlur:f,onFocus:C,onMouseOver:C,onMouseOut:f,onClick:D,className:y.label},E.label),E.getDisplayValues&&n.createElement(d,{stats:E.getDisplayValues()}))};g.displayName="VizLegendListItem";const u=E=>({label:(0,t.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,t.css)({label:"LegendLabelDisabled",color:E.colors.text.disabled}),itemWrapper:(0,t.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,t.css)({textAlign:"right"}),yAxisLabel:(0,t.css)({color:E.v1.palette.gray2})})},94134:(Q,I,e)=>{"use strict";e.d(I,{R:()=>o});var t=e(96540),n=e(83598),r=e(79041),s=e(94536);const o=t.memo(({seriesName:m,color:i,gradient:l,readonly:d})=>{const{onSeriesColorChange:c}=(0,r.d2)(),g=(0,t.useCallback)(u=>c(m,u),[m,c]);return m&&c&&i&&!d?t.createElement(n.Dp,{color:i,onChange:g,enableNamedColors:!0},({ref:u,showColorPicker:E,hideColorPicker:p})=>t.createElement(s.p,{color:i,className:"pointer",ref:u,onClick:E,onMouseLeave:p})):t.createElement(s.p,{color:i,gradient:l})});o.displayName="VizLegendSeriesIcon"},29995:(Q,I,e)=>{"use strict";e.d(I,{K:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},12509:(Q,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(2543),n=e(96540),r=e(47070);const s=(l,d,c,g)=>{const u=o(l,d,g),E=o(d,l,g),p=Math.max(u,E);let b=Math.floor(l/p),a=Math.ceil(g/b);b=Math.ceil(g/a);const h=b-(b*a-g),P=l/h-c+c/h;return{width:l/b-c+c/b,height:d/a-c+c/a,widthOnLastRow:P,xCount:b,yCount:a}};function o(l,d,c){const g=Math.ceil(Math.sqrt(c*l/d));return Math.floor(g*d/l)*g<c?d/Math.ceil(g*d/l):l/g}class m extends n.PureComponent{static{this.defaultProps={itemSpacing:8}}constructor(d){super(d),this.state={values:d.getValues()}}componentDidUpdate(d){const{renderCounter:c,source:g}=this.props;(c!==d.renderCounter||g!==d.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:d,width:c,height:g}=this.props;return d===r.wV.Auto?c>g?r.wV.Vertical:r.wV.Horizontal:d}renderGrid(){const{renderValue:d,height:c,width:g,itemSpacing:u,getAlignmentFactors:E,orientation:p}=this.props,{values:b}=this.state,a=s(g,c,u,b.length),h=E?E(b,a.width,a.height):{};let P=0,y=0,C=[];for(let f=0;f<b.length;f++){const D=b[f],M=y===a.yCount-1?a.widthOnLastRow:a.width,O=a.height,S=P*M+u*P,v=y*O+u*y,x={position:"absolute",left:S,top:v,width:`${M}px`,height:`${O}px`};C.push(n.createElement("div",{key:f,style:x},d({value:D,width:M,height:O,alignmentFactors:h,orientation:p,count:b.length}))),P++,P===a.xCount&&(P=0,y++)}return n.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:d,height:c,width:g,itemSpacing:u,getAlignmentFactors:E,autoGrid:p,orientation:b,maxVizHeight:a,minVizWidth:h,minVizHeight:P}=this.props,{values:y}=this.state;if(p&&b===r.wV.Auto)return this.renderGrid();const C={display:"flex"},f={display:"flex",overflow:`${h?"auto":"hidden"} ${P?"auto":"hidden"}`};let D=c,T=g;const M=this.getOrientation();switch(M){case r.wV.Horizontal:const S=(c+u)/y.length-u;f.flexDirection="column",f.height=`${c}px`,C.marginBottom=`${u}px`,T=g,D=(0,t.clamp)(S,P??0,a??S);break;case r.wV.Vertical:f.flexDirection="row",f.justifyContent="space-between",C.marginRight=`${u}px`,D=c,T=Math.max(g/y.length-u+u/y.length,h??0)}C.width=`${T}px`,C.height=`${D}px`;const O=E?E(y,T,D):{};return n.createElement("div",{style:f},y.map((S,v)=>n.createElement("div",{key:v,style:i(C,v,y.length)},d({value:S,width:T,height:D,alignmentFactors:O,orientation:M,count:y.length}))))}}function i(l,d,c){return d===c-1?{...l,marginRight:0,marginBottom:0}:l}},3139:(Q,I,e)=>{"use strict";e.d(I,{g:()=>m,o:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(94536);const o=l=>({icon:(0,t.css)({marginRight:l.spacing(1),verticalAlign:"middle"}),seriesTable:(0,t.css)({display:"table"}),seriesTableRow:(0,t.css)({display:"table-row",fontSize:l.typography.bodySmall.fontSize}),seriesTableCell:(0,t.css)({display:"table-cell"}),label:(0,t.css)({wordBreak:"break-all"}),value:(0,t.css)({paddingLeft:l.spacing(2),textAlign:"right"}),activeSeries:(0,t.css)({fontWeight:l.typography.fontWeightBold,color:l.colors.text.maxContrast}),timestamp:(0,t.css)({fontWeight:l.typography.fontWeightBold,fontSize:l.typography.bodySmall.fontSize})}),m=({color:l,label:d,value:c,isActive:g})=>{const u=(0,r.of)(o);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(u.seriesTableRow,g&&u.activeSeries)},l&&n.createElement("div",{className:u.seriesTableCell},n.createElement(s.p,{color:l,className:u.icon})),d&&n.createElement("div",{className:(0,t.cx)(u.seriesTableCell,u.label)},d),c&&n.createElement("div",{className:(0,t.cx)(u.seriesTableCell,u.value)},c))},i=({timestamp:l,series:d})=>{const c=(0,r.of)(o);return n.createElement(n.Fragment,null,l&&n.createElement("div",{className:c.timestamp,"aria-label":"Timestamp"},l),d.map((g,u)=>n.createElement(m,{isActive:g.isActive,label:g.label,color:g.color,value:g.value,key:`${g.label}-${u}`})))}},75128:(Q,I,e)=>{"use strict";e.d(I,{n:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(17464),o=e(69503);const m=({content:l,position:d,offset:c})=>{const g=(0,r.of)(i);return d?n.createElement(s.ZL,{className:g.portal},n.createElement(o.o,{position:d,offset:c||{x:0,y:0}},l)):null};m.displayName="VizTooltip";const i=()=>({portal:(0,t.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},69503:(Q,I,e)=>{"use strict";e.d(I,{o:()=>i});var t=e(32196),n=e(96540),r=e(52908),s=e(40845),o=e(16797),m=e(10875);const i=({position:{x:d,y:c},offset:{x:g,y:u},children:E,allowPointerEvents:p=!1,className:b,...a})=>{const h=(0,n.useRef)(null),[P,y]=(0,n.useState)({width:0,height:0}),{width:C,height:f}=(0,r.A)(),[D,T]=(0,n.useState)({x:d+g,y:c+u}),M=(0,n.useMemo)(()=>new ResizeObserver(S=>{for(let v of S){const x=Math.floor(v.contentRect.width+16),A=Math.floor(v.contentRect.height+2*8);(P.width!==x||P.height!==A)&&y({width:Math.min(x,C),height:Math.min(A,f)})}}),[P,C,f]);(0,n.useLayoutEffect)(()=>(h.current&&M.observe(h.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(h&&h.current){const{x:S,y:v}=(0,m.Ju)(d,c,P.width,P.height,g,u,C,f);T({x:S,y:v})}},[C,f,d,g,c,u,P]);const O=(0,s.of)(l);return n.createElement("div",{ref:h,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${D.x}px, ${D.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...a,className:(0,t.cx)(O.wrapper,b)},E)};i.displayName="VizTooltipContainer";const l=d=>({wrapper:(0,t.css)((0,o.getTooltipContainerStyles)(d))})},11389:(Q,I,e)=>{"use strict";e.d(I,{o:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(13471);const o=({items:i,children:l,isPinned:d,scrollable:c=!1})=>{const g=(0,r.of)(m),u=c?{maxHeight:400,overflowY:"auto"}:{};return n.createElement("div",{className:g.wrapper,style:u},i.map(({label:E,value:p,color:b,colorIndicator:a,colorPlacement:h,isActive:P},y)=>n.createElement(s.B,{key:y,label:E,value:p,color:b,colorIndicator:a,colorPlacement:h,isActive:P,justify:"space-between",isPinned:d})),l)},m=i=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${i.colors.border.medium}`,padding:i.spacing(1)})})},58749:(Q,I,e)=>{"use strict";e.d(I,{S:()=>l});var t=e(32196),n=e(96540),r=e(67061),s=e(14689),o=e(55852),m=e(40845);const i="add-annotation-button",l=({dataLinks:c,annotate:g})=>{const u=(0,m.of)(d),E=()=>{const p={variant:"secondary"};return n.createElement(r.B,{direction:"column",justifyContent:"flex-start"},c.map((b,a)=>n.createElement(s.R,{key:a,link:b,buttonProps:p})))};return n.createElement("div",{className:u.wrapper},c.length>0&&n.createElement("div",{className:u.dataLinks},E()),g!=null&&n.createElement("div",{className:u.addAnnotations},n.createElement(o.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:i,onClick:g},"Add annotation")))},d=c=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:c.spacing(0)}),dataLinks:(0,t.css)({borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1)}),addAnnotations:(0,t.css)({borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1)})})},52415:(Q,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(13471);const o=({item:i,isPinned:l})=>{const d=(0,r.of)(m),{label:c,value:g,color:u,colorIndicator:E}=i;return n.createElement("div",{className:d.wrapper},n.createElement(s.B,{label:c,value:g,color:u,colorIndicator:E,marginRight:"22px",isPinned:l}))},m=i=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:i.spacing(1)})})},13471:(Q,I,e)=>{"use strict";e.d(I,{B:()=>b});var t=e(32196),n=e(96540),r=e(40845),s=e(32982),o=e(56034),m=e(24293),i=e(79871),l=e(10875),d=(h=>(h[h.Leading=0]="Leading",h[h.Trailing=1]="Trailing",h))(d||{});const c=({color:h=m.F,colorIndicator:P=i.Ev,position:y=0})=>{const C=(0,r.of)(g);return n.createElement("span",{style:{backgroundColor:h},className:(0,t.cx)(y===0?C.leading:C.trailing,(0,l.L$)(P,C))})},g=h=>({leading:(0,t.css)({marginRight:h.spacing(.5)}),trailing:(0,t.css)({marginLeft:h.spacing(.5)}),series:(0,t.css)({width:"14px",height:"4px",borderRadius:h.shape.radius.pill,minWidth:"14px"}),value:(0,t.css)({width:"12px",height:"12px",borderRadius:h.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,t.css)({}),pie_1_4:(0,t.css)({}),pie_2_4:(0,t.css)({}),pie_3_4:(0,t.css)({}),marker_sm:(0,t.css)({width:"4px",height:"4px",borderRadius:h.shape.radius.circle,minWidth:"4px"}),marker_md:(0,t.css)({width:"8px",height:"8px",borderRadius:h.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,t.css)({width:"12px",height:"12px",borderRadius:h.shape.radius.circle,minWidth:"12px"})});var u=(h=>(h.label="label",h.value="value",h))(u||{});const E="Copied to clipboard",p=2*1e3,b=({label:h,value:P,color:y,colorIndicator:C,colorPlacement:f=i.lJ.first,justify:D="flex-start",isActive:T=!1,marginRight:M="0px",isPinned:O})=>{const S=(0,r.of)(a,D,M),[v,x]=(0,n.useState)(!1),[A,R]=(0,n.useState)(!1),[B,U]=(0,n.useState)(null),[w,K]=(0,n.useState)(!1),N=(0,n.useRef)(null),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{let ee;return w&&(ee=setTimeout(()=>{K(!1)},p)),()=>{window.clearTimeout(ee)}},[w]);const V=async(ee,ie)=>{if(!(navigator?.clipboard&&window.isSecureContext)){F(ee,ie);return}try{await navigator.clipboard.writeText(ee),U({[`${ie}`]:ee}),K(!0)}catch{U(null)}},F=(ee,ie)=>{const fe=document.createElement("textarea");N.current?.appendChild(fe),fe.value=ee,fe.focus(),fe.select();try{document.execCommand("copy")&&(U({[`${ie}`]:ee}),K(!0))}catch(q){console.error("Unable to copy to clipboard",q)}fe.remove()},z=ee=>{ee.currentTarget.offsetWidth<ee.currentTarget.scrollWidth&&x(!0)},Y=()=>x(!1),H=ee=>{ee.currentTarget.offsetWidth<ee.currentTarget.scrollWidth&&R(!0)},k=()=>R(!1);return n.createElement("div",{className:S.contentWrapper},(y||h)&&n.createElement("div",{className:S.valueWrapper},y&&f===i.lJ.first&&n.createElement(c,{color:y,colorIndicator:C}),O?n.createElement(n.Fragment,null,n.createElement(o.m,{content:h,interactive:!1,show:v},n.createElement(n.Fragment,null,w&&B?.label&&n.createElement(s.r,{placement:"top",referenceElement:N.current},E),n.createElement("div",{className:(0,t.cx)(S.label,T&&S.activeSeries,navigator?.clipboard&&S.copy),onMouseEnter:z,onMouseLeave:Y,onClick:()=>V(h,"label"),ref:N},h)))):n.createElement("div",{className:(0,t.cx)(S.label,T&&S.activeSeries)},h)),n.createElement("div",{className:S.valueWrapper},y&&f===i.lJ.leading&&n.createElement(c,{color:y,colorIndicator:C,position:d.Leading}),O?n.createElement(o.m,{content:P?P.toString():"",interactive:!1,show:A},n.createElement(n.Fragment,null,w&&B?.value&&n.createElement(s.r,{placement:"top",referenceElement:L.current},E),n.createElement("div",{className:(0,t.cx)(S.value,T,navigator?.clipboard&&S.copy),onMouseEnter:H,onMouseLeave:k,onClick:()=>V(P?P.toString():"","value"),ref:L},P))):n.createElement("div",{className:(0,t.cx)(S.value,T)},P),y&&f===i.lJ.trailing&&n.createElement(c,{color:y,colorIndicator:C,position:d.Trailing})))},a=(h,P,y)=>({contentWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:P,flexWrap:"wrap",marginRight:y}),label:(0,t.css)({color:h.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:h.spacing(2)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),activeSeries:(0,t.css)({fontWeight:h.typography.fontWeightBold,color:h.colors.text.maxContrast}),copy:(0,t.css)({cursor:"pointer"})})},79871:(Q,I,e)=>{"use strict";e.d(I,{Ev:()=>r,fX:()=>t,lJ:()=>n});var t=(s=>(s.series="series",s.value="value",s.hexagon="hexagon",s.pie_1_4="pie_1_4",s.pie_2_4="pie_2_4",s.pie_3_4="pie_3_4",s.marker_sm="marker_sm",s.marker_md="marker_md",s.marker_lg="marker_lg",s))(t||{}),n=(s=>(s.hidden="hidden",s.first="first",s.leading="leading",s.trailing="trailing",s))(n||{});const r="series"},10875:(Q,I,e)=>{"use strict";e.d(I,{Ju:()=>m,L$:()=>i,cp:()=>g});var t=e(11261),n=e(83195),r=e(24293),s=e(52622),o=e(79871);const m=(u=0,E=0,p=0,b=0,a=0,h=0,P=0,y=0)=>{let C=u,f=E;const D=Math.max(u+a+p-(P-a),0),T=Math.abs(Math.min(u-a-p-a,0)),M=D>0,O=T>0,S=Math.max(E+h+b-(y-h),0),v=Math.abs(Math.min(E-h-b-h,0)),x=S>0,A=v>0;return M&&O?C=D>T?a:P-a-p:M?C=u-a-p:C=u+a,x&&A?f=S>v?h:y-h-b:x?f=E-h-b:f=E+h,{x:C,y:f}},i=(u,E)=>{switch(u){case o.fX.value:return E.value;case o.fX.series:return E.series;case o.fX.hexagon:return E.hexagon;case o.fX.pie_1_4:return E.pie_1_4;case o.fX.pie_2_4:return E.pie_2_4;case o.fX.pie_3_4:return E.pie_3_4;case o.fX.marker_sm:return E.marker_sm;case o.fX.marker_md:return E.marker_md;case o.fX.marker_lg:return E.marker_lg;default:return E.value}},l=(u,E)=>u.numeric-E.numeric,d=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),c=(u,E)=>d.compare(`${u.value}`,`${E.value}`),g=(u,E,p,b,a,h,P=y=>!0)=>{let y=[],C=!0;for(let f=0;f<u.length;f++){const D=u[f];if(D===E||D.type===t.PU.time||!P(D)||D.config.custom?.hideFrom?.tooltip||D.config.custom?.hideFrom?.viz||a===s.$N.Single&&b!==f)continue;let T=p[f];if(T==null)continue;D.type===t.PU.number||D.type===t.PU.boolean||D.type===t.PU.enum||(C=!1);const M=u[f].values[T];if(M==null&&D.config.noValue==null)continue;const O=D.display(M),S=Number.isNaN(O.numeric)?h===s.xB.Descending?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:O.numeric;y.push({label:D.state?.displayName??D.name,value:(0,n.cN)(O),color:O.color??r.F,colorIndicator:o.fX.series,colorPlacement:o.lJ.first,isActive:a===s.$N.Multi&&b===f,numeric:S})}if(h!==s.xB.None&&y.length>1){const f=C?l:c,D=h===s.xB.Descending?-1:1;y.sort((T,M)=>D*f(T,M))}return y}},94333:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{Alert:()=>tt.F,AlertingSettings:()=>mn.i,AsyncMultiSelect:()=>ks.Iv,AsyncSelect:()=>ks.DW,AsyncVirtualizedSelect:()=>ks.gZ,AutoSaveField:()=>ie.p,AutoSizeInput:()=>Ao.D,Avatar:()=>wt.e,Badge:()=>Ws.E,BarGauge:()=>Ve.xE,BarGaugeDisplayMode:()=>pa.eX,BigValue:()=>He.yV,BigValueColorMode:()=>He.yp,BigValueGraphMode:()=>He.$p,BigValueJustifyMode:()=>He.F8,BigValueTextMode:()=>He.SV,Box:()=>Ma.a,BrowserLabel:()=>xr.J,Button:()=>Dt.$n,ButtonCascader:()=>f.H,ButtonGroup:()=>nn.e,ButtonSelect:()=>jr.f,CallToActionCard:()=>Gt.c,Card:()=>ur.Z,CardContainer:()=>Vo.Q,Cascader:()=>C.v,CertificationKey:()=>Un.K,Checkbox:()=>lr.S,ClickOutsideWrapper:()=>Tt.N,ClipboardButton:()=>y.b,CodeEditor:()=>te.B,CodeEditorSuggestionItemKind:()=>le.q,CollapsableSection:()=>dt.M,Collapse:()=>st.S,ColorPicker:()=>O.sk,ColorPickerInput:()=>S.i,ConfirmButton:()=>c.Z,ConfirmModal:()=>G.u,Container:()=>Tr.mc,ContextMenu:()=>_t.t,ControlledCollapse:()=>st.a,Counter:()=>we.p,CustomHeadersSettings:()=>on.P,CustomScrollbar:()=>h.E,DataLinkButton:()=>ot.R,DataLinkInput:()=>Vt.l,DataLinksContextMenu:()=>qt.e,DataLinksInlineEditor:()=>Ct.e,DataSourceHttpSettings:()=>Ut.t,DatePicker:()=>F.l,DatePickerWithInput:()=>z.l,DateTimePicker:()=>Y.K,DeleteButton:()=>g.e,Divider:()=>cn.c,Drawer:()=>Hn._,Dropdown:()=>Bo.m,EmptySearchResult:()=>x.Z,EmptyState:()=>A.p,ErrorBoundary:()=>Kn.tH,ErrorBoundaryAlert:()=>Kn.Xw,ErrorWithStack:()=>na.D,EventBusPlugin:()=>Zs.Ku,EventsCanvas:()=>Qa.a,FIXED_UNIT:()=>yr.s,FadeTransition:()=>kn.A,FeatureBadge:()=>Jt.y,FeatureInfoBox:()=>Jt.e,Field:()=>ys.D,FieldArray:()=>Xs.E,FieldLinkList:()=>ft.n,FieldSet:()=>ar.n,FieldValidationMessage:()=>ss.P,FileDropzone:()=>Hr.gH,FileDropzoneDefaultChildren:()=>Hr.wI,FileListItem:()=>Hr.IB,FileUpload:()=>ii.e,FilterInput:()=>uo.Z,FilterPill:()=>J.m,Form:()=>Ca.l,FormattedValueDisplay:()=>mo.i,FullWidthButtonContainer:()=>yt.V,Gauge:()=>Je._,Graph:()=>qs.T,GraphContextMenu:()=>no.H,GraphContextMenuHeader:()=>no.i,GraphNG:()=>Hs.o,GraphSeriesToggler:()=>at.M,GraphWithLegend:()=>_o.I,Grid:()=>Xa.x,HorizontalGroup:()=>Tr.Gy,Icon:()=>l.I,IconButton:()=>d.K,InfoBox:()=>en.w,InlineField:()=>Rs.I,InlineFieldRow:()=>kr.C,InlineFormLabel:()=>fn.I,InlineLabel:()=>ws.c,InlineSegmentGroup:()=>Cs.e,InlineSwitch:()=>Do.K,InlineToast:()=>D.r,Input:()=>Ur.p,InputControl:()=>pt.e,InteractiveTable:()=>k.j,JSONFormatter:()=>hn.B,JsonExplorer:()=>Fn.O,KeyboardPlugin:()=>Zs.Z7,Label:()=>As.J,LegacyForms:()=>Uo,LegacyInputStatus:()=>n.O,Legend:()=>vs.s,Link:()=>ga.N,LinkButton:()=>Dt.z9,List:()=>H.B,LoadingBar:()=>M.G,LoadingPlaceholder:()=>T._,Marker:()=>Qa.pH,Menu:()=>it.W,MenuGroup:()=>Mt.r,MenuItem:()=>Dn.D,Modal:()=>Te.a,ModalHeader:()=>he.r,ModalRoot:()=>Fe.EO,ModalTabContent:()=>De.O,ModalTabsHeader:()=>re.J,ModalsContext:()=>Fe.wE,ModalsController:()=>Fe.$s,ModalsProvider:()=>Fe.YO,MultiSelect:()=>ks.KF,PageToolbar:()=>Ee.d,Pagination:()=>fe.d,PanelChrome:()=>ae.NR,PanelChromeLoadingIndicator:()=>ge.I,PanelContainer:()=>To._,PanelContextProvider:()=>Pe.XF,PanelContextRoot:()=>Pe.e4,PlotLegend:()=>Ga.$,PluginSignatureBadge:()=>mr.B,Popover:()=>p.A,PopoverController:()=>E.I,Portal:()=>a.ZL,PortalContainer:()=>a.qB,QueryField:()=>ne.X,RadioButtonGroup:()=>co.z,RadioButtonList:()=>ei.a,RangeSlider:()=>va.F,ReactMonacoEditor:()=>oe.m,RefreshPicker:()=>U.cC,RelativeTimeRangePicker:()=>Co.N,RenderUserContentAsHTML:()=>je.I,ScaleDistribution:()=>pa.L4,SecretInput:()=>rs.L,SecretTextArea:()=>Ro.l,SecureSocksProxySettings:()=>vn.Y,Segment:()=>xn.Y,SegmentAsync:()=>Vn.s,SegmentInput:()=>aa.o,SegmentSection:()=>_n.L,SegmentSelect:()=>Jn.a,Select:()=>ks.l6,SelectContainer:()=>ks.KA,SeriesColorPicker:()=>O.Dp,SeriesColorPickerPopover:()=>v.o,SeriesColorPickerPopoverWithTheme:()=>v.t,SeriesIcon:()=>rn.p,SeriesTable:()=>ye.o,SeriesTableRow:()=>ye.g,SeriesVisibilityChangeBehavior:()=>Be.K,SeriesVisibilityChangeMode:()=>sr.B,SetInterval:()=>Me.u,SlideOutTransition:()=>Mn.n,Slider:()=>ba.A,Space:()=>ps.$,Sparkline:()=>rt.O,Spinner:()=>Bn.y,Stack:()=>_a.B,StatsPicker:()=>B.S,Switch:()=>Do.d,TLSAuthSettings:()=>pn.j,Tab:()=>be.o,TabContent:()=>Ue.J,TabbedContainer:()=>P.q,Table:()=>ze.X,TableInputCSV:()=>xe.b,TabsBar:()=>We.U,Tag:()=>q.v,TagList:()=>Z.L,TagsInput:()=>ee.u,Text:()=>da.E,TextArea:()=>Lo.f,TextLink:()=>sa.Y,TimeOfDayPicker:()=>N.R,TimePickerTooltip:()=>w.xS,TimeRangeInput:()=>Po.b,TimeRangeLabel:()=>K.f,TimeRangePicker:()=>w.$6,TimeSeries:()=>ao.Z,TimeZonePicker:()=>L.U,Toggletip:()=>b.G,ToolbarButton:()=>gn.I,ToolbarButtonRow:()=>Cn.U,Tooltip:()=>u.m,TooltipPlugin:()=>Zs.Tk,TooltipPlugin2:()=>Zs.xl,UPLOT_AXIS_FONT_SIZE:()=>us.pi,UPlotChart:()=>bs.Z,UPlotConfigBuilder:()=>xa.e,UnitPicker:()=>R.p,UserIcon:()=>xt.n,ValuePicker:()=>In.i,VerticalGroup:()=>Tr.gW,VerticalTab:()=>pe.s,VirtualizedSelect:()=>ks.ip,VizLayout:()=>Re.KU,VizLegend:()=>_e.t,VizLegendListItem:()=>Xe.M,VizRepeater:()=>se.S,VizTooltip:()=>Oe.n,VizTooltipContainer:()=>Ne.o,WeekStartPicker:()=>V.l,WithContextMenu:()=>lt.n,XYCanvas:()=>Qa._X,ZoomPlugin:()=>Zs.jn,buildScaleKey:()=>Gr.My,clearButtonStyles:()=>Dt.my,convertOldAngularValueMapping:()=>Kt.I1,defaultIntervals:()=>U.cb,fieldMatchersUI:()=>fa.g,getCardStyles:()=>ur.H,getDragStyles:()=>bn.l,getInputStyles:()=>Ur.n,getPortalContainer:()=>a.gF,getSelectStyles:()=>bo.J,graphFieldOptions:()=>jn.t,graphTickFormatter:()=>ms.Yn,graphTimeFormat:()=>ms.Jc,preparePlotFrame:()=>Gr.mY,resetSelectStyles:()=>dr.A,sharedInputStyle:()=>dn.Xb,sharedSingleStatMigrationHandler:()=>Kt._$,sharedSingleStatPanelChangedHandler:()=>Kt.gl,useGraphNGContext:()=>fs.I,usePanelContext:()=>Pe.d2,useSplitter:()=>Wn.h,variableSuggestionToCodeEditorSuggestion:()=>ue.O,withErrorBoundary:()=>Kn.Xc});var t=e(90090),n=e(91634),r=e(24169),s=e(11206),o=e(99091),m=e(74716),i=e(56286),l=e(14578),d=e(29158),c=e(82702),g=e(91605),u=e(56034),E=e(95868),p=e(13840),b=e(60782),a=e(17464),h=e(40276),P=e(60734),y=e(10534),C=e(3988),f=e(32012),D=e(32982),T=e(39558),M=e(57514),O=e(83598),S=e(99128),v=e(70104),x=e(41670),A=e(69529),R=e(2056),B=e(42734),U=e(11134),w=e(15666),K=e(3799),N=e(66070),L=e(20333),V=e(15648),F=e(56181),z=e(98239),Y=e(63383),H=e(33552),k=e(48840),ee=e(79924),ie=e(28270),fe=e(19384),q=e(78369),Z=e(64149),J=e(92174),G=e(96374),ne=e(20084),te=e(32372),oe=e(85828),le=e(19716),ue=e(99544),Te=e(37390),he=e(29473),re=e(25897),De=e(95246),Fe=e(71678),Ee=e(95247),Me=e(67570),ze=e(77093),xe=e(14746),We=e(63021),be=e(40675),pe=e(90685),Ue=e(40980),we=e(53402),je=e(44522),He=e(37494),rt=e(5926),Je=e(95164),Ve=e(97696),Oe=e(75128),Ne=e(69503),ye=e(3139),se=e(12509),ae=e(91052),ge=e(89963),Pe=e(79041),Re=e(67266),Be=e(29995),_e=e(55726),Xe=e(34375),tt=e(42418),at=e(84656),st=e(82762),dt=e(57418),ot=e(14689),ft=e(79961),yt=e(61458),Tt=e(8866),Kt=e(37713),Gt=e(76442),_t=e(28122),it=e(38138),Mt=e(59093),Dn=e(64539),lt=e(51686),Ct=e(64919),Vt=e(64078),qt=e(59796),rn=e(94536),en=e(37166),Jt=e(86460),hn=e(24022),Fn=e(44533),Kn=e(66602),na=e(52446),Ut=e(91409),on=e(11184),mn=e(19849),vn=e(17081),pn=e(95180),Un=e(28623),Bn=e(62930),kn=e(31511),Mn=e(72960),xn=e(38401),Vn=e(83684),aa=e(57752),Jn=e(13102),_n=e(64765),Hn=e(87978),ba=e(77014),va=e(47097),Ca=e(51253),dn=e(87266),pt=e(16504),Dt=e(55852),nn=e(19727),gn=e(27746),Cn=e(15068),In=e(51986),fa=e(84349),ga=e(50720),sa=e(72109),da=e(94753),Ma=e(90613),_a=e(67061),Xa=e(71259),ps=e(68402),As=e(60029),ys=e(88575),vs=e(17408),ar=e(84167),ss=e(72093),Rs=e(14186),Cs=e(63056),ws=e(76892),kr=e(39268),Xs=e(95984),dr=e(23731),ks=e(88323),bo=e(88824),_s=e(62883),Ls=e.n(_s),Bs={};for(const li in _s)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","EmptyState","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","useSplitter","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(li)<0&&(Bs[li]=()=>_s[li]);e.d(I,Bs);var Tr=e(66864),Ws=e(39938),co=e(94354),ei=e(5173),Ur=e(10354),Ao=e(51440),uo=e(67647),rs=e(49718),Ro=e(7968),Do=e(15292),lr=e(10880),Lo=e(21744),ii=e(73546),Hr=e(92887),Po=e(54230),Co=e(5308),ur=e(10860),Vo=e(81507),mo=e(9286),jr=e(9261),Bo=e(83122),mr=e(98624),xt=e(99635),wt=e(12942),fn=e(38894),cn=e(25994),bn=e(69144),Wn=e(21633),jn=e(52198),pa=e(52622),xa=e(51336),us=e(30501),bs=e(81297),Ga=e(24182),Qa=e(96747),Zs=e(66737),yr=e(52811),sr=e(88895),xr=e(54438),To=e(52494),qs=e(48747),_o=e(5484),no=e(33083),ms=e(65036),Hs=e(99755),ao=e(18262),fs=e(16998),Gr=e(65575);const Uo={SecretFormField:i.L,FormField:t.z,Select:o.l6,AsyncSelect:o.DW,IndicatorsContainer:r.s,NoOptionsMessage:s.l,Input:n.p,Switch:m.d}},31511:(Q,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(66588),s=e(40845);function o(i){const{visible:l,children:d,duration:c=250}=i,g=(0,s.of)(m,c);return n.createElement(r.A,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:c,classNames:g},d)}const m=(i,l)=>({enter:(0,t.css)({label:"enter",opacity:0}),enterActive:(0,t.css)({label:"enterActive",opacity:1,transition:`opacity ${l}ms ease-out`}),exit:(0,t.css)({label:"exit",opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,transition:`opacity ${l}ms ease-out`})})},72960:(Q,I,e)=>{"use strict";e.d(I,{n:()=>o});var t=e(32196),n=e(96540),r=e(66588),s=e(40845);function o(i){const{visible:l,children:d,duration:c=250,horizontal:g,size:u}=i,E=(0,s.of)(m,c,g?"width":"height",u);return n.createElement(r.A,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:c,classNames:E},d)}const m=(i,l,d,c)=>({enter:(0,t.css)({label:"enter",[`${d}`]:0,opacity:0}),enterActive:(0,t.css)({label:"enterActive",[`${d}`]:`${c}px`,opacity:1,transition:`opacity ${l}ms ease-out, ${d} ${l}ms ease-out`}),exit:(0,t.css)({label:"exit",[`${d}`]:`${c}px`,opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,[`${d}`]:0,transition:`opacity ${l}ms ease-out, ${d} ${l}ms ease-out`})})},81297:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(96540),n=e(36613),r=e(16895);function s(l,d){return d.width===l.width&&d.height===l.height}function o(l,d){return d.data===l.data}function m(l,d){return d.config===l.config}class i extends t.Component{constructor(d){super(d),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:d,height:c,plotRef:g}=this.props;if(this.state.plot?.destroy(),d===0&&c===0)return;this.props.config.addHook("setSize",p=>{p.over});const u={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,r.uY)("UPlot",!1,"Reinitializing plot",u);const E=new n.A(u,this.props.data,this.plotContainer.current);g&&g(E),this.setState({plot:E})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(d){let{plot:c}=this.state;s(d,this.props)?m(d,this.props)?o(d,this.props)||c?.setData(this.props.data):this.reinitPlot():c?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},24182:(Q,I,e)=>{"use strict";e.d(I,{$:()=>u,t:()=>g});var t=e(96540),n=e(28240),r=e(8066),s=e(75059),o=e(57875),m=e(52622),i=e(40845),l=e(67266),d=e(55726);const c=E=>E==null?"-":E.toFixed(1);function g(E,p){return E.getSeries().some(b=>{const a=b.props.dataFrameFieldIndex;if(!a)return!1;const h=p[a.frameIndex]?.fields[a.fieldIndex];return!(!h||h.config.custom?.hideFrom?.legend)})}const u=t.memo(({data:E,config:p,placement:b,calcs:a,displayMode:h,...P})=>{const y=(0,i.$j)(),C=p.getSeries().map(f=>{const D=f.props,T=D.dataFrameFieldIndex,M=p.getAxisPlacement(f.props.scaleKey);if(!T)return;const O=E[T.frameIndex]?.fields[T.fieldIndex];if(!O||O.config.custom?.hideFrom?.legend)return;const S=(0,n.Ct)(O,E[T.frameIndex],E),x=(0,r.lz)(O,y).color;return{disabled:!(D.show??!0),fieldIndex:T,color:x,label:S,yAxis:M===m.vM.Left||M===m.vM.Bottom?1:2,getDisplayValues:()=>{if(!a?.length)return[];const A=O.display??c;let R=null;const B=(0,s.Nw)({field:O,reducers:a});return a.map(U=>{const w=s.AS.get(U);let K=A;return w.id===s.gy.diffperc&&(K=(0,o.J)({field:{...O,config:{...O.config,unit:"percentunit"}},theme:y})),(w.id===s.gy.count||w.id===s.gy.changeCount||w.id===s.gy.distinctCount)&&(R||(R=(0,o.J)({field:{...O,config:{...O.config,unit:"none"}},theme:y})),K=R),{...K(B[U]),title:w.name,description:w.description}})},getItemKey:()=>`${S}-${T.frameIndex}-${T.fieldIndex}`}}).filter(f=>f!==void 0);return t.createElement(l.KU.Legend,{placement:b,...P},t.createElement(d.t,{placement:b,items:C,displayMode:h,sortBy:P.sortBy,sortDesc:P.sortDesc,isSortable:!0}))});u.displayName="PlotLegend"},52198:(Q,I,e)=>{"use strict";e.d(I,{t:()=>n});var t=e(52622);const n={drawStyle:[{label:"Lines",value:t.GR.Line},{label:"Bars",value:t.GR.Bars},{label:"Points",value:t.GR.Points}],lineInterpolation:[{description:"Linear",value:t.dx.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.dx.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.dx.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.dx.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.Nj.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.Nj.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.Nj.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.yL.Auto,description:"Show points when the density is low"},{label:"Always",value:t.yL.Always},{label:"Never",value:t.yL.Never}],axisPlacement:[{label:"Auto",value:t.vM.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.vM.Left},{label:"Right",value:t.vM.Right},{label:"Hidden",value:t.vM.Hidden}],fillGradient:[{label:"None",value:t.on.None},{label:"Opacity",value:t.on.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.on.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.on.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.gs.None},{label:"Normal",value:t.gs.Normal},{label:"100%",value:t.gs.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.Ly.Off},{label:"As lines",value:t.Ly.Line},{label:"As lines (dashed)",value:t.Ly.Dashed},{label:"As filled regions",value:t.Ly.Area},{label:"As filled regions and lines",value:t.Ly.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.Ly.DashedAndArea}]}},30501:(Q,I,e)=>{"use strict";e.d(I,{Zj:()=>u,pi:()=>d,zH:()=>g});var t=e(83195),n=e(97706),r=e(42994),s=e(72724),o=e(52622),m=e(29413),i=e(52811),l=e(93060);const d=12,c=8;class g extends i.R{merge(a){this.props.size=(0,l.Y)("max",this.props.size,a.size),this.props.label||(this.props.label=a.label),this.props.placement===o.vM.Auto&&(this.props.placement=a.placement)}calculateSpace(a,h,P,y,C){const f=a.axes[h],D=a.scales[f.scale];if(f.side!==2||!D)return 30;const T=40;if(D.time){const M=C/T,O=(y-P)/M,S=E(a,[P],h,T,O);return(0,m.kD)(S[0],d).width+18}return T}calculateAxisSize(a,h,P){const y=a.axes[P];let C=y.ticks.size;if(y.side===2)C+=y.gap+d;else if(h?.length){let f=h.reduce((T,M)=>Math.max(T,(0,m.kD)(M,d).width),0);const D=Math.min(a.width*.4,f);C+=y.gap+y.labelGap+D}return Math.ceil(C)}getConfig(){let{scaleKey:a,label:h,show:P=!0,placement:y=o.vM.Auto,grid:C={show:!0},ticks:f,space:D,filter:T,gap:M=5,formatValue:O,splits:S,values:v,incrs:x,isTime:A,timeZone:R,theme:B,tickLabelRotation:U,size:w,color:K,border:N,decimals:L,distr:V=o.L4.Linear}=this.props;const F=`${d}px ${B.typography.fontFamily}`,z=B.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.j9)(a)&&(S=[0,1]),L===0&&V===o.L4.Linear&&(T=(H,k)=>k.map(ee=>Number.isInteger(ee)?ee:null));let Y={scale:a,show:P,stroke:K??B.colors.text.primary,side:p(y),font:F,size:w??((H,k,ee)=>this.calculateAxisSize(H,k,ee)),rotate:U,gap:M,labelGap:0,grid:{show:C.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:N?.show?K??B.colors.text.primary:z,width:1/devicePixelRatio,size:4},f),splits:S,values:v,space:D??((H,k,ee,ie,fe)=>this.calculateSpace(H,k,ee,ie,fe)),filter:T,incrs:x};return N?.show&&(Y.border={stroke:K??B.colors.text.primary,width:1/devicePixelRatio,...N}),h!=null&&h.length>0&&(Y.label=h,Y.labelSize=d+c,Y.labelFont=F,Y.labelGap=c),v?Y.values=v:A?Y.values=E:O&&(Y.values=(H,k,ee,ie,fe)=>{let q=(0,n.E)((0,n.h)(fe,6));return k.map(Z=>O(Z,q>0?q:void 0))}),Y.timeZone=R,Y}}const u={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function E(b,a,h,P,y){const C=b.axes[h].timeZone,f=b.scales.x,D=(f?.max??0)-(f?.min??0),T=Math.round(u.year/u.day)*u.day,M=Math.round(y/u.day)*u.day;let O=r.WC.interval.year;return y<u.second?O=r.WC.interval.millisecond:y<=u.minute?O=r.WC.interval.second:D<=u.day?O=r.WC.interval.minute:y<=u.day?O=r.WC.interval.hour:D<u.year?O=r.WC.interval.day:M===T?O=r.WC.interval.year:y<=u.year&&(O=r.WC.interval.month),a.map(S=>S==null?"":(0,s.LE)(S,{format:O,timeZone:C}))}function p(b){switch(b){case o.vM.Top:return 0;case o.vM.Right:return 1;case o.vM.Bottom:return 2;case o.vM.Left:}return 3}},51336:(Q,I,e)=>{"use strict";e.d(I,{e:()=>C});var t=e(2543),n=e(36613),r=e(43127),s=e(91410),o=e(52622),m=e(16895),i=e(30501),l=e(93060),d=e(24293),c=e(23596),g=e(52811),u=e(74863);class E extends g.R{getConfig(){const{facets:D,drawStyle:T,pathBuilder:M,pointsBuilder:O,pointsFilter:S,lineInterpolation:v,lineWidth:x,lineStyle:A,barAlignment:R,barWidthFactor:B,barMaxWidth:U,showPoints:w,pointSize:K,scaleKey:N,pxAlign:L,spanNulls:V,show:F=!0}=this.props;let z={},Y=this.getLineColor();z.stroke=Y,z.width=x,A&&A.fill!=="solid"&&(A.fill==="dot"&&(z.cap="round"),z.dash=A.dash??[10,10]),M!=null?z.paths=M:T===o.GR.Points?z.paths=()=>null:T!=null&&(z.paths=(ee,ie,fe,q)=>b(T,v,R,B,U)(ee,ie,fe,q));const H=typeof Y=="string"?Y:(ee,ie)=>ee.series[ie]._stroke,k={points:{stroke:H,fill:H,size:!K||K<x?void 0:K,filter:S}};return O!=null?k.points.show=O:T===o.GR.Points?k.points.show=!0:w===o.yL.Auto?T===o.GR.Bars&&(k.points.show=!1):w===o.yL.Never?k.points.show=!1:w===o.yL.Always&&(k.points.show=!0),{scale:N,facets:D,spanGaps:typeof V=="number"?!1:V,value:()=>"",pxAlign:L,show:F,fill:this.getFill(),...z,...k}}getLineColor(){const{lineColor:D,gradientMode:T,colorMode:M,thresholds:O,theme:S,hardMin:v,hardMax:x,softMin:A,softMax:R,dynamicSeriesColor:B}=this.props;return T===o.on.None&&B?(U,w)=>B(w)??D??d.F:T===o.on.Scheme&&M?.id!==d.Y.Fixed?(0,u.pl)(1,S,M,O,v,x,A,R):T===o.on.Hue?(0,u.B5)(D??d.F,1,S):D??d.F}getFill(){const{lineColor:D,fillColor:T,gradientMode:M,fillOpacity:O,colorMode:S,thresholds:v,theme:x,hardMin:A,hardMax:R,softMin:B,softMax:U,dynamicSeriesColor:w}=this.props;if(T)return T;const K=M??o.on.None,N=(O??0)/100;if(K===o.on.None&&w&&N>0)return(L,V)=>{let F=L.series[V]._stroke;return c.alpha(F??"",N)};switch(K){case o.on.Opacity:return(0,u.WO)(T??D,N);case o.on.Hue:return(0,u.B5)(T??D,N,x);case o.on.Scheme:if(S?.id!==d.Y.Fixed)return(0,u.pl)(N,x,S,v,A,R,B,U);default:if(N>0)return c.alpha(D??"",N)}}}let p;function b(f,D,T=o.Nj.Center,M=.6,O=200){const S=n.A.paths;if(p||(p={linear:S.linear(),smooth:S.spline(),stepBefore:S.stepped({align:-1}),stepAfter:S.stepped({align:1})}),f===o.GR.Bars){let v=`bars|${T}|${M}|${O}`;return p[v]||(p[v]=S.bars({size:[M,O],align:T})),p[v]}else if(f===o.GR.Line){if(D===o.dx.StepBefore)return p.stepBefore;if(D===o.dx.StepAfter)return p.stepAfter;if(D===o.dx.Smooth)return p.smooth}return p.linear}var a=e(84140),h=e(50082);function P(f){const D=f.config.mode===o.Ly.Dashed||f.config.mode===o.Ly.DashedAndArea?[10,10]:null;function T(w,K,N,L){let V=w.ctx,F=0;for(let z=0;z<N.length;z++)if(N[z].color==="transparent"){F=z;break}V.lineWidth=2,D&&V.setLineDash(D);for(let z=1;z<N.length;z++){const Y=N[z];let H;F>=z&&z>0?H=(0,a.A)(L.visualization.getColorByName(N[z-1].color)):H=(0,a.A)(L.visualization.getColorByName(Y.color)),H.getAlpha()===1&&H.setAlpha(.7);let k=Math.round(w.bbox.left),ee=Math.round(w.valToPos(Y.value,K,!0)),ie=Math.round(w.bbox.left+w.bbox.width),fe=Math.round(w.valToPos(Y.value,K,!0));V.beginPath(),V.moveTo(k,ee),V.lineTo(ie,fe),V.strokeStyle=H.toString(),V.stroke()}}function M(w,K,N,L){let V=w.ctx,F=(0,u.Z8)(w,K,N.map(z=>{let Y=(0,a.A)(L.visualization.getColorByName(z.color));return Y.getAlpha()===1&&Y.setAlpha(.15),[z.value,Y.toString()]}),!0);V.fillStyle=F,V.fillRect(w.bbox.left,w.bbox.top,w.bbox.width,w.bbox.height)}const{scaleKey:O,thresholds:S,theme:v,config:x,hardMin:A,hardMax:R,softMin:B,softMax:U}=f;return w=>{const K=w.ctx,{min:N,max:L}=w.scales.x,{min:V,max:F}=w.scales[O];if(N==null||L==null||V==null||F==null)return;let{steps:z,mode:Y}=S;if(Y===h.O.Percentage){let[H,k]=(0,u.EJ)(w,O,A,R,B,U),ee=k-H;z=z.map(ie=>({...ie,value:H+ee*(ie.value/100)}))}switch(K.save(),x.mode){case o.Ly.Line:case o.Ly.Dashed:T(w,O,z,v);break;case o.Ly.Area:M(w,O,z,v);break;case o.Ly.LineAndArea:case o.Ly.DashedAndArea:M(w,O,z,v),T(w,O,z,v)}K.restore()}}const y={drag:{setScale:!1},points:{size:(f,D)=>f.series[D].points.size*2,width:(f,D,T)=>T/4},focus:{prox:30}};class C{constructor(D=r.lE){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=T=>{let M=new Date(T);return this.tz?n.A.tzDate(M,this.tz):M},this.tz=(0,s.QZ)(D,Date.now())?.ianaName}addHook(D,T){(0,m.uY)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(T)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",P(D)))}addAxis(D){D.placement=D.placement??o.vM.Auto,D.grid=D.grid??{};let T=D.scaleKey;if(T==="x"&&(T+=D.timeZone??""),this.axes[T]){this.axes[T].merge(D);return}D.placement===o.vM.Auto&&(D.placement=this.hasLeftAxis?o.vM.Right:o.vM.Left),D.placement===o.vM.Left&&(this.hasLeftAxis=!0),D.placement===o.vM.Hidden&&(D.grid.show=!1,D.size=0),this.axes[T]=new i.zH(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??o.vM.Left}setCursor(D){this.cursor=(0,t.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new E(D))}getSeries(){return this.series}addScale(D){const T=this.scales.find(M=>M.props.scaleKey===D.scaleKey);if(T){T.merge(D);return}this.scales.push(new l.G(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=T=>(this.frames=T,D(T,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){if(this.cachedConfig)return this.cachedConfig;const D={...m.NN,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),D.series=[...D.series,...this.series.map(M=>M.getConfig())],D.scales=this.scales.reduce((M,O)=>({...M,...O.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const T=(M="")=>(O,S)=>{let v=O.series[S].points._stroke;if(typeof v!="string"){let x=this.frames[0].fields[S];v=x.display(x.values[O.cursor.idxs[S]]).color}return v+M};return D.cursor=(0,t.merge)({},y,{points:{stroke:T("80"),fill:T()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.forEach(M=>{(0,m.Tz)(M).forEach(O=>{this.addBand(O)})}),this.bands.length&&(D.bands=this.bands),this.cachedConfig=D,D}ensureNonOverlappingAxes(D){const T=D.find(S=>S.props.scaleKey==="x"),M=D.filter(S=>S.props.grid?.show===void 0),O=M.findIndex(S=>S.props.placement===o.vM.Left||S.props.placement===o.vM.Right||S.props.placement===o.vM.Bottom&&S!==T);for(let S=0;S<M.length;S++)M[S]===T||S===O?M[S].props.grid.show=!0:M[S].props.grid.show=!1;return D}}},93060:(Q,I,e)=>{"use strict";e.d(I,{G:()=>m,Y:()=>i});var t=e(36613),n=e(77678),r=e(83195),s=e(52622),o=e(52811);class m extends o.R{merge(d){this.props.min=i("min",this.props.min,d.min),this.props.max=i("max",this.props.max,d.max)}getConfig(){let{isTime:d,scaleKey:c,min:g,max:u,softMin:E,softMax:p,range:b,direction:a,orientation:h,centeredZero:P,decimals:y}=this.props;const C=this.props.distribution,f=d?{}:{distr:C===s.L4.Symlog?4:C===s.L4.Log?3:C===s.L4.Ordinal?2:1,log:C===s.L4.Log||C===s.L4.Symlog?this.props.log??2:void 0,asinh:C===s.L4.Symlog?this.props.linearThreshold??1:void 0};if(C===s.L4.Log){let R=this.props.log,B=R===2?Math.log2:Math.log10;g!=null&&(g<=0?g=null:g=R**Math.floor(B(g))),u!=null&&(u<=0?u=null:u=R**Math.ceil(B(u))),E!=null&&(E<=0?E=null:E=R**Math.floor(B(E))),p!=null&&(p<=0?p=null:p=R**Math.ceil(B(p)))}let D=E==null?3:1,T=p==null?3:1;const M={min:{pad:.1,hard:g??-1/0,soft:E||0,mode:D},max:{pad:.1,hard:u??1/0,soft:p||0,mode:T}};let O=E==null&&g!=null,S=p==null&&u!=null,v=O&&S;const x=(R,B,U,w)=>{const K=R.scales[w];let N=[B,U];if(w==="x"&&!d&&C===s.L4.Linear||!v&&B==null&&U==null)return N;let L=K.log??10;if(K.distr===1||K.distr===2||K.distr===4){if(P){let V=Math.abs(B),F=Math.abs(U),z=Math.max(V,F);z===0&&(z=80),B=-z,U=z}K.distr===4?N=t.A.rangeAsinh(B,U,L,!0):N=t.A.rangeNum(O?g:B,S?u:U,M)}else K.distr===3&&(N=t.A.rangeLog(g??B,u??U,L,!0));if(y===0)if(K.distr===1||K.distr===2)N[0]=(0,n.rs)(N[0],1),N[1]=(0,n.Uh)(N[1],1);else if(K.distr===3){let V=K.log===2?Math.log2:Math.log10;if(N[0]<=1)N[0]=1;else{let z=Math.floor(V(N[0]));N[0]=L**z}let F=Math.ceil(V(N[1]));N[1]=L**F,N[0]===N[1]&&(N[1]*=L)}else K.distr===4&&(N[0]=(0,n.rs)(N[0],1),N[1]=(0,n.Uh)(N[1],1));return(K.distr===1||K.distr===4)&&(O&&(N[0]=g),S&&(N[1]=u)),N[0]>=N[1]&&(N[0]=K.distr===3?1:0,N[1]=100),N};let A=!d&&!v;return(0,r.j9)(c)&&(A=!1,b=[0,1]),{[c]:{time:d,auto:A,range:b??x,dir:a,ori:h,...f}}}}function i(l,d,c){const g=d!=null,u=c!=null;return g?u?l==="min"?d<c?d:c:d>c?d:c:d:c}},74863:(Q,I,e)=>{"use strict";e.d(I,{B5:()=>d,EJ:()=>E,WO:()=>l,Z8:()=>g,pl:()=>b});var t=e(84140),n=e(23596),r=e(24293),s=e(50082),o=e(52622),m=e(29413);function i(a,h,P){let y=0,C=0,f=0,D=0;return a===3?(C=h.top,D=h.top+h.height):a===2?(y=h.left+h.width,f=h.left):a===1?(C=h.top+h.height,D=h.top):a===0&&(y=h.left,f=h.left+h.width),P.createLinearGradient(y,C,f,D)}function l(a,h){return(P,y)=>{const C=(0,m.Yc)(),f=i(P.scales.x.ori===o.Lt.Horizontal?3:2,P.bbox,C);return f.addColorStop(0,n.alpha(a,h)),f.addColorStop(1,n.alpha(a,0)),f}}function d(a,h,P){return(y,C)=>{const f=(0,m.Yc)(),D=i(y.scales.x.ori===o.Lt.Horizontal?3:2,y.bbox,f),T=(0,t.A)(a).spin(-25).darken(5),M=(0,t.A)(a).saturate(20).spin(20).brighten(10);return P.isDark?(D.addColorStop(0,M.lighten(10).setAlpha(h).toString()),D.addColorStop(1,T.darken(10).setAlpha(h).toString())):(D.addColorStop(0,M.lighten(10).setAlpha(h).toString()),D.addColorStop(1,T.setAlpha(h).toString())),D}}var c=(a=>(a[a.Right=0]="Right",a[a.Up=1]="Up",a[a.Left=2]="Left",a[a.Down=3]="Down",a))(c||{});function g(a,h,P,y=!1){let C=a.scales[h],f=null,D=null;for(let N=0;N<P.length;N++){let L=P[N][0];if((L<=C.min||f==null)&&(f=N),D=N,L>=C.max)break}if(f===D)return P[f][1];let T=P[f][0],M=P[D][0];T===-1/0&&(T=C.min),M===1/0&&(M=C.max);let O=Math.round(a.valToPos(T,h,!0)),S=Math.round(a.valToPos(M,h,!0)),v=O-S;if(v===0)return P[D][1];let x,A,R,B;a.scales.x.ori===o.Lt.Horizontal?(x=R=0,A=O,B=S):(A=B=0,x=O,R=S);let w=(0,m.Yc)().createLinearGradient(x,A,R,B),K;for(let N=f;N<=D;N++){let L=P[N],V=N===f?O:N===D?S:Math.round(a.valToPos(L[0],h,!0)),F=(O-V)/v;y&&N>f&&w.addColorStop(F,K),w.addColorStop(F,K=L[1])}return w}function u(a,h){let P=a.scales[h],y=1/0,C=-1/0;return a.series.forEach((f,D)=>{if(f.show&&f.scale===h)if(f.min==null){let T=a.data[D];for(let M=0;M<T.length;M++)T[M]!=null&&(y=Math.min(y,T[M]),C=Math.max(C,T[M]))}else y=Math.min(y,f.min),C=Math.max(C,f.max)}),C===y&&(y=P.min,C=P.max),[y,C]}function E(a,h,P,y,C,f){let D=P??C??null,T=y??f??null;if(D==null||T==null){let[M,O]=u(a,h);D=D??M??0,T=T??O??100}return[D,T]}function p(a){return a==="transparent"||a[0]==="#"&&a.slice(-2)==="00"}function b(a,h,P,y,C,f,D,T){if(!P)throw Error("Missing colorMode required for color scheme gradients");if(!y)throw Error("Missing thresholds required for color scheme gradients");return(M,O)=>{let S=M.series[O].scale,v="";if(P.id===r.Y.Thresholds)if(y.mode===s.O.Absolute){const x=y.steps.map(A=>[A.value,p(A.color)?"#0000":n.alpha(h.visualization.getColorByName(A.color),a)]);v=g(M,S,x,!0)}else{const[x,A]=E(M,S,C,f,D,T),R=A-x,B=y.steps.map(U=>[x+R*(U.value/100),n.alpha(h.visualization.getColorByName(U.color),a)]);v=g(M,S,B,!0)}else if(P.getColors){const x=P.getColors(h),[A,R]=E(M,S,C,f,D,T),B=R-A,U=x.map((w,K)=>[A+B*(K/(x.length-1)),n.alpha(h.visualization.getColorByName(w),a)]);v=g(M,S,U,!1)}return v}}},78226:(Q,I,e)=>{"use strict";e.d(I,{a:()=>o});var t=e(96540),n=e(1604),r=e(6967),s=e(97620);function o({id:m,events:i,renderEventMarker:l,mapEventToXYCoords:d,config:c}){const g=(0,t.useRef)(),[u,E]=(0,t.useState)(0),p=(0,n.A)();(0,t.useLayoutEffect)(()=>{c.addHook("init",a=>{g.current=a}),c.addHook("draw",()=>{p()&&E(a=>a+1)})},[c,E]);const b=(0,t.useMemo)(()=>{const a=[];if(!g.current||i.length===0)return a;for(let h=0;h<i.length;h++){const P=i[h];for(let y=0;y<P.length;y++){const C=d(P,{fieldIndex:y,frameIndex:h});C&&a.push(t.createElement(r.p,{...C,key:`${m}-marker-${h}-${y}`},l(P,{fieldIndex:y,frameIndex:h})))}}return t.createElement(t.Fragment,null,a)},[i,l,u]);return g.current?t.createElement(s._,{left:g.current.bbox.left/window.devicePixelRatio,top:g.current.bbox.top/window.devicePixelRatio},b):null}},6967:(Q,I,e)=>{"use strict";e.d(I,{p:()=>n});var t=e(96540);const n=({x:r,y:s,children:o})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${r}px`}},o)},97620:(Q,I,e)=>{"use strict";e.d(I,{_:()=>r});var t=e(32196),n=e(96540);const r=({children:s,left:o,top:m})=>{const i=(0,n.useMemo)(()=>(0,t.css)({position:"absolute",overflow:"visible",left:`${o}px`,top:`${m}px`}),[o,m]);return n.createElement("div",{className:i},s)}},96747:(Q,I,e)=>{"use strict";e.d(I,{_X:()=>r._,a:()=>t.a,pH:()=>n.p});var t=e(78226),n=e(6967),r=e(97620)},55129:(Q,I,e)=>{"use strict";e.d(I,{M:()=>r});var t=e(52622),n=e(52811);function r(o,m){const i="na",l=`${o.min!==void 0?o.min:i}-${o.max!==void 0?o.max:i}`,d=`${o.custom?.axisSoftMin!==void 0?o.custom.axisSoftMin:i}-${o.custom?.axisSoftMax!==void 0?o.custom.axisSoftMax:i}`,c=`${o.custom?.axisPlacement!==void 0?o.custom?.axisPlacement:t.vM.Auto}`,g=o.unit??n.s,u=o.custom?.scaleDistribution?s(o.custom.scaleDistribution):t.L4.Linear,E=o.custom?.axisLabel?o.custom.axisLabel:i;return`${g}/${l}/${d}/${c}/${u}/${E}/${m}`}function s(o){return o.type===t.L4.Log?`${o.type}${o.log}`:o.type}},68268:(Q,I,e)=>{"use strict";e.d(I,{K:()=>l});var t=e(2543),n=e.n(t),r=e(96540),s=e(64423),o=e(99165),m=e(69129),i=e(26272);const l=({config:d,eventBus:c,sync:g,frame:u})=>{const E=(0,r.useRef)(u);return E.current=u,(0,r.useLayoutEffect)(()=>{let p=null;const b={point:{time:null},data:E.current};d.addHook("init",T=>{p=T});let a=null;d.addHook("setSeries",(T,M)=>{a=M}),d.addHook("setLegend",()=>{if(!(p.cursor.event==null)&&g()){let M=p.cursor.idxs.find(O=>O!=null);if(M==null)D();else{let O=M,S=a,v=p.data[0]??p.data[1][0];b.point.time=v[O],b.rowIndex=O??void 0,b.columnIndex=S??void 0,b.data=E.current;let x=p.cursor.top;b.point.panelRelY=x===0?.001:x>0?x/p.rect.height:1,f()}}});function h(T){const M=T.payload?.point?.time;if(M){const O=p.valToPos(M,"x");p.setCursor({left:O,top:p.rect.height/2})}}const P=new s.yU,y=new m.b_(b).setTags(["uplot"]),C=new m.ql().setTags(["uplot"]);let f=(0,t.throttle)(()=>{c.publish(y)},100),D=(0,t.throttle)(()=>{c.publish(C)},100);return P.add(c.getStream(m.b_).subscribe({next:T=>{c===T.origin||T.tags?.has("uplot")||h(T)}})),P.add(c.getStream(i.kb).subscribe({next:T=>h(T)})),P.add(c.getStream(m.ql).pipe((0,o.c)(50)).subscribe({next:T=>{c===T.origin||T.tags?.has("uplot")||p.cursor._lock||p.setCursor({left:-10,top:-10})}})),()=>{P.unsubscribe()}},[d]),null}},23117:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(2543),n=e.n(t),r=e(96540);const s=.1,o=2,m=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),i=d=>{let c=d.root.closest("[tabindex]"),g=new Set,u=null,E=null;if(!c)return;const p=(f,D)=>{const{cursor:T}=d;if(T.left===void 0||T.top===void 0)return;const{width:M,height:O}=d.over.style,[S,v]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(O))];d.setCursor({left:(0,t.clamp)(T.left+f,0,S),top:(0,t.clamp)(T.top+D,0,v)})},b=f=>{if(g.size===0||!d){E=null;return}const M=(f-(E??f))*s;let O=0,S=0;g.has("ArrowUp")&&(S-=M),g.has("ArrowDown")&&(S+=M),g.has("ArrowLeft")&&(O-=M),g.has("ArrowRight")&&(O+=M),g.has("Shift")&&(O*=o,S*=o),p(O,S);const{cursor:v}=d;if(g.has(" ")&&v){const x=Number(d.over.style.height.slice(0,-2));d.setSelect({left:v.left<u?v.left:u,top:0,width:Math.abs(v.left-(u??v.left)),height:x},!1)}E=f,window.requestAnimationFrame(b)},a=f=>{if(f.key==="Tab"){d.setCursor({left:-5,top:-5});return}if(!m.has(f.key))return;if(f.preventDefault(),f.stopPropagation(),!g.has(f.key)){const T=g.size===0;g.add(f.key),u=f.key===" "&&u===null?d.cursor.left:u,T&&window.requestAnimationFrame(b)}},h=f=>{m.has(f.key)&&(g.delete(f.key),f.key===" "&&(f.preventDefault(),f.stopPropagation(),d.setSelect(d.select),u=null))},P=()=>{if(!c?.matches(":focus-visible"))return;const f=parseFloat(d.over.style.width),D=parseFloat(d.over.style.height);d.setCursor({left:f/2,top:D/2})},y=()=>{E=null,u=null,g.clear(),d.setSelect({left:0,top:0,width:0,height:0},!1)};c.addEventListener("keydown",a),c.addEventListener("keyup",h),c.addEventListener("focus",P),c.addEventListener("blur",y);const C=()=>{c?.removeEventListener("keydown",a),c?.removeEventListener("keyup",h),c?.removeEventListener("focus",P),c?.removeEventListener("blur",y),c=null};(d.hooks.destroy??=[]).push(C)},l=({config:d})=>((0,r.useLayoutEffect)(()=>d.addHook("init",i),[d]),null)},16615:(Q,I,e)=>{"use strict";e.d(I,{T:()=>P,n:()=>C});var t=e(32196),n=e(96540),r=e(1604),s=e(94624),o=e(57875),m=e(24293),i=e(28240),l=e(83195),d=e(11261),c=e(14588),g=e(52622),u=e(40845),E=e(17464),p=e(3139),b=e(69503),a=e(16895);const h=10,P=({mode:D=g.$N.Single,sortOrder:T=g.xB.None,sync:M,timeZone:O,config:S,renderTooltip:v,...x})=>{const A=(0,n.useRef)(),R=(0,u.$j)(),[B,U]=(0,n.useState)(null),[w,K]=(0,n.useState)(null),[N,L]=(0,n.useState)([]),[V,F]=(0,n.useState)(null),[z,Y]=(0,n.useState)(!1),H=(0,r.A)();let k=null;const ee="TooltipPlugin",ie=(0,u.of)(f);if((0,n.useEffect)(()=>{(0,a.uY)(ee,!0,`Focused series: ${B}, focused point: ${w}`)},[w,B]),(0,n.useLayoutEffect)(()=>{let G;const ne=()=>{H()&&(Y(!0),A.current?.root.classList.add("plot-active"))},te=()=>{H()&&(F(null),Y(!1),A.current?.root.classList.remove("plot-active"))};S.addHook("syncRect",(le,ue)=>G=ue),S.addHook("init",le=>{A.current=le,le.over.addEventListener("mouseenter",ne),le.over.addEventListener("mouseleave",te),k=le.root.closest("[tabindex]"),k&&(k.addEventListener("focus",ne),k.addEventListener("blur",te)),M&&M()===s.y.Crosshair&&le.root.classList.add("shared-crosshair")});const oe=S.getTooltipInterpolator();return oe?S.addHook("setCursor",le=>{oe(U,K,ue=>{if(ue){F(null);return}if(!G)return;const{x:Te,y:he}=C(le,G);Te!==void 0&&he!==void 0&&F({x:Te,y:he})},le)}):(S.addHook("setLegend",le=>{H()&&(K(le.legend.idx),L(le.legend.idxs.slice()))}),S.addHook("setCursor",le=>{if(!G||!H())return;const{x:ue,y:Te}=C(le,G);F(ue!==void 0&&Te!==void 0?{x:ue,y:Te}:null)}),S.addHook("setSeries",(le,ue)=>{H()&&U(ue)})),()=>{F(null),A.current&&(A.current.over.removeEventListener("mouseleave",te),A.current.over.removeEventListener("mouseenter",ne),k&&(k.removeEventListener("focus",ne),k.removeEventListener("blur",te)))}},[S,F,Y,K,L]),w===null||!z&&M&&M()===s.y.Crosshair)return null;let fe=x.data.fields[0];if(!fe)return null;const q=fe.display||(0,o.J)({field:fe,timeZone:O,theme:R});let Z=null,J=q(fe.values[w]).text;if(v)Z=v(x.data,B,w);else{if(D===g.$N.Single&&B!==null){const G=x.data.fields[B];if(!G)return null;const ne=N?.[B]??w;J=q(fe.values[ne]).text;const oe=(G.display||(0,o.J)({field:G,timeZone:O,theme:R}))(G.values[ne]);Z=n.createElement(p.o,{series:[{color:oe.color||m.F,label:(0,i.Ct)(G,x.data,x.frames),value:oe?(0,l.cN)(oe):null}],timestamp:J})}if(D===g.$N.Multi){let G=[];const ne=x.data,te=ne.fields,oe=[];for(let le=0;le<te.length;le++){const ue=ne.fields[le];if(!ue||ue===fe||ue.type===d.PU.time||ue.type!==d.PU.number||ue.config.custom?.hideFrom?.tooltip||ue.config.custom?.hideFrom?.viz)continue;const Te=x.data.fields[le].values[N[le]],he=ue.display(Te);oe.push(Te),G.push({color:he.color||m.F,label:(0,i.Ct)(ue,ne,x.frames),value:he?(0,l.cN)(he):null,isActive:B===le})}if(T!==g.xB.None){const le=[...G],ue=c.sortValues(T);G.sort((Te,he)=>{const re=le.indexOf(Te),De=le.indexOf(he);return ue(oe[re],oe[De])})}Z=n.createElement(p.o,{series:G,timestamp:J})}}return n.createElement(E.ZL,{className:z?ie.tooltipWrapper:void 0},Z&&V&&n.createElement(b.o,{position:{x:V.x,y:V.y},offset:{x:h,y:h}},Z))};function y({left:D,top:T},M){return D===void 0||T===void 0?!1:D<0||D>M.width||T<0||T>M.height}function C(D,T){let M,O;const S=D.cursor.left||0,v=D.cursor.top||0;if(y(D.cursor,T)){const x=D.posToIdx(S);if(v<0||v>T.height){let A=(0,a.sw)(D,x);A&&(O=T.top+A,S>=0&&S<=T.width&&(M=T.left+D.valToPos(D.data[0][D.posToIdx(S)],D.series[0].scale)))}}else M=T.left+S,O=T.top+v;return{x:M,y:O}}const f=D=>({tooltipWrapper:(0,t.css)({"z-index":D.zIndex.portal+1+" !important"})})},77455:(Q,I,e)=>{"use strict";e.d(I,{b3:()=>u,xl:()=>h});var t=e(32196),n=e(96540),r=e(40961),s=e(40845),o=e(17464),m=e(29158);const i=({onClick:y,"aria-label":C,style:f})=>{const D=(0,s.of)(l);return n.createElement(m.K,{"aria-label":C??"Close",className:D,name:"times",onClick:y,style:f})},l=y=>(0,t.css)({position:"absolute",margin:"0px",right:y.spacing(1),top:y.spacing(1.25)}),d=void 0,c=void 0,g=10;var u=(y=>(y[y.xOne=0]="xOne",y[y.xAll=1]="xAll",y[y.xyOne=2]="xyOne",y))(u||{});function E(y,C){return{...y,...C,style:{...y.style,...C.style}}}function p(){return{style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}}}const b=5,a=y=>y!=null&&!y.ctrlKey&&!y.metaKey,h=({config:y,hoverMode:C,render:f,clientZoom:D=!1,queryZoom:T,maxWidth:M,maxHeight:O,syncTooltip:S=()=>!1})=>{const v=(0,n.useRef)(null),x=(0,n.useRef)(null);x.current==null&&(x.current=(0,o.gF)());const[{plot:A,isHovering:R,isPinned:B,contents:U,style:w,dismiss:K},N]=(0,n.useReducer)(E,null,p),L=(0,n.useRef)();M=B?d:M??d,O??=c;const V=(0,s.of)(P,M,O),F=(0,n.useRef)(f);return F.current=f,(0,n.useLayoutEffect)(()=>{L.current={width:0,height:0,observer:new ResizeObserver(pe=>{let Ue=L.current;for(const we of pe)we.borderBoxSize?.length>0?(Ue.width=we.borderBoxSize[0].inlineSize,Ue.height=we.borderBoxSize[0].blockSize):(Ue.width=we.contentRect.width,Ue.height=we.contentRect.height)})};let z=!1,Y=!1,H=A,k=R,ee=!1,ie=B,fe=w,q=!1;const Z=()=>{le?k=q&&ee&&S():k=oe!=null||C===1&&ee};let J=0,G=0,ne=null,te=A?.cursor.idxs.slice(),oe=null,le=!1,ue=!1,Te=!1;const he=(pe=!1)=>{ue||(k?queueMicrotask(De):setTimeout(De,100),ue=!0),pe&&(Te=!0)},re=pe=>{v.current.contains(pe.target)||Fe()},De=()=>{ue=!1,Te&&(fe={pointerEvents:ie?"all":"none"},H.cursor._lock=ie,ie?(document.addEventListener("mousedown",re,!0),document.addEventListener("keydown",re,!0)):(document.removeEventListener("mousedown",re,!0),document.removeEventListener("keydown",re,!0)),Te=!1);let pe={style:fe,isPinned:ie,isHovering:k,contents:k||ne!=null?F.current(H,te,oe,ie,Fe,ne,le):null,dismiss:Fe};N(pe),ne=null},Fe=()=>{let pe=ie;ie=!1,k=!1,H.setCursor({left:-10,top:-10}),he(pe)};y.addHook("init",pe=>{N({plot:H=pe}),D&&pe.over.addEventListener("mousedown",Ue=>{if(a(Ue)&&Ue.button===0&&Ue.shiftKey){Y=!0,pe.cursor.drag.x=!1,pe.cursor.drag.y=!0;let we=je=>{pe.cursor.drag.x=!0,pe.cursor.drag.y=!1,document.removeEventListener("mouseup",we,!0)};document.addEventListener("mouseup",we,!0)}},!0),pe.over.addEventListener("click",Ue=>{if(Ue.target===pe.over)if(Ue.ctrlKey||Ue.metaKey){let we;pe.scales.x.ori===0?we=pe.posToVal(pe.cursor.left,"x"):we=pe.posToVal(pe.select.top+pe.select.height,"x"),ne={from:we,to:we},he(!1)}else k&&oe!=null&&!ie&&(ie=!0,he(!0))})}),y.addHook("setSelect",pe=>{const Ue=pe.scales.x.ori===0;if(!le&&(D||T!=null))if(a(pe.cursor.event)){if(D&&Y){if(pe.select.height>=b){for(let we in pe.scales)if(we!=="x"){const je=Ue?pe.posToVal(pe.select.top,we):pe.posToVal(pe.select.left+pe.select.width,we),He=Ue?pe.posToVal(pe.select.top+pe.select.height,we):pe.posToVal(pe.select.left,we);pe.setScale(we,{min:He,max:je})}z=!0}Y=!1}else if(T!=null&&pe.select.width>=b){const we=Ue?pe.posToVal(pe.select.left,"x"):pe.posToVal(pe.select.top+pe.select.height,"x"),je=Ue?pe.posToVal(pe.select.left+pe.select.width,"x"):pe.posToVal(pe.select.top,"x");T({from:we,to:je}),z=!1}}else ne={from:Ue?pe.posToVal(pe.select.left,"x"):pe.posToVal(pe.select.top+pe.select.height,"x"),to:Ue?pe.posToVal(pe.select.left+pe.select.width,"x"):pe.posToVal(pe.select.top,"x")},he(!0);pe.setSelect({left:0,width:0,top:0,height:0},!1)}),(D||T!=null)&&y.setCursor({bind:{dblclick:pe=>()=>{if(!a(pe.cursor.event))return null;if(D&&z){for(let Ue in pe.scales)Ue!=="x"&&pe.setScale(Ue,{min:null,max:null});z=!1}else if(T!=null){let Ue=pe.scales.x;const we=Ue.min,je=Ue.max,He=(je-we)/2;T({from:we-He,to:je+He})}return null}}}),y.addHook("setData",pe=>{z=!1,Y=!1}),y.addHook("setSeries",(pe,Ue)=>{oe=Ue,le=pe.cursor.event==null,Z(),he()}),y.addHook("setLegend",pe=>{te=H?.cursor.idxs.slice(),ee=te.some((we,je)=>je>0&&we!=null),le=pe.cursor.event==null;let Ue=k;Z(),(k||k!==Ue)&&he()});const Ee=16;let Me=0,ze=0;const xe=()=>{k&&!ie&&Fe(),Me=window.innerWidth-Ee,ze=window.innerHeight-Ee},We=()=>{q=H.rect.bottom<=ze&&H.rect.top>=0&&H.rect.left>=0&&H.rect.right<=Me};xe(),y.addHook("ready",We),y.addHook("setCursor",pe=>{if(le=pe.cursor.event==null,!k)return;let{left:Ue=-10,top:we=-10}=pe.cursor;if(Ue>=0||we>=0){let je=pe.rect.left+Ue,He=pe.rect.top+we,rt="",{width:Je,height:Ve}=L.current;Je+=g,Ve+=g,G!==0?He+Ve<ze||He-Ve<0?G=0:G!==-Ve&&(G=-Ve):He+Ve>ze&&He-Ve>=0&&(G=-Ve),J!==0?je+Je<Me||je-Je<0?J=0:J!==-Je&&(J=-Je):je+Je>Me&&je-Je>=0&&(J=-Je);const Oe=je+(J===0?g:-g),Ne=He+(G===0?g:-g);rt=`translateX(${Oe}px) ${J===0?"":"translateX(-100%)"} translateY(${Ne}px) ${G===0?"":"translateY(-100%)"}`,v.current!=null?v.current.style.transform=rt:(fe.transform=rt,he())}});const be=pe=>{We(),k&&!ie&&pe.target instanceof HTMLElement&&pe.target.contains(H.root)&&Fe()};return window.addEventListener("resize",xe),window.addEventListener("scroll",be,!0),()=>{window.removeEventListener("resize",xe),window.removeEventListener("scroll",be,!0)}},[y]),(0,n.useLayoutEffect)(()=>{const z=L.current;if(v.current!=null){z.observer.observe(v.current);const{width:Y,height:H}=v.current.getBoundingClientRect();z.width=Y,z.height=H;const k=A.cursor.event;k!=null?A.over.dispatchEvent(k):A.setCursor({left:A.cursor.left,top:A.cursor.top},!0)}else z.width=0,z.height=0},[R]),A&&R?(0,r.createPortal)(n.createElement("div",{className:(0,t.cx)(V.tooltipWrapper,B&&V.pinned),style:w,"aria-live":"polite","aria-atomic":"true",ref:v},B&&n.createElement(i,{onClick:K}),U),x.current):null},P=(y,C,f)=>({tooltipWrapper:(0,t.css)({top:0,left:0,zIndex:y.zIndex.portal,whiteSpace:"pre",borderRadius:y.shape.radius.default,position:"fixed",background:y.colors.background.primary,border:`1px solid ${y.colors.border.weak}`,boxShadow:y.shadows.z2,userSelect:"text",maxWidth:C??"none",maxHeight:f??"none",overflowY:"auto"}),pinned:(0,t.css)({boxShadow:y.shadows.z3})})},10175:(Q,I,e)=>{"use strict";e.d(I,{j:()=>s});var t=e(96540);const n=5,r=o=>o!=null&&!o.ctrlKey&&!o.metaKey,s=({onZoom:o,config:m,withZoomY:i=!1})=>((0,t.useLayoutEffect)(()=>{let l=!1,d=!1;i&&m.addHook("init",c=>{c.over.addEventListener("mousedown",g=>{if(r(g)&&g.button===0&&g.shiftKey){d=!0,c.cursor.drag.x=!1,c.cursor.drag.y=!0;let u=E=>{c.cursor.drag.x=!0,c.cursor.drag.y=!1,document.removeEventListener("mouseup",u,!0)};document.addEventListener("mouseup",u,!0)}},!0)}),m.addHook("setSelect",c=>{const g=c.scales.x.ori===0;if(r(c.cursor.event)){if(i&&d){if(c.select.height>=n){for(let u in c.scales)if(u!=="x"){const E=g?c.posToVal(c.select.top,u):c.posToVal(c.select.left+c.select.width,u),p=g?c.posToVal(c.select.top+c.select.height,u):c.posToVal(c.select.left,u);c.setScale(u,{min:p,max:E})}l=!0}d=!1}else if(c.select.width>=n){const u=g?c.posToVal(c.select.left,"x"):c.posToVal(c.select.top+c.select.height,"x"),E=g?c.posToVal(c.select.left+c.select.width,"x"):c.posToVal(c.select.top,"x");o({from:u,to:E}),l=!1}}c.setSelect({left:0,width:0,top:0,height:0},!1)}),m.setCursor({bind:{dblclick:c=>()=>{if(!r(c.cursor.event))return null;if(i&&l){for(let g in c.scales)g!=="x"&&c.setScale(g,{min:null,max:null});l=!1}else{let g=c.scales.x;const u=g.min,E=g.max,p=(E-u)/2;o({from:u-p,to:E+p})}return null}}})},[m]),null)},66737:(Q,I,e)=>{"use strict";e.d(I,{Ku:()=>s.K,Tk:()=>n.T,Z7:()=>o.Z,jn:()=>t.j,xl:()=>r.xl});var t=e(10175),n=e(16615),r=e(77455),s=e(68268),o=e(23117)},52811:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n,s:()=>t});const t="__fixed";class n{constructor(s){this.props=s}}},16895:(Q,I,e)=>{"use strict";e.d(I,{NN:()=>c,Tz:()=>u,bq:()=>p,ro:()=>E,sw:()=>b,uY:()=>y});var t=e(11261),n=e(50311),r=e(52622),s=e(40621),o=e(91040),m=e(55129);const i=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function l(C){return C.replace(i,f=>`{${f}}`)}const d=(C,f,D)=>{let T=f%2?D[0]||D[2]:D[1]||D[3];return D[f]||!T?0:8},c={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[d,d,d,d],series:[],hooks:{}};var g=(C=>(C[C.Pos=1]="Pos",C[C.Neg=-1]="Neg",C))(g||{});function u(C){let f=[],{series:D,dir:T}=C,M=D.length-1,O=D.slice().reverse();return O.forEach((S,v)=>{if(v!==M){let x=O[v+1];f.push({series:[S,x],dir:-1*T})}}),f}function E(C){let f=new Map;return C.fields.forEach(({config:D,values:T,type:M},O)=>{if(O===0)return;let{custom:S}=D;if(S==null||S.hideFrom?.viz)return;let{stacking:v}=S;if(v==null)return;let{mode:x,group:A}=v;if(x===r.gs.None)return;let R=S.transform,B=a(R,T),U=S.drawStyle,w=U===r.GR.Bars?S.barAlignment:U===r.GR.Line?S.lineInterpolation:null,K=`${B}|${x}|${A}|${(0,m.M)(D,M)}|${U}|${w}`,N=f.get(K);N==null&&(N={series:[],dir:B},f.set(K,N)),N.series.push(O)}),[...f.values()]}function p(C,f,D){let T=Array(C.fields.length),M=f.length,O=C.length,S=M>0?Array(O).fill(0):[],v=M>0?Array(O).fill(!1):[],x=Array.from({length:M},()=>S.slice()),A=Array.from({length:M},()=>v.slice());if(f.forEach((R,B)=>{let U=A[B];R.series.forEach(w=>{let K=C.fields[w];if(K.config.custom?.hideFrom?.viz)return;let N=K.values;for(let L=0;L<O;L++)N[L]!=null&&(U[L]=!0)})}),C.fields.forEach((R,B)=>{let U=R.values;if(B===0){R.type===t.PU.time?T[B]=(0,n.ks)(R).values:T[B]=U;return}let{custom:w}=R.config;if(!w||w.hideFrom?.viz){T[B]=U;return}if(w.transform===r.NU.Constant){let N=U.findIndex(V=>V!=null),L=U[N];U=Array(U.length).fill(void 0),U[N]=L}else if(U=U.slice(),w.transform===r.NU.NegativeY)for(let N=0;N<U.length;N++)U[N]!=null&&(U[N]*=-1);let K=w.stacking?.mode;if(!K||K===r.gs.None)T[B]=U;else{let N=f.findIndex(z=>z.series.indexOf(B)>-1),L=x[N],V=A[N],F=T[B]=Array(O);for(let z=0;z<O;z++){let Y=U[z];Y!=null?F[z]=L[z]+=Y:F[z]=V[z]?L[z]:Y}}}),D){let R=T.map((B,U)=>{let w=f.findIndex(K=>K.series.indexOf(U)>-1);return w!==-1?x[w]:B});D({totals:R})}return C.fields.forEach((R,B)=>{if(B===0||R.config.custom?.hideFrom?.viz)return;if(R.config.custom?.stacking?.mode===r.gs.Percent){let w=f.findIndex(V=>V.series.indexOf(B)>-1),K=x[w],N=f[w],L=T[B];for(let V=0;V<O;V++){let F=L[V];F!=null&&(L[V]=K[V]===0?0:N.dir*(F/K[V]))}}}),T}function b(C,f){let D,T=1,M=1,O=C.data[1][f],S=C.data[1][f];for(let v=1;v<C.data.length;v++){const A=C.data[v][f];A!=null&&(O==null?O=A:A>O&&(O=C.data[v][f],T=v),S==null?S=A:A<S&&(S=C.data[v][f],M=v))}return S==null&&O==null?D=void 0:S!=null&&O!=null?D=(C.valToPos(S,C.series[M].scale)+C.valToPos(O,C.series[T].scale))/2:D=C.valToPos(S||O,C.series[T||M].scale),D!==void 0&&D<0&&(D=C.bbox.height/devicePixelRatio),D}function a(C,f){const D=h(f);return C===r.NU.NegativeY?D?1:-1:D?-1:1}function h(C,f=100){const D=C.length;if(D===0)return!1;let T=0,M=D-1;for(;T<=M&&C[T]==null;)T++;for(;M>=T&&C[M]==null;)M--;let O=0,S=0;if(M>=T){const v=Math.max(1,Math.floor((M-T+1)/f));for(let x=T;x<=M;x+=v){const A=C[x];A!=null&&typeof A=="number"&&(A<0||Object.is(A,-0)?O++:A>0&&S++)}if(O>S)return!0}return!1}const P=(0,o.h)("uPlot"),y=P.logger;(0,s.h)("graphng",void 0,P)},48747:(Q,I,e)=>{"use strict";e.d(I,{T:()=>a});var t=e(34796),n=e.n(t),r=e(2543),s=e(96540),o=e(61443),m=e(52622),i=e(75128),l=e(33083),d=e(3139),c=e(65036);const g=({dimensions:P,activeDimensions:y,pos:C,timeZone:f})=>{let D=null;if(y.xAxis===null)return null;y.yAxis&&(D=y.yAxis[0]);const T=y.xAxis[1]?(0,o.WK)(P.xAxis,y.xAxis[0],y.xAxis[1]):C.x,M=(0,c.DU)(P.yAxis.columns,P.xAxis.columns,T,f),O=M.time,S=M.results.map((v,x)=>({color:v.color,label:v.label,value:v.value,isActive:D===x}));return s.createElement(d.o,{series:S,timestamp:O})};g.displayName="MultiModeGraphTooltip";var u=e(83195),E=e(28240);const p=({dimensions:P,activeDimensions:y,timeZone:C})=>{if(y.yAxis===null||y.yAxis[1]===void 0||y.xAxis===null||y.xAxis[1]===void 0)return null;const f=(0,o.WK)(P.xAxis,y.xAxis[0],y.xAxis[1]),D=(0,o.P4)(P.xAxis,y.xAxis[0]),T=D.display?(0,u.cN)(D.display(f)):f,M=(0,o.P4)(P.yAxis,y.yAxis[0]),O=(0,o.WK)(P.yAxis,y.yAxis[0],y.yAxis[1]),S=M.display,v=S(O);return s.createElement(d.o,{series:[{color:v.color,label:(0,E.Ct)(M),value:(0,u.cN)(v)}],timestamp:T})};p.displayName="SingleModeGraphTooltip";const b=({mode:P=m.$N.Single,dimensions:y,activeDimensions:C,pos:f,timeZone:D})=>!C||!C.xAxis?null:P==="single"?s.createElement(p,{dimensions:y,activeDimensions:C,timeZone:D}):s.createElement(g,{dimensions:y,activeDimensions:C,pos:f,timeZone:D});b.displayName="GraphTooltip";class a extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(y,C)=>{const{onHorizontalRegionSelected:f}=this.props;f&&f(C.xaxis.from,C.xaxis.to)},this.onPlotHover=(y,C,f)=>{this.setState({isTooltipVisible:!0,activeItem:f,pos:C})},this.onPlotClick=(y,C,f)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:f,contextPos:C})},this.renderTooltip=()=>{const{children:y,series:C,timeZone:f}=this.props,{pos:D,activeItem:T,isTooltipVisible:M}=this.state;let O;if(!M||!D||C.length===0||(s.Children.forEach(y,K=>{if(O)return;(K&&K.type&&(K.type.displayName||K.type.name))===i.n.displayName&&(O=K)}),!O))return null;const S=O.props,v=S.mode||"single";if(!T&&v==="single")return null;const x=S.tooltipComponent||b,A=T?T.series.seriesIndex:0,R=T?T.dataIndex:void 0,B={xAxis:[A,R],yAxis:T?[T.series.seriesIndex,T.dataIndex]:null},U={dimensions:{xAxis:(0,o.r4)("xAxis",C.map(K=>K.timeField)),yAxis:(0,o.r4)("yAxis",C.map(K=>K.valueField))},activeDimensions:B,pos:D,mode:S.mode||m.$N.Single,timeZone:f},w=s.createElement(x,{...U});return s.cloneElement(O,{content:w,position:{x:D.pageX,y:D.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:y}=this.props,{contextPos:C,contextItem:f,isContextVisible:D}=this.state;if(!D||!C||!f||y.length===0)return null;const T=f?f.series.seriesIndex:0,M=f?f.dataIndex:void 0,O={xAxis:[T,M],yAxis:f?[f.series.seriesIndex,f.dataIndex]:null},S={xAxis:(0,o.r4)("xAxis",y.map(R=>R.timeField)),yAxis:(0,o.r4)("yAxis",y.map(R=>R.valueField))},v=()=>this.setState({isContextVisible:!1}),x=()=>({datapoint:f.datapoint,dataIndex:f.dataIndex,series:f.series,seriesIndex:f.series.seriesIndex,pageX:C.pageX,pageY:C.pageY}),A={x:C.pageX,y:C.pageY,onClose:v,getContextMenuSource:x,timeZone:this.props.timeZone,dimensions:S,contextDimensions:O};return s.createElement(l.H,{...A})},this.getBarWidth=()=>{const{series:y}=this.props;return Math.min(...y.map(C=>C.timeStep))}}static{this.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1}}componentDidUpdate(y,C){y!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(y){return y.length===0?[{show:!0,min:-1,max:1}]:(0,r.uniqBy)(y.map(C=>{const f=C.yAxis?C.yAxis.index:1,D=C.yAxis&&C.yAxis.min&&!isNaN(C.yAxis.min)?C.yAxis.min:null,T=C.yAxis&&C.yAxis.tickDecimals&&!isNaN(C.yAxis.tickDecimals)?C.yAxis.tickDecimals:null;return{show:!0,index:f,position:f===1?"left":"right",min:D,tickDecimals:T}}),C=>C.index)}draw(){if(this.element===null)return;const{width:y,series:C,timeRange:f,showLines:D,showBars:T,showPoints:M,isStacked:O,lineWidth:S,timeZone:v,onHorizontalRegionSelected:x}=this.props;if(!y)return;const A=y/100,R=f.from.valueOf(),B=f.to.valueOf(),U=this.getYAxes(C),w={legend:{show:!1},series:{stack:O,lines:{show:D,lineWidth:S,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:T,fill:1,barWidth:T?this.getBarWidth()/1.5:1,zero:!1,lineWidth:S},shadowSize:0},xaxis:{timezone:v,show:!0,mode:"time",min:R,max:B,label:"Datetime",ticks:A,timeformat:(0,c.Jc)(A,R,B),tickFormatter:c.Yn},yaxes:U,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:x?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,C.filter(K=>K.isVisible),w)}catch(K){throw console.error("Graph rendering error",K,w,C),new Error("Error rendering panel")}}render(){const{ariaLabel:y,height:C,width:f,series:D}=this.props,T=D.length===0,M=this.renderTooltip(),O=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":y},s.createElement("div",{className:"graph-panel__chart",ref:S=>this.element=S,style:{height:C,width:f},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),T&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,O)}}const h=null},33083:(Q,I,e)=>{"use strict";e.d(I,{H:()=>u,i:()=>E});var t=e(32196),n=e(96540),r=e(61443),s=e(72724),o=e(28122),m=e(9286),i=e(66864),l=e(59093),d=e(64539),c=e(94536),g=e(40845);const u=({getContextMenuSource:b,timeZone:a,itemsGroup:h,dimensions:P,contextDimensions:y,...C})=>{const f=b(),D=h?h.map(O=>({...O,items:O.items?.filter(S=>S.label)})):[],T=()=>{if(!f)return null;let O;if(P?.yAxis&&y?.yAxis?.[1]){const v=(0,r.WK)(P.yAxis,y.yAxis[0],y.yAxis[1]),x=f.series.valueField.display;O=x(v)}const S=(0,s.LE)(f.datapoint[0],{defaultWithMS:f.series.hasMsResolution,timeZone:a});return n.createElement(E,{timestamp:S,seriesColor:f.series.color,displayName:f.series.alias||f.series.label,displayValue:O})},M=()=>D?.map((O,S)=>n.createElement(l.r,{key:`${O.label}${S}`,label:O.label},(O.items||[]).map(v=>n.createElement(d.D,{key:`${v.label}`,url:v.url,label:v.label,target:v.target,icon:v.icon,active:v.active,onClick:v.onClick}))));return n.createElement(o.t,{...C,renderMenuItems:M,renderHeader:T})},E=({timestamp:b,seriesColor:a,displayName:h,displayValue:P})=>{const y=(0,g.of)(p);return n.createElement("div",{className:y.wrapper},n.createElement("strong",null,b),n.createElement(i.Gy,null,n.createElement("div",null,n.createElement(c.p,{color:a}),n.createElement("span",{className:y.displayName},h)),P&&n.createElement(m.i,{value:P})))};function p(b){return{wrapper:(0,t.css)({padding:b.spacing(.5,1),fontSize:b.typography.size.sm,zIndex:b.zIndex.tooltip}),displayName:(0,t.css)({whiteSpace:"nowrap",paddingLeft:b.spacing(.5)})}}},84656:(Q,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(2543),n=e.n(t),r=e(96540);class s extends r.Component{constructor(m){super(m),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:m.series}}componentDidUpdate(m){const{series:i}=this.props;(0,t.isEqual)(m.series,i)||this.setState({hiddenSeries:[],toggledSeries:i})}onSeriesToggle(m,i){const{series:l,onHiddenSeriesChanged:d}=this.props,{hiddenSeries:c}=this.state;if(i.ctrlKey||i.metaKey||i.shiftKey){const p=c.indexOf(m)>-1?c.filter(a=>a!==m):c.concat([m]),b=l.map(a=>({...a,isVisible:p.indexOf(a.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:b},()=>d?d(p):void 0);return}const g=l.map(p=>p.label),u=c.length+1===g.length?[]:(0,t.difference)(g,[m]),E=l.map(p=>({...p,isVisible:u.indexOf(p.label)===-1}));this.setState({hiddenSeries:u,toggledSeries:E},()=>d?d(u):void 0)}render(){const{children:m}=this.props,{toggledSeries:i}=this.state;return m({onSeriesToggle:this.onSeriesToggle,toggledSeries:i})}}},5484:(Q,I,e)=>{"use strict";e.d(I,{I:()=>l});var t=e(32196),n=e(96540),r=e(40276),s=e(55726),o=e(40845),m=e(48747);const i=(c,g=!1,u=!1)=>{const E=c.reduce((b,a)=>b+(a[1]||0),0)===0,p=!c.reduce((b,a)=>b&&a[1]!==null,!0);return g&&p||u&&E},l=c=>{const{series:g,timeRange:u,width:E,height:p,showBars:b,showLines:a,showPoints:h,sortLegendBy:P,sortLegendDesc:y,legendDisplayMode:C,legendVisibility:f,placement:D,onSeriesToggle:T,onToggleSort:M,hideEmpty:O,hideZero:S,isStacked:v,lineWidth:x,onHorizontalRegionSelected:A,timeZone:R,children:B,ariaLabel:U}=c,{graphContainer:w,wrapper:K,legendContainer:N}=(0,o.of)(d,c.placement),L=g.reduce((V,F)=>i(F.data,O,S)?V:V.concat([{label:F.label,color:F.color||"",disabled:!F.isVisible,yAxis:F.yAxis.index,getDisplayValues:()=>F.info||[]}]),[]);return n.createElement("div",{className:K,"aria-label":U},n.createElement("div",{className:w},n.createElement(m.T,{series:g,timeRange:u,timeZone:R,showLines:a,showPoints:h,showBars:b,width:E,height:p,isStacked:v,lineWidth:x,onHorizontalRegionSelected:A},B)),f&&n.createElement("div",{className:N},n.createElement(r.E,{hideHorizontalTrack:!0},n.createElement(s.t,{items:L,displayMode:C,placement:D,sortBy:P,sortDesc:y,onLabelClick:(V,F)=>{T&&T(V.label,F)},onToggleSort:M}))))},d=(c,g)=>({wrapper:(0,t.css)({display:"flex",flexDirection:g==="bottom"?"column":"row"}),graphContainer:(0,t.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,t.css)({padding:"10px 0",maxHeight:g==="bottom"?"35%":"none"})})},65036:(Q,I,e)=>{"use strict";e.d(I,{DU:()=>m,Jc:()=>l,Yn:()=>i});var t=e(83195),n=e(28240),r=e(72724),s=e(42994);const o=(d,c)=>{let g=0,u=d.values.length-1,E;for(;;){if(g>u)return Math.max(u,0);E=Math.floor((g+u)/2);const p=d.values[E];if(p===c)return E;p&&p<c?g=E+1:u=E-1}},m=(d,c,g,u)=>{let E,p,b,a,h;const P=[];let y,C;for(E=0;E<d.length;E++){p=d[E];const f=c[E];b=o(f,g),a=g-f.values[b],h=f.values[b],(y===void 0||a>=0&&(a<y||y<0)||a<0&&a>y)&&(y=a,C=f.display?(0,t.cN)(f.display(h)):h);const D=p.display(p.values[b]);P.push({value:(0,t.cN)(D),datapointIndex:b,seriesIndex:E,color:D.color,label:(0,n.Ct)(p),time:f.display?(0,t.cN)(f.display(h)):h})}return{results:P,time:C}},i=(d,c)=>(0,r.LE)(d,{format:c?.options?.timeformat,timeZone:c?.options?.timezone}),l=(d,c,g)=>{if(c&&g&&d){const u=g-c,E=u/d/1e3,p=86400010,b=31536e6;return E<=10?s.WC.interval.millisecond:E<=45?s.WC.interval.second:u<=p?s.WC.interval.minute:E<=8e4?s.WC.interval.hour:u<=b?s.WC.interval.day:E<=31536e3?s.WC.interval.month:s.WC.interval.year}return s.WC.interval.minute}},99755:(Q,I,e)=>{"use strict";e.d(I,{o:()=>b});var t=e(96540),n=e(64423),r=e(99165),s=e(85200),o=e(1173),m=e(11261),i=e(69129),l=e(26272),d=e(79041),c=e(67266),g=e(81297),u=e(16895),E=e(65575);function p(a,h,P=[]){for(const y of P)if(typeof y=="function"){if(!y(a,h))return!1}else if(h[y]!==a[y])return!1;return!0}class b extends t.Component{constructor(h){super(h),this.panelContext={},this.subscription=new n.yU,this.getTimeRange=()=>this.props.timeRange;let P=this.prepState(h);P.alignedData=P.config.prepData([P.alignedFrame]),this.state=P,this.plotInstance=t.createRef()}static{this.contextType=d.e4}prepState(h,P=!0){let y=null;const{frames:C,fields:f,preparePlotFrame:D}=h,M=(D||E.mY)(C,f||{x:s.sJ.get(o.Ct.firstTimeField).get({}),y:s.sJ.get(o.Ct.byTypes).get(new Set([m.PU.number,m.PU.enum]))},h.timeRange);if((0,u.uY)("GraphNG",!1,"data aligned",M),M){let O=this.state?.config;P&&(O=h.prepConfig(M,this.props.frames,this.getTimeRange),(0,u.uY)("GraphNG",!1,"config prepared",O)),y={alignedFrame:M,config:O},(0,u.uY)("GraphNG",!1,"data prepared",y.alignedData)}return y}handleCursorUpdate(h){const P=h.payload?.point?.time,y=this.plotInstance.current;if(y&&P){const C=y.valToPos(P,"x");let f;if(C&&(f=(0,u.sw)(y,y.posToIdx(C))),!f||!C)return;y.setCursor({left:C,top:f})}}componentDidMount(){this.panelContext=this.context;const{eventBus:h}=this.panelContext;this.subscription.add(h.getStream(i.b_).pipe((0,r.c)(50)).subscribe({next:P=>{h!==P.origin&&this.handleCursorUpdate(P)}})),this.subscription.add(h.getStream(l.kb).pipe((0,r.c)(50)).subscribe({next:P=>this.handleCursorUpdate(P)})),this.subscription.add(h.getStream(i.ql).pipe((0,r.c)(50)).subscribe({next:()=>{const P=this.plotInstance?.current;P&&!P.cursor._lock&&P.setCursor({left:-10,top:-10})}}))}componentDidUpdate(h){const{frames:P,structureRev:y,timeZone:C,propsToDiff:f}=this.props,D=!p(h,this.props,f);if(P!==h.frames||D||C!==h.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||C!==h.timeZone||y!==h.structureRev||!y||D)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,u.uY)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:h,height:P,children:y,renderLegend:C}=this.props,{config:f,alignedFrame:D,alignedData:T}=this.state;return f?t.createElement(c.KU,{width:h,height:P,legend:C(f)},(M,O)=>t.createElement(g.Z,{config:f,data:T,width:M,height:O,plotRef:S=>this.plotInstance.current=S},y?y(f,D):null)):null}}},16998:(Q,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(96540);const n=t.createContext({}),r=()=>{const{data:s,dimFields:o,mapSeriesIndexToDataFrameFieldIndex:m}=(0,t.useContext)(n),i=(0,t.useCallback)(()=>{const l=o.x;let d=null;for(let c=0;c<s.fields.length;c++)if(l(s.fields[c],s,[s])){d=s.fields[c];break}return d},[s,o]);return{dimFields:o,mapSeriesIndexToDataFrameFieldIndex:m,getXAxisField:i,alignedData:s}}},65575:(Q,I,e)=>{"use strict";e.d(I,{My:()=>E,wX:()=>c,mY:()=>u});var t=e(11261),n=e(73060),r=e(52622),s=e(52811);const o={threshold:(b,a,h)=>b+h,midpoint:(b,a,h)=>(b+a)/2,plusone:(b,a,h)=>b+1};function m(b){if(b.frame.length===0)return b.frame;let a=!0,{frame:h,refFieldName:P,refFieldPseudoMax:y,refFieldPseudoMin:C,insertMode:f}=b;f||(f=o.threshold);const D=c(h,P);if(D==null)return h;D.state={...D.state,nullThresholdApplied:!0};const T=h.fields.map(O=>O.config.custom?.insertNulls||D.config.interval||null),M=new Set(T);if(M.delete(null),M.size===0)return h;if(M.size===1){const O=M.values().next().value;if(O<=0)return h;const S=D.values,v=h.fields.map(A=>A.values),x=i(S,v,O,C,y,f,a);return x===v?h:{...h,length:x[0].length,fields:h.fields.map((A,R)=>({...A,values:x[R]}))}}return h}function i(b,a,h,P=null,y=null,C,f){const D=b.length,T=[];if(P!=null&&P<b[0]){let v=Math.ceil((b[0]-P)/h),x=b[0]-v*h;for(;x<b[0];)T.push(C(x-h,x,h)),x+=h}T.push(b[0]);let M=b[0];for(let v=1;v<D;v++){const x=b[v];for(;x-M>h&&(T.push(C(M,x,h)),M+=h,!!f););T.push(x),M=x}if(y!=null&&y>M)for(;M+h<y;)T.push(C(M,y,h)),M+=h;const O=T.length;if(O===D)return a;const S=[];for(let v of a){let x;if(v!==b){x=Array(O);for(let A=0,R=0;A<O;A++)x[A]=b[R]===T[A]?v[R++]:null}else x=T;S.push(x)}return S}function l(b,a,h){let P,y;for(let C=0;C<a.length;C++)if(a[C]==null)y==null&&P!=null&&(y=C);else{if(y!=null){if(b[C]-P<h)for(;y<C;)a[y++]=void 0;y=null}P=b[C]}return a}function d(b){return b.type===t.PU.number&&b.config.custom?.drawStyle===r.GR.Bars&&!b.config.custom?.hideFrom?.viz}function c(b,a){return b.fields.find(h=>a!=null?h.name===a:h.type===t.PU.time)}function g(b,a){const h=c(b,a);let P=h?.values;for(let y=0;y<b.fields.length;y++){let C=b.fields[y];if(C===h||d(C))continue;let f=C.config.custom?.spanNulls;typeof f=="number"&&f!==-1&&P&&(C.values=l(P,C.values,f))}return b}function u(b,a,h){let P;e:for(let D of b)for(let T of D.fields)if(a.x(T,D,b)){P=T;break e}b=b.map(D=>P?.state?.nullThresholdApplied?D:m({frame:D,refFieldName:P.name,refFieldPseudoMin:h?.from.valueOf(),refFieldPseudoMax:h?.to.valueOf()}));let y=0;b.forEach(D=>{D.fields.forEach(T=>{d(T)&&(T.config.custom={...T.config.custom,spanNulls:-1},y++)})});let C=1/0;y>1&&b.forEach(D=>{if(!D.fields.some(d))return;const T=P.values;for(let M=0;M<T.length;M++)M>0&&(C=Math.min(C,T[M]-T[M-1]))});let f=(0,n.Fd)({frames:b,joinBy:a.x,keep:a.y,keepOriginIndices:!0});return f?(f=g(f,P.name),C!==1/0&&(f.fields.forEach((D,T)=>{let M=D.values;if(T===0){let O=M[M.length-1];M.push(O+C,O+2*C)}else d(D)?M.push(null,null):M.push(void 0,void 0)}),f.length+=2),f):null}function E(b,a){const h="na",P=`${b.min!==void 0?b.min:h}-${b.max!==void 0?b.max:h}`,y=`${b.custom?.axisSoftMin!==void 0?b.custom.axisSoftMin:h}-${b.custom?.axisSoftMax!==void 0?b.custom.axisSoftMax:h}`,C=`${b.custom?.axisPlacement!==void 0?b.custom?.axisPlacement:r.vM.Auto}`,f=b.unit??s.s,D=b.custom?.scaleDistribution?p(b.custom.scaleDistribution):r.L4.Linear,T=b.custom?.axisLabel?b.custom.axisLabel:h;return`${f}/${P}/${y}/${C}/${D}/${T}/${a}`}function p(b){return b.type===r.L4.Log?`${b.type}${b.log}`:b.type}},18262:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>x});var t=e(96540),n=e(79041),r=e(24182),s=e(40845),o=e(99755),m=e(2543),i=e(36613),l=e(11261),d=e(83195),c=e(57875),g=e(8066),u=e(24293),E=e(28240),p=e(94624),b=e(52622),a=e(51336),h=e(74863),P=e(16895),y=e(65575);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),f=Array(53);for(let A=0;A<f.length;A++)f[A]=2**A;const D=(A,R=1)=>A==null?"-":A.toFixed(R),T={drawStyle:b.GR.Line,showPoints:b.yL.Auto,axisPlacement:b.vM.Auto},M=({frame:A,theme:R,timeZones:B,getTimeRange:U,sync:w,allFrames:K,renderers:N,tweakScale:L=z=>z,tweakAxis:V=z=>z,eventsScope:F="__global_"})=>{const z=new a.e(B[0]);let Y;z.setPrepData(te=>(Y=te[0],(0,P.bq)(te[0],z.getStackingGroups())));const H=A.fields[0];if(!H)return z;const k="x";let ee="";const ie=H.config.custom?.axisPlacement!==b.vM.Hidden?b.vM.Bottom:b.vM.Hidden,fe=H.config.custom?.axisPlacement!==b.vM.Hidden;if(H.type===l.PU.time){z.addScale({scaleKey:k,orientation:b.Lt.Horizontal,direction:b.ON.Right,isTime:!0,range:()=>{const oe=U();return[oe.from.valueOf(),oe.to.valueOf()]}});const te=B.length>1?(oe,le)=>le.map((ue,Te)=>Te<2?null:ue):void 0;for(let oe=0;oe<B.length;oe++){const le=B[oe];z.addAxis({scaleKey:k,isTime:!0,placement:ie,show:fe,label:H.config.custom?.axisLabel,timeZone:le,theme:R,grid:{show:oe===0&&H.config.custom?.axisGridShow},filter:te})}B.length>1&&z.addHook("drawAxes",oe=>{oe.ctx.save(),oe.ctx.fillStyle=R.colors.text.primary,oe.ctx.textAlign="left",oe.ctx.textBaseline="bottom";let le=0;oe.axes.forEach(ue=>{if(ue.side===2){let Te=ue._pos+ue._size;oe.ctx.fillText(B[le],oe.bbox.left,Te*i.A.pxRatio),le++}}),oe.ctx.restore()})}else z.addScale({scaleKey:k,orientation:b.Lt.Horizontal,direction:b.ON.Right,range:(te,oe,le)=>[H.config.min??oe,H.config.max??le]}),z.addAxis({scaleKey:k,placement:ie,show:fe,label:H.config.custom?.axisLabel,theme:R,grid:{show:H.config.custom?.axisGridShow},formatValue:(te,oe)=>(0,d.cN)(H.display(te,oe))});let q=N?.flatMap(te=>Object.values(te.fieldMap).filter(oe=>te.indicesOnly.indexOf(oe)===-1))??[],Z;for(let te=1;te<A.fields.length;te++){const oe=A.fields[te],le={...oe.config,custom:{...T,...oe.config.custom}},ue=le.custom;if(oe===H||oe.type!==l.PU.number&&oe.type!==l.PU.enum)continue;let Te=oe.display??D;oe.config.custom?.stacking?.mode===b.gs.Percent&&(Te=(0,c.J)({field:{...oe,config:{...oe.config,unit:"percentunit"}},theme:R}));const he=(0,y.My)(le,oe.type),re=(0,g.Qi)(oe),Fe=(0,g.lz)(oe,R).color;if(z.addScale(L({scaleKey:he,orientation:b.Lt.Vertical,direction:b.ON.Up,distribution:ue.scaleDistribution?.type,log:ue.scaleDistribution?.log,linearThreshold:ue.scaleDistribution?.linearThreshold,min:oe.config.min,max:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,centeredZero:ue.axisCenteredZero,range:ue.stacking?.mode===b.gs.Percent?(pe,Ue,we)=>(Ue=Ue<0?-1:0,we=we>0?1:0,[Ue,we]):oe.type===l.PU.enum?(pe,Ue,we)=>[-1,oe.config.type.enum.text.length]:void 0,decimals:oe.config.decimals},oe)),ee||(ee=he),ue.axisPlacement!==b.vM.Hidden){let pe;ue.axisColorMode===b.Y$.Series&&(re.isByValue&&oe.config.custom?.gradientMode===b.on.Scheme&&re.id===u.Y.Thresholds?pe=(0,h.pl)(1,R,re,oe.config.thresholds):pe=Fe);const Ue={border:{show:ue.axisBorderShow||!1,width:1/devicePixelRatio,stroke:pe||R.colors.text.primary},ticks:{show:ue.axisBorderShow||!1,stroke:pe||R.colors.text.primary},color:pe||R.colors.text.primary};let we,je,He;if(C.has(le.unit))we=f;else if(oe.type===l.PU.enum){let rt=oe.config.type.enum.text;He=rt.map((Je,Ve)=>Ve),je=rt}z.addAxis(V({scaleKey:he,label:ue.axisLabel,size:ue.axisWidth,placement:ue.axisPlacement??b.vM.Auto,formatValue:(rt,Je)=>(0,d.cN)(Te(rt,Je)),theme:R,grid:{show:ue.axisGridShow},decimals:oe.config.decimals,distr:ue.scaleDistribution?.type,splits:He,values:je,incrs:we,...Ue},oe))}const Ee=ue.drawStyle===b.GR.Points?b.yL.Always:ue.showPoints;let Me=()=>null;ue.spanNulls!==!0&&(Me=(pe,Ue,we,je)=>{let He=[],rt=pe.series[Ue];if(!we&&je&&je.length){const[Je,Ve]=rt.idxs,Oe=pe.data[0],Ne=pe.data[Ue],ye=Math.round(pe.valToPos(Oe[Je],"x",!0)),se=Math.round(pe.valToPos(Oe[Ve],"x",!0));je[0][0]===ye&&He.push(Je);for(let ae=0;ae<je.length;ae++){let ge=je[ae],Pe=je[ae+1];if(Pe&&ge[1]===Pe[0]){let Re=pe.posToIdx(ge[1],!0);if(Ne[Re]==null)for(let Be=1;Be<100;Be++){if(Ne[Re+Be]!=null){Re+=Be;break}if(Ne[Re-Be]!=null){Re-=Be;break}}He.push(Re)}}je[je.length-1][1]===se&&He.push(Ve)}return He.length?He:null});let{fillOpacity:ze}=ue,xe=null,We=null;if(oe.state?.origin){Z||(Z=O(A,K));const pe=K[oe.state.origin.frameIndex],Ue=pe?.fields[oe.state.origin.fieldIndex],we=(0,E.Ct)(Ue??oe,pe,K);if(q.indexOf(we)>=0)xe=()=>null,We=()=>{};else if(ue.transform===b.NU.Constant){const je=i.A.paths.linear();xe=(He,rt)=>{const Je=He._data,Ve=U();let Oe=[Ve.from.valueOf(),Ve.to.valueOf()],Ne=Je[rt].find(ae=>ae!=null),ye=[Ne,Ne],se=Je.slice();return se[0]=Oe,se[rt]=ye,je({...He,_data:se},rt,0,1)}}if(ue.fillBelowTo){const je=A.fields.find(Ve=>ue.fillBelowTo===Ve.name||ue.fillBelowTo===Ve.config?.displayNameFromDS||ue.fillBelowTo===(0,E.Ct)(Ve,A,K)),He=je?(0,E.Ct)(je,A,K):ue.fillBelowTo,rt=Z.get(we),Je=Z.get(He);(0,m.isNumber)(Je)&&(0,m.isNumber)(rt)?(z.addBand({series:[rt,Je],fill:void 0}),ze||(ze=35)):ze=0}}let be;re.id===u.Y.Thresholds&&(be=pe=>(0,g.lz)(Y.fields[pe],R).color),z.addSeries({pathBuilder:xe,pointsBuilder:We,scaleKey:he,showPoints:Ee,pointsFilter:Me,colorMode:re,fillOpacity:ze,theme:R,dynamicSeriesColor:be,drawStyle:ue.drawStyle,lineColor:ue.lineColor??Fe,lineWidth:ue.lineWidth,lineInterpolation:ue.lineInterpolation,lineStyle:ue.lineStyle,barAlignment:ue.barAlignment,barWidthFactor:ue.barWidthFactor,barMaxWidth:ue.barMaxWidth,pointSize:ue.pointSize,spanNulls:ue.spanNulls||!1,show:!ue.hideFrom?.viz,gradientMode:ue.gradientMode,thresholds:le.thresholds,hardMin:oe.config.min,hardMax:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,dataFrameFieldIndex:oe.state?.origin}),ue.thresholdsStyle&&le.thresholds&&(ue.thresholdsStyle.mode??b.Ly.Off)!==b.Ly.Off&&z.addThresholds({config:ue.thresholdsStyle,thresholds:le.thresholds,scaleKey:he,theme:R,hardMin:oe.config.min,hardMax:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax})}let J=(0,P.ro)(A);z.setStackingGroups(J),N?.forEach(te=>{Z||(Z=O(A,K));let oe={};for(let le in te.fieldMap){let ue=te.fieldMap[le];oe[le]=Z.get(ue)}te.init(z,oe)}),z.scaleKeys=[k,ee];const G=15;let ne={dataIdx:(te,oe,le,ue)=>{let Te=te.data[oe];if(Te[le]==null){let he=null,re=null,De;for(De=le;he==null&&De-- >0;)Te[De]!=null&&(he=De);for(De=le;re==null&&De++<Te.length;)Te[De]!=null&&(re=De);let Fe=te.data[0],Ee=te.valToPos(ue,"x"),Me=re==null?1/0:te.valToPos(Fe[re],"x"),ze=he==null?-1/0:te.valToPos(Fe[he],"x"),xe=Ee-ze,We=Me-Ee;xe<=We?xe<=G&&(le=he):We<=G&&(le=re)}return le}};return w&&w()!==p.y.Off&&(ne.sync={key:F,scales:[k,null]}),z.setSync(),z.setCursor(ne),z};function O(A,R){const B=new Map;return A.fields.forEach((U,w)=>{const K=U.state?.origin;if(K){const N=R[K.frameIndex]?.fields[K.fieldIndex];N&&B.set((0,E.Ct)(N,R[K.frameIndex],R),w)}}),B}const S=["legend","options","theme"];class v extends t.Component{constructor(){super(...arguments),this.prepConfig=(R,B,U)=>{const{eventsScope:w,sync:K}=this.context,{theme:N,timeZone:L,renderers:V,tweakAxis:F,tweakScale:z}=this.props;return M({frame:R,theme:N,timeZones:Array.isArray(L)?L:[L],getTimeRange:U,sync:K,allFrames:B,renderers:V,tweakScale:z,tweakAxis:F,eventsScope:w})},this.renderLegend=R=>{const{legend:B,frames:U}=this.props;return!R||B&&!B.showLegend||!(0,r.t)(R,U)?null:t.createElement(r.$,{data:U,config:R,...B})}}static{this.contextType=n.e4}render(){return t.createElement(o.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:S,renderLegend:this.renderLegend})}}const x=(0,s.cV)(v);x.displayName="TimeSeries"},8984:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{ALERTING_COLOR:()=>s.xj,AxisPlacement:()=>l.vM,BarAlignment:()=>l.Nj,BarValueVisibility:()=>l.TC,BracesPlugin:()=>i.e1,ClearPlugin:()=>i.vJ,ClipboardPlugin:()=>i.sW,DEFAULT_ANNOTATION_COLOR:()=>s.Mk,DOMUtil:()=>s.bk,DrawStyle:()=>l.yg,EventsWithValidation:()=>s.Pw,GlobalStyles:()=>o.kH,GraphGradientMode:()=>l.on,GraphThresholdsStyleMode:()=>l.Ly,IndentationPlugin:()=>i.TA,LegendDisplayMode:()=>l.lm,LineInterpolation:()=>l.dx,NO_DATA_COLOR:()=>s.nO,NewlinePlugin:()=>i.Om,NodeGraphDataFrameFieldNames:()=>s.uc,OK_COLOR:()=>s.Xw,PENDING_COLOR:()=>s.ct,PointVisibility:()=>l.nT,REGION_FILL_ALPHA:()=>s.UJ,ReactUtils:()=>s.zt,RunnerPlugin:()=>i.Ul,SCHEMA:()=>s.yx,ScaleDirection:()=>l.ON,ScaleOrientation:()=>l.Lt,SearchFunctionType:()=>s.Tt,SelectionShortcutsPlugin:()=>i.l9,SlatePrism:()=>i.De,StackingMode:()=>l.gs,SuggestionsPlugin:()=>i.Pz,TableCellDisplayMode:()=>l.ob,ThemeContext:()=>o.Dx,TooltipDisplayMode:()=>l.$N,ansicolor:()=>s.DB,attachDebugger:()=>s.hF,calculateFontSize:()=>s.Vr,colors:()=>s.Tj,commonOptionsBuilder:()=>m.j,createLogger:()=>s.h,fuzzyMatch:()=>s.It,getCanvasContext:()=>s.Yc,getCellLinks:()=>s.kl,getScrollbarWidth:()=>s.XJ,getTagColor:()=>s.yC,getTagColorIndexFromName:()=>s.JF,getTagColorsFromName:()=>s.MC,getTextColorForAlphaBackground:()=>s.mZ,getTextColorForBackground:()=>s.sg,getTheme:()=>o.O4,hasValidationEvent:()=>s.K,isCompactUrl:()=>s.Fr,linkModelToContextMenuItems:()=>s.Jl,makeFragment:()=>s.dF,makeValue:()=>s.mO,measureText:()=>s.kD,mockTheme:()=>o.mG,mockThemeContext:()=>o.fq,regexValidation:()=>s.RP,sortedColors:()=>s.Ih,styleMixins:()=>o.YF,stylesFactory:()=>o.N3,useForceUpdate:()=>s.CH,useStyles:()=>o.IS,useStyles2:()=>o.of,useTheme:()=>o.DP,useTheme2:()=>o.$j,validate:()=>s.tf,withTheme:()=>o.SL,withTheme2:()=>o.cV});var t=e(94333),r={};for(const d in t)d!=="default"&&(r[d]=()=>t[d]);e.d(I,r);var n=e(80186),r={};for(const d in n)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","EmptyState","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","useSplitter","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","graphFieldOptions","EventsCanvas","Marker","XYCanvas","EventBusPlugin","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin","SeriesVisibilityChangeMode"].indexOf(d)<0&&(r[d]=()=>n[d]);e.d(I,r);var s=e(99598),o=e(7918),m=e(42482),i=e(50955),l=e(49149)},38248:(Q,I,e)=>{"use strict";e.d(I,{W:()=>E,r:()=>c});var t=e(96540),n=e(11261),r=e(27310),s=e(52622),o=e(88575),m=e(94354),i=e(10354),l=e(88323),d=e(52198);function c(p,b,a){const h=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:h,defaultValue:d.t.axisPlacement[0].value,settings:{options:d.t.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:h,defaultValue:"",settings:{placeholder:"Optional text",expandTemplateVars:!0},showIf:P=>P.axisPlacement!==s.vM.Hidden,shouldApply:P=>P.type!==n.PU.time&&P.type!==n.PU.string}).addNumberInput({path:"axisWidth",name:"Width",category:h,settings:{placeholder:"Auto"},showIf:P=>P.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:h,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:P=>P.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:h,defaultValue:s.Y$.Text,settings:{options:[{value:s.Y$.Text,label:"Text"},{value:s.Y$.Series,label:"Series"}]},showIf:P=>P.axisPlacement!==s.vM.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:h,defaultValue:!1,showIf:P=>P.axisPlacement!==s.vM.Hidden}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:h,editor:E,override:E,defaultValue:{type:s.L4.Linear},shouldApply:P=>P.type===n.PU.number,process:r.hS}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:h,defaultValue:!1,showIf:P=>P.scaleDistribution?.type!==s.L4.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:b.axisSoftMin,category:h,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:b.axisSoftMax,category:h,settings:{placeholder:"See: Standard options > Max"}})}const g=[{label:"Linear",value:s.L4.Linear},{label:"Logarithmic",value:s.L4.Log},{label:"Symlog",value:s.L4.Symlog}],u=[{label:"2",value:2},{label:"10",value:10}],E=({value:p,onChange:b})=>{const a=p?.type??s.L4.Linear,h=p?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(m.z,{value:a,options:g,onChange:P=>{b({...p,type:P,log:P===s.L4.Linear?void 0:h})}})),(a===s.L4.Log||a===s.L4.Symlog)&&t.createElement(o.D,{label:"Log base"},t.createElement(l.l6,{options:u,value:h,onChange:P=>{b({...p,log:P.value})}})),a===s.L4.Symlog&&t.createElement(o.D,{label:"Linear threshold"},t.createElement(i.p,{placeholder:"1",value:p?.linearThreshold,onChange:P=>{b({...p,linearThreshold:Number(P.currentTarget.value)})}})))}},11404:(Q,I,e)=>{"use strict";e.d(I,{e:()=>i});var t=e(2543),n=e.n(t),r=e(96540),s=e(92174),o=e(66864);const m=({value:l,onChange:d})=>{const c=(0,r.useCallback)(g=>{d({...l,[g]:!l[g]})},[l,d]);return r.createElement(o.Gy,{spacing:"xs"},Object.keys(l).map(g=>{const u=g;return r.createElement(s.m,{icon:l[u]?"eye-slash":"eye",onClick:()=>c(u),key:u,label:(0,t.startCase)(u),selected:l[u]})}))};function i(l){l.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:m,override:m,shouldApply:()=>!0,hideFromDefaults:!0,process:d=>d})}},22680:(Q,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(69550),n=e(52622);function r(s,o=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.lm.List,settings:{options:[{value:n.lm.List,label:"List"},{value:n.lm.Table,label:"Table"}]},showIf:m=>m.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:m=>m.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:m=>m.legend.showLegend&&m.legend.placement==="right"}),o&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.D.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:m=>m.legend.showLegend!==!1})}},56675:(Q,I,e)=>{"use strict";e.d(I,{I:()=>g,m:()=>c});var t=e(96540),n=e(27310),r=e(11261),s=e(52622),o=e(94354),m=e(29158),i=e(10354),l=e(66864),d=e(52198);const c=({value:u,context:E,onChange:p,item:b})=>t.createElement(l.Gy,null,t.createElement(o.z,{value:u?.mode||s.gs.None,options:b.settings?.options??[],onChange:a=>{p({...u,mode:a})}}),E.isOverride&&u?.mode&&u?.mode!==s.gs.None&&t.createElement(i.p,{type:"text",placeholder:"Group",suffix:t.createElement(m.K,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:u?.group,onChange:a=>{p({...u,group:a.currentTarget.value.trim()})}}));function g(u,E,p=["Graph styles"]){u.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:p,defaultValue:E,editor:c,override:c,settings:{options:d.t.stacking},process:n.hS,shouldApply:b=>b.type===r.PU.number})}},71242:(Q,I,e)=>{"use strict";e.d(I,{I:()=>t});function t(n,r=!0){r&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},89654:(Q,I,e)=>{"use strict";e.d(I,{D:()=>n});var t=e(52622);function n(r,s=!1,o=!1,m){const i=["Tooltip"],l=s?[{value:t.$N.Single,label:"Single"},{value:t.$N.None,label:"Hidden"}]:[{value:t.$N.Single,label:"Single"},{value:t.$N.Multi,label:"All"},{value:t.$N.None,label:"Hidden"}],d=[{value:t.xB.None,label:"None"},{value:t.xB.Ascending,label:"Ascending"},{value:t.xB.Descending,label:"Descending"}];r.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:m?.tooltip?.mode??t.$N.Single,settings:{options:l}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:m?.tooltip?.sort??t.xB.None,showIf:c=>c.tooltip?.mode===t.$N.Multi,settings:{options:d}}),o&&r.addNumberInput({path:"tooltip.hoverProximity",name:"Hover proximity",description:"How close the cursor must be to a point to trigger the tooltip, in pixels",category:i,settings:{integer:!0}}),r.addNumberInput({path:"tooltip.maxWidth",name:"Max width",category:i,settings:{integer:!0},showIf:c=>!1}).addNumberInput({path:"tooltip.maxHeight",name:"Max height",category:i,defaultValue:600,settings:{integer:!0},showIf:c=>!1})}},42482:(Q,I,e)=>{"use strict";e.d(I,{j:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.W,StackingEditor:()=>i.m,addAxisConfig:()=>n.r,addHideFrom:()=>r.e,addLegendOptions:()=>s.H,addStackingConfig:()=>i.I,addTextSizeOptions:()=>m.I,addTooltipOptions:()=>o.D});var n=e(38248),r=e(11404),s=e(22680),o=e(89654),m=e(71242),i=e(56675)},49149:(Q,I,e)=>{"use strict";e.d(I,{$N:()=>t.$N,Lt:()=>t.Lt,Ly:()=>t.Ly,Nj:()=>t.Nj,ON:()=>t.ON,TC:()=>t.yL,dx:()=>t.dx,gs:()=>t.gs,lm:()=>t.lm,nT:()=>t.yL,ob:()=>t.ob,on:()=>t.on,vM:()=>t.vM,yg:()=>t.GR});var t=e(52622)},74738:(Q,I,e)=>{"use strict";e.d(I,{v:()=>t});function t(){return{onKeyDown(n,r,s){const o=r.value;if(o.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const m=o.anchorText.text,i=o.selection.anchor.offset,d=m.length-i;return r.deleteForward(d),!0}return s()}}}},99453:(Q,I,e)=>{"use strict";e.d(I,{s:()=>r});const t=(s,o,m)=>{if(!s.length)return;const i=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(o,i+m)},n=s=>s?.replace(/[\uFEFF]/g,"");function r(){const s={onCopy(o,m,i){o.preventDefault();const{document:l,selection:d}=m.value,{start:{offset:c},end:{offset:g}}=d,u=l.getLeafBlocksAtRange(d).toArray().map(p=>p.text),E=n(t(u,c,g));return E&&o.clipboardData&&o.clipboardData.setData("Text",E),!0},onPaste(o,m,i){if(o.preventDefault(),o.clipboardData){const d=n(o.clipboardData.getData("Text"))?.split(`
`);if(d&&d.length){m.insertText(d[0]);for(const c of d.slice(1))m.splitBlock().insertText(c)}}return!0}};return{...s,onCut(o,m,i){return s.onCopy(o,m,i),m.deleteAtRange(m.value.selection),!0}}}},1020:(Q,I,e)=>{"use strict";e.d(I,{T:()=>c});var t=e(57746),n=e(82611),r=e(52845);const s=(0,t.Sn)("mod+["),o=(0,t.Sn)("shift+tab"),m=(0,t.Sn)("mod+]"),i="  ",l=(g,u,E)=>{const{startBlock:p,endBlock:b,selection:{start:{offset:a,key:h},end:{offset:P,key:y}}}=u.value;if(r.A.serialize(u.value)==="")return;g.preventDefault();const C=p.getFirstText();C&&a===0&&h===C.key&&P===C.text.length&&y===C.key||!p.equals(b)?d(u,"right"):u.insertText(i)},d=(g,u)=>{const E=g.value.selection,p=g.value.document.getLeafBlocksAtRange(E).toArray();if(u==="left")for(const b of p){const a=b.text.length-b.text.trimLeft().length,h=b.getFirstText().key,P={anchor:{key:h,offset:a,path:[]},focus:{key:h,offset:a,path:[]}};g.deleteBackwardAtRange(n.Q6.create(P),Math.min(i.length,a))}else{const{startText:b}=g.value,a=b.text.slice(0,E.start.offset),h=/^\s*$/.test(a);for(const P of p)g.insertTextByKey(P.getFirstText().key,0,i);h&&g.moveStartBackward(i.length)}};function c(){return{onKeyDown(g,u,E){if(s(g)||o(g))g.preventDefault(),d(u,"left");else if(m(g))g.preventDefault(),d(u,"right");else if(g.key==="Tab")l(g,u,E);else return E();return!0}}}},50955:(Q,I,e)=>{"use strict";e.d(I,{e1:()=>s,vJ:()=>o.v,sW:()=>m.s,TA:()=>i.T,Om:()=>l.O,Ul:()=>d.U,l9:()=>c.l,De:()=>g.D,Pz:()=>u.Pz});var t=e(62938);const n={"[":"]","{":"}","(":")"},r="brace_match";function s(){return{onKeyDown(E,p,b){const{value:a}=p;switch(E.key){case"(":case"{":case"[":{const{start:{offset:h,key:P},end:{offset:y,key:C},focus:{offset:f}}=a.selection,D=a.focusText.text;if(a.selection.isExpanded)return E.preventDefault(),p.insertTextByKey(P,h,E.key).insertTextByKey(C,y+1,n[E.key]).moveEndBackward(1),!0;if(f===D.length||D[f]===" "||Object.values(n).includes(D[f])){E.preventDefault();const T=n[E.key],M={key:`${r}-${(0,t.A)()}`,type:`${r}-${T}`,anchor:{key:P,offset:h,object:"point"},focus:{key:C,offset:y+1,object:"point"},object:"annotation"};return p.insertText(E.key).insertText(T).addAnnotation(M).moveBackward(1),!0}break}case")":case"}":case"]":{const h=a.anchorText.text,P=a.selection.anchor.offset,y=h[P],C=E.key,f=`${r}-${C}`,D=a.annotations.find(T=>T?.type===f&&T.anchor.key===a.anchorText.key);if(D&&y===C&&!a.selection.isExpanded)return E.preventDefault(),p.moveFocusForward(1).removeAnnotation(D).moveAnchorForward(1),!0;break}case"Backspace":{const h=a.anchorText.text,P=a.selection.anchor.offset,y=h[P-1],C=h[P];if(n[y]&&n[y]===C)return E.preventDefault(),p.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return b()}}}var o=e(74738),m=e(99453),i=e(1020),l=e(88295),d=e(4269),c=e(31589),g=e(41781),u=e(80903)},88295:(Q,I,e)=>{"use strict";e.d(I,{O:()=>n});function t(r){let s=r.length-r.trimLeft().length;if(s){let o=r[0];for(;--s;)o+=r[0];return o}return""}function n(){return{onKeyDown(r,s,o){const m=s.value;if(m.selection.isExpanded)return o();if(r.key==="Enter"){r.preventDefault();const{startBlock:i}=m,l=i.text,d=t(l);return s.splitBlock().insertText(d).focus()}return o()}}}},4269:(Q,I,e)=>{"use strict";e.d(I,{U:()=>t});function t({handler:n}){return{onKeyDown(r,s,o){return n&&r.key==="Enter"&&(r.shiftKey||r.ctrlKey)?(r.preventDefault(),n(r),s):o()}}}},31589:(Q,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(57746);const n=(0,t.Sn)("mod+l");function r(){return{onKeyDown(s,o,m){if(n(s)){s.preventDefault();const{focusBlock:i,document:l}=o.value;o.moveAnchorToStartOfBlock(),l.getNextBlock(i.key)?o.moveFocusToStartOfNextBlock():o.moveFocusToEndOfText()}else return m();return!0}}}},84694:(Q,I,e)=>{"use strict";e.d(I,{A:()=>n});const n="prism-token"},41781:(Q,I,e)=>{"use strict";e.d(I,{D:()=>u,R:()=>a});var t=e(28848),n=e.n(t),r=e(82611),s=e(84694),o=e(49568),m=e(96540);function i(h){return h.object==="block"&&h.type==="code_block"}function l(h){return"javascript"}function d(h,P,y){const{decoration:C}=h;if(C.type!==s.A)return y();const f=C.data.get("className");return m.createElement("span",{className:f},h.children)}class c extends(0,o.Record)({onlyIn:i,getSyntax:l,renderDecoration:d}){constructor(P){super(P)}}const g=c;function u(h={},P=n().languages){const y=new g(h);return{decorateNode:(C,f,D)=>{if(!y.onlyIn(C))return D();const T=r.eB.create(C),M=y.getSyntax(T),O=P[M];if(!O)return[];const v=T.getTexts().map(B=>B&&B.getText()).join(`
`),x=n().tokenize(v,O),A=a(x),R=f.value.data.set("tokens",A);return f.setData(R),E(y,x,T)},renderDecoration:(C,f,D)=>y.renderDecoration({children:C.children,decoration:C.decoration},f,D)}}function E(h,P,y){const C=y.getTexts(),f=[];let D=0,T=0;return C.forEach(M=>{T=D+M.getText().length;let O=0;function S(v,x){if(typeof v=="string"){if(x){const A=p({text:M,textStart:D,textEnd:T,start:O,end:O+v.length,className:`prism-token token ${x}`,block:y});A&&f.push(A)}O+=v.length}else if(x=`${x} ${v.type}`,v.alias&&(x+=" "+v.alias),typeof v.content=="string"){const A=p({text:M,textStart:D,textEnd:T,start:O,end:O+v.content.length,className:`prism-token token ${x}`,block:y});A&&f.push(A),O+=v.content.length}else for(let A=0;A<v.content.length;A+=1)S(v.content[A],x)}P.forEach(S),D=T+1}),f}function p({text:h,textStart:P,textEnd:y,start:C,end:f,className:D,block:T}){return C>=y||f<=P?null:(C=Math.max(C,P),f=Math.min(f,y),C-=P,f-=P,T.createDecoration({object:"decoration",anchor:{key:h.key,offset:C,object:"point"},focus:{key:h.key,offset:f,object:"point"},type:s.A,data:{className:D}}))}function b(h){return typeof h=="string"?[{content:h,types:[],aliases:[]}]:Array.isArray(h)?h.flatMap(P=>b(P)):h instanceof n().Token?b(h.content).flatMap(P=>{let y=[];return typeof h.alias=="string"?y=[h.alias]:y=h.alias??[],{content:P.content,types:[h.type,...P.types],aliases:[...y,...P.aliases]}}):[]}function a(h){const P=b(h);if(!P.length)return[];const y=P[0];y.prev=null,y.next=P.length>=2?P[1]:null,y.offsets={start:0,end:y.content.length};for(let f=1;f<P.length-1;f++)P[f].prev=P[f-1],P[f].next=P[f+1],P[f].offsets={start:P[f-1].offsets.end,end:P[f-1].offsets.end+P[f].content.length};const C=P[P.length-1];return C.prev=P.length>=2?P[P.length-2]:null,C.next=null,C.offsets={start:P.length>=2?P[P.length-2].offsets.end:0,end:P.length>=2?P[P.length-2].offsets.end+C.content.length:C.content.length},P}},80903:(Q,I,e)=>{"use strict";e.d(I,{Pz:()=>B});var t=e(2543),n=e(96540),r=e(40961),s=e(97222),o=e(60578),m=e(50774),i=e(49579);const l=K=>K.reduce((N,{items:L,label:V})=>(N.push({label:V,kind:m.I.GroupTitle}),L.reduce((F,z)=>(F.push(z),F),N)),[]),d=K=>K.reduce((N,L)=>N.length<L.label.length?L.label:N,""),c=(K,N,L)=>{const V=(0,i.A)(L,{font:K.typography.fontFamilyMonospace,fontSize:K.typography.bodySmall.fontSize,fontWeight:"normal"}),F=u(V.width,K),z=g(V.height,K),Y=E(z,N);return{listWidth:F,listHeight:Y,itemHeight:z}},g=(K,N)=>{const L=N.spacing.gridSize*2;return K+L},u=(K,N)=>{const L=N.spacing.gridSize*3;return Math.min(Math.max(K+L,200),800)},E=(K,N)=>{const L=Math.min(N.length,10),V=100,F=L*K;return Math.max(F,V)};var p=e(32196),b=e(36663),a=e(40845);const h=(K,N,L)=>({typeaheadItem:(0,p.css)({label:"type-ahead-item",zIndex:11,padding:K.spacing(1,1,1,2),border:K.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:K.colors.background.secondary,color:K.colors.text.secondary,boxShadow:`0 0 20px ${K.v1.colors.dropdownShadow}`,visibility:L===!0?"visible":"hidden",width:"250px",minHeight:`${N+parseInt(K.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),P=({item:K,height:N})=>{const L=K&&!!K.documentation,V=K?K.label:"",F=(0,b.G)(K?.documentation),z=(0,a.$j)(),Y=h(z,N,L);return n.createElement("div",{className:(0,p.cx)([Y.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:F}}))};var y=e(23257),C=e.n(y),f=e(5313);const D=K=>({typeaheadItem:(0,p.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:K.typography.fontFamilyMonospace,padding:K.spacing(1,1,1,2),fontSize:K.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,p.css)({label:"type-ahead-item-selected",backgroundColor:K.colors.background.secondary}),typeaheadItemMatch:(0,p.css)({label:"type-ahead-item-match",color:K.v1.palette.yellow,borderBottom:`1px solid ${K.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,p.css)({label:"type-ahead-item-group-title",color:K.colors.text.secondary,fontSize:K.typography.bodySmall.fontSize,lineHeight:K.typography.body.lineHeight,padding:K.spacing(1)})}),T=K=>{const N=(0,a.of)(D),{isSelected:L,item:V,prefix:F,style:z,onMouseEnter:Y,onMouseLeave:H,onClickItem:k}=K,ee=L?(0,p.cx)([N.typeaheadItem,N.typeaheadItemSelected]):(0,p.cx)([N.typeaheadItem]),ie=(0,p.cx)([N.typeaheadItemMatch]),fe=(0,p.cx)([N.typeaheadItemGroupTitle]),q=V.label||"";return V.kind===m.I.GroupTitle?n.createElement("li",{className:fe,style:z},n.createElement("span",null,q)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:ee,style:z,onMouseDown:k,onMouseEnter:Y,onMouseLeave:H,type:"button"},V.highlightParts!==void 0?n.createElement(f.z,{text:q,highlightClassName:ie,highlightParts:V.highlightParts}):n.createElement(C(),{textToHighlight:q,searchWords:[F??""],autoEscape:!0,highlightClassName:ie})))},M=(K,N)=>K-N*Math.floor(K/N);class O extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const N=l(this.props.groupedItems),L=d(N),{listWidth:V,listHeight:F,itemHeight:z}=c(this.context,N,L);this.setState({listWidth:V,listHeight:F,itemHeight:z,allItems:N})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(N,L)=>{if(this.state.typeaheadIndex!==null&&L.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(N.groupedItems,this.props.groupedItems)===!1){const V=l(this.props.groupedItems),F=d(V),{listWidth:z,listHeight:Y,itemHeight:H}=c(this.context,V,F);this.setState({listWidth:z,listHeight:Y,itemHeight:H,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=N=>{this.setState({hoveredItem:N})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=N=>{const L=this.state.allItems.length;if(L){const V=this.state.typeaheadIndex||0;let F=M(V+N,L);this.state.allItems[F].kind===m.I.GroupTitle&&(F=M(F+N,L)),this.setState({typeaheadIndex:F});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}static{this.contextType=o.D}get menuPosition(){if(!window.getSelection)return"";const N=window.getSelection(),L=N&&N.anchorNode;if(L&&L.parentElement){const V=L.parentElement.getBoundingClientRect(),F=window.scrollX,z=window.scrollY;return`position: absolute; display: flex; top: ${V.top+z+V.height+6}px; left: ${V.left+F-2}px`}return""}render(){const{prefix:N,isOpen:L=!1,origin:V}=this.props,{allItems:F,listWidth:z,listHeight:Y,itemHeight:H,hoveredItem:k,typeaheadIndex:ee}=this.state,ie=k||ee,fe=F[k||ee||0];return n.createElement(S,{origin:V,isOpen:L,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.Y1,{ref:this.listRef,itemCount:F.length,itemSize:H,itemKey:q=>{const Z=F&&F[q];return Z?`${q}-${Z.label}`:`${q}`},width:z,height:Y},({index:q,style:Z})=>{const J=F&&F[q];return J?n.createElement(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(J):{},isSelected:ee===null?!1:F[ee]===J,item:J,prefix:N,style:Z,onMouseEnter:()=>this.onMouseEnter(q),onMouseLeave:this.onMouseLeave}):null})),ie&&n.createElement(P,{height:Y,item:fe}))}}class S extends n.PureComponent{constructor(N){super(N);const{index:L=0,origin:V="query",style:F}=N;this.node=document.createElement("div"),this.node.setAttribute("style",F),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${L}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),r.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var v=e(72307),x=e(75071),A=e(84694);const R=250;function B({onTypeahead:K,cleanText:N,onWillApplySuggestion:L,portalOrigin:V}){let F,z={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const Y=(0,t.debounce)(U,R),H=k=>{z={...z,...k}};return{onBlur:(k,ee,ie)=>(z={...z,groupedItems:[]},ie()),onClick:(k,ee,ie)=>(z={...z,groupedItems:[]},ie()),onKeyDown:(k,ee,ie)=>{const q=z.groupedItems.length;switch(k.key){case"Escape":{if(q)return k.preventDefault(),z={...z,groupedItems:[]},ee.insertText("");break}case"ArrowDown":case"ArrowUp":if(q){k.preventDefault(),F.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&q)return k.preventDefault(),F.insertSuggestion();break}case"Tab":{if(q)return k.preventDefault(),F.insertSuggestion();break}default:{k.key.length===1&&Y(ee,H,K,N);break}}return ie()},commands:{selectSuggestion:(k,ee)=>{const ie=z.groupedItems;if(!ie||!ie.length)return k;const fe=k.applyTypeahead(ee);return Y(k,H,K,N),fe},applyTypeahead:(k,ee)=>{let ie=ee.insertText||ee.label;const fe=ee.kind==="function",q=ee.move||0,Z=q>0?q:0,J=q<0?-q:0,{typeaheadPrefix:G,typeaheadText:ne,typeaheadContext:te}=z;L&&(ie=L(ie,{groupedItems:z.groupedItems,typeaheadContext:te,typeaheadPrefix:G,typeaheadText:ne}));const{forward:oe,backward:le}=w(ie,G,ne,fe,ee.deleteBackwards,N);if(ie.match(/\n/)){const ue=(0,v.dF)(ie);return k.deleteBackward(le).deleteForward(oe).insertFragment(ue).focus(),k}return z={...z,groupedItems:[]},k.snapshotSelection().deleteBackward(le).deleteForward(oe).insertText(ie).moveForward(Z).moveBackward(J).focus(),k}},renderEditor(k,ee,ie){if(ee.value.selection.isExpanded)return ie();const fe=ie();return n.createElement(n.Fragment,null,fe,n.createElement(O,{menuRef:q=>F=q,origin:V,prefix:z.typeaheadPrefix,isOpen:!!z.groupedItems.length,groupedItems:z.groupedItems,onSelectSuggestion:ee.selectSuggestion}))}}}const U=async(K,N,L,V)=>{if(!L)return;const{value:F}=K,{selection:z}=F,Y=F.document.getClosestBlock(F.focusBlock.key),H=F.selection.start.offset-1,k=Y&&Y.getDecorations(K),ee=k?k.filter(le=>le.start.offset<=H&&le.end.offset>H&&le.type===A.A).toArray():[],ie=k&&k.filter(le=>le.end.offset<=H&&le.type===A.A&&le.data.get("className").includes("label-key")).last(),fe=ie&&F.focusText.text.slice(ie.start.offset,ie.end.offset),q=ee.map(le=>le.data.get("className")).join(" ").split(" ").filter(le=>le.length);let Z=F.focusText.text,J=Z.slice(0,z.focus.offset);ee.length&&(Z=F.focusText.text.slice(ee[0].start.offset,ee[0].end.offset),J=F.focusText.text.slice(ee[0].start.offset,z.focus.offset));const G=J.match(/(?:!?=~?"?|")(.*)/);G?J=G[1]:V&&(J=V(J));const{suggestions:ne,context:te}=await L({prefix:J,text:Z,value:F,wrapperClasses:q,labelKey:fe||void 0,editor:K}),oe=ne.map(le=>{if(!le.items)return le;const ue=le.searchFunctionType||(le.prefixMatch?x.T.Prefix:x.T.Word),Te=x.H[ue];let he={...le};return J&&(le.skipFilter||(he.items=he.items.filter(re=>(re.filterText||re.label).length>=J.length),he.items=Te(he.items,J)),he.items=he.items.filter(re=>!(re.insertText===J||(re.filterText??re.label)===J))),le.skipSort||(he.items=(0,t.sortBy)(he.items,re=>re.sortText===void 0?re.sortValue!==void 0?re.sortValue:re.label:re.sortText||re.label)),he}).filter(le=>le.items&&le.items.length);N({groupedItems:oe,typeaheadPrefix:J,typeaheadContext:te,typeaheadText:Z}),K.blur().focus()};function w(K,N,L,V,F,z){const Y=F||N.length,H=z?z(L):L,k=L.indexOf(N),ee=k>-1?H.length-k-N.length:H.length-N.length;return{forward:!!(N&&ee>0||K===L)&&!V?ee+k:0,backward:Y}}},93218:(Q,I,e)=>{"use strict";e.d(I,{k:()=>b});var t=e(94659),n=e(96540),r=e(40845);function s(a){return(0,t.css)({".panel-options-group":{borderBottom:`1px solid ${a.colors.border.weak}`},".panel-options-group__header":{padding:a.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:a.colors.text.primary,"&:hover":{background:a.colors.emphasize(a.colors.background.primary,.03)}},".panel-options-group__icon":{color:a.colors.text.secondary,marginRight:a.spacing(1),padding:a.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:a.spacing(1,2,1,4)}})}function o(a){return(0,t.css)({".card-section":{marginBottom:a.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:a.colors.background.secondary,boxShadow:"none",padding:a.spacing(2),borderRadius:"4px","&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03)},".label-tag":{marginLeft:a.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:a.spacing(2)},".card-item-type":{color:a.colors.text.secondary,textTransform:"uppercase",fontSize:a.typography.size.sm,fontWeight:a.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:a.typography.size.sm},".card-item-name":{color:a.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:a.spacing(1)},".card-item-sub-name":{color:a.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:a.colors.text.secondary,textTransform:"uppercase",marginBottom:a.spacing(2),fontSize:a.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:a.typography.size.sm,display:"inline-block",marginLeft:a.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:a.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:a.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:a.typography.h3.fontSize},[a.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:a.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:a.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:a.typography.h4.fontSize},".card-item-sub-name":{fontSize:a.typography.size.sm},".layout-selector":{marginRight:0}}})}var m=e(16797);function i(a){return(0,t.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${a.typography.htmlFontSize}px`,fontFamily:a.typography.fontFamily,lineHeight:a.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:a.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:a.colors.text.primary,backgroundColor:a.colors.background.canvas,...l(a.typography.body)},"h1, .h1":l(a.typography.h1),"h2, .h2":l(a.typography.h2),"h3, .h3":l(a.typography.h3),"h4, .h4":l(a.typography.h4),"h5, .h5":l(a.typography.h5),"h6, .h6":l(a.typography.h6),p:{margin:a.spacing(0,0,2)},button:{letterSpacing:a.typography.body.letterSpacing,"&:focus-visible":(0,m.getFocusStyles)(a),"&:focus":{outline:"none"}},small:{fontSize:a.typography.bodySmall.fontSize},"b, strong":{fontWeight:a.typography.fontWeightMedium},em:{fontStyle:"italic",color:a.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:a.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:a.colors.text.primary},".text-warning":{color:a.colors.warning.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.warning.text,.15)}},".text-error":{color:a.colors.error.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:a.colors.emphasize(a.colors.success.text,.15)}},a:{cursor:"pointer",color:a.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,m.getFocusStyles)(a),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:a.components.textHighlight.background,color:a.components.textHighlight.text,padding:0}})}function l(a){return{margin:0,fontSize:a.fontSize,lineHeight:a.lineHeight,fontWeight:a.fontWeight,letterSpacing:a.letterSpacing,fontFamily:a.fontFamily,marginBottom:"0.45em"}}function d(a){return(0,t.css)({"iframe.intercom-borderless-frame":{colorScheme:a.colors.mode}})}function c(a){return(0,t.css)({"input, button, select, textarea":{fontFamily:a.typography.body.fontFamily,fontSize:a.typography.body.fontSize,fontWeight:a.typography.body.fontWeight,lineHeight:a.typography.body.lineHeight},"input, select":{backgroundColor:a.components.input.background,color:a.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function g(a){return(0,t.css)({})}function u(a){const h=a.breakpoints.values.xxl+a.spacing.gridSize*2+a.components.sidemenu.width;return(0,t.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{margin:a.spacing(0,1)},[a.breakpoints.up("md")]:{margin:a.spacing(0,2)},[`@media (min-width: ${h}px)`]:{maxWidth:`${a.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:a.spacing(2),paddingLeft:a.spacing(2),paddingRight:a.spacing(2)},".page-body":{padding:a.spacing(1),background:a.components.panel.background,border:`1px solid ${a.components.panel.borderColor}`,marginBottom:"32px",[a.breakpoints.up("md")]:{padding:a.spacing(2)},[a.breakpoints.up("lg")]:{padding:a.spacing(3)}},".page-heading":{fontSize:a.typography.h4.fontSize,marginTop:0,marginBottom:a.spacing(2)},".page-action-bar":{marginBottom:a.spacing(2),display:"flex",alignItems:"flex-start",gap:a.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:a.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:a.spacing(2)},".page-sub-heading-icon":{marginLeft:a.spacing(1),marginTop:a.spacing(.5)},".page-hidden":{display:"none"}})}var E=e(72129);const p=a=>(0,t.css)({".react-loading-skeleton":E.Q});function b(){const a=(0,r.$j)();return n.createElement(t.Global,{styles:[i(a),d(a),c(a),u(a),o(a),s(a),g(a),p(a)]})}},40845:(Q,I,e)=>{"use strict";e.d(I,{$j:()=>E,DP:()=>u,IS:()=>p,SL:()=>c,cV:()=>g,fq:()=>a,of:()=>b});var t=e(4146),n=e.n(t),r=e(47078),s=e.n(r),o=e(96540),m=e(60578),i=e(3911);let l=null;const d=new WeakMap,c=h=>{const P=y=>{const C=l||m.D;return o.createElement(C.Consumer,null,f=>o.createElement(h,{...y,theme:f.v1}))};return P.displayName=`WithTheme(${h.displayName})`,n()(P,h),P},g=h=>{const P=y=>{const C=l||m.D;return o.createElement(C.Consumer,null,f=>o.createElement(h,{...y,theme:f}))};return P.displayName=`WithTheme(${h.displayName})`,n()(P,h),P};function u(){return(0,o.useContext)(l||m.D).v1}function E(){return(0,o.useContext)(l||m.D)}function p(h){const P=u();let y=d.get(h);return y||(y=(0,i.N)(h),d.set(h,y)),y(P)}function b(h,...P){const y=E();let C=d.get(h);return C||(C=s()(h,{maxSize:10}),d.set(h,C)),C(y,...P)}const a=h=>(l=o.createContext(h),()=>{l=null})},7918:(Q,I,e)=>{"use strict";e.d(I,{kH:()=>l.k,Dx:()=>t.D,O4:()=>o,mG:()=>m,fq:()=>n.fq,YF:()=>d,N3:()=>i.N,IS:()=>n.IS,of:()=>n.of,DP:()=>n.DP,$j:()=>n.$j,SL:()=>n.SL,cV:()=>n.cV});var t=e(60578),n=e(40845),r=e(75972);let s;const o=(c="dark")=>s?s(c):(0,r.a)({colors:{mode:c}}).v1,m=c=>(s=c,()=>{s=null});var i=e(3911),l=e(93218),d=e(16797)},16797:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{cardChrome:()=>n,focusCss:()=>l,getFocusStyles:()=>c,getMouseFocusStyles:()=>d,getTooltipContainerStyles:()=>g,hoverColor:()=>r,listItem:()=>s,listItemSelected:()=>o,mediaUp:()=>m});var t=e(84140);function n(u){return`
    background: ${u.colors.background.secondary};
    &:hover {
      background: ${r(u.colors.background.secondary,u)};
    }
    box-shadow: ${u.components.panel.boxShadow};
    border-radius: ${u.shape.radius.default};
`}function r(u,E){return E.isDark?(0,t.A)(u).brighten(2).toString():(0,t.A)(u).darken(2).toString()}function s(u){return`
  background: ${u.colors.background.secondary};
  &:hover {
    background: ${r(u.colors.background.secondary,u)};
  }
  box-shadow: ${u.components.panel.boxShadow};
  border-radius: ${u.shape.radius.default};
`}function o(u){return`
    background: ${r(u.colors.background.secondary,u)};
    color: ${u.colors.text.maxContrast};
`}function m(u){return`only screen and (min-width: ${u})`}const i=u=>u.hasOwnProperty("v1"),l=u=>{const E=i(u),p=E?u.colors.background.canvas:u.colors.bodyBg,b=E?u.colors.primary.main:u.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${p}, 0 0 0px 4px ${b};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function d(u){return{outline:"none",boxShadow:"none"}}function c(u){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${u.colors.background.canvas}, 0 0 0px 4px ${u.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const g=u=>({overflow:"hidden",background:u.colors.background.secondary,boxShadow:u.shadows.z2,maxWidth:"800px",padding:u.spacing(1),borderRadius:u.shape.radius.default,zIndex:u.zIndex.tooltip})},3911:(Q,I,e)=>{"use strict";e.d(I,{N:()=>r});var t=e(47078),n=e.n(t);function r(s){return n()(s)}},50774:(Q,I,e)=>{"use strict";e.d(I,{I:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},29621:()=>{"use strict"},4025:(Q,I,e)=>{"use strict";e.d(I,{GO:()=>s,SS:()=>o,Uo:()=>t.Uo,lV:()=>m,rJ:()=>r});var t=e(8887),n=e(11261);const r=i=>["xs","sm","md","lg","xl","xxl","xxxl"].includes(i),s=()=>Object.keys(t.az);function o(i){return m(i?.type)}function m(i){if(i)switch(i){case n.PU.time:return"clock-nine";case n.PU.string:return"font";case n.PU.number:return"calculator-alt";case n.PU.boolean:return"toggle-on";case n.PU.trace:return"info-circle";case n.PU.enum:return"list-ol";case n.PU.geo:return"map-marker";case n.PU.other:return"brackets-curly"}return"question-circle"}},80186:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{CompletionItemKind:()=>o.I,getAvailableIcons:()=>l.GO,getFieldTypeIcon:()=>l.SS,getFieldTypeIconName:()=>l.lV,isIconSize:()=>l.rJ,toIconName:()=>l.Uo});var t=e(64611),n=e.n(t),b={};for(const a in t)a!=="default"&&(b[a]=()=>t[a]);e.d(I,b);var r=e(11866),s=e.n(r),b={};for(const a in r)a!=="default"&&(b[a]=()=>r[a]);e.d(I,b);var o=e(50774),m=e(29621),i=e.n(m),b={};for(const a in m)["default","CompletionItemKind"].indexOf(a)<0&&(b[a]=()=>m[a]);e.d(I,b);var l=e(4025),d=e(19932),c=e.n(d),b={};for(const a in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(b[a]=()=>d[a]);e.d(I,b);var g=e(72389),u=e.n(g),b={};for(const a in g)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(b[a]=()=>g[a]);e.d(I,b);var E=e(65484),p=e.n(E),b={};for(const a in E)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(b[a]=()=>E[a]);e.d(I,b)},11866:()=>{"use strict"},65484:()=>{"use strict"},19932:()=>{"use strict"},72389:()=>{"use strict"},64611:()=>{"use strict"},40321:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>t});const t=(n,r)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&r())}},24284:(Q,I,e)=>{"use strict";e.d(I,{Ih:()=>h,Mk:()=>o,Tj:()=>g,UJ:()=>c,Xw:()=>m,ct:()=>d,mZ:()=>a,nO:()=>l,sg:()=>b,xj:()=>i});var t=e(2543),n=e.n(t),r=e(84140);const s=4,o="rgba(0, 211, 255, 1)",m="rgba(11, 237, 50, 1)",i="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",d="rgba(247, 149, 32, 1)",c=.09,g=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function u(P){const y=(0,t.map)(P,E),C=(0,t.sortBy)(y,["h"]),f=(0,t.chunk)(C,s),D=(0,t.map)(f,M=>(0,t.sortBy)(M,"l")),T=(0,t.flattenDeep)((0,t.zip)(...D));return(0,t.map)(T,p)}function E(P){return(0,r.A)(P).toHsl()}function p(P){return(0,r.A)(P).toHexString()}function b(P){return(0,r.A)(P).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function a(P,y){const C=(0,r.A)(P),f=C.getBrightness();return C.getAlpha()<.3?y?"rgb(247, 248, 250)":"rgb(32, 34, 38)":f>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let h=u(g)},14555:(Q,I,e)=>{"use strict";e.d(I,{F:()=>n,J:()=>t});const t=r=>r().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=r=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(r)},40621:(Q,I,e)=>{"use strict";e.d(I,{h:()=>t});function t(n,r,s){}},53550:(Q,I,e)=>{"use strict";e.d(I,{i:()=>t});function t(n){const s=n.lastIndexOf("."),o=n.substring(s),m=n.substring(0,s);return m.length<16?n:`${m.substring(0,16)}...${o}`}},9830:(Q,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(2543),n=e.n(t);function r(s,o){let m=0,i=s.indexOf(o);o=o.replace(/\s/g,"");const l=[];if(i!==-1)return{distance:0,found:!0,ranges:[{start:i,end:i+o.length-1}]};for(const d of o){const c=s.indexOf(d,i);if(c===-1)return{distance:1/0,ranges:[],found:!1};if(i!==-1&&(m+=c-i),i=c+1,l.length===0)l.push({start:c,end:c});else{const g=(0,t.last)(l);c===g.end+1?g.end++:l.push({start:c,end:c})}}return{distance:m,ranges:l,found:!0}}},76412:(Q,I,e)=>{"use strict";e.d(I,{t:()=>l,x:()=>m});var t=e(72635),n=e(96540),r=e(78552),s=e(52822);function o(){typeof t.default.options.resources!="object"&&t.default.use(r.r9).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const m=d=>(o(),n.createElement(s.x,{...d})),i=t.default.t,l=(d,c,g)=>(o(),i(d,c,g))},99598:(Q,I,e)=>{"use strict";e.d(I,{xj:()=>o.xj,Mk:()=>o.Mk,bk:()=>t,Pw:()=>m.Pw,nO:()=>o.nO,uc:()=>P,Xw:()=>o.Xw,ct:()=>o.ct,UJ:()=>o.UJ,zt:()=>s,yx:()=>i.yx,Tt:()=>p.T,DB:()=>b.DB,hF:()=>h.h,Vr:()=>u.Vr,Tj:()=>o.Tj,h:()=>a.h,It:()=>y.I,Yc:()=>u.Yc,kl:()=>g.k,XJ:()=>c.X,yC:()=>d.yC,JF:()=>d.JF,MC:()=>d.MC,mZ:()=>o.mZ,sg:()=>o.sg,K:()=>m.K,Fr:()=>l.F,Jl:()=>l.J,dF:()=>i.dF,mO:()=>i.mO,kD:()=>u.kD,RP:()=>m.RP,Ih:()=>o.Ih,CH:()=>E.C,tf:()=>m.tf});var t={};e.r(t),e.d(t,{getNextCharacter:()=>r,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(C){const f=(this.document||this.ownerDocument).querySelectorAll(C);let D=this,T;do{for(T=f.length;--T>=0&&f.item(T)!==D;);D=D.parentElement}while(T<0&&D);return D});function n(C,f){let D=C.parentElement.previousSibling,T;for(;D;){if(T=D.querySelector(f),T)return T;D=D.previousSibling}}function r(C){const f=(C||window).getSelection();if(!f||!f.anchorNode)return null;const D=f.getRangeAt(0),T=f.anchorNode.textContent,M=D.startOffset;return T.slice(M,M+1)}var s=e(67892),o=e(24284),m=e(29734),i=e(72307),l=e(14555),d=e(69613),c=e(5260),g=e(90914),u=e(29413),E=e(69731),p=e(75071),b=e(88838),a=e(91040),h=e(40621),P=(C=>(C.id="id",C.title="title",C.subTitle="subTitle",C.mainStat="mainStat",C.secondaryStat="secondaryStat",C.source="source",C.target="target",C.detail="detail__",C.arc="arc__",C.color="color",C))(P||{}),y=e(9830)},91040:(Q,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(2543),n=e.n(t);const r=(0,t.throttle)((...o)=>{console.log(...o)},500),s=o=>{let m=!1;return typeof window<"u"&&(m=window.localStorage.getItem("grafana.debug")==="true"),{logger:(i,l=!1,...d)=>{},enable:()=>m=!0,disable:()=>m=!1,isEnabled:()=>m}}},29413:(Q,I,e)=>{"use strict";e.d(I,{Vr:()=>i,Yc:()=>o,kD:()=>m});let t;const n=new Map,r=500;let s="";function o(){return t||(t=document.createElement("canvas").getContext("2d")),t}function m(l,d,c=400){const g=`${c} ${d}px 'Inter'`,u=l+g,E=n.get(u);if(E)return E;const p=o();s!==g&&(p.font=s=g);const b=p.measureText(l);return n.size===r&&n.clear(),n.set(u,b),b}function i(l,d,c,g,u,E){const p=m(l,14,E),b=d/(p.width+2)*14,a=c/g,h=Math.min(a,b);return Math.min(h,u??h)}},67892:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{getChildId:()=>n,renderOrCallToRender:()=>r});var t=e(96540);function n(s){let o;const m=t.Children.only(s);return"id"in m?.props?o=m.props.id:"inputId"in m.props&&(o=m?.props.inputId),typeof o=="string"?o:void 0}function r(s,o){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&o)return s(o);throw new Error(`${s} is not a React element nor a function that returns React element`)}},5260:(Q,I,e)=>{"use strict";e.d(I,{X:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const r=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(o=>{r.style[o]=s[o]}),document.body.appendChild(r),t=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}else t=0;return t||0}},75071:(Q,I,e)=>{"use strict";e.d(I,{H:()=>m,T:()=>n});var t=e(9830),n=(i=>(i.Word="Word",i.Prefix="Prefix",i.Fuzzy="Fuzzy",i))(n||{});const m={Word:(i,l)=>i.filter(d=>(d.filterText||d.label).includes(l)),Prefix:(i,l)=>i.filter(d=>(d.filterText||d.label).startsWith(l)),Fuzzy:(i,l)=>(l=l.toLowerCase(),i.filter(d=>{const{distance:c,ranges:g,found:u}=(0,t.I)(d.label.toLowerCase(),l);return u?(d.sortValue=c,d.highlightParts=g,!0):!1}))}},72129:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>s,j:()=>o});var t=e(32196),n=e(96540);const s={animationName:(0,t.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},o=(m,i)=>Object.assign(m,{Skeleton:d=>n.createElement(i,{...d,rootProps:{style:s}})})},72307:(Q,I,e)=>{"use strict";e.d(I,{dF:()=>r,mO:()=>s,yx:()=>n});var t=e(82611);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},r=(o,m)=>{const i=o.split(`
`).map(d=>t.eB.create({type:"code_line",nodes:[t.EY.create(d)]})),l=t.eB.create({data:{syntax:m},type:"code_block",nodes:i});return t.yo.create({nodes:[l]})},s=(o,m)=>{const i=r(o,m);return t.WT.create({document:i})}},90914:(Q,I,e)=>{"use strict";e.d(I,{k:()=>t});const t=(n,r)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:r.index})),!!s){for(let o=0;o<s?.length;o++)if(s[o].onClick){const m=s[o].onClick;s[o].onClick=i=>{i.ctrlKey||i.metaKey||i.shiftKey||(i.preventDefault(),m(i,{field:n,rowIndex:r.index}))}}return s}}},69613:(Q,I,e)=>{"use strict";e.d(I,{JF:()=>r,MC:()=>s,yC:()=>o});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function r(l=""){const d=m(l.toLowerCase());return Math.abs(d%t.length)}function s(l=""){const d=r(l);return o(d)}function o(l){return{color:t[l],borderColor:n[l]}}function m(l){let d=5381;for(let c=0;c<l.length;c++)d=(d<<5)+d+l.charCodeAt(c);return d}var i={getTagColorsFromName:s}},18976:(Q,I,e)=>{"use strict";e.d(I,{O:()=>n,f:()=>r});var t=e(32196);function n(s){switch(s){case"auto":return"bottom";case"auto-start":return"bottom-start";case"auto-end":return"bottom-end";default:return s??"bottom"}}function r(s,o,m,i,l){return{arrow:(0,t.css)({fill:o}),container:(0,t.css)({backgroundColor:o,borderRadius:s.shape.radius.default,border:`1px solid ${m}`,boxShadow:s.shadows.z2,color:i,fontSize:s.typography.bodySmall.fontSize,padding:s.spacing(l.topBottom,l.rightLeft),transition:"opacity 0.3s",zIndex:s.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"}}),headerClose:(0,t.css)({color:s.colors.text.secondary,position:"absolute",right:s.spacing(1),top:s.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(2)}),body:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(1)}),footer:(0,t.css)({paddingTop:s.spacing(2),paddingBottom:s.spacing(1)})}}},69731:(Q,I,e)=>{"use strict";e.d(I,{C:()=>n});var t=e(96540);function n(){const[r,s]=(0,t.useState)(0);return()=>s(o=>o+1)}},29734:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r,Pw:()=>t,RP:()=>s,tf:()=>n});var t=(o=>(o.onBlur="onBlur",o.onFocus="onFocus",o.onChange="onChange",o))(t||{});const n=(o,m)=>{const i=m.reduce((l,d)=>d.rule(o)?l:l.concat(d.errorMessage),[]);return i.length>0?i:null},r=(o,m)=>m&&m[o],s=(o,m)=>({rule:i=>!!i.match(o),errorMessage:m||"Value is not valid"})},91950:(Q,I,e)=>{"use strict";e.d(I,{A:()=>r,f:()=>o});var t=e(2543),n=e.n(t);class r{constructor(i){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",i){if(i.columns)for(const l of i.columns)this.addColumn(l);if(i.rows)for(const l of i.rows)this.addRow(l)}}sort(i){i.col===null||i.col===void 0||this.columns.length<=i.col||(this.rows.sort((l,d)=>(l=l[i.col],d=d[i.col],+(l==null)-+(d==null)||+(l>d)||-(l<d))),i.desc&&this.rows.reverse(),this.columns[i.col].sort=!0,this.columns[i.col].desc=i.desc)}addColumn(i){this.columnMap[i.text]||(this.columns.push(i),this.columnMap[i.text]=i)}addRow(i){this.rows.push(i)}}function s(m,i,l){let d=!1;for(let c=0;c<m.length;c++)if(i[c]!==void 0&&l[c]!==void 0){if(i[c]!==l[c])return!1}else(i[c]===void 0||l[c]===void 0)&&(d=!0);return d}function o(m,...i){const l=m||new r;if(arguments.length===1)return l;if(arguments.length===2)return l.columns=i[0].hasOwnProperty("columns")?[...i[0].columns]:[],l.rows=i[0].hasOwnProperty("rows")?[...i[0].rows]:[],l;const d=i.filter(a=>!!a.columns),c={},g=d.slice().reduce((a,h)=>(h.columns.forEach(P=>{const{text:y}=P;c[y]===void 0&&(c[y]=a.length,a.push(P))}),a),[]),u=d.map(a=>a.columns.map(h=>c[h.text])),E=d.reduce((a,h,P)=>{const y=u[P];return h.rows.forEach(C=>{const f=[];y.forEach((D,T)=>{f[D]=C[T]}),a.push(f)}),a},[]),p={},b=E.reduce((a,h,P)=>{if(!p[P]){let y=P+1;for(;y<E.length;){const C=(0,t.findIndex)(E,f=>s(g,h,f),y);if(C>-1){const f=E[C];for(let D=0;D<g.length;D++)h[D]===void 0&&f[D]!==void 0&&(h[D]=f[D]);p[C]=f,y=C+1}else break}a.push(h)}return a},[]);return l.columns=g,l.rows=b,l}},97007:(Q,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(30038);const n=(0,t.VP)("core/cleanUpState")},82467:(Q,I,e)=>{"use strict";e.d(I,{Do:()=>t.Do,Vz:()=>n.Vz,YA:()=>n.YA,dx:()=>t.dx});var t=e(16001),n=e(28215)},28138:(Q,I,e)=>{"use strict";e.d(I,{A:()=>r,l:()=>n});var t=e(18226);const n=new t.o,r=n},5108:(Q,I,e)=>{"use strict";e.d(I,{x:()=>K});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(68402),m=e(90613),i=e(94753),l=e(55852),d=e(9025),c=e(44836),g=e(27677),u=e(43907),E=e(67061),p=e(88323),b=e(25469),a=e(17172);class h extends r.Component{constructor(ee){super(ee),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(ee){return this.setState({isLoading:!0}),(0,n.isNil)(ee)&&(ee=""),(0,a.AI)().get("/api/serviceaccounts/search").then(ie=>ie.serviceAccounts.map(fe=>({id:fe.id,value:fe.id,label:fe.login,imgUrl:fe.avatarUrl,login:fe.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:ee,onSelected:ie,inputId:fe}=this.props,{isLoading:q}=this.state;return r.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},r.createElement(p.DW,{isClearable:!0,className:ee,inputId:fe,isLoading:q,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ie,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class P extends r.Component{constructor(ee){super(ee),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:ee}=this.props;ee&&(0,a.AI)().get(`/api/teams/${ee}`).then(ie=>{this.setState({value:{value:ie,label:ie.name,imgUrl:ie.avatarUrl}})})}search(ee){return this.setState({isLoading:!0}),(0,n.isNil)(ee)&&(ee=""),(0,a.AI)().get(`/api/teams/search?perpage=100&page=1&query=${ee}`).then(ie=>{const fe=ie.teams.map(q=>({value:q,label:q.name,imgUrl:q.avatarUrl}));return this.setState({isLoading:!1}),fe})}render(){const{onSelected:ee,className:ie}=this.props,{isLoading:fe,value:q}=this.state;return r.createElement("div",{className:"user-picker","data-testid":"teamPicker"},r.createElement(p.DW,{isLoading:fe,defaultOptions:!0,loadOptions:this.debouncedSearch,value:q,onChange:ee,className:ie,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class y extends r.Component{constructor(ee){super(ee),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(ee){return this.setState({isLoading:!0}),(0,n.isNil)(ee)&&(ee=""),(0,a.AI)().get(`/api/org/users/lookup?query=${ee}&limit=100`).then(ie=>ie.map(fe=>({id:fe.userId,value:fe.userId,label:fe.login,imgUrl:fe.avatarUrl,login:fe.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:ee,onSelected:ie,inputId:fe}=this.props,{isLoading:q}=this.state;return r.createElement("div",{className:"user-picker","data-testid":"userPicker"},r.createElement(p.DW,{isClearable:!0,className:ee,inputId:fe,isLoading:q,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:ie,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var C=e(24897),f=(k=>(k.None="None",k.Team="Team",k.User="User",k.ServiceAccount="ServiceAccount",k.BuiltInRole="builtInRole",k))(f||{});const D=({title:k=(0,c.t)("access-control.add-permission.title","Add permission for"),permissions:ee,assignments:ie,onAdd:fe,onCancel:q})=>{const[Z,J]=(0,r.useState)(f.None),[G,ne]=(0,r.useState)(0),[te,oe]=(0,r.useState)(0),[le,ue]=(0,r.useState)(""),[Te,he]=(0,r.useState)(""),re=(0,r.useMemo)(()=>{const Fe=[];return ie.users&&Fe.push({value:f.User,label:(0,c.t)("access-control.add-permission.user-label","User")}),ie.serviceAccounts&&Fe.push({value:f.ServiceAccount,label:(0,c.t)("access-control.add-permission.serviceaccount-label","Service Account")}),ie.teams&&Fe.push({value:f.Team,label:(0,c.t)("access-control.add-permission.team-label","Team")}),ie.builtInRoles&&Fe.push({value:f.BuiltInRole,label:(0,c.t)("access-control.add-permission.role-label","Role")}),Fe},[ie]);(0,r.useEffect)(()=>{ee.length>0&&he(ee[0])},[ee]);const De=()=>Z===f.Team&&G>0||Z===f.User&&te>0||Z===f.ServiceAccount&&te>0||f.BuiltInRole&&C.XT.hasOwnProperty(le);return r.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},r.createElement(b.J,{onClick:q}),r.createElement("h5",null,k),r.createElement("form",{name:"addPermission",onSubmit:Fe=>{Fe.preventDefault(),fe({userId:te,teamId:G,builtInRole:le,permission:Te,target:Z})}},r.createElement(E.B,{gap:1,direction:"row"},r.createElement(p.l6,{"aria-label":"Role to add new permission to",value:Z,options:re,onChange:Fe=>J(Fe.value),disabled:re.length===0,width:"auto"}),Z===f.User&&r.createElement(y,{onSelected:Fe=>oe(Fe?.value||0)}),Z===f.ServiceAccount&&r.createElement(h,{onSelected:Fe=>oe(Fe?.value||0)}),Z===f.Team&&r.createElement(P,{onSelected:Fe=>ne(Fe.value?.id||0)}),Z===f.BuiltInRole&&r.createElement(p.l6,{"aria-label":"Built-in role picker",options:Object.values(C.XT).filter(Fe=>Fe!==C.XT.None).map(Fe=>({value:Fe,label:Fe})),onChange:Fe=>ue(Fe.value||""),width:"auto"}),r.createElement(p.l6,{"aria-label":"Permission Level",width:"auto",value:ee.find(Fe=>Fe===Te),options:ee.map(Fe=>({label:Fe,value:Fe})),onChange:Fe=>he(Fe.value||"")}),r.createElement(l.$n,{type:"submit",disabled:!De()},r.createElement(c.x6,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var T=e(56034),M=e(14578);const O=({item:k,permissionLevels:ee,canSet:ie,onRemove:fe,onChange:q})=>{const Z=(0,s.of)(R);return r.createElement("tr",null,r.createElement("td",null,S(k)),r.createElement("td",null,x(k)),r.createElement("td",null,k.isInherited&&r.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),r.createElement("td",null,r.createElement(p.l6,{disabled:!ie||!k.isManaged,onChange:J=>q(k,J.value),value:ee.find(J=>J===k.permission),options:ee.map(J=>({value:J,label:J}))})),r.createElement("td",null,k.warning?r.createElement(T.m,{content:r.createElement(r.Fragment,null,r.createElement(m.a,{marginBottom:1},k.warning),A(k))},r.createElement(M.I,{name:"exclamation-triangle",className:Z.warning})):r.createElement(T.m,{content:A(k)},r.createElement(M.I,{name:"info-circle"}))),r.createElement("td",null,k.isManaged?r.createElement(l.$n,{size:"sm",icon:"times",variant:"destructive",disabled:!ie,onClick:()=>fe(k),"aria-label":`Remove permission for ${v(k)}`}):r.createElement(T.m,{content:k.isInherited?"Inherited Permission":"Provisioned Permission"},r.createElement(l.$n,{size:"sm",icon:"lock"}))))},S=k=>k.teamId?r.createElement("img",{className:"filter-table__avatar",src:k.teamAvatarUrl,alt:`Avatar for team ${k.teamId}`}):k.userId?r.createElement("img",{className:"filter-table__avatar",src:k.userAvatarUrl,alt:`Avatar for user ${k.userId}`}):r.createElement(M.I,{size:"xl",name:"shield"}),v=k=>k.userId?k.userLogin:k.teamId?k.team:k.builtInRole,x=k=>k.userId?r.createElement("span",{key:"name"},k.userLogin," "):k.teamId?r.createElement("span",{key:"name"},k.team," "):k.builtInRole?r.createElement("span",{key:"name"},k.builtInRole," "):r.createElement("span",{key:"name"}),A=k=>`Actions: ${[...new Set(k.actions)].sort().join(" ")}`,R=k=>({warning:(0,t.css)({color:k.colors.warning.main})}),B=({title:k,items:ee,compareKey:ie,permissionLevels:fe,canSet:q,onRemove:Z,onChange:J})=>{const G=(0,r.useMemo)(()=>{const ne={};for(let te of ee){const oe=te[ie];if(!ne[oe]){ne[oe]=te;continue}if(te.actions.length>ne[oe].actions.length){ne[oe]=te;continue}te.actions.length===ne[oe].actions.length&&!te.isInherited&&(ne[oe]=te)}return Object.keys(ne).map(te=>ne[te])},[ee,ie]);return G.length===0?null:r.createElement("div",null,r.createElement("table",{className:"filter-table gf-form-group"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{width:"1%"}}),r.createElement("th",null,k),r.createElement("th",{style:{width:"1%"}}),r.createElement("th",{style:{width:"40%"}},r.createElement(c.x6,{i18nKey:"access-control.permission-list.permission"},"Permission")),r.createElement("th",{style:{width:"1%"}}),r.createElement("th",{style:{width:"1%"}}))),r.createElement("tbody",null,G.map((ne,te)=>r.createElement(O,{item:ne,onRemove:Z,onChange:J,canSet:q,key:`${te}-${ne.userId}`,permissionLevels:fe})))))},U="",w={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},K=({title:k=(0,c.t)("access-control.permissions.title","Permissions"),buttonLabel:ee=(0,c.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:ie=(0,c.t)("access-control.permissions.no-permissions","There are no permissions"),resource:fe,resourceId:q,canSetPermissions:Z,addPermissionTitle:J,getWarnings:G,epilogue:ne})=>{const te=(0,s.of)(H),[oe,le]=(0,r.useState)(!1),[ue,Te]=(0,r.useState)([]),[he,re]=(0,r.useState)(w),De=(0,r.useCallback)(async()=>{let He=await L(fe,q);G&&(He=G(He)),Te(He)},[fe,q,G]);(0,r.useEffect)(()=>{N(fe).then(He=>(re(He),De()))},[fe,q,De]);const Fe=He=>{let rt=null;He.target===f.User||He.target===f.ServiceAccount?rt=V(fe,q,He.userId,He.permission):He.target===f.Team?rt=F(fe,q,He.teamId,He.permission):He.target===f.BuiltInRole&&(rt=z(fe,q,He.builtInRole,He.permission)),rt!==null&&rt.then(De)},Ee=He=>{let rt=null;He.userId?rt=V(fe,q,He.userId,U):He.teamId?rt=F(fe,q,He.teamId,U):He.isServiceAccount&&He.userId?rt=V(fe,q,He.userId,U):He.builtInRole&&(rt=z(fe,q,He.builtInRole,U)),rt!==null&&rt.then(De)},Me=(He,rt)=>{He.permission!==rt&&(He.userId?Fe({permission:rt,userId:He.userId,target:f.User}):He.isServiceAccount?Fe({permission:rt,userId:He.userId,target:f.User}):He.teamId?Fe({permission:rt,teamId:He.teamId,target:f.Team}):He.builtInRole&&Fe({permission:rt,builtInRole:He.builtInRole,target:f.BuiltInRole}))},ze=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(He=>He.teamId),["team","isManaged"]),[ue]),xe=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(He=>He.userId&&!He.isServiceAccount),["userLogin","isManaged"]),[ue]),We=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(He=>He.userId&&He.isServiceAccount),["userLogin","isManaged"]),[ue]),be=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(He=>He.builtInRole),["builtInRole","isManaged"]),[ue]),pe=(0,c.t)("access-control.permissions.role","Role"),Ue=(0,c.t)("access-control.permissions.user","User"),we=(0,c.t)("access-control.permissions.serviceaccount","Service Account"),je=(0,c.t)("access-control.permissions.team","Team");return r.createElement(r.Fragment,null,r.createElement("div",null,Z&&fe==="folders"&&r.createElement(r.Fragment,null,r.createElement(c.x6,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),r.createElement(u.x,{selectedItems:{folder:{[q]:!0},dashboard:{},panel:{},$all:!1}}),r.createElement(o.$,{v:2})),ue.length===0&&r.createElement(m.a,null,r.createElement(i.E,null,ie)),r.createElement(B,{title:pe,items:be,compareKey:"builtInRole",permissionLevels:he.permissions,onChange:Me,onRemove:Ee,canSet:Z}),r.createElement(B,{title:Ue,items:xe,compareKey:"userLogin",permissionLevels:he.permissions,onChange:Me,onRemove:Ee,canSet:Z}),r.createElement(B,{title:we,items:We,compareKey:"userLogin",permissionLevels:he.permissions,onChange:Me,onRemove:Ee,canSet:Z}),r.createElement(B,{title:je,items:ze,compareKey:"team",permissionLevels:he.permissions,onChange:Me,onRemove:Ee,canSet:Z}),Z&&r.createElement(r.Fragment,null,r.createElement(l.$n,{className:te.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>le(!0),icon:"plus"},ee),r.createElement(d.a,{in:oe},r.createElement(D,{title:J,onAdd:Fe,permissions:he.permissions,assignments:he.assignments,onCancel:()=>le(!1)})))),ne&&ne(ue))},N=async k=>{try{return await(0,g.AI)().get(`/api/access-control/${k}/description`)}catch(ee){return console.error("failed to load resource description: ",ee),w}},L=(k,ee)=>(0,g.AI)().get(`/api/access-control/${k}/${ee}`),V=(k,ee,ie,fe)=>Y(k,ee,"users",ie,fe),F=(k,ee,ie,fe)=>Y(k,ee,"teams",ie,fe),z=(k,ee,ie,fe)=>Y(k,ee,"builtInRoles",ie,fe),Y=(k,ee,ie,fe,q)=>(0,g.AI)().post(`/api/access-control/${k}/${ee}/${ie}/${fe}`,{permission:q}),H=k=>({breakdown:(0,t.css)({...k.typography.bodySmall,color:k.colors.text.secondary,marginBottom:k.spacing(2)}),addPermissionButton:(0,t.css)({marginBottom:k.spacing(2)})})},9025:(Q,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(96540),n=e(22669);const r="200px",s=200,o={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},m=({children:i,in:l,maxHeight:d=r,style:c=o})=>{const g={exited:{maxHeight:0},entering:{maxHeight:d},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.Ay,{in:l,timeout:s},u=>t.createElement("div",{style:{...c,...g[u]}},i))}},75269:(Q,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(96540),n=e(76888);const r=t.memo(({actions:s})=>{const{chrome:o}=(0,n.Il)();return(0,t.useLayoutEffect)(()=>{o.update({actions:s})}),null});r.displayName="TopNavUpdate"},10804:(Q,I,e)=>{"use strict";e.d(I,{K:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s({className:m,leftActionsSeparator:i}){const l=(0,r.of)(o);return i?n.createElement("div",{className:(0,t.cx)(m,l.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(m,l.line)})}const o=m=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:m.colors.border.medium,height:24})})},57571:(Q,I,e)=>{"use strict";e.d(I,{l:()=>t});const t=40},19361:(Q,I,e)=>{"use strict";e.d(I,{M:()=>d});var t=e(32196),n=e(96540),r=e(23596),s=e(40845);const o=({className:c,logo:g})=>n.createElement("img",{className:c,src:`${g||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),m=({className:c,children:g})=>{const u=(0,s.$j)(),E=(0,t.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(public/img/g8_login_${u.isDark?"dark":"light"}.svg)`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[u.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return n.createElement("div",{className:(0,t.cx)(E,c)},g)},i=({className:c})=>n.createElement("img",{className:c,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const c=(0,s.$j)();return(0,t.css)({background:r.alpha(c.colors.background.primary,.7),backgroundSize:"cover"})};class d{static{this.LoginLogo=o}static{this.LoginBackground=m}static{this.MenuLogo=i}static{this.LoginBoxBackground=l}static{this.AppTitle="Grafana"}static{this.LoginTitle="Welcome to Grafana"}static{this.HideEdition=!1}static{this.GetLoginSubTitle=()=>null}}},3984:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>t});function t(n,r,s){const o=[];let m=!1,i;function l(d,c=!1){if(m)return;const g=d.url?.split("?")??["",""];let u=g[0];const E=new URLSearchParams(g[1]);if(E.has("editview")&&(u+=`?editview=${E.get("editview")}`),s&&u===s.url){o.unshift({text:s.text,href:d.url??""}),m=!0;return}const p=u.length>0&&i===u;i=u,!d.hideFromBreadcrumbs&&!(c&&p)&&o.unshift({text:d.text,href:d.url??""}),d.parentItem&&l(d.parentItem)}return r&&l(r),l(n,!0),o}},25469:(Q,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({onClick:i,"aria-label":l,style:d})=>{const c=(0,r.of)(m);return n.createElement(s.K,{"aria-label":l??"Close",className:c,name:"times",onClick:i,style:d,tooltip:"Close"})},m=i=>(0,t.css)({position:"absolute",right:i.spacing(.5),top:i.spacing(1)})},27921:(Q,I,e)=>{"use strict";e.d(I,{A:()=>n});var t=e(96540);const n=r=>t.lazy(r)},7521:(Q,I,e)=>{"use strict";e.d(I,{A:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(14578),o=e(55852),m=e(76442);const i=(0,t.css)({textAlign:"center"}),l=(0,t.css)({maxWidth:"700px",margin:"0 auto"}),c=({title:g,buttonIcon:u,buttonLink:E,buttonTitle:p,buttonDisabled:b,onClick:a,proTip:h,proTipLink:P,proTipLinkTitle:y,proTipTarget:C,infoBox:f,infoBoxTitle:D})=>{const T=()=>n.createElement(n.Fragment,null,h?n.createElement("span",{key:"proTipFooter"},n.createElement(s.I,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",h," "),P&&n.createElement("a",{href:P,target:C,className:"text-link"},y)):"",f?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${l}`},D&&n.createElement("h5",null,D),n.createElement("div",{dangerouslySetInnerHTML:f})):""),M=T()?"":(0,t.css)({marginBottom:"20px"}),O=E?o.z9:o.$n,S=n.createElement(O,{size:"lg",onClick:a,href:E,icon:u,className:M,"data-testid":r.Tp.components.CallToActionCard.buttonV2(p),disabled:b},p);return n.createElement(m.c,{className:i,message:g,footer:T(),callToActionElement:S})}},38645:(Q,I,e)=>{"use strict";e.d(I,{Dd:()=>o,wi:()=>d});var t=e(96540),n=e(32264),r=e(14578),s=e(44836);let o=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function m(g){return{hasReleaseNotes:!0,isBeta:g.includes("-beta")}}function i(g){const{buildInfo:u,licenseInfo:E}=n.$,p=[],b=E.stateInfo?` (${E.stateInfo})`:"";if(g||p.push({target:"_blank",id:"license",text:`${u.edition}${b}`,url:E.licenseUrl}),u.hideVersion)return p;const{hasReleaseNotes:a}=m(u.version);return p.push({target:"_blank",id:"version",text:u.versionString,url:a?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),u.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p}function l(g){o=g}const d=t.memo(({customLinks:g,hideEdition:u})=>{const E=(g||o()).concat(i(u));return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,E.map((p,b)=>t.createElement("li",{key:b},t.createElement(c,{item:p}))))))});d.displayName="Footer";function c({item:g}){const u=g.url?t.createElement("a",{href:g.url,target:g.target,rel:"noopener noreferrer",id:g.id},g.text):g.text;return t.createElement(t.Fragment,null,g.icon&&t.createElement(r.I,{name:g.icon})," ",u)}},53153:(Q,I,e)=>{"use strict";e.d(I,{S:()=>p});var t=e(96540),n=e(49785),r=e(13544),s=e(32264),o=e(40845),m=e(42418),i=e(88575),l=e(66864),d=e(55852),c=e(56034),g=e(4691),u=e(78361),E=e(35043);const p=({onSubmit:b,onSkip:a,showDefaultPasswordWarning:h})=>{const P=(0,o.of)(g.$),[y,C]=(0,t.useState)(!1),[f,D]=(0,t.useState)(!0),{handleSubmit:T,register:M,getValues:O,formState:{errors:S},watch:v}=(0,n.mN)({defaultValues:{newPassword:"",confirmNew:""}}),x=v("newPassword"),A=R=>{b(R.newPassword)};return t.createElement("form",{onSubmit:T(A)},h&&t.createElement(m.F,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),t.createElement(i.D,{label:"New password",invalid:!!S.newPassword,error:S?.newPassword?.message},t.createElement(u.s,{onFocus:()=>C(!0),...M("newPassword",{required:"New Password is required",onBlur:()=>D(!1),validate:{strongPasswordValidationRegister:E.DP}}),id:"new-password",autoFocus:!0,autoComplete:"new-password"})),y&&t.createElement(E.zJ,{pristine:f,password:x,strongPasswordValidations:E.NQ}),t.createElement(i.D,{label:"Confirm new password",invalid:!!S.confirmNew,error:S?.confirmNew?.message},t.createElement(u.s,{...M("confirmNew",{required:"Confirmed Password is required",validate:R=>R===O().newPassword||"Passwords must match!"}),id:"confirm-new-password",autoComplete:"new-password"})),t.createElement(l.gW,null,t.createElement(d.$n,{type:"submit",className:P.submitButton},"Submit"),!s.$.auth.basicAuthStrongPasswordPolicy&&a&&t.createElement(c.m,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(d.$n,{fill:"text",onClick:a,type:"button","data-testid":r.Tp.pages.Login.skip},"Skip"))))}},72235:(Q,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(32196),n=e(96540),r=e(49785);function s({defaultValues:o,onSubmit:m,validateOnMount:i=!1,validateFieldsOnMount:l,children:d,validateOn:c="onSubmit",maxWidth:g=600,...u}){const{handleSubmit:E,trigger:p,formState:b,...a}=(0,r.mN)({mode:c,defaultValues:o});return(0,n.useEffect)(()=>{i&&p(l)},[p,l,i]),n.createElement("form",{className:(0,t.css)({maxWidth:g!=="none"?g+"px":g,width:"100%"}),onSubmit:E(m),...u},d({errors:b.errors,formState:b,trigger:p,...a}))}},30249:(Q,I,e)=>{"use strict";e.d(I,{o:()=>E});var t=e(96540),n=e(85200),r=e(1173),s=e(11261),o=e(90708),m=e(79041),i=e(67266),l=e(81297),d=e(16895),c=e(40458);function g(p,b,a=[]){for(const h of a)if(typeof h=="function"){if(!h(p,b))return!1}else if(b[h]!==p[h])return!1;return!0}const u={x:n.sJ.get(r.Ct.firstTimeField).get({}),y:n.sJ.get(r.Ct.byTypes).get(new Set([s.PU.number,s.PU.enum]))};class E extends t.Component{constructor(b){super(b),this.getTimeRange=()=>this.props.timeRange;let a=this.prepState(b);a.alignedData=a.config.prepData([a.alignedFrame]),this.state=a,this.plotInstance=t.createRef()}static{this.contextType=m.e4}prepState(b,a=!0){let h=null;const{frames:P,fields:y=u,preparePlotFrame:C,replaceVariables:f,dataLinkPostProcessor:D}=b,T=C??c.m,M=P.some(S=>S.fields.some(v=>(v.config.links?.length??0)>0)),O=T(P,{...y,y:M?()=>!0:y.y},b.timeRange);if((0,d.uY)("GraphNG",!1,"data aligned",O),O){let S=O;if(M){const x=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;O.fields.forEach(A=>{A.getLinks=(0,o._M)(O,A,{...A.state?.scopedVars,__dataContext:{value:{data:[O],field:A,frame:O,frameIndex:0}}},f,x,D)}),S={...O,fields:O.fields.filter((A,R)=>R===0||y.y(A,O,[O]))}}let v=this.state?.config;a&&(v=b.prepConfig(S,this.props.frames,this.getTimeRange),(0,d.uY)("GraphNG",!1,"config prepared",v)),h={alignedFrame:S,config:v},(0,d.uY)("GraphNG",!1,"data prepared",h.alignedData)}return h}componentDidUpdate(b){const{frames:a,structureRev:h,timeZone:P,propsToDiff:y}=this.props,C=!g(b,this.props,y);if(a!==b.frames||C||P!==b.timeZone){let f=this.prepState(this.props,!1);f&&((this.state.config===void 0||P!==b.timeZone||h!==b.structureRev||!h||C)&&(f.config=this.props.prepConfig(f.alignedFrame,this.props.frames,this.getTimeRange),(0,d.uY)("GraphNG",!1,"config recreated",f.config)),f.alignedData=f.config.prepData([f.alignedFrame]),this.setState(f))}}render(){const{width:b,height:a,children:h,renderLegend:P}=this.props,{config:y,alignedFrame:C,alignedData:f}=this.state;return y?t.createElement(i.KU,{width:b,height:a,legend:P(y)},(D,T)=>t.createElement(l.Z,{config:y,data:f,width:D,height:T,plotRef:M=>this.plotInstance.current=M},h?h(y,C):null)):null}}},40458:(Q,I,e)=>{"use strict";e.d(I,{m:()=>d});var t=e(11261),n=e(73060),r=e(46294);function s(c,g,u){let E,p;for(let b=0;b<g.length;b++)if(g[b]==null)p==null&&E!=null&&(p=b);else{if(p!=null&&E!=null){if(c[b]-E<u)for(;p<b;)g[p++]=void 0;p=null}E=c[b]}return g}var o=e(52622);function m(c){return c.type===t.PU.number&&c.config.custom?.drawStyle===o.GR.Bars&&!c.config.custom?.hideFrom?.viz}function i(c,g){return c.fields.find(u=>g!=null?u.name===g:u.type===t.PU.time)}function l(c,g){const u=i(c,g);let E=u?.values;for(let p=0;p<c.fields.length;p++){let b=c.fields[p];if(b===u||m(b))continue;let a=b.config.custom?.spanNulls;typeof a=="number"&&a!==-1&&E&&(b.values=s(E,b.values,a))}return c}function d(c,g,u){let E;e:for(let h of c)for(let P of h.fields)if(g.x(P,h,c)){E=P;break e}c=c.map(h=>E?.state?.nullThresholdApplied?h:(0,r.M)({frame:h,refFieldName:E.name,refFieldPseudoMin:u?.from.valueOf(),refFieldPseudoMax:u?.to.valueOf()}));let p=c.reduce((h,P)=>h+P.fields.reduce((y,C)=>y+(m(C)?1:0),0),0),b=1/0;p>1&&c.forEach(h=>{if(!h.fields.some(m))return;const P=E.values;for(let y=0;y<P.length;y++)y>0&&(b=Math.min(b,P[y]-P[y-1]))});let a=(0,n.Fd)({frames:c,joinBy:g.x,keep:g.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:h=>{if(m(h))return n.WO;let P=h.config.custom?.spanNulls;return P===!0?n.RC:P===-1?n.WO:n.JI}});return a?(a=l(a,E.name),b!==1/0&&(a.fields.forEach((h,P)=>{let y=h.values;if(P===0){let C=y[y.length-1];y.push(C+b,C+2*b)}else m(h)?y.push(null,null):y.push(void 0,void 0)}),a.length+=2),a):null}},18759:(Q,I,e)=>{"use strict";e.d(I,{T:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);function o({children:i,spacing:l,level:d}){const c=(0,r.of)(m,l,d);return n.createElement("span",{className:(0,t.css)(c.indentor)},i)}const m=(i,l,d)=>({indentor:(0,t.css)((0,s.Y)(i,l,c=>({paddingLeft:i.spacing(c*d)})))})},61680:(Q,I,e)=>{"use strict";e.d(I,{b:()=>r});var t=e(96540),n=e(33390);const r=s=>{const{children:o,storageKey:m,defaultValue:i}=s,[l,d]=(0,t.useState)({value:n.A.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const u=E=>{E.key===m&&d({value:n.A.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}});const c=u=>{try{n.A.setObject(m,u)}catch(E){console.error(E)}d({value:u})},g=()=>{try{n.A.delete(m)}catch(u){console.log(u)}d({value:i})};return t.createElement(t.Fragment,null,o(l.value,c,g))}},87570:(Q,I,e)=>{"use strict";e.d(I,{A:()=>i});var t=e(96540),n=e(17172),r=e(2913),s=e(44836);const o=()=>!!r.Ay.oauth&&Object.keys(r.Ay.oauth).length>0;class m extends t.PureComponent{constructor(c){super(c),this.changePassword=g=>{const u={newPassword:g,confirmNew:g,oldPassword:"admin"};if(this.props.resetCode){const E={code:this.props.resetCode,newPassword:g,confirmPassword:g};(0,n.AI)().post("/api/user/password/reset",E).then(()=>{this.toGrafana()})}else(0,n.AI)().put("/api/user/password",u).then(()=>{this.toGrafana()}).catch(E=>console.error(E))},this.login=g=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,n.AI)().post("/login",g,{showErrorAlert:!1}).then(u=>{if(this.result=u,g.password!=="admin"||r.Ay.ldapEnabled||r.Ay.authProxyEnabled){this.toGrafana();return}else this.changeView(g.password==="admin")}).catch(u=>{const E=(0,n.NF)(u)?l(u):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:E||(0,s.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=g=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:g})},this.toGrafana=()=>{this.result?.redirectUrl?r.Ay.appSubUrl!==""&&!this.result.redirectUrl.startsWith(r.Ay.appSubUrl)?window.location.assign(r.Ay.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(r.Ay.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:r.Ay.loginError}}render(){const{children:c}=this.props,{isLoggingIn:g,isChangingPassword:u,showDefaultPasswordWarning:E,loginErrorMessage:p}=this.state,{login:b,toGrafana:a,changePassword:h}=this,{loginHint:P,passwordHint:y,disableLoginForm:C,disableUserSignUp:f}=r.Ay;return t.createElement(t.Fragment,null,c({isOauthEnabled:o(),loginHint:P,passwordHint:y,disableLoginForm:C,disableUserSignUp:f,login:b,isLoggingIn:g,changePassword:h,skipPasswordChange:a,isChangingPassword:u,showDefaultPasswordWarning:E,loginErrorMessage:p}))}}const i=m;function l(d){switch(d.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,s.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,s.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return d.data?.message}}},4691:(Q,I,e)=>{"use strict";e.d(I,{$:()=>u,Q:()=>g});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(88575),i=e(10354),l=e(55852),d=e(44836),c=e(78361);const g=({children:E,onSubmit:p,isLoggingIn:b,passwordHint:a,loginHint:h})=>{const P=(0,o.of)(u),y=(0,n.useId)(),C=(0,n.useId)(),{handleSubmit:f,register:D,formState:{errors:T}}=(0,r.mN)({mode:"onChange"});return n.createElement("div",{className:P.wrapper},n.createElement("form",{onSubmit:f(p)},n.createElement(m.D,{label:(0,d.t)("login.form.username-label","Email or username"),invalid:!!T.user,error:T.user?.message},n.createElement(i.p,{...D("user",{required:(0,d.t)("login.form.username-required","Email or username is required")}),id:y,autoFocus:!0,autoCapitalize:"none",placeholder:h,"data-testid":s.Tp.pages.Login.username})),n.createElement(m.D,{label:(0,d.t)("login.form.password-label","Password"),invalid:!!T.password,error:T.password?.message},n.createElement(c.s,{...D("password",{required:(0,d.t)("login.form.password-required","Password is required")}),id:C,autoComplete:"current-password",placeholder:a})),n.createElement(l.$n,{type:"submit","data-testid":s.Tp.pages.Login.submit,className:P.submitButton,disabled:b},b?(0,d.t)("login.form.submit-loading-label","Logging in..."):(0,d.t)("login.form.submit-label","Log in")),E))},u=E=>({wrapper:(0,t.css)({width:"100%",paddingBottom:E.spacing(2)}),submitButton:(0,t.css)({justifyContent:"center",width:"100%"})})},20851:(Q,I,e)=>{"use strict";e.d(I,{GU:()=>i,YO:()=>d,qm:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(19361),o=e(38645);const m=({children:c,enterAnimation:g=!0})=>{const u=(0,r.of)(d);return n.createElement("div",{className:(0,t.cx)(u.loginInnerBox,g&&u.enterAnimation)},c)},i=({children:c,branding:g,isChangingPassword:u})=>{const E=(0,r.of)(d),[p,b]=(0,n.useState)(!1),a=g?.loginSubtitle??s.M.GetLoginSubTitle(),h=g?.loginTitle??s.M.LoginTitle,P=g?.loginBoxBackground||s.M.LoginBoxBackground(),y=g?.loginLogo,C=g?.hideEdition??s.M.HideEdition;return(0,n.useEffect)(()=>b(!0),[]),n.createElement(s.M.LoginBackground,{className:(0,t.cx)(E.container,p&&E.loginAnim,g?.loginBackground)},n.createElement("div",{className:E.loginMain},n.createElement("div",{className:(0,t.cx)(E.loginContent,P,"login-content-box")},n.createElement("div",{className:E.loginLogoWrapper},n.createElement(s.M.LoginLogo,{className:E.loginLogo,logo:y}),n.createElement("div",{className:E.titleWrapper},u?n.createElement("h1",{className:E.mainTitle},"Update your password"):n.createElement(n.Fragment,null,n.createElement("h1",{className:E.mainTitle},h),a&&n.createElement("h3",{className:E.subTitle},a)))),n.createElement("div",{className:E.loginOuterBox},c))),g?.hideFooter?n.createElement(n.Fragment,null):n.createElement(o.wi,{hideEdition:C,customLinks:g?.footerLinks}))},l=(0,t.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,d=c=>({loginMain:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,t.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,t.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,t.css)({width:"100%",maxWidth:60,marginBottom:c.spacing(2),[c.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:c.spacing(3)}),titleWrapper:(0,t.css)({textAlign:"center"}),mainTitle:(0,t.css)({fontSize:22,[c.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,t.css)({fontSize:c.typography.size.md,color:c.colors.text.secondary}),loginContent:(0,t.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:c.shape.radius.default,padding:c.spacing(2,0),opacity:0,transition:"opacity 0.5s ease-in-out",[c.breakpoints.up("sm")]:{minHeight:c.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,t.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,t.css)({padding:c.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",transition:"0.25s ease"}),enterAnimation:(0,t.css)({animation:`${l} ease-out 0.2s`})})},60188:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(10354),o=e(88575);class m extends r.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=r.createRef(),this.updateValue=()=>{const l=this.inputRef.current?.value;let d=!1,c="";const g=this.props.min,u=this.props.max;let E=l!==""?Number(l):void 0;E&&!Number.isNaN(E)&&(g!=null&&E<g?(c=g.toString(),d=!0):u!=null&&E>u?(c=u.toString(),d=!0):c=l??"",this.setState({text:c,inputCorrected:d})),d&&this.updateValueDebounced(),!Number.isNaN(E)&&E!==this.props.value&&this.props.onChange(E)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=l=>{this.setState({text:l.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=l=>{l.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(l){if(this.props.value!==l.value){const d=isNaN(this.props.value)?"":`${this.props.value}`;d!==this.state.text&&this.setState({text:d})}}renderInput(){return r.createElement(s.p,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:l}=this.state;if(l){let d="",{min:c,max:g}=this.props;return g==null?c!=null&&(d=`< ${c}`):c!=null?d=`${c} < > ${g}`:d=`> ${g}`,r.createElement(o.D,{invalid:l,error:`Out of range ${d}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},77268:(Q,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(83598),o=e(29158),m=e(83876);const i=({value:d,settings:c,onChange:g,details:u})=>{const E=(0,r.$j)(),p=(0,r.of)(l);return n.createElement(s.sk,{color:d??"",onChange:g,enableNamedColors:c?.enableNamedColors!==!1},({ref:b,showColorPicker:a,hideColorPicker:h})=>n.createElement("div",{className:p.spot},n.createElement("div",{className:p.colorPicker},n.createElement(m.q,{ref:b,onClick:a,onMouseLeave:h,color:d?E.visualization.getColorByName(d):E.components.input.borderColor})),u&&n.createElement(n.Fragment,null,d?n.createElement("span",{className:p.colorText,onClick:a},d):n.createElement("span",{className:p.placeholderText,onClick:a},c?.placeholder??"Select color"),c?.isClearable&&d&&n.createElement(o.K,{name:"times",onClick:()=>g(void 0),tooltip:"Clear settings"}))))},l=d=>({spot:(0,t.css)({cursor:"pointer",color:d.colors.text.primary,background:d.components.input.background,padding:"3px",height:d.v1.spacing.formInputHeight,border:`1px solid ${d.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${d.components.input.borderHover}`}}),colorPicker:(0,t.css)({padding:`0 ${d.spacing(1)}`}),colorText:(0,t.css)({flexGrow:2}),placeholderText:(0,t.css)({flexGrow:2,color:d.colors.text.secondary})})},72626:(Q,I,e)=>{"use strict";e.d(I,{w:()=>r});var t=e(96540),n=e(60188);const r=({value:s,onChange:o,item:m})=>{const{settings:i}=m,l=(0,t.useCallback)(d=>{o(i?.integer&&d!==void 0?Math.floor(d):d)},[o,i?.integer]);return t.createElement(n.Q,{value:s,min:i?.min,max:i?.max,step:i?.step,placeholder:i?.placeholder,onChange:l})}},33919:(Q,I,e)=>{"use strict";e.d(I,{H:()=>Oe,u:()=>Ne});var t=e(96540),n=e(69550),r=e(27310),s=e(11261),o=e(50082),m=e(15292),i=e(94354),l=e(20333),d=e(76218),c=e(32196),g=e(2543),u=e(47737),E=e(60578),p=e(24284),b=e(10354),a=e(83598),h=e(29158),P=e(55852),y=e(60029),C=e(3911);const f=[{value:o.O.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:o.O.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class D extends t.PureComponent{constructor(se){super(se),this.onAddThreshold=()=>{const{steps:ge}=this.state;let Pe=0;ge.length>1&&(Pe=ge[ge.length-1].value+10);let Re=p.Tj.filter(Xe=>!ge.some(tt=>tt.color===Xe))[1];Re||(Re="#CCCCCC");const Be={value:Pe,color:Re,key:T++},_e=[...ge,Be];(0,u.RU)(_e),this.setState({steps:_e},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=ge=>{const{steps:Pe}=this.state;Pe.length&&ge.key!==Pe[0].key&&this.setState({steps:Pe.filter(Re=>Re.key!==ge.key)},this.onChange)},this.onChangeThresholdValue=(ge,Pe)=>{const Re=ge.target.value.replace(/,/g,"."),Be=parseFloat(Re),_e=isNaN(Be)?"":Be,Xe=this.state.steps.map(tt=>(tt.key===Pe.key&&(tt={...tt,value:_e}),tt));Xe.length&&(Xe[0].value=-1/0),(0,u.RU)(Xe),this.setState({steps:Xe})},this.onChangeThresholdColor=(ge,Pe)=>{const{steps:Re}=this.state,Be=Re.map(_e=>(_e.key===ge.key&&(_e={..._e,color:Pe}),_e));this.setState({steps:Be},this.onChange)},this.onBlur=()=>{const ge=[...this.state.steps];(0,u.RU)(ge),this.setState({steps:ge},this.onChange)},this.onChange=()=>{this.props.onChange(O(this.props.thresholds,this.state.steps))},this.onModeChanged=ge=>{this.props.onChange({...this.props.thresholds,mode:ge})};const ae=M(se.thresholds.steps);ae[0].value=-1/0,this.state={steps:ae},this.latestThresholdInputRef=t.createRef()}renderInput(se,ae,ge){const Pe=this.props.thresholds.mode===o.O.Percentage,Re=`Threshold ${ge+1}`;return isFinite(se.value)?t.createElement(b.p,{type:"number",step:"0.0001",key:Pe.toString(),onChange:Be=>this.onChangeThresholdValue(Be,se),value:se.value,"aria-label":Re,ref:ge===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ae.inputPrefix},t.createElement("div",{className:ae.colorPicker},t.createElement(a.sk,{color:se.color,onChange:Be=>this.onChangeThresholdColor(se,Be),enableNamedColors:!0})),Pe&&t.createElement("div",{className:ae.percentIcon},"%")),suffix:t.createElement(h.K,{className:ae.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(se),tooltip:`Remove ${Re}`})}):t.createElement(b.p,{type:"text",value:"Base","aria-label":Re,disabled:!0,prefix:t.createElement("div",{className:ae.colorPicker},t.createElement(a.sk,{color:se.color,onChange:Be=>this.onChangeThresholdColor(se,Be),enableNamedColors:!0}))})}render(){const{thresholds:se}=this.props,{steps:ae}=this.state;return t.createElement(E.D.Consumer,null,ge=>{const Pe=S(ge);return t.createElement("div",{className:Pe.wrapper},t.createElement(P.$n,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Pe.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Pe.thresholds},ae.slice(0).reverse().map((Re,Be)=>t.createElement("div",{className:Pe.item,key:`${Re.key}`},this.renderInput(Re,Pe,Be)))),t.createElement("div",null,t.createElement(y.J,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(i.z,{options:f,onChange:this.onModeChanged,value:se.mode})))})}}let T=100;function M(ye){return(!ye||ye.length===0)&&(ye=[{value:-1/0,color:"green"}]),ye.filter((se,ae)=>(0,g.isNumber)(se.value)||ae===0).map(se=>({color:se.color,value:se.value===null?-1/0:se.value,key:T++}))}function O(ye,se){return{mode:ye.mode??o.O.Absolute,steps:se.map(ge=>{const{key:Pe,...Re}=ge;return Re})}}const S=(0,C.N)(ye=>({wrapper:(0,c.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,c.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ye.spacing(2)};
    `,item:(0,c.css)`
      margin-bottom: ${ye.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,c.css)`
      padding: 0 ${ye.spacing(1)};
    `,addButton:(0,c.css)`
      margin-bottom: ${ye.spacing(1)};
    `,percentIcon:(0,c.css)`
      font-size: ${ye.typography.bodySmall.fontSize};
      color: ${ye.colors.text.secondary};
    `,inputPrefix:(0,c.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,c.css)`
      color: ${ye.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ye.colors.text};
      }
    `}));class v extends t.PureComponent{constructor(se){super(se)}render(){const{onChange:se}=this.props;let ae=this.props.value;return ae||(ae={mode:o.O.Percentage,steps:[]}),t.createElement(D,{thresholds:ae,onChange:se})}}var x=e(25019),A=e(40845),R=e(66864),B=e(14578),U=e(37390),w=e(80744),K=e(25148),N=e(55244),L=e(51986),V=e(88323);function F({mapping:ye,index:se,onChange:ae,onRemove:ge,onDuplicate:Pe,showIconPicker:Re}){const{key:Be,result:_e,id:Xe}=ye,tt=(0,A.of)(z),at=(0,t.useRef)(null),st=(0,t.useCallback)(lt=>{const Ct={...ye,result:{...ye.result}};lt(Ct),ae(se,Ct)},[ye,se,ae]);(0,t.useEffect)(()=>{at.current&&ye.isNew&&(at.current.focus(),st(lt=>{lt.isNew=!1}))},[ye,at,st]);const dt=lt=>{st(Ct=>{Ct.result.color=lt})},ot=()=>{st(lt=>{lt.result.color=void 0})},ft=lt=>{st(Ct=>{Ct.result.icon=lt})},yt=()=>{st(lt=>{lt.result.icon=void 0})},Tt=lt=>{st(Ct=>{Ct.key=lt.currentTarget.value})},Kt=lt=>{st(Ct=>{Ct.result.text=lt.currentTarget.value})},Gt=lt=>{st(Ct=>{Ct.from=parseFloat(lt.currentTarget.value)})},_t=lt=>{st(Ct=>{Ct.to=parseFloat(lt.currentTarget.value)})},it=lt=>{st(Ct=>{Ct.pattern=lt.currentTarget.value})},Mt=lt=>{st(Ct=>{Ct.specialMatch=lt.value})},Dn=[{label:"Null",value:x.W.Null,description:"Matches null and undefined values"},{label:"NaN",value:x.W.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:x.W.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:x.W.True,description:"Boolean true values"},{label:"False",value:x.W.False,description:"Boolean false values"},{label:"Empty",value:x.W.Empty,description:"Empty string"}];return t.createElement(N.sx,{key:Xe,draggableId:Xe,index:se},lt=>t.createElement("tr",{className:tt.dragRow,ref:lt.innerRef,...lt.draggableProps},t.createElement("td",null,t.createElement("div",{className:tt.dragHandle,...lt.dragHandleProps},t.createElement(B.I,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:tt.typeColumn},ye.type),t.createElement("td",null,ye.type===x.d.ValueToText&&t.createElement(b.p,{ref:at,type:"text",value:Be??"",onChange:Tt,placeholder:"Exact value to match"}),ye.type===x.d.RangeToText&&t.createElement("div",{className:tt.rangeInputWrapper},t.createElement(b.p,{type:"number",value:ye.from??"",placeholder:"Range start",onChange:Gt,prefix:"From"}),t.createElement(b.p,{type:"number",value:ye.to??"",placeholder:"Range end",onChange:_t,prefix:"To"})),ye.type===x.d.RegexToText&&t.createElement(b.p,{type:"text",value:ye.pattern??"",placeholder:"Regular expression",onChange:it}),ye.type===x.d.SpecialValue&&t.createElement(V.l6,{value:Dn.find(Ct=>Ct.value===ye.specialMatch),options:Dn,onChange:Mt})),t.createElement("td",null,t.createElement(b.p,{type:"text",value:_e.text??"",onChange:Kt,placeholder:"Optional display text"})),t.createElement("td",{className:tt.textAlignCenter},_e.color&&t.createElement(R.Gy,{spacing:"sm",justify:"center"},t.createElement(a.sk,{color:_e.color,onChange:dt,enableNamedColors:!0}),t.createElement(h.K,{name:"times",onClick:ot,tooltip:"Remove color",tooltipPlacement:"top"})),!_e.color&&t.createElement(a.sk,{color:"gray",onChange:dt,enableNamedColors:!0},Ct=>t.createElement(P.$n,{variant:"primary",fill:"text",onClick:Ct.showColorPicker,ref:Ct.ref,size:"sm"},"Set color"))),Re&&t.createElement("td",{className:tt.textAlignCenter},t.createElement(R.Gy,{spacing:"sm",justify:"center"},t.createElement(K.n,{onChange:ft,onClear:yt,value:_e.icon,size:w.Iy.SMALL,folderName:w.Iu.Icon,mediaType:w.zu.Icon,color:_e.color}),_e.icon&&t.createElement(h.K,{name:"times",onClick:yt,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:tt.textAlignCenter},t.createElement(R.Gy,{spacing:"sm"},t.createElement(h.K,{name:"copy",onClick:()=>Pe(se),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),t.createElement(h.K,{name:"trash-alt",onClick:()=>ge(se),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const z=ye=>({dragRow:(0,c.css)({position:"relative"}),dragHandle:(0,c.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ye.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,c.css)({display:"flex","> div:first-child":{marginRight:ye.spacing(2)}}),regexInputWrapper:(0,c.css)({display:"flex","> div:first-child":{marginRight:ye.spacing(2)}}),typeColumn:(0,c.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,c.css)({textAlign:"center"})});function Y({value:ye,onChange:se,onClose:ae,showIconPicker:ge}){const Pe=(0,A.of)(H),[Re,Be]=(0,t.useState)([]);(0,t.useEffect)(()=>{Be(q(ye))},[ye]);const _e=ft=>{if(!ye||!ft.destination)return;const yt=[...Re],Tt=yt[ft.source.index];yt.splice(ft.source.index,1),yt.splice(ft.destination.index,0,Tt),Be(yt)},Xe=(ft,yt)=>{const Tt=[...Re];Tt.splice(ft,1,yt),Be(Tt)},tt=ft=>{const yt=[...Re];yt.splice(ft,1),Be(yt)},at=[{label:"Value",value:x.d.ValueToText,description:"Match a specific text value"},{label:"Range",value:x.d.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:x.d.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:x.d.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],st=ft=>{Be([...Re,ee({type:ft.value,result:{},isNew:!0})])},dt=ft=>{const yt=ie(Re[ft]),Tt=[...Re];Tt.splice(ft,0,{...yt});for(let Kt=ft;Kt<Re.length;Kt++)Tt[Kt].result.index=Kt;Be(Tt)},ot=()=>{se(fe(Re)),ae()};return(0,t.useEffect)(()=>{ye?.length||st({value:x.d.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Pe.tableWrap},t.createElement("table",{className:Pe.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),ge&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(N.JY,{onDragEnd:_e},t.createElement(N.gL,{droppableId:"sortable-field-mappings",direction:"vertical"},ft=>t.createElement("tbody",{ref:ft.innerRef,...ft.droppableProps},Re.map((yt,Tt)=>t.createElement(F,{key:yt.id,mapping:yt,index:Tt,onChange:Xe,onRemove:tt,onDuplicate:dt,showIconPicker:ge})),ft.placeholder))))),t.createElement(U.a.ButtonRow,{leftItems:t.createElement(L.i,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:at,onChange:st})},t.createElement(P.$n,{variant:"secondary",fill:"outline",onClick:ae},"Cancel"),t.createElement(P.$n,{variant:"primary",onClick:ot},"Update")))}const H=ye=>({tableWrap:(0,c.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,c.css)({width:"100%",marginBottom:ye.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ye.colors.action.hover}," th, td":{padding:ye.spacing(1)}})});function k(){return(0,g.uniqueId)("mapping-")}function ee(ye){return{type:x.d.ValueToText,result:{},id:k(),...ye}}function ie(ye){return{...ee(ye),id:k()}}function fe(ye){const se=[],ae={type:x.d.ValueToText,options:{}};return ye.forEach((ge,Pe)=>{const Re={...ge.result,index:Pe};switch((!Re.text||Re.text.trim().length===0)&&(Re.text=void 0),ge.type){case x.d.ValueToText:ge.key!=null&&(ae.options[ge.key]=Re);break;case x.d.RangeToText:ge.from!=null&&ge.to!=null&&se.push({type:ge.type,options:{from:ge.from,to:ge.to,result:Re}});break;case x.d.RegexToText:ge.pattern!=null&&se.push({type:ge.type,options:{pattern:ge.pattern,result:Re}});break;case x.d.SpecialValue:se.push({type:ge.type,options:{match:ge.specialMatch,result:Re}})}}),Object.keys(ae.options).length>0&&se.unshift(ae),se}function q(ye){const se=[];if(ye)for(const ae of ye)switch(ae.type){case x.d.ValueToText:for(const ge of Object.keys(ae.options))se.push(ee({type:ae.type,result:ae.options[ge],key:ge}));break;case x.d.RangeToText:se.push(ee({type:ae.type,result:ae.options.result,from:ae.options.from??0,to:ae.options.to??0}));break;case x.d.RegexToText:se.push(ee({type:ae.type,result:ae.options.result,pattern:ae.options.pattern}));break;case x.d.SpecialValue:se.push(ee({type:ae.type,result:ae.options.result,specialMatch:ae.options.match??x.W.Null}))}return se.sort((ae,ge)=>(ae.result.index??0)>(ge.result.index??0)?1:-1),se}const Z=t.memo(ye=>{const{value:se,onChange:ae,item:ge}=ye,Pe=(0,A.of)(J),Re=ge.settings?.icon,[Be,_e]=(0,t.useState)(!1),Xe=(0,t.useCallback)(()=>{_e(!1)},[_e]),tt=(0,t.useMemo)(()=>q(se),[se]),at=(0,t.useCallback)((dt,ot)=>{tt[ot].result.color=dt,ae(fe(tt))},[tt,ae]),st=(0,t.useCallback)((dt,ot)=>{tt[ot].result.icon=dt,ae(fe(tt))},[tt,ae]);return t.createElement(R.gW,null,t.createElement("table",{className:Pe.compactTable},t.createElement("tbody",null,tt.map((dt,ot)=>t.createElement("tr",{key:ot.toString()},t.createElement("td",null,dt.type===x.d.ValueToText&&dt.key,dt.type===x.d.RangeToText&&t.createElement("span",null,"[",dt.from," - ",dt.to,"]"),dt.type===x.d.RegexToText&&dt.pattern,dt.type===x.d.SpecialValue&&dt.specialMatch),t.createElement("td",null,t.createElement(B.I,{name:"arrow-right"})),t.createElement("td",null,dt.result.text),dt.result.color&&t.createElement("td",null,t.createElement(a.sk,{color:dt.result.color,onChange:ft=>at(ft,ot),enableNamedColors:!0})),Re&&dt.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.n,{onChange:ft=>st(ft,ot),value:dt.result.icon,size:w.Iy.SMALL,folderName:w.Iu.Icon,mediaType:w.zu.Icon,color:dt.result.color})))))),t.createElement(P.$n,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>_e(!0)},tt.length>0&&t.createElement("span",null,"Edit value mappings"),tt.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(U.a,{isOpen:Be,title:"Value mappings",onDismiss:Xe,className:Pe.modal,closeOnBackdropClick:!1},t.createElement(Y,{value:se,onChange:ae,onClose:Xe,showIconPicker:Re})))});Z.displayName="ValueMappingsEditor";const J=ye=>({modal:(0,c.css)({width:"980px"}),compactTable:(0,c.css)({width:"100%","tbody td":{padding:ye.spacing(.5)}})});var G=e(59429);const ne=({value:ye,onChange:se,item:ae})=>{const{placeholder:ge,isClearable:Pe}=ae?.settings??{},Re=(0,t.useCallback)(Be=>{se(Be?.value?.uid)},[se]);return t.createElement(G.b,{isClearable:Pe,defaultOptions:!0,onChange:Re,placeholder:ge,value:ye})};var te=e(77268),oe=e(8066),le=e(24293),ue=e(88575);const Te=({value:ye,onChange:se,item:ae,id:ge})=>{const Pe=(0,A.$j)(),Re=(0,A.of)(re),Be=(0,oe.Hs)(ye?.mode),Xe=(ae.settings?.byValueSupport?oe.uf.list():oe.uf.list().filter(ot=>!ot.isByValue)).filter(ot=>!ot.excludeFromPicker).map(ot=>{let ft=ot.isByValue?" (by value)":"";return{value:ot.id,label:`${ot.name}${ft}`,description:ot.description,isContinuous:ot.isContinuous,isByValue:ot.isByValue,component(){return t.createElement(he,{mode:ot,theme:Pe})}}}),tt=ot=>{se({...ye,mode:ot.value})},at=ot=>{se({...ye,mode:dt,fixedColor:ot})},st=ot=>{se({...ye,mode:dt,seriesBy:ot})},dt=ye?.mode??le.Y.Thresholds;if(dt===le.Y.Fixed||dt===le.Y.Shades)return t.createElement("div",{className:Re.group},t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:dt,onChange:tt,className:Re.select,inputId:ge}),t.createElement(te.a,{value:ye?.fixedColor,onChange:at}));if(ae.settings?.bySeriesSupport&&Be.isByValue){const ot=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Pe.spacing(2)}},t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:dt,onChange:tt,inputId:ge})),t.createElement(ue.D,{label:"Color series by"},t.createElement(i.z,{value:ye?.seriesBy??"last",options:ot,onChange:st})))}return t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:dt,onChange:tt,inputId:ge})},he=({mode:ye,theme:se})=>{if(!ye.getColors)return null;const ae=ye.getColors(se).map(se.visualization.getColorByName),ge={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ye.isContinuous)ge.background=`linear-gradient(90deg, ${ae.join(",")})`;else{let Pe="",Re="";for(let Be=0;Be<ae.length;Be++){const _e=ae[Be];if(Pe==="")Pe=`linear-gradient(90deg, ${_e} 0%`;else{const tt=Be/(ae.length-1)*100;Pe+=`, ${Re} ${tt}%, ${_e} ${tt}%`}Re=_e}ge.background=Pe}return t.createElement("div",{style:ge})},re=ye=>({group:(0,c.css)({display:"flex"}),select:(0,c.css)({marginRight:ye.spacing(1),flexGrow:1})});var De=e(91890),Fe=e(64919);const Ee=({value:ye,onChange:se,context:ae})=>t.createElement(Fe.e,{links:ye,onChange:se,data:ae.data,getSuggestions:()=>ae.getSuggestions?ae.getSuggestions(De.uP.Values):[]});class Me extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:se}=this.props,{settings:ae}=se;let ge=se.settings?.options||[];ae?.getOptions&&(ge=await ae.getOptions(this.props.context)),this.state.options!==ge&&this.setState({isLoading:!1,options:ge})}}componentDidMount(){this.updateOptions()}componentDidUpdate(se){const ae=se.item?.settings,ge=this.props.item?.settings;if(ae!==ge)this.updateOptions();else if(ge?.getOptions){const Pe=se.context?.data,Re=this.props.context?.data;Pe!==Re&&this.updateOptions()}}render(){const{options:se,isLoading:ae}=this.state,{value:ge,onChange:Pe,item:Re}=this.props,{settings:Be}=Re;return t.createElement(V.KF,{isLoading:ae,value:ge,defaultValue:ge,allowCustomValue:Be?.allowCustomValue,onChange:_e=>{Pe(_e.map(Xe=>Xe.value).flatMap(Xe=>Xe!==void 0?[Xe]:[]))},options:se})}}var ze=e(72626);class xe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:se}=this.props,{settings:ae}=se;let ge=se.settings?.options||[];ae?.getOptions&&(ge=await ae.getOptions(this.props.context)),this.state.options!==ge&&this.setState({isLoading:!1,options:ge})}}componentDidMount(){this.updateOptions()}componentDidUpdate(se){const ae=se.item?.settings,ge=this.props.item?.settings;if(ae!==ge)this.updateOptions();else if(ge?.getOptions){const Pe=se.context?.data,Re=this.props.context?.data;Pe!==Re&&this.updateOptions()}}render(){const{options:se,isLoading:ae}=this.state,{value:ge,onChange:Pe,item:Re}=this.props,{settings:Be}=Re;let _e=se.find(Xe=>Xe.value===ge);return!_e&&ge&&(_e={label:`${ge}`,value:ge}),t.createElement(V.l6,{isLoading:ae,value:_e,defaultValue:ge,allowCustomValue:Be?.allowCustomValue,isClearable:Be?.isClearable,onChange:Xe=>Pe(Xe?.value),options:se})}}var We=e(57602),be=e(42734);const pe=({value:ye,onChange:se,item:ae,id:ge})=>t.createElement(be.S,{stats:ye,onChange:se,allowMultiple:!!ae.settings?.allowMultiple,defaultStat:ae.settings?.defaultStat,inputId:ge});var Ue=e(29286),we=e(32264);class je extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=se=>{const{value:ae,onChange:ge}=this.props,Pe=[...ae];Pe.splice(se,1),ge(Pe)},this.onValueChange=(se,ae)=>{if("key"in se&&se.key!=="Enter")return;const{value:ge,onChange:Pe}=this.props,Re=se.currentTarget.value.trim();if(ae<0){Re&&(se.currentTarget.value="",Pe([...ge,Re])),this.setState({showAdd:!1});return}if(!Re)return this.onRemoveString(ae);const Be=[...ge];Be[ae]=Re,Pe(Be)}}render(){const{value:se,item:ae}=this.props,{showAdd:ge}=this.state,Pe=He(we.$.theme2),Re=ae.settings?.placeholder||"Add text";return t.createElement("div",null,se.map((Be,_e)=>t.createElement(b.p,{className:Pe.textInput,key:`${_e}/${Be}`,defaultValue:Be||"",onBlur:Xe=>this.onValueChange(Xe,_e),onKeyDown:Xe=>this.onValueChange(Xe,_e),suffix:t.createElement(B.I,{className:Pe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(_e)})})),ge?t.createElement(b.p,{autoFocus:!0,className:Pe.textInput,placeholder:Re,defaultValue:"",onBlur:Be=>this.onValueChange(Be,-1),onKeyDown:Be=>this.onValueChange(Be,-1),suffix:t.createElement(B.I,{name:"plus-circle"})}):t.createElement(P.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Re))}}const He=(0,C.N)(ye=>({textInput:(0,c.css)({marginBottom:"5px","&:hover":{border:`1px solid ${ye.components.input.borderHover}`}}),trashIcon:(0,c.css)({color:ye.colors.text.secondary,cursor:"pointer","&:hover":{color:ye.colors.text.primary}})}));var rt=e(2056);function Je({value:ye,onChange:se,item:ae}){const ge=(0,A.of)(Ve);return ae?.settings?.isClearable&&ye!=null?t.createElement("div",{className:ge.wrapper},t.createElement("span",{className:ge.first},t.createElement(rt.p,{value:ye,onChange:se})),t.createElement(h.K,{name:"times",onClick:()=>se(void 0),tooltip:"Clear unit selection"})):t.createElement(rt.p,{value:ye,onChange:se})}const Ve=ye=>({wrapper:(0,c.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,c.css)({marginRight:ye.spacing(1),flexGrow:2})}),Oe=()=>{const ye={id:"number",name:"Number",description:"Allows numeric values input",editor:ze.w},se={id:"slider",name:"Slider",description:"Allows numeric values input",editor:We.G},ae={id:"text",name:"Text",description:"Allows string values input",editor:Ue.g},ge={id:"strings",name:"String array",description:"An array of strings",editor:je},Pe={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Gt){const{id:_t,...it}=Gt;return t.createElement(m.d,{...it,onChange:Mt=>Gt.onChange(Mt.currentTarget.checked)})}},Re={id:"select",name:"Select",description:"Allows option selection",editor:xe},Be={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Me},_e={id:"radio",name:"Radio",description:"Allows option selection",editor(Gt){return t.createElement(i.z,{...Gt,options:Gt.item.settings?.options})}},Xe={id:"unit",name:"Unit",description:"Allows unit input",editor:Je},tt={id:"color",name:"Color",description:"Allows color selection",editor(Gt){return t.createElement(te.a,{value:Gt.value,onChange:Gt.onChange,settings:Gt.item.settings,details:!0})}},at={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:Te},st={id:"links",name:"Links",description:"Allows defining data links",editor:Ee},dt={id:"stats-picker",name:"Stats Picker",editor:pe,description:""},ot={id:"timezone",name:"Time zone",description:"Time zone selection",editor:l.U},ft={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:d.O};return[ae,ye,se,Pe,_e,Re,Xe,st,dt,ge,ot,at,tt,Be,ft,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ne},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:Z},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:v}]},Ne=()=>{const ye=["Standard options"],se={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:r.AM,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ye},ae={id:"unit",path:"unit",name:"Unit",description:"",editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:r.OU,settings:{placeholder:"none"},shouldApply:()=>!0,category:ye},ge={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:ot=>ot.type===s.PU.number,showIf:ot=>ot.min===void 0||ot.max===void 0,category:ye},Pe={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto"},shouldApply:ot=>ot.type===s.PU.number,category:ye},Re={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto"},shouldApply:ot=>ot.type===s.PU.number,category:ye},Be={id:"decimals",path:"decimals",name:"Decimals",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:ot=>ot.type===s.PU.number,category:ye},_e={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:r.OU,settings:{placeholder:"-"},shouldApply:()=>!0,category:ye},Xe={id:"links",path:"links",name:"Data links",editor:n.D.get("links").editor,override:n.D.get("links").editor,process:r.Ch,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:ot=>ot?ot.length:0},tt={id:"color",path:"color",name:"Color scheme",editor:n.D.get("fieldColor").editor,override:n.D.get("fieldColor").editor,process:r.hS,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ye},at={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.D.get("mappings").editor,override:n.D.get("mappings").editor,process:r.xT,settings:{},defaultValue:[],shouldApply:ot=>ot.type!==s.PU.time,category:["Value mappings"],getItemsCount:ot=>ot?ot.length:0},st={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.D.get("thresholds").editor,override:n.D.get("thresholds").editor,process:r.N7,settings:{},defaultValue:{mode:o.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:ot=>ot?ot.steps.length:0},dt={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:()=>!0,settings:{},category:ye};return[ae,Pe,Re,ge,Be,se,tt,_e,Xe,at,st,dt]}},57602:(Q,I,e)=>{"use strict";e.d(I,{G:()=>l});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(24849),i=e(60188);const l=({value:g,onChange:u,item:E})=>{const p=(0,s.useRef)(null),{settings:b}=E,a=b?.min||0,h=b?.max||100,P=b?.step,y=b?.marks||{[a]:a,[h]:h},C=b?.included,f=b?.ariaLabelForHandle,D=75,T=!0,M=(0,o.$j)(),[O,S]=(0,s.useState)(g??a),[v,x]=(0,s.useState)(D);(0,s.useEffect)(()=>{g!=null&&g!==O&&S(g)},[g,O]),(0,s.useEffect)(()=>{const K=getComputedStyle(p.current),N=K.getPropertyValue("font-weight")||"normal",L=K.getPropertyValue("font-size")||"16px",V=K.getPropertyValue("font-family")||"Arial",F="0",z=4,Y=8,H=Math.max((h+(P||0)).toString().length,(h-(P||0)).toString().length)+z,k=F.repeat(H),ee=d(k,`${N} ${L} ${V}`);ee&&x(ee+Y*2)},[h,P]);const A=(0,s.useCallback)(K=>{const N=typeof K=="number"?K:K[0];S(N),u&&u(N)},[S,u]),R=(0,s.useCallback)(K=>{let N=K;(Number.isNaN(N)||!N)&&(N=0),S(N),u&&u(N)},[u]),B=(0,m.$)(M,T,!!y),U=c(M,v),w=T?[]:[B.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(B.container,B.slider)},s.createElement(n.Global,{styles:B.slider}),s.createElement("div",{className:(0,t.cx)(B.sliderInput,...w)},s.createElement(r.A,{min:a,max:h,step:P,defaultValue:g,value:O,onChange:A,vertical:!T,reverse:!1,ariaLabelForHandle:f,marks:y,included:C}),s.createElement("span",{className:U.numberInputWrapper,ref:p},s.createElement(i.Q,{value:O,onChange:R,max:h,min:a,step:P}))))};function d(g,u){const p=document.createElement("canvas").getContext("2d");return p?(p.font=u,p.measureText(g).width):null}const c=(g,u)=>({numberInputWrapper:(0,t.css)({marginLeft:g.spacing(3),maxHeight:"32px",maxWidth:u,minWidth:u,overflow:"visible",width:"100%"})})},29286:(Q,I,e)=>{"use strict";e.d(I,{g:()=>s});var t=e(96540),n=e(21744),r=e(10354);const s=({value:o,onChange:m,item:i,suffix:l})=>{const d=i.settings?.useTextarea?n.f:r.p,c=(0,t.useCallback)(g=>{let u=o??"";"key"in g?g.key==="Enter"&&!i.settings?.useTextarea&&(u=g.currentTarget.value.trim()):u=g.currentTarget.value.trim(),u!==o&&m(u===""?void 0:u)},[o,i.settings?.useTextarea,m]);return t.createElement(d,{placeholder:i.settings?.placeholder,defaultValue:o||"",rows:i.settings?.useTextarea&&i.settings.rows||5,onBlur:c,onKeyDown:c,suffix:l})}},17205:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>K});var t=e(32196),n=e(96540),r=e(64388),s=e(40845),o=e(76888),m=e(32264),i=e(40276);function l(L){return m.$.featureToggles.betterPageScrolling?n.createElement(d,{...L},L.children):n.createElement(i.E,{...L})}function d({children:L,scrollRefCallback:V,scrollTop:F}){const z=(0,s.of)(c),Y=(0,n.useRef)(null);return(0,n.useEffect)(()=>{Y.current&&V&&V(Y.current)},[Y,V]),(0,n.useEffect)(()=>{Y.current&&F!=null&&Y.current?.scrollTo(0,F)},[F]),n.createElement("div",{ref:Y,className:(0,t.cx)(z.nativeScrollbars,"scrollbar-view")},L)}function c(){return{nativeScrollbars:(0,t.css)({label:"native-scroll-container",minHeight:"calc(100% + 0px)",maxHeight:"calc(100% + 0px)",display:"flex",flexDirection:"column",flexGrow:1,overflow:"auto"})}}var g=e(39419);const u=({isLoading:L,children:V,className:F})=>{let z=F?n.createElement("div",{className:F},V):V;return n.createElement(n.Fragment,null,L?n.createElement(g.A,null):z)};var E=e(13773),p=e(17172),b=e(94753),a=e(29158),h=e(88575),P=e(10354);const y=({value:L,onEdit:V})=>{const F=(0,s.of)(C),[z,Y]=(0,n.useState)(L),[H,k]=(0,n.useState)(!1),[ee,ie]=(0,n.useState)(!1),[fe,q]=(0,n.useState)();(0,n.useEffect)(()=>{Y(L)},[L]);const Z=(0,n.useCallback)(async J=>{const G=J.currentTarget.value;if(!G)q("Please enter a title");else if(G===L)q(void 0),k(!1);else{ie(!0);try{await V(G),q(void 0),k(!1)}catch(ne){(0,p.NF)(ne)?q(ne.data.message):ne instanceof Error&&q(ne.message)}ie(!1)}},[V,L]);return H?n.createElement("div",{className:F.inputContainer},n.createElement(h.D,{className:F.field,loading:ee,invalid:!!fe,error:fe},n.createElement(P.p,{className:F.input,defaultValue:z,onKeyDown:J=>{J.key==="Enter"&&Z(J)},autoFocus:!0,onBlur:Z,onChange:J=>Y(J.currentTarget.value),onFocus:()=>k(!0)}))):n.createElement("div",{className:F.textContainer},n.createElement("div",{className:F.textWrapper},n.createElement(b.E,{element:"h1",truncate:!0},z),n.createElement(a.K,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>k(!0)})))};y.displayName="EditableTitle";const C=L=>({textContainer:(0,t.css)({minWidth:0}),field:(0,t.css)({flex:1,left:`calc(-${L.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,t.css)({input:{...L.typography.h1}}),inputContainer:(0,t.css)({display:"flex",flex:1}),textWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:L.spacing(1)})});function f({navItem:L,renderTitle:V,actions:F,info:z,subTitle:Y,onEditTitle:H}){const k=(0,s.of)(D),ee=Y??L.subTitle,ie=H?n.createElement(y,{value:L.text,onEdit:H}):n.createElement("div",{className:k.title},L.img&&n.createElement("img",{className:k.img,src:L.img,alt:`logo for ${L.text}`}),V?V(L.text):n.createElement("h1",null,L.text));return n.createElement("div",{className:k.pageHeader},n.createElement("div",{className:k.topRow},n.createElement("div",{className:k.titleInfoContainer},ie,z&&n.createElement(E.Q,{info:z})),n.createElement("div",{className:k.actions},F)),ee&&n.createElement("div",{className:k.subTitle},ee))}const D=L=>({topRow:(0,t.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:L.spacing(1,3)}),title:(0,t.css)({display:"flex",flexDirection:"row",maxWidth:"100%",h1:{display:"flex",marginBottom:0}}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:L.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:L.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:L.spacing(1),marginBottom:L.spacing(2)}),subTitle:(0,t.css)({position:"relative",color:L.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:L.spacing(2)})});var T=e(63021),M=e(8984),O=e(40675);function S({navItem:L}){const V=(0,s.of)(v);return n.createElement("div",{className:V.tabsWrapper},n.createElement(T.U,null,L.children.map((F,z)=>{const Y=F.icon?(0,M.toIconName)(F.icon):void 0;return!F.hideFromTabs&&n.createElement(O.o,{label:F.text,active:F.active,key:`${F.url}-${z}`,icon:Y,counter:F.tabCounter,href:F.url,suffix:F.tabSuffix,onChangeTab:F.onClick})})))}const v=L=>({tabsWrapper:(0,t.css)({paddingBottom:L.spacing(3)})});var x=e(77109),A=e(28215),R=e(31678),B=e(19361),U=e(3984);function w(L,V){const F=(0,R.useSelector)(z=>z.navIndex)?.[A.Id];(0,n.useEffect)(()=>{const z=(L?.node!==L?.main?L?.node:L?.main)??{text:"Grafana"},Y=(0,U.Z)(z,V,F).map(H=>H.text).reverse();Y[Y.length-1]=B.M.AppTitle,document.title=Y.join(" - ")},[F,L,V])}const K=({navId:L,navModel:V,pageNav:F,renderTitle:z,onEditTitle:Y,actions:H,subTitle:k,children:ee,className:ie,info:fe,layout:q=r.k.Standard,scrollTop:Z,scrollRef:J,...G})=>{const ne=(0,s.of)(N),te=(0,x.i)(L,V),{chrome:oe}=(0,o.Il)();w(te,F);const le=F??te?.node;return(0,n.useLayoutEffect)(()=>{te&&oe.update({sectionNav:te,pageNav:F,layout:q})},[te,F,oe,q]),n.createElement("div",{className:(0,t.cx)(ne.wrapper,ie),...G},q===r.k.Standard&&n.createElement(l,{autoHeightMin:"100%",scrollTop:Z,scrollRefCallback:J},n.createElement("div",{className:ne.pageInner},le&&n.createElement(f,{actions:H,onEditTitle:Y,navItem:le,renderTitle:z,info:fe,subTitle:k}),F&&F.children&&n.createElement(S,{navItem:F}),n.createElement("div",{className:ne.pageContent},ee))),q===r.k.Canvas&&n.createElement(l,{autoHeightMin:"100%",scrollTop:Z,scrollRefCallback:J},n.createElement("div",{className:ne.canvasContent},ee)),q===r.k.Custom&&ee)};K.Contents=u;const N=L=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),primaryBg:(0,t.css)({background:L.colors.background.primary}),pageInner:(0,t.css)({label:"page-inner",padding:L.spacing(2),borderBottom:"none",background:L.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:L.spacing(0,0,0,0),[L.breakpoints.up("md")]:{padding:L.spacing(4)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:L.spacing(2),flexBasis:"100%",flexGrow:1})})},77109:(Q,I,e)=>{"use strict";e.d(I,{i:()=>o});var t=e(1081),n=e(17422),r=e(99140),s=e(31678);function o(i,l){if(l)return l;if(i&&r.M_)return(0,s.useSelector)((0,t.Mz)(m,d=>(0,n.tc)(d,i??"home")))}function m(i){return i.navIndex}},13773:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s({info:m}){const i=(0,r.of)(o);return n.createElement("div",{className:i.container},m.map((l,d)=>n.createElement(n.Fragment,{key:d},n.createElement("div",{className:i.infoItem},n.createElement("div",{className:i.label},l.label),l.value),d+1<m.length&&n.createElement("div",{"data-testid":"page-info-separator",className:i.separator}))))}const o=m=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:m.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...m.typography.bodySmall,display:"flex",flexDirection:"column",gap:m.spacing(.5)}),label:(0,t.css)({color:m.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${m.colors.border.weak}`})})},39419:(Q,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(96540),n=e(39558);const s=({pageName:o=""})=>{const m=`Loading ${o}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n._,{text:m}))}},7392:(Q,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(69529),o=e(72109);function m({entity:l="Page"}){const d=(0,r.of)(i);return n.createElement("div",{className:d.container},n.createElement(s.p,{message:`${l} not found`,variant:"not-found"},"We're looking but can't seem to find this ",l.toLowerCase(),". Try returning"," ",n.createElement(o.Y,{href:"/"},"home")," or seeking help on the"," ",n.createElement(o.Y,{href:"https://community.grafana.com",external:!0},"community site.")))}function i(l){return{container:(0,t.css)({padding:l.spacing(8,2,2,2)})}}},68313:(Q,I,e)=>{"use strict";e.d(I,{$:()=>d});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(55852),m=e(88323),i=e(14578),l=e(17706);const d=({onChange:g,maxMenuHeight:u,isWidget:E=!1})=>{const p=()=>r.$.featureToggles.vizAndWidgetSplit?E?(0,l.nr)():(0,l.if)():(0,l.A4)(),b=(0,n.useMemo)(p,[E]),a=(0,n.useMemo)(()=>b.map(D=>({label:D.name,imgUrl:D.info.logos.small,value:D})).sort((D,T)=>D.label?.localeCompare(T.label)),[b]),[h,P]=(0,n.useState)([]),y=(0,n.useCallback)(D=>{const T=D.filter(M=>M.value).map(M=>M.value);g(T),P(D)},[g]),C=(0,s.of)(c),f={defaultOptions:!0,getOptionLabel:D=>D.label,getOptionValue:D=>D.value,noOptionsMessage:"No Panel types found",placeholder:"Filter by type",maxMenuHeight:u,options:a,value:h,onChange:y};return n.createElement("div",{className:C.container},h.length>0&&n.createElement(o.$n,{size:"xs",icon:"trash-alt",fill:"text",className:C.clear,onClick:()=>y([]),"aria-label":"Clear types"},"Clear types"),n.createElement(m.KF,{...f,prefix:n.createElement(i.I,{name:"filter"}),"aria-label":"Panel Type filter"}))};function c(g){return{container:(0,t.css)`
      label: container;
      position: relative;
      min-width: 180px;
      flex-grow: 1;
    `,clear:(0,t.css)`
      label: clear;
      font-size: ${g.spacing(1.5)};
      position: absolute;
      top: -${g.spacing(4.5)};
      right: 0;
    `}}},78361:(Q,I,e)=>{"use strict";e.d(I,{s:()=>o});var t=e(96540),n=e(13544),r=e(10354),s=e(29158);const o=t.forwardRef((m,i)=>{const[l,d]=(0,t.useState)(!1);return t.createElement(r.p,{...m,type:l?"text":"password","data-testid":n.Tp.pages.Login.password,ref:i,suffix:t.createElement(s.K,{name:l?"eye-slash":"eye","aria-controls":m.id,role:"switch","aria-checked":l,onClick:()=>{d(!l)},tooltip:l?"Hide password":"Show password"})})});o.displayName="PasswordField"},22214:(Q,I,e)=>{"use strict";e.d(I,{j:()=>o});var t=e(32196),n=e(96540),r=e(36663),s=e(40845);const o=n.memo(n.forwardRef(({className:l,children:d,markdown:c,styleOverrides:g,onRemove:u,...E},p)=>{const b=(0,s.of)(a=>i(a,g?.borderTop));return n.createElement("div",{className:(0,t.cx)(b.wrapper,l),...E,ref:p},c&&m(c),d)}));function m(l){const d=(0,r.G)(l);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:d}})}o.displayName="OperationRowHelp";const i=(l,d)=>{const c=l.shape.radius.default,g=l.colors.background.secondary;return{wrapper:(0,t.css)`
      padding: ${l.spacing(2)};
      border: 2px solid ${g};
      border-top: ${d?d+g:"none"};
      border-radius: 0 0 ${c} ${c};
      position: relative;
      top: -4px;
    `}}},10343:(Q,I,e)=>{"use strict";e.d(I,{A:()=>l,q:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(29158);function m(c){const g=(0,s.of)(d);return n.createElement("div",{className:(0,t.cx)(g.icon,"active"in c&&c.active&&g.active)},n.createElement(o.K,{name:c.icon,tooltip:c.title,className:g.icon,disabled:!!c.disabled,onClick:c.onClick,type:"button","data-testid":c.dataTestId??r.Tp.components.QueryEditorRow.actionButton(c.title),..."active"in c&&{"aria-pressed":c.active}}))}function i(c){return n.createElement(m,{...c})}const l=c=>n.createElement(m,{...c}),d=c=>({icon:(0,t.css)({display:"flex",position:"relative",color:c.colors.text.secondary}),active:(0,t.css)({"&:before":{display:"block",content:'" "',position:"absolute",left:-1,right:2,height:3,borderRadius:c.shape.radius.default,bottom:-8,backgroundImage:c.colors.gradients.brandHorizontal}})})},7788:(Q,I,e)=>{"use strict";e.d(I,{u:()=>p});var t=e(32196),n=e(96540),r=e(55244),s=e(22589),o=e(14110),m=e(40845),i=e(67892),l=e(29158),d=e(67061),c=e(14578),g=e(44836);const u=({actionsElement:a,disabled:h,draggable:P,collapsable:y=!0,dragHandleProps:C,headerElement:f,isContentVisible:D,onRowToggle:T,reportDragMousePosition:M,title:O,id:S,expanderMessages:v})=>{const x=(0,m.of)(E);let A=D?(0,g.t)("query-operation.header.collapse-row","Collapse query row"):(0,g.t)("query-operation.header.expand-row","Expand query row");v!==void 0&&D?A=v.close:v!==void 0&&(A=v?.open);const R=(0,g.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return n.createElement("div",{className:x.header},n.createElement("div",{className:x.column},y&&n.createElement(l.K,{name:D?"angle-down":"angle-right",tooltip:A,className:x.collapseIcon,onClick:T,"aria-expanded":D,"aria-controls":S}),O&&n.createElement("div",{className:x.titleWrapper,onClick:T,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(x.title,h&&x.disabled)},O)),f),n.createElement(d.B,{gap:1,alignItems:"center"},a,P&&n.createElement("div",{onMouseMove:M,...C},n.createElement(c.I,{title:R,name:"draggabledots",size:"lg",className:x.dragIcon}))))},E=a=>({header:(0,t.css)`
    label: Header;
    padding: ${a.spacing(.5,.5)};
    border-radius: ${a.shape.radius.default};
    background: ${a.colors.background.secondary};
    min-height: ${a.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,t.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,t.css)`
    cursor: grab;
    color: ${a.colors.text.disabled};
    margin: ${a.spacing(0,.5)};
    &:hover {
      color: ${a.colors.text};
    }
  `,collapseIcon:(0,t.css)`
    margin-left: ${a.spacing(.5)};
    color: ${a.colors.text.disabled};
    }
  `,titleWrapper:(0,t.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${a.spacing(.5)};
  `,title:(0,t.css)`
    font-weight: ${a.typography.fontWeightBold};
    color: ${a.colors.text.link};
    margin-left: ${a.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,t.css)`
    color: ${a.colors.text.disabled};
  `});u.displayName="QueryOperationRowHeader";function p({children:a,actions:h,title:P,headerElement:y,onClose:C,onOpen:f,isOpen:D,disabled:T,draggable:M,collapsable:O,index:S,id:v,expanderMessages:x}){const[A,R]=(0,n.useState)(D!==void 0?D:!0),B=(0,m.of)(b),U=(0,n.useCallback)(()=>{R(!A)},[A,R]);(0,n.useEffect)(()=>{typeof D=="boolean"&&R(D)},[D]);const w=(0,n.useCallback)(V=>{if(V.defaultPrevented){const F=V.currentTarget.getBoundingClientRect(),z=V.clientX-F.left,Y=V.clientY-F.top;(0,o.rR)("query_row_reorder_drag_position",{x:z/F.width,y:Y/F.height,width:F.width,height:F.height})}},[]);(0,s.A)(()=>{A?f&&f():C&&C()},[A]);const K={isOpen:A,onOpen:()=>{R(!0)},onClose:()=>{R(!1)}},N=h&&i.renderOrCallToRender(h,K),L=y&&i.renderOrCallToRender(y,K);return M?n.createElement(r.sx,{draggableId:v,index:S},V=>n.createElement(n.Fragment,null,n.createElement("div",{ref:V.innerRef,className:B.wrapper,...V.draggableProps},n.createElement("div",null,n.createElement(u,{id:v,actionsElement:N,disabled:T,draggable:!0,collapsable:O,dragHandleProps:V.dragHandleProps,headerElement:L,isContentVisible:A,onRowToggle:U,reportDragMousePosition:w,title:P,expanderMessages:x})),A&&n.createElement("div",{className:B.content},a)))):n.createElement("div",{className:B.wrapper},n.createElement(u,{id:v,actionsElement:N,disabled:T,draggable:!1,collapsable:O,headerElement:L,isContentVisible:A,onRowToggle:U,reportDragMousePosition:w,title:P,expanderMessages:x}),A&&n.createElement("div",{className:B.content},a))}const b=a=>({wrapper:(0,t.css)`
      margin-bottom: ${a.spacing(2)};
    `,content:(0,t.css)`
      margin-top: ${a.spacing(.5)};
      margin-left: ${a.spacing(3)};
    `});p.displayName="QueryOperationRow"},37425:(Q,I,e)=>{"use strict";e.d(I,{n:()=>Te});var t=e(96540),n=e(40845),r=e(8866),s=e(17464),o=e(32196),m=e(62930),i=e(14578),l=e(56034),d=e(10354),c=e(87266),g=e(16797),u=e(88824);const E=(0,t.forwardRef)(({children:he,iconName:re},De)=>{const Fe=(0,n.of)(p);return t.createElement("div",{className:Fe.container,ref:De},re&&t.createElement(i.I,{name:re,size:"xs"}),he)});E.displayName="ValueContainer";const p=he=>{const{prefix:re}=(0,d.n)({theme:he}),{multiValueContainer:De}=(0,u.J)(he);return{container:(0,o.cx)(re,De,(0,o.css)`
        position: relative;
        padding: ${he.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${he.spacing(.5)};
        }
      `)}},b=360,a=300,h=320,P=360,y=320,C=360,f=P+C,D=he=>he.stopPropagation(),T=({appliedRoles:he,basicRole:re,disabled:De,isFocused:Fe,query:Ee,showBasicRole:Me,width:ze,isLoading:xe,onOpen:We,onClose:be,onQueryChange:pe,...Ue})=>{const we=(0,n.of)(O,!1,!!Fe,!!De,!1,ze),je=(0,t.useRef)(null);(0,t.useEffect)(()=>{Fe&&je.current?.focus()});const He=Je=>{const Ve=Je.target?.value;pe(Ve)},rt=Me&&re!=="None";return Fe?t.createElement("div",{className:we.wrapper},rt&&t.createElement(E,null,re),he.map(Je=>t.createElement(E,{key:Je.uid},Je.group+":"+(Je.displayName||Je.name))),!De&&t.createElement("input",{...Ue,className:we.input,ref:je,onMouseDown:D,onChange:He,"data-testid":"role-picker-input",placeholder:Fe?"Select role":"",value:Ee}),t.createElement("div",{className:we.suffix},t.createElement(i.I,{name:"angle-up",className:we.dropdownIndicator,onMouseDown:be}))):t.createElement("div",{className:(0,o.cx)(we.wrapper,we.selectedRoles),onMouseDown:We},rt&&t.createElement(E,null,re),t.createElement(M,{appliedRoles:he,numberOfRoles:he.length,showBuiltInRole:rt}),xe&&t.createElement("div",{className:we.spinner},t.createElement(m.y,{size:16,inline:!0})))};T.displayName="RolePickerInput";const M=({showBuiltInRole:he,numberOfRoles:re,appliedRoles:De})=>{const Fe=(0,n.of)(Ee=>S(Ee));return t.createElement(t.Fragment,null,re?t.createElement(l.m,{content:t.createElement("div",{className:Fe.tooltip},De?.map(Ee=>t.createElement("p",{key:Ee.uid},Ee.group+":"+(Ee.displayName||Ee.name))))},t.createElement(E,null,`${he?"+":""}${re} role${re>1?"s":""}`)):!he&&t.createElement(E,null,"No roles assigned"))},O=(he,re,De,Fe,Ee,Me)=>{const ze=(0,d.n)({theme:he,invalid:re});return{wrapper:(0,o.cx)(ze.wrapper,(0,c.Xb)(he,re),De&&(0,o.css)`
          ${g.focusCss(he.v1)}
        `,Fe&&ze.inputDisabled,(0,o.css)({minWidth:Me||b+"px",width:Me,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:he.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),Ee&&(0,o.css)`
          padding-left: 0;
        `),input:(0,o.cx)((0,c.Xb)(he,re),(0,o.css)`
        max-width: 120px;
        border: none;
        cursor: ${De?"default":"pointer"};
      `),suffix:ze.suffix,dropdownIndicator:(0,o.css)`
      cursor: pointer;
    `,selectedRoles:(0,o.css)`
      display: flex;
      align-items: center;
      cursor: ${Fe?"not-allowed":"pointer"};
    `,tooltip:(0,o.css)`
      p {
        margin-bottom: ${he.spacing(.5)};
      }
    `,spinner:(0,o.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},S=he=>({tooltip:(0,o.css)`
    p {
      margin-bottom: ${he.spacing(.5)};
    }
  `});var v=e(72109),x=e(40276),A=e(66864),R=e(55852),B=e(5173),U=e(31678);const w=he=>({hideScrollBar:(0,o.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,o.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:he.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,o.css)({minWidth:`${h}px`,maxWidth:`${P}px`,"& > div":{paddingTop:he.spacing(1)}}),menuLeft:(0,o.css)({flexDirection:"row-reverse"}),subMenu:(0,o.css)({height:"100%",minWidth:`${y}px`,maxWidth:`${C}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${he.components.input.borderColor}`,"& > div":{paddingTop:he.spacing(1)}}),subMenuLeft:(0,o.css)({borderRight:`1px solid ${he.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,o.css)({padding:he.spacing(0,4.5),display:"flex",alignItems:"center",color:he.colors.text.primary,fontWeight:he.typography.fontWeightBold}),container:(0,o.css)({padding:he.spacing(1),border:`1px ${he.colors.border.weak} solid`,borderRadius:he.shape.radius.default,backgroundColor:he.colors.background.primary,zIndex:he.zIndex.modal}),menuSection:(0,o.css)({marginBottom:he.spacing(2)}),menuOptionCheckbox:(0,o.css)({display:"flex",margin:he.spacing(0,1,0,.25)}),menuButtonRow:(0,o.css)({backgroundColor:he.colors.background.primary,padding:he.spacing(1)}),menuOptionBody:(0,o.css)({fontWeight:he.typography.fontWeightRegular,padding:he.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,o.css)({color:he.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,o.css)({position:"absolute",right:he.spacing(2.5),color:he.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,o.css)({color:he.colors.text.disabled}),basicRoleSelector:(0,o.css)({margin:he.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,o.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,o.css)({backgroundColor:he.colors.background.primary,padding:he.spacing(1)}),checkboxPartiallyChecked:(0,o.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,o.css)({marginLeft:he.spacing(1)})}),K=Object.values(U.OrgRole).map(he=>({label:he===U.OrgRole.None?"No basic role":he,value:he})),N=({value:he,onChange:re,disabled:De,disabledMesssage:Fe,tooltipMessage:Ee})=>{const Me=(0,n.of)(w),ze=(0,n.$j)();return t.createElement(t.Fragment,null,t.createElement("div",{className:Me.groupHeader},t.createElement("span",{style:{marginRight:ze.spacing(1)}},"Basic roles"),De&&Fe&&t.createElement(l.m,{placement:"right-end",interactive:!0,content:t.createElement("div",null,Fe)},t.createElement(i.I,{name:"question-circle"})),!De&&Ee&&t.createElement(l.m,{placement:"right-end",interactive:!0,content:Ee},t.createElement(i.I,{name:"info-circle",size:"xs"}))),t.createElement(B.a,{name:"Basic Role Selector",className:Me.basicRoleSelector,options:K,value:he,onChange:re,disabled:De}))};var L=e(10880);const V=(0,t.memo)(t.forwardRef(({name:he,value:re,isFocused:De,isSelected:Fe,partiallySelected:Ee,disabled:Me,onChange:ze,onClick:xe,onOpenSubMenu:We,onCloseSubMenu:be,children:pe,root:Ue},we)=>{const je=(0,n.$j)(),He=(0,u.J)(je),rt=(0,n.of)(w),Je=(0,o.cx)(He.option,De&&He.optionFocused,Me&&rt.menuOptionDisabled),Ve=se=>{Me||re&&ze(re)},Oe=se=>{xe&&xe(re)},Ne=()=>{We&&We(re)},ye=()=>{be&&be()};return t.createElement("div",{onMouseEnter:Ne,onMouseLeave:ye},t.createElement("div",{ref:we,className:Je,"aria-label":"Role picker option",onClick:Oe},t.createElement(L.S,{value:Fe,className:(0,o.cx)(rt.menuOptionCheckbox,{[rt.checkboxPartiallyChecked]:Ee}),onChange:Ve,disabled:Me}),t.createElement("div",{className:(0,o.cx)(He.optionBody,rt.menuOptionBody)},t.createElement("span",null,he),t.createElement("span",{className:rt.menuOptionExpand})),Ue&&pe&&t.createElement(s.ZL,{className:rt.subMenuPortal,root:Ue},pe)))}));V.displayName="RoleMenuGroupOption";const F=t.forwardRef(({data:he,isFocused:re,isSelected:De,disabled:Fe,onChange:Ee,hideDescription:Me},ze)=>{const xe=(0,n.$j)(),We=(0,u.J)(xe),be=(0,n.of)(w),pe=(0,o.cx)(We.option,re&&We.optionFocused,Fe&&be.menuOptionDisabled),Ue=we=>{Fe||(we.preventDefault(),we.stopPropagation(),Ee(he))};return t.createElement("div",{ref:ze,className:pe,"aria-label":"Role picker option",onClick:Ue},t.createElement(L.S,{value:De,className:be.menuOptionCheckbox,onChange:Ue,disabled:Fe}),t.createElement("div",{className:(0,o.cx)(We.optionBody,be.menuOptionBody)},t.createElement("span",null,he.displayName||he.name),!Me&&he.description&&t.createElement("div",{className:We.optionDescription},he.description)),he.description&&t.createElement(l.m,{content:he.description},t.createElement(i.I,{name:"info-circle",className:be.menuOptionInfoSign})))});F.displayName="RoleMenuOption";var z=e(3246);const Y=({options:he,selectedOptions:re,disabledOptions:De,onSelect:Fe,onClear:Ee,showOnLeft:Me})=>{const ze=(0,n.$j)(),xe=(0,u.J)(ze),We=(0,n.of)(w),be=async()=>{Ee&&Ee()};return t.createElement("div",{className:(0,o.cx)(We.subMenu,{[We.subMenuLeft]:Me}),"aria-label":"Role picker submenu"},t.createElement(x.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0},t.createElement("div",{className:xe.optionBody},he.map((pe,Ue)=>t.createElement(F,{data:pe,key:Ue,isSelected:!!(pe.uid&&(re.find(we=>we.uid===pe.uid)||De?.find(we=>we.uid===pe.uid))),disabled:!!(pe.uid&&De?.find(we=>we.uid===pe.uid))||(0,z.W)(pe),onChange:Fe,hideDescription:!0})))),t.createElement("div",{className:We.subMenuButtonRow},t.createElement(A.Gy,{justify:"flex-end"},t.createElement(R.$n,{size:"sm",fill:"text",onClick:be},"Clear"))))},H=t.forwardRef(({roles:he,renderedName:re,showGroups:De,optionGroups:Fe,onGroupChange:Ee,groupSelected:Me,groupPartiallySelected:ze,subMenuNode:xe,selectedOptions:We,onRoleChange:be,onClearSubMenu:pe,showOnLeftSubMenu:Ue},we)=>{const[je,He]=(0,t.useState)(!1),[rt,Je]=(0,t.useState)(""),Ve=(0,n.$j)(),Oe=(0,u.J)(Ve),Ne=(0,n.of)(w),ye=(0,t.useCallback)(ae=>{Je(ae),He(!0)},[]),se=(0,t.useCallback)(()=>{He(!1),Je("")},[]);return t.createElement("div",null,he.length>0&&t.createElement("div",{className:Ne.menuSection},t.createElement("div",{className:Ne.groupHeader},re),t.createElement("div",{className:Oe.optionBody}),De&&Fe?.length?Fe.map(ae=>t.createElement(V,{key:ae.value,name:ae.name,value:ae.value,isSelected:Me(ae.value)||ze(ae.value),partiallySelected:ze(ae.value),disabled:ae.options?.every(z.W),onChange:Ee,onOpenSubMenu:ye,onCloseSubMenu:se,root:xe,isFocused:je&&rt===ae.value},je&&rt===ae.value&&t.createElement(Y,{options:ae.options,selectedOptions:We,onSelect:be,onClear:()=>pe(rt),showOnLeft:Ue}))):he.map(ae=>t.createElement(F,{data:ae,key:ae.uid,isSelected:!!(ae.uid&&We.find(ge=>ge.uid===ae.uid)),disabled:(0,z.W)(ae),onChange:be,hideDescription:!0}))))});H.displayName="RoleMenuGroupsSection";var k=(he=>(he.fixed="fixed",he.custom="custom",he.plugin="plugin",he))(k||{});const ee={ldap:"LDAP",current:"Current org"},ie=t.createElement(t.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',t.createElement(v.Y,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),fe=({basicRole:he,options:re,appliedRoles:De,showGroups:Fe,basicRoleDisabled:Ee,disabledMessage:Me,showBasicRole:ze,onSelect:xe,onBasicRoleSelect:We,onUpdate:be,updateDisabled:pe,offset:Ue,menuLeft:we,apply:je})=>{const[He,rt]=(0,t.useState)(De),[Je,Ve]=(0,t.useState)(he),[Oe,Ne]=(0,t.useState)({}),ye=(0,t.useRef)(null),se=(0,n.$j)(),ae=(0,u.J)(se),ge=(0,n.of)(w);(0,t.useEffect)(()=>{xe(He)},[He,xe]),(0,t.useEffect)(()=>{We&&Je&&We(Je)},[Je,We]),(0,t.useEffect)(()=>{const ot=re.filter(q).sort(le),ft=re.filter(Z).sort(le),yt=re.filter(J).sort(le),Tt={fixed:G(ft).sort((Kt,Gt)=>Kt.name.localeCompare(Gt.name)),custom:G(ot).sort((Kt,Gt)=>Kt.name.localeCompare(Gt.name)),plugin:G(yt).sort((Kt,Gt)=>Kt.name.localeCompare(Gt.name))};Ne({fixed:{groupType:"fixed",optionGroup:Tt.fixed,renderedName:"Fixed roles",roles:ft},custom:{groupType:"custom",optionGroup:Tt.custom,renderedName:"Custom roles",roles:ot},plugin:{groupType:"plugin",optionGroup:Tt.plugin,renderedName:"Plugin roles",roles:yt}})},[re]);const Pe=ot=>{const ft=[];for(const yt of He)ne(yt)===ot&&ft.push(yt);return ft},Re=(ot,ft)=>{const yt=Pe(ft),Tt=Oe[ot]?.optionGroup.find(Kt=>Kt.value===ft);return yt.length>0&&yt.length>=Tt.options.length},Be=(ot,ft)=>{const yt=Pe(ft),Tt=Oe[ot]?.optionGroup.find(Kt=>Kt.value===ft);return yt.length>0&&yt.length<Tt.options.length},_e=ot=>{He.find(ft=>ft.uid===ot.uid)?rt(He.filter(ft=>ft.uid!==ot.uid)):rt([...He,ot])},Xe=(ot,ft)=>{const yt=Oe[ot]?.optionGroup.find(Tt=>Tt.value===ft);if(yt)if(Re(ot,ft)||Be(ot,ft))rt(He.filter(Tt=>!yt.options.find(Kt=>Tt.uid===Kt.uid)));else{const Tt=yt.options.filter(Gt=>Gt.delegatable),Kt=He.filter(Gt=>!yt.options.find(_t=>Gt.uid===_t.uid));rt([...Kt,...Tt])}},tt=ot=>{Ve(ot)},at=async()=>{rt([])},st=ot=>{const ft=He.filter(yt=>ne(yt)!==ot);rt(ft)},dt=()=>{be(He,Je)};return t.createElement("div",{className:(0,o.cx)(ae.menu,ge.menuWrapper,{[ge.menuLeft]:we},(0,o.css)({top:`${Ue.vertical}px`,left:we?"unset":`${Ue.horizontal}px`,right:we?`${Ue.horizontal}px`:"unset"}))},t.createElement("div",{className:ge.menu,"aria-label":"Role picker menu"},t.createElement(x.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,o.cx)(ge.hideScrollBar)},ze&&t.createElement("div",{className:ge.menuSection},t.createElement(N,{value:Je,onChange:tt,disabled:Ee,disabledMesssage:Me,tooltipMessage:ie})),Object.entries(Oe).map(([ot,ft])=>t.createElement(H,{key:ot,roles:ft.roles,renderedName:ft.renderedName,showGroups:Fe,optionGroups:ft.optionGroup,groupSelected:yt=>Re(ft.groupType,yt),groupPartiallySelected:yt=>Be(ft.groupType,yt),onGroupChange:yt=>Xe(ft.groupType,yt),subMenuNode:ye?.current,selectedOptions:He,onRoleChange:_e,onClearSubMenu:st,showOnLeftSubMenu:we}))),t.createElement("div",{className:ge.menuButtonRow},t.createElement(A.Gy,{justify:"flex-end"},t.createElement(R.$n,{size:"sm",fill:"text",onClick:at,disabled:pe},"Clear all"),t.createElement(R.$n,{size:"sm",onClick:dt,disabled:pe},je?"Apply":"Update")))),t.createElement("div",{ref:ye}))},q=he=>!he.name?.startsWith("fixed:")&&!he.name.startsWith("plugins:"),Z=he=>he.name?.startsWith("fixed:"),J=he=>he.name?.startsWith("plugins:"),G=he=>{const re={};return he.forEach(Fe=>{const Ee=ne(Fe),Me=te(Fe);re[Ee]||(re[Ee]={name:Me,roles:[]}),re[Ee].roles.push(Fe)}),Object.entries(re).map(([Fe,Ee])=>({name:ee[Fe]||ue(Ee.name),value:Fe,options:Ee.roles.sort(le)}))},ne=he=>{const re=oe(he),De=te(he);return`${re}:${De}`},te=he=>he.group||"Other",oe=he=>{const re=he.name.indexOf(":");return re<0?"unknown":he.name.substring(0,re)},le=(he,re)=>he.name.localeCompare(re.name),ue=he=>he.slice(0,1).toUpperCase()+he.slice(1),Te=({basicRole:he,appliedRoles:re,roleOptions:De,disabled:Fe,isLoading:Ee,basicRoleDisabled:Me,basicRoleDisabledMessage:ze,showBasicRole:xe,onRolesChange:We,onBasicRoleChange:be,canUpdateRoles:pe=!0,apply:Ue=!1,maxWidth:we=b,width:je})=>{const[He,rt]=(0,t.useState)(!1),[Je,Ve]=(0,t.useState)(re),[Oe,Ne]=(0,t.useState)(he),[ye,se]=(0,t.useState)(""),[ae,ge]=(0,t.useState)({vertical:0,horizontal:0}),[Pe,Re]=(0,t.useState)(!1),Be=(0,t.useRef)(null),_e=(0,n.$j)(),Xe=typeof je=="number"?_e.spacing(je):je;(0,t.useEffect)(()=>{Ne(he),Ve(re)},[re,he,be]);const tt=(0,t.useCallback)(()=>{const{horizontal:_t,vertical:it,menuToLeft:Mt}=at();_t&&it&&(ge({horizontal:_t,vertical:it}),Re(Mt))},[]);(0,t.useEffect)(()=>{He&&tt()},[He,Je,tt]);const at=()=>{const _t=Be?.current?.getBoundingClientRect();if(!_t)return{};const{bottom:it,top:Mt,left:Dn,right:lt}=_t;let Ct=Dn,Vt=!1;const qt=window.innerHeight-it;let rn=it+5,en=!1;return qt<a+20&&(rn=Mt-a-50),Mt<a+50&&(rn=Mt,Ct=lt+5,en=!0),Ct+f>window.innerWidth&&(Ct=window.innerWidth-(en?Dn:lt),Vt=!0),{horizontal:Ct,vertical:rn,menuToLeft:Vt}},st=(0,t.useCallback)(_t=>{Fe||(_t.preventDefault(),_t.stopPropagation(),tt(),rt(!0))},[Fe,tt]),dt=(0,t.useCallback)(()=>{rt(!1),se(""),Ve(re),Ne(he)},[re,he]),ot=()=>He&&dt(),ft=_t=>{se(_t||"")},yt=_t=>{Ve(_t)},Tt=_t=>{Ne(_t)},Kt=(_t,it)=>{be&&it&&it!==he&&be(it),pe&&We(_t),se(""),rt(!1)},Gt=()=>{const _t=De.map(it=>({...it,delegatable:pe&&it.delegatable}));return ye&&ye.trim()!==""?_t.filter(it=>it.name?.toLowerCase().includes(ye.toLowerCase())):_t};return t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Xe||we,width:Xe},ref:Be},t.createElement(r.N,{onClick:ot,useCapture:!1},t.createElement(T,{basicRole:Oe,appliedRoles:Je,query:ye,onQueryChange:ft,onOpen:st,onClose:dt,isFocused:He,disabled:Fe,showBasicRole:xe,width:Xe,isLoading:Ee}),He&&t.createElement(s.ZL,null,t.createElement("div",{onClick:_t=>_t.stopPropagation()},t.createElement(fe,{options:Gt(),basicRole:Oe,appliedRoles:re,onBasicRoleSelect:Tt,onSelect:yt,onUpdate:Kt,showGroups:ye.length===0||ye.trim()==="",basicRoleDisabled:Me,disabledMessage:ze,showBasicRole:xe,updateDisabled:Me&&!pe,apply:Ue,offset:ae,menuLeft:Pe})))))}},89062:(Q,I,e)=>{"use strict";e.d(I,{y:()=>i});var t=e(96540),n=e(41053),r=e(10096),s=e(31678),o=e(37425),m=e(85927);const i=({basicRole:l,roles:d,userId:c,orgId:g,onBasicRoleChange:u,roleOptions:E,disabled:p,basicRoleDisabled:b,basicRoleDisabledMessage:a,apply:h=!1,onApplyRoles:P,pendingRoles:y,maxWidth:C,width:f,isLoading:D})=>{const[{loading:T,value:M=d||[]},O]=(0,n.A)(async()=>{try{if(d)return d;if(h&&y?.length)return y;if(r.TP.hasPermission(s.AccessControlAction.ActionUserRolesList)&&c>0)return await(0,m.Xh)(c,g)}catch{console.error("Error loading options")}return[]},[g,c,y,d]);(0,t.useEffect)(()=>{g&&O()},[O,g]);const S=async x=>{h?P&&P(x,c,g):(await(0,m.eA)(x,c,g),await O())},v=r.TP.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&r.TP.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(o.n,{appliedRoles:M,basicRole:l,onRolesChange:S,onBasicRoleChange:u,roleOptions:E,isLoading:T||D,disabled:p,basicRoleDisabled:b,basicRoleDisabledMessage:a,showBasicRole:!0,apply:h,canUpdateRoles:v,maxWidth:C,width:f})}},85927:(Q,I,e)=>{"use strict";e.d(I,{G3:()=>i,RL:()=>r,Xh:()=>s,eA:()=>o,xN:()=>m});var t=e(17172),n=e(3246);const r=async l=>{let d="/api/access-control/roles?delegatable=true";l&&(d+=`&targetOrgId=${l}`);const c=await(0,t.AI)().get(d);return!c||!c.length?[]:c.map(n.c)},s=async(l,d)=>{let c=`/api/access-control/users/${l}/roles`;d&&(c+=`?targetOrgId=${d}`);try{const g=await(0,t.AI)().get(c);return!g||!g.length?[]:g.map(n.c)}catch(g){return(0,t.NF)(g)&&(g.isHandled=!0),[]}},o=(l,d,c)=>{let g=`/api/access-control/users/${d}/roles`;c&&(g+=`?targetOrgId=${c}`);const u=l.flatMap(E=>E.uid);return(0,t.AI)().put(g,{orgId:c,roleUids:u})},m=async(l,d)=>{let c=`/api/access-control/teams/${l}/roles`;d&&(c+=`?targetOrgId=${d}`);try{const g=await(0,t.AI)().get(c);return!g||!g.length?[]:g.map(n.c)}catch(g){return(0,t.NF)(g)&&(g.isHandled=!0),[]}},i=(l,d,c)=>{let g=`/api/access-control/teams/${d}/roles`;c&&(g+=`?targetOrgId=${c}`);const u=l.flatMap(E=>E.uid);return(0,t.AI)().put(g,{orgId:c,roleUids:u})}},3246:(Q,I,e)=>{"use strict";e.d(I,{W:()=>t,c:()=>n});const t=r=>r.delegatable!==void 0&&!r.delegatable,n=r=>{const s="fixed:";if(!r.displayName&&r.name.startsWith(s)){let o="";o=r.name.replace(s,"").replace(/:/g," "),r.displayName=o}return r}},47694:(Q,I,e)=>{"use strict";e.d(I,{y:()=>c});var t=e(96540),n=e(8867),r=e(40672),s=e(62938);const o=2,m=5,i=p=>{const b=p.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return b?b[0]:null},l=p=>p.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[o],d=p=>{let b=l(p);if(!b){b=`x${(0,s.A)()}`;const h=p.indexOf("<svg")+m;p=p.substring(0,h)+`id="${b}" `+p.substring(h)}let a=i(p);if(a){let h=a.replace(/(#(.*?))?\./g,`#${b} .`);p=p.replace(a,h)}return p},c=p=>{const{cleanStyle:b,...a}=p;return t.createElement(n.default,{...a,cacheRequests:!0,preProcessor:b?E:u})};let g=new Map;function u(p){let b=g.get(p);return b||(b=r.sQ.sanitizeSVGContent(p),g.set(p,b)),b}function E(p){let b=g.get(p);return b||(b=r.sQ.sanitizeSVGContent(p),b.indexOf('<style type="text/css">')>-1&&(b=d(b)),g.set(p,b)),b}},59429:(Q,I,e)=>{"use strict";e.d(I,{b:()=>d});var t=e(76459),n=e.n(t),r=e(96540),s=e(88323),o=e(27677);const m=(c="General",g)=>`${c}/${g}`;async function i(c=""){return o.IB.search({type:"dash-db",query:c,limit:100}).then(g=>g.map(u=>({value:{uid:u.uid,title:u.title,folderTitle:u.folderTitle,folderUid:u.folderUid},label:m(u?.folderTitle,u.title)})))}const l=n()(i,250,{leading:!0}),d=({value:c,onChange:g,placeholder:u="Select dashboard",noOptionsMessage:E="No dashboards found",...p})=>{const[b,a]=(0,r.useState)();(0,r.useEffect)(()=>{!c||c===b?.value?.uid||(async()=>{const P=await o.IB.getDashboardByUid(c);P.dashboard&&a({value:{uid:P.dashboard.uid,title:P.dashboard.title,folderTitle:P.meta.folderTitle,folderUid:P.meta.folderUid},label:m(P.meta?.folderTitle,P.dashboard.title)})})()},[c]);const h=(0,r.useCallback)(P=>{a(P),g?.(P?.value)},[g,a]);return r.createElement(s.DW,{loadOptions:l,onChange:h,placeholder:u,noOptionsMessage:E,value:b,defaultOptions:!0,...p})}},36607:(Q,I,e)=>{"use strict";e.d(I,{d:()=>te});var t=e(96540),n=e(32264),r=e(32196),s=e(18491),o=e(36376),m=e(76459),i=e.n(m),l=e(40845),d=e(10354),c=e(14578),g=e(42418),u=e(57514),E=e(44836),p=e(55314),b=e(24439),a=e(40957),h=e(31678),P=e(70255),y=e(97222),C=e(10022),f=e(29158),D=e(94753),T=e(18759),M=e(37690);const O=40,S="md",v=(le,ue)=>`${le}-${ue||"root"}`;function x({items:le,focusedItemIndex:ue,foldersAreOpenable:Te,idPrefix:he,selectedFolder:re,onFolderExpand:De,onFolderSelect:Fe,isItemLoaded:Ee,requestLoadMore:Me}){const ze=(0,t.useRef)(null),xe=(0,l.of)(B),We=(0,t.useMemo)(()=>({items:le,focusedItemIndex:ue,foldersAreOpenable:Te,selectedFolder:re,onFolderExpand:De,onFolderSelect:Fe,idPrefix:he}),[le,ue,Te,re,De,Fe,he]),be=(0,t.useCallback)(Ue=>Ee(Ue),[Ee]),pe=(0,t.useCallback)((Ue,we)=>{const{parentUID:je}=le[Ue];Me(je)},[Me,le]);return t.createElement("div",{className:xe.table,role:"tree"},le.length>0?t.createElement(C.A,{ref:ze,itemCount:le.length,isItemLoaded:be,loadMoreItems:pe},({onItemsRendered:Ue,ref:we})=>t.createElement(y.Y1,{ref:we,height:O*Math.min(6.5,le.length),width:"100%",itemData:We,itemSize:O,itemCount:le.length,onItemsRendered:Ue},R)):t.createElement("div",{className:xe.emptyMessage},t.createElement(E.x6,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const A=[100,200,130,160,150];function R({index:le,style:ue,data:Te}){const{items:he,focusedItemIndex:re,foldersAreOpenable:De,selectedFolder:Fe,onFolderExpand:Ee,onFolderSelect:Me,idPrefix:ze}=Te,{item:xe,isOpen:We,level:be,parentUID:pe}=he[le],Ue=(0,t.useRef)(null),we=(0,t.useId)(),je=(0,h.useSelector)(M.ku),He=(0,h.useSelector)(M.Am),rt=(xe.uid?He[xe.uid]:je)?.items??[];let Je=[];xe.uid&&(Je=(pe?He[pe]:je)?.items??[]);const Ve=(0,l.of)(B),Oe=(0,t.useCallback)(ye=>{ye.preventDefault(),ye.stopPropagation(),xe.uid&&Ee(xe.uid,!We)},[xe.uid,We,Ee]),Ne=(0,t.useCallback)(()=>{xe.kind==="folder"&&Me(xe)},[xe,Me]);return xe.kind==="ui"&&xe.uiKind==="pagination-placeholder"?t.createElement("span",{style:ue,className:Ve.row},t.createElement(T.T,{level:be,spacing:2}),t.createElement(P.A,{width:A[le%A.length]})):xe.kind!=="folder"?null:t.createElement("div",{ref:Ue,style:ue,className:(0,r.cx)(Ve.row,{[Ve.rowFocused]:le===re,[Ve.rowSelected]:xe.uid===Fe}),tabIndex:-1,onClick:Ne,"aria-expanded":We,"aria-selected":xe.uid===Fe,"aria-labelledby":we,"aria-level":be+1,role:"treeitem","aria-owns":rt.length>0?rt.map(ye=>v(ze,ye.uid)).join(" "):void 0,"aria-setsize":rt.length,"aria-posinset":Je.findIndex(ye=>ye.uid===xe.uid)+1,id:v(ze,xe.uid)},t.createElement("div",{className:Ve.rowBody},t.createElement(T.T,{level:be,spacing:2}),De?t.createElement(f.K,{size:S,onMouseDown:Oe,tabIndex:-1,"aria-label":We?`Collapse folder ${xe.title}`:`Expand folder ${xe.title}`,name:We?"angle-down":"angle-right"}):t.createElement("span",{className:Ve.folderButtonSpacer}),t.createElement("label",{className:Ve.label,id:we},t.createElement(D.E,{truncate:!0},xe.title))))}const B=le=>{const ue=(0,r.css)({height:O,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:le.spacing(.5),overflow:"hidden",padding:le.spacing(0,1)});return{table:(0,r.css)({background:le.components.input.background}),emptyMessage:(0,r.css)({padding:le.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,r.css)({paddingLeft:le.spacing(.5)}),row:(0,r.css)({display:"flex",position:"relative",alignItems:"center",":not(:first-child)":{borderTop:`solid 1px ${le.colors.border.weak}`}}),rowFocused:(0,r.css)({backgroundColor:le.colors.background.secondary}),rowSelected:(0,r.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:le.shape.radius.default,backgroundImage:le.colors.gradients.brandVertical}}),rowBody:ue,label:(0,r.css)({lineHeight:O+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var U=e(16797);function w({handleClearSelection:le,isLoading:ue,invalid:Te,label:he,...re},De){const Fe=(0,l.$j)(),Ee=N(Fe,Te),Me=ze=>{(ze.key==="Enter"||ze.key===" ")&&le?.(ze)};return t.createElement("div",{className:Ee.wrapper},t.createElement("div",{className:Ee.inputWrapper},he?t.createElement("div",{className:Ee.prefix},t.createElement(c.I,{name:"folder"})):void 0,t.createElement("button",{type:"button",className:(0,r.cx)(Ee.fakeInput,he?Ee.hasPrefix:void 0),...re,ref:De},ue?t.createElement(P.A,{width:100}):he?t.createElement(D.E,{truncate:!0},he):t.createElement(D.E,{truncate:!0,color:"secondary"},t.createElement(E.x6,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder")),!ue&&le&&t.createElement(c.I,{role:"button",tabIndex:0,"aria-label":(0,E.t)("browse-dashboards.folder-picker.clear-selection","Clear selection"),className:Ee.clearIcon,name:"times",onClick:le,onKeyDown:Me})),t.createElement("div",{className:Ee.suffix},t.createElement(c.I,{name:"angle-down"}))))}const K=(0,t.forwardRef)(w),N=(le,ue=!1)=>{const Te=(0,d.n)({theme:le,invalid:ue});return{wrapper:Te.wrapper,inputWrapper:Te.inputWrapper,prefix:(0,r.css)([Te.prefix,{pointerEvents:"none",color:le.colors.text.primary}]),suffix:(0,r.css)([Te.suffix,{pointerEvents:"none"}]),fakeInput:(0,r.css)([Te.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,r.css)`
          ${(0,U.focusCss)(le)}
        `,alignItems:"center",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",paddingRight:28}]),hasPrefix:(0,r.css)({paddingLeft:28}),clearIcon:(0,r.css)({color:le.colors.text.secondary,cursor:"pointer","&:hover":{color:le.colors.text.primary},"&:focus:not(:focus-visible)":(0,U.getMouseFocusStyles)(le),"&:focus-visible":(0,U.getFocusStyles)(le)})}};var L=e(1081),V=e(92955),F=e(93519),z=e(64756);const Y=(0,L.Mz)(le=>le,(le,ue,Te,he,re)=>p.cU.endpoints.listFolders.select({parentUid:ue,page:Te,limit:he,permission:re}),(le,ue)=>ue(le)),H=(0,L.Mz)([le=>le,(le,ue)=>ue],(le,ue)=>{const Te=new Set,he=[],re={};let De=!1;for(const Fe of ue){if(Te.has(Fe.requestId))continue;const Ee=Y(le,Fe.arg.parentUid,Fe.arg.page,Fe.arg.limit,Fe.arg.permission);Ee.status==="pending"&&(De=!0);const Me=Ee.originalArgs?.parentUid;Me?(re[Me]||(re[Me]=[]),re[Me].push(Ee)):he.push(Ee)}return{isLoading:De,rootPages:he,pagesByParent:re}});function k(le){const ue=le.at(-1),Te=ue?.originalArgs?.page;return ue?.data?[ue.data.length<ue.originalArgs.limit,Te]:[!1,Te]}function ee(le,ue,Te){const he=(0,z.wA)(),re=(0,t.useRef)([]),De=(0,z.d4)(Me=>H(Me,re.current)),Fe=(0,t.useCallback)(Me=>{const ze=Me?De.pagesByParent[Me]:De.rootPages,[xe,We]=k(ze??[]);if(xe)return;const be={parentUid:Me,page:(We??0)+1,limit:V.md,permission:Te},pe=he(p.cU.endpoints.listFolders.initiate(be));re.current=re.current.concat([pe])},[De,he,Te]);return(0,t.useEffect)(()=>()=>{for(const Me of re.current)Me.unsubscribe()},[]),{items:(0,t.useMemo)(()=>{if(!le)return[];function Me(xe,We,be){const pe=We.flatMap(we=>(we.data??[]).flatMap(He=>{const rt=ue[He.uid],Je={isOpen:!!rt,level:be,item:{kind:"folder",title:He.title,uid:He.uid}},Ve=rt&&De.pagesByParent[He.uid];if(Ve){const Oe=Me(He.uid,Ve,be+1);return[Je,...Oe]}return Je})),[Ue]=k(We);return Ue||pe.push(...(0,F.T)(V.md,xe,be)),pe}const ze=Me(void 0,De.rootPages,1);return ze.unshift(ie),ze},[De,le,ue]),isLoading:De.isLoading,requestNextPage:Fe}}const ie={isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}};function fe({tree:le,handleCloseOverlay:ue,handleFolderSelect:Te,handleFolderExpand:he,idPrefix:re,search:De,visible:Fe}){const[Ee,Me]=(0,t.useState)(-1),ze=!!n.$.featureToggles.nestedFolders;(0,t.useEffect)(()=>{Fe&&Me(-1)},[Fe]),(0,t.useEffect)(()=>{Me(0)},[De]),(0,t.useEffect)(()=>{document.getElementById(v(re,le[Ee]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[Ee,re,le]);const xe=(0,t.useCallback)(We=>{const be=ze&&!De;switch(We.key){case"ArrowRight":case"ArrowLeft":be&&(We.preventDefault(),he(le[Ee].item.uid,We.key==="ArrowRight"));break;case"ArrowUp":Ee>0&&(We.preventDefault(),Me(Ee-1));break;case"ArrowDown":Ee<le.length-1&&(We.preventDefault(),Me(Ee+1));break;case"Enter":We.preventDefault();const pe=le[Ee].item;pe.kind==="folder"&&Te(pe);break;case"Tab":We.stopPropagation(),ue();break;case"Escape":We.stopPropagation(),We.preventDefault(),ue();break}},[Ee,ue,he,Te,ze,De,le]);return{focusedItemIndex:Ee,handleKeyDown:xe}}const q=i()(Z,300);async function Z(le,ue){const Te=await(0,b.getGrafanaSearcher)().search({query:le,kind:["folder"],limit:100,permission:ue}),he=Te.view.map(re=>(0,a.hI)(re,Te.view));return{...Te,items:he}}function J({value:le,invalid:ue,showRootFolder:Te=!0,clearable:he=!1,excludeUIDs:re,permission:De=h.PermissionLevelString.Edit,onChange:Fe}){const Ee=(0,l.of)(G),Me=(0,p.kH)(le||p.hT),ze=!!n.$.featureToggles.nestedFolders,[xe,We]=(0,t.useState)(""),[be,pe]=(0,t.useState)(null),[Ue,we]=(0,t.useState)(!1),[je,He]=(0,t.useState)(!1),[rt,Je]=(0,t.useState)(!1),[Ve,Oe]=(0,t.useState)({}),Ne=(0,t.useId)(),[ye]=(0,t.useState)(void 0),se=(0,t.useRef)(0),ae=!!(rt&&!(xe&&be)),{items:ge,isLoading:Pe,requestNextPage:Re}=ee(ae,Ve,De);(0,t.useEffect)(()=>{if(!xe){pe(null);return}const qt=Date.now();we(!0),q(xe,De).then(rn=>{if(qt>se.current){const en=rn.view.map(Jt=>(0,a.hI)(Jt,rn.view));pe({...rn,items:en}),we(!1),se.current=qt}})},[xe,De]);const Be=[(0,s.UU)({crossAxis:!1,boundary:document.body})],{context:_e,refs:Xe,floatingStyles:tt,elements:at}=(0,o.we)({open:rt,placement:"bottom",onOpenChange:qt=>{qt&&(We(""),He(!0)),Je(qt)},middleware:Be,whileElementsMounted:s.ll}),st=(0,o.kp)(_e),dt=(0,o.s9)(_e),{getReferenceProps:ot,getFloatingProps:ft}=(0,o.bv)([dt,st]),yt=(0,t.useCallback)(async(qt,rn)=>{Oe(en=>({...en,[qt]:rn})),rn&&!Ve[qt]&&Re(qt)},[Re,Ve]),Tt=(0,t.useCallback)(qt=>{Fe&&Fe(qt.uid,qt.title),Je(!1)},[Fe]),Kt=(0,t.useCallback)(qt=>{qt.preventDefault(),qt.stopPropagation(),Fe&&Fe(void 0,void 0)},[Fe]),Gt=(0,t.useCallback)(()=>Je(!1),[Je]),_t=(0,t.useCallback)(qt=>{xe||Re(qt)},[xe,Re]),it=(0,t.useMemo)(()=>{let qt=[];return ae?qt=ge:qt=be?.items.map(rn=>({isOpen:!1,level:0,item:{kind:"folder",title:rn.title,uid:rn.uid}}))??[],(!Te||re?.length)&&(qt=qt.filter(rn=>!(!Te&&rn===ie||re?.includes(rn.item.uid)))),qt},[ge,re,ae,be?.items,Te]),Mt=(0,t.useCallback)(qt=>{const rn=it[qt];if(!rn)return!1;const en=rn.item;return!(en.kind==="ui"&&en.uiKind==="pagination-placeholder")},[it]),Dn=Pe||Ue,{focusedItemIndex:lt,handleKeyDown:Ct}=fe({tree:it,handleCloseOverlay:Gt,handleFolderSelect:Tt,handleFolderExpand:yt,idPrefix:Ne,search:xe,visible:rt});let Vt=Me.data?.title;return le===""&&(Vt="Dashboards"),rt?t.createElement(t.Fragment,null,t.createElement(d.p,{ref:Xe.setReference,autoFocus:!0,prefix:Vt?t.createElement(c.I,{name:"folder"}):null,placeholder:Vt??(0,E.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:xe,invalid:ue,className:Ee.search,onChange:qt=>We(qt.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Ne,"aria-owns":Ne,"aria-activedescendant":v(Ne,it[lt]?.item.uid),role:"combobox",suffix:t.createElement(c.I,{name:"search"}),...ot(),onKeyDown:Ct}),t.createElement("fieldset",{ref:Xe.setFloating,id:Ne,className:Ee.tableWrapper,style:{...tt,width:at.domReference?.clientWidth},...ft()},ye?t.createElement(g.F,{className:Ee.error,severity:"warning",title:(0,E.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},ye.message||ye.toString?.()||(0,E.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):t.createElement("div",null,Dn&&t.createElement("div",{className:Ee.loader},t.createElement(u.G,{width:600})),t.createElement(x,{items:it,selectedFolder:le,focusedItemIndex:lt,onFolderExpand:yt,onFolderSelect:Tt,idPrefix:Ne,foldersAreOpenable:ze&&!(xe&&be),isItemLoaded:Mt,requestLoadMore:_t})))):t.createElement(K,{label:Vt,handleClearSelection:he&&le!==void 0?Kt:void 0,invalid:ue,isLoading:Me.isLoading,autoFocus:je,ref:Xe.setReference,"aria-label":Vt?(0,E.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:Vt}):void 0,...ot()})}const G=le=>({button:(0,r.css)({maxWidth:"100%"}),error:(0,r.css)({marginBottom:0}),tableWrapper:(0,r.css)({boxShadow:le.shadows.z3,position:"relative",zIndex:le.zIndex.portal}),loader:(0,r.css)({position:"absolute",top:0,left:0,right:0,zIndex:le.zIndex.portal+1,overflow:"hidden"}),search:(0,r.css)({input:{cursor:"default"}})});var ne=e(85242);function te(le){const ue=n.$.featureToggles.newFolderPicker||n.$.featureToggles.nestedFolders&&n.$.featureToggles.nestedFolderPicker,{initialTitle:Te,dashboardId:he,enableCreateNew:re,...De}=le;return ue?t.createElement(J,{...De}):t.createElement(oe,{...le})}function oe({value:le,showRootFolder:ue,onChange:Te,initialTitle:he,dashboardId:re,enableCreateNew:De,inputId:Fe,skipInitialLoad:Ee}){const Me=(0,t.useCallback)(ze=>{Te&&Te(ze.uid,ze.title)},[Te]);return t.createElement(ne.sR,{onChange:Me,showRoot:ue,initialFolderUid:le,initialTitle:he,inputId:Fe,skipInitialLoad:Ee,dashboardId:re,enableCreateNew:De})}},85242:(Q,I,e)=>{"use strict";e.d(I,{sR:()=>y});var t=e(32196),n=e(76459),r=e.n(n),s=e(96540),o=e(16817),m=e(26272),i=e(13544),l=e(14110),d=e(40845),c=e(10354),g=e(88323),u=e(28138),E=e(44836),p=e(16233),b=e(11230),a=e(31678);const h="+ Add new",P="-10";function y(T){const{dashboardId:M,allowEmpty:O,onChange:S,filter:v,enableCreateNew:x,inputId:A,onClear:R,enableReset:B,initialFolderUid:U,initialTitle:w="",permissionLevel:K=a.PermissionLevelString.Edit,rootName:N,showRoot:L=!0,skipInitialLoad:V,searchQueryType:F,customAdd:z,folderWarning:Y,invalid:H}=T,k=N??"Dashboards",[ee,ie]=(0,s.useState)(null),[fe,q]=(0,s.useState)(!1),[Z,J]=(0,s.useState)(""),[G,ne]=(0,s.useState)(ee?.title??""),te=(0,d.of)(D),oe=typeof R=="function",le=(0,s.useCallback)(async We=>{const be=await(0,b.c0)(We,K,F),Ue=C(be,v);return(0,l.rR)("grafana_folder_picker_results_loaded",{results:Ue.length,searchTermLength:We.length,enableCreateNew:!!x}),(p.TP.hasPermission(a.AccessControlAction.DashboardsWrite)||p.TP.hasPermission(a.AccessControlAction.DashboardsCreate))&&k?.toLowerCase().startsWith(We.toLowerCase())&&L&&Ue.unshift({label:k,value:""}),B&&We===""&&w!==""&&!Ue.find(je=>je.label===w)&&Ue.unshift({label:w,value:U}),x&&z?[...Ue,{value:P,label:h,title:We}]:Ue},[B,U,w,K,k,L,F,v,x,z]),ue=(0,s.useMemo)(()=>r()(le,300,{leading:!0}),[le]),Te=async()=>{const We={label:w,value:void 0},be={label:k,value:""},pe=await le("");let Ue=null;U!=null?Ue=pe.find(we=>we.value===U)||null:B&&w?Ue=We:U&&(Ue=pe.find(we=>we.id===U)||null),!Ue&&!O&&(p.TP.isEditor?Ue=be:!!M?Ue=We:Ue=pe.length>0?pe[0]:We),!fe&&ie(Ue)};(0,s.useEffect)(()=>{ee&&ee.value!==U&&!fe&&ee.value&&ee.label&&S({uid:ee.value,title:ee.label})},[ee,U]),(0,o.A)(async()=>{if(V){const We=await f({getFolder:b.Ql,folderUid:U,folderName:w});ie(We)}await Te()},[V,U,w]),(0,s.useEffect)(()=>{ee&&ee.id===P&&q(!0)},[ee]);const he=(0,s.useCallback)((We,be)=>{if(We?.value===P)ie({id:P,title:Z}),ne(Z);else{if(We||(We={value:"",label:k}),be.action==="clear"&&R){R();return}ie(We),S({uid:We.value,title:We.label})}},[S,R,k,Z]),re=(0,s.useCallback)(async We=>{if(Y?.warningCondition(We))return(0,l.rR)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const be=await(0,b.vV)({title:We});let pe={value:"",label:"Not created"};return be.uid?((0,l.rR)("grafana_folder_picker_folder_created",{status:"success"}),u.A.emit(m.r1.alertSuccess,["Folder Created","OK"]),pe={value:be.uid,label:be.title},ie(be),he(pe,{action:"create-option",option:pe})):((0,l.rR)("grafana_folder_picker_folder_created",{status:"failed"}),u.A.emit(m.r1.alertError,["Folder could not be created"])),pe},[Y,he]),De=(0,s.useCallback)(We=>{const be=!!z?.disallowValues;if(We.key==="Enter"&&be&&!z?.isAllowedValue(G)){We.preventDefault();return}switch(We.key){case"Enter":{re(ee?.title),q(!1);break}case"Escape":ie({value:"",label:k}),q(!1)}},[z?.disallowValues,z?.isAllowedValue,G,re,ee?.title,k]),Fe=We=>{const be=We.currentTarget.value;ne(be),ie({id:void 0,title:be})},Ee=()=>{ie({value:"",label:k}),q(!1)},Me=(We,{action:be})=>{be==="input-change"&&J(pe=>We),be==="menu-close"&&J(pe=>We)},ze=()=>Y?.warningCondition(G)?s.createElement(Y.warningComponent,null):null,xe=()=>Y?.warningCondition(Z)?s.createElement(Y.warningComponent,null):null;return fe?s.createElement(s.Fragment,null,s.createElement(ze,null),s.createElement("div",{className:te.newFolder},"Press enter to create the new folder."),s.createElement(c.p,{width:30,autoFocus:!0,value:G,onChange:Fe,onKeyDown:De,placeholder:"Press enter to confirm new folder.",onBlur:Ee})):s.createElement("div",{"data-testid":i.Tp.components.FolderPicker.containerV2},s.createElement(xe,null),s.createElement(g.gZ,{inputId:A,"data-testid":i.Tp.components.FolderPicker.input,loadingMessage:(0,E.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:ee,inputValue:Z,onInputChange:Me,value:ee,allowCustomValue:x&&!z,loadOptions:ue,onChange:he,onCreateOption:re,invalid:H,isClearable:oe}))}function C(T,M){return(M?M(T):T).map(S=>({label:S.title,value:S.uid}))}async function f({folderName:T,folderUid:M,getFolder:O}){if(M==null)throw new Error("folderUid is not found.");return T?{label:T,value:M}:{label:(await O(M)).title,value:M}}const D=T=>({newFolder:(0,t.css)({color:T.colors.warning.main,fontSize:T.typography.bodySmall.fontSize,paddingBottom:T.spacing(1)})})},73725:(Q,I,e)=>{"use strict";e.d(I,{r:()=>l});var t=e(96540),n=e(16817),r=e(88323),s=e(14578),o=e(53477),m=e(24439);const i=()=>(0,m.getGrafanaSearcher)().getSortOptions();function l({onChange:d,value:c,placeholder:g,filter:u,getSortOptions:E,isClearable:p}){const b=(0,n.A)(async()=>{const h=await(E??i)();return u?h.filter(P=>u.includes(P.value)):h},[E,u]);if(b.loading)return null;const a=!!(c?.includes("desc")||c?.startsWith("-"));return t.createElement(r.l6,{key:c,width:28,onChange:d,value:b.value?.find(h=>h.value===c)??null,options:b.value,"aria-label":"Sort",placeholder:g??`Sort (Default ${o.r4.label})`,prefix:t.createElement(s.I,{name:a?"sort-amount-down":"sort-amount-up"}),isClearable:p})}},46334:(Q,I,e)=>{"use strict";e.d(I,{E:()=>s});var t=e(96540),n=e(69613),r=e(14578);class s extends t.Component{constructor(m){super(m)}render(){const{label:m,removeIcon:i,count:l,onClick:d}=this.props,{color:c}=(0,n.MC)(m),g={backgroundColor:c},u=l!==0&&t.createElement("span",{className:"tag-count-label"},`(${l})`);return t.createElement("span",{className:"label label-tag",style:g},i&&t.createElement(r.I,{onClick:d,name:"times"}),m," ",u)}}},99818:(Q,I,e)=>{"use strict";e.d(I,{$:()=>E});var t=e(32196),n=e(96540),r=e(71332),s=e(54479),o=e(40845),m=e(88323),i=e(14578),l=e(44836),d=e(46334);const c=({data:b,className:a,label:h,isFocused:P,innerProps:y})=>{const C=(0,o.of)(g);return n.createElement("div",{className:(0,t.cx)(C.option,P&&C.optionFocused),"aria-label":"Tag option",...y},n.createElement("div",{className:`tag-filter-option ${a||""}`},typeof h=="string"?n.createElement(d.E,{label:h,removeIcon:!1,count:b.count??0}):h))},g=b=>({option:(0,t.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${b.colors.background.secondary};
      }
    `,optionFocused:(0,t.css)`
      background: ${b.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),u=(b,a)=>RegExp((0,s.jD)(a),"i").test(b.value),E=({allowCustomValue:b=!1,formatCreateLabel:a,hideValues:h,inputId:P,isClearable:y,onChange:C,placeholder:f,tagOptions:D,tags:T,width:M})=>{const O=(0,o.of)(p),S=T.map(Y=>({value:Y,label:Y,count:0})),[v,x]=(0,n.useState)(S),[A,R]=(0,n.useState)(!1),[B,U]=(0,n.useState)(T),[w,K]=(0,n.useState)(S),N=(0,n.useMemo)(()=>T.join(),[T]),L=(0,n.useCallback)(async()=>(await D()).map(H=>T.includes(H.term)?{value:H.term,label:H.term,count:0}:{value:H.term,label:H.term,count:H.count}),[D,T]),V=(0,n.useCallback)(async()=>{R(!0);const Y=await L();b&&w.forEach(H=>Y.push(H)),x(Y),R(!1)},[b,w,L]);(0,n.useEffect)(()=>{T.length>0&&v.length===0&&V()},[V,v.length,T.length]),(0,n.useEffect)(()=>{T!==B&&(U(T),V())},[V,B,T]);const F=Y=>{Y.forEach(H=>H.count=0),C((Y||[]).map(H=>H.value)),b&&K(Y.filter(H=>!T.includes(H)))},z={key:N,onFocus:V,isLoading:A,options:v,allowCreateWhileLoading:!0,allowCustomValue:b,formatCreateLabel:a,defaultOptions:!0,filterOption:u,getOptionLabel:Y=>Y.label,getOptionValue:Y=>Y.value,inputId:P,isMulti:!0,onChange:F,loadingMessage:(0,l.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,l.t)("tag-filter.no-tags","No tags found"),placeholder:f||(0,l.t)("tag-filter.placeholder","Filter by tag"),value:S,width:M,components:{Option:c,MultiValueLabel:()=>null,MultiValueRemove(Y){const{data:H}=Y;return n.createElement(r.c.MultiValueRemove,{...Y},n.createElement(d.E,{key:H.label,label:H.label,removeIcon:!0,count:H.count}))},MultiValueContainer:h?()=>null:r.c.MultiValueContainer}};return n.createElement("div",{className:O.tagFilter},y&&T.length>0&&n.createElement("button",{className:O.clear,onClick:()=>F([])},"Clear tags"),n.createElement(m.KF,{...z,prefix:n.createElement(i.I,{name:"tag-alt"}),"aria-label":"Tag filter"}))};E.displayName="TagFilter";const p=b=>({tagFilter:(0,t.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,t.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${b.colors.text.secondary};

    &:hover {
      color: ${b.colors.text.primary};
    }
  `})},25573:(Q,I,e)=>{"use strict";e.d(I,{m:()=>u});var t=e(2543),n=e.n(t),r=e(96540),s=e(26272),o=e(65879),m=e(47232),i=e(15666),l=e(76412),d=e(28138),c=e(61680);const g="grafana.dashboard.timepicker.history",u=P=>r.createElement(c.b,{storageKey:g,defaultValue:[]},(y,C)=>{const f=p(y),D=E(f);return r.createElement(i.$6,{...P,history:D,onChange:T=>{b(T,f,C),P.onChange(T)},onError:T=>d.A.emit(s.r1.alertError,[(0,l.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,l.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:T})])})});function E(P){return P.map(y=>o.convertRawToRange(y,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function p(P){return P.map(y=>{const C=typeof y.from=="string"?y.from:y.from.toISOString(),f=typeof y.to=="string"?y.to:y.to.toISOString();return{from:C,to:f}})}function b(P,y,C){if(!a(P))return;const f={from:typeof P.raw.from=="string"?P.raw.from:P.raw.from.toISOString(),to:typeof P.raw.to=="string"?P.raw.to:P.raw.to.toISOString()},D=h([f,...y]);C(D)}function a(P){return(0,m.Ar)(P.raw.from)||(0,m.Ar)(P.raw.to)}function h(P){return(0,t.uniqBy)(P,y=>y.from+y.to).slice(0,4)}},82389:(Q,I,e)=>{"use strict";e.d(I,{I:()=>g});var t=e(96540),n=e(24293),r=e(11261),s=e(52622),o=e(67266),m=e(55726),i=e(79041),l=e(30249),d=e(28895);const c=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip"];class g extends t.Component{constructor(){super(...arguments),this.getValueColor=(E,p,b)=>{const a=this.props.frames[E].fields[p];if(a.display){const h=a.display(b);if(h.color)return h.color}return n.F},this.prepConfig=(E,p,b)=>{this.panelContext=this.context;const{sync:a}=this.panelContext;return(0,d.iE)({frame:E,getTimeRange:b,sync:a,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:E.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor,hoverMulti:this.props.tooltip?.mode===s.$N.Multi})},this.renderLegend=E=>{const{legend:p,legendItems:b}=this.props;return!E||!b||!p||p.showLegend===!1?null:t.createElement(o.KU.Legend,{placement:p.placement},t.createElement(m.t,{placement:p.placement,items:b,displayMode:p.displayMode,readonly:!0}))}}static{this.contextType=i.e4}render(){return t.createElement(l.o,{...this.props,fields:{x:E=>E.type===r.PU.time,y:E=>E.type===r.PU.number||E.type===r.PU.boolean||E.type===r.PU.string||E.type===r.PU.enum},prepConfig:this.prepConfig,propsToDiff:c,renderLegend:this.renderLegend,dataLinkPostProcessor:this.panelContext?.dataLinkPostProcessor})}}},28895:(Q,I,e)=>{"use strict";e.d(I,{pm:()=>R,GY:()=>ee,c5:()=>ie,jY:()=>H,EI:()=>z,iE:()=>w,Qe:()=>F,Or:()=>Y});var t=e(24293),n=e(28240),r=e(83195),s=e(94624),o=e(11261),m=e(50082),i=e(58563),l=e(47737),d=e(73060),c=e(46294),g=e(39624),u=e(73134),E=e(52622),p=e(51336),b=e(52811),a=e(16895),h=e(36613),P=e(23596),y=e(39758),C=e(4134);const{round:f,min:D,ceil:T}=Math,M=2;let O=6;const S=y.ur;function v(fe,q,Z,J,G){(0,y.mn)(Z,fe,S,q,(ne,te,oe)=>{let le=J*te,ue=J*oe;G(ne,le,ue)})}function x(fe){const{mode:q,numSeries:Z,isDiscrete:J,hasMappedNull:G,rowHeight:ne=0,colWidth:te=0,showValue:oe,mergeValues:le=!1,theme:ue,label:Te,formatValue:he,alignValue:re="left",getTimeRange:De,getValueColor:Fe,getFieldConfig:Ee,onHover:Me,onLeave:ze,hoverMulti:xe}=fe;let We,be;const pe=at=>{be=Array(Z).fill(null).map(st=>Array(at).fill(null))},Ue=`500 ${Math.round(12*devicePixelRatio)}px ${ue.typography.fontFamily}`,we=Array(Z).fill(null);let je=null;const He=[te,1/0],rt=1-He[0],Je=(He[1]??1/0)*h.A.pxRatio,Ve=new Map,Oe=new Map;function Ne(at){Ve.forEach((st,dt)=>{at.fillStyle=dt,at.fill(st)}),Oe.forEach((st,dt)=>{at.strokeStyle=dt,at.stroke(st)}),Ve.clear(),Oe.clear()}function ye(at,st,dt,ot,ft,yt,Tt,Kt,Gt,_t,it,Mt,Dn){Tt=Math.max(1,Tt);const lt=Fe(_t+1,Mt),Ct=Ee(_t),Vt=A(Ct,lt);if(be[_t][it]={x:f(ft-dt),y:f(yt-ot),w:Tt,h:Kt,sidx:_t+1,didx:it,fillColor:Vt},Dn){let qt=Vt,rn=Ve.get(qt);if(rn==null&&Ve.set(qt,rn=new Path2D),st(rn,ft,yt,Tt,Kt),Gt){let en=lt,Jt=Oe.get(en);Jt==null&&Oe.set(en,Jt=new Path2D),st(Jt,ft+Gt/2,yt+Gt/2,Tt-Gt,Kt-Gt)}}else at.beginPath(),st(at,ft,yt,Tt,Kt),at.fillStyle=Vt,at.fill(),Gt&&(at.beginPath(),st(at,ft+Gt/2,yt+Gt/2,Tt-Gt,Kt-Gt),at.strokeStyle=lt,at.lineWidth=Gt,at.stroke())}const se=(at,st,dt,ot)=>(h.A.orient(at,st,(ft,yt,Tt,Kt,Gt,_t,it,Mt,Dn,lt,Ct,Vt,qt,rn)=>{let en=f((ft.width||0)*h.A.pxRatio),Jt=J(st),hn=Jt&&G(st);at.ctx.save(),rn(at.ctx,at.bbox.left,at.bbox.top,at.bbox.width,at.bbox.height),at.ctx.clip(),v(ne,st-1,Z,Ct,(Fn,Kn,na)=>{if(q===R.Changes)for(let Ut=0;Ut<Tt.length;Ut++){let on=Tt[Ut];if(on!=null||hn){let mn=Math.round(_t(yt[Ut],Kt,lt,Mt)),vn=Ut;for(;++vn<Tt.length&&(Tt[vn]===void 0||le&&Tt[vn]===on););let pn=vn===Tt.length?Mt+lt+en:Math.round(_t(yt[vn],Kt,lt,Mt));ye(at.ctx,rn,Mt,Dn,mn,f(Dn+Kn),pn-mn,f(na),en,Fn,Ut,on,Jt),Ut=vn-1}}else if(q===R.Samples){let Ut=_t(yt[1],Kt,lt,Mt)-_t(yt[0],Kt,lt,Mt),on=Ut*rt,mn=f(D(Je,Ut-on)-en),vn=mn/2;for(let pn=dt;pn<=ot;pn++){let Un=Tt[pn];if(Un!=null||hn){let Bn=_t(yt[pn],Kt,lt,Mt);ye(at.ctx,rn,Mt,Dn,f(Bn-vn),f(Dn+Kn),mn,f(na),en,Fn,pn,Un,Jt)}}}}),Jt&&(at.ctx.lineWidth=en,Ne(at.ctx)),at.ctx.restore()}),null),ae=he==null||oe===E.yL.Never?!1:(at,st,dt,ot)=>(at.ctx.save(),at.ctx.rect(at.bbox.left,at.bbox.top,at.bbox.width,at.bbox.height),at.ctx.clip(),at.ctx.font=Ue,at.ctx.textAlign=q===R.Changes?re:"center",at.ctx.textBaseline="middle",h.A.orient(at,st,(ft,yt,Tt,Kt,Gt,_t,it,Mt,Dn,lt,Ct)=>{let Vt=f((ft.width||0)*h.A.pxRatio),rn=J(st)&&G(st),en=f(Dn+_e[st-1]);for(let Jt=0;Jt<Tt.length;Jt++)if(Tt[Jt]!=null||rn){const hn=be[st-1][Jt];if(!hn||hn.x>=lt)continue;let Fn=Math.floor(hn?.w/O);if(oe===E.yL.Auto&&Fn<2)continue;let Kn=he(st,Tt[Jt]),na=f(hn.x+Mt+hn.w/2);q===R.Changes&&(re==="left"?na=f(hn.x+Mt+Vt+M):re==="right"&&(na=f(hn.x+Mt+hn.w-Vt-M))),at.ctx.fillStyle=ue.colors.getContrastText(hn.fillColor,3),at.ctx.fillText(Kn.slice(0,Fn),na,en)}}),at.ctx.restore(),!1),ge=at=>{let st="";for(let dt=32;dt<=126;dt++)st+=String.fromCharCode(dt);O=Math.ceil(at.ctx.measureText(st).width/st.length*h.A.pxRatio),O+=2.5,at.root.querySelectorAll(".u-cursor-pt").forEach(dt=>{dt.style.borderRadius="0"})},Pe=at=>{We=We||new C.C$(0,0,at.bbox.width,at.bbox.height),We.clear(),pe(at.data[0].length),at.series.forEach(st=>{st._paths=null})};function Re(at,st,dt=!1){we.fill(null),je=null,!(at<0)&&We.get(at,0,h.A.pxRatio,1e4,ot=>{at>=ot.x&&at<=ot.x+ot.w&&(st>=ot.y&&st<=ot.y+ot.h?we[ot.sidx]=je=ot:(xe||dt)&&(we[ot.sidx]=ot))})}const Be={x:q===R.Changes,y:!1,dataIdx:(at,st)=>{if(st===1){if(We.o.length===0&&We.q==null)for(const yt of be)for(const Tt of yt)Tt&&We.add(Tt);let dt=at.cursor.left*h.A.pxRatio,ot=at.cursor.top*h.A.pxRatio,ft=je;Re(dt,ot,at.cursor.event==null),je!=null?je!==ft&&Me(je.sidx,je.didx,je):ft!=null&&ze()}return we[st]?.didx},focus:{prox:1e3,dist:(at,st)=>je?.sidx===st?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(at,st)=>{let dt=we[st],ot=dt!=null;return{left:ot?dt.x/h.A.pxRatio:-10,top:ot?dt.y/h.A.pxRatio:-10,width:ot?dt.w/h.A.pxRatio:0,height:ot?dt.h/h.A.pxRatio:0}}}},_e=Array(Z).fill(0),Xe=Array(Z).fill(0),tt=[0,1];return{cursor:Be,xSplits:q===R.Samples?(at,st,dt,ot,ft,yt)=>{let Tt=[],Kt=at.data[0][1]-at.data[0][0],Gt=T(ft/Kt);for(let _t=0;_t<at.data[0].length;_t+=Gt){let it=at.data[0][_t];it>=dt&&it<=ot&&Tt.push(it)}return Tt}:null,xRange:at=>{const st=De();let dt=st.from.valueOf(),ot=st.to.valueOf();if(q===R.Samples){let Tt=(at.data[0][1]-at.data[0][0])/2;dt<=at.data[0][0]&&(dt=at.data[0][0]-Tt);let Kt=at.data[0].length-1;ot>=at.data[0][Kt]&&(ot=at.data[0][Kt]+Tt)}return[dt,ot]},ySplits:at=>(v(ne,null,Z,at.bbox.height,(st,dt,ot)=>{_e[st]=f(dt+ot/2),Xe[st]=at.posToVal(_e[st]/h.A.pxRatio,b.s)}),Xe),yValues:(at,st)=>st.map((dt,ot)=>Te(ot+1)),yRange:tt,drawPaths:se,drawPoints:ae,init:ge,drawClear:Pe}}function A(fe,q){if(q[0]==="#"&&q.length===9)return q;const Z=(fe.fillOpacity??100)/100;return(0,P.alpha)(q,Z)}var R=(fe=>(fe.Changes="changes",fe.Samples="samples",fe))(R||{});const B={lineWidth:0,fillOpacity:80};function U(fe){return fe.ctrlKey||fe.metaKey||fe.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const w=({frame:fe,theme:q,timeZones:Z,getTimeRange:J,mode:G,sync:ne,rowHeight:te,colWidth:oe,showValue:le,alignValue:ue,mergeValues:Te,getValueColor:he,eventsScope:re="__global_",hoverMulti:De})=>{const Fe=new p.e(Z[0]),Ee="x",Me=rt=>{const Je=rt.config?.color?.mode;return!(Je&&rt.display&&Je.startsWith("continuous-"))},ze=rt=>rt.config.mappings?.some(Je=>Je.type===u.dM.SpecialValue&&Je.options.match==="null")||!1,xe=(rt,Je)=>{const Ve=fe.fields[rt];return Ve.state?.origin?.fieldIndex!==void 0&&Ve.state?.origin?.frameIndex!==void 0&&he?he(Ve.state?.origin?.frameIndex,Ve.state?.origin?.fieldIndex,Je):t.F},We={mode:G,numSeries:fe.fields.length-1,isDiscrete:rt=>Me(fe.fields[rt]),hasMappedNull:rt=>ze(fe.fields[rt]),mergeValues:Te,rowHeight:te,colWidth:oe,showValue:le,alignValue:ue,theme:q,label:rt=>(0,n.Ct)(fe.fields[rt],fe),getFieldConfig:rt=>fe.fields[rt].config.custom,getValueColor:xe,getTimeRange:J,formatValue:(rt,Je)=>(0,r.cN)(fe.fields[rt].display(Je)),onHover:(rt,Je)=>{pe=rt,Ue=Je,be=!0},onLeave:()=>{pe=null,Ue=null,be=!0},hoverMulti:De};let be=!1,pe=null,Ue=null;const we=x(We);Fe.addHook("init",we.init),Fe.addHook("drawClear",we.drawClear);const je=(rt,Je,Ve)=>{be&&(pe!=null&&(rt(pe),Je(Ue)),be=!1),Ve(pe==null)};Fe.setTooltipInterpolator(je),Fe.setPrepData(rt=>(0,a.bq)(rt[0],(0,a.ro)(rt[0]))),Fe.setCursor(we.cursor),Fe.addScale({scaleKey:Ee,isTime:!0,orientation:E.Lt.Horizontal,direction:E.ON.Right,range:we.xRange}),Fe.addScale({scaleKey:b.s,isTime:!1,orientation:E.Lt.Vertical,direction:E.ON.Up,range:we.yRange}),Fe.addAxis({scaleKey:Ee,isTime:!0,splits:we.xSplits,placement:E.vM.Bottom,timeZone:Z[0],theme:q,grid:{show:!0}}),Fe.addAxis({scaleKey:b.s,isTime:!1,placement:E.vM.Left,splits:we.ySplits,values:we.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:q});let He=0;for(let rt=0;rt<fe.fields.length;rt++){if(rt===0)continue;const Je=fe.fields[rt],Ve=Je.config,Oe={...B,...Ve.custom};Je.state.seriesIndex=He++,Fe.addSeries({scaleKey:b.s,pathBuilder:we.drawPaths,pointsBuilder:we.drawPoints,lineWidth:Oe.lineWidth,fillOpacity:Oe.fillOpacity,theme:q,show:!Oe.hideFrom?.viz,thresholds:Ve.thresholds,dataFrameFieldIndex:Je.state?.origin})}if(ne&&ne()!==s.y.Off){let rt={};rt.sync={key:re,scales:[Ee,null]},Fe.setSync(),Fe.setCursor(rt)}return Fe};function K(fe){const q=new Map;for(let Z=0;Z<fe.fields.length;Z++)q.set(getFieldDisplayName(fe.fields[Z],fe),Z);return q}function N(fe){let q=fe[0],Z;for(let J=1;J<fe.length;J++){let G=fe[J];G===null?q=null:G===q?(Z||(Z=[...fe]),Z[J]=void 0):G!=null&&(q=G)}return Z}function L(fe){let q=fe.config.custom?.spanNulls;return q?q===!0?1/0:q:-1}function V(fe,q){const Z=fe.config.thresholds;if(fe.type!==o.PU.number||!Z||!Z.steps.length)return;const J=z(fe.config,q);if(J.length!==Z.steps.length)return;const G=new Map,ne=new Map;for(let le=0;le<J.length;le++)G.set(Z.steps[le],J[le].label),ne.set(J[le].label,J[le].color);let te=fe.values;const oe=new Array(fe.values.length);if(Z.mode===m.O.Percentage){const{min:le,max:ue}=(0,i.xg)(fe),Te=ue-le;te=te.map(he=>he==null?he:(he-le)/Te*100)}for(let le=0;le<oe.length;le++){const ue=te[le];ue==null?oe[le]=ue:oe[le]=G.get((0,l.yQ)(ue,Z.steps))}return{...fe,config:{...fe.config,custom:{...fe.config.custom,spanNulls:L(fe)}},type:o.PU.string,values:oe,display:le=>({text:String(le),color:ne.get(String(le)),numeric:NaN})}}function F(fe,q,Z,J){if(!fe?.length)return{warn:"No data in response"};(0,n.Fm)(fe);let G=!1;const ne=[];for(let te of fe){let oe=-1,le=-1;for(let De=0;De<te.fields.length;De++)if(te.fields[De].type===o.PU.time){if(oe===-1)oe=De;else if(le===-1){le=De;break}}let ue=oe!==-1,Te=!1;if(te=(0,d.Yj)(te,oe),le!==-1){let De={...te,fields:te.fields.filter((Ee,Me)=>Me!==le)},Fe={length:te.length,fields:[te.fields[le]]};te=(0,d.Fd)({frames:[De,Fe],keepDisplayNames:!0,nullMode:()=>d.WO}),te.fields.forEach((Ee,Me)=>{if(Me>0){let ze=Ee.values;for(let xe=0;xe<ze.length;xe++)ze[xe]==null&&(ze[xe]=null)}}),Te=!0}let he=(0,c.M)({frame:te,refFieldPseudoMin:Z.from.valueOf(),refFieldPseudoMax:Z.to.valueOf()});he!==te&&(Te=!0),te=(0,g.C)(he);const re=[];for(let De of te.fields)if(!De.config.custom?.hideFrom?.viz)switch(De.type){case o.PU.time:ue=!0,G=!0,re.push(De);break;case o.PU.enum:case o.PU.number:if(q&&De.config.color?.mode===t.Y.Thresholds){const Fe=V(De,J);if(Fe){re.push(Fe),Te=!0;continue}}case o.PU.boolean:case o.PU.string:De={...De,config:{...De.config,custom:{...De.config.custom,spanNulls:L(De)}}},Te=!0,re.push(De);break;default:Te=!0}ue&&re.length>1&&(G=!0,Te?ne.push({...te,fields:re}):ne.push(te))}return G?ne.length?{frames:ne}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function z(fe,q){const Z=[],J=fe.thresholds;if(!J||!J.steps.length)return Z;const G=J.steps,ne=(0,r.j_)(J.mode===m.O.Percentage?"percent":fe.unit??""),te=oe=>(0,r.cN)(ne(oe,fe.decimals??void 0));for(let oe=0;oe<G.length;oe++){let le=G[oe],ue=le.value,Te="",he="";ue===-1/0&&oe<G.length-1?(ue=G[oe+1].value,Te="< "):he="+",Z.push({label:`${Te}${te(ue)}${he}`,color:q.visualization.getColorByName(le.color),yAxis:1})}return Z}function Y(fe,q,Z){if(!(!fe||q.showLegend===!1))return H(k(fe),Z)}function H(fe,q){if(!fe.length)return;const Z=[],J=fe[0].config,G=J.color?.mode??t.Y.Fixed,ne=J.thresholds;if(G===t.Y.Thresholds&&ne?.steps&&ne.steps.length>1)return z(J,q);if(G.startsWith("continuous"))return;const te=new Map;return fe.forEach(oe=>{oe.config.custom?.hideFrom?.legend||oe.values.forEach(le=>{let ue=oe.display(le);ue.color&&te.set(ue.text,ue.color)})}),te.forEach((oe,le)=>{le.length>0&&Z.push({label:le,color:q.visualization.getColorByName(oe??t.F),yAxis:1})}),Z}function k(fe){const q=[];for(const Z of fe)for(const J of Z.fields)J.type!==o.PU.time&&q.push(J);return q}function ee(fe,q){let Z,J=q+1;if(J>=fe.values.length)return null;const G=fe.values[q];for(;Z===void 0;){if(J>=fe.values.length)return null;const ne=fe.values[J];ne===void 0||ne===G?J++:Z=J}return Z}function ie(fe){if(fe<0||Number.isNaN(fe))return"";let q,Z,J,G,ne,te,oe,le;return oe=Math.floor(fe/1e3),te=Math.floor(oe/60),oe=oe%60,ne=Math.floor(te/60),te=te%60,G=Math.floor(ne/24),ne=ne%24,q=Math.floor(G/365),q>0&&(G=G%365),Z=Math.floor(G/30),Z>0&&(G=G%30),J=Math.floor(G/7),J>0&&(G=G%7),le=Math.round(fe%1e3*1e3)/1e3,(q>0?q+"y "+(Z>0?Z+"mo ":"")+(J>0?J+"w ":"")+(G>0?G+"d ":""):Z>0?Z+"mo "+(J>0?J+"w ":"")+(G>0?G+"d ":""):J>0?J+"w "+(G>0?G+"d ":""):G>0?G+"d "+(ne>0?ne+"h ":""):ne>0?ne+"h "+(te>0?te+"m ":""):te>0?te+"m "+(oe>0?oe+"s ":""):oe>0?oe+"s "+(le>0?le+"ms ":""):le>0?le+"ms ":"0").trim()}},76323:(Q,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(32196),n=e(96540),r=e(14110),s=e(40845);const o=({text:i="PRO",className:l,experimentId:d,eventVariant:c="",...g})=>{const u=(0,s.of)(m);return(0,n.useEffect)(()=>{d&&(0,r.Xp)(d,"test",c)},[d,c]),n.createElement("span",{className:(0,t.cx)(u.badge,l),...g},i)},m=i=>({badge:(0,t.css)`
      margin-left: ${i.spacing(1.25)};
      border-radius: ${i.shape.borderRadius(5)};
      background-color: ${i.colors.success.main};
      padding: ${i.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${i.typography.fontWeightMedium};
      font-size: ${i.typography.pxToRem(10)};
    `})},35043:(Q,I,e)=>{"use strict";e.d(I,{DP:()=>c,NQ:()=>d,zJ:()=>g});var t=e(32196),n=e(96540),r=e(90613),s=e(40845),o=e(14578),m=e(94753),i=e(2913),l=e(44836);const d=[{message:"At least 12 characters",validation:p=>p.length>=12},{message:"One uppercase letter",validation:p=>/[A-Z]+/.test(p)},{message:"One lowercase letter",validation:p=>/[a-z]+/.test(p)},{message:"One number",validation:p=>/[0-9]+/.test(p)},{message:"One symbol",validation:p=>/[\W]/.test(p)}],c=p=>!i.Ay.auth.basicAuthStrongPasswordPolicy||d.every(b=>b.validation(p))||(0,l.t)("profile.change-password.strong-password-validation-register","Password does not comply with the strong password policy"),g=({strongPasswordValidations:p,password:b,pristine:a})=>n.createElement(r.a,{marginBottom:2},p.map(h=>n.createElement(u,{key:h.message,strongPasswordValidation:h,password:b,pristine:a}))),u=({strongPasswordValidation:p,password:b,pristine:a})=>{const h=(0,s.of)(E),{basicAuthStrongPasswordPolicy:P}=i.Ay.auth;if(!P)return null;const{message:y,validation:C}=p,f=b.length>0&&C(b),D=f||a?"check":"exclamation-triangle",T=f?"secondary":a?"primary":"error";let M;return f?M=h.icon.valid:a?M=h.icon.pending:M=h.icon.error,n.createElement(r.a,{key:y,display:"flex",alignItems:"center",marginTop:1},n.createElement(o.I,{className:(0,t.cx)(h.icon.style,M),name:D}),n.createElement(m.E,{color:T},y))},E=p=>({icon:{style:(0,t.css)({marginRight:p.spacing(1)}),valid:(0,t.css)({color:p.colors.success.text}),pending:(0,t.css)({color:p.colors.secondary.text}),error:(0,t.css)({color:p.colors.error.text})}})},93522:(Q,I,e)=>{"use strict";e.d(I,{N:()=>c});var t=e(32196),n=e(96540),r=e(40845),s=e(37390),o=e(71259),m=e(94753),i=e(44836),l=e(63917);const d=p=>[{category:(0,i.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,i.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,i.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,i.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,i.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${p} + k`],description:(0,i.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,i.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:[`${p} + h`],description:(0,i.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,i.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,i.t)("help-modal.shortcuts-category.time-range","Time range"),shortcuts:[{keys:["t","z"],description:(0,i.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,i.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,i.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,i.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")},{keys:["t","c"],description:(0,i.t)("help-modal.shortcuts-description.copy-time-range","Copy time range")},{keys:["t","v"],description:(0,i.t)("help-modal.shortcuts-description.paste-time-range","Paste time range")}]},{category:(0,i.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${p} + s`],description:(0,i.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,i.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,i.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,i.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,i.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","\u21E7 + e"],description:(0,i.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","\u21E7 + c"],description:(0,i.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,i.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${p} + o`],description:(0,i.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,i.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,i.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,i.t)("help-modal.shortcuts-category.focused-panel","Focused panel"),shortcuts:[{keys:["e"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,i.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,i.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,i.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,i.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]}],c=({onDismiss:p})=>{const b=(0,r.of)(E),a=(0,n.useMemo)(()=>(0,l.gn)(),[]),h=(0,n.useMemo)(()=>d(a),[a]);return n.createElement(s.a,{title:(0,i.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:p,onClickBackdrop:p},n.createElement(o.x,{columns:{xs:1,sm:2},gap:3,tabIndex:0},Object.values(h).map(({category:P,shortcuts:y})=>n.createElement("section",{key:P},n.createElement("table",{className:b.table},n.createElement("caption",null,n.createElement(m.E,{element:"p",variant:"h5"},P)),n.createElement("thead",{className:"sr-only"},n.createElement("tr",null,n.createElement("th",null,"Keys"),n.createElement("th",null,"Description"))),n.createElement("tbody",null,y.map(({keys:C,description:f})=>n.createElement("tr",{key:C.join()},n.createElement("td",{className:b.keys},C.map(D=>n.createElement(g,{key:D},D))),n.createElement("td",null,n.createElement(m.E,{variant:"bodySmall",element:"p"},f))))))))))},g=({children:p})=>{const b=(0,r.of)(E),a=(0,n.useMemo)(()=>u(p),[p]),h=n.createElement("span",{dangerouslySetInnerHTML:{__html:a}});return n.createElement("kbd",{className:b.shortcutTableKey},n.createElement(m.E,{variant:"code"},h))};function u(p){let b,a;if(p.includes("ctrl"))b="ctrl",a="Control";else if(p.includes("esc"))b="esc",a="Escape";else return p;return p.replace(b,`<span class="sr-only">${a}</span><span aria-hidden="true" role="none">${b}</span>`)}function E(p){return{table:(0,t.css)({borderCollapse:"separate",borderSpacing:p.spacing(2),"& caption":{captionSide:"top"}}),keys:(0,t.css)({textAlign:"end",whiteSpace:"nowrap",minWidth:83}),shortcutTableKey:(0,t.css)({display:"inline-block",textAlign:"center",marginRight:p.spacing(.5),padding:"3px 5px",lineHeight:"10px",verticalAlign:"middle",border:`solid 1px ${p.colors.border.medium}`,borderRadius:p.shape.radius.default,color:p.colors.text.primary,backgroundColor:p.colors.background.secondary})}}},2913:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>s,_R:()=>m,config:()=>n.$,yn:()=>i,zj:()=>o});var t=e(43429),n=e(32264);let r=n.$;const s=r,o=()=>r,m=l=>{r={...r,...l}},i=n.$.panels?.debug?.state===t.pn.alpha},15054:(Q,I,e)=>{"use strict";e.d(I,{FG:()=>u,HG:()=>o,IZ:()=>c,MM:()=>p,Pz:()=>s,bJ:()=>i,cV:()=>r,cx:()=>l,dU:()=>n,o9:()=>m,sD:()=>t,tH:()=>d,wV:()=>E});const t=30,n=8,r=24,s="v",o="h",m=4,i=250,l=t*3,d="panel-copy",c=2,g=23763571993,u=40,E="VisualizationSelectPane.ListMode",p="WidgetSelectPane.ListMode"},76888:(Q,I,e)=>{"use strict";e.d(I,{Il:()=>s,YE:()=>r,ni:()=>o});var t=e(96540),n=e(12131);const r=t.createContext(void 0);function s(){const m=(0,t.useContext)(r);if(!m)throw new Error("No GrafanaContext found");return m}function o(){const{chrome:m}=s();return(0,t.useCallback)((i,l)=>{const{pathname:d,search:c}=n.Ny.getLocation();m.setReturnToPrevious({title:i,href:l??d+c})},[m])}},3169:(Q,I,e)=>{"use strict";e.d(I,{_2:()=>u,gi:()=>c,q8:()=>g,tZ:()=>d});var t=e(96540),n=e(62938),r=e(94954),s=e(31678),o=e(82467);const m={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},i={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},l={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},d=(E,p="",b)=>({...m,title:E,text:p,id:(0,n.A)(),timestamp:Date.now(),showing:!0}),c=(E,p="",b,a)=>({...l,text:(0,r.q)(p),title:E,id:(0,n.A)(),traceId:b,component:a,timestamp:Date.now(),showing:!0}),g=(E,p="",b)=>({...i,title:E,text:p,traceId:b,id:(0,n.A)(),timestamp:Date.now(),showing:!0});function u(){const E=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(p,b="")=>{E((0,o.dx)(d(p,b)))},warning:(p,b="",a)=>{E((0,o.dx)(g(p,b,a)))},error:(p,b="",a)=>{E((0,o.dx)(c(p,b,a)))}}),[E])}},10096:(Q,I,e)=>{"use strict";e.d(I,{Ef:()=>n.E,TP:()=>r.TP,lE:()=>t.A,rO:()=>s.r});var t=e(28138),n=e(18898),r=e(16233),s=e(31140)},53919:(Q,I,e)=>{"use strict";e.d(I,{$H:()=>a,Ay:()=>h});var t=e(2543),n=e(33390),r=e(38877),s=e(19347);const o=S=>{const v=(0,s.l)().getInstanceSettings(S.datasourceName);return{id:S.ts.toString(),createdAt:S.ts,datasourceName:S.datasourceName,datasourceUid:v?.uid||"",starred:S.starred,comment:S.comment,queries:S.queries}},m=S=>{if(!(0,s.l)().getInstanceSettings({uid:S.datasourceUid}))throw new Error("Datasource not found.");return{ts:S.createdAt,datasourceName:S.datasourceName,starred:S.starred,comment:S.comment,queries:S.queries}};var i=e(91650);function l(S,v,x,A,R){const B=g(S,x),U=u(B,A),w=R?c(U,R):U;return E(w,v)}const d=(S,v)=>{const x=new Date,A=new Date(x.setDate(x.getDate()-S));return v?A.setHours(24,0,0,0):A.setHours(0,0,0,0)};function c(S,v){const x=d(v[0],!0),A=d(v[1],!1);return S.filter(R=>R.createdAt<x&&R.createdAt>A)}function g(S,v){return v.length>0?S.filter(x=>v.includes(x.datasourceName)):S}function u(S,v){return S.filter(x=>x.comment.includes(v)?!0:x.queries.filter(R=>Object.values((0,t.omit)(R,["datasource","key","refId","hide","queryType"])).some(B=>B?.toString().includes(v))).length>0)}const E=(S,v)=>{let x;return v===i.x.Ascending&&(x=(A,R)=>A.createdAt<R.createdAt?-1:A.createdAt>R.createdAt?1:0),v===i.x.Descending&&(x=(A,R)=>A.createdAt<R.createdAt?1:A.createdAt>R.createdAt?-1:0),v===i.x.DatasourceZA&&(x=(A,R)=>A.datasourceName<R.datasourceName?-1:A.datasourceName>R.datasourceName?1:0),v===i.x.DatasourceAZ&&(x=(A,R)=>A.datasourceName<R.datasourceName?1:A.datasourceName>R.datasourceName?-1:0),S.sort(x)},p={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},b="grafana.explore.richHistory",a=1e4;class h{async getRichHistory(v){const x=f().map(o),A=v.starred?x.filter(U=>U.starred===!0):x,R=v.from&&v.to?[v.from,v.to]:void 0,B=l(A,v.sortOrder,v.datasourceFilters,v.search,R);return{richHistory:B,total:B.length}}async addToRichHistory(v){const x=Date.now(),A={id:x.toString(),createdAt:x,...v},R=m(A),B=y(f()),U=R.queries.map(V=>(0,t.omit)(V,["key","refId"])),w=B.length>0&&B[0].queries.map(V=>(0,t.omit)(V,["key","refId"]));if((0,t.isEqual)(U,w)){const V=new Error("Entry already exists");throw V.name=r.m.DuplicatedEntry,V}const{queriesToKeep:K,limitExceeded:N}=C(B),L=[R,...K];try{n.A.setObject(b,L)}catch(V){if(V instanceof Error&&V.name==="QuotaExceededError")O(r.m.StorageFull,`Saving rich history failed: ${V.message}`);else throw V}return N?{warning:{type:r.C.LimitExceeded,message:`Query history reached the limit of ${a}. Old, not-starred items have been removed.`},richHistoryQuery:A}:{richHistoryQuery:A}}async deleteAll(){n.A.delete(b)}async deleteRichHistory(v){const x=parseInt(v,10),R=n.A.getObject(b,[]).filter(B=>B.ts!==x);n.A.setObject(b,R)}async updateStarred(v,x){return P(v,A=>A.starred=x)}async updateComment(v,x){return P(v,A=>A.comment=x)}async getSettings(){return{activeDatasourceOnly:n.A.getObject(p.activeDatasourceOnly,!1),retentionPeriod:n.A.getObject(p.retentionPeriod,7),starredTabAsFirstTab:n.A.getBool(p.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.A.getObject(p.datasourceFilters,[]).map(v=>v.value)}}async updateSettings(v){n.A.set(p.activeDatasourceOnly,v.activeDatasourceOnly),n.A.set(p.retentionPeriod,v.retentionPeriod),n.A.set(p.starredTabAsFirstTab,v.starredTabAsFirstTab),n.A.setObject(p.datasourceFilters,(v.lastUsedDatasourceFilters||[]).map(x=>({value:x})))}}function P(S,v){const x=parseInt(S,10),A=n.A.getObject(b,[]),R=(0,t.find)(A,{ts:x});if(!R)throw new Error("Rich history item not found.");return v(R),n.A.setObject(b,A),o(R)}function y(S){const v=n.A.getObject(p.retentionPeriod,7),x=d(v,!1);return S.filter(A=>A.ts>x||A.starred===!0)||[]}function C(S){let v=!1,x=S.length-1;for(;x>=0&&S.length>=a;)S[x].starred||(S.splice(x,1),v=!0),x--;return{queriesToKeep:S,limitExceeded:v}}function f(){const S=n.A.getObject(b,[]);return D(S)}function D(S){return S.map(x=>{const A=x.queries.map((R,B)=>T(x,R,B));return{...x,queries:A}})}function T(S,v,x){const A="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof v=="object"?v:M(v)?JSON.parse(v):{expr:v,refId:A[x]}}function M(S){try{JSON.parse(S)}catch{return!1}return!0}function O(S,v){const x=new Error(v);throw x.name=S,x}},38877:(Q,I,e)=>{"use strict";e.d(I,{C:()=>n,m:()=>t});var t=(r=>(r.StorageFull="StorageFull",r.DuplicatedEntry="DuplicatedEntry",r))(t||{}),n=(r=>(r.LimitExceeded="LimitExceeded",r))(n||{})},11401:(Q,I,e)=>{"use strict";e.d(I,{tU:()=>a,a:()=>b,gQ:()=>h});var t=e(32264),n=e(10096),r=e(91650),s=e(53919),o=e(75505),m=e(17172),i=e(19347),l=e(65615);const d=P=>{const y=(0,i.l)().getInstanceSettings({uid:P.datasourceUid});return{id:P.uid,createdAt:P.createdAt*1e3,datasourceName:y?.name||"",datasourceUid:P.datasourceUid,starred:P.starred,comment:P.comment,queries:P.queries}},c=P=>({uid:P.id,createdAt:Math.floor(P.createdAt/1e3),datasourceUid:P.datasourceUid,starred:P.starred,comment:P.comment,queries:P.queries});class g{constructor(){this.preferenceService=new l.W("user")}async addToRichHistory(y){const{result:C}=await(0,m.AI)().post("/api/query-history",{dataSourceUid:y.datasourceUid,queries:y.queries});return{richHistoryQuery:d(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(y){(0,m.AI)().delete(`/api/query-history/${y}`)}async getRichHistory(y){const C=u(y);let f="query-history-get-all";y.starred&&(f="query-history-get-starred");const T=(await(0,o.s)((0,m.AI)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:f}))).data,M=(T.result.queryHistory||[]).map(d),O=T.result.totalCount||0;return{richHistory:M,total:O}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(y,C){const f=await(0,m.AI)().patch(`/api/query-history/${y}`,{comment:C});return d(f.result)}updateSettings(y){return this.preferenceService.patch({queryHistory:{homeTab:y.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(y,C){let f;return C?f=await(0,m.AI)().post(`/api/query-history/star/${y}`):f=await(0,m.AI)().delete(`/api/query-history/star/${y}`),d(f.result)}}function u(P){let y=`${P.datasourceFilters.map(C=>{const f=(0,i.l)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(f)}`}).join("&")}`;if(P.search&&(y=y+`&searchString=${P.search}`),P.sortOrder&&(y=y+`&sort=${P.sortOrder===r.x.Ascending?"time-asc":"time-desc"}`),!P.starred){const C=P.from===0?"now":`now-${P.from}d`,f=P.to===0?"now":`now-${P.to}d`;y=y+`&to=${C}`,y=y+`&from=${f}`}return y=y+"&limit=100",y=y+`&page=${P.page||1}`,P.starred&&(y=y+`&onlyStarred=${P.starred}`),y}const E=new s.Ay,p=new g,b=()=>t.$.queryHistoryEnabled?p:E,a=()=>E,h=()=>t.$.queryHistoryEnabled?{availableFilters:[r.x.Descending,r.x.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.TP.isSignedIn}:{availableFilters:[r.x.Descending,r.x.Ascending,r.x.DatasourceAZ,r.x.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},16021:(Q,I,e)=>{"use strict";e.d(I,{u:()=>n});var t=e(96540);function n(r,s){const[o,m]=(0,t.useState)();return(0,t.useEffect)(()=>{const i=r.subscribe(s,m);return()=>i.unsubscribe()},[r,s]),o}},60619:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>n});var t=e(96540);function n({breakpoint:r,onChange:s}){(0,t.useEffect)(()=>{const o=window.matchMedia(`(min-width: ${r}px)`),m=i=>s(i);return o.addEventListener("change",m),()=>o.removeEventListener("change",m)},[r,s])}},25249:(Q,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(31678),n=e(17422);const r=s=>{const o=(0,t.useSelector)(m=>m.navIndex);return(0,n.tc)(o,s)}},83277:(Q,I,e)=>{"use strict";e.d(I,{s:()=>s});var t=e(96540),n=e(58476),r=e(12131);function s(){const{search:o}=(0,n.zy)(),m=(0,t.useMemo)(()=>(0,r.SE)(o||""),[o]),i=(0,t.useCallback)((l,d)=>r.Ny.partial(l,d),[]);return[m,i]}},74513:(Q,I,e)=>{"use strict";e.d(I,{Nm:()=>l,Yj:()=>d,rd:()=>c,wi:()=>i});const t="en-US",n="fr-FR",r="es-ES",s="de-DE",o="pt-br",m="zh-Hans",i="pseudo-LOCALE",l=t,d=[{code:t,name:"English",loader:()=>e.e(9521).then(e.t.bind(e,19521,19))},{code:n,name:"Fran\xE7ais",loader:()=>e.e(5648).then(e.t.bind(e,35648,19))},{code:r,name:"Espa\xF1ol",loader:()=>e.e(680).then(e.t.bind(e,70680,19))},{code:s,name:"Deutsch",loader:()=>e.e(3082).then(e.t.bind(e,23082,19))},{code:m,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(9538).then(e.t.bind(e,29538,19))},{code:o,name:"Portugu\xEAs Brasileiro",loader:()=>e.e(2288).then(e.t.bind(e,12288,19))}],c=d.map(g=>g.code)},44836:(Q,I,e)=>{"use strict";e.d(I,{JL:()=>d,Xj:()=>p,t:()=>E,x6:()=>g});var t=e(72635),n=e(26226),r=e(96540),s=e(78552),o=e(52822),m=e(74513);const i=b=>b.split("-")[0].toLowerCase(),l={type:"backend",init(){},async read(b,a,h){let P=m.Yj.find(C=>C.code===b);if(P||(P=m.Yj.find(C=>i(C.code)===i(b))),!P)return h(new Error("No message loader available for "+b),null);const y=await P.loader();h(null,y)}};function d(b){const a={partialBundledLanguages:!0,resources:{},returnEmptyString:!1,supportedLngs:m.rd,fallbackLng:m.Nm};let h=t.default;if(b==="detect"){h=h.use(n.A);const y={order:["navigator"],caches:[]};a.detection=y}else a.lng=m.rd.includes(b)?b:void 0;return h.use(l).use(s.r9).init(a).then(()=>({language:h.resolvedLanguage}))}function c(b){const a=VALID_LANGUAGES.includes(b)?b:void 0;return i18n.changeLanguage(a)}const g=b=>r.createElement(o.x,{shouldUnescape:!0,...b}),u=t.default.t,E=(b,a,h)=>u(b,a,h),p=(b,a={})=>typeof b=="string"?p(new Date(b),a):new Intl.DateTimeFormat(t.default.language,a).format(b)},18898:(Q,I,e)=>{"use strict";e.d(I,{E:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},16001:(Q,I,e)=>{"use strict";e.d(I,{$K:()=>b,Do:()=>c,XC:()=>u,XR:()=>g,dx:()=>d,fX:()=>y,g5:()=>p,oF:()=>E,qN:()=>P});var t=e(30038),n=e(1081),r=e(31678);const s=25,o="notifications",m=`${o}/lastRead`,i={byId:T(),lastRead:Number.parseInt(window.localStorage.getItem(m)??`${Date.now()}`,10)},l=(0,t.Z0)({name:"appNotifications",initialState:i,reducers:{notifyApp:(O,{payload:S})=>{Object.values(O.byId).some(v=>C(S,v)&&v.showing)||(O.byId[S.id]=S,M(O.byId))},hideAppNotification:(O,{payload:S})=>{S in O.byId&&(O.byId[S].showing=!1,M(O.byId))},clearNotification:(O,{payload:S})=>{delete O.byId[S],M(O.byId)},clearAllNotifications:O=>{O.byId={},M(O.byId)},readAllNotifications:(O,{payload:S})=>{O.lastRead=S}}}),{notifyApp:d,hideAppNotification:c,clearNotification:g,clearAllNotifications:u,readAllNotifications:E}=l.actions,p=l.reducer,b=O=>O.lastRead,a=O=>O.byId,h=(0,n.Mz)(a,O=>Object.values(O).sort((S,v)=>v.timestamp-S.timestamp)),P=(0,n.Mz)(h,O=>O.filter(f)),y=(0,n.Mz)(a,O=>Object.values(O).filter(S=>S.showing));function C(O,S){return O.icon===S.icon&&O.severity===S.severity&&O.text===S.text&&O.title===S.title}function f(O){return O.severity===r.AppNotificationSeverity.Warning||O.severity===r.AppNotificationSeverity.Error}function D(O){return typeof O=="object"&&O!==null&&"id"in O&&"icon"in O&&"title"in O&&"text"in O}function T(){const O=window.localStorage.getItem(o);if(!O)return{};const S=JSON.parse(O);return Object.values(S).every(v=>D(v))?S:{}}function M(O){const S=Object.values(O).filter(f).sort((v,x)=>x.timestamp-v.timestamp).slice(0,s).reduce((v,x)=>(v[x.id]={id:x.id,severity:x.severity,icon:x.icon,title:x.title,text:x.text,traceId:x.traceId,timestamp:x.timestamp,showing:!1},v),{});try{window.localStorage.setItem(o,JSON.stringify(S))}catch(v){console.error("Unable to persist notifications to local storage"),console.error(v)}}},91219:(Q,I,e)=>{"use strict";e.d(I,{I_:()=>g,TU:()=>c,ci:()=>l,fc:()=>d});var t=e(30038),n=e(32264),r=e(36689);const s=n.$.bootData?.navTree??[];function o(u){return u.map(E=>{const p=E.children&&o(E.children);return{...E,children:p,text:(0,r.C)(E.id)??E.text,subTitle:(0,r.o)(E.id)??E.subTitle,emptyMessage:(0,r.C)(E.emptyMessageId)}})}const m="starred/",i=(0,t.Z0)({name:"navBarTree",initialState:()=>o(n.$.bootData?.navTree??[]),reducers:{setStarred:(u,E)=>{const p=u.find(y=>y.id==="starred"),{id:b,title:a,url:h,isStarred:P}=E.payload;if(p)if(P){p.children||(p.children=[]);const y={id:m+b,text:a,url:h};p.children.push(y),p.children.sort((C,f)=>C.text.localeCompare(f.text))}else{const y=p.children?.findIndex(C=>C.id===m+b)??-1;y>-1&&p?.children?.splice(y,1)}},updateDashboardName:(u,E)=>{const{id:p,title:b,url:a}=E.payload,h=u.find(P=>P.id==="starred");if(h){const P=h.children?.find(y=>y.id===p);P&&(P.text=b,P.url=a,h.children?.sort((y,C)=>y.text.localeCompare(C.text)))}},removePluginFromNavTree:(u,E)=>{const p="plugin-page-"+E.payload.pluginID,b=u.findIndex(a=>a.id===p);b>-1&&u.splice(b,1)}}}),{setStarred:l,removePluginFromNavTree:d,updateDashboardName:c}=i.actions,g=i.reducer},28215:(Q,I,e)=>{"use strict";e.d(I,{Id:()=>m,Vz:()=>g,YA:()=>u,_h:()=>p,s2:()=>i});var t=e(30038),n=e(2543),r=e.n(n),s=e(2913),o=e(36689);const m="home";function i(){const b={},a=(0,n.cloneDeep)(s.Ay.bootData.navTree),h=a.find(y=>y.id===m),P=a.filter(y=>y.id!==m);return h&&l(b,[h]),l(b,P,b[m]),b}function l(b,a,h){const P=[];for(const y of a){const C={...y,text:(0,o.C)(y.id)??y.text,subTitle:(0,o.o)(y.id)??y.subTitle,emptyMessage:(0,o.C)(y.emptyMessageId),parentItem:h};C.id&&(b[C.id]=C),C.children&&l(b,C.children,C),P.push(C)}h&&(h.children=P),b["not-found"]={...d("Page not found","404 Error").node},b.error={...d("Page error","An unexpected error").node}}function d(b,a){const h={text:b,subTitle:a,icon:"exclamation-triangle"};return{node:h,main:h}}const c={},g=(0,t.VP)("navIndex/updateNavIndex"),u=(0,t.VP)("navIndex/updateConfigurationSubtitle"),E=(b,a)=>({...b,parentItem:{...b.parentItem,text:b.parentItem?.text??"",subTitle:a}}),p=(b=c,a)=>{if(g.match(a)){let P=function(f){if(f.children)for(const D of f.children)y[D.id]={...D,parentItem:f};f.parentItem&&P(f.parentItem)};var h=P;const y={},C=a.payload;return P(C),{...b,...y}}else if(u.match(a)){const P=`Organization: ${a.payload}`;return{...b,cfg:{...b.cfg,subTitle:P},datasources:E(b.datasources,P),correlations:E(b.correlations,P),users:E(b.users,P),teams:E(b.teams,P),plugins:E(b.plugins,P),"org-settings":E(b["org-settings"],P),apikeys:E(b.apikeys,P)}}return b}},17422:(Q,I,e)=>{"use strict";e.d(I,{rH:()=>m,tc:()=>o});var t=e(41811),n=e(71101),r=e(28215);const s=()=>{const d={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:d,main:d}},o=(0,t.A)((d,c,g,u=!1)=>{if(d[c]){const E=d[c],p=u?E:m(E),b=i(p,c);return{node:E,main:b}}return g||s()});function m(d){return d.id===n.Rj?d:d.parentItem&&d.parentItem.id!==r.Id?m(d.parentItem):d}function i(d,c){return d.id===c?{...d,active:!0}:d.children&&d.children.length>0?{...d,children:d.children.map(g=>i(g,c))}:d}const l=d=>`${d.main.text}${d.node.text?": "+d.node.text:""}`},65615:(Q,I,e)=>{"use strict";e.d(I,{W:()=>n});var t=e(27677);class n{constructor(s){this.resourceUri=s}update(s){return t.IB.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.IB.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.IB.get(`/api/${this.resourceUri}/preferences`)}}},2619:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(96540),n=e(13752),r=e(69731);class s{constructor(i){this._subject=new n.B,this._state=i}useState(){return o(this)}get state(){return this._state}setState(i){this._state={...this._state,...i},this._subject.next(this._state)}subscribeToState(i){return this._subject.subscribe(i)}}function o(m){const i=(0,r.C)();return(0,t.useEffect)(()=>{const l=m.subscribeToState({next:i});return()=>l.unsubscribe()},[m,i]),m.state}},27677:(Q,I,e)=>{"use strict";e.d(I,{Mf:()=>ze,IB:()=>xe,AI:()=>We});var t=e(56568),n=e(13752),r=e(75505),s=e(88483),o=e(64423),m=e(13288),i=e(65474),l=e(20039),d=e(81160),c=e(69862),g=e(59099),u=e(37748),E=e(66847),p=e(67791),b=e(16126),a=e(41560),h=e(69850),P=e(1005),y=e(62938),C=e(26272),f=e(40187),D=e(32264),T=e(28138),M=e(2913),O=e(92315),S=e(67027),v=e(32196),x=e(96540),A=e(40845),R=e(17464),B=e(37166),U=e(55852),w=e(88448);const K=be=>{const pe=(0,A.of)(N),Ue=(0,A.$j)(),we=(0,w.o)(Ue),je=!!be.maxConcurrentSessions,He=()=>{window.location.reload()};return x.createElement(R.ZL,null,x.createElement("div",{className:we.modal},x.createElement(B.w,{title:"You have been automatically signed out",severity:"warning",className:pe.infobox},x.createElement("div",{className:pe.text},x.createElement("p",null,"Your session token was automatically revoked because you have reached",x.createElement("strong",null,` the maximum number of ${je?be.maxConcurrentSessions:""} concurrent sessions `),"for your account."),x.createElement("p",null,x.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),x.createElement(U.$n,{size:"md",variant:"primary",onClick:He},"Sign in"))),x.createElement("div",{className:(0,v.cx)(we.modalBackdrop,pe.backdrop)}))},N=be=>({infobox:(0,v.css)`
    margin-bottom: 0;
  `,text:(0,v.css)`
    margin: ${be.spacing(1,0,2)};
  `,backdrop:(0,v.css)`
    background-color: ${be.colors.background.canvas};
    opacity: 0.8;
  `});var L=e(28444),V=e(2543),F=e(95344);const z=be=>{const pe=be.method,Ue=q(be),we=Z(Ue),je=J(be,we),He=oe(be);return{method:pe,headers:Ue,body:je,credentials:He}},Y={canParse:()=>!0,parse:be=>(be.get("accept")||be.set("accept","application/json, text/plain, */*"),be)},H=be=>({canParse:pe=>(pe?.method?pe?.method.toLowerCase():"")===be,parse:pe=>(pe.get("content-type")||pe.set("content-type","application/json"),pe)}),k=H("post"),ee=H("put"),ie=H("patch"),fe=[k,ee,ie,Y],q=be=>{const pe=be?.headers?new Headers(be.headers):new Headers;return fe.filter(je=>je.canParse(be)).reduce((je,He)=>He.parse(je),pe)},Z=be=>{if(!be)return!1;const pe=be.get("content-type");return!!(pe&&pe.toLowerCase()==="application/json")},J=(be,pe)=>be&&(!be.data||typeof be.data=="string"||be.data instanceof Blob?be.data:pe?JSON.stringify(be.data):new URLSearchParams(be.data));async function G(be,pe){if(pe)switch(pe){case"arraybuffer":return be.arrayBuffer();case"blob":return be.blob();case"json":return be.headers.get("Content-Length")==="0"?(console.warn(`${be.url} returned an invalid JSON`),{}):await be.json();case"text":return be.text()}const Ue=await be.text();try{return JSON.parse(Ue)}catch{}return Ue}function ne(be){return Object.keys(be).map(pe=>{const Ue=be[pe];return Array.isArray(Ue)?Ue.map(we=>`${encodeURIComponent(pe)}=${encodeURIComponent(we)}`).join("&"):`${encodeURIComponent(pe)}=${encodeURIComponent(Ue)}`}).join("&")}const te=be=>{const pe=(0,V.omitBy)(be.params,we=>we===void 0||we&&we.length===0),Ue=ne(pe);return be.params&&Ue.length?`${be.url}?${Ue}`:be.url},oe=be=>be&&(be.credentials?be.credentials:be.withCredentials?((0,F.l)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var le=e(21969),ue=(be=>(be[be.Pending=0]="Pending",be[be.InProgress=1]="InProgress",be[be.Done=2]="Done",be))(ue||{});class Te{constructor(pe=!1){this.state={},this.queue=new n.B,this.updates=new n.B,this.add=(Ue,we)=>this.queue.next({id:Ue,options:we,state:0}),this.setInProgress=Ue=>this.queue.next({id:Ue,state:1}),this.setDone=Ue=>this.queue.next({id:Ue,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Ue=>{const we=Object.keys(Ue).filter(He=>Ue[He].state===1).length;return{noOfPending:Object.keys(Ue).filter(He=>Ue[He].state===0).length,noOfInProgress:we,state:Ue}},this.publishUpdate=(Ue,we)=>{this.printState(Ue,we),this.updates.next(Ue)},this.printState=(Ue,we)=>{if(!we)return;const je=Object.keys(Ue.state).reduce((He,rt)=>{const Je={id:rt,state:Ue.state[rt].state};return He.push(Je),He},[]);console.log("FetchQueue noOfStarted",Ue.noOfInProgress),console.log("FetchQueue noOfNotStarted",Ue.noOfPending),console.log("FetchQueue state",je)},this.queue.subscribe(Ue=>{const{id:we,state:je,options:He}=Ue;if(this.state[we]||(this.state[we]={state:0,options:{url:""}}),je===2){delete this.state[we];const Je=this.getUpdate(this.state);this.publishUpdate(Je,pe);return}this.state[we].state=je,He&&(this.state[we].options=He);const rt=this.getUpdate(this.state);this.publishUpdate(rt,pe)})}}var he=e(95864);class re{constructor(pe,Ue,we){const je=we?.http2Enabled?1e3:5;pe.getUpdates().pipe((0,b.p)(({noOfPending:He})=>He>0),(0,he.H)(({state:He,noOfInProgress:rt})=>{const Je=Object.keys(He).filter(ye=>He[ye].state===ue.Pending&&!(0,le.dr)(He[ye].options.url)).reduce((ye,se)=>{const ae={id:se,options:He[se].options};return ye.push(ae),ye},[]),Ve=Object.keys(He).filter(ye=>He[ye].state===ue.Pending&&(0,le.dr)(He[ye].options.url)).reduce((ye,se)=>{const ae={id:se,options:He[se].options};return ye.push(ae),ye},[]),Oe=Math.max(je-rt-Je.length,0),Ne=Ve.slice(0,Oe);return Je.concat(Ne)})).subscribe(({id:He,options:rt})=>{Ue.add(He,rt)})}}class De{constructor(pe,Ue){this.queue=new n.B,this.responses=new n.B,this.add=(we,je)=>{this.queue.next({id:we,options:je})},this.getResponses=we=>this.responses.asObservable().pipe((0,b.p)(je=>je.id===we)),this.queue.subscribe(we=>{const{id:je,options:He}=we;pe.setInProgress(je),this.responses.next({id:je,observable:Ue(He)})})}}var Fe=e(16233);const Ee="cancel_all_requests_request_id",Me="grafana-trace-id";class ze{constructor(pe){this.inFlightRequests=new n.B,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new n.B,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:l.$,appEvents:T.A,contextSrv:Fe.TP,logout:()=>{Fe.TP.setLoggedOut()}},pe&&(this.dependencies={...this.dependencies,...pe}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Te,this.responseQueue=new De(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new re(this.fetchQueue,this.responseQueue,(0,M.zj)())}async initGrafanaDeviceID(){try{const Ue=await(await t.Ay.load()).get();this.deviceID=Ue.visitorId}catch(pe){console.error(pe)}}async request(pe){return await(0,r.s)(this.fetch(pe).pipe((0,d.T)(Ue=>Ue.data)))}fetch(pe){const Ue=(0,y.A)(),we=this.fetchQueue;return new s.c(je=>{const He=new o.yU;return He.add(this.responseQueue.getResponses(Ue).subscribe(rt=>{He.add(rt.observable.subscribe(je))})),this.fetchQueue.add(Ue,pe),function(){we.setDone(Ue),He.unsubscribe()}})}internalFetch(pe){pe.requestId&&this.inFlightRequests.next(pe.requestId),pe=this.parseRequestOptions(pe);const Ue=(0,S.r)();return Ue!==null&&Ue!==""&&D.$.jwtUrlLogin&&D.$.jwtHeaderName&&(pe.headers=pe.headers??{},pe.headers[D.$.jwtHeaderName]=`${Ue}`),this.deviceID&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(pe).pipe(this.handleStreamResponse(pe),this.handleStreamError(pe),this.handleStreamCancellation(pe))}resolveCancelerIfExists(pe){this.inFlightRequests.next(pe)}cancelAllInFlightRequests(){this.inFlightRequests.next(Ee)}async datasourceRequest(pe){return(0,r.s)(this.fetch(pe))}parseRequestOptions(pe){const Ue=this.dependencies.contextSrv.user?.orgId;return pe.retry=pe.retry??0,(0,le.Lr)(pe.url)&&(Ue&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-Org-Id"]=Ue),pe.url.startsWith("/")&&(pe.url=pe.url.substring(1)),pe.headers?.Authorization&&(pe.headers["X-DS-Authorization"]=pe.headers.Authorization,delete pe.headers.Authorization),this.noBackendCache&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-NoCache"]="true")),pe.hideFromInspector===void 0&&(pe.hideFromInspector=(0,le.Lr)(pe.url)&&!(0,le.dr)(pe.url)),pe}getFromFetchStream(pe){const Ue=te(pe),we=z(pe);return this.dependencies.fromFetch(Ue,we).pipe((0,c.Z)(async je=>{const{status:He,statusText:rt,ok:Je,headers:Ve,url:Oe,type:Ne,redirected:ye}=je,se=pe.responseType??(Z(Ve)?"json":void 0),ae=await G(je,se);return{status:He,statusText:rt,ok:Je,data:ae,headers:Ve,url:Oe,type:Ne,redirected:ye,config:pe,traceId:je.headers.get(Me)??void 0}}))}showApplicationErrorAlert(pe){}showSuccessAlert(pe){const{config:Ue}=pe;if(Ue.showSuccessAlert===!1||Ue.showSuccessAlert===void 0&&(Ue.method==="GET"||(0,le.dr)(Ue.url)||!(0,le.Lr)(Ue.url)))return;const we=pe.data;we?.message&&this.dependencies.appEvents.emit(C.r1.alertSuccess,[we.message])}showErrorAlert(pe,Ue){if(pe.showErrorAlert===!1||pe.showErrorAlert===void 0&&((0,le.dr)(pe.url)||!(0,le.Lr)(pe.url)))return;let we="",je=Ue.data.message;je==="Unexpected error"&&Ue.message&&(je=Ue.message),je.length>80&&(we=je,je="Error"),Ue.status===422&&(we=Ue.data.message,je="Validation failed"),this.dependencies.appEvents.emit(Ue.status<500?C.r1.alertWarning:C.r1.alertError,[je,we,Ue.data.traceID])}processRequestError(pe,Ue){return Ue.data=Ue.data??{message:"Unexpected error"},typeof Ue.data=="string"&&(Ue.data={message:Ue.data,error:Ue.statusText,response:Ue.data}),Ue.data&&!Ue.data.message&&typeof Ue.data.error=="string"&&(Ue.data.message=Ue.data.error),Ue.data.message&&setTimeout(()=>{Ue.isHandled||this.showErrorAlert(pe,Ue)},50),this.inspectorStream.next({response:Ue,requestId:pe.requestId}),Ue}handleStreamResponse(pe){return Ue=>Ue.pipe((0,d.T)(we=>{if(!we.ok){const{status:je,statusText:He,data:rt}=we;throw{status:je,statusText:He,data:rt,config:pe,traceId:we.headers.get(Me)??void 0}}return we}),(0,g.M)(we=>{this.showSuccessAlert(we),this.inspectorStream.next({response:we,requestId:pe.requestId})}))}handleStreamError(pe){const{isSignedIn:Ue}=this.dependencies.contextSrv.user;return we=>we.pipe((0,u.l)(je=>je.pipe((0,c.Z)((He,rt)=>{const Je=rt===0&&pe.retry===0;if(He.status===401&&(0,le.Lr)(pe.url)&&Je&&Ue){if(He.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new L.S8({component:K,props:{maxConcurrentSessions:He.data?.error?.maxConcurrentSessions}})),(0,m.$)(()=>He);let Ve=this.loginPing();return(0,O.m)()&&(0,O.W)()*1e3<Date.now()&&(Ve=this.rotateToken()),(0,i.H)(Ve).pipe((0,E.W)(Oe=>(Oe.status===401&&this.dependencies.logout(),(0,m.$)(Oe))))}return(0,m.$)(He)}))),(0,E.W)(je=>(0,m.$)(()=>this.processRequestError(pe,je))))}handleStreamCancellation(pe){return Ue=>Ue.pipe((0,p.Q)(this.inFlightRequests.pipe((0,b.p)(we=>{let je=!1;return pe&&pe.requestId&&pe.requestId===we&&(je=!0),we===Ee&&(je=!0),je}))),(0,a.v)(()=>({type:f.v2.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:pe})))}getInspectorStream(){return this.inspectorStream}async get(pe,Ue,we,je){return this.request({...je,method:"GET",url:pe,params:Ue,requestId:we})}async delete(pe,Ue,we){return this.request({...we,method:"DELETE",url:pe,data:Ue})}async post(pe,Ue,we){return this.request({...we,method:"POST",url:pe,data:Ue})}async patch(pe,Ue,we){return this.request({...we,method:"PATCH",url:pe,data:Ue})}async put(pe,Ue,we){return this.request({...we,method:"PUT",url:pe,data:Ue})}withNoBackendCache(pe){return this.noBackendCache=!0,pe().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,h.j)(()=>{this._tokenRotationInProgress=null}),(0,P.u)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(pe){return this.get("/api/search",pe)}getDashboardByUid(pe){return this.get(`/api/dashboards/uid/${pe}`)}validateDashboard(pe){return Promise.resolve({isValid:!1,message:"dashboard validation is supported"})}getPublicDashboardByUid(pe){return this.get(`/api/public/dashboards/${pe}`)}getFolderByUid(pe,Ue={}){const we=new URLSearchParams;return Ue.withAccessControl&&we.set("accesscontrol","true"),this.get(`/api/folders/${pe}?${we.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const xe=new ze,We=()=>xe},16233:(Q,I,e)=>{"use strict";e.d(I,{SM:()=>d,TP:()=>u});var t=e(2543),n=e.n(t),r=e(65879),s=e(17172),o=e(33378),m=e(92315),i=e(31678),l=e(2913);const d="auto";class c{constructor(){this.id=0,this.uid="",this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",l.Ay.bootData.user&&(0,t.extend)(this,l.Ay.bootData.user)}}class g{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,l.Ay.bootData||(l.Ay.bootData={user:{},settings:{},navTree:[]}),this.user=new c,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=l.Ay.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,s.AI)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(b){console.error(b)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(b){return b==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===b}licensedAccessControlEnabled(){return(0,o.a)("accesscontrol")}hasPermissionInMetadata(b,a){return!!a.accessControl?.[b]}hasPermission(b){return!!this.user.permissions?.[b]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(b){return!l.Ay.minRefreshInterval||b===d?!0:r.intervalToMs(b)>=r.intervalToMs(l.Ay.minRefreshInterval)}getValidInterval(b){return this.isAllowedInterval(b)?b:l.Ay.minRefreshInterval}getValidIntervals(b){return this.minRefreshInterval?b.filter(a=>a!=="").filter(this.isAllowedInterval):b}hasAccessToExplore(){return this.hasPermission(i.AccessControlAction.DataSourcesExplore)&&l.Ay.exploreEnabled}evaluatePermission(b){return b.some(a=>this.hasPermission(a))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let b=(0,m.W)(),h=(b-Math.floor(Math.random()*19+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,m.W)()>b){this.scheduleTokenRotationJob();return}this.rotateToken().then()},h)}}canScheduleRotation(){return!(!this.isSignedIn||(0,m.W)()===0)}cancelTokenRotationJob(){this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(l.Ay.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(b=>{if(b.status===200){this.scheduleTokenRotationJob();return}if(b.status===401){this.setLoggedOut();return}}).catch(b=>{console.error(b)})}}let u=new g;const E=p=>{throw new Error("contextSrv can be only overridden in test environment")}},42614:(Q,I,e)=>{"use strict";e.d(I,{n:()=>n});var t=e(63415);const n=(s,o)=>{(0,t.x$)().addEvent({type:t.on.Performance,payload:{name:s,value:o}})},r=s=>faro?.api?.pushError(s)},62301:(Q,I,e)=>{"use strict";e.d(I,{A:()=>l});var t=e(2543),n=e.n(t),r=e(17172),s=e(2913),o=e(33390);class m{constructor(){}addDashboardImpression(c){const g=this.impressionKey();let u=[];o.A.exists(g)&&(u=JSON.parse(o.A.get(g)),(0,t.isArray)(u)||(u=[])),u=u.filter(E=>c!==E),u.unshift(c),u.length>50&&u.pop(),o.A.set(g,JSON.stringify(u))}async convertToUIDs(){let c=this.getImpressions();const g=(0,t.filter)(c,E=>(0,t.isNumber)(E));if(!g.length)return;const u=await(0,r.AI)().get(`/api/dashboards/ids/${g.join(",")}`);o.A.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(c,E=>(0,t.isString)(E)),...u]))}getImpressions(){const c=o.A.get(this.impressionKey())||"[]";return JSON.parse(c)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),g=>(0,t.isString)(g))}impressionKey(){return"dashboard_impressions-"+s.Ay.bootData.user.orgId}}const l=new m},2769:(Q,I,e)=>{"use strict";e.d(I,{K:()=>i,O:()=>l});var t=e(97594),n=e(3591),r=e(28138),s=e(2913),o=e(10096),m=e(65615);async function i(d,c){const g=s.config.theme2,u=(0,t.g)(d);if(r.A.publish(new n.E8(u)),g.colors.mode!==u.colors.mode){const b=document.createElement("link");b.rel="stylesheet",b.href=s.config.bootData.assets[u.colors.mode],b.onload=()=>{const a=document.getElementsByTagName("link");for(let h=0;h<a.length;h++){const P=a[h];P.href&&P.href.includes(`build/grafana.${g.colors.mode}`)&&P.remove()}},document.head.insertBefore(b,document.head.firstChild)}if(c||!o.TP.isSignedIn)return;const E=new m.W("user"),p=await E.load();await E.update({...p,theme:u.colors.mode})}async function l(d){const c=s.config.theme2;i(c.isDark?"light":"dark",d)}},33390:(Q,I,e)=>{"use strict";e.d(I,{A:()=>r});class t{get(o){return window.localStorage[o]}set(o,m){window.localStorage[o]=m}getBool(o,m){return m!==void 0&&!this.exists(o)?m:window.localStorage[o]==="true"}getObject(o,m){let i=m;if(this.exists(o)){const l=window.localStorage[o];try{i=JSON.parse(l)}catch(d){console.error(`Error parsing store object: ${o}. Returning default: ${m}. [${d}]`)}}return i}setObject(o,m){let i;try{i=JSON.stringify(m)}catch(l){throw new Error(`Could not stringify object: ${o}. [${l}]`)}try{this.set(o,i)}catch(l){const d=new Error(`Could not save item in localStorage: ${o}. [${l}]`);throw l instanceof Error&&(d.name=l.name),d}return!0}exists(o){return window.localStorage[o]!==void 0}delete(o){window.localStorage.removeItem(o)}}const r=new t},31140:(Q,I,e)=>{"use strict";e.d(I,{A:()=>d,r:()=>l});var t=e(2543),n=e.n(t),r=e(54479),s=e(83195);function o(c,g){if(!c)return!1;if(c[0]==="/"){const u=(0,r.dO)(c);return g.match(u)!=null}return c===g}function m(c){return c===0?.001:c/10}function i(c){return c?{colors:[{opacity:0},{opacity:c/10}]}:null}function l(c,g,u){for(let E=0;E<c.length;E++){const p=c[E],b=g.yaxes,a=p.yaxis||1,h=b[a-1],P=(0,s.j_)(h.format);(0,t.isNumber)(g.decimals)?p.updateLegendValues(P,g.decimals):(0,t.isNumber)(h.decimals)?p.updateLegendValues(P,h.decimals+1):p.updateLegendValues(P,null)}}class d{constructor(g){this.datapoints=g.datapoints,this.label=g.alias,this.id=g.alias,this.alias=g.alias,this.aliasEscaped=(0,t.escape)(g.alias),this.color=g.color,this.bars={fillColor:g.color},this.valueFormater=(0,s.j_)("none"),this.stats={},this.legend=!0,this.unit=g.unit,this.dataFrameIndex=g.dataFrameIndex,this.fieldIndex=g.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(g){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let u=0;u<g.length;u++){const E=g[u];o(E.alias,this.alias)&&(E.lines!==void 0&&(this.lines.show=E.lines),E.dashes!==void 0&&(this.dashes.show=E.dashes,this.lines.lineWidth=0),E.points!==void 0&&(this.points.show=E.points),E.bars!==void 0&&(this.bars.show=E.bars),E.fill!==void 0&&(this.lines.fill=m(E.fill)),E.fillGradient!==void 0&&(this.lines.fillColor=i(E.fillGradient)),E.stack!==void 0&&(this.stack=E.stack),E.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:E.linewidth,this.dashes.lineWidth=E.linewidth),E.dashLength!==void 0&&(this.dashes.dashLength[0]=E.dashLength),E.spaceLength!==void 0&&(this.dashes.dashLength[1]=E.spaceLength),E.nullPointMode!==void 0&&(this.nullPointMode=E.nullPointMode),E.pointradius!==void 0&&(this.points.radius=E.pointradius),E.steppedLine!==void 0&&(this.lines.steps=E.steppedLine),E.zindex!==void 0&&(this.zindex=E.zindex),E.fillBelowTo!==void 0&&(this.fillBelowTo=E.fillBelowTo),E.color!==void 0&&this.setColor(E.color),E.transform!==void 0&&(this.transform=E.transform),E.legend!==void 0&&(this.legend=E.legend),E.hideTooltip!==void 0&&(this.hideTooltip=E.hideTooltip),E.yaxis!==void 0&&(this.yaxis=E.yaxis),E.hiddenSeries!==void 0&&(this.hiddenSeries=E.hiddenSeries))}}getFlotPairs(g){const u=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const E=g==="connected",p=g==="null as zero";let b,a,h=0,P,y=0,C=!0;for(let f=0;f<this.datapoints.length;f++){if(a=this.datapoints[f][0],b=this.datapoints[f][1],P!==void 0){const D=b-P;D<this.stats.timeStep&&(this.stats.timeStep=D)}if(P=b,a===null){if(E)continue;p&&(a=0)}a!==null&&((0,t.isNumber)(a)&&(this.stats.total+=a,this.allIsNull=!1,h++),a>this.stats.max&&(this.stats.max=a),a<this.stats.min&&(this.stats.min=a),this.stats.first===null?this.stats.first=a:y>a?(C=!1,f===this.datapoints.length-1&&(this.stats.delta+=a)):(C?this.stats.delta+=a-y:this.stats.delta+=a,C=!0),y=a,a<this.stats.logmin&&a>0&&(this.stats.logmin=a),a!==0&&(this.allIsZero=!1)),u.push([b,a])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),u.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/h,this.stats.current=u[u.length-1][1],this.stats.current===null&&u.length>1&&(this.stats.current=u[u.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=u.length,u}updateLegendValues(g,u){this.valueFormater=g,this.decimals=u}formatValue(g){return(0,t.isFinite)(g)||(g=null),(0,s.cN)(this.valueFormater(g,this.decimals))}isMsResolutionNeeded(){for(let g=0;g<this.datapoints.length;g++)if(this.datapoints[g][1]!==null&&this.datapoints[g][1]!==void 0){const u=this.datapoints[g][1].toString();if(u.length===13&&u%1e3!==0)return!0}return!1}hideFromLegend(g){return!!(g.hideEmpty&&this.allIsNull||!this.legend||g.hideZero&&this.allIsZero)}setColor(g){this.color=g,this.bars.fillColor=g}}},6262:(Q,I,e)=>{"use strict";e.d(I,{G:()=>s});var t=e(40672),n=e(32264);const r=n.$.bootData.settings.cspReportOnlyEnabled,s={createHTML:(o,m,i)=>r?(console.error("[HTML not sanitized with Trusted Types]",o,m,i),o):o.replace(/<script/gi,"&lt;script"),createScript:o=>o,createScriptURL:(o,m,i)=>r?(console.error("[ScriptURL not sanitized with Trusted Types]",o,m,i),o):t.sQ.sanitizeUrl(o)};n.$.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",s)},96378:(Q,I,e)=>{"use strict";e.d(I,{N:()=>l,e:()=>d});var t=e(96540),n=e(70255),r=e(60578),s=e(3591),o=e(32264),m=e(10096),i=e(34295);const l=({children:c,value:g})=>{const[u,E]=(0,t.useState)(g);return(0,t.useEffect)(()=>{const p=m.lE.subscribe(s.E8,b=>{o.$.theme2=b.payload,E(b.payload)});return()=>p.unsubscribe()},[]),t.createElement(r.D.Provider,{value:u},t.createElement(n.z,{baseColor:u.colors.emphasize(u.colors.background.secondary),highlightColor:u.colors.emphasize(u.colors.background.secondary,.1),borderRadius:u.shape.radius.default},c))},d=(c,g)=>function(E){return t.createElement(l,{value:g},t.createElement(c,{...E}))}},67278:(Q,I,e)=>{"use strict";e.d(I,{c:()=>t});class t extends window.Worker{constructor(r,s){const o=r.toString(),m=o.split("/");m.pop();const i=`${m.join("/")}/`,l=`importScripts('${o}');`,d=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${i}'; ${l}`],{type:"application/javascript"}));super(d,s),URL.revokeObjectURL(d)}}},80714:(Q,I,e)=>{"use strict";e.d(I,{F:()=>t});function t(n={}){return{...n,accesscontrol:!0}}},94041:(Q,I,e)=>{"use strict";e.d(I,{b:()=>t});const t=(n,r,s)=>(n.splice(s,0,n.splice(r,1)[0]),n)},92315:(Q,I,e)=>{"use strict";e.d(I,{W:()=>t,m:()=>n});function t(){const r=document.cookie.split("; ").find(o=>o.startsWith("grafana_session_expiry="));if(!r)return 0;let s=r.split("=").at(1);return s?parseInt(s,10):0}function n(){return document.cookie.split("; ").findIndex(r=>r.startsWith("grafana_session_expiry="))>-1}},63917:(Q,I,e)=>{"use strict";e.d(I,{gn:()=>r});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),l=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||o&&(l&&parseFloat(l[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||m&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(i&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function r(){return n()?"\u2318":"ctrl"}},34525:(Q,I,e)=>{"use strict";e.d(I,{TS:()=>r});class t{_linkTo(i,l){l<=0&&i.inputEdges.push(this),l>=0&&i.outputEdges.push(this),i.edges.push(this)}link(i,l){if(!i)throw Error("inputNode is required");if(!l)throw Error("outputNode is required");return this.unlink(),this.inputNode=i,this.outputNode=l,this._linkTo(i,1),this._linkTo(l,-1),this}unlink(){let i;const l=this.inputNode,d=this.outputNode;l&&d&&(i=l.edges.indexOf(this),i>-1&&l.edges.splice(i,1),i=d.edges.indexOf(this),i>-1&&d.edges.splice(i,1),i=l.outputEdges.indexOf(this),i>-1&&l.outputEdges.splice(i,1),i=d.inputEdges.indexOf(this),i>-1&&d.inputEdges.splice(i,1))}}class n{constructor(i){this.name=i,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(i){return i?typeof i=="object"?this.inputEdges.find(l=>l.inputNode?.name===i.name):this.inputEdges.find(l=>l.inputNode?.name===i):null}getEdgeTo(i){return i?typeof i=="object"?this.outputEdges.find(l=>l.outputNode?.name===i.name):this.outputEdges.find(l=>l.outputNode?.name===i):null}getOptimizedInputEdges(){const i=[];return this.inputEdges.forEach(l=>{l.inputNode?.inputEdges.map(c=>c.inputNode)?.forEach(c=>{const g=c?.getEdgeTo(this.name);g&&i.push(g)})}),this.inputEdges.filter(l=>i.indexOf(l)===-1)}}class r{constructor(){this.nodes={}}createNode(i){const l=new n(i);return this.nodes[i]=l,l}createNodes(i){const l=[];return i.forEach(d=>{l.push(this.createNode(d))}),l}link(i,l){let d=[],c=[];const g=[],u=[];i instanceof Array?d=i:d=[i],l instanceof Array?c=l:c=[l];for(let p=0;p<d.length;p++){const b=d[p];if(typeof b=="string"){const a=this.getNode(b);if(!a)throw Error(`cannot link input node named ${b} since it doesn't exist in graph`);g.push(a)}else g.push(b)}for(let p=0;p<c.length;p++){const b=c[p];if(typeof b=="string"){const a=this.getNode(b);if(!a)throw Error(`cannot link output node named ${b} since it doesn't exist in graph`);u.push(a)}else u.push(b)}const E=[];return g.forEach(p=>{u.forEach(b=>{E.push(this.createEdge().link(p,b))})}),E}descendants(i){if(!i.length)return new Set;const l=new Set(o(i)?i.map(d=>this.nodes[d]).filter(d=>d!==void 0):i);return this.descendantsRecursive(l)}descendantsRecursive(i,l=new Set){for(const d of i){const c=new Set;for(const{inputNode:g}of d.inputEdges)g&&!l.has(g)&&(l.add(g),c.add(g));this.descendantsRecursive(c,l)}return l}createEdge(){return new t}getNode(i){return this.nodes[i]}}const s=m=>{Object.keys(m.nodes).forEach(i=>{const l=m.nodes[i];let d=l.outputEdges.map(g=>g.outputNode?.name).join(", ");d||(d="<none>");let c=l.inputEdges.map(g=>g.inputNode?.name).join(", ");c||(c="<none>"),console.log(`${l.name}:
 - links to:   ${d}
 - links from: ${c}`)})};function o(m){return m.length>0&&typeof m[0]=="string"}},94954:(Q,I,e)=>{"use strict";e.d(I,{q:()=>n});var t=e(17172);function n(r){if(typeof r=="string")return r;if(r){if(r instanceof Error)return r.message;if((0,t.NF)(r)){if(r.data&&r.data.message)return r.data.message;if(r.statusText)return r.statusText}}return JSON.stringify(r)}},87490:(Q,I,e)=>{"use strict";e.d(I,{HQ:()=>P,Ll:()=>v,MA:()=>O,WP:()=>p,Xe:()=>f,_u:()=>N,bI:()=>T,dY:()=>U,di:()=>A,dr:()=>y,eF:()=>x,o$:()=>C,uE:()=>K,uJ:()=>V,uq:()=>D,w4:()=>M,zT:()=>B,zq:()=>w});var t=e(44329),n=e(62938),r=e(52622),s=e(76885),o=e(41987),m=e(43127),i=e(65879),l=e(19347),d=e(11134),c=e(33390),g=e(66718),u=e(21969);const E={dedupStrategy:r.fY.none},p="0123456789abcdefghijklmnopqrstuvwxyz",b=(0,t.d_)(p,3),a="grafana.explore.datasource",h=F=>`${a}.${F}`,P=F=>c.A.getObject(h(F)),y=(F,z)=>c.A.setObject(h(F),z);function C(){for(;;){const F=b(3);if(!/^\d+$/.test(F))return F}}async function f(F){const{queries:z,dsRef:Y,timeRange:H,scopedVars:k,adhocFilters:ee}=F,ie=(await Promise.allSettled(z.filter(q=>q.datasource?.uid!==g.Uj).map(async q=>{const Z=await(0,l.l)().get(q.datasource||Y);return{...Z.interpolateVariablesInQueries?.([q],k??{},ee)[0]||q,...!Z.meta.mixed&&{datasource:Z.getRef()}}}))).filter(q=>q.status==="fulfilled").map(q=>q.value),fe=JSON.stringify({[C()]:{range:(0,s.sQ)(H.raw),queries:ie,datasource:Y?.uid}});return s.kM.renderUrl("/explore",{panes:fe,schemaVersion:1})}function D(F){return`explore_${F}`}function T(F,z,Y,H,k,ee,ie){const fe=Number.parseInt(F,36),{interval:q,intervalMs:Z}=L(H,Y.minInterval,Y.maxDataPoints),J={app:o.Jk.Explore,timezone:ee||m.lE,startTime:Date.now(),interval:q,intervalMs:Z,panelId:fe,targets:z,range:H,requestId:D(F),rangeRaw:H.raw,scopedVars:{__interval:{text:q,value:q},__interval_ms:{text:Z,value:Z},...ie},maxDataPoints:Y.maxDataPoints,liveStreaming:Y.liveStreaming};return{queries:z,request:J,scanning:k,id:S(),done:!1}}const M=({key:F,...z})=>z,O=(F,z)=>{if(F==null)return"";try{return JSON.stringify(F,null,z)}catch(Y){console.error(Y)}return""};function S(F=0){return`Q-${(0,n.A)()}-${F}`}async function v(F,z=0,Y){let H,k,ee;return Y?k=Y:F.length>0&&F[F.length-1].datasource?k=F[F.length-1].datasource:(H=await(0,l.l)().get(),ee=H.getDefaultQuery?.(o.Jk.Explore),k=H.getRef()),H||(H=await(0,l.l)().get(k),ee=H.getDefaultQuery?.(o.Jk.Explore)),{...ee,refId:(0,u.W3)(F),key:S(z),datasource:k}}const x=(F,z,Y=0)=>{const H=S(Y),k=F.refId||(0,u.W3)(z);return{...F,refId:k,key:H}};async function A(F,z){if(F&&typeof F=="object"&&F.length>0){const Y=[];for(let H=0;H<F.length;H++){const k=F[H],ee=S(H);let ie=k.refId;ie||(ie=(0,u.W3)(Y));let fe=!0;if(k.datasource)try{await(0,l.l)().get(k.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),fe=!1}fe&&Y.push({...k,refId:ie,key:ee})}return Y}try{const Y=z??(await(0,l.l)().get()).getRef();return[await v(F??[],void 0,Y)]}catch{return[]}}const R=["refId","key","context","datasource"];function B(F){return F&&F.some(z=>Object.entries(z).filter(([H,k])=>R.indexOf(H)===-1).filter(([H,k])=>k).length>0)}const U=F=>F.reduce((Y,H,k)=>{const ee=H.datasource?.uid||H.key;return Y.concat(`${ee}-${k}`)},[]),w=(F,z,Y)=>i.convertRawToRange(z,F,Y),K=F=>d.cC.isLive(F)?r.uH.Ascending:r.uH.Descending,N=F=>{F&&F.unsubscribe()};function L(F,z,Y){return Y?i.calculateInterval(F,Y,z):{interval:"1s",intervalMs:1e3}}const V=F=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(F);else{const z=document.createElement("textarea");z.value=F,document.body.appendChild(z),z.select(),document.execCommand("copy"),document.body.removeChild(z)}}},78827:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{default:()=>t});function t(n,r){r=r||{};const s=r.delimiter||".";let o=r.maxDepth||3,m=1;const i={};function l(d,c){Object.keys(d).forEach(g=>{const u=d[g],E=r?.safe&&Array.isArray(u),b=Object.prototype.toString.call(u)==="[object Object]",a=c?c+s+g:g;if(r?.maxDepth||(o=m+1),!E&&b&&Object.keys(u).length&&m<o)return++m,l(u,a);i[a]=u})}return l(n,null),i}},68576:(Q,I,e)=>{"use strict";e.d(I,{A:()=>i});var t=e(95344),n=e(54479),r=e(65879),s=e(83195);const m={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:l=>((0,t.l)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.$f)(l)),roundInterval:l=>((0,t.l)("kbn.ts","kbn.roundInterval()","@grafana/data"),r.roundInterval(l)),secondsToHms:l=>((0,t.l)("kbn.ts","kbn.secondsToHms()","@grafana/data"),r.secondsToHms(l)),secondsToHhmmss:l=>{const d=[],c=Math.floor(l/3600),g=Math.floor(l%3600/60),u=Math.floor(l%3600%60);return c>9?d.push(""+c):d.push("0"+c),g>9?d.push(""+g):d.push("0"+g),u>9?d.push(""+u):d.push("0"+u),d.join(":")},toPercent:(l,d)=>Math.floor(l/d*1e4)/100+"%",addSlashes:l=>l.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:l=>((0,t.l)("kbn.ts","kbn.describeInterval()","@grafana/data"),r.describeInterval(l)),intervalToSeconds:l=>((0,t.l)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),r.intervalToSeconds(l)),intervalToMs:l=>((0,t.l)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),r.intervalToMs(l)),calculateInterval:(l,d,c)=>((0,t.l)("kbn.ts","kbn.calculateInterval()","@grafana/data"),r.calculateInterval(l,d,c)),queryColorDot:(l,d)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+l,"font-size:"+d+"px"].join(";")+'"></div>',slugifyForUrl:l=>l.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:l=>((0,t.l)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.dO)(l)),toFixed:(l,d)=>{if(l===null)return"";const c=d?Math.pow(10,Math.max(0,d)):1,g=String(Math.round(l*c)/c);if(g.indexOf("e")!==-1||l===0)return g;if(d!=null){const u=g.indexOf("."),E=u===-1?0:g.length-u-1;if(E<d)return(E?g:g+".")+String(c).slice(1,d-E+1)}return g},toFixedScaled:(l,d,c,g,u)=>c===null?m.toFixed(l,d)+u:m.toFixed(l,c+g)+u,roundValue:(l,d)=>{if(l===null)return null;const c=Math.pow(10,d),g=(c*l).toFixed(d);return Math.round(parseFloat(g))/c},getUnitFormats:s.Ke};typeof Proxy<"u"?m.valueFormats=new Proxy(m.valueFormats,{get(l,d,c){if(typeof d!="string")throw{message:`Value format ${String(d)} is not a string`};const g=(0,s.j_)(d);return g?(u,E,p,b)=>(0,s.cN)(g(u,E,p,b?"utc":"browser")):Reflect.get(l,d,c)}}):m.valueFormats=(0,s.uH)();const i=m},78160:(Q,I,e)=>{"use strict";e.d(I,{j:()=>n,z:()=>r});var t=e(42614);function n(s){if(!(!performance||!performance.mark))try{performance.mark(`${s}_started`)}catch(o){console.error(`[Metrics] Failed to startMeasure ${s}`,o)}}function r(s){if(!(!performance||!performance.mark))try{const o=`${s}_started`,m=`${s}_completed`,i=`${s}_measured`;performance.mark(m);const l=performance.measure(i,o,m);return(0,t.n)(`${s}_ms`,l.duration),performance.clearMarks(o),performance.clearMarks(m),performance.clearMeasures(i),l}catch(o){console.error(`[Metrics] Failed to stopMeasure ${s}`,o);return}}},36689:(Q,I,e)=>{"use strict";e.d(I,{C:()=>n,o:()=>r});var t=e(44836);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","New alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"reports":return(0,t.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,t.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,t.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"cfg/general":return(0,t.t)("nav.config-general.title","General");case"cfg/plugins":return(0,t.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,t.t)("nav.config-access.title","Users and access");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"authentication":return(0,t.t)("nav.authentication.title","Authentication");case"licensing":return(0,t.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,t.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"migrate-to-cloud":return(0,t.t)("nav.migrate-to-cloud.title","Migrate to Grafana Cloud");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,t.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,t.t)("nav.frontend.title","Frontend");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,t.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,t.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,t.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,t.t)("nav.k6.title","Performance");case"monitoring":return(0,t.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,t.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,t.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,t.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,t.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,t.t)("nav.synthetics.title","Synthetics");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,t.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,t.t)("nav.add-new-connections.title","Add new connection");case"standalone-plugin-page-/connections/collector":return(0,t.t)("nav.collector.title","Collector");case"connections-datasources":return(0,t.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,t.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,t.t)("nav.connect-data.title","Connect data");case"standalone-plugin-page-/connections/private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.title","Private data source connect");case"plugin-page-grafana-detect-app":return(0,t.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,t.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function r(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"migrate-to-cloud":return(0,t.t)("nav.migrate-to-cloud.subtitle","Copy configuration from your self-managed installation to a cloud stack");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,t.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,t.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,t.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,t.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,t.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,t.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,t.t)("nav.data-sources.subtitle","View and manage your connected data source connections");case"connections-private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.subtitle","Query data that lives within a secured network without opening the network to inbound traffic from Grafana Cloud. Learn more in our docs.");default:return}}},28874:(Q,I,e)=>{"use strict";e.d(I,{v:()=>r});var t=e(2543),n=e.n(t);function r(s){return(0,t.isArray)(s)?s.map(r):(0,t.isPlainObject)(s)?Object.keys(s).sort().reduce((o,m)=>{const i=s[m];return i!=null&&(o[m]=r(i)),o},{}):s}},21969:(Q,I,e)=>{"use strict";e.d(I,{Ih:()=>n,Lr:()=>o,U7:()=>r,W3:()=>t,dr:()=>s,fE:()=>i});const t=l=>{for(let d=0;;d++){const c=m(d);if(!l.some(g=>g.refId===c))return c}};function n(l){const d=["refId","hide","key","queryType","datasource"];for(const c in l)if(c!=="label"&&!d.includes(c))return!1;return!0}function r(l,d,c){const g={...d,refId:t(l),hide:!1};return!g.datasource&&c&&(g.datasource=c),[...l,g]}function s(l){return l.indexOf("api/datasources/proxy")!==-1||l.indexOf("api/ds/query")!==-1}function o(l){return!l.match(/^http/)}function m(l){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return l<d.length?d[l]:m(Math.floor(l/d.length)-1)+d[l%d.length]}function i(l){return l||void 0}},81523:(Q,I,e)=>{"use strict";e.d(I,{Ax:()=>S,DI:()=>p,Gx:()=>a,IA:()=>D,NC:()=>C,TR:()=>x,U3:()=>f,X1:()=>h,cX:()=>y,l0:()=>E,oU:()=>P,rs:()=>b,x8:()=>v,xB:()=>u.x});var t=e(2543),n=e.n(t),r=e(76885),s=e(72724),o=e(19347),m=e(82467),i=e(3169),l=e(44836),d=e(99140),c=e(38877),g=e(11401),u=e(91650);async function E(R){const{queries:B,localOverride:U,datasource:w,starred:K,comment:N,showNotif:L}=R,V=L?.quotaExceededError??!0,F=L?.limitExceededWarning??!0,z=L?.otherErrors??!0,Y=B&&B.filter(H=>A(H));if(Y.length>0){let H=!1,k=!1,ee;try{ee=(await(U?(0,g.tU)():(0,g.a)()).addToRichHistory({datasourceUid:w.uid,datasourceName:w.name??"",queries:Y,starred:K,comment:N??""})).warning}catch(ie){return ie instanceof Error&&(ie.name===c.m.StorageFull?(H=!0,V&&(0,d.JD)((0,m.dx)((0,i.gi)(ie.message)))):z&&ie.name!==c.m.DuplicatedEntry&&(0,d.JD)((0,m.dx)((0,i.gi)((0,l.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),ie.message)))),{richHistoryStorageFull:H,limitExceeded:k}}return ee&&ee.type===c.C.LimitExceeded&&(k=!0,F&&(0,d.JD)((0,m.dx)((0,i.q8)(ee.message)))),{richHistoryStorageFull:H,limitExceeded:k}}return{}}async function p(R){return await(0,g.a)().getRichHistory(R)}async function b(R){await(0,g.a)().updateSettings(R)}async function a(){return await(0,g.a)().getSettings()}async function h(){return(0,g.a)().deleteAll()}async function P(R,B){try{return await(0,g.a)().updateStarred(R,B)}catch(U){U instanceof Error&&(0,d.JD)((0,m.dx)((0,i.gi)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}async function y(R,B){try{return await(0,g.a)().updateComment(R,B)}catch(U){U instanceof Error&&(0,d.JD)((0,m.dx)((0,i.gi)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}async function C(R){try{return await(0,g.a)().deleteRichHistory(R),R}catch(B){B instanceof Error&&(0,d.JD)((0,m.dx)((0,i.gi)((0,l.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),B.message)));return}}const f=R=>{const B={range:{from:(0,l.t)("explore.rich-history-utils.default-from","now-1h"),to:(0,l.t)("explore.rich-history-utils.default-to","now")},datasource:R.datasourceName,queries:R.queries},U=(0,r.Pp)(B),w=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return r.kM.renderUrl(`${w}/explore`,{left:U})},D=R=>{let B;switch(R){case 0:B=(0,l.t)("explore.rich-history-utils.today","today");break;case 1:B=(0,l.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:B=(0,l.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:B=(0,l.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:B=(0,l.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${R}`})}return B};function T(R){return(0,s.LE)(R,{format:"MMMM D"})}function M(R){const B=(0,t.omit)(R,["key","refId","datasource"]);return JSON.stringify(B)}function O(R,B){let U="";return B===u.x.DatasourceAZ||B===u.x.DatasourceZA?U=R.datasourceName:U=T(R.createdAt),U}function S(R,B){return B?.getQueryDisplayText?B.getQueryDisplayText(R):M(R)}function v(R,B){let U={};return R.forEach(w=>{let K=O(w,B);K in U?U[K]=[...U[K],w]:U[K]=[w]}),U}function x(){return(0,o.l)().getList({mixed:!0}).map(R=>({name:R.name,uid:R.uid}))}function A(R){const B=(0,t.omit)(R,["key","refId","datasource"]);return Object.keys(B).length>0}},91650:(Q,I,e)=>{"use strict";e.d(I,{x:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},7030:(Q,I,e)=>{"use strict";e.d(I,{V:()=>g,f:()=>c});var t=e(41811),n=e(32264),r=e(17172),s=e(82467),o=e(3169),m=e(99140),i=e(87490);function l(){return`${window.location.protocol}//${window.location.host}${n.$.appSubUrl}`}function d(u){let E=u.replace(l(),"");return E.startsWith("/")?E.substring(1,E.length):E}const c=(0,t.A)(async function(u){try{return(await(0,r.AI)().post("/api/short-urls",{path:d(u)})).url}catch(E){console.error("Error when creating shortened link: ",E),(0,m.JD)((0,s.dx)((0,o.gi)("Error generating shortened link")))}}),g=async u=>{const E=await c(u);E?((0,i.uJ)(E),(0,m.JD)((0,s.dx)((0,o.tZ)("Shortened link copied to clipboard")))):(0,m.JD)((0,s.dx)((0,o.gi)("Error generating shortened link")))}},92247:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>m,grafanaTimeFormat:()=>r,logp:()=>s,tickStep:()=>t});function t(i,l,d){const c=Math.sqrt(50),g=Math.sqrt(10),u=Math.sqrt(2),E=Math.abs(l-i)/Math.max(0,d);let p=Math.pow(10,Math.floor(Math.log(E)/Math.LN10));const b=E/p;return b>=c?p*=10:b>=g?p*=5:b>=u&&(p*=2),l<i?-p:p}function n(i,l){return i-Math.floor(Math.log(l)/Math.LN10)}function r(i,l,d){if(l&&d&&i){const c=d-l,g=c/i/1e3,u=864e5,E=31536e6;return g<=45?"HH:mm:ss":g<=7200||c<=u?"HH:mm":g<=8e4?"MM/DD HH:mm":g<=2419200||c<=E?"MM/DD":"YYYY-MM"}return"HH:mm"}function s(i,l){return Math.log(i)/Math.log(l)}function o(i){const l=i.toString();return m(l)}function m(i){if(isNaN(i))return 0;const l=i.indexOf(".");return l===-1?0:i.length-l-1}},80582:(Q,I,e)=>{"use strict";e.d(I,{Wb:()=>n,Zk:()=>r,zG:()=>s});var t=e(47232);const n=(o,m)=>{const i={from:(0,t.yT)(m.from),to:(0,t.yT)(m.to)},l=(i.to.valueOf()-i.from.valueOf())/2;let d,c;return o===-1?(d=i.to.valueOf()-l,c=i.from.valueOf()-l):o===1?(d=i.to.valueOf()+l,c=i.from.valueOf()+l,d>Date.now()&&i.to.valueOf()<Date.now()&&(d=Date.now(),c=i.from.valueOf())):(d=i.to.valueOf(),c=i.from.valueOf()),{from:c,to:d}},r=(o,m)=>{const i=o.to.valueOf()-o.from.valueOf(),l=o.to.valueOf()-i/2,d=i===0?3e4:i*m,c=l+d/2;return{from:l-d/2,to:c}};async function s(){const o=await navigator.clipboard.readText();let m;try{return m=JSON.parse(o),!m.from||!m.to?{range:o,isError:!0}:{range:m,isError:!1}}catch{return{range:o,isError:!0}}}},94515:(Q,I,e)=>{"use strict";e.d(I,{iU:()=>n});var t=e(47232);function n(o,m){if(!(o.fromDayOfWeek||o.from)&&!(o.toDayOfWeek||o.to))return[];const i={...o};i.from&&!i.to&&(i.to=i.from),!i.from&&i.to&&(i.from=i.to);const l={from:r(i.from),to:r(i.to)};if(!i.fromDayOfWeek&&i.toDayOfWeek&&(i.fromDayOfWeek=i.toDayOfWeek),!i.toDayOfWeek&&i.fromDayOfWeek&&(i.toDayOfWeek=i.fromDayOfWeek),i.fromDayOfWeek&&(l.from.dayOfWeek=Number(i.fromDayOfWeek)),i.toDayOfWeek&&(l.to.dayOfWeek=Number(i.toDayOfWeek)),l.from.dayOfWeek&&l.from.h==null&&l.from.m==null&&(l.from.h=0,l.from.m=0,l.from.s=0),l.to.dayOfWeek&&l.to.h==null&&l.to.m==null&&(l.to.h=23,l.to.m=59,l.to.s=59),!l.from||!l.to)return[];l.from.h==null&&(l.from.h=0),l.to.h==null&&(l.to.h=23);const d=[],c=(0,t.KQ)(m.from).utc();for(c.set("hour",0),c.set("minute",0),c.set("second",0),c.set("millisecond",0),c.add(l.from.h,"hours"),c.add(l.from.m,"minutes"),c.add(l.from.s,"seconds");c.unix()<=m.to.unix();){for(;l.from.dayOfWeek&&l.from.dayOfWeek!==c.isoWeekday();)c.add(24,"hours");if(c.unix()>m.to.unix())break;const g=(0,t.KQ)(c).utc();if(g.hour)if(l.from.h<=l.to.h)g.add(l.to.h-l.from.h,"hours");else if(l.from.h>l.to.h)for(;g.hour()!==l.to.h;)g.add(1,"hours");else for(g.add(24-l.from.h,"hours");g.hour()!==l.to.h;)g.add(1,"hours");for(g.set("minute",l.to.m??0),g.set("second",l.to.s??0);l.to.dayOfWeek&&l.to.dayOfWeek!==g.isoWeekday();)g.add(24,"hours");c.unix()<m.from.unix()&&g.unix()<m.from.unix()||c.unix()>m.to.unix()&&g.unix()>m.to.unix()||d.push({from:c.valueOf(),to:g.valueOf()}),c.add(24,"hours")}return d}function r(o){const m={};if(!o?.length)return m;const i=o.split(":");return i?.length&&(m.h=Math.min(23,Math.max(0,Number(i[0]))),i.length>1&&(m.m=Math.min(60,Math.max(0,Number(i[1]))),i.length>2&&(m.s=Math.min(60,Math.max(0,Number(i[2])))))),m}function s(o){if(!o||o.h==null&&o.m==null&&o.s==null)return"";let m=String(o.h??0).padStart(2,"0")+":"+String(o.m??0).padStart(2,"0");return o.s!=null&&(m+=String(o.s??0).padStart(2,"0")),m}},67027:(Q,I,e)=>{"use strict";e.d(I,{r:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},5133:(Q,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(62625),r=e(88323);const o=Object.values(n.X).filter(i=>i!==n.X.None).map(i=>({label:i,value:i}));function m({value:i,onChange:l,"aria-label":d,inputId:c,autoFocus:g,...u}){return t.createElement(r.l6,{inputId:c,value:i,options:o,onChange:E=>l(E.value),placeholder:"Choose role...","aria-label":d,autoFocus:g,...u})}},57334:(Q,I,e)=>{"use strict";e.d(I,{$u:()=>V,A5:()=>ee,Bc:()=>ie,DX:()=>B,JI:()=>A,Jc:()=>U,Kg:()=>R,MV:()=>a,N6:()=>y,P3:()=>D,Pi:()=>T,T$:()=>O,TK:()=>p,VR:()=>S,Vk:()=>z,hG:()=>P,hU:()=>K,is:()=>fe,kz:()=>u,ly:()=>b,mI:()=>x,nM:()=>L,nh:()=>f,nr:()=>h,pm:()=>v,xq:()=>H,yd:()=>F});var t=e(2543),n=e.n(t),r=e(72724),s=e(33378),o=e(17172),m=e(12131),i=e(2913),l=e(10096),d=e(80714),c=e(31678),g=e(44672);function u(q){return async Z=>{try{Z((0,g.D1)(!1)),await Z(E(q)),await Z(C(q)),await Z(M(q)),i.Ay.ldapEnabled&&(0,s.a)("ldapsync")&&await Z(v()),Z((0,g.D1)(!0))}catch(J){if(console.error(J),(0,o.NF)(J)){const G={title:J.data.message,body:J.data.error};Z((0,g.PV)(G))}}}}function E(q){return async Z=>{const J=await(0,o.AI)().get(`/api/users/${q}`,(0,d.F)());Z((0,g.G_)(J))}}function p(q){return async Z=>{await(0,o.AI)().put(`/api/users/${q.id}`,q),Z(u(q.id))}}function b(q,Z){return async J=>{const G={password:Z};await(0,o.AI)().put(`/api/admin/users/${q}/password`,G),J(u(q))}}function a(q){return async Z=>{await(0,o.AI)().post(`/api/admin/users/${q}/disable`),m.Ny.push("/admin/users")}}function h(q){return async Z=>{await(0,o.AI)().post(`/api/admin/users/${q}/enable`),Z(u(q))}}function P(q){return async Z=>{await(0,o.AI)().delete(`/api/admin/users/${q}`),m.Ny.push("/admin/users")}}function y(q,Z){return async J=>{const G={isGrafanaAdmin:Z};await(0,o.AI)().put(`/api/admin/users/${q}/permissions`,G),J(u(q))}}function C(q){return async Z=>{const J=await(0,o.AI)().get(`/api/users/${q}/orgs`);Z((0,g.OF)(J))}}function f(q,Z,J){return async G=>{const ne={loginOrEmail:q.login,role:J};await(0,o.AI)().post(`/api/orgs/${Z}/users/`,ne),G(u(q.id))}}function D(q,Z,J){return async G=>{const ne={role:J};await(0,o.AI)().patch(`/api/orgs/${Z}/users/${q}`,ne),G(u(q))}}function T(q,Z){return async J=>{await(0,o.AI)().delete(`/api/orgs/${Z}/users/${q}`),J(u(q))}}function M(q){return async Z=>{if(!l.TP.hasPermission(c.AccessControlAction.UsersAuthTokenList))return;const J=await(0,o.AI)().get(`/api/admin/users/${q}/auth-tokens`);J.reverse();const G=J.map(ne=>({id:ne.id,isActive:ne.isActive,seenAt:(0,r.fq)(ne.seenAt),createdAt:ne.createdAt,clientIp:ne.clientIp,browser:ne.browser,browserVersion:ne.browserVersion,os:ne.os,osVersion:ne.osVersion,device:ne.device}));Z((0,g.ag)(G))}}function O(q,Z){return async J=>{const G={authTokenId:q};await(0,o.AI)().post(`/api/admin/users/${Z}/revoke-auth-token`,G),J(M(Z))}}function S(q){return async Z=>{await(0,o.AI)().post(`/api/admin/users/${q}/logout`),Z(M(q))}}function v(){return async q=>{const Z=l.TP.hasPermission(c.AccessControlAction.LDAPStatusRead);if((0,s.a)("ldapsync")&&Z){const J=await(0,o.AI)().get("/api/admin/ldap-sync-status");q((0,g.OR)(J))}}}function x(q){return async Z=>{await(0,o.AI)().post(`/api/admin/ldap/sync/${q}`),Z(u(q))}}function A(){return async q=>{if(l.TP.hasPermission(c.AccessControlAction.LDAPStatusRead))try{const Z=await(0,o.AI)().get("/api/admin/ldap/status");q((0,g.pH)(Z))}catch(Z){if((0,o.NF)(Z)){Z.isHandled=!0;const J={title:Z.data.message,body:Z.data.error};q((0,g.V$)(J))}}}}function R(q){return async Z=>{try{const J=await(0,o.AI)().get(`/api/admin/ldap/${encodeURIComponent(q)}`),{name:G,surname:ne,email:te,login:oe,isGrafanaAdmin:le,isDisabled:ue,roles:Te,teams:he}=J,re={info:{name:G,surname:ne,email:te,login:oe},permissions:{isGrafanaAdmin:le,isDisabled:ue},roles:Te,teams:he};Z((0,g.TW)(re))}catch(J){if((0,o.NF)(J)){J.isHandled=!0;const G={title:J.data.message,body:J.data.error};Z((0,g.Vv)()),Z((0,g.Nf)(G))}}}}function B(){return q=>{q((0,g.zi)())}}function U(){return q=>{q((0,g.zi)()),q((0,g.Vv)())}}const w=q=>q.map(Z=>Array.isArray(Z.value)?Z.value.map(J=>`${Z.name}=${J.value}`).join("&"):`${Z.name}=${Z.value}`).join("&");function K(){return async(q,Z)=>{try{const{perPage:J,page:G,query:ne,filters:te,sort:oe}=Z().userListAdmin;let le=`/api/users/search?perpage=${J}&page=${G}&query=${ne}&${w(te)}`;oe&&(le+=`&sort=${oe}`);const ue=await(0,o.AI)().get(le);q((0,g.Mb)(ue))}catch(J){(0,g.g4)(),console.error(J)}}}const N=(0,t.debounce)(q=>q(K()),500);function L(q){return async Z=>{Z((0,g.Cj)()),Z((0,g.L5)(q)),N(Z)}}function V(q){return async Z=>{Z((0,g.Cj)()),Z((0,g.jX)(q)),N(Z)}}function F(q){return async Z=>{Z((0,g.Cj)()),Z((0,g.EC)(q)),Z(K())}}function z({sortBy:q}){const Z=q.length?`${q[0].id}-${q[0].desc?"desc":"asc"}`:void 0;return async(J,G)=>{G().userListAdmin.sort!==Z&&(J((0,g.Cj)()),J((0,g.$u)(Z)),J(K()))}}const Y=q=>q.map(Z=>Array.isArray(Z.value)?Z.value.map(J=>`${Z.name}=${J.value}`).join("&"):`${Z.name}=${Z.value}`).join("&");function H(){return async(q,Z)=>{try{const{perPage:J,page:G,query:ne,filters:te,sort:oe}=Z().userListAnonymousDevices;let le=`/api/anonymous/search?perpage=${J}&page=${G}&query=${ne}&${Y(te)}`;oe&&(le+=`&sort=${oe}`);const ue=await(0,o.AI)().get(le);q((0,g.o3)(ue))}catch(J){console.error(J)}}}const k=(0,t.debounce)(q=>q(H()),500);function ee({sortBy:q}){const Z=q.length?`${q[0].id}-${q[0].desc?"desc":"asc"}`:void 0;return async(J,G)=>{G().userListAnonymousDevices.sort!==Z&&(J((0,g.kh)(Z)),J(H()))}}function ie(q){return async Z=>{Z((0,g.xx)(q)),k(Z)}}function fe(q){return async Z=>{Z((0,g.iK)(q)),Z(H())}}},44672:(Q,I,e)=>{"use strict";e.d(I,{$u:()=>x,Ay:()=>V,Cj:()=>T,D1:()=>h,EC:()=>S,G_:()=>p,L5:()=>O,Mb:()=>D,Nf:()=>d,OF:()=>b,OR:()=>l,PV:()=>P,TW:()=>c,V$:()=>i,Vv:()=>o,ag:()=>a,g4:()=>M,iK:()=>K,jX:()=>v,kh:()=>w,o3:()=>U,pH:()=>m,xx:()=>N,zi:()=>s});var t=e(30038);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},r=(0,t.Z0)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(F,z)=>({...F,ldapError:void 0,connectionInfo:z.payload}),ldapFailedAction:(F,z)=>({...F,ldapError:z.payload}),ldapSyncStatusLoadedAction:(F,z)=>({...F,syncInfo:z.payload}),userMappingInfoLoadedAction:(F,z)=>({...F,user:z.payload,userError:void 0}),userMappingInfoFailedAction:(F,z)=>({...F,user:void 0,userError:z.payload}),clearUserMappingInfoAction:(F,z)=>({...F,user:void 0}),clearUserErrorAction:(F,z)=>({...F,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:o,ldapConnectionInfoLoadedAction:m,ldapFailedAction:i,ldapSyncStatusLoadedAction:l,userMappingInfoFailedAction:d,userMappingInfoLoadedAction:c}=r.actions,g=r.reducer,u={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},E=(0,t.Z0)({name:"userAdmin",initialState:u,reducers:{userProfileLoadedAction:(F,z)=>({...F,user:z.payload}),userOrgsLoadedAction:(F,z)=>({...F,orgs:z.payload}),userSessionsLoadedAction:(F,z)=>({...F,sessions:z.payload}),userAdminPageLoadedAction:(F,z)=>({...F,isLoading:!z.payload}),userAdminPageFailedAction:(F,z)=>({...F,error:z.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:b,userSessionsLoadedAction:a,userAdminPageLoadedAction:h,userAdminPageFailedAction:P}=E.actions,y=E.reducer,C={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},f=(0,t.Z0)({name:"userListAdmin",initialState:C,reducers:{usersFetched:(F,z)=>{const{totalCount:Y,perPage:H,...k}=z.payload,ee=Math.ceil(Y/H);return{...F,...k,totalPages:ee,perPage:H,showPaging:ee>1,isLoading:!1}},usersFetchBegin:F=>({...F,isLoading:!0}),usersFetchEnd:F=>({...F,isLoading:!1}),queryChanged:(F,z)=>({...F,query:z.payload,page:0}),pageChanged:(F,z)=>({...F,page:z.payload}),sortChanged:(F,z)=>({...F,page:0,sort:z.payload}),filterChanged:(F,z)=>{const{name:Y,value:H}=z.payload;return F.filters.some(k=>k.name===Y)?{...F,page:0,filters:F.filters.map(k=>k.name===Y?{...k,value:H}:k)}:{...F,page:0,filters:[...F.filters,z.payload]}}}}),{usersFetched:D,usersFetchBegin:T,usersFetchEnd:M,queryChanged:O,pageChanged:S,filterChanged:v,sortChanged:x}=f.actions,A=f.reducer,R={devices:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!0}]},B=(0,t.Z0)({name:"userListAnonymousDevices",initialState:R,reducers:{usersAnonymousDevicesFetched:(F,z)=>{const{totalCount:Y,perPage:H,...k}=z.payload,ee=Math.ceil(Y/H);return{...F,...k,totalPages:ee,perPage:H,showPaging:ee>1}},anonQueryChanged:(F,z)=>({...F,query:z.payload,page:0}),anonPageChanged:(F,z)=>({...F,page:z.payload}),anonUserSortChanged:(F,z)=>({...F,page:0,sort:z.payload}),filterChanged:(F,z)=>{const{name:Y,value:H}=z.payload;return F.filters.some(k=>k.name===Y)?{...F,page:0,filters:F.filters.map(k=>k.name===Y?{...k,value:H}:k)}:{...F,page:0,filters:[...F.filters,z.payload]}}}}),{usersAnonymousDevicesFetched:U,anonUserSortChanged:w,anonPageChanged:K,anonQueryChanged:N}=B.actions,L=B.reducer,V={ldap:g,userAdmin:y,userListAdmin:A,userListAnonymousDevices:L}},35538:(Q,I,e)=>{"use strict";e.d(I,{pL:()=>n,z5:()=>s});var t=e(32264);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function r(){const o=t.$.licenseInfo?.trialExpiry;return!!(o&&o>0)}const s=()=>r()&&t.$.featureToggles.featureHighlights},55907:(Q,I,e)=>{"use strict";e.d(I,{A:()=>y,p:()=>i});var t=e(2543),n=e.n(t),r=e(1062);const s=new r.tI({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),o=[{text:"Query",value:"query"}],m={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var i=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(i||{});const l=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],d=[{text:"OR",value:"or"},{text:"AND",value:"and"}],c=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],g=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],u=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function E(C){const f=new r.tI({type:C.type,defaultParams:[]});return new r.kW(C,f)}function p(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function b(C){switch(p(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function a(C,f){return(0,t.reduce)(C,(D,T)=>(T.metric!==void 0&&T.value!==void 0&&D.push(T.metric+"="+T.value),T.Metric!==void 0&&T.Value!==void 0&&D.push(T.Metric+"="+T.Value),D),[]).join(f)}function h(C){return(0,t.isArray)(C.data)?a(C.data,", "):(0,t.isArray)(C.data.evalMatches)?a(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}function P(C){return(0,t.isArray)(C)?a(C,", "):(0,t.isArray)(C.evalMatches)?a(C.evalMatches,", "):C.error?"Error: "+C.error:""}const y={alertQueryDef:s,getStateDisplayModel:b,conditionTypes:o,evalFunctions:l,evalOperators:d,noDataModes:g,executionErrorModes:u,reducerTypes:c,createReducerPart:E,getAlertAnnotationInfo:h,getAlertAnnotationText:P,alertStateSortScore:m}},1062:(Q,I,e)=>{"use strict";e.d(I,{Dw:()=>m,Wn:()=>o,kW:()=>s,tI:()=>r});var t=e(2543),n=e.n(t);class r{constructor(c){this.type=c.type,this.params=c.params,this.defaultParams=c.defaultParams,this.renderer=c.renderer,this.category=c.category,this.addStrategy=c.addStrategy}}class s{constructor(c,g){if(this.part=c,this.def=g,!this.def)throw{message:"Could not find query part "+c.type};c.params=c.params||(0,t.clone)(this.def.defaultParams),this.params=c.params,this.text="",this.updateText()}render(c){return this.def.renderer(this,c)}hasMultipleParamsInString(c,g){return c.indexOf(",")===-1?!1:this.def.params[g+1]&&this.def.params[g+1].optional}updateParam(c,g){if(this.hasMultipleParamsInString(c,g)){(0,t.each)(c.split(","),(u,E)=>{this.updateParam(u.trim(),E)});return}c===""&&this.def.params[g].optional?this.params.splice(g,1):this.params[g]=c,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let c=this.def.type+"(";c+=this.params.join(", "),c+=")",this.text=c}}function o(d,c){const g=d.def.type+"(",u=(0,t.map)(d.params,(E,p)=>{const b=d.def.params[p];return b.type==="time"&&E==="auto"&&(E="$__interval"),b.quote==="single"?"'"+E+"'":b.quote==="double"?'"'+E+'"':E});return c&&u.unshift(c),g+u.join(", ")+")"}function m(d,c){return c+" "+d.params[0]}function i(d,c){return d.params[0]}function l(d,c){return'"'+d.params[0]+'"'}},25027:(Q,I,e)=>{"use strict";e.d(I,{AK:()=>O,Fb:()=>B,IR:()=>M,Ke:()=>P,QA:()=>b,Rk:()=>T,Sn:()=>A,Sq:()=>f,U7:()=>a,aL:()=>R,fH:()=>u,hJ:()=>U,l$:()=>p,le:()=>g,nf:()=>D,vV:()=>E,zs:()=>v});var t=e(2543),n=e.n(t),r=e(47232),s=e(34867),o=e(17172),m=e(32264),i=e(14110),l=e(10096),d=e(28475);const c=7,g={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"},{logInfo:u,logError:E,logMeasurement:p}=(0,s.DW)("features.alerting",{module:"Alerting"});function b(w,K,N){return async function(...L){const V=performance.now(),F=await K(...L),z=performance.now()-V;return p(w,{loadTimesMs:z},N),F}}function a(w,K,N){return async(...L)=>{const V=performance.now(),F=await K(...L),{namespacesCount:z,groupsCount:Y,rulesCount:H}=h(F);return p(w,{loadTimeMs:performance.now()-V,namespacesCount:z,groupsCount:Y,rulesCount:H},N),F}}function h(w){const K=w.length,N=w.flatMap(F=>F.groups).length,L=w.flatMap(F=>F.groups).flatMap(F=>F.rules).length;return{namespacesCount:K,groupsCount:N,rulesCount:L}}function P(w,K,N){return async(...L)=>{const V=performance.now(),F=await K(...L),{namespacesCount:z,groupsCount:Y,rulesCount:H}=y(F);return p(w,{namespacesCount:z,groupsCount:Y,rulesCount:H,loadTimeMs:performance.now()-V},N),F}}function y(w){const K=Object.keys(w),N=Object.values(w).flatMap(V=>V),L=N.flatMap(V=>V.rules);return{namespacesCount:K.length,groupsCount:N.length,rulesCount:L.length}}async function C(){try{const{createdAt:w}=await(0,o.AI)().get("/api/user"),K=(0,r.KQ)().subtract(c,"days"),N=(0,r.KQ)(w);return K.isBefore(N)}catch{return!0}}const f=async(w={grafana_version:m.$.buildInfo.version,org_id:l.TP.user.orgId,user_id:l.TP.user.id})=>{await C()||(0,i.rR)("grafana_alerting_navigation",w)},D=w=>{(0,i.rR)("grafana_alerting_rule_creation",w)},T=w=>{(0,i.rR)("grafana_alerting_rule_aborted",w)},M=w=>{(0,i.rR)("grafana_alerting_rule_form_error",w)},O=async w=>{const K={grafana_version:m.$.buildInfo.version,org_id:l.TP.user.orgId,user_id:l.TP.user.id};(0,i.rR)("grafana_alerting_insights",{...K,...w})};function S(w){(0,i.rR)("grafana_alerting_rules_search",{...w})}function v({oldQuery:w,newQuery:K}){try{const N=(0,d.XY)(w),L=(0,d.XY)(K),V=x(N);x(L).filter(Y=>!V.includes(Y)).forEach(Y=>{S({filter:Y,triggeredBy:"typing"})})}catch(N){N instanceof Error&&E(N)}}function x(w){return Object.entries(w).filter(([K,N])=>!(0,t.isEmpty)(N)).map(([K])=>K)}function A(w){S({filter:w,triggeredBy:"component"})}function R(w){(0,i.rR)("grafana_alerting_rules_list_mode",{...w})}function B(){(0,i.rR)("grafana_alerting_switch_to_simplified_routing")}function U(){(0,i.rR)("grafana_alerting_switch_to_policies_routing")}},79741:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{default:()=>b,defaultPageNav:()=>E});var t=e(96540),n=e(17172),r=e(42418),s=e(66602),o=e(7392),m=e(37959),i=e(5179),l=e(47775),d=e(730),c=e(56361),g=e(18461);const u=a=>{const h=(0,g.uE)(a.match.params),P=t.useMemo(()=>{if(!h)throw new Error("Rule ID is required");return(0,g.qg)(h,!0)},[h]),{loading:y,error:C,result:f}=(0,d.ZU)({ruleIdentifier:P});return C?t.createElement(m.d,{pageNav:E,navId:"alert-list"},t.createElement(p,{error:C})):y?t.createElement(m.d,{pageNav:E,navId:"alert-list",isLoading:!0},t.createElement(t.Fragment,null)):f?t.createElement(i.K,{identifier:P,rule:f},t.createElement(l.Ay,null)):t.createElement(m.d,{pageNav:E,navId:"alert-list"},t.createElement(o.L,{entity:"Rule"}))},E={id:"alert-rule-view",text:""};function p({error:a}){return(0,n.NF)(a)&&a.status===404?t.createElement(o.L,{entity:"Rule"}):t.createElement(r.F,{title:"Something went wrong loading the rule"},(0,c.JZ)(a))}const b=(0,s.Xc)(u,{style:"page"})},79938:(Q,I,e)=>{"use strict";e.d(I,{hK:()=>d});var t=e(57220),n=e(75214),r=e(23662),s=e(49962),o=e(49498),m=e(28220);const i="/api/v1/rule/test/grafana",l="api/prometheus/grafana/api/v1/rules",d=s.H.injectEndpoints({endpoints:c=>({preview:c.mutation({query:({alertQueries:g,condition:u,customLabels:E,folder:p,alertName:b,alertUid:a})=>({url:i,data:{rule:{grafana_alert:{data:g,condition:u,no_data_state:"Alerting",title:b,uid:a??"N/A"},for:"0s",labels:(0,n.x4)(E),annotations:{}},folderUid:p.uid,folderTitle:p.title},method:"POST"})}),prometheusRulesByNamespace:c.query({query:({limitAlerts:g,identifier:u,filter:E,state:p,matcher:b})=>{const a=new URLSearchParams;g&&a.set("limit_alerts",String(g)),u&&((0,r.Mj)(u)||(0,r.X4)(u))&&(a.set("file",u.namespace),a.set("rule_group",u.groupName));const h=(0,o.bZ)(a,E);return{url:l,params:(0,o.Dj)(h,p,b)}},transformResponse:g=>(0,o.lH)(g.data.groups,t.hY)}),prometheusRuleNamespaces:c.query({query:({ruleSourceName:g,namespace:u,groupName:E,ruleName:p,dashboardUid:b})=>{const a={file:u,rule_group:E,rule_name:p,dashboard_uid:b};return{url:`api/prometheus/${(0,t.w5)(g)}/api/v1/rules`,params:a}},transformResponse:(g,u,E)=>(0,o.lH)(g.data.groups,E.ruleSourceName)}),rulerRules:c.query({query:({rulerConfig:g,filter:u})=>{const{path:E,params:p}=(0,m.$o)(g).rules(u);return{url:E,params:p}}}),rulerRuleGroup:c.query({query:({rulerConfig:g,namespace:u,group:E})=>{const{path:p,params:b}=(0,m.$o)(g).namespaceGroup(u,E);return{url:p,params:b}}}),exportRules:c.query({query:({format:g,folderUid:u,group:E,ruleUid:p})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:g,folderUid:u,group:E,ruleUid:p},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:c.query({query:({receiverName:g,decrypt:u,format:E})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:E,decrypt:u,name:g},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:c.query({query:({decrypt:g,format:u})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:u,decrypt:g},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:c.query({query:({format:g})=>({url:"/api/v1/provisioning/policies/export/",params:{format:g},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:c.mutation({query:({payload:g,format:u,nameSpaceUID:E})=>({url:`/api/ruler/grafana/api/v1/rules/${E}/export/`,params:{format:u},responseType:"text",data:g,method:"POST"})}),exportMuteTimings:c.query({query:({format:g})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:g},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:c.query({query:({format:g,muteTiming:u})=>({url:`/api/v1/provisioning/mute-timings/${u}/export/`,params:{format:g},responseType:"text"}),keepUnusedDataFor:0})})})},49962:(Q,I,e)=>{"use strict";e.d(I,{H:()=>m});var t=e(93020),n=e(75505),r=e(17172),s=e(25027);const o=()=>async i=>{try{const l=performance.now(),{data:d,...c}=await(0,n.s)((0,r.AI)().fetch(i));return(0,s.l$)("backendSrvBaseQuery",{loadTimeMs:performance.now()-l},{url:i.url,method:i.method??"GET",responseStatus:c.statusText}),{data:d,meta:c}}catch(l){return{error:l}}},m=(0,t.xP)({reducerPath:"alertingApi",baseQuery:o(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations","OrgMigrationState","DataSourceSettings"],endpoints:()=>({})})},32415:(Q,I,e)=>{"use strict";e.d(I,{By:()=>b,Bz:()=>d,Mn:()=>u,VO:()=>p,Vv:()=>D,WS:()=>m,Wf:()=>f,_P:()=>C,as:()=>c,dk:()=>g,f4:()=>E,nd:()=>l,vk:()=>i});var t=e(75505),n=e(76885),r=e(39070),s=e(17172),o=e(57220);async function m(M){try{const O=await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:O.data.template_files??{},template_file_provenances:O.data.template_file_provenances??{},alertmanager_config:O.data.alertmanager_config??{},last_applied:O.data.last_applied,id:O.data.id}}catch(O){if(M===o.hY&&(0,s.NF)(O)&&O.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw O}}async function i(M,O){await(0,t.s)((0,s.AI)().fetch({method:"POST",url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,data:O,showErrorAlert:!1,showSuccessAlert:!1}))}async function l(M){await(0,t.s)((0,s.AI)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function d(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function c(M,O){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silences`,data:O,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function g(M,O){await(0,s.AI)().delete(`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silence/${encodeURIComponent(O)}`)}async function u(M,O,S=!0,v=!0,x=!0){const A=n.kM.toUrlParams({silenced:S,active:v,inhibited:x})+O?.map(B=>`filter=${encodeURIComponent(`${T(B.name)}=${B.isRegex?"~":""}"${T(B.value)}"`)}`).join("&")||"";return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/alerts`+(A?"?"+A:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function p(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function b(M,O,S){const v={receivers:O,alert:S};try{const x=await(0,t.s)((0,s.AI)().fetch({method:"POST",data:v,url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(a(x.data))throw new Error(y(x.data))}catch(x){throw(0,s.NF)(x)&&h(x.data)&&a(x.data)?new Error(y(x.data)):x}}function a(M){return M.receivers.some(O=>O.grafana_managed_receiver_configs.some(S=>S.status==="failed"))}function h(M){return(0,r.Gv)(M)&&"receivers"in M&&Array.isArray(M.receivers)?M.receivers.every(P):!1}function P(M){return(0,r.Gv)(M)&&"name"in M&&typeof M.name=="string"&&"grafana_managed_receiver_configs"in M&&Array.isArray(M.grafana_managed_receiver_configs)}function y(M){return M.receivers.flatMap(O=>O.grafana_managed_receiver_configs.filter(S=>S.status==="failed").map(S=>S.error??"Unknown error.")).join("; ")}async function C(M){await(0,t.s)((0,s.AI)().fetch({method:"POST",data:M,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{D()})}async function f(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function D(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function T(M){return M.replace(/"/g,'\\"')}},82843:(Q,I,e)=>{"use strict";e.d(I,{m:()=>p});var t=e(2543),n=e.n(t),r=e(99140),s=e(25027),o=e(98164),m=e(57220),i=e(56361),l=e(88467),d=e(49962),c=e(32415),g=e(77583);const u=10,E=30*1e3,p=d.H.injectEndpoints({endpoints:b=>({getAlertmanagerAlerts:b.query({query:({amSourceName:a,filter:h})=>{const P=h?.matchers?.filter(O=>O.name&&O.value).map(O=>`${O.name}${(0,o.MN)(O)}${(0,i.Y9)(O.value)}`),{silenced:y,inhibited:C,unprocessed:f,active:D}=h||{},T=Object.fromEntries(Object.entries({silenced:y,active:D,inhibited:C,unprocessed:f}).filter(([O,S])=>S!==void 0)),M={filter:P};return T&&Object.keys(T).forEach(O=>{M[O]=T[O]}),{url:`/api/alertmanager/${(0,m.w5)(a)}/api/v2/alerts`,params:M}}}),getAlertmanagerAlertGroups:b.query({query:({amSourceName:a})=>({url:`/api/alertmanager/${(0,m.w5)(a)}/api/v2/alerts/groups`})}),grafanaNotifiers:b.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:b.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:b.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:b.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:a=>a.data}),saveExternalAlertmanagersConfig:b.mutation({query:a=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:a}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:b.query({query:()=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/history?limit=${u}`})}),resetAlertManagerConfigToOldVersion:b.mutation({query:a=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/history/${a.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:b.query({queryFn:async a=>{const h=a===m.hY;if((0,m.AL)(a))return(0,l.$I)((0,c.VO)(a).then(M=>({data:{alertmanager_config:M.config,template_files:{}}})));const{data:y}=await(0,r.JD)(g.L.endpoints.discoverAmFeatures.initiate({amSourceName:a})),C={alertmanager_config:{},template_files:{},template_file_provenances:{}},f=y?.lazyConfigInit??!1,D=(0,s.QA)("unifiedalerting/fetchAmConfig",c.WS,{dataSourceName:a,thunk:"unifiedalerting/fetchAmConfig"}),T=(0,i.i9)(()=>D(a),M=>!!(0,l.CZ)(M)?.includes("alertmanager storage object not found")&&!f,E).then(M=>h?M:(0,t.isEmpty)(M.alertmanager_config)&&(0,t.isEmpty)(M.template_files)?(0,c.VO)(a).then(S=>({alertmanager_config:S.config,template_files:{},template_file_provenances:M.template_file_provenances,last_applied:M.last_applied,id:M.id})):M).then(M=>M??C).then(M=>({data:M})).catch(M=>{if(f&&(0,l.CZ)(M)?.includes("alertmanager storage object not found"))return{data:C};throw M});return(0,l.$I)(T).catch(M=>({error:M,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:b.mutation({query:({selectedAlertmanager:a,config:h,...P})=>({url:`/api/alertmanager/${(0,m.w5)(a)}/config/api/v1/alerts`,method:"POST",data:h,...P}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:b.query({query:()=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/api/v1/receivers`}),transformResponse:a=>{const h=P=>P.startsWith("0001-01-01");return a.map(P=>({...P,integrations:P.integrations.map(y=>{const C=h(y.lastNotifyAttempt);return{...y,lastNotifyAttempt:C?"":y.lastNotifyAttempt,lastNotifyAttemptDuration:C?"":y.lastNotifyAttemptDuration}})}))}}),getContactPointsList:b.query({query:()=>({url:"/api/v1/notifications/receivers"})}),getMuteTimingList:b.query({query:()=>({url:"/api/v1/notifications/time-intervals"})})})})},92240:(Q,I,e)=>{"use strict";e.d(I,{O5:()=>g,_y:()=>c,nD:()=>l});var t=e(75505),n=e(17172),r=e(94822),s=e(55740),o=e(57220),m=e(49498),i=e(28220);async function l(h){if(h===o.hY)return{features:{rulerApiEnabled:!0}};const P=(0,o.oh)(h);if(!P)throw new Error(`Cannot find data source configuration for ${h}`);const{url:y,name:C,type:f}=P;if(!y)throw new Error("The data source url cannot be empty.");if(f!=="prometheus"&&f!=="loki")throw new Error(`The build info request is not available for ${f}. Only 'prometheus' and 'loki' are supported`);return d({name:C,url:y,type:f})}async function d(h){const{url:P,name:y,type:C}=h,f=C==="loki"?void 0:await E(P);if(!(f!==void 0)){if(!await p(y))throw new Error(`Unable to fetch alert rules. Is the ${y} data source properly configured?`);const O=await b(y);return{application:r.N1.Cortex,features:{rulerApiEnabled:O}}}const{features:T}=f.data;return T?{application:r.N1.Mimir,features:{rulerApiEnabled:T?.ruler_config_api==="true"}}:{application:r.N1.Prometheus,features:{rulerApiEnabled:!1}}}async function c(h){if(h===o.hY)return{lazyConfigInit:!1};const P=u(h),{url:y,type:C}=P;if(!y)throw new Error("The data source url cannot be empty.");if(C!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${C}. Only 'alertmanager' type is supported`);return await g(y)}async function g(h){try{return{lazyConfigInit:(await E(h))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function u(h){const P=(0,o.oh)(h);if(!P)throw new Error(`Cannot find data source configuration for ${h}`);return P}async function E(h){return(await(0,t.s)((0,n.AI)().fetch({url:`${h}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(y=>{if(!("status"in y&&y.status===404))throw y}))?.data}async function p(h){try{return await(0,m.sA)(h),!0}catch{return!1}}async function b(h){try{return await(0,i.Zp)(h),!0}catch(P){if(a(P))return!1;throw P}}function a(h){return(0,n.NF)(h)?h.data.message?.includes("GetRuleGroup unsupported in rule local store")||h.data.message?.includes("page not found")||h.data.message?.includes(s.UU):h instanceof Error&&h.message?.includes("404 from rules config endpoint")}},77583:(Q,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(94822),n=e(25027),r=e(57220),s=e(49962),o=e(92240);const m=s.H.injectEndpoints({endpoints:i=>({discoverAmFeatures:i.query({queryFn:async({amSourceName:l})=>{try{return{data:await(0,o._y)(l)}}catch(d){return{error:d}}}}),discoverDsFeatures:i.query({queryFn:async({rulesSourceName:l})=>{const d=(0,r.Jz)(l);if(!d)return{error:new Error(`Missing data source configuration for ${l}`)};const g=await(0,n.QA)("unifiedalerting/featureDiscoveryApi/discoverDsFeatures",o.nD,{dataSourceName:l,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(d.name);return{data:{rulerConfig:g.features.rulerApiEnabled?{dataSourceName:d.name,apiVersion:g.application===t.N1.Cortex?"legacy":"config"}:void 0}}}})})})},68788:(Q,I,e)=>{"use strict";e.d(I,{Es:()=>s,pB:()=>l});var t=e(75505),n=e(17172),r=e(57220);function s(){return(0,n.AI)().get("/api/alert-notifiers")}const o=d=>{const c=d.match(/^(\w+)(\[\d+\])?$/);return c?{type:c[1],index:c[2]}:{type:d,index:void 0}},m=d=>{const c={receivers:{},errorCount:0};d.forEach(u=>{c.receivers[u.name]={active:u.active,notifiers:{},errorCount:0};const E=c.receivers[u.name];u.integrations.forEach(p=>{!!p?.lastNotifyAttemptError&&(E.errorCount+=1);const a=i(p.name);a&&(E.notifiers[a]||(E.notifiers[a]=[]),E.notifiers[a].push(p))})});const g=Object.values(c.receivers).reduce((u,E)=>u+E.errorCount,0);return{...c,errorCount:g}},i=d=>o(d)?.type;async function l(d){try{const c=await(0,t.s)((0,n.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(d)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return m(c.data)}catch{return m([])}}},49498:(Q,I,e)=>{"use strict";e.d(I,{Dj:()=>i,bZ:()=>m,lH:()=>l,sA:()=>d});var t=e(75505),n=e(17172),r=e(57220),s=e(23662);function o(c){const{dataSourceName:g,limitAlerts:u,identifier:E}=c;return{rules:(p,b,a)=>{const h=new URLSearchParams;g===r.hY&&u&&h.set("limit_alerts",String(u)),E&&((0,s.Mj)(E)||(0,s.X4)(E))&&(h.set("file",E.namespace),h.set("rule_group",E.groupName));const P=m(h,p);return{url:`/api/prometheus/${(0,r.w5)(g)}/api/v1/rules`,params:i(P,b,a)}}}}function m(c,g){return g?.dashboardUID&&(c.set("dashboard_uid",g.dashboardUID),g?.panelId&&c.set("panel_id",String(g.panelId))),Object.fromEntries(c)}function i(c,g,u){let E={...c};if(g?.length&&(E={...E,state:g}),u?.length){const p=u.map(b=>JSON.stringify(b));E={...E,matcher:p}}return E}const l=(c,g)=>{const u={};return c.forEach(E=>{E.rules.forEach(p=>{p.query=p.query||""}),u[E.file]?u[E.file].groups.push(E):u[E.file]={dataSourceName:g,name:E.file,groups:[E]}}),Object.values(u)};async function d(c,g,u,E,p,b){if(g?.dashboardUID&&c!==r.hY)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:a,params:h}=o({dataSourceName:c,limitAlerts:u,identifier:b}).rules(g,p,E),P=await(0,t.s)((0,n.AI)().fetch({url:a,params:h,showErrorAlert:!1,showSuccessAlert:!1})).catch(y=>{throw"status"in y&&y.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):y});return l(P.data.data.groups,c)}},28220:(Q,I,e)=>{"use strict";e.d(I,{$o:()=>i,AJ:()=>E,BK:()=>P,E8:()=>l,HO:()=>u,Zp:()=>g,iy:()=>d});var t=e(75505),n=e(39070),r=e(17172),s=e(55740),o=e(57220),m=e(49498);function i(y){const f=`${`/api/ruler/${(0,o.w5)(y.dataSourceName)}`}/api/v1/rules`,D=new URLSearchParams;return D.set("subtype",y.apiVersion==="legacy"?"cortex":"mimir"),{rules:T=>{const M=(0,m.bZ)(D,T);return{path:`${f}`,params:M}},namespace:T=>({path:`${f}/${encodeURIComponent(T)}`,params:Object.fromEntries(D)}),namespaceGroup:(T,M)=>({path:`${f}/${encodeURIComponent(T)}/${encodeURIComponent(M)}`,params:Object.fromEntries(D)})}}async function l(y,C,f){const{path:D,params:T}=i(y).namespace(C);await(0,t.s)((0,r.AI)().fetch({method:"POST",url:D,data:f,showErrorAlert:!1,showSuccessAlert:!1,params:T}))}async function d(y,C){if(C?.dashboardUID&&y.dataSourceName!==o.hY)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:f,params:D}=i(y).rules(C);return p(f,{},D)}async function c(y,C){const{path:f,params:D}=i(y).namespace(C);return(await p(f,{},D))[C]||[]}async function g(y){return p(`/api/ruler/${(0,o.w5)(y)}/api/v1/rules/test/test`,null)}async function u(y,C,f){const{path:D,params:T}=i(y).namespaceGroup(C,f);return p(D,null,T)}async function E(y,C,f){const{path:D,params:T}=i(y).namespaceGroup(C,f);await(0,t.s)((0,r.AI)().fetch({url:D,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:T}))}async function p(y,C,f){try{return(await(0,t.s)((0,r.AI)().fetch({url:y,showErrorAlert:!1,showSuccessAlert:!1,params:f}))).data}catch(D){if(!b(D))throw D;if(h(D))return C;throw a(D)?{...D,data:{...D.data,message:s.UU}}:D}}function b(y){if(!(0,n.Gv)(y))return!1;const C="data"in y&&y.data!==null&&y.data!==void 0;return"status"in y&&Number.isFinite(y.status)&&C}function a(y){return y.status===404||y.status===500&&y.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function h(y){return y.status===404&&(y.data.message?.includes("group does not exist")||y.data.message?.includes("no rule groups found"))}async function P(y,C){const{path:f,params:D}=i(y).namespace(C);await(0,t.s)((0,r.AI)().fetch({method:"DELETE",url:f,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}},15458:(Q,I,e)=>{"use strict";e.d(I,{R:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({labelKey:i,value:l,operator:d="=",onRemoveLabel:c})=>{const g=(0,r.of)(m);return n.createElement("div",{className:g.wrapper},i,d,l,!!c&&n.createElement(s.K,{name:"times",size:"xs",onClick:c,tooltip:"Remove label"}))},m=i=>({wrapper:(0,t.css)`
    padding: ${i.spacing(.5,1)};
    border-radius: ${i.shape.radius.default};
    border: solid 1px ${i.colors.border.medium};
    font-size: ${i.typography.bodySmall.fontSize};
    background-color: ${i.colors.background.secondary};
    font-weight: ${i.typography.fontWeightBold};
    color: ${i.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},69087:(Q,I,e)=>{"use strict";e.d(I,{m:()=>g});var t=e(32196),n=e(2543),r=e.n(n),s=e(55127),o=e.n(s),m=e(96540),i=e(40845),l=e(55852),d=e(69613),c=e(8406);const g=({labels:b,commonLabels:a={},size:h})=>{const P=(0,i.of)(p,h),[y,C]=(0,m.useState)(!1),f=(0,n.chain)(b).toPairs().reject(E).reject(([M])=>y?!1:M in a).value(),D=Object.keys(a).length,T=D>0;return m.createElement("div",{className:P.wrapper,role:"list","aria-label":"Labels"},f.map(([M,O])=>m.createElement(c.J,{key:M+O,size:h,label:M,value:O,color:u(M)})),!y&&T&&m.createElement(l.$n,{variant:"secondary",fill:"text",onClick:()=>C(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",D," common ",o()("label",D)),y&&T&&m.createElement(l.$n,{variant:"secondary",fill:"text",onClick:()=>C(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function u(b){return(0,d.MC)(b).color}const E=([b,a])=>b.startsWith("__")&&b.endsWith("__"),p=(b,a)=>({wrapper:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${a==="md"?b.spacing():b.spacing(.5)};
  `})},37959:(Q,I,e)=>{"use strict";e.d(I,{d:()=>h,y:()=>P});var t=e(96540),n=e(87586),r=e(17205),s=e(70383),o=e(32196),m=e(40845),i=e(14186),l=e(88323),d=e(57220);function c(f){return f.name===d.hY?"Grafana":f.name.slice(0,37)}const g=({disabled:f=!1})=>{const D=(0,m.of)(u),{selectedAlertmanager:T,availableAlertManagers:M,setSelectedAlertmanager:O}=(0,s.VI)(),S=(0,t.useMemo)(()=>M.map(v=>({label:c(v),value:v.name,imgUrl:v.imgUrl,meta:v.meta})),[M]);return t.createElement(i.I,{className:D.field,label:f?"Alertmanager":"Choose Alertmanager",disabled:f||S.length===1,"data-testid":"alertmanager-picker"},t.createElement(l.l6,{"aria-label":f?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:v=>{v?.value&&O(v.value)},options:S,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:T,getOptionLabel:v=>v.label}))},u=f=>({field:(0,o.css)`
    margin: 0;
  `});var E=e(42418);const p=()=>t.createElement(E.F,{title:"No Alertmanager found",severity:"warning"},"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."),b=()=>t.createElement(E.F,{title:"Selected Alertmanager not found.",severity:"warning"},"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."),a=({availableAlertManagers:f})=>{const D=f.length>0;return t.createElement("div",null,D?t.createElement(b,null):t.createElement(p,null))},h=({children:f,isLoading:D,...T})=>t.createElement(r.Y,{...T},t.createElement(r.Y.Contents,{isLoading:D},t.createElement("div",null,f))),P=({children:f,accessType:D,...T})=>{const M=y();return t.createElement(s.b9,{accessType:D},t.createElement(h,{...T,actions:t.createElement(g,{disabled:M})},t.createElement(C,null,f)))};function y(){const f=(0,n.A)();return["/edit","/new"].some(T=>f?.pathname?.includes(T))}const C=({children:f})=>{const{availableAlertManagers:D,selectedAlertmanager:T}=(0,s.VI)();return T?t.createElement(t.Fragment,null,f):t.createElement(a,{availableAlertManagers:D})}},71223:(Q,I,e)=>{"use strict";e.d(I,{s:()=>g});var t=e(32196),n=e(96540),r=e(56034),s=e(40845),o=e(72109),m=e(55740),i=e(84396),l=e(16577),d=e(73750);const c=["message","description"],g=({annotationKey:p,value:b,valueLink:a})=>{const h=m.J3[p]?n.createElement(r.m,{content:p,placement:"top",theme:"info"},n.createElement("span",null,m.J3[p])):p;return n.createElement(i.X,{label:h,horizontal:!0},n.createElement(u,{annotationKey:p,value:b,valueLink:a}))},u=({annotationKey:p,value:b,valueLink:a})=>{const h=(0,s.of)(E),P=c.includes(p),y=b&&b.startsWith("http"),C=n.createElement(l.Y,{input:b,delimiter:["{{","}}"]});return a?n.createElement(o.Y,{href:a,external:!0},b):P?n.createElement(d.L,{className:h.well},C):y?n.createElement(o.Y,{href:b,external:!0},b):n.createElement(n.Fragment,null,C)},E=p=>({well:(0,t.css)`
    word-break: break-word;
  `})},84396:(Q,I,e)=>{"use strict";e.d(I,{X:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({className:m,label:i,horizontal:l,children:d,childrenWrapperClassName:c})=>{const g=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(g.field,l?g.fieldHorizontal:g.fieldVertical,m)},n.createElement("div",null,i),n.createElement("div",{className:c},d))},o=m=>({fieldHorizontal:(0,t.css)`
    flex-direction: row;
    ${m.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,t.css)`
    flex-direction: column;
  `,field:(0,t.css)`
    display: flex;
    margin: ${m.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${m.spacing(1)};
      font-size: ${m.typography.size.sm};
      font-weight: ${m.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${m.colors.text.secondary};
    }
  `})},75591:(Q,I,e)=>{"use strict";e.d(I,{E:()=>d});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(29158),m=e(19384),i=e(98439),l=e(22620);const d=({cols:g,items:u,isExpandable:E=!1,onCollapse:p,onExpand:b,isExpanded:a,renderExpandedContent:h,testIdGenerator:P,pagination:y,paginationStyles:C,renderPrefixCell:f,renderPrefixHeader:D,footerRow:T,dataTestId:M})=>{const O=(0,s.of)(l.H);if((p||b||a)&&!(p&&b&&a))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((E||h)&&!(E&&h))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const S=(0,s.of)(c(g,E,!!D)),[v,x]=(0,n.useState)([]),A=N=>{a&&p&&b?a(N)?p(N):b(N):x(v.includes(N.id)?v.filter(L=>L!==N.id):[...v,N.id])},R=y?.itemsPerPage??u.length,{page:B,numberOfPages:U,onPageChange:w,pageItems:K}=(0,i.W)(u,1,R);return n.createElement(n.Fragment,null,n.createElement("div",{className:S.container,"data-testid":M??"dynamic-table"},n.createElement("div",{className:S.row,"data-testid":"header"},D&&D(),E&&n.createElement("div",{className:S.cell}),g.map(N=>n.createElement("div",{className:S.cell,key:N.id},N.label))),K.map((N,L)=>{const V=a?a(N):v.includes(N.id);return n.createElement("div",{className:S.row,key:`${N.id}-${L}`,"data-testid":P?.(N,L)??"row"},f&&f(N,L,u),E&&n.createElement("div",{className:(0,t.cx)(S.cell,S.expandCell)},n.createElement(o.K,{tooltip:`${V?"Collapse":"Expand"} row`,"data-testid":r.Tp.components.AlertRules.toggle,name:V?"angle-down":"angle-right",onClick:()=>A(N)})),g.map(F=>n.createElement("div",{className:(0,t.cx)(S.cell,S.bodyCell,F.className),"data-column":F.label,key:`${N.id}-${F.id}`},F.renderCell(N,L))),V&&h&&n.createElement("div",{className:S.expandedContentRow,"data-testid":r.Tp.components.AlertRules.expandedContent},h(N,L,u)))}),T&&n.createElement("div",{className:(0,t.cx)(S.row,S.footerRow)},T)),y&&n.createElement(m.d,{className:(0,t.cx)(O,C),currentPage:B,numberOfPages:U,onNavigate:w,hideWhenSinglePage:!0}))},c=(g,u,E)=>{const p=g.map(b=>b.size?typeof b.size=="number"?`${b.size}fr`:b.size:"auto");return u&&p.unshift("calc(1em + 16px)"),E&&p.unshift("0"),b=>({container:(0,t.css)`
      border: 1px solid ${b.colors.border.weak};
      border-radius: ${b.shape.radius.default};
      color: ${b.colors.text.secondary};
    `,row:(0,t.css)`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${b.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${b.colors.background.primary};
      }

      ${b.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${b.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${E?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,t.css)`
      display: flex;
      padding: ${b.spacing(1)};
    `,cell:(0,t.css)`
      display: flex;
      align-items: center;
      padding: ${b.spacing(1)};

      ${b.breakpoints.down("sm")} {
        padding: ${b.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,t.css)`
      overflow: hidden;

      ${b.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${b.colors.text.primary};
        }
      }
    `,expandCell:(0,t.css)`
      justify-content: center;

      ${b.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,t.css)`
      grid-column-end: ${p.length+1};
      grid-column-start: ${E?3:2};
      grid-row: 2;
      padding: 0 ${b.spacing(3)} 0 ${b.spacing(1)};
      position: relative;

      ${b.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${b.colors.border.strong};
        grid-row: auto;
        padding: ${b.spacing(1)} 0 0 0;
      }
    `})}},10562:(Q,I,e)=>{"use strict";e.d(I,{B:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(75591);const o=({renderExpandedContent:i,...l})=>{const d=(0,r.of)(m);return n.createElement(s.E,{renderExpandedContent:i?(c,g,u)=>n.createElement(n.Fragment,null,g!==u.length-1&&n.createElement("div",{className:(0,t.cx)(d.contentGuideline,d.guideline)}),i(c,g,u)):void 0,renderPrefixHeader:()=>n.createElement("div",{className:d.relative},n.createElement("div",{className:(0,t.cx)(d.headerGuideline,d.guideline)})),renderPrefixCell:(c,g,u)=>n.createElement("div",{className:d.relative},n.createElement("div",{className:(0,t.cx)(d.topGuideline,d.guideline)}),g!==u.length-1&&n.createElement("div",{className:(0,t.cx)(d.bottomGuideline,d.guideline)})),...l})},m=i=>({relative:(0,t.css)`
    position: relative;
    height: 100%;
  `,guideline:(0,t.css)`
    left: -19px;
    border-left: 1px solid ${i.colors.border.weak};
    position: absolute;

    ${i.breakpoints.down("md")} {
      display: none;
    }
  `,topGuideline:(0,t.css)`
    width: 18px;
    border-bottom: 1px solid ${i.colors.border.medium};
    top: 0;
    bottom: 50%;
  `,bottomGuideline:(0,t.css)`
    top: 50%;
    bottom: 0;
  `,contentGuideline:(0,t.css)`
    top: 0;
    bottom: 0;
    left: -49px !important;
  `,headerGuideline:(0,t.css)`
    top: -17px;
    bottom: 0;
  `})},35108:(Q,I,e)=>{"use strict";e.d(I,{j:()=>d});var t=e(32196),n=e(46942),r=e.n(n),s=e(96540),o=e(40845),m=e(67061),i=e(95868),l=e(13840);const d=({children:g,header:u,content:E,footer:p,arrow:b,showAfter:a=300,wrapperClassName:h,disabled:P=!1,...y})=>{const C=(0,s.useRef)(null),f=(0,o.of)(c);if(P)return g;const D=s.createElement(m.B,{direction:"column",gap:0,role:"tooltip"},u&&s.createElement("div",{className:f.card.header},u),s.createElement("div",{className:f.card.body},E),p&&s.createElement("div",{className:f.card.footer},p));return s.createElement(i.I,{content:D,hideAfter:100},(T,M,O)=>s.createElement(s.Fragment,null,C.current&&s.createElement(l.A,{...O,...y,wrapperClassName:r()(f.popover,h),onMouseLeave:M,onMouseEnter:T,onFocus:T,onBlur:M,referenceElement:C.current,renderArrow:b}),s.cloneElement(g,{ref:C,onMouseEnter:T,onMouseLeave:M,onFocus:T,onBlur:M,tabIndex:0})))},c=g=>({popover:(0,t.css)({borderRadius:g.shape.radius.default,boxShadow:g.shadows.z3,background:g.colors.background.primary,border:`1px solid ${g.colors.border.medium}`}),card:{body:(0,t.css)({padding:g.spacing(1)}),header:(0,t.css)({padding:g.spacing(1),background:g.colors.background.secondary,borderBottom:`solid 1px ${g.colors.border.medium}`}),footer:(0,t.css)({padding:g.spacing(.5,1),background:g.colors.background.secondary,borderTop:`solid 1px ${g.colors.border.medium}`})}})},8406:(Q,I,e)=>{"use strict";e.d(I,{J:()=>i});var t=e(32196),n=e(96540),r=e(84140),s=e(40845),o=e(67061),m=e(14578);const i=({label:d,value:c,icon:g,color:u,size:E="md"})=>{const p=(0,s.of)(l,u,E),b=`${d}: ${c}`;return n.createElement("div",{className:p.wrapper,role:"listitem","aria-label":b},n.createElement(o.B,{direction:"row",gap:0,alignItems:"stretch"},n.createElement("div",{className:p.label},n.createElement(o.B,{direction:"row",gap:.5,alignItems:"center"},g&&n.createElement(m.I,{name:g})," ",d??"")),n.createElement("div",{className:p.value},c)))},l=(d,c,g)=>{const u=c??d.colors.secondary.main,E=d.isDark?(0,r.A)(u).lighten(5).toString():(0,r.A)(u).darken(5).toString(),p=d.isDark?(0,r.A)(u).darken(5).toString():(0,r.A)(u).lighten(5).toString(),b=c?r.A.mostReadable(u,["#000","#fff"]).toString():d.colors.text.primary,a=g==="md"?`${d.spacing(.33)} ${d.spacing(1)}`:`${d.spacing(.2)} ${d.spacing(.6)}`;return{wrapper:(0,t.css)`
      color: ${b};
      font-size: ${d.typography.bodySmall.fontSize};

      border-radius: ${d.shape.borderRadius(2)};
    `,label:(0,t.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${a};
      background: ${u};

      border: solid 1px ${E};
      border-top-left-radius: ${d.shape.borderRadius(2)};
      border-bottom-left-radius: ${d.shape.borderRadius(2)};
    `,value:(0,t.css)`
      color: inherit;
      padding: ${a};
      background: ${p};

      border: solid 1px ${E};
      border-left: none;
      border-top-right-radius: ${d.shape.borderRadius(2)};
      border-bottom-right-radius: ${d.shape.borderRadius(2)};
    `}}},55196:(Q,I,e)=>{"use strict";e.d(I,{P:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(94753),o=e(67061),m=e(14578);const i=({children:d,icon:c,color:g="secondary",direction:u="row",...E})=>{const p=(0,r.of)(l),b=typeof E.onClick=="function",a=u==="row",h=a?"center":"flex-start",P=a?.5:0;return n.createElement("div",{className:(0,t.cx)({[p.interactive]:b}),...E},n.createElement(s.E,{variant:"bodySmall",color:g},n.createElement(o.B,{direction:u,alignItems:h,gap:P,wrap:"wrap"},c&&n.createElement(m.I,{size:"sm",name:c}),d)))},l=()=>({interactive:(0,t.css)`
    cursor: pointer;
  `})},90141:(Q,I,e)=>{"use strict";e.d(I,{A:()=>m});var t=e(96540),n=e(55852),r=e(67061),s=e(14578);const m=(0,t.forwardRef)(function(l,d){return t.createElement(n.$n,{variant:"secondary",size:"sm",type:"button","aria-label":"more-actions","data-testid":"more-actions",ref:d,...l},t.createElement(r.B,{direction:"row",alignItems:"center",gap:0},"More ",t.createElement(s.I,{name:"angle-down"})))})},76156:(Q,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(96540),n=e(12210);const r=({children:o,plugin:m,loadingComponent:i,notInstalledFallback:l})=>{const{loading:d,installed:c}=usePluginBridge(m);return d?i??null:c?React.createElement(React.Fragment,null,o):l??null};function s(o,m,i){const l=new URLSearchParams(i).toString();return`/a/${o}${m}`+(l?"?"+l:"")}},48205:(Q,I,e)=>{"use strict";e.d(I,{Yi:()=>o,hk:()=>s,rS:()=>m});var t=e(96540),n=e(42418),r=e(39938),s=(i=>(i.ContactPoint="contact point",i.Template="template",i.MuteTiming="mute timing",i.AlertRule="alert rule",i.RootNotificationPolicy="root notification policy",i))(s||{});const o=({resource:i,...l})=>t.createElement(n.F,{title:`This ${i} cannot be edited through the UI`,severity:"info",...l},"This ",i," has been provisioned, that means it was created by config. Please contact your server admin to update this ",i,"."),m=()=>t.createElement(r.E,{text:"Provisioned",color:"purple"})},82437:(Q,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(96540),n=e(14578);const r=({namespace:s,group:o})=>o?t.createElement(t.Fragment,null,s," ",t.createElement(n.I,{name:"angle-right"})," ",o):t.createElement(t.Fragment,null,s)},26058:(Q,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(32196),n=e(96540);const r=()=>n.createElement("span",{className:(0,t.css)`
      flex: 1;
    `})},65415:(Q,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,state:i,size:l="md",muted:d=!1})=>{const c=(0,r.of)(o);return n.createElement("span",{className:(0,t.cx)(c.common,c[i],c[l],{[c.muted]:d})},m||i)},o=m=>({common:(0,t.css)`
    display: inline-block;
    color: white;
    border-radius: ${m.shape.radius.default};
    font-size: ${m.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${m.typography.fontWeightBold};
  `,good:(0,t.css)`
    background-color: ${m.colors.success.main};
    border: solid 1px ${m.colors.success.main};
    color: ${m.colors.success.contrastText};
  `,warning:(0,t.css)`
    background-color: ${m.colors.warning.main};
    border: solid 1px ${m.colors.warning.main};
    color: ${m.colors.warning.contrastText};
  `,bad:(0,t.css)`
    background-color: ${m.colors.error.main};
    border: solid 1px ${m.colors.error.main};
    color: ${m.colors.error.contrastText};
  `,neutral:(0,t.css)`
    background-color: ${m.colors.secondary.main};
    border: solid 1px ${m.colors.secondary.main};
    color: ${m.colors.secondary.contrastText};
  `,info:(0,t.css)`
    background-color: ${m.colors.primary.main};
    border: solid 1px ${m.colors.primary.main};
    color: ${m.colors.primary.contrastText};
  `,md:(0,t.css)`
    padding: ${m.spacing(.5,1)};
    min-width: ${m.spacing(8)};
  `,sm:(0,t.css)`
    padding: ${m.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,t.css)`
    opacity: 0.5;
  `})},16577:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(39938),o=e(35108),m=e(83225);const i=["$",".",'"'];function l({input:a,delimiter:h=["{{","}}"]}){const P=(0,r.of)(b),[y,C]=h,f=new RegExp(`(?<before>.*?)(${y}(?<token>.*?)${C}|$)`,"gm"),D=a.split(`
`),T=[];return D.forEach((M,O)=>{Array.from(M.matchAll(f)).forEach((v,x)=>{const A=v.groups?.before,R=v.groups?.token?.trim();if(A&&T.push(n.createElement("span",{key:`${O}-${x}-before`},A)),R){const B=p(R),U=B==="variable"?R:"",w=`${y} ${R} ${C}`;T.push(n.createElement(c,{key:`${O}-${x}-token`,content:w,type:B,description:U}))}}),T.push(n.createElement("br",{key:`${O}-newline`}))}),n.createElement("span",{className:P.wrapper},T)}var d=(a=>(a.Variable="variable",a.Function="function",a.Keyword="keyword",a.Unknown="unknown",a))(d||{});function c({content:a,description:h,type:P}){const y=(0,r.of)(b),C=!P;return n.createElement(o.j,{placement:"top-start",disabled:C,content:n.createElement("div",{className:y.hoverTokenItem},n.createElement(s.E,{tabIndex:0,text:n.createElement(n.Fragment,null,P),color:"blue"})," ",h&&n.createElement("code",null,h))},n.createElement("span",null,n.createElement(s.E,{tabIndex:0,className:y.token,text:a,color:"blue"})))}function g(a){return i.some(h=>a.startsWith(h))}function u(a){return m.keywords.some(h=>a.startsWith(h))}function E(a){return m.builtinFunctions.some(h=>a.startsWith(h))}function p(a){let h;return g(a)?h="variable":u(a)?h="keyword":E(a)?h="function":h="unknown",h}const b=a=>({wrapper:(0,t.css)`
    white-space: pre-wrap;
  `,token:(0,t.css)`
    cursor: default;
    font-family: ${a.typography.fontFamilyMonospace};
  `,popover:(0,t.css)`
    border-radius: ${a.shape.radius.default};
    box-shadow: ${a.shadows.z3};
    background: ${a.colors.background.primary};
    border: 1px solid ${a.colors.border.medium};

    padding: ${a.spacing(1)};
  `,hoverTokenItem:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${a.spacing(1)};
  `})},73750:(Q,I,e)=>{"use strict";e.d(I,{L:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:i})=>{const l=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(l.wrapper,i)},m)},o=m=>({wrapper:(0,t.css)`
    background-color: ${m.components.panel.background};
    border: solid 1px ${m.components.input.borderColor};
    border-radius: ${m.shape.radius.default};
    padding: ${m.spacing(.5,1)};
    font-family: ${m.typography.fontFamilyMonospace};
  `})},53876:(Q,I,e)=>{"use strict";e.d(I,{X:()=>p});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(14578),i=e(88575),l=e(60029),d=e(67061),c=e(56034),g=e(10354),u=e(25027),E=e(98164);const p=({onFilterChange:a,defaultQueryString:h})=>{const P=(0,o.of)(b),y=(0,s.useMemo)(()=>(0,n.debounce)(D=>{(0,u.fH)(u.le.filterByLabel);const T=D.target;a(T.value)},600),[a]);(0,s.useEffect)(()=>y.cancel(),[y]);const C=s.createElement(m.I,{name:"search"}),f=h?(0,E.J$)(h).length===0:!1;return s.createElement(i.D,{className:P.fixMargin,invalid:f||void 0,error:f?"Query must use valid matcher syntax. See the examples in the help tooltip.":null,label:s.createElement(l.J,null,s.createElement(d.B,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(c.m,{content:s.createElement("div",null,"Filter alerts using label querying without spaces, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'),"Invalid use of spaces:",s.createElement("pre",null,'{severity= "critical"}'),s.createElement("pre",null,'{severity ="critical"}'),"Valid use of spaces:",s.createElement("pre",null,'{severity=" critical"}'),"Filter alerts using label querying without braces, ex:",s.createElement("pre",null,'severity="critical", instance=~"cluster-us-.+"'))},s.createElement(m.I,{name:"info-circle",size:"sm"}))))},s.createElement(g.p,{placeholder:"Search",defaultValue:h??"",onChange:y,"data-testid":"search-query-input",prefix:C,className:P.inputWidth}))},b=a=>({fixMargin:(0,t.css)({marginBottom:0}),inputWidth:(0,t.css)({width:340,flexGrow:0})})},68291:(Q,I,e)=>{"use strict";e.d(I,{b:()=>l,d:()=>d});var t=e(96540),n=e(55852),r=e(56034),s=e(38138),o=e(12210),m=e(99494),i=e(76156);const l=({title:c="",severity:g="",url:u=""})=>{const E=(0,i.h)(m.W.Incident,"/incidents/declare",{title:c,severity:g,url:u}),{loading:p,installed:b,settings:a}=(0,o._)(m.W.Incident);return t.createElement(t.Fragment,null,p===!0&&t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),b===!1&&t.createElement(r.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),a&&t.createElement(n.z9,{icon:"fire",size:"sm",type:"button",href:E},"Declare Incident"))},d=({title:c="",severity:g="",url:u=""})=>{const E=(0,i.h)(m.W.Incident,"/incidents/declare",{title:c,severity:g,url:u}),{loading:p,installed:b,settings:a}=(0,o._)(m.W.Incident);return t.createElement(t.Fragment,null,p===!0&&t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0}),b===!1&&t.createElement(r.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0})),a&&t.createElement(s.W.Item,{label:"Declare incident",url:E,icon:"fire"}))}},56528:(Q,I,e)=>{"use strict";e.d(I,{GX:()=>B,r4:()=>A});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(49785),m=e(39070),i=e(19845),l=e(72724),d=e(40845),c=e(42418),g=e(67061),u=e(55852),E=e(51440),p=e(29158),b=e(98808),a=e(71680),h=e(1712),P=e(34263),y=e(18225),C=e(76658),f=e(66718),D=e(94822),T=e(98439),M=e(35108),O=e(26058),S=e(30423),v=e(81875),x=e(99106);const A=({queries:F=[],query:z,data:Y,error:H,warning:k,isAlertCondition:ee,onSetCondition:ie,onUpdateRefId:fe,onRemoveExpression:q,onUpdateExpressionType:Z,onChangeQuery:J})=>{const G=(0,d.of)(V),ne=z?.type,{setError:te,clearErrors:oe}=(0,o.xW)(),le=(0,s.useCallback)(xe=>{xe?te("queries",{type:"custom",message:xe}):oe("queries")},[te,oe]),ue=Y&&Object.values(Y).some(xe=>!!xe&&xe.state===m.Gu.Loading),Te=Array.isArray(Y?.series)&&!ue,he=Y?.series??[],re=ee??!1,{seriesCount:De,groupedByState:Fe}=w(he),Ee=(0,s.useCallback)(xe=>{const We=F.filter(be=>xe.refId!==be.refId).map(be=>({value:be.refId,label:be.refId}));switch(xe.type){case f.Tz.math:return s.createElement(a.z,{onChange:J,query:xe,labelWidth:"auto",onRunQuery:()=>{}});case f.Tz.reduce:return s.createElement(h.Z,{onChange:J,refIds:We,labelWidth:"auto",query:xe});case f.Tz.resample:return s.createElement(P.C,{onChange:J,query:xe,labelWidth:"auto",refIds:We});case f.Tz.classic:return s.createElement(b.z,{onChange:J,query:xe,refIds:We});case f.Tz.threshold:return s.createElement(C.O,{onChange:J,query:xe,labelWidth:"auto",refIds:We,onError:le,useHysteresis:!0});case f.Tz.sql:return s.createElement(y.k,{onChange:J,query:xe,refIds:We});default:return s.createElement(s.Fragment,null,"Expression not supported: ",xe.type)}},[J,F,le]),ze=f.uQ.find(xe=>xe.value===ne)?.description??"";return s.createElement("div",{className:(0,t.cx)(G.expression.wrapper,re&&G.expression.alertCondition,ne===f.Tz.classic&&G.expression.classic,ne!==f.Tz.classic&&G.expression.nonClassic)},s.createElement("div",{className:G.expression.stack},s.createElement(K,{refId:z.refId,queryType:ne,onRemoveExpression:()=>q(z.refId),onUpdateRefId:xe=>fe(z.refId,xe),onUpdateExpressionType:xe=>Z(z.refId,xe),onSetCondition:ie,query:z,alertCondition:re}),s.createElement("div",{className:G.expression.body},H&&s.createElement(c.F,{title:"Expression failed",severity:"error"},H.message),k&&s.createElement(c.F,{title:"Expression warning",severity:"warning"},k.message),s.createElement("div",{className:G.expression.description},ze),Ee(z)),Te&&s.createElement(s.Fragment,null,s.createElement(B,{series:he,isAlertCondition:ee}),s.createElement("div",{className:G.footer},s.createElement(g.B,{direction:"row",alignItems:"center"},s.createElement(O.h,null),s.createElement(U,{isCondition:!!ee,firing:Fe[D.cF.Firing].length,normal:Fe[D.cF.Inactive].length,seriesCount:De}))))))},R=20,B=({series:F,isAlertCondition:z})=>{const{pageItems:Y,previousPage:H,nextPage:k,numberOfPages:ee,pageStart:ie,pageEnd:fe}=(0,T.W)(F,1,R),q=(0,d.of)(V),Z=(0,x.PI)(F),J=!Z&&(0,i.jq)(F),G=ee>1;return s.createElement("div",{className:q.expression.results},!Z&&J&&s.createElement("div",null,Y.map((ne,te)=>s.createElement(L,{key:(0,n.uniqueId)(),frame:ne,index:ie+te,isAlertCondition:z}))),!Z&&!J&&Y.map((ne,te)=>s.createElement(N,{key:(0,n.uniqueId)(),frame:ne,index:ie+te,isAlertCondition:z})),Z&&s.createElement("div",{className:(0,t.cx)(q.expression.noData,q.mutedText)},"No data"),G&&s.createElement("div",{className:q.pagination.wrapper,"data-testid":"paginate-expression"},s.createElement(g.B,null,s.createElement(u.$n,{variant:"secondary",fill:"outline",onClick:H,icon:"angle-left",size:"sm","aria-label":"previous-page"}),s.createElement(O.h,null),s.createElement("span",{className:q.mutedText},ie," - ",fe," of ",F.length),s.createElement(O.h,null),s.createElement(u.$n,{variant:"secondary",fill:"outline",onClick:k,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},U=({firing:F,normal:z,isCondition:Y,seriesCount:H})=>{const{mutedText:k}=(0,d.of)(V);return H===0?s.createElement("span",{className:k},"No series"):Y?s.createElement("span",{className:k},`${H} series: ${F} firing, ${z} normal`):s.createElement("span",{className:k},`${H} series`)};function w(F){const z=F.filter(k=>(0,x.Lm)(k)===void 0).length,Y={[D.cF.Firing]:F.filter(k=>(0,x.Lm)(k)!==void 0&&(0,x.Lm)(k)!==0),[D.cF.Inactive]:F.filter(k=>(0,x.Lm)(k)===0)},H=F.length-z;return{groupedByState:Y,seriesCount:H}}const K=({refId:F,queryType:z,onUpdateRefId:Y,onRemoveExpression:H,onSetCondition:k,alertCondition:ee,query:ie})=>{const fe=(0,d.of)(V),q=(0,d.of)(u.my),[Z,J]=(0,s.useState)(!1),ne=Z!==!1&&Z==="refId";return s.createElement("header",{className:fe.header.wrapper},s.createElement(g.B,{direction:"row",gap:.5,alignItems:"center"},s.createElement(g.B,{direction:"row",gap:1,alignItems:"center"},!ne&&s.createElement("button",{type:"button",className:(0,t.cx)(q,fe.editable),onClick:()=>J("refId")},s.createElement("div",{className:fe.expression.refId},F)),ne&&s.createElement(E.D,{autoFocus:!0,defaultValue:F,minWidth:5,onChange:te=>{Y(te.currentTarget.value),J(!1)},onFocus:te=>te.target.select(),onBlur:te=>{Y(te.currentTarget.value),J(!1)}}),s.createElement("div",null,(0,f.NI)(z))),s.createElement(O.h,null),s.createElement(v.a,{onSetCondition:()=>k(ie.refId),isCondition:ee}),s.createElement(p.K,{name:"trash-alt",variant:"secondary",className:fe.mutedIcon,onClick:H,tooltip:"Remove expression"})))},N=({frame:F,index:z,isAlertCondition:Y})=>{const H=(0,d.of)(V),k=(0,x.Jw)(F)||"Series "+z,ee=(0,x.Lm)(F),ie=(0,x.JQ)(F),fe=Object.entries(ie),q=fe.length>0,Z=Y&&ee!==0,J=Y&&ee===0,G=`${q?"":k}${q?`{${(0,x.h6)(ie)}}`:""}`;return s.createElement("div",{className:H.expression.resultsRow},s.createElement(g.B,{direction:"row",gap:1,alignItems:"center"},s.createElement("div",{className:H.expression.resultLabel,title:G},s.createElement("span",null,q?"":k),q&&s.createElement(s.Fragment,null,s.createElement("span",null,"{"),fe.map(([ne,te],oe)=>s.createElement("span",{key:(0,n.uniqueId)()},s.createElement("span",{className:H.expression.labelKey},ne),s.createElement("span",null,"="),s.createElement("span",null,'"'),s.createElement("span",{className:H.expression.labelValue},te),s.createElement("span",null,'"'),oe<fe.length-1&&s.createElement("span",null,", "))),s.createElement("span",null,"}"))),s.createElement("div",{className:H.expression.resultValue},ee),Z&&s.createElement(S.C,{state:D.cF.Firing,size:"sm"}),J&&s.createElement(S.C,{state:D.cF.Inactive,size:"sm"})))},L=({frame:F,index:z})=>{const Y=(0,d.of)(V),H=F.fields[1],k=H.labels,ie=H.config?.displayNameFromDS??(k?(0,x.h6)(H.labels??{}):"Series "+z),fe=F.fields[0].values,q=J=>F.fields[0].values[J],Z=J=>F.fields[1].values[J];return s.createElement("div",{className:Y.expression.resultsRow},s.createElement(g.B,{direction:"row",alignItems:"center"},s.createElement("span",{className:(0,t.cx)(Y.mutedText,Y.expression.resultLabel),title:ie},ie),s.createElement("div",{className:Y.expression.resultValue},s.createElement(M.j,{placement:"right",wrapperClassName:Y.timeseriesTableWrapper,content:s.createElement("table",{className:Y.timeseriesTable},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Timestamp"),s.createElement("th",null,"Value"))),s.createElement("tbody",null,fe.map((J,G)=>s.createElement("tr",{key:G},s.createElement("td",{className:Y.mutedText},(0,l.LE)(q(G))),s.createElement("td",{className:Y.expression.resultValue},Z(G))))))},s.createElement("span",null,"Time series data")))))},V=F=>({expression:{wrapper:(0,t.css)`
      display: flex;
      border: solid 1px ${F.colors.border.medium};
      flex: 1;
      flex-basis: 400px;
      border-radius: ${F.shape.radius.default};
    `,stack:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      width: 100%;
      min-width: 0; // this one is important to prevent text overflow
    `,classic:(0,t.css)`
      max-width: 100%;
    `,nonClassic:(0,t.css)`
      max-width: 640px;
    `,alertCondition:(0,t.css)``,body:(0,t.css)`
      padding: ${F.spacing(1)};
      flex: 1;
    `,description:(0,t.css)`
      margin-bottom: ${F.spacing(1)};
      font-size: ${F.typography.size.xs};
      color: ${F.colors.text.secondary};
    `,refId:(0,t.css)`
      font-weight: ${F.typography.fontWeightBold};
      color: ${F.colors.primary.text};
    `,results:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${F.colors.border.medium};
    `,noResults:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:(0,t.css)`
      padding: ${F.spacing(.75)} ${F.spacing(1)};

      &:nth-child(odd) {
        background-color: ${F.colors.background.secondary};
      }

      &:hover {
        background-color: ${F.colors.background.canvas};
      }
    `,labelKey:(0,t.css)`
      color: ${F.isDark?"#73bf69":"#56a64b"};
    `,labelValue:(0,t.css)`
      color: ${F.isDark?"#ce9178":"#a31515"};
    `,resultValue:(0,t.css)`
      text-align: right;
    `,resultLabel:(0,t.css)`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${F.spacing()};
    `},mutedText:(0,t.css)`
    color: ${F.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:(0,t.css)`
      background: ${F.colors.background.secondary};
      padding: ${F.spacing(.5)} ${F.spacing(1)};
      border-bottom: solid 1px ${F.colors.border.weak};
    `},footer:(0,t.css)`
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(1)};
    border-top: solid 1px ${F.colors.border.weak};
  `,draggableIcon:(0,t.css)`
    cursor: grab;
  `,mutedIcon:(0,t.css)`
    color: ${F.colors.text.secondary};
  `,editable:(0,t.css)`
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border: solid 1px ${F.colors.border.weak};
    border-radius: ${F.shape.radius.default};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${F.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:(0,t.css)`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:(0,t.css)`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${F.spacing(1)};
    }

    td {
      background: ${F.colors.background.primary};
    }

    th {
      background: ${F.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${F.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:(0,t.css)`
      border-top: 1px solid ${F.colors.border.medium};
      padding: ${F.spacing()};
    `}})},81875:(Q,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(39938),o=e(55852);const m=({isCondition:l,onSetCondition:d})=>{const c=(0,r.of)(i);return l?n.createElement(s.E,{key:"condition",color:"green",icon:"check",text:"Alert condition"}):n.createElement("button",{key:"make-condition",type:"button",className:c.actionLink,onClick:()=>d&&d()},"Set as alert condition")},i=l=>{const d=(0,o.my)(l);return{actionLink:(0,t.css)`
      ${d};
      color: ${l.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},99106:(Q,I,e)=>{"use strict";e.d(I,{EL:()=>d,JQ:()=>i,Jw:()=>o,Lm:()=>m,PI:()=>g,h6:()=>l,wf:()=>c});var t=e(2543),n=e.n(t),r=e(97706),s=e(57220);const o=u=>{const E=u.fields[0];return E?.config?.displayNameFromDS??u.name??E?.labels?.__name__},m=u=>{const E=u.fields[0]?.values[0];return Number.isFinite(E)?(0,r.h)(E,5):E},i=u=>u.fields[0]?.labels??{},l=u=>Object.entries(u).map(([E,p])=>E+"="+p).join(", "),d=u=>{const E=u.name;if((0,s.Eb)(u.rulesSource))return{name:E,parents:[]};try{const p=JSON.parse(E);if(!Array.isArray(p))throw new Error("not a nested Grafana folder");const b=(0,t.last)(p)??E,a=(0,t.dropRight)(p,1);return{name:b,parents:a}}catch{return{name:u.name,parents:[]}}},c=(u,E=[])=>JSON.stringify(E.concat(u)),g=u=>u.every(p=>p.fields.every(b=>b.values.every(a=>a==null)))},83225:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>r,builtinFunctions:()=>o,conf:()=>l,keywords:()=>m,language:()=>i});var t=(d=>(d.Delimiter="delimiter",d.Keyword="keyword",d.Function="type.identifier",d.String="string",d.Variable="variable.name",d.Number="number",d.Comment="comment",d.Operator="operator",d.Identifier="idenfifier",d))(t||{}),n=(d=>(d.toUpper="toUpper",d.toLower="toLower",d.title="title",d.join="join",d.match="match",d.safeHtml="safeHtml",d.reReplaceAll="reReplaceAll",d.stringSlice="stringSlice",d))(n||{});const r=Object.values(n),o=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],m=["define","if","else","end","range","break","continue","template","block","with"],i={defaultToken:"",keywords:m,functions:[...o,...r],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},l={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},74685:(Q,I,e)=>{"use strict";e.d(I,{j:()=>c});var t=e(32196),n=e(96540),r=e(70713),s=e(19845),o=e(40845),m=e(28138),i=e(72519),l=e(56528),d=e(7921);const c=({data:u,thresholds:E,thresholdsType:p})=>{const b=(0,o.of)(g),a=(0,s.jq)(u.series),h=(0,d.yW)(u),P=p?{mode:p}:void 0,y={from:u.timeRange.from.valueOf(),to:u.timeRange.to.valueOf()};return n.createElement("div",{className:b.wrapper},n.createElement(r.Ay,{disableHeight:!0},({width:C})=>n.createElement("div",{style:{width:C}},a?n.createElement(i.y,{statusMessage:h,data:u.series,eventBus:m.A,height:300,width:C,absoluteRange:y,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:u.state,thresholdsConfig:E,thresholdsStyle:P}):n.createElement("div",{className:b.instantVectorResultWrapper},n.createElement("header",{className:b.title},"Table"),n.createElement(l.GX,{series:u.series})))))},g=u=>({wrapper:(0,t.css)`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:(0,t.css)`
    border: solid 1px ${u.colors.border.medium};
    border-radius: ${u.shape.radius.default};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:u.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:u.typography.h6.fontSize,fontWeight:u.typography.h6.fontWeight})})},7921:(Q,I,e)=>{"use strict";e.d(I,{G0:()=>T,zy:()=>M,lb:()=>O,YG:()=>B,yW:()=>A,an:()=>v,I3:()=>C,xb:()=>D,_u:()=>R,yr:()=>S});var t=e(2543),n=e(19845),r=e(50082),s=e(39070),o=e(52622),m=e(2913),i=e(55907),l=e(69437),d=e(66718),c=e(86590),g=e(41811),u=e(34525);const E=(0,g.A)(p,(U,w)=>y(U[0])===y(w[0]));function p(U){const w=new u.TS,K=U.map(N=>N.refId);return w.createNodes(K),U.forEach(N=>{const L=N.refId;((0,l.f)(N.model)&&N.model.type==="math"?b(N.model.expression??""):[N.model.expression]).forEach(z=>{L&&z&&!(L===z)&&w.link(z,L)})}),w}function b(U){const w=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),K=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),N=Array.from(U.matchAll(w)).map(V=>V.groups?.var),L=Array.from(U.matchAll(K)).map(V=>V.groups?.var);return(0,t.compact)((0,t.uniq)([...N,...L]))}const a=(0,t.memoize)(h,(U,w)=>U+P(w));function h(U,w){const K=w.getNode(U);let N=[];function L(V){const F=V.inputEdges;F.length>0?F.forEach(z=>{z.inputNode&&L(z.inputNode)}):N?.push(V)}return L(K),N.map(V=>V.name)}function P(U){return Object.keys(U.nodes).map(w=>{const K=U.nodes[w];let N=K.outputEdges.map(V=>V.outputNode?.name).join(", "),L=K.inputEdges.map(V=>V.inputNode?.name).join(", ");return`${K.name}:${N}:${L}`}).join(" ")}function y(U){return U.map(w=>{const K=(0,l.f)(w.model)?w.model.type:w.queryType;return w.refId+(w.model.expression??"")+K}).join()}function C(U,w,K){return U.map(N=>{if(w===K||!(0,l.f)(N.model))return N;const L=N.model.type==="math",V=N.model.type==="reduce",F=N.model.type==="resample",z=N.model.type==="classic_conditions",Y=N.model.type==="threshold";if(L)return{...N,model:{...N.model,expression:f(N.model.expression??"",w,K)}};if(F||V||Y){const H=N.model.expression===w;return{...N,model:{...N.model,expression:H?K:N.model.expression}}}if(z){const H=N.model.conditions?.map(k=>({...k,query:{...k.query,params:k.query.params.map(ee=>ee===w?K:ee)}}));return{...N,model:{...N.model,conditions:H}}}return N})}function f(U,w,K){const N=new RegExp("(\\$"+w+"\\b)|(\\${"+w+"})","gm"),L="${"+K+"}";return U.replace(N,L)}function D(U,w){return U.find(K=>K.refId===w)!==void 0}function T(U){return U.includes("/")||U.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function M(U){if(U.series.length===0)return;const w=(0,n.jq)(U.series);let K;return w&&(K=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),K}function O(U){if(U.errors?.length)return new Error(U.errors[0].message)}function S(U){const K=(U[0]?.meta?.notices??[]).find(N=>N.severity==="warning")?.text;return K?new Error(K):void 0}function v(U,w){const K={},N=[d.Tz.threshold,d.Tz.classic];if(!w)return K;for(const F of U){if(!(0,l.f)(F.model)||!N.includes(F.model.type)||!Array.isArray(F.model.conditions)||F.model.refId!==w)continue;const z=F.model.conditions.some(x);F.model.conditions.forEach(Y=>{const H=Y.evaluator.params,k=Y.query?.params[0]??F.model.expression;if(!k)return;const ee=x(Y);try{const ie=E(U),fe=a(k,ie);U.filter(Z=>fe.includes(Z.refId)).forEach(Z=>{const J=Z.refId,ne=!!(!(0,l.f)(Z?.model)&&J);J&&!K[J]&&(K[J]={config:{mode:r.O.Absolute,steps:[]},mode:o.Ly.Line}),J&&ne&&!ee&&!z?L(J,H[0]):J&&ne&&ee&&(V(J,H,Y.evaluator.type),K[J].mode=o.Ly.LineAndArea)})}catch(ie){console.error("Failed to parse thresholds",ie);return}})}function L(F,z){K[F].config.steps.push({value:-1/0,color:"transparent"},{value:z,color:m.config.theme2.colors.error.main})}function V(F,z,Y){Y===i.p.IsWithinRange&&K[F].config.steps.push({value:-1/0,color:"transparent"},{value:z[0],color:m.config.theme2.colors.error.main},{value:z[1],color:m.config.theme2.colors.error.main},{value:z[1],color:"transparent"}),Y===i.p.IsOutsideRange&&K[F].config.steps.push({value:-1/0,color:m.config.theme2.colors.error.main},{value:z[0],color:m.config.theme2.colors.error.main},{value:z[0],color:"transparent"},{value:z[1],color:m.config.theme2.colors.error.main}),K[F].config.steps.sort((H,k)=>H.value-k.value),K[F].config.steps=K[F].config.steps.filter(H=>H.value!==void 0)}return K}function x(U){return U.evaluator.type===i.p.IsWithinRange||U.evaluator.type===i.p.IsOutsideRange}function A(U){const w="Failed to fetch data";if(U.state!==s.Gu.Error)return;const K=U.errors;return K?.length?K.map(N=>N.message??w).join(", "):U.error?.message??w}function R(U=""){return U==="recording"?c.Z.cloudRecording:c.Z.grafana}function B(U,w){const K=w.filter(F=>!(0,l.f)(F.model)).map(F=>F.refId),N=U.filter(F=>!(0,l.f)(F.model)).map(F=>F.refId),[L,V]=(0,t.xor)(N,K);return[L,V]}},5179:(Q,I,e)=>{"use strict";e.d(I,{K:()=>r,k:()=>s});var t=e(96540);const n=t.createContext(void 0),r=({children:o,rule:m,identifier:i})=>{const l={rule:m,identifier:i};return t.createElement(n.Provider,{value:l},o)},s=()=>{const o=t.useContext(n);if(o===void 0)throw new Error("useAlertRule must be used within a AlertRuleContext");return o}},47775:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>pt,lf:()=>Hn});var t=e(32196),n=e(2543),r=e(96540),s=e(67061),o=e(42418),m=e(40980),i=e(72109),l=e(94753),d=e(40845),c=e(55852),g=e(83277),u=e(94822),E=e(79741),p=e(55740),b=e(56361),a=e(23662),h=e(3704),P=e(69087),y=e(37959),C=e(48205),f=e(14778);const D=({component:Dt,title:nn="previous page"})=>{const gn=(0,f.i)(),Cn=(0,r.useCallback)(()=>{gn(nn)},[gn,nn]);return r.cloneElement(Dt,{onClick:Cn})};var T=e(99106),M=e(51921),O=e(26272),S=e(83122),v=e(38138),x=e(28138),A=e(19073),R=e(18461),B=e(90141),U=e(68291),w=e(5179);const K=({handleDelete:Dt,handleDuplicateRule:nn})=>{const{rule:gn,identifier:Cn}=(0,w.k)(),[In,fa]=(0,A.mh)(gn,A.j5.Update),ga=In&&fa,[sa,da]=(0,A.mh)(gn,A.j5.Delete),Ma=sa&&da,[_a,Xa]=(0,A.mh)(gn,A.j5.Duplicate),ps=_a&&Xa,[As,ys]=(0,A.mh)(gn,A.j5.Silence),vs=As&&ys,[ar,ss]=(0,A.mh)(gn,A.j5.ModifyExport),Rs=ar&&ss,Cs=!(0,b.y$)()||(0,b.ES)(),ws=(0,b.S2)(gn.namespace.rulesSource,gn);return[ga&&r.createElement(V,{key:"edit-action",identifier:Cn}),r.createElement(S.m,{key:"more-actions",overlay:r.createElement(v.W,null,vs&&r.createElement(v.W.Item,{label:"Silence",icon:"bell-slash",url:(0,b.t7)(Cn.ruleSourceName,gn)}),Cs&&r.createElement(U.d,{title:gn.name,url:""}),ps&&r.createElement(v.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>nn(Cn)}),r.createElement(v.W.Divider,null),r.createElement(v.W.Item,{label:"Copy link",icon:"share-alt",onClick:()=>N(ws)}),Rs&&r.createElement(v.W.Item,{label:"Export",icon:"download-alt",childItems:[r.createElement(L,{key:"export-with-modifications",identifier:Cn})]}),Ma&&r.createElement(r.Fragment,null,r.createElement(v.W.Divider,null),r.createElement(v.W.Item,{label:"Delete",icon:"trash-alt",destructive:!0,onClick:()=>Dt(gn)})))},r.createElement(B.A,{size:"md"}))]};function N(Dt){navigator.clipboard?.writeText(Dt).then(()=>{x.A.emit(O.r1.alertSuccess,["URL copied to clipboard"])})}const L=({identifier:Dt})=>{const nn=location.pathname+location.search,gn=(0,h.c)(`/alerting/${encodeURIComponent(R.$9(Dt))}/modify-export`,{returnTo:nn});return r.createElement(v.W.Item,{key:"with-modifications",label:"With modifications",icon:"file-edit-alt",url:gn})},V=({identifier:Dt})=>{const nn=location.pathname+location.search,gn=R.$9(Dt),Cn=(0,h.c)(`/alerting/${encodeURIComponent(gn)}/edit`,{returnTo:nn});return r.createElement(c.z9,{variant:"secondary",icon:"pen",href:Cn},"Edit")};var F=e(96374),z=e(99140),Y=e(23770),H=e(57220);const k=()=>{const[Dt,nn]=(0,r.useState)(),gn=(0,r.useCallback)(()=>{nn(void 0)},[]),Cn=(0,r.useCallback)(ga=>{nn(ga)},[]),In=(0,r.useCallback)(ga=>{if(ga&&ga.rulerRule){const sa=(0,R.P1)((0,H.EV)(ga.namespace.rulesSource),ga.namespace.name,ga.group.name,ga.rulerRule);(0,z.JD)((0,Y.KH)(sa,{navigateTo:"/alerting/list"})),gn()}},[gn]);return[(0,r.useMemo)(()=>r.createElement(F.u,{isOpen:!!Dt,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:()=>In(Dt),onDismiss:gn}),[In,gn,Dt]),Cn,gn]};function ee(){return r.createElement(o.F,{severity:"info",title:"This rule is part of a federated rule group.",bottomSpacing:0,topSpacing:2},r.createElement(s.B,{direction:"column"},"Federated rule groups are currently an experimental feature.",r.createElement(c.$n,{fill:"text",icon:"book"},r.createElement("a",{href:"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation"},"Read documentation"))))}const ie=Dt=>{const nn=(0,d.of)(fe,Dt);return r.createElement(s.B,{direction:"row",gap:.5},r.createElement("div",{className:nn.dot}))},fe=(Dt,nn)=>{const gn=Dt.spacing(1.25),Cn=`calc(${gn} / 2.5)`,In=nn.color==="error",fa=nn.color==="success",ga=nn.color==="warning";return{dot:(0,t.css)`
      width: ${gn};
      height: ${gn};

      border-radius: 100%;

      background-color: ${Dt.colors.secondary.main};
      outline: solid ${Cn} ${Dt.colors.secondary.transparent};
      margin: ${Cn};

      ${fa&&(0,t.css)({backgroundColor:Dt.colors.success.main,outlineColor:Dt.colors.success.transparent})}

      ${ga&&(0,t.css)({backgroundColor:Dt.colors.warning.main,outlineColor:Dt.colors.warning.transparent})}

      ${In&&(0,t.css)({backgroundColor:Dt.colors.error.main,outlineColor:Dt.colors.error.transparent})}
    `}},q=({health:Dt})=>{const nn=Hn(Dt),gn=nn?"error":"success",Cn=nn?"Recording error":"Recording";return r.createElement(J,{color:gn,text:Cn})},Z=({state:Dt,health:nn})=>{let gn,Cn;switch(Dt){case u.cF.Inactive:Cn="success",gn="Normal";break;case u.cF.Firing:Cn="error",gn="Firing";break;case u.cF.Pending:Cn="warning",gn="Pending";break}return Hn(nn)&&(Cn="error",gn="Error"),nn==="nodata"&&(Cn="warning",gn="No data"),r.createElement(J,{color:Cn,text:gn})};function J({color:Dt,text:nn}){return r.createElement(s.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto"},r.createElement(ie,{color:Dt}),r.createElement(l.E,{variant:"bodySmall",color:Dt},nn))}var G=e(72095),ne=e(10534),te=e(55196),oe=e(16577),le=(Dt=>(Dt.GrafanaManagedAlertRule="Grafana-managed alert rule",Dt.CloudAlertRule="Cloud alert rule",Dt.CloudRecordingRule="Cloud recording rule",Dt))(le||{});const ue=({rule:Dt})=>{const nn=(0,d.of)(he);let gn;(0,a.lT)(Dt.rulerRule)?gn="Grafana-managed alert rule":(0,a.i7)(Dt.rulerRule)?gn="Cloud recording rule":gn="Cloud alert rule";const Cn=Dt.promRule?.evaluationTime,In=Dt.promRule?.lastEvaluation,fa=(0,r.useCallback)(()=>(0,a.lT)(Dt.rulerRule)?Dt.rulerRule.grafana_alert.uid:"",[Dt.rulerRule]),ga=(0,a.i7)(Dt.rulerRule)?void 0:Dt.annotations??[],sa=Number.isFinite(Cn);return r.createElement(s.B,{direction:"column",gap:3},r.createElement("div",{className:nn.metadataWrapper},r.createElement(te.P,{direction:"column"},"Rule type",r.createElement(l.E,{color:"primary"},gn)),r.createElement(te.P,{direction:"column"},(0,a.lT)(Dt.rulerRule)&&r.createElement(r.Fragment,null,"Rule Identifier",r.createElement(s.B,{direction:"row",alignItems:"center",gap:.5},r.createElement(l.E,{color:"primary"},Dt.rulerRule.grafana_alert.uid,r.createElement(ne.b,{fill:"text",variant:"secondary",icon:"copy",size:"sm",getText:fa}))))),r.createElement(te.P,{direction:"column"},sa&&r.createElement(r.Fragment,null,"Last evaluation",In&&Cn&&r.createElement("span",null,r.createElement(l.E,{color:"primary"},(0,G.B)(new Date(In))," ago"),", took"," ",r.createElement(l.E,{color:"primary"},Cn,"ms")))),r.createElement(te.P,{direction:"column"},!(0,a.i7)(Dt.rulerRule)&&r.createElement(r.Fragment,null,"Pending period",r.createElement(l.E,{color:"primary"},Dt.rulerRule?.for??"0s"))),(0,a.lT)(Dt.rulerRule)&&r.createElement(r.Fragment,null,r.createElement(te.P,{direction:"column"},"Alert state if no data or all values are null",r.createElement(l.E,{color:"primary"},Dt.rulerRule.grafana_alert.no_data_state)),r.createElement(te.P,{direction:"column"},"Alert state if execution error or timeout",r.createElement(l.E,{color:"primary"},Dt.rulerRule.grafana_alert.exec_err_state)))),ga&&r.createElement(r.Fragment,null,r.createElement(l.E,{variant:"h4"},"Annotations"),Object.keys(ga).length===0?r.createElement(l.E,{variant:"bodySmall",color:"secondary",italic:!0},"No annotations"):r.createElement("div",{className:nn.metadataWrapper},Object.entries(ga).map(([da,Ma])=>r.createElement(te.P,{direction:"column",key:da},da,r.createElement(Te,{value:Ma}))))))};function Te({value:Dt}){const nn=Dt&&Dt.startsWith("http"),gn=r.createElement(oe.Y,{input:Dt,delimiter:["{{","}}"]});return nn?r.createElement(i.Y,{variant:"bodySmall",href:Dt,external:!0},Dt):r.createElement(l.E,{color:"primary"},gn)}const he=Dt=>({metadataWrapper:(0,t.css)({display:"grid",gridTemplateColumns:"auto auto",rowGap:Dt.spacing(3),columnGap:Dt.spacing(12)})});var re=e(32264),De=e(46013);const Fe=(0,r.lazy)(()=>e.e(7409).then(e.bind(e,87409))),Ee=(0,r.lazy)(()=>e.e(1121).then(e.bind(e,31121))),Me=({rule:Dt})=>{const nn=re.$.unifiedAlerting.alertStateHistoryBackend,gn=re.$.unifiedAlerting.alertStateHistoryPrimary,In=[nn,gn].some(sa=>sa===De.Q.Loki)?De.Q.Loki:De.Q.Annotations,fa=Dt.grafana_alert.id??"",ga=Dt.grafana_alert.uid;return r.createElement(r.Suspense,{fallback:"Loading..."},In===De.Q.Loki&&r.createElement(Ee,{ruleUID:ga}),In===De.Q.Annotations&&r.createElement(Fe,{alertId:fa}))};var ze=e(15054),xe=e(99938);const We=({rule:Dt})=>r.createElement(xe.s,{rule:Dt,pagination:{itemsPerPage:ze.FG},enableFiltering:!0});var be=e(24120),pe=e(39070),Ue=e(76885),we=e(65879),je=e(11807),He=e(66602),rt=e(39938),Je=e(69437),Ve=e(66718),Oe=e(55907),Ne=e(26058),ye=e(56528),se=e(7921),ae=e(74685);function ge({data:Dt,thresholds:nn}){return Dt?r.createElement(ae.j,{data:Dt,thresholds:nn?.config,thresholdsType:nn?.mode}):null}var Pe=e(20382),Re=e(63066),Be=e(85828);const _e=({expression:Dt})=>r.createElement(Be.m,{options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastColumn:0,scrollBeyondLastLine:!1,lineNumbers:"off",cursorWidth:0,overviewRulerLanes:0},defaultLanguage:"sql",height:80,defaultValue:Dt,width:"100%"});function Xe(Dt){return"rawSql"in Dt}const tt=null,at=r.lazy(()=>e.e(8468).then(e.bind(e,58468))),st=r.lazy(()=>e.e(7011).then(e.bind(e,67011)));function dt({model:Dt,dataSource:nn}){return nn.type===H.ol.Prometheus&&(0,Re.Bu)(Dt)?r.createElement(at,{query:Dt.expr}):nn.type===H.ol.Loki&&(0,Re.Bu)(Dt)?r.createElement(st,{query:Dt.expr??""}):Xe(Dt)?r.createElement(_e,{expression:Dt.rawSql}):r.createElement("pre",null,r.createElement("code",null,(0,Pe.Bh)(Dt)))}function ot({rule:Dt,queries:nn,condition:gn,evalDataByQuery:Cn={}}){const In=(0,n.keyBy)(Object.values(re.$.datasources),Ma=>Ma.uid),fa=nn.filter(Ma=>!(0,Je.f)(Ma.model)),ga=nn.filter(Ma=>(0,Je.f)(Ma.model)),sa=(0,d.of)(en),da=(0,se.an)(nn,gn);return r.createElement(s.B,{gap:1,direction:"column",flex:"1 1 320px"},r.createElement("div",{className:sa.maxWidthContainer},r.createElement(s.B,{gap:1,wrap:"wrap","data-testid":"queries-container"},fa.map(({model:Ma,relativeTimeRange:_a,refId:Xa,datasourceUid:ps},As)=>{const ys=In[ps];return r.createElement(ft,{rule:Dt,key:As,refId:Xa,isAlertCondition:gn===Xa,model:Ma,relativeTimeRange:_a,dataSource:ys,thresholds:da[Xa],queryData:Cn[Xa]})}))),r.createElement("div",{className:sa.maxWidthContainer},r.createElement(s.B,{gap:1,wrap:"wrap","data-testid":"expressions-container"},ga.map(({model:Ma,refId:_a,datasourceUid:Xa},ps)=>{const As=In[Xa];return(0,Je.f)(Ma)&&r.createElement(Gt,{key:ps,refId:_a,isAlertCondition:gn===_a,model:Ma,dataSource:As,evalData:Cn[_a]})}))))}function ft({refId:Dt,rule:nn,thresholds:gn,model:Cn,dataSource:In,queryData:fa,relativeTimeRange:ga}){const sa=(0,d.of)(Kt),da=(0,Je.f)(Cn),[Ma,_a]=(0,A.mh)(nn,A.j5.Explore),Xa=Ma&&_a,ps=[];if(In){const ys=In.name??"[[Data source not found]]",vs=In.meta.info.logos.small;ps.push(r.createElement(Tt,{name:ys,imgUrl:vs,key:"datasource"}))}ga&&ps.push(r.createElement(l.E,{color:"secondary",key:"timerange"},(0,we.secondsToHms)(ga.from)," to now"));let As;return!da&&Xa&&(As=In&&yt(In,Cn)),r.createElement(r.Fragment,null,r.createElement(_t,{refId:Dt,headerItems:ps,exploreLink:As},r.createElement("div",{className:sa.queryPreviewWrapper},r.createElement(He.Xw,null,Cn&&In&&r.createElement(dt,{model:Cn,dataSource:In})))),In&&r.createElement(ge,{data:fa,thresholds:gn}))}function yt(Dt,nn){const{uid:gn,type:Cn}=Dt,{refId:In,...fa}=nn;return Ue.kM.renderUrl(`${re.$.appSubUrl}/explore`,{left:JSON.stringify({datasource:Dt.uid,queries:[{refId:"A",...fa,datasource:{type:Cn,uid:gn}}],range:{from:"now-1h",to:"now"}})})}function Tt({name:Dt,imgUrl:nn}){const gn=(0,d.of)(Kt);return r.createElement("div",{className:gn.dataSource,key:"datasource"},r.createElement("img",{src:nn,width:16,alt:Dt}),Dt)}const Kt=Dt=>({queryPreviewWrapper:(0,t.css)`
    margin: ${Dt.spacing(1)};
  `,contentBox:(0,t.css)`
    flex: 1 0 100%;
  `,visualization:(0,t.css)`
    padding: ${Dt.spacing(1)};
  `,dataSource:(0,t.css)({border:`1px solid ${Dt.colors.border.weak}`,borderRadius:Dt.shape.radius.default,padding:Dt.spacing(.5,1),display:"flex",alignItems:"center",gap:Dt.spacing(1)})});function Gt({refId:Dt,model:nn,evalData:gn,isAlertCondition:Cn}){function In(){switch(nn.type){case Ve.Tz.math:return r.createElement(Jt,{model:nn});case Ve.Tz.reduce:return r.createElement(lt,{model:nn});case Ve.Tz.resample:return r.createElement(Vt,{model:nn});case Ve.Tz.classic:return r.createElement(Mt,{model:nn});case Ve.Tz.threshold:return r.createElement(rn,{model:nn});case Ve.Tz.sql:return r.createElement(je.l,{rawSql:nn.expression||"",datasourceType:nn.datasource?.type});default:return r.createElement(r.Fragment,null,"Expression not supported: ",nn.type)}}return r.createElement(_t,{refId:Dt,headerItems:[r.createElement(l.E,{color:"secondary",key:"expression-type"},(0,n.startCase)(nn.type))],isAlertCondition:Cn},In(),r.createElement(Ne.h,null),gn&&r.createElement(ye.GX,{series:gn.series,isAlertCondition:Cn}))}function _t({refId:Dt,headerItems:nn=[],children:gn,isAlertCondition:Cn,exploreLink:In}){const fa=(0,d.of)(it);return r.createElement("div",{className:(0,t.cx)(fa.container)},r.createElement("header",{className:fa.header},r.createElement("span",{className:fa.refId},Dt),nn,r.createElement(Ne.h,null),Cn&&r.createElement(rt.E,{color:"green",icon:"check",text:"Alert condition"}),In&&r.createElement(D,{component:r.createElement(c.z9,{size:"md",variant:"secondary",icon:"compass",href:In},"View in Explore")})),gn)}const it=Dt=>({container:(0,t.css)({flex:"1 0 25%",border:`1px solid ${Dt.colors.border.weak}`,maxWidth:"100%",borderRadius:Dt.shape.radius.default,display:"flex",flexDirection:"column"}),header:(0,t.css)`
    display: flex;
    align-items: center;
    gap: ${Dt.spacing(1)};
    padding: ${Dt.spacing(1)};
    background-color: ${Dt.colors.background.secondary};
  `,textBlock:(0,t.css)({border:`1px solid ${Dt.colors.border.weak}`,padding:Dt.spacing(.5,1),backgroundColor:Dt.colors.background.primary,borderRadius:Dt.shape.radius.default}),refId:(0,t.css)({color:Dt.colors.text.link,padding:Dt.spacing(.5,1),border:`1px solid ${Dt.colors.border.weak}`,borderRadius:Dt.shape.radius.default})});function Mt({model:Dt}){const nn=(0,d.of)(Dn),gn=(0,n.keyBy)(Oe.A.reducerTypes,fa=>fa.value),Cn=(0,n.keyBy)(Oe.A.evalOperators,fa=>fa.value),In=(0,n.keyBy)(Oe.A.evalFunctions,fa=>fa.value);return r.createElement("div",{className:nn.container},Dt.conditions?.map(({query:fa,operator:ga,reducer:sa,evaluator:da},Ma)=>{const _a=Fn(da);return r.createElement(r.Fragment,{key:Ma},r.createElement("div",{className:nn.blue},Ma===0?"WHEN":!!ga?.type&&Cn[ga?.type]?.text),r.createElement("div",{className:nn.bold},sa?.type&&gn[sa.type]?.text),r.createElement("div",{className:nn.blue},"OF"),r.createElement("div",{className:nn.bold},fa.params[0]),r.createElement("div",{className:nn.blue},In[da.type].text),r.createElement("div",{className:nn.bold},_a?`(${da.params[0]}; ${da.params[1]})`:da.params[0]))}))}const Dn=Dt=>({container:(0,t.css)`
    padding: ${Dt.spacing(1)};
    display: grid;
    grid-template-columns: max-content max-content max-content max-content max-content max-content;
    gap: ${Dt.spacing(0,1)};
  `,...hn(Dt)});function lt({model:Dt}){const nn=(0,d.of)(Ct),{reducer:gn,expression:Cn,settings:In}=Dt,fa=Ve.Cu.find(da=>da.value===gn),ga=In?.mode??Ve.Mt.Strict,sa=Ve.HZ.find(da=>da.value===ga);return r.createElement("div",{className:nn.container},r.createElement("div",{className:nn.label},"Function"),r.createElement("div",{className:nn.value},fa?.label),r.createElement("div",{className:nn.label},"Input"),r.createElement("div",{className:nn.value},Cn),r.createElement("div",{className:nn.label},"Mode"),r.createElement("div",{className:nn.value},sa?.label))}const Ct=Dt=>({container:(0,t.css)`
    padding: ${Dt.spacing(1)};
    display: grid;
    gap: ${Dt.spacing(.5)};
    grid-template-rows: 1fr 1fr;
    grid-template-columns: 1fr 1fr 1fr 1fr;

    > :nth-child(6) {
      grid-column: span 3;
    }
  `,...hn(Dt)});function Vt({model:Dt}){const nn=(0,d.of)(qt),{expression:gn,window:Cn,downsampler:In,upsampler:fa}=Dt,ga=Ve.PN.find(da=>da.value===In),sa=Ve.iX.find(da=>da.value===fa);return r.createElement("div",{className:nn.container},r.createElement("div",{className:nn.label},"Input"),r.createElement("div",{className:nn.value},gn),r.createElement("div",{className:nn.label},"Resample to"),r.createElement("div",{className:nn.value},Cn),r.createElement("div",{className:nn.label},"Downsample"),r.createElement("div",{className:nn.value},ga?.label),r.createElement("div",{className:nn.label},"Upsample"),r.createElement("div",{className:nn.value},sa?.label))}const qt=Dt=>({container:(0,t.css)`
    padding: ${Dt.spacing(1)};
    display: grid;
    gap: ${Dt.spacing(.5)};
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
  `,...hn(Dt)});function rn({model:Dt}){const nn=(0,d.of)(en),{expression:gn,conditions:Cn}=Dt,In=Cn&&Cn[0]?.evaluator,fa=Ve.zd.find(_a=>_a.value===In?.type),ga=In?Fn(In):!1,sa=Cn&&Cn[0]?.unloadEvaluator,da=Ve.zd.find(_a=>_a.value===sa?.type),Ma=sa?Fn(sa):!1;return r.createElement(r.Fragment,null,r.createElement("div",{className:nn.container},r.createElement("div",{className:nn.label},"Input"),r.createElement("div",{className:nn.value},gn),In&&r.createElement(r.Fragment,null,r.createElement("div",{className:nn.blue},fa?.label),r.createElement("div",{className:nn.bold},ga?`(${In.params[0]}; ${In.params[1]})`:In.params[0]))),r.createElement("div",{className:nn.container},sa&&r.createElement(r.Fragment,null,r.createElement("div",{className:nn.label},"Stop alerting when "),r.createElement("div",{className:nn.value},gn),r.createElement(r.Fragment,null,r.createElement("div",{className:nn.blue},da?.label),r.createElement("div",{className:nn.bold},Ma?`(${sa.params[0]}; ${sa.params[1]})`:sa.params[0])))))}const en=Dt=>{const{blue:nn,bold:gn,...Cn}=hn(Dt);return{...Cn,maxWidthContainer:(0,t.css)`
      max-width: 100%;
    `,container:(0,t.css)`
      padding: ${Dt.spacing(1)};
      display: flex;
      gap: ${Dt.spacing(.5)};
    `,blue:(0,t.css)`
      ${nn};
      margin: auto 0;
    `,bold:(0,t.css)`
      ${gn};
      margin: auto 0;
    `}};function Jt({model:Dt}){const nn=(0,d.of)(en),{expression:gn}=Dt;return r.createElement("div",{className:nn.container},r.createElement("div",{className:nn.label},"Input"),r.createElement("div",{className:nn.value},gn))}const hn=Dt=>({blue:(0,t.css)`
    color: ${Dt.colors.text.link};
  `,bold:(0,t.css)`
    font-weight: ${Dt.typography.fontWeightBold};
  `,label:(0,t.css)`
    display: flex;
    align-items: center;
    padding: ${Dt.spacing(.5,1)};
    background-color: ${Dt.colors.background.secondary};
    font-size: ${Dt.typography.bodySmall.fontSize};
    line-height: ${Dt.typography.bodySmall.lineHeight};
    font-weight: ${Dt.typography.fontWeightBold};
    border-radius: ${Dt.shape.radius.default};
  `,value:(0,t.css)`
    padding: ${Dt.spacing(.5,1)};
    border: 1px solid ${Dt.colors.border.weak};
    border-radius: ${Dt.shape.radius.default};
  `});function Fn(Dt){return Dt.type===Oe.p.IsWithinRange||Dt.type===Oe.p.IsOutsideRange}var Kn=e(36135),na=e(28318),Ut=e(1932),on=e(25968);function mn(Dt){if(!Dt)return[];const{namespace:nn,rulerRule:gn}=Dt,{rulesSource:Cn}=nn;if((0,a.lT)(gn)){const In=gn.grafana_alert.data;return vn(In,gn.for,Dt.group.interval)}if((0,H.Eb)(Cn)){const In=Un(Cn,Dt);return[pn(In,Cn.uid)]}return[]}function vn(Dt,nn,gn){const Cn=(0,on.ge)(nn)??(0,on.ge)(gn??"1m"),In=Math.floor(Cn/1e3);return Dt.map(fa=>(0,Ut.jM)(fa,ga=>{const sa=ga.relativeTimeRange?.from??0,da=Math.max(In*3,sa+In*2);ga.relativeTimeRange={from:da,to:0}}))}function pn(Dt,nn){return{refId:Dt.refId,datasourceUid:nn,queryType:"",model:Dt,relativeTimeRange:{from:360,to:0}}}function Un(Dt,nn){const gn="A";switch(Dt.type){case"prometheus":return{refId:gn,expr:nn.query};case"loki":return{refId:gn,expr:nn.query};default:throw new Error(`Query for datasource type ${Dt.type} is currently not supported by cloud alert rules.`)}}const Bn=({rule:Dt})=>{const nn=(0,r.useMemo)(()=>new na.t,[]),gn=(0,be.A)(nn.get()),Cn=kn(gn),In=(0,r.useMemo)(()=>mn(Dt),[Dt]),{allDataSourcesAvailable:fa}=(0,Kn.g)(In),ga=(0,r.useCallback)(()=>{if(In.length>0&&fa){let da;Dt&&(0,a.lT)(Dt.rulerRule)&&(da=Dt.rulerRule.grafana_alert.condition),nn.run(In,da??"A")}},[In,fa,Dt,nn]);(0,r.useEffect)(()=>{fa&&ga()},[fa,ga]),(0,r.useEffect)(()=>()=>nn.destroy(),[nn]);const sa=(0,a.YN)(Dt.group);return r.createElement(r.Fragment,null,Cn?"Loading...":r.createElement(r.Fragment,null,(0,a.lT)(Dt.rulerRule)&&!sa&&r.createElement(ot,{rule:Dt,condition:Dt.rulerRule.grafana_alert.condition,queries:In,evalDataByQuery:gn}),!(0,a.lT)(Dt.rulerRule)&&!sa&&gn&&Object.keys(gn).length>0&&r.createElement(s.B,{direction:"column",gap:1},In.map(da=>r.createElement(ft,{key:da.refId,rule:Dt,refId:da.refId,model:da.model,dataSource:Object.values(re.$.datasources).find(Ma=>Ma.uid===da.datasourceUid),queryData:gn[da.refId],relativeTimeRange:da.relativeTimeRange,isAlertCondition:!1}))),!sa&&!fa&&r.createElement(o.F,{title:"Query not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")))};function kn(Dt){return Dt?!!Object.values(Dt).find(nn=>nn.state===pe.Gu.Loading):!0}const Mn=()=>r.createElement(r.Fragment,null,"Routing");var xn=(Dt=>(Dt.Query="query",Dt.Instances="instances",Dt.History="history",Dt.Routing="routing",Dt.Details="details",Dt))(xn||{});const Vn=()=>{const{rule:Dt}=(0,w.k)(),{pageNav:nn,activeTab:gn}=Ca(Dt),[Cn,In]=(0,r.useState)(),[fa,ga]=k(),sa=K({handleDuplicateRule:In,handleDelete:ga}),{annotations:da,promRule:Ma}=Dt,_a=Hn(Dt.promRule?.health),Xa=(0,a.Z8)(Ma),ps=(0,a.YN)(Dt.group),As=(0,a.lT)(Dt.rulerRule)&&!!Dt.rulerRule.grafana_alert.provenance,ys=da[p.YH.summary];return r.createElement(y.d,{pageNav:nn,navId:"alert-list",isLoading:!1,renderTitle:vs=>r.createElement(_n,{name:vs,state:Xa?Ma.state:void 0,health:Dt.promRule?.health,ruleType:Dt.promRule?.type}),actions:sa,info:aa(Dt),subTitle:r.createElement(s.B,{direction:"column"},ys,ps&&r.createElement(ee,null),As&&r.createElement(C.Yi,{resource:C.hk.AlertRule,bottomSpacing:0,topSpacing:2}),_a&&r.createElement(o.F,{title:"Something went wrong when evaluating this alert rule",bottomSpacing:0,topSpacing:2},r.createElement("pre",{style:{marginBottom:0}},r.createElement("code",null,Dt.promRule?.lastError??"No error message"))))},r.createElement(s.B,{direction:"column",gap:2},r.createElement(m.J,null,gn==="query"&&r.createElement(Bn,{rule:Dt}),gn==="instances"&&r.createElement(We,{rule:Dt}),gn==="history"&&(0,a.lT)(Dt.rulerRule)&&r.createElement(Me,{rule:Dt.rulerRule}),gn==="routing"&&r.createElement(Mn,null),gn==="details"&&r.createElement(ue,{rule:Dt}))),fa,Cn&&r.createElement(M.Z,{redirectTo:!0,identifier:Cn,isProvisioned:As,onDismiss:()=>In(void 0)}))},aa=Dt=>{const{labels:nn,annotations:gn,group:Cn}=Dt,In=[],fa=gn[p.YH.runbookURL],ga=gn[p.YH.dashboardUID],sa=gn[p.YH.panelID],da=ga&&sa,Ma=ga,_a=!(0,n.isEmpty)(nn),Xa=Cn.interval;return fa&&In.push({label:"Runbook",value:r.createElement(i.Y,{variant:"bodySmall",href:fa,external:!0},(0,n.truncate)(fa,{length:42}))}),da?In.push({label:"Dashboard and panel",value:r.createElement(D,{title:Dt.name,component:r.createElement(i.Y,{variant:"bodySmall",href:(0,b.D2)(ga,sa)},"View panel")})}):Ma&&In.push({label:"Dashboard",value:r.createElement(D,{title:Dt.name,component:r.createElement(i.Y,{title:Dt.name,variant:"bodySmall",href:(0,b.JM)(ga)},"View dashboard")})}),Xa&&In.push({label:"Evaluation interval",value:r.createElement(l.E,{color:"primary"},"Every ",Xa)}),_a&&In.push({label:"Labels",value:r.createElement(P.m,{labels:nn,size:"sm"})}),In},Jn=Dt=>{const nn=new URLSearchParams([["search",Dt.map(([gn,Cn])=>`${gn}:"${Cn}"`).join(" ")]]);return(0,h.c)("/alerting/list?"+nn.toString())},_n=({name:Dt,state:nn,health:gn,ruleType:Cn})=>{const In=(0,d.of)(dn),fa=Cn===u.JS.Recording;return r.createElement("div",{className:In.title},r.createElement(c.z9,{variant:"secondary",icon:"angle-left",href:"/alerting/list"}),r.createElement(l.E,{variant:"h1",truncate:!0},Dt),nn&&r.createElement(Z,{state:nn,health:gn}),fa&&r.createElement(q,{health:gn}))},Hn=Dt=>Dt==="error"||Dt==="err";function ba(){const[Dt,nn]=(0,g.s)(),gn=Dt.tab;return[va(gn)?gn:"query",fa=>{nn({tab:fa})}]}function va(Dt){return typeof Dt=="string"&&Object.values(xn).includes(Dt)}function Ca(Dt){const[nn,gn]=ba(),{annotations:Cn,promRule:In}=Dt,fa=Cn[p.YH.summary],ga=(0,a.Z8)(In),sa=ga?(In.alerts??[]).length:void 0,da=(0,T.EL)(Dt.namespace).name,Ma=Dt.group.name,_a=(0,a.lT)(Dt.rulerRule)&&ga,Xa=(0,a.KB)(Dt.promRule);return{pageNav:{...E.defaultPageNav,text:Dt.name,subTitle:fa,children:[{text:"Query and conditions",active:nn==="query",onClick:()=>{gn("query")}},{text:"Instances",active:nn==="instances",onClick:()=>{gn("instances")},tabCounter:sa,hideFromTabs:Xa},{text:"History",active:nn==="history",onClick:()=>{gn("history")},hideFromTabs:!_a},{text:"Details",active:nn==="details",onClick:()=>{gn("details")}}],parentItem:{text:Ma,url:Jn([["namespace",da],["group",Ma]]),parentItem:{text:da,url:Jn([["namespace",da]])}}},activeTab:nn}}const dn=()=>({title:(0,t.css)({display:"flex",alignItems:"center",gap:8,minWidth:0})}),pt=Vn},80045:(Q,I,e)=>{"use strict";e.d(I,{D:()=>C});var t=e(96540),n=e(8249),r=e(47232),s=e(74135),o=e(23662),m=e(69087),i=e(75591),l=e(4402),d=e(83122),c=e(29158),g=e(24401),u=e(30973);const E=({rule:D,instance:T,extensionPointId:M})=>{const[O,S]=(0,t.useState)(),x=p({instance:T,rule:D},M);if(x.length===0)return null;const A=t.createElement(u.w,{extensions:x,onSelect:S});return t.createElement(t.Fragment,null,t.createElement(d.m,{placement:"bottom-start",overlay:A},t.createElement(c.K,{name:"ellipsis-v","aria-label":"Actions",variant:"secondary"})),!!O&&!!O.path&&t.createElement(g.s,{path:O.path,title:O.title,onDismiss:()=>S(void 0)}))};function p(D,T){return(0,t.useMemo)(()=>{const{extensions:M}=(0,l.Kf)({extensionPointId:T,context:D,limitPerPlugin:3});return M},[D,T])}var b=e(33225),a=e(71223),h=e(84396);const P=({instance:D})=>{const T=(0,b.Hx)(D.annotations),M=(0,b.gO)(T);return t.createElement("div",null,D.value&&t.createElement(h.X,{label:"Value",horizontal:!0},D.value),T.map(([O,S])=>t.createElement(a.s,{key:O,annotationKey:O,value:S,valueLink:M.get(O)})))};var y=e(30423);const C=({rule:D,instances:T,pagination:M,footerRow:O})=>{const S=(0,t.useMemo)(()=>T.length>1?(0,n.yO)(T.map(x=>x.labels)):{},[T]),v=(0,t.useMemo)(()=>T.map(x=>({data:{rule:D,alert:{...x,commonLabels:S}},id:(0,o.RI)(x)})),[S,T,D]);return t.createElement(i.E,{cols:f,isExpandable:!0,items:v,renderExpandedContent:({data:x})=>t.createElement(P,{instance:x.alert}),pagination:M,footerRow:O})},f=[{id:"state",label:"State",renderCell:({data:{alert:{state:D}}})=>t.createElement(y.C,{state:D}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:D,commonLabels:T}}})=>t.createElement(m.m,{labels:D,commonLabels:T,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:D}}})=>t.createElement(t.Fragment,null,D.startsWith("0001")?"-":(0,r.KQ)(D).format("YYYY-MM-DD HH:mm:ss")),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:D,rule:T}})=>t.createElement(E,{rule:T,instance:D,extensionPointId:s.S.AlertInstanceAction,key:"alert-instance-extension-point"}),size:"40px"}]},30423:(Q,I,e)=>{"use strict";e.d(I,{C:()=>s});var t=e(96540),n=e(23662),r=e(65415);const s=t.memo(({state:o,isPaused:m=!1,size:i="md",muted:l=!1})=>t.createElement(r.O,{state:(0,n.Wy)(o),size:i,muted:l},(0,n.XI)(o)," ",m?" (Paused)":""));s.displayName="AlertStateTag"},51921:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(96540),n=e(58476),r=e(96374),s=e(55852),o=e(18461);function m({identifier:l,isProvisioned:d,redirectTo:c=!1,onDismiss:g}){const u=(0,n.zy)(),[E,p]=(0,t.useState)(d?"confirm":"redirect");if(E==="redirect"){const b=o.$9(l),a=u.pathname+u.search,h=new URLSearchParams({copyFrom:b,returnTo:c?a:""});return t.createElement(n.rd,{to:"/alerting/new?"+h.toString(),push:!0})}return t.createElement(r.u,{isOpen:E==="confirm",title:"Copy provisioned alert rule",body:t.createElement("div",null,t.createElement("p",null,"The new rule will ",t.createElement("strong",null,"not")," be marked as a provisioned rule."),t.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>p("redirect"),onDismiss:g})}const i=t.forwardRef(({text:l,ruleIdentifier:d,isProvisioned:c,className:g},u)=>{const[E,p]=(0,t.useState)(!1);return t.createElement(t.Fragment,null,t.createElement(s.$n,{title:"Copy",className:g,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>p(!0),ref:u},l),E&&t.createElement(m,{identifier:d,isProvisioned:c,onDismiss:()=>p(!1)}))});i.displayName="CloneRuleButton"},15300:(Q,I,e)=>{"use strict";e.d(I,{Ys:()=>De,DI:()=>Fe});var t=e(32196),n=e(96540),r=e(72724),s=e(47232),o=e(40845),m=e(56034),i=e(97814),l=e(33225),d=e(23662),c=e(25968),g=e(69087),u=e(84396),E=e(2543),p=e(40672),b=e(14778),a=e(32264),h=e(55852),P=e(66864),y=e(83122),C=e(38138),f=e(14578),D=e(96374),T=e(31678),M=e(94822),O=e(19073),S=e(46013),v=e(23770),x=e(98164),A=e(55740),R=e(57220),B=e(56361),U=e(18461),w=e(68291),K=e(51921);const N=({rule:ze,rulesSource:xe})=>{const We=(0,o.of)(V),{group:be}=ze,{StateHistoryModal:pe,showStateHistoryModal:Ue}=(0,S.G)(),we=(0,T.useDispatch)(),je=(0,b.i)(),[He,rt]=(0,n.useState)(),[Je,Ve]=(0,n.useState)(void 0),Oe=(0,R.z2)(xe)?xe:(0,x.F9)(xe.jsonData.alertmanagerUid)?.name,[Ne,ye]=(0,O.mh)(ze,O.j5.Silence),[se,ae]=(0,O.mh)(ze,O.j5.Explore),ge=[],Pe=[],Re=[],Be=()=>{if(He&&He.rulerRule){const st=U.P1((0,R.EV)(He.namespace.rulesSource),He.namespace.name,He.group.name,He.rulerRule);we((0,v.KH)(st,{navigateTo:void 0})),rt(void 0)}},_e=(0,d.YN)(be),Xe=(0,d.Z8)(ze.promRule)&&ze.promRule.state===M.cF.Firing,tt=Ne&&ye&&Oe,at=()=>(0,B.S2)(xe,ze);if((0,R.Eb)(xe)&&se&&ae&&!_e&&ge.push(n.createElement(h.z9,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"_blank",href:(0,B.Yp)(xe,ze.query)},"See graph")),ze.annotations[A.YH.runbookURL]&&ge.push(n.createElement(h.z9,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"_blank",href:p.sQ.sanitizeUrl(ze.annotations[A.YH.runbookURL])},"View runbook")),ze.annotations[A.YH.dashboardUID]){const st=ze.annotations[A.YH.dashboardUID],dt=a.$.featureToggles.returnToPrevious;if(st){ge.push(n.createElement(h.z9,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:dt?void 0:"_blank",href:`d/${encodeURIComponent(st)}`,onClick:()=>{je(ze.name)}},"Go to dashboard"));const ot=ze.annotations[A.YH.panelID];ot&&ge.push(n.createElement(h.z9,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:dt?void 0:"_blank",href:`d/${encodeURIComponent(st)}?viewPanel=${encodeURIComponent(ot)}`,onClick:()=>{je(ze.name)}},"Go to panel"))}}return tt&&ge.push(n.createElement(h.z9,{size:"sm",key:"silence",icon:"bell-slash",target:"_blank",href:(0,B.t7)(Oe,ze)},"Silence")),(0,d.lT)(ze.rulerRule)&&ge.push(n.createElement(n.Fragment,{key:"history"},n.createElement(h.$n,{size:"sm",icon:"history",onClick:()=>(0,d.lT)(ze.rulerRule)&&Ue(ze.rulerRule)},"Show state history"),pe)),Xe&&L()&&ge.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(w.b,{title:ze.name,url:at()}))),ge.length||Pe.length||Re.length?n.createElement(n.Fragment,null,n.createElement("div",{className:We.wrapper},n.createElement(P.Gy,{width:"auto"},ge.length?ge:n.createElement("div",null)),n.createElement(P.Gy,{width:"auto"},Pe.length&&Pe,Re.length&&n.createElement(y.m,{overlay:n.createElement(C.W,null,Re.map(st=>n.createElement(n.Fragment,{key:(0,E.uniqueId)("action_")},st)))},n.createElement(h.$n,{variant:"secondary",size:"sm"},"More",n.createElement(f.I,{name:"angle-down"}))))),!!He&&n.createElement(D.u,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Be,onDismiss:()=>rt(void 0)}),Je&&n.createElement(K.Z,{identifier:Je.identifier,isProvisioned:Je.isProvisioned,onDismiss:()=>Ve(void 0)})):null};function L(){return!(0,B.y$)()||(0,B.ES)()}const V=ze=>({wrapper:(0,t.css)`
    padding: 0 0 ${ze.spacing(2)} 0;
    gap: ${ze.spacing(1)};
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${ze.colors.border.medium};
  `});var F=e(71223);function z(ze){const xe=(0,o.of)(Y),{annotations:We}=ze,be=(0,l.gO)(We);return We.length===0?null:n.createElement("div",{className:xe.annotations},We.map(([pe,Ue])=>n.createElement(F.s,{key:pe,annotationKey:pe,value:Ue,valueLink:be.get(pe)})))}const Y=()=>({annotations:(0,t.css)`
    margin-top: 46px;
  `});var H=e(19347),k=e(66718);function ee(ze){const{rulesSource:xe,rule:We}=ze,be=(0,o.of)(ie),pe=(0,n.useMemo)(()=>{if((0,R.Eb)(xe))return[{name:xe.name,icon:xe.meta.info.logos.small}];if((0,d.lT)(We.rulerRule)){const{data:Ue}=We.rulerRule.grafana_alert,we=Ue.reduce((je,He)=>{const rt=(0,H.l)().getInstanceSettings(He.datasourceUid);return!rt||rt.uid===k.Uj||(je[rt.name]={name:rt.name,icon:rt.meta.info.logos.small}),je},{});return Object.values(we)}return[]},[We,xe]);return pe.length===0?null:n.createElement(u.X,{label:"Data source"},pe.map(({name:Ue,icon:we},je)=>n.createElement("div",{key:Ue},we&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${Ue} datasource logo`,className:be.dataSourceIcon,src:we})," "),Ue)))}function ie(ze){const xe=ze.spacing(2);return{dataSourceIcon:(0,t.css)`
      width: ${xe};
      height: ${xe};
    `}}var fe=e(28848),q=e(29317),Z=e(41781),J=e(72307),G=e(71713),ne=e(69470),te=e(73750);const oe=({language:ze,expr:xe})=>{const We=(0,n.useMemo)(()=>[(0,Z.D)({onlyIn:pe=>"type"in pe&&pe.type==="code_block",getSyntax:()=>ze},{...fe.languages,[ze]:ze==="logql"?G.Ay:ne.Ay})],[ze]),be=(0,n.useMemo)(()=>(0,J.mO)(xe),[xe]);return n.createElement(q.KE,{"data-testid":"expression-editor",plugins:We,value:be})},le=({expression:ze,rulesSource:xe})=>{const We=(0,o.of)(ue);return n.createElement(te.L,{className:(0,t.cx)(We.well,"slate-query-field")},(0,R.Eb)(xe)?n.createElement(oe,{expr:ze,language:xe.type===R.ol.Loki?"logql":"promql"}):ze)},ue=ze=>({well:(0,t.css)`
    font-family: ${ze.typography.fontFamilyMonospace};
  `});function Te(ze){const{annotations:xe,rulesSource:We,rule:be}=ze,pe=he();return(0,R.Eb)(We)?n.createElement(u.X,{label:"Expression",horizontal:!0,className:(0,t.cx)({[pe.exprRow]:!!xe.length})},n.createElement(le,{expression:be.query,rulesSource:We})):null}const he=()=>({exprRow:(0,t.css)`
    margin-bottom: 46px;
  `});var re=e(99938);const De=15,Fe=({rule:ze})=>{const xe=(0,o.of)(Me),{namespace:{rulesSource:We}}=ze,be=(0,l.Hx)(ze.annotations);return n.createElement("div",null,n.createElement(N,{rule:ze,rulesSource:We}),n.createElement("div",{className:xe.wrapper},n.createElement("div",{className:xe.leftSide},n.createElement(Ee,{rule:ze}),!!ze.labels&&!!Object.keys(ze.labels).length&&n.createElement(u.X,{label:"Labels",horizontal:!0},n.createElement(g.m,{labels:ze.labels})),n.createElement(Te,{rulesSource:We,rule:ze,annotations:be}),n.createElement(z,{annotations:be})),n.createElement("div",{className:xe.rightSide},n.createElement(ee,{rulesSource:We,rule:ze}))),n.createElement(u.X,{label:"Matching instances",horizontal:!0},n.createElement(re.s,{rule:ze,itemsDisplayLimit:De})))},Ee=({rule:ze})=>{let xe,We=ze.group.interval,be=ze.promRule?.lastEvaluation,pe=ze.promRule?.evaluationTime;return(0,d.i7)(ze.rulerRule)||(xe=ze.rulerRule?.for??"0s"),n.createElement(n.Fragment,null,We&&n.createElement(u.X,{label:"Evaluate",horizontal:!0},"Every ",We),n.createElement(u.X,{label:"Pending period",horizontal:!0},xe),be&&!(0,c.mo)(be)&&n.createElement(u.X,{label:"Last evaluation",horizontal:!0},n.createElement(m.m,{placement:"top",content:`${(0,r.LE)(be,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.KQ)(be).locale("en").fromNow(!0)} ago`))),be&&!(0,c.mo)(be)&&pe!==void 0&&n.createElement(u.X,{label:"Evaluation time",horizontal:!0},n.createElement(m.m,{placement:"top",content:`${pe}s`,theme:"info"},n.createElement("span",null,(0,i.g)({timeInMs:pe*1e3,humanize:!0})))))},Me=ze=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: row;

    ${ze.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,t.css)`
    flex: 1;
  `,rightSide:(0,t.css)`
    ${ze.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},99938:(Q,I,e)=>{"use strict";e.d(I,{s:()=>f});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(55852),m=e(53876),i=e(78369),l=e(60029),d=e(94354),c=e(94822);const g=({className:M,onStateFilterChange:O,stateFilter:S,filterType:v,itemPerStateStats:x})=>{const A=(0,s.of)(u),R=N=>function(){return x&&x[N]?r.createElement(i.v,{name:x[N].toFixed(0),colorIndex:9,className:A.tag}):null},B=Object.values(c.Gi).map(N=>({label:N,value:N,component:R(N)})),w=[c.cF.Firing,c.cF.Pending].map(N=>({label:(0,n.capitalize)(N),value:N,component:R(N)})),K=v==="grafana"?B:w;return r.createElement("div",{className:M,"data-testid":"alert-instance-state-filter"},r.createElement(l.J,null,"State"),r.createElement(d.z,{options:K,value:S,onChange:O,onClick:N=>{N===S&&O(void 0)}}))};function u(M){return{tag:(0,t.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${M.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${M.spacing(.5)};
    `}}var E=e(98164),p=e(56361),b=e(64861),a=e(57220),h=e(23662),P=e(80045),y=e(92467);function C({stats:M,onClick:O,href:S}){const v=(0,s.of)(T);return r.createElement("div",{className:v.footerRow},r.createElement("div",null,"Showing ",M.visibleItemsCount," out of ",M.totalItemsCount," instances"),r.createElement(o.z9,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:O,href:S},"Show all ",M.totalItemsCount," alert instances"))}function f(M){const{rule:O,itemsDisplayLimit:S=Number.POSITIVE_INFINITY,pagination:v,enableFiltering:x=!1}=M,{promRule:A,namespace:R,instanceTotals:B}=O,[U,w]=(0,r.useState)(),[K,N]=(0,r.useState)(),[L]=(0,r.useState)(Math.floor(Math.random()*100)),V=`queryString-${L}`,F=(0,s.of)(T),z=(0,a.z2)(R.rulesSource)?a.hY:"prometheus",Y=(0,r.useMemo)(()=>(0,h.Z8)(A)&&A.alerts?.length?D(U,K,(0,p.Cp)(b.xB.Importance,A.alerts)):[],[A,K,U]);if(!(0,h.Z8)(A))return null;const H=Y.slice(0,S),k=(0,n.countBy)(A.alerts,ne=>(0,c.lh)(ne.state)),ee=(0,n.sum)([B.alerting,B.inactive,B.pending,B.nodata]),ie=ee-H.length,fe={totalItemsCount:ee,visibleItemsCount:H.length},q=(0,p.w$)(R.rulesSource,M.rule,location.pathname+location.search),Z=(0,y.kc)(B),J=()=>N(void 0),G=ie?r.createElement(C,{stats:fe,onClick:x?J:void 0,href:x?void 0:q}):void 0;return r.createElement(r.Fragment,null,x&&r.createElement("div",{className:(0,t.cx)(F.flexRow,F.spaceBetween)},r.createElement("div",{className:F.flexRow},r.createElement(m.X,{key:V,defaultQueryString:U,onFilterChange:ne=>w(ne)}),r.createElement(g,{filterType:z,stateFilter:K,onStateFilterChange:N,itemPerStateStats:k}))),!x&&r.createElement("div",{className:F.stats},Z),r.createElement(P.D,{rule:O,instances:H,pagination:v,footerRow:G}))}function D(M,O,S){let v=[...S];if(M){const x=(0,E.J$)(M||"");v=v.filter(({labels:A})=>(0,E.Av)(A,x))}return O&&(v=v.filter(x=>(0,c.lh)(x.state)===O)),v}const T=M=>({flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${M.spacing(1)};
      gap: ${M.spacing(1)};
    `,spaceBetween:(0,t.css)`
      justify-content: space-between;
    `,footerRow:(0,t.css)`
      display: flex;
      flex-direction: column;
      gap: ${M.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,t.css)`
      margin-bottom: ${M.spacing(2)};
    `,stats:(0,t.css)`
      display: flex;
      gap: ${M.spacing(1)};
      padding: ${M.spacing(1,0)};
    `})},92467:(Q,I,e)=>{"use strict";e.d(I,{M_:()=>g,j7:()=>u,kc:()=>E});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(96540),m=e(67061),i=e(39938),l=e(54317),d=e(94822);const c={recording:0,alerting:0,[d.cF.Pending]:0,[d.cF.Inactive]:0,paused:0,error:0,nodata:0},g=({namespaces:p})=>{const b={...c};p.forEach(({groups:y})=>{y.forEach(C=>{const f=(0,t.omitBy)(C.totals,t.isUndefined);for(let D in f)b[D]+=f[D]})});const a=E(b),h=!!a.length,P=(0,t.sum)(Object.values(b));return a.unshift(o.createElement(o.Fragment,{key:"total"},P," ",s()("rule",P))),o.createElement(m.B,{direction:"row"},h&&o.createElement("div",null,o.createElement(m.B,{gap:.5},a)))},u=({group:p})=>{const b=p.totals,a=p?.interval,h=E(b),P=!!h.length;return o.createElement(m.B,{direction:"row"},P&&o.createElement("div",null,o.createElement(m.B,{gap:.5},h)),a&&o.createElement(o.Fragment,null,o.createElement("div",null,"|"),o.createElement(i.E,{text:a,icon:"clock-nine",color:"blue"})))};function E(p){const b=[];return p[l.$.Alerting]&&b.push(o.createElement(i.E,{color:"red",key:"firing",text:`${p[l.$.Alerting]} firing`})),p.error&&b.push(o.createElement(i.E,{color:"red",key:"errors",text:`${p.error} errors`})),p.nodata&&b.push(o.createElement(i.E,{color:"blue",key:"nodata",text:`${p.nodata} no data`})),p[l.$.Pending]&&b.push(o.createElement(i.E,{color:"orange",key:"pending",text:`${p[l.$.Pending]} pending`})),p[l.$.Normal]&&p.paused&&b.push(o.createElement(i.E,{color:"green",key:"paused",text:`${p[l.$.Normal]} normal (${p.paused} paused)`})),p[l.$.Normal]&&!p.paused&&b.push(o.createElement(i.E,{color:"green",key:"inactive",text:`${p[l.$.Normal]} normal`})),p.recording&&b.push(o.createElement(i.E,{color:"purple",key:"recording",text:`${p.recording} recording`})),b}},14618:(Q,I,e)=>{"use strict";e.d(I,{s:()=>ue});var t=e(32196),n=e(72880),r=e(91e3),s=e(96540),o=e(70416),m=e(47232),i=e(72724),l=e(40845),d=e(56034),c=e(15054),g=e(83903),u=e(55740),E=e(23662),p=e(75591),b=e(10562),a=e(48205),h=e(82437),P=e(16577),y=e(2543),C=e(58476),f=e(55852),D=e(10534),T=e(38138),M=e(67061),O=e(83122),S=e(14578),v=e(96374),x=e(3169),A=e(31678),R=e(19073),B=e(23770),U=e(57220),w=e(56361),K=e(18461),N=e(3704),L=e(51921);const V=re=>window.matchMedia(`(max-width: ${re}px)`).matches,F=({rule:re,rulesSource:De})=>{const Fe=(0,A.useDispatch)(),Ee=(0,C.zy)(),Me=(0,x._2)(),ze=(0,l.of)(Y),[xe,We]=(0,s.useState)(void 0),{namespace:be,group:pe,rulerRule:Ue}=re,[we,je]=(0,s.useState)(),He=Ee.pathname+Ee.search,rt=z(Ee.pathname),Je=(0,E.lT)(re.rulerRule)&&!!re.rulerRule.grafana_alert.provenance,[Ve,Oe]=(0,R.mh)(re,R.j5.Update),[Ne,ye]=(0,R.mh)(re,R.j5.Delete),[se,ae]=(0,R.mh)(re,R.j5.Duplicate),[ge,Pe]=(0,R.mh)(re,R.j5.ModifyExport),Re=Ve&&Oe,Be=Ne&&ye,_e=se&&ae,Xe=ge&&Pe,tt=[],at=[],st=()=>{if(we&&we.rulerRule){const ft=K.P1((0,U.EV)(we.namespace.rulesSource),we.namespace.name,we.group.name,we.rulerRule);Fe((0,B.KH)(ft,{navigateTo:rt?"/alerting/list":void 0})),je(void 0)}},dt=()=>(0,w.S2)(De,re),ot=(0,U.EV)(De);if(rt||tt.push(s.createElement(d.m,{placement:"top",content:"View"},s.createElement(f.z9,{className:ze.button,title:"View",size:"sm",key:"view",variant:"secondary",icon:"eye",href:(0,w.w$)(De,re,He)}))),Ue){const ft=K.P1(ot,be.name,pe.name,Ue);if(Re){const yt=(0,N.c)(`/alerting/${encodeURIComponent(K.$9(ft))}/edit`,{returnTo:He});tt.push(s.createElement(d.m,{placement:"top",content:"Edit"},s.createElement(f.z9,{title:"Edit",className:ze.button,size:"sm",key:"edit",variant:"secondary",icon:"pen",href:yt})))}rt&&tt.push(s.createElement(D.b,{key:"copy",icon:"copy",onClipboardError:yt=>{Me.error("Error while copying URL",yt)},className:ze.button,size:"sm",getText:dt},"Copy link to rule")),_e&&at.push(s.createElement(T.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>We({identifier:ft,isProvisioned:Je})})),Xe&&at.push(s.createElement(T.W.Item,{label:"Modify export",icon:"edit",url:(0,N.c)(`/alerting/${encodeURIComponent(K.$9(ft))}/modify-export`,{returnTo:Ee.pathname+Ee.search})})),Be&&at.push(s.createElement(T.W.Item,{label:"Delete",icon:"trash-alt",onClick:()=>je(re)}))}return tt.length||at.length?s.createElement(s.Fragment,null,s.createElement(M.B,{gap:1},tt.map((ft,yt)=>s.createElement(s.Fragment,{key:yt},ft)),at.length>0&&s.createElement(O.m,{overlay:s.createElement(T.W,null,at.map(ft=>s.createElement(s.Fragment,{key:(0,y.uniqueId)("action_")},ft)))},s.createElement(f.$n,{variant:"secondary",size:"sm"},"More",s.createElement(S.I,{name:"angle-down"})))),!!we&&s.createElement(v.u,{isOpen:!0,title:"Delete rule",body:s.createElement("div",null,s.createElement("p",null,'Deleting "',s.createElement("strong",null,we.name),'" will permanently remove it from your alert rule list.'),s.createElement("p",null,"Are you sure you want to delete this rule?")),confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:st,onDismiss:()=>je(void 0)}),xe&&s.createElement(L.Z,{identifier:xe.identifier,isProvisioned:xe.isProvisioned,onDismiss:()=>We(void 0)})):null};function z(re){return re.endsWith("/view")}const Y=re=>({button:(0,t.css)`
    padding: 0 ${re.spacing(2)};
  `});var H=e(32264),k=e(82775);function ee({rule:re}){const De=(0,l.of)(ie),{exceedsLimit:Fe}=(0,s.useMemo)(()=>(0,k.q)(re.group.interval),[re.group.interval]);return Fe?s.createElement(d.m,{theme:"error",content:s.createElement("div",null,"A minimum evaluation interval of"," ",s.createElement("span",{className:De.globalLimitValue},H.$.unifiedAlerting.minInterval)," has been configured in Grafana and will be used instead of the ",re.group.interval," interval configured for the Rule Group.")},s.createElement(S.I,{name:"stopwatch-slash",className:De.icon})):null}function ie(re){return{globalLimitValue:(0,t.css)`
      font-weight: ${re.typography.fontWeightBold};
    `,icon:(0,t.css)`
      fill: ${re.colors.warning.text};
    `}}var fe=e(15300),q=e(47775);const Z=({rule:re})=>{const De=(0,l.of)(J);return(0,q.lf)(re.health)?s.createElement(d.m,{theme:"error",content:re.lastError||"No error message provided."},s.createElement("div",{className:De.warn},s.createElement(S.I,{name:"exclamation-triangle"}),s.createElement("span",null,"error"))):s.createElement(s.Fragment,null,re.health)},J=re=>({warn:(0,t.css)`
    display: inline-flex;
    flex-direction: row;
    align-items: center;
    gap: ${re.spacing(1)};

    color: ${re.colors.warning.text};
  `});var G=e(62930),ne=e(94822),te=e(30423);const oe=({rule:re,isDeleting:De,isCreating:Fe,isPaused:Ee})=>{const Me=(0,l.of)(le),{promRule:ze}=re,xe=(0,s.useMemo)(()=>{if(ze&&(0,E.Z8)(ze)&&ze.alerts?.length&&ze.state!==ne.cF.Inactive){const We=ze.activeAt?new Date(ze.activeAt):(0,E.Om)(ze);if(We)return s.createElement("span",{title:String(We),className:Me.for},"for"," ",(0,o.dU)({start:We,end:new Date},!1))}return null},[ze,Me]);return De?s.createElement(M.B,{gap:1},s.createElement(G.y,null),"Deleting"):Fe?s.createElement(M.B,{gap:1},s.createElement(G.y,null),"Creating"):ze&&(0,E.Z8)(ze)?s.createElement(M.B,{gap:1},s.createElement(te.C,{state:ze.state,isPaused:Ee}),xe):ze&&(0,E.KB)(ze)?s.createElement(s.Fragment,null,"Recording rule"):s.createElement(s.Fragment,null,"n/a")},le=re=>({for:(0,t.css)`
    font-size: ${re.typography.bodySmall.fontSize};
    color: ${re.colors.text.secondary};
    white-space: nowrap;
    padding-top: 2px;
  `}),ue=({rules:re,className:De,showGuidelines:Fe=!1,emptyMessage:Ee="No rules found.",showGroupColumn:Me=!1,showSummaryColumn:ze=!1,showNextEvaluationColumn:xe=!1})=>{const We=(0,l.of)(Te),be=(0,t.cx)(We.wrapper,De,{[We.wrapperMargin]:Fe}),pe=(0,s.useMemo)(()=>re.map((je,He)=>({id:`${je.namespace.name}-${je.group.name}-${je.name}-${He}`,data:je})),[re]),Ue=he(ze,Me,xe);if(!re.length)return s.createElement("div",{className:(0,t.cx)(be,We.emptyMessage)},Ee);const we=Fe?b.B:p.E;return s.createElement("div",{className:be,"data-testid":"rules-table"},s.createElement(we,{cols:Ue,isExpandable:!0,items:pe,renderExpandedContent:({data:je})=>s.createElement(fe.DI,{rule:je}),pagination:{itemsPerPage:c.FG},paginationStyles:We.pagination}))},Te=re=>({wrapperMargin:(0,t.css)`
    ${re.breakpoints.up("md")} {
      margin-left: 36px;
    }
  `,emptyMessage:(0,t.css)`
    padding: ${re.spacing(1)};
  `,wrapper:(0,t.css)`
    width: auto;
    border-radius: ${re.shape.radius.default};
  `,pagination:(0,t.css)`
    display: flex;
    margin: 0;
    padding-top: ${re.spacing(1)};
    padding-bottom: ${re.spacing(.25)};
    justify-content: center;
    border-left: 1px solid ${re.colors.border.medium};
    border-right: 1px solid ${re.colors.border.medium};
    border-bottom: 1px solid ${re.colors.border.medium};
  `});function he(re,De,Fe){const{hasRuler:Ee,rulerRulesLoaded:Me}=(0,g.y)(),ze=(0,s.useCallback)(xe=>{const We=xe.promRule?.lastEvaluation&&(0,o.vd)(xe.promRule.lastEvaluation),be=xe.group.interval&&(0,o.di)(xe.group.interval);if(!We||!be||(0,E.HH)(xe))return;const pe=(0,o.E9)(xe.group.interval),Ue=Date.parse(xe.promRule?.lastEvaluation||""),we=(0,o.Ri)(Ue,pe);return(0,n.Y)(we,new Date)?{humanized:`within ${(0,r.a)(pe)}`,fullDate:`within ${(0,r.a)(pe)}`}:{humanized:`in ${(0,m.KQ)(we).locale("en").fromNow(!0)}`,fullDate:(0,i.LE)(we,{format:"YYYY-MM-DD HH:mm:ss"})}},[]);return(0,s.useMemo)(()=>{const xe=[{id:"state",label:"State",renderCell:({data:We})=>{const{namespace:be}=We,{rulesSource:pe}=be,{promRule:Ue,rulerRule:we}=We,je=!!(Ee(pe)&&Me(pe)&&Ue&&!we),He=!!(Ee(pe)&&Me(pe)&&we&&!Ue),rt=(0,E.HH)(We);return s.createElement(oe,{rule:We,isDeleting:je,isCreating:He,isPaused:rt})},size:"165px"},{id:"name",label:"Name",renderCell:({data:We})=>We.name,size:Fe?4:5},{id:"provisioned",label:"",renderCell:({data:We})=>{const be=We.rulerRule;return(0,E.lT)(be)&&be.grafana_alert.provenance?s.createElement(a.rS,null):null},size:"100px"},{id:"warnings",label:"",renderCell:({data:We})=>s.createElement(ee,{rule:We}),size:"45px"},{id:"health",label:"Health",renderCell:({data:{promRule:We,group:be}})=>We?s.createElement(Z,{rule:We}):null,size:"75px"}];return re&&xe.push({id:"summary",label:"Summary",renderCell:({data:We})=>s.createElement(P.Y,{input:We.annotations[u.YH.summary]??""}),size:Fe?4:5}),Fe&&xe.push({id:"nextEvaluation",label:"Next evaluation",renderCell:({data:We})=>{const be=ze(We);return be&&s.createElement(d.m,{placement:"top",content:`${be?.fullDate}`,theme:"info"},s.createElement("span",null,be?.humanized))},size:2}),De&&xe.push({id:"group",label:"Group",renderCell:({data:We})=>{const{namespace:be,group:pe}=We;return pe.name==="default"?s.createElement(h.c,{namespace:be.name}):s.createElement(h.c,{namespace:be.name,group:pe.name})},size:5}),xe.push({id:"actions",label:"Actions",renderCell:({data:We})=>s.createElement(F,{rule:We,rulesSource:We.namespace.rulesSource}),size:"200px"}),xe},[re,De,Fe,Ee,Me,ze])}},19073:(Q,I,e)=>{"use strict";e.d(I,{Ej:()=>h,Hl:()=>T,L7:()=>D,QI:()=>g,RY:()=>E,e2:()=>a,iI:()=>f,j5:()=>u,mh:()=>P});var t=e(96540),n=e(16233),r=e(60021),s=e(31678),o=e(82843),m=e(70383),i=e(75471),l=e(57220),d=e(23662),c=e(97009),g=(S=>(S.ViewExternalConfiguration="view-external-configuration",S.UpdateExternalConfiguration="update-external-configuration",S.CreateContactPoint="create-contact-point",S.ViewContactPoint="view-contact-point",S.UpdateContactPoint="edit-contact-points",S.DeleteContactPoint="delete-contact-point",S.ExportContactPoint="export-contact-point",S.CreateNotificationTemplate="create-notification-template",S.ViewNotificationTemplate="view-notification-template",S.UpdateNotificationTemplate="edit-notification-template",S.DeleteNotificationTemplate="delete-notification-template",S.DecryptSecrets="decrypt-secrets",S.CreateNotificationPolicy="create-notification-policy",S.ViewNotificationPolicyTree="view-notification-policy-tree",S.UpdateNotificationPolicyTree="update-notification-policy-tree",S.DeleteNotificationPolicy="delete-notification-policy",S.ExportNotificationPolicies="export-notification-policies",S.ViewAutogeneratedPolicyTree="view-autogenerated-policy-tree",S.CreateSilence="create-silence",S.ViewSilence="view-silence",S.UpdateSilence="update-silence",S.ViewMuteTiming="view-mute-timing",S.CreateMuteTiming="create-mute-timing",S.UpdateMuteTiming="update-mute-timing",S.DeleteMuteTiming="delete-mute-timing",S.ExportMuteTimings="export-mute-timings",S))(g||{}),u=(S=>(S.Duplicate="duplicate-alert-rule",S.View="view-alert-rule",S.Update="update-alert-rule",S.Delete="delete-alert-rule",S.Explore="explore-alert-rule",S.Silence="silence-alert-rule",S.ModifyExport="modify-export-rule",S))(u||{}),E=(S=>(S.CreateAlertRule="create-alert-rule",S.ViewAlertRule="view-alert-rule",S.UpdateAlertRule="update-alert-rule",S.DeleteAlertRule="delete-alert-rule",S.ExportGrafanaManagedRules="export-grafana-managed-rules",S.CreateExternalAlertRule="create-external-alert-rule",S.ViewExternalAlertRule="view-external-alert-rule",S.UpdateExternalAlertRule="update-external-alert-rule",S.DeleteExternalAlertRule="delete-external-alert-rule",S))(E||{});const p=!0,b=!1,a=()=>({"create-alert-rule":O(p,s.AccessControlAction.AlertingRuleCreate),"view-alert-rule":O(p,s.AccessControlAction.AlertingRuleRead),"update-alert-rule":O(p,s.AccessControlAction.AlertingRuleUpdate),"delete-alert-rule":O(p,s.AccessControlAction.AlertingRuleDelete),"export-grafana-managed-rules":O(p,s.AccessControlAction.AlertingRuleRead),"create-external-alert-rule":O(p,s.AccessControlAction.AlertingRuleExternalWrite),"view-external-alert-rule":O(p,s.AccessControlAction.AlertingRuleExternalRead),"update-external-alert-rule":O(p,s.AccessControlAction.AlertingRuleExternalWrite),"delete-external-alert-rule":O(p,s.AccessControlAction.AlertingRuleExternalWrite)}),h=S=>a()[S];function P(S,v){const x=C(S);return(0,t.useMemo)(()=>x[v],[x,v])}function y(S,v){const x=C(S);return useMemo(()=>v.map(A=>x[A]),[x,v])}function C(S){const v=S.namespace.rulesSource,x=typeof v=="string"?v:v.name,A=(0,d.lT)(S.rulerRule)&&!!S.rulerRule.grafana_alert.provenance,R=(0,d.YN)(S.group),B=(0,d.lT)(S.rulerRule),U=A||R,{isEditable:w,isRemovable:K,isRulerAvailable:N=!1,loading:L}=(0,c.g)(x,S.rulerRule),[V,F]=h("export-grafana-managed-rules"),z=L?b:N,Y=U?b:z,H=(0,i.Wd)(x),k=M(v);return{"duplicate-alert-rule":O(z,H.create),"view-alert-rule":O(p,H.read),"update-alert-rule":[Y,w??!1],"delete-alert-rule":[Y,K??!1],"explore-alert-rule":O(p,s.AccessControlAction.DataSourcesExplore),"silence-alert-rule":k,"modify-export-rule":[B,F]}}function f(){const{selectedAlertmanager:S,hasConfigurationAPI:v,isGrafanaAlertmanager:x}=(0,m.VI)(),A=(0,i.lV)(S),R=(0,i.jy)(S),B=n.TP.hasRole("Admin")||n.TP.isGrafanaAdmin;return{"view-external-configuration":O(p,s.AccessControlAction.AlertingNotificationsExternalRead),"update-external-configuration":O(v,s.AccessControlAction.AlertingNotificationsExternalWrite),"create-contact-point":O(v,A.create),"view-contact-point":O(p,A.read),"edit-contact-points":O(v,A.update),"delete-contact-point":O(v,A.delete),"export-contact-point":O(x,A.read),"create-notification-template":O(v,A.create),"view-notification-template":O(p,A.read),"edit-notification-template":O(v,A.update),"delete-notification-template":O(v,A.delete),"create-notification-policy":O(v,A.create),"view-notification-policy-tree":O(p,A.read),"update-notification-policy-tree":O(v,A.update),"delete-notification-policy":O(v,A.delete),"export-notification-policies":O(x,A.read),"decrypt-secrets":O(x,A.provisioning.readSecrets),"view-autogenerated-policy-tree":[x,B],"create-silence":O(p,R.create),"view-silence":O(p,R.read),"update-silence":O(p,R.update),"create-mute-timing":O(v,A.create),"view-mute-timing":O(p,A.read),"update-mute-timing":O(v,A.update),"delete-mute-timing":O(v,A.delete),"export-mute-timings":O(x,A.read)}}function D(S){const v=f();return(0,t.useMemo)(()=>v[S],[v,S])}function T(S){const v=f();return(0,t.useMemo)(()=>S.map(x=>v[x]),[v,S])}function M(S){const v=S===l.hY,{useGetAlertmanagerChoiceStatusQuery:x}=o.m,{currentData:A,isLoading:R}=x(void 0,{skip:!v});if(!v||R)return[!1,!1];const B=A?.alertmanagersChoice===r.nA.External,U=A?.alertmanagersChoice===r.nA.All;return O(!B||U,s.AccessControlAction.AlertingInstanceCreate)}const O=(S,v)=>[S,n.TP.hasPermission(v)]},62190:(Q,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(96540),n=e(57220);function r(s){return(0,t.useMemo)(()=>(0,n.sq)(s),[s])}},36135:(Q,I,e)=>{"use strict";e.d(I,{g:()=>s});var t=e(96540),n=e(19347),r=e(26657);function s(o){return{allDataSourcesAvailable:(0,t.useMemo)(()=>o.filter(i=>!(0,r.s9)(i.datasourceUid)).every(i=>!!(0,n.l)().getInstanceSettings(i.datasourceUid)),[o])}}},730:(Q,I,e)=>{"use strict";e.d(I,{O3:()=>C,ZU:()=>h,we:()=>p});var t=e(96540),n=e(16817),r=e(31678),s=e(79938),o=e(77583),m=e(23770),i=e(57220),l=e(88467),d=e(18461),c=e(23662),g=e(9518),u=e(61410);function E(f,D){const T=b(D),M=useCombinedRuleNamespaces(D),O=useMemo(()=>{if(!f||!D||M.length===0)return[];const S=[];for(const v of M)for(const x of v.groups)for(const A of x.rules)A.name===f&&S.push(A);return S},[f,D,M]);return{...T,result:O}}function p(f,D,T){const M=(0,i.oh)(D),{dsFeatures:O,isLoadingDsFeatures:S}=C(D),{currentData:v,isLoading:x,error:A}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:D,ruleName:f,namespace:T?.namespace,groupName:T?.groupName}),[R]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),{loading:B,error:U,value:w}=(0,n.A)(async()=>{if(!M)throw new Error("Unable to obtain data source settings");if(A)throw new Error("Unable to obtain Prometheus rules");const K=v||[],N=[];if(O?.rulerConfig){const F=O.rulerConfig,z=K.map(Y=>Y.groups.map(H=>({namespace:Y,group:H}))).flat();await Promise.allSettled(z.map(async Y=>{const H=await R({rulerConfig:F,namespace:Y.namespace.name,group:Y.group.name}).unwrap();N.push(H)}))}return K.map(F=>(0,g.O6)(M,F,N)).flatMap(F=>F.groups.flatMap(z=>z.rules))},[M,O,x,A,v,R]);return{loading:S||B,error:U,rules:w}}function b(f,D){const T=useDispatch(),M=useUnifiedAlertingSelector(A=>A.promRules),O=a(f,M),S=useUnifiedAlertingSelector(A=>A.rulerRules),v=a(f,S),{loading:x}=useAsync(async()=>{f&&await T(fetchPromAndRulerRulesAction({rulesSourceName:f,identifier:D}))},[T,f]);return{loading:x,error:O.error??isRulerNotSupportedResponse(v)?void 0:v.error,dispatched:O.dispatched&&v.dispatched}}function a(f,D){if(!f)return initialAsyncRequestState;const T=D[f];return T||initialAsyncRequestState}function h({ruleIdentifier:f}){const{ruleSourceName:D}=f,T=(0,i.oh)(D),{dsFeatures:M,isLoadingDsFeatures:O}=C(D),{currentData:S,isLoading:v,error:x}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:f.ruleSourceName,namespace:(0,c.Mj)(f)||(0,c.X4)(f)?f.namespace:void 0,groupName:(0,c.Mj)(f)||(0,c.X4)(f)?f.groupName:void 0,ruleName:(0,c.Mj)(f)||(0,c.X4)(f)?f.ruleName:void 0}),[A,{currentData:R,isLoading:B,error:U}]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),[w,{currentData:K,isLoading:N,error:L}]=s.hK.endpoints.rulerRules.useLazyQuery();(0,t.useEffect)(()=>{M?.rulerConfig&&(M.rulerConfig&&(0,c.X4)(f)?A({rulerConfig:M.rulerConfig,namespace:f.namespace,group:f.groupName}):(0,c.A4)(f)&&w({rulerConfig:M.rulerConfig}))},[M,A,w,f]);const V=(0,t.useMemo)(()=>{if(S){if((0,c.A4)(f)){const F=(0,g.Ph)("grafana",S,K);for(const z of F)for(const Y of z.groups)for(const H of Y.rules){const k=d.UP(D,H);if(d.LC(k,f))return H}}if(T&&S.length>0&&((0,c.X4)(f)||(0,c.Mj)(f))){const F=S.map(z=>(0,g.O6)(T,z,R?[R]:[]));for(const z of F)for(const Y of z.groups)for(const H of Y.rules){const k=d.UP(D,H);if(d.LC(k,f))return H}}}},[f,D,S,R,K,T]);return{loading:O||v||B||N,error:x??U??L,result:V}}const y={rulerConfig:{dataSourceName:i.hY,apiVersion:"legacy"}};function C(f){const D=(0,i.z2)(f),{currentData:T,isLoading:M}=o.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:f},{skip:D});return D?{isLoadingDsFeatures:!1,dsFeatures:y}:{isLoadingDsFeatures:M,dsFeatures:T}}},9518:(Q,I,e)=>{"use strict";e.d(I,{Jr:()=>E,NW:()=>P,O6:()=>g,Ph:()=>c,Tj:()=>y,Ug:()=>h,dy:()=>d});var t=e(2543),n=e.n(t),r=e(96540),s=e(54317),o=e(94822),m=e(57220),i=e(23662),l=e(61410);function d(S,v){const x=(0,l.$)(U=>U.promRules),A=(0,l.$)(U=>U.rulerRules),R=(0,r.useRef)({}),B=(0,r.useMemo)(()=>{if(S){const U=(0,m.Zw)(S);if(!U)throw new Error(`Unknown rules source: ${S}`);return[U]}return(0,m.lS)()},[S]);return(0,r.useMemo)(()=>B.map(U=>{const w=(0,m.Eb)(U)?U.name:U,K=A[w]?.result;let N=x[w]?.result;w===m.hY&&v&&(N=v);const L=R.current[w];if(L&&L.promRules===N&&L.rulerRules===K)return L.result;const V={};Object.entries(K||{}).forEach(([z,Y])=>{const H={rulesSource:U,name:z,groups:[]};(0,i.lT)(Y[0].rules[0])&&(H.uid=Y[0].rules[0].grafana_alert.namespace_uid),V[z]=H,b(H,Y)}),N?.forEach(({name:z,groups:Y})=>{const H=V[z]=V[z]||{rulesSource:U,name:z,groups:[]};a(H,Y)});const F=Object.values(V);return R.current[w]={promRules:N,rulerRules:K,result:F},F}).flat(),[x,A,B,v])}function c(S,v,x){const A={};return Object.entries(x||{}).forEach(([R,B])=>{const U={rulesSource:S,name:R,groups:[]};A[R]=U,b(U,B)}),v?.forEach(({name:R,groups:B})=>{const U=A[R]=A[R]||{rulesSource:S,name:R,groups:[]};a(U,B)}),Object.values(A)}function g(S,v,x){const A={rulesSource:S,name:v.name,groups:[]};return b(A,x),a(A,v.groups),A.groups.forEach(R=>{R.rules=R.rules.filter(B=>B.promRule)}),A}function u(S,v,x){return b(S,x),a(S,v),S}function E(S){return S.map(v=>{const x={...v,groups:[]};return x.groups.push({name:"default",rules:p(v.groups.flatMap(A=>A.rules)),totals:C(v.groups)}),x})}function p(S){return S.sort((v,x)=>v.name.localeCompare(x.name))}function b(S,v=[]){S.groups=v.map(x=>{const A=x.rules.filter(U=>(0,i.i7)(U)).length,R=x.rules.filter(U=>(0,i.lT)(U)&&U.grafana_alert.is_paused).length,B={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[],totals:{paused:R,recording:A}};return B.rules=x.rules.map(U=>D(U,S,B)),B})}function a(S,v){const x=new Map;S.groups.forEach(A=>x.set(A.name,A)),v.forEach(A=>{let R=x.get(A.name);R||(R={name:A.name,rules:[],totals:y(A)},S.groups.push(R),x.set(A.name,R)),R.totals={...R.totals,...y(A)};const B=new Map;R.rules.forEach(U=>{const w=B.get(U.name);w?w.push(U):B.set(U.name,[U])}),(A.rules??[]).forEach(U=>{const w=T(U,B,S.rulesSource);w?(w.promRule=U,w.instanceTotals=(0,i.Z8)(U)?h(U):{},w.filteredInstanceTotals=(0,i.Z8)(U)?P(U):{}):R.rules.push(f(U,S,R))})})}function h(S){const v=(0,t.countBy)(S.alerts,"state");if(S.totals){const{normal:x,...A}=S.totals;return{...A,inactive:x}}return{alerting:v[s.$.Alerting]||v.firing,pending:v[s.$.Pending],inactive:v[s.$.Normal],nodata:v[s.$.NoData],error:v[s.$.Error]||v.err||void 0}}function P(S){if(S.totalsFiltered){const{normal:v,...x}=S.totalsFiltered;return{...x,inactive:v}}return{}}function y(S){if(S.totals){const{firing:R,...B}=S.totals;return{...B,alerting:R}}const v=(0,t.countBy)(S.rules,R=>(0,i.Z8)(R)&&R.state),x=(0,t.countBy)(S.rules,R=>R.health),A=S.rules.filter(R=>(0,i.KB)(R)).length;return{alerting:v[o.cF.Firing],error:x.error,nodata:x.nodata,inactive:v[o.cF.Inactive],pending:v[o.cF.Pending],recording:A}}function C(S){const v={};return S.forEach(x=>{const A=x.totals;Object.entries(A).forEach(([R,B])=>{v[R]||(v[R]=0),v[R]+=B})}),v}function f(S,v,x){return{name:S.name,query:S.query,labels:S.labels||{},annotations:(0,i.Z8)(S)?S.annotations||{}:{},promRule:S,namespace:v,group:x,instanceTotals:(0,i.Z8)(S)?h(S):{},filteredInstanceTotals:(0,i.Z8)(S)?P(S):{}}}function D(S,v,x){return(0,i.$y)(S)?{name:S.alert,query:S.expr,labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:v,group:x,instanceTotals:{},filteredInstanceTotals:{}}:(0,i.i7)(S)?{name:S.record,query:S.expr,labels:S.labels||{},annotations:{},rulerRule:S,namespace:v,group:x,instanceTotals:{},filteredInstanceTotals:{}}:{name:S.grafana_alert.title,query:"",labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:v,group:x,instanceTotals:{},filteredInstanceTotals:{}}}function T(S,v,x){const A=v.get(S.name);if(!A)return;if((0,m.z2)(x))return A[0];const R=A.find(U=>!U.promRule&&M(U,S,!0));if(R)return R;const B=A.find(U=>!U.promRule&&M(U,S,!1));if(B)return B}function M(S,v,x=!0){return S.name===v.name?(0,t.isEqual)([x?O(S.query):"",S.labels,S.annotations],[x?O(v.query):"",v.labels||{},(0,i.Z8)(v)?v.annotations||{}:{}]):!1}function O(S){return S.length>1&&S[0]==="("&&S[S.length-1]===")"&&(S=S.slice(1,-1)),S=S.replace(/\s|\n/g,""),S.split("").sort().join("")}},11167:(Q,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(96540),n=e(31678),r=e(23770),s=e(88467),o=e(61410);function m(i){const l=(0,n.useDispatch)(),d=(0,o.$)(c=>c.folders);if((0,t.useEffect)(()=>{i&&l((0,r.Om)(i))},[l,i]),i){const c=d[i]||s.jA;return{folder:c.result,loading:c.loading}}return{loading:!1}}},83903:(Q,I,e)=>{"use strict";e.d(I,{y:()=>s});var t=e(96540),n=e(57220),r=e(61410);function s(){const o=(0,r.$)(l=>l.rulerRules),m=(0,t.useCallback)(l=>{const d=typeof l=="string"?l:l.name;return d===n.hY||!!o[d]?.result},[o]),i=(0,t.useCallback)(l=>{const d=(0,n.EV)(l);return!!o[d]?.result},[o]);return{hasRuler:m,rulerRulesLoaded:i}}},97009:(Q,I,e)=>{"use strict";e.d(I,{g:()=>i});var t=e(16233),n=e(77583),r=e(75471),s=e(23662),o=e(11167),m=e(61410);function i(l,d){const c=(0,m.$)(C=>C.dataSources),{currentData:g,isLoading:u}=n.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:l}),E=d&&(0,s.lT)(d)?d.grafana_alert.namespace_uid:void 0,p=(0,r.Wd)(l),{folder:b,loading:a}=(0,o.a)(E);if(!d)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,s.lT)(d)){if(!E)throw new Error(`Rule ${d.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!b)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:a};const C=t.TP.hasPermissionInMetadata(p.update,b),f=t.TP.hasPermissionInMetadata(p.delete,b);return{isRulerAvailable:!0,isEditable:C,isRemovable:f,loading:a||u}}const h=!!c[l]?.result?.rulerConfig||!!g?.rulerConfig,P=t.TP.hasPermission(p.update),y=t.TP.hasPermission(p.delete);return{isRulerAvailable:h,isEditable:P&&h,isRemovable:y&&h,loading:u||c[l]?.loading}}},98439:(Q,I,e)=>{"use strict";e.d(I,{W:()=>s});var t=e(2543),n=e.n(t),r=e(96540);function s(o,m=1,i){const[l,d]=(0,r.useState)(m),c=(0,r.useMemo)(()=>(0,t.chunk)(o,i),[o,i]),g=c.length,u=c[l-1]??[],E=(l-1)*i+1,p=(0,t.clamp)(l*i,o.length),b=(0,r.useCallback)(P=>{d((0,t.clamp)(P,1,c.length))},[d,c]),a=(0,r.useCallback)(()=>b(l+1),[l,b]),h=(0,r.useCallback)(()=>b(l-1),[l,b]);return(0,r.useEffect)(()=>d(1),[g]),{page:l,onPageChange:b,numberOfPages:g,pageItems:u,pageStart:E,pageEnd:p,nextPage:a,previousPage:h}}},27747:(Q,I,e)=>{"use strict";e.d(I,{S:()=>d});var t=e(96540),n=e(31678),r=e(23770),s=e(55740),o=e(57220),m=e(88467),i=e(9518),l=e(61410);function d({dashboardUID:c,panelId:g,poll:u=!1}){const E=(0,n.useDispatch)(),p=(0,l.$)(C=>C.promRules[o.hY])??m.jA,b=(0,l.$)(C=>C.rulerRules[o.hY])??m.jA;(0,t.useEffect)(()=>{const C=()=>{E((0,r.mB)({rulesSourceName:o.hY,filter:{dashboardUID:c,panelId:g}})),E((0,r.eB)({rulesSourceName:o.hY,filter:{dashboardUID:c,panelId:g}}))};if(C(),u){const f=setInterval(C,s.HH);return()=>{clearInterval(f)}}return()=>{}},[E,u,g,c]);const a=p.loading||b.loading,h=[p.error,b.error].filter(C=>!!C),P=(0,i.dy)(o.hY);return{rules:(0,t.useMemo)(()=>P.flatMap(C=>C.groups).flatMap(C=>C.rules).filter(C=>C.annotations[s.YH.dashboardUID]===c&&C.annotations[s.YH.panelID]===String(g)),[P,c,g]),errors:h,loading:a}}},12210:(Q,I,e)=>{"use strict";e.d(I,{_:()=>r});var t=e(16817),n=e(27716);function r(s){const{loading:o,error:m,value:i}=(0,t.A)(()=>(0,n.x)(s,{showErrorAlert:!1})),l=i&&!m&&!o,d=i?.enabled;return o&&!i?{loading:!0}:!l||!d?{loading:!1,installed:!1}:{loading:o,installed:!0,settings:i}}},46013:(Q,I,e)=>{"use strict";e.d(I,{G:()=>d,Q:()=>l});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(37390);const m=(0,n.lazy)(()=>e.e(7409).then(e.bind(e,87409))),i=(0,n.lazy)(()=>e.e(1121).then(e.bind(e,31121)));var l=(g=>(g.Loki="loki",g.Annotations="annotations",g))(l||{});function d(){const[g,u]=(0,n.useState)(!1),[E,p]=(0,n.useState)(),b=(0,s.of)(c),a=r.$.unifiedAlerting.alertStateHistoryBackend,h=r.$.unifiedAlerting.alertStateHistoryPrimary,y=[a,h].some(T=>T==="loki")?"loki":"annotations",C=(0,n.useCallback)(()=>{p(void 0),u(!1)},[]),f=(0,n.useCallback)(T=>{p(T),u(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>E?n.createElement(o.a,{isOpen:g,onDismiss:C,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:b.modal,contentClassName:b.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},y==="loki"&&n.createElement(i,{ruleUID:E.grafana_alert.uid}),y==="annotations"&&n.createElement(m,{alertId:E.grafana_alert.id??""}))):null,[E,g,C,y,b]),showStateHistoryModal:f,hideStateHistoryModal:C}}const c=g=>({modal:(0,t.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,t.css)`
    height: 100%;
    width: 100%;
    padding: ${g.spacing(2)};
  `})},39964:(Q,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(96540),n=e(58476),r=e(12131);function s(){const{search:o}=(0,n.zy)(),m=(0,t.useMemo)(()=>new URLSearchParams(o),[o]),i=(0,t.useCallback)((l,d)=>{r.Ny.partial(l,d)},[]);return[m,i]}},61410:(Q,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(1081),n=e(31678);function r(s,o){return(0,n.useSelector)((0,t.Mz)(m=>m.unifiedAlerting,m=>s(m)),o)}},28475:(Q,I,e)=>{"use strict";e.d(I,{Jc:()=>V,kL:()=>z,XY:()=>F});var t=e(94822),n=e(23662);const r=1,s=2,o=3,m=4,i=5,l=6,d=7,c=8,g=9,u=10,E=11,p=12,b=13,a=0,h=1,P=2,y=3,C=4,f=5,D=6,T=7,M=8;var O=e(2543),S=e(48820);const v=S.U1.deserialize({version:14,states:"!vOQOPOOOuOPO'#CiOOOO'#Ci'#CiOQOPO'#CmOOOO'#Cj'#CjQQOPOOO!mOQO'#C^O!rOPO'#CkO!wOPO,59TOOOO,59X,59XOOOO-E6h-E6hOOOO,58x,58xOOOO,59V,59VOOOO-E6i-E6i",stateData:"$[~ORUOTUOUUOVUOWUOXUOYUOZUO[UObPOdQO~OcVOR]XT]XU]XV]XW]XX]XY]XZ]X[]Xb]Xd]X~OSZO~Ob[O~OcVOR]aT]aU]aV]aW]aX]aY]aZ]a[]ab]ad]a~OR~T~U~V~W~Y~Z~[~R[ZYXWVUTb~",goto:"{bPPcPPPPPPPPPPchnPtVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken DashboardToken FreeFormExpression",maxTerm:20,skippedNodes:[0],repeatNodeCount:2,tokenData:"#0PRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[Ia#[#]!$Z#]#`#Y#`#a!.m#a#b#Y#b#c!7g#c#f#Y#f#g!Fe#g#h!Mu#h#i#(o#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQdPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQcPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.kfSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h0P#h#i;{#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]1i#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V3R#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4k#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U6T#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7m#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#W#Y#W#X9V#X$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9^cSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]:i!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:pcSQ[Pqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR<SeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U=e#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR=leSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h>}#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?UeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@g#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jBP#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBWeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gCi#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCpeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#WER#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREYeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YFk#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRFrcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]G}!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRHUcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRIheSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gJy#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRKQeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#dLc#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLjeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jM{#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNSeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e! e#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! lcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!!w!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!#OcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!$beSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!%s#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%zeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!']#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'deSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(u#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!*_#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]!+w#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!,OcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!-Z!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-bcSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!.teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!0V#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!1o#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!3X#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!4q#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4xcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!6T!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6[cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!7neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!9P#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!:i#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!:peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!<R#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!=k#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!?T#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!@m#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!BV#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!B^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Co#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CvcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!ER!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EYcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!FleSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!G}#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HUeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!Ig#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IneSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!KP#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!KWcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!Lc!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LjcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!M|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i# _#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U#!w#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR##OeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i#$a#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#$heSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#%y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#&QcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#']!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#'dcSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR#(veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n#*X#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#*`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e#+q#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#+xeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#-Z#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#-bcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#.m!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#.tcSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:123,nameSpaceFilter:125,labelFilter:127,groupFilter:129,ruleFilter:131,stateFilter:72,typeFilter:133,healthFilter:135,dashboardFilter:137},tokenPrec:139}),x={[o]:"datasource",[i]:"namespace",[l]:"label",[c]:"rule",[d]:"group",[g]:"state",[u]:"type",[E]:"health",[p]:"dashboard"};var A=(H=>(H.dataSource="dataSourceFilter",H.nameSpace="nameSpaceFilter",H.label="labelFilter",H.group="groupFilter",H.rule="ruleFilter",H.state="stateFilter",H.type="typeFilter",H.health="healthFilter",H.dashboard="dashboardFilter",H))(A||{});function R(H,k,ee){K(H,k,ie=>{if(ie.type.id===s){const fe=B(H,ie);if(fe.type&&fe.value){const q=ee[fe.type];q&&q(fe.value)}}else if(ie.type.id===b){const fe=ee[b];fe&&fe(U(H,ie))}})}function B(H,k){if(k.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const ee=k.firstChild;if(!ee)return{type:void 0,value:void 0};const ie=k.getChild(m),fe=ie?(0,O.trim)(U(H,ie),'"'):void 0;return{type:ee.type.id,value:fe}}function U(H,k){return H.slice(k.from,k.to).trim().replace(/\"/g,"")}function w(H,k,ee){const ie=[];K(H,k,q=>{q.type.id===s&&q.firstChild&&ie.push(q.firstChild),q.type.id===b&&ie.push(q)});let fe=[];return ie.forEach(q=>{const Z=ee.findIndex(J=>J.type===q.type.id);if(Z!==-1){if(q.parent?.type.is(s)){const J=x[q.type.id],G=ee.splice(Z,1)[0];fe.push(`${J}:${N(G.value)}`)}if(q.type.is(b)){const J=ee.splice(Z,1)[0];fe.push(J.value)}}}),ee.forEach(q=>{q.type===b?fe.push(q.value):fe.push(`${x[q.type]}:${N(q.value)}`)}),fe.join(" ")}function K(H,k,ee){const ie=k.join(" ");let q=v.configure({dialect:ie}).parse(H).cursor();do ee(q.node);while(q.next())}function N(H){return/\s/.test(H)?`"${H}"`:H}const L=[A.dataSource,A.nameSpace,A.label,A.group,A.rule,A.state,A.type,A.health,A.dashboard];var V=(H=>(H.Ok="ok",H.Error="error",H.NoData="nodata",H.Unknown="unknown",H))(V||{});function F(H){const k={labels:[],freeFormWords:[],dataSourceNames:[]},ee={[o]:ie=>k.dataSourceNames.push(ie),[i]:ie=>k.namespace=ie,[d]:ie=>k.groupName=ie,[c]:ie=>k.ruleName=ie,[l]:ie=>k.labels.push(ie),[g]:ie=>k.ruleState=Y(ie),[u]:ie=>(0,n.nf)(ie)?k.ruleType=ie:void 0,[E]:ie=>k.ruleHealth=(0,n.f6)(ie),[p]:ie=>k.dashboardUid=ie,[b]:ie=>k.freeFormWords.push(ie)};return R(H,L,ee),k}function z(H,k){const ee=[];return k.dataSourceNames&&ee.push(...k.dataSourceNames.map(ie=>({type:o,value:ie}))),k.namespace&&ee.push({type:i,value:k.namespace}),k.groupName&&ee.push({type:d,value:k.groupName}),k.ruleName&&ee.push({type:c,value:k.ruleName}),k.ruleState&&ee.push({type:g,value:k.ruleState}),k.ruleType&&ee.push({type:u,value:k.ruleType}),k.ruleHealth&&ee.push({type:E,value:k.ruleHealth}),k.labels&&ee.push(...k.labels.map(ie=>({type:l,value:ie}))),k.dashboardUid&&ee.push({type:p,value:k.dashboardUid}),k.freeFormWords&&ee.push(...k.freeFormWords.map(ie=>({type:b,value:ie}))),w(H,L,ee)}function Y(H){if(H==="normal")return t.cF.Inactive;if((0,t.Si)(H))return H}},28318:(Q,I,e)=>{"use strict";e.d(I,{t:()=>A});var t=e(2543),n=e(39741),r=e(62467),s=e(66847),o=e(1005),m=e(81160),i=e(62938),l=e(39070),d=e(14236),c=e(72495),g=e(65879),u=e(43127),E=e(89667),p=e(19347),b=e(26657),a=e(12091),h=e(27677),P=e(69437),y=e(81583),C=e(72955),f=e(66718);const D={from:21600,to:0},T=(L,V)=>{const F=M(L,V);if(!F)return D;const{from:z,to:Y}=S(F,V);return!z.length&&!Y.length?D:{from:Math.max(...z),to:Math.min(...Y)}},M=(L,V)=>{switch(L.type){case f.Tz.classic:return O(L);case f.Tz.math:case f.Tz.sql:return v(L,V);case f.Tz.resample:case f.Tz.reduce:case f.Tz.threshold:return x(L)}},O=L=>L.conditions?.map(V=>V.query.params[0]),S=(L,V)=>{let F=[],z=[D.to];for(const Y of L){const H=V.find(k=>k.refId===Y);!H||!H.relativeTimeRange||(F.push(H.relativeTimeRange.from),z.push(H.relativeTimeRange.to))}return{from:F,to:z}},v=(L,V)=>V.filter(F=>F.queryType==="query"&&L.expression?.includes(F.refId)).map(F=>F.refId),x=L=>L.expression?[L.expression]:void 0;class A{constructor(V=(0,h.AI)(),F=(0,p.l)()){this.backendSrv=V,this.dataSourceSrv=F,this.subject=new n.m(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V,F){const z=B(V,l.Gu.Done),Y=[];for(const k of V){const ee=k.model.refId;if((0,P.f)(k.model))continue;const ie=await this.dataSourceSrv.get(k.datasourceUid);ie instanceof b.iy&&ie.filterQuery&&!ie.filterQuery(k.model)&&Y.push(ee)}const H=(0,t.reject)(V,k=>Y.includes(k.model.refId));if(H.length===0)return this.subject.next(z);this.subscription=R(this.backendSrv,H,F).subscribe({next:k=>{const ee=N(k,(ie,fe)=>{const q=this.lastResult[ie],Z=(0,d.N$)(fe,q);return(0,C.B)(Z,q)});this.lastResult=ee,this.subject.next(this.lastResult)},error:k=>{this.lastResult=K(this.lastResult,k),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const F=N(this.lastResult,(z,Y)=>(Y.state===l.Gu.Loading&&(V=!0),{...Y,state:l.Gu.Done}));V&&this.subject.next(F)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const R=(L,V,F)=>{const z=B(V,l.Gu.Loading),Y={data:{data:V,condition:F},url:"/api/v1/eval",method:"POST",requestId:(0,i.A)()};return(0,c.k)({whileLoading:z,source:L.fetch(Y).pipe(w(z),(0,s.W)(H=>(0,r.of)(K(z,H))),(0,y.N)(L,Y.requestId),(0,o.u)())})},B=(L,V)=>L.reduce((F,z)=>(F[z.refId]={state:V,series:[],timeRange:U(z,L)},F),{}),U=(L,V)=>{if((0,P.f)(L.model)){const F=T(L.model,V);return g.relativeToTimeRange(F)}return L.relativeTimeRange?g.relativeToTimeRange(L.relativeTimeRange):(console.warn(`Query with refId: ${L.refId} did not have any relative time range, using default.`),(0,u.E2)())},w=L=>(0,m.T)(V=>{const{data:F}=V,z={};for(const[Y,H]of Object.entries(F.results)){const{error:k,status:ee,frames:ie=[]}=H,fe=k?[{message:k,refId:Y,status:ee}]:[];z[Y]={errors:fe,timeRange:L[Y].timeRange,state:l.Gu.Done,series:ie.map(E.or)}}return z}),K=(L,V)=>{const F=(0,a.u)(V);return N(L,(z,Y)=>({...Y,state:l.Gu.Error,error:F}))},N=(L,V)=>{const F={};for(const[z,Y]of Object.entries(L))F[z]=V(z,Y);return F}},70383:(Q,I,e)=>{"use strict";e.d(I,{Kh:()=>E,VI:()=>c,b9:()=>d});var t=e(96540),n=e(33390),r=e(60021),s=e(62190),o=e(39964),m=e(55740),i=e(57220);const l=t.createContext(void 0),d=({children:p,accessType:b,alertmanagerSourceName:a})=>{const[h,P]=(0,o.l)(),y=(0,s.W)(b),C=y.availableInternalDataSources.concat(y.availableExternalDataSources),f=t.useCallback(U=>{g(C,U)&&(U===i.hY?(n.A.delete(m.Oq),P({[m.DD]:void 0})):(n.A.set(m.Oq,U),P({[m.DD]:U})))},[C,P]),D=h.get(m.DD),T=n.A.get(m.Oq),M=i.hY;t.useEffect(()=>{D&&D!==T&&n.A.set(m.Oq,D)},[D,T]);const O=a??D??T??M,S=g(C,O)?O:void 0,v=(0,i.r3)(S)?.jsonData,x=S===i.hY,A=v?E(v):!1,B={selectedAlertmanager:S,hasConfigurationAPI:x||A,isGrafanaAlertmanager:x,selectedAlertmanagerConfig:v,availableAlertManagers:C,setSelectedAlertmanager:f};return t.createElement(l.Provider,{value:B},p)};function c(){const p=t.useContext(l);if(p===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return p}function g(p,b){return p.map(h=>h.name).includes(b)}const u=[r.Oz.mimir,r.Oz.cortex,void 0];function E(p){return u.includes(p.implementation)}},23770:(Q,I,e)=>{"use strict";e.d(I,{a7:()=>oe,nO:()=>De,$8:()=>Fe,KH:()=>ie,g6:()=>ee,EY:()=>ue,Nj:()=>te,D3:()=>re,yo:()=>Y,wE:()=>F,nV:()=>H,El:()=>ne,pT:()=>k,IX:()=>U,ef:()=>w,Tp:()=>Te,Om:()=>he,JH:()=>J,mF:()=>Z,Lc:()=>N,mB:()=>B,eB:()=>K,HB:()=>V,DC:()=>z,ly:()=>L,uQ:()=>Me,_$:()=>fe,bO:()=>Ee,RW:()=>G,LU:()=>ze,DN:()=>xe});var t=e(30038),n=e(2543),r=e(12131),s=e(34867),o=e(94822),m=e(27677),i=e(25027),l=e(32415),d=e(82843),c=e(17172);function g(be){return(0,c.AI)().get("/api/annotations",{alertId:be}).then(pe=>pe?.sort(u))}function u(be,pe){const Ue=(He,rt)=>He>rt?-1:rt>He?1:0,we=Ue(be.timeEnd,pe.timeEnd);if(we)return we;const je=Ue(be.time,pe.time);return je||Ue(be.id,pe.id)}var E=e(92240),p=e(68788),b=e(49498),a=e(28220),h=e(99106),P=e(86590),y=e(98164),C=e(57220),f=e(56361),D=e(88467),T=e(18461),M=e(63066),O=e(23662);function S(be){const pe=async Ve=>{if((0,O.A4)(Ve)){const Oe=await(0,a.iy)(be);for(const[Ne,ye]of Object.entries(Oe))for(const se of ye){const ae=se.rules.find(ge=>(0,O.lT)(ge)&&ge.grafana_alert?.uid===Ve.uid);if(ae)return{group:se,ruleSourceName:C.hY,namespace:Ne,namespace_uid:(0,O.lT)(ae)&&ae.grafana_alert.namespace_uid||void 0,rule:ae}}}if((0,O.X4)(Ve)){const{ruleSourceName:Oe,namespace:Ne,groupName:ye}=Ve,se=await(0,a.HO)(be,Ne,ye);if(!se)return null;const ae=se.rules.find(ge=>{const Pe=T.P1(Oe,Ne,se.name,ge);return T.LC(Pe,Ve)});return ae?{group:se,ruleSourceName:Oe,namespace:Ne,rule:ae}:null}if((0,O.Mj)(Ve))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Ue=async Ve=>{const{namespace:Oe,group:Ne,rule:ye,namespace_uid:se}=Ve;if(Ne.rules.length===1){await(0,a.AJ)(be,se||Oe,Ne.name);return}await(0,a.E8)(be,se||Oe,{...Ne,rules:Ne.rules.filter(ae=>ae!==ye)})},we=async(Ve,Oe,Ne)=>{const{dataSourceName:ye,group:se,namespace:ae}=Ve,ge=(0,M.l1)(Ve);if(ye&&se&&ae){if(Ne){const Be=await pe(T.Yd(Ne));if(!Be)throw new Error("Rule not found.");if(Be.namespace!==ae||Be.group.name!==se)await Ue(Be);else{const _e={...Be.group,rules:Be.group.rules.map(Xe=>Xe===Be.rule?ge:Xe),evaluateEvery:Oe};return await(0,a.E8)(be,ae,_e),T.P1(ye,ae,se,ge)}}const Pe=await(0,a.HO)(be,ae,se),Re=Pe?{...Pe,rules:[...Pe.rules,ge]}:{name:se,rules:[ge]};return await(0,a.E8)(be,ae,Re),T.P1(ye,ae,se,ge)}else throw new Error("Data source and location must be specified")},je=async(Ve,Oe,Ne)=>{const{folder:ye,group:se}=Ve;if(!ye)throw new Error("Folder must be specified");const ae=(0,M.Z9)(Ve),ge=ye.uid,Pe={name:se,interval:Oe};if(!Ne)return He(ge,Pe,ae);const Re=await pe(T.Yd(Ne));if(!Re)throw new Error("Rule not found.");const Be=Re.namespace_uid===ge,_e=Re.group.name===Ve.group;return Be&&_e?Je(Re,ae,Oe):rt(ge,Pe,Re,ae)},He=async(Ve,Oe,Ne)=>{const ye=await(0,a.HO)(be,Ve,Oe.name);if(!ye)throw new Error(`No group found with name "${Oe.name}"`);const se={name:Oe.name,interval:Oe.interval,rules:(ye.rules??[]).concat(Ne)};return await(0,a.E8)(be,Ve,se),{uid:Ne.grafana_alert.uid??"",ruleSourceName:C.hY}},rt=async(Ve,Oe,Ne,ye)=>(v(Ne,ye),await He(Ve,Oe,ye)),Je=async(Ve,Oe,Ne)=>{v(Ve,Oe);const ye=Ve.group.rules.map(se=>(0,O.lT)(se)&&se.grafana_alert.uid===Ve.rule.grafana_alert.uid?Oe:se);return await(0,a.E8)(be,Ve.namespace_uid??"",{name:Ve.group.name,interval:Ne,rules:ye}),{uid:Ve.rule.grafana_alert.uid,ruleSourceName:C.hY}};return{findEditableRule:pe,deleteRule:Ue,saveLotexRule:we,saveGrafanaRule:je}}function v(be,pe){if(!(0,O.lT)(be.rule))throw new Error("The rule is not a Grafana managed rule");const Ue=be.rule.grafana_alert.uid;pe.grafana_alert.uid=Ue}var x=e(25968);function A(be,pe){const we=be().unifiedAlerting.dataSources[pe]?.result;if(!we)throw new Error(`Data source configuration is not available for "${pe}" data source`);return we}function R(be,pe){const Ue=A(be,pe);if(!Ue.rulerConfig)throw new Error(`Ruler API is not available for ${pe}`);return Ue.rulerConfig}const B=(0,t.zD)("unifiedalerting/fetchPromRules",async({rulesSourceName:be,filter:pe,limitAlerts:Ue,matcher:we,state:je,identifier:He},rt)=>{await rt.dispatch(z({rulesSourceName:be}));const Je=(0,i.U7)("unifiedalerting/fetchPromRules",b.sA,{dataSourceName:be,thunk:"unifiedalerting/fetchPromRules"});return await(0,D.$I)(Je(be,pe,Ue,we,je,He))}),U=(0,t.zD)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,D.$I)((0,l.Wf)())),w=(0,t.zD)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,D.$I)((0,l.Vv)())),K=(0,t.zD)("unifiedalerting/fetchRulerRules",async({rulesSourceName:be,filter:pe},{dispatch:Ue,getState:we})=>{await Ue(z({rulesSourceName:be}));const je=R(we,be),He=(0,i.Ke)("unifiedalerting/fetchRulerRules",a.iy,{dataSourceName:be,thunk:"unifiedalerting/fetchRulerRules"});return await(0,D.$I)(He(je,pe))});function N({rulesSourceName:be,identifier:pe,filter:Ue,limitAlerts:we,matcher:je,state:He}){return async(rt,Je)=>{await rt(z({rulesSourceName:be}));const Ve=A(Je,be);await rt(B({rulesSourceName:be,identifier:pe,filter:Ue,limitAlerts:we,matcher:je,state:He})),Ve.rulerConfig&&await rt(K({rulesSourceName:be}))}}const L=(0,t.zD)("unifiedalerting/fetchSilences",be=>{const pe=(0,i.QA)("unifiedalerting/fetchSilences",l.Bz,{dataSourceName:be});return(0,D.$I)(pe(be))});function V(be){return(pe,Ue)=>{const{rulerRules:we}=Ue().unifiedAlerting,je=we[be];(0,n.isEmpty)(je?.result)&&!(je&&(0,O.$7)(je))&&!je?.loading&&pe(K({rulesSourceName:be}))}}function F(){return async be=>{const pe=(0,C.gR)().map(Ue=>be(z({rulesSourceName:Ue})));await Promise.allSettled(pe)}}const z=(0,t.zD)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:be})=>(0,D.$I)((async()=>{if(be===C.hY)return{name:C.hY,id:C.hY,rulerConfig:{dataSourceName:C.hY,apiVersion:"legacy"}};const pe=(0,C.Jz)(be);if(!pe)throw new Error(`Missing data source configuration for ${be}`);const{id:Ue,name:we}=pe,He=await(0,i.QA)("unifiedalerting/fetchPromBuildinfo",E.nD,{dataSourceName:be,thunk:"unifiedalerting/fetchPromBuildinfo"})(we),rt=He.features.rulerApiEnabled?{dataSourceName:we,apiVersion:He.application===o.N1.Cortex?"legacy":"config"}:void 0;return{name:we,id:Ue,rulerConfig:rt}})()),{condition:({rulesSourceName:be},{getState:pe})=>{const Ue=pe().unifiedAlerting.dataSources,we=!!Ue[be]?.result,je=!!Ue[be]?.error;return!(we||je)}});function Y(be=!1,pe={}){return async(Ue,we)=>{const je=performance.now();await Promise.allSettled((0,C.gR)().map(async He=>{await Ue(z({rulesSourceName:He}));const{promRules:rt,rulerRules:Je,dataSources:Ve}=we().unifiedAlerting,Oe=Ve[He].result;if(!Oe)return;const Ne=be||!rt[He]?.loading,ye=(be||!Je[He]?.loading)&&!!Oe.rulerConfig;await Promise.allSettled([Ne&&Ue(B({rulesSourceName:He,...pe})),ye&&Ue(K({rulesSourceName:He}))])})),(0,s.l$)("unifiedalerting/fetchAllPromAndRulerRulesAction",{loadTimeMs:performance.now()-je})}}function H(be=!1){return async(pe,Ue)=>{const{promRules:we}=Ue().unifiedAlerting;(0,C.gR)().map(je=>{(be||!we[je]?.loading)&&pe(B({rulesSourceName:je}))})}}const k=(0,t.zD)("unifiedalerting/fetchEditableRule",(be,pe)=>{const Ue=R(pe.getState,be.ruleSourceName);return(0,D.$I)(S(Ue).findEditableRule(be))});function ee(be,pe){return async(Ue,we)=>{(0,D.v5)((async()=>{const je=(0,C.EV)(be.rulesSource),He=R(we,je);await(0,a.AJ)(He,be.name,pe.name),await Ue(N({rulesSourceName:je}))})(),{successMessage:"Group deleted"})}}function ie(be,pe={}){return async(Ue,we)=>{await Ue(z({rulesSourceName:be.ruleSourceName})),(0,D.v5)((async()=>{const je=R(we,be.ruleSourceName),He=S(je),rt=await He.findEditableRule(be);if(!rt)throw new Error("Rule not found.");await He.deleteRule(rt),await Ue(N({rulesSourceName:rt.ruleSourceName})),pe.navigateTo&&r.Ny.replace(pe.navigateTo)})(),{successMessage:"Rule deleted."})}}const fe=(0,t.zD)("unifiedalerting/saveRuleForm",({values:be,existing:pe,redirectOnSave:Ue,evaluateEvery:we},je)=>(0,D.v5)((0,D.$I)((async()=>{const{type:He}=be;let rt;if(He===P.Z.cloudAlerting||He===P.Z.cloudRecording){if(!be.dataSourceName)throw new Error("The Data source has not been defined.");const Je=R(je.getState,be.dataSourceName);rt=await S(Je).saveLotexRule(be,we,pe),await je.dispatch(K({rulesSourceName:be.dataSourceName}))}else if(He===P.Z.grafana){const Je=R(je.getState,C.hY);rt=await S(Je).saveGrafanaRule(be,we,pe),q(be,pe),await je.dispatch(K({rulesSourceName:C.hY}))}else throw new Error("Unexpected rule form type");if((0,i.fH)(i.le.successSavingAlertRule,{type:He,isNew:(!pe).toString()}),Ue)r.Ny.push(Ue);else{const Je=T.$9(rt);if(!Je){r.Ny.push("/alerting/list");return}const Ve=`/alerting/${encodeURIComponent(Je)}/edit`;r.Ny.getLocation().pathname!==Ve?r.Ny.replace(Ve):je.dispatch(k(rt))}})()),{successMessage:pe?`Rule "${be.name}" updated.`:`Rule "${be.name}" saved.`,errorMessage:"Failed to save rule"}));function q(be,pe){if((0,O.lT)(pe?.rule)){const we=!!pe?.rule.grafana_alert?.notification_settings?.receiver,je=be.manualRouting,He=!we&&je,rt=we&&!je;He&&(0,i.Fb)(),rt&&(0,i.hJ)()}}const Z=(0,t.zD)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,D.$I)((0,p.Es)())),J=(0,t.zD)("unifiedalerting/fetchGrafanaAnnotations",be=>(0,D.$I)(g(be))),G=(0,t.zD)("unifiedalerting/updateAMConfig",({alertManagerSourceName:be,oldConfig:pe,newConfig:Ue,successMessage:we,redirectPath:je,redirectSearch:He},rt)=>(0,D.v5)((0,D.$I)((async()=>{const Je=await rt.dispatch(d.m.endpoints.getAlertmanagerConfiguration.initiate(be)).unwrap(),Ve=(0,n.isEmpty)(Je.alertmanager_config)&&(0,n.isEmpty)(Je.template_files),Oe=JSON.stringify(Je)!==JSON.stringify(pe);if(!Ve&&Oe)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,l.vk)(be,(0,y.MZ)(Ue)),rt.dispatch(d.m.util.invalidateTags(["AlertmanagerConfiguration"])),je){const Ne=new URLSearchParams(He??"");r.Ny.push((0,f.nL)(je,be,Ne))}})()),{successMessage:we})),ne=(0,t.zD)("unifiedalerting/fetchAmAlerts",be=>(0,D.$I)((0,l.Mn)(be,[],!0,!0,!0))),te=(be,pe)=>async Ue=>{await(0,D.v5)((0,l.dk)(be,pe),{successMessage:"Silence expired."}),Ue(L(be)),Ue(ne(be))},oe=(0,t.zD)("unifiedalerting/updateSilence",({alertManagerSourceName:be,payload:pe,exitOnSave:Ue,successMessage:we})=>(0,D.v5)((0,D.$I)((async()=>{await(0,l.as)(be,pe),Ue&&r.Ny.push((0,f.nL)("/alerting/silences",be))})()),{successMessage:we})),le=(be,pe)=>async Ue=>{const we=await Ue(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!we)throw new Error(`Config for ${pe} not found`);if(!we.alertmanager_config.receivers?.find(He=>He.name===be))throw new Error(`Cannot delete receiver ${be}: not found in config.`);const je={...we,alertmanager_config:{...we.alertmanager_config,receivers:we.alertmanager_config.receivers.filter(He=>He.name!==be)}};return Ue(G({newConfig:je,oldConfig:we,alertManagerSourceName:pe,successMessage:"Contact point deleted."}))},ue=(be,pe)=>async Ue=>{const we=await Ue(d.m.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!we)throw new Error(`Config for ${pe} not found`);if(typeof we.template_files?.[be]!="string")throw new Error(`Cannot delete template ${be}: not found in config.`);const je={...we.template_files};delete je[be];const He={...we,alertmanager_config:{...we.alertmanager_config,templates:we.alertmanager_config.templates?.filter(rt=>rt!==be)},template_files:je};return Ue(G({newConfig:He,oldConfig:we,alertManagerSourceName:pe,successMessage:"Template deleted."}))},Te=(0,t.zD)("unifiedalerting/fetchFolder",be=>(0,D.$I)(m.IB.getFolderByUid(be,{withAccessControl:!0}))),he=be=>(pe,Ue)=>{Ue().unifiedAlerting.folders[be]?.dispatched||pe(Te(be))},re=(0,t.zD)("unifiedalerting/fetchAlertGroups",be=>(0,D.$I)((0,l.f4)(be))),De=(0,t.zD)("unifiedalerting/deleteAlertManagerConfig",async(be,pe)=>(0,D.v5)((0,D.$I)((async()=>{await(0,l.nd)(be),await pe.dispatch(d.m.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Fe=(be,pe)=>async Ue=>{const we=await Ue(d.m.endpoints.getAlertmanagerConfiguration.initiate(be)).unwrap(),je=be===C.hY,He=(we?.alertmanager_config?.mute_time_intervals??[])?.filter(({name:Ve})=>Ve!==pe)??[],rt=(we?.alertmanager_config?.time_intervals??[])?.filter(({name:Ve})=>Ve!==pe)??[],Je=je?{mute_time_intervals:[...He,...rt]}:{time_intervals:rt,mute_time_intervals:He};if(we){const{mute_time_intervals:Ve,...Oe}=we?.alertmanager_config??{};(0,D.v5)(Ue(G({alertManagerSourceName:be,oldConfig:we,newConfig:{...we,alertmanager_config:{...Oe,route:we.alertmanager_config.route?(0,y.Dk)(pe,we.alertmanager_config?.route):void 0,...Je}}})),{successMessage:`Deleted "${pe}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})}},Ee=(0,t.zD)("unifiedalerting/testReceivers",({alertManagerSourceName:be,receivers:pe,alert:Ue})=>(0,D.v5)((0,D.$I)((0,l.By)(be,pe,Ue)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Me=(be,pe)=>be.filter(Ue=>{const{forDuration:we}=(0,O.jg)(Ue,pe),je=(0,x.ge)(we),He=(0,x.ge)(pe);return je!==0&&je<He}),ze=(0,t.zD)("unifiedalerting/updateLotexNamespaceAndGroup",async(be,pe)=>(0,D.v5)((0,D.$I)((async()=>{const{rulesSourceName:Ue,namespaceName:we,groupName:je,newNamespaceName:He,newGroupName:rt,groupInterval:Je,folderUid:Ve}=be,Oe=R(pe.getState,Ue),Ne=await(0,a.iy)(Oe);if(!!!Ne[we])throw new Error(`Namespace "${we}" not found.`);const se=Ne[we].find(Be=>Be.name===je);if(!se)throw new Error(`Group "${je}" not found.`);const ae=!!Ne[we].find(Be=>Be.name===rt);if(rt!==je&&ae)throw new Error(`Group "${rt}" already exists in namespace "${we}".`);const ge=!!Ne[He],Re=Ue===C.hY?(0,h.wf)(we):we;if(He!==Re&&ge)throw new Error(`Namespace "${He}" already exists.`);if(He===Re&&je===rt&&Je===se.interval)throw new Error("Nothing changed.");if(Je!==se.interval){const Be=Me(se.rules,Je??"1m");if(Be.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Be.map(_e=>{const{alertName:Xe}=(0,O.jg)(_e,Je??"");return Xe}).join(",")}`)}if(He!==Re){for(const Be of Ne[we])await(0,a.E8)(Oe,He,Be.name===je?{...Be,name:rt,interval:Je}:Be);await(0,a.BK)(Oe,Ve||we)}else await(0,a.E8)(Oe,Ve||we,{...se,name:rt,interval:Je}),rt!==je&&await(0,a.AJ)(Oe,Ve||we,je);await pe.dispatch(K({rulesSourceName:Ue}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),xe=(0,t.zD)("unifiedalerting/updateRulesOrderForGroup",async(be,pe)=>(0,D.v5)((0,D.$I)((async()=>{const{rulesSourceName:Ue,namespaceName:we,groupName:je,newRules:He,folderUid:rt}=be,Je=R(pe.getState,Ue),Oe=(await(0,a.iy)(Je))[we].find(ye=>ye.name===je);if(!Oe)throw new Error(`Group "${je}" not found.`);const Ne={name:Oe.name,interval:Oe.interval,rules:He};await(0,a.E8)(Je,rt??we,Ne),await pe.dispatch(K({rulesSourceName:Ue}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),We=(0,t.zD)("unifiedAlerting/addExternalAlertmanagers",async(be,pe)=>(0,D.v5)((0,D.$I)((async()=>{await(0,l._P)(be),pe.dispatch(w())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},22620:(Q,I,e)=>{"use strict";e.d(I,{H:()=>n});var t=e(32196);const n=r=>(0,t.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${r.spacing(2,0)};
  `},99494:(Q,I,e)=>{"use strict";e.d(I,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},86590:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},41068:(Q,I,e)=>{"use strict";e.d(I,{y:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},75471:(Q,I,e)=>{"use strict";e.d(I,{C0:()=>E,HL:()=>m,Q9:()=>p,VQ:()=>i,Wd:()=>u,jy:()=>c,lV:()=>g,q0:()=>b});var t=e(2913),n=e(16233),r=e(31678),s=e(57220);function o(a){return(0,s.z2)(a)?"grafana":"external"}const m={read:{grafana:r.AccessControlAction.AlertingInstanceRead,external:r.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:r.AccessControlAction.AlertingInstanceCreate,external:r.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:r.AccessControlAction.AlertingInstanceUpdate,external:r.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:r.AccessControlAction.AlertingInstanceUpdate,external:r.AccessControlAction.AlertingInstancesExternalWrite}},i={read:{grafana:r.AccessControlAction.AlertingNotificationsRead,external:r.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite}},l={read:r.AccessControlAction.AlertingProvisioningRead,readSecrets:r.AccessControlAction.AlertingProvisioningReadSecrets,write:r.AccessControlAction.AlertingProvisioningWrite},d={read:{grafana:r.AccessControlAction.AlertingRuleRead,external:r.AccessControlAction.AlertingRuleExternalRead},create:{grafana:r.AccessControlAction.AlertingRuleCreate,external:r.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:r.AccessControlAction.AlertingRuleUpdate,external:r.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:r.AccessControlAction.AlertingRuleDelete,external:r.AccessControlAction.AlertingRuleExternalWrite}};function c(a){const h=o(a);return{read:m.read[h],create:m.create[h],update:m.update[h],delete:m.delete[h]}}function g(a){const h=o(a);return{read:i.read[h],create:i.create[h],update:i.update[h],delete:i.delete[h],provisioning:l}}function u(a){const h=o(a);return{read:d.read[h],create:d.create[h],update:d.update[h],delete:d.delete[h]}}function E(a){return()=>n.TP.evaluatePermission(a)}function p(){return{canCreateGrafanaRules:n.TP.hasPermission(r.AccessControlAction.FoldersRead)&&n.TP.hasPermission(d.create.grafana),canCreateCloudRules:n.TP.hasPermission(r.AccessControlAction.DataSourcesRead)&&n.TP.hasPermission(d.create.external),canEditRules:a=>n.TP.hasPermission(u(a).update)}}function b(){const{unifiedAlertingEnabled:a}=(0,t.zj)(),h=n.TP.hasPermission(u(s.hY).read),P=n.TP.hasPermission(u(s.hY).update);return a&&h&&P}},98164:(Q,I,e)=>{"use strict";e.d(I,{$P:()=>A,Av:()=>C,Dk:()=>l,Dm:()=>S,EU:()=>f,F9:()=>M,J$:()=>P,LF:()=>O,Lt:()=>d,MN:()=>g,MU:()=>E,MZ:()=>i,NL:()=>h,UL:()=>x,VE:()=>D,Wc:()=>p,mP:()=>R,uH:()=>v,xH:()=>a});var t=e(2543),n=e.n(t),r=e(60021),s=e(82775),o=e(57220),m=e(32642);function i(B){return B.alertmanager_config.receivers||(B.alertmanager_config.receivers=[{name:"default "}]),B.alertmanager_config.route||(B.alertmanager_config.route={receiver:B.alertmanager_config.receivers[0].name}),B.template_files||(B.template_files={}),B}function l(B,U){return{...U,mute_time_intervals:U.mute_time_intervals?.filter(K=>K!==B)??[],routes:U.routes?.map(K=>l(B,K))}}function d(B,U,w){return{...w,mute_time_intervals:w.mute_time_intervals?.map(K=>K===U?B:K),routes:w.routes?.map(K=>d(B,U,K))}}function c(B){return B.map(([U,w,K])=>[U,w,unquoteWithUnescape(K)])}function g(B){return B.isEqual?B.isRegex?r.ho.regex:r.ho.equal:B.isRegex?r.ho.notRegex:r.ho.notEqual}function u(B){switch(B){case r.ho.equal:return{isEqual:!0,isRegex:!1};case r.ho.notEqual:return{isEqual:!1,isRegex:!1};case r.ho.regex:return{isEqual:!0,isRegex:!0};case r.ho.notRegex:return{isEqual:!1,isRegex:!0}}}function E(B){return{name:B.name,value:B.value,operator:g(B)}}function p(B){return{name:B.name,value:B.value,...u(B.operator)}}function b(B){return`{${B.map(E).reduce((K,N)=>{const L=`${N.name}${N.operator}"${N.value}"`;return K?`${K},${L}`:L},"")}}`}const a=[{label:r.ho.equal,description:"Equals",value:r.ho.equal},{label:r.ho.notEqual,description:"Does not equal",value:r.ho.notEqual},{label:r.ho.regex,description:"Matches regex",value:r.ho.regex},{label:r.ho.notRegex,description:"Does not match regex",value:r.ho.notRegex}];function h(B){const U=g(B);return[B.name,U,B.value]}function P(B){const U=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,w=[];return B.replace(U,(K,N,L,V)=>{const F=L===r.ho.equal||L===r.ho.regex,z=L===r.ho.regex||L===r.ho.notRegex;return w.push({name:N,value:z?y(V.trim()):V.trim(),isEqual:F,isRegex:z}),""}),w}function y(B){try{return new RegExp(B),B}catch{return""}}function C(B,U){return U.every(({name:w,value:K,isRegex:N,isEqual:L})=>Object.entries(B).some(([V,F])=>{const z=w===V;let Y;return L&&!N&&(Y=K===F),!L&&!N&&(Y=K!==F),L&&N&&(Y=new RegExp(K).test(F)),!L&&N&&(Y=!new RegExp(K).test(F)),z&&Y}))}function f(...B){const U=B.map(P).flat(),w=(0,t.uniqWith)(U,t.isEqual);return b(w)}function D(B){return B===o.hY?"default":"unquote"}function T(){return(0,s.k)().filter(B=>B.type===o.ol.Alertmanager)}function M(B){return T().find(U=>B===U.uid)}function O(B){const{times:U,weekdays:w,days_of_month:K,months:N,years:L,location:V}=B,F=S(U,V),z=v(w),Y=x(K),H=A(N),k=R(L);return[F,z,Y,H,k].join(", ")}function S(B,U){return"Times: "+(B?B?.map(({start_time:w,end_time:K})=>`${w} - ${K} [${U??"UTC"}]`).join(" and "):"All")}function v(B){return"Weekdays: "+(B?.map(U=>{if(U.includes(":"))return U.split(":").map(w=>{const K=w.slice(0,3);return K[0].toLocaleUpperCase()+K.slice(1)}).join("-");{const w=U.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}}).join(", ")??"All")}function x(B){return"Days of the month: "+(B?.join(", ")??"All")}function A(B){return"Months: "+(B?.join(", ")??"All")}function R(B){return"Years: "+(B?.join(", ")??"All")}},33225:(Q,I,e)=>{"use strict";e.d(I,{Hx:()=>o,gO:()=>m});var t=e(96540),n=e(55740),r=e(56361);function s(i){return{dashboardUID:i.find(([l])=>l===n.YH.dashboardUID)?.[1],panelId:i.find(([l])=>l===n.YH.panelID)?.[1]}}function o(i){return(0,t.useMemo)(()=>Object.entries(i||{}).filter(([l,d])=>!!d.trim()),[i])}function m(i){const l=new Map,{panelId:d,dashboardUID:c}=s(i);return c&&l.set(n.YH.dashboardUID,(0,r.JM)(c)),c&&d&&l.set(n.YH.panelID,(0,r.D2)(c,d)),l}},82775:(Q,I,e)=>{"use strict";e.d(I,{k:()=>r,q:()=>s});var t=e(32264),n=e(25968);function r(){return Object.values(t.$.datasources)}function s(o){if(!(0,n.TN)(t.$.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const m=(0,n.M9)(t.$.unifiedAlerting.minInterval);if(!o||!(0,n.TN)(o))return{globalLimit:m,exceedsLimit:!1};const i=(0,n.M9)(o),l=m>i&&i>0;return{globalLimit:m,exceedsLimit:l}}},55740:(Q,I,e)=>{"use strict";e.d(I,{DD:()=>r,H8:()=>E,HH:()=>n,J3:()=>u,Oq:()=>s,U3:()=>m,UU:()=>t,YH:()=>g,cB:()=>i,kl:()=>p,wG:()=>o});const t="ruler not supported",n=2e4,r="alertmanager",s="alerting-alertmanager",o=2e4,m=2e4,i=2e4,l="timeseries",d="table",c="stat";var g=(b=>(b.description="description",b.summary="summary",b.runbookURL="runbook_url",b.alertId="__alertId__",b.dashboardUID="__dashboardUid__",b.panelID="__panelId__",b))(g||{});const u={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},E={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},p=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},57220:(Q,I,e)=>{"use strict";e.d(I,{AL:()=>R,EV:()=>v,Eb:()=>A,Jz:()=>b,Zw:()=>K,bD:()=>P,cy:()=>D,gR:()=>O,hP:()=>z,hY:()=>c,lS:()=>S,oh:()=>U,ol:()=>u,qi:()=>p,r3:()=>w,sq:()=>T,v0:()=>x,vv:()=>g,w5:()=>L,y9:()=>F,z2:()=>B});var t=e(19347),n=e(16233),r=e(60021),s=e(31678),o=e(82843),m=e(62190),i=e(70383),l=e(75471),d=e(82775);const c="grafana",g="-- Grafana --";var u=(Y=>(Y.Alertmanager="alertmanager",Y.Loki="loki",Y.Prometheus="prometheus",Y))(u||{});const E=["loki","prometheus"];function p(){return n.TP.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,d.k)().filter(Y=>E.includes(Y.type)&&Y.jsonData.manageAlerts!==!1).sort((Y,H)=>Y.name.localeCompare(H.name)):[]}function b(Y){return p().find(H=>H.name===Y)}function a(){return(0,d.k)().filter(h).sort((Y,H)=>Y.name.localeCompare(H.name))}function h(Y){return Y.type==="alertmanager"}function P(Y){return Y.type==="alertmanager"}function y(){return a().filter(Y=>Y.jsonData.handleGrafanaManagedAlerts)}const C={name:c,imgUrl:"public/img/grafana_icon.svg",hasConfigurationAPI:!0};function f(){return[C,...a().map(Y=>({name:Y.name,displayName:Y.name,imgUrl:Y.meta.info.logos.small,meta:Y.meta}))]}function D(Y){const H=(0,m.W)(Y),k=H.availableExternalDataSources.filter(q=>q.handleGrafanaManagedAlerts),ee=H.availableInternalDataSources,{currentData:ie}=o.m.useGetAlertmanagerChoiceStatusQuery(void 0);switch(ie?.alertmanagersChoice){case r.nA.Internal:return ee;case r.nA.External:return k;default:return[...ee,...k]}}function T(Y){const H=[],k=[],ee={instance:l.HL.read,notification:l.VQ.read};if(n.TP.hasPermission(ee[Y].grafana)&&H.push(C),n.TP.hasPermission(ee[Y].external)){const ie=a().map(fe=>({name:fe.name,displayName:fe.name,imgUrl:fe.meta.info.logos.small,meta:fe.meta,hasConfigurationAPI:(0,i.Kh)(fe.jsonData),handleGrafanaManagedAlerts:fe.jsonData.handleGrafanaManagedAlerts}));k.push(...ie)}return{availableInternalDataSources:H,availableExternalDataSources:k}}function M(Y){const H=U(Y);if(!H)throw new Error(`Data source ${Y} not found`);if(H.type!=="loki"&&H.type!=="prometheus")throw new Error(`Unexpected data source type ${H.type}`);return H}function O(){const Y=p().map(H=>H.name);return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&Y.push(c),Y}function S(){const Y=p();return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&Y.push(c),Y}function v(Y){return A(Y)?Y.name:Y}function x(Y){return A(Y)?Y.uid:c}function A(Y){return Y!==c}function R(Y){return Y!==c&&w(Y)?.jsonData?.implementation===r.Oz.prometheus}function B(Y){return Y===c}function U(Y){return(0,d.k)().find(H=>H.name===Y)}function w(Y){return(0,d.k)().filter(h).find(H=>H.name===Y)}function K(Y){return Y===c?c:U(Y)}function N(Y){if(Y===c)return c;const H=U(Y);if(!H)throw new Error(`Datasource "${Y}" not found`);return String(H.id)}function L(Y){if(Y===c)return c;const H=U(Y);if(!H)throw new Error(`Datasource "${Y}" not found`);return H.uid}function V(){return(0,t.l)().getList({alerting:!0})[0]}function F(){const Y=(0,t.l)().getInstanceSettings("default");return Y?.meta.alerting??!1?Y:V()}function z(Y){return Y.jsonData.manageAlerts!==!1}},75214:(Q,I,e)=>{"use strict";e.d(I,{Dd:()=>n,M4:()=>t,x4:()=>s,zm:()=>r});function t(o){return Object.entries(o).map(([m,i])=>`${m}=${i}`).sort()}function n(o){return Object.entries(o).map(([m,i])=>[m,i])}function r(o){const m={};return o.forEach(i=>{m[i[0]]=i[1]}),m}function s(o){const m={};return o.forEach(i=>{i.key&&(m[i.key]=i.value)}),m}},32642:(Q,I,e)=>{"use strict";e.d(I,{Ig:()=>u,J$:()=>c,J9:()=>d,So:()=>m,ot:()=>g,ou:()=>l,qR:()=>o,t8:()=>E});var t=e(2543),n=e.n(t),r=e(60021);const s=[r.ho.regex,r.ho.notRegex,r.ho.notEqual,r.ho.equal];function o(h){if(h.startsWith("{")&&h.endsWith("}"))throw new Error("this function does not support PromQL-style matcher syntax, call parsePromQLStyleMatcher() instead");const P=s.map(T=>[T,h.indexOf(T)]).filter(([T,M])=>M>-1).sort((T,M)=>T[1]-M[1]);if(!P.length)throw new Error(`Invalid matcher: ${h}`);const[y,C]=P[0],f=h.slice(0,C).trim(),D=h.slice(C+y.length);if(!f)throw new Error(`Invalid matcher: ${h}`);return{name:f,value:D,isRegex:y===r.ho.regex||y===r.ho.notRegex,isEqual:y===r.ho.equal||y===r.ho.regex}}function m(h){return p(h)?i(h):[o(h)]}function i(h){if(!p(h))throw new Error("not a PromQL style matcher");const P=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/,y=h.replace(/^\{/,"").replace(/\}$/,"").trim().split(P);return(0,t.compact)(y).flatMap(o).map(C=>({...C,name:u(C.name),value:u(C.value)}))}function l(h){const P=h.filter(y=>!!y.trim()).map(y=>o(y));return(0,t.uniqBy)(P,y=>y.name)}const d=h=>{const P=Object.entries(h).filter(([C])=>!(C.startsWith("__")&&C.endsWith("__"))),y=new URLSearchParams;return P.forEach(([C,f])=>y.append("matcher",`${C}=${f}`)),y},c=h=>{let P=[];return h.matchers&&h.matchers.forEach(y=>{const C=m(y).map(b);P=P.concat(C)}),h.object_matchers&&P.push(...h.object_matchers),h.match_re&&Object.entries(h.match_re).forEach(([y,C])=>{P.push([y,r.ho.regex,C])}),h.match&&Object.entries(h.match).forEach(([y,C])=>{P.push([y,r.ho.equal,C])}),P};function g(h){return`"${h.replace(/[\\"]/g,y=>`\\${y}`)}"`}function u(h){return/^"(.*)"$/.test(h)?h.replace(/^"(.*)"$/,"$1").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):h}const E={default:([h,P,y])=>`${h} ${P} ${y||""}`,unquote:([h,P,y])=>{const C=u(h),f=u(y)||'""';return`${C} ${P} ${f}`}};function p(h){return h.startsWith("{")&&h.endsWith("}")}function b(h){const P=a(h);return[h.name,P,h.value]}function a(h){return h.isEqual?h.isRegex?r.ho.regex:r.ho.equal:h.isRegex?r.ho.notRegex:r.ho.notEqual}},56361:(Q,I,e)=>{"use strict";e.d(I,{BK:()=>x,Cp:()=>V,D2:()=>K,ES:()=>z,GD:()=>A,Ht:()=>C,JM:()=>w,JZ:()=>H,KT:()=>T,NH:()=>R,S2:()=>P,Sl:()=>y,Y9:()=>S,Yp:()=>b,bg:()=>a,i7:()=>h,i9:()=>N,nL:()=>M,qN:()=>U,qy:()=>D,t7:()=>v,w$:()=>p,y$:()=>F});var t=e(2543),n=e.n(t),r=e(61268),s=e(32264),o=e(17172),m=e(18461),i=e(23662),l=e(64861),d=e(94822),c=e(55740),g=e(57220),u=e(32642),E=e(3704);function p(k,ee,ie){const fe=(0,g.EV)(k),q=m.UP(fe,ee),Z=encodeURIComponent(m.$9(q)),J=encodeURIComponent(fe);return(0,E.c)(`/alerting/${J}/${Z}/view`,{returnTo:ie})}function b(k,ee){const{uid:ie,type:fe}=k;return(0,E.c)("/explore",{left:JSON.stringify({datasource:k.uid,queries:[{refId:"A",datasource:{uid:ie,type:fe},expr:ee}],range:{from:"now-1h",to:"now"}})})}function a(k,ee=""){return(0,E.c)(`/alerting/notifications/receivers/${encodeURIComponent(k)}/edit`,{alertmanager:ee})}function h(k,ee=""){return(0,E.c)("/alerting/routes/mute-timing/edit",{muteName:k,alertmanager:ee})}function P(k,ee){return(0,g.Eb)(k)?(0,E.z)(`/alerting/${encodeURIComponent(k.name)}/${encodeURIComponent((0,m.PH)(ee.name))}/find`):window.location.href.split("?")[0]}function y(k){return k.reduce((ee,{key:ie,value:fe})=>(ee[ie]=fe,ee),{})}const C=k=>{const ee=k.queryString===void 0?void 0:String(k.queryString),ie=k.alertState===void 0?void 0:String(k.alertState),fe=k.dataSource===void 0?void 0:String(k.dataSource),q=k.ruleType===void 0?void 0:String(k.ruleType),Z=k.groupBy===void 0?void 0:String(k.groupBy).split(",");return{queryString:ee,alertState:ie,dataSource:fe,groupBy:Z,ruleType:q}},f=k=>({queryString:k.get("queryString")??void 0,contactPoint:k.get("contactPoint")??void 0}),D=k=>{const ee=k.queryString===void 0?void 0:String(k.queryString),ie=k.silenceState===void 0?void 0:String(k.silenceState);return{queryString:ee,silenceState:ie}};function T(k){return Object.entries(k).map(([ee,ie])=>({key:ee,value:ie}))}function M(k,ee,ie){const fe=new URLSearchParams(ie);return ee&&fe.set(c.DD,ee),`${k}?${fe.toString()}`}const O=k=>k.replace(/\"/g,'\\"');function S(k){return k.startsWith('"')&&k.endsWith('"')?O(k):`"${O(k)}"`}function v(k,ee){const ie={alertname:ee.name,...ee.labels};return x(k,ie)}function x(k,ee){const ie=new URLSearchParams;return ie.append("alertmanager",k),(0,u.J9)(ee).forEach((q,Z)=>ie.append(Z,q)),(0,E.c)("/alerting/silence/new",ie)}function A(k){return(0,E.c)(`/datasources/edit/${k}`)}function R(k){return(0,E.c)(`/dashboards/f/${k}`)}function B(k,ee){return createUrl(`/dashboards/f/${k}/${ee}/alerting`)}function U(k){return(0,E.c)(`/dashboards/f/${k}/settings`)}function w(k){return(0,E.c)(`/d/${encodeURIComponent(k)}`)}function K(k,ee){const ie=new URLSearchParams({viewPanel:ee});return(0,E.c)(`/d/${encodeURIComponent(k)}`,ie)}function N(k,ee,ie,fe=1e3){const q=new Date().getTime(),Z=()=>k().catch(J=>{if(ee(J)&&new Date().getTime()-q<ie)return new Promise(G=>setTimeout(G,fe)).then(Z);throw J});return Z()}const L={[d.Gi.Alerting]:1,[d.cF.Firing]:1,[d.Gi.Error]:1,[d.Gi.Pending]:2,[d.cF.Pending]:2,[d.cF.Inactive]:2,[d.Gi.NoData]:3,[d.Gi.Normal]:4};function V(k,ee){if(k===l.xB.Importance)return(0,t.sortBy)(ee,fe=>[L[(0,d.lh)(fe.state)],(0,i.RI)(fe).toLocaleLowerCase()]);if(k===l.xB.TimeAsc)return(0,t.sortBy)(ee,fe=>[new Date(fe.activeAt)||new Date,(0,i.RI)(fe).toLocaleLowerCase()]);if(k===l.xB.TimeDesc)return(0,t.sortBy)(ee,fe=>[new Date(fe.activeAt)||new Date,(0,i.RI)(fe).toLocaleLowerCase()]).reverse();const ie=(0,t.sortBy)(ee,fe=>(0,i.RI)(fe).toLocaleLowerCase());return k===l.xB.AlphaDesc&&ie.reverse(),ie}function F(){return s.$.buildInfo.edition===r.r.OpenSource}function z(){return s.$.buildInfo.env==="development"}function Y(k){return"message"in k}function H(k){return(0,o.NF)(k)?k.data.message:Y(k)?k.message:String(k)}},88467:(Q,I,e)=>{"use strict";e.d(I,{$I:()=>c,BU:()=>C,CZ:()=>E,J7:()=>l,ML:()=>f,Vf:()=>P,Xw:()=>d,jA:()=>m,p0:()=>p,t4:()=>y,v5:()=>g});var t=e(30038),n=e(26272),r=e(17172),s=e(10096),o=e(25027);const m=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function i(D,T=m,M){if(D.pending.match(M))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:M.meta.requestId};if(D.fulfilled.match(M)){if(T.requestId===void 0||T.requestId===M.meta.requestId)return{...T,result:M.payload,loading:!1,error:void 0}}else if(D.rejected.match(M)&&T.requestId===M.meta.requestId)return{...T,loading:!1,error:M.error};return T}function l(D,T){return(0,t.Z0)({name:D,initialState:m,reducers:{},extraReducers:M=>M.addDefaultCase((O,S)=>i(T,O,S))})}function d(D,T,M){return(0,t.Z0)({name:D,initialState:{},reducers:{},extraReducers:O=>O.addDefaultCase((S,v)=>{if((0,t.$S)(T)(v)){const x=v,A=M(x.meta.arg);return{...S,[A]:i(T,S[A],x)}}return S})})}function c(D){return D.catch(T=>{throw{message:E(T),code:T.statusCode}})}function g(D,T){return D.then(M=>(T.successMessage&&s.lE.emit(n.r1.alertSuccess,[T.successMessage]),M)).catch(M=>{const O=E(M);throw s.lE.emit(n.r1.alertError,[`${T.errorMessage??"Error"}: ${O}`]),M})}const u="Unknown Error";function E(D){if((0,r.NF)(D))if(D.data?.message){let M=D.data?.message;return typeof D.data?.error=="string"&&(M+=`; ${D.data.error}`),M}else{if(Array.isArray(D.data)&&D.data.length&&D.data[0]?.message)return D.data.map(M=>M?.message).filter(M=>!!M).join(" ");if(D.statusText)return D.statusText}const T=D?.message;return T||((0,o.fH)(o.le.unknownMessageFromError,{error:JSON.stringify(D)}),u)}function p(D){return Object.values(D).every(b)}function b(D){return D.dispatched&&!D.loading}function a(D){return Object.values(D).every(h)}function h(D){return D.dispatched&&!D.loading&&!D.error}function P(D){return Object.values(D).some(f)}function y(D){return Object.values(D).some(T=>T.dispatched)}function C(D){return Object.values(D).some(h)}function f(D){return D?D.dispatched&&D.loading:!1}},63066:(Q,I,e)=>{"use strict";e.d(I,{Bu:()=>ee,IJ:()=>T,J6:()=>z,JE:()=>v,Q8:()=>D,QX:()=>B,Qk:()=>U,Rk:()=>ie,XI:()=>w,Z9:()=>A,ir:()=>fe,l1:()=>O,mp:()=>F,pY:()=>f,qO:()=>K});var t=e(2543),n=e.n(t),r=e(43127),s=e(65879),o=e(32264),m=e(19347),i=e(26657),l=e(86849),d=e(21969),c=e(74730),g=e(66718),u=e(94822),E=e(55907),p=e(86590),b=e(75471),a=e(55740),h=e(57220),P=e(56361),y=e(23662),C=e(25968);const f="1m",D="grafana.alerting.manualRouting",T=()=>{const{canCreateGrafanaRules:q,canCreateCloudRules:Z}=(0,b.Q9)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:a.kl,dataSourceName:null,type:q?p.Z.grafana:Z?p.Z.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:u.Q8.NoData,execErrState:u.Q8.Error,evaluateFor:"5m",evaluateEvery:f,manualRouting:M(),contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],namespace:"",expression:"",forTime:1,forTimeUnit:"m"})},M=()=>o.$.featureToggles.alertingSimplifiedRouting??!1?localStorage.getItem(D)!=="false":!1;function O(q){const{name:Z,expression:J,forTime:G,forTimeUnit:ne,keepFiringForTime:te,keepFiringForTimeUnit:oe,type:le}=q;if(le===p.Z.cloudAlerting){let ue;return te&&oe&&(ue=`${te}${oe}`),{alert:Z,for:`${G}${ne}`,keep_firing_for:ue,annotations:(0,P.Sl)(q.annotations||[]),labels:(0,P.Sl)(q.labels||[]),expr:J}}else if(le===p.Z.cloudRecording)return{record:Z,labels:(0,P.Sl)(q.labels||[]),expr:J};throw new Error(`unexpected rule type: ${le}`)}function S(q,Z){const J=[...(0,P.KT)(q||{})];return Z&&J.push({key:"",value:""}),J}function v(q){const Z=[...q];return a.kl.map(G=>G.key).forEach((G,ne)=>{const te=Z.findIndex(oe=>oe.key===G);if(te===-1){const oe={key:G,value:""};Z.splice(ne,0,oe)}else te!==ne&&Z.splice(ne,0,Z.splice(te,1)[0])}),Z}function x(q,Z){if(Z?.grafana?.selectedContactPoint&&q)return{receiver:Z?.grafana?.selectedContactPoint,mute_time_intervals:Z?.grafana?.muteTimeIntervals,group_by:Z?.grafana?.overrideGrouping?Z?.grafana?.groupBy:void 0,group_wait:Z?.grafana?.overrideTimings&&Z?.grafana?.groupWaitValue?Z?.grafana?.groupWaitValue:void 0,group_interval:Z?.grafana?.overrideTimings&&Z?.grafana?.groupIntervalValue?Z?.grafana?.groupIntervalValue:void 0,repeat_interval:Z?.grafana?.overrideTimings&&Z?.grafana?.repeatIntervalValue?Z?.grafana?.repeatIntervalValue:void 0}}function A(q){const{name:Z,condition:J,noDataState:G,execErrState:ne,evaluateFor:te,queries:oe,isPaused:le,contactPoints:ue,manualRouting:Te}=q;if(J){const he=x(Te,ue);return{grafana_alert:{title:Z,condition:J,no_data_state:G,exec_err_state:ne,data:oe.map(H),is_paused:!!le,notification_settings:he},for:te,annotations:(0,P.Sl)(q.annotations||[]),labels:(0,P.Sl)(q.labels||[])}}throw new Error("Cannot create rule without specifying alert condition")}function R(q){const Z=q.notification_settings?{selectedContactPoint:q.notification_settings.receiver,muteTimeIntervals:q.notification_settings.mute_time_intervals??[],overrideGrouping:Array.isArray(q.notification_settings.group_by)&&q.notification_settings.group_by.length>0,overrideTimings:[q.notification_settings.group_wait,q.notification_settings.group_interval,q.notification_settings.repeat_interval].some(Boolean),groupBy:q.notification_settings.group_by||[],groupWaitValue:q.notification_settings.group_wait||"",groupIntervalValue:q.notification_settings.group_interval||"",repeatIntervalValue:q.notification_settings.repeat_interval||""}:void 0;return Z?{[h.hY]:Z}:void 0}function B(q){const{ruleSourceName:Z,namespace:J,group:G,rule:ne}=q,te=T();if((0,h.z2)(Z))if((0,y.lT)(ne)){const oe=ne.grafana_alert,le=R(oe);return{...te,name:oe.title,type:p.Z.grafana,group:G.name,evaluateEvery:G.interval||te.evaluateEvery,evaluateFor:ne.for||"0",noDataState:oe.no_data_state,execErrState:oe.exec_err_state,queries:oe.data,condition:oe.condition,annotations:v(S(ne.annotations,!1)),labels:S(ne.labels,!0),folder:{title:J,uid:oe.namespace_uid},isPaused:oe.is_paused,contactPoints:le,manualRouting:!!le}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.$y)(ne)){const le={refId:"A",datasourceUid:(0,m.l)().getInstanceSettings(Z)?.uid??"",queryType:"",relativeTimeRange:(0,r.Cn)(),expr:ne.expr,model:{refId:"A",hide:!1,expr:ne.expr}},ue=U(ne);return{...te,...ue,queries:[le],annotations:v(S(ne.annotations,!1)),type:p.Z.cloudAlerting,dataSourceName:Z,namespace:J,group:G.name}}else if((0,y.i7)(ne)){const oe=w(ne);return{...te,...oe,type:p.Z.cloudRecording,dataSourceName:Z,namespace:J,group:G.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function U(q){const Z=T(),[J,G]=q.for?(0,C.P1)(q.for):[0,"s"],[ne,te]=q.keep_firing_for?(0,C.P1)(q.keep_firing_for):[Z.keepFiringForTime,Z.keepFiringForTimeUnit];return{name:q.alert,expression:q.expr,forTime:J,forTimeUnit:G,keepFiringForTime:ne,keepFiringForTimeUnit:te,annotations:S(q.annotations,!1),labels:S(q.labels,!0)}}function w(q){return{name:q.record,expression:q.expr,labels:S(q.labels,!0)}}const K=()=>{const q=(0,h.y9)();if(!q)return[...L("A","B")];const Z=(0,r.Cn)();return[{refId:"A",datasourceUid:q.uid,queryType:"",relativeTimeRange:Z,model:{refId:"A"}},...L("B","C")]},N=q=>{const Z=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:q[0]?.uid||"",queryType:"",relativeTimeRange:Z,model:{refId:"A"}}]},L=(...q)=>{const Z=q[0],J=q[1],G={refId:q[0],type:g.Tz.reduce,datasource:{uid:g.Uj,type:i.dR.type},conditions:[{type:"query",evaluator:{params:[],type:E.p.IsAbove},operator:{type:"and"},query:{params:[Z]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},ne={refId:J,type:g.Tz.threshold,datasource:{uid:g.Uj,type:i.dR.type},conditions:[{type:"query",evaluator:{params:[0],type:E.p.IsAbove},operator:{type:"and"},query:{params:[J]},reducer:{params:[],type:"last"}}],expression:Z};return[{refId:Z,datasourceUid:g.Uj,queryType:"",model:G},{refId:J,datasourceUid:g.Uj,queryType:"",model:ne}]},V=async(q,Z,J,G,ne,te)=>{const oe=[];for(const le of q){const ue=await(0,m.l)().get(le.datasource?.uid?le.datasource:G),Te={uid:ue.uid,type:ue.type},he=s.relativeToTimeRange(Z),{interval:re,intervalMs:De}=Y(he,te??ue.interval,ne),Fe={__interval:{text:re,value:re},__interval_ms:{text:De,value:De},...J},Ee=ue.interpolateVariablesInQueries?ue.interpolateVariablesInQueries([le],Fe)[0]:le;if(Te.uid===g.Uj){const Me={refId:Ee.refId,queryType:"",relativeTimeRange:Z,datasourceUid:g.Uj,model:Ee};oe.push(Me)}else{const Me=(0,m.l)().getInstanceSettings(Te);if(Me&&Me.meta.alerting){const ze={refId:Ee.refId,queryType:Ee.queryType??"",relativeTimeRange:Z,datasourceUid:Me.uid,model:{...Ee,maxDataPoints:ne,intervalMs:De}};oe.push(ze)}}}return oe},F=async(q,Z)=>{const{targets:J}=q;if(!q.id||!Z.uid)return;const G=s.timeRangeToRelative(s.convertRawToRange(Z.time)),ne=await V(J,G,q.scopedVars||{},q.datasource??void 0,q.maxDataPoints??void 0,q.interval??void 0);if(!ne.length||!ne.find(ue=>ue.datasourceUid!==g.Uj))return;if(!ne.find(ue=>ue.datasourceUid===g.Uj)){const[ue,Te]=L((0,d.W3)(ne),"-");ne.push(ue);const[he,re]=L(ue.refId,(0,d.W3)(ne));ne.push(re)}const{folderTitle:te,folderUid:oe}=Z.meta;return{type:p.Z.grafana,folder:oe&&te?{uid:oe,title:te}:void 0,queries:ne,name:q.title,condition:ne[ne.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:Z.uid},{key:a.YH.panelID,value:String(q.id)}]}},z=async q=>{if(!q.state.key)return;const Z=l.jh.getTimeRange(q),J=(0,c.un)(q);if(!J)return;const{queries:G,datasource:ne,maxDataPoints:te,minInterval:oe}=J.state,le=(0,c.YQ)(q);if(!le||!le.state.uid)return;const ue=await V(G,s.timeRangeToRelative(s.convertRawToRange(Z.state.value.raw)),{__sceneObject:{value:q}},ne,te,oe);if(!ue.length||!ue.find(De=>De.datasourceUid!==g.Uj))return;if(!ue.find(De=>De.datasourceUid===g.Uj)){const[De,Fe]=L((0,d.W3)(ue),"-");ue.push(De);const[Ee,Me]=L(De.refId,(0,d.W3)(ue));ue.push(Me)}const{folderTitle:Te,folderUid:he}=le.state.meta;return{type:p.Z.grafana,folder:he&&Te?{uid:he,title:Te}:void 0,queries:ue,name:q.state.title,condition:ue[ue.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:le.state.uid},{key:a.YH.panelID,value:String((0,c.Cs)(q))}]}};function Y(q,Z,J){return J?s.calculateInterval(q,J,Z):Z&&s.intervalToMs(Z)>1e3?{interval:Z,intervalMs:s.intervalToMs(Z)}:{interval:"1s",intervalMs:1e3}}function H(q){const Z=q.model;return k(Z)&&Z.instant&&Z.range?{...q,model:{...Z,range:!0,instant:!1}}:q}function k(q){return"expr"in q&&"instant"in q&&"range"in q}function ee(q){return"expr"in q}const ie=q=>({...q,queries:q.queries?.map(Z=>(0,t.omit)(Z,"model.hide"))});function fe(q){return ie(B(q))}},18461:(Q,I,e)=>{"use strict";e.d(I,{$9:()=>y,LC:()=>c,Ns:()=>f,P1:()=>m,PH:()=>b,UP:()=>l,VY:()=>M,Yd:()=>d,c:()=>a,qg:()=>h,uE:()=>O,x6:()=>P});var t=e(2543),n=e.n(t),r=e(12131),s=e(57220),o=e(23662);function m(S,v,x,A){return(0,o.lT)(A)?{uid:A.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:S,namespace:v,groupName:x,ruleName:(0,o.$y)(A)?A.alert:A.record,rulerRuleHash:f(A)}}function i(S,v,x,A){return{ruleSourceName:S,namespace:v,groupName:x,ruleName:A.name,ruleHash:D(A)}}function l(S,v){const x=v.namespace.name,A=v.group.name;if(v.rulerRule)return m(S,x,A,v.rulerRule);if(v.promRule)return i(S,x,A,v.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function d(S){return m(S.ruleSourceName,S.namespace,S.group.name,S.rule)}function c(S,v){return(0,o.A4)(S)&&(0,o.A4)(v)?S.uid===v.uid:(0,o.X4)(S)&&(0,o.X4)(v)?S.groupName===v.groupName&&S.namespace===v.namespace&&S.ruleName===v.ruleName&&S.rulerRuleHash===v.rulerRuleHash&&S.ruleSourceName===v.ruleSourceName:(0,o.Mj)(S)&&(0,o.Mj)(v)?S.groupName===v.groupName&&S.namespace===v.namespace&&S.ruleName===v.ruleName&&S.ruleHash===v.ruleHash&&S.ruleSourceName===v.ruleSourceName:!1}const g="cri",u="pri";function E(S){return S.replace(/\$/g,"_DOLLAR_")}function p(S){return S.replace(/\_DOLLAR\_/g,"$")}function b(S){return S.replace(/\//g,"").replace(/\\/g,"")}function a(S){return S.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function h(S,v=!1){const A=(v?decodeURIComponent(S):S).split("$");if(A.length===1)return{uid:S,ruleSourceName:"grafana"};if(A.length===6){const[R,B,U,w,K,N]=A.map(p).map(a);if(R===g)return{ruleSourceName:B,namespace:U,groupName:w,ruleName:K,rulerRuleHash:N};if(R===u)return{ruleSourceName:B,namespace:U,groupName:w,ruleName:K,ruleHash:N}}throw new Error(`Failed to parse rule location: ${S}`)}function P(S,v=!1){if(S)try{return h(S,v)}catch{return}}function y(S){return(0,o.A4)(S)?S.uid:(0,o.X4)(S)?[g,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.rulerRuleHash].map(String).map(E).map(b).join("$"):[u,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.ruleHash].map(String).map(E).map(b).join("$")}function C(S){let v=0;if(S.length===0)return v;for(let x=0;x<S.length;x++){const A=S.charCodeAt(x);v=(v<<5)-v+A,v=v&v}return v}function f(S){if((0,o.i7)(S))return C(JSON.stringify([S.record,S.expr,T(S.labels)])).toString();if((0,o.$y)(S))return C(JSON.stringify([S.alert,S.expr,T(S.annotations),T(S.labels)])).toString();if((0,o.lT)(S))return S.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function D(S){if((0,o.KB)(S))return C(JSON.stringify([S.type,S.query,T(S.labels)])).toString();if((0,o.Z8)(S))return C(JSON.stringify([S.type,S.query,T(S.annotations),T(S.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function T(S){return JSON.stringify(Object.entries(S||{}).sort((v,x)=>v[0].localeCompare(x[0])))}function M(S){return(0,o.A4)(S)?s.hY:S.ruleSourceName}function O(S){const{pathname:v=""}=r.Ny.getLocation(),{id:x}=S;return x?(0,t.nth)(v.split("/"),-2):void 0}},23662:(Q,I,e)=>{"use strict";e.d(I,{$7:()=>a,$y:()=>g,A4:()=>h,HH:()=>p,KB:()=>c,Mj:()=>C,Om:()=>x,RI:()=>b,TU:()=>M,Wy:()=>S,X4:()=>P,XI:()=>D,YN:()=>A,Z8:()=>d,dS:()=>O,f6:()=>f,i7:()=>u,jg:()=>B,lT:()=>E,nf:()=>y,qz:()=>R});var t=e(2543),n=e.n(t),r=e(43585),s=e(94822),o=e(28475),m=e(55740),i=e(57220),l=e(25968);function d(w){return typeof w=="object"&&w.type===s.JS.Alerting}function c(w){return typeof w=="object"&&w.type===s.JS.Recording}function g(w){return typeof w=="object"&&"alert"in w}function u(w){return typeof w=="object"&&"record"in w}function E(w){return typeof w=="object"&&"grafana_alert"in w}function p(w){return w.rulerRule&&E(w.rulerRule)&&!!w.rulerRule.grafana_alert.is_paused}function b(w){return JSON.stringify(w.labels)}function a(w){return w.error&&w.error?.message?.includes(m.UU)}function h(w){return"uid"in w}function P(w){return"rulerRuleHash"in w}function y(w){return Object.values(s.JS).includes(w)}function C(w){return"ruleHash"in w}function f(w){switch(w){case"ok":return o.Jc.Ok;case"nodata":return o.Jc.NoData;case"error":case"err":return o.Jc.Error;case"unknown":return o.Jc.Unknown;default:return}}function D(w){return w===s.cF.Inactive?"Normal":(0,t.capitalize)(w)}const T=w=>w.reduce((K,{dataSourceName:N,name:L,groups:V})=>(V.forEach(({name:F,rules:z})=>{z.forEach(Y=>{d(Y)&&K.push({dataSourceName:N,namespaceName:L,groupName:F,rule:Y})})}),K),[]),M=w=>d(w.promRule)?w.promRule:null,O=w=>w.reduce((K,{rulesSource:N,name:L,groups:V})=>(V.forEach(({name:F,rules:z})=>{z.forEach(Y=>{Y.promRule&&d(Y.promRule)&&K.push({dataSourceName:(0,i.EV)(N),namespaceName:L,groupName:F,...Y})})}),K),[]);function S(w){let K;return Object.values(r.O).includes(w)?K=w:K=(0,s.lh)(w),v[K]}const v={[s.cF.Inactive]:"good",[s.cF.Firing]:"bad",[s.cF.Pending]:"warning",[s.Gi.Alerting]:"bad",[s.Gi.Error]:"bad",[s.Gi.NoData]:"info",[s.Gi.Normal]:"good",[s.Gi.Pending]:"warning",[r.O.NoData]:"info",[r.O.Paused]:"warning",[r.O.Alerting]:"bad",[r.O.OK]:"good",[r.O.Unknown]:"info"};function x(w){return w?.alerts?w.alerts.reduce((K,N)=>{const L=(0,s.lh)(N.state)!==s.Gi.Normal;if(N.activeAt&&L){const V=new Date(N.activeAt);if(K===null||K.getTime()>V.getTime())return V}return K},null):null}function A(w){return Array.isArray(w.source_tenants)}function R(w){return E(w)?w.grafana_alert.title:g(w)?w.alert:u(w)?w.record:""}const B=(w,K)=>{const N={alertName:"",forDuration:"0s",evaluationsToFire:0};return E(w)?{alertName:w.grafana_alert.title,forDuration:w.for,evaluationsToFire:U(w.for,K)}:g(w)?{alertName:w.alert,forDuration:w.for??"0s",evaluationsToFire:U(w.for??"0s",K)}:N},U=(w,K)=>{const N=(0,l.ge)(K),L=(0,l.ge)(w);return L===0&&N!==0?1:N===0||L/N<1?0:Math.ceil(L/N)+1}},25968:(Q,I,e)=>{"use strict";e.d(I,{M9:()=>d,P1:()=>n,TN:()=>o,ge:()=>c,mo:()=>g,sc:()=>s,yl:()=>u});var t=e(41068);function n(E){const p=E.match(/(\d+)(\w+)/);if(p)return[Number(p[1]),p[2]];throw new Error(`Invalid interval description: ${E}`)}function r(E){const{sec:p,count:b}=describeInterval(E);return p*b}const s=Object.entries(t.y).map(([E,p])=>({label:E[0].toUpperCase()+E.slice(1),value:p}));function o(E){try{return d(E),!0}catch{return!1}}const m={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},i=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.y).join(", ")}`);function d(E){let p=E,b=[];function a(P){const y=i.exec(P),C=y?.groups?.value&&y?.groups?.type;if(!y||!C)throw l;y&&y.groups?.value&&y.groups?.type&&(p=p.replace(y[0],""),b.push([Number(y.groups.value),y.groups.type])),p&&a(p)}if(a(E),!b.length)throw l;return b.reduce((P,[y,C])=>{const f=y*m[C];return P+f},0)}const c=E=>{try{return d(E)}catch{return 0}},g=E=>E.includes("0001-01-01T00");function u(E){return E%(1e3*60*60)===0?E/(1e3*60*60)+"h":E%(1e3*60)===0?E/(1e3*60)+"m":E%1e3===0?E/1e3+"s":E.toFixed()+"ms"}},3704:(Q,I,e)=>{"use strict";e.d(I,{c:()=>n,z:()=>r});var t=e(32264);function n(s,o){const i=new URLSearchParams(o).toString();return`${t.$.appSubUrl}${s}${i?`?${i}`:""}`}function r(s,o){const i=new URLSearchParams(o).toString();try{const l=new URL(t.$.appSubUrl,t.$.appUrl);return l.pathname=s,`${l.href}${i?`?${i}`:""}`}catch{return n(s,o)}}},10154:(Q,I,e)=>{"use strict";e.d(I,{Xm:()=>s,rJ:()=>r,vJ:()=>n,vy:()=>o});var t=e(17172);function n(m){return(0,t.AI)().post("/api/annotations",m)}function r(m){return(0,t.AI)().put(`/api/annotations/${m.id}`,m)}function s(m){return(0,t.AI)().delete(`/api/annotations/${m.id}`)}async function o(){return(await(0,t.AI)().get("/api/annotations/tags")).result.tags.map(({tag:i,count:l})=>({term:i,count:l}))}},82241:(Q,I,e)=>{"use strict";e.d(I,{A:()=>D});var t=e(96540),n=e(75505),r=e(39070),s=e(76287),o=e(13544),m=e(68402),i=e(62930),l=e(55852),d=e(42418),c=e(14792),g=e(74856),u=e(34214),E=e(27302),p=e(42493),b=e(28240),a=e(8790),h=e(83195),P=e(56034),y=e(14578),C=e(88323);class f extends t.PureComponent{constructor(M){super(M),this.updateFields=()=>{const O=this.props.response?.panelData,S=O?.series?.[0]??O?.annotations?.[0];if(S&&S.fields){const v=S.fields.map(x=>{const A=(0,b.Ct)(x,S);let R="";for(let B=0;B<S.length;B++){if(B>0&&(R+=", "),B>2){R+="...";break}R+=x.values[B]}return R.length>50&&(R=R.substring(0,50)+"..."),{label:`${A} (${x.type})`,value:A,description:R}});this.setState({fieldNames:v})}},this.onFieldSourceChange=(O,S)=>{const v=this.props.mappings||{},x=v[O]||{};this.props.change({...v,[O]:{...x,source:S.value||a.V.Field}})},this.onFieldNameChange=(O,S)=>{const v=this.props.mappings||{};if(!S){const A={...this.props.mappings};delete A[O],this.props.change(A);return}const x=v[O]||{};this.props.change({...v,[O]:{...x,value:S.value,source:a.V.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(M){M.response!==this.props.response&&this.updateFields()}renderRow(M,O,S){const{fieldNames:v}=this.state;let x=[...v];const A=O.value;let R=v.find(U=>A===U.value);A&&!R&&x.push({label:A,value:A});let B=S?S[M.key]:"";if(B&&M.key.startsWith("time")){const U=(0,h.j_)("dateTimeAsIso");B=(0,h.cN)(U(B))}return B==null&&(B=""),t.createElement("tr",{key:M.key},t.createElement("td",null,M.label||M.key," ",M.help&&t.createElement(P.m,{content:M.help},t.createElement(y.I,{name:"info-circle"}))),t.createElement("td",null,t.createElement(C.l6,{value:R,options:x,placeholder:M.placeholder||M.key,onChange:U=>{this.onFieldNameChange(M.key,U)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),t.createElement("td",null,`${B}`))}render(){const M=this.props.response?.events?.[0],O=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,p.kj.map(S=>this.renderRow(S,O[S.key]||{},M))))}}class D extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:M,annotation:O}=this.props;if((0,p.E7)(M))return;const S=(0,c.UA)().getCurrent();if(!S)return;this.setState({running:!0});const v=await(0,n.s)((0,E.b)({range:(0,g.jG)().timeRange(),panel:new u.a({}),dashboard:S},M,O));this.setState({running:!1,response:v})},this.onQueryChange=M=>{this.props.onChange({...this.props.annotation,target:M})},this.onMappingChange=M=>{this.props.onChange({...this.props.annotation,mappings:M})},this.onAnnotationChange=M=>{this.props.onChange(M)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(M){this.props.annotation!==M.annotation&&!(0,p.E7)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:M,annotation:O}=this.props,v={...p.CU,...M.annotations}.prepareAnnotation(O);v!==O?this.props.onChange(v):this.onRunQuery()}getStatusSeverity(M){const{events:O,panelData:S}=M;return S?.errors||S?.error?"error":O?.length?"success":"warning"}renderStatusText(M,O){const{events:S,panelData:v}=M;if(O||M?.panelData?.state===r.Gu.Loading||!M)return t.createElement("p",null,"loading...");if(v?.errors)return t.createElement(t.Fragment,null,v.errors.map((A,R)=>t.createElement("p",{key:R},A.message)));if(v?.error)return t.createElement("p",null,v.error.message??"There was an error fetching data");if(!S?.length)return t.createElement("p",null,"No events found");const x=v?.series?.[0]??v?.annotations?.[0];return t.createElement("p",null,S.length," events (from ",x?.fields.length," fields)")}renderStatus(){const{response:M,running:O}=this.state;return M?t.createElement(t.Fragment,null,t.createElement(m.$,{v:2}),t.createElement("div",null,O?t.createElement(i.y,null):t.createElement(l.$n,{"data-testid":o.Tp.components.Annotations.editor.testButton,variant:"secondary",size:"xs",onClick:this.onRunQuery},"Test annotation query")),t.createElement(m.$,{v:2,layout:"block"}),t.createElement(d.F,{"data-testid":o.Tp.components.Annotations.editor.resultContainer,severity:this.getStatusSeverity(M),title:"Query result"},this.renderStatusText(M,O))):null}render(){const{datasource:M,annotation:O,datasourceInstanceSettings:S}=this.props,{response:v}=this.state;let x=M.annotations?.QueryEditor||M.components?.QueryEditor;if(!x)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const A={...M.annotations?.getDefaultQuery?.(),...O.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(s.p,{instanceSettings:S},t.createElement(x,{key:M?.name,query:A,datasource:M,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:v?.panelData,range:(0,g.jG)().timeRange(),annotation:O,onAnnotationChange:this.onAnnotationChange})),(0,p.JX)(M)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(f,{response:v,mappings:O.mappings,change:this.onMappingChange})))}}},27302:(Q,I,e)=>{"use strict";e.d(I,{b:()=>c});var t=e(62467),n=e(69862),r=e(81160),s=e(65879),o=e(41987),m=e(39374),i=e(42493);let l=100;function d(){return"AQ"+l++}function c(g,u,E){const p={...i.CU,...u.annotations},b={...p.getDefaultQuery?.(),...E},a=p.prepareAnnotation(b);if(!a)return(0,t.of)({});const h=p.prepareQuery(a);if(!h)return(0,t.of)({});const P=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=s.calculateInterval(g.range,P,u.interval),C={__interval:{text:y.interval,value:y.interval},__interval_ms:{text:y.intervalMs.toString(),value:y.intervalMs},__annotation:{text:a.name,value:a}},f={startTime:Date.now(),requestId:d(),range:g.range,maxDataPoints:P,scopedVars:C,...y,app:o.Jk.Dashboard,timezone:g.dashboard.timezone,targets:[{...h,refId:"Anno"}]};return(0,m.BN)(u,f).pipe((0,n.Z)(D=>{const T=D?.series.length?D.series:D.annotations;return T?.length?p.processEvents(a,T).pipe((0,r.T)(M=>({panelData:D,events:M}))):(0,t.of)({panelData:D,events:[]})}))}},42493:(Q,I,e)=>{"use strict";e.d(I,{CU:()=>g,E7:()=>y,JX:()=>P,kj:()=>E});var t=e(2543),n=e.n(t),r=e(62467),s=e(69862),o=e(81160),m=e(57934),i=e(11261),l=e(28240),d=e(8790),c=e(2913);const g={prepareAnnotation:C=>{if((0,t.isString)(C?.query)){const{query:f,...D}=C;return{...D,target:{refId:"annotation_query",query:f},mappings:{}}}return C},prepareQuery:C=>C.target,processEvents:(C,f)=>a(f,C.mappings)};function u(){return C=>C.pipe((0,s.Z)(f=>{if(!f?.length)return(0,r.of)(void 0);if(f.length===1)return(0,r.of)(f[0]);const D={interpolate:T=>T};return(0,r.of)(f).pipe(m.c.mergeTransformer.operator({},D),(0,o.T)(T=>T[0]))}))}const E=[{key:"time",field:C=>C.fields.find(f=>f.type===i.PU.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:C=>C.fields.find(f=>f.type===i.PU.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],b=[...c.config.publicDashboardAccessToken?p:[],...E,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function a(C,f){return(0,r.of)(C).pipe(u(),(0,o.T)(D=>{if(!D?.length)return[];let T=!1,M=!1;const O={};for(const x of D.fields){const A=(0,l.Ct)(x,D);O[A.toLowerCase()]=x}f||(f={});const S=[];for(const x of b){const A=f[x.key]||{};if(A.source===d.V.Skip)continue;const R={key:x.key,split:x.split};if(A.source===d.V.Text)R.text=A.value;else{const B=(A.value||x.key).toLowerCase();R.field=O[B],!R.field&&x.field&&(R.field=x.field(D))}(R.field||R.text)&&(S.push(R),R.key==="time"?T=!0:R.key==="text"&&(M=!0))}if(!T||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const v=[];for(let x=0;x<D.length;x++){const A={type:"default",color:"red"};for(const R of S){let B;if(R.text)B=R.text;else if(R.field&&(B=R.field.values[x],B!==void 0&&R.regex)){const U=R.regex.exec(B);U&&(B=U[1]?U[1]:U[0])}B!=null&&(R.split&&typeof B=="string"&&(B=B.split(",")),A[R.key]=B)}v.push(A)}return v}))}const h=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function P(C){const{type:f}=C;return!(f==="datasource"||h.includes(f))}function y(C){const{type:f}=C;return h.includes(f)}},93584:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>c,QB:()=>l,Ri:()=>i,Sf:()=>s,cV:()=>o,h8:()=>m});var t=e(30038);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},r=(0,t.Z0)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(g,u)=>{const{keys:E,keysIncludingExpired:p}=u.payload,b=u.payload.keys.length===0&&u.payload.keysIncludingExpired.length>0?!0:g.includeExpired;return{...g,hasFetched:!0,keys:E,keysIncludingExpired:p,includeExpired:b}},setSearchQuery:(g,u)=>({...g,searchQuery:u.payload}),includeExpiredToggled:g=>({...g,includeExpired:!g.includeExpired}),isFetching:g=>({...g,hasFetched:!1}),setMigrationResult:(g,u)=>({...g,migrationResult:u.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:o,isFetching:m,setSearchQuery:i,setMigrationResult:l}=r.actions,c={apiKeys:r.reducer}},73399:(Q,I,e)=>{"use strict";e.d(I,{getAuthProviderStatus:()=>c,getRegisteredAuthProviders:()=>i,initAuthConfig:()=>g});var t=e(10096),n=e(27677),r=e(31678);const s=[],o={};function m(E,p){s.find(b=>b.id===E.id)||(s.push(E),p&&(o[E.id]=p))}function i(){return s}function l(E){return s.find(p=>p.id===E)}function d(E){const p=[];for(const[b,a]of Object.entries(E)){const h=s.find(P=>`auth.${P.id}`===b);if(h){const P={...a,providerId:h.id,displayName:a.name||h.displayName};p.push(P)}}return p}async function c(E){if(o[E]){const p=o[E];return p()}return{configured:!1,enabled:!1}}function g(){m({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},u)}async function u(){if(t.TP.hasPermission(r.AccessControlAction.SettingsRead)){const p=(await(0,n.AI)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:p.enabled==="true",enabled:p.enabled==="true",hide:p.enabled!=="true"}}return{configured:!1,enabled:!1}}},20604:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>p,MH:()=>i,Nh:()=>l,Oy:()=>u,SH:()=>d,TO:()=>o,jA:()=>s,sr:()=>m});var t=e(30038);const n={settings:{},providerStatuses:{},isLoading:!1,providers:[]},r=(0,t.Z0)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(b,a)=>({...b,settings:a.payload}),providerStatusesLoaded:(b,a)=>({...b,providerStatuses:a.payload}),loadingBegin:b=>({...b,isLoading:!0}),loadingEnd:b=>({...b,isLoading:!1}),setError:(b,a)=>({...b,updateError:a.payload}),resetError:b=>({...b,updateError:void 0}),setWarning:(b,a)=>({...b,warning:a.payload}),resetWarning:b=>({...b,warning:void 0}),providersLoaded:(b,a)=>({...b,providers:a.payload})}}),{settingsUpdated:s,providerStatusesLoaded:o,loadingBegin:m,loadingEnd:i,setError:l,resetError:d,setWarning:c,resetWarning:g,providersLoaded:u}=r.actions,p={authConfig:r.reducer}},55314:(Q,I,e)=>{"use strict";e.d(I,{G2:()=>y,Ko:()=>h,Vc:()=>T,aF:()=>f,cU:()=>b,e8:()=>M,hT:()=>E.hT,iB:()=>O,kH:()=>C,uz:()=>P,vZ:()=>a,wt:()=>D});var t=e(93020),n=e(75505),r=e(71733),s=e(39070),o=e(17172),m=e(12131),i=e(82467),l=e(3169),d=e(10096),c=e(6473),g=e(37690),u=e(92955),E=e(51066);function p({baseURL:S}){async function v(x){try{const{data:A,...R}=await(0,n.s)((0,o.AI)().fetch({...x,url:S+x.url,showErrorAlert:x.showErrorAlert}));return{data:A,meta:R}}catch(A){return x.manageError?x.manageError(A):{error:A}}}return v}const b=(0,t.xP)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:p({baseURL:"/api"}),endpoints:S=>({listFolders:S.query({providesTags:v=>v?.map(x=>({type:"getFolder",id:x.uid}))??[],query:({parentUid:v,limit:x,page:A,permission:R})=>({url:"/folders",params:{parentUid:v,limit:x,page:A,permission:R}})}),getFolder:S.query({providesTags:(v,x,A)=>[{type:"getFolder",id:A}],query:v=>({url:`/folders/${v}`,params:{accesscontrol:!0}})}),newFolder:S.mutation({query:({title:v,parentUid:x})=>({method:"POST",url:"/folders",data:{title:v,parentUid:x}}),onQueryStarted:({parentUid:v},{queryFulfilled:x,dispatch:A})=>{x.then(async({data:R})=>{await d.TP.fetchUserPermissions(),A((0,i.dx)((0,l.tZ)("Folder created"))),A((0,g.bw)({parentUID:v,pageSize:u.md})),m.Ny.push(r.I.stripBaseFromUrl(R.url))})}}),saveFolder:S.mutation({invalidatesTags:["getFolder"],query:({uid:v,title:x,version:A})=>({method:"PUT",url:`/folders/${v}`,data:{title:x,version:A}}),onQueryStarted:({parentUid:v},{queryFulfilled:x,dispatch:A})=>{x.then(()=>{A((0,g.bw)({parentUID:v,pageSize:u.md}))})}}),moveFolder:S.mutation({invalidatesTags:["getFolder"],query:({folder:v,destinationUID:x})=>({url:`/folders/${v.uid}/move`,method:"POST",data:{parentUID:x}}),onQueryStarted:({folder:v,destinationUID:x},{queryFulfilled:A,dispatch:R})=>{const{parentUid:B}=v;A.then(()=>{R((0,g.bw)({parentUID:B,pageSize:u.md})),R((0,g.bw)({parentUID:x,pageSize:u.md}))})}}),deleteFolder:S.mutation({query:({uid:v})=>({url:`/folders/${v}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:v},{queryFulfilled:x,dispatch:A})=>{x.then(()=>{A((0,g.bw)({parentUID:v,pageSize:u.md}))})}}),getAffectedItems:S.query({queryFn:async v=>{const A=Object.keys(v.folder).filter(U=>v.folder[U]).map(U=>(0,o.AI)().get(`/api/folders/${U}/counts`)),R=await Promise.all(A),B={folder:Object.values(v.folder).filter(s.zz).length,dashboard:Object.values(v.dashboard).filter(s.zz).length,libraryPanel:0,alertRule:0};for(const U of R)B.folder+=U.folder??0,B.dashboard+=U.dashboard,B.alertRule+=U.alertrule,B.libraryPanel+=U.librarypanel;return{data:B}}}),moveItems:S.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:v,destinationUID:x},A,R,B)=>{const U=Object.keys(v.dashboard).filter(K=>v.dashboard[K]),w=Object.keys(v.folder).filter(K=>v.folder[K]);for(const K of w)await B({url:`/folders/${K}/move`,method:"POST",data:{parentUID:x}});for(const K of U){const L={dashboard:(await(0,o.AI)().get(`/api/dashboards/uid/${K}`)).dashboard,folderUid:x,overwrite:!1,message:""};await B({url:"/dashboards/db",method:"POST",data:L})}return{data:void 0}},onQueryStarted:({destinationUID:v,selectedItems:x},{queryFulfilled:A,dispatch:R})=>{const B=Object.keys(x.dashboard).filter(w=>x.dashboard[w]),U=Object.keys(x.folder).filter(w=>x.folder[w]);A.then(()=>{R((0,g.bw)({parentUID:v,pageSize:u.md})),R((0,g.Zw)([...U,...B]))})}}),deleteItems:S.mutation({queryFn:async({selectedItems:v},x,A,R)=>{const B=Object.keys(v.dashboard).filter(w=>v.dashboard[w]),U=Object.keys(v.folder).filter(w=>v.folder[w]);for(const w of U)await R({url:`/folders/${w}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const w of B)await R({url:`/dashboards/uid/${w}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:v},{queryFulfilled:x,dispatch:A})=>{const R=Object.keys(v.dashboard).filter(U=>v.dashboard[U]),B=Object.keys(v.folder).filter(U=>v.folder[U]);x.then(()=>{A((0,g.Zw)([...B,...R]))})}}),saveDashboard:S.mutation({query:({dashboard:v,folderUid:x,message:A,overwrite:R,showErrorAlert:B})=>({url:"/dashboards/db",method:"POST",showErrorAlert:B,data:{dashboard:v,folderUid:x,message:A??"",overwrite:!!R}}),onQueryStarted:({folderUid:v},{queryFulfilled:x,dispatch:A})=>{c.t.ignoreNextSave(),x.then(async()=>{await d.TP.fetchUserPermissions(),A((0,g.bw)({parentUID:v,pageSize:u.md}))})}}),importDashboard:S.mutation({query:({dashboard:v,overwrite:x,inputs:A,folderUid:R})=>({method:"POST",url:"/dashboards/import",data:{dashboard:v,overwrite:x,inputs:A,folderUid:R}}),onQueryStarted:({folderUid:v},{queryFulfilled:x,dispatch:A})=>{x.then(async R=>{A((0,g.bw)({parentUID:v,pageSize:u.md}));const B=r.I.stripBaseFromUrl(R.data.importedUrl);m.Ny.push(B)})}})})}),{endpoints:a,useDeleteFolderMutation:h,useDeleteItemsMutation:P,useGetAffectedItemsQuery:y,useGetFolderQuery:C,useMoveFolderMutation:f,useMoveItemsMutation:D,useNewFolderMutation:T,useSaveDashboardMutation:M,useSaveFolderMutation:O}=b},92955:(Q,I,e)=>{"use strict";e.d(I,{aw:()=>g,md:()=>d,uT:()=>c});var t=e(32264),n=e(17172),r=e(53477),s=e(24439),o=e(40957),m=e(10096),i=e(31678),l=e(49952);const d=50;async function c(u,E,p=1,b=d){if(u&&!t.$.featureToggles.nestedFolders)return[];const a=(0,n.AI)();let h=[];m.TP.hasPermission(i.AccessControlAction.FoldersRead)&&(h=await a.get("/api/folders",{parentUid:u,page:p,limit:b}));const P=t.$.appSubUrl??"";return h.map(y=>({kind:"folder",uid:y.uid,title:y.title,parentTitle:E,parentUID:u,url:(0,l.I)(y.uid)?void 0:`${P}/dashboards/f/${y.uid}/`}))}async function g(u,E=1,p=d){const a=await(0,s.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:u||"general",from:(E-1)*p,limit:p});return a.view.map(h=>{const P=(0,o.hI)(h,a.view);return P.parentUID===r.TF&&(P.parentUID=void 0),P})}},43907:(Q,I,e)=>{"use strict";e.d(I,{x:()=>l});var t=e(96540),n=e(70255),r=e(94753),s=e(42418),o=e(55314),m=e(44836);function i(d,c,g,u){const E=d+c+g+u,p=[];d&&p.push((0,m.t)("browse-dashboards.counts.folder","{{count}} folder",{count:d})),c&&p.push((0,m.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:c})),g&&p.push((0,m.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:g})),u&&p.push((0,m.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:u}));let b=(0,m.t)("browse-dashboards.counts.total","{{count}} item",{count:E});return p.length>0&&(b+=`: ${p.join(", ")}`),b}const l=({selectedItems:d})=>{const{data:c,isFetching:g,isLoading:u,error:E}=(0,o.G2)(d);return t.createElement(t.Fragment,null,t.createElement(r.E,{element:"p",color:"secondary"},c&&i(c.folder,c.dashboard,c.libraryPanel,c.alertRule),(g||u)&&t.createElement(n.A,{width:200})),E&&t.createElement(s.F,{severity:"error",title:"Unable to retrieve descendant information"}))}},49952:(Q,I,e)=>{"use strict";e.d(I,{I:()=>r,e:()=>n});var t=e(32264);function n(s,o){return s+o.uid}function r(s){return s===t.$.sharedWithMeFolderUID}},36141:(Q,I,e)=>{"use strict";e.d(I,{Ii:()=>i,Zw:()=>o,bw:()=>m});var t=e(53477),n=e(31678),r=e(92955),s=e(93519);const o=(0,n.createAsyncThunk)("browseDashboards/refreshParents",async(l,{getState:d,dispatch:c})=>{const{browseDashboards:g}=d(),{rootItems:u,childrenByParentUID:E}=g,p=new Set;for(const b of l){const a=(0,s.R)(u?.items??[],E,b);p.add(a?.parentUID)}for(const b of p)c(m({parentUID:b,pageSize:r.md}))}),m=(0,n.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:l,pageSize:d})=>{const c=l===t.TF?void 0:l;let g=1,u="folder",E=await(0,r.uT)(c,void 0,g,d),p=E.length<d;if(u==="folder"&&p){u="dashboard",g=1;const b=await(0,r.aw)(c,g,d);p=b.length<d,E=E.concat(b)}return{children:E,lastPageOfKind:p,page:g,kind:u}}),i=(0,n.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:l,excludeKinds:d=[],pageSize:c},g)=>{const u=!d.includes("dashboard"),E=l===t.TF?void 0:l,p=g.getState().browseDashboards,b=E?p.childrenByParentUID[E]:p.rootItems;let a=1,h;if(b?b.lastFetchedKind==="dashboard"&&!b.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${E} but that collection is fully loaded`):b.lastFetchedKind==="folder"&&b.lastKindHasMoreItems?(a=b.lastFetchedPage+1,h="folder"):u&&(a=b.lastFetchedKind==="folder"?1:b.lastFetchedPage+1,h="dashboard"):(a=1,h="folder"),!h)return;let P=h==="folder"?await(0,r.uT)(E,void 0,a,c):await(0,r.aw)(E,a,c),y=P.length<c;if(h==="folder"&&y&&u){h="dashboard",a=1;const C=await(0,r.aw)(E,a,c);y=C.length<c,P=P.concat(C)}return{children:P,lastPageOfKind:y,page:a,kind:h}})},37690:(Q,I,e)=>{"use strict";e.d(I,{Am:()=>c,Ii:()=>n.Ii,bw:()=>n.bw,Zw:()=>n.Zw,ku:()=>d,cT:()=>t.cT,wn:()=>t.wn,t$:()=>t.t$,xK:()=>f,eC:()=>a,Ms:()=>y,V6:()=>C,q0:()=>h,QE:()=>P,Zg:()=>D});var t=e(79763),n=e(36141),r=e(96540),s=e(1081),o=e(31678),m=e(92955),i=e(49952),l=e(93519);const d=M=>M.browseDashboards.rootItems,c=M=>M.browseDashboards.childrenByParentUID,g=M=>M.browseDashboards.openFolders,u=M=>M.browseDashboards.selectedItems,E=(0,s.Mz)(d,c,g,(M,O)=>O,(M,O,S,v)=>T(v,M,O,S)),p=(0,s.Mz)(u,M=>Object.values(M).some(O=>Object.values(O).some(S=>S))),b=(0,s.Mz)(u,c,(M,O)=>{const S={dashboard:{...M.dashboard},folder:{...M.folder}};for(const v of Object.keys(M.folder))if(M.folder[v]){const A=O[v];if(A)for(const R of A.items)R.kind==="dashboard"&&(S.dashboard[R.uid]=!1),R.kind==="folder"&&(S.folder[R.uid]=!1)}return S});function a(M){return(0,o.useSelector)(O=>(M?O.browseDashboards.childrenByParentUID[M]:O.browseDashboards.rootItems)?"fulfilled":"pending")}function h(M){return(0,o.useSelector)(O=>E(O,M))}function P(){return(0,o.useSelector)(M=>p(M))}function y(){return(0,o.useSelector)(u)}function C(){return(0,o.useSelector)(M=>M.browseDashboards.childrenByParentUID)}function f(){return(0,o.useSelector)(M=>b(M))}function D(M=[]){const O=(0,o.useDispatch)(),S=(0,r.useRef)(!1);return(0,r.useCallback)(x=>{if(S.current)return Promise.resolve();S.current=!0;const A=O((0,n.Ii)({parentUID:x,excludeKinds:M,pageSize:m.md}));return A.finally(()=>S.current=!1),A},[O,M])}function T(M,O,S,v,x=0,A=[],R=[]){function B(F,z,Y){if(A.includes(F.kind)||R.includes(F.uid))return[];const H=T(F.uid,O,S,v,Y+1,A,R),k=!!v[F.uid],ee=S[F.uid]?.items.length===0;k&&ee&&!A.includes("empty-folder")&&H.push({isOpen:!1,level:Y+1,item:{kind:"ui",uiKind:"empty-folder",uid:F.uid+"empty-folder"},parentUID:z});const ie={item:F,parentUID:z,level:Y,isOpen:k},fe=[ie,...H];return(0,i.I)(ie.item.uid)&&fe.push({item:{kind:"ui",uiKind:"divider",uid:"shared-with-me-divider"},parentUID:z,level:Y+1,isOpen:!1}),fe}const U=M&&v[M]||x===0,w=M?S[M]:O;let N=((M?U&&w?.items:w?.items)||[]).flatMap(F=>B(F,M,x));const L=A.includes("dashboard")&&w?.lastFetchedKind==="dashboard";return(x===0&&!w||U&&w&&!(w.isFullyLoaded||L))&&(N=N.concat((0,l.T)(m.md,M,x))),N}},79763:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>C,cT:()=>y,wn:()=>h,t$:()=>P});var t={};e.r(t),e.d(t,{fetchNextChildrenPageFulfilled:()=>i,refetchChildrenFulfilled:()=>m,setAllSelection:()=>c,setFolderOpenState:()=>l,setItemSelectionState:()=>d});var n=e(30038),r=e(36141),s=e(49952),o=e(93519);function m(f,D){const{children:T,page:M,kind:O,lastPageOfKind:S}=D.payload,{parentUID:v}=D.meta.arg,x={items:T,lastFetchedKind:O,lastFetchedPage:M,lastKindHasMoreItems:!S,isFullyLoaded:O==="dashboard"&&S};v?f.childrenByParentUID[v]=x:f.rootItems=x}function i(f,D){const T=D.payload;if(!T)return;const{children:M,page:O,kind:S,lastPageOfKind:v}=T,{parentUID:x,excludeKinds:A=[]}=D.meta.arg,U={items:((x?f.childrenByParentUID[x]:f.rootItems)?.items??[]).concat(M),lastFetchedKind:S,lastFetchedPage:O,lastKindHasMoreItems:!v,isFullyLoaded:(A.includes("dashboard")||S==="dashboard")&&v};if(!x){f.rootItems=U;return}if(f.childrenByParentUID[x]=U,f.selectedItems.folder[x])for(const K of M)f.selectedItems[K.kind][K.uid]=!0}function l(f,D){const{folderUID:T,isOpen:M}=D.payload;f.openFolders[T]=M}function d(f,D){const{item:T,isSelected:M}=D.payload;if((0,s.I)(T.uid))return;function O(S,v){if(f.selectedItems[S][v]=M,S!=="folder")return;let x=f.childrenByParentUID[v];for(const A of x?.items??[])O(A.kind,A.uid)}if(O(T.kind,T.uid),!M){let S=T.parentUID;for(;S;){const v=(0,o.R)(f.rootItems?.items??[],f.childrenByParentUID,S);if(!v)break;f.selectedItems[v.kind][v.uid]=!1,S=v.parentUID}}f.selectedItems.$all=f.rootItems?.items?.every(S=>f.selectedItems[S.kind][S.uid])??!1}function c(f,D){const{isSelected:T,folderUID:M}=D.payload;if(!(M&&(0,s.I)(M)))if(f.selectedItems.$all=T,T){let S=function(v){if(v&&(0,s.I)(v))return;const x=v?f.childrenByParentUID[v]:f.rootItems;if(x)for(const A of x.items)(0,s.I)(A.uid)||(f.selectedItems[A.kind][A.uid]=T,A.kind==="folder"&&S(A.uid))};var O=S;S(M)}else for(const S in f.selectedItems){if(!(S==="dashboard"||S==="panel"||S==="folder"))continue;const v=f.selectedItems[S];for(const x in v)v[x]=T}}const{fetchNextChildrenPageFulfilled:g,refetchChildrenFulfilled:u,...E}=t,p={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},b=(0,n.Z0)({name:"browseDashboards",initialState:p,reducers:E,extraReducers:f=>{f.addCase(r.Ii.fulfilled,g),f.addCase(r.bw.fulfilled,u)}}),a=b.reducer,{setFolderOpenState:h,setItemSelectionState:P,setAllSelection:y}=b.actions,C={browseDashboards:a}},93519:(Q,I,e)=>{"use strict";e.d(I,{R:()=>t,T:()=>n});function t(r,s,o){for(const m of r)if(m.uid===o)return m;for(const m in s){const i=s[m];if(i){for(const l of i.items)if(l.uid===o)return l}}}function n(r,s,o){return new Array(r).fill(null).map((m,i)=>({parentUID:s,level:o,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${s}-pagination-${i}`}}))}},6320:(Q,I,e)=>{"use strict";e.d(I,{b:()=>n,q:()=>t});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`,ConnectDataOutdated:`/${t}/connect-data`,YourConnectionsOutdated:`/${t}/your-connections`}},67023:(Q,I,e)=>{"use strict";e.d(I,{k:()=>o});var t=e(60455),n=e.n(t),r=e(91890),s=e(87490);const o=(m,i,l)=>{let d={},c={};if(m.type===r.CC.Regex&&m.expression){const g=new RegExp(m.expression,"gi"),E=(typeof i=="string"?i:(0,s.MA)(i)).matchAll(g);for(const p of E)p.groups?c=p.groups:c[m.mapValue||l]=p[1]||p[0]}else m.type===r.CC.Logfmt&&(c=n().parse(i));return Object.keys(c).forEach(g=>{const u=typeof c[g]=="string"?c[g]:(0,s.MA)(c[g]);d[g]={value:u}}),d}},40511:(Q,I,e)=>{"use strict";e.d(I,{F0:()=>l,bQ:()=>d,lW:()=>c});var t=e(41053),n=e(75505),r=e(19347),s=e(76888),o=e(18380);const m=({sourceUID:g,targetUID:u,...E})=>{const p=(0,r.l)().getInstanceSettings(g),b=(0,r.l)().getInstanceSettings(u);if((E?.orgId===void 0||E?.orgId===null||E?.orgId===0)&&o.kb.logWarning("Invalid correlation config: Missing org id."),p&&p?.uid!==void 0&&b&&b.uid!==void 0)return{...E,source:p,target:b};o.kb.logWarning("Invalid correlation config: Missing source or target.",{source:JSON.stringify(p),target:JSON.stringify(b)})},i=g=>!!g,l=g=>({...g,correlations:g.correlations.map(m).filter(i)});function d(g){return g.data}const c=()=>{const{backend:g}=(0,s.Il)(),[u,E]=(0,t.A)(C=>(0,n.s)(g.fetch({url:"/api/datasources/correlations",params:{page:C.page},method:"GET",showErrorAlert:!1})).then(d).then(l),[g]),[p,b]=(0,t.A)(({sourceUID:C,...f})=>g.post(`/api/datasources/uid/${C}/correlations`,f).then(D=>{const T=m(D.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[g]),[a,h]=(0,t.A)(({sourceUID:C,uid:f})=>g.delete(`/api/datasources/uid/${C}/correlations/${f}`),[g]),[P,y]=(0,t.A)(({sourceUID:C,uid:f,...D})=>g.patch(`/api/datasources/uid/${C}/correlations/${f}`,D).then(T=>{const M=m(T.result);if(M!==void 0)return M;throw new Error("invalid sourceUID")}),[g]);return{create:{execute:b,...p},update:{execute:y,...P},get:{execute:E,...u},remove:{execute:h,...a}}}},18380:(Q,I,e)=>{"use strict";e.d(I,{$q:()=>g,J6:()=>c,cA:()=>l,kb:()=>p,tZ:()=>E});var t=e(75505),n=e(91890),r=e(17172),s=e(19347),o=e(34867),m=e(9651),i=e(40511);const l=(b,a,h)=>(b.forEach(P=>{const y=P.refId;if(!y)return;let C=h[y];if(C===void 0&&P.meta?.preferredVisualisationType==="rawPrometheus"){const D=(0,m.a)(y);C=h[D]}const f=a.filter(D=>D.source.uid===C);d(P,f)}),b),d=(b,a)=>{b.fields.forEach(h=>{h.config.links=h.config.links?.filter(P=>P.origin!==n.x0.Correlations)||[],a.map(P=>{if(P.config?.field===h.name){const y=P.config?.target||{};h.config.links.push({internal:{query:{...y,datasource:{uid:P.target.uid}},datasourceUid:P.target.uid,datasourceName:P.target.name,transformations:P.config?.transformations},url:"",title:P.label||P.target.name,origin:n.x0.Correlations})}})})},c=async b=>(0,t.s)((0,r.AI)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:b}})).then(i.bQ).then(i.F0),g=async(b,a)=>(0,r.AI)().post(`/api/datasources/uid/${b}/correlations`,a),u=async b=>b.datasourceInstance?.meta.mixed?await(0,s.l)().get(b.queries[0].datasource):b.datasourceInstance,E=async(b,a)=>Promise.all([u(b),u(a)]).then(h=>h[0]?.name!==void 0&&h[1]?.name!==void 0?`${h[0]?.name} to ${h[1]?.name}`:""),p=(0,o.DW)("features.correlations")},41524:(Q,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(11261);function n(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",m=s.length,i=new Map;return l=>{const d=i.get(l);if(d!=null)return d;const c=[...l].map(g=>g.toLowerCase()&&g!==g.toUpperCase()?o.charAt(Math.floor(Math.random()*m)):g.toUpperCase()&&g!==g.toUpperCase()?s.charAt(Math.floor(Math.random()*m)):g).join("");return i.set(l,c),c}}function r(s,o){if(!(o.labels||o.names||o.values))return s;const m=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),i=n();return s.map(l=>{let{schema:d,data:c}=l;if(d&&c){if(o.labels){for(const g of d.fields)if(g.labels){const u={};for(const[E,p]of Object.entries(g.labels))u[E]=i(p);g.labels=u}}if(o.names)for(const g of d.fields)g.name?.length&&!m.has(g.name.toLowerCase())&&(g.name=i(g.name));o.values&&d.fields.forEach((g,u)=>{if(g.type===t.PU.string&&c){const E=c.values[u].map(p=>i(String(p)));c.values[u]=E}})}return{schema:d,data:c}})}},72255:(Q,I,e)=>{"use strict";e.d(I,{m6:()=>P,sP:()=>f});var t=e(71733),n=e(17172),r=e(12131),s=e(32264),o=e(2619),m=e(33390),i=e(78160),l=e(17493),d=e(14792),c=e(79999),g=e(16833),u=e(31678),E=e(71176),p=e(6729),b=e(77431);const a=500,h="loadDashboardScene",P="__grafana_home_uid__";class y extends o.Q{constructor(){super(...arguments),this.cache={}}async fetchDashboard({uid:T,route:M,urlFolderUid:O,keepDashboardFromExploreInLocalStorage:S}){const v=m.A.getObject(c.us);if(v)return S||(0,c.yZ)(),v;const x=M===u.DashboardRoutes.Home?P:T,A=this.getFromCache(x);if(A)return A;let R;try{switch(M){case u.DashboardRoutes.New:R=(0,E.X)(O);break;case u.DashboardRoutes.Home:if(R=await(0,n.AI)().get("/api/dashboards/home"),R.redirectUri)return R;R?.meta&&(R.meta.canSave=!1,R.meta.canShare=!1,R.meta.canStar=!1);break;case u.DashboardRoutes.Public:return await l.np.loadDashboard("public","",T);default:R=await l.np.loadDashboard("db","",T),M===u.DashboardRoutes.Embedded&&(R.meta.isEmbedded=!0)}if(R.meta.url&&M===u.DashboardRoutes.Normal){const B=t.I.stripBaseFromUrl(R.meta.url),U=r.Ny.getLocation().pathname;B!==U&&(r.Ny.replace({...r.Ny.getLocation(),pathname:B}),console.log("not correct url correcting",B,U))}R.meta.folderUid&&await(0,b.Q)(R.meta.folderUid),this.dashboardCache={dashboard:R,ts:Date.now(),cacheKey:x}}catch(B){if((0,n.NF)(B)&&B.cancelled)return null;throw console.error(B),B}return R}async loadSnapshot(T){try{const M=await this.loadSnapshotScene(T);this.setState({dashboard:M,isLoading:!1})}catch(M){this.setState({isLoading:!1,loadError:String(M)})}}async loadSnapshotScene(T){const M=await l.np.loadDashboard("snapshot",T,"");if(M?.dashboard)return(0,p.wM)(M);throw new Error("Snapshot not found")}async loadDashboard(T){try{(0,i.j)(h);const M=await this.loadScene(T);if(!M)return;s.$.publicDashboardAccessToken&&M.state.controls?.state.hideTimeControls||M.startUrlSync(),this.setState({dashboard:M,isLoading:!1});const O=(0,i.z)(h);(0,g.D)(M,O?.duration)}catch(M){this.setState({isLoading:!1,loadError:String(M)})}}async loadScene(T){const M=!!(m.A.getObject(c.us)&&T.keepDashboardFromExploreInLocalStorage===!1);this.setState({isLoading:!0});const O=await this.fetchDashboard(T),S=this.cache[T.uid];if(!M&&S&&S.state.version===O?.dashboard.version)return S;if(O?.dashboard){const v=(0,p.wM)(O);return T.uid&&!M&&(this.cache[T.uid]=v),v}if(O?.redirectUri){const v=t.I.stripBaseFromUrl(O.redirectUri);return r.Ny.replace(v),null}throw new Error("Dashboard not found")}getFromCache(T){const M=this.dashboardCache;return M&&M.cacheKey===T&&Date.now()-M?.ts<a?M.dashboard:null}clearState(){(0,d.UA)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(T,M){this.dashboardCache={dashboard:M,ts:Date.now(),cacheKey:T}}clearDashboardCache(){this.dashboardCache=void 0}}let C=null;function f(){return C||(C=new y({})),C}},77431:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>o});var t=e(82467),n=e(27677),r=e(71101),s=e(99140);async function o(m){try{const i=await n.IB.getFolderByUid(m);s.M_.dispatch((0,t.Vz)((0,r.R4)(i)))}catch(i){console.warn("Error fetching parent folder",m,"for dashboard",i)}}},79280:(Q,I,e)=>{"use strict";e.d(I,{p:()=>l});var t=e(96540),n=e(13544),r=e(90613),s=e(67061),o=e(94753),m=e(55852),i=e(44836);function l(d){return t.createElement(r.a,{alignItems:"center",padding:4},t.createElement(s.B,{direction:"column",alignItems:"center",gap:2},t.createElement(o.E,{element:"h3",textAlignment:"center"},t.createElement(i.x6,{key:"transformations.empty.add-transformation-header"},"Start transforming data")),t.createElement(o.E,{element:"p",textAlignment:"center","data-testid":n.Tp.components.Transforms.noTransformationsMessage},t.createElement(i.x6,{key:"transformations.empty.add-transformation-body"},"Transformations allow data to be changed in various ways before your visualization is shown.",t.createElement("br",null),"This includes joining data together, renaming fields, making calculations, formatting data for display, and more.")),t.createElement(m.$n,{icon:"plus",variant:"primary",size:"md",onClick:d.onShowPicker,"data-testid":n.Tp.components.Transforms.addTransformationButton},"Add transformation")))}},57109:(Q,I,e)=>{"use strict";e.d(I,{o:()=>c});var t=e(96540),n=e(86849),r=e(87978),s=e(44836),o=e(16678),m=e(32023),i=e(74730),l=e(41507),d=e(60656);class c extends n.Bs{constructor(){super(...arguments),this.onClose=()=>{(0,i.YQ)(this).closeModal()},this.onAddLibraryPanel=u=>{const E=(0,i.YQ)(this),p=E.state.body;if(!(p instanceof n.hy))throw new Error("Trying to add a library panel in a layout that is not SceneGridLayout");const b=m.b4.getNextPanelId(E),a=new d.F({title:"Panel Title",uid:u.uid,name:u.name,panelKey:(0,i.XA)(b)}),h=new l.U({height:i.sw,width:i.vm,x:0,y:0,body:a,key:`grid-item-${b}`});p.setState({children:[h,...p.state.children]}),this.onClose()}}static{this.Component=({model:u})=>{const E=(0,s.t)("library-panel.add-widget.title","Add panel from panel library");return t.createElement(r._,{title:E,onClose:u.onClose},t.createElement(o.j,{onClick:u.onAddLibraryPanel,variant:o.s.Tight,showPanelFilter:!0}))}}}},91309:(Q,I,e)=>{"use strict";e.d(I,{C:()=>C,S:()=>f});var t=e(65474),n=e(81160),r=e(52622),s=e(43585),o=e(14236),m=e(39070),i=e(17172),l=e(32264),d=e(86849),c=e(82467),g=e(3169),u=e(10096),E=e(94954),p=e(55740),b=e(23662),a=e(99140),h=e(31678),P=e(94822),y=e(74730);class C extends d.VE{constructor(T){super({isEnabled:!0,...T,isHidden:!0}),this.hasAlertRules=!0,this.topic=r.QR.AlertStates,this.handleError=M=>{const O=(0,g.gi)("AlertStatesDataLayer",(0,E.q)(M));(0,a.JD)((0,c.dx)(O))}}onEnable(){const T=d.jh.getTimeRange(this);this._timeRangeSub=T.subscribeToState(()=>{this.runWithTimeRange(T)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const T=d.jh.getTimeRange(this);this.runWithTimeRange(T)}async runWithTimeRange(T){const M=(0,y.YQ)(this),{uid:O,id:S}=M.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(T))return;const v=(0,t.H)((0,i.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:O},`dashboard-query-runner-unified-alert-states-${S}`)).pipe((0,n.T)(x=>{if(x.status==="success"){this.hasAlertRules=!1;const A={};return x.data.groups.forEach(R=>R.rules.forEach(B=>{if((0,b.Z8)(B)&&B.annotations&&B.annotations[p.YH.panelID]){this.hasAlertRules=!0;const U=Number(B.annotations[p.YH.panelID]),w=f(B.state);A[U]?w===s.O.Alerting&&A[U].state!==s.O.Alerting?A[U].state=s.O.Alerting:w===s.O.Pending&&A[U].state!==s.O.Alerting&&A[U].state!==s.O.Pending&&(A[U].state=s.O.Pending):A[U]={state:w,id:Object.keys(A).length,panelId:U,dashboardId:S}}})),Object.values(A)}throw new Error("Unexpected alert rules response.")}));this.querySub=v.subscribe({next:x=>{const A=(0,o.Vc)(x);this.publishResults({state:m.Gu.Done,series:[{...A,meta:{...A.meta,dataTopic:r.QR.AlertStates}}],timeRange:T.state.value})},error:x=>{this.handleError(x),this.publishResults({state:m.Gu.Error,series:[],errors:[{message:(0,E.q)(x)}],timeRange:T.state.value})}})}canWork(T){const M=(0,y.YQ)(this),{uid:O}=M.state;return!(!O||l.$.publicDashboardAccessToken||T.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(u.TP.hasPermission(h.AccessControlAction.AlertingRuleRead)&&u.TP.hasPermission(h.AccessControlAction.AlertingRuleExternalRead)))}}function f(D){return D===P.cF.Firing?s.O.Alerting:D===P.cF.Pending?s.O.Pending:s.O.OK}},38477:(Q,I,e)=>{"use strict";e.d(I,{g:()=>i});var t=e(43127),n=e(33948),r=e(52622),s=e(32264),o=e(86849),m=e(90569);class i extends o.tV.g{async resolveDataSource(d){return s.$.publicDashboardAccessToken?new m.X:super.resolveDataSource(d)}processEvents(d,c){if(s.$.publicDashboardAccessToken){const g={series:[],timeRange:(0,t.E2)(),state:c.state},u=(0,n.I)(c.events);return u.meta={...u.meta,dataTopic:r.QR.Annotations},g.annotations=[u],g}else return super.processEvents(d,c)}}},33278:(Q,I,e)=>{"use strict";e.d(I,{x:()=>P});var t=e(32196),n=e(96540),r=e(86849),s=e(40845),o=e(67061),m=e(90613),i=e(13544),l=e(32264),d=e(15292);function c({panelEditor:f}){const D=f.state.vizManager,{panel:T,tableView:M}=D.useState(),O=l.$.panels[T.state.pluginId].skipDataQuery;return n.createElement(n.Fragment,null,!O&&n.createElement(d.K,{label:"Table view",showLabel:!0,id:"table-view",value:!!M,onClick:()=>D.toggleTableView(),"aria-label":"toggle-table-view","data-testid":i.Tp.components.PanelEditor.toggleTableView}))}var g=e(74730),u=e(80997),E=e(56034),p=e(52424),b=e(6923),a=e(4588);function h({links:f,uid:D}){return!f||!D?null:n.createElement(n.Fragment,null,f.map((T,M)=>{const O=(0,b.mQ)().getAnchorInfo(T),S=`${T.title}-$${M}`;if(T.type==="dashboards")return n.createElement(p.aK,{key:S,link:T,linkInfo:O,dashboardUID:D});const v=a.G[T.icon],x=n.createElement(p.Zx,{icon:v,href:(0,u.Jf)(O.href),target:T.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":i.Tp.components.DashboardLinks.link},O.title);return n.createElement("div",{key:S,"data-testid":i.Tp.components.DashboardLinks.container},T.tooltip?n.createElement(E.m,{content:O.tooltip},x):x)}))}class P extends r.Bs{constructor(D){super({variableControls:[],timePicker:D.timePicker??new r.KE({}),refreshPicker:D.refreshPicker??new r.WM({}),...D}),this._variableDependency=new r.Sh(this,{onAnyVariableChanged:this._onAnyVariableChanged.bind(this)})}static{this.Component=y}_onAnyVariableChanged(){(0,g.YQ)(this).state.links?.length>0&&this.forceRender()}}function y({model:f}){const{variableControls:D,refreshPicker:T,timePicker:M,hideTimeControls:O}=f.useState(),S=(0,g.YQ)(f),{links:v,meta:x,editPanel:A}=S.useState(),R=(0,s.of)(C),B=location.search.includes("scene-debugger");return n.createElement("div",{className:(0,t.cx)(R.controls,x.isEmbedded&&R.embedded)},n.createElement(o.B,{grow:1,wrap:"wrap"},D.map(U=>n.createElement(U.Component,{model:U,key:U.state.key})),n.createElement(m.a,{grow:1}),!A&&n.createElement(h,{links:v,uid:S.state.uid}),A&&n.createElement(c,{panelEditor:A})),!O&&n.createElement(o.B,{justifyContent:"flex-end"},n.createElement(M.Component,{model:M}),n.createElement(T.Component,{model:T})),B&&n.createElement(r.or,{scene:f,key:"scene-debugger"}))}function C(f){return{controls:(0,t.css)({display:"flex",alignItems:"flex-start",flex:"100%",gap:f.spacing(1),flexDirection:"row",flexWrap:"nowrap",position:"sticky",top:0,background:f.colors.background.canvas,zIndex:f.zIndex.activePanel,width:"100%",marginLeft:"auto",[f.breakpoints.down("sm")]:{flexDirection:"column-reverse",alignItems:"stretch"}}),embedded:(0,t.css)({background:"unset",position:"unset"})}}},16279:(Q,I,e)=>{"use strict";e.d(I,{s:()=>r});var t=e(96540),n=e(86849);class r extends n.ps{constructor(o){super({...o,name:o.name??"Data layers",annotationLayers:o.annotationLayers??[]}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){return this._subs.add(this.subscribeToState((o,m)=>{o.annotationLayers!==m.annotationLayers&&(this.querySub?.unsubscribe(),this.subscribeToAllLayers(this.getAllLayers()))})),this.subscribeToAllLayers(this.getAllLayers()),()=>{this.querySub?.unsubscribe()}}addAnnotationLayer(o){this.setState({annotationLayers:[...this.state.annotationLayers,o]})}getAllLayers(){const o=[...this.state.annotationLayers];return this.state.alertStatesLayer&&o.push(this.state.alertStatesLayer),o}static{this.Component=({model:o})=>{const{annotationLayers:m}=o.useState();return t.createElement(t.Fragment,null,m.map(i=>t.createElement(i.Component,{model:i,key:i.state.key})))}}}},39820:(Q,I,e)=>{"use strict";e.d(I,{L:()=>o});var t=e(86849),n=e(14348),r=e(74730),s=e(60656);class o extends t.Bs{constructor(i){super(i),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const i=this.parent;let l,d;if(!(i instanceof t.dt))throw new Error("DashboardDatasourceBehaviour must be attached to a SceneQueryRunner");if(i.state.datasource?.uid!==n.K)return;try{l=(0,r.YQ)(i)}catch{return}const c=i.state.queries.find(a=>a.panelId!==void 0);if(!c)return;const g=c.panelId,u=(0,r.XA)(g),E=(0,r.vL)(l,u);if(!(E instanceof t.Eb))return;const p=(0,r.un)(E);let b;if(p)this.prevRequestId&&this.prevRequestId!==p.state.data?.request?.requestId&&i.runQueries();else if(E.parent instanceof s.F)E.parent.isActive||(b=E.parent.activate()),d=E.parent.subscribeToState((a,h)=>{this.handleLibPanelStateUpdates(a,h,i)});else throw new Error("Could not find SceneQueryRunner for panel");return()=>{this.prevRequestId=p?.state.data?.request?.requestId,d&&d.unsubscribe(),b&&b()}}handleLibPanelStateUpdates(i,l,d){if(i.panel&&i.panel!==l.panel){if(!((0,r.un)(i.panel)instanceof t.dt))throw new Error("Could not find SceneQueryRunner for panel");d.runQueries()}}}},41507:(Q,I,e)=>{"use strict";e.d(I,{U:()=>g});var t=e(32196),n=e(96540),r=e(32264),s=e(86849),o=e(15054),m=e(74730),i=e(57109),l=e(60656),d=e(7196),c=e(30195);class g extends s.Bs{constructor(b){super(b),this._variableDependency=new s.Sh(this,{variableNames:this.state.variableName?[this.state.variableName]:[],onVariableUpdateCompleted:this._onVariableUpdateCompleted.bind(this)}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.state.variableName&&(this._subs.add(this.subscribeToState((b,a)=>this._handleGridResize(b,a))),this._performRepeat())}_onVariableUpdateCompleted(){this.state.variableName&&this._performRepeat()}_handleGridResize(b,a){const h=this.state.repeatedPanels?.length??1,P={};if(b.height!==a.height){if(this.getRepeatDirection()==="v"){const y=Math.ceil(b.height/h);P.itemHeight=y}else{const y=Math.ceil(h/this.getMaxPerRow());P.itemHeight=Math.ceil(b.height/y)}P.itemHeight!==this.state.itemHeight&&this.setState(P)}}_performRepeat(){if(this.state.body instanceof i.o||!this.state.variableName||this._variableDependency.hasDependencyInLoadingState())return;const b=s.jh.lookupVariable(this.state.variableName,this)??new s.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(b instanceof s.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}let a=this.state.body instanceof l.F?this.state.body.state.panel:this.state.body;const{values:h,texts:P}=(0,m.a7)(b),y=[];for(let O=0;O<h.length;O++){const S={$variables:new s.Pj({variables:[new s.xc({name:b.state.name,value:h[O],text:String(P[O])})]}),key:`${a.state.key}-clone-${O}`};O>0&&(S.menu=new s.Lw({$behaviors:[d.t0]}));const v=a.clone(S);y.push(v)}const C=this.getRepeatDirection(),f={repeatedPanels:y},D=this.state.itemHeight??10,T=this.state.height,M=this.getMaxPerRow();if(C==="h"){const O=Math.ceil(y.length/M);f.height=O*D}else f.height=y.length*D;if(this.setState(f),T!==this.state.height){const O=s.jh.getLayout(this);O instanceof s.hy&&O.forceRender()}this.publishEvent(new c.d({source:this}),!0)}getMaxPerRow(){return this.state.maxPerRow??4}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}getClassName(){return this.state.variableName?"panel-repeater-grid-item":""}isRepeated(){return this.state.variableName!==void 0}static{this.Component=({model:b})=>{const{repeatedPanels:a,itemHeight:h,variableName:P,body:y}=b.useState(),C=a?.length??0,f=u(b.getRepeatDirection(),C,b.getMaxPerRow(),h??10);if(!P){if(y instanceof s.Eb)return n.createElement(y.Component,{model:y,key:y.state.key});if(y instanceof l.F)return n.createElement(y.Component,{model:y,key:y.state.key});if(y instanceof i.o)return n.createElement(y.Component,{model:y,key:y.state.key})}return a?n.createElement("div",{className:f},a.map(D=>n.createElement("div",{className:E,key:D.state.key},n.createElement(D.Component,{model:D,key:D.state.key})))):null}}}function u(p,b,a,h){return(0,n.useMemo)(()=>{const P=r.$.theme2,y=h*o.sD*b+(b-1)*o.dU;if(p==="h"){const C=Math.ceil(b/a),f=Math.min(b,a);return(0,t.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${f}, 1fr)`,gridTemplateRows:`repeat(${C}, 1fr)`,gridColumnGap:P.spacing(1),gridRowGap:P.spacing(1),[P.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:y}})}return(0,t.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:P.spacing(1),[P.breakpoints.down("md")]:{height:y}})},[p,b,a,h])}const E=(0,t.css)({display:"flex",flexGrow:1,position:"relative"})},45199:(Q,I,e)=>{"use strict";e.d(I,{H$:()=>Nl,vk:()=>mc});var t=e(71733),n=e(26272),r=e(41987),s=e(32264),o=e(12131),m=e(86849),i=e(28138),l=e(15054),d=e(17422),c=e(33390),g=e(14792),u=e(34214),E=e(6473),p=e(11230),b=e(80484),a=e(28444),h=e(67278);const P=()=>new h.c(new URL(e.p+e.u(9666),e.b));var y=e(32196),C=e(2543),f=e(96540),D=e(581),T=e(19347),M=e(40845),O=e(84423),S=e(36974),v=e(47311),x=e(57767),A=e(93117),R=e(56596);function B(Se,me){try{let Le=Se;for(const ke of me)Le=Le[ke];return Le}catch{return}}function U(Se,me){return typeof Se==typeof me&&(typeof Se=="string"&&Se===me||Array.isArray(Se)&&Se.length===me.length&&Se.every((Le,ke)=>Le===me[ke]))}function w(Se,me){return Se===me||Se&&me&&Se.selected===me.selected&&U(Se.text,me.text)&&U(Se.value,me.value)}function K(Se,me,Le,ke,ut){const ht=Se,It=me,Ht=N(It,ht),an=L(It,ht,ke),Xt=It.refresh!==ht.refresh;Le||(It.time=ht.time),ut||(It.refresh=ht.refresh);const On=(0,R.G4)(ht,It),ia=Object.values(On).reduce((qn,Rn)=>qn+Rn.length,0);return{changedSaveModel:It,initialSaveModel:ht,diffs:On,diffCount:ia,hasChanges:ia>0,hasTimeChanges:Ht,isNew:It.version===0,hasVariableValueChanges:an,hasRefreshChange:Xt}}function N(Se,me){return Se.time?.from!==me.time?.from||Se.time?.to!==me.time?.to}function L(Se,me,Le){const ke=me.templating?.list??[],ut=Se.templating?.list??[];let ht=!1;for(const It of ut){const Ht=ke.find(({name:an,type:Xt})=>an===It.name&&Xt===It.type);if(Ht&&(Ht.current&&delete Ht.current.selected,w(It.current,Ht.current)||(ht=!0),!Le)){const an=It;an.type==="adhoc"?an.filters=Ht.filters:an.type!=="groupby"&&(It.current=Ht.current,It.options=Ht.options)}}return ht}function V(Se,me){const Le=(0,R.G4)(me,Se),ke=Object.values(Le).reduce((ut,ht)=>ut+ht.length,0);return{changedSaveModel:Se,initialSaveModel:me,diffs:Le,diffCount:ke,hasChanges:ke>0}}var F=e(41507),z=e(60656),Y=e(7928),H=e(20455),k=e(74730),ee=(Se=>(Se[Se.Fill=0]="Fill",Se[Se.Fit=1]="Fit",Se[Se.Exact=2]="Exact",Se))(ee||{});class ie extends m.Bs{constructor(me){super(me),this._cachedPluginOptions={},this._detectPanelModelChanges=(0,C.debounce)(()=>{const{hasChanges:Le}=V((0,H.Z6)(this.state.sourcePanel.resolve()),(0,H.Z6)(this.state.panel));this.setState({isDirty:Le})},250),this._handleStateChange=Le=>{yt.isUpdatingPersistedState(Le)&&this._detectPanelModelChanges()},this.addActivationHandler(()=>this._onActivate())}static createFor(me){let Le={};const ke=me.parent instanceof z.F?me.parent.parent:me.parent;if(!(ke instanceof F.U))throw console.error("VizPanel is not a child of a dashboard grid item"),new Error("VizPanel is not a child of a dashboard grid item");const{variableName:ut,repeatDirection:ht,maxPerRow:It}=ke.state;return Le={repeat:ut,repeatDirection:ht,maxPerRow:It},new ie({panel:me.clone(),sourcePanel:me.getRef(),...Le})}_onActivate(){this.loadDataSource();const me=this.subscribeToEvent(m.bZ,this._handleStateChange);return()=>{me.unsubscribe()}}async loadDataSource(){if(!this.state.panel.state.$data)return;let Le=this.queryRunner.state.datasource;try{let ke,ut;if(Le)ke=await(0,T.l)().get(Le),ut=(0,T.l)().getInstanceSettings(Le);else{const It=(0,k.YQ)(this).state.uid??"",Ht=(0,S.CW)(It);Ht?.datasourceUid!==null&&(ut=(0,T.l)().getInstanceSettings({uid:Ht?.datasourceUid}),ut&&(ke=await(0,T.l)().get({uid:Ht?.datasourceUid,type:ut.type}),this.queryRunner.setState({datasource:{uid:Ht?.datasourceUid,type:ut.type}})))}ke&&ut&&(this.setState({datasource:ke,dsSettings:ut}),(0,v.tw)({type:ut.type,uid:ut.uid}))}catch(ke){const ut=await(0,T.l)().get(s.$.defaultDatasource),ht=(0,T.l)().getInstanceSettings(s.$.defaultDatasource);ut&&ht&&(this.setState({datasource:ut,dsSettings:ht}),this.queryRunner.setState({datasource:{uid:ht.uid,type:ht.type}})),console.error(ke)}}changePluginType(me){const{options:Le,fieldConfig:ke,pluginId:ut,...ht}=m.Go.cloneSceneObjectState(this.state.panel.state);let It={defaults:{...ke.defaults,custom:{}},overrides:(0,D.aW)(ke.overrides,D.nx)};this._cachedPluginOptions[ut]={options:Le,fieldConfig:ke};const Ht=this._cachedPluginOptions[me]?.options,an=this._cachedPluginOptions[me]?.fieldConfig;an&&(It=(0,D.H9)(It,an));const Xt=new m.Eb({options:Ht??{},fieldConfig:It,pluginId:me,...ht});if(!this.state.panel.state.$data&&!s.$.panels[me].skipDataQuery){let Rn=(0,S.CW)((0,k.YQ)(this).state.uid)?.datasourceUid;Rn||(Rn=s.$.defaultDatasource),Xt.setState({$data:new m.Es({$data:new m.dt({datasource:{uid:Rn},queries:[{refId:"A"}]}),transformations:[]})})}const On=Xt.getPlugin(),ia={title:Xt.state.title,options:Xt.state.options,fieldConfig:Xt.state.fieldConfig,id:1,type:me},qn=On?.onPanelTypeChanged?.(ia,ut,Le,ke);qn&&Xt.onOptionsChange(qn,!0),On?.onPanelMigration&&Xt.setState({pluginVersion:(0,O.Ar)(On)}),this.setState({panel:Xt}),this.loadDataSource()}async changePanelDataSource(me,Le){const{dsSettings:ke}=this.state,ut=this.queryRunner,ht=ke?await(0,T.l)().get({uid:ke.uid}):void 0,It=await(0,T.l)().get({uid:me.uid}),Ht=ut.state.queries,an=Le||await(0,A.y)(It,me.uid,Ht,ht);ut.setState({datasource:{type:me.type,uid:me.uid},queries:an}),Le&&ut.runQueries(),this.loadDataSource()}changeQueryOptions(me){const Le=this.state.panel,ke=this.queryRunner,ut=Le.state.$timeRange,ht={},It={};me.maxDataPoints!==ke.state.maxDataPoints&&(ht.maxDataPoints=me.maxDataPoints??void 0),me.minInterval!==ke.state.minInterval&&me.minInterval!==null&&(ht.minInterval=me.minInterval),me.timeRange&&(It.timeFrom=me.timeRange.from??void 0,It.timeShift=me.timeRange.shift??void 0,It.hideTimeOverride=me.timeRange.hide),ut instanceof Y.v?It.timeFrom!==void 0||It.timeShift!==void 0?ut.setState(It):Le.setState({$timeRange:void 0}):Le.setState({$timeRange:new Y.v(It)}),me.cacheTimeout!==ke?.state.cacheTimeout&&(ht.cacheTimeout=me.cacheTimeout),me.queryCachingTTL!==ke?.state.queryCachingTTL&&(ht.queryCachingTTL=me.queryCachingTTL),ke.setState(ht),ke.runQueries()}changeQueries(me){this.queryRunner.setState({queries:me})}changeTransformations(me){const Le=this.dataTransformer;Le.setState({transformations:me}),Le.reprocessTransformations()}inspectPanel(){const me=this.state.panel,Le=(0,k.Cs)(me);o.Ny.partial({inspect:Le,inspectTab:"query"})}get queryRunner(){const me=(0,k.un)(this.state.panel);if(!me)throw new Error("Query runner not found");return me}get dataTransformer(){const me=this.state.panel.state.$data;if(!me||!(me instanceof m.Es))throw new Error("Could not find SceneDataTransformer for panel");return me}toggleTableView(){if(this.state.tableView){this.setState({tableView:void 0});return}this.setState({tableView:m.d0.table().setTitle("").setOption("showTypeIcons",!0).setOption("showHeader",!0).setData(this.dataTransformer).build()})}unlinkLibraryPanel(){const me=this.state.sourcePanel.resolve();if(!(me.parent instanceof z.F))throw new Error("VizPanel is not a child of a library panel");const Le=me.parent.parent;if(!(Le instanceof F.U))throw new Error("Library panel not a child of a grid item");const ke=this.state.panel.clone({$data:this.state.$data?.clone()});Le.setState({body:ke}),this.setState({sourcePanel:ke.getRef()})}commitChanges(){const me=this.state.sourcePanel.resolve();this.commitChangesTo(me)}commitChangesTo(me){const Le={variableName:this.state.repeat,repeatDirection:this.state.repeatDirection,maxPerRow:this.state.maxPerRow};if(me.parent instanceof F.U&&me.parent.setState({...Le,body:this.state.panel.clone()}),me.parent instanceof z.F&&me.parent.parent instanceof F.U){const ke=me.parent.clone({panel:this.state.panel.clone()});me.parent.parent.setState({body:ke,...Le}),(0,x.GX)(ke).then(ut=>{me.parent instanceof z.F&&ke.setPanelFromLibPanel(ut)})}}getPanelSaveModel(){const me=this.state.sourcePanel.resolve(),ke=me.parent instanceof z.F?me.parent.parent:me.parent;if(!(ke instanceof F.U))return{error:"Unsupported panel parent"};const ut=ke.clone({body:this.state.panel.clone()});return(0,H.ZB)(ut)}setPanelTitle(me){this.state.panel.setState({title:me,hoverHeader:me===""})}static{this.Component=({model:me})=>{const{panel:Le,tableView:ke}=me.useState(),ut=(0,M.of)(fe),ht=ke??Le,It=ht.state.$data;return(0,f.useEffect)(()=>It?.activate(),[It]),f.createElement(f.Fragment,null,f.createElement("div",{className:ut.wrapper},f.createElement(ht.Component,{model:ht})))}}}function fe(Se){return{wrapper:(0,y.css)({height:"100%",width:"100%",paddingLeft:Se.spacing(2)})}}var q=e(38477),Z=e(33278),J=e(42397),G=e(79422),ne=e(16817),te=e(27803);function oe(Se){const{variable:me}=Se,{datasource:Le,defaultKeys:ke}=me.useState(),{value:ut}=(0,ne.A)(async()=>await(0,T.l)().get(Le),[Le]),ht=ut?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.",It=an=>{const Xt={uid:an.uid,type:an.type};me.setState({datasource:Xt})},Ht=an=>{me.setState({defaultKeys:an})};return f.createElement(te.Q,{datasource:Le??void 0,infoText:ht,onDataSourceChange:It,defaultKeys:ke,onDefaultKeysChange:Ht})}var le=e(95802);function ue({variable:Se}){const{value:me}=Se.useState(),Le=ke=>{Se.setState({value:ke.currentTarget.value})};return f.createElement(le.d,{constantValue:String(me),onChange:Le})}var Te=e(58711);function he({variable:Se,onRunQuery:me}){const{query:Le,isMulti:ke,allValue:ut,includeAll:ht}=Se.useState(),It=On=>{Se.setState({isMulti:On.currentTarget.checked})},Ht=On=>{Se.setState({includeAll:On.currentTarget.checked})},an=On=>{Se.setState({query:On.currentTarget.value}),me()},Xt=On=>{Se.setState({allValue:On.currentTarget.value})};return f.createElement(Te.w,{query:Le??"",multi:!!ke,allValue:ut??"",includeAll:!!ht,onMultiChange:It,onIncludeAllChange:Ht,onQueryChange:an,onAllValueChange:Xt})}var re=e(98917);function De({variable:Se,onRunQuery:me}){const{pluginId:Le,regex:ke,isMulti:ut,allValue:ht,includeAll:It}=Se.useState(),Ht=at(),an=Rn=>{Se.setState({pluginId:Rn.value}),me()},Xt=Rn=>{Se.setState({regex:Rn.currentTarget.value}),me()},On=Rn=>{Se.setState({isMulti:Rn.currentTarget.checked})},ia=Rn=>{Se.setState({includeAll:Rn.currentTarget.checked})},qn=Rn=>{Se.setState({allValue:Rn.currentTarget.value})};return f.createElement(re.y,{query:Le,regex:ke,multi:ut||!1,allValue:ht,includeAll:It||!1,optionTypes:Ht,onChange:an,onRegExBlur:Xt,onMultiChange:On,onIncludeAllChange:ia,onAllValueChange:qn})}var Fe=e(72436),Ee=e(13544),Me=e(88575),ze=e(42418),xe=e(15292),We=e(32372),be=e(51612),pe=e(58975);function Ue({datasource:Se,defaultOptions:me,infoText:Le,onDataSourceChange:ke,onDefaultOptionsChange:ut}){const ht=(0,f.useCallback)(It=>{const Ht=(0,Fe.Jh)(`key,value
`+It)[0],an=[];for(let Xt=0;Xt<Ht.length;Xt++)an.push({text:Ht.fields[0].values[Xt],value:Ht.fields[1].values[Xt]});ut(an)},[ut]);return f.createElement(f.Fragment,null,f.createElement(pe.Y,null,"Group by options"),f.createElement(Me.D,{label:"Data source",htmlFor:"data-source-picker"},f.createElement(be.s,{current:Se,onChange:ke,width:30,variables:!0,noDefault:!0})),Le?f.createElement(ze.F,{title:Le,severity:"info","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.infoText}):null,f.createElement(Me.D,{label:"Use static Group By dimensions",description:"Provide dimensions as CSV: dimensionName, dimensionId"},f.createElement(xe.d,{"data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.modeToggle,value:me!==void 0,onChange:It=>{ut(me===void 0?[]:void 0)}})),me!==void 0&&f.createElement(We.B,{height:300,language:"csv",value:me.map(It=>`${It.text},${It.value}`).join(`
`),onBlur:ht,onSave:ht,showMiniMap:!1,showLineNumbers:!0}))}function we(Se){const{variable:me,onRunQuery:Le}=Se,{datasource:ke,defaultOptions:ut}=me.useState(),{value:ht}=(0,ne.A)(async()=>await(0,T.l)().get(ke),[me.state]),It=ht?.getTagKeys?"Group by dimensions are applied automatically to all queries that target this data source":"This data source does not support group by variable yet.",Ht=async Xt=>{const On={uid:Xt.uid,type:Xt.type};me.setState({datasource:On}),Le()},an=async Xt=>{me.setState({defaultOptions:Xt}),Le()};return f.createElement(Ue,{defaultOptions:ut,datasource:ke??void 0,infoText:ke?It:void 0,onDataSourceChange:Ht,onDefaultOptionsChange:an})}var je=e(49317);function He({variable:Se,onRunQuery:me}){const{intervals:Le,autoStepCount:ke,autoEnabled:ut,autoMinInterval:ht,value:It}=Se.useState(),Ht=(0,k.bx)(Le),an=qn=>{const Rn=(0,k.Sm)(qn.currentTarget.value),ua=Rn.includes(It)?It:Rn[0];Se.setState({intervals:Rn,value:ua}),me()},Xt=qn=>{Se.setState({autoStepCount:qn.value})},On=qn=>{Se.setState({autoEnabled:qn.target.checked})},ia=qn=>{Se.setState({autoMinInterval:qn.currentTarget.value})};return f.createElement(je.s,{intervals:Ht,autoStepCount:ke,autoEnabled:ut,onAutoCountChanged:Xt,onIntervalsChange:an,onAutoEnabledChange:On,onAutoMinIntervalChanged:ia,autoMinInterval:ht})}var rt=e(44890);function Je({variable:Se,onRunQuery:me}){const{datasource:Le,regex:ke,sort:ut,refresh:ht,isMulti:It,includeAll:Ht,allValue:an,query:Xt}=Se.useState(),{value:On}=m.jh.getTimeRange(Se).useState(),ia=Oa=>{Se.setState({regex:Oa.currentTarget.value})},qn=Oa=>{Se.setState({sort:Oa.value})},Rn=Oa=>{Se.setState({refresh:Oa})},ua=Oa=>{Se.setState({isMulti:Oa.currentTarget.checked})},is=Oa=>{Se.setState({includeAll:Oa.currentTarget.checked})},Ea=Oa=>{Se.setState({allValue:Oa.currentTarget.value})},$a=Oa=>{const ts={uid:Oa.uid,type:Oa.type};if(Se.state.datasource&&Se.state.datasource.type!==ts.type){Se.setState({datasource:ts,query:"",definition:""});return}Se.setState({datasource:ts})},Gn=Oa=>{let ts;typeof Oa=="string"?ts=Oa:Oa.hasOwnProperty("query")&&typeof Oa.query=="string"?ts=Oa.query:ts="",Se.setState({query:Oa,definition:ts}),me()};return f.createElement(rt.u,{datasource:Le??void 0,onDataSourceChange:$a,query:Xt,onQueryChange:Gn,onLegacyQueryChange:Gn,timeRange:On,regex:ke,onRegExChange:ia,sort:ut,onSortChange:qn,refresh:ht,onRefreshChange:Rn,isMulti:!!It,onMultiChange:ua,includeAll:!!Ht,onIncludeAllChange:is,allValue:an??"",onAllValueChange:Ea})}var Ve=e(14329);function Oe({defaultValue:Se,value:me,onChange:Le,onBlur:ke}){return f.createElement(f.Fragment,null,f.createElement(pe.Y,null,"Text options"),f.createElement(Ve._,{value:me,defaultValue:Se,name:"Default value",placeholder:"default value, if any",onChange:Le,onBlur:ke,width:30,testId:Ee.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Ne({variable:Se}){const{value:me}=Se.useState(),Le=ke=>{Se.setState({value:ke.currentTarget.value})};return f.createElement(Oe,{defaultValue:me,onBlur:Le})}function ye(Se){return Se!=="system"}const se={custom:{name:"Custom",description:"Define variable values manually",editor:he},query:{name:"Query",description:"Variable values are fetched from a datasource query",editor:Je},constant:{name:"Constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share",editor:ue},interval:{name:"Interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",editor:He},datasource:{name:"Data source",description:"Enables you to dynamically switch the data source for multiple panels",editor:De},adhoc:{name:"Ad hoc filters",description:"Add key/value filters on the fly",editor:oe},groupby:{name:"Group by",description:"Add keys to group by on the fly",editor:we},textbox:{name:"Textbox",description:"Define a textbox variable, where users can enter any arbitrary string",editor:Ne}},ae=["query","custom","textbox","constant","datasource","interval","adhoc","groupby"];function ge(){const Se=ae.map(me=>({label:se[me].name,value:me,description:se[me].description}));return s.$.featureToggles.groupByVariable?Se:Se.filter(me=>me.value!=="groupby")}function Pe(Se){return se[Se].editor}function Re(Se,me){switch(Se){case"custom":return new m.yP(me);case"query":return new m.fS(me);case"constant":return new m.x0({...me,hide:G.zL.hideVariable});case"interval":return new m.Yj(me);case"datasource":return new m.mI(me);case"adhoc":return new m.H9(me);case"groupby":return new m.ZG(me);case"textbox":return new m.TS(me)}}function Be(Se){const Le=_e("query",Se);return new m.fS({name:Le})}function _e(Se,me){let Le=0,ke=`${Se}${Le}`;for(;me.find(ut=>ut.state.name===ke);)ke=`${Se}${++Le}`;return ke}function Xe(Se){return"options"in Se.state||"intervals"in Se.state}function tt(Se){let me="";return Se instanceof m.fS?me=Se.state.definition||(typeof Se.state.query=="string"?Se.state.query:""):Se instanceof m.mI?me=String(Se.state.pluginId):Se instanceof m.yP?me=Se.state.query:Se instanceof m.Yj?me=(0,k.bx)(Se.state.intervals):(Se instanceof m.TS||Se instanceof m.x0)&&(me=String(Se.state.value)),me}function at(){const Se=(0,T.l)().getList({metrics:!0,variables:!0}),me=(0,C.chain)(Se).uniqBy("meta.id").map(Le=>({label:Le.meta.name,value:Le.meta.id})).value();return me.unshift({label:"",value:""}),me}function st(Se){return"type"in Se.state&&"getValue"in Se}function dt(Se){return st(Se)?m.Go.isAdHocVariable(Se)||m.Go.isConstantVariable(Se)||m.Go.isCustomVariable(Se)||m.Go.isDataSourceVariable(Se)||m.Go.isIntervalVariable(Se)||m.Go.isQueryVariable(Se)||m.Go.isTextBoxVariable(Se)||m.Go.isGroupByVariable(Se):!1}const ot=/^(?!__).*$/,ft=/^\w+$/;class yt{constructor(me){this._dashboard=me}static isUpdatingPersistedState({payload:me}){return Object.keys(me.partialUpdate).length===0?!1:!!(me.changedObject instanceof m.Eb||me.changedObject instanceof F.U||me.changedObject instanceof Y.v||me.changedObject instanceof ie&&(Object.prototype.hasOwnProperty.call(me.partialUpdate,"repeat")||Object.prototype.hasOwnProperty.call(me.partialUpdate,"repeatDirection")||Object.prototype.hasOwnProperty.call(me.partialUpdate,"maxPerRow"))||me.changedObject instanceof m.dt&&!Object.prototype.hasOwnProperty.call(me.partialUpdate,"data")||me.changedObject instanceof m.Es&&!Object.prototype.hasOwnProperty.call(me.partialUpdate,"data")||me.changedObject instanceof J.$||me.changedObject instanceof z.F&&Object.prototype.hasOwnProperty.call(me.partialUpdate,"name")||me.changedObject instanceof m.WM&&(Object.prototype.hasOwnProperty.call(me.partialUpdate,"intervals")||Object.prototype.hasOwnProperty.call(me.partialUpdate,"refresh"))||me.changedObject instanceof m.Gg.K2||me.changedObject instanceof m.kh||me.changedObject instanceof F.U||me.changedObject instanceof m.hy||me.changedObject instanceof Nl&&Object.keys(me.partialUpdate).some(Le=>mc.includes(Le))||me.changedObject instanceof m.JZ||me.changedObject instanceof Z.x&&Object.prototype.hasOwnProperty.call(me.partialUpdate,"hideTimeControls")||me.changedObject instanceof m.Pj||me.changedObject instanceof q.g&&!Object.prototype.hasOwnProperty.call(me.partialUpdate,"data")||me.changedObject instanceof m.Gg.en||dt(me.changedObject))}onStateChanged(me){yt.isUpdatingPersistedState(me)&&this.detectSaveModelChanges()}detectSaveModelChanges(){this._changesWorker?.postMessage({changed:(0,H.Uy)(this._dashboard),initial:this._dashboard.getInitialSaveModel()})}hasMetadataChanges(){return this._dashboard.state.meta.folderUid!==this._dashboard.getInitialState()?.meta.folderUid}updateIsDirty(me){const{hasChanges:Le}=me;Le||this.hasMetadataChanges()?this._dashboard.state.isDirty||this._dashboard.setState({isDirty:!0}):this._dashboard.state.isDirty&&this._dashboard.setState({isDirty:!1})}init(){this._changesWorker=P()}startTrackingChanges(){this._changesWorker||this.init(),this._changesWorker.onmessage=me=>{this.updateIsDirty(me.data)},this._changeTrackerSub=this._dashboard.subscribeToEvent(m.bZ,this.onStateChanged.bind(this))}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}terminate(){this.stopTrackingChanges(),this._changesWorker?.terminate()}}var Tt=e(63021),Kt=e(40675),Gt=e(87978),_t=e(54943),it=e(76459),Mt=e.n(it),Dn=e(49785),lt=e(55852),Ct=e(67061),Vt=e(10354),qt=e(21744),rn=e(90613),en=e(60029),Jt=e(36607),hn=e(71500),Fn=e(17172);function Kn(Se){return(0,Fn.NF)(Se)&&Se.data&&Se.data.status==="version-mismatch"}function na(Se){return(0,Fn.NF)(Se)&&Se.data&&Se.data.status==="name-exists"}function Ut(Se){return(0,Fn.NF)(Se)&&Se.data&&Se.data.status==="plugin-dashboard"}function on({cancelButton:Se,saveButton:me}){return f.createElement(ze.F,{title:"Name already exists",severity:"error"},f.createElement("p",null,"A dashboard with the same name in selected folder already exists. Would you still like to save this dashboard?"),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{alignItems:"center"},Se,me(!0))))}function mn({overwrite:Se,isLoading:me,isValid:Le,onSave:ke}){return f.createElement(lt.$n,{disabled:!Le||me,icon:me?"spinner":void 0,onClick:()=>ke(Se),variant:Se?"destructive":"primary","data-testid":Ee.Tp.components.Drawer.DashboardSaveDrawer.saveButton},me?"Saving...":Se?"Save and overwrite":"Save")}var vn=e(41053),pn=e(14110),Un=e(3169),Bn=e(91219),kn=e(55314),Mn=e(31678);function xn(Se=!1){const me=(0,Mn.useDispatch)(),Le=(0,Un._2)(),[ke]=(0,kn.e8)(),[ut,ht]=(0,vn.A)(async(It,Ht,an)=>{{const Xt=await ke({dashboard:Ht,folderUid:an.folderUid,message:an.message,overwrite:an.overwrite,showErrorAlert:!1});if("error"in Xt)throw Xt.error;const On=Xt.data;It.saveCompleted(Ht,On,an.folderUid),i.A.publish(new a.Eu),Le.success("Dashboard saved"),(0,S.ko)(On.uid),Se?(0,pn.rR)("grafana_dashboard_copied",{name:Ht.title,url:On.url}):(0,pn.rR)(`grafana_dashboard_${On.uid?"saved":"created"}`,{name:Ht.title,url:On.url});const ia=o.Ny.getLocation(),qn=t.I.stripBaseFromUrl(On.url);return qn!==ia.pathname&&setTimeout(()=>{It.stopUrlSync(),o.Ny.push({pathname:qn,search:ia.search}),It.startUrlSync()}),It.state.meta.isStarred&&me((0,Bn.TU)({id:On.uid,title:It.state.title,url:qn})),Xt.data}},[me,Le]);return{state:ut,onSaveDashboard:ht}}function Vn({dashboard:Se,changeInfo:me}){const{changedSaveModel:Le}=me,{register:ke,handleSubmit:ut,setValue:ht,formState:It,getValues:Ht,watch:an}=(0,Dn.mN)({mode:"onBlur",defaultValues:{title:me.isNew?Le.title:`${Le.title} Copy`,description:Le.description??"",folder:{uid:Se.state.meta.folderUid,title:Se.state.meta.folderTitle},copyTags:!1}}),{errors:Xt,isValid:On,defaultValues:ia}=It,qn=an(),{state:Rn,onSaveDashboard:ua}=xn(!1),is=async Oa=>{const ts=Ht(),ns=Hn(Le,ts,me.isNew);(await ua(Se,ns,{overwrite:Oa,folderUid:ts.folder.uid})).status==="success"&&Se.closeModal()},Ea=f.createElement(lt.$n,{variant:"secondary",onClick:()=>Se.closeModal(),fill:"outline"},"Cancel"),$a=Oa=>f.createElement(mn,{isValid:On,isLoading:Rn.loading,onSave:is,overwrite:Oa});function Gn(Oa){return na(Oa)?f.createElement(on,{cancelButton:Ea,saveButton:$a}):f.createElement(f.Fragment,null,Oa&&f.createElement(ze.F,{title:"Failed to save dashboard",severity:"error"},f.createElement("p",null,Oa.message)),f.createElement(Ct.B,{alignItems:"center"},Ea,$a(!1)))}return f.createElement("form",{onSubmit:ut(()=>is(!1))},f.createElement(Me.D,{label:f.createElement(aa,{dashboard:Le,onChange:ht}),invalid:!!Xt.title,error:Xt.title?.message},f.createElement(Vt.p,{...ke("title",{required:"Required",validate:_n}),"aria-label":"Save dashboard title field","data-testid":Ee.Tp.components.Drawer.DashboardSaveDrawer.saveAsTitleInput,onChange:Mt()(async Oa=>{ht("title",Oa.target.value,{shouldValidate:!0})},400)})),f.createElement(Me.D,{label:f.createElement(Jn,{dashboard:Le,onChange:ht}),invalid:!!Xt.description,error:Xt.description?.message},f.createElement(qt.f,{...ke("description",{required:!1}),"aria-label":"Save dashboard description field",autoFocus:!0})),f.createElement(Me.D,{label:"Folder"},f.createElement(Jt.d,{onChange:(Oa,ts)=>ht("folder",{uid:Oa,title:ts}),value:qn.folder?.uid,initialTitle:ia.folder.title,dashboardId:Le.id??void 0,enableCreateNew:!0})),!me.isNew&&f.createElement(Me.D,{label:"Copy tags"},f.createElement(xe.d,{...ke("copyTags")})),f.createElement(rn.a,{paddingTop:2},Gn(Rn.error)))}function aa(Se){return f.createElement(Ct.B,{justifyContent:"space-between"},f.createElement(en.J,{htmlFor:"description"},"Title"))}function Jn(Se){return f.createElement(Ct.B,{justifyContent:"space-between"},f.createElement(en.J,{htmlFor:"description"},"Description"))}async function _n(Se,me){if(Se===me.folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await hn.P.validateNewDashboardName(me.folder.uid??"general",Se),!0}catch(Le){return Le instanceof Error?Le.message:"Dashboard name is invalid"}}function Hn(Se,me,Le){return{...Se,id:null,uid:"",title:me.title,description:me.description,tags:Le||me.copyTags?Se.tags:[]}}var ba=e(10880);function va({dashboard:Se,drawer:me,changeInfo:Le}){const{changedSaveModel:ke,hasChanges:ut}=Le,{state:ht,onSaveDashboard:It}=xn(!1),[Ht,an]=(0,f.useState)({folderUid:Se.state.meta.folderUid}),Xt=async Rn=>{(await It(Se,ke,{...Ht,overwrite:Rn})).status==="success"&&(Se.closeModal(),me.state.onSaveSuccess?.())},On=f.createElement(lt.$n,{variant:"secondary",onClick:()=>Se.closeModal(),fill:"outline"},"Cancel"),ia=Rn=>f.createElement(mn,{isValid:ut,isLoading:ht.loading,onSave:Xt,overwrite:Rn});function qn(Rn){return Kn(Rn)?f.createElement(ze.F,{title:"Someone else has updated this dashboard",severity:"error"},f.createElement("p",null,"Would you still like to save this dashboard?"),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{alignItems:"center"},On,ia(!0)))):na(Rn)?f.createElement(on,{cancelButton:On,saveButton:ia}):Ut(Rn)?f.createElement(ze.F,{title:"Plugin dashboard",severity:"error"},f.createElement("p",null,"Your changes will be lost when you update the plugin. Use ",f.createElement("strong",null,"Save As")," to create custom version."),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{alignItems:"center"},On,ia(!0)))):f.createElement(f.Fragment,null,Rn&&f.createElement(ze.F,{title:"Failed to save dashboard",severity:"error"},f.createElement("p",null,Rn.message)),f.createElement(Ct.B,{alignItems:"center"},On,ia(!1),!ut&&f.createElement("div",null,"No changes to save")))}return f.createElement(Ct.B,{gap:0,direction:"column"},f.createElement(Ca,{drawer:me,changeInfo:Le}),f.createElement(Me.D,{label:"Message"},f.createElement(qt.f,{"aria-label":"message",value:Ht.message??"",onChange:Rn=>{an({...Ht,message:Rn.currentTarget.value})},placeholder:"Add a note to describe your changes (optional).",autoFocus:!0,rows:5})),f.createElement(rn.a,{paddingTop:2},qn(ht.error)))}function Ca({drawer:Se,changeInfo:me}){const{saveVariables:Le=!1,saveTimeRange:ke=!1,saveRefresh:ut=!1}=Se.useState(),{hasTimeChanges:ht,hasVariableValueChanges:It,hasRefreshChange:Ht}=me;return f.createElement(f.Fragment,null,ht&&f.createElement(Me.D,{label:"Update default time range",description:"Will make current time range the new default"},f.createElement(ba.S,{id:"save-timerange",checked:ke,onChange:Se.onToggleSaveTimeRange,"data-testid":Ee.Tp.pages.SaveDashboardModal.saveTimerange})),Ht&&f.createElement(Me.D,{label:"Update default refresh value",description:"Will make the current refresh the new default"},f.createElement(ba.S,{id:"save-refresh",checked:ut,onChange:Se.onToggleSaveRefresh,"data-testid":Ee.Tp.pages.SaveDashboardModal.saveRefresh})),It&&f.createElement(Me.D,{label:"Update default variable values",description:"Will make the current values the new default"},f.createElement(ba.S,{id:"save-variables",checked:Le,onChange:Se.onToggleSaveVariables,"data-testid":Ee.Tp.pages.SaveDashboardModal.saveVariables})))}var dn=e(4213),pt=e.n(dn),Dt=e(70713),nn=e(10534);function gn({dashboard:Se,drawer:me,changeInfo:Le}){const ke=(0,f.useMemo)(()=>JSON.stringify(Le.changedSaveModel,null,2),[Le]),ut=(0,f.useCallback)(()=>{const ht=new Blob([ke],{type:"application/json;charset=utf-8"});(0,dn.saveAs)(ht,Le.changedSaveModel.title+"-"+new Date().getTime()+".json")},[Le.changedSaveModel,ke]);return f.createElement("div",{className:Cn.container},f.createElement(Ct.B,{direction:"column",gap:2,grow:1},f.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",f.createElement("br",null),f.createElement("i",null,"See"," ",f.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),f.createElement("br",null)," ",f.createElement("br",null),f.createElement("strong",null,"File path: ")," ",Se.state.meta.provisionedExternalId),f.createElement(Ct.B,{direction:"column",gap:0},f.createElement(Ca,{drawer:me,changeInfo:Le})),f.createElement("div",{className:Cn.json},f.createElement(Dt.Ay,{disableWidth:!0},({height:ht})=>f.createElement(We.B,{width:"100%",height:ht,language:"json",showLineNumbers:!0,showMiniMap:ke.length>100,value:ke,readOnly:!0}))),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{gap:2},f.createElement(lt.$n,{variant:"secondary",onClick:me.onClose,fill:"outline"},"Cancel"),f.createElement(nn.b,{icon:"copy",getText:()=>ke},"Copy JSON to clipboard"),f.createElement(lt.$n,{type:"submit",onClick:ut},"Save JSON to file")))))}const Cn={container:(0,y.css)({height:"100%",display:"flex"}),json:(0,y.css)({flexGrow:1,maxHeight:"800px"})};function In(Se,me,Le,ke){const ut=K(Se.getInitialSaveModel(),(0,H.Uy)(Se),me,Le,ke),ht=Se.getInitialState()?.meta.folderUid!==Se.state.meta.folderUid;return{...ut,hasFolderChanges:ht,hasChanges:ut.hasChanges||ht}}class fa extends m.Bs{constructor(){super(...arguments),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})},this.onToggleSaveTimeRange=()=>{this.setState({saveTimeRange:!this.state.saveTimeRange})},this.onToggleSaveVariables=()=>{this.setState({saveVariables:!this.state.saveVariables})},this.onToggleSaveRefresh=()=>{this.setState({saveRefresh:!this.state.saveRefresh})}}static{this.Component=({model:me})=>{const{showDiff:Le,saveAsCopy:ke,saveTimeRange:ut,saveVariables:ht,saveRefresh:It}=me.useState(),Ht=In(me.state.dashboardRef.resolve(),ut,ht,It),{changedSaveModel:an,initialSaveModel:Xt,diffs:On,diffCount:ia,hasFolderChanges:qn}=Ht,Rn=ia+(qn?1:0),ua=me.state.dashboardRef.resolve(),{meta:is}=ua.useState(),{provisioned:Ea,folderTitle:$a}=is,Gn=f.createElement(Tt.U,null,f.createElement(Kt.o,{label:"Details",active:!Le,onChangeTab:()=>me.setState({showDiff:!1})}),Rn>0&&f.createElement(Kt.o,{label:"Changes",active:Le,onChangeTab:()=>me.setState({showDiff:!0}),counter:Rn}));let Oa="Save dashboard";ke?Oa="Save dashboard copy":Ea&&(Oa="Provisioned dashboard");const ts=()=>Le?f.createElement(_t.l,{diff:On,oldValue:Xt,newValue:an,hasFolderChanges:qn,oldFolder:ua.getInitialState()?.meta.folderTitle,newFolder:$a}):ke||Ht.isNew?f.createElement(Vn,{dashboard:ua,changeInfo:Ht}):Ea?f.createElement(gn,{dashboard:ua,changeInfo:Ht,drawer:me}):f.createElement(va,{dashboard:ua,changeInfo:Ht,drawer:me});return f.createElement(Gt._,{title:Oa,subtitle:ua.state.title,onClose:me.onClose,tabs:Gn},ts())}}}var ga=e(6729),sa=e(57714),da=e(64423),Ma=e(18226),_a=e(94624),Xa=e(72724),ps=e(3591),As=e(13989);class ys{constructor(me){this._vizPanel=me}get id(){const me=(0,k.Cs)(this._vizPanel);return isNaN(me)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):me}get description(){return this._vizPanel.state.description}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof m.Es?this._vizPanel.state.$data.state.transformations:[]}get targets(){const me=(0,k.un)(this._vizPanel);return me?me.state.queries:[]}get datasource(){return(0,k.un)(this._vizPanel)?.state.datasource}get options(){return this._vizPanel.state.options}get fieldConfig(){return this._vizPanel.state.fieldConfig}get pluginVersion(){return this._vizPanel.state.pluginVersion}}class vs{constructor(me){this._scene=me,this.events=new Ma.o,this._subs=new da.yU;const Le=m.jh.getTimeRange(me);this.formatDate=this.formatDate.bind(this),this._subs.add(Le.subscribeToState((ke,ut)=>{ke.value!==ut.value&&this.events.publish(new ps.sR(ke.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:this._scene.state.controls.state.refreshPicker.state.intervals,hidden:this._scene.state.controls.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return m.jh.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get links(){return this._scene.state.links}get meta(){return this._scene.state.meta}get time(){const me=m.jh.getTimeRange(this._scene);return{from:me.state.from,to:me.state.to}}get panels(){return ar(this._scene,Le=>Le instanceof m.Eb).map(Le=>new ys(Le))}get annotations(){const me={list:[]};return this._scene.state.$data instanceof m.kh&&(me.list=(0,As.O)(this._scene.state.$data.state.layers)),me}getTimezone(){return m.jh.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const me of this._scene.state.$behaviors)if(me instanceof m.Gg.K2)return me.state.sync}return _a.y.Off}otherPanelInFullscreen(me){return!1}formatDate(me,Le){return(0,Xa.LE)(me,{format:Le,timeZone:this.getTimezone()})}getPanelById(me){const Le=(0,k.vL)(this._scene,(0,k.XA)(me));return Le?new ys(Le):null}removePanel(me){const Le=(0,k.vL)(this._scene,(0,k.XA)(me.id));if(!Le){console.error("Trying to remove a panel that was not found in scene",me);return}const ke=Le.parent;if(!(ke instanceof F.U)){console.error("Trying to remove a panel that is not wrapped in DashboardGridItem");return}const ut=m.jh.getLayout(Le);if(!(ut instanceof m.hy)){console.error("Trying to remove a panel in a layout that is not SceneGridLayout ");return}if(ut===ke.parent&&ut.setState({children:ut.state.children.filter(ht=>ht!==ke)}),ke.parent instanceof m.tI){const ht=ut.clone({children:ut.state.children.filter(It=>It!==ke)});ut.parent instanceof m.hy&&ut.parent.setState({children:ut.parent.state.children.map(It=>It===ut?ht:It)})}}canEditAnnotations(me){return this._scene.canEditDashboard()?me?!!this._scene.state.meta.annotationsPermissions?.dashboard.canEdit:!!this._scene.state.meta.annotationsPermissions?.organization.canEdit:!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}hasUnsavedChanges(){return this._scene.state.isDirty}}function ar(Se,me){let Le=[];return Se.forEachChild(ke=>{me(ke)?Le.push(ke):Le=Le.concat(ar(ke,me))}),Le}var ss=e(32023);function Rs(Se){let me=5381;for(let Le=0;Le<Se.length;Le++)me=me*33^Se.charCodeAt(Le);return me>>>0}var Cs=e(11982),ws=e(57109),kr=e(58476),Xs=e(64388),dr=e(40276),ks=e(17205),bo=e(68064),_s=e(27746),Ls=e(14578),Bs=e(39938),Tr=e(83122),Ws=e(38138),co=e(19727),ei=e(15068),Ur=e(75269),Ao=e(10804),uo=e(10096),rs=e(44836),Ro=e(2609),Do=e(58441),lr=e(7758),Lo=e(99246),ii=e(40672),Hr=e(96374);function Po(Se){return f.createElement(_s.I,{key:"button-snapshot","data-testid":"button-snapshot",tooltip:(0,rs.t)("dashboard.toolbar.open-original","Open original dashboard"),icon:"link",onClick:()=>Co(Se.originalURL)})}const Co=Se=>{const me=Se??"",Le=ii.sQ.sanitizeUrl(me);try{const ke=new URL(Le,s.$.appUrl),ut=new URL(s.$.appUrl);ke.host!==ut.host?i.A.publish(new a.S8({component:Hr.u,props:{title:"Proceed to external site?",modalClass:(0,y.css)({width:"max-content",maxWidth:"80vw"}),body:f.createElement(f.Fragment,null,f.createElement("p",null,"This link connects to an external website at"," ",f.createElement("code",null,me)),f.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:()=>{window.location.href=ke.href}}})):o.Ny.push(Le)}catch(ke){console.error("Failed to open original dashboard",ke)}},ur=f.memo(({dashboard:Se})=>{const me=f.createElement(Vo,{dashboard:Se});return f.createElement(Ur.H,{actions:me})});ur.displayName="NavToolbarActions";function Vo({dashboard:Se}){const{isEditing:me,viewPanelScene:Le,isDirty:ke,uid:ut,meta:ht,editview:It,editPanel:Ht,editable:an,hasCopiedPanel:Xt}=Se.useState(),{isPlaying:On}=Ro._o.useState(),[ia,qn]=(0,f.useState)(!1),Rn=uo.TP.hasEditPermissionInFolders,ua=[],is=(0,M.of)(mr),Ea=!!Ht,$a=!!Le,Gn=Bo(Ht),Oa=jr(Ht),ts=!!Xt,ns=!It&&!$a&&!Ea,Eo=me&&ns;Ea||mo(ua,Lo.C.left,"left-actions"),ua.push({group:"icon-actions",condition:ut&&!!ht.canStar&&ns&&!me,render:()=>{let ir=ht.isStarred?(0,rs.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,rs.t)("dashboard.toolbar.mark-favorite","Mark as favorite");return f.createElement(_s.I,{tooltip:ir,icon:f.createElement(Ls.I,{name:ht.isStarred?"favorite":"star",size:"lg",type:ht.isStarred?"mono":"default"}),key:"star-dashboard-button","data-testid":Ee.Tp.components.NavToolbar.markAsFavorite,onClick:()=>{lr.c.toolbarFavoritesClick(),Se.onStarDashboard()}})}}),ht.publicDashboardEnabled&&ua.push({group:"icon-actions",condition:ut&&!!ht.canStar&&ns&&!me,render:()=>f.createElement(Bs.E,{color:"blue",text:"Public",key:"public-dashboard-button-badge",className:is.publicBadge,"data-testid":Ee.Tp.pages.Dashboard.DashNav.publicDashboardTag})});const Go=s.$.buildInfo.env==="development";ua.push({group:"icon-actions",condition:Go&&ut&&ns&&!me,render:()=>f.createElement(_s.I,{key:"view-in-old-dashboard-button",tooltip:"Switch to old dashboard page",icon:"apps",onClick:()=>{o.Ny.partial({scenes:!1})}})}),ua.push({group:"icon-actions",condition:ht.isSnapshot&&!me,render:()=>f.createElement(Po,{key:"go-to-snapshot-origin",originalURL:Se.getInitialSaveModel()?.snapshot?.originalUrl??""})}),!Ea&&!me&&mo(ua,Lo.C.right,"icon-actions"),ua.push({group:"add-panel",condition:Eo,render:()=>f.createElement(Tr.m,{key:"add-panel-dropdown",onVisibleChange:ir=>{qn(ir),lr.c.toolbarAddClick()},overlay:()=>f.createElement(Ws.W,null,f.createElement(Ws.W.Item,{key:"add-visualization",testId:Ee.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,rs.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const ir=Se.onCreateNewPanel();lr.c.toolbarAddButtonClicked({item:"add_visualization"}),o.Ny.partial({editPanel:ir})}}),f.createElement(Ws.W.Item,{key:"add-panel-lib",testId:Ee.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,rs.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{Se.onShowAddLibraryPanelDrawer(),lr.c.toolbarAddButtonClicked({item:"add_library_panel"})}}),f.createElement(Ws.W.Item,{key:"add-row",testId:Ee.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,rs.t)("dashboard.add-menu.row","Row"),onClick:()=>{Se.onCreateNewRow(),lr.c.toolbarAddButtonClicked({item:"add_row"})}}),f.createElement(Ws.W.Item,{key:"paste-panel",disabled:!ts,testId:Ee.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,rs.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{Se.pastePanel(),lr.c.toolbarAddButtonClicked({item:"paste_panel"})}})),placement:"bottom",offset:[0,6]},f.createElement(lt.$n,{key:"add-panel-button",variant:"primary",size:"sm",fill:"outline","data-testid":Ee.Tp.components.PageToolbar.itemButton("Add button")},f.createElement(rs.x6,{i18nKey:"dashboard.toolbar.add"},"Add"),f.createElement(Ls.I,{name:ia?"angle-up":"angle-down",size:"lg"})))}),ua.push({group:"playlist-actions",condition:On&&ns&&!me,render:()=>f.createElement(_s.I,{key:"play-list-prev","data-testid":Ee.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,rs.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>Ro._o.prev()})}),ua.push({group:"playlist-actions",condition:On&&ns&&!me,render:()=>f.createElement(_s.I,{key:"play-list-stop",onClick:()=>Ro._o.stop(),"data-testid":Ee.Tp.pages.Dashboard.DashNav.playlistControls.stop},f.createElement(rs.x6,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist"))}),ua.push({group:"playlist-actions",condition:On&&ns&&!me,render:()=>f.createElement(_s.I,{key:"play-list-next","data-testid":Ee.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,rs.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>Ro._o.next(),narrow:!0})}),ua.push({group:"back-button",condition:($a||Ea)&&!Oa,render:()=>f.createElement(lt.$n,{onClick:()=>{o.Ny.partial({viewPanel:null,editPanel:null})},tooltip:"",key:"back",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":Ee.Tp.components.NavToolbar.editDashboard.backToDashboardButton},"Back to dashboard")}),ua.push({group:"back-button",condition:!!It,render:()=>f.createElement(lt.$n,{onClick:()=>{o.Ny.partial({editview:null})},tooltip:"",key:"back",fill:"text",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":Ee.Tp.components.NavToolbar.editDashboard.backToDashboardButton},"Back to dashboard")}),ua.push({group:"main-buttons",condition:ut&&!me&&!ht.isSnapshot&&!On,render:()=>f.createElement(lt.$n,{key:"share-dashboard-button",tooltip:(0,rs.t)("dashboard.toolbar.share","Share dashboard"),size:"sm",className:is.buttonWithExtraMargin,fill:"outline",onClick:()=>{lr.c.toolbarShareClick(),Se.showModal(new Do.Z({dashboardRef:Se.getRef()}))},"data-testid":Ee.Tp.components.NavToolbar.shareDashboard},"Share")}),ua.push({group:"main-buttons",condition:!me&&Se.canEditDashboard()&&!$a&&!On&&an,render:()=>f.createElement(lt.$n,{onClick:()=>{Se.onEnterEditMode()},tooltip:"Enter edit mode",key:"edit",className:is.buttonWithExtraMargin,variant:"primary",size:"sm","data-testid":Ee.Tp.components.NavToolbar.editDashboard.editButton},"Edit")}),ua.push({group:"main-buttons",condition:!me&&Se.canEditDashboard()&&!$a&&!On&&!an,render:()=>f.createElement(lt.$n,{onClick:()=>{Se.onEnterEditMode(),Se.setState({editable:!0,meta:{...ht,canEdit:!0}})},tooltip:"This dashboard was marked as read only",key:"edit",className:is.buttonWithExtraMargin,variant:"secondary",size:"sm","data-testid":Ee.Tp.components.NavToolbar.editDashboard.editButton},"Make editable")}),ua.push({group:"settings",condition:me&&Se.canEditDashboard()&&ns,render:()=>f.createElement(lt.$n,{onClick:()=>{Se.onOpenSettings()},tooltip:"Dashboard settings",fill:"text",size:"sm",key:"settings",variant:"secondary","data-testid":Ee.Tp.components.NavToolbar.editDashboard.settingsButton},"Settings")}),ua.push({group:"main-buttons",condition:me&&!ht.isNew&&ns,render:()=>f.createElement(lt.$n,{onClick:()=>Se.exitEditMode({skipConfirm:!1}),tooltip:"Exits edit mode and discards unsaved changes",size:"sm",key:"discard",fill:"text",variant:"primary","data-testid":Ee.Tp.components.NavToolbar.editDashboard.exitButton},"Exit edit")}),ua.push({group:"main-buttons",condition:Ea&&!Oa&&!It&&!ht.isNew&&!$a,render:()=>f.createElement(lt.$n,{onClick:Ht?.onDiscard,tooltip:"Discard panel changes",size:"sm",disabled:!Gn||!ke,key:"discard",fill:"outline",variant:"destructive","data-testid":Ee.Tp.components.NavToolbar.editDashboard.discardChangesButton},"Discard panel changes")}),ua.push({group:"main-buttons",condition:Ea&&Oa&&!It&&!$a,render:()=>f.createElement(lt.$n,{onClick:Ht?.onDiscard,tooltip:"Discard library panel changes",size:"sm",key:"discardLibraryPanel",fill:"outline",variant:"destructive","data-testid":Ee.Tp.components.NavToolbar.editDashboard.discardChangesButton},"Discard library panel changes")}),ua.push({group:"main-buttons",condition:Ea&&Oa&&!It&&!$a,render:()=>f.createElement(lt.$n,{onClick:Ht?.onUnlinkLibraryPanel,tooltip:"Unlink library panel",size:"sm",key:"unlinkLibraryPanel",fill:"outline",variant:"secondary","data-testid":Ee.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton},"Unlink library panel")}),ua.push({group:"main-buttons",condition:Ea&&Oa&&!It&&!$a,render:()=>f.createElement(lt.$n,{onClick:Ht?.onSaveLibraryPanel,tooltip:"Save library panel",size:"sm",key:"saveLibraryPanel",fill:"outline",variant:"primary","data-testid":Ee.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton},"Save library panel")}),ua.push({group:"main-buttons",condition:me&&!Oa&&(ht.canSave||Rn),render:()=>{if(ht.isNew)return f.createElement(lt.$n,{onClick:()=>{lr.c.toolbarSaveClick(),Se.openSaveDrawer({})},className:is.buttonWithExtraMargin,tooltip:"Save changes",key:"save",size:"sm",variant:"primary","data-testid":Ee.Tp.components.NavToolbar.editDashboard.saveButton},"Save dashboard");if(Rn&&!ht.canSave&&!ht.canMakeEditable)return f.createElement(lt.$n,{onClick:()=>{lr.c.toolbarSaveClick(),Se.openSaveDrawer({saveAsCopy:!0})},className:is.buttonWithExtraMargin,tooltip:"Save as copy",key:"save",size:"sm",variant:ke?"primary":"secondary"},"Save as copy");const ir=f.createElement(Ws.W,null,f.createElement(Ws.W.Item,{label:"Save",icon:"save",onClick:()=>{lr.c.toolbarSaveClick(),Se.openSaveDrawer({})}}),f.createElement(Ws.W.Item,{label:"Save as copy",icon:"copy",onClick:()=>{lr.c.toolbarSaveAsClick(),Se.openSaveDrawer({saveAsCopy:!0})}}));return f.createElement(co.e,{className:is.buttonWithExtraMargin,key:"save"},f.createElement(lt.$n,{onClick:()=>{lr.c.toolbarSaveClick(),Se.openSaveDrawer({})},tooltip:"Save changes",size:"sm","data-testid":Ee.Tp.components.NavToolbar.editDashboard.saveButton,variant:ke?"primary":"secondary"},"Save dashboard"),f.createElement(Tr.m,{overlay:ir},f.createElement(lt.$n,{icon:"angle-down",variant:ke?"primary":"secondary",size:"sm"})))}});const Ji=[];let Us="";for(const ir of ua)ir.condition&&(Us&&Us!==ir.group&&Us&&Ji.push(f.createElement(Ao.K,{key:`${ir.group}-separator`})),Ji.push(ir.render()),Us=ir.group);return f.createElement(ei.U,{alignment:"right"},Ji)}function mo(Se,me,Le){if(me.length>0)for(const ke of me){const ut={dashboard:(0,g.UA)().getCurrent()};if(ke.show(ut)){const ht=ke.component;Se.push({group:Le,condition:!0,render:()=>f.createElement(ht,{...ut,key:Se.length})})}}}function jr(Se){const[me,Le]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(Se){const ke=Se.state.vizManager.subscribeToState(ut=>Le(ut.sourcePanel.resolve().parent instanceof z.F));return()=>{ke.unsubscribe()}}Le(!1)},[Se]),me}function Bo(Se){const[me,Le]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(Se){const ke=Se.state.vizManager.subscribeToState(ut=>Le(ut.isDirty||!1));return()=>{ke.unsubscribe()}}Le(!1)},[Se]),me}function mr(Se){return{buttonWithExtraMargin:(0,y.css)({margin:Se.spacing(0,.5)}),publicBadge:(0,y.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})}}function xt({model:Se}){const{controls:me,overlay:Le,editview:ke,editPanel:ut,isEmpty:ht,scopes:It,meta:Ht}=Se.useState(),{isExpanded:an}=It?.useState()??{},Xt=(0,M.of)(wt),On=(0,kr.zy)(),ia=(0,Mn.useSelector)(Gn=>Gn.navIndex),qn=Se.getPageNav(On,ia),Rn=Se.getBodyToRender(),ua=(0,d.tc)(ia,"dashboards/browse"),is=!Ht.url&&!Ht.slug&&!Ht.isNew;if(ke)return f.createElement(f.Fragment,null,f.createElement(ke.Component,{model:ke}),Le&&f.createElement(Le.Component,{model:Le}));const Ea=f.createElement(bo.A,{dashboard:Se,canCreate:!!Se.state.meta.canEdit}),$a=f.createElement("div",{className:(0,y.cx)(Xt.body)},f.createElement(Rn.Component,{model:Rn}));return f.createElement(ks.Y,{navModel:ua,pageNav:qn,layout:Xs.k.Custom},ut&&f.createElement(ut.Component,{model:ut}),!ut&&f.createElement("div",{className:(0,y.cx)(Xt.pageContainer,me&&!It&&Xt.pageContainerWithControls,It&&Xt.pageContainerWithScopes,It&&an&&Xt.pageContainerWithScopesExpanded)},It&&f.createElement(It.Component,{model:It}),f.createElement(ur,{dashboard:Se}),!is&&me&&f.createElement("div",{className:(0,y.cx)(Xt.controlsWrapper,It&&!an&&Xt.controlsWrapperWithScopes)},f.createElement(me.Component,{model:me})),f.createElement(dr.E,{autoHeightMin:"100%",className:Xt.scrollbarContainer,testId:Ee.Tp.pages.Dashboard.DashNav.scrollContainer},f.createElement("div",{className:(0,y.cx)(Xt.canvasContent,is&&Xt.homePagePadding)},f.createElement(f.Fragment,null,ht&&Ea),$a))),Le&&f.createElement(Le.Component,{model:Le}))}function wt(Se){return{pageContainer:(0,y.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%"}),pageContainerWithControls:(0,y.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopes:(0,y.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${Se.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopesExpanded:(0,y.css)({gridTemplateAreas:`
        "scopes controls"
        "scopes panels"`}),scrollbarContainer:(0,y.css)({gridArea:"panels"}),controlsWrapper:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:Se.spacing(2)}),controlsWrapperWithScopes:(0,y.css)({padding:Se.spacing(2,2,2,0)}),homePagePadding:(0,y.css)({padding:Se.spacing(2,2)}),canvasContent:(0,y.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:Se.spacing(0,2),flexBasis:"100%",flexGrow:1}),body:(0,y.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",marginBottom:Se.spacing(2)})}}var fn=e(65123),cn=e(54612),bn=e(16560),Wn=e(86460),jn=e(62930),pa=e(88323),xa=e(66864),us=e(16233),bs=e(83195),Ga=e(2619),Qa=e(89667),Zs=e(52622),yr=e(39070),sr=e(68706),xr=e(41524);function To(Se){const me=[];if(Se?.series)for(const Le of Se.series)me.push((0,Qa.Nw)(Le));if(Se?.annotations)for(const Le of Se.annotations){const ke=(0,Qa.Nw)(Le);ke.schema?.meta||(ke.schema.meta={}),ke.schema.meta.dataTopic=Zs.QR.Annotations,me.push(ke)}return me}function qs(Se,me){const Le={panelType:Se.state.pluginId,datasource:"??"},ke=s.$.buildInfo.versionString;let ut=`| Key | Value |
|--|--|
| Panel | ${Le.panelType} @ ${Se.state.pluginVersion??ke} |
| Grafana | ${ke} // ${s.$.buildInfo.edition} |
`;return me&&(ut+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+me+"\n```\n</details>"),ut}async function _o(Se,me,Le){let ke;const ut=Se.parent instanceof z.F,ht=ut?Se.parent.parent:Se.parent;ut?ke={...(0,H.ZB)(ht),...(0,H.Z6)(Se)}:ke=(0,H.ZB)(ht);const It=(0,C.cloneDeep)(ao),Ht={panelType:Se.state.pluginId,datasource:"??"},an=(0,k.un)(Se);if(!an.state.data)return;const Xt=an.state.data,On=an?.state.datasource,ia=(0,xr.W)(To(Xt),me),qn=s.$.buildInfo.versionString,Rn=an.state.queries??[],ua=Xt.annotations?Xt.annotations.reduce((Ea,$a)=>$a.length+Ea,0):0,is=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${Ht.panelType} @ ${ke.pluginVersion??qn}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${Rn.map(Ea=>{const $a=Ea.datasource??On;return`${Ea.refId}[${$a?.type}]`}).join(", ")}</td>
    </tr>
    ${no(ke)}
    ${ms(Xt,ia)}
    ${Hs(Xt)}
    <tr>
      <th>Grafana</th>
      <td>${qn} // ${s.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(It.panels[0]={...ke,...It.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:sr.nj.Snapshot,snapshot:ia}]},delete It.panels[0].libraryPanel,ke.transformations?.length){const Ea=It.panels[It.panels.length-1];Ea.title=Ea.title+" (after transformations)";const $a=(0,C.cloneDeep)(Ea);$a.id=100,$a.title="Data (before transformations)",$a.gridPos.w=24,$a.targets[0].withTransforms=!1,It.panels.push($a)}return ua>0&&It.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:Zs.QR.Annotations,refId:"A"}]}),It.panels[1].options.content=is,It.panels[2].options.content=JSON.stringify(ke,null,2),It.title=`Debug: ${ke.title} // ${(0,Xa.LE)(new Date)}`,It.tags=["debug",`debug-${Ht.panelType}`],It.time={from:Le.from.toISOString(),to:Le.to.toISOString()},It}function no(Se){return Se.transformations?`<tr>
      <th>Transform</th>
      <td>${Se.transformations.map(me=>me.id).join(", ")}</td>
  </tr>`:""}function ms(Se,me){let Le=Se.series.length??0,ke=0,ut=0;for(const ht of Se.series)ke+=ht.fields.length,ut+=ht.length;return`<tr><th>Data</th><td>${Se.state!==yr.Gu.Done?Se.state:""} ${Le} frames, ${ke} fields, ${ut} rows </td></tr>`}function Hs(Se){return Se.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${Se.annotations.reduce((me,Le)=>Le.length+me,0)}</td>
</tr>`:""}const ao={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37};var fs=(Se=>(Se[Se.Support=0]="Support",Se[Se.Data=1]="Data",Se))(fs||{}),Gr=(Se=>(Se[Se.PanelSnapshot=0]="PanelSnapshot",Se[Se.GithubComment=1]="GithubComment",Se))(Gr||{});class Uo extends Ga.Q{constructor(me){super({panel:me,panelTitle:m.jh.interpolate(me,me.state.title,{},"text"),currentTab:0,showMessage:1,snapshotText:"",markdownText:"",randomize:{},snapshotUpdate:0,options:[{label:"GitHub comment",description:"Copy and paste this message into a GitHub issue or comment",value:1},{label:"Panel support snapshot",description:"Dashboard JSON used to help troubleshoot visualization issues",value:0}]}),this.onCurrentTabChange=Le=>{this.setState({currentTab:Le})},this.onShowMessageChange=Le=>{this.setState({showMessage:Le.value})},this.onGetMarkdownForClipboard=()=>{const{markdownText:Le}=this.state,ke=Math.pow(1024,2)*1.5;return Le.length>ke?(this.setState({error:{title:"Copy to clipboard failed",message:"Snapshot is too large, consider download and attaching a file instead"}}),""):Le},this.onDownloadDashboard=()=>{const{snapshotText:Le,panelTitle:ke}=this.state,ut=new Blob([Le],{type:"text/plain"}),ht=`debug-${ke}-${(0,Xa.LE)(new Date)}.json.txt`;pt()(ut,ht)},this.onSetSnapshotText=Le=>{this.setState({snapshotText:Le})},this.onToggleRandomize=Le=>{const{randomize:ke}=this.state;this.setState({randomize:{...ke,[Le]:!ke[Le]}})}}async buildDebugDashboard(){const{panel:me,randomize:Le,snapshotUpdate:ke}=this.state,ut=await _o(me,Le,m.jh.getTimeRange(me).state.value),ht=JSON.stringify(ut,null,2),It=qs(me,ht),Ht=(0,bs.cN)((0,bs.j_)("bytes")(ht?.length??0));let an;if(ut)try{an=(0,ga.wM)({dashboard:ut,meta:{isEmbedded:!0}}).state.body}catch(Xt){console.log("Error creating scene:",Xt)}this.setState({snapshot:ut,snapshotText:ht,markdownText:It,snapshotSize:Ht,snapshotUpdate:ke+1,scene:an})}}function li({panel:Se,onClose:me}){const Le=(0,M.of)(El),ke=(0,f.useMemo)(()=>new Uo(Se),[Se]),ut=Se.getPlugin(),{currentTab:ht,loading:It,error:Ht,options:an,showMessage:Xt,snapshotSize:On,markdownText:ia,snapshotText:qn,randomize:Rn,panelTitle:ua,scene:is}=ke.useState();if((0,f.useEffect)(()=>{ke.buildDebugDashboard()},[ke,ut,Rn]),!ut)return null;const Ea=[{label:"Snapshot",value:fs.Support},{label:"Data",value:fs.Data}],$a=s.$.supportBundlesEnabled&&us.TP.hasPermission(Mn.AccessControlAction.ActionSupportBundlesCreate);return f.createElement(Gt._,{title:"Get help with this panel",size:"lg",onClose:me,subtitle:f.createElement(Ct.B,{direction:"column",gap:1},f.createElement(Ct.B,{direction:"row",gap:1},f.createElement(Wn.y,{featureState:r.Ay.beta}),f.createElement("a",{href:"https://grafana.com/docs/grafana/latest/troubleshooting/",target:"blank",className:"external-link",rel:"noopener noreferrer"},"Troubleshooting docs ",f.createElement(Ls.I,{name:"external-link-alt"}))),f.createElement("span",{className:"muted"},"To request troubleshooting help, send a snapshot of this panel to Grafana Labs Technical Support. The snapshot contains query response data and panel settings."),$a&&f.createElement("span",{className:"muted"},"You can also retrieve a support bundle containing information concerning your Grafana instance and configured datasources in the ",f.createElement("a",{href:"/support-bundles"},"support bundles section"),".")),tabs:f.createElement(Tt.U,null,Ea.map((Gn,Oa)=>f.createElement(Kt.o,{key:`${Gn.value}-${Oa}`,label:Gn.label,active:Gn.value===ht,onChangeTab:()=>ke.onCurrentTabChange(Gn.value)})))},It&&f.createElement(jn.y,null),Ht&&f.createElement(ze.F,{title:Ht.title},Ht.message),ht===fs.Data&&f.createElement("div",{className:Le.code},f.createElement("div",{className:Le.opts},f.createElement(Me.D,{label:"Template",className:Le.field},f.createElement(pa.l6,{options:an,value:Xt,onChange:ke.onShowMessageChange})),Xt===Gr.GithubComment?f.createElement(nn.b,{icon:"copy",getText:ke.onGetMarkdownForClipboard},"Copy to clipboard"):f.createElement(lt.$n,{icon:"download-alt",onClick:ke.onDownloadDashboard},"Download (",On,")")),f.createElement(Dt.Ay,{disableWidth:!0},({height:Gn})=>f.createElement(We.B,{width:"100%",height:Gn,language:Xt===Gr.GithubComment?"markdown":"json",showLineNumbers:!0,showMiniMap:!0,value:Xt===Gr.GithubComment?ia:qn,readOnly:!1,onBlur:ke.onSetSnapshotText}))),ht===fs.Support&&f.createElement(f.Fragment,null,f.createElement(Me.D,{label:"Randomize data",description:"Modify the original data to hide sensitve information.  Note the lengths will stay the same, and duplicate values will be equal."},f.createElement(xa.Gy,null,f.createElement(xe.K,{label:"Labels",id:"randomize-labels",showLabel:!0,value:!!Rn.labels,onChange:()=>ke.onToggleRandomize("labels")}),f.createElement(xe.K,{label:"Field names",id:"randomize-field-names",showLabel:!0,value:!!Rn.names,onChange:()=>ke.onToggleRandomize("names")}),f.createElement(xe.K,{label:"String values",id:"randomize-string-values",showLabel:!0,value:!!Rn.values,onChange:()=>ke.onToggleRandomize("values")}))),f.createElement(Me.D,{label:"Support snapshot",description:`Panel: ${ua}`},f.createElement(Ct.B,null,f.createElement(lt.$n,{icon:"download-alt",onClick:ke.onDownloadDashboard},"Dashboard (",On,")"),f.createElement(nn.b,{icon:"github",getText:ke.onGetMarkdownForClipboard,title:"Copy a complete GitHub comment to the clipboard"},"Copy to clipboard"))),f.createElement(Dt.Ay,{disableWidth:!0},({height:Gn})=>f.createElement("div",{style:{height:Gn,overflow:"auto"}},is&&f.createElement(is.Component,{model:is})))))}const El=Se=>({code:(0,y.css)({flexGrow:1,height:"100%",overflow:"scroll"}),field:(0,y.css)({width:"100%"}),opts:(0,y.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:Se.spacing(1)}})});var Ts=e(61453);class yl extends m.Bs{constructor(me){super({...me,options:{withTransforms:!0,withFieldConfig:!0}}),this.onOptionsChange=Le=>{this.setState({options:Le})}}getTabLabel(){return(0,rs.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return bn.q.Data}static{this.Component=({model:me})=>{const{options:Le}=me.useState(),ke=me.state.panelRef.resolve(),ut=m.jh.getData(ke),{data:ht}=bl(ut,Le.withTransforms).useState(),It=m.jh.getTimeRange(ke);return f.createElement(Ts.q,{isLoading:ht?.state===yr.Gu.Loading,data:ht?.series,options:Le,hasTransformations:nl(ut),timeZone:It.getTimeZone(),panelPluginId:ke.state.pluginId,dataName:ke.state.title,fieldConfig:ke.state.fieldConfig,onOptionsChange:me.onOptionsChange})}}}function nl(Se){return Se instanceof m.Es?Se.state.transformations.length>0:!1}function bl(Se,me){return me&&Se instanceof m.Es?Se.state.$data:Se}var wi=e(18803),Sr=e(26323),Ci=e(77938),ci=e(6204);class Qr extends m.Bs{constructor(me){super({...me,source:"panel-json",jsonText:Fi("panel-json",me.panelRef.resolve())}),this.onChangeSource=Le=>{this.setState({source:Le.value,jsonText:Fi(Le.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const Le=this.state.panelRef.resolve(),ke=(0,k.YQ)(Le),ut=JSON.parse(this.state.jsonText),ht=new u.a(ut),It=(0,ga.tt)(ht),Ht=m.Go.cloneSceneObjectState(It.state);if(!(Le.parent instanceof F.U)){console.error("Cannot update state of panel",Le,It);return}this.state.onClose(),ke.state.isEditing||ke.onEnterEditMode(),Le.parent.setState(Ht),(0,ci.B9)(bn.q.JSON,"apply",{panel_type_changed:Le.state.pluginId!==ht.type,panel_id_changed:(0,k.Cs)(Le)!==ht.id,panel_grid_pos_changed:zo(Le.parent.state,Ht),panel_targets_changed:Mr((0,k.un)(Le),(0,k.un)(Ht.$data))})},this.onCodeEditorBlur=Le=>{this.setState({jsonText:Le})}}getTabLabel(){return(0,rs.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return bn.q.JSON}getOptions(){const me=this.state.panelRef.resolve(),Le=me.state.$data??me.parent?.state.$data,ke=[{label:(0,rs.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,rs.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return Le&&(ke.push({label:(0,rs.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,rs.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),ke.push({label:(0,rs.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,rs.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),ke}isEditable(){if(this.state.source!=="panel-json")return!1;const me=this.state.panelRef.resolve();return me.parent instanceof z.F||me.parent instanceof F.U&&me.parent.isRepeated()?!1:(0,k.YQ)(me).state.meta.canEdit}static{this.Component=({model:me})=>{const{source:Le,jsonText:ke}=me.useState(),ut=(0,M.of)(Sr.A),ht=me.getOptions();return f.createElement("div",{className:ut.wrap},f.createElement("div",{className:ut.toolbar,"aria-label":Ee.Tp.components.PanelInspector.Json.content},f.createElement(Me.D,{label:(0,rs.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1"},f.createElement(pa.l6,{inputId:"select-source-dropdown",options:ht,value:ht.find(It=>It.value===Le)??ht[0].value,onChange:me.onChangeSource})),me.isEditable()&&f.createElement(lt.$n,{className:ut.toolbarItem,onClick:me.onApplyChange},"Apply")),f.createElement("div",{className:ut.content},f.createElement(Dt.Ay,{disableWidth:!0},({height:It})=>f.createElement(We.B,{width:"100%",height:It,language:"json",showLineNumbers:!0,showMiniMap:ke.length>100,value:ke,readOnly:!me.isEditable(),onBlur:me.onCodeEditorBlur}))))}}}function Fi(Se,me){let Le={};switch(Se){case"panel-json":{(0,ci.B9)(bn.q.JSON,"panelData");const ke=me.parent instanceof z.F,ut=ke?me.parent.parent:me.parent;if(ke){Le=Dl(me);break}if(me.parent instanceof ie){Le=me.parent.getPanelSaveModel();break}ut instanceof F.U&&(Le=(0,H.ZB)(ut));break}case"panel-data":{(0,ci.B9)(bn.q.JSON,"panelJSON");const ke=m.jh.getData(me);ke.state.data&&(Le=me.applyFieldConfig(ke.state.data));break}case"data-frames":{(0,ci.B9)(bn.q.JSON,"dataFrame");const ke=m.jh.getData(me);ke.state.data&&(ke instanceof m.Es&&ke.state.$data?.state.data?Le=(0,wi.B6)(ke.state.$data.state.data):Le=(0,wi.B6)(ke.state.data))}}return(0,Ci.p)(Le)}function Dl(Se){if(!(Se.parent instanceof z.F))throw"Panel not child of LibraryVizPanel";if(!(Se.parent.parent instanceof F.U))throw"LibraryPanel not child of DashboardGridItem";const me=Se.parent.parent,Le={x:me.state.x||0,y:me.state.y||0,h:me.state.height||0,w:me.state.width||0},ke=fo(Se),ut=(0,H.Z6)(Se,Le,!1,me);return{libraryPanel:{...ke},...ut}}function fo(Se){if(!(Se.parent instanceof z.F))throw new Error("Panel not a child of LibraryVizPanel");if(!Se.parent.state._loadedPanel)throw new Error("Library panel not loaded");return Se.parent.state._loadedPanel}function zo(Se,me){return Se.x!==me.x||Se.y!==me.y||Se.width!==me.width||Se.height!==me.height}function Mr(Se,me){return Se===void 0||me===void 0?!1:!(0,C.isEqual)(Se.state.queries,me.state.queries)}class ko extends m.Bs{getTabLabel(){return(0,rs.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return bn.q.Meta}static{this.Component=({model:me})=>{const{panelRef:Le,dataSource:ke}=me.state,ut=m.jh.getData(Le.resolve()),ht=ke.components?.MetadataInspector;return!ut.state.data||!ht?null:f.createElement(ht,{datasource:ke,data:ut.state.data.series})}}}var Ho=e(90820);class So extends m.Bs{constructor(){super(...arguments),this.onRefreshQuery=()=>{const me=(0,k.un)(this.state.panelRef.resolve());me&&me.runQueries()}}getTabLabel(){return(0,rs.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return bn.q.Query}static{this.Component=({model:me})=>{const Le=m.jh.getData(me.state.panelRef.resolve()).useState();return Le.data?f.createElement(Ho.e,{data:Le.data,onRefreshQuery:me.onRefreshQuery}):null}}}var Wi=e(32067);class Ki extends m.Bs{getTabLabel(){return(0,rs.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return bn.q.Stats}static{this.Component=({model:me})=>{const Le=m.jh.getData(me.state.panelRef.resolve()).useState(),ke=m.jh.getTimeRange(me.state.panelRef.resolve());return Le.data?f.createElement(Wi.N,{data:Le.data,timeZone:ke.getTimeZone()}):null}}}class Ti extends m.Bs{constructor(me){super(me),this.onClose=()=>{const Le=(0,k.YQ)(this);o.Ny.push((0,Cs.uZ)({uid:Le.state.uid,slug:Le.state.meta.slug,currentQueryParams:o.Ny.getLocation().search,updateQuery:{inspect:null,inspectTab:null}}))},this.addActivationHandler(()=>this._activationHandler())}static{this.Component=Pl}_activationHandler(){this.buildTabs(0)}async buildTabs(me){const Le=this.state.panelRef,ke=Le?.resolve()?.getPlugin(),ut=[];if(ke||(me<2e3?setTimeout(()=>this.buildTabs(me+100),100):this.setState({pluginNotLoaded:!0})),Le){if((0,cn.$)(ke)){const ht=m.jh.getData(Le.resolve());ut.push(new yl({panelRef:Le})),ut.push(new Ki({panelRef:Le})),ut.push(new So({panelRef:Le}));const It=await(0,fn.BN)(ht.state.data);It&&ut.push(new ko({panelRef:Le,dataSource:It}))}ut.push(new Qr({panelRef:Le,onClose:this.onClose}))}this.setState({tabs:ut})}getDrawerTitle(){const me=this.state.panelRef?.resolve();return me?m.jh.interpolate(me,`Inspect: ${me.state.title}`):"Inspect panel"}}function Pl({model:Se}){const{tabs:me,pluginNotLoaded:Le,panelRef:ke}=Se.useState(),ut=(0,kr.zy)(),ht=new URLSearchParams(ut.search);if(!me)return null;const It=ht.get("inspectTab"),Ht=me.find(Xt=>Xt.getTabValue()===It)??me[0],an=ke.resolve();return It===bn.q.Help?f.createElement(li,{panel:an,onClose:Se.onClose}):f.createElement(Gt._,{title:Se.getDrawerTitle(),onClose:Se.onClose,size:"md",tabs:f.createElement(Tt.U,null,me.map(Xt=>f.createElement(Kt.o,{key:Xt.state.key,label:Xt.getTabLabel(),active:Xt===Ht,href:t.I.getUrlForPartial(ut,{inspectTab:Xt.getTabValue()})})))},Le&&f.createElement(ze.F,{title:"Panel plugin not loaded"},"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."),Ht&&Ht.Component&&f.createElement(Ht.Component,{model:Ht}))}var al=e(40980),sl=e(95689),rl=e(39558),Cl=e(14618),go=e(27747),No=e(75471),so=e(76885),Wr=e(34867),$i=e(25027),Si=e(63066);const di=({panel:Se,className:me})=>{const Le=(0,kr.zy)(),{loading:ke,value:ut}=(0,ne.A)(()=>(0,Si.J6)(Se),[Se]);if(ke)return f.createElement(lt.$n,{disabled:!0},"New alert rule");if(!ut)return f.createElement(ze.F,{severity:"info",title:"No alerting capable query found"},"Cannot create alerts from this panel because no query to an alerting capable datasource is found.");const ht=async()=>{(0,Wr.fH)($i.le.alertRuleFromPanel);const It=await(0,Si.J6)(Se),Ht=so.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(It),returnTo:Le.pathname+Le.search});o.Ny.push(Ht)};return f.createElement(lt.$n,{icon:"bell",onClick:ht,className:me,"data-testid":"create-alert-rule-button"},"New alert rule")};var jo=(Se=>(Se.Queries="queries",Se.Transformations="transformations",Se.Alert="alert",Se))(jo||{});class Vi extends m.Bs{constructor(me){super({}),this.tabId=jo.Alert,this.TabComponent=Le=>ol({...Le,model:this}),this._panelManager=me}static{this.Component=po}getTabLabel(){return"Alert"}getDashboardUID(){return this.getDashboard().state.uid}getDashboard(){return(0,k.YQ)(this._panelManager)}getLegacyPanelId(){return(0,k.Cs)(this._panelManager.state.panel)}getCanCreateRules(){const me=(0,No.Wd)("grafana");return this.getDashboard().state.meta.canSave&&uo.TP.hasPermission(me.create)}get panelManager(){return this._panelManager}get panel(){return this._panelManager.state.panel}}function po(Se){const{model:me}=Se,Le=(0,M.of)(Tl),{errors:ke,loading:ut,rules:ht}=(0,go.S)({dashboardUID:me.getDashboardUID(),panelId:me.getLegacyPanelId()}),It=ke.length?f.createElement(ze.F,{title:"Errors loading rules",severity:"error"},ke.map((Xt,On)=>f.createElement("div",{key:On},"Failed to load Grafana rules state: ",Xt.message||"Unknown error."))):null;if(ut&&!ht.length)return f.createElement(f.Fragment,null,It,f.createElement(rl._,{text:"Loading rules..."}));const{panel:Ht}=me,an=me.getCanCreateRules();return ht.length?f.createElement(f.Fragment,null,f.createElement(Cl.s,{rules:ht}),an&&f.createElement(di,{className:Le.newButton,panel:Ht})):f.createElement("div",{className:Le.noRulesWrapper},f.createElement("p",null,"There are no alert rules linked to this panel."),an&&f.createElement(di,{panel:Ht}))}const Tl=Se=>({newButton:(0,y.css)({marginTop:Se.spacing(3)}),noRulesWrapper:(0,y.css)({margin:Se.spacing(2),backgroundColor:Se.colors.background.secondary,padding:Se.spacing(3)})});function ol(Se){const{model:me}=Se,{rules:Le}=(0,go.S)({dashboardUID:me.getDashboardUID(),panelId:me.getLegacyPanelId(),poll:!1});return f.createElement(Kt.o,{key:Se.key,label:me.getTabLabel(),icon:"bell",counter:Le.length,active:Se.active,onChangeTab:Se.onChangeTab})}var _i=e(21969),zi=e(53478),wo=e(64152),il=e(44932),ki=e(37464),Ql=e(14348);class Hi extends m.Bs{constructor(me){super({}),this.tabId=jo.Queries,this.icon="database",this.onOpenInspector=()=>{this._panelManager.inspectPanel()},this.onChangeDataSource=async(Le,ke)=>{this._panelManager.changePanelDataSource(Le,ke)},this.onQueryOptionsChange=Le=>{this._panelManager.changeQueryOptions(Le)},this.onQueriesChange=Le=>{this._panelManager.changeQueries(Le)},this.onRunQueries=()=>{this._panelManager.queryRunner.runQueries()},this.addQueryClick=()=>{const Le=this.getQueries();this.onQueriesChange((0,_i.U7)(Le,this.newQuery()))},this.onAddQuery=Le=>{const ke=this.getQueries(),ut=this._panelManager.state.dsSettings;this.onQueriesChange((0,_i.U7)(ke,Le,{type:ut?.type,uid:ut?.uid}))},this.onAddExpressionClick=()=>{const Le=this.getQueries();this.onQueriesChange((0,_i.U7)(Le,zi.Ex.newQuery()))},this.TabComponent=Le=>Mo({...Le,model:this}),this._panelManager=me}static{this.Component=Yr}getTabLabel(){return"Queries"}getItemsCount(){return this.getQueries().length}buildQueryOptions(){const me=this._panelManager,Le=this._panelManager.state.panel,ke=this._panelManager.queryRunner,ut=m.jh.getTimeRange(Le);let ht={from:void 0,shift:void 0,hide:void 0};ut instanceof Y.v&&(ht={from:ut.state.timeFrom,shift:ut.state.timeShift,hide:ut.state.hideTimeOverride});let It=ke.state.queries;return{cacheTimeout:me.state.dsSettings?.meta.queryOptions?.cacheTimeout?ke.state.cacheTimeout:void 0,queryCachingTTL:me.state.dsSettings?.cachingConfig?.enabled?ke.state.queryCachingTTL:void 0,dataSource:{default:me.state.dsSettings?.isDefault,type:me.state.dsSettings?.type,uid:me.state.dsSettings?.uid},queries:It,maxDataPoints:ke.state.maxDataPoints,minInterval:ke.state.minInterval,timeRange:ht}}getQueries(){return this._panelManager.queryRunner.state.queries}newQuery(){const{dsSettings:me,datasource:Le}=this._panelManager.state;let ke;return me?.meta.mixed?Le?.meta.mixed?ke=(0,T.l)().getInstanceSettings(s.$.defaultDatasource):ke=Le:ke=me,{...Le?.getDefaultQuery?.(r.Jk.PanelEditor),datasource:{uid:ke?.uid,type:ke?.type}}}isExpressionsSupported(me){return(me.meta.alerting||me.meta.mixed)===!0}renderExtraActions(){return wo.m.getAllExtraRenderAction().map((me,Le)=>me({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:Le})).filter(Boolean)}get queryRunner(){return this._panelManager.queryRunner}get panelManager(){return this._panelManager}}function Yr({model:Se}){const{datasource:me,dsSettings:Le}=Se.panelManager.useState(),{data:ke,queries:ut}=Se.panelManager.queryRunner.useState();if(!me||!Le||!ke)return null;const ht=!(0,Ql.kN)(Le.name);return f.createElement(f.Fragment,null,f.createElement(ki.K,{data:ke,dsSettings:Le,dataSource:me,options:Se.buildQueryOptions(),onDataSourceChange:Se.onChangeDataSource,onOptionsChange:Se.onQueryOptionsChange,onOpenQueryInspector:Se.onOpenInspector}),f.createElement(il.L,{data:ke,queries:ut,dsSettings:Le,onAddQuery:Se.onAddQuery,onQueriesChange:Se.onQueriesChange,onRunQueries:Se.onRunQueries}),f.createElement(xa.Gy,{spacing:"md",align:"flex-start"},ht&&f.createElement(lt.$n,{icon:"plus",onClick:Se.addQueryClick,variant:"secondary","data-testid":Ee.Tp.components.QueryTab.addQuery},"Add query"),s.$.expressionsEnabled&&Se.isExpressionsSupported(Le)&&f.createElement(lt.$n,{icon:"plus",onClick:Se.onAddExpressionClick,variant:"secondary","data-testid":Ee.Tp.components.QueryTab.addExpression},f.createElement("span",null,"Expression\xA0")),Se.renderExtraActions()))}function Mo(Se){const{model:me}=Se,Le=me.queryRunner.useState();return f.createElement(Kt.o,{key:Se.key,label:me.getTabLabel(),icon:"database",counter:Le.queries.length,active:Se.active,onChangeTab:Se.onChangeTab})}var rr=e(55244),ji=e(57650),Mi=e(79280),ti=e(97497),ui=e(29158),ll=e(21427),Yl=e(66879);function Sl(Se){const{isOpen:me,series:Le,onClose:ke,onTransformationAdd:ut}=Se,[ht,It]=(0,f.useState)({search:"",showIllustrations:!0}),Ht=Rn=>It({...ht,search:Rn.currentTarget.value}),an=Rn=>It({...ht,showIllustrations:Rn}),Xt=Rn=>It({...ht,selectedFilter:Rn}),On=(0,f.useMemo)(()=>ti.h.list().sort((Rn,ua)=>Rn.name>ua.name?1:ua.name>Rn.name?-1:0),[]),ia=On.filter(Rn=>ht.selectedFilter&&ht.selectedFilter!==Yl.e&&!Rn.categories?.has(ht.selectedFilter)?!1:Rn.name.toLocaleLowerCase().includes(ht.search.toLocaleLowerCase())),qn=f.createElement(f.Fragment,null,ia.length," / ",On.length," \xA0\xA0",f.createElement(ui.K,{name:"times",onClick:()=>{It({...ht,search:""})},tooltip:"Clear search"}));if(me)return f.createElement(ll.R,{data:Le,onTransformationAdd:ut,xforms:ia,search:ht.search,noTransforms:!1,suffix:ht.search!==""?qn:f.createElement(f.Fragment,null),selectedFilter:ht.selectedFilter,onSearchChange:Ht,onSearchKeyDown:()=>{},showIllustrations:ht.showIllustrations,onShowIllustrationsChange:an,onSelectedFilterChange:Xt,onClose:ke})}class Ml extends m.Bs{constructor(me){super({}),this.tabId=jo.Transformations,this.icon="process",this.TabComponent=Le=>Qe({...Le,model:this}),this._panelManager=me}static{this.Component=xl}getTabLabel(){return"Transformations"}getQueryRunner(){return this._panelManager.queryRunner}getDataTransformer(){return this._panelManager.dataTransformer}onChangeTransformations(me){this._panelManager.changeTransformations(me)}get panelManager(){return this._panelManager}}function xl({model:Se}){const me=(0,M.of)(fi),Le=Se.getQueryRunner().useState(),{data:ke,transformations:ut}=Se.getDataTransformer().useState(),ht=ut,[It,Ht]=(0,f.useState)(!1),[an,Xt]=(0,f.useState)(!1),On=()=>Ht(!0),ia=()=>Ht(!1);if(!ke||!Le.data)return;const qn=f.createElement(Sl,{onClose:ia,onTransformationAdd:Rn=>{Rn.value!==void 0&&(Se.onChangeTransformations([...ht,{id:Rn.value,options:{}}]),ia())},isOpen:It,series:ke.series});return ht.length<1?f.createElement(f.Fragment,null,f.createElement(Mi.p,{onShowPicker:On}),qn):f.createElement(f.Fragment,null,f.createElement(mi,{data:Le.data,transformations:ht,model:Se}),f.createElement(co.e,null,f.createElement(lt.$n,{icon:"plus",variant:"secondary",onClick:On,"data-testid":Ee.Tp.components.Transforms.addTransformationButton},"Add another transformation"),f.createElement(lt.$n,{"data-testid":Ee.Tp.components.Transforms.removeAllTransformationsButton,className:me.removeAll,icon:"times",variant:"secondary",onClick:()=>Xt(!0)},"Delete all transformations")),f.createElement(Hr.u,{isOpen:an,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>{Se.onChangeTransformations([]),Xt(!1)},onDismiss:()=>Xt(!1)}),qn)}function mi({transformations:Se,model:me,data:Le}){const ke=Se.map((ht,It)=>({id:`${It} - ${ht.id}`,transformation:ht})),ut=ht=>{if(!ht||!ht.destination)return;const It=ht.source.index,Ht=ht.destination.index;if(It===Ht)return;const an=Array.from(ke),[Xt]=an.splice(It,1);an.splice(Ht,0,Xt),me.onChangeTransformations(an.map(On=>On.transformation))};return f.createElement(rr.JY,{onDragEnd:ut},f.createElement(rr.gL,{droppableId:"transformations-list",direction:"vertical"},ht=>f.createElement("div",{ref:ht.innerRef,...ht.droppableProps},f.createElement(ji.A,{onChange:(It,Ht)=>{const an=Se.slice();an[It]=Ht,me.onChangeTransformations(an)},onRemove:It=>{const Ht=Se.slice();Ht.splice(It,1),me.onChangeTransformations(Ht)},configs:ke,data:Le}),ht.placeholder)))}const fi=Se=>({removeAll:(0,y.css)({marginLeft:Se.spacing(2)})});function Qe(Se){const{model:me}=Se,Le=me.getDataTransformer().useState();return f.createElement(Kt.o,{key:Se.key,label:me.getTabLabel(),icon:"process",counter:Le.transformations.length,active:Se.active,onChangeTab:Se.onChangeTab})}class qe extends m.Bs{constructor(me){super({tab:jo.Queries,tabs:[]}),this._urlSync=new m.So(this,{keys:["tab"]}),this._initialTabsBuilt=!1,this.onChangeTab=Le=>{this.setState({tab:Le.tabId})},this.panelManager=me,this.addActivationHandler(()=>this.onActivate())}static{this.Component=et}getUrlState(){return{tab:this.state.tab}}updateFromUrl(me){me.tab&&typeof me.tab=="string"&&this.setState({tab:me.tab})}onActivate(){const me=this.panelManager.state.panel;return this.setupPanelSubscription(me),this.buildTabs(),this._subs.add(this.panelManager.subscribeToState((Le,ke)=>{Le.panel!==ke.panel&&(this.buildTabs(),this.setupPanelSubscription(Le.panel))})),()=>{this.panelSubscription&&(this.panelSubscription.unsubscribe(),this.panelSubscription=void 0)}}setupPanelSubscription(me){this.panelSubscription&&(this._initialTabsBuilt=!1,this.panelSubscription.unsubscribe()),this.panelSubscription=me.subscribeToState(()=>{me.getPlugin()&&!this._initialTabsBuilt&&(this.buildTabs(),this._initialTabsBuilt=!0)})}buildTabs(){const Le=this.panelManager.state.panel,ke=this.panelManager.queryRunner,ut=[];if(Le){const ht=Le.getPlugin();if(!ht)return;if(ht.meta.skipDataQuery){this.setState({tabs:ut});return}else ke&&ut.push(new Hi(this.panelManager)),ut.push(new Ml(this.panelManager)),(0,sl.e)(ht)&&ut.push(new Vi(this.panelManager))}this.setState({tabs:ut})}}function et({model:Se}){const{tab:me,tabs:Le}=Se.useState(),ke=(0,M.of)(ct);if(!Le)return;const ut=Le.find(ht=>ht.tabId===me);return f.createElement("div",{className:ke.dataPane},f.createElement(Tt.U,{hideBorder:!0,className:ke.tabsBar},Le.map((ht,It)=>f.createElement(ht.TabComponent,{key:`${ht.getTabLabel()}-${It}`,active:ht.tabId===me,onChangeTab:()=>Se.onChangeTab(ht)}))),f.createElement(dr.E,{className:ke.scroll},f.createElement(al.J,{className:ke.tabContent},f.createElement(xa.mc,null,ut&&f.createElement(ut.Component,{model:ut})))))}function ct(Se){return{dataPane:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,height:"100%"}),tabContent:(0,y.css)({padding:Se.spacing(2),border:`1px solid ${Se.colors.border.weak}`,borderLeft:"none",borderBottom:"none",borderTopRightRadius:Se.shape.radius.default,flexGrow:1}),tabsBar:(0,y.css)({flexShrink:0,paddingLeft:Se.spacing(2)}),scroll:(0,y.css)({background:Se.colors.background.primary})}}var Ot=e(54174),Ft=e(40996),zt=e(37390),sn=e(43535);const un=({libraryPanel:Se,isUnsavedPrompt:me,onDismiss:Le,onConfirm:ke,onDiscard:ut})=>{const[ht,It]=(0,f.useState)(""),Ht=(0,ne.A)(async()=>{const Rn=await(0,x.xV)(Se.state.uid);return Rn.length>0?Rn.map(ua=>ua.title):[]},[Se.state.uid]),[an,Xt]=(0,f.useState)([]);(0,Ft.A)(()=>Ht.value?Xt(Ht.value.filter(Rn=>Rn.toLowerCase().includes(ht.toLowerCase()))):Xt([]),300,[Ht.value,ht]);const On=(0,M.of)(sn.o),ia=(0,f.useCallback)(()=>{ut()},[ut]),qn=me?"Unsaved library panel changes":"Save library panel";return f.createElement(zt.a,{title:qn,icon:"save",onDismiss:Le,isOpen:!0},f.createElement("div",null,f.createElement("p",{className:On.textInfo},"This update will affect ",f.createElement("strong",null,Se.state._loadedPanel?.meta?.connectedDashboards," ",Se.state._loadedPanel?.meta?.connectedDashboards===1?"dashboard":"dashboards","."),"The following dashboards using the panel will be affected:"),f.createElement(Vt.p,{className:On.dashboardSearch,prefix:f.createElement(Ls.I,{name:"search"}),placeholder:"Search affected dashboards",value:ht,onChange:Rn=>It(Rn.currentTarget.value)}),Ht.loading?f.createElement("p",null,"Loading connected dashboards..."):f.createElement("table",{className:On.myTable},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",null,"Dashboard name"))),f.createElement("tbody",null,an.map((Rn,ua)=>f.createElement("tr",{key:`dashrow-${ua}`},f.createElement("td",null,Rn))))),f.createElement(zt.a.ButtonRow,null,f.createElement(lt.$n,{variant:"secondary",onClick:Le,fill:"outline"},"Cancel"),me&&f.createElement(lt.$n,{variant:"destructive",onClick:ia},"Discard"),f.createElement(lt.$n,{onClick:()=>{ke()}},"Update all"))))};var yn=e(21633);function $n(Se){const{paneOptions:me}=Se,[Le,ke]=f.useState({collapsed:!1}),ut=(0,f.useCallback)((ia,qn)=>{if(ia<=0&&qn<=0)return;const Rn=qn/ia*(1-ia);Le.collapsed&&Rn>me.collapseBelowPixels&&ke({collapsed:!1}),!Le.collapsed&&Rn<me.collapseBelowPixels&&ke({collapsed:!0})},[Le,me.collapseBelowPixels]),ht=(0,f.useCallback)((ia,qn)=>{if(ia<=0&&qn<=0)return;const Rn=1-ia,ua=Le.snapSize===0,is=qn/ia,$a=(me.snapOpenToPixels??is/2)/is;Le.collapsed?ke(ua?{snapSize:Math.max(Rn,$a),collapsed:!1}:{snapSize:0,collapsed:!0}):ua&&ke({snapSize:Rn,collapsed:!1})},[Le,me.snapOpenToPixels]),It=(0,f.useCallback)(()=>{ke({collapsed:!Le.collapsed})},[Le.collapsed]),{containerProps:Ht,primaryProps:an,secondaryProps:Xt,splitterProps:On}=(0,yn.h)({...Se,onResizing:ut,onSizeChanged:ht});return Xt.style.overflow="hidden",Xt.style.minWidth="unset",Xt.style.minHeight="unset",Le.snapSize?(an.style={...an.style,flexGrow:1-Le.snapSize},Xt.style.flexGrow=Le.snapSize):Le.snapSize===0&&(an.style.flexGrow=1,Xt.style.flexGrow=0,Xt.style.minWidth="unset",Xt.style.minHeight="unset",Xt.style.overflow="unset"),{containerProps:Ht,primaryProps:an,secondaryProps:Xt,splitterProps:On,splitterState:Le,onToggleCollapse:It}}function ea({model:Se}){const me=(0,k.YQ)(Se),{optionsPane:Le}=Se.useState(),ke=(0,M.of)(ra),{containerProps:ut,primaryProps:ht,secondaryProps:It,splitterProps:Ht,splitterState:an,onToggleCollapse:Xt}=$n({direction:"row",dragPosition:"end",initialSize:.75,paneOptions:{collapseBelowPixels:250,snapOpenToPixels:400}});return f.createElement(f.Fragment,null,f.createElement(ur,{dashboard:me}),f.createElement("div",{...ut},f.createElement("div",{...ht,className:(0,y.cx)(ht.className,ke.body)},f.createElement(Xn,{model:Se})),f.createElement("div",{...Ht}),f.createElement("div",{...It,className:(0,y.cx)(It.className,ke.optionsPane)},an.collapsed&&f.createElement("div",{className:ke.expandOptionsWrapper},f.createElement(_s.I,{tooltip:"Open options pane",icon:"arrow-to-right",onClick:Xt,variant:"canvas",className:ke.rotate180,"aria-label":"Open options pane"})),!an.collapsed&&f.createElement(Le.Component,{model:Le}))))}function Xn({model:Se}){const me=(0,k.YQ)(Se),{vizManager:Le,dataPane:ke,showLibraryPanelSaveModal:ut,showLibraryPanelUnlinkModal:ht}=Se.useState(),{sourcePanel:It}=Le.useState(),Ht=(0,k.Yr)(It.resolve()),{controls:an,scopes:Xt}=me.useState(),On=(0,M.of)(ra),{containerProps:ia,primaryProps:qn,secondaryProps:Rn,splitterProps:ua,splitterState:is,onToggleCollapse:Ea}=$n({direction:"column",dragPosition:"start",initialSize:.5,paneOptions:{collapseBelowPixels:150}});return ia.className=(0,y.cx)(ia.className,On.container),ke||(qn.style.flexGrow=1),f.createElement("div",{className:(0,y.cx)(On.pageContainer,an&&!Xt&&On.pageContainerWithControls,Xt&&On.pageContainerWithScopes)},Xt&&f.createElement(Xt.Component,{model:Xt}),an&&f.createElement("div",{className:(0,y.cx)(On.controlsWrapper,Xt&&On.controlsWrapperWithScopes)},f.createElement(an.Component,{model:an})),f.createElement("div",{...ia},f.createElement("div",{...qn},f.createElement(Le.Component,{model:Le})),ut&&Ht&&f.createElement(un,{libraryPanel:Ht,onDismiss:Se.onDismissLibraryPanelSaveModal,onConfirm:Se.onConfirmSaveLibraryPanel,onDiscard:Se.onDiscard}),ht&&Ht&&f.createElement(Ot.l,{onDismiss:Se.onDismissUnlinkLibraryPanelModal,onConfirm:Se.onConfirmUnlinkLibraryPanel,isOpen:!0}),ke&&f.createElement(f.Fragment,null,f.createElement("div",{...ua}),f.createElement("div",{...Rn},is.collapsed&&f.createElement("div",{className:On.expandDataPane},f.createElement(lt.$n,{tooltip:"Open query pane",icon:"arrow-to-right",onClick:Ea,variant:"secondary",size:"sm",className:On.openDataPaneButton,"aria-label":"Open query pane"})),!is.collapsed&&f.createElement(ke.Component,{model:ke})))))}function ra(Se){return{pageContainer:(0,y.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%"}),pageContainerWithControls:(0,y.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopes:(0,y.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${Se.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),container:(0,y.css)({gridArea:"panels",height:"100%"}),canvasContent:(0,y.css)({label:"canvas-content",display:"flex",flexDirection:"column",flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,y.css)({label:"body",flexGrow:1,display:"flex",flexDirection:"column",minHeight:0}),optionsPane:(0,y.css)({flexDirection:"column",borderLeft:`1px solid ${Se.colors.border.weak}`,background:Se.colors.background.primary}),expandOptionsWrapper:(0,y.css)({display:"flex",flexDirection:"column",padding:Se.spacing(2,1)}),expandDataPane:(0,y.css)({display:"flex",flexDirection:"row",padding:Se.spacing(1),borderTop:`1px solid ${Se.colors.border.weak}`,borderRight:`1px solid ${Se.colors.border.weak}`,background:Se.colors.background.primary,flexGrow:1,justifyContent:"space-around"}),rotate180:(0,y.css)({rotate:"180deg"}),controlsWrapper:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:Se.spacing(2,0,2,2)}),controlsWrapperWithScopes:(0,y.css)({padding:Se.spacing(2,0)}),openDataPaneButton:(0,y.css)({width:Se.spacing(8),justifyContent:"center",svg:{rotate:"-90deg"}})}}var Ua=e(67647),Ta=e(26443),ja=e(17706),Sa=e(22290),za=e(66211),ka=e(94354),Ia=e(64919),hs=e(20214),Is=e(74410),Ks=e(48192),Es=e(74097),Gs=e(92378),Ss=e(6923);function hr(Se,me,Le){const ke=new Ks.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),ut=ss.b4.getPanelLinks(me),ht=ut?.state.rawLinks??[],It=(0,k.YQ)(me);return ke.addItem(new Es.v({title:"Title",value:me.state.title,popularRank:1,render:function(){return f.createElement(js,{vizManager:Se})},addon:s.$.featureToggles.dashgpt&&f.createElement(Is.h,{onGenerate:Ht=>Se.setPanelTitle(Ht),panel:(0,H.Z6)(me),dashboard:(0,H.Uy)(It)})})).addItem(new Es.v({title:"Description",value:me.state.description,render:function(){return f.createElement(vr,{panel:me})},addon:s.$.featureToggles.dashgpt&&f.createElement(hs.t,{onGenerate:Ht=>me.setState({description:Ht}),panel:(0,H.Z6)(me)})})).addItem(new Es.v({title:"Transparent background",render:function(){return f.createElement(xe.d,{value:me.state.displayMode==="transparent",id:"transparent-background",onChange:()=>{me.setState({displayMode:me.state.displayMode==="transparent"?"default":"transparent"})}})}})).addCategory(new Ks.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:ht?.length}).addItem(new Es.v({title:"Panel links",render:()=>f.createElement(Or,{panelLinks:ut??void 0})}))).addCategory(new Ks.C({title:"Repeat options",id:"Repeat options",isOpenDefault:!1}).addItem(new Es.v({title:"Repeat by variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(){return f.createElement(Gs.U,{id:"repeat-by-variable-select",parent:me,repeat:Le,onChange:an=>{const Xt={repeat:an};an&&!Se.state.repeatDirection&&(Xt.repeatDirection="h"),Se.setState(Xt)}})}})).addItem(new Es.v({title:"Repeat direction",showIf:()=>!!Se.state.repeat,render:function(){const an=[{label:"Horizontal",value:"h"},{label:"Vertical",value:"v"}];return f.createElement(ka.z,{options:an,value:Se.state.repeatDirection??"h",onChange:Xt=>Se.setState({repeatDirection:Xt})})}})).addItem(new Es.v({title:"Max per row",showIf:()=>!!(Se.state.repeat&&Se.state.repeatDirection==="h"),render:function(){const an=[2,3,4,6,8,12].map(Xt=>({label:Xt.toString(),value:Xt}));return f.createElement(pa.l6,{options:an,value:Se.state.maxPerRow,onChange:Xt=>Se.setState({maxPerRow:Xt.value})})}})))}function Or({panelLinks:Se}){const{rawLinks:me}=Se?Se.useState():{rawLinks:[]};return f.createElement(Ia.e,{links:me,onChange:Le=>Se?.setState({rawLinks:Le}),getSuggestions:Ss.Fq,data:[]})}function js({vizManager:Se}){const{title:me}=Se.state.panel.useState();return f.createElement(Vt.p,{"data-testid":"panel-edit-panel-title-input",value:me,onChange:Le=>Se.setPanelTitle(Le.currentTarget.value)})}function vr({panel:Se}){const{description:me}=Se.useState();return f.createElement(qt.f,{id:"description-text-area",value:me,onChange:Le=>Se.setState({description:Le.currentTarget.value})})}const ro=f.memo(({vizManager:Se,searchQuery:me,listMode:Le,data:ke})=>{const{panel:ut,sourcePanel:ht,repeat:It}=Se.useState(),Ht=ht.resolve().parent,{options:an,fieldConfig:Xt,_pluginInstanceState:On}=ut.useState(),ia=(0,f.useMemo)(()=>hr(Se,ut,It),[Se,ut,It]),qn=(0,f.useMemo)(()=>{const $a=ut.getPlugin();if($a)return(0,za.Z4)({panel:ut,data:ke,plugin:$a,eventBus:ut.getPanelContext().eventBus,instanceState:On})},[ut,an,Xt,On]),Rn=(0,f.useMemo)(()=>{if(Ht instanceof z.F)return(0,za.tN)(Ht)},[Ht]),ua=(0,f.useMemo)(()=>(0,Sa.v)(Xt,ut.getPlugin()?.fieldConfigRegistry,ke?.series??[],me,$a=>{ut.setState({fieldConfig:$a})}),[me,ut,Xt]),is=me.length>0,Ea=[];if(is)Ea.push((0,Ta.Po)([ia,...Rn?[Rn]:[],...qn??[]],ua,me));else switch(Le){case Ta.gs.All:Rn&&Ea.push(Rn.render()),Ea.push(ia.render());for(const $a of qn??[])Ea.push($a.render());for(const $a of ua)Ea.push($a.render());break;case Ta.gs.Overrides:for(const $a of ua)Ea.push($a.render());default:break}return Ea});ro.displayName="PanelOptions";var br=e(78685),fr=e(32696),cr=e(56707),oa=e(86292);function La({vizManager:Se,data:me,onChange:Le}){const{panel:ke}=Se.useState(),ut=(0,M.of)(es),[ht,It]=(0,f.useState)(""),Ht=!1,an=Ht?l.MM:l.wV,Xt=Ht?fr.__.Widgets:fr.__.Visualizations,On=(0,f.useMemo)(()=>new ys(ke),[ke]),ia=(0,f.useMemo)(()=>new Set([fr.__.Widgets,fr.__.Visualizations,fr.__.Suggestions]),[]),[qn,Rn]=(0,br.A)(an,Xt);(0,f.useEffect)(()=>{qn&&!ia.has(qn)&&Rn(Xt)},[Xt,qn,Rn,ia]);const ua=[{label:"Visualizations",value:fr.__.Visualizations},{label:"Suggestions",value:fr.__.Suggestions}],is=Ea=>{Se.changePluginType(Ea.pluginId),Le()};return f.createElement("div",{className:ut.wrapper},f.createElement(Ua.Z,{className:ut.filter,value:ht,onChange:It,autoFocus:!0,placeholder:"Search for..."}),f.createElement(Me.D,{className:ut.customFieldMargin},f.createElement(ka.z,{options:ua,value:qn,onChange:Rn,fullWidth:!0})),f.createElement(dr.E,null,qn===fr.__.Visualizations&&f.createElement(oa.G,{pluginId:ke.state.pluginId,searchQuery:ht,onChange:is}),qn===fr.__.Suggestions&&f.createElement(cr.a,{onChange:is,searchQuery:ht,panel:On,data:me})))}const es=Se=>({wrapper:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:1,padding:Se.spacing(2,1),height:"100%",gap:Se.spacing(2),border:`1px solid ${Se.colors.border.weak}`,borderRight:"none",borderBottom:"none",borderTopLeftRadius:Se.shape.radius.default}),customFieldMargin:(0,y.css)({marginBottom:Se.spacing(1)}),filter:(0,y.css)({minHeight:Se.spacing(4)})});class Ds extends m.Bs{constructor(me){super({searchQuery:"",listMode:Ta.gs.All,...me}),this.onToggleVizPicker=()=>{this.setState({isVizPickerOpen:!this.state.isVizPickerOpen})},this.onSetSearchQuery=Le=>{this.setState({searchQuery:Le})},this.onSetListMode=Le=>{this.setState({listMode:Le})}}static{this.Component=({model:me})=>{const{isVizPickerOpen:Le,searchQuery:ke,listMode:ut}=me.useState(),ht=m.jh.getAncestor(me,Os).state.vizManager,{pluginId:It}=ht.state.panel.useState(),{data:Ht}=m.jh.getData(ht.state.panel).useState(),an=(0,M.of)($s);return f.createElement(f.Fragment,null,!Le&&f.createElement(f.Fragment,null,f.createElement("div",{className:an.top},f.createElement(or,{pluginId:It,onOpen:me.onToggleVizPicker}),f.createElement(Ua.Z,{className:an.searchOptions,value:ke,placeholder:"Search options",onChange:me.onSetSearchQuery})),f.createElement("div",{className:an.listOfOptions},f.createElement(ro,{vizManager:ht,searchQuery:ke,listMode:ut,data:Ht}))),Le&&f.createElement(La,{vizManager:ht,onChange:me.onToggleVizPicker,data:Ht}))}}}function $s(Se){return{top:(0,y.css)({display:"flex",flexDirection:"column",padding:Se.spacing(2,1),gap:Se.spacing(2)}),listOfOptions:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:"1",overflow:"auto"}),searchOptions:(0,y.css)({minHeight:Se.spacing(4)}),searchWrapper:(0,y.css)({padding:Se.spacing(2,2,2,0)}),vizField:(0,y.css)({marginBottom:Se.spacing(1)}),rotateIcon:(0,y.css)({rotate:"180deg"})}}function or({pluginId:Se,onOpen:me}){const Le=(0,M.of)(er),ke=(0,f.useMemo)(()=>(0,ja.A4)().filter(ut=>ut.id===Se)[0],[Se]);return f.createElement(Ct.B,{gap:1},f.createElement(_s.I,{className:Le.vizButton,tooltip:"Click to change visualization",imgSrc:ke.info.logos.small,onClick:me,"data-testid":Ee.Tp.components.PanelEditor.toggleVizPicker,"aria-label":"Change Visualization",variant:"canvas",isOpen:!1,fullWidth:!0},ke.name))}function er(Se){return{vizButton:(0,y.css)({textAlign:"left"})}}class Os extends m.Bs{constructor(me){super(me),this._initialRepeatOptions={},this._discardChanges=!1,this.onDiscard=()=>{this._discardChanges=!0,o.Ny.partial({editPanel:null})},this.onSaveLibraryPanel=()=>{this.setState({showLibraryPanelSaveModal:!0})},this.onConfirmSaveLibraryPanel=()=>{this.state.vizManager.commitChanges(),o.Ny.partial({editPanel:null})},this.onDismissLibraryPanelSaveModal=()=>{this.setState({showLibraryPanelSaveModal:!1})},this.onUnlinkLibraryPanel=()=>{this.setState({showLibraryPanelUnlinkModal:!0})},this.onDismissUnlinkLibraryPanelModal=()=>{this.setState({showLibraryPanelUnlinkModal:!1})},this.onConfirmUnlinkLibraryPanel=()=>{this.state.vizManager.unlinkLibraryPanel(),this.setState({showLibraryPanelUnlinkModal:!1})};const{repeat:Le,repeatDirection:ke,maxPerRow:ut}=me.vizManager.state;this._initialRepeatOptions={repeat:Le,repeatDirection:ke,maxPerRow:ut},this.addActivationHandler(this._activationHandler.bind(this))}static{this.Component=ea}_activationHandler(){const me=this.state.vizManager,Le=me.state.panel;return this._subs.add(me.subscribeToState((ke,ut)=>{ke.panel.state.pluginId!==ut.panel.state.pluginId&&this._initDataPane(ke.panel.state.pluginId)})),this._initDataPane(Le.state.pluginId),()=>{this._discardChanges||this.commitChanges()}}_initDataPane(me){const Le=s.$.panels[me].skipDataQuery;Le&&this.state.dataPane&&(o.Ny.partial({tab:null},!0),this.setState({dataPane:void 0})),!Le&&!this.state.dataPane&&this.setState({dataPane:new qe(this.state.vizManager)})}getUrlKey(){return this.state.panelId.toString()}getPageNav(me,Le){return{text:"Edit panel",parentItem:(0,k.YQ)(this).getPageNav(me,Le)}}commitChanges(){const me=(0,k.YQ)(this);me.state.isEditing||me.onEnterEditMode();const ut=this.state.vizManager.state.sourcePanel.resolve().parent,ht=ut instanceof z.F,It=ht?ut.parent:ut;ht||(It instanceof F.U?this.handleRepeatOptionChanges(It):console.error("Unsupported scene object type"))}handleRepeatOptionChanges(me){let Le=me.state.width??1,ke=me.state.height;const ut=this.state.vizManager,ht=this._initialRepeatOptions.repeatDirection==="h"&&ut.state.repeatDirection==="v",It=this._initialRepeatOptions.repeatDirection==="v"&&ut.state.repeatDirection==="h";ht?Le=Math.floor(Le/(me.state.maxPerRow??1)):It&&(Le=24),me.setState({body:ut.state.panel.clone(),repeatDirection:ut.state.repeatDirection,variableName:ut.state.repeat,maxPerRow:ut.state.maxPerRow,width:Le,height:ke})}}function ho(Se){return new Os({panelId:(0,k.Cs)(Se),optionsPane:new Ds({}),vizManager:ie.createFor(Se)})}var vo=e(22391);class gi{constructor(me){this._scene=me}getKeys(){return["editIndex"]}getUrlState(){const me=this._scene.state;return{editIndex:me.editIndex!==void 0?String(me.editIndex):void 0}}updateFromUrl(me){let Le={};typeof me.editIndex=="string"?Le={editIndex:Number(me.editIndex)}:Le={editIndex:void 0},Object.keys(Le).length>0&&this._scene.setState(Le)}}var xo=e(84167),Vs=e(77268),Oo=e(82241),Nr=e(46502);const Kr="New annotation",pi=({annotation:Se,editIndex:me,panels:Le,onUpdate:ke,onBackToList:ut,onDelete:ht})=>{const It=(0,M.of)($c),Ht=(0,f.useMemo)(()=>Se.filter?Se.filter.exclude?2:1:0,[Se.filter]),{value:an}=(0,ne.A)(()=>(0,T.l)().get(Se.datasource),[Se.datasource]),Xt=(0,T.l)().getInstanceSettings(Se.datasource),On=ts=>{ke({...Se,name:ts.currentTarget.value},me)},ia=ts=>{const ns=(0,vo.p$)(ts);Se.datasource?.type!==ns.type?ke({datasource:ns,builtIn:Se.builtIn,enable:Se.enable,iconColor:Se.iconColor,name:Se.name,hide:Se.hide,filter:Se.filter,mappings:Se.mappings,type:Se.type},me):ke({...Se,datasource:ns},me)},qn=ts=>{const ns=ts.currentTarget;ke({...Se,[ns.name]:ns.type==="checkbox"?ns.checked:ns.value},me)},Rn=ts=>{ke({...Se,iconColor:ts},me)},ua=ts=>{let ns=ts.value===0?void 0:{exclude:ts.value===2,ids:Se.filter?.ids??[]};ke({...Se,filter:ns},me)},is=ts=>{if(!Array.isArray(ts))return;const ns={exclude:Ht===2,ids:[]};ts.forEach(Eo=>Eo.value&&ns.ids.push(Eo.value)),ke({...Se,filter:ns},me)},Ea=()=>{ht(me),ut()},$a=Se.name===Kr,Gn=(ts,ns)=>ts.label&&ns.label?ts.label.toLowerCase().localeCompare(ns.label.toLowerCase()):-1,Oa=(0,f.useMemo)(()=>Le.filter(ts=>s.$.panels[ts.state.pluginId]).map(ts=>({value:(0,k.Cs)(ts),label:ts.state.title??`Panel ${(0,k.Cs)(ts)}`,description:ts.state.description,imgUrl:s.$.panels[ts.state.pluginId].info.logos.small})).sort(Gn)??[],[Le]);return f.createElement("div",null,f.createElement(xo.n,{className:It.settingsForm},f.createElement(Me.D,{label:"Name"},f.createElement(Vt.p,{"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:$a,value:Se.name,onChange:On})),f.createElement(Me.D,{label:"Data source",htmlFor:"data-source-picker"},f.createElement(be.s,{annotations:!0,variables:!0,current:Se.datasource,onChange:ia})),f.createElement(Me.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},f.createElement(ba.S,{name:"enable",id:"enable",value:Se.enable,onChange:qn,"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.enable})),f.createElement(Me.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},f.createElement(ba.S,{name:"hide",id:"hide",value:Se.hide,onChange:qn,"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.hide})),f.createElement(Me.D,{label:"Color",description:"Color to use for the annotation event markers"},f.createElement(xa.Gy,null,f.createElement(Vs.a,{value:Se?.iconColor,onChange:Rn}))),f.createElement(Me.D,{label:"Show in","data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},f.createElement(f.Fragment,null,f.createElement(pa.l6,{options:Xl,value:Ht,onChange:ua,"data-testid":Ee.Tp.components.Annotations.annotationsTypeInput}),Ht!==0&&f.createElement(pa.KF,{options:Oa,value:Oa.filter(ts=>Se.filter?.ids.includes(ts.value)),onChange:is,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:It.select,"data-testid":Ee.Tp.components.Annotations.annotationsChoosePanelInput})))),f.createElement(xo.n,null,f.createElement("h3",{className:"page-heading"},"Query"),an?.annotations&&Xt&&f.createElement(Oo.A,{datasource:an,datasourceInstanceSettings:Xt,annotation:Se,onChange:ts=>ke(ts,me)}),an&&!an.annotations&&f.createElement(Nr.F,{datasource:an,annotation:Se,onChange:ts=>ke(ts,me)})),f.createElement(Ct.B,null,!Se.builtIn&&f.createElement(lt.$n,{variant:"destructive",onClick:Ea,"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.delete},"Delete"),f.createElement(lt.$n,{variant:"secondary",onClick:ut,"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.apply},"Back to list")))},$c=Se=>({settingsForm:(0,y.css)({maxWidth:Se.spacing(60),marginBottom:Se.spacing(2)}),select:(0,y.css)({marginTop:"8px"})});var Jl=(Se=>(Se[Se.AllPanels=0]="AllPanels",Se[Se.IncludePanels=1]="IncludePanels",Se[Se.ExcludePanels=2]="ExcludePanels",Se))(Jl||{});const Xl=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var Vc=e(91605),Zl=e(7521),_c=e(46991);const $r="Add annotation query",zc=({annotations:Se,onNew:me,onEdit:Le,onMove:ke,onDelete:ut})=>{const ht=(0,M.of)(kc),It=Se.length===0||Se.length===1&&Se[0].builtIn,Ht=Xt=>Xt.enable===!1?f.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Xt.name):Xt.builtIn?f.createElement("em",{className:"muted"},Xt.name," \xA0 (Built-in)"):f.createElement(f.Fragment,null,Xt.name),an=(0,T.l)();return f.createElement(xa.gW,null,Se.length>0&&f.createElement("div",{className:ht.table},f.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",null,"Query name"),f.createElement("th",null,"Data source"),f.createElement("th",{colSpan:3}))),f.createElement("tbody",{"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.List.annotations},Se.map((Xt,On)=>f.createElement("tr",{key:`${Xt.name}-${On}`},Xt.builtIn?f.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Le(On)},f.createElement(lt.$n,{size:"sm",fill:"text",variant:"secondary"},Ht(Xt))):f.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Le(On)},f.createElement(lt.$n,{size:"sm",fill:"text",variant:"secondary"},Ht(Xt))),f.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Le(On)},an.getInstanceSettings(Xt.datasource)?.name||Xt.datasource?.uid),f.createElement("td",{role:"gridcell",style:{width:"1%"}},On!==0&&f.createElement(ui.K,{name:"arrow-up",onClick:()=>ke(On,os.UP),tooltip:"Move up"})),f.createElement("td",{role:"gridcell",style:{width:"1%"}},Se.length>1&&On!==Se.length-1?f.createElement(ui.K,{name:"arrow-down",onClick:()=>ke(On,os.DOWN),tooltip:"Move down"}):null),f.createElement("td",{role:"gridcell",style:{width:"1%"}},!Xt.builtIn&&f.createElement(Vc.e,{size:"sm",onConfirm:()=>ut(On),"aria-label":`Delete query with title "${Xt.name}"`}))))))),It&&f.createElement(Zl.A,{onClick:me,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:$r,infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!It&&f.createElement(_c.d,{"data-testid":Ee.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:me},"New query"))},kc=()=>({table:(0,y.css)({width:"100%",overflowX:"auto"})});var os=(Se=>(Se[Se.UP=-1]="UP",Se[Se.DOWN=1]="DOWN",Se))(os||{});class ni extends m.Bs{constructor(){super(...arguments),this._urlSync=new gi(this),this.onNew=()=>{const me={name:Kr,enable:!0,datasource:(0,vo.p$)((0,T.l)().getInstanceSettings(null)),iconColor:"red"},Le=new q.g({query:me,name:me.name,isEnabled:!!me.enable,isHidden:!!me.hide}),ke=ss.b4.getDataLayers(this._dashboard);ke.addAnnotationLayer(Le),this.setState({editIndex:ke.state.annotationLayers.length-1})},this.onEdit=me=>{this.setState({editIndex:me})},this.onBackToList=()=>{this.setState({editIndex:void 0})},this.onMove=(me,Le)=>{const ke=ss.b4.getDataLayers(this._dashboard),ut=[...ke.state.annotationLayers],[ht]=ut.splice(me,1);ut.splice(me+Le,0,ht),ke.setState({annotationLayers:ut})},this.onDelete=me=>{const Le=ss.b4.getDataLayers(this._dashboard),ke=[...Le.state.annotationLayers];ke.splice(me,1),Le.setState({annotationLayers:ke})},this.onUpdate=(me,Le)=>{const ke=this.getDataLayer(Le);ke.setState({name:me.name,isEnabled:!!me.enable,isHidden:!!me.hide,query:me}),ke.runLayer()}}static{this.Component=Dr}getUrlKey(){return"annotations"}get _dashboard(){return(0,k.YQ)(this)}getDataLayer(me){const ke=ss.b4.getDataLayers(this._dashboard).state.annotationLayers[me];if(!(ke instanceof m.tV.g))throw new Error("AnnotationsDataLayer not found at index "+me);return ke}getDashboard(){return this._dashboard}}function Dr({model:Se}){const me=Se.getDashboard(),{annotationLayers:Le}=ss.b4.getDataLayers(me).useState(),{navModel:ke,pageNav:ut}=hi(me,Se.getUrlKey()),{editIndex:ht}=Se.useState(),It=ss.b4.getVizPanels(me),Ht=(0,As.O)(Le);return ht!=null&&ht<Le.length?f.createElement(ql,{annotationLayer:Se.getDataLayer(ht),pageNav:ut,panels:It,editIndex:ht,navModel:ke,dashboard:me,onUpdate:Se.onUpdate,onBackToList:Se.onBackToList,onDelete:Se.onDelete}):f.createElement(ks.Y,{navModel:ke,pageNav:ut,layout:Xs.k.Standard},f.createElement(ur,{dashboard:me}),f.createElement(zc,{annotations:Ht,onNew:Se.onNew,onEdit:Se.onEdit,onDelete:Se.onDelete,onMove:Se.onMove}))}function ql({annotationLayer:Se,pageNav:me,navModel:Le,panels:ke,editIndex:ut,dashboard:ht,onUpdate:It,onBackToList:Ht,onDelete:an}){const Xt=me.children.find(Rn=>Rn.active);Xt.parentItem=me;const{name:On,query:ia}=Se.useState(),qn={text:On,parentItem:Xt};return f.createElement(ks.Y,{navModel:Le,pageNav:qn,layout:Xs.k.Standard},f.createElement(ur,{dashboard:ht}),f.createElement(pi,{annotation:ia,editIndex:ut,panels:ke,onUpdate:It,onBackToList:Ht,onDelete:an}))}var Ir=e(14588),oo=e(65857),Pr=e(6199),ec=e(4588);class Hc extends m.Bs{constructor(){super(...arguments),this._urlSync=new gi(this),this.onNewLink=()=>{this.links=[...this.links,ec.q],this.setState({editIndex:this.links.length-1})},this.onDelete=me=>{this.links=[...this.links.slice(0,me),...this.links.slice(me+1)],this.setState({editIndex:void 0})},this.onDuplicate=me=>{this.links=[...this.links,{...me}]},this.onOrderChange=(me,Le)=>{this.links=Ir.moveItemImmutably(this.links,me,me+Le)},this.onEdit=me=>{this.setState({editIndex:me})},this.onUpdateLink=me=>{const Le=this.state.editIndex;Le!==void 0&&(this.links=[...this.links.slice(0,Le),me,...this.links.slice(Le+1)])},this.onGoBack=()=>{this.setState({editIndex:void 0})}}static{this.Component=Ar}getUrlKey(){return"links"}get dashboard(){return(0,k.YQ)(this)}get links(){return this.dashboard.state.links}set links(me){this.dashboard.setState({links:me})}}function Ar({model:Se}){const{editIndex:me}=Se.useState(),Le=(0,k.YQ)(Se),{links:ke}=Le.useState(),{navModel:ut,pageNav:ht}=hi(Le,Se.getUrlKey()),It=me!==void 0?ke[me]:void 0;return It?f.createElement(tc,{pageNav:ht,navModel:ut,link:It,dashboard:Le,onChange:Se.onUpdateLink,onGoBack:Se.onGoBack}):f.createElement(ks.Y,{navModel:ut,pageNav:ht,layout:Xs.k.Standard},f.createElement(ur,{dashboard:Le}),f.createElement(Pr.X,{links:ke,onNew:Se.onNewLink,onEdit:Se.onEdit,onDelete:Se.onDelete,onDuplicate:Se.onDuplicate,onOrderChange:Se.onOrderChange}))}function tc({pageNav:Se,link:me,navModel:Le,dashboard:ke,onChange:ut,onGoBack:ht}){const It=Se.children.find(an=>an.active);It.parentItem=Se;const Ht={text:"Edit link",parentItem:It};return f.createElement(ks.Y,{navModel:Le,pageNav:Ht,layout:Xs.k.Standard},f.createElement(ur,{dashboard:ke}),f.createElement(oo.d,{link:me,onUpdate:ut,onGoBack:ht}))}var cs=e(79924),jc=e(57418),Gc=e(75590),Qc=e(81394),Ol=e(27966),Yc=e(77431),Er=e(42941);function gr({dashboard:Se}){const[me,Le]=(0,Er.A)(!1);return f.createElement(f.Fragment,null,f.createElement(lt.$n,{variant:"destructive",onClick:Le,"aria-label":"Dashboard settings page delete dashboard button"},f.createElement(rs.x6,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete dashboard")),me&&f.createElement(Jc,{dashboard:Se,onClose:Le}))}function Jc({dashboard:Se,onClose:me}){const[,Le]=(0,vn.A)(async()=>{me(),await Se.deleteDashboard()},[Se,me]);return Se.state.meta.provisioned?f.createElement(Xc,{dashboard:Se,onClose:me}):f.createElement(Hr.u,{isOpen:!0,body:f.createElement(f.Fragment,null,f.createElement("p",null,"Do you want to delete this dashboard?"),f.createElement("p",null,Se.state.title)),onConfirm:Le,onDismiss:me,title:"Delete",icon:"trash-alt",confirmText:"Delete"})}function Xc({dashboard:Se,onClose:me}){return f.createElement(zt.a,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:me},f.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),f.createElement("p",null,f.createElement("i",null,"See"," ",f.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),f.createElement("br",null),"File path: ",Se.state.meta.provisionedExternalId),f.createElement(zt.a.ButtonRow,null,f.createElement(lt.$n,{variant:"primary",onClick:me},"OK")))}const nc=[{label:"Editable",value:!0},{label:"Read-only",value:!1}],Zc=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];class qc extends m.Bs{constructor(){super(...arguments),this.onTitleChange=me=>{this._dashboard.setState({title:me})},this.onDescriptionChange=me=>{this._dashboard.setState({description:me})},this.onTagsChange=me=>{this._dashboard.setState({tags:me})},this.onFolderChange=async(me,Le)=>{const ke={...this._dashboard.state.meta,folderUid:me||this._dashboard.state.meta.folderUid,folderTitle:Le||this._dashboard.state.meta.folderTitle};ke.folderUid&&await(0,Yc.Q)(ke.folderUid),this._dashboard.setState({meta:ke})},this.onEditableChange=me=>{this._dashboard.setState({editable:me})},this.onTimeZoneChange=me=>{this.getTimeRange().setState({timeZone:me})},this.onWeekStartChange=me=>{this.getTimeRange().setState({weekStart:me})},this.onRefreshIntervalChange=me=>{this.getRefreshPicker()?.setState({intervals:me})},this.onNowDelayChange=me=>{this.getTimeRange()?.setState({UNSAFE_nowDelay:me})},this.onHideTimePickerChange=me=>{this.getDashboardControls()?.setState({hideTimeControls:me})},this.onLiveNowChange=me=>{try{const Le=this.getLiveNowTimer();me?Le.enable():Le.disable()}catch(Le){console.error(Le)}},this.onTooltipChange=me=>{this.getCursorSync()?.setState({sync:me})},this.onDeleteDashboard=()=>{}}get _dashboard(){return(0,k.YQ)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return m.jh.getTimeRange(this._dashboard)}getRefreshPicker(){return this.getDashboardControls().state.refreshPicker}getCursorSync(){return ss.b4.getCursorSync(this._dashboard)}getLiveNowTimer(){const me=m.jh.findObject(this._dashboard,Le=>Le instanceof m.Gg.en);if(me instanceof m.Gg.en)return me;throw new Error("LiveNowTimer could not be found")}getDashboardControls(){return this._dashboard.state.controls}static{this.Component=({model:me})=>{const Le=me.getDashboard(),{navModel:ke,pageNav:ut}=hi(Le,me.getUrlKey()),{title:ht,description:It,tags:Ht,meta:an,editable:Xt}=Le.useState(),{sync:On}=me.getCursorSync()?.useState()||{},{timeZone:ia,weekStart:qn,UNSAFE_nowDelay:Rn}=me.getTimeRange().useState(),{intervals:ua}=me.getRefreshPicker().useState(),{hideTimeControls:is}=me.getDashboardControls().useState(),{enabled:Ea}=me.getLiveNowTimer().useState();return f.createElement(ks.Y,{navModel:ke,pageNav:ut,layout:Xs.k.Standard},f.createElement(ur,{dashboard:Le}),f.createElement("div",{style:{maxWidth:"600px"}},f.createElement(rn.a,{marginBottom:5},f.createElement(Me.D,{label:f.createElement(Ct.B,{justifyContent:"space-between"},f.createElement(en.J,{htmlFor:"title-input"},f.createElement(rs.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")),s.$.featureToggles.dashgpt&&f.createElement(Ol.Z,{onGenerate:$a=>me.onTitleChange($a)}))},f.createElement(Vt.p,{id:"title-input",name:"title",value:ht,onChange:$a=>me.onTitleChange($a.target.value)})),f.createElement(Me.D,{label:f.createElement(Ct.B,{justifyContent:"space-between"},f.createElement(en.J,{htmlFor:"description-input"},(0,rs.t)("dashboard-settings.general.description-label","Description")),s.$.featureToggles.dashgpt&&f.createElement(Qc.V,{onGenerate:$a=>me.onDescriptionChange($a)}))},f.createElement(qt.f,{id:"description-input",name:"description",value:It,onChange:$a=>me.onDescriptionChange($a.target.value)})),f.createElement(Me.D,{label:(0,rs.t)("dashboard-settings.general.tags-label","Tags")},f.createElement(cs.u,{id:"tags-input",tags:Ht,onChange:me.onTagsChange,width:40})),f.createElement(Me.D,{label:(0,rs.t)("dashboard-settings.general.folder-label","Folder")},f.createElement(Jt.d,{value:an.folderUid,onChange:me.onFolderChange,initialTitle:an.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,skipInitialLoad:!0})),f.createElement(Me.D,{label:(0,rs.t)("dashboard-settings.general.editable-label","Editable"),description:(0,rs.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},f.createElement(ka.z,{value:Xt,options:nc,onChange:me.onEditableChange}))),f.createElement(Gc.p,{onTimeZoneChange:me.onTimeZoneChange,onWeekStartChange:me.onWeekStartChange,onRefreshIntervalChange:me.onRefreshIntervalChange,onNowDelayChange:me.onNowDelayChange,onHideTimePickerChange:me.onHideTimePickerChange,onLiveNowChange:me.onLiveNowChange,refreshIntervals:ua,timePickerHidden:is,nowDelay:Rn||"",liveNow:Ea,timezone:ia||"",weekStart:qn||""}),f.createElement(jc.M,{label:(0,rs.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},f.createElement(Me.D,{label:(0,rs.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,rs.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},f.createElement(ka.z,{onChange:me.onTooltipChange,options:Zc,value:On}))),f.createElement(rn.a,{marginTop:3},an.canDelete&&f.createElement(gr,{dashboard:Le}))))}}}class Fo extends m.Bs{constructor(me){super({...me,jsonText:""}),this.onCodeEditorBlur=Le=>{this.setState({jsonText:Le})},this.onSaveSuccess=Le=>{const ke=JSON.parse(this.state.jsonText),ut=this.getDashboard();ke.version=Le.version;const ht={dashboard:ke,meta:ut.state.meta},It=(0,ga.wM)(ht),Ht=m.Go.cloneSceneObjectState(It.state);ut.pauseTrackingChanges(),ut.setInitialSaveModel(ht.dashboard),ut.setState(Ht),this.setState({jsonText:this.getJsonText()})},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getUrlKey(){return"json-model"}getDashboard(){return(0,k.YQ)(this)}getSaveModel(){const me=this.getDashboard();return(0,H.Uy)(me)}getJsonText(){const me=this.getSaveModel();return(0,Ci.p)(me)}static{this.Component=({model:me})=>{const{state:Le,onSaveDashboard:ke}=xn(!1),[ut,ht]=(0,f.useState)(!1),It=me.getDashboard(),{navModel:Ht,pageNav:an}=hi(It,me.getUrlKey()),Xt=It.useState().meta.canSave,{jsonText:On}=me.useState(),ia=async Ea=>{const $a=await ke(It,JSON.parse(me.state.jsonText),{folderUid:It.state.meta.folderUid,overwrite:Ea});ht(!0),$a.status==="success"?(me.onSaveSuccess($a),ht(!1)):ht(!0)},qn=Ea=>f.createElement(lt.$n,{type:"submit",onClick:()=>{ia(Ea)},variant:Ea?"destructive":"primary"},Ea?"Save and overwrite":f.createElement(rs.x6,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")),Rn=f.createElement(lt.$n,{variant:"secondary",onClick:()=>ht(!1),fill:"outline"},"Cancel"),ua=(0,M.of)(wr);function is(Ea){if(Ea&&ut){if(Kn(Ea))return f.createElement(ze.F,{title:"Someone else has updated this dashboard",severity:"error"},f.createElement("p",null,"Would you still like to save this dashboard?"),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{alignItems:"center"},Rn,qn(!0))));if(na(Ea))return f.createElement(on,{saveButton:qn,cancelButton:Rn});if(Ut(Ea))return f.createElement(ze.F,{title:"Plugin dashboard",severity:"error"},f.createElement("p",null,"Your changes will be lost when you update the plugin. Use ",f.createElement("strong",null,"Save As")," to create custom version."),f.createElement(rn.a,{paddingTop:2},f.createElement(Ct.B,{alignItems:"center"},qn(!0))))}return f.createElement(f.Fragment,null,Ea&&ut&&f.createElement(ze.F,{title:"Failed to save dashboard",severity:"error"},f.createElement("p",null,Ea.message)),f.createElement(Ct.B,{alignItems:"center"},qn(!1)))}return f.createElement(ks.Y,{navModel:Ht,pageNav:an,layout:Xs.k.Standard},f.createElement(ur,{dashboard:It}),f.createElement("div",{className:ua.wrapper},f.createElement(rs.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),f.createElement(We.B,{width:"100%",value:On,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:ua.codeEditor,onBlur:me.onCodeEditorBlur}),Xt&&f.createElement(rn.a,{paddingTop:2},is(Le.error))))}}}const wr=Se=>({wrapper:(0,y.css)({display:"flex",height:"100%",flexDirection:"column",gap:Se.spacing(2)}),codeEditor:(0,y.css)({flexGrow:1})});var ed=e(5108);class xi extends m.Bs{static{this.Component=td}get _dashboard(){return(0,k.YQ)(this)}getUrlKey(){return"permissions"}getDashboard(){return this._dashboard}}function td({model:Se}){const me=Se.getDashboard(),{uid:Le}=me.useState(),{navModel:ke,pageNav:ut}=hi(me,Se.getUrlKey()),ht=uo.TP.hasPermission(Mn.AccessControlAction.DashboardsPermissionsWrite);return f.createElement(ks.Y,{navModel:ke,pageNav:ut,layout:Xs.k.Standard},f.createElement(ur,{dashboard:me}),f.createElement(ed.x,{resource:"dashboards",resourceId:Le??"",canSetPermissions:ht}))}var nd=e(75505),Wo=e(71678),ad=e(8964),cl=e(85140),Il=e(41820),Cr=e(85830),Js=e(89458);function ac({onChange:Se,type:me}){const Le=(0,f.useMemo)(()=>ge(),[]),ke=(0,f.useMemo)(()=>Le.find(ut=>ut.value===me)??Le[0],[Le,me]);return f.createElement(Js.v,{name:"Select variable type",value:ke,options:Le,onChange:Se,testId:Ee.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}function Fs({variable:Se,onTypeChange:me,onGoBack:Le,onDelete:ke,onValidateVariableName:ut}){const ht=(0,M.of)(An),[It,Ht]=(0,f.useState)(null),{name:an,type:Xt,label:On,description:ia,hide:qn,key:Rn}=Se.useState(),ua=ye(Xt)?Pe(Xt):void 0,[is,Ea]=(0,vn.A)(async()=>{await(0,nd.s)(Se.validateAndUpdate())},[Se]),$a=Us=>{Us.value&&me(Us.value)},Gn=(0,f.useCallback)(Us=>{const[,ir]=ut(Us.currentTarget.value,Rn);It!==ir&&Ht(ir)},[Rn,It,ut]),Oa=Us=>{It||Se.setState({name:Us.currentTarget.value})},ts=Us=>Se.setState({label:Us.currentTarget.value}),ns=Us=>Se.setState({description:Us.currentTarget.value}),Eo=Us=>Se.setState({hide:Us}),Go=Xe(Se),Ji=Us=>()=>{(0,pn.rR)("Delete variable"),ke(an),Us()};return f.createElement("form",{"aria-label":"Variable editor Form"},f.createElement(ac,{onChange:$a,type:Xt}),f.createElement(pe.Y,null,"General"),f.createElement(Ve._,{name:"Name",description:"The name of the template variable. (Max. 50 characters)",placeholder:"Variable name",defaultValue:an??"",onChange:Gn,onBlur:Oa,testId:Ee.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Cr.M.MaxSize,required:!0,invalid:!!It,error:It}),f.createElement(Ve._,{name:"Label",description:"Optional display name",placeholder:"Label name",defaultValue:On??"",onBlur:ts,testId:Ee.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),f.createElement(cl.Z,{name:"Description",defaultValue:ia??"",placeholder:"Descriptive text",onBlur:ns,width:52}),f.createElement(ad.D,{onChange:Eo,hide:qn||G.rw.hide,type:Xt}),ua&&f.createElement(ua,{variable:Se,onRunQuery:Ea}),Go&&f.createElement(Il.j,{options:Se.getOptionsForSelect()}),f.createElement("div",{className:ht.buttonContainer},f.createElement(Ct.B,{gap:2},f.createElement(Wo.$s,null,({showModal:Us,hideModal:ir})=>f.createElement(lt.$n,{variant:"destructive",fill:"outline",onClick:()=>{Us(Hr.u,{title:"Delete variable",body:`Are you sure you want to delete: ${an}?`,confirmText:"Delete variable",onConfirm:Ji(ir),onDismiss:ir,isOpen:!0})}},"Delete")),f.createElement(lt.$n,{variant:"secondary","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton,onClick:Le},"Back to list"),Go&&f.createElement(lt.$n,{disabled:is.loading,variant:"secondary","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,onClick:Ea},is.loading?f.createElement(rl._,{className:ht.loadingPlaceHolder,text:"Running query..."}):"Run query"))))}const An=Se=>({buttonContainer:(0,y.css)({marginTop:Se.spacing(2)}),loadingPlaceHolder:(0,y.css)({marginBottom:0})});function sc({index:Se,variable:me,onEdit:Le,onDuplicate:ke,onDelete:ut}){const ht=(0,M.$j)(),It=(0,M.of)(sd),Ht=tt(me),an=me.state,Xt=an.name,[On,ia]=(0,f.useState)(!1),qn=ua=>()=>{ia(ua)},Rn=()=>{(0,pn.rR)("Delete variable"),ut(Xt)};return f.createElement(rr.sx,{draggableId:JSON.stringify(Xt),index:Se},(ua,is)=>f.createElement("tr",{ref:ua.innerRef,...ua.draggableProps,style:{userSelect:is.isDragging?"none":"auto",background:is.isDragging?ht.colors.background.secondary:void 0,...ua.draggableProps.style}},f.createElement("td",{role:"gridcell",className:It.column},f.createElement(lt.$n,{size:"xs",fill:"text",onClick:Ea=>{Ea.preventDefault(),Le(Xt)},className:It.nameLink,"data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(an.name)},an.name)),f.createElement("td",{role:"gridcell",className:It.definitionColumn,onClick:Ea=>{Ea.preventDefault(),Le(Xt)},"data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(an.name)},Ht),f.createElement("td",{role:"gridcell",className:It.column},f.createElement("div",{className:It.icons},f.createElement(ui.K,{onClick:Ea=>{Ea.preventDefault(),(0,pn.rR)("Duplicate variable"),ke(Xt)},name:"copy",tooltip:"Duplicate variable","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(an.name)}),f.createElement(ui.K,{onClick:Ea=>{Ea.preventDefault(),ia(!0)},name:"trash-alt",tooltip:"Remove variable","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(an.name)}),f.createElement(Hr.u,{isOpen:On,title:"Delete variable",body:`Are you sure you want to delete: ${an.name}?`,confirmText:"Delete variable",onConfirm:Rn,onDismiss:qn(!1)}),f.createElement("div",{...ua.dragHandleProps,className:It.dragHandle},f.createElement(Ls.I,{name:"draggabledots",size:"lg"}))))))}function sd(Se){return{dragHandle:(0,y.css)({cursor:"grab",marginLeft:Se.spacing(1)}),column:(0,y.css)({width:"1%"}),nameLink:(0,y.css)({cursor:"pointer",color:Se.colors.primary.text}),definitionColumn:(0,y.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,y.css)({color:Se.v1.palette.greenBase,marginRight:Se.spacing(2)}),iconFailed:(0,y.css)({color:Se.v1.palette.orange,marginRight:Se.spacing(2)}),icons:(0,y.css)({display:"flex",gap:Se.spacing(2),alignItems:"center"})}}function rc({variables:Se,onChangeOrder:me,onDelete:Le,onDuplicate:ke,onAdd:ut,onEdit:ht}){const It=(0,M.of)(dl),Ht=an=>{!an.destination||!an.source||((0,pn.rR)("Variable drag and drop"),me(an.source.index,an.destination.index))};return f.createElement("div",null,f.createElement("div",null,Se.length===0&&f.createElement(rd,{onAdd:ut}),Se.length>0&&f.createElement(Ct.B,{direction:"column",gap:3},f.createElement("div",{className:It.tableContainer},f.createElement("table",{className:"filter-table filter-table--hover","data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",null,"Variable"),f.createElement("th",null,"Definition"),f.createElement("th",{colSpan:5}))),f.createElement(rr.JY,{onDragEnd:Ht},f.createElement(rr.gL,{droppableId:"variables-list",direction:"vertical"},an=>f.createElement("tbody",{ref:an.innerRef,...an.droppableProps},Se.map((Xt,On)=>{const ia=Xt.state;return f.createElement(sc,{index:On,key:`${ia.name}-${On}`,variable:Xt,onDelete:Le,onDuplicate:ke,onEdit:ht})}),an.placeholder))))),f.createElement(Ct.B,null,f.createElement(lt.$n,{"data-testid":Ee.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:ut,icon:"plus"},"New variable")))))}function rd({onAdd:Se}){return f.createElement("div",null,f.createElement(Zl.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:me=>{me.preventDefault(),Se()}}))}const dl=()=>({tableContainer:(0,y.css)({overflow:"scroll",width:"100%"})});class Gi extends m.Bs{constructor(){super(...arguments),this._urlSync=new gi(this),this.getVariableIndex=me=>this.getVariables().findIndex(ke=>ke.state.name===me),this.replaceEditVariable=me=>{const Le=this.state.editIndex??-1,{variables:ke}=this.getVariableSet().state;if(!ke[Le]){console.error("Variable not found");return}const ht=[...ke.slice(0,Le),me,...ke.slice(Le+1)];this.getVariableSet().setState({variables:ht})},this.onDelete=me=>{const Le=this.getVariableIndex(me),{variables:ke}=this.getVariableSet().state;if(Le===-1){console.error("Variable not found");return}const ut=[...ke.slice(0,Le),...ke.slice(Le+1)];this.getVariableSet().setState({variables:ut}),this.setState({editIndex:void 0})},this.onDuplicated=me=>{const Le=this.getVariableIndex(me),ke=this.getVariableSet().state.variables;if(Le===-1){console.error("Variable not found");return}const ut=ke[Le];let ht=0,It=`copy_of_${ut.state.name}`;for(;ke.some(Xt=>Xt.state.name===It);)ht++,It=`copy_of_${ut.state.name}_${ht}`;const Ht=ut.clone(ut.state);Ht.setState({name:It});const an=[...ke.slice(0,Le+1),Ht,...ke.slice(Le+1)];this.getVariableSet().setState({variables:an})},this.onOrderChanged=(me,Le)=>{const ke=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(me<0||me>=ke.length||Le<0||Le>=ke.length){console.error("Invalid index");return}const ut=[...ke],ht=ut.splice(me,1);ut.splice(Le,0,ht[0]),this.getVariableSet().setState({variables:ut})},this.onEdit=me=>{const Le=this.getVariableIndex(me);if(Le===-1){console.error("Variable not found");return}this.setState({editIndex:Le})},this.onAdd=()=>{const me=this.getVariables(),Le=me.length,ke=Be(me);this.getVariableSet().setState({variables:[...this.getVariables(),ke]}),this.setState({editIndex:Le})},this.onTypeChange=me=>{const Le=this.state.editIndex??-1,{variables:ke}=this.getVariableSet().state,ut=ke[Le];if(!ut){console.error("Variable not found");return}const{name:ht,label:It}=ut.state,Ht=Re(me,{name:ht,label:It});this.replaceEditVariable(Ht)},this.onGoBack=()=>{this.setState({editIndex:void 0})},this.onValidateVariableName=(me,Le)=>{let ke=null;ot.test(me)||(ke="Template names cannot begin with '__', that's reserved for Grafana's global variables"),ft.test(me)||(ke="Only word characters are allowed in variable names");const ut=this.getVariableSet().getByName(me)?.state;return ut&&ut.key!==Le&&(ke="Variable with the same name already exists"),ke?[!0,ke]:[!1,null]}}static{this.Component=ul}getUrlKey(){return"variables"}getDashboard(){return(0,k.YQ)(this)}getVariableSet(){return m.jh.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}function ul({model:Se}){const me=Se.getDashboard(),{navModel:Le,pageNav:ke}=hi(me,Se.getUrlKey()),{onDelete:ut,onDuplicated:ht,onOrderChanged:It,onEdit:Ht,onTypeChange:an,onGoBack:Xt,onAdd:On}=Se,{variables:ia}=Se.getVariableSet().useState(),{editIndex:qn}=Se.useState();if(qn!==void 0&&ia[qn]){const Rn=ia[qn];if(Rn)return f.createElement(Oi,{variable:Rn,onTypeChange:an,onGoBack:Xt,pageNav:ke,navModel:Le,dashboard:me,onDelete:ut,onValidateVariableName:Se.onValidateVariableName})}return f.createElement(ks.Y,{navModel:Le,pageNav:ke,layout:Xs.k.Standard},f.createElement(ur,{dashboard:me}),f.createElement(rc,{variables:ia,onDelete:ut,onDuplicate:ht,onChangeOrder:It,onAdd:On,onEdit:Ht}))}function Oi({variable:Se,pageNav:me,navModel:Le,dashboard:ke,onTypeChange:ut,onGoBack:ht,onDelete:It,onValidateVariableName:Ht}){const an=me.children.find(ia=>ia.active);an.parentItem=me;const{name:Xt}=Se.useState(),On={text:Xt,parentItem:an};return f.createElement(ks.Y,{navModel:Le,pageNav:On,layout:Xs.k.Standard},f.createElement(ur,{dashboard:ke}),f.createElement(Fs,{variable:Se,onTypeChange:ut,onGoBack:ht,onDelete:It,onValidateVariableName:Ht,key:Se.state.key}))}const ai=10;class Al extends m.Bs{constructor(me){super({...me,versions:[],isLoading:!0,isAppending:!0,viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}),this._limit=ai,this._start=0,this.fetchVersions=(Le=!1)=>{const ke=this._dashboard.state.uid;ke&&(this.setState({isAppending:Le}),sa.wL.getHistoryList(ke,{limit:this._limit,start:this._start}).then(ut=>{this.setState({isLoading:!1,versions:[...this.state.versions??[],...this.decorateVersions(ut)]}),this._start+=this._limit}).catch(ut=>console.log(ut)).finally(()=>this.setState({isAppending:!1})))},this.getDiff=async()=>{const Le=this.versions.filter(an=>an.checked),[ke,ut]=Le,ht=ke.version===this._dashboard.state.version;if(this.setState({isLoading:!0}),!this._dashboard.state.uid)return;const It=await sa.wL.getDashboardVersion(this._dashboard.state.uid,ut.version),Ht=await sa.wL.getDashboardVersion(this._dashboard.state.uid,ke.version);this.setState({baseInfo:ut,isLoading:!1,isNewLatest:ht,newInfo:ke,viewMode:"compare",diffData:{lhs:It.data,rhs:Ht.data}})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.versions.map(Le=>({...Le,checked:!1})),viewMode:"list"})},this.onCheck=(Le,ke)=>{this.setState({versions:this.versions.map(ut=>ut.id===ke?{...ut,checked:Le.currentTarget.checked}:ut)})},this.addActivationHandler(()=>{this.fetchVersions()})}static{this.Component=od}get _dashboard(){return(0,k.YQ)(this)}get diffData(){return this.state.diffData??{lhs:"",rhs:""}}get versions(){return this.state.versions??[]}get limit(){return this._limit}get start(){return this._start}getUrlKey(){return"versions"}getDashboard(){return this._dashboard}getTimeRange(){return m.jh.getTimeRange(this._dashboard)}decorateVersions(me){const Le=this.getTimeRange().getTimeZone();return me.map(ke=>({...ke,createdDateString:(0,Xa.LE)(ke.created,{timeZone:Le}),ageString:(0,Xa.fq)(ke.created,{timeZone:Le}),checked:!1}))}}function od({model:Se}){const me=Se.getDashboard(),{isLoading:Le,isAppending:ke,viewMode:ut,baseInfo:ht,newInfo:It,isNewLatest:Ht}=Se.useState(),{navModel:an,pageNav:Xt}=hi(me,Se.getUrlKey()),On=Se.versions.filter(Ea=>Ea.checked).length===2,ia=Se.versions.length>1,qn=Se.versions.length>=Se.limit,Rn=Se.versions.find(Ea=>Ea.version===1),ua=f.createElement(f.Fragment,null,f.createElement(sa.me,{onClick:Se.reset,baseVersion:ht?.version,newVersion:It?.version,isNewLatest:Ht}),Le?f.createElement(Rl,{msg:"Fetching changes\u2026"}):f.createElement(sa.Cc,{newInfo:It,baseInfo:ht,isNewLatest:Ht,diffData:Se.diffData,onRestore:me.onRestore})),is=f.createElement(f.Fragment,null,Le?f.createElement(Rl,{msg:"Fetching history list\u2026"}):f.createElement(sa.bS,{versions:Se.versions,onCheck:Se.onCheck,canCompare:On,onRestore:me.onRestore}),ke&&f.createElement(Rl,{msg:"Fetching more entries\u2026"}),ia&&f.createElement(sa.rJ,{hasMore:qn,canCompare:On,getVersions:Se.fetchVersions,getDiff:Se.getDiff,isLastPage:!!Rn}));return f.createElement(ks.Y,{navModel:an,pageNav:Xt,layout:Xs.k.Standard},f.createElement(ur,{dashboard:me}),ut==="compare"?ua:is)}const Rl=({msg:Se})=>f.createElement(xa.Gy,null,f.createElement(jn.y,null),f.createElement("em",null,Se));function hi(Se,me){const Le=(0,kr.zy)(),ke=(0,Mn.useSelector)(Ht=>Ht.navIndex),ut=(0,d.tc)(ke,"dashboards/browse"),ht=Se.getPageNav(Le,ke),It={text:"Settings",url:t.I.getUrlForPartial(Le,{editview:"settings",editIndex:null}),children:[],parentItem:ht};return Se.state.meta.canEdit&&(It.children.push({text:(0,rs.t)("dashboard-settings.general.title","General"),url:t.I.getUrlForPartial(Le,{editview:"settings",editIndex:null}),active:me==="settings"}),It.children.push({text:(0,rs.t)("dashboard-settings.annotations.title","Annotations"),url:t.I.getUrlForPartial(Le,{editview:"annotations",editIndex:null}),active:me==="annotations"}),It.children.push({text:(0,rs.t)("dashboard-settings.variables.title","Variables"),url:t.I.getUrlForPartial(Le,{editview:"variables",editIndex:null}),active:me==="variables"}),It.children.push({text:(0,rs.t)("dashboard-settings.links.title","Links"),url:t.I.getUrlForPartial(Le,{editview:"links",editIndex:null}),active:me==="links"})),Se.state.id&&Se.state.meta.canSave&&It.children.push({text:(0,rs.t)("dashboard-settings.versions.title","Versions"),url:t.I.getUrlForPartial(Le,{editview:"versions",editIndex:null}),active:me==="versions"}),Se.state.id&&Se.state.meta.canAdmin&&uo.TP.hasPermission(Mn.AccessControlAction.DashboardsPermissionsRead)&&It.children.push({text:(0,rs.t)("dashboard-settings.permissions.title","Permissions"),url:t.I.getUrlForPartial(Le,{editview:"permissions",editIndex:null}),active:me==="permissions"}),It.children.push({text:(0,rs.t)("dashboard-settings.json-editor.title","JSON Model"),url:t.I.getUrlForPartial(Le,{editview:"json-model",editIndex:null}),active:me==="json-model"}),{navModel:ut,pageNav:It}}function Fr(Se){switch(Se){case"annotations":return new ni({});case"variables":return new Gi({});case"links":return new Hc({});case"versions":return new Al({});case"json-model":return new Fo({});case"permissions":return new xi({});case"settings":default:return new qc({})}}class Ll extends m.Bs{constructor(me){super(me),this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const me=this.state.panelRef.resolve(),Le=m.Go.cloneSceneObjectState(me.state,{key:me.state.key+"-view",$variables:this.getScopedVariables(me)}),ke=new m.Eb(Le);return this.setState({body:ke}),()=>{ke.state.$data&&me.setState({$data:ke.state.$data.clone()})}}getScopedVariables(me){const Le=id(me),ke=[];if(Le&&Le.state.$variables)for(const ut of Le.state.$variables.state.variables)ke.push(ut.clone());if(me.state.$variables)for(const ut of me.state.$variables.state.variables)ke.push(ut.clone());if(ke.length>0)return new m.Pj({variables:ke})}getUrlKey(){return this.state.panelRef.resolve().state.key}static{this.Component=({model:me})=>{const{body:Le}=me.useState();return Le?f.createElement(Le.Component,{model:Le}):null}}}function id(Se){try{return m.jh.getAncestor(Se,m.tI)}catch{return}}var Bl=e(30195);class ld{constructor(me){this._scene=me}getKeys(){return["inspect","viewPanel","editPanel","editview","autofitpanels"]}getUrlState(){const me=this._scene.state;return{inspect:me.inspectPanelKey,autofitpanels:me.body instanceof m.hy&&me.body.state.UNSAFE_fitPanels?"true":void 0,viewPanel:me.viewPanelScene?.getUrlKey(),editview:me.editview?.getUrlKey(),editPanel:me.editPanel?.getUrlKey()||void 0}}updateFromUrl(me){const{inspectPanelKey:Le,viewPanelScene:ke,isEditing:ut,editPanel:ht}=this._scene.state,It={};if(typeof me.editview=="string"&&this._scene.canEditDashboard()?(It.editview=Fr(me.editview),ut||(this._scene.state.editable?setTimeout(()=>this._scene.onEnterEditMode()):It.editview=void 0)):me.hasOwnProperty("editview")&&(It.editview=void 0),typeof me.inspect=="string"){let Ht=(0,k.vL)(this._scene,me.inspect);if(!Ht){i.A.emit(n.r1.alertError,["Panel not found"]),o.Ny.partial({inspect:null});return}if((0,k.Yr)(Ht)){this._handleLibraryPanel(Ht,an=>{if(an.state.key===void 0)throw new Error("library panel key is undefined");const Xt=new Ti({$behaviors:[new Qi({panelKey:an.state.key})]});this._scene.setState({overlay:Xt,inspectPanelKey:an.state.key})});return}It.inspectPanelKey=me.inspect,It.overlay=new Ti({$behaviors:[new Qi({panelKey:me.inspect})]})}else Le&&(It.inspectPanelKey=void 0,It.overlay=void 0);if(typeof me.viewPanel=="string"){const Ht=(0,k.vL)(this._scene,me.viewPanel);if(!Ht){if((0,k.SN)(me.viewPanel)){this._handleViewRepeatClone(me.viewPanel);return}i.A.emit(n.r1.alertError,["Panel not found"]),o.Ny.partial({viewPanel:null});return}if((0,k.Yr)(Ht)){this._handleLibraryPanel(Ht,an=>this._buildLibraryPanelViewScene(an));return}It.viewPanelScene=new Ll({panelRef:Ht.getRef()})}else ke&&me.viewPanel===null&&(It.viewPanelScene=void 0);if(typeof me.editPanel=="string"){const Ht=(0,k.vL)(this._scene,me.editPanel);if(!Ht){console.warn(`Panel ${me.editPanel} not found`);return}if(ut||this._scene.onEnterEditMode(),(0,k.Yr)(Ht)){this._handleLibraryPanel(Ht,an=>{this._scene.setState({editPanel:ho(an)})});return}It.editPanel=ho(Ht)}else ht&&me.editPanel===null&&(It.editPanel=void 0);if(this._scene.state.body instanceof m.hy){const Ht=typeof me.autofitpanels=="string";!!this._scene.state.body.state.UNSAFE_fitPanels!==Ht&&this._scene.state.body.setState({UNSAFE_fitPanels:Ht})}Object.keys(It).length>0&&this._scene.setState(It)}_buildLibraryPanelViewScene(me){this._scene.setState({viewPanelScene:new Ll({panelRef:me.getRef()})})}_handleLibraryPanel(me,Le){if(!(me.parent instanceof z.F))throw new Error("Panel is not a child of a LibraryVizPanel");const ke=me.parent;ke.state.isLoaded?Le(me):(ke.subscribeToState(ut=>{Le(ut.panel)}),ke.activate())}_handleViewRepeatClone(me){this._eventSub||(this._eventSub=this._scene.subscribeToEvent(Bl.d,()=>{const Le=(0,k.vL)(this._scene,me);Le&&(this._eventSub?.unsubscribe(),this._scene.setState({viewPanelScene:new Ll({panelRef:Le.getRef()})}))}))}}class Qi extends m.Bs{constructor(me){super(me),this._onActivate=()=>{const Le=this.parent;if(!Le||!(Le instanceof Ti))throw new Error("ResolveInspectPanelByKey must be attached to a PanelInspectDrawer");const ke=(0,k.YQ)(Le);if(!ke)return;const ut=this.state.panelKey;let ht=(0,k.vL)(ke,ut);ke.state.editPanel&&(ht=ke.state.editPanel.state.vizManager.state.panel),ke.state.viewPanelScene&&ke.state.viewPanelScene.state.body&&(ht=ke.state.viewPanelScene.state.body),ht&&Le.setState({panelRef:ht.getRef()})},this.addActivationHandler(this._onActivate)}}var cd=e(52594);class dd extends m.Bs{constructor(){super({dashboards:[],filteredDashboards:[],isLoading:!1,searchQuery:""}),this._url=s.$.bootData.settings.listDashboardScopesEndpoint||"/apis/scope.grafana.app/v0alpha1/scopedashboards"}static{this.Component=oc}async fetchDashboards(me){if(!me)return this.setState({dashboards:[],filteredDashboards:[],isLoading:!1});this.setState({isLoading:!0});const Le=await this.fetchDashboardsUids(me),ke=await this.fetchDashboardsDetails(Le);this.setState({dashboards:ke,filteredDashboards:this.filterDashboards(ke,this.state.searchQuery),isLoading:!1})}changeSearchQuery(me){this.setState({filteredDashboards:me?this.filterDashboards(this.state.dashboards,me):this.state.dashboards,searchQuery:me??""})}async fetchDashboardsUids(me){try{return(await(0,Fn.AI)().get(this._url,{scope:me})).items.find(ke=>!!ke.spec.dashboards&&ke.spec.scope===me)?.spec.dashboards??[]}catch{return[]}}async fetchDashboardsDetails(me){try{return(await Promise.all(me.map(ke=>this.fetchDashboardDetails(ke)))).filter(ke=>!!ke)}catch{return(0,ps.J7)().publish({type:n.r1.alertError.name,payload:["Failed to fetch suggested dashboards"]}),[]}}async fetchDashboardDetails(me){try{const Le=await(0,Fn.AI)().get(`/api/dashboards/uid/${me}`);return{uid:Le.dashboard.uid,title:Le.dashboard.title,url:Le.meta.url}}catch{return}}filterDashboards(me,Le){const ke=Le.toLowerCase();return me.filter(ut=>ut.title.toLowerCase().includes(ke))}}function oc({model:Se}){const{filteredDashboards:me,isLoading:Le}=Se.useState(),ke=(0,M.of)(ud);return f.createElement(f.Fragment,null,f.createElement("div",{className:ke.searchInputContainer},f.createElement(Vt.p,{prefix:f.createElement(Ls.I,{name:"search"}),disabled:Le,onChange:ut=>Se.changeSearchQuery(ut.currentTarget.value)})),f.createElement(dr.E,null,me.map((ut,ht)=>f.createElement("div",{key:ht,className:ke.dashboardItem},f.createElement(cd.Link,{to:{pathname:ut.url,search:o.Ny.getLocation().search}},ut.title)))))}const ud=Se=>({searchInputContainer:(0,y.css)({flex:"0 1 auto"}),dashboardItem:(0,y.css)({padding:Se.spacing(1,0),borderBottom:`1px solid ${Se.colors.border.weak}`,":first-child":{paddingTop:0}})});class md extends m.Bs{constructor(){super({isLoading:!0,pendingValue:void 0,scopes:[],value:void 0}),this._urlSync=new m.So(this,{keys:["scope"]}),this._url=s.$.bootData.settings.listScopesEndpoint||"/apis/scope.grafana.app/v0alpha1/scopes"}static{this.Component=ic}getUrlState(){return{scope:this.state.value}}updateFromUrl(me){const Le=me.scope??void 0;this.setScope(Array.isArray(Le)?Le[0]:Le)}getSelectedScope(){return this.state.scopes.find(me=>me.uid===this.state.value)}setScope(me){if(this.state.isLoading)return this.setState({pendingValue:me});this.state.scopes.find(Le=>Le.uid===me)||(me=void 0),this.setState({value:me})}async fetchScopes(){this.setState({isLoading:!0});try{const me=await(0,Fn.AI)().get(this._url);this.setScopesAfterFetch(me.items.map(({metadata:{uid:Le},spec:ke})=>({uid:Le,...ke})))}catch{(0,ps.J7)().publish({type:n.r1.alertError.name,payload:["Failed to fetch scopes"]}),this.setScopesAfterFetch([])}finally{this.setState({isLoading:!1})}}setScopesAfterFetch(me){let Le=this.state.pendingValue??this.state.value;me.find(ke=>ke.uid===Le)||(Le=void 0),this.setState({scopes:me,pendingValue:void 0,value:Le})}}function ic({model:Se}){const{scopes:me,isLoading:Le,value:ke}=Se.useState(),ut=Se.parent.useState(),ht="isViewing"in ut?!!ut.isViewing:!1,It=me.map(({uid:Ht,title:an,category:Xt})=>({label:an,value:Ht,description:Xt}));return f.createElement(pa.l6,{isClearable:!0,isLoading:Le,disabled:ht,options:It,value:ke,onChange:Ht=>Se.setScope(Ht?.value??void 0)})}class lc extends m.Bs{static{this.Component=ml}constructor(){super({dashboards:new dd,filters:new md,isExpanded:!1,isViewing:!1}),this.addActivationHandler(()=>{this.state.filters.fetchScopes();const me=this.state.filters.subscribeToState((ke,ut)=>{ke.value!==ut.value&&(this.state.dashboards.fetchDashboards(ke.value),m.jh.getTimeRange(this.parent).onRefresh())}),Le=this.parent?.subscribeToState(ke=>{const ut="isEditing"in ke?!!ke.isEditing:!1;ut!==this.state.isViewing&&(ut?this.enterViewMode():this.exitViewMode())});return()=>{me.unsubscribe(),Le?.unsubscribe()}})}toggleIsExpanded(){this.setState({isExpanded:!this.state.isExpanded})}enterViewMode(){this.setState({isExpanded:!1,isViewing:!0})}exitViewMode(){this.setState({isViewing:!1})}}function ml({model:Se}){const{filters:me,dashboards:Le,isExpanded:ke,isViewing:ut}=Se.useState(),ht=(0,M.of)(cc);return f.createElement("div",{className:(0,y.cx)(ht.container,ke&&ht.containerExpanded)},f.createElement("div",{className:(0,y.cx)(ht.filtersContainer,ke&&ht.filtersContainerExpanded)},!ut&&f.createElement(ui.K,{name:"arrow-to-right","aria-label":ke?"Collapse scope filters":"Expand scope filters",className:(0,y.cx)(!ke&&ht.iconNotExpanded),"data-testid":"scopes-scene-toggle-expand-button",onClick:()=>Se.toggleIsExpanded()}),f.createElement(me.Component,{model:me})),ke&&f.createElement("div",{className:ht.dashboardsContainer,"data-testid":"scopes-scene-dashboards-container"},f.createElement(Le.Component,{model:Le})))}const cc=Se=>({container:(0,y.css)({display:"flex",flexDirection:"column",gridArea:"scopes"}),containerExpanded:(0,y.css)({backgroundColor:Se.colors.background.primary,height:"100%"}),filtersContainer:(0,y.css)({display:"flex",flex:"0 1 auto",flexDirection:"row",padding:Se.spacing(2,2,2,2)}),filtersContainerExpanded:(0,y.css)({borderBottom:`1px solid ${Se.colors.border.weak}`,padding:Se.spacing(2)}),iconNotExpanded:(0,y.css)({transform:"scaleX(-1)"}),dashboardsContainer:(0,y.css)({display:"flex",flex:"1 1 auto",flexDirection:"column",gap:Se.spacing(3),overflow:"hidden",padding:Se.spacing(2)})});var fl=e(6411),Yi=e.n(fl);class fd{constructor(){this._binds=[]}addBinding(me){Yi().bind(me.key,Le=>{Le.preventDefault(),Le.stopPropagation(),Le.returnValue=!1,me.onTrigger()},"keydown"),this._binds.push(me)}removeAll(){this._binds.forEach(me=>{Yi().unbind(me.key,me.type)}),this._binds=[]}}var dc=e(7196);function gd(Se){const me=new fd;return me.addBinding({key:"v",onTrigger:tr(Se,Le=>{Se.state.viewPanelScene||o.Ny.push((0,Cs.r7)(Le))})}),me.addBinding({key:"e",onTrigger:tr(Se,async Le=>{if(Le.getRoot()instanceof Nl){const ut=(0,k.Cs)(Le);Se.state.editPanel||o.Ny.push((0,Cs.e0)(ut))}})}),me.addBinding({key:"p s",onTrigger:tr(Se,async Le=>{Se.showModal(new Do.Z({panelRef:Le.getRef(),dashboardRef:Se.getRef()}))})}),me.addBinding({key:"i",onTrigger:tr(Se,async Le=>{o.Ny.push((0,Cs.Uu)(Le))})}),me.addBinding({key:"p x",onTrigger:tr(Se,async Le=>{const ke=await(0,Cs.Lp)(Le);ke&&o.Ny.push(ke)})}),me.addBinding({key:"p l",onTrigger:tr(Se,dc.vR)}),me.addBinding({key:"d r",onTrigger:()=>m.jh.getTimeRange(Se).onRefresh()}),me.addBinding({key:"t z",onTrigger:()=>{uc(Se)}}),me.addBinding({key:"ctrl+z",onTrigger:()=>{uc(Se)}}),me.addBinding({key:"t left",onTrigger:()=>{Ul(Se,"left")}}),me.addBinding({key:"t right",onTrigger:()=>{Ul(Se,"right")}}),me.addBinding({key:"d s",onTrigger:Se.onOpenSettings}),me.addBinding({key:"mod+s",onTrigger:()=>Se.openSaveDrawer({})}),me.addBinding({key:"p r",onTrigger:tr(Se,Le=>{Se.state.isEditing&&(0,dc.MI)(Se,Le)})}),me.addBinding({key:"p d",onTrigger:tr(Se,Le=>{Se.state.isEditing&&Se.duplicatePanel(Le)})}),()=>me.removeAll}function tr(Se,me){return()=>{const Le=document.querySelectorAll(":hover");for(let ke=Le.length-1;ke>0;ke--){const ut=Le[ke];if(ut instanceof HTMLElement&&ut.dataset?.vizPanelKey){const ht=ut.dataset?.vizPanelKey,It=m.jh.findObject(Se,Ht=>Ht.state.key===ht);if(It&&It instanceof m.Eb){me(It);return}}}}}function uc(Se){ss.b4.getTimePicker(Se)?.onZoom()}function Ul(Se,me){const Le=ss.b4.getTimePicker(Se);Le&&(me==="left"&&Le.onMoveBackward(),me==="right"&&Le.onMoveForward())}const mc=["title","description","tags","editable","graphTooltip","links","meta"];class Nl extends m.Bs{constructor(me){super({title:"Dashboard",meta:{},editable:!0,body:me.body??new m.G1({children:[]}),links:me.links??[],hasCopiedPanel:c.A.exists(l.tH),scopes:me.uid&&s.$.featureToggles.scopeFilters?new lc:void 0,...me}),this._urlSync=new ld(this),this._variableDependency=new fc,this._fromExplore=!1,this.onEnterEditMode=(Le=!1)=>{this._fromExplore=Le,this._initialState=m.Go.cloneSceneObjectState(this.state),this._initialUrlState=o.Ny.getLocation(),this.setState({isEditing:!0}),this.propagateEditModeChange(),this._changeTracker.startTrackingChanges()},this.onRestore=async Le=>{const ke=await sa.wL.restoreDashboard(Le.uid,Le.version);if(!Number.isInteger(ke.version))return!1;const ut={dashboard:new u.G(Le.data),meta:this.state.meta},ht=(0,ga.wM)(ut),It=m.Go.cloneSceneObjectState(ht.state);return It.version=ke.version,this.setState(It),this.exitEditMode({skipConfirm:!0,restoreInitialState:!1}),!0},this.onOpenSettings=()=>{o.Ny.partial({editview:"settings"})},this._changeTracker=new yt(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=xt}_activationHandler(){let me=window.__grafanaSceneContext;window.__grafanaSceneContext=this,this.state.isEditing&&(this._initialUrlState=o.Ny.getLocation(),this._changeTracker.startTrackingChanges()),this.state.meta.isNew&&(this.onEnterEditMode(),this.setState({isDirty:!0})),!this.state.meta.isEmbedded&&this.state.uid&&E.t.watch(this.state.uid);let Le=()=>{};s.$.publicDashboardAccessToken||(Le=gd(this));const ke=new vs(this);return(0,g.UA)().setCurrent(ke),()=>{window.__grafanaSceneContext=me,Le(),this._changeTracker.terminate(),this.stopUrlSync(),ke.destroy(),E.t.leave()}}startUrlSync(){this.state.meta.isEmbedded||(0,m.Is)().initSync(this)}stopUrlSync(){(0,m.Is)().cleanUp(this)}saveCompleted(me,Le,ke){this._initialSaveModel={...me,id:Le.id,uid:Le.uid,version:Le.version},this._changeTracker.stopTrackingChanges(),this.setState({version:Le.version,isDirty:!1,uid:Le.uid,id:Le.id,meta:{...this.state.meta,uid:Le.uid,url:Le.url,slug:Le.slug,folderUid:ke,isNew:!1}}),this._changeTracker.startTrackingChanges()}propagateEditModeChange(){this.state.body instanceof m.hy&&(this.state.body.setState({isDraggable:this.state.isEditing,isResizable:this.state.isEditing}),(0,k.X0)(this.state.body,!0))}exitEditMode({skipConfirm:me,restoreInitialState:Le}){if(!this.canDiscard()){console.error("Trying to discard back to a state that does not exist, initialState undefined");return}if(!this.state.isDirty||me){this.exitEditModeConfirmed(Le||this.state.isDirty);return}i.A.publish(new a.bY({title:"Discard changes to dashboard?",text:"You have unsaved changes to this dashboard. Are you sure you want to discard them?",icon:"trash-alt",yesText:"Discard",onConfirm:this.exitEditModeConfirmed.bind(this)}))}exitEditModeConfirmed(me=!0){this._changeTracker.stopTrackingChanges(),this.stopUrlSync(),o.Ny.replace(t.I.getUrlForPartial(this._initialUrlState,{editPanel:null,editview:null,inspect:null,inspectTab:null})),this._fromExplore&&this.cleanupStateFromExplore(),me?this.setState({...this._initialState,isEditing:!1}):this.setState({isEditing:!1}),this.startUrlSync(),this.propagateEditModeChange()}cleanupStateFromExplore(){this._fromExplore=!1,this._initialSaveModel?.panels&&(this._initialSaveModel.panels=this._initialSaveModel.panels.slice(1)),this._initialState&&this._initialState.body instanceof m.hy&&this._initialState.body.setState({children:this._initialState.body.state.children.slice(1)})}canDiscard(){return this._initialState!==void 0}pauseTrackingChanges(){this._changeTracker.stopTrackingChanges()}resumeTrackingChanges(){this._changeTracker.startTrackingChanges()}openSaveDrawer({saveAsCopy:me,onSaveSuccess:Le}){this.state.isEditing&&this.setState({overlay:new fa({dashboardRef:this.getRef(),saveAsCopy:me,onSaveSuccess:Le})})}getPageNav(me,Le){const{meta:ke,viewPanelScene:ut,editPanel:ht}=this.state;let It={text:this.state.title,url:(0,Cs.uZ)({uid:this.state.uid,slug:ke.slug,currentQueryParams:me.search,updateQuery:{viewPanel:null,inspect:null,editview:null,editPanel:null,tab:null},isHomeDashboard:!ke.url&&!ke.slug&&!ke.isNew})};const{folderUid:Ht}=ke;if(Ht){const an=(0,d.tc)(Le,`folder-dashboards-${Ht}`).main;an.id!=="not-found"&&(It={...It,parentItem:an})}return ut&&(It={text:"View panel",parentItem:It}),ht&&(It={text:"Edit panel",parentItem:It}),It}getBodyToRender(){return this.state.viewPanelScene??this.state.body}getInitialState(){return this._initialState}addRow(me){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const Le=this.state.body,ke=Le.state.children.findIndex(ht=>ht instanceof m.tI),ut=Le.state.children.splice(0,ke===-1?Le.state.children.length:ke).map(ht=>ht.clone());ut&&me.setState({children:ut}),Le.setState({children:[me,...Le.state.children]})}removeRow(me,Le=!1){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const ke=this.state.body,ut=ke.state.children.filter(ht=>ht.state.key!==me.state.key);if(!Le){const ht=me.state.children.map(Ht=>Ht.clone()),It=ke.state.children.findIndex(Ht=>Ht.state.key===me.state.key);ut.splice(It,0,...ht)}ke.setState({children:ut})}addPanel(me){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const Le=this.state.body,ke=(0,k.Cs)(me),ut=new F.U({height:k.sw,width:k.vm,x:0,y:0,body:me,key:`grid-item-${ke}`});Le.setState({children:[ut,...Le.state.children]})}duplicatePanel(me){if(!me.parent)return;const Le=(0,ss.WZ)(me),ke=Le?Le.parent:me.parent;if(!(ke instanceof F.U)){console.error("Trying to duplicate a panel in a layout that is not DashboardGridItem");return}let ut,ht,It;const Ht=ss.b4.getNextPanelId(this);if(Le){const Xt=m.Go.cloneSceneObjectState(ke.state);It=new F.U({x:Xt.x,y:Xt.y,width:Xt.width,height:Xt.height,body:new z.F({title:Le.state.title,uid:Le.state.uid,name:Le.state.name,panelKey:(0,k.XA)(Ht)})})}else ke instanceof F.U?(ut=m.Go.cloneSceneObjectState(ke.state.body.state),ht=m.jh.getData(ke.state.body).clone()):(ut=m.Go.cloneSceneObjectState(me.state),ht=m.jh.getData(me).clone()),delete ht.state.data?.alertState,It=new F.U({x:ke.state.x,y:ke.state.y,height:k.sw,width:k.vm,body:new m.Eb({...ut,$data:ht,key:(0,k.XA)(Ht)})});if(!(this.state.body instanceof m.hy)){console.error("Trying to duplicate a panel in a layout that is not SceneGridLayout ");return}const an=this.state.body;if(ke.parent instanceof m.tI){const Xt=ke.parent;Xt.setState({children:[...Xt.state.children,It]}),an.forceRender();return}an.setState({children:[...an.state.children,It]})}copyPanel(me){if(!me.parent)return;let Le=me.parent;if(me.parent instanceof z.F){const ut=me.parent;if(!ut.parent)return;Le=ut.parent}if(!(Le instanceof F.U))throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");const ke=(0,H.ZB)(Le);c.A.set(l.tH,JSON.stringify(ke)),i.A.emit(n.r1.alertSuccess,["Panel copied. Use **Paste panel** toolbar action to paste."]),this.setState({hasCopiedPanel:!0})}pastePanel(){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const me=c.A.get(l.tH),Le=JSON.parse(me),ke=new u.a(Le),ut=ke.libraryPanel?(0,ga.Al)(ke):(0,ga.tt)(ke),ht=this.state.body;if(!(ut instanceof F.U))throw new Error("Cannot paste invalid grid item");const It=ss.b4.getNextPanelId(this);if(ut instanceof F.U&&ut.state.body instanceof z.F){const Ht=(0,k.XA)(It);ut.state.body.setState({panelKey:Ht});const an=ut.state.body.state.panel;an instanceof m.Eb&&an.setState({key:Ht})}else ut instanceof F.U&&ut.state.body?ut.state.body.setState({key:(0,k.XA)(It)}):ut instanceof F.U&&ut.state.body.setState({key:(0,k.XA)(It)});ut.setState({height:k.sw,width:k.vm,x:0,y:0,key:`grid-item-${It}`}),ht.setState({children:[ut,...ht.state.children]}),this.setState({hasCopiedPanel:!1}),c.A.delete(l.tH)}removePanel(me){const Le=[],ke=me.parent instanceof z.F?me.parent.parent?.state.key:me.parent?.state.key;if(!ke)return;let ut;try{ut=m.jh.getAncestor(me,m.tI)}catch{ut=void 0}if(ut){ut.state.children.forEach(It=>{It.state.key!==ke&&Le.push(It)}),ut.setState({children:Le}),this.state.body.forceRender();return}this.state.body.forEachChild(It=>{It.state.key!==ke&&Le.push(It)});const ht=this.state.body;(ht instanceof m.hy||ht instanceof m.G1)&&ht.setState({children:Le})}unlinkLibraryPanel(me){if(!me.parent)return;const Le=me.parent;if(!(Le instanceof F.U)){console.error("Trying to unlinka a lib panel in a layout that is not DashboardGridItem");return}Le?.setState({body:me.state.panel?.clone()})}showModal(me){this.setState({overlay:me})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:me,uid:Le}=this.state;if(Le)try{const ke=await(0,g.UA)().starDashboard(Le,!!me.isStarred);this.setState({meta:{...me,isStarred:ke}})}catch(ke){console.error("Failed to star dashboard",ke)}}onShowAddLibraryPanelDrawer(){this.setState({overlay:new ws.o({})})}onCreateNewRow(){const me=(0,k.Ws)(this);return this.addRow(me),(0,k.Cs)(me)}onCreateNewPanel(){this.state.isEditing||this.onEnterEditMode();const me=(0,k.O8)(this);return this.addPanel(me),(0,k.Cs)(me)}enrichDataRequest(me){const Le=(0,k.YQ)(me);let ke=(0,k.xz)(me);Le.state.isEditing&&Le.state.editPanel&&(ke=Le.state.editPanel.state.vizManager.state.panel);let ut=0;return ke&&ke.state.key&&((0,k.SN)(ke.state.key)?ut=Rs(ke?.state.key):ut=(0,k.Cs)(ke)),{app:r.Jk.Dashboard,dashboardUID:this.state.uid,panelId:ut,panelPluginId:ke?.state.pluginId,scope:this.state.scopes?.state.filters.getSelectedScope()}}canEditDashboard(){const{meta:me}=this.state;return!!(me.canEdit||me.canMakeEditable)}getInitialSaveModel(){return this._initialSaveModel}setInitialSaveModel(me){this._initialSaveModel=me}async deleteDashboard(){await(0,p.A_)(this.state.uid,!0),this.setState({isDirty:!1}),o.Ny.replace("/")}}class fc{constructor(){this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdateCompleted(me,Le){Le&&i.A.publish(new b.og({refreshAll:!0,panelIds:[]}))}}},60656:(Q,I,e)=>{"use strict";e.d(I,{F:()=>c});var t=e(96540),n=e(86849),r=e(34214),s=e(57767),o=e(96556),m=e(41507),i=e(42397),l=e(7196),d=e(21970);class c extends n.Bs{constructor(p){super({panel:p.panel??g(p.title,p.panelKey),isLoaded:p.isLoaded??!1,...p}),this._onActivate=()=>{this.state.isLoaded||this.loadLibraryPanelFromPanelModel()},this.addActivationHandler(this._onActivate)}static{this.Component=u}setPanelFromLibPanel(p){if(this.state._loadedPanel?.version===p.version)return;const b=new r.a(p.model),a={title:b.title,key:this.state.panelKey,options:b.options??{},fieldConfig:b.fieldConfig,pluginId:b.type,pluginVersion:b.pluginVersion,displayMode:b.transparent?"transparent":void 0,description:b.description,$data:(0,o.w)(b),menu:new n.Lw({$behaviors:[l._i]}),titleItems:[new i.$({rawLinks:b.links,menu:new i.m({$behaviors:[l.oV]})}),new d.W]},h=new n.Eb(a),P=this.parent;if(b.repeat&&P instanceof m.U&&P.parent instanceof n.hy){this._parent=void 0;const y=new m.U({key:P.state.key,x:P.state.x,y:P.state.y,width:b.repeatDirection==="h"?24:P.state.width,height:P.state.height,itemHeight:P.state.height,body:this,variableName:b.repeat,repeatedPanels:[],repeatDirection:b.repeatDirection==="h"?"h":"v",maxPerRow:b.maxPerRow});P.parent.setState({children:P.parent.state.children.map(C=>C.state.key===P.state.key?y:C)})}this.setState({panel:h,_loadedPanel:p,isLoaded:!0,name:p.name})}async loadLibraryPanelFromPanelModel(){let p=this.state.panel;try{const b=await(0,s.Yr)(this.state.uid,!0);this.setPanelFromLibPanel(b),this.parent instanceof m.U&&this.parent.setState({variableName:b.model.repeat,repeatDirection:b.model.repeatDirection==="h"?"h":"v",maxPerRow:b.model.maxPerRow})}catch{p.setState({_pluginLoadError:`Unable to load library panel: ${this.state.uid}`})}}}function g(E,p){return new n.Eb({key:p,title:E,menu:new n.Lw({$behaviors:[l._i]})})}function u({model:E}){const{panel:p}=E.useState();return p?t.createElement(p.Component,{model:p}):null}},42397:(Q,I,e)=>{"use strict";e.d(I,{$:()=>d,m:()=>g});var t=e(96540),n=e(86849),r=e(91052),s=e(14578),o=e(83122),m=e(27746),i=e(38138),l=e(7196);class d extends n.Bs{static{this.Component=c}}function c({model:E}){const{menu:p,rawLinks:b}=E.useState();if(!(E.parent instanceof n.Eb))throw new Error("VizPanelLinks must be a child of VizPanel");if(!b||b.length===0)return null;if(b.length===1){const a=(0,l.eQ)(E.parent)[0];return t.createElement(r.NR.TitleItem,{href:a.href,onClick:a.onClick,target:a.target,title:a.title},t.createElement(s.I,{name:"external-link-alt",size:"md"}))}return t.createElement(o.m,{overlay:()=>t.createElement(p.Component,{model:p,key:p.state.key})},t.createElement(m.I,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links"}))}class g extends n.Bs{static{this.Component=u}}function u({model:E}){const{links:p}=E.useState();return p?t.createElement(i.W,null,p?.map((b,a)=>t.createElement(i.W.Item,{key:a,label:b.title,url:b.href,target:b.target,onClick:b.onClick}))):null}},7196:(Q,I,e)=>{"use strict";e.d(I,{eQ:()=>De,MI:()=>Ee,oV:()=>re,_i:()=>le,t0:()=>ue,vR:()=>ze});var t=e(74135),n=e(1933),r=e(76885),s=e(32264),o=e(4402),m=e(12131),i=e(86849),l=e(28138),d=e(44836),c=e(63066),g=e(22699),u=e(16560),E=e(32349),p=e(75462),b=e(19347),a=e(74730),h=e(75176),P=e(40588),y=e(96540),C=e(56833);class f extends i.Bs{static{this.Component=D}constructor(pe){super(pe),this.trail=T(pe)}}function D({model:be}){return y.createElement(be.trail.Component,{model:be.trail})}function T({metric:be,filters:pe,dataSourceUid:Ue,timeRange:we}){return new C.b({$timeRange:we,metric:be,initialDS:Ue,initialFilters:pe,embedded:!0})}var M=e(32196),O=e(40845),S=e(87978),v=e(28444);function x(be){const{scene:pe,title:Ue,onDismiss:we}=be,je=(0,O.of)(B);return y.createElement(S._,{title:Ue,onClose:we,size:"lg"},y.createElement("div",{className:je.drawerInnerWrapper},y.createElement(pe.Component,{model:pe})))}class A extends i.Bs{constructor(pe){super(pe)}static Component({model:pe}){const Ue=pe.useState();return y.createElement(x,{...Ue})}}function R(be){const pe={component:x,props:be};appEvents.publish(new ShowModalReactEvent(pe))}function B(be){return{drawerInnerWrapper:(0,M.css)({display:"flex",padding:be.spacing(2),background:be.isDark?be.colors.background.canvas:be.colors.background.primary,position:"absolute",left:0,right:0,top:0})}}var U=e(76040);function w(be){return be.op==="="}function K(be){return be.state.$timeRange.clone()}function N({metric:be,labelFilters:pe}){if(pe.length===0)return be;const Ue=`{${pe.map(({label:we,op:je,value:He})=>`${we}${je}"${He}"`)}}`;return`${be}${Ue}`}function L(be){return be?.map(pe=>({key:pe.label,value:pe.value,operator:pe.op}))}function V(be){const pe=[];return be.forEach(Ue=>{const we=(0,U.u)(Ue);if(we.errors.length>0)return;const{metric:je,labels:He}=we.query;pe.push({metric:je,labelFilters:He.filter(w),query:Ue}),we.query.binaryQueries?.forEach(({query:{metric:rt,labels:Je}})=>{pe.push({metric:rt,labelFilters:Je.filter(w),query:Ue})})}),pe}async function F(be,pe,Ue){if(pe.state.pluginId!=="timeseries")return;const we=(0,a.un)(pe);if(we==null)return;const{queries:je,datasource:He,data:rt}=we.state;if(He==null||He.type!=="prometheus")return;const Je=await(0,b.l)().get(He);if(Je.interpolateVariablesInQueries==null)return;const Ve=Je.interpolateVariablesInQueries(je,{__sceneObject:{value:pe}},rt?.request?.filters).filter(ee),Ne=V(Ve.map(ye=>ye.expr)).map(ye=>({text:N(ye),onClick:k(ye,be,Je)}));Ne.length>0&&Ue.push({text:"Explore metrics",iconClassName:"code-branch",subMenu:z(Ne)})}function z(be){const pe=new Set;function Ue({text:we}){const je=pe.size;return pe.add(we),pe.size>je}return be.filter(Ue)}function Y({metric:be,labelFilters:pe,query:Ue},we,je){return{metric:be,filters:L(pe),dataSourceUid:je,timeRange:we}}function H(be,pe,Ue){const we=K(pe),je=Y(be,we,Ue.uid),He=new f(je);return He.trail.addActivationHandler(()=>{He.trail.state.topScene instanceof h.R&&He.trail.state.topScene.setActionView("breakdown")}),{scene:He,title:"Explore metrics"}}function k(be,pe,Ue){return()=>{const we=H(be,pe,Ue),je=new A({...we,onDismiss:()=>pe.closeModal()});(0,P.z)("exploration_started",{cause:"dashboard_panel"}),pe.showModal(je)}}function ee(be){return"expr"in be}var ie=e(58441),fe=e(7758),q=e(11982),Z=e(45199),J=e(60656),G=e(42397),ne=e(54174);class te extends i.Bs{constructor(){super(...arguments),this.onDismiss=()=>{(0,a.YQ)(this).closeModal()},this.onConfirm=()=>{const pe=(0,a.YQ)(this);pe.unlinkLibraryPanel(this.state.panelRef.resolve()),pe.closeModal()}}static{this.Component=oe}}function oe({model:be}){return y.createElement(ne.l,{isOpen:!0,onConfirm:()=>{be.onConfirm(),be.onDismiss()},onDismiss:be.onDismiss})}function le(be,pe=!1){(async()=>{const we=be.parent,je=we.parent,He=we.getPlugin(),rt=[],Je=[],Ve=(0,a.YQ)(we),{isEmbedded:Oe}=Ve.state.meta,Ne=await Te(we);if(Oe){Ne&&be.setState({items:[Ne]});return}const ye=!!Ve.state.editPanel;ye||rt.push({text:(0,d.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",onClick:()=>fe.c.panelMenuItemClicked("view"),href:(0,q.r7)(we)}),Ve.canEditDashboard()&&Ve.state.editable&&!pe&&!ye&&rt.push({text:(0,d.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",shortcut:"e",onClick:()=>fe.c.panelMenuItemClicked("edit"),href:(0,q.e0)((0,a.Cs)(we))}),rt.push({text:(0,d.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{fe.c.panelMenuItemClicked("share"),Ve.showModal(new ie.Z({panelRef:we.getRef(),dashboardRef:Ve.getRef()}))},shortcut:"p s"}),Ve.state.isEditing&&!pe&&!ye&&Je.push({text:(0,d.t)("panel.header-menu.duplicate","Duplicate"),onClick:()=>{fe.c.panelMenuItemClicked("duplicate"),Ve.duplicatePanel(we)},shortcut:"p d"}),ye||Je.push({text:(0,d.t)("panel.header-menu.copy","Copy"),onClick:()=>{fe.c.panelMenuItemClicked("copy"),Ve.copyPanel(we)}}),Ve.state.isEditing&&!pe&&!ye&&(je instanceof J.F?Je.push({text:(0,d.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:()=>{fe.c.panelMenuItemClicked("unlinkLibraryPanel"),Ve.showModal(new te({panelRef:je.getRef()}))}}):Je.push({text:(0,d.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:()=>{fe.c.panelMenuItemClicked("createLibraryPanel"),Ve.showModal(new ie.Z({panelRef:we.getRef(),dashboardRef:Ve.getRef(),activeTab:g.wr.libraryPanel}))}})),Je.push({text:(0,d.t)("panel.header-menu.new-alert-rule","New alert rule"),onClick:ae=>Me(we)}),xe(we.state.options)&&!ye&&Je.push({text:we.state.options.legend.showLegend?(0,d.t)("panel.header-menu.hide-legend","Hide legend"):(0,d.t)("panel.header-menu.show-legend","Show legend"),onClick:ae=>{ae.preventDefault(),ze(we)},shortcut:"p l"}),Ve.canEditDashboard()&&He&&!He.meta.skipDataQuery&&!pe&&Je.push({text:(0,d.t)("panel.header-menu.get-help","Get help"),onClick:ae=>{ae.preventDefault(),We(we,u.q.Help)}}),s.$.featureToggles.exploreMetrics&&await F(Ve,we,rt),Ne&&rt.push(Ne),rt.push(he(He,we,Ve));const{extensions:se}=(0,o.Kf)({extensionPointId:t.S.DashboardPanelMenu,context:Fe(we,Ve),limitPerPlugin:3});se.length>0&&!Ve.state.isEditing&&rt.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:(0,p.N9)(se)}),Je.length&&rt.push({type:"submenu",text:(0,d.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:Je,onClick:ae=>{ae.preventDefault()}}),Ve.state.isEditing&&!pe&&!ye&&(rt.push({text:"",type:"divider"}),rt.push({text:(0,d.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:()=>{fe.c.panelMenuItemClicked("remove"),Ee(Ve,we)},shortcut:"p r"})),be.setState({items:rt})})()}const ue=be=>le(be,!0);async function Te(be){const pe=await(0,q.Lp)(be);if(pe)return{text:(0,d.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",onClick:()=>fe.c.panelMenuItemClicked("explore"),href:pe}}function he(be,pe,Ue){const we=[];return be&&!be.meta.skipDataQuery&&(we.push({text:(0,d.t)("panel.header-menu.inspect-data","Data"),href:(0,q.Uu)(pe,u.q.Data),onClick:je=>{je.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:u.q.Data}),fe.c.panelMenuInspectClicked(u.q.Data)}}),Ue instanceof Z.H$&&Ue.state.meta.canEdit&&we.push({text:(0,d.t)("panel.header-menu.query","Query"),href:(0,q.Uu)(pe,u.q.Query),onClick:je=>{je.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:u.q.Query}),fe.c.panelMenuInspectClicked(u.q.Query)}})),we.push({text:(0,d.t)("panel.header-menu.inspect-json","Panel JSON"),href:(0,q.Uu)(pe,u.q.JSON),onClick:je=>{je.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:u.q.JSON}),fe.c.panelMenuInspectClicked(u.q.JSON)}}),{text:(0,d.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",href:(0,q.Uu)(pe),onClick:je=>{je.isDefaultPrevented()||(m.Ny.partial({inspect:pe.state.key,inspectTab:u.q.Data}),fe.c.panelMenuInspectClicked(u.q.Data))},subMenu:we.length>0?we:void 0}}function re(be){if(!(be.parent instanceof G.$))throw new Error("parent of VizPanelLinksMenu must be VizPanelLinks");const pe=be.parent.parent;if(!(pe instanceof i.Eb))throw new Error("parent of VizPanelLinks must be VizPanel");be.setState({links:De(pe)})}function De(be){const pe=(je,He)=>i.jh.interpolate(be,je,He),Ue=(0,E.CH)(be,pe);if(!Ue)return[];const we=Ue.getLinks(pe);return we.map(je=>({...je,onClick:(He,rt)=>{fe.c.panelLinkClicked({has_multiple_links:we.length>1}),je.onClick?.(He,rt)}}))}function Fe(be,pe){const Ue=i.jh.getTimeRange(be);let we=(0,a.un)(be);const je=we?.state.queries,He=(0,a.Cs)(be);let rt={};if(be.state.$variables&&be.state.$variables.state.variables.forEach(Je=>{Je instanceof i.xc&&(rt={...rt,[Je.state.name]:{value:Je.getValue(),text:Je.getValueText()}})}),be.parent?.parent instanceof i.tI){const Je=be.parent.parent;Je.state.$variables&&Je.state.$variables.state.variables.forEach(Ve=>{Ve instanceof i.xc&&(rt={...rt,[Ve.state.name]:{value:Ve.getValue(),text:Ve.getValueText()}})})}return{id:He,pluginId:be.state.pluginId,title:be.state.title,timeRange:Ue.state.value.raw,timeZone:(0,n.O)({timeZone:Ue.getTimeZone()}),dashboard:{uid:pe.state.uid,title:pe.state.title,tags:pe.state.tags||[]},targets:je,scopedVars:rt,data:we?.state.data}}function Ee(be,pe){l.A.publish(new v.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",icon:"trash-alt",yesText:"Remove",onConfirm:()=>be.removePanel(pe)}))}const Me=async be=>{fe.c.panelMenuItemClicked("create-alert");const pe=await(0,c.J6)(be),Ue=r.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(pe),returnTo:location.pathname+location.search});m.Ny.push(Ue),fe.c.panelMenuItemClicked("create-alert")};function ze(be){const pe=be.state.options;xe(pe)&&typeof pe.legend.showLegend=="boolean"&&be.onOptionsChange({legend:{showLegend:!pe.legend.showLegend}}),fe.c.panelMenuItemClicked("toggleLegend")}function xe(be){return be!=null&&typeof be=="object"&&"legend"in be}const We=(be,pe)=>{m.Ny.partial({inspect:be.state.key,inspectTab:pe}),fe.c.panelMenuInspectClicked(pe??u.q.Data)}},21970:(Q,I,e)=>{"use strict";e.d(I,{W:()=>o});var t=e(96540),n=e(86849),r=e(2038),s=e(74730);class o extends n.Bs{constructor(){super({}),this.onActivate=()=>{const l=this.parent;if(!l||!(l instanceof n.Eb))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}static{this.Component=m}getPanel(){const l=this.parent;return l&&l instanceof n.Eb?l:null}}function m({model:i}){const l=i.getPanel(),c=n.jh.getData(i).useState();if(!l)return null;const g=(0,s.Cs)(l);return c.data?.series?t.createElement(r.Z,{frames:c.data?.series,panelId:g}):null}},7928:(Q,I,e)=>{"use strict";e.d(I,{v:()=>u});var t=e(32196),n=e(96540),r=e(43127),s=e(65879),o=e(85858),m=e(86849),i=e(40845),l=e(56034),d=e(15666),c=e(91052),g=e(14578);class u extends m.XQ{static{this.Component=E}constructor(a={}){super({...a,from:"now-6h",to:"now",value:(0,r.E2)()}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){this._subs.add(this.subscribeToState((a,h)=>{if(a.timeFrom!==h.timeFrom||a.timeShift!==h.timeShift){const{timeInfo:P,timeRange:y}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({timeInfo:P,value:y})}}))}ancestorTimeRangeChanged(a){const h=this.getTimeOverride(a.value);this.setState({value:h.timeRange,timeInfo:h.timeInfo})}getTimeOverride(a){const{timeFrom:h,timeShift:P}=this.state,y={timeInfo:"",timeRange:a};if(h){const C=m.jh.interpolate(this,this.state.timeFrom),f=s.describeTextRange(C);if(f.invalid)return y.timeInfo="invalid time override",y;s.isRelativeTimeRange(a.raw)&&(y.timeInfo=f.display,y.timeRange={from:o.parse(f.from),to:o.parse(f.to),raw:{from:f.from,to:f.to}})}if(P){const C=m.jh.interpolate(this,this.state.timeShift);if(s.describeTextRange(C).invalid)return y.timeInfo="invalid timeshift",y;const D="-"+C;y.timeInfo+=" timeshift "+D;const T=o.parseDateMath(D,y.timeRange.from,!1),M=o.parseDateMath(D,y.timeRange.to,!0);y.timeRange={from:T,to:M,raw:{from:T,to:M}}}return y}}function E({model:b}){const{timeInfo:a,hideTimeOverride:h}=b.useState(),P=(0,i.of)(p);return!a||h?null:n.createElement(l.m,{content:n.createElement(d.xS,{timeRange:b.state.value,timeZone:b.getTimeZone()})},n.createElement(c.NR.TitleItem,{className:P.timeshift},n.createElement(g.I,{name:"clock-nine",size:"sm"})," ",a))}const p=b=>({timeshift:(0,t.css)({color:b.colors.text.link,gap:b.spacing(.5),whiteSpace:"nowrap"})})},79284:(Q,I,e)=>{"use strict";e.d(I,{L:()=>s});var t=e(86849),n=e(74730),r=e(30195);class s extends t.Bs{constructor(c){super(c),this._variableDependency=new t.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:this._onVariableUpdateCompleted.bind(this)}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this._performRepeat()}_onVariableUpdateCompleted(){this._performRepeat()}_performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const c=t.jh.lookupVariable(this.state.variableName,this.parent?.parent);if(!c){console.error("RepeatedRowBehavior: Variable not found");return}if(!(c instanceof t.n8)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}if(!(this.parent instanceof t.tI)){console.error("RepeatedRowBehavior: Parent is not a SceneGridRow");return}const g=t.jh.getLayout(this);if(!(g instanceof t.hy)){console.error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return}const u=this.parent,{values:E,texts:p}=(0,n.a7)(c),b=[],a=o(this.state.sources);let h=0;for(let P=0;P<E.length;P++){const y=[];for(const f of this.state.sources){const T=(f.state.y??0)+(a+1)*P,M=f.clone({key:`${f.state.key}-clone-${P}`,y:T});l(M,P),y.push(M),h<T+M.state.height&&(h=T+M.state.height)}const C=this.getRowClone(u,P,E[P],p[P],a,y);b.push(C)}m(g,b,h,u),this.publishEvent(new r.d({source:this}),!0)}getRowClone(c,g,u,E,p,b){if(g===0)return c.setState({$variables:new t.Pj({variables:[new t.xc({name:this.state.variableName,value:u,text:String(E)})]}),children:b}),c;const a=c.state.y??0;return c.clone({key:`${c.state.key}-clone-${g}`,$variables:new t.Pj({variables:[new t.xc({name:this.state.variableName,value:u,text:String(E)})]}),$behaviors:[],children:b,y:a+p*g+g})}}function o(d){let c=0,g=Number.MAX_VALUE;if(d.length===0)return 0;for(const u of d)u.state.y+u.state.height>c&&(c=u.state.y+u.state.height),u.state.y<g&&(g=u.state.y);return c-g}function m(d,c,g,u){const E=i(d,u),p=E.indexOf(u);if(p===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const b=[...E.slice(0,p),...c,...E.slice(p+1)];if(E.length>p+1){const a=E.slice(p+1),h=a[0].state.y,P=g-h;for(const y of a)if(y.setState({y:y.state.y+P}),y instanceof t.tI)for(const C of y.state.children)C.setState({y:C.state.y+P})}d.setState({children:b})}function i(d,c){return d.state.children.filter(g=>!g.state.key?.startsWith(`${c.state.key}-clone-`))}function l(d,c){d.forEachChild(g=>{g.setState({key:`${g.state.key}-row-${c}`}),l(g,c)})}},54174:(Q,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(96540),n=e(96374);const r=({isOpen:s,onConfirm:o,onDismiss:m})=>t.createElement(n.u,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{o(),m()},onDismiss:m,isOpen:s})},58029:(Q,I,e)=>{"use strict";e.d(I,{u:()=>S});var t=e(32196),n=e(96540),r=e(86849),s=e(72109),o=e(40845),m=e(14578),i=e(28138),l=e(14348),d=e(28444),c=e(74730),g=e(41507),u=e(79284),E=e(71678),p=e(37390),b=e(49785),a=e(13544),h=e(88575),P=e(10354),y=e(42418),C=e(55852),f=e(92378);const D=({repeat:x,title:A,parent:R,warning:B,onUpdate:U,onCancel:w})=>{const[K,N]=(0,n.useState)(x),L=(0,n.useCallback)(Y=>N(Y),[N]),{handleSubmit:V,register:F}=(0,b.mN)({defaultValues:{title:A}}),z=Y=>{U(Y.title,K)};return n.createElement("form",{onSubmit:V(z)},n.createElement(h.D,{label:"Title"},n.createElement(P.p,{...F("title"),type:"text"})),n.createElement(h.D,{label:"Repeat for"},n.createElement(f.U,{parent:R,repeat:K,onChange:L})),B&&n.createElement(y.F,{"data-testid":a.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0},B),n.createElement(p.a.ButtonRow,null,n.createElement(C.$n,{type:"button",variant:"secondary",onClick:w,fill:"outline"},"Cancel"),n.createElement(C.$n,{type:"submit"},"Update")))},T=({repeat:x,title:A,parent:R,onDismiss:B,onUpdate:U,warning:w})=>{const K=(0,o.of)(M);return n.createElement(p.a,{isOpen:!0,title:"Row options",onDismiss:B,className:K.modal},n.createElement(D,{parent:R,repeat:x,title:A,onCancel:B,onUpdate:U,warning:w}))},M=()=>({modal:(0,t.css)({label:"RowOptionsModal",width:"500px"})}),O=({repeat:x,title:A,parent:R,onUpdate:B,warning:U})=>{const w=K=>(N,L)=>{B(N,L),K()};return n.createElement(E.$s,null,({showModal:K,hideModal:N})=>n.createElement("button",{type:"button",className:"pointer","aria-label":"Row options",onClick:()=>{K(T,{title:A,repeat:x,parent:R,onDismiss:N,onUpdate:w(N),warning:U})}},n.createElement(m.I,{name:"cog"})))};O.displayName="RowOptionsButton";class S extends r.Bs{constructor(){super(...arguments),this.onUpdate=(A,R)=>{const B=this.getParent();if(!R){const N=B.clone();N.setState({title:A,$behaviors:B.state.$behaviors?.filter(L=>!(L instanceof u.L))??[]}),this.updateLayout(N);return}const U=B.state.children.map(N=>N.clone()),w=new u.L({variableName:R,sources:U}),K=B.state.$behaviors?.filter(N=>!(N instanceof u.L))??[];K.push(w),B.setState({title:A,$behaviors:K}),w.activate()},this.onDelete=()=>{i.A.publish(new d.bY({title:"Delete row",text:"Are you sure you want to remove this row and all its panels?",altActionText:"Delete row only",icon:"trash-alt",onConfirm:()=>{this.getDashboard().removeRow(this.getParent(),!0)},onAltAction:()=>{this.getDashboard().removeRow(this.getParent())}}))},this.getWarning=()=>{if(this.getParent().state.children.some(U=>{if(!(U instanceof g.U))return!1;const w=U.state.body;return w instanceof r.Eb?(0,c.un)(w)?.state.datasource?.uid===l.K:!1}))return n.createElement("div",null,n.createElement("p",null,"Panels in this row use the ",l.K," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."),n.createElement(s.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows"},"Learn more"))}}updateLayout(A){const R=this.getParent(),B=this.getDashboard().state.body;if(!(B instanceof r.hy))throw new Error("Layout is not a SceneGridLayout");const U=B.state.children.filter(K=>!K.state.key?.startsWith(`${R.state.key}-clone-`)),w=U.indexOf(R);if(w===-1)throw new Error("Parent row not found in layout children");B.setState({children:[...U.slice(0,w),A,...U.slice(w+1)]})}getParent(){if(!(this.parent instanceof r.tI))throw new Error("RowActions must have a SceneGridRow parent");return this.parent}getDashboard(){return(0,c.YQ)(this)}static{this.Component=({model:A})=>{const R=A.getDashboard(),B=A.getParent(),{title:U}=B.useState(),{meta:w,isEditing:K}=R.useState(),N=(0,o.of)(v),L=B.state.$behaviors?.find(V=>V instanceof u.L);return n.createElement(n.Fragment,null,w.canEdit&&K&&n.createElement(n.Fragment,null,n.createElement("div",{className:N.rowActions},n.createElement(O,{title:U,repeat:L instanceof u.L?L.state.variableName:void 0,parent:R,onUpdate:A.onUpdate,warning:A.getWarning()}),n.createElement("button",{type:"button",onClick:A.onDelete,"aria-label":"Delete row"},n.createElement(m.I,{name:"trash-alt"})))))}}}const v=x=>({rowActions:(0,t.css)({color:x.colors.text.secondary,lineHeight:"27px",button:{color:x.colors.text.secondary,paddingLeft:x.spacing(2),background:"transparent",border:"none","&:hover":{color:x.colors.text.maxContrast}}})})},30195:(Q,I,e)=>{"use strict";e.d(I,{d:()=>n});var t=e(65463);class n extends t.x{static{this.type="dashboard-repeats-processed"}}},71176:(Q,I,e)=>{"use strict";e.d(I,{X:()=>n});var t=e(79422);function n(r){const s={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{...t.Ye,uid:"",title:"New dashboard",panels:[]}};return r&&(s.meta.folderUid=r),s}},70665:(Q,I,e)=>{"use strict";e.d(I,{x:()=>t});const t={name:"grafana",uid:"grafana"}},13989:(Q,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(86849);function n(r){const s=[];for(const o of r){if(!(o instanceof t.tV.g))continue;const m={...o.state.query,enable:!!o.state.isEnabled,hide:!!o.state.isHidden};s.push(m)}return s}},53287:(Q,I,e)=>{"use strict";e.d(I,{C:()=>m});var t=e(32264),n=e(86849),r=e(79422),s=e(73134),o=e(74730);function m(l){const d=[];for(const c of l.state.variables){const g={name:c.state.name,label:c.state.label,description:c.state.description??void 0,skipUrlSync:!!c.state.skipUrlSync,hide:c.state.hide||r.zL.dontHide,type:c.state.type};if(n.Go.isQueryVariable(c)){let u=[];c.state.refresh===s.CO.never&&(u=i(c.state)),d.push({...g,current:{value:c.state.value,text:c.state.text},options:u,query:c.state.query,definition:c.state.definition,datasource:c.state.datasource,sort:c.state.sort,refresh:c.state.refresh,regex:c.state.regex,allValue:c.state.allValue,includeAll:c.state.includeAll,multi:c.state.isMulti,skipUrlSync:c.state.skipUrlSync})}else if(n.Go.isCustomVariable(c))d.push({...g,current:{text:c.state.value,value:c.state.value},options:i(c.state),query:c.state.query,multi:c.state.isMulti,allValue:c.state.allValue,includeAll:c.state.includeAll});else if(n.Go.isDataSourceVariable(c))d.push({...g,current:{value:c.state.value,text:c.state.text},options:[],regex:c.state.regex,refresh:s.CO.onDashboardLoad,query:c.state.pluginId,multi:c.state.isMulti,allValue:c.state.allValue,includeAll:c.state.includeAll});else if(n.Go.isConstantVariable(c))d.push({...g,current:{value:c.state.value,text:c.state.value},query:c.state.value,hide:r.zL.hideVariable});else if(n.Go.isIntervalVariable(c)){const u=(0,o.bx)(c.state.intervals);d.push({...g,current:{text:c.state.value,value:c.state.value},query:u,refresh:c.state.refresh,options:c.state.intervals.map(E=>({value:E,text:E,selected:E===c.state.value})),auto:c.state.autoEnabled,auto_min:c.state.autoMinInterval,auto_count:c.state.autoStepCount})}else if(n.Go.isTextBoxVariable(c)){const u={text:c.state.value,value:c.state.value};d.push({...g,current:u,options:[{...u,selected:!0}],query:c.state.value})}else if(n.Go.isGroupByVariable(c)&&t.$.featureToggles.groupByVariable)d.push({...g,datasource:c.state.datasource,options:c.state.defaultOptions?.map(u=>({text:u.text,value:String(u.value)})),current:{text:c.state.text,value:c.state.value}});else if(n.Go.isAdHocVariable(c))d.push({...g,name:c.state.name,type:"adhoc",datasource:c.state.datasource,baseFilters:c.state.baseFilters,filters:c.state.filters,defaultKeys:c.state.defaultKeys});else throw new Error("Unsupported variable type")}for(const c of d)c.hide===r.zL.dontHide&&delete c.hide,c.skipUrlSync||delete c.skipUrlSync,c.label===""&&delete c.label,c.multi||delete c.multi,c.sort===s.ZG.disabled&&delete c.sort;return d}function i(l){return l.options.map(d=>({value:String(d.value),text:d.label,selected:Array.isArray(l.value)?l.value.includes(d.value):l.value===d.value}))}},6729:(Q,I,e)=>{"use strict";e.d(I,{Al:()=>H,tt:()=>k,EH:()=>z,wM:()=>L});var t=e(2543),n=e(32264),r=e(86849),s=e(34214),o=e(91309),m=e(38477),i=e(33278),l=e(16279),d=e(41507),c=e(74730);class g{constructor(J,G){this._sceneObject=G,this.state={name:J,type:"dashboard_macro"}}getValue(J){const G=(0,c.YQ)(this._sceneObject);switch(J){case"uid":return G.state.uid||"";case"title":case"name":case"id":default:return G.state.title}}getValueText(){return""}}function u(){const Z=r.Go.registerVariableMacro("__dashboard",g);return()=>Z()}var E=e(45199),p=e(60656),b=e(42397),a=e(7196),h=e(21970),P=e(7928),y=e(79284);const C=Z=>{const J=Z.subscribeToState((G,ne)=>{[G.y,ne.y].includes(0)&&G.y!==ne.y&&Z.forEachChild(te=>{te instanceof r.Eb&&te.state.hoverHeader&&te.setState({hoverHeaderOffset:Z.state.y===0?0:void 0})})});return()=>{J.unsubscribe()}};var f=e(58029),D=e(41987),T=e(69129),M=e(10154),O=e(32023);function S(Z,J){J.app=D.Jk.Dashboard,J.canAddAnnotations=()=>{const G=(0,c.YQ)(Z);return!v(G)||!G.canEditDashboard()?!1:!!G.state.meta.annotationsPermissions?.dashboard.canAdd},J.canEditAnnotations=G=>{const ne=(0,c.YQ)(Z);return ne.canEditDashboard()?G?!!ne.state.meta.annotationsPermissions?.dashboard.canEdit:!!ne.state.meta.annotationsPermissions?.organization.canEdit:!1},J.canDeleteAnnotations=G=>{const ne=(0,c.YQ)(Z);return ne.canEditDashboard()?G?!!ne.state.meta.annotationsPermissions?.dashboard.canDelete:!!ne.state.meta.annotationsPermissions?.organization.canDelete:!1},J.onAnnotationCreate=async G=>{const ne=(0,c.YQ)(Z),te=G.from!==G.to,oe={dashboardUID:ne.state.uid,panelId:(0,c.Cs)(Z),isRegion:te,time:G.from,timeEnd:te?G.to:0,tags:G.tags,text:G.description};await(0,M.vJ)(oe),x(ne),J.eventBus.publish(new T.We(oe))},J.onAnnotationUpdate=async G=>{const ne=(0,c.YQ)(Z),te=G.from!==G.to,oe={id:G.id,dashboardUID:ne.state.uid,panelId:(0,c.Cs)(Z),isRegion:te,time:G.from,timeEnd:te?G.to:0,tags:G.tags,text:G.description};await(0,M.rJ)(oe),x(ne),J.eventBus.publish(new T.We(oe))},J.onAnnotationDelete=async G=>{await(0,M.Xm)({id:G}),x((0,c.YQ)(Z)),J.eventBus.publish(new T.We({id:G}))},J.onAddAdHocFilter=G=>{const ne=(0,c.YQ)(Z),te=(0,c.un)(Z);if(!te)return;const oe=A(ne,te.state.datasource);R(oe,G)},J.onUpdateData=G=>Promise.resolve(!0)}function v(Z){const J=O.b4.getDataLayers(Z);for(const G of J.state.annotationLayers)if(G instanceof r.tV.g&&G.state.isEnabled&&G.state.query.builtIn)return G}function x(Z){const J=v(Z);J&&J.runLayer()}function A(Z,J){const G=r.jh.getVariables(Z);for(const te of G.state.variables)if(r.Go.isAdHocVariable(te)){const oe=te.state.datasource;if(oe===J||oe?.uid===J?.uid)return te}const ne=new r.H9({name:"Filters",datasource:J,useQueriesAsFilterForOptions:!0});return G.setState({variables:[...G.state.variables,ne]}),ne}function R(Z,J){for(const G of Z.state.filters)if(G.key===J.key){Z.setState({filters:Z.state.filters.map(ne=>ne.key===J.key?J:ne)});return}Z.setState({filters:[...Z.state.filters,J]})}var B=e(96556),U=e(7758),w=e(84423);function K(Z){return function(G,ne){if(ne.angularPanelCtrl){G.options={angularOptions:Z.getOptionsToRemember()};return}if((!Z.options||Object.keys(Z.options).length===0)&&(0,t.defaults)(G,Z.getOptionsToRemember()),Z.autoMigrateFrom){const te=w.NB[Z.autoMigrateFrom]!=null,oe=Z.getOptionsToRemember(),le=Z.autoMigrateFrom;if(ne.onPanelTypeChanged){const ue=te?{angular:oe}:oe.options;Object.assign(G.options,ne.onPanelTypeChanged(G,le,ue,G.fieldConfig))}}}}var N=e(70665);function L(Z){const J=new s.G(Z.dashboard,Z.meta),G=z(J);return G.setInitialSaveModel(Z.dashboard),G}function V(Z){const J=[];let G=null,ne=[];for(const te of Z)if(te.type==="row")G?G.id!==te.id&&(J.push(F(G,ne)),G=te,ne=[]):te.collapsed?J.push(F(te,[])):G=te;else if(te.libraryPanel?.uid&&!("model"in te.libraryPanel)){const oe=H(te);if(!oe)continue;G?ne.push(oe):J.push(oe)}else{te.snapshotData&&fe(te);const oe=k(te);G?ne.push(oe):J.push(oe)}return G&&J.push(F(G,ne)),J}function F(Z,J){Z.collapsed&&Z.panels&&(J=Z.panels.map(te=>{if(te instanceof s.a||(te=new s.a(te)),te.libraryPanel?.uid&&!("model"in te.libraryPanel)){const oe=H(te);if(!oe)throw new Error("Failed to build grid item for library panel");return oe}return k(te)}));let G,ne=J;return Z.repeat&&(ne=[],G=[new y.L({variableName:Z.repeat,sources:J})]),new r.tI({key:(0,c.XA)(Z.id),title:Z.title,y:Z.gridPos.y,isCollapsed:Z.collapsed,children:ne,$behaviors:G,actions:new f.u({})})}function z(Z){let J,G=[],ne;if(Z.templating?.list?.length){const le=Z.templating.list.map(ue=>{try{return Y(ue)}catch(Te){return console.error(Te),null}}).filter(ue=>!!ue);J=new r.Pj({variables:le})}else J=new r.Pj({variables:[]});Z.annotations?.list?.length&&!Z.isSnapshot()&&(G=Z.annotations?.list.map(le=>new m.g({key:(0,t.uniqueId)("annotations-"),query:le,name:le.name,isEnabled:!!le.enable,isHidden:!!le.hide})));let te=n.$.unifiedAlertingEnabled;return te||Z.panels.find(le=>!!le.alert)&&(te=!0),te&&(ne=new o.C({key:"alert-states",name:"Alert States"})),new E.H$({description:Z.description,editable:Z.editable,id:Z.id,isDirty:!1,links:Z.links||[],meta:Z.meta,tags:Z.tags||[],title:Z.title,uid:Z.uid,version:Z.version,body:new r.hy({isLazy:!0,children:V(Z.panels),$behaviors:[q]}),$timeRange:new r.JZ({from:Z.time.from,to:Z.time.to,fiscalYearStartMonth:Z.fiscalYearStartMonth,timeZone:Z.timezone,weekStart:Z.weekStart,UNSAFE_nowDelay:Z.timepicker?.nowDelay}),$variables:J,$behaviors:[new r.Gg.K2({sync:Z.graphTooltip}),new r.Gg.Hf,u,ee,new r.Gg.en({enabled:Z.liveNow})],$data:new l.s({annotationLayers:G,alertStatesLayer:ne}),controls:new i.x({variableControls:[new r.K8({}),new r.i7],timePicker:new r.KE({}),refreshPicker:new r.WM({refresh:Z.refresh,intervals:Z.timepicker.refresh_intervals,withText:!0}),hideTimeControls:Z.timepicker.hidden})})}function Y(Z){const J={name:Z.name,label:Z.label,description:Z.description};if(Z.type==="adhoc")return new r.H9({...J,description:Z.description,skipUrlSync:Z.skipUrlSync,hide:Z.hide,datasource:Z.datasource,applyMode:"auto",filters:Z.filters??[],baseFilters:Z.baseFilters??[],defaultKeys:Z.defaultKeys});if(Z.type==="custom")return new r.yP({...J,value:Z.current?.value??"",text:Z.current?.text??"",query:Z.query,isMulti:Z.multi,allValue:Z.allValue||void 0,includeAll:Z.includeAll,defaultToAll:!!Z.includeAll,skipUrlSync:Z.skipUrlSync,hide:Z.hide});if(Z.type==="query")return new r.fS({...J,value:Z.current?.value??"",text:Z.current?.text??"",query:Z.query,datasource:Z.datasource,sort:Z.sort,refresh:Z.refresh,regex:Z.regex,allValue:Z.allValue||void 0,includeAll:Z.includeAll,defaultToAll:!!Z.includeAll,isMulti:Z.multi,skipUrlSync:Z.skipUrlSync,hide:Z.hide,definition:Z.definition});if(Z.type==="datasource")return new r.mI({...J,value:Z.current?.value??"",text:Z.current?.text??"",regex:Z.regex,pluginId:Z.query,allValue:Z.allValue||void 0,includeAll:Z.includeAll,defaultToAll:!!Z.includeAll,skipUrlSync:Z.skipUrlSync,isMulti:Z.multi,hide:Z.hide});if(Z.type==="interval"){const G=(0,c.Sm)(Z.query),ne=(0,c.pk)(Z,G);return new r.Yj({...J,value:ne,intervals:G,autoEnabled:Z.auto,autoStepCount:Z.auto_count,autoMinInterval:Z.auto_min,refresh:Z.refresh,skipUrlSync:Z.skipUrlSync,hide:Z.hide})}else{if(Z.type==="constant")return new r.x0({...J,value:Z.query,skipUrlSync:Z.skipUrlSync,hide:Z.hide});if(Z.type==="textbox"){let G;return Z?.current?.value?typeof Z.current.value=="string"?G=Z.current.value:G=Z.current.value[0]:G=Z.query,new r.TS({...J,value:G,skipUrlSync:Z.skipUrlSync,hide:Z.hide})}else{if(n.$.featureToggles.groupByVariable&&Z.type==="groupby")return new r.ZG({...J,datasource:Z.datasource,value:Z.current?.value||[],text:Z.current?.text||[],skipUrlSync:Z.skipUrlSync,hide:Z.hide,defaultOptions:Z.options});throw new Error(`Scenes: Unsupported variable type ${Z.type}`)}}}function H(Z){if(!Z.libraryPanel)return null;const J=new p.F({title:Z.title,uid:Z.libraryPanel.uid,name:Z.libraryPanel.name,panelKey:(0,c.XA)(Z.id)});return new d.U({key:`grid-item-${Z.id}`,y:Z.gridPos.y,x:Z.gridPos.x,width:Z.gridPos.w,height:Z.gridPos.h,itemHeight:Z.gridPos.h,body:J})}function k(Z){const J=Z.repeatDirection==="h"?"h":"v",G=Z.repeat?{variableName:Z.repeat,repeatDirection:J}:{},ne=[];ne.push(new b.$({rawLinks:Z.links,menu:new b.m({$behaviors:[a.oV]})})),ne.push(new h.W);const te={key:(0,c.XA)(Z.id),title:Z.title,description:Z.description,pluginId:Z.type,options:Z.options??{},fieldConfig:Z.fieldConfig,pluginVersion:Z.pluginVersion,displayMode:Z.transparent?"transparent":void 0,hoverHeader:!Z.title&&!Z.timeFrom&&!Z.timeShift,hoverHeaderOffset:(Z.gridPos?.y??0)===0?0:void 0,$data:(0,B.w)(Z),titleItems:ne,extendPanelContext:S,_UNSAFE_customMigrationHandler:K(Z)};n.$.publicDashboardAccessToken||(te.menu=new r.Lw({$behaviors:[a._i]})),(Z.timeFrom||Z.timeShift)&&(te.$timeRange=new P.v({timeFrom:Z.timeFrom,timeShift:Z.timeShift,hideTimeOverride:Z.hideTimeOverride}));const oe=new r.Eb(te);return new d.U({key:`grid-item-${Z.id}`,x:Z.gridPos.x,y:Z.gridPos.y,width:J==="h"?24:Z.gridPos.w,height:Z.gridPos.h,itemHeight:Z.gridPos.h,body:oe,maxPerRow:Z.maxPerRow,...G,$behaviors:[C]})}function ee(Z){Z.subscribeToEvent(r.Kw,J=>{const{interaction:G}=J.payload;switch(G){case"panel-status-message-clicked":U.c.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":U.c.panelCancelQueryClicked();break;case"panel-menu-shown":U.c.panelMenuShown();break}})}const ie=Z=>Z.map(J=>({data:{values:J.fields.map(G=>G.values).filter(G=>G!==void 0)},schema:{fields:J.fields.map(G=>({name:G.name,type:G.type,config:G.config}))}})),fe=Z=>{Z.snapshotData&&(Z.datasource=N.x,Z.targets=[{refId:Z.snapshotData[0]?.refId??"",datasource:Z.datasource,queryType:"snapshot",snapshot:ie(Z.snapshotData)}],Z.snapshotData=[])};function q(Z){(0,c.YQ)(Z).setState({isEmpty:Z.state.children.length===0});const J=Z.subscribeToState((G,ne)=>{(G.children.length!==ne.children.length||G.children!==ne.children)&&(0,c.YQ)(Z).setState({isEmpty:G.children.length===0})});return()=>{J.unsubscribe()}}},20455:(Q,I,e)=>{"use strict";e.d(I,{Uy:()=>f,Z6:()=>M,ZB:()=>T,c:()=>x});var t=e(2543),n=e.n(t),r=e(92041),s=e(86849),o=e(79422),m=e(73134),i=e(28874),l=e(18803),d=e(79056),c=e(68706),g=e(16279),u=e(41507),E=e(60656),p=e(7928),b=e(79284),a=e(32023),h=e(74730),P=e(70665),y=e(13989),C=e(53287);function f(R,B=!1){const U=R.state,w=U.$timeRange.state,K=U.$data,N=U.$variables,L=U.body;let V=[],F=[];if(L instanceof s.hy){for(const q of L.state.children)if(q instanceof u.U&&(q.state.variableName?V=V.concat(S(q,U,B)):V.push(T(q,U,B))),q instanceof s.tI){if(q.state.key.indexOf("-clone-")>0&&!B)continue;v(q,V,U,B)}}let z=[];K instanceof g.s&&(z=(0,y.O)(K.state.annotationLayers)),N instanceof s.Pj&&(F=(0,C.C)(N));const Y=U.controls?.state,H=Y?.refreshPicker,k=A({refresh_intervals:H?.state.intervals,hidden:Y?.hideTimeControls,nowDelay:w.UNSAFE_nowDelay},o.lt),ee=U.$behaviors?.find(q=>q instanceof s.Gg.K2)?.state.sync??o.Ye.graphTooltip,ie=U.$behaviors?.find(q=>q instanceof s.Gg.en)?.isEnabled||void 0,fe={...o.Ye,title:U.title,description:U.description||void 0,uid:U.uid,id:U.id,editable:U.editable,time:{from:w.from,to:w.to},timepicker:k,panels:V,annotations:{list:z},templating:{list:F},version:U.version,timezone:w.timeZone,fiscalYearStartMonth:w.fiscalYearStartMonth,weekStart:w.weekStart,tags:U.tags,links:U.links,graphTooltip:ee,liveNow:ie,schemaVersion:d.O2,refresh:H?.state.refresh};return(0,i.v)(fe)}function D(R,B){if(!R.state.panel)throw new Error("Library panel has no panel");return{id:(0,h.Cs)(R.state.panel),title:R.state.title,gridPos:B,libraryPanel:{name:R.state.name,uid:R.state.uid}}}function T(R,B,U=!1){let w,K=0,N=0,L=0,V=0;if(R.state.body instanceof E.F)return K=R.state.x??0,N=R.state.y??0,L=R.state.width??0,V=R.state.height??0,D(R.state.body,{x:K,y:N,w:L,h:V});let F=R;if(B&&B.editPanel?.state.vizManager&&B.editPanel.state.vizManager.state.sourcePanel.resolve()===R.state.body){const Y=R.clone();Y.state.body instanceof s.Eb&&(B.editPanel.state.vizManager.commitChangesTo(Y.state.body),F=Y)}if(!(F.state.body instanceof s.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");if(w=F.state.body,K=F.state.x??0,N=F.state.y??0,L=F.state.width??0,V=F.state.height??0,!w)throw new Error("Unsupported grid item type");return M(w,{x:K,y:N,h:V,w:L},U,F)}function M(R,B,U=!1,w){const K={id:(0,h.Cs)(R),type:R.state.pluginId,title:R.state.title,description:R.state.description??void 0,gridPos:B,fieldConfig:R.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:R.state.displayMode==="transparent",pluginVersion:R.state.pluginVersion,...O(R,U)};if(R.state.options){const{angularOptions:V,...F}=R.state.options;K.options=F,V&&(0,t.defaults)(K,V)}const N=R.state.$timeRange;N instanceof p.v&&(K.timeFrom=N.state.timeFrom,K.timeShift=N.state.timeShift,K.hideTimeOverride=N.state.hideTimeOverride),w instanceof u.U&&(w.state.variableName&&(K.repeat=w.state.variableName),w.state.maxPerRow&&(K.maxPerRow=w.state.maxPerRow),w.state.repeatDirection&&(K.repeatDirection=w.getRepeatDirection()));const L=a.b4.getPanelLinks(R);return K.links=L?.state.rawLinks??[],K.links.length===0&&delete K.links,K.transformations?.length===0&&delete K.transformations,K.transparent||delete K.transparent,K}function O(R,B=!1){const U=R.state.$data,w={},K=(0,h.un)(R);if(K&&(w.targets=K.state.queries,w.maxDataPoints=K.state.maxDataPoints,w.datasource=K.state.datasource,K.state.cacheTimeout&&(w.cacheTimeout=K.state.cacheTimeout),K.state.queryCachingTTL&&(w.queryCachingTTL=K.state.queryCachingTTL),K.state.minInterval&&(w.interval=K.state.minInterval)),U instanceof s.Es&&(w.transformations=U.state.transformations),U&&B){w.datasource=P.x;let N=(0,l.B6)(U.state.data);U instanceof s.Es&&(N=(0,l.B6)(U.state.$data.state.data)),w.targets=[{refId:"A",datasource:w.datasource,queryType:c.nj.Snapshot,snapshot:N}]}return w}function S(R,B,U=!1){if(U){if(R.state.body instanceof E.F){const{x:w=0,y:K=0,width:N=0,height:L=0}=R.state;return[D(R.state.body,{x:w,y:K,w:N,h:L})]}if(R.state.repeatedPanels){const w=R.state.itemHeight??10,K=Math.ceil(R.state.repeatedPanels.length/R.getMaxPerRow()),N=Math.ceil(R.state.repeatedPanels.length/K),L=24/N,V=w;return R.state.repeatedPanels.map((z,Y)=>{let H=0,k=0;R.state.repeatDirection==="v"?(H=R.state.x,k=Y*V):(H=Y%N*L,k=R.state.y+Math.floor(Y/N)*V);const ee={x:H,y:k,w:L,h:V},ie=z.state.$variables.getByName(R.state.variableName);return{id:(0,h.Cs)(z),type:z.state.pluginId,title:z.state.title,gridPos:ee,options:z.state.options,fieldConfig:z.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:z.state.displayMode==="transparent",scopedVars:{[R.state.variableName]:{text:ie?.state.text,value:ie?.state.value}},...O(z,U)}})}return[]}else return[T(R,B)]}function v(R,B,U,w=!1){const K=!!R.state.isCollapsed,N={type:"row",id:(0,h.Cs)(R),title:R.state.title,gridPos:{x:R.state.x??0,y:R.state.y??0,w:R.state.width??24,h:R.state.height??1},collapsed:K,panels:[]};if(R.state.$behaviors?.length){const V=R.state.$behaviors[0];V instanceof b.L&&(N.repeat=V.state.variableName)}if(w&&R.state.$variables){const F=R.state.$variables.state.variables.reduce((z,Y)=>({...z,[Y.state.name]:{text:Y.state.text,value:Y.state.value}}),{});N.scopedVars=F}B.push(N);let L=[];w?R.state.children.forEach(V=>{V instanceof u.U&&(V.state.variableName?L=L.concat(S(V,U,!K)):L.push(T(V,U,!K)))}):L=R.state.children.map(V=>{if(!(V instanceof u.U))throw new Error("Row child expected to be DashboardGridItem");return T(V,U)}),R.state.isCollapsed?N.panels=L:B.push(...L)}function x(R,B,U,w){let K={...U,title:R,time:{from:B.from.toISOString(),to:B.to.toISOString()},links:[]};if(w){const N=U.panels?.find(L=>L.id===(0,h.Cs)(w));N&&(N.gridPos={w:24,x:0,y:0,h:20},K={...K,panels:[N]})}if(K.panels?.forEach(N=>{"links"in N&&(N.links=[])}),K.annotations){const L=(K.annotations.list?.filter(V=>V.enable)||[]).map(V=>({name:V.name,enable:V.enable,iconColor:V.iconColor,type:V.type,builtIn:V.builtIn,hide:V.hide,snapshotData:[]}));K.annotations.list=L}return K.templating&&K.templating.list?.forEach(N=>{"query"in N&&(N.query=""),"options"in N&&(N.options=N.current&&!(0,r.R)(N.current)?[N.current]:[]),"refresh"in N&&(N.refresh=m.CO.never)}),K}function A(R,B){const U={...R};for(const w in B)(0,t.isEqual)(U[w],B[w])&&delete U[w];return U}},46502:(Q,I,e)=>{"use strict";e.d(I,{F:()=>r});var t=e(96540),n=e(7376);class r extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(o){o.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const o=(0,n.E)(),m='<plugin-component type="annotations-query-ctrl"> </plugin-component>',i={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=o.load(this.ref,i,m),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(i.ctrl.ignoreNextWatcherFiring){i.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(i.ctrl.currentAnnotation)}),this.scopeProps=i}render(){return t.createElement("div",{ref:o=>this.ref=o})}}},65857:(Q,I,e)=>{"use strict";e.d(I,{d:()=>u});var t=e(96540),n=e(88575),r=e(10354),s=e(88323),o=e(79924),m=e(57418),i=e(10880),l=e(55852),d=e(4588);const c=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],g=Object.keys(d.G).map(E=>({label:E,value:E}));function u({link:E,onUpdate:p,onGoBack:b}){const a=f=>{p({...E,tags:f})},h=f=>{const D={...E,type:f.value};D.type==="dashboards"?(D.url="",D.tooltip=""):D.tags=[],p(D)},P=f=>{p({...E,icon:f.value})},y=f=>{const D=f.currentTarget;p({...E,[D.name]:D.type==="checkbox"?D.checked:D.value})},C=E.title===d.q.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.D,{label:"Title"},t.createElement(r.p,{name:"title",id:"title",value:E.title,onChange:y,autoFocus:C})),t.createElement(n.D,{label:"Type"},t.createElement(s.l6,{inputId:"link-type-input",value:E.type,options:c,onChange:h})),E.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"With tags"},t.createElement(o.u,{tags:E.tags,onChange:a}))),E.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"URL"},t.createElement(r.p,{name:"url",value:E.url,onChange:y})),t.createElement(n.D,{label:"Tooltip"},t.createElement(r.p,{name:"tooltip",value:E.tooltip,onChange:y,placeholder:"Open dashboard"})),t.createElement(n.D,{label:"Icon"},t.createElement(s.l6,{value:E.icon,options:g,onChange:P}))),t.createElement(m.M,{label:"Options",isOpen:!0},E.type==="dashboards"&&t.createElement(n.D,null,t.createElement(i.S,{label:"Show as dropdown",name:"asDropdown",value:E.asDropdown,onChange:y})),t.createElement(n.D,null,t.createElement(i.S,{label:"Include current time range",name:"keepTime",value:E.keepTime,onChange:y})),t.createElement(n.D,null,t.createElement(i.S,{label:"Include current template variable values",name:"includeVars",value:E.includeVars,onChange:y})),t.createElement(n.D,null,t.createElement(i.S,{label:"Open link in new tab",name:"targetBlank",value:E.targetBlank,onChange:y}))),t.createElement(l.$n,{variant:"secondary",onClick:b},"Back to list"))}},6199:(Q,I,e)=>{"use strict";e.d(I,{X:()=>g});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(66864),m=e(64149),i=e(29158),l=e(91605),d=e(55852),c=e(7521);function g({links:E,onNew:p,onOrderChange:b,onEdit:a,onDuplicate:h,onDelete:P}){const y=(0,r.of)(u);return E.length===0?n.createElement("div",null,n.createElement(c.A,{onClick:p,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,E.map((f,D)=>n.createElement("tr",{key:`${f.title}-${D}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>a(D)},n.createElement(s.I,{name:"external-link-alt"})," \xA0 ",f.type),n.createElement("td",{role:"gridcell"},n.createElement(o.Gy,null,f.title&&n.createElement("span",{className:y.titleWrapper},f.title),f.type==="link"&&n.createElement("span",{className:y.urlWrapper},f.url),f.type==="dashboards"&&n.createElement(m.L,{tags:f.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},D!==0&&n.createElement(i.K,{name:"arrow-up",onClick:()=>b(D,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},E.length>1&&D!==E.length-1?n.createElement(i.K,{name:"arrow-down",onClick:()=>b(D,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(i.K,{name:"copy",onClick:()=>h(f),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(l.e,{"aria-label":`Delete link with title "${f.title}"`,size:"sm",onConfirm:()=>P(D)})))))),n.createElement(d.$n,{className:y.newLinkButton,icon:"plus",onClick:p},"New link"))}const u=E=>({titleWrapper:(0,t.css)({width:"20vw",textOverflow:"ellipsis",overflow:"hidden"}),urlWrapper:(0,t.css)({width:"40vw",textOverflow:"ellipsis",overflow:"hidden"}),newLinkButton:(0,t.css)({marginTop:E.spacing(3)})})},4588:(Q,I,e)=>{"use strict";e.d(I,{G:()=>n,q:()=>t});const t={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},n={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"}},27803:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>c});var t=e(96540),n=e(72436),r=e(13544),s=e(88575),o=e(42418),m=e(15292),i=e(32372),l=e(51612),d=e(58975);function c({datasource:g,infoText:u,onDataSourceChange:E,onDefaultKeysChange:p,defaultKeys:b}){const a=(0,t.useCallback)(h=>{const P=(0,n.Jh)(`key,value
`+h)[0],y=[];for(let C=0;C<P.length;C++)y.push({text:P.fields[0].values[C],value:P.fields[1].values[C]});p?.(y)},[p]);return t.createElement(t.Fragment,null,t.createElement(d.Y,null,"Ad-hoc options"),t.createElement(s.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(l.s,{current:g,onChange:E,width:30,variables:!0,noDefault:!0})),u?t.createElement(o.F,{title:u,severity:"info","data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.infoText}):null,p&&t.createElement(t.Fragment,null,t.createElement(s.D,{label:"Use static key dimensions",description:"Provide dimensions as CSV: dimensionName, dimensionId"},t.createElement(m.d,{"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.modeToggle,value:b!==void 0,onChange:h=>{p(b===void 0?[]:void 0)}})),b!==void 0&&t.createElement(i.B,{height:300,language:"csv",value:b.map(h=>`${h.text},${h.value}`).join(`
`),onBlur:a,onSave:a,showMiniMap:!1,showLineNumbers:!0})))}},95802:(Q,I,e)=>{"use strict";e.d(I,{d:()=>o});var t=e(96540),n=e(13544),r=e(58975),s=e(14329);function o({onChange:m,constantValue:i}){return t.createElement(t.Fragment,null,t.createElement(r.Y,null,"Constant options"),t.createElement(s._,{defaultValue:i,name:"Value",placeholder:"your metric prefix",onBlur:m,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}},58711:(Q,I,e)=>{"use strict";e.d(I,{w:()=>m});var t=e(96540),n=e(13544),r=e(58975),s=e(85140),o=e(94618);function m({query:i,multi:l,allValue:d,includeAll:c,onQueryChange:g,onMultiChange:u,onIncludeAllChange:E,onAllValueChange:p}){return t.createElement(t.Fragment,null,t.createElement(r.Y,null,"Custom options"),t.createElement(s.Z,{name:"Values separated by comma",defaultValue:i,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onBlur:g,required:!0,width:52,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),t.createElement(r.Y,null,"Selection options"),t.createElement(o.B,{multi:l,includeAll:c,allValue:d,onMultiChange:u,onIncludeAllChange:E,onAllValueChange:p}))}},98917:(Q,I,e)=>{"use strict";e.d(I,{y:()=>i});var t=e(96540),n=e(13544),r=e(94618),s=e(58975),o=e(89458),m=e(14329);function i({query:l,regex:d,optionTypes:c,onChange:g,onRegExBlur:u,multi:E,includeAll:p,allValue:b,onMultiChange:a,onIncludeAllChange:h,onAllValueChange:P}){const y=c.find(C=>C.value===l)??c[0];return t.createElement(t.Fragment,null,t.createElement(s.Y,null,"Data source options"),t.createElement(o.v,{name:"Type",value:y,options:c,onChange:g,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),t.createElement(m._,{defaultValue:d,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onBlur:u,description:t.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",t.createElement("br",null),t.createElement("br",null),"Example: ",t.createElement("code",null,"/^prod/"))}),t.createElement(s.Y,null,"Selection options"),t.createElement(r.B,{multi:E,includeAll:p,allValue:b,onMultiChange:a,onIncludeAllChange:h,onAllValueChange:P}))}},49317:(Q,I,e)=>{"use strict";e.d(I,{s:()=>d});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(99615),m=e(58975),i=e(89458),l=e(14329);function d({intervals:g,onIntervalsChange:u,onAutoEnabledChange:E,onAutoMinIntervalChanged:p,onAutoCountChanged:b,autoEnabled:a,autoMinInterval:h,autoStepCount:P}){const y=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(D=>({label:`${D}`,value:D})),C=(0,s.of)(c),f=y.find(D=>D.value===P)??y[0];return n.createElement(n.Fragment,null,n.createElement(m.Y,null,"Interval options"),n.createElement(l._,{defaultValue:g,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onBlur:u,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),n.createElement(o.c,{value:a,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:E,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.autoEnabledCheckbox}),a&&n.createElement("div",{className:C.autoFields},n.createElement(i.v,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:f,options:y,onChange:b,width:9,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.stepCountIntervalSelect}),n.createElement(l._,{value:h,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:p,width:11,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.minIntervalInput})))}const c=g=>({autoFields:(0,t.css)({marginTop:g.spacing(2),display:"flex",flexDirection:"column"})})},44890:(Q,I,e)=>{"use strict";e.d(I,{u:()=>v});var t=e(96540),n=e(16817),r=e(13544),s=e(19347),o=e(88575),m=e(39070),i=e(72574),l=e(90613),d=e(94753),c=e(24240);function g({query:x,datasource:A,VariableQueryEditor:R,onLegacyQueryChange:B,onQueryChange:U,timeRange:w}){let K;return typeof x=="string"?K=x||(A.variables?.getDefaultQuery?.()??""):K={...A.variables?.getDefaultQuery?.(),...x},R&&(0,c.VN)(R,A)?t.createElement(l.a,{marginBottom:2},t.createElement(d.E,{element:"h4"},"Query"),t.createElement(l.a,{marginTop:1},t.createElement(R,{key:A.uid,datasource:A,query:K,templateSrv:(0,i.w)(),onChange:B}))):R&&(0,c.CH)(R,A)?t.createElement(l.a,{marginBottom:2},t.createElement(d.E,{element:"h4"},"Query"),t.createElement(l.a,{marginTop:1},t.createElement(R,{key:A.uid,datasource:A,query:K,onChange:U,onRunQuery:()=>{},data:{series:[],state:m.Gu.Done,timeRange:w},range:w,onBlur:()=>{},history:[]}))):null}var u=e(94618),E=e(51612),p=e(70766),b=e(12470),a=e(40845),h=e(94354),P=e(60619);const y=[{label:"On dashboard load",value:b.CO.onDashboardLoad},{label:"On time range change",value:b.CO.onTimeRangeChanged}];function C({onChange:x,refresh:A,testId:R}){const B=(0,a.$j)(),[U,w]=(0,t.useState)(!1);(0,P.Y)({breakpoint:B.breakpoints.values.sm,onChange:N=>{w(!N.matches)}});const K=(0,t.useMemo)(()=>y.find(N=>N.value===A)?.value??y[0].value,[A]);return t.createElement(o.D,{label:"Refresh",description:"When to update the values of this variable","data-testid":R},t.createElement(h.z,{options:y,onChange:x,value:K,size:U?"sm":"md"}))}var f=e(89458),D=e(80484);const T=[{label:"Disabled",value:D.ZG.disabled},{label:"Alphabetical (asc)",value:D.ZG.alphabeticalAsc},{label:"Alphabetical (desc)",value:D.ZG.alphabeticalDesc},{label:"Numerical (asc)",value:D.ZG.numericalAsc},{label:"Numerical (desc)",value:D.ZG.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:D.ZG.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:D.ZG.alphabeticalCaseInsensitiveDesc},{label:"Natural (asc)",value:D.ZG.naturalAsc},{label:"Natural (desc)",value:D.ZG.naturalDesc}];function M({onChange:x,sort:A,testId:R}){const B=(0,t.useMemo)(()=>T.find(U=>U.value===A)??T[0],[A]);return t.createElement(f.v,{name:"Sort",description:"How to sort the values of this variable",value:B,options:T,onChange:x,testId:R,width:25})}var O=e(58975),S=e(85140);function v({datasource:x,onDataSourceChange:A,query:R,onQueryChange:B,onLegacyQueryChange:U,timeRange:w,regex:K,onRegExChange:N,sort:L,onSortChange:V,refresh:F,onRefreshChange:z,isMulti:Y,onMultiChange:H,includeAll:k,onIncludeAllChange:ee,allValue:ie,onAllValueChange:fe}){const{value:q}=(0,n.A)(async()=>{const G=await(0,s.l)().get(x??""),ne=await(0,p.y)(G);return{datasource:G,VariableQueryEditor:ne}},[x]),{datasource:Z,VariableQueryEditor:J}=q??{};return t.createElement(t.Fragment,null,t.createElement(O.Y,null,"Query options"),t.createElement(o.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(E.s,{current:x,onChange:A,variables:!0,width:30})),Z&&J&&t.createElement(g,{onQueryChange:B,onLegacyQueryChange:U,datasource:Z,query:R,VariableQueryEditor:J,timeRange:w}),t.createElement(S.Z,{defaultValue:K??"",name:"Regex",description:t.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",t.createElement("br",null),"Named capture groups can be used to separate the display text and value (",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:N,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),t.createElement(M,{testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:V,sort:L}),t.createElement(C,{testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:z,refresh:F}),t.createElement(O.Y,null,"Selection options"),t.createElement(u.B,{multi:!!Y,includeAll:!!k,allValue:ie,onMultiChange:H,onIncludeAllChange:ee,onAllValueChange:fe}))}},94618:(Q,I,e)=>{"use strict";e.d(I,{B:()=>m});var t=e(96540),n=e(13544),r=e(66864),s=e(99615),o=e(14329);function m({multi:i,includeAll:l,allValue:d,onMultiChange:c,onIncludeAllChange:g,onAllValueChange:u}){return t.createElement(r.gW,{spacing:"md",height:"inherit"},t.createElement(s.c,{value:i,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:c,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch}),t.createElement(s.c,{value:l,name:"Include All option",description:"Enables an option to include all variables",onChange:g,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch}),l&&t.createElement(o._,{defaultValue:d??"",onBlur:u,name:"Custom all value",placeholder:"blank = auto",testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput}))}},99615:(Q,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(16792),n=e(96540),r=e(10880);function s({value:o,name:m,description:i,onChange:l,ariaLabel:d,testId:c}){const g=(0,t.Bi)();return n.createElement(r.S,{id:g,label:m,description:i,value:o,onChange:l,"aria-label":d,"data-testid":c})}},8964:(Q,I,e)=>{"use strict";e.d(I,{D:()=>m});var t=e(96540),n=e(12470),r=e(88575),s=e(94354);const o=[{label:"Label and value",value:n.zL.dontHide},{label:"Value",value:n.zL.hideLabel},{label:"Nothing",value:n.zL.hideVariable}];function m({onChange:i,hide:l,type:d}){const c=(0,t.useMemo)(()=>o.find(g=>g.value===l)?.value??o[0].value,[l]);return d==="constant"?null:t.createElement(r.D,{label:"Show on dashboard"},t.createElement(s.z,{options:o,onChange:i,value:c}))}},58975:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(17408);function o({className:i,...l}){const d=(0,r.of)(m);return n.createElement(s.s,{...l,className:(0,t.cx)(d.legend,i)})}function m(i){return{legend:(0,t.css)({marginTop:i.spacing(3),marginBottom:i.spacing(1)})}}},89458:(Q,I,e)=>{"use strict";e.d(I,{v:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(88575),o=e(88323);function m({name:l,description:d,value:c,options:g,onChange:u,testId:E,width:p}){const b=(0,r.of)(i),a=(0,n.useId)(),h=`variable-select-input-${l}-${a}`;return n.createElement(s.D,{label:l,description:d,htmlFor:h},n.createElement(o.l6,{"data-testid":E,inputId:h,onChange:u,value:c,width:p??30,options:g,className:b.selectContainer}))}function i(l){return{selectContainer:(0,t.css)({marginRight:l.spacing(.5)})}}},85140:(Q,I,e)=>{"use strict";e.d(I,{$:()=>l,Z:()=>i});var t=e(32196),n=e(16792),r=e(96540),s=e(40845),o=e(88575),m=e(21744);function i({value:d,defaultValue:c,name:g,description:u,placeholder:E,onChange:p,onBlur:b,ariaLabel:a,required:h,width:P,testId:y}){const C=(0,s.of)(l),f=(0,n.Bi)();return r.createElement(o.D,{label:g,description:u,htmlFor:f},r.createElement(m.f,{id:f,rows:2,value:d,defaultValue:c,onChange:p,onBlur:b,placeholder:E,required:h,"aria-label":a,cols:P,className:C.textarea,"data-testid":y}))}function l(d){return{textarea:(0,t.css)({whiteSpace:"pre-wrap",minHeight:d.spacing(4),height:"auto",overflow:"auto",padding:`${d.spacing(.75)} ${d.spacing(1)}`,width:"inherit",[d.breakpoints.down("sm")]:{width:"100%"}})}}},14329:(Q,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(16792),n=e(96540),r=e(88575),s=e(10354);function o({value:m,defaultValue:i,name:l,placeholder:d="",onChange:c,testId:g,width:u,required:E,onBlur:p,grow:b,description:a,invalid:h,error:P,maxLength:y}){const C=(0,t.Bi)(l);return n.createElement(r.D,{label:l,description:a,invalid:h,error:P,htmlFor:C},n.createElement(s.p,{type:"text",id:C,placeholder:d,value:m,defaultValue:i,onChange:c,onBlur:p,width:b?void 0:u??30,"data-testid":g,maxLength:y,required:E}))}},41820:(Q,I,e)=>{"use strict";e.d(I,{j:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(39268),m=e(76892),i=e(55852);const l=({options:c})=>{const[g,u]=(0,n.useState)(20),[E,p]=(0,n.useState)([]),b=(0,n.useCallback)(h=>{h.preventDefault(),u(g+20)},[g,u]),a=(0,s.of)(d);return(0,n.useEffect)(()=>p(c.slice(0,g)),[g,c]),E.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(o.C,null,E.map((h,P)=>n.createElement(o.C,{key:`${h.value}-${P}`,className:a.optionContainer},n.createElement(m.c,{"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:a.label},h.label))))),c.length>g&&n.createElement(o.C,{className:a.optionContainer},n.createElement(i.$n,{onClick:b,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};l.displayName="VariableValuesPreview";function d(c){return{wrapper:(0,t.css)({display:"flex",flexDirection:"column",marginTop:c.spacing(2)}),optionContainer:(0,t.css)({marginLeft:c.spacing(.5),marginBottom:c.spacing(.5)}),label:(0,t.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}},19626:(Q,I,e)=>{"use strict";e.d(I,{D:()=>u});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(14578);const m=({diff:p})=>{const b=(0,s.of)(i),a=!(0,n.isUndefined)(p.originalValue)&&!(0,n.isArray)(p.originalValue)&&!(0,n.isObject)(p.originalValue),h=!(0,n.isUndefined)(p.value)&&!(0,n.isArray)(p.value)&&!(0,n.isObject)(p.value);return r.createElement(r.Fragment,null,a&&r.createElement("span",{className:b},String(p.originalValue)),a&&h?r.createElement(o.I,{name:"arrow-right"}):null,h&&r.createElement("span",{className:b},String(p.value)))},i=p=>(0,t.css)({backgroundColor:p.colors.action.hover,borderRadius:p.shape.radius.default,color:p.colors.text.primary,fontSize:p.typography.body.fontSize,margin:p.spacing(0,.5),padding:p.spacing(.25,.5)});var l=e(56596);const d={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0,endLineNumber:0},c=({diff:p,title:b})=>{const a=(0,s.of)(g);return p?r.createElement(r.Fragment,null,r.createElement(o.I,{type:"mono",name:"circle",className:a[p.op],size:"xs"})," ",r.createElement("span",{className:a.embolden},b)," ",r.createElement("span",null,(0,l.Fl)(p,p.path.length>1))," ",r.createElement(m,{diff:p})):r.createElement("div",{className:a.withoutDiff},r.createElement(o.I,{type:"mono",name:"circle",className:a.replace,size:"xs"})," ",r.createElement("span",{className:a.embolden},b)," ",r.createElement("span",null,(0,l.Fl)(d,!1)))},g=p=>({embolden:(0,t.css)({fontWeight:p.typography.fontWeightBold}),add:(0,t.css)({color:p.colors.success.main}),replace:(0,t.css)({color:p.colors.success.main}),move:(0,t.css)({color:p.colors.success.main}),copy:(0,t.css)({color:p.colors.success.main}),_get:(0,t.css)({color:p.colors.success.main}),test:(0,t.css)({color:p.colors.success.main}),remove:(0,t.css)({color:p.colors.success.main}),withoutDiff:(0,t.css)({marginBottom:p.spacing(1)})}),u=({diffs:p,title:b})=>{const a=(0,s.of)(E);return p.length===1?r.createElement("div",{className:a.container,"data-testid":"diffGroup"},r.createElement(c,{title:b,diff:p[0]})):r.createElement("div",{className:a.container,"data-testid":"diffGroup"},r.createElement(c,{title:b}),r.createElement("ul",{className:a.list},p.map((h,P)=>r.createElement("li",{className:a.listItem,key:`${(0,n.last)(h.path)}__${P}`},r.createElement("span",null,(0,l.Fl)(h))," ",r.createElement(m,{diff:h})))))},E=p=>({container:(0,t.css)({}),list:(0,t.css)({marginLeft:p.spacing(4)}),listItem:(0,t.css)({marginBottom:p.spacing(1),"&:last-child":{marginBottom:0}})})},22764:(Q,I,e)=>{"use strict";e.d(I,{M:()=>i});var t=e(32196),n=e(96540),r=e(24773),s=e.n(r),o=e(84140),m=e(40845);const i=({oldValue:l,newValue:d})=>{const c=(0,m.$j)(),g={variables:{dark:{diffViewerBackground:c.colors.background.canvas,diffViewerColor:c.colors.text.primary,addedBackground:(0,o.A)(c.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,o.A)(c.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,o.A)(c.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,o.A)(c.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,o.A)(c.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,o.A)(c.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:c.colors.background.primary,gutterBackgroundDark:c.colors.background.primary,highlightBackground:(0,o.A)(c.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,o.A)(c.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:c.colors.background.secondary,codeFoldBackground:c.colors.background.secondary,emptyLineBackground:c.colors.background.secondary,gutterColor:c.colors.text.disabled,addedGutterColor:c.colors.text.primary,removedGutterColor:c.colors.text.primary,codeFoldContentColor:c.colors.text.disabled,diffViewerTitleBackground:c.colors.background.secondary,diffViewerTitleColor:c.colors.text.disabled,diffViewerTitleBorderColor:c.colors.border.strong}},codeFold:{fontSize:c.typography.bodySmall.fontSize},gutter:{pre:{color:(0,o.A)(c.colors.text.disabled).setAlpha(1).toString(),opacity:.61}}};return n.createElement("div",{className:(0,t.css)({fontSize:c.typography.bodySmall.fontSize,pre:{all:"revert"}})},n.createElement(s(),{styles:g,oldValue:l,newValue:d,splitView:!1,compareMethod:r.DiffMethod.CSS,useDarkTheme:c.isDark}))}},57714:(Q,I,e)=>{"use strict";e.d(I,{Cc:()=>A,me:()=>y,bS:()=>p,rJ:()=>T,wL:()=>r});var t=e(17172);class n{getHistoryList(U,w){return typeof U!="string"?Promise.resolve([]):(0,t.AI)().get(`api/dashboards/uid/${U}/versions`,w)}getDashboardVersion(U,w){return typeof U!="string"?Promise.resolve({}):(0,t.AI)().get(`api/dashboards/uid/${U}/versions/${w}`)}restoreDashboard(U,w){if(typeof U!="string")return Promise.resolve({});const K=`api/dashboards/uid/${U}/restore`;return(0,t.AI)().post(K,{version:w})}}const r=new n;var s=e(32196),o=e(96540),m=e(40845),i=e(10880),l=e(78369),d=e(71678),c=e(55852),g=e(96374),u=e(3169);const E=({hideModal:B,onRestore:U,version:w})=>{const K=(0,u._2)(),N=async()=>{await U(w)?K.success("Dashboard restored",`Restored from version ${w.version}`):K.error("Dashboard restore failed",`Failed to restore from version ${w.version}`),B()};return o.createElement(g.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:B,onConfirm:N,body:o.createElement("p",null,"Are you sure you want to restore the dashboard to version ",w.version,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${w.version}`})},p=({versions:B,canCompare:U,onCheck:w,onRestore:K})=>{const N=(0,m.of)(b);return o.createElement("div",{className:N.margin},o.createElement("table",{className:"filter-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"width-4"}),o.createElement("th",{className:"width-4"},"Version"),o.createElement("th",{className:"width-14"},"Date"),o.createElement("th",{className:"width-10"},"Updated by"),o.createElement("th",null,"Notes"),o.createElement("th",null))),o.createElement("tbody",null,B.map((L,V)=>o.createElement("tr",{key:L.id},o.createElement("td",null,o.createElement(i.S,{"aria-label":`Toggle selection of version ${L.version}`,className:(0,s.css)({display:"inline"}),checked:L.checked,onChange:F=>w(F,L.id),disabled:!L.checked&&U})),o.createElement("td",null,L.version),o.createElement("td",null,L.createdDateString),o.createElement("td",null,L.createdBy),o.createElement("td",null,L.message),o.createElement("td",{className:"text-right"},V===0?o.createElement(l.v,{name:"Latest",colorIndex:17}):o.createElement(d.$s,null,({showModal:F,hideModal:z})=>o.createElement(c.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{F(E,{version:L,hideModal:z,onRestore:K})}},"Restore"))))))))};function b(B){return{margin:(0,s.css)({marginBottom:B.spacing(4)})}}var a=e(2543),h=e(29158),P=e(14578);const y=({onClick:B=a.noop,baseVersion:U=0,newVersion:w=0,isNewLatest:K=!1})=>{const N=(0,m.of)(C);return o.createElement("h3",{className:N.header},o.createElement(h.K,{name:"arrow-left",size:"xl",onClick:B,tooltip:"Reset version"}),o.createElement("span",null,"Comparing ",U," ",o.createElement(P.I,{name:"arrows-h"})," ",w," ",K&&o.createElement("cite",{className:"muted"},"(Latest)")))},C=B=>({header:(0,s.css)({fontSize:B.typography.h3.fontSize,display:"flex",gap:B.spacing(2),marginBottom:B.spacing(2)})});var f=e(67061),D=e(56034);const T=({hasMore:B,canCompare:U,getVersions:w,getDiff:K,isLastPage:N})=>o.createElement(f.B,null,B&&o.createElement(c.$n,{type:"button",onClick:()=>w(!0),variant:"secondary",disabled:N},"Show more versions"),o.createElement(D.m,{content:"Select two versions to start comparing",placement:"bottom"},o.createElement(c.$n,{type:"button",disabled:!U,onClick:K,icon:"code-branch"},"Compare versions")));var M=e(90613),O=e(57418),S=e(19626),v=e(22764),x=e(56596);const A=({baseInfo:B,newInfo:U,diffData:w,isNewLatest:K,onRestore:N})=>{const L=(0,x.G4)(w.lhs,w.rhs),V=(0,m.of)(R);return o.createElement(f.B,{direction:"column",gap:1},o.createElement(f.B,{justifyContent:"space-between",alignItems:"center"},o.createElement(f.B,{alignItems:"center"},o.createElement("span",{className:(0,s.cx)(V.versionInfo,V.noMarginBottom)},o.createElement("strong",null,"Version ",B.version)," updated by ",B.createdBy," ",B.ageString,B.message),o.createElement(P.I,{name:"arrow-right",size:"sm"}),o.createElement("span",{className:V.versionInfo},o.createElement("strong",null,"Version ",U.version)," updated by ",U.createdBy," ",U.ageString,U.message)),K&&o.createElement(d.$s,null,({showModal:F,hideModal:z})=>o.createElement(c.$n,{variant:"destructive",icon:"history",onClick:()=>{F(E,{version:B,onRestore:N,hideModal:z})}},"Restore to version ",B.version))),Object.entries(L).map(([F,z])=>o.createElement(S.D,{diffs:z,key:F,title:F})),o.createElement(M.a,{paddingTop:2},o.createElement(O.M,{isOpen:!1,label:"View JSON Diff"},o.createElement(v.M,{oldValue:JSON.stringify(w.lhs,null,2),newValue:JSON.stringify(w.rhs,null,2)}))))},R=B=>({versionInfo:(0,s.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize}),noMarginBottom:(0,s.css)({marginBottom:0})})},56596:(Q,I,e)=>{"use strict";e.d(I,{Fl:()=>m,G4:()=>o});var t=e(16111),n=e(25504),r=e(2543),s=e.n(r);const o=(d,c)=>{const g=(0,t.UD)(d,c),u=n.stringify(d,null,2),E=n.stringify(c,null,2),p=h=>h.map(P=>{let y,C,f=0,D=0;const T=(0,r.tail)(P.path.split("/"));return P.op==="replace"&&E.pointers[P.path]&&(y=(0,r.get)(d,T),C=P.value,f=E.pointers[P.path].value.line,D=E.pointers[P.path].valueEnd.line),P.op==="add"&&E.pointers[P.path]&&(C=P.value,f=E.pointers[P.path].value.line,D=E.pointers[P.path].valueEnd.line),P.op==="remove"&&u.pointers[P.path]&&(y=(0,r.get)(d,T),f=u.pointers[P.path].value.line,D=u.pointers[P.path].valueEnd.line),{op:P.op,value:C,path:T,originalValue:y,startLineNumber:f,endLineNumber:D}}),b=h=>(0,r.sortBy)(h,"startLineNumber"),a=h=>h.reduce((P,y)=>{const C=y.path[0];return P[C]||(P[C]=[]),P[C].push(y),P},{});return(0,r.flow)([p,b,a])(g)},m=(d,c=!0)=>{const g=(0,r.last)(d.path),u=i(g),E=d.op==="remove"?d.originalValue:d.value;let p=l(d.op);return c&&(u?p+=` item ${g}`:(0,r.isArray)(E)&&!(0,r.isEmpty)(E)?p+=` ${E.length} ${g}`:p+=` ${g}`),p},i=d=>!(0,r.isNaN)((0,r.toNumber)(d)),l=d=>d==="add"?"added":d==="remove"?"deleted":"changed"},58441:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>tt});var t=e(96540),n=e(32264),r=e(86849),s=e(25897),o=e(37390),m=e(40980),i=e(10096),l=e(44836),d=e(72254),c=e(60656),g=e(7758),u=e(74730),E=e(4213),p=e.n(E),b=e(16817),a=e(70713),h=e(66864),P=e(88575),y=e(15292),C=e(55852),f=e(32372),D=e(10534),T=e(15858),M=e(22699),O=e(34214),S=e(20455),v=e(73788);class x extends r.Bs{constructor(dt){super({isSharingExternally:!1,isViewingJSON:!1,...dt}),this.tabId=M.wr.export,this._exporter=new T.M,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})}}static{this.Component=A}getTabLabel(){return(0,l.t)("share-modal.tab-title.export","Export")}getClipboardText(){}async getExportableDashboardJson(){const{dashboardRef:dt,isSharingExternally:ot}=this.state,ft=(0,S.Uy)(dt.resolve());return ot?await this._exporter.makeExportable(new O.G(ft,void 0,{getVariablesFromState:()=>(0,v.E)(window.__grafanaSceneContext)})):ft}async onSaveAsFile(){const dt=await this.getExportableDashboardJson(),ot=JSON.stringify(dt,null,2),{isSharingExternally:ft}=this.state,yt=new Blob([ot],{type:"application/json;charset=utf-8"}),Tt=new Date().getTime();let Kt="dashboard";"title"in dt&&dt.title&&(Kt=dt.title),p()(yt,`${Kt}-${Tt}.json`),g.c.exportDownloadJsonClicked({externally:ft})}}function A({model:st}){const{isSharingExternally:dt,isViewingJSON:ot,modalRef:ft}=st.useState(),yt=(0,b.A)(async()=>{if(ot){const Kt=await st.getExportableDashboardJson();return JSON.stringify(Kt,null,2)}return""},[ot]),Tt=(0,l.t)("share-modal.export.share-externally-label","Export for sharing externally");return t.createElement(t.Fragment,null,!ot&&t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(h.gW,{spacing:"md"},t.createElement(P.D,{label:Tt},t.createElement(y.d,{id:"share-externally-toggle",value:dt,onChange:st.onShareExternallyChange}))),t.createElement(o.a.ButtonRow,null,t.createElement(C.$n,{variant:"secondary",onClick:()=>{ft?.resolve().onDismiss()},fill:"outline"},t.createElement(l.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(C.$n,{variant:"secondary",icon:"brackets-curly",onClick:st.onViewJSON},t.createElement(l.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(C.$n,{variant:"primary",icon:"save",onClick:()=>st.onSaveAsFile()},t.createElement(l.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))),ot&&t.createElement(t.Fragment,null,t.createElement(a.Ay,{disableHeight:!0},({width:Kt})=>yt.value?t.createElement(f.B,{value:yt.value??"",language:"json",showMiniMap:!1,height:"500px",width:Kt}):yt.loading?t.createElement("div",null,"Loading..."):null),t.createElement(o.a.ButtonRow,null,t.createElement(C.$n,{variant:"secondary",fill:"outline",onClick:st.onViewJSON,icon:"arrow-left"},t.createElement(l.x6,{i18nKey:"share-modal.export.back-button"},"Back to export config")),t.createElement(D.b,{variant:"secondary",icon:"copy",disabled:yt.loading,getText:()=>yt.value??""},t.createElement(l.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard")),t.createElement(C.$n,{variant:"primary",icon:"save",disabled:yt.loading,onClick:()=>st.onSaveAsFile()},t.createElement(l.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))))}var R=e(86394),B=e(41507);class U extends r.Bs{constructor(){super(...arguments),this.tabId=M.wr.libraryPanel}static{this.Component=w}getTabLabel(){return(0,l.t)("share-modal.tab-title.library-panel","Library panel")}}function w({model:st}){const{panelRef:dt,dashboardRef:ot,modalRef:ft}=st.useState();if(!dt)return null;const yt=dt.resolve();if(yt.parent instanceof B.U){const Tt=ot.resolve(),Kt=(0,S.ZB)(yt.parent),Gt=new O.a(Kt),_t=(0,S.Uy)(Tt),it=new O.G(_t);return t.createElement(R.j,{initialFolderUid:Tt.state.meta.folderUid,dashboard:it,panel:Gt,onDismiss:()=>{ft?.resolve().onDismiss()}})}return null}var K=e(47232),N=e(13544),L=e(12131),V=e(84167),F=e(10354),z=e(14578),Y=e(42418),H=e(7030),k=e(87895),ee=e(11982);class ie extends r.Bs{constructor(dt){super({...dt,useLockedTime:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}),this.tabId=M.wr.link,this.onToggleLockedTime=()=>{this.setState({useLockedTime:!this.state.useLockedTime}),this.buildUrl()},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl}),this.buildUrl()},this.onThemeChange=ot=>{this.setState({selectedTheme:ot}),this.buildUrl()},this.getShareUrl=()=>this.state.shareUrl,this.addActivationHandler(()=>{this.buildUrl()})}static{this.Component=fe}async buildUrl(){const{panelRef:dt,dashboardRef:ot,useLockedTime:ft,useShortUrl:yt,selectedTheme:Tt}=this.state,Kt=ot.resolve(),Gt=dt?.resolve(),_t=L.Ny.getLocation(),it=r.jh.getTimeRange(Gt??Kt),Mt={};Gt&&(Mt.viewPanel=Gt.state.key),ft&&(Mt.from=it.state.value.from.toISOString(),Mt.to=it.state.value.to.toISOString()),Tt!=="current"&&(Mt.theme=Tt);let Dn=(0,ee.uZ)({uid:Kt.state.uid,slug:Kt.state.meta.slug,currentQueryParams:_t.search,updateQuery:Mt,absolute:!0});yt&&(Dn=await(0,H.f)(Dn));let lt=Mt;Gt&&(delete lt.viewPanel,lt.panelId=Gt.state.key,lt["__feature.dashboardSceneSolo"]=!0);const Ct=(0,ee.uZ)({uid:Kt.state.uid,currentQueryParams:_t.search,updateQuery:{...Mt,panelId:Gt?.state.key},absolute:!0,soloRoute:!0,render:!0,timeZone:q(it.getTimeZone())});this.setState({shareUrl:Dn,imageUrl:Ct})}getTabLabel(){return(0,l.t)("share-modal.tab-title.link","Link")}onCopy(){g.c.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}}function fe({model:st}){const dt=st.useState(),{panelRef:ot,dashboardRef:ft}=dt,yt=ft.resolve(),Tt=ot?.resolve(),Gt=r.jh.getTimeRange(Tt??yt).state.to==="now",{useLockedTime:_t,useShortUrl:it,selectedTheme:Mt,shareUrl:Dn,imageUrl:lt}=dt,Ct=N.Tp.pages.SharePanelModal,Vt=!!yt.state.uid,qt=(0,l.t)("share-modal.link.time-range-label","Lock time range"),rn=(0,l.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),en=(0,l.t)("share-modal.link.shorten-url","Shorten URL"),Jt=(0,l.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(V.n,null,t.createElement(P.D,{label:qt,description:Gt?rn:""},t.createElement(y.d,{id:"share-current-time-range",value:_t,onChange:st.onToggleLockedTime})),t.createElement(k.w,{selectedTheme:Mt,onChange:st.onThemeChange}),t.createElement(P.D,{label:en},t.createElement(y.d,{id:"share-shorten-url",value:it,onChange:st.onUrlShorten})),t.createElement(P.D,{label:Jt},t.createElement(F.p,{id:"link-url-input",value:Dn,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:st.getShareUrl,onClipboardCopy:st.onCopy},t.createElement(l.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Tt&&n.$.rendererAvailable&&t.createElement(t.Fragment,null,Vt&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:lt,target:"_blank",rel:"noreferrer","aria-label":Ct.linkToRenderedImage},t.createElement(z.I,{name:"camera"}),"\xA0",t.createElement(l.x6,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Vt&&t.createElement(Y.F,{severity:"info",title:(0,l.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(l.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Tt&&!n.$.rendererAvailable&&t.createElement(Y.F,{severity:"info",title:(0,l.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(l.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}function q(st){const dt="UTC"+encodeURIComponent((0,K.KQ)().format("Z"));if(st==="utc")return"UTC";if(st==="browser"){if(!window.Intl)return dt;const ft=window.Intl.DateTimeFormat().resolvedOptions();return ft.timeZone?ft.timeZone:dt}return st}var Z=e(35280),J=e(7928);class G extends r.Bs{constructor(dt){super(dt),this.tabId=M.wr.embed}static{this.Component=ne}getTabLabel(){return(0,l.t)("share-modal.tab-title.panel-embed","Embed")}}function ne({model:st}){const{panelRef:dt,dashboardRef:ot}=st.useState(),ft=dt.resolve(),yt=ot.resolve(),{uid:Tt}=yt.useState(),Kt=(0,u.Cs)(ft),Gt=r.jh.getTimeRange(ft),_t=Gt instanceof J.v?Gt.state.timeFrom:void 0;return t.createElement(Z.D,{panel:{id:Kt,timeFrom:_t},range:Gt.state.value,dashboard:{uid:Tt??"",time:Gt.state.value},buildIframe:te(yt)})}const te=st=>(dt,ot,ft,yt,Tt)=>{const Kt=(0,M.XV)({useCurrentTimeRange:dt,selectedTheme:ft,panel:yt,range:Tt}),Gt=Kt.get("editPanel")??Kt.get("viewPanel")??"";return Kt.set("panelId",Gt),Kt.delete("editPanel"),Kt.delete("viewPanel"),Kt.set("__feature.dashboardSceneSolo","true"),`<iframe src="${(0,ee.uZ)({absolute:!0,soloRoute:!0,uid:st.state.uid,slug:st.state.meta.slug,currentQueryParams:Kt.toString()})}" width="450" height="200" frameborder="0"></iframe>`};var oe=e(5805),le=e(17172),ue=e(94354),Te=e(69064);const he=()=>{const st={label:(0,l.t)("share-modal.snapshot.expire-week","1 Week"),value:604800};return[{label:(0,l.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,l.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},st,{label:(0,l.t)("share-modal.snapshot.expire-never","Never"),value:0}]},re=()=>he()[2];class De extends r.Bs{constructor(dt){super({...dt,snapshotName:dt.dashboardRef.resolve().state.title,selectedExpireOption:re()}),this.tabId=M.wr.snapshot,this.onSnasphotNameChange=ot=>{this.setState({snapshotName:ot.trim()})},this.onExpireChange=ot=>{this.setState({selectedExpireOption:he().find(ft=>ft.value===ot)})},this.onSnapshotCreate=async(ot=!1)=>{const{selectedExpireOption:ft}=this.state,yt=this.prepareSnapshot(),Tt={dashboard:yt,name:yt.title,expires:ft?.value,external:ot};try{return await(0,Te.s)().create(Tt)}finally{ot?g.c.publishSnapshotClicked({expires:Tt.expires}):g.c.publishSnapshotLocalClicked({expires:Tt.expires})}},this.addActivationHandler(()=>{this._onActivate()})}static{this.Component=Fe}_onActivate(){(0,Te.s)().getSharingOptions().then(dt=>{this.isActive&&this.setState({snapshotSharingOptions:dt})})}getTabLabel(){return(0,l.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const dt=r.jh.getTimeRange(this),{dashboardRef:ot,panelRef:ft}=this.state,yt=(0,S.Uy)(ot.resolve(),!0);return(0,S.c)(this.state.snapshotName||"",dt.state.value,yt,ft?.resolve())}}function Fe({model:st}){const{snapshotName:dt,selectedExpireOption:ot,modalRef:ft,snapshotSharingOptions:yt}=st.useState(),[Tt,Kt]=(0,oe.default)(async(it=!1)=>st.onSnapshotCreate(it)),[Gt,_t]=(0,oe.default)(async it=>await(0,le.AI)().get(it));return Gt.value?t.createElement(l.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."):t.createElement(t.Fragment,null,!Tt.value&&t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(P.D,{label:(0,l.t)("share-modal.snapshot.name","Snapshot name")},t.createElement(F.p,{id:"snapshot-name-input",width:30,defaultValue:dt,onBlur:it=>st.onSnasphotNameChange(it.target.value)})),t.createElement(P.D,{label:(0,l.t)("share-modal.snapshot.expire","Expire")},t.createElement(ue.z,{id:"expire-select-input",options:he(),value:ot?.value,onChange:st.onExpireChange})),t.createElement(o.a.ButtonRow,null,t.createElement(C.$n,{variant:"secondary",onClick:()=>{ft?.resolve().onDismiss()},fill:"outline"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),yt?.externalEnabled&&t.createElement(C.$n,{variant:"secondary",disabled:Tt.loading,onClick:()=>Kt(!0)},yt?.externalSnapshotName),t.createElement(C.$n,{variant:"primary",disabled:Tt.loading,onClick:()=>Kt()},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.local-button"},"Publish Snapshot")))),Tt.value&&t.createElement(t.Fragment,null,t.createElement(P.D,{label:(0,l.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(F.p,{id:"snapshot-url-input",value:Tt.value.url,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:()=>Tt.value.url},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(C.$n,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{_t(Tt.value.deleteUrl)}},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot.")))))}var Ee=e(72686),Me=e(4785),ze=e(32196),xe=e(40845),We=e(59037),be=e(31678),pe=e(96374);class Ue extends r.Bs{static{this.Component=we}constructor(dt){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",...dt})}onDismiss(){}}function we({model:st}){const dt=st.useState();return t.createElement(pe.u,{...dt})}var je=e(26657),He=e(31204),rt=e(31193);const Je=async st=>{let dt=new Set;for(const ot of st)He.z.has(ot)&&await(0,rt.tR)().get(ot)instanceof je.iy||dt.add(ot);return Array.from(dt)};function Ve(st){const dt=new Set,ot=st.state.body;if(!(ot instanceof r.hy))return[];for(const ft of ot.state.children){if(ft instanceof B.U){const yt=Ne(ft);for(const Tt of yt)dt.add(Tt)}if(ft instanceof r.tI){const yt=Oe(ft);for(const Tt of yt)dt.add(Tt)}}return Array.from(dt).sort()}function Oe(st){return new Set(st.state.children.map(ot=>Ne(ot)).flat())}function Ne(st){let dt;if(st instanceof B.U)if(st.state.body instanceof c.F)dt=st.state.body.state.panel;else if(st.state.body instanceof r.Eb)dt=st.state.body;else throw new Error("DashboardGridItem body expected to be VizPanel");if(!dt)throw new Error("Unsupported grid item type");const ot=dt.state.$data,ft=new Set;if(ot instanceof r.dt)for(const yt of ot.state.queries)ft.add(yt.datasource?.type??"");if(ot instanceof r.Es){const yt=ot.state.$data;if(yt instanceof r.dt)for(const Tt of yt.state.queries)ft.add(Tt.datasource?.type??"")}return Array.from(ft)}function ye(st){const{value:dt}=(0,b.A)(async()=>{const ot=Ve(st);return Je(ot)},[]);return dt}function se({model:st,publicDashboard:dt,isGetLoading:ot}){const ft=(0,xe.of)(ae),yt=i.TP.hasPermission(be.AccessControlAction.DashboardsPublicWrite),{dashboardRef:Tt}=st.useState(),Kt=Tt.resolve(),{isDirty:Gt}=Kt.useState(),[_t]=(0,Ee.bN)(),it=(Kt.state.$variables?.state.variables.length??0)>0,Mt=ye(Kt),lt=r.jh.getTimeRange(st).useState();return t.createElement(We.b,{dashboard:Kt,publicDashboard:dt,unsupportedDatasources:Mt,onRevoke:()=>{Kt.showModal(new Ue({isOpen:!0,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL",body:t.createElement("p",{className:ft.description},"Are you sure you want to revoke this URL? The dashboard will no longer be public."),onDismiss:()=>{Kt.showModal(new tt({dashboardRef:Tt,activeTab:"Public Dashboard"}))},onConfirm:()=>{_t({dashboard:Kt,dashboardUid:Kt.state.uid,uid:dt.uid}),Kt.closeModal()}}))},timeRange:lt.value,showSaveChangesAlert:yt&&Gt,hasTemplateVariables:it})}const ae=st=>({description:(0,ze.css)({fontSize:st.typography.body.fontSize})});var ge=e(22234);function Pe({model:st}){const{dashboardRef:dt}=st.useState(),ot=dt.resolve(),ft=ye(ot),yt=(ot.state.$variables?.state.variables.length??0)>0;return t.createElement(ge.D,{dashboard:ot,unsupportedDatasources:ft,unsupportedTemplateVariables:yt})}class Re extends r.Bs{constructor(){super(...arguments),this.tabId=M.wr.publicDashboard}static{this.Component=Be}getTabLabel(){return(0,l.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}function Be({model:st}){const{data:dt,isLoading:ot}=(0,Ee.Bs)(st.state.dashboardRef.resolve().state.uid);return t.createElement(t.Fragment,null,ot?t.createElement(Me.a,null):(0,d.lI)(dt)?t.createElement(se,{model:st,publicDashboard:dt,isGetLoading:ot}):t.createElement(Pe,{model:st}))}const _e=[];function Xe(st){_e.push(st)}class tt extends r.Bs{constructor(dt){super({activeTab:"link",...dt}),this.onDismiss=()=>{(0,u.YQ)(this).closeModal()},this.onChangeTab=ot=>{g.c.sharingTabChanged({item:ot.value}),this.setState({activeTab:ot.value})},this.addActivationHandler(()=>this.buildTabs())}static{this.Component=at}buildTabs(){const{dashboardRef:dt,panelRef:ot}=this.state,ft=this.getRef(),yt=[new ie({dashboardRef:dt,panelRef:ot,modalRef:ft})],Tt=(0,u.YQ)(this);if(ot||yt.push(new x({dashboardRef:dt,modalRef:ft})),i.TP.isSignedIn&&n.$.snapshotEnabled&&Tt.canEditDashboard()&&yt.push(new De({panelRef:ot,dashboardRef:dt,modalRef:ft})),ot){yt.push(new G({panelRef:ot,dashboardRef:dt}));const Kt=ot.resolve(),Gt=Kt.parent instanceof c.F;Kt instanceof r.Eb&&(Gt||yt.push(new U({panelRef:ot,dashboardRef:dt,modalRef:ft})))}ot||yt.push(..._e.map(Kt=>new Kt({dashboardRef:dt,modalRef:ft}))),(0,d.iR)()&&yt.push(new Re({dashboardRef:dt,modalRef:ft})),this.setState({tabs:yt})}}function at({model:st}){const{panelRef:dt,tabs:ot,activeTab:ft}=st.useState(),yt=dt?(0,l.t)("share-modal.panel.title","Share Panel"):(0,l.t)("share-modal.dashboard.title","Share");if(!ot)return;const Tt=ot?.map(_t=>({label:_t.getTabLabel(),value:_t.tabId})),Kt=t.createElement(s.J,{title:yt,icon:"share-alt",tabs:Tt,activeTab:ft,onChangeTab:st.onChangeTab}),Gt=ot.find(_t=>_t.tabId===ft);return t.createElement(o.a,{isOpen:!0,title:Kt,onDismiss:st.onDismiss},t.createElement(m.J,null,Gt&&t.createElement(Gt.Component,{model:Gt})))}},96556:(Q,I,e)=>{"use strict";e.d(I,{w:()=>s});var t=e(32264),n=e(86849),r=e(39820);function s(o){if(!o.targets?.length||t.$.panels[o.type]?.skipDataQuery)return;let m;return m=new n.dt({datasource:o.datasource??void 0,queries:o.targets,maxDataPoints:o.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:o.cacheTimeout,queryCachingTTL:o.queryCachingTTL,minInterval:o.interval??void 0,dataLayerFilter:{panelId:o.id},$behaviors:[new r.L({})]}),new n.Es({$data:m,transformations:o.transformations||[]})}},32023:(Q,I,e)=>{"use strict";e.d(I,{WZ:()=>p,b4:()=>b});var t=e(86849),n=e(16279),r=e(41507),s=e(60656),o=e(42397),m=e(74730);function i(a){return a.state.controls?.state.timePicker}function l(a){return a.state.controls?.state.refreshPicker}function d(a){return a.state.titleItems&&Array.isArray(a.state.titleItems)&&a.state.titleItems[0]instanceof o.$?a.state.titleItems[0]:null}function c(a){const h=[];return a.state.body.forEachChild(P=>{if(!(P instanceof r.U)&&!(P instanceof t.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");P instanceof r.U?P.state.body instanceof t.Eb&&h.push(P.state.body):P instanceof t.tI&&P.forEachChild(y=>{y instanceof r.U&&y.state.body instanceof t.Eb&&h.push(y.state.body)})}),h}function g(a){const h=t.jh.getData(a);if(!(h instanceof n.s))throw new Error("DashboardDataLayerSet not found");return h}function u(a){const h=a.state.$behaviors?.find(P=>P instanceof t.Gg.K2);if(h instanceof t.Gg.K2)return h}function E(a){let h=0;const P=a.state.body;if(!(P instanceof t.hy))throw new Error("Dashboard body is not a SceneGridLayout");for(const y of P.state.children){if(y instanceof r.U){const C=y.state.body;if(C){const f=C instanceof s.F?(0,m.RQ)(C):(0,m.Cs)(C);f>h&&(h=f)}}if(y instanceof t.tI){const C=(0,m.Cs)(y);C>h&&(h=C);for(const f of y.state.children)if(f instanceof r.U){const D=f.state.body;if(D){const T=D instanceof s.F?(0,m.RQ)(D):(0,m.Cs)(D);T>h&&(h=T)}}}}return h+1}const p=a=>a.parent instanceof s.F?a.parent:a.parent instanceof r.U&&a.parent.state.body instanceof s.F?a.parent.state.body:null,b={getTimePicker:i,getRefreshPicker:l,getPanelLinks:d,getVizPanels:c,getDataLayers:g,getNextPanelId:E,getCursorSync:u}},73788:(Q,I,e)=>{"use strict";e.d(I,{E:()=>r});var t=e(86849),n=e(53287);function r(s){const o=t.jh.getVariables(s);return(0,n.C)(o)}},7758:(Q,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(14110);let n=!1;const r={dashboardInitialized:o=>{s("init_dashboard_completed",{...o})},panelMenuShown:o=>{s("panelheader_menu",{...o,item:"menu"})},panelMenuItemClicked:o=>{s("panelheader_menu",{item:o})},panelMenuInspectClicked(o){s("panelheader_menu",{item:"inspect",tab:o})},panelLinkClicked:o=>{s("panelheader_datalink_clicked",o)},panelStatusMessageClicked:o=>{s("panelheader_statusmessage_clicked",o)},panelCancelQueryClicked:o=>{s("panelheader_cancelquery_clicked",o)},sharingTabChanged:o=>{s("sharing_category_clicked",o)},shareLinkCopied:o=>{s("sharing_link_copy_clicked",o)},embedSnippetCopy:o=>{s("sharing_embed_copy_clicked",o)},publishSnapshotClicked:o=>{s("sharing_snapshot_publish_clicked",o)},publishSnapshotLocalClicked:o=>{s("sharing_snapshot_local_clicked",o)},exportDownloadJsonClicked:o=>{s("sharing_export_download_json_clicked",o)},exportCopyJsonClicked:o=>{s("sharing_export_copy_json_clicked",o)},exportSaveJsonClicked:o=>{s("sharing_export_save_json_clicked",o)},exportViewJsonClicked:o=>{s("sharing_export_view_json_clicked",o)},generatePublicDashboardUrlClicked:o=>{s("sharing_public_generate_url_clicked",o)},revokePublicDashboardEmailClicked:o=>{s("sharing_public_email_revoke_clicked",o)},resendPublicDashboardEmailClicked:o=>{s("sharing_public_email_resend_clicked",o)},publicDashboardEmailInviteClicked:o=>{s("sharing_public_email_invite_clicked",o)},publicDashboardShareTypeChange:o=>{s("sharing_public_can_view_clicked",o)},publicDashboardTimeSelectionChanged:o=>{s("sharing_public_time_picker_clicked",o)},publicDashboardAnnotationsSelectionChanged:o=>{s("sharing_public_annotations_clicked",o)},publicDashboardUrlCopied:o=>{s("sharing_public_copy_url_clicked",o)},publicDashboardPauseSharingClicked:o=>{s("sharing_public_pause_clicked",o)},revokePublicDashboardClicked:o=>{s("sharing_public_revoke_clicked",o)},emptyDashboardButtonClicked:o=>{s("emptydashboard_clicked",o)},toolbarAddButtonClicked:o=>{s("toolbar_add_clicked",o)},toolbarFavoritesClick:()=>{s("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{s("toolbar_actions_clicked",{item:"settings"})},toolbarRefreshClick:()=>{s("toolbar_actions_clicked",{item:"refresh"})},toolbarTimePickerClick:()=>{s("toolbar_actions_clicked",{item:"time_picker"})},toolbarZoomClick:()=>{s("toolbar_actions_clicked",{item:"zoom_out_time_range"})},toolbarShareClick:()=>{s("toolbar_actions_clicked",{item:"share"})},toolbarSaveClick:()=>{s("toolbar_actions_clicked",{item:"save"})},toolbarSaveAsClick:()=>{s("toolbar_actions_clicked",{item:"save_as"})},toolbarAddClick:()=>{s("toolbar_actions_clicked",{item:"add"})},setScenesContext:()=>(n=!0,()=>{n=!1})},s=(o,m)=>{const i=n?{scenesView:!0}:{};m?(0,t.rR)(`dashboards_${o}`,{...m,...i}):(0,t.rR)(`dashboards_${o}`)}},99246:(Q,I,e)=>{"use strict";e.d(I,{C:()=>t,Y:()=>n});const t={left:[],right:[]};function n(r,s){t[r].push(s)}},11982:(Q,I,e)=>{"use strict";e.d(I,{Lp:()=>E,Uu:()=>u,e0:()=>g,r7:()=>c,uZ:()=>d});var t=e(76885),n=e(71733),r=e(12131),s=e(32264),o=e(86849),m=e(10096),i=e(87490),l=e(74730);function d(p){let b=`/d/${p.uid}`;p.uid||(b="/dashboard/new"),p.soloRoute&&(b=`/d-solo/${p.uid}`),p.slug&&(b+=`/${p.slug}`),p.subPath&&(b+=p.subPath),p.render&&(b="/render"+b,p.updateQuery={...p.updateQuery,width:1e3,height:500,tz:p.timeZone}),p.isHomeDashboard&&(b="/");const a=p.currentQueryParams?(0,r.SE)(p.currentQueryParams):{};if(p.updateQuery)for(const P of Object.keys(p.updateQuery))p.updateQuery[P]===null||p.updateQuery[P]===void 0?delete a[P]:a[P]=p.updateQuery[P];const h=t.kM.renderUrl(b,a);return p.absolute?s.$.appUrl+h.slice(1):h}function c(p){return n.I.getUrlForPartial(r.Ny.getLocation(),{viewPanel:p.state.key})}function g(p){return n.I.getUrlForPartial(r.Ny.getLocation(),{editPanel:p})}function u(p,b){const a=p.state.key?.replace("-view","");return n.I.getUrlForPartial(r.Ny.getLocation(),{inspect:a,inspectTab:b})}function E(p){const b=p.getPlugin(),a=(0,l.un)(p);if(!m.TP.hasAccessToExplore()||b?.meta.skipDataQuery||!a)return Promise.resolve(void 0);const h=o.jh.getTimeRange(p);return(0,i.Xe)({queries:a.state.queries,dsRef:a.state.datasource,timeRange:h.state.value,scopedVars:{__sceneObject:{value:p}},adhocFilters:a.state.data?.request?.filters})}},74730:(Q,I,e)=>{"use strict";e.d(I,{Cs:()=>b,O8:()=>x,RQ:()=>a,SN:()=>v,Sm:()=>f,Ws:()=>A,X0:()=>y,XA:()=>p,YQ:()=>O,Yr:()=>R,a7:()=>C,bx:()=>D,pk:()=>T,sw:()=>u,un:()=>M,vL:()=>h,vm:()=>E,xz:()=>S});var t=e(22391),n=e(19347),r=e(86849),s=e(81515),o=e(39820),m=e(45199),i=e(60656),l=e(42397),d=e(7196),c=e(58029),g=e(32023);const u=8,E=12;function p(B){return`panel-${B}`}function b(B){return parseInt(B.state.key.replace("panel-",""),10)}function a(B){return parseInt(B.state.panelKey.replace("panel-",""),10)}function h(B,U){if(!U)return null;const w=P(B,U);if(w)return w;const K=parseInt(U,10);return isNaN(K)?null:P(B,p(K))}function P(B,U){if(!U)return null;const w=r.jh.findObject(B,K=>K.state.key===U);if(w){if(w instanceof r.Eb)return w;throw new Error(`Found panel with key ${U} but it was not a VizPanel`)}return null}function y(B,U){B.forEachChild(w=>{w.isActive&&(w.forceRender(),y(w,U))})}function C(B){const{value:U,text:w,options:K}=B.state;return B.hasAllValue()?{values:K.map(N=>N.value),texts:K.map(N=>N.label)}:{values:Array.isArray(U)?U:[U],texts:Array.isArray(w)?w:[w]}}function f(B){const U=B.match(/(["'])(.*?)\1|\w+/g);if(!U)return s.Ez.query?.split(",")??[];const w=new Set,K=U.reduce((N,L)=>{const V=L.replace(/["']+/g,"");return V.startsWith("$__auto_interval_")||N.add(V),N},w);return Array.from(K)}function D(B){return Array.isArray(B)?B.join(","):""}function T(B,U){const w=Array.isArray(B.current.value)?B.current.value[0]:B.current.value;return w.startsWith("$__auto_interval_")?"$__auto":U.includes(w)?w:U[0]}function M(B){if(!B)return;const U=B.state.$data??B.parent?.state.$data;if(U instanceof r.dt)return U;if(U instanceof r.Es)return M(U)}function O(B){const U=B.getRoot();if(U instanceof m.H$)return U;throw new Error("SceneObject root is not a DashboardScene")}function S(B){return B instanceof r.Eb?B:B.parent?S(B.parent):null}function v(B){return B.includes("clone")}function x(B){const U=g.b4.getNextPanelId(B);return new r.Eb({title:"Panel Title",key:p(U),pluginId:"timeseries",titleItems:[new l.$({menu:new l.m({})})],menu:new r.Lw({$behaviors:[d._i]}),$data:new r.Es({$data:new r.dt({queries:[{refId:"A"}],datasource:(0,t.p$)((0,n.l)().getInstanceSettings(null)),$behaviors:[new o.L({})]}),transformations:[]})})}function A(B){const U=g.b4.getNextPanelId(B);return new r.tI({key:p(U),title:"Row title",actions:new c.u({}),y:0})}function R(B){if(B.parent instanceof i.F)return B.parent}},72686:(Q,I,e)=>{"use strict";e.d(I,{$L:()=>h,AK:()=>y,Bs:()=>g,NA:()=>P,NY:()=>a,Sm:()=>c,T2:()=>E,U9:()=>u,_e:()=>b,bN:()=>p,g9:()=>f,kd:()=>C});var t=e(93020),n=e(75505),r=e(17172),s=e(82467),o=e(3169),m=e(45199);function i(D){return typeof D=="object"&&D!=null&&"error"in D}const l=({baseUrl:D})=>async T=>{try{const{data:M,...O}=await(0,n.s)((0,r.AI)().fetch({...T,url:D+T.url,showErrorAlert:T.showErrorAlert}));return{data:M,meta:O}}catch(M){return T.manageError?T.manageError(M):{error:M}}},d=D=>({error:(0,r.NF)(D)&&D.status!==404?D:null}),c=(0,t.xP)({reducerPath:"publicDashboardApi",baseQuery:l({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:D=>({getPublicDashboard:D.query({query:T=>({url:`/dashboards/uid/${T}/public-dashboards`,manageError:d,showErrorAlert:!1}),async onQueryStarted(T,{dispatch:M,queryFulfilled:O}){try{await O}catch(S){i(S)&&(0,r.NF)(S.error)&&M((0,s.dx)((0,o.gi)(S.error.data.message)))}},providesTags:(T,M,O)=>[{type:"PublicDashboard",id:O}]}),createPublicDashboard:D.mutation({query:T=>({url:`/dashboards/uid/${T.dashboard instanceof m.H$?T.dashboard.state.uid:T.dashboard.uid}/public-dashboards`,method:"POST",data:T.payload}),async onQueryStarted({dashboard:T,payload:M},{dispatch:O,queryFulfilled:S}){const{data:v}=await S;O((0,s.dx)((0,o.tZ)("Dashboard is public!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:v.isEnabled,publicDashboardUid:v.uid}}):T.updateMeta({publicDashboardUid:v.uid,publicDashboardEnabled:v.isEnabled})},invalidatesTags:(T,M,{dashboard:O})=>[{type:"PublicDashboard",id:O instanceof m.H$?O.state.uid:O.uid}]}),updatePublicDashboard:D.mutation({query:({payload:T,dashboard:M})=>({url:`/dashboards/uid/${M instanceof m.H$?M.state.uid:M.uid}/public-dashboards/${T.uid}`,method:"PATCH",data:T}),async onQueryStarted({dashboard:T},{dispatch:M,queryFulfilled:O}){const{data:S}=await O;M((0,s.dx)((0,o.tZ)("Public dashboard updated!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:S.isEnabled,publicDashboardUid:S.uid}}):T.updateMeta?.({publicDashboardUid:S.uid,publicDashboardEnabled:S.isEnabled})},invalidatesTags:(T,M,{payload:O})=>[{type:"PublicDashboard",id:O.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:D.mutation({query:()=>({url:""})}),deleteRecipient:D.mutation({query:()=>({url:""})}),reshareAccessToRecipient:D.mutation({query:()=>({url:""})}),getActiveUsers:D.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:D.query({query:()=>({url:""}),providesTags:(T,M,O)=>[{type:"ActiveUserDashboards",id:O}]}),listPublicDashboards:D.query({query:(T=1)=>({url:`/dashboards/public-dashboards?page=${T}&perpage=8`}),transformResponse:T=>({...T,totalPages:Math.ceil(T.totalCount/T.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:D.mutation({query:T=>({url:`/dashboards/uid/${T.dashboardUid}/public-dashboards/${T.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:T,uid:M},{dispatch:O,queryFulfilled:S}){await S,O((0,s.dx)((0,o.tZ)("Public dashboard deleted!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardUid:M,publicDashboardEnabled:!1}}):T?.updateMeta({publicDashboardUid:M,publicDashboardEnabled:!1})},invalidatesTags:(T,M,{dashboardUid:O})=>[{type:"PublicDashboard",id:O},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:D.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:g,useCreatePublicDashboardMutation:u,useUpdatePublicDashboardMutation:E,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:b,useAddRecipientMutation:a,useDeleteRecipientMutation:h,useReshareAccessToRecipientMutation:P,useGetActiveUsersQuery:y,useGetActiveUserDashboardsQuery:C,useRevokeAllAccessMutation:f}=c},15858:(Q,I,e)=>{"use strict";e.d(I,{M:()=>c});var t=e(2543),n=e(19347),r=e(2913),s=e(57767),o=e(82792),m=e(98796),i=e(24240),l=e(80484);function d(g){return!!(g.libraryPanel?.name&&g.libraryPanel?.uid)}class c{async makeExportable(u){u.cleanUpRepeats();const E=u.getSaveModelCloneOld();E.id=null,u.processRepeats();const p=[],b={},a={},h={},P=new Map;for(const D of E.getVariables())h[D.name]=D;const y=(D,T)=>{if(D.datasource===void 0){D.datasource=T;return}let M=D.datasource,O=null;const S=M?.uid;return S&&S.indexOf("$")===0&&(O=h[S.substring(1)],O&&O.current&&(M=O.current.value)),(0,n.l)().get(M).then(v=>{if(v.meta?.builtIn||(b["datasource"+v.meta?.id]={type:"datasource",id:v.meta.id,name:v.meta.name,version:v.meta.info.version||"1.0.0"},O))return;const x=D.libraryPanel,A=x?"-for-library-panel":"";let R="DS_"+v.name.replace(" ","_").toUpperCase()+A.toUpperCase();if(a[R]={name:R,label:v.name,description:"",type:"datasource",pluginId:v.meta?.id,pluginName:v.meta?.name,usage:a[R]?.usage},x){const B=a[R]?.usage?.libraryPanels||[];B.push({name:x.name,uid:x.uid}),a[R].usage={libraryPanels:B}}D.datasource={type:v.meta.id,uid:"${"+R+"}"}})},C=async D=>{if(D.type!=="row"){if(await y(D),D.targets)for(const M of D.targets)await y(M,D.datasource);const T=r.Ay.panels[D.type];T&&(b["panel"+T.id]={type:"panel",id:T.id,name:T.name,version:T.info.version})}},f=async D=>{if((0,o.X)(D)){const{name:T,uid:M}=D.libraryPanel;let O=D.libraryPanel.model;O||(O=(await(0,s.Yr)(M,!0)).model),await y(O);const{gridPos:S,id:v,...x}=O;P.has(M)||P.set(M,{name:T,uid:M,kind:m.i.Panel,model:x})}};try{for(const M of E.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const O of M.panels)await C(O);for(const M of E.getVariables())(0,i.P4)(M)&&(await y(M),M.options=[],M.current={},M.refresh=M.refresh!==l.CO.never?M.refresh:l.CO.onDashboardLoad);for(const M of E.annotations.list)await y(M);b.grafana={type:"grafana",id:"grafana",name:"Grafana",version:r.Ay.buildInfo.version};for(const M of E.panels)if(await f(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const O of M.panels)await f(O);(0,t.each)(a,M=>{p.push(M)});for(const M of E.getVariables())if((0,i.VO)(M)){const O="VAR_"+M.name.replace(" ","_").toUpperCase();p.push({name:O,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+O+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const D=[...P.entries()].reduce((M,[O,S])=>(M[O]=S,M),{}),T=(0,t.defaults)({__inputs:p,__elements:D,__requires:(0,t.sortBy)(b,["id"])},E);for(let M=0;M<T.panels.length;M++){const O=T.panels[M];d(O)&&(T.panels[M]={gridPos:O.gridPos,id:O.id,libraryPanel:{uid:O.libraryPanel.uid,name:O.libraryPanel.name}})}return T}catch(D){return console.error("Export failed:",D),{error:D}}}}},20120:(Q,I,e)=>{"use strict";e.d(I,{fP:()=>G,Ay:()=>te});var t=e(32196),n=e(96540),r=e(63329),s=e(58476),o=e(40672),m=e(13544),i=e(12131),l=e(69731),d=e(96374),c=e(39938),g=e(19727),u=e(27746),E=e(71678),p=e(15068),b=e(75269),a=e(10804),h=e(2913),P=e(3169),y=e(10096),C=e(16021),f=e(44836),D=e(91219),T=e(83122),M=e(55852),O=e(14578),S=e(32264),v=e(38138),x=e(36974),A=e(7758),R=e(31678),B=e(28601);const w=({dashboard:ue})=>{const Te=(0,n.useMemo)(()=>(0,x._u)(),[]),he=(0,R.useDispatch)(),re=(0,R.useSelector)(De=>De.dashboard.initialDatasource);return n.createElement(v.W,null,n.createElement(v.W.Item,{key:"add-visualisation",testId:m.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,f.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const De=(0,x.OK)(ue,re);A.c.toolbarAddButtonClicked({item:"add_visualization"}),i.Ny.partial({editPanel:De}),he((0,B.Ub)(void 0))}}),S.$.featureToggles.vizAndWidgetSplit&&n.createElement(v.W.Item,{key:"add-widget",testId:m.Tp.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,f.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"add_widget"}),i.Ny.partial({addWidget:!0})}}),n.createElement(v.W.Item,{key:"add-row",testId:m.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,f.t)("dashboard.add-menu.row","Row"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"add_row"}),(0,x.SD)(ue)}}),n.createElement(v.W.Item,{key:"add-panel-lib",testId:m.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,f.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"import_from_library"}),(0,x.s3)(ue)}}),n.createElement(v.W.Item,{key:"add-panel-clipboard",testId:m.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,f.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"paste_panel"}),(0,x.no)(ue,Te)},disabled:!Te}))},N=({dashboard:ue,onToolbarAddMenuOpen:Te})=>{const[he,re]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{he&&Te&&Te()},[he,Te]),n.createElement(T.m,{overlay:()=>n.createElement(w,{dashboard:ue}),placement:"bottom",offset:[0,6],onVisibleChange:re},n.createElement(M.$n,{variant:"secondary",size:"sm",fill:"outline","data-testid":m.Tp.components.PageToolbar.itemButton("Add button")},n.createElement(f.x6,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(O.I,{name:he?"angle-up":"angle-down",size:"lg"})))};var L=e(70497),V=e(14792),F=e(2609),z=e(81862),Y=e(28444),H=e(99246),k=e(93030),ee=e(62367);const ie=({dashboard:ue})=>n.createElement(M.$n,{"data-testid":m.Tp.pages.Dashboard.DashNav.shareButton,variant:"primary",size:"sm",onClick:()=>{A.c.toolbarShareClick(),i.Ny.partial({shareView:"link"})}},n.createElement(f.x6,{i18nKey:"dashboard.toolbar.share-button"},"Share")),fe={setStarred:D.ci,updateTimeZoneForSession:z.Cj},q=(0,r.connect)(null,fe),Z=m.Tp.pages.Dashboard.DashNav;function J(ue){registerDynamicDashNavAction("left",ue)}function G(ue){(0,H.Y)("right",ue)}const ne=n.memo(ue=>{(0,s.zy)();const Te=(0,l.C)();(0,C.u)(ue.dashboard.events,Y.Cf);const he=ue.dashboard.snapshot?.originalUrl??"",re=()=>{window.location.href=o.sQ.sanitizeUrl(ue.dashboard.snapshot.originalUrl)},De=(0,P._2)(),Fe=()=>{try{const rt=new URL(o.sQ.sanitizeUrl(he),h.Ay.appUrl),Je=new URL(h.Ay.appUrl);rt.host!==Je.host?y.lE.publish(new Y.S8({component:d.u,props:{title:"Proceed to external site?",modalClass:oe,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,he)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:re}})):re()}catch(rt){De.error("Invalid URL",rt instanceof Error?rt.message:void 0)}},Ee=()=>{A.c.toolbarFavoritesClick();const rt=(0,V.UA)(),{dashboard:Je,setStarred:Ve}=ue;rt.starDashboard(Je.uid,!!Je.meta.isStarred).then(Oe=>{Ve({id:Je.uid,title:Je.title,url:Je.meta.url??"",isStarred:Oe}),Je.meta.isStarred=Oe,Te()})},Me=()=>{A.c.toolbarSettingsClick(),i.Ny.partial({editview:"settings"})},ze=()=>{F._o.prev()},xe=()=>{F._o.next()},We=()=>{F._o.stop(),Te()},be=(rt,Je)=>{rt.map((Ve,Oe)=>{const Ne=Ve.component,ye=n.createElement(Ne,{...ue,key:`button-custom-${Oe}`});typeof Ve.index=="number"?Je.splice(Ve.index,0,ye):Je.push(ye)})},pe=()=>F._o.state.isPlaying,Ue=()=>{const{dashboard:rt,kioskMode:Je}=ue,{canStar:Ve,isStarred:Oe}=rt.meta,Ne=[];if(Je||pe())return[];if(Ve){let ye=Oe?(0,f.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,f.t)("dashboard.toolbar.mark-favorite","Mark as favorite");Ne.push(n.createElement(k._,{tooltip:ye,icon:Oe?"favorite":"star",iconType:Oe?"mono":"default",iconSize:"lg",onClick:Ee,key:"button-star"}))}return rt.meta.publicDashboardEnabled&&Ne.push(n.createElement(c.E,{color:"blue",text:"Public",key:"public-dashboard-button-badge",className:le,"data-testid":Z.publicDashboardTag})),h.Ay.featureToggles.scenes&&Ne.push(n.createElement(k._,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{i.Ny.partial({scenes:!0})}})),be(H.C.left,Ne),Ne},we=()=>n.createElement(g.e,{key:"playlist-buttons"},n.createElement(u.I,{tooltip:(0,f.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:ze,narrow:!0}),n.createElement(u.I,{onClick:We},n.createElement(f.x6,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(u.I,{tooltip:(0,f.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:xe,narrow:!0})),je=()=>{const{dashboard:rt,updateTimeZoneForSession:Je,hideTimePicker:Ve}=ue;return Ve?null:n.createElement(ee.$,{dashboard:rt,onChangeTimeZone:Je,onToolbarRefreshClick:A.c.toolbarRefreshClick,onToolbarZoomClick:A.c.toolbarZoomClick,onToolbarTimePickerClick:A.c.toolbarTimePickerClick,key:"time-controls"})},He=()=>{const{dashboard:rt,isFullscreen:Je,kioskMode:Ve,hideTimePicker:Oe}=ue,{canSave:Ne,canEdit:ye,showSettings:se,canShare:ae}=rt.meta,{snapshot:ge}=rt,Pe=ge&&ge.originalUrl,Re=[];return pe()?[we(),je()]:Ve===R.KioskMode.TV?[je()]:(Pe&&Re.push(n.createElement(u.I,{tooltip:(0,f.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Fe,icon:"link",key:"button-snapshot"})),Ne&&!Je&&Re.push(n.createElement(E.$s,{key:"button-save"},({showModal:Be,hideModal:_e})=>n.createElement(u.I,{tooltip:(0,f.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{A.c.toolbarSaveClick(),Be(L.$,{dashboard:rt,onDismiss:_e})}}))),be(H.C.right,Re),se&&Re.push(n.createElement(u.I,{tooltip:(0,f.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Me,key:"button-settings"})),ye&&!Je&&Re.push(n.createElement(N,{dashboard:rt,onToolbarAddMenuOpen:A.c.toolbarAddClick,key:"panel-add-dropdown"})),ae&&Re.push(n.createElement(ie,{key:"button-share",dashboard:rt})),Oe||Re.push(n.createElement(a.K,{key:"toolbar-separator"})),Re.push(je()),Re)};return n.createElement(b.H,{actions:n.createElement(n.Fragment,null,Ue(),n.createElement(a.K,{leftActionsSeparator:!0}),n.createElement(p.U,{alignment:"right"},He()))})});ne.displayName="DashNav";const te=q(ne),oe=(0,t.css)({width:"max-content",maxWidth:"80vw"}),le=(0,t.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})},93030:(Q,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({icon:i,iconType:l,iconSize:d,tooltip:c,onClick:g,children:u})=>{const E=(0,r.of)(m);return n.createElement("div",{className:E.noBorderContainer},i&&n.createElement(s.K,{name:i,size:d,iconType:l,tooltip:c,tooltipPlacement:"bottom",onClick:g}),u)},m=i=>({noBorderContainer:(0,t.css)`
    padding: 0 ${i.spacing(.5)};
    display: flex;
  `})},62367:(Q,I,e)=>{"use strict";e.d(I,{$:()=>g});var t=e(96540),n=e(85858),r=e(3591),s=e(11134),o=e(25573),m=e(10096),i=e(44836),l=e(16233),d=e(74856),c=e(28444);class g extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=E=>{(0,d.jG)().setAutoRefresh(E),this.forceUpdate()},this.onRefresh=()=>((0,d.jG)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{m.lE.publish(new c.Io({direction:c.xL.Left}))},this.onMoveForward=()=>{m.lE.publish(new c.Io({direction:c.xL.Right}))},this.onChangeTimePicker=E=>{const{dashboard:p}=this.props,b=p.timepicker,a=b.nowDelay&&E.raw.to==="now",h=n.isMathString(E.raw.from)?E.raw.from:E.from,P=n.isMathString(E.raw.to)?E.raw.to:E.to,y={from:h,to:a?"now-"+b.nowDelay:P};(0,d.jG)().setTime(y)},this.onChangeTimeZone=E=>{this.props.dashboard.timezone=E,this.props.onChangeTimeZone(E),this.onRefresh()},this.onChangeFiscalYearStartMonth=E=>{this.props.dashboard.fiscalYearStartMonth=E,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),m.lE.publish(new c.U0({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(r.sR,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:E,isOnCanvas:p}=this.props,{refresh_intervals:b}=E.timepicker,a=(0,d.jG)().getValidIntervals(b||s.cb),h=(0,d.jG)().timeRange(),P=E.getTimezone(),y=E.fiscalYearStartMonth,C=E.panelInEdit?.isEditing;let f;return E.refresh===l.SM&&(f=(0,d.jG)().getAutoRefreshInteval().interval),t.createElement(t.Fragment,null,t.createElement(o.m,{value:h,onChange:this.onChangeTimePicker,timeZone:P,fiscalYearStartMonth:y,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick}),t.createElement(s.cC,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:E.refresh,intervals:a,isOnCanvas:p,tooltip:(0,i.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:C,showAutoInterval:!0,text:f}))}}},16495:(Q,I,e)=>{"use strict";e.d(I,{U:()=>t.Ay});var t=e(20120)},46991:(Q,I,e)=>{"use strict";e.d(I,{d:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(55852);const o=({children:i,...l})=>{const d=(0,r.of)(m);return n.createElement("div",{className:d.buttonWrapper},n.createElement(s.$n,{icon:"plus",...l},i))},m=i=>({buttonWrapper:(0,t.css)`
    padding: ${i.spacing(3)} 0;
  `})},75590:(Q,I,e)=>{"use strict";e.d(I,{p:()=>h});var t=e(2543),n=e(96540),r=e(65879),s=e(13544),o=e(57418),m=e(88575),i=e(20333),l=e(15648),d=e(10354),c=e(15292),g=e(44836),u=e(11134),E=e(74856);const p=({refreshIntervals:P,onRefreshIntervalChange:y,getIntervalsFunc:C=a,validateIntervalsFunc:f=b})=>{const[D,T]=(0,n.useState)(C(P??u.cb)),[M,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{const A=C(P??u.cb);T(A)},[C,P]);const S=(0,n.useMemo)(()=>Array.isArray(D)?D.join(","):"",[D]),v=(0,n.useCallback)(A=>{const R=A.currentTarget.value?A.currentTarget.value.split(","):[];T(R)},[T]),x=(0,n.useCallback)(A=>{const R=f(D);R===null&&y(C(D)),O(R)},[C,D,y,f]);return n.createElement(m.D,{label:(0,g.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,g.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:M,invalid:!!M},n.createElement(d.p,{id:"auto-refresh-input",invalid:!!M,value:S,onChange:v,onBlur:x}))},b=(P,y={getTimeSrv:E.jG})=>{try{return a(P,y),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},a=(P,y={getTimeSrv:E.jG})=>{const C=P.filter(f=>f.trim()!=="").map(f=>f.replace(/\s+/g,""));return[...new Set(y.getTimeSrv().getValidIntervals(C))]};class h extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=y=>{const C=y.currentTarget.value;if((0,t.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(r.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=y=>{typeof y=="string"&&this.props.onTimeZoneChange(y)},this.onWeekStartChange=y=>{this.props.onWeekStartChange(y)}}render(){return n.createElement(o.M,{label:(0,g.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},n.createElement(m.D,{label:(0,g.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":s.Tp.components.TimeZonePicker.containerV2},n.createElement(i.U,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(m.D,{label:(0,g.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":s.Tp.components.WeekStartPicker.containerV2},n.createElement(l.l,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(m.D,{label:(0,g.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,g.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},n.createElement(d.p,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(m.D,{label:(0,g.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},n.createElement(c.d,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(m.D,{label:(0,g.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,g.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},n.createElement(c.d,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},16561:(Q,I,e)=>{"use strict";e.d(I,{s:()=>ur});var t=e(96540),n=e(58476),r=e(71733),s=e(13544),o=e(12131),m=e(55852),i=e(15068),l=e(75269),d=e(17205),c=e(44836),g=e(16233),u=e(31678),E=e(28444),p=e(63329),b=e(23546),a=e(32196),h=e(16817),P=e(14110),y=e(40845),C=e(57418),f=e(66864),D=e(62930),T=e(56034),M=e(14578),O=e(29158),S=e(37390);const v=({nodes:xt,edges:wt,direction:fn,width:cn,height:bn,onDoubleClick:Wn})=>{const jn=(0,t.useRef)(null),pa=(0,t.useRef)(null),xa=(0,t.useCallback)(us=>{Wn&&Wn(us.nodes[0])},[Wn]);return(0,t.useEffect)(()=>((async()=>{const bs=await e.e(5083).then(e.t.bind(e,83416,23)),Ga={nodes:x(bs,xt),edges:A(bs,wt)},Qa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:fn??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};jn.current=new bs.Network(pa.current,Ga,Qa),jn.current?.on("doubleClick",xa)})(),()=>{jn.current&&jn.current.off("doubleClick")}),[fn,wt,xt,xa]),t.createElement("div",null,t.createElement("div",{ref:pa,style:{width:cn??"100%",height:bn??"60vh"}}))};function x(xt,wt){const fn=wt.map(cn=>({...cn,shape:"box"}));return new xt.DataSet(fn)}function A(xt,wt){const fn=wt.map(cn=>({...cn,arrows:"to",dashes:!0}));return new xt.DataSet(fn)}function R({edges:xt,nodes:wt,show:fn,title:cn,children:bn}){const[Wn,jn]=(0,t.useState)(fn),pa=(0,t.useCallback)(()=>jn(!0),[jn]),xa=(0,t.useCallback)(()=>jn(!1),[jn]);return t.createElement(t.Fragment,null,t.createElement(S.a,{isOpen:Wn,title:cn,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:xa,onDismiss:xa},t.createElement(v,{nodes:wt,edges:xt})),bn({showModal:pa}))}const B=({id:xt,usages:wt})=>{const fn=(0,t.useMemo)(()=>wt.find(bn=>bn.variable.id===xt),[xt,wt]);if(!fn)return null;const cn=fn.nodes.map(bn=>bn.label.includes(`$${xt}`)?{...bn,color:"#FB7E81"}:bn);return t.createElement(R,{show:!1,title:`Showing usages for: $${xt}`,nodes:cn,edges:fn.edges},({showModal:bn})=>t.createElement(O.K,{onClick:()=>bn(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var U=e(12846);const w=1e3;function K({variables:xt,dashboard:wt}){const[fn,cn]=(0,t.useState)(!1),[bn,Wn]=(0,t.useState)(0),[jn,pa]=(0,t.useState)([]),xa=(0,y.of)(F);(0,t.useEffect)(()=>Wn(Ga=>Ga+1),[xt,wt]);const{loading:us}=(0,h.A)(async()=>{if(fn&&bn>0){const Ga=Date.now(),Qa=await(0,U.g0)(xt,wt),yr=Date.now()-Ga;return yr>=w&&(0,P.rR)("Slow unknown variables expansion",{elapsed:yr}),Wn(0),pa(Qa),Qa}return[]},[xt,wt,fn,bn]),bs=Ga=>{Ga&&(0,P.rR)("Unknown variables section expanded"),cn(Ga)};return t.createElement("div",{className:xa.container},t.createElement(C.M,{label:t.createElement(N,null),isOpen:fn,onToggle:bs},us&&t.createElement(f.gW,{justify:"center"},t.createElement(f.Gy,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(D.y,null))),!us&&jn&&t.createElement(t.Fragment,null,jn.length===0&&t.createElement(L,null),jn.length>0&&t.createElement(V,{usages:jn}))))}function N(){const xt=(0,y.of)(F);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(T.m,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.I,{name:"info-circle",className:xt.infoIcon})))}function L(){return t.createElement("span",null,"No renamed or missing variables found.")}function V({usages:xt}){const wt=(0,y.of)(F);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,xt.map(fn=>{const{variable:cn}=fn,{id:bn,name:Wn}=cn;return t.createElement("tr",{key:bn},t.createElement("td",{className:wt.firstColumn},t.createElement("span",null,Wn)),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.lastColumn},t.createElement(B,{id:cn.id,usages:xt})))})))}const F=xt=>({container:(0,a.css)`
    margin-top: ${xt.spacing(4)};
    padding-top: ${xt.spacing(4)};
  `,infoIcon:(0,a.css)`
    margin-left: ${xt.spacing(1)};
  `,defaultColumn:(0,a.css)`
    width: 1%;
  `,firstColumn:(0,a.css)`
    width: 1%;
    vertical-align: top;
    color: ${xt.colors.text.maxContrast};
  `,lastColumn:(0,a.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var z=e(48594),Y=e(87421),H=e(56968),k=e(75096),ee=e(96374);function ie({varName:xt,isOpen:wt=!1,onConfirm:fn,onDismiss:cn}){return t.createElement(ee.u,{title:"Delete variable",isOpen:wt,onConfirm:fn,onDismiss:cn,body:`
      Are you sure you want to delete variable "${xt}"?
    `,modalClass:fe.modal,confirmText:"Delete"})}const fe={modal:(0,a.css)({width:"max-content",maxWidth:"80vw"})};var q=e(39070),Z=e(8964),J=e(58975),G=e(85140),ne=e(14329),te=e(41820),oe=e(20601),le=e(24240),ue=e(72401),Te=e(89458);function he({onChange:xt,type:wt}){const fn=(0,t.useMemo)(()=>(0,k.AX)(),[]),cn=(0,t.useMemo)(()=>fn.find(bn=>bn.value===wt)??fn[0],[fn,wt]);return t.createElement(Te.v,{name:"Select variable type",value:cn,options:fn,onChange:xt,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var re=e(2543),De=e(27238),Fe=e(3843);const Ee=xt=>async wt=>{const{rootStateKey:fn}=xt;wt((0,z.kb)(fn,(0,Fe.sJ)({name:(0,Y.dn)(xt).name,id:xt.id})))},Me=xt=>async(wt,fn)=>{const{rootStateKey:cn}=xt;wt((0,z.kb)(cn,(0,Fe.T7)((0,k.qD)(xt))))},ze=(xt,wt)=>(fn,cn)=>{const{id:bn,rootStateKey:Wn}=xt;let jn=null;if(wt.match(/^(?!__).*$/)||(jn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),wt.match(/^\w+$/)||(jn="Only word characters are allowed in variable names"),(0,Y.SS)(Wn,cn()).filter(us=>us.name===wt&&us.id!==bn).length&&(jn="Variable with the same name already exists"),jn){fn((0,z.kb)(Wn,(0,Fe.DW)({newName:wt,errorText:jn})));return}fn(xe(xt,wt))},xe=(xt,wt)=>(fn,cn)=>{const{rootStateKey:bn}=xt,Wn=(0,Y.dn)(xt,cn());if(Wn.name===wt){fn((0,z.kb)(bn,(0,Fe.FN)((0,k.qD)(xt,{newName:wt}))));return}const jn={...(0,re.cloneDeep)(Wn),name:wt,id:wt},pa=Wn.global,xa=Wn.index,us=(0,k.jX)(jn);fn((0,z.kb)(bn,(0,H.QV)((0,k.qD)(us,{global:pa,index:xa,model:jn})))),fn((0,z.kb)(bn,(0,Fe.FN)((0,k.qD)(us,{newName:wt})))),fn((0,z.kb)(bn,(0,H.Hr)((0,k.qD)(xt,{reIndex:!1}))))},We=(xt,wt="query")=>(fn,cn)=>{const bn=(0,k.q4)(xt),Wn=(0,Y.SS)(bn,cn()),jn=pe(wt,Wn),pa={type:wt,id:jn},xa=!1,us=(0,Y.hk)(bn,cn()),bs=(0,re.cloneDeep)(oe.B.get(wt).initialState);bs.id=jn,bs.name=jn,bs.rootStateKey=bn,fn((0,z.kb)(bn,(0,H.QV)((0,k.qD)(pa,{global:xa,model:bs,index:us})))),o.Ny.partial({editIndex:Wn.length})},be=xt=>(wt,fn)=>{const cn=(0,k.q4)(xt),bn=fn(),Wn=(0,Y.nS)(cn,bn),jn=bn.dashboard.getModel(),{usages:pa}=(0,U.hM)(Wn,jn),xa=(0,U.Ow)(pa);wt((0,z.kb)(cn,(0,De.bX)({usages:pa,usagesNetwork:xa})))};function pe(xt,wt){let fn=0,cn=`${xt}${fn}`;for(;wt.find(bn=>bn.id===cn);)cn=`${xt}${++fn}`;return cn}var Ue=e(85830);const we=(xt,wt)=>({editor:(0,Y.nx)(wt.identifier.rootStateKey,xt).editor,variable:(0,Y.dn)(wt.identifier,xt)}),je=xt=>({...(0,b.bindActionCreators)({variableEditorMount:Ee,variableEditorUnMount:Me,changeVariableName:ze,updateOptions:ue.mZ},xt),changeVariableProp:(wt,fn,cn)=>xt((0,z.kb)(wt.rootStateKey,(0,H.QP)((0,k.qD)(wt,{propName:fn,propValue:cn})))),changeVariableType:(wt,fn)=>xt((0,z.kb)(wt.rootStateKey,(0,H.l_)((0,k.qD)(wt,{newType:fn})))),removeVariable:wt=>{xt((0,z.kb)(wt.rootStateKey,(0,H.Hr)((0,k.qD)(wt,{reIndex:!0}))))}}),He=(0,p.connect)(we,je);class rt extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=wt=>{wt.preventDefault(),this.props.changeVariableName(this.props.identifier,wt.currentTarget.value)},this.onTypeChange=wt=>{wt.value&&this.props.changeVariableType(this.props.identifier,wt.value)},this.onLabelChange=wt=>{wt.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",wt.currentTarget.value)},this.onDescriptionChange=wt=>{this.props.changeVariableProp(this.props.identifier,"description",wt.currentTarget.value)},this.onHideChange=wt=>{this.props.changeVariableProp(this.props.identifier,"hide",wt)},this.onPropChanged=({propName:wt,propValue:fn,updateOptions:cn=!1})=>{this.props.changeVariableProp(this.props.identifier,wt,fn),cn&&this.props.updateOptions((0,k.jX)(this.props.variable))},this.onHandleSubmit=async wt=>{wt.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,k.jX)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),o.Ny.partial({editIndex:null})},this.onApply=()=>{o.Ny.partial({editIndex:null})},this.getVariableOptions=()=>{const{variable:wt}=this.props;return(0,le.SP)(wt)?wt.options.map(fn=>({label:String(fn.text),value:String(fn.value)})):[]}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:wt}=this.props,fn=oe.B.get(this.props.variable.type).editor;if(!fn)return null;const cn=wt.state===q.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(he,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(J.Y,null,"General"),t.createElement(ne._,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Ue.M.MaxSize,required:!0}),t.createElement(ne._,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(G.Z,{name:"Description",value:wt.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(Z.D,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),fn&&t.createElement(fn,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,le.SP)(this.props.variable)?t.createElement(te.j,{options:this.getVariableOptions()}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(f.Gy,{spacing:"md",height:"inherit"},t.createElement(m.$n,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(m.$n,{type:"submit","data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:cn,variant:"secondary"},"Run query",cn&&t.createElement(M.I,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(m.$n,{variant:"primary",onClick:this.onApply,"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(ie,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Je=He(rt);var Ve=e(55244),Oe=e(67061),Ne=e(7521),ye=e(99140);const se=({variables:xt})=>{const wt=(0,t.useMemo)(()=>(0,U.hI)(xt),[xt]),fn=(0,t.useMemo)(()=>(0,U.qJ)(xt),[xt]);return fn.length?t.createElement(R,{show:!1,title:"Dependencies",nodes:(0,U.H7)(wt,fn),edges:fn},({showModal:cn})=>t.createElement(m.$n,{onClick:()=>{(0,P.rR)("Show variable dependencies"),cn()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},ae=xt=>t.createElement(p.Provider,{store:ye.M_},t.createElement(se,{...xt})),ge=({id:xt,usages:wt,isAdhoc:fn})=>{const cn=(0,t.useMemo)(()=>wt.find(Wn=>Wn.variable.id===xt),[wt,xt]);if(wt.length===0||fn||!cn)return null;const bn=cn.nodes.map(Wn=>Wn.label.includes(`$${xt}`)?{...Wn,color:"#FB7E81"}:Wn);return t.createElement(R,{show:!1,title:`Showing usages for: $${xt}`,nodes:bn,edges:cn.edges},({showModal:Wn})=>t.createElement(O.K,{onClick:()=>{(0,P.rR)("Show variable usages"),Wn()},name:"code-branch",tooltip:"Show usages"}))};function Pe({index:xt,variable:wt,usageTree:fn,usagesNetwork:cn,onEdit:bn,onDuplicate:Wn,onDelete:jn}){const pa=(0,y.$j)(),xa=(0,y.of)(_e),us=Re(wt),Ga=(0,U.PK)(wt.id,fn)>0||wt.type==="adhoc",Qa=(0,k.jX)(wt);return t.createElement(Ve.sx,{draggableId:JSON.stringify(Qa),index:xt},(Zs,yr)=>t.createElement("tr",{ref:Zs.innerRef,...Zs.draggableProps,style:{userSelect:yr.isDragging?"none":"auto",background:yr.isDragging?pa.colors.background.secondary:void 0,...Zs.draggableProps.style}},t.createElement("td",{role:"gridcell",className:xa.column},t.createElement(m.$n,{size:"xs",fill:"text",onClick:sr=>{sr.preventDefault(),bn(Qa)},className:xa.nameLink,"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(wt.name)},wt.name)),t.createElement("td",{role:"gridcell",className:xa.definitionColumn,onClick:sr=>{sr.preventDefault(),bn(Qa)},"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(wt.name)},us),t.createElement("td",{role:"gridcell",className:xa.column},t.createElement("div",{className:xa.icons},t.createElement(Be,{passed:Ga}),t.createElement(ge,{id:wt.id,isAdhoc:wt.type==="adhoc",usages:cn}),t.createElement(O.K,{onClick:sr=>{sr.preventDefault(),(0,P.rR)("Duplicate variable"),Wn(Qa)},name:"copy",tooltip:"Duplicate variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(wt.name)}),t.createElement(O.K,{onClick:sr=>{sr.preventDefault(),(0,P.rR)("Delete variable"),jn(Qa)},name:"trash-alt",tooltip:"Remove variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(wt.name)}),t.createElement("div",{...Zs.dragHandleProps,className:xa.dragHandle},t.createElement(M.I,{name:"draggabledots",size:"lg"}))))))}function Re(xt){let wt="";return xt.type==="query"?xt.definition?wt=xt.definition:typeof xt.query=="string"&&(wt=xt.query):(0,le.SP)(xt)&&(wt=xt.query),wt}function Be({passed:xt}){const wt=(0,y.of)(_e);return xt?t.createElement(M.I,{name:"check",className:wt.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.I,{name:"exclamation-triangle",className:wt.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function _e(xt){return{dragHandle:(0,a.css)`
      cursor: grab;
      margin-left: ${xt.spacing(1)};
    `,column:(0,a.css)`
      width: 1%;
    `,nameLink:(0,a.css)`
      cursor: pointer;
      color: ${xt.colors.primary.text};
    `,definitionColumn:(0,a.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,a.css)`
      color: ${xt.v1.palette.greenBase};
      margin-right: ${xt.spacing(2)};
    `,iconFailed:(0,a.css)`
      color: ${xt.v1.palette.orange};
      margin-right: ${xt.spacing(2)};
    `,icons:(0,a.css)`
      display: flex;
      gap: ${xt.spacing(2)};
      align-items: center;
    `}}function Xe({variables:xt,usages:wt,usagesNetwork:fn,onChangeOrder:cn,onAdd:bn,onEdit:Wn,onDelete:jn,onDuplicate:pa}){const xa=(0,y.of)(at),us=bs=>{if(!bs.destination||!bs.source)return;(0,P.rR)("Variable drag and drop");const Ga=JSON.parse(bs.draggableId);cn(Ga,xt[bs.source.index].index,xt[bs.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,xt.length===0&&t.createElement(tt,{onAdd:bn}),xt.length>0&&t.createElement(Oe.B,{direction:"column",gap:4},t.createElement("div",{className:xa.tableContainer},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(Ve.JY,{onDragEnd:us},t.createElement(Ve.gL,{droppableId:"variables-list",direction:"vertical"},bs=>t.createElement("tbody",{ref:bs.innerRef,...bs.droppableProps},xt.map((Ga,Qa)=>t.createElement(Pe,{index:Qa,key:`${Ga.name}-${Qa}`,variable:Ga,usageTree:wt,usagesNetwork:fn,onDelete:jn,onDuplicate:pa,onEdit:Wn})),bs.placeholder))))),t.createElement(Oe.B,null,t.createElement(ae,{variables:xt}),t.createElement(m.$n,{"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:bn,icon:"plus"},"New variable")))))}function tt({onAdd:xt}){return t.createElement("div",null,t.createElement(Ne.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:wt=>{wt.preventDefault(),xt()}}))}const at=()=>({tableContainer:(0,a.css)`
    overflow: scroll;
    width: 100%;
  `}),st=(xt,wt)=>{const{uid:fn}=wt.dashboard,cn=(0,Y.nx)(fn,xt);return{variables:(0,Y.nS)(fn,xt),idInEditor:cn.editor.id,usagesNetwork:cn.inspect.usagesNetwork,usages:cn.inspect.usages}},dt=xt=>({...(0,b.bindActionCreators)({createNewVariable:We,initListMode:be},xt),changeVariableOrder:(wt,fn,cn)=>xt((0,z.kb)(wt.rootStateKey,(0,H.hj)((0,k.qD)(wt,{fromIndex:fn,toIndex:cn})))),duplicateVariable:wt=>xt((0,z.kb)(wt.rootStateKey,(0,H.ut)((0,k.qD)(wt,{newId:void 0})))),removeVariable:wt=>{xt((0,z.kb)(wt.rootStateKey,(0,H.Hr)((0,k.qD)(wt,{reIndex:!0}))))}}),ot=(0,p.connect)(st,dt);class ft extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=wt=>{const fn=this.props.variables.findIndex(cn=>cn.id===wt.id);o.Ny.partial({editIndex:fn})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(wt,fn,cn)=>{this.props.changeVariableOrder(wt,fn,cn)},this.onDuplicateVariable=wt=>{this.props.duplicateVariable(wt)},this.onModalOpen=wt=>{this.setState({variableId:wt})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:wt,variables:fn,sectionNav:cn}=this.props,bn=wt!=null?fn[wt]:void 0,Wn=cn.node,jn=Wn.parentItem?{...Wn.parentItem,url:Wn.url}:void 0,pa=bn?{text:bn.name,parentItem:jn}:jn;return t.createElement(d.Y,{navModel:this.props.sectionNav,pageNav:pa},!bn&&t.createElement(Xe,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!bn&&this.props.variables.length>0&&t.createElement(K,{variables:this.props.variables,dashboard:this.props.dashboard}),bn&&t.createElement(Je,{identifier:(0,k.jX)(bn)}),t.createElement(ie,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const yt=ot(ft);var Tt=e(5108),Kt=e(10096);const Gt=({dashboard:xt,sectionNav:wt})=>{const fn=Kt.TP.hasPermission(u.AccessControlAction.DashboardsPermissionsWrite),cn=wt.node.parentItem;return t.createElement(d.Y,{navModel:wt,pageNav:cn},t.createElement(Tt.x,{resource:"dashboards",resourceId:xt.uid,canSetPermissions:fn}))};var _t=e(78050),it=e(22391),Mt=e(19347),Dn=e(84167),lt=e(88575),Ct=e(10354),Vt=e(10880),qt=e(88323),rn=e(77268),en=e(2913),Jt=e(82241),hn=e(46502),Fn=e(51612);const Kn="New annotation",na=({editIdx:xt,dashboard:wt})=>{const fn=(0,y.of)(Ut),[cn,bn]=(0,t.useState)(wt.annotations.list[xt]),Wn=(0,t.useMemo)(()=>cn.filter?cn.filter.exclude?2:1:0,[cn.filter]),{value:jn}=(0,h.A)(()=>(0,Mt.l)().get(cn.datasource),[cn.datasource]),pa=(0,Mt.l)().getInstanceSettings(cn.datasource),xa=ms=>{const Hs=[...wt.annotations.list];Hs.splice(xt,1,ms),bn(ms),wt.annotations.list=Hs},us=ms=>{xa({...cn,name:ms.currentTarget.value})},bs=ms=>{const Hs=(0,it.p$)(ms);cn.datasource?.type!==Hs.type?xa({datasource:Hs,builtIn:cn.builtIn,enable:cn.enable,iconColor:cn.iconColor,name:cn.name,hide:cn.hide,filter:cn.filter,mappings:cn.mappings,type:cn.type}):xa({...cn,datasource:Hs})},Ga=ms=>{const Hs=ms.currentTarget;xa({...cn,[Hs.name]:Hs.type==="checkbox"?Hs.checked:Hs.value})},Qa=ms=>{xa({...cn,iconColor:ms})},Zs=ms=>{let Hs=ms.value===0?void 0:{exclude:ms.value===2,ids:cn.filter?.ids??[]};xa({...cn,filter:Hs})},yr=ms=>{if(!Array.isArray(ms))return;const Hs={exclude:Wn===2,ids:[]};ms.forEach(ao=>ao.value&&Hs.ids.push(ao.value)),xa({...cn,filter:Hs})},sr=on,xr=()=>{o.Ny.partial({editview:null,editIndex:null})},To=()=>{const ms=wt.annotations.list;wt.annotations.list=[...ms.slice(0,xt),...ms.slice(xt+1)],on()},qs=cn.name===Kn,_o=(ms,Hs)=>ms.label&&Hs.label?ms.label.toLowerCase().localeCompare(Hs.label.toLowerCase()):-1,no=(0,t.useMemo)(()=>wt?.panels.filter(ms=>en.Ay.panels[ms.type]).map(ms=>({value:ms.id,label:ms.title??`Panel ${ms.id}`,description:ms.description,imgUrl:en.Ay.panels[ms.type].info.logos.small})).sort(_o)??[],[wt]);return t.createElement("div",null,t.createElement(Dn.n,{className:fn.settingsForm},t.createElement(lt.D,{label:"Name"},t.createElement(Ct.p,{"aria-label":s.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:qs,value:cn.name,onChange:us})),t.createElement(lt.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Fn.s,{annotations:!0,variables:!0,current:cn.datasource,onChange:bs})),t.createElement(lt.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(Vt.S,{name:"enable",id:"enable",value:cn.enable,onChange:Ga})),t.createElement(lt.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(Vt.S,{name:"hide",id:"hide",value:cn.hide,onChange:Ga})),t.createElement(lt.D,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(f.Gy,null,t.createElement(rn.a,{value:cn?.iconColor,onChange:Qa}))),t.createElement(lt.D,{label:"Show in","aria-label":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(qt.l6,{options:vn,value:Wn,onChange:Zs,"aria-label":s.Tp.components.Annotations.annotationsTypeInput}),Wn!==0&&t.createElement(qt.KF,{options:no,value:no.filter(ms=>cn.filter?.ids.includes(ms.value)),onChange:yr,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:fn.select,"aria-label":s.Tp.components.Annotations.annotationsChoosePanelInput})))),t.createElement(Dn.n,null,t.createElement("h3",{className:"page-heading"},"Query"),jn?.annotations&&pa&&t.createElement(Jt.A,{datasource:jn,datasourceInstanceSettings:pa,annotation:cn,onChange:xa}),jn&&!jn.annotations&&t.createElement(hn.F,{datasource:jn,annotation:cn,onChange:xa})),t.createElement(Oe.B,null,!cn.builtIn&&t.createElement(m.$n,{variant:"destructive",onClick:To},"Delete"),t.createElement(m.$n,{variant:"secondary",onClick:xr,"data-testid":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(m.$n,{variant:"primary",onClick:sr},"Apply")))},Ut=xt=>({settingsForm:(0,a.css)({maxWidth:xt.spacing(60),marginBottom:xt.spacing(2)}),select:(0,a.css)`
      margin-top: 8px;
    `});function on(){o.Ny.partial({editIndex:null})}var mn=(xt=>(xt[xt.AllPanels=0]="AllPanels",xt[xt.IncludePanels=1]="IncludePanels",xt[xt.ExcludePanels=2]="ExcludePanels",xt))(mn||{});const vn=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var pn=e(14588),Un=e(91605),Bn=e(46991);const kn=({dashboard:xt,onNew:wt,onEdit:fn})=>{const cn=(0,y.of)(Mn),[bn,Wn]=(0,t.useState)(xt.annotations.list),jn=(Ga,Qa)=>{xt.annotations.list=pn.moveItemImmutably(bn,Ga,Ga+Qa),Wn(xt.annotations.list)},pa=Ga=>{xt.annotations.list=[...bn.slice(0,Ga),...bn.slice(Ga+1)],Wn(xt.annotations.list)},xa=bn.length===0||bn.length===1&&bn[0].builtIn,us=Ga=>Ga.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Ga.name)):Ga.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},Ga.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,Ga.name),bs=(0,Mt.l)();return t.createElement(f.gW,null,bn.length>0&&t.createElement("div",{className:cn.table},t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,xt.annotations.list.map((Ga,Qa)=>t.createElement("tr",{key:`${Ga.name}-${Qa}`},Ga.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>fn(Qa)},t.createElement(m.$n,{size:"sm",fill:"text",variant:"secondary"},us(Ga))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>fn(Qa)},t.createElement(m.$n,{size:"sm",fill:"text",variant:"secondary"},us(Ga))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>fn(Qa)},bs.getInstanceSettings(Ga.datasource)?.name||Ga.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Qa!==0&&t.createElement(O.K,{name:"arrow-up",onClick:()=>jn(Qa,-1),tooltip:"Move up"})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},xt.annotations.list.length>1&&Qa!==xt.annotations.list.length-1?t.createElement(O.K,{name:"arrow-down",onClick:()=>jn(Qa,1),tooltip:"Move down"}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Ga.builtIn&&t.createElement(Un.e,{size:"sm",onConfirm:()=>pa(Qa),"aria-label":`Delete query with title "${Ga.name}"`}))))))),xa&&t.createElement(Ne.A,{onClick:wt,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!xa&&t.createElement(Bn.d,{"data-testid":s.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:wt},"New query"))},Mn=()=>({table:(0,a.css)`
    width: 100%;
    overflow-x: scroll;
  `});function xn({dashboard:xt,editIndex:wt,sectionNav:fn}){const cn=()=>{const jn={name:Kn,enable:!0,datasource:(0,it.p$)((0,Mt.l)().getInstanceSettings(null)),iconColor:"red"};xt.annotations.list=[...xt.annotations.list,{...jn}],o.Ny.partial({editIndex:xt.annotations.list.length-1})},bn=jn=>{o.Ny.partial({editIndex:jn})},Wn=wt!=null&&wt<xt.annotations.list.length;return t.createElement(d.Y,{navModel:fn,pageNav:Vn(xt,wt,fn.node)},!Wn&&t.createElement(kn,{dashboard:xt,onNew:cn,onEdit:bn}),Wn&&t.createElement(na,{dashboard:xt,editIdx:wt}))}function Vn(xt,wt,fn){const cn=fn.parentItem;if(wt==null)return cn;const bn=xt.annotations.list[wt];if(bn)return{text:bn.name,parentItem:cn&&{...cn,url:fn.url}}}var aa=e(32264),Jn=e(90613),_n=e(60029),Hn=e(21744),ba=e(79924),va=e(94354),Ca=e(36607),dn=e(3673),pt=e(71678),Dt=e(14792),nn=e(5805),gn=e(11230);const Cn={cleanUpDashboardAndVariables:dn.Bz},In=(0,p.connect)(null,Cn),fa=({hideModal:xt,cleanUpDashboardAndVariables:wt,dashboard:fn})=>{const cn=fn.meta.provisioned,[,bn]=(0,nn.default)(async()=>{await(0,gn.A_)(fn.uid,!0),wt(),xt(),o.Ny.replace("/")},[xt]);return cn?t.createElement(ga,{hideModal:xt,provisionedId:fn.meta.provisionedExternalId}):t.createElement(ee.u,{isOpen:!0,body:t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,fn.title)),onConfirm:bn,onDismiss:xt,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},ga=({hideModal:xt,provisionedId:wt})=>t.createElement(S.a,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:xt,className:(0,a.css)`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",wt),t.createElement(S.a.ButtonRow,null,t.createElement(m.$n,{variant:"primary",onClick:xt},"OK"))),sa=In(fa),da=()=>{const xt=(0,Dt.UA)().getCurrent();return t.createElement(pt.$s,null,({showModal:wt,hideModal:fn})=>t.createElement(m.$n,{variant:"destructive",onClick:()=>{wt(sa,{dashboard:xt,hideModal:fn})},"aria-label":"Dashboard settings page delete dashboard button"},t.createElement(c.x6,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")))};var Ma=e(81394),_a=e(27966),Xa=e(75590);const ps=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function As({dashboard:xt,updateTimeZone:wt,updateWeekStart:fn,sectionNav:cn}){const[bn,Wn]=(0,t.useState)(0),[jn,pa]=(0,t.useState)(xt.title),[xa,us]=(0,t.useState)(xt.description),bs=cn.node.parentItem,Ga=(fs,Gr)=>{xt.meta.folderUid=fs,xt.meta.folderTitle=Gr,xt.meta.hasUnsavedFolderChange=!0,Wn(bn+1)},Qa=t.useCallback(fs=>{xt.title=fs,pa(fs)},[pa,xt]),Zs=t.useCallback(fs=>{xt.description=fs,us(fs)},[us,xt]),yr=fs=>{xt.graphTooltip=fs,Wn(bn+1)},sr=fs=>{xt.timepicker.refresh_intervals=fs.filter(Gr=>Gr.trim()!=="")},xr=fs=>{xt.timepicker.nowDelay=fs},To=fs=>{xt.timepicker.hidden=fs,Wn(bn+1)},qs=fs=>{xt.liveNow=fs,Wn(bn+1)},_o=fs=>{xt.timezone=fs,Wn(bn+1),wt(fs)},no=fs=>{xt.weekStart=fs,Wn(bn+1),fn(fs)},ms=fs=>{xt.tags=fs,Wn(bn+1)},Hs=fs=>{xt.editable=fs,Wn(bn+1)},ao=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(d.Y,{navModel:cn,pageNav:bs},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(Jn.a,{marginBottom:5},t.createElement(lt.D,{label:t.createElement(Oe.B,{justifyContent:"space-between"},t.createElement(_n.J,{htmlFor:"title-input"},t.createElement(c.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")),aa.$.featureToggles.dashgpt&&t.createElement(_a.Z,{onGenerate:Qa}))},t.createElement(Ct.p,{id:"title-input",name:"title",value:jn,onChange:fs=>Qa(fs.target.value)})),t.createElement(lt.D,{label:t.createElement(Oe.B,{justifyContent:"space-between"},t.createElement(_n.J,{htmlFor:"description-input"},(0,c.t)("dashboard-settings.general.description-label","Description")),aa.$.featureToggles.dashgpt&&t.createElement(Ma.V,{onGenerate:Zs}))},t.createElement(Hn.f,{id:"description-input",name:"description",value:xa,onChange:fs=>Zs(fs.target.value)})),t.createElement(lt.D,{label:(0,c.t)("dashboard-settings.general.tags-label","Tags")},t.createElement(ba.u,{id:"tags-input",tags:xt.tags,onChange:ms,width:40})),t.createElement(lt.D,{label:(0,c.t)("dashboard-settings.general.folder-label","Folder")},t.createElement(Ca.d,{value:xt.meta.folderUid,onChange:Ga,initialTitle:xt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:xt.id,skipInitialLoad:!0})),t.createElement(lt.D,{label:(0,c.t)("dashboard-settings.general.editable-label","Editable"),description:(0,c.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},t.createElement(va.z,{value:xt.editable,options:ao,onChange:Hs}))),t.createElement(Xa.p,{onTimeZoneChange:_o,onWeekStartChange:no,onRefreshIntervalChange:sr,onNowDelayChange:xr,onHideTimePickerChange:To,onLiveNowChange:qs,refreshIntervals:xt.timepicker.refresh_intervals,timePickerHidden:xt.timepicker.hidden,nowDelay:xt.timepicker.nowDelay,timezone:xt.timezone,weekStart:xt.weekStart,liveNow:xt.liveNow}),t.createElement(C.M,{label:(0,c.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},t.createElement(lt.D,{label:(0,c.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,c.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},t.createElement(va.z,{onChange:yr,options:ps,value:xt.graphTooltip}))),t.createElement(Jn.a,{marginTop:3},xt.meta.canDelete&&t.createElement(da,null))))}const ys={updateTimeZone:dn.lC,updateWeekStart:dn.Ss},ar=(0,p.connect)(null,ys)(As);var ss=e(32372),Rs=e(6473);function Cs({dashboard:xt,sectionNav:wt}){const fn=xt.getSaveModelClone(),[cn,bn]=(0,t.useState)(JSON.stringify(fn,null,2)),Wn=wt.node.parentItem,jn=async()=>{await(0,Dt.UA)().saveJSONDashboard(cn),Rs.t.reloadPage()},pa=(0,y.of)(ws);return t.createElement(d.Y,{navModel:wt,pageNav:Wn},t.createElement("div",{className:pa.wrapper},t.createElement(c.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),t.createElement(ss.B,{value:cn,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:bn,containerStyles:pa.codeEditor}),xt.meta.canSave&&t.createElement("div",null,t.createElement(m.$n,{type:"submit",onClick:jn},t.createElement(c.x6,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const ws=xt=>({wrapper:(0,a.css)({display:"flex",height:"100%",flexDirection:"column",gap:xt.spacing(2)}),codeEditor:(0,a.css)({flexGrow:1})});var kr=e(4588),Xs=e(65857);const dr=({editLinkIdx:xt,dashboard:wt,onGoBack:fn})=>{const[cn,bn]=(0,t.useState)(xt!==null?wt.links[xt]:kr.q),Wn=jn=>{const pa=[...wt.links];pa.splice(xt,1,jn),wt.links=pa,bn(jn)};return t.createElement(Xs.d,{link:cn,onUpdate:Wn,onGoBack:fn})};var ks=e(6199);const bo=({dashboard:xt,onNew:wt,onEdit:fn})=>{const[cn,bn]=(0,t.useState)(xt.links),Wn=(xa,us)=>{xt.links=pn.moveItemImmutably(cn,xa,xa+us),bn(xt.links)},jn=xa=>{xt.links=[...cn,{...xa}],bn(xt.links)},pa=xa=>{xt.links=[...cn.slice(0,xa),...cn.slice(xa+1)],bn(xt.links)};return t.createElement(ks.X,{links:cn,onNew:wt,onEdit:fn,onDuplicate:jn,onDelete:pa,onOrderChange:Wn})};function _s({dashboard:xt,sectionNav:wt,editIndex:fn}){const[cn,bn]=(0,t.useState)(!1),Wn=()=>{bn(!1),o.Ny.partial({editIndex:void 0})},jn=()=>{xt.links=[...xt.links,{...kr.q}],bn(!0),o.Ny.partial({editIndex:xt.links.length-1})},pa=bs=>{bn(!1),o.Ny.partial({editIndex:bs})},xa=fn!==void 0;let us=wt.node.parentItem;if(xa){us={text:cn?"New link":"Edit link",subTitle:cn?"Create a new link on your dashboard":"Edit a specific link of your dashboard"};const Qa=wt.node.url;us.parentItem=wt.node.parentItem&&{...wt.node.parentItem,url:Qa}}return t.createElement(d.Y,{navModel:wt,pageNav:us},!xa&&t.createElement(bo,{dashboard:xt,onNew:jn,onEdit:pa}),xa&&t.createElement(dr,{dashboard:xt,editLinkIdx:fn,onGoBack:Wn}))}var Ls=e(57714),Bs=e(19626),Tr=e(22764),Ws=e(56596),co=e(41053),ei=e(3169);const Ur=async(xt,wt)=>(Rs.t.ignoreNextSave(),await Ls.wL.restoreDashboard(wt.uid,xt)),Ao=xt=>{const wt=(0,u.useSelector)(Wn=>Wn.dashboard.getModel()),[fn,cn]=(0,co.A)(async()=>await Ur(xt,wt),[]),bn=(0,ei._2)();return(0,t.useEffect)(()=>{if(fn.value){const Wn=o.Ny.getLocation(),jn=r.I.stripBaseFromUrl(fn.value.url),pa=Wn.state?.routeReloadCounter;o.Ny.replace({...Wn,pathname:jn,state:{routeReloadCounter:pa?pa+1:1}}),bn.success("Dashboard restored",`Restored from version ${xt}`)}},[fn,xt,bn]),{state:fn,onRestoreDashboard:cn}},uo=({hideModal:xt,version:wt})=>{const{state:fn,onRestoreDashboard:cn}=Ao(wt);return(0,t.useEffect)(()=>{!fn.loading&&fn.value&&xt()},[fn,xt]),t.createElement(ee.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:xt,onConfirm:cn,body:t.createElement("p",null,"Are you sure you want to restore the dashboard to version ",wt,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${wt}`})},rs=({baseInfo:xt,newInfo:wt,diffData:fn,isNewLatest:cn})=>{const bn=(0,Ws.G4)(fn.lhs,fn.rhs),Wn=(0,y.of)(Ro);return t.createElement(Oe.B,{direction:"column",gap:1},t.createElement(Oe.B,{justifyContent:"space-between",alignItems:"center"},t.createElement(Oe.B,{alignItems:"center"},t.createElement("span",{className:(0,a.cx)(Wn.versionInfo,Wn.noMarginBottom)},t.createElement("strong",null,"Version ",xt.version)," updated by ",xt.createdBy," ",xt.ageString,xt.message),t.createElement(M.I,{name:"arrow-right",size:"sm"}),t.createElement("span",{className:Wn.versionInfo},t.createElement("strong",null,"Version ",wt.version)," updated by ",wt.createdBy," ",wt.ageString,wt.message)),cn&&t.createElement(pt.$s,null,({showModal:jn,hideModal:pa})=>t.createElement(m.$n,{variant:"destructive",icon:"history",onClick:()=>{jn(uo,{version:xt.version,hideModal:pa})}},"Restore to version ",xt.version))),Object.entries(bn).map(([jn,pa])=>t.createElement(Bs.D,{diffs:pa,key:jn,title:jn})),t.createElement(Jn.a,{paddingTop:2},t.createElement(C.M,{isOpen:!1,label:"View JSON Diff"},t.createElement(Tr.M,{oldValue:JSON.stringify(fn.lhs,null,2),newValue:JSON.stringify(fn.rhs,null,2)}))))},Ro=xt=>({versionInfo:(0,a.css)({color:xt.colors.text.secondary,fontSize:xt.typography.bodySmall.fontSize}),noMarginBottom:(0,a.css)({marginBottom:0})});var Do=e(78369);const lr=({versions:xt,canCompare:wt,onCheck:fn})=>{const cn=(0,y.of)(Lo);return t.createElement("div",{className:cn.margin},t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"width-4"}),t.createElement("th",{className:"width-4"},"Version"),t.createElement("th",{className:"width-14"},"Date"),t.createElement("th",{className:"width-10"},"Updated by"),t.createElement("th",null,"Notes"),t.createElement("th",null))),t.createElement("tbody",null,xt.map((bn,Wn)=>t.createElement("tr",{key:bn.id},t.createElement("td",null,t.createElement(Vt.S,{"aria-label":`Toggle selection of version ${bn.version}`,className:(0,a.css)({display:"inline"}),checked:bn.checked,onChange:jn=>fn(jn,bn.id),disabled:!bn.checked&&wt})),t.createElement("td",null,bn.version),t.createElement("td",null,bn.createdDateString),t.createElement("td",null,bn.createdBy),t.createElement("td",null,bn.message),t.createElement("td",{className:"text-right"},Wn===0?t.createElement(Do.v,{name:"Latest",colorIndex:17}):t.createElement(pt.$s,null,({showModal:jn,hideModal:pa})=>t.createElement(m.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{jn(uo,{version:bn.version,hideModal:pa})}},"Restore"))))))))};function Lo(xt){return{margin:(0,a.css)({marginBottom:xt.spacing(4)})}}const ii=10;class Hr extends t.PureComponent{constructor(wt){super(wt),this.getVersions=(fn=!1)=>{this.setState({isAppending:fn}),Ls.wL.getHistoryList(this.props.dashboard.uid,{limit:this.limit,start:this.start}).then(cn=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(cn)]}),this.start+=this.limit}).catch(cn=>console.log(cn)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const fn=this.state.versions.filter(xa=>xa.checked),[cn,bn]=fn,Wn=cn.version===this.props.dashboard.version;this.setState({isLoading:!0});const jn=await Ls.wL.getDashboardVersion(this.props.dashboard.uid,bn.version),pa=await Ls.wL.getDashboardVersion(this.props.dashboard.uid,cn.version);this.setState({baseInfo:bn,isLoading:!1,isNewLatest:Wn,newInfo:cn,viewMode:"compare",diffData:{lhs:jn.data,rhs:pa.data}})},this.decorateVersions=fn=>fn.map(cn=>({...cn,createdDateString:this.props.dashboard.formatDate(cn.created),ageString:this.props.dashboard.getRelativeTime(cn.created),checked:!1})),this.onCheck=(fn,cn)=>{this.setState({versions:this.state.versions.map(bn=>bn.id===cn?{...bn,checked:fn.currentTarget.checked}:bn)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(fn=>({...fn,checked:!1})),viewMode:"list"})},this.limit=ii,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(wt=>wt.version===1)}render(){const{versions:wt,viewMode:fn,baseInfo:cn,newInfo:bn,isNewLatest:Wn,isLoading:jn,diffData:pa}=this.state,xa=wt.filter(Qa=>Qa.checked).length===2,us=wt.length>1,bs=wt.length>=this.limit,Ga=this.props.sectionNav.node.parentItem;return fn==="compare"?t.createElement(d.Y,{navModel:this.props.sectionNav,pageNav:Ga},t.createElement(Ls.me,{onClick:this.reset,baseVersion:cn?.version,newVersion:bn?.version,isNewLatest:Wn}),jn?t.createElement(Po,{msg:"Fetching changes\u2026"}):t.createElement(rs,{newInfo:bn,baseInfo:cn,isNewLatest:Wn,diffData:pa})):t.createElement(d.Y,{navModel:this.props.sectionNav,pageNav:Ga},jn?t.createElement(Po,{msg:"Fetching history list\u2026"}):t.createElement(lr,{versions:wt,onCheck:this.onCheck,canCompare:xa}),this.state.isAppending&&t.createElement(Po,{msg:"Fetching more entries\u2026"}),us&&t.createElement(Ls.rJ,{hasMore:bs,canCompare:xa,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Po=({msg:xt})=>t.createElement(f.Gy,null,t.createElement(D.y,null),t.createElement("em",null,xt)),Co=()=>o.Ny.partial({editview:null,editIndex:null});function ur({dashboard:xt,editview:wt,pageNav:fn,sectionNav:cn}){const[bn,Wn]=(0,t.useState)(0);(0,t.useEffect)(()=>{xt.events.subscribe(E.Cf,()=>Wn(xr=>xr+1))},[xt]);const jn=(0,t.useMemo)(()=>Vo(xt),[xt,bn]),pa=()=>{xt.meta.hasUnsavedFolderChange=!1},xa=jn.find(xr=>xr.id===wt)??jn[0],us=g.TP.hasEditPermissionInFolders,bs=xt.meta.canSave,Ga=(0,n.zy)(),Qa=mr(Ga),Zs=jr(fn,cn,jn,xa,Ga),yr="sm",sr=[t.createElement(m.$n,{"data-testid":s.Tp.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:yr,onClick:Co},"Close"),us&&t.createElement(_t.m,{dashboard:xt,onSaveSuccess:pa,variant:"secondary",key:"save as",size:yr}),bs&&t.createElement(_t.C,{dashboard:xt,onSaveSuccess:pa,key:"Save",size:yr})];return t.createElement(t.Fragment,null,t.createElement(l.H,{actions:t.createElement(i.U,{alignment:"right"},sr)}),t.createElement(xa.component,{sectionNav:Zs,dashboard:xt,editIndex:Qa}))}function Vo(xt){const wt=[],fn=(0,c.t)("dashboard-settings.general.title","General");xt.meta.canEdit&&(wt.push({title:fn,id:"settings",icon:"sliders-v-alt",component:ar}),wt.push({title:(0,c.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:xn,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),wt.push({title:(0,c.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:yt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),wt.push({title:(0,c.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:_s})),xt.meta.canMakeEditable&&wt.push({title:fn,icon:"sliders-v-alt",id:"settings",component:Bo}),xt.id&&xt.meta.canSave&&wt.push({title:(0,c.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:Hr});const cn=(0,c.t)("dashboard-settings.permissions.title","Permissions");return xt.id&&xt.meta.canAdmin&&g.TP.hasPermission(u.AccessControlAction.DashboardsPermissionsRead)&&wt.push({title:cn,id:"permissions",icon:"lock",component:Gt}),wt.push({title:(0,c.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:Cs}),wt}function mo(xt,wt){return{...xt,parentItem:xt.parentItem?mo(xt.parentItem,wt):wt}}function jr(xt,wt,fn,cn,bn){const Wn={text:(0,c.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!1,url:r.I.getUrlForPartial(bn,{editview:"settings",editIndex:null})};Wn.children=fn.map(pa=>({text:pa.title,icon:pa.icon,id:pa.id,url:r.I.getUrlForPartial(bn,{editview:pa.id,editIndex:null}),active:pa===cn,parentItem:Wn,subTitle:pa.subTitle}));const jn=mo(xt,wt.node);return Wn.parentItem=jn,{main:Wn,node:Wn.children.find(pa=>pa.active)}}function Bo({dashboard:xt,sectionNav:wt}){return t.createElement(d.Y,{navModel:wt},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(m.$n,{type:"submit",onClick:()=>xt.makeEditable()},"Make editable"))}function mr(xt){const wt=new URLSearchParams(xt.search).get("editIndex");if(wt!=null)return parseInt(wt,10)}},10740:(Q,I,e)=>{"use strict";e.d(I,{n:()=>N,C:()=>K});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(94753),m=e(60782),i=e(62930),l=e(56034),d=e(42418),c=e(67061),g=e(10354),u=e(14578),E=e(72109),p=e(29158);const b=({currentPage:V,numberOfPages:F,onNavigate:z,hideWhenSinglePage:Y,className:H})=>{const k=(0,r.of)(a);return Y&&F<=1?null:n.createElement("div",{className:(0,t.cx)(k.wrapper,H)},n.createElement(p.K,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>z(V-1),disabled:V===1}),V," of ",F,n.createElement(p.K,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>z(V+1),disabled:V===F}))},a=V=>({wrapper:(0,t.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})});var h=e(16817),P=e(65418),y=e(34867),C=e(3169),f=e(3363);const D=(0,y.DW)("features.dashboards.genai");var T=(V=>(V.IDLE="idle",V.GENERATING="generating",V.COMPLETED="completed",V))(T||{});const M=1e4;function O(V=f.C4,F=1){const[z,Y]=(0,n.useState)([]),[H,k]=(0,n.useState)(!1),[ee,ie]=(0,n.useState)(""),[fe,q]=(0,n.useState)("idle"),[Z,J]=(0,n.useState)(),{error:G}=(0,C._2)();let ne="";const te=(0,n.useCallback)(he=>{q("idle"),Y([]),k(!1),J(he),G("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(he),D.logError(he,{messages:JSON.stringify(z),model:V,temperature:String(F)})},[z,V,F,G]);(0,n.useEffect)(()=>{z.length>0&&ie("")},[z]);const{error:oe,value:le}=(0,h.A)(async()=>await(0,f.QX)(),[f.QX]),{error:ue,value:Te}=(0,h.A)(async()=>{if(!le||!z.length)return{enabled:le};q("generating"),J(void 0);const he=P.qH({model:V,temperature:F,messages:z}).pipe(P.qA());return{enabled:le,stream:he.subscribe({next:re=>{ne=re},error:te,complete:()=>{ie(ne),q("completed"),setTimeout(()=>{q("idle")}),Y([]),k(!1),J(void 0)}})}},[z,le]);return(0,n.useEffect)(()=>()=>{Te?.stream&&Te.stream.unsubscribe()},[Te]),(0,n.useEffect)(()=>{H&&(Te?.stream?.unsubscribe(),q("idle"),k(!1),J(void 0),Y([]))},[H,Te?.stream]),(0,n.useEffect)(()=>{let he;return fe==="generating"&&ee===""&&(he=setTimeout(()=>{te(new Error(`OpenAI stream timed out after ${M}ms`))},M)),()=>{he&&clearTimeout(he)}},[fe,ee,te]),(ue||oe)&&J(ue||oe),{setMessages:Y,setStopGeneration:k,messages:z,reply:ee,streamStatus:fe,error:Z,value:Te}}const S=({history:V,index:F,reply:z,streamStatus:Y,onNavigate:H})=>{const k=(0,r.of)(v),ee=V.length,ie=()=>z&&Y!==T.IDLE?z:V[F-1];return n.createElement(n.Fragment,null,n.createElement("div",{className:k.contentWrapper},n.createElement(o.E,{element:"p",color:"secondary"},ie())),n.createElement(b,{currentPage:F,numberOfPages:ee,onNavigate:H,hideWhenSinglePage:!1,className:k.paginationWrapper}))},v=V=>({paginationWrapper:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,t.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",maxHeight:110,overflowY:"scroll",backgroundColor:V.colors.background.secondary,border:`1px solid ${V.colors.border.weak}`,padding:V.spacing(1),minHeight:60})}),x=({onSuggestionClick:V,isGenerating:F})=>{const z=(0,r.of)(A);return n.createElement("div",{className:z.quickSuggestionsWrapper},n.createElement(s.$n,{onClick:()=>V(f.HG.Shorter),size:"sm",variant:"secondary",icon:"paragraph",disabled:F},f.HG.Shorter),n.createElement(s.$n,{onClick:()=>V(f.HG.MoreDescriptive),size:"sm",variant:"secondary",icon:"document-layout-left",disabled:F},f.HG.MoreDescriptive),n.createElement(s.$n,{onClick:()=>V(f.HG.Regenerate),icon:"sync",size:"sm",variant:"secondary",disabled:F},f.HG.Regenerate))},A=V=>({quickSuggestionsWrapper:(0,t.css)({display:"flex",flexDirection:"row",gap:8})});var R=e(57725);const B=.5,U=({eventTrackingSrc:V,history:F,messages:z,onApplySuggestion:Y,updateHistory:H})=>{const k=(0,r.of)(w),[ee,ie]=(0,n.useState)(1),[fe,q]=(0,n.useState)(!1),[Z,J]=(0,n.useState)(""),{setMessages:G,setStopGeneration:ne,reply:te,streamStatus:oe,error:le}=O(f.C4,B),ue=oe===T.GENERATING,Te=(We,be)=>(0,R.XX)(V,We,be);(0,n.useEffect)(()=>{!ue&&te!==""&&ie(1)},[ue,te]),(0,n.useEffect)(()=>{oe===T.COMPLETED&&H((0,f.Kb)(te))},[oe,te,H]),(0,n.useEffect)(()=>{le&&q(!0),oe===T.GENERATING&&q(!1)},[le,oe]);const he=We=>{Fe(We),Te(R.KR.customFeedback,{customFeedback:We})},re=()=>{ue?(ne(!0),te!==""&&H((0,f.Kb)(te))):Y(F[ee-1])},De=We=>{ie(We),Te(We>ee?R.KR.backHistoryItem:R.KR.forwardHistoryItem)},Fe=We=>{We!==f.HG.Regenerate?z=[...z,...(0,f.To)(F[ee-1],We)]:z=[...z,...(0,f.To)(F[ee-1],"Please, regenerate")],G(z),We in f.HG&&Te(R.KR.quickFeedback,{quickFeedbackItem:We})},Ee=We=>We.key==="Enter"&&he(Z),Me=We=>J(We.currentTarget.value),ze=()=>he(Z),xe=()=>Te(R.KR.linkToDocs);return n.createElement("div",{className:k.container},fe&&n.createElement(d.F,{title:""},n.createElement(c.B,{direction:"column"},n.createElement("p",null,"Sorry, I was unable to complete your request. Please try again."))),n.createElement(S,{history:F,index:ee,onNavigate:De,reply:(0,f.Kb)(te),streamStatus:oe}),n.createElement("div",{className:k.actionButtons},n.createElement(x,{onSuggestionClick:Fe,isGenerating:ue})),n.createElement(g.p,{placeholder:"Tell AI what to do next...",suffix:n.createElement(s.$n,{icon:"enter",variant:"secondary",fill:"text","aria-label":"Send custom feedback",onClick:ze,disabled:Z===""},"Send"),value:Z,onChange:Me,onKeyDown:Ee}),n.createElement("div",{className:k.applySuggestion},n.createElement(c.B,{justifyContent:"flex-end",direction:"row"},n.createElement(s.$n,{icon:ue?"fa fa-spinner":"check",onClick:re},ue?K:"Apply"))),n.createElement("div",{className:k.footer},n.createElement(u.I,{name:"exclamation-circle","aria-label":"exclamation-circle",className:k.infoColor}),n.createElement(o.E,{variant:"bodySmall",color:"secondary"},"This content is AI-generated using the"," ",n.createElement(E.Y,{variant:"bodySmall",inline:!0,href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:xe},"Grafana LLM plugin"))))},w=V=>({container:(0,t.css)({display:"flex",flexDirection:"column",width:520,maxHeight:350,paddingBottom:25}),applySuggestion:(0,t.css)({paddingTop:V.spacing(2)}),actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,t.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:V.spacing(1),paddingLeft:V.spacing(2),alignItems:"center",gap:V.spacing(1),borderTop:`1px solid ${V.colors.border.weak}`,marginTop:V.spacing(2)}),infoColor:(0,t.css)({color:V.colors.info.main}),actionButtons:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"24px 0 8px 0"})}),K="Stop generating",N=({text:V="Auto-generate",toggleTipTitle:F="",onClick:z,model:Y=f.C4,messages:H,onGenerate:k,temperature:ee=1,eventTrackingSrc:ie,disabled:fe})=>{const q=(0,r.of)(L),{setMessages:Z,setStopGeneration:J,reply:G,value:ne,error:te,streamStatus:oe}=O(Y,ee),[le,ue]=(0,n.useState)([]),[Te,he]=(0,n.useState)(!1),re=le.length>0,De=oe===T.GENERATING,Fe=!re,Ee=fe||ne&&!ne.enabled&&!te,Me=He=>(0,R.XX)(ie,He),ze=He=>{oe===T.GENERATING?J(!0):re?he(!0):(z?.(He),Z(we()));const rt=te?R.KR.erroredRetryButton:De?R.KR.stopGenerationButton:Fe?R.KR.autoGenerateButton:R.KR.improveButton;Me(rt)},xe=(0,n.useCallback)(He=>{le.indexOf(He)===-1&&ue([He,...le])},[le]);if((0,n.useEffect)(()=>{oe===T.COMPLETED&&G&&k((0,f.Kb)(G))},[oe,G,k]),(0,n.useEffect)(()=>{oe===T.COMPLETED&&xe((0,f.Kb)(G))},[le,oe,G,xe]),!ne?.enabled)return null;const We=He=>{Me(R.KR.applySuggestion),k(He),he(!1)},be=()=>{if(!De)return te||ne&&!ne?.enabled?"exclamation-circle":"ai"},pe=()=>{let He=V;return te&&(He="Retry"),De&&(He=K),re&&(He="Improve"),He},Ue=n.createElement(s.$n,{icon:be(),onClick:ze,fill:"text",size:"sm",disabled:Ee,variant:te?"destructive":"primary"},pe()),we=()=>typeof H=="function"?H():H,je=()=>{if(re){const He=n.createElement(o.E,{element:"p"},F);return n.createElement(m.G,{title:He,content:n.createElement(U,{history:le,messages:we(),onApplySuggestion:We,updateHistory:xe,eventTrackingSrc:ie}),placement:"left-start",fitContent:!0,show:Te,onClose:()=>he(!1),onOpen:()=>he(!0)},Ue)}return Ue};return n.createElement("div",{className:q.wrapper},De&&n.createElement(i.y,{size:"sm",className:q.spinner}),Fe?n.createElement(l.m,{show:te?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},Ue):je())},L=V=>({wrapper:(0,t.css)({display:"flex"}),spinner:(0,t.css)({color:V.colors.text.link})})},81394:(Q,I,e)=>{"use strict";e.d(I,{V:()=>l});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,l=({onGenerate:c})=>t.createElement(r.n,{messages:d,onGenerate:c,eventTrackingSrc:s.ec.dashboardDescription,toggleTipTitle:"Improve your dashboard description"});function d(){const c=(0,n.UA)().getCurrent(),g=(0,o.BB)(c);return[{content:i,role:o.Xh.system},{content:`The title of the dashboard is "${c.title}"
${g}`,role:o.Xh.system}]}},27966:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,l=({onGenerate:c})=>t.createElement(r.n,{messages:d,onGenerate:c,eventTrackingSrc:s.ec.dashboardTitle,toggleTipTitle:"Improve your dashboard title"});function d(){const c=(0,n.UA)().getCurrent();return[{content:i,role:o.Xh.system},{content:`The panels in the dashboard are: ${(0,o.BB)(c)}`,role:o.Xh.system}]}},20214:(Q,I,e)=>{"use strict";e.d(I,{t:()=>l});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const i=`You are an expert in creating Grafana Panels.
You will be given the title and description of the dashboard the panel is in as well as the JSON for the panel.
Your goal is to write a descriptive and concise panel description.
The panel description is meant to explain the purpose of the panel, not just its attributes.
Do not refer to the panel; simply describe its purpose.
There should be no numbers in the description except for thresholds.
The description should be, at most, 200 characters.`,l=({onGenerate:c,panel:g})=>t.createElement(r.n,{messages:()=>d(g),onGenerate:c,eventTrackingSrc:s.ec.panelDescription,toggleTipTitle:"Improve your panel description"});function d(c){const g=(0,n.UA)().getCurrent(),u=(0,o.hn)(c);return[{content:i,role:o.Xh.system},{content:`The panel is part of a dashboard with the title: ${g.title}`,role:o.Xh.system},{content:`The panel is part of a dashboard with the description: ${g.description}`,role:o.Xh.system},{content:`This is the JSON which defines the panel: ${u}`,role:o.Xh.user}]}},74410:(Q,I,e)=>{"use strict";e.d(I,{h:()=>i});var t=e(96540),n=e(10740),r=e(57725),s=e(3363);const m="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title.The title should be shorter than 50 characters.",i=({onGenerate:d,panel:c,dashboard:g})=>t.createElement(n.n,{messages:()=>l(c,g),onGenerate:d,eventTrackingSrc:r.ec.panelTitle,toggleTipTitle:"Improve your panel title"});function l(d,c){const g=(0,s.hn)(d);return[{content:m,role:s.Xh.system},{content:`The panel is part of a dashboard with the title: ${c.title}`,role:s.Xh.system},{content:`The panel is part of a dashboard with the description: ${c.description}`,role:s.Xh.system},{content:`Use this JSON object which defines the panel: ${g}`,role:s.Xh.system}]}},57725:(Q,I,e)=>{"use strict";e.d(I,{KR:()=>s,XX:()=>o,ec:()=>r});var t=e(14110);const n="dashboards_autogenerate_clicked";var r=(m=>(m.panelDescription="panel-description",m.panelTitle="panel-title",m.dashboardChanges="dashboard-changes",m.dashboardTitle="dashboard-title",m.dashboardDescription="dashboard-description",m.unknown="unknown",m))(r||{}),s=(m=>(m.autoGenerateButton="auto-generate-button",m.erroredRetryButton="errored-retry-button",m.stopGenerationButton="stop-generating-button",m.improveButton="improve-button",m.backHistoryItem="back-history-item",m.forwardHistoryItem="forward-history-item",m.quickFeedback="quick-feedback",m.linkToDocs="link-to-docs",m.customFeedback="custom-feedback",m.applySuggestion="apply-suggestion",m))(s||{});function o(m,i,l){(0,t.rR)(n,{src:m,item:i,...l})}},3363:(Q,I,e)=>{"use strict";e.d(I,{C4:()=>h,HG:()=>a,Xh:()=>b,Yy:()=>y,BB:()=>D,To:()=>f,hn:()=>T,QX:()=>C,Kb:()=>P});var t=e(2543),n=e(65418),r=e(32264),s=e(90254),o=e(34214);function m(M,O){return M===O?O:Array.isArray(M)&&Array.isArray(O)?d(M,O):i(M)&&i(O)?l(M,O):O}function i(M){return typeof M=="object"&&!Array.isArray(M)&&M!==null}function l(M,O){const S=Object.keys(M),v={};for(const x of S)O.hasOwnProperty(x)&&(Array.isArray(M[x])&&Array.isArray(O[x])||typeof M[x]=="object"&&typeof O[x]=="object"?v[x]=m(M[x],O[x]):v[x]=O[x]);return v}function d(M,O){const S=new Array(M.length).fill(void 0),v=new Set([...Array(M.length).keys()]),x=new Set([...Array(O.length).keys()]);for(let A=0;A<M.length&&x.size!==0;A++){let R=M[A];for(let B=0;B<O.length;B++){if(!x.has(B))continue;let U=O[B];U=m(R,U),JSON.stringify(R)===JSON.stringify(U)&&(v.delete(A),x.delete(B),S[A]=U)}}return c(M,O,S,v,x),S.filter(A=>A!==void 0)}function c(M,O,S,v,x){let A={};x.forEach(B=>{let U=O[B];if(typeof U!="object"||Array.isArray(U)){S.push(U),x.delete(B);return}v.forEach(w=>{let K=M[w];if(typeof K!="object"||Array.isArray(K)){v.delete(w);return}let N=0;for(const L in K){let V=K[L];if(!U.hasOwnProperty(L))continue;let F=U[L];typeof V!="string"&&typeof V!="number"||typeof V!=typeof F||V===F&&(L==="id"&&(N+=1e3),N++)}N!==0&&(A[N]===void 0&&(A[N]=[]),A[N].push([w,B]))})});const R=Object.keys(A).map(Number);R.sort((B,U)=>U-B);for(const B of R){let U=A[B];for(const w of U){const[K,N]=w;v.has(K)&&x.has(N)&&(S[K]=O[N],v.delete(K),x.delete(N))}}for(const B of x)S.push(O[B])}function g(M){const O=M.split(`
`);let S=M[0].startsWith("Index")?4:3,v=O.slice(0,S);const x=/("title"|Title|\{|\}|\[|\])/i;for(let A=S;A<O.length;A++){let R=O[A];(x.test(R)||R.startsWith("+")||R.startsWith("-"))&&v.push(R)}return v.join(`
`)+`
`}function u(M){if(M===null||M==="")return null;if(Array.isArray(M)){const S=M.map(v=>u(v)).filter(v=>v!==null);return S.length>0?S:null}if(typeof M!="object")return M;const O={};for(const S in M){const v=u(M[S]);if(v!==null){if(Array.isArray(v)&&v.length===0||typeof v=="object"&&Object.keys(v).length===0)continue;O[S]=v}}return Object.keys(O).length>0?O:null}function E(M){return JSON.parse(JSON.stringify(M,null,2))}function p(M){let O=E(M.getOriginalDashboard()),S=E(new o.G(O).getSaveModelClone()),v=E(M.getSaveModelClone());S=u(m(O,S)),v=u(m(S,v)),O=u(O);let x=(0,s.ss)("Before migration changes","After migration changes",JSON.stringify(O,null,2),JSON.stringify(S,null,2),"","",{context:20}),A=(0,s.ss)("Before user changes","After user changes",JSON.stringify(S,null,2),JSON.stringify(v,null,2),"","",{context:20});return x=g(x),A=g(A),{migrationDiff:x,userDiff:A}}var b=(M=>(M.system="system",M.user="user",M))(b||{}),a=(M=>(M.Shorter="Even shorter",M.MoreDescriptive="More descriptive",M.Regenerate="Regenerate",M))(a||{});const h="gpt-4",P=M=>M.replace(/^"|"$/g,"");function y(M){const{migrationDiff:O,userDiff:S}=p(M);return{userChanges:S,migrationChanges:O}}async function C(){return r.$.apps["grafana-llm-app"]?n.vK().then(M=>M.ok):!1}const f=(M,O)=>[{role:"system",content:`Your previous response was: ${M}. The user has provided the following feedback: ${O}. Re-generate your response according to the provided feedback.`}];function D(M){const O=(x,A)=>`- Panel ${A}
- Title: ${x.title}${x.description?`
- Description: ${x.description}`:""}`,S=M.panels.map(O);let v;if(S.length<=10)v=`The panels in the dashboard are:
${S.join(`
`)}`;else{const x=M.panels.filter(B=>B.description),A=M.panels.filter(B=>!B.description);let R;x.length>=10?R=x.slice(10).map(O).join(`
`):(R=x.map(O).join(`
`),R+=`
`,R+=A.slice(10-x.length).map(O).join("n")),v=`There are ${S.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${R}`}return v}function T(M){const O=["datasource","title","description","targets","type"],S={...(0,t.pick)(M,O),options:(0,t.pick)(M.options,["content"])};return JSON.stringify(S,null,2)}},18803:(Q,I,e)=>{"use strict";e.d(I,{B6:()=>g,E_:()=>E,jD:()=>u});var t=e(2543),n=e.n(t),r=e(72985),s=e(89667),o=e(52622),m=e(72724),i=e(39070),l=e(32264),d=e(41524),c=e(68706);function g(P){const y=[];if(P?.series)for(const C of P.series)y.push((0,s.Nw)(C));if(P?.annotations)for(const C of P.annotations){const f=(0,s.Nw)(C);f.schema?.meta||(f.schema.meta={}),f.schema.meta.dataTopic=o.QR.Annotations,y.push(f)}return y}function u(P,y){const C=P.getSaveModel(),f={panelType:C.type,datasource:"??"},D=l.$.buildInfo.versionString;let T=`| Key | Value |
|--|--|
| Panel | ${f.panelType} @ ${C.pluginVersion??D} |
| Grafana | ${D} // ${l.$.buildInfo.edition} |
`;return y&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+y+"\n```\n</details>"),T}async function E(P,y,C){const f=P.getSaveModel(),D=(0,t.cloneDeep)(h),T={panelType:f.type,datasource:"??"},M=await(0,r._)(P.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),O=P.datasource,S=(0,d.W)(g(M),y),v=l.$.buildInfo.versionString,x=f?.targets??[],A=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${f.pluginVersion??v}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${x.map(R=>{const B=R.datasource??O;return`${R.refId}[${B?.type}]`}).join(", ")}</td>
    </tr>
    ${p(f)}
    ${b(M,S)}
    ${a(M)}
    <tr>
      <th>Grafana</th>
      <td>${v} // ${l.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(D.panels[0]={...f,...D.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:c.nj.Snapshot,snapshot:S}]},f.transformations?.length){const R=D.panels[D.panels.length-1];R.title=R.title+" (after transformations)";const B=(0,t.cloneDeep)(R);B.id=100,B.title="Data (before transformations)",B.gridPos.w=24,B.targets[0].withTransforms=!1,D.panels.push(B)}return M.annotations?.length&&D.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:o.QR.Annotations,refId:"A"}]}),D.panels[1].options.content=A,D.panels[2].options.content=JSON.stringify(f,null,2),D.title=`Debug: ${f.title} // ${(0,m.LE)(new Date)}`,D.tags=["debug",`debug-${T.panelType}`],D.time={from:C.from.toISOString(),to:C.to.toISOString()},D}function p(P){return P.transformations?`<tr>
      <th>Transform</th>
      <td>${P.transformations.map(y=>y.id).join(", ")}</td>
  </tr>`:""}function b(P,y){let C=P.series.length??0,f=0,D=0;for(const T of P.series)f+=T.fields.length,D+=T.length;return`<tr><th>Data</th><td>${P.state!==i.Gu.Done?P.state:""} ${C} frames, ${f} fields, ${D} rows </td></tr>`}function a(P){return P.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${P.annotations.map((y,C)=>`<span>${y.length}</span>`)}</td>
</tr>`:""}const h={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},65123:(Q,I,e)=>{"use strict";e.d(I,{BN:()=>l,kx:()=>d,sd:()=>i});var t=e(96540),n=e(24705),r=e(19347),s=e(44836),o=e(16560),m=e(54612);const i=c=>(0,n.A)(async()=>l(c),[c]).value;async function l(c){const g=c?.request?.targets||[];if(c&&c.series&&g.length){for(const u of c.series)if(u.meta&&u.meta.custom){const E=await(0,r.l)().get(g[0].datasource);if(E&&E.components?.MetadataInspector)return E}}}const d=(c,g,u,E,p)=>(0,t.useMemo)(()=>{const b=[];return(0,m.$)(u)&&(b.push({label:(0,s.t)("dashboard.inspect.data-tab","Data"),value:o.q.Data}),b.push({label:(0,s.t)("dashboard.inspect.stats-tab","Stats"),value:o.q.Stats})),p&&b.push({label:(0,s.t)("dashboard.inspect.meta-tab","Meta data"),value:o.q.Meta}),b.push({label:(0,s.t)("dashboard.inspect.json-tab","JSON"),value:o.q.JSON}),E&&b.push({label:(0,s.t)("dashboard.inspect.error-tab","Error"),value:o.q.Error}),g.meta.canEdit&&(0,m.$)(u)&&b.push({label:(0,s.t)("dashboard.inspect.query-tab","Query"),value:o.q.Query}),b},[u,p,g,E])},57755:(Q,I,e)=>{"use strict";e.d(I,{D:()=>g});var t=e(32196),n=e(96540),r=e(78685),s=e(13544),o=e(53402),m=e(40845),i=e(55852),l=e(83277),d=e(53466);const c="showCategory",g=n.memo(({id:p,title:b,children:a,forceOpen:h,isOpenDefault:P=!0,renderTitle:y,className:C,itemsCount:f,isNested:D=!1,sandboxId:T})=>{const[M,O]=(0,r.A)(E(p),{isExpanded:P}),[S,v]=(0,n.useState)(M?.isExpanded??P),x=(0,n.useRef)(0),A=(0,n.useRef)(null),[R,B]=(0,l.s)(),U=R[c]===p;(0,n.useEffect)(()=>{x.current&&Date.now()-x.current<200||(U||h)&&(S||v(!0),U&&A.current?.scrollIntoView())},[h,S,U]);const w=(0,n.useCallback)(()=>{x.current=Date.now(),B({[c]:S?void 0:p},!0),O({isExpanded:!S}),v(!S)},[O,v,B,S,p]);y||(y=function(z){return z||f===void 0||f===0?b:n.createElement("span",null,b," ",n.createElement(o.p,{value:f}))});const K=(0,m.of)(u),N=(0,t.cx)({[K.box]:!0,[K.boxNestedExpanded]:D&&S},C),L=(0,t.cx)(K.header,{[K.headerExpanded]:S,[K.headerNested]:D}),V=(0,t.cx)(K.body,{[K.bodyNested]:D});return n.createElement("div",{className:N,"data-testid":"options-category","data-plugin-sandbox":T,"aria-label":s.Tp.components.OptionsGroup.group(p),ref:A},n.createElement("div",{className:L,onClick:w},n.createElement(i.$n,{"aria-label":s.Tp.components.OptionsGroup.toggle(p),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":S,className:K.toggleButton,icon:S?"angle-down":"angle-right",onClick:w}),n.createElement("h6",{id:`button-${p}`,className:K.title},y(S))),S&&n.createElement("div",{className:V,id:p,"aria-labelledby":`button-${p}`},a))});g.displayName="OptionsPaneCategory";const u=p=>({box:(0,t.css)({borderTop:`1px solid ${p.colors.border.weak}`}),boxNestedExpanded:(0,t.css)({marginBottom:p.spacing(2)}),title:(0,t.css)({flexGrow:1,overflow:"hidden",lineHeight:1.5,fontSize:"1rem",paddingLeft:"6px",fontWeight:p.typography.fontWeightMedium,margin:0}),header:(0,t.css)({display:"flex",cursor:"pointer",alignItems:"center",padding:p.spacing(.5),color:p.colors.text.primary,fontWeight:p.typography.fontWeightMedium,"&:hover":{background:p.colors.emphasize(p.colors.background.primary,.03)}}),toggleButton:(0,t.css)({alignSelf:"baseline"}),headerExpanded:(0,t.css)({color:p.colors.text.primary}),headerNested:(0,t.css)({padding:p.spacing(.5,0,.5,0)}),body:(0,t.css)({padding:p.spacing(1,2,1,4)}),bodyNested:(0,t.css)({position:"relative",paddingRight:0,"&:before":{content:"''",position:"absolute",top:0,left:"8px",width:"1px",height:"100%",background:p.colors.border.weak}})}),E=p=>`${d.wi}.optionGroup[${p}]`},48192:(Q,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(96540),n=e(57755);class r{constructor(o){this.props=o,this.items=[],this.categories=[]}addItem(o){return o.parent=this,this.items.push(o),this}addCategory(o){return o.props.isNested=!0,o.parent=this,this.categories.push(o),this}getCategory(o){let m=this.categories.find(i=>i.props.id===o);return m||(m=new r({title:o,id:o}),this.addCategory(m)),m}render(o){return this.props.customRender?this.props.customRender():t.createElement(n.D,{key:this.props.title,...this.props},this.items.map(m=>m.render(o)),this.categories.map(m=>m.render(o)))}}},74097:(Q,I,e)=>{"use strict";e.d(I,{v:()=>u});var t=e(32196),n=e(96540),r=e(23257),s=e.n(r),o=e(13544),m=e(60029),i=e(88575),l=e(40845),d=e(56034);function c({overrides:b}){const a=(0,l.of)(g);return n.createElement("div",{className:a.wrapper},b.map((h,P)=>n.createElement(d.m,{content:h.tooltip,key:P.toString(),placement:"top"},n.createElement("div",{"aria-label":h.description,className:a[h.type]}))))}const g=b=>{const a={width:8,height:8,borderRadius:b.shape.radius.circle,marginLeft:b.spacing(1),top:"-1px"};return{wrapper:(0,t.css)({display:"flex"}),rule:(0,t.css)({...a,position:"relative",backgroundColor:b.colors.primary.main}),data:(0,t.css)({...a,position:"relative",backgroundColor:b.colors.warning.main})}};class u{constructor(a){this.props=a}getLabel(a){const{title:h,description:P,overrides:y,addon:C}=this.props;if(!a)return this.parent.props.title===h&&!y?.length?null:n.createElement(E,{title:h,description:P,overrides:y,addon:C});const f=[];return this.parent.parent&&f.push(this.highlightWord(this.parent.parent.props.title,a)),this.parent.props.title!==h&&f.push(this.highlightWord(this.parent.props.title,a)),n.createElement(m.J,{description:P&&this.highlightWord(P,a),category:f},this.highlightWord(h,a),y&&y.length>0&&n.createElement(c,{overrides:y}))}highlightWord(a,h){return n.createElement(s(),{textToHighlight:a,searchWords:[h],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:a}=this.props;!a||a.length}render(a){const{title:h,description:P,render:y,showIf:C,skipField:f}=this.props,D=`${this.parent.props.id} ${h}`;return C&&!C()?null:f?y():n.createElement(i.D,{label:this.getLabel(a),description:P,key:D,"aria-label":o.Tp.components.PanelEditor.OptionsPane.fieldLabel(D)},y())}}function E({title:b,description:a,overrides:h,addon:P}){const y=(0,l.of)(p);return n.createElement("div",{className:y.container},n.createElement(m.J,{description:a},b,h&&h.length>0&&n.createElement(c,{overrides:h})),P)}function p(b){return{container:(0,t.css)`
      display: flex;
      justify-content: space-between;
    `}}},26443:(Q,I,e)=>{"use strict";e.d(I,{gs:()=>q,Ff:()=>ie,Po:()=>Z});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(67647),m=e(94354),i=e(40276),l=e(74106),d=e(82792),c=e(63329),g=e(7376),u=e(79971),E=e(40334),p=e(33390);function b(G,ne){p.A.set(`panel-edit-section-${G}`,ne?"true":"false")}function a(G,ne){return p.A.getBool(`panel-edit-section-${G}`,ne)}const h=(G,ne)=>({angularPanelComponent:(0,E.U)(G,ne.panel)?.angularComponent}),P={changePanelPlugin:u.gW},y=(0,c.connect)(h,P);class C extends n.PureComponent{constructor(ne){super(ne)}componentDidMount(){this.loadAngularOptions()}componentDidUpdate(ne){(this.props.plugin!==ne.plugin||this.props.angularPanelComponent!==ne.angularPanelComponent)&&this.cleanUpAngularOptions(),this.loadAngularOptions()}componentWillUnmount(){this.cleanUpAngularOptions()}cleanUpAngularOptions(){this.angularOptions&&(this.angularOptions.destroy(),this.angularOptions=null)}loadAngularOptions(){const{panel:ne,angularPanelComponent:te,changePanelPlugin:oe}=this.props;if(!this.element||!te||this.angularOptions)return;const le=te.getScope();if(!le.$$childHead){setTimeout(()=>{this.forceUpdate()});return}const ue=le.$$childHead.ctrl;ue.initEditMode(),ue.onPluginTypeChange=De=>{oe({panel:ne,pluginId:De.id})};let Te="";for(let De=0;De<ue.editorTabs.length;De++){const Fe=ue.editorTabs[De];Fe.isOpen=a(Fe.title,De===0),Te+=`
      <div class="panel-options-group" ng-cloak>
        <div class="panel-options-group__header" ng-click="toggleOptionGroup(${De})" aria-label="${Fe.title} section">
          <div class="panel-options-group__icon">
            <icon name="ctrl.editorTabs[${De}].isOpen ? 'angle-down' : 'angle-right'"></icon>
          </div>
          <div class="panel-options-group__title">${Fe.title}</div>
        </div>
        <div class="panel-options-group__body" ng-if="ctrl.editorTabs[${De}].isOpen">
          <panel-editor-tab editor-tab="ctrl.editorTabs[${De}]" ctrl="ctrl"></panel-editor-tab>
        </div>
      </div>
      `}const he=(0,g.E)(),re={ctrl:ue,toggleOptionGroup:De=>{const Fe=ue.editorTabs[De];Fe.isOpen=!Fe.isOpen,b(Fe.title,!!Fe.isOpen)}};this.angularOptions=he.load(this.element,re,Te),this.angularOptions.digest()}render(){return n.createElement("div",{ref:ne=>this.element=ne})}}const f=(0,c.connect)(h,P)(C);var D=e(57755),T=e(22290),M=e(10354);const O=({panel:G,formatDate:ne})=>{const te=(0,s.of)(S),oe=G.libraryPanel?.meta;return oe?n.createElement("div",{className:te.info},n.createElement("div",{className:te.libraryPanelInfo},`Used on ${oe.connectedDashboards} `,oe.connectedDashboards===1?"dashboard":"dashboards"),n.createElement("div",{className:te.libraryPanelInfo},"Last edited on ",ne?.(oe.updated,"L")??oe.updated," by",oe.updatedBy.avatarUrl&&n.createElement("img",{width:"22",height:"22",className:te.userAvatar,src:oe.updatedBy.avatarUrl,alt:`Avatar for ${oe.updatedBy.name}`}),oe.updatedBy.name)):null},S=G=>({info:(0,t.css)`
      line-height: 1;
    `,libraryPanelInfo:(0,t.css)`
      color: ${G.colors.text.secondary};
      font-size: ${G.typography.bodySmall.fontSize};
    `,userAvatar:(0,t.css)`
      border-radius: ${G.shape.radius.circle};
      box-sizing: content-box;
      width: 22px;
      height: 22px;
      padding-left: ${G.spacing(1)};
      padding-right: ${G.spacing(1)};
    `});var v=e(48192),x=e(74097);function A(G){const{panel:ne,onPanelConfigChange:te,dashboard:oe}=G,le=new v.C({title:"Library panel options",id:"Library panel options",isOpenDefault:!0});return(0,d.X)(ne)&&le.addItem(new x.v({title:"Name",value:ne.libraryPanel.name,popularRank:1,render:function(){return n.createElement(M.p,{id:"LibraryPanelFrameName",defaultValue:ne.libraryPanel.name,onBlur:Te=>te("libraryPanel",{...ne.libraryPanel,name:Te.currentTarget.value})})}})).addItem(new x.v({title:"Information",render:function(){return n.createElement(O,{panel:ne,formatDate:oe.formatDate})}})),le}var R=e(13544),B=e(21744),U=e(15292),w=e(64919),K=e(88323),N=e(6923),L=e(20214),V=e(74410),F=e(92378);function z(G){const{dashboard:ne,panel:te,onPanelConfigChange:oe}=G,le=new v.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),ue=he=>{const re=document.getElementById("PanelFrameTitle");re instanceof HTMLInputElement&&(re.value=he,oe("title",he))},Te=he=>{const re=document.getElementById("description-text-area");re instanceof HTMLTextAreaElement&&(re.value=he,oe("description",he))};return le.addItem(new x.v({title:"Title",value:te.title,popularRank:1,render:function(){return n.createElement(M.p,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:"PanelFrameTitle",defaultValue:te.title,onBlur:re=>oe("title",re.currentTarget.value)})},addon:r.$.featureToggles.dashgpt&&n.createElement(V.h,{onGenerate:ue,panel:te.getSaveModel(),dashboard:ne.getSaveModelClone()})})).addItem(new x.v({title:"Description",description:te.description,value:te.description,render:function(){return n.createElement(B.f,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Description"),id:"description-text-area",defaultValue:te.description,onBlur:re=>oe("description",re.currentTarget.value)})},addon:r.$.featureToggles.dashgpt&&n.createElement(L.t,{onGenerate:Te,panel:te.getSaveModel()})})).addItem(new x.v({title:"Transparent background",render:function(){return n.createElement(U.d,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Transparent background"),value:te.transparent,id:"transparent-background",onChange:re=>oe("transparent",re.currentTarget.checked)})}})).addCategory(new v.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:te.links?.length}).addItem(new x.v({title:"Panel links",render:function(){return n.createElement(w.e,{links:te.links,onChange:re=>oe("links",re),getSuggestions:N.Fq,data:[]})}}))).addCategory(new v.C({title:"Repeat options",id:"Repeat options",isOpenDefault:!1}).addItem(new x.v({title:"Repeat by variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(){return n.createElement(F.G,{id:"repeat-by-variable-select",repeat:te.repeat,onChange:re=>{oe("repeat",re)}})}})).addItem(new x.v({title:"Repeat direction",showIf:()=>!!te.repeat,render:function(){const re=[{label:"Horizontal",value:"h"},{label:"Vertical",value:"v"}];return n.createElement(m.z,{options:re,value:te.repeatDirection||"h",onChange:De=>oe("repeatDirection",De)})}})).addItem(new x.v({title:"Max per row",showIf:()=>!!(te.repeat&&te.repeatDirection==="h"),render:function(){const re=[2,3,4,6,8,12].map(De=>({label:De.toString(),value:De}));return n.createElement(K.l6,{options:re,value:te.maxPerRow,onChange:De=>oe("maxPerRow",De.value)})}})))}var Y=e(66211);class H{constructor(ne,te){this.categories=ne,this.overrides=te}search(ne){const te=new RegExp(ne,"i"),le=this.collectHits(this.categories,te,[]).sort(k).map(he=>he.item),Te=this.collectHits(this.overrides,te,[]).sort(k).map(he=>he.item);return{optionHits:le,overrideHits:this.buildOverrideHitCategories(Te),totalCount:this.getAllOptionsCount(this.categories)}}collectHits(ne,te,oe){for(const le of ne){const ue=te.test(le.props.title);for(const Te of le.items){if(te.test(Te.props.title)){oe.push({item:Te,rank:1});continue}if(Te.props.description&&te.test(Te.props.description)){oe.push({item:Te,rank:2});continue}ue&&oe.push({item:Te,rank:3})}le.categories.length>0&&this.collectHits(le.categories,te,oe)}return oe}getAllOptionsCount(ne){let te=0;for(const oe of ne)te+=oe.items.length,oe.categories.length>0&&(te+=this.getAllOptionsCount(oe.categories));return te}buildOverrideHitCategories(ne){const te={};for(const oe of ne){let le=te[oe.parent.props.title];le||(le=te[oe.parent.props.title]=new v.C(oe.parent.props),le.addItem(oe.parent.items[0])),le.items[0].props.title!==oe.props.title&&le.addItem(oe)}return Object.values(te)}}function k(G,ne){return G.rank-ne.rank}function ee(G){const ne=[];for(const te of G)for(const oe of te.items)oe.props.title==="Unit"&&(oe.props.popularRank=2),oe.props.title==="Min"&&(oe.props.popularRank=3),oe.props.title==="Max"&&(oe.props.popularRank=4),oe.props.title==="Display name"&&(oe.props.popularRank=5),oe.props.popularRank&&ne.push(oe);return ne.sort((te,oe)=>te.props.popularRank-oe.props.popularRank)}const ie=G=>{const{plugin:ne,dashboard:te,panel:oe}=G,[le,ue]=(0,n.useState)(""),[Te,he]=(0,n.useState)("All"),re=(0,s.of)(J),[De,Fe,Ee]=(0,n.useMemo)(()=>[z(G),(0,Y.Zm)(G),A(G)],[oe.configRev,G.data,G.instanceState,le]),Me=(0,n.useMemo)(()=>(0,T.v)(G.panel.fieldConfig,G.plugin.fieldConfigRegistry,G.data?.series??[],le,G.onFieldConfigsChange),[oe.configRev,G.data,G.instanceState,le]),ze=[],xe=le.length>0,We=(0,n.useMemo)(fe,[]),be=(0,d.X)(oe)?[Ee,De,...Fe]:[De,...Fe];if(xe)ze.push(Z(be,Me,le)),G.plugin.angularPanelCtrl&&ze.push(n.createElement("div",{className:re.searchNotice,key:"Search notice"},"This is an old visualization type that does not support searching all options."));else switch(Te){case"All":(0,d.X)(oe)&&ze.push(Ee.render()),ze.push(De.render()),G.plugin.angularPanelCtrl&&ze.push(n.createElement(f,{plugin:ne,dashboard:te,panel:oe,key:"AngularOptions"}));for(const Ue of Fe)ze.push(Ue.render());for(const Ue of Me)ze.push(Ue.render());break;case"Overrides":for(const Ue of Me)ze.push(Ue.render());break;case"Recent":ze.push(n.createElement(D.D,{id:"Recent options",title:"Recent options",key:"Recent options",forceOpen:1},ee(be).map(Ue=>Ue.render())));break}const pe=!xe&&!ne.fieldConfigRegistry.isEmpty();return n.createElement("div",{className:re.wrapper},n.createElement("div",{className:re.formBox},oe.isAngularPlugin()&&!ne.meta.angular?.hideDeprecation&&n.createElement(l.c,{className:re.angularDeprecationWrapper,showPluginDetailsLink:!0,pluginId:ne.meta.id,pluginType:ne.meta.type,angularSupportEnabled:r.$?.angularSupportEnabled,interactionElementId:"panel-options"}),n.createElement("div",{className:re.formRow},n.createElement(o.Z,{width:0,value:le,onChange:ue,placeholder:"Search options"})),pe&&n.createElement("div",{className:re.formRow},n.createElement(m.z,{options:We,value:Te,fullWidth:!0,onChange:he}))),n.createElement("div",{className:re.scrollWrapper},n.createElement(i.E,{autoHeightMin:"100%"},n.createElement("div",{className:re.mainBox},ze))))};function fe(){return[{label:"All",value:"All"},{label:"Overrides",value:"Overrides"}]}var q=(G=>(G.All="All",G.Overrides="Overrides",G.Recent="Recent",G))(q||{});function Z(G,ne,te){const oe=new H(G,ne),{optionHits:le,totalCount:ue,overrideHits:Te}=oe.search(te);return n.createElement("div",{key:"search results"},n.createElement(D.D,{id:"Found options",title:`Matched ${le.length}/${ue} options`,key:"Normal options",forceOpen:1},le.map(he=>he.render(te))),Te.map(he=>he.render(te)))}const J=G=>({wrapper:(0,t.css)`
    height: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;

    .search-fragment-highlight {
      color: ${G.colors.warning.text};
      background: transparent;
    }
  `,searchBox:(0,t.css)`
    display: flex;
    flex-direction: column;
    min-height: 0;
  `,formRow:(0,t.css)`
    margin-bottom: ${G.spacing(1)};
  `,formBox:(0,t.css)`
    padding: ${G.spacing(1)};
    background: ${G.colors.background.primary};
    border: 1px solid ${G.components.panel.borderColor};
    border-top-left-radius: ${G.shape.borderRadius(1.5)};
    border-bottom: none;
  `,closeButton:(0,t.css)`
    margin-left: ${G.spacing(1)};
  `,searchHits:(0,t.css)`
    padding: ${G.spacing(1,1,0,1)};
  `,scrollWrapper:(0,t.css)`
    flex-grow: 1;
    min-height: 0;
  `,searchNotice:(0,t.css)`
    font-size: ${G.typography.size.sm};
    color: ${G.colors.text.secondary};
    padding: ${G.spacing(1)};
    text-align: center;
  `,mainBox:(0,t.css)`
    background: ${G.colors.background.primary};
    border: 1px solid ${G.components.panel.borderColor};
    border-top: none;
    flex-grow: 1;
  `,angularDeprecationWrapper:(0,t.css)`
    padding: ${G.spacing(1)};
  `})},22290:(Q,I,e)=>{"use strict";e.d(I,{v:()=>O});var t=e(32196),n=e(2543),r=e(96540),s=e(85200),o=e(37055),m=e(84349),i=e(51986),l=e(40845),d=e(6923),c=e(23257),g=e.n(c),u=e(66864),E=e(60029),p=e(53402),b=e(29158),a=e(88575),h=e(57755);const P=({property:A,context:R,registry:B,onChange:U,onRemove:w,isSystemOverride:K,searchQuery:N})=>{const L=(0,l.of)(y),V=B?.getIfExists(A.id),F=(0,r.useId)();if(!V)return null;const z=Array.isArray(A.value)||A.id===o.uo.Thresholds||A.id===o.uo.Links||A.id===o.uo.Mappings,Y=V.category?.filter(ee=>ee!==V.name);let H;const k=(ee=!0,ie=!1)=>(fe=!1)=>r.createElement(u.Gy,{justify:"space-between"},r.createElement(E.J,{category:Y,description:ee?V.description:void 0,htmlFor:F},r.createElement(g(),{textToHighlight:V.name,searchWords:[N],highlightClassName:"search-fragment-highlight"}),!fe&&ie&&V.getItemsCount&&r.createElement(p.p,{value:V.getItemsCount(A.value)})),!K&&r.createElement("div",null,r.createElement(b.K,{name:"times",onClick:w,tooltip:"Remove label"})));return z?H=r.createElement(h.D,{id:V.name,renderTitle:k(!1,!0),className:(0,t.css)`
          padding-left: 0;
          padding-right: 0;
        `,isNested:!0,isOpenDefault:A.value!==void 0},r.createElement(V.override,{value:A.value,onChange:ee=>{U(ee)},item:V,context:R})):H=r.createElement("div",null,r.createElement(a.D,{label:k()(),description:V.description},r.createElement(V.override,{value:A.value,onChange:ee=>{U(ee)},item:V,context:R,id:F}))),r.createElement("div",{className:(0,t.cx)(z&&L.collapsibleOverrideEditor,!z&&"dynamicConfigValueEditor--nonCollapsible")},H)},y=A=>({collapsibleOverrideEditor:(0,t.css)`
      label: collapsibleOverrideEditor;
      & + .dynamicConfigValueEditor--nonCollapsible {
        margin-top: ${A.spacing(1)};
      }
    `});var C=e(48192),f=e(74097),D=e(14578);const T=({isExpanded:A,registry:R,matcherUi:B,overrideName:U,override:w,onOverrideRemove:K})=>{const N=(0,l.of)(M),V=w.properties.map(z=>R.getIfExists(z.id)).filter(z=>!!z).map(z=>z?.name).join(", "),F=B.optionsToLabel(w.matcher.options);return r.createElement("div",null,r.createElement(u.Gy,{justify:"space-between"},r.createElement("div",null,U),r.createElement(b.K,{name:"trash-alt",onClick:K,tooltip:"Remove override"})),!A&&r.createElement("div",{className:N.overrideDetails},r.createElement("div",{className:N.options,title:F},F," ",r.createElement(D.I,{name:"angle-right"})," ",V)))};T.displayName="OverrideTitle";const M=A=>({matcherUi:(0,t.css)`
      padding: ${A.spacing(1)};
    `,propertyPickerWrapper:(0,t.css)`
      margin-top: ${A.spacing(2)};
    `,overrideDetails:(0,t.css)`
      font-size: ${A.typography.bodySmall.fontSize};
      color: ${A.colors.text.secondary};
      font-weight: ${A.typography.fontWeightRegular};
    `,options:(0,t.css)`
      overflow: hidden;
      padding-right: ${A.spacing(4)};
    `,unknownLabel:(0,t.css)`
      margin-bottom: 0;
    `});function O(A,R,B,U,w){const K=[],N=A;if(!R||R.isEmpty())return[];const L=(Y,H)=>{let k=(0,n.cloneDeep)(N.overrides);k[Y]=H,w({...N,overrides:k})},V=Y=>{let H=(0,n.cloneDeep)(N.overrides);H.splice(Y,1),w({...N,overrides:H})},F=Y=>{const H=s.sJ.get(Y.value);H&&w({...N,overrides:[...N.overrides,{matcher:{id:H.id,options:H.defaultOptions},properties:[]}]})},z={data:B,getSuggestions:Y=>(0,d.Hf)(B,Y),isOverride:!0};for(let Y=0;Y<N.overrides.length;Y++){const H=N.overrides[Y],k=`Override ${Y+1}`,ee=m.g.get(H.matcher.id),ie=S(R),fe=(0,o.Ow)(H),q=H.properties.length===0?1:0,Z=new C.C({title:k,id:k,forceOpen:q,renderTitle:function(te){return r.createElement(T,{override:H,isExpanded:te,registry:R,overrideName:k,matcherUi:ee,onOverrideRemove:()=>V(Y)})}}),J=ne=>{H.matcher.options=ne,L(Y,H)},G=(ne,te)=>{const oe=R.get(te.value),le={id:oe.id,value:oe.defaultValue};H.properties?ne.properties.push(le):ne.properties=[le],L(Y,ne)};Z.addItem(new f.v({title:ee.name,render:function(){return r.createElement(ee.component,{id:`${ee.matcher.id}-${Y}`,matcher:ee.matcher,data:B??[],options:H.matcher.options,onChange:J})}}));for(let ne=0;ne<H.properties.length;ne++){const te=H.properties[ne],oe=R.getIfExists(te.id);if(!oe)continue;const le=Te=>{H.properties[ne].value=Te,L(Y,H)},ue=()=>{H.properties.splice(ne,1),L(Y,H)};Z.addItem(new f.v({title:oe.name,skipField:!0,render:function(){return r.createElement(P,{key:`${te.id}/${ne}`,isSystemOverride:fe,onChange:le,onRemove:ue,property:te,registry:R,context:z,searchQuery:U})}}))}!fe&&H.matcher.options&&Z.addItem(new f.v({title:"----------",skipField:!0,render:function(){return r.createElement(i.i,{key:"Add override property",label:"Add override property",variant:"secondary",isFullWidth:!0,icon:"plus",menuPlacement:"auto",options:ie,onChange:te=>G(H,te)})}})),K.push(Z)}return K.push(new C.C({title:"add button",id:"add button",customRender:function(){return r.createElement(v,{key:"Add override"},r.createElement(i.i,{icon:"plus",label:"Add field override",variant:"secondary",menuPlacement:"auto",isFullWidth:!0,size:"md",options:m.g.list().filter(H=>!H.excludeFromPicker).map(H=>({label:H.name,value:H.id,description:H.description})),onChange:H=>F(H)}))}})),K}function S(A){return A.list().filter(R=>!R.hideFromOverrides).map(R=>{let B=R.name;return R.category&&(B=[...R.category,R.name].join(" > ")),{label:B,value:R.id,description:R.description}})}function v({children:A}){const R=(0,l.of)(x);return r.createElement("div",{className:R},A)}function x(A){return(0,t.css)({borderTop:`1px solid ${A.colors.border.weak}`,padding:`${A.spacing(2)}`,display:"flex"})}},66211:(Q,I,e)=>{"use strict";e.d(I,{g5:()=>f,tN:()=>y,Zm:()=>P,Z4:()=>C});var t=e(2543),n=e(96540),r=e(60264),s=e(10354),o=e(32196),m=e(72724),i=e(40845);const l=({libraryPanel:D})=>{const T=(0,i.of)(d),M=D.useState(),O=M.$timeRange?.getTimeZone(),S=M._loadedPanel?.meta;return S?n.createElement("div",{className:T.info},n.createElement("div",{className:T.libraryPanelInfo},`Used on ${S.connectedDashboards} `,S.connectedDashboards===1?"dashboard":"dashboards"),n.createElement("div",{className:T.libraryPanelInfo},(0,m.LE)(S.updated,{format:"L",timeZone:O})," by",S.updatedBy.avatarUrl&&n.createElement("img",{className:T.userAvatar,src:S.updatedBy.avatarUrl,alt:`Avatar for ${S.updatedBy.name}`}),S.updatedBy.name)):null},d=D=>({info:(0,o.css)({lineHeight:1}),libraryPanelInfo:(0,o.css)({color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize}),userAvatar:(0,o.css)({borderRadius:D.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:D.spacing(1),paddingRight:D.spacing(1)})});var c=e(6923),g=e(48192),u=e(74097);const E="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",p="An override rule exists for this property";function b(D,T,M){const O=[];if(M){for(const v of M)for(const x of v.fields)if((0,t.get)(x.config,D.path)!=null){O.push({type:"data",description:E,tooltip:E});break}}return T.overrides.some(v=>v.properties.some(x=>x.id===D.id))&&O.push({type:"rule",description:p,tooltip:p}),O}var a=e(54612);function h({data:D,replaceVariables:T,options:M,eventBus:O,instanceState:S}){const v=D?.series??[];return{data:v,replaceVariables:T,options:M,eventBus:O,getSuggestions:A=>(0,c.Hf)(v,A),instanceState:S}}function P(D){const{plugin:T,panel:M,onPanelOptionsChanged:O,onFieldConfigsChange:S,data:v,dashboard:x,instanceState:A}=D,R=M.getOptions(),B=M.fieldConfig,U={},w=h({data:v,replaceVariables:M.replaceVariables,options:R,eventBus:x.events,instanceState:A}),K=L=>{const V=(L&&L[0])??`${T.meta.name}`,F=U[V];return F||(U[V]=new g.C({title:V,id:V,sandboxId:T.meta.id}))},N={getValue:L=>(0,t.get)(R,L),onChange:(L,V)=>{const F=(0,a.Sf)(R,L,V);O(F)}};f(T.getPanelOptionsSupplier(),N,K,w);for(const L of T.fieldConfigRegistry.list()){if(L.isCustom){if(L.showIf&&!L.showIf(B.defaults.custom,v?.series))continue}else if(L.showIf&&!L.showIf(B.defaults,v?.series))continue;if(L.hideFromDefaults)continue;const V=K(L.category),F=L.editor,z=B.defaults,Y=L.isCustom?z.custom?(0,t.get)(z.custom,L.path):void 0:(0,t.get)(z,L.path);L.getItemsCount&&(V.props.itemsCount=L.getItemsCount(Y)),V.addItem(new u.v({title:L.name,description:L.description,overrides:b(L,B,v?.series),render:function(){const k=ee=>{S((0,a.EQ)(B,L.path,ee,L.isCustom))};return n.createElement(F,{value:Y,onChange:k,item:L,context:w,id:L.id})}}))}return Object.values(U)}function y(D){const T=new g.C({title:"Library panel options",id:"Library panel options",isOpenDefault:!0});return T.addItem(new u.v({title:"Name",value:D,popularRank:1,render:function(){return n.createElement(s.p,{id:"LibraryPanelFrameName","data-testid":"library panel name input",defaultValue:D.state.name,onBlur:O=>D.setState({name:O.currentTarget.value})})}})).addItem(new u.v({title:"Information",render:function(){return n.createElement(l,{libraryPanel:D})}})),T}function C(D){const{plugin:T,panel:M,data:O,eventBus:S,instanceState:v}=D,x={},A=K=>{const N=K?.[0]??T.meta.name,L=x[N];return L||(x[N]=new g.C({title:N,id:N,sandboxId:T.meta.id}))},R=M.state.options,B={getValue:K=>(0,t.get)(R,K),onChange:(K,N)=>{const L=(0,a.Sf)(R,K,N);M.onOptionsChange(L)}},U=h({data:O,replaceVariables:M.interpolate,options:R,eventBus:S,instanceState:v});f(T.getPanelOptionsSupplier(),B,A,U);const w=M.state.fieldConfig;for(const K of T.fieldConfigRegistry.list()){const N=K.showIf&&(K.isCustom?!K.showIf(w.defaults.custom,O?.series):!K.showIf(w.defaults,O?.series));if(K.hideFromDefaults||N)continue;const L=A(K.category),V=K.editor,F=w.defaults,z=K.isCustom?F.custom?(0,t.get)(F.custom,K.path):void 0:(0,t.get)(F,K.path);K.getItemsCount&&(L.props.itemsCount=K.getItemsCount(z)),L.addItem(new u.v({title:K.name,description:K.description,overrides:b(K,w,O?.series),render:function(){const H=k=>{M.onFieldConfigChange((0,a.EQ)(w,K.path,k,K.isCustom),!0)};return n.createElement(V,{value:z,onChange:H,item:K,context:U,id:K.id})}}))}return Object.values(x)}function f(D,T,M,O,S){const v=new r.pv;D(v,O);for(const x of v.getItems()){if(x.showIf&&!x.showIf(O.options,O.data))continue;let A=S;if(A?x.category?.[0]?.length&&(A=A.getCategory(x.category[0])):A=M(x.category),(0,r.iF)(x)){const B=x.getNestedValueAccess(T),U=B.getContext?B.getContext(O):{...O,options:T.getValue(x.path)};f(x.getBuilder(),B,M,U,A);continue}const R=x.editor;A.addItem(new u.v({title:x.name,description:x.description,render:function(){return n.createElement(R,{value:T.getValue(x.path),onChange:U=>{T.onChange(x.path,U)},item:x,context:O,id:x.id})}}))}}},53466:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>y,GU:()=>g,MJ:()=>E,Ox:()=>p,eK:()=>a,fR:()=>b,kw:()=>h,wi:()=>i});var t=e(30038),n=e(39070),r=e(43127),s=e(33390),o=e(84423),m=e(32696);const i="grafana.dashboard.editor.ui",l={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:m.q5.Fill},d=()=>{const C=s.A.getObject(i,l);let f={...C};return typeof C.topPaneSize=="string"&&(f={...C,topPaneSize:parseFloat(C.topPaneSize)/100}),{getPanel:()=>new o.a9({}),getSourcePanel:()=>new o.a9({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,r.E2)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...l,...f}}},c=(0,t.Z0)({name:"panelEditor",initialState:d(),reducers:{updateEditorInitState:(C,f)=>{C.getPanel=()=>f.payload.panel,C.getSourcePanel=()=>f.payload.sourcePanel,C.initDone=!0,C.isOpen=!0,C.shouldDiscardChanges=!1},setEditorPanelData:(C,f)=>{C.getData=()=>f.payload},setDiscardChanges:(C,f)=>{C.shouldDiscardChanges=f.payload},setPanelEditorUIState:(C,f)=>{C.ui={...C.ui,...f.payload},!C.ui.isPanelOptionsVisible&&C.isVizPickerOpen&&(C.isVizPickerOpen=!1)},toggleVizPicker:(C,f)=>{C.isVizPickerOpen=f.payload,C.isVizPickerOpen&&(C.ui.isPanelOptionsVisible=!0)},toggleTableView(C){C.tableViewEnabled=!C.tableViewEnabled},closeEditor:C=>{C.getPanel=()=>new o.a9({}),C.getSourcePanel=()=>new o.a9({}),C.isOpen=!1,C.initDone=!1,C.isVizPickerOpen=!1,C.tableViewEnabled=!1}}}),{updateEditorInitState:g,setEditorPanelData:u,setDiscardChanges:E,closeEditor:p,setPanelEditorUIState:b,toggleVizPicker:a,toggleTableView:h}=c.actions,y={panelEditor:c.reducer}},95689:(Q,I,e)=>{"use strict";e.d(I,{a:()=>i,e:()=>l});var t=e(41811),n=e(2913),r=e(16233),s=e(75471),o=e(57220),m=e(32696);const i=(0,t.A)((d,c)=>{const g=[];if(!c)return g;let u=m.M8.Visualize;if(c.meta.skipDataQuery)return[];c.meta.skipDataQuery||(u=m.M8.Query,g.push({id:m.M8.Query,text:"Query",icon:"database",active:!1}),g.push({id:m.M8.Transform,text:"Transform data",icon:"process",active:!1})),l(c)&&g.push({id:m.M8.Alert,text:"Alert",icon:"bell",active:!1});const E=g.find(p=>p.id===(d||u))??g[0];return E.active=!0,g});function l(d){const{unifiedAlertingEnabled:c=!1}=(0,n.zj)(),g=r.TP.hasPermission((0,s.Wd)(o.hY).read);if(!(c&&g))return!1;const E=d.meta.id==="graph",p=d.meta.id==="timeseries";return E||p}},32696:(Q,I,e)=>{"use strict";e.d(I,{M8:()=>t,Nt:()=>s,__:()=>m,q5:()=>n});var t=(i=>(i.Query="query",i.Transform="transform",i.Visualize="visualize",i.Alert="alert",i))(t||{}),n=(i=>(i[i.Fill=0]="Fill",i[i.Fit=1]="Fit",i[i.Exact=2]="Exact",i))(n||{}),r=(i=>(i[i.Off=0]="Off",i[i.Table=1]="Table",i))(r||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],o=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var m=(i=>(i[i.Visualizations=0]="Visualizations",i[i.LibraryPanels=1]="LibraryPanels",i[i.Suggestions=2]="Suggestions",i[i.Widgets=3]="Widgets",i))(m||{})},54612:(Q,I,e)=>{"use strict";e.d(I,{$:()=>m,A:()=>o,EQ:()=>i,Sf:()=>l});var t=e(2543),n=e.n(t),r=e(15054),s=e(32696);function o(d,c,g,u){if(d===s.q5.Fill)return{width:c,height:g};const E=8*6,a=(window.innerWidth-60-r.dU*4)/r.cV*u.gridPos.w,h=r.sD*u.gridPos.h+E,P=Math.min(c/a,g/h);return a<=c&&h<=g?{width:a,height:h}:{width:a*P,height:h*P}}function m(d){return d?.meta.skipDataQuery===!1}const i=(d,c,g,u)=>{let E={...d.defaults};const p=g==null||g==="";return u?E.custom?p?E.custom=(0,t.omit)(E.custom,c):E.custom=l(E.custom,c,g):p||(E.custom=l(E.custom,c,g)):p?E=(0,t.omit)(E,c):E=l(E,c,g),{...d,defaults:E}};function l(d,c,g){const u=Array.isArray(c)?c:c.split("."),E=u.shift();if(E.endsWith("]")){const b=E.lastIndexOf("["),a=+E.substring(b+1,E.length-1),h=E.substring(0,b);let P=d[h];const y=Array.isArray(P)?[...P]:[];return u.length&&(P=y[a],(P==null||typeof P!="object")&&(P={}),g=l(P,u,g)),y[a]=g,{...d,[h]:y}}if(!u.length)return{...d,[E]:g};let p=d[E];return(p==null||typeof p!="object")&&(p={}),{...d,[E]:l(p,u,g)}}},92378:(Q,I,e)=>{"use strict";e.d(I,{G:()=>m,U:()=>i});var t=e(96540),n=e(86849),r=e(88323),s=e(31678),o=e(87421);const m=({repeat:l,onChange:d,id:c})=>{const g=(0,s.useSelector)(p=>(0,o.SS)((0,o.y7)(p),p)),u=(0,t.useMemo)(()=>{const p=g.map(b=>({label:b.name,value:b.name}));return p.length===0&&p.unshift({label:"No template variables found",value:null}),p.unshift({label:"Disable repeating",value:null}),p},[g]),E=(0,t.useCallback)(p=>d(p.value),[d]);return t.createElement(r.l6,{inputId:c,value:l,onChange:E,options:u})},i=({parent:l,repeat:d,id:c,onChange:g})=>{const E=(0,t.useMemo)(()=>n.jh.getVariables(l),[l]).useState().variables,p=(0,t.useMemo)(()=>{const a=E.map(h=>({label:h.state.name,value:h.state.name}));return a.length===0&&a.unshift({label:"No template variables found",value:null}),a.unshift({label:"Disable repeating",value:null}),a},[E]),b=(0,t.useCallback)(a=>g(a.value),[g]);return t.createElement(r.l6,{inputId:c,value:d,onChange:b,options:p})}},78050:(Q,I,e)=>{"use strict";e.d(I,{C:()=>i,m:()=>l});var t=e(96540),n=e(13544),r=e(14110),s=e(71678),o=e(55852),m=e(70497);const i=({dashboard:d,onSaveSuccess:c,size:g})=>t.createElement(s.$s,null,({showModal:u,hideModal:E})=>t.createElement(o.$n,{size:g,onClick:()=>{u(m.$,{dashboard:d,onSaveSuccess:c,onDismiss:E})},"aria-label":n.Tp.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),l=({dashboard:d,onClick:c,onSaveSuccess:g,variant:u,size:E})=>t.createElement(s.$s,null,({showModal:p,hideModal:b})=>t.createElement(o.$n,{size:E,onClick:()=>{(0,r.rR)("grafana_dashboard_save_as_clicked"),c?.(),p(m.$,{dashboard:d,onSaveSuccess:g,onDismiss:b,isCopy:!0})},variant:u,"aria-label":n.Tp.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},54943:(Q,I,e)=>{"use strict";e.d(I,{l:()=>l});var t=e(96540),n=e(16817),r=e(67061),s=e(62930),o=e(90613),m=e(19626),i=e(22764);const l=({diff:d,oldValue:c,newValue:g,hasFolderChanges:u,oldFolder:E,newFolder:p})=>{const b=(0,n.A)(async()=>{const h=JSON.stringify(c??{},null,2),P=JSON.stringify(g??{},null,2);let y;const C=[];let f=0;if(d)for(const[D,T]of Object.entries(d)){const M=t.createElement(m.D,{diffs:T,key:D,title:D});D==="schemaVersion"?y=M:C.push(M),f+=T.length}return{schemaChange:y,diffs:C,count:f,showDiffs:f<15,jsonView:t.createElement(i.M,{oldValue:h,newValue:P})}},[d,c,g]),{value:a}=b;return t.createElement(r.B,{direction:"column",gap:1},u&&t.createElement(m.D,{diffs:[{op:"replace",value:p,originalValue:E,path:[],startLineNumber:0,endLineNumber:0}],key:"folder",title:"folder"}),(!a||!c)&&t.createElement(s.y,null),a&&a.count>=1?t.createElement(t.Fragment,null,a&&a.schemaChange&&a.schemaChange,a&&a.showDiffs&&a.diffs,t.createElement(o.a,{paddingTop:1},t.createElement("h4",null,"Full JSON diff"),a.jsonView)):t.createElement(o.a,{paddingTop:1},"No changes in the dashboard JSON"))}},70497:(Q,I,e)=>{"use strict";e.d(I,{$:()=>we});var t=e(96540),n=e(17172),r=e(32264),s=e(87978),o=e(63021),m=e(40675),i=e(56596),l=e(32196),d=e(16817),c=e(40845),g=e(42418),u=e(27677);function E({dashboard:je}){const He=(0,c.of)(p),{loading:rt,value:Je,error:Ve}=(0,d.A)(async()=>{const Ne=je.getSaveModelCloneOld();return u.IB.validateDashboard(Ne).catch(se=>{if(se.status>=500)throw se;return se.data})},[je]);let Oe;if(rt)Oe=t.createElement(g.F,{severity:"info",title:"Checking dashboard validity"});else if(Je)Je.isValid||(Oe=t.createElement(g.F,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:He.error},Je.message)));else{const Ne=Ve?.message??"Unknown error";Oe=t.createElement(g.F,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:He.error},Ne))}return Oe?t.createElement("div",{className:He.root},Oe):null}const p=je=>({root:(0,l.css)({marginTop:je.spacing(1)}),error:(0,l.css)({fontFamily:je.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),b=E;var a=e(54943),h=e(96374),P=e(37390),y=e(55852),C=e(78050),f=e(41053),D=e(71733),T=e(14110),M=e(12131),O=e(28138),S=e(3169),v=e(91219),x=e(55314),A=e(31678),R=e(28444),B=e(36974);const U=async(je,He,rt,Je)=>{const Ve=await Je({dashboard:je,folderUid:He.folderUid??rt.meta.folderUid??je.meta?.folderUid,message:He.message,overwrite:He.overwrite});if("error"in Ve)throw Ve.error;return Ve.data},w=(je=!1)=>{const He=(0,A.useDispatch)(),rt=(0,S._2)(),[Je]=(0,x.e8)(),[Ve,Oe]=(0,f.A)(async(Ne,ye,se)=>{try{const ae=await U(Ne,ye,se,Je);se.version=ae.version,Ne.version=ae.version,se.clearUnsavedChanges(Ne,ye),O.A.publish(new R.Eu),rt.success("Dashboard saved"),(0,B.ko)(ae.uid),je?(0,T.rR)("grafana_dashboard_copied",{name:se.title,url:ae.url}):(0,T.rR)(`grafana_dashboard_${se.id?"saved":"created"}`,{name:se.title,url:ae.url});const ge=M.Ny.getLocation().pathname,Pe=D.I.stripBaseFromUrl(ae.url);return Pe!==ge&&setTimeout(()=>M.Ny.replace(Pe)),se.meta.isStarred&&He((0,v.TU)({id:se.uid,title:se.title,url:Pe})),ae}catch(ae){throw ae instanceof Error&&rt.error(ae.message??"Error saving dashboard"),ae}},[He,rt]);return{state:Ve,onDashboardSave:Oe}},K=({dashboard:je,dashboardSaveModel:He,error:rt,onDismiss:Je,setErrorIsHandled:Ve})=>{const{onDashboardSave:Oe}=w();return t.createElement(t.Fragment,null,rt.data&&rt.data.status==="version-mismatch"&&t.createElement(h.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Oe(He,{overwrite:!0},je),Je()},onDismiss:Je}),rt.data&&rt.data.status==="name-exists"&&t.createElement(h.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Oe(He,{overwrite:!0},je),Je()},onDismiss:Je}),rt.data&&rt.data.status==="plugin-dashboard"&&t.createElement(N,{dashboard:je,onDismiss:()=>{Ve(!0),Je()}}))},N=({onDismiss:je,dashboard:He})=>{const{onDashboardSave:rt}=w(),Je=(0,c.of)(V);return t.createElement(P.a,{className:Je.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:je},t.createElement("div",{className:Je.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(P.a.ButtonRow,null,t.createElement(y.$n,{variant:"secondary",onClick:je,fill:"outline"},"Cancel"),t.createElement(C.m,{onClick:je,dashboard:He,onSaveSuccess:je}),t.createElement(y.$n,{variant:"destructive",onClick:async()=>{await rt(He.getSaveModelClone(),{overwrite:!0},He),je()}},"Overwrite")))},L=je=>{switch(je){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},V=je=>({modal:(0,l.css)`
    width: 500px;
  `,modalText:(0,l.css)`
    font-size: ${je.typography.h4.fontSize};
    color: ${je.colors.text.primary};
    margin-bottom: ${je.spacing(4)}
    padding-top: ${je.spacing(2)};
  `,modalButtonRow:(0,l.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${je.spacing(2)};
    }
  `});var F=e(51253),z=e(16504),Y=e(88575),H=e(67061),k=e(60029),ee=e(10354),ie=e(21744),fe=e(15292),q=e(36607),Z=e(71500),J=e(81394),G=e(27966);const ne=je=>{const He=je.getSaveModelClone();return He.id=null,He.uid="",He.title+=" Copy",He.editable=!0,je.id>0&&He.panels&&He.panels.forEach(rt=>{rt.type==="graph"&&rt.alert&&delete rt.thresholds,delete rt.alert}),He},te=({dashboard:je,isLoading:He,isNew:rt,onSubmit:Je,onCancel:Ve,onSuccess:Oe})=>{const Ne={title:rt?je.title:`${je.title} Copy`,description:je.description,$folder:{uid:je.meta.folderUid,title:je.meta.folderTitle},copyTags:!1},ye=se=>async ae=>{if(ae&&ae===se().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await Z.P.validateNewDashboardName(se().$folder.uid??"general",ae),!0}catch(ge){return ge instanceof Error?ge.message:"Dashboard name is invalid"}};return t.createElement(F.l,{defaultValues:Ne,onSubmit:async se=>{if(!Je)return;const ae=ne(je);ae.title=se.title,ae.description=se.description,!rt&&!se.copyTags&&(ae.tags=[]),(await Je(ae,{folderUid:se.$folder.uid},je)).status==="success"&&Oe()}},({register:se,control:ae,errors:ge,getValues:Pe})=>t.createElement(t.Fragment,null,t.createElement(z.e,{render:({field:{ref:Re,...Be}})=>t.createElement(Y.D,{label:t.createElement(H.B,{justifyContent:"space-between"},t.createElement(k.J,{htmlFor:"title"},"Title"),r.$.featureToggles.dashgpt&&rt&&t.createElement(G.Z,{onGenerate:_e=>Be.onChange(_e)})),invalid:!!ge.title,error:ge.title?.message},t.createElement(ee.p,{...Be,onChange:_e=>Be.onChange(_e.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:ae,name:"title",rules:{validate:ye(Pe)}}),t.createElement(z.e,{render:({field:{ref:Re,...Be}})=>t.createElement(Y.D,{label:t.createElement(H.B,{justifyContent:"space-between"},t.createElement(k.J,{htmlFor:"description"},"Description"),r.$.featureToggles.dashgpt&&rt&&t.createElement(J.V,{onGenerate:_e=>Be.onChange(_e)})),invalid:!!ge.description,error:ge.description?.message},t.createElement(ie.f,{...Be,onChange:_e=>Be.onChange(_e.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:ae,name:"description"}),t.createElement(Y.D,{label:"Folder"},t.createElement(z.e,{render:({field:{ref:Re,...Be}})=>t.createElement(q.d,{...Be,onChange:(_e,Xe)=>Be.onChange({uid:_e,title:Xe}),value:Be.value?.uid,initialTitle:je.meta.folderTitle,dashboardId:je.id,enableCreateNew:!0}),control:ae,name:"$folder"})),!rt&&t.createElement(Y.D,{label:"Copy tags"},t.createElement(fe.d,{...se("copyTags")})),t.createElement(H.B,null,t.createElement(y.$n,{type:"button",variant:"secondary",onClick:Ve,fill:"outline"},"Cancel"),t.createElement(y.$n,{disabled:He,type:"submit","aria-label":"Save dashboard button"},He?"Saving...":"Save"))))};var oe=e(13544),le=e(10880),ue=e(10740),Te=e(57725),he=e(3363);const re=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),De=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),Fe=({dashboard:je,onGenerate:He,disabled:rt})=>{const Je=(0,t.useCallback)(()=>Ee(je),[je]);return t.createElement(ue.n,{messages:Je,onGenerate:He,temperature:0,model:"gpt-3.5-turbo-16k",eventTrackingSrc:Te.ec.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:rt})};function Ee(je){let{userChanges:He,migrationChanges:rt}=(0,he.Yy)(je);return He.length>8e3&&(He="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),rt.split(`
`).length<10?rt="No significant migration changes":rt.length>8e3&&(rt="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:re,role:he.Xh.system},{content:`Summarize the following user changes diff under "User changes":
${He}`,role:he.Xh.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:he.Xh.system},{content:`Summarize the following migration changes diff under "Migration changes":
${rt}`,role:he.Xh.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:he.Xh.system},{content:De,role:he.Xh.system}]}const Me=({dashboard:je,isLoading:He,saveModel:rt,options:Je,onSubmit:Ve,onCancel:Oe,onSuccess:Ne,onOptionsChange:ye})=>{const se=(0,t.useMemo)(()=>je.hasTimeChanged(),[je]),ae=(0,t.useMemo)(()=>je.hasVariablesChanged(),[je]),[ge,Pe]=(0,t.useState)(!1),[Re,Be]=(0,t.useState)(Je.message),_e=(0,c.of)(ze);return t.createElement("form",{onSubmit:async Xe=>{if(Xe.preventDefault(),!Ve)return;Pe(!0),Je={...Je,message:Re},(await Ve(rt.clone,Je,je)).status==="success"?Ne():Pe(!1)},style:{maxWidth:600}},t.createElement(H.B,{gap:2,direction:"column",alignItems:"flex-start"},se&&t.createElement(le.S,{checked:!!Je.saveTimerange,onChange:()=>ye({...Je,saveTimerange:!Je.saveTimerange}),label:"Save current time range as dashboard default","aria-label":oe.Tp.pages.SaveDashboardModal.saveTimerange}),ae&&t.createElement(le.S,{checked:!!Je.saveVariables,onChange:()=>ye({...Je,saveVariables:!Je.saveVariables}),label:"Save current variable values as dashboard default","aria-label":oe.Tp.pages.SaveDashboardModal.saveVariables}),t.createElement("div",{className:_e.message},r.$.featureToggles.aiGeneratedDashboardChanges&&t.createElement(Fe,{dashboard:je,onGenerate:Xe=>{ye({...Je,message:Xe}),Be(Xe)},disabled:!rt.hasChanges}),t.createElement(ie.f,{"aria-label":"message",value:Re,onChange:Xe=>{ye({...Je,message:Xe.currentTarget.value}),Be(Xe.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),t.createElement(H.B,{alignItems:"center"},t.createElement(y.$n,{variant:"secondary",onClick:Oe,fill:"outline"},"Cancel"),t.createElement(y.$n,{type:"submit",disabled:!rt.hasChanges||He,icon:ge?"spinner":void 0,"aria-label":oe.Tp.pages.SaveDashboardModal.save},He?"Saving...":"Save"),!rt.hasChanges&&t.createElement("div",null,"No changes to save"))))};function ze(je){return{message:(0,l.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var xe=e(4213),We=e(66864),be=e(10534);const pe=({dashboard:je,onCancel:He})=>{const[rt,Je]=(0,t.useState)(()=>{const Oe=je.getSaveModelClone();return delete Oe.id,JSON.stringify(Oe,null,2)}),Ve=(0,t.useCallback)(()=>{const Oe=new Blob([rt],{type:"application/json;charset=utf-8"});(0,xe.saveAs)(Oe,je.title+"-"+new Date().getTime()+".json")},[je.title,rt]);return t.createElement(t.Fragment,null,t.createElement(H.B,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",je.meta.provisionedExternalId),t.createElement(ie.f,{spellCheck:!1,value:rt,onChange:Oe=>{Je(Oe.currentTarget.value)},className:Ue.json}),t.createElement(We.Gy,null,t.createElement(y.$n,{variant:"secondary",onClick:He,fill:"outline"},"Cancel"),t.createElement(be.b,{icon:"copy",getText:()=>rt},"Copy JSON to clipboard"),t.createElement(y.$n,{type:"submit",onClick:Ve},"Save JSON to file"))))},Ue={json:(0,l.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},we=({dashboard:je,onDismiss:He,onSaveSuccess:rt,isCopy:Je})=>{const[Ve,Oe]=(0,t.useState)({}),Ne=je.getOriginalDashboard(),ye=je.meta.provisioned,se=je.version===0,[ae,ge]=(0,t.useState)(!1),Pe=(0,t.useMemo)(()=>{const dt=je.getSaveModelClone({saveTimerange:!!Ve.saveTimerange,saveVariables:!!Ve.saveVariables});if(!Ne)return{clone:dt,diff:{},diffCount:0,hasChanges:!1};const ot=(0,i.G4)(Ne,dt);let ft=0;for(const yt of Object.values(ot))ft+=yt.length;return{clone:dt,diff:ot,diffCount:ft,hasChanges:ft>0&&!se}},[je,Ne,Ve,se]),[Re,Be]=(0,t.useState)(!1),{state:_e,onDashboardSave:Xe}=w(Je),tt=rt?()=>{He(),rt()}:He,at=()=>Re?t.createElement(a.l,{diff:Pe.diff,oldValue:Ne,newValue:Pe.clone}):se||Je?t.createElement(te,{dashboard:je,isLoading:_e.loading,onCancel:He,onSuccess:tt,onSubmit:Xe,isNew:se}):ye?t.createElement(pe,{dashboard:je,onCancel:He,onSuccess:tt}):t.createElement(Me,{dashboard:je,isLoading:_e.loading,saveModel:Pe,onCancel:He,onSuccess:tt,onSubmit:Xe,options:Ve,onOptionsChange:Oe});if(_e.error&&!ae&&(0,n.NF)(_e.error)&&L(_e.error.data.status))return t.createElement(K,{error:_e.error,dashboard:je,dashboardSaveModel:Pe.clone,onDismiss:He,setErrorIsHandled:ge});let st="Save dashboard";return Je?st="Save dashboard copy":ye&&(st="Provisioned dashboard"),t.createElement(s._,{title:st,onClose:He,subtitle:je.title,tabs:t.createElement(o.U,null,t.createElement(m.o,{label:"Details",active:!Re,onChangeTab:()=>Be(!1)}),Pe.hasChanges&&t.createElement(m.o,{label:"Changes",active:Re,onChangeTab:()=>Be(!0),counter:Pe.diffCount}))},at(),r.$.featureToggles.showDashboardValidationWarnings&&t.createElement(b,{dashboard:je}))}},35280:(Q,I,e)=>{"use strict";e.d(I,{D:()=>E});var t=e(96540),n=e(94701),r=e(14110),s=e(88575),o=e(15292),m=e(21744),i=e(37390),l=e(10534),d=e(44836),c=e(7758),g=e(87895),u=e(22699);function E({panel:p,dashboard:b,range:a,buildIframe:h=u.CF}){const[P,y]=(0,t.useState)(!0),[C,f]=(0,t.useState)("current"),[D,T]=(0,t.useState)("");(0,n.A)(()=>{(0,r.rR)("grafana_dashboards_embed_share_viewed")}),(0,t.useEffect)(()=>{const A=h(P,b.uid,C,p,a);T(A)},[C,P,b,p,a,h]);const M=A=>{T(A.currentTarget.value)},O=()=>{y(A=>!A)},S=A=>{f(A)},x=b.time.to==="now"?(0,d.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(d.x6,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(s.D,{label:(0,d.t)("share-modal.embed.time-range","Current time range"),description:x},t.createElement(o.d,{id:"share-current-time-range",value:P,onChange:O})),t.createElement(g.w,{selectedTheme:C,onChange:S}),t.createElement(s.D,{label:(0,d.t)("share-modal.embed.html","Embed HTML"),description:(0,d.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(m.f,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:D,onChange:M})),t.createElement(i.a.ButtonRow,null,t.createElement(l.b,{icon:"copy",variant:"primary",getText:()=>D,onClipboardCopy:()=>{c.c.embedSnippetCopy({currentTimeRange:P,theme:C})}},t.createElement(d.x6,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}},86394:(Q,I,e)=>{"use strict";e.d(I,{j:()=>o});var t=e(96540),n=e(14110),r=e(44836),s=e(96227);const o=({panel:m,initialFolderUid:i,onDismiss:l})=>((0,t.useEffect)(()=>{(0,n.rR)("grafana_dashboards_library_panel_share_viewed")},[]),m?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.x6,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(s.b,{panel:m,initialFolderUid:i,onDismiss:l})):null)},7686:(Q,I,e)=>{"use strict";e.d(I,{Zy:()=>G});var t=e(96540),n=e(25897),r=e(37390),s=e(40980),o=e(40845),m=e(2913),i=e(10096),l=e(44836),d=e(4785),c=e(72254),g=e(7758),u=e(82792),E=e(35280),p=e(4213),b=e(88575),a=e(15292),h=e(55852),P=e(15858),y=e(28444),C=e(70713),f=e(32372),D=e(10534);function T({json:ne,onDismiss:te}){const oe=(0,t.useCallback)(()=>ne,[ne]);return t.createElement(r.a,{title:"JSON",onDismiss:te,onClickBackdrop:te,isOpen:!0},t.createElement(C.Ay,{disableHeight:!0},({width:le})=>t.createElement(f.B,{value:ne,language:"json",showMiniMap:!1,height:"500px",width:le})),t.createElement(r.a.ButtonRow,null,t.createElement(D.b,{icon:"copy",getText:oe,onClipboardCopy:()=>{g.c.exportCopyJsonClicked()}},t.createElement(l.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class M extends t.PureComponent{constructor(te){super(te),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:oe}=this.props,{shareExternally:le}=this.state;g.c.exportSaveJsonClicked({externally:le}),le?this.exporter.makeExportable(oe).then(ue=>{this.openSaveAsDialog(ue)}):this.openSaveAsDialog(oe.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:oe}=this.props,{shareExternally:le}=this.state;g.c.exportViewJsonClicked({externally:le}),le?this.exporter.makeExportable(oe).then(ue=>{this.openJsonModal(ue)}):this.openJsonModal(oe.getSaveModelClone())},this.openSaveAsDialog=oe=>{const le=JSON.stringify(oe,null,2),ue=new Blob([le],{type:"application/json;charset=utf-8"}),Te=new Date().getTime();(0,p.saveAs)(ue,`${oe.title}-${Te}.json`)},this.openJsonModal=oe=>{i.lE.publish(new y.S8({props:{json:JSON.stringify(oe,null,2)},component:T})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new P.M}render(){const{onDismiss:te}=this.props,{shareExternally:oe}=this.state,le=(0,l.t)("share-modal.export.share-externally-label","Export for sharing externally");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(b.D,{label:le},t.createElement(a.d,{id:"share-externally-toggle",value:oe,onChange:this.onShareExternallyChange})),t.createElement(r.a.ButtonRow,null,t.createElement(h.$n,{variant:"secondary",onClick:te,fill:"outline"},t.createElement(l.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(h.$n,{variant:"secondary",onClick:this.onViewJson},t.createElement(l.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(h.$n,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(l.x6,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var O=e(86394),S=e(13544),v=e(84167),x=e(10354),A=e(72109),R=e(42418),B=e(87895),U=e(22699);class w extends t.PureComponent{constructor(te){super(te),this.buildUrl=async()=>{const{panel:oe,dashboard:le}=this.props,{useCurrentTimeRange:ue,useShortUrl:Te,selectedTheme:he}=this.state,re=await(0,U.Xe)(ue,he,oe,Te),De=(0,U.Lb)(ue,le.uid,he,oe);this.setState({shareUrl:re,imageUrl:De})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=oe=>{this.setState({selectedTheme:oe})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""},this.onCopy=this.onCopy.bind(this)}componentDidMount(){this.buildUrl()}componentDidUpdate(te,oe){const{useCurrentTimeRange:le,useShortUrl:ue,selectedTheme:Te}=this.state;(oe.useCurrentTimeRange!==le||oe.selectedTheme!==Te||oe.useShortUrl!==ue)&&this.buildUrl()}onCopy(){g.c.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}render(){const{panel:te,dashboard:oe}=this.props,le=oe?oe.time.to==="now":!1,{useCurrentTimeRange:ue,useShortUrl:Te,selectedTheme:he,shareUrl:re,imageUrl:De}=this.state,Fe=S.Tp.pages.SharePanelModal,Ee=!!oe.id,Me=(0,l.t)("share-modal.link.time-range-label","Lock time range"),ze=(0,l.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),xe=(0,l.t)("share-modal.link.shorten-url","Shorten URL"),We=(0,l.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(v.n,null,t.createElement(b.D,{label:Me,description:le?ze:""},t.createElement(a.d,{id:"share-current-time-range",value:ue,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(B.w,{selectedTheme:he,onChange:this.onThemeChange}),t.createElement(b.D,{label:xe},t.createElement(a.d,{id:"share-shorten-url",value:Te,onChange:this.onUrlShorten})),t.createElement(b.D,{label:We},t.createElement(x.p,{id:"link-url-input",value:re,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},t.createElement(l.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),te&&m.Ay.rendererAvailable&&t.createElement(t.Fragment,null,Ee&&t.createElement(A.Y,{href:De,external:!0,icon:"camera","aria-label":Fe.linkToRenderedImage},(0,l.t)("share-modal.link.rendered-image","Direct link rendered image")),!Ee&&t.createElement(R.F,{severity:"info",title:(0,l.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(l.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),te&&!m.Ay.rendererAvailable&&t.createElement(R.F,{severity:"info",title:(0,l.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(l.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement(A.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var K=e(92041),N=e(17172),L=e(88323),V=e(62930),F=e(74856),z=e(80484),Y=e(69064);class H extends t.PureComponent{constructor(te){super(te),this.createSnapshot=oe=>()=>{const{timeoutSeconds:le}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,oe)},le*1e3)},this.saveSnapshot=async(oe,le)=>{const{snapshotExpires:ue,timeoutSeconds:Te}=this.state,he=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(he);const re={dashboard:he,name:he.title,expires:ue,external:le};try{const De=await(0,Y.s)().create(re);this.setState({deleteUrl:De.deleteUrl,snapshotUrl:De.url,step:2})}finally{le?g.c.publishSnapshotClicked({expires:ue,timeout:Te}):g.c.publishSnapshotLocalClicked({expires:ue,timeout:Te}),this.setState({isLoading:!1})}},this.scrubDashboard=oe=>{const{panel:le}=this.props,{snapshotName:ue}=this.state;oe.title=ue,oe.time=(0,F.jG)().timeRange(),oe.links=[],oe.panels.forEach(he=>{he.targets=[],he.links=[],he.datasource=null});const Te=oe.annotations.list.filter(he=>he.enable);if(oe.annotations.list=Te.map(he=>({name:he.name,enable:he.enable,iconColor:he.iconColor,snapshotData:he.snapshotData,type:he.type,builtIn:he.builtIn,hide:he.hide})),oe.getVariables().forEach(he=>{"query"in he&&(he.query=""),"options"in he&&(he.options=he.current&&!(0,K.R)(he.current)?[he.current]:[]),"refresh"in he&&(he.refresh=z.CO.never)}),le){const he=le.getSaveModel();he.gridPos.w=24,he.gridPos.x=0,he.gridPos.y=0,he.gridPos.h=20,oe.panels=[he]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(he=>{delete he.snapshotData}),this.dashboard.annotations.list.forEach(he=>{delete he.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:oe}=this.state;await(0,N.AI)().get(oe),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=oe=>{this.setState({snapshotName:oe.target.value})},this.onTimeoutChange=oe=>{this.setState({timeoutSeconds:Number(oe.target.value)})},this.onExpireChange=oe=>{this.setState({selectedExpireOption:oe,snapshotExpires:oe.value})},this.dashboard=te.dashboard,this.expireOptions=[{label:(0,l.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,l.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,l.t)("share-modal.snapshot.expire-week","1 Week"),value:60*60*24*7},{label:(0,l.t)("share-modal.snapshot.expire-never","Never"),value:0}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[2],snapshotExpires:this.expireOptions[2].value,snapshotName:te.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const te=await(0,Y.s)().getSharingOptions();this.setState({sharingButtonText:te.externalSnapshotName,externalEnabled:te.externalEnabled})}renderStep1(){const{onDismiss:te}=this.props,{snapshotName:oe,selectedExpireOption:le,timeoutSeconds:ue,isLoading:Te,sharingButtonText:he,externalEnabled:re}=this.state,De=(0,l.t)("share-modal.snapshot.name","Snapshot name"),Fe=(0,l.t)("share-modal.snapshot.expire","Expire"),Ee=(0,l.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Me=(0,l.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(b.D,{label:De},t.createElement(x.p,{id:"snapshot-name-input",width:30,value:oe,onChange:this.onSnapshotNameChange})),t.createElement(b.D,{label:Fe},t.createElement(L.l6,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:le,onChange:this.onExpireChange})),t.createElement(b.D,{label:Ee,description:Me},t.createElement(x.p,{id:"timeout-input",type:"number",width:21,value:ue,onChange:this.onTimeoutChange})),t.createElement(r.a.ButtonRow,null,t.createElement(h.$n,{variant:"secondary",onClick:te,fill:"outline"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),re&&t.createElement(h.$n,{variant:"secondary",disabled:Te,onClick:this.createSnapshot(!0)},he),t.createElement(h.$n,{variant:"primary",disabled:Te,onClick:this.createSnapshot()},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.local-button"},"Publish Snapshot"))))}renderStep2(){const{snapshotUrl:te}=this.state;return t.createElement(t.Fragment,null,t.createElement(b.D,{label:(0,l.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(x.p,{id:"snapshot-url-input",value:te,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(h.z9,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(l.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:te,step:oe}=this.state;return t.createElement(t.Fragment,null,oe===1&&this.renderStep1(),oe===2&&this.renderStep2(),oe===3&&this.renderStep3(),te&&t.createElement(V.y,{inline:!0}))}}const k=[],ee=[];function ie(ne){k.push(ne)}function fe(ne){ee.push(ne)}function q(ne,te,oe){const ue=[{label:(0,l.t)("share-modal.tab-title.link","Link"),value:U.wr.link,component:w}];if(i.TP.isSignedIn&&m.config.snapshotEnabled&&ne){const he=(0,l.t)("share-modal.tab-title.snapshot","Snapshot");ue.push({label:he,value:U.wr.snapshot,component:H})}if(te){const he=(0,l.t)("share-modal.tab-title.embed","Embed");if(ue.push({label:he,value:U.wr.embed,component:E.D}),!(0,u.X)(te)){const re=(0,l.t)("share-modal.tab-title.library-panel","Library panel");ue.push({label:re,value:U.wr.libraryPanel,component:O.j})}ue.push(...ee)}else{const he=(0,l.t)("share-modal.tab-title.export","Export");ue.push({label:he,value:U.wr.export,component:M}),ue.push(...k)}(0,c.iR)()&&ue.push({label:(0,l.t)("share-modal.tab-title.public-dashboard-title","Public dashboard"),value:U.wr.publicDashboard,component:d.b});const Te=ue.find(he=>he.value===oe);return{tabs:ue,activeTab:Te?.value??ue[0].value}}function Z(ne){const{tabs:te,activeTab:oe}=q(ne.dashboard.canEditDashboard(),ne.panel,ne.activeTab);return{tabs:te,activeTab:oe}}class J extends t.Component{constructor(te){super(te),this.onSelectTab=oe=>{this.setState(le=>({...le,activeTab:oe.value})),g.c.sharingTabChanged({item:oe.value})},this.state=Z(te)}getActiveTab(){const{tabs:te,activeTab:oe}=this.state;return te.find(le=>le.value===oe)}renderTitle(){const{panel:te}=this.props,{activeTab:oe}=this.state,le=te?(0,l.t)("share-modal.panel.title","Share Panel"):(0,l.t)("share-modal.dashboard.title","Share"),ue=this.props.dashboard.canEditDashboard(),Te=q(ue,this.props.panel,this.state.activeTab).tabs;return t.createElement(n.J,{title:le,icon:"share-alt",tabs:Te,activeTab:oe,onChangeTab:this.onSelectTab})}render(){const{dashboard:te,panel:oe}=this.props,ue=this.getActiveTab().component;return t.createElement(r.a,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(s.J,null,t.createElement(ue,{dashboard:te,panel:oe,onDismiss:this.props.onDismiss})))}}const G=(0,o.cV)(J)},59037:(Q,I,e)=>{"use strict";e.d(I,{K:()=>he,b:()=>Te});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(32264),m=e(33378),i=e(40845),l=e(88575),d=e(10354),c=e(10534),g=e(15292),u=e(60029),E=e(66864),p=e(55852),b=e(71678),a=e(44836),h=e(72686),P=e(21380),y=e(7758),C=e(90591),f=e(16233),D=e(31678),T=e(52908);const M=()=>{const{width:De}=(0,T.A)();return De>1024};var O=e(7686),S=e(22699),v=e(29304),x=e(42418);const A=()=>n.createElement(x.F,{title:(0,a.t)("public-dashboard.modal-alerts.save-dashboard-changes-alert-title","Please save your dashboard changes before updating the public configuration"),severity:"warning",bottomSpacing:0});var R=e(12257),B=e(10872),U=e(72254),w=e(84167),K=e(54230);const N=s.Tp.pages.ShareDashboardModal.PublicDashboard,L=({disabled:De,onChange:Fe,register:Ee,timeRange:Me})=>n.createElement(n.Fragment,null,n.createElement(w.n,{disabled:De},n.createElement(E.gW,{spacing:"md"},n.createElement(E.PE,{orientation:1,spacing:"xs",justify:"space-between"},n.createElement(u.J,{description:(0,a.t)("public-dashboard.settings-configuration.default-time-range-label-desc","The public dashboard uses the default time range settings of the dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.default-time-range-label"},"Default time range")),n.createElement(K.b,{value:Me,disabled:!0,onChange:()=>{}})),n.createElement(E.PE,{orientation:0,spacing:"sm"},n.createElement(g.d,{...Ee("isTimeSelectionEnabled"),"data-testid":N.EnableTimeRangeSwitch,onChange:ze=>{Fe("isTimeSelectionEnabled",ze.currentTarget.checked),y.c.publicDashboardTimeSelectionChanged({enabled:ze.currentTarget.checked})}}),n.createElement(u.J,{description:(0,a.t)("public-dashboard.settings-configuration.time-range-picker-label-desc","Allow viewers to change time range")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.time-range-picker-label"},"Time range picker enabled"))),n.createElement(E.PE,{orientation:0,spacing:"sm"},n.createElement(g.d,{...Ee("isAnnotationsEnabled"),onChange:ze=>{Fe("isAnnotationsEnabled",ze.currentTarget.checked),y.c.publicDashboardAnnotationsSelectionChanged({enabled:ze.currentTarget.checked})},"data-testid":N.EnableAnnotationsSwitch}),n.createElement(u.J,{description:(0,a.t)("public-dashboard.settings-configuration.show-annotations-label-desc","Show annotations on public dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.show-annotations-label"},"Show annotations"))))));var V=e(19727),F=e(94354),z=e(62930),Y=e(45199);const H=s.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,k=({recipients:De,dashboardUid:Fe,publicDashboardUid:Ee})=>{const Me=(0,i.of)(ie),[ze,{isLoading:xe}]=(0,h.$L)(),[We,{isLoading:be}]=(0,h.NA)(),pe=xe||be,Ue=(je,He)=>{y.c.revokePublicDashboardEmailClicked(),ze({recipientUid:je,recipientEmail:He,dashboardUid:Fe,uid:Ee})},we=je=>{y.c.resendPublicDashboardEmailClicked(),We({recipientUid:je,uid:Ee})};return n.createElement("table",{className:Me.table,"data-testid":H.EmailSharingList},n.createElement("tbody",null,De.map((je,He)=>n.createElement("tr",{key:je.uid},n.createElement("td",null,je.recipient),n.createElement("td",null,n.createElement(V.e,{className:Me.tableButtonsContainer},n.createElement(p.$n,{type:"button",variant:"destructive",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.revoke-button-title","Revoke"),size:"sm",disabled:pe,onClick:()=>Ue(je.uid,je.recipient),"data-testid":`${H.DeleteEmail}-${He}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.revoke-button"},"Revoke")),n.createElement(p.$n,{type:"button",variant:"primary",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.resend-button-title","Resend"),size:"sm",disabled:pe,onClick:()=>we(je.uid),"data-testid":`${H.ReshareLink}-${He}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.resend-button"},"Resend"))))))))},ee=({dashboard:De})=>{const{width:Fe}=(0,T.A)(),Ee=(0,i.of)(ie),Me=De instanceof Y.H$?De.state.uid:De.uid,{data:ze}=(0,h.Bs)(Me),[xe]=(0,h.T2)(),[We,{isLoading:be}]=(0,h.NY)(),pe=f.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),{register:Ue,setValue:we,control:je,watch:He,handleSubmit:rt,formState:{errors:Je},reset:Ve}=(0,r.mN)({defaultValues:{shareType:ze?.share||U.Xo.PUBLIC,email:""},mode:"onSubmit"}),Oe=ye=>{const se={dashboard:De,payload:{...ze,share:ye}};xe(se)},Ne=async ye=>{y.c.publicDashboardEmailInviteClicked(),await We({recipient:ye.email,uid:ze.uid,dashboardUid:Me}).unwrap(),Ve({email:"",shareType:U.Xo.EMAIL})};return n.createElement("form",{onSubmit:rt(Ne)},n.createElement(w.n,{disabled:!pe,"data-testid":H.Container,className:Ee.container},n.createElement(l.D,{label:(0,a.t)("public-dashboard.config.can-view-dashboard-radio-button-label","Can view dashboard"),className:Ee.field},n.createElement(r.xI,{name:"shareType",control:je,render:({field:ye})=>{const{ref:se,...ae}=ye,ge=[{label:(0,a.t)("public-dashboard.config.public-share-type-option-label","Anyone with a link"),value:U.Xo.PUBLIC},{label:(0,a.t)("public-dashboard.config.email-share-type-option-label","Only specified people"),value:U.Xo.EMAIL}];return n.createElement(F.z,{...ae,size:Fe<480?"sm":"md",options:ge,onChange:Pe=>{y.c.publicDashboardShareTypeChange({shareType:Pe===U.Xo.EMAIL?"email":"public"}),we("shareType",Pe),Oe(Pe)}})}})),He("shareType")===U.Xo.EMAIL&&n.createElement(n.Fragment,null,n.createElement(l.D,{label:(0,a.t)("public-dashboard.email-sharing.invite-field-label","Invite"),description:(0,a.t)("public-dashboard.email-sharing.invite-field-desc","Invite people by email"),error:Je.email?.message,invalid:!!Je.email?.message||void 0,className:Ee.field},n.createElement("div",{className:Ee.emailContainer},n.createElement(d.p,{className:Ee.emailInput,placeholder:"email",autoCapitalize:"none",...Ue("email",{required:(0,a.t)("public-dashboard.email-sharing.input-required-email-text","Email is required"),pattern:{value:U._l,message:(0,a.t)("public-dashboard.email-sharing.input-invalid-email-text","Invalid email")}}),"data-testid":H.EmailSharingInput}),n.createElement(p.$n,{type:"submit",variant:"primary",disabled:be,"data-testid":H.EmailSharingInviteButton},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.invite-button"},"Invite"),be&&n.createElement(z.y,null)))),!!ze?.recipients?.length&&n.createElement(k,{recipients:ze.recipients,dashboardUid:Me,publicDashboardUid:ze.uid}))))},ie=De=>({container:(0,t.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${De.spacing(3)};
  `,field:(0,t.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,t.css)`
    label: emailContainer;
    display: flex;
    gap: ${De.spacing(1)};
  `,emailInput:(0,t.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,t.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${De.spacing(.5,1)};

      :nth-child(odd) {
        background: ${De.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `});var fe=e(67892),q=e(29158);function Z({headerElement:De,isContentVisible:Fe=!1,onRowToggle:Ee,title:Me,...ze}){const xe=(0,i.of)(J),We=De&&fe.renderOrCallToRender(De,{className:xe.summaryWrapper});return n.createElement("div",{className:xe.wrapper},n.createElement("div",{className:xe.header},n.createElement(q.K,{name:Fe?"angle-down":"angle-right",tooltip:Fe?(0,a.t)("public-dashboard.settings-bar-header.collapse-settings-tooltip","Collapse settings"):(0,a.t)("public-dashboard.settings-bar-header.expand-settings-tooltip","Expand settings"),className:xe.collapseIcon,onClick:Ee,"aria-expanded":Fe,...ze}),Me&&n.createElement("div",{className:xe.titleWrapper,onClick:Ee},n.createElement("span",{className:xe.title},Me)),We))}Z.displayName="SettingsBarHeader";function J(De){return{wrapper:(0,t.css)({label:"header",padding:De.spacing(.5,.5),borderRadius:De.shape.radius.default,background:De.colors.background.secondary,minHeight:De.spacing(4),"&:focus":{outline:"none"}}),header:(0,t.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,t.css)({marginLeft:De.spacing(.5),color:De.colors.text.disabled}),titleWrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${De.spacing(.5)}`,[De.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,t.css)({fontWeight:De.typography.fontWeightBold,marginLeft:De.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",[De.breakpoints.down("sm")]:{flex:"2 2"}})}}function G({children:De,title:Fe,headerElement:Ee,...Me}){const ze=(0,i.of)(ne),[xe,We]=(0,n.useState)(!1);function be(){We(pe=>!pe)}return n.createElement(n.Fragment,null,n.createElement(Z,{onRowToggle:be,isContentVisible:xe,title:Fe,headerElement:Ee,...Me}),xe&&n.createElement("div",{className:ze.content},De))}G.displayName="SettingsBar";const ne=De=>({content:(0,t.css)({marginTop:De.spacing(1),marginLeft:De.spacing(4)})});var te=e(3799);function oe({className:De,isDataLoading:Fe=!1,timeRange:Ee,timeSelectionEnabled:Me,annotationsEnabled:ze}){const xe=(0,i.of)(le),We=(0,a.t)("public-dashboard.settings-summary.time-range-picker-enabled-text","Time range picker = enabled"),be=(0,a.t)("public-dashboard.settings-summary.time-range-picker-disabled-text","Time range picker = disabled"),pe=(0,a.t)("public-dashboard.settings-summary.annotations-show-text","Annotations = show"),Ue=(0,a.t)("public-dashboard.settings-summary.annotations-hide-text","Annotations = hide");return Fe?n.createElement("div",{className:(0,t.cx)(xe.summaryWrapper,De)},n.createElement(z.y,{className:xe.summary,inline:!0,size:"sm"})):n.createElement("div",{className:(0,t.cx)(xe.summaryWrapper,De)},n.createElement("span",{className:xe.summary},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-summary.time-range-text"},"Time range = "),n.createElement(te.f,{className:xe.timeRange,value:Ee})),n.createElement("span",{className:xe.summary},Me?We:be),n.createElement("span",{className:xe.summary},ze?pe:Ue))}oe.displayName="SettingsSummary";const le=De=>({summaryWrapper:(0,t.css)({display:"flex"}),summary:(0,t.css)`
      label: collapsedText;
      margin-left: ${De.spacing.gridSize*2}px;
      font-size: ${De.typography.bodySmall.fontSize};
      color: ${De.colors.text.secondary};
    `,timeRange:(0,t.css)({display:"inline-block"})}),ue=s.Tp.pages.ShareDashboardModal.PublicDashboard;function Te({onRevoke:De,timeRange:Fe,hasTemplateVariables:Ee=!1,showSaveChangesAlert:Me=!1,unsupportedDatasources:ze=[],publicDashboard:xe,dashboard:We}){const be=(0,i.of)(re),pe=M(),[Ue,{isLoading:we}]=(0,h.T2)(),je=f.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),He=!je||we,rt=!!o.$.featureToggles.publicDashboardsEmailSharing&&(0,m.a)("publicDashboardsEmailSharing"),{handleSubmit:Je,setValue:Ve,register:Oe}=(0,r.mN)({defaultValues:{isAnnotationsEnabled:xe?.annotationsEnabled,isTimeSelectionEnabled:xe?.timeSelectionEnabled,isPaused:!xe?.isEnabled}}),Ne=async ae=>{const{isAnnotationsEnabled:ge,isTimeSelectionEnabled:Pe,isPaused:Re}=ae;Ue({dashboard:We,payload:{...xe,annotationsEnabled:ge,timeSelectionEnabled:Pe,isEnabled:!Re}})},ye=async(ae,ge)=>{Ve(ae,ge),await Je(Pe=>Ne(Pe))()};function se(){y.c.publicDashboardUrlCopied()}return n.createElement("div",{className:be.configContainer},Me&&n.createElement(A,null),!je&&n.createElement(v.t,{mode:"edit"}),Ee&&n.createElement(B.D,null),ze.length>0&&n.createElement(R.s,{unsupportedDataSources:ze.join(", ")}),rt&&n.createElement(ee,{dashboard:We}),n.createElement(l.D,{label:(0,a.t)("public-dashboard.config.dashboard-url-field-label","Dashboard URL"),className:be.fieldSpace},n.createElement(d.p,{value:(0,U.mL)(xe.accessToken),readOnly:!0,disabled:!xe?.isEnabled,"data-testid":ue.CopyUrlInput,addonAfter:n.createElement(c.b,{"data-testid":ue.CopyUrlButton,variant:"primary",disabled:!xe?.isEnabled,getText:()=>(0,U.mL)(xe.accessToken),onClipboardCopy:se},n.createElement(a.x6,{i18nKey:"public-dashboard.config.copy-button"},"Copy"))})),n.createElement(l.D,{className:be.fieldSpace},n.createElement(E.PE,null,n.createElement(g.d,{...Oe("isPaused"),disabled:He,onChange:ae=>{y.c.publicDashboardPauseSharingClicked({paused:ae.currentTarget.checked}),ye("isPaused",ae.currentTarget.checked)},"data-testid":ue.PauseSwitch}),n.createElement(u.J,{className:(0,t.css)`
              margin-bottom: 0;
            `},n.createElement(a.x6,{i18nKey:"public-dashboard.config.pause-sharing-dashboard-label"},"Pause sharing dashboard")))),n.createElement(l.D,{className:be.fieldSpace},n.createElement(G,{title:(0,a.t)("public-dashboard.config.settings-title","Settings"),headerElement:({className:ae})=>n.createElement(oe,{className:ae,isDataLoading:we,timeRange:Fe,timeSelectionEnabled:xe?.timeSelectionEnabled,annotationsEnabled:xe?.annotationsEnabled}),"data-testid":ue.SettingsDropdown},n.createElement(L,{disabled:He,onChange:ye,register:Oe,timeRange:Fe}))),n.createElement(E.PE,{orientation:pe?0:1,justify:pe?"flex-end":"flex-start",align:pe?"center":"normal"},n.createElement(E.Gy,{justify:"flex-end"},n.createElement(p.$n,{title:(0,a.t)("public-dashboard.config.revoke-public-URL-button-title","Revoke public URL"),onClick:De,type:"button",disabled:He,"data-testid":ue.DeleteButton,variant:"destructive",fill:"outline"},n.createElement(a.x6,{i18nKey:"public-dashboard.config.revoke-public-URL-button"},"Revoke public URL")))))}function he({publicDashboard:De,unsupportedDatasources:Fe}){const Me=(0,D.useSelector)(Ue=>Ue.dashboard).getModel(),ze=(0,P.z)(Me.getDefaultTime(),Me),xe=f.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),We=(0,U.kD)(Me.getVariables()),[be]=(0,h.bN)(),pe=Ue=>{be({dashboard:Me,uid:De.uid,dashboardUid:Me.uid}),Ue()};return n.createElement(b.$s,null,({showModal:Ue,hideModal:we})=>n.createElement(Te,{publicDashboard:De,dashboard:Me,unsupportedDatasources:Fe,timeRange:ze,showSaveChangesAlert:xe&&Me.hasUnsavedChanges(),hasTemplateVariables:We,onRevoke:()=>{y.c.revokePublicDashboardClicked(),Ue(C.m,{dashboardTitle:Me.title,onConfirm:()=>pe(we),onDismiss:()=>{Ue(O.Zy,{dashboard:Me,onDismiss:we,activeTab:S.wr.publicDashboard})}})}}))}const re=De=>({configContainer:(0,t.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${De.spacing(3)};
  `,fieldSpace:(0,t.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,t.css)({display:"inline-block"})})},22234:(Q,I,e)=>{"use strict";e.d(I,{M:()=>S,D:()=>O});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(55852),i=e(62930),l=e(44836),d=e(16233),c=e(72686),g=e(7758),u=e(31678),E=e(29304),p=e(12257),b=e(10872),a=e(72254),h=e(71415),P=e(84167),y=e(66864),C=e(10880);const f=s.Tp.pages.ShareDashboardModal.PublicDashboard,D=({disabled:x,register:A})=>{const R=(0,o.of)(T),B=[{type:"publicAcknowledgment",description:(0,l.t)("public-dashboard.acknowledgment-checkboxes.public-ack-desc","Your entire dashboard will be public*"),testId:f.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:(0,l.t)("public-dashboard.acknowledgment-checkboxes.public-ack-tooltip","Learn more about public dashboards")}},{type:"dataSourcesAcknowledgment",description:(0,l.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-desc","Publishing currently only works with a subset of data sources*"),testId:f.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:(0,l.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-tooltip","Learn more about public datasources")}},{type:"usageAcknowledgment",description:(0,l.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc","Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*"),testId:f.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:(0,l.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc-tooltip","Learn more about query caching")}}];return n.createElement(n.Fragment,null,n.createElement("p",{className:R.title},n.createElement(l.x6,{i18nKey:"public-dashboard.acknowledgment-checkboxes.ack-title"},"Before you make the dashboard public, acknowledge the following:")),n.createElement(P.n,{disabled:x},n.createElement(y.gW,{spacing:"md"},B.map(U=>n.createElement(y.Gy,{key:U.type,spacing:"none",align:"center"},n.createElement(C.S,{...A(U.type,{required:!0}),label:U.description,"data-testid":U.testId}),n.createElement(m.z9,{variant:"primary",href:U.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:U.info.tooltip}))))))},T=x=>({title:(0,t.css)`
    font-weight: ${x.typography.fontWeightBold};
  `}),M=s.Tp.pages.ShareDashboardModal.PublicDashboard,O=({unsupportedDatasources:x=[],unsupportedTemplateVariables:A=!1,dashboard:R,hasError:B=!1})=>{const U=(0,o.of)(v),w=d.TP.hasPermission(u.AccessControlAction.DashboardsPublicWrite),[K,{isLoading:N,isError:L}]=(0,c.U9)(),V=()=>{K({dashboard:R,payload:{isEnabled:!0}}),g.c.generatePublicDashboardUrlClicked({})},{handleSubmit:F,register:z,formState:{isValid:Y}}=(0,r.mN)({mode:"onChange"}),H=!w||N||L||B;return n.createElement("div",{className:U.container},n.createElement("div",null,n.createElement("p",{className:U.title},n.createElement(l.x6,{i18nKey:"public-dashboard.create-page.welcome-title"},"Welcome to public dashboards!")),n.createElement("p",{className:U.description},n.createElement(l.x6,{i18nKey:"public-dashboard.create-page.unsupported-features-desc"},"Currently, we don\u2019t support template variables or frontend data sources"))),!w&&n.createElement(E.t,{mode:"create"}),A&&n.createElement(b.D,null),x.length>0&&n.createElement(p.s,{unsupportedDataSources:x.join(", ")}),n.createElement("form",{onSubmit:F(V)},n.createElement("div",{className:U.checkboxes},n.createElement(D,{disabled:H,register:z})),n.createElement("div",{className:U.buttonContainer},n.createElement(m.$n,{type:"submit",disabled:H||!Y,"data-testid":M.CreateButton},n.createElement(l.x6,{i18nKey:"public-dashboard.create-page.generate-public-url-button"},"Generate public URL"),N&&n.createElement(i.y,{className:U.loadingSpinner})))))};function S({hasError:x}){const R=(0,u.useSelector)(w=>w.dashboard).getModel(),{unsupportedDataSources:B}=(0,h.Z)(R),U=(0,a.kD)(R.getVariables());return n.createElement(O,{dashboard:R,unsupportedDatasources:B,unsupportedTemplateVariables:U,hasError:x})}const v=x=>({container:(0,t.css)`
    display: flex;
    flex-direction: column;
    gap: ${x.spacing(4)};
  `,title:(0,t.css)`
    font-size: ${x.typography.h4.fontSize};
    margin: ${x.spacing(0,0,2)};
  `,description:(0,t.css)`
    color: ${x.colors.text.secondary};
    margin-bottom: ${x.spacing(0)};
  `,checkboxes:(0,t.css)`
    margin: ${x.spacing(0,0,4)};
  `,buttonContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,t.css)`
    margin-left: ${x.spacing(1)};
  `})},29304:(Q,I,e)=>{"use strict";e.d(I,{t:()=>m});var t=e(96540),n=e(13544),r=e(42418),s=e(44836);const o=n.Tp.pages.ShareDashboardModal.PublicDashboard,m=({mode:i})=>t.createElement(r.F,{severity:"info",title:(0,s.t)("public-dashboard.modal-alerts.no-upsert-perm-alert-title","You don\u2019t have permission to {{ mode }} a public dashboard",{mode:i}),"data-testid":o.NoUpsertPermissionsWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.no-upsert-perm-alert-desc"},"Contact your admin to get permission to ",{mode:i}," public dashboards"))},12257:(Q,I,e)=>{"use strict";e.d(I,{s:()=>c});var t=e(32196),n=e(46942),r=e.n(n),s=e(96540),o=e(13544),m=e(40845),i=e(42418),l=e(44836);const d=o.Tp.pages.ShareDashboardModal.PublicDashboard,c=({unsupportedDataSources:u})=>{const E=(0,m.of)(g);return s.createElement(i.F,{severity:"warning",title:(0,l.t)("public-dashboard.modal-alerts.unsupported-data-source-alert-title","Unsupported data sources"),"data-testid":d.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},s.createElement("p",{className:E.unsupportedDataSourceDescription},s.createElement(l.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-data-source-alert-desc"},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:u},".")),s.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:r()("text-link",E.unsupportedDataSourceDescription)},s.createElement(l.x6,{i18nKey:"public-dashboard.modal-alerts.unsupport-data-source-alert-readmore-link"},"Read more about supported data sources")))},g=u=>({unsupportedDataSourceDescription:(0,t.css)`
    color: ${u.colors.text.secondary};
    margin-bottom: ${u.spacing(1)};
  `})},10872:(Q,I,e)=>{"use strict";e.d(I,{D:()=>m});var t=e(96540),n=e(13544),r=e(42418),s=e(44836);const o=n.Tp.pages.ShareDashboardModal.PublicDashboard,m=()=>t.createElement(r.F,{severity:"warning",title:(0,s.t)("public-dashboard.modal-alerts.unsupported-template-variable-alert-title","Template variables are not supported"),"data-testid":o.TemplateVariablesWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-template-variable-alert-desc"},"This public dashboard may not work since it uses template variables"))},4785:(Q,I,e)=>{"use strict";e.d(I,{a:()=>u,b:()=>E});var t=e(32196),n=e(96540),r=e(40845),s=e(62930),o=e(72686),m=e(72254),i=e(31678),l=e(42930),d=e(59037),c=e(22234),g=e(71415);const u=()=>{const b=(0,r.of)(p);return n.createElement(l.G,{className:b.loadingContainer},n.createElement(n.Fragment,null,"Loading configuration",n.createElement(s.y,{size:"lg",className:b.spinner})))},E=b=>{const{data:a,isLoading:h,isError:P}=(0,o.Bs)(b.dashboard.uid),C=(0,i.useSelector)(D=>D.dashboard).getModel(),{unsupportedDataSources:f}=(0,g.Z)(C);return n.createElement(n.Fragment,null,h?n.createElement(u,null):(0,m.lI)(a)?n.createElement(d.K,{publicDashboard:a,unsupportedDatasources:f}):n.createElement(c.M,{hasError:P}))},p=b=>({loadingContainer:(0,t.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:b.spacing(1)}),spinner:(0,t.css)({marginBottom:b.spacing(0)})})},72254:(Q,I,e)=>{"use strict";e.d(I,{Xo:()=>i,_A:()=>c,_l:()=>E,gN:()=>u,iR:()=>p,kD:()=>l,lI:()=>d,mL:()=>g});var t=e(26657),n=e(32264),r=e(2913),s=e(31193),o=e(22699),m=e(31204),i=(b=>(b.PUBLIC="public",b.EMAIL="email",b))(i||{});const l=b=>b.length>0,d=b=>b?.uid!==""&&b?.uid!==void 0,c=async b=>{let a=new Set;for(const h of b)for(const P of h.targets){const y=P?.datasource?.type;y&&(m.z.has(y)&&await(0,s.tR)().get(P.datasource)instanceof t.iy||a.add(y))}return Array.from(a).sort()},g=b=>`${(0,r.zj)().appUrl}public-dashboards/${b}`,u=(b,a)=>`/d/${b}/${a}?shareView=${o.wr.publicDashboard}`,E=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,p=()=>!!n.$.featureToggles.publicDashboards&&n.$.publicDashboardsEnabled},31204:(Q,I,e)=>{"use strict";e.d(I,{z:()=>t});const t=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},71415:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>r});var t=e(96540),n=e(72254);const r=s=>{const[o,m]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(async()=>await(0,n._A)(s.panels))().then(l=>{m(l)})},[s.panels]),{unsupportedDataSources:o}}},87895:(Q,I,e)=>{"use strict";e.d(I,{w:()=>o});var t=e(96540),n=e(88575),r=e(94354),s=e(44836);const o=({selectedTheme:m="current",onChange:i})=>{const l=[{label:(0,s.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,s.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,s.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(n.D,{label:(0,s.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(r.z,{options:l,value:m,onChange:i}))}},1702:(Q,I,e)=>{"use strict";e.d(I,{ShareModal:()=>t.Zy});var t=e(7686)},22699:(Q,I,e)=>{"use strict";e.d(I,{CF:()=>E,Lb:()=>u,P_:()=>d,XV:()=>l,Xe:()=>c,wr:()=>b});var t=e(65879),n=e(76885),r=e(71733),s=e(47232),o=e(32264),m=e(7030),i=e(74856);function l({useCurrentTimeRange:a,selectedTheme:h,panel:P,search:y=window.location.search,range:C=(0,i.jG)().timeRange(),orgId:f=o.$.bootData.user.orgId}){const D=new URLSearchParams(y),T=P?.timeFrom;if(T){const{from:M,to:O}=t.describeTextRange(T);D.set("from",M),D.set("to",O)}else D.set("from",String(C.from.valueOf())),D.set("to",String(C.to.valueOf()));return D.set("orgId",String(f)),a||(D.delete("from"),D.delete("to")),h!=="current"&&D.set("theme",h),P&&!D.has("editPanel")&&D.set("viewPanel",String(P.id)),D.delete("auth_token"),D.delete("shareView"),D}function d(){let a=window.location.href;const h=a.indexOf("?");return h!==-1&&(a=a.substring(0,h)),a}async function c(a,h,P,y){const C=d(),f=l({useCurrentTimeRange:a,selectedTheme:h,panel:P}),D=n.kM.appendQueryToUrl(C,f.toString());return y?await(0,m.f)(D):D}function g(a,h,P,y,C){const f=d(),D=l({useCurrentTimeRange:a,selectedTheme:P,panel:y,range:C});let T=f.replace(o.$.appSubUrl+"/dashboard/",o.$.appSubUrl+"/dashboard-solo/");T=T.replace(o.$.appSubUrl+"/d/",o.$.appSubUrl+"/d-solo/"),r.I.stripBaseFromUrl(f)==="/"&&(T=`${o.$.appUrl}d-solo/${h}`);const O=D.get("editPanel")??D.get("viewPanel")??"";return D.set("panelId",O),D.delete("editPanel"),D.delete("viewPanel"),n.kM.appendQueryToUrl(T,D.toString())}function u(a,h,P,y){let f=g(a,h,P,y).replace(o.$.appSubUrl+"/dashboard-solo/",o.$.appSubUrl+"/render/dashboard-solo/");return f=f.replace(o.$.appSubUrl+"/d-solo/",o.$.appSubUrl+"/render/d-solo/"),f+=`&width=${o.$.rendererDefaultImageWidth}&height=${o.$.rendererDefaultImageHeight}&scale=${o.$.rendererDefaultImageScale}`+p(),f}function E(a,h,P,y,C){return`<iframe src="${g(a,h,P,y,C)}" width="450" height="200" frameborder="0"></iframe>`}function p(){const a="&tz=UTC"+encodeURIComponent((0,s.KQ)().format("Z"));if(!window.Intl)return a;const h=window.Intl.DateTimeFormat();if(!h.resolvedOptions)return a;const P=h.resolvedOptions();return P.timeZone?"&tz="+encodeURIComponent(P.timeZone):a}const b={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},52424:(Q,I,e)=>{"use strict";e.d(I,{Zx:()=>C,aK:()=>b});var t=e(32196),n=e(96540),r=e(16817),s=e(80997),o=e(13544),m=e(40845),i=e(38138),l=e(40276),d=e(83122),c=e(14578),g=e(55852),u=e(27677),E=e(6923);function p({dashboardUID:f,link:D}){const T=(0,m.of)(y),M=a({dashboardUID:f,link:D});return!M||P.length===0?null:n.createElement(i.W,null,n.createElement("div",{className:T.dropdown},n.createElement(l.E,null,M.map((O,S)=>n.createElement(i.W.Item,{url:O.url,target:D.targetBlank?"_blank":void 0,key:`dashlinks-dropdown-item-${O.uid}-${S}`,label:O.title,testId:o.Tp.components.DashboardLinks.link,"aria-label":`${O.title} dashboard`})))))}const b=f=>{const{link:D,linkInfo:T,dashboardUID:M}=f,O=a(f),S=(0,m.of)(y);return D.asDropdown?n.createElement(d.m,{overlay:n.createElement(p,{link:D,dashboardUID:M})},n.createElement(C,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":o.Tp.components.DashboardLinks.dropDown},n.createElement(c.I,{"aria-hidden":!0,name:"bars",className:S.iconMargin}),n.createElement("span",null,T.title))):n.createElement(n.Fragment,null,O.length>0&&O.map((v,x)=>n.createElement(C,{key:`dashlinks-list-item-${v.uid}-${x}`,icon:"apps",variant:"secondary",fill:"outline",href:v.url,target:D.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":o.Tp.components.DashboardLinks.link},v.title)))},a=({link:f,dashboardUID:D})=>{const{tags:T}=f,M=(0,r.A)(()=>h(T),[T]);return M.value?P(D,f,M.value):[]};async function h(f,D={getBackendSrv:u.AI}){return await D.getBackendSrv().search({tag:f,limit:100})}function P(f,D,T,M={getLinkSrv:E.mQ,sanitize:s.aj,sanitizeUrl:s.Jf}){return T.filter(O=>O.uid!==f).map(O=>{const S=O.uid,v=M.sanitize(O.title),x=M.getLinkSrv().getLinkUrl({...D,url:O.url}),A=M.sanitizeUrl(x);return{uid:S,title:v,url:A}})}function y(f){return{iconMargin:(0,t.css)({marginRight:f.spacing(.5)}),dropdown:(0,t.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh",overflowY:"auto"}),button:(0,t.css)({color:f.colors.text.primary}),dashButton:(0,t.css)({fontSize:f.typography.bodySmall.fontSize,paddingLeft:f.spacing(1),paddingRight:f.spacing(1)})}}const C=n.forwardRef(({className:f,...D},T)=>{const M=(0,m.of)(y),O=D.href?g.z9:g.$n;return n.createElement(O,{...D,variant:"secondary",fill:"outline",className:(0,t.cx)(f,M.dashButton),ref:T})});C.displayName="DashboardLinkButton"},57650:(Q,I,e)=>{"use strict";e.d(I,{A:()=>w});var t=e(96540),n=e(97497),r=e(42941),s=e(1173),o=e(52622),m=e(13544),i=e(14110),l=e(96374),d=e(10343),c=e(7788),g=e(2913),u=e(10803),E=e(32196),p=e(69862),b=e(85200),a=e(2514),h=e(72574),P=e(40845),y=e(87978),C=e(24022),f=e(14578);const D=({debugMode:K,index:N,data:L,uiConfig:V,configs:F,onChange:z,toggleShowDebug:Y})=>{const H=(0,P.of)(T),[k,ee]=(0,t.useState)([]),[ie,fe]=(0,t.useState)([]),q=(0,t.useMemo)(()=>F[N],[F,N]);(0,t.useEffect)(()=>{const J=F[N].transformation,G=J.filter?.options?(0,b.Dq)(J.filter):void 0,ne=F.slice(0,N).map(Te=>Te.transformation),te=F.slice(N,N+1).map(Te=>Te.transformation),oe={interpolate:Te=>(0,h.w)().replace(Te)},le=(0,a.m)(ne,L,oe).subscribe(Te=>{G&&(Te=L.filter(he=>G(he))),ee(Te)}),ue=(0,a.m)(ne,L,oe).pipe((0,p.Z)(Te=>(0,a.m)(te,Te,oe))).subscribe(fe);return function(){le.unsubscribe(),ue.unsubscribe()}},[N,L,F]);const Z=(0,t.useMemo)(()=>t.createElement(V.editor,{options:{...V.transformation.defaultOptions,...q.transformation.options},input:k,onChange:J=>{z(N,{...q.transformation,options:J})}}),[V.editor,V.transformation.defaultOptions,q.transformation,k,z,N]);return t.createElement("div",{className:H.editor,"data-testid":m.Tp.components.TransformTab.transformationEditor(V.name)},Z,K&&t.createElement(y._,{title:"Debug transformation",subtitle:V.name,onClose:Y},t.createElement("div",{className:H.debugWrapper,"data-testid":m.Tp.components.TransformTab.transformationEditorDebugger(V.name)},t.createElement("div",{className:H.debug},t.createElement("div",{className:H.debugTitle},"Input data"),t.createElement("div",{className:H.debugJson},t.createElement(C.B,{json:k}))),t.createElement("div",{className:H.debugSeparator},t.createElement(f.I,{name:"arrow-right"})),t.createElement("div",{className:H.debug},t.createElement("div",{className:H.debugTitle},"Output data"),t.createElement("div",{className:H.debugJson},ie&&t.createElement(C.B,{json:ie}))))))},T=K=>({title:(0,E.css)`
      display: flex;
      padding: 4px 8px 4px 8px;
      position: relative;
      height: 35px;
      border-radius: 4px 4px 0 0;
      flex-wrap: nowrap;
      justify-content: space-between;
      align-items: center;
    `,name:(0,E.css)`
      font-weight: ${K.typography.fontWeightMedium};
      color: ${K.colors.primary.text};
    `,iconRow:(0,E.css)`
      display: flex;
    `,icon:(0,E.css)`
      background: transparent;
      border: none;
      box-shadow: none;
      cursor: pointer;
      color: ${K.colors.text.secondary};
      margin-left: ${K.spacing(1)};
      &:hover {
        color: ${K.colors.text};
      }
    `,editor:(0,E.css)``,debugWrapper:(0,E.css)`
      display: flex;
      flex-direction: row;
    `,debugSeparator:(0,E.css)`
      width: 48px;
      min-height: 300px;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-content: center;
      margin: 0 ${K.spacing(.5)};
      color: ${K.colors.primary.text};
    `,debugTitle:(0,E.css)`
      padding: ${K.spacing(1)} ${K.spacing(.25)};
      font-family: ${K.typography.fontFamilyMonospace};
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text};
      border-bottom: 1px solid ${K.colors.border.weak};
      flex-grow: 0;
      flex-shrink: 1;
    `,debug:(0,E.css)`
      margin-top: ${K.spacing(1)};
      padding: 0 ${K.spacing(1,1,1)};
      border: 1px solid ${K.colors.border.weak};
      background: ${K.isLight?K.v1.palette.white:K.v1.palette.gray05};
      border-radius: ${K.shape.radius.default};
      width: 100%;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-self: stretch;
    `,debugJson:(0,E.css)`
      flex-grow: 1;
      height: 100%;
      overflow: hidden;
      padding: ${K.spacing(.5)};
    `});var M=e(22214),O=e(91847);const S=({isOpen:K,onCloseClick:N,transformer:L})=>{const{transformation:{name:V},help:F}=L,z=F||(0,O.$n)(),Y=t.createElement(y._,{title:V,subtitle:"Transformation help",onClose:()=>N(!1)},t.createElement(M.j,{markdown:z,styleOverrides:{borderTop:"2px solid"}}));return K?Y:null};var v=e(88575),x=e(88323),A=e(19743);const R=({index:K,data:N,config:L,onChange:V})=>{const F=(0,P.of)(B),z=(0,t.useMemo)(()=>({context:{data:N.series},showTopic:!0,showFilter:L.topic!==o.QR.Annotations,source:[{value:o.QR.Series,label:"Query results"},{value:o.QR.Annotations,label:"Annotation data"}]}),[N,L.topic]);return t.createElement("div",{className:F.wrapper},t.createElement(v.D,{label:"Apply transformation to"},t.createElement(t.Fragment,null,z.showTopic&&t.createElement(x.l6,{isClearable:!0,options:z.source,value:z.source.find(Y=>Y.value===L.topic),placeholder:z.source[0].label,className:F.padded,onChange:Y=>{V(K,{...L,topic:Y?.value})}}),z.showFilter&&t.createElement(A.x,{value:L.filter,context:z.context,item:{},onChange:Y=>V(K,{...L,filter:Y})}))))},B=K=>{const N=K.shape.radius.default;return{wrapper:(0,E.css)({padding:K.spacing(2),border:`2px solid ${K.colors.background.secondary}`,borderTop:"none",borderRadius:`0 0 ${N} ${N}`,position:"relative",top:"-4px"}),padded:(0,E.css)({marginBottom:K.spacing(1)})}},U=({onRemove:K,index:N,id:L,data:V,configs:F,uiConfig:z,onChange:Y})=>{const[H,k]=(0,r.A)(!1),[ee,ie]=(0,r.A)(!1),[fe,q]=(0,r.A)(!1),Z=!!F[N].transformation.disabled,J=F[N].transformation.topic,G=F[N].transformation.filter!=null||J!=null,ne=G||V.series.length>1||(V.annotations?.length??0)>0,te=(0,t.useCallback)(Te=>{const he=F[Te].transformation;Y(Te,{...he,disabled:he.disabled?void 0:!0})},[Y,F]),oe=(0,t.useCallback)(()=>{let Te={...F[N].transformation};Te.filter?delete Te.filter:Te.filter={id:s.jR.byRefId,options:""},Y(N,Te)},[Y,N,F]),le=(0,t.useCallback)((Te,he,re)=>De=>{let Fe="panel_editor_tabs_transformations_toggle";g.Ay.featureToggles.transformationsRedesign&&(Fe="transformations_redesign_"+Fe),(0,i.rR)(Fe,{action:re?"off":"on",toggleId:he,transformationId:F[N].transformation.id}),Te(De)},[F,N]),ue=()=>t.createElement(t.Fragment,null,z.state&&t.createElement(u.p,{state:z.state}),t.createElement(d.A,{title:"Show transform help",icon:"info-circle",onClick:le(q,"help",fe),active:fe}),ne&&t.createElement(d.A,{title:"Filter",icon:"filter",onClick:le(oe,"filter",G),active:G}),t.createElement(d.A,{title:"Debug",icon:"bug",onClick:le(ie,"debug",ee),active:ee}),t.createElement(d.A,{title:"Disable transformation",icon:Z?"eye-slash":"eye",onClick:le(()=>te(N),"disabled",Z),active:Z,dataTestId:m.Tp.components.Transforms.disableTransformationButton}),t.createElement(d.q,{title:"Remove",icon:"trash-alt",onClick:()=>g.Ay.featureToggles.transformationsRedesign?k(!0):K(N)}),g.Ay.featureToggles.transformationsRedesign&&t.createElement(l.u,{isOpen:H,title:`Delete ${z.name}?`,body:"Note that removing one transformation may break others. If there is only a single transformation, you will go back to the main selection screen.",confirmText:"Delete",onConfirm:()=>{k(!1),K(N)},onDismiss:()=>k(!1)}));return t.createElement(t.Fragment,null,t.createElement(c.u,{id:L,index:N,title:`${N+1} - ${z.name}`,draggable:!0,actions:ue,disabled:Z,expanderMessages:{close:"Collapse transformation row",open:"Expand transformation row"}},G&&t.createElement(R,{index:N,config:F[N].transformation,data:V,onChange:Y}),t.createElement(D,{debugMode:ee,index:N,data:J===o.QR.Annotations?V.annotations??[]:V.series,configs:F,uiConfig:z,onChange:Y,toggleShowDebug:ie})),t.createElement(S,{transformer:z,isOpen:fe,onCloseClick:q}))},w=({data:K,onChange:N,onRemove:L,configs:V})=>t.createElement(t.Fragment,null,V.map((F,z)=>{const Y=n.h.getIfExists(F.transformation.id);return Y?t.createElement(U,{index:z,id:`${F.id}`,key:`${F.id}`,data:K,configs:V,uiConfig:Y,onRemove:L,onChange:N}):null}))},21427:(Q,I,e)=>{"use strict";e.d(I,{R:()=>C});var t=e(32196),n=e(96540),r=e(81010),s=e(18282),o=e(97497),m=e(13544),i=e(40845),l=e(87978),d=e(10354),c=e(15292),g=e(92174),u=e(10860),E=e(29158),p=e(2913),b=e(10803),a=e(94397);const y=[["viewAll","View all"],...Object.entries(a.eJ)];function C(v){const x=(0,i.of)(f),{suffix:A,xforms:R,search:B,onSearchChange:U,onSearchKeyDown:w,showIllustrations:K,onTransformationAdd:N,selectedFilter:L,data:V,onClose:F,onShowIllustrationsChange:z,onSelectedFilterChange:Y}=v,H=(0,n.useCallback)(k=>{k?.click()},[]);return n.createElement(l._,{size:"md",onClose:()=>{F&&F()},title:"Add another transformation"},n.createElement("div",{className:x.searchWrapper},n.createElement(d.p,{"data-testid":m.Tp.components.Transforms.searchInput,className:x.searchInput,value:B??"",placeholder:"Search for transformation",onChange:U,onKeyDown:w,suffix:A,ref:H}),n.createElement("div",{className:x.showImages},n.createElement("span",{className:x.illustationSwitchLabel},"Show images")," ",n.createElement(c.d,{value:K,onChange:()=>z&&z(!K)}))),n.createElement("div",{className:x.filterWrapper},y.map(([k,ee])=>n.createElement(g.m,{key:k,onClick:()=>Y&&Y(k),label:ee,selected:L===k}))),n.createElement(D,{showIllustrations:K,transformations:R,data:V,onClick:k=>{N({value:k})}}))}function f(v){return{showImages:(0,t.css)({flexBasis:"0",display:"flex",gap:"8px",alignItems:"center"}),pickerInformationLine:(0,t.css)({fontSize:"16px",marginBottom:`${v.spacing(2)}`}),pickerInformationLineHighlight:(0,t.css)({verticalAlign:"middle"}),searchWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",columnGap:"27px",rowGap:"16px",width:"100%"}),searchInput:(0,t.css)({flexGrow:"1",width:"initial"}),illustationSwitchLabel:(0,t.css)({whiteSpace:"nowrap"}),filterWrapper:(0,t.css)({padding:`${v.spacing(1)} 0`,display:"flex",flexWrap:"wrap",rowGap:`${v.spacing(1)}`,columnGap:`${v.spacing(.5)}`})}}function D({showIllustrations:v,transformations:x,onClick:A,data:R}){const B=(0,i.of)(T);return n.createElement("div",{className:B.grid},x.map(U=>{let w=r.M.Applicable;U.transformation.isApplicable!==void 0&&(w=U.transformation.isApplicable(R));const K=w>0;let N=null;U.transformation.isApplicableDescription!==void 0&&(typeof U.transformation.isApplicableDescription=="function"?N=U.transformation.isApplicableDescription(R):N=U.transformation.isApplicableDescription);let L=B.newCard;return K||(L=(0,t.cx)(B.newCard,B.cardDisabled)),n.createElement(u.Z,{className:L,"data-testid":m.Tp.components.TransformTab.newTransform(U.name),onClick:()=>A(U.id),key:U.id},n.createElement(u.Z.Heading,{className:B.heading},n.createElement("span",null,U.name),n.createElement("span",{className:B.pluginStateInfoWrapper},n.createElement(b.p,{state:U.state}))),n.createElement(u.Z.Description,{className:B.description},n.createElement("span",null,S(U.id)),v&&n.createElement("span",null,n.createElement("img",{className:B.image,src:M(U.id,!K),alt:U.name})),!K&&N!==null&&n.createElement(E.K,{className:B.cardApplicableInfo,name:"info-circle",tooltip:N})))}))}function T(v){return{heading:(0,t.css)`
            font-weight: 400,
            > button: {
                width: '100%',
                display: 'flex',
                justify-content: 'space-between',
                align-items: 'center',
                flex-wrap: 'no-wrap',
        },`,description:(0,t.css)({fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between"}),image:(0,t.css)({display:"block",maxEidth:"100%`",marginTop:`${v.spacing(2)}`}),grid:(0,t.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gridAutoRows:"1fr",gap:`${v.spacing(2)} ${v.spacing(1)}`,width:"100%"}),cardDisabled:(0,t.css)({backgroundColor:"rgb(204, 204, 220, 0.045)",color:`${v.colors.text.disabled} !important`}),cardApplicableInfo:(0,t.css)({position:"absolute",bottom:`${v.spacing(1)}`,right:`${v.spacing(1)}`}),newCard:(0,t.css)({gridTemplateRows:"min-content 0 1fr 0"}),pluginStateInfoWrapper:(0,t.css)({marginLeft:"5px"})}}const M=(v,x)=>{let A=null;return x?A="disabled":A=p.Ay.theme2.isDark?"dark":"light",`public/img/transformations/${A}/${v}.svg`},O={[s.F.concatenate]:"Combine all fields into a single frame.",[s.F.configFromData]:"Set unit, min, max and more.",[s.F.fieldLookup]:"Use a field value to lookup countries, states, or airports.",[s.F.filterFieldsByName]:"Remove parts of the query results using a regex pattern.",[s.F.filterByRefId]:"Remove rows from the data based on origin query",[s.F.filterByValue]:"Remove rows from the query results using user-defined filters.",[s.F.groupBy]:"Group data by a field value and create aggregate data.",[s.F.groupingToMatrix]:"Summarize and reorganize data based on three fields.",[s.F.joinByField]:"Combine rows from 2+ tables, based on a related field.",[s.F.labelsToFields]:"Group series by time and return labels or tags as fields.",[s.F.merge]:"Merge multiple series. Values will be combined into one row.",[s.F.organize]:"Re-order, hide, or rename fields.",[s.F.partitionByValues]:"Split a one-frame dataset into multiple series.",[s.F.prepareTimeSeries]:"Stretch data frames from the wide format into the long format.",[s.F.reduce]:"Reduce all rows or data points to a single value (ex. max, mean).",[s.F.renameByRegex]:"Rename parts of the query results using a regular expression and replacement pattern.",[s.F.seriesToRows]:"Merge multiple series. Return time, metric and values as a row."},S=v=>O[v]||o.h.getIfExists(v)?.description||""},66879:(Q,I,e)=>{"use strict";e.d(I,{o:()=>N,e:()=>w});var t=e(96540),n=e(55244),r=e(97497),s=e(13544),o=e(14110),m=e(29158),i=e(55852),l=e(96374),d=e(19727),c=e(40276),g=e(66864),u=e(40845),E=e(2913),p=e(79280),b=e(12131),a=e(32696);function h({message:L}){const V=(0,t.useCallback)(()=>{b.Ny.partial({tab:a.M8.Query})},[]);return t.createElement(g.PE,{justify:"center",style:{marginTop:"100px"}},t.createElement(g.gW,{spacing:"md"},t.createElement("h2",null,L),t.createElement("div",null,t.createElement(i.$n,{size:"md",variant:"secondary",icon:"arrow-left",onClick:V},"Go back to Queries"))))}var P=e(57650),y=e(32196),C=e(87885),f=e(42418),D=e(10354),T=e(10860),M=e(61680);const O={[C.f.Transformations]:"https://grafana.com/docs/grafana/latest/panels/transformations",[C.f.FieldConfig]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/",[C.f.FieldConfigOverrides]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/#override-a-field"},S=L=>O[L];var v=e(10803);const x="dashboard.components.TransformationEditor.featureInfoBox.isDismissed";function A(L){const{noTransforms:V,search:F,xforms:z,onSearchChange:Y,onSearchKeyDown:H,onTransformationAdd:k,suffix:ee}=L;return t.createElement(g.gW,null,V&&t.createElement(g.mc,{grow:1},t.createElement(M.b,{storageKey:x,defaultValue:!1},(ie,fe)=>ie?null:t.createElement(f.F,{title:"Transformations",severity:"info",onRemove:()=>{fe(!0)}},t.createElement("p",null,"Transformations allow you to join, calculate, re-order, hide, and rename your query results before they are visualized. ",t.createElement("br",null),"Many transforms are not suitable if you're using the Graph visualization, as it currently only supports time series data. ",t.createElement("br",null),"It can help to switch to the Table visualization to understand what a transformation is doing."," "),t.createElement("a",{href:S(C.f.Transformations),className:"external-link",target:"_blank",rel:"noreferrer"},"Read more")))),t.createElement(D.p,{"data-testid":s.Tp.components.Transforms.searchInput,value:F??"",autoFocus:!V,placeholder:"Search for transformation",onChange:Y,onKeyDown:H,suffix:ee}),z.map(ie=>t.createElement(R,{key:ie.name,transform:ie,onClick:()=>{k({value:ie.id})}})))}function R({transform:L,onClick:V}){const F=(0,u.of)(B);return t.createElement(T.Z,{className:F.card,"data-testid":s.Tp.components.TransformTab.newTransform(L.name),onClick:V},t.createElement(T.Z.Heading,null,L.name),t.createElement(T.Z.Description,null,L.description),L.state&&t.createElement(T.Z.Tags,null,t.createElement(v.p,{state:L.state})))}function B(L){return{card:(0,y.css)({margin:"0",padding:`${L.spacing(1)}`})}}var U=e(21427);const w="viewAll";class K extends t.PureComponent{constructor(V){super(V),this.onSearchChange=Y=>{this.setState({search:Y.target.value})},this.onSearchKeyDown=Y=>{if(Y.key==="Enter"){const{search:H}=this.state;if(H){const k=H.toLowerCase(),ee=r.h.list().filter(ie=>(ie.name+ie.description).toLowerCase().indexOf(k)>=0);ee.length>0&&this.onTransformationAdd({value:ee[0].id})}}else Y.keyCode===27&&(this.setState({search:"",showPicker:!1}),Y.stopPropagation())},this.getTransformationNextId=Y=>{const{transformations:H}=this.state;let k=0;const ee=H.filter(ie=>ie.id.startsWith(Y)).map(ie=>ie.id);return ee.length!==0&&(k=Math.max(...ee.map(ie=>parseInt(ie.match(/\d+/)[0],10)))+1),`${Y}-${k}`},this.onTransformationAdd=Y=>{let H="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(H="transformations_redesign_"+H),(0,o.rR)(H,{action:"add",transformationId:Y.value});const{transformations:k}=this.state,ee=this.getTransformationNextId(Y.value);this.setState({search:"",showPicker:!1}),this.onChange([...k,{id:ee,transformation:{id:Y.value,options:{}}}])},this.onTransformationChange=(Y,H)=>{const{transformations:k}=this.state,ee=Array.from(k);let ie="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(ie="transformations_redesign_"+ie),(0,o.rR)(ie,{action:"change",transformationId:ee[Y].transformation.id}),ee[Y].transformation=H,this.onChange(ee)},this.onTransformationRemove=Y=>{const{transformations:H}=this.state,k=Array.from(H);let ee="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(ee="transformations_redesign_"+ee),(0,o.rR)(ee,{action:"remove",transformationId:k[Y].transformation.id}),k.splice(Y,1),this.onChange(k)},this.onTransformationRemoveAll=()=>{this.onChange([]),this.setState({showRemoveAllModal:!1})},this.onDragEnd=Y=>{const{transformations:H}=this.state;if(!Y||!Y.destination)return;const k=Y.source.index,ee=Y.destination.index;if(k===ee)return;const ie=Array.from(H),[fe]=ie.splice(k,1);ie.splice(ee,0,fe),this.onChange(ie)},this.renderEmptyMessage=()=>t.createElement(p.p,{onShowPicker:()=>{this.setState({showPicker:!0})}}),this.renderTransformationEditors=()=>{const{data:Y,transformations:H}=this.state;return t.createElement(n.JY,{onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},k=>t.createElement("div",{ref:k.innerRef,...k.droppableProps},t.createElement(P.A,{configs:H,data:Y,onRemove:this.onTransformationRemove,onChange:this.onTransformationChange}),k.placeholder)))};const F=V.panel.transformations||[],z=this.buildTransformationIds(F);this.state={transformations:F.map((Y,H)=>({transformation:Y,id:z[H]})),data:{series:[]},search:"",selectedFilter:w,showIllustrations:!0}}buildTransformationIds(V){const F={},z=[];for(let Y=0;Y<V.length;Y++){const H=V[Y];F[H.id]===void 0?F[H.id]=0:F[H.id]+=1,z.push(`${V[Y].id}-${F[V[Y].id]}`)}return z}componentDidMount(){this.subscription=this.props.panel.getQueryRunner().getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:V=>this.setState({data:V})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(V,F){if(E.Ay.featureToggles.transformationsRedesign){const Y=!(F.transformations.length>0)||F.showPicker,k=!(this.state.transformations.length>0)||this.state.showPicker;if(Y!==k){const ee=Math.random()/2;this.setState({scrollTop:k?ee:Number.MAX_SAFE_INTEGER})}}}onChange(V){this.setState({transformations:V}),this.props.panel.setTransformations(V.map(F=>F.transformation))}renderTransformsPicker(){let{showPicker:V}=this.state;const{transformations:F,search:z}=this.state,{transformationsRedesign:Y}=E.Ay.featureToggles,H=!F?.length,k=F.length>0;let ee=null,ie=r.h.list().sort((J,G)=>J.name>G.name?1:G.name>J.name?-1:0);if(!Y&&H&&(V=!0),this.state.selectedFilter!==w&&(ie=ie.filter(J=>J.categories&&this.state.selectedFilter&&J.categories.has(this.state.selectedFilter))),z){const J=z.toLowerCase(),G=ie.filter(ne=>(ne.name+ne.description).toLowerCase().indexOf(J)>=0);ee=t.createElement(t.Fragment,null,G.length," / ",ie.length," \xA0\xA0",t.createElement(m.K,{name:"times",onClick:()=>{this.setState({search:""})},tooltip:"Clear search"})),ie=G}!ee&&V&&!H&&(ee=t.createElement(m.K,{name:"times",onClick:()=>{this.setState({showPicker:!1})},tooltip:"Close picker"}));let fe=null,q=null;Y?(fe=t.createElement(U.R,{noTransforms:H,search:z,suffix:ee,xforms:ie,onClose:()=>this.setState({showPicker:!1}),onSelectedFilterChange:J=>this.setState({selectedFilter:J}),onShowIllustrationsChange:J=>this.setState({showIllustrations:J}),onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd,data:this.state.data.series,selectedFilter:this.state.selectedFilter,showIllustrations:this.state.showIllustrations}),q=t.createElement(t.Fragment,null,t.createElement(i.$n,{icon:"times",variant:"secondary",onClick:()=>this.setState({showRemoveAllModal:!0}),style:{marginLeft:this.props.theme.spacing.md}},"Delete all transformations"),t.createElement(l.u,{isOpen:!!this.state.showRemoveAllModal,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>this.onTransformationRemoveAll(),onDismiss:()=>this.setState({showRemoveAllModal:!1})}))):fe=t.createElement(A,{noTransforms:H,search:z,suffix:ee,xforms:ie,onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd});const Z=t.createElement(d.e,null,t.createElement(i.$n,{icon:"plus",variant:"secondary",onClick:()=>{this.setState({showPicker:!0})},"data-testid":s.Tp.components.Transforms.addTransformationButton},"Add another transformation"),q);return t.createElement(t.Fragment,null,V&&fe,Y&&k&&Z||!Y&&!V&&k&&Z)}render(){const{panel:{alert:V}}=this.props,{transformations:F}=this.state,z=F.length>0;if(V){const Y=z?"Transformations can't be used on a panel with alerts":"Transformations can't be used on a panel with existing alerts";return t.createElement(h,{message:Y})}return t.createElement(c.E,{scrollTop:this.state.scrollTop,autoHeightMin:"100%"},t.createElement(g.mc,{padding:"lg"},t.createElement("div",{"data-testid":s.Tp.components.TransformTab.content},!z&&E.Ay.featureToggles.transformationsRedesign&&this.renderEmptyMessage(),z&&this.renderTransformationEditors(),this.renderTransformsPicker())))}}const N=(0,u.SL)(K)},68064:(Q,I,e)=>{"use strict";e.d(I,{A:()=>P});var t=e(32196),n=e(96540),r=e(13544),s=e(12131),o=e(32264),m=e(40845),i=e(67061),l=e(90613),d=e(94753),c=e(55852),g=e(44836),u=e(36974),E=e(45199),p=e(7758),b=e(31678),a=e(28601);const P=({dashboard:C,canCreate:f})=>{const D=(0,m.of)(y),T=(0,b.useDispatch)(),M=(0,b.useSelector)(v=>v.dashboard.initialDatasource),O=()=>{let v;C instanceof E.H$?v=C.onCreateNewPanel():(v=(0,u.OK)(C,M),T((0,a.Ub)(void 0))),s.Ny.partial({editPanel:v,firstPanel:!0}),p.c.emptyDashboardButtonClicked({item:"add_visualization"})},S=()=>{p.c.emptyDashboardButtonClicked({item:"import_from_library"}),C instanceof E.H$?C.onShowAddLibraryPanelDrawer():(0,u.s3)(C)};return n.createElement(i.B,{alignItems:"center",justifyContent:"center"},n.createElement("div",{className:D.wrapper},n.createElement(i.B,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column"},n.createElement(l.a,{borderColor:"strong",borderStyle:"dashed",padding:4},n.createElement(i.B,{direction:"column",alignItems:"center",gap:2},n.createElement(d.E,{element:"h1",textAlignment:"center",weight:"medium"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-visualization-header"},"Start your new dashboard by adding a visualization")),n.createElement(l.a,{marginBottom:2,paddingX:4},n.createElement(d.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-visualization-body"},"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."))),n.createElement(c.$n,{size:"lg",icon:"plus","data-testid":r.Tp.pages.AddDashboard.itemButton("Create new panel button"),onClick:O,disabled:!f},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-visualization-button"},"Add visualization")))),n.createElement(i.B,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4},o.$.featureToggles.vizAndWidgetSplit&&n.createElement(l.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(i.B,{direction:"column",alignItems:"center",gap:1},n.createElement(d.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-widget-header"},"Add a widget")),n.createElement(l.a,{marginBottom:2},n.createElement(d.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-widget-body"},"Create lists, markdowns and other widgets"))),n.createElement(c.$n,{icon:"plus",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Create new widget button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"add_widget"}),s.Ny.partial({addWidget:!0})},disabled:!f},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-widget-button"},"Add widget")))),n.createElement(l.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(i.B,{direction:"column",alignItems:"center",gap:1},n.createElement(d.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-library-panel-header"},"Import panel")),n.createElement(l.a,{marginBottom:2},n.createElement(d.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-library-panel-body"},"Add visualizations that are shared with other dashboards."))),n.createElement(c.$n,{icon:"plus",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:S,disabled:!f},n.createElement(g.x6,{i18nKey:"dashboard.empty.add-library-panel-button"},"Add library panel")))),n.createElement(l.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(i.B,{direction:"column",alignItems:"center",gap:1},n.createElement(d.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(g.x6,{i18nKey:"dashboard.empty.import-a-dashboard-header"},"Import a dashboard")),n.createElement(l.a,{marginBottom:2},n.createElement(d.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(g.x6,{i18nKey:"dashboard.empty.import-a-dashboard-body"},"Import dashboards from files or",n.createElement("a",{href:"https://grafana.com/grafana/dashboards/"},"grafana.com"),"."))),n.createElement(c.$n,{icon:"upload",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Import dashboard button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"import_dashboard"}),(0,u.VF)()},disabled:!f},n.createElement(g.x6,{i18nKey:"dashboard.empty.import-dashboard-button"},"Import dashboard"))))))))};function y(C){return{wrapper:(0,t.css)({label:"dashboard-empty-wrapper",flexDirection:"column",maxWidth:"890px",gap:C.spacing.gridSize*4,paddingTop:C.spacing(2),[C.breakpoints.up("sm")]:{paddingTop:C.spacing(12)}})}}},2038:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>g});var t=e(96540),n=e(12131),r=e(32196),s=e(40845),o=e(27746),m=e(14578),i=e(56034),l=e(16797);const d=({notice:u,onClick:E})=>{const p=(0,s.of)(c),b=u.severity==="error"||u.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return u.inspect&&E?t.createElement(o.I,{className:p.notice,icon:b,iconSize:"md",key:u.severity,tooltip:u.text,onClick:a=>E(a,u.inspect)}):u.link?t.createElement("a",{className:p.notice,"aria-label":u.text,href:u.link,target:"_blank",rel:"noreferrer"},t.createElement(m.I,{name:b,style:{marginRight:"8px"},size:"md"})):t.createElement(i.m,{key:u.severity,content:u.text},t.createElement("span",{className:p.iconTooltip},t.createElement(m.I,{name:b,size:"md"})))},c=u=>({notice:(0,r.css)({background:"inherit",border:"none",borderRadius:u.shape.radius.default}),iconTooltip:(0,r.css)({color:`${u.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${u.shape.radius.default}`,padding:`${u.spacing(0,1)}`,height:` ${u.spacing(u.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,l.getFocusStyles)(u),zIndex:1},"&: focus:not(:focus-visible)":(0,l.getMouseFocusStyles)(u),"&:hover ":{boxShadow:`${u.shadows.z1}`,color:`${u.colors.text.primary}`,background:`${u.colors.background.secondary}`}})}),g=({frames:u,panelId:E})=>{const p=(0,t.useCallback)((a,h)=>{a.stopPropagation(),n.Ny.partial({inspect:E,inspectTab:h})},[E]),b={};for(const a of u)if(!(!a.meta||!a.meta.notices))for(const h of a.meta.notices)b[h.severity]=h;return t.createElement(t.Fragment,null,Object.values(b).map(a=>t.createElement(d,{notice:a,onClick:p,key:a.severity})))}},91126:(Q,I,e)=>{"use strict";e.d(I,{M:()=>c});var t=e(37055),n=e(58972),r=e(1173),s=e(11261),o=e(28240),m=e(85200),i=e(88895);const l="hideSeriesFrom",d=(0,t.ZW)(l);function c(h,P,y,C){const{overrides:f}=y,D=h,T=f.findIndex(d);if(T<0){if(P===i.B.ToggleSelection){const A=g([D,...a(f,C)]);return{...y,overrides:[...y.overrides,A]}}const v=b(C,D),x=g(v);return{...y,overrides:[...y.overrides,x]}}const M=Array.from(f),[O]=M.splice(T,1);if(P===i.B.ToggleSelection){let v=E(O);const x=a(M,C);if(x.length>0&&(v=v.filter(R=>x.indexOf(R)<0)),v[0]===D&&v.length===1)return{...y,overrides:M};const A=g([D,...x]);return{...y,overrides:[...M,A]}}const S=u(O,D);return p(S,C)?{...y,overrides:M}:{...y,overrides:[...M,S]}}function g(h,P=n.PP.exclude,y){return y=y??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:l,matcher:{id:r.Ct.byNames,options:{mode:P,names:h,prefix:P===n.PP.exclude?"All except:":void 0,readOnly:!0}},properties:[{...y,value:{viz:!0,legend:!1,tooltip:!1}}]}}const u=(h,P,y=n.PP.exclude)=>{const C=h.properties.find(T=>T.id==="custom.hideFrom"),f=E(h),D=f.findIndex(T=>T===P);return D<0?f.push(P):f.splice(D,1),g(f,y,C)},E=h=>{const P=h.matcher.options?.names;return Array.isArray(P)?[...P]:[]},p=(h,P)=>E(h).length===b(P).length,b=(h,P)=>{const y=new Set;for(const C of h)for(const f of C.fields){if(f.type!==s.PU.number)continue;const D=(0,o.Ct)(f,C,h);D!==P&&y.add(D)}return Array.from(y)},a=(h,P)=>{let y=[];for(const C of h){const f=C.properties.find(D=>D.id==="custom.hideFrom");if(f!==void 0&&f.value?.legend===!0){const T=m.sJ.get(C.matcher.id).get(C.matcher.options);for(const M of P)for(const O of M.fields){if(O.type!==s.PU.number)continue;const S=(0,o.Ct)(O,M,P);T(O,M,P)&&y.push(S)}}}return y}},61582:(Q,I,e)=>{"use strict";e.d(I,{a:()=>l});var t=e(49426),n=e(47232),r=e(85858);const s=100;class o{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.t(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const c=Date.now();this.budget=(c-this.lastUpdate)/s;const g=this.ok.getValue(),u=this.budget<=this.threshold;if(g!==u&&this.ok.next(u),this.lastUpdate=c,this.isLive&&this.ok.getValue()&&this.timeRange){let E;for(const p of this.listeners){if(!p.panel.props.isInView)continue;if(c-p.last>=p.intervalMs){if(!E){const{raw:a}=this.timeRange;E={raw:a,from:(0,n.KQ)(c-this.liveTimeOffset),to:(0,n.KQ)(c)}}p.panel.liveTimeChanged(E),p.last=c}}}}}setLiveTimeRange(c){if(this.timeRange=c,this.isLive=c?.raw?.to==="now",this.isLive){const g=r.parse(c.raw.from,!1)?.valueOf(),u=r.parse(c.raw.to,!0)?.valueOf();this.liveTimeOffset=u-g;for(const E of this.listeners)E.intervalMs=i(this.liveTimeOffset,E.panel.props.width)}}listen(c){this.listeners.push({last:this.lastUpdate,panel:c,intervalMs:i(6e4,c.props.width)})}remove(c){this.listeners=this.listeners.filter(g=>g.panel!==c)}updateInterval(c){if(!(!this.timeRange||!this.isLive)){for(const g of this.listeners)if(g.panel===c){g.intervalMs=i(this.liveTimeOffset,g.panel.props.width);return}}}}const m=5*60*1e3;function i(d,c){const g=Math.ceil(d/c/100)*100;return g>m?m:g}const l=new o;setInterval(l.measure,s)},17493:(Q,I,e)=>{"use strict";e.d(I,{Fu:()=>y,np:()=>C});var t=e(34796),n=e.n(t),r=e(2543),s=e.n(r),o=e(95093),m=e.n(o),i=e(26272),l=e(85858),d=e(17172),c=e(12131),g=e(27677),u=e(62301),E=e(68576),p=e(72255),b=e(31193),a=e(10096),h=e(14792),P=e(69064);class y{constructor(){}_dashboardLoadFailed(T,M){return M=M||!1,{meta:{canStar:!1,isSnapshot:M,canDelete:!1,canSave:!1,canEdit:!1,canShare:!1,dashboardNotFound:!0},dashboard:{title:T,uid:T,schemaVersion:0}}}loadDashboard(T,M,O){const S=(0,p.sP)();let v;if(T==="script"&&M)v=this._loadScriptedDashboard(M);else if(T==="snapshot"&&M)v=(0,P.s)().getSnapshot(M).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(T==="ds"&&M)v=this._loadFromDatasource(M);else if(T==="public"&&O)v=g.IB.getPublicDashboardByUid(O).then(x=>x).catch(x=>{const A=x.data.statusCode===403&&x.data.messageId==="publicdashboards.notEnabled",R=x.data.statusCode===404&&x.data.messageId==="publicdashboards.notFound",B=x.data.statusCode===404&&x.data.messageId==="publicdashboards.dashboardNotFound",U=this._dashboardLoadFailed(A?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...U,meta:{...U.meta,publicDashboardEnabled:R?void 0:!A,dashboardNotFound:R||B}}});else if(O){const x=S.getFromCache(O);if(x)return Promise.resolve(x);v=g.IB.getDashboardByUid(O).then(A=>{if(A.meta.isFolder)throw a.lE.emit(i.r1.alertError,["Dashboard not found"]),new Error("Dashboard not found");return A}).catch(()=>this._dashboardLoadFailed("Not found",!0))}else throw new Error("Dashboard uid or slug required");return v.then(x=>(x.meta.dashboardNotFound!==!0&&u.A.addDashboardImpression(x.dashboard.uid),x)),v}_loadScriptedDashboard(T){const M="public/dashboards/"+T.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,d.AI)().get(M).then(this._executeScript.bind(this)).then(O=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:O.data}),O=>(console.error("Script dashboard error "+O),a.lE.emit(i.r1.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(T){const M=await(0,b.tR)().get(T);if(!M)return Promise.reject("can not find datasource: "+T);const O=new URLSearchParams(window.location.search),S=O.get("path");if(!S)return Promise.reject("expecting path parameter");const v={};return O.forEach((x,A)=>{v[A]=x}),(0,d.AI)().get(`/api/datasources/uid/${M.uid}/resources/${S}`,v).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x}))}_executeScript(T){const M={dashboardSrv:(0,h.UA)(),datasourceSrv:(0,b.tR)()},S=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",T)(c.Ny.getSearchObject(),E.A,l,s(),m(),window,document,n(),n(),M);return(0,r.isFunction)(S)?new Promise(v=>{S(x=>{v({data:x})})}):{data:S}}}let C=new y;const f=D=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},14792:(Q,I,e)=>{"use strict";e.d(I,{UA:()=>E});var t=e(75505),n=e(26272),r=e(28138),s=e(44836),o=e(27677),m=e(11230),i=e(28444),l=e(98365),d=e(19752);class c{constructor(){this.onRemovePanel=b=>{const a=this.getCurrent();a&&(0,d.FC)(a,a.getPanelById(b),!0)},r.l.subscribe(i.Vz,b=>this.onRemovePanel(b.payload))}create(b,a){return new l.G(b,a)}setCurrent(b){this.dashboard=b}getCurrent(){return this.dashboard}saveJSONDashboard(b){const a=JSON.parse(b);return(0,m.kV)({dashboard:a,folderUid:this.dashboard?.meta.folderUid||a.folderUid})}saveDashboard(b,a){return(0,t.s)((0,o.AI)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...b,dashboard:b.dashboard.getSaveModelClone()},...a}))}starDashboard(b,a){const h=(0,o.AI)(),P={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+b,method:a?"DELETE":"POST"};return h.request(P).then(()=>{const y=!a;this.dashboard?.uid===b&&(this.dashboard.meta.isStarred=y);const C=y?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return r.l.emit(n.r1.alertSuccess,[C]),y})}}let g;function u(p){g=p}function E(){return g||(g=new c),g}},69064:(Q,I,e)=>{"use strict";e.d(I,{s:()=>l});var t=e(75505),n=e(81160),r=e(17172),s=e(32264),o=e(10096);const m={create:d=>(0,r.AI)().post("/api/snapshots",d),getSnapshots:()=>(0,r.AI)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,r.AI)().get("/api/snapshot/shared-options"),deleteSnapshot:d=>(0,r.AI)().delete("/api/snapshots/"+d),getSnapshot:async d=>{const c=await(0,r.AI)().get("/api/snapshots/"+d);return c.meta.canShare=!1,c}};class i{constructor(){this.apiVersion="dashboardsnapshot.grafana.app/v0alpha1",this.url=`/apis/${this.apiVersion}/namespaces/${s.$.namespace}/dashboardsnapshots`}async create(c){return(0,r.AI)().post(this.url+"/create",c)}async getSnapshots(){return(await(0,r.AI)().get(this.url)).items.map(g=>({key:g.metadata.name,name:g.spec.title,external:g.spec.externalUrl!=null,externalUrl:g.spec.externalUrl}))}deleteSnapshot(c){return(0,r.AI)().delete(this.url+"/"+c)}async getSharingOptions(){return(0,r.AI)().get("/api/snapshot/shared-options")}async getSnapshot(c){const g={};if(!o.TP.isSignedIn){alert("TODO... need a barer token for anonymous use case");const u=`??? TODO, get anon token for snapshots (${o.TP.user?.name}) ???`;g.Authorization=`Bearer ${u}`}return(0,t.s)((0,r.AI)().fetch({url:this.url+"/"+c+"/body",method:"GET",headers:g}).pipe((0,n.T)(u=>({dashboard:u.data.dashboard,meta:{isSnapshot:!0,canSave:!1,canEdit:!1,canAdmin:!1,canStar:!1,canShare:!1,canDelete:!1,isFolder:!1,provisioned:!1}}))))}}function l(){return s.$.featureToggles.kubernetesSnapshots?new i:m}},74856:(Q,I,e)=>{"use strict";e.d(I,{jG:()=>f});var t=e(2543),n=e(47232),r=e(43127),s=e(65879),o=e(26272),m=e(85858),i=e(12131),l=e(86849),d=e(76412),c=e(28138),g=e(2913),u=e(16233),E=e(80582),p=e(21380),b=e(28444),a=e(11134);function h({urlRefresh:D,currentRefresh:T,isAllowedIntervalFn:M,minRefreshInterval:O,refreshIntervals:S=a.cb}){if(!D)return T;const v=M(D),x=S.find(A=>A===D);if(!v||!x){const A=O?S.find(B=>B===O):void 0,R=S?.length?S[0]:void 0;return A??R??T}return D||T}class P{constructor(T){this.contextSrv=T,this.timeRangeForUrl=()=>{const M=this.timeRange().raw;return(0,n.Ar)(M.from)&&(M.from=M.from.valueOf().toString()),(0,n.Ar)(M.to)&&(M.to=M.to.valueOf().toString()),M},this.time=(0,r.E2)().raw,this.timeAtLoad=(0,r.E2)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),c.A.subscribe(b.U0,M=>{this.zoomOut(M.payload.scale,M.payload.updateUrl)}),c.A.subscribe(b.Io,M=>{this.shiftTime(M.payload.direction,M.payload.updateUrl)}),c.A.subscribe(b.Rh,M=>{this.makeAbsoluteTime(M.payload.updateUrl)}),c.A.subscribe(b.Bt,()=>{this.copyTimeRangeToClipboard()}),c.A.subscribe(b.VZ,M=>{this.pasteTimeRangeFromClipboard(M.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(T){this.timeModel=T,this.time=T.time,this.refresh=T.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(T){return this.contextSrv.getValidIntervals(T)}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.KQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.KQ)(this.time.to).utc())}parseUrlParam(T){if(T.indexOf("now")!==-1)return T;if(T.length===8){const M=(0,n.yT)(T,"YYYYMMDD");if(M.isValid())return M}else if(T.length===15){const M=(0,n.yT)(T,"YYYYMMDDTHHmmss");if(M.isValid())return M}if(!isNaN(Number(T))){const M=parseInt(T,10);return(0,n.yT)(M)}return null}getTimeWindow(T,M){const O=parseInt(T,10);let S;return M.match(/^\d+$/)&&parseInt(M,10)?S=parseInt(M,10):S=s.intervalToMs(M),{from:(0,n.yT)(O-S/2),to:(0,n.yT)(O+S/2)}}initTimeFromUrl(){if(g.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const T=i.Ny.getSearch();T.get("time")&&T.get("time.window")&&(this.time=this.getTimeWindow(T.get("time"),T.get("time.window"))),T.get("from")&&(this.time.from=this.parseUrlParam(T.get("from"))||this.time.from),T.get("to")&&(this.time.to=this.parseUrlParam(T.get("to"))||this.time.to),T.get("to")&&T.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=void 0)),this.refresh=h({urlRefresh:T.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:g.config.minRefreshInterval})}updateTimeRangeFromUrl(){const T=i.Ny.getSearch();if(T.get("left"))return;const M=this.timeRangeForUrl(),O=T.get("from"),S=T.get("to");O&&S?(O!==M.from||S!==M.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(T){this.timeModel&&(this.timeModel.refresh=T),this.stopAutoRefresh();const M=i.Ny.getSearchObject();if(!T){M.refresh&&i.Ny.partial({refresh:null},!0);return}let O=T,S=60*1e3;T===u.SM?S=this.getAutoRefreshInteval().intervalMs:(O=this.contextSrv.getValidInterval(T),S=s.intervalToMs(O)),this.refreshMS=S,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.refreshTimeModel()},S),M.refresh!==O&&i.Ny.partial({refresh:O},!0)}getAutoRefreshInteval(){const T=window?.innerWidth??2e3;return s.calculateInterval(this.timeRange(),T,g.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(T){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(T),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},T)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(T,M=!0){if((0,t.extend)(this.time,T),(0,n.Ar)(T.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh("")):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),M===!0){const O=this.timeRangeForUrl(),S=i.Ny.getSearchObject();if(S.from===O.from.toString()&&S.to===O.to.toString())return;S.from=O.from.toString(),S.to=O.to.toString(),i.Ny.partial(S)}this.timeModel?.refresh===u.SM&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(u.SM),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?l.jh.getTimeRange(window.__grafanaSceneContext).state.value:(0,p.z)(this.time,this.timeModel)}zoomOut(T,M=!0){const O=this.timeRange(),{from:S,to:v}=(0,E.Zk)(O,T);this.setTime({from:(0,n.yT)(S),to:(0,n.yT)(v)},M)}shiftTime(T,M=!0){const O=this.timeRange(),{from:S,to:v}=(0,E.Wb)(T,O);this.setTime({from:(0,n.yT)(S),to:(0,n.yT)(v)},M)}makeAbsoluteTime(T){const{from:M,to:O}=this.timeRange();this.setTime({from:M,to:O},T)}copyTimeRangeToClipboard(){const{raw:T}=this.timeRange();navigator.clipboard.writeText(JSON.stringify({from:T.from,to:T.to})),c.A.emit(o.r1.alertSuccess,[(0,d.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}async pasteTimeRangeFromClipboard(T=!0){const{range:M,isError:O}=await(0,E.zG)();if(O===!0){c.A.emit(o.r1.alertError,[(0,d.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,d.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:M})]);return}const{from:S,to:v}=M;this.setTime({from:S,to:v},T)}isRefreshOutsideThreshold(T,M=.05){const O=this.timeRange();if(m.isMathString(O.raw.from)){const S=O.to.diff(O.from),v=Date.now()-T,x=S*M;return v>=x}return!1}}let y;function C(D){y=D}function f(){return y||(y=new P(u.TP)),y}},79056:(Q,I,e)=>{"use strict";e.d(I,{O2:()=>K,SW:()=>N,og:()=>H});var t=e(2543),n=e(69550),r=e(92041),s=e(22391),o=e(76885),m=e(6709),i=e(25019),l=e(47737),d=e(1173),c=e(11261),g=e(6829),u=e(58140),E=e(19347),p=e(52622),b=e(77659),a=e(33919),h=e(2913),P=e(15054);function y(G){return Array.from(new Array(G+1),(ne,te)=>te).filter(ne=>G%ne===0)}var C=e(68576),f=e(31193),D=e(24240),T=e(86886),M=e(14678),O=e(14738),S=e(36373),v=e(77789),x=e(25640);function A(G,ne){const te=[];if(G?.statistics&&G?.statistics.length){G.statistic=G.statistics[0];for(const oe of G.statistics.splice(1))te.push({...G,statistic:oe})}for(const oe of te)oe.refId=(0,v.M)(ne),delete oe.statistics,ne.push(oe);return delete G.statistics,te}function R(G){const ne=[];if(G&&"statistics"in G&&G?.statistics?.length){for(const te of G.statistics.splice(1)){const{statistics:oe,name:le,...ue}=G;ne.push({...ue,statistic:te,name:`${le} - ${te}`})}G.statistic=G.statistics[0],ne.length!==0&&(G.name=`${G.name} - ${G.statistic}`),delete G.statistics}return ne}function B(G){G.hasOwnProperty("metricQueryType")||(G.metricQueryType=x.d$.Search),G.hasOwnProperty("metricEditorMode")||(G.metricQueryType===x.d$.Query?G.metricEditorMode=x.Rx.Code:G.metricEditorMode=G.expression?x.Rx.Code:x.Rx.Builder)}var U=e(80484),w=e(84423);n.D.setInit(a.H),n.G.setInit(a.u);const K=39;class N{constructor(ne){this.dashboard=ne,(0,E.l)()||(0,E.h)(new f.xq)}updateSchema(ne){let te,oe,le,ue;const Te=this.dashboard.schemaVersion,he=[];if(this.dashboard.schemaVersion=K,Te!==this.dashboard.schemaVersion){if(Te<2&&(ne.services&&ne.services.filter&&(this.dashboard.time=ne.services.filter.time,this.dashboard.templating.list=ne.services.filter.list||[]),he.push(re=>(re.type==="graphite"&&(re.type="graph"),re.type!=="graph"||((0,t.isBoolean)(re.legend)&&(re.legend={show:re.legend}),re.grid&&(re.grid.min&&(re.grid.leftMin=re.grid.min,delete re.grid.min),re.grid.max&&(re.grid.leftMax=re.grid.max,delete re.grid.max)),re.y_format&&(re.y_formats||(re.y_formats=[]),re.y_formats[0]=re.y_format,delete re.y_format),re.y2_format&&(re.y_formats||(re.y_formats=[]),re.y_formats[1]=re.y2_format,delete re.y2_format)),re))),Te<3){let re=this.dashboard.getNextPanelId();he.push(De=>(De.id||(De.id=re,re+=1),De))}if(Te<4&&he.push(re=>(re.type!=="graph"||((0,t.each)(re.aliasYAxis,(De,Fe)=>{re.seriesOverrides=[{alias:Fe,yaxis:De}]}),delete re.aliasYAxis),re)),Te<6){const re=(0,t.find)(ne.pulldowns,{type:"annotations"});for(re&&(this.dashboard.annotations={list:re.annotations||[]}),te=0;te<this.dashboard.templating.list.length;te++){const De=this.dashboard.templating.list[te];De.datasource===void 0&&(De.datasource=null),De.type==="filter"&&(De.type="query"),De.type===void 0&&(De.type="query"),De.allFormat===void 0&&delete De.allFormat}}if(Te<7&&(ne.nav&&ne.nav.length&&(this.dashboard.timepicker=ne.nav[0]),he.push(re=>((0,t.each)(re.targets,De=>{De.refId||(De.refId=re.getNextQueryLetter&&re.getNextQueryLetter())}),re))),Te<8&&he.push(re=>((0,t.each)(re.targets,De=>{De.fields&&De.tags&&De.groupBy&&(De.rawQuery?(delete De.fields,delete De.fill):(De.select=(0,t.map)(De.fields,Fe=>{const Ee=[];return Ee.push({type:"field",params:[Fe.name]}),Ee.push({type:Fe.func,params:[]}),Fe.mathExpr&&Ee.push({type:"math",params:[Fe.mathExpr]}),Fe.asExpr&&Ee.push({type:"alias",params:[Fe.asExpr]}),Ee}),delete De.fields,(0,t.each)(De.groupBy,Fe=>{Fe.type==="time"&&Fe.interval&&(Fe.params=[Fe.interval],delete Fe.interval),Fe.type==="tag"&&Fe.key&&(Fe.params=[Fe.key],delete Fe.key)}),De.fill&&(De.groupBy.push({type:"fill",params:[De.fill]}),delete De.fill)))}),re)),Te<9&&he.push(re=>{if(re.type!=="singlestat"&&re.thresholds!=="")return re;if(re.thresholds){const De=re.thresholds.split(",");De.length>=3&&(De.shift(),re.thresholds=De.join(","))}return re}),Te<10&&he.push(re=>(re.type!=="table"||(0,t.each)(re.styles,De=>{if(De.thresholds&&De.thresholds.length>=3){const Fe=De.thresholds;Fe.shift(),De.thresholds=Fe}}),re)),Te<12&&(0,t.each)(this.dashboard.getVariables(),re=>{"refresh"in re&&(re.refresh&&(re.refresh=1),re.refresh||(re.refresh=0)),"hideVariable"in re&&re.hideVariable?re.hide=2:"hideLabel"in re&&re.hideLabel&&(re.hide=1)}),Te<12&&he.push(re=>(re.type!=="graph"||!re.grid||re.yaxes||(re.yaxes=[{show:re["y-axis"],min:re.grid.leftMin,max:re.grid.leftMax,logBase:re.grid.leftLogBase,format:re.y_formats[0],label:re.leftYAxisLabel},{show:re["y-axis"],min:re.grid.rightMin,max:re.grid.rightMax,logBase:re.grid.rightLogBase,format:re.y_formats[1],label:re.rightYAxisLabel}],re.xaxis={show:re["x-axis"]},delete re.grid.leftMin,delete re.grid.leftMax,delete re.grid.leftLogBase,delete re.grid.rightMin,delete re.grid.rightMax,delete re.grid.rightLogBase,delete re.y_formats,delete re.leftYAxisLabel,delete re.rightYAxisLabel,delete re["y-axis"],delete re["x-axis"]),re)),Te<13&&he.push(re=>{if(re.type!=="graph"||!re.grid)return re;re.thresholds||(re.thresholds=[]);const De={},Fe={};return re.grid.threshold1!==null&&(De.value=re.grid.threshold1,re.grid.thresholdLine?(De.line=!0,De.lineColor=re.grid.threshold1Color,De.colorMode="custom"):(De.fill=!0,De.fillColor=re.grid.threshold1Color,De.colorMode="custom")),re.grid.threshold2!==null&&(Fe.value=re.grid.threshold2,re.grid.thresholdLine?(Fe.line=!0,Fe.lineColor=re.grid.threshold2Color,Fe.colorMode="custom"):(Fe.fill=!0,Fe.fillColor=re.grid.threshold2Color,Fe.colorMode="custom")),(0,t.isNumber)(De.value)&&((0,t.isNumber)(Fe.value)?De.value>Fe.value?(De.op=Fe.op="lt",re.thresholds.push(De),re.thresholds.push(Fe)):(De.op=Fe.op="gt",re.thresholds.push(De),re.thresholds.push(Fe)):(De.op="gt",re.thresholds.push(De))),delete re.grid.threshold1,delete re.grid.threshold1Color,delete re.grid.threshold2,delete re.grid.threshold2Color,delete re.grid.thresholdLine,re}),Te<14&&(this.dashboard.graphTooltip=ne.sharedCrosshair?1:0),Te<16&&this.upgradeToGridLayout(ne),Te<17&&he.push(re=>{if(re.minSpan){const De=P.cV/re.minSpan,Fe=y(P.cV);re.maxPerRow=Fe[(0,t.findIndex)(Fe,Ee=>Ee>De)-1]}return delete re.minSpan,re}),Te<18&&he.push(re=>(re["options-gauge"]&&(re.options=re["options-gauge"],re.options.valueOptions={unit:re.options.unit,stat:re.options.stat,decimals:re.options.decimals,prefix:re.options.prefix,suffix:re.options.suffix},re.options.thresholds&&re.options.thresholds.reverse(),delete re.options.options,delete re.options.unit,delete re.options.stat,delete re.options.decimals,delete re.options.prefix,delete re.options.suffix,delete re["options-gauge"]),re)),Te<19&&he.push(re=>(re.links&&(0,t.isArray)(re.links)&&(re.links=re.links.map(F)),re)),Te<20){const re=De=>({...De,url:z(De.url)});he.push(De=>(De.options&&De.options.dataLinks&&(0,t.isArray)(De.options.dataLinks)&&(De.options.dataLinks=De.options.dataLinks.map(re)),De.options&&De.options.fieldOptions&&De.options.fieldOptions.defaults&&(De.options.fieldOptions.defaults.links&&(0,t.isArray)(De.options.fieldOptions.defaults.links)&&(De.options.fieldOptions.defaults.links=De.options.fieldOptions.defaults.links.map(re)),De.options.fieldOptions.defaults.title&&(De.options.fieldOptions.defaults.title=z(De.options.fieldOptions.defaults.title))),De))}if(Te<21){const re=De=>({...De,url:De.url.replace(/__series.labels/g,"__field.labels")});he.push(De=>(De.options&&De.options.dataLinks&&(0,t.isArray)(De.options.dataLinks)&&(De.options.dataLinks=De.options.dataLinks.map(re)),De.options&&De.options.fieldOptions&&De.options.fieldOptions.defaults&&De.options.fieldOptions.defaults.links&&(0,t.isArray)(De.options.fieldOptions.defaults.links)&&(De.options.fieldOptions.defaults.links=De.options.fieldOptions.defaults.links.map(re)),De))}if(Te<22&&he.push(re=>(re.type!=="table"||(0,t.each)(re.styles,De=>{De.align="auto"}),re)),Te<23)for(const re of this.dashboard.templating.list){if(!(0,D.iv)(re))continue;const{multi:De,current:Fe}=re;(0,r.R)(Fe)||(re.current=(0,T.C)(Fe,De))}if(Te<24&&he.push(re=>{const De=re.type==="table";if(De&&!re.styles)return re;const Fe=re.table==="table2";return!De||Fe||(re.type=De?"table-old":"table"),re}),Te<25,Te<26&&he.push(re=>(re.type==="text2"&&(re.type="text",delete re.options.angular),re)),Te<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(re=>{if(!(0,D.VO)(re))return re;const De={...re};return De.current={selected:!0,text:De.query??"",value:De.query??""},De.options=[De.current],De.hide===U.zL.dontHide||De.hide===U.zL.hideLabel?{...De,type:"textbox"}:De})),Te<28){he.push(re=>re.type==="singlestat"?Y(re):re);for(const re of this.dashboard.templating.list)re.tags&&delete re.tags,re.tagsQuery&&delete re.tagsQuery,re.tagValuesQuery&&delete re.tagValuesQuery,re.useTags&&delete re.useTags}if(Te<29)for(const re of this.dashboard.templating.list)re.type==="query"&&(re.refresh!==1&&re.refresh!==2&&(re.refresh=1),re.options?.length&&(re.options=[]));if(Te<30&&(he.push(ee),he.push(Z)),Te<31&&he.push(re=>{if(re.transformations){for(const De of re.transformations)if(De.id===g.V.id)return k(re,g.V.id,{id:u.o.id,options:{}})}return re}),Te<32,Te<33&&he.push(re=>{if(re.datasource=H(re.datasource,{returnDefaultAsNull:!0}),!re.targets)return re;for(const De of re.targets){const Fe=H(De.datasource,{returnDefaultAsNull:!0});Fe!=null&&(De.datasource=Fe)}return re}),Te<34&&(he.push(re=>(this.migrateCloudWatchQueries(re),re)),this.migrateCloudWatchAnnotationQuery()),Te<35&&he.push(J),Te<36){for(const De of this.dashboard.annotations.list)De.datasource=H(De.datasource,{returnDefaultAsNull:!1});const re=(0,E.l)().getInstanceSettings(null);if(re){for(const De of this.dashboard.templating.list)De.type==="query"&&De.datasource===null&&(De.datasource=(0,s.p$)(re));he.push(De=>{if(De.targets){let Fe=!1;De.datasource==null&&De.targets.length>0&&(De.datasource=(0,s.p$)(re),Fe=!0);for(const Ee of De.targets)(Ee.datasource==null||Ee.datasource.uid==null)&&(De.datasource?.uid!==M.uv?Ee.datasource={...De.datasource}:Ee.datasource=H(Ee.datasource,{returnDefaultAsNull:!1})),Fe&&Ee.datasource?.uid!=="__expr__"&&(De.datasource=Ee.datasource)}return De})}}if(Te<37&&he.push(re=>(re.options?.legend&&(re.options.legend.displayMode==="hidden"||re.options.legend.showLegend===!1)?(re.options.legend.displayMode="list",re.options.legend.showLegend=!1):re.options?.legend&&(re.options.legend={...re.options?.legend,showLegend:!0}),re)),Te<38&&he.push(re=>{if(re.type==="table"&&re.fieldConfig!==void 0){const De=re.fieldConfig.defaults?.custom?.displayMode;if(De!==void 0&&(re.fieldConfig.defaults.custom.cellOptions=(0,b.o7)(De),delete re.fieldConfig.defaults.custom.displayMode),re.fieldConfig?.overrides)for(const Fe of re.fieldConfig.overrides)for(let Ee=0;Ee<Fe.properties?.length;Ee++){let Me=Fe.properties[Ee].value;Fe.properties[Ee].id==="custom.displayMode"&&(Fe.properties[Ee].id="custom.cellOptions",Fe.properties[Ee].value=(0,b.o7)(Me))}}return re}),Te<39&&he.push(re=>(re.transformations?.forEach(De=>{if(De.id==="timeSeriesTable"&&De.options!==void 0&&De.options.refIdToStat!==void 0){let Fe={};for(const[Ee,Me]of Object.entries(De.options.refIdToStat)){let ze={};ze.stat=Me,Fe[Ee]=ze}De.options=Fe}}),re)),he.length!==0)for(oe=0;oe<this.dashboard.panels.length;oe++)for(le=0;le<he.length;le++){this.dashboard.panels[oe]=he[le].call(this,this.dashboard.panels[oe]);const re=this.dashboard.panels[oe].panels;if(re)for(ue=0;ue<re.length;ue++)re[ue]=he[le].call(this,re[ue])}}}removeRepeatedPanels(){const ne=[];for(const te of this.dashboard.panels)te.repeatPanelId||te.repeatByRow||(te.type==="row"&&Array.isArray(te.panels)&&(te.panels=te.panels.filter(oe=>!oe.repeatPanelId)),ne.push(te));this.dashboard.panels=ne}migrateCloudWatchQueries(ne){for(const te of ne.targets||[])if(ie(te)&&(B(te),te.hasOwnProperty("statistics"))){const oe=A(te,[...ne.targets]);for(const le of oe)ne.targets.push(le)}}migrateCloudWatchAnnotationQuery(){for(const ne of this.dashboard.annotations.list)if(fe(ne)){const te=R(ne);for(const oe of te)this.dashboard.annotations.list.push(oe)}}upgradeToGridLayout(ne){let te=0;const oe=P.cV/12;let ue=(0,t.max)((0,t.flattenDeep)((0,t.map)(ne.rows,he=>(0,t.map)(he.panels,"id"))))+1;if(!ne.rows)return;const Te=(0,t.some)(ne.rows,he=>he.collapse||he.showTitle||he.repeat);for(const he of ne.rows){if(he.repeatIteration)continue;const re=he.height||P.bJ,De=L(re),Fe={};let Ee;Te&&(Fe.id=ue,Fe.type="row",Fe.title=he.title,Fe.collapsed=he.collapse,Fe.repeat=he.repeat,Fe.panels=[],Fe.gridPos={x:0,y:te,w:P.cV,h:De},Ee=new w.a9(Fe),ue++,te++);const Me=new V(De,P.cV,te);for(const ze of he.panels){ze.span=ze.span||P.o9,ze.minSpan&&(ze.minSpan=Math.min(P.cV,P.cV/12*ze.minSpan));const xe=Math.floor(ze.span)*oe,We=ze.height?L(ze.height):De,be=Me.getPanelPosition(We,xe);te=Me.yPos,ze.gridPos={x:be.x,y:te+be.y,w:xe,h:We},Me.addPanel(ze.gridPos),delete ze.span,Ee&&Fe.collapsed?Ee.panels?.push(ze):this.dashboard.panels.push(new w.a9(ze))}Ee&&this.dashboard.panels.push(Ee),Ee&&Fe.collapsed||(te+=De)}}}function L(G){return(0,t.isString)(G)&&(G=parseInt(G.replace("px",""),10)),G<P.cx&&(G=P.cx),Math.ceil(G/(P.sD+P.dU))}class V{constructor(ne,te=P.cV,oe=0){this.area=new Array(te).fill(0),this.yPos=oe,this.height=ne}reset(){this.area.fill(0)}addPanel(ne){for(let te=ne.x;te<ne.x+ne.w;te++)(!this.area[te]||ne.y+ne.h-this.yPos>this.area[te])&&(this.area[te]=ne.y+ne.h-this.yPos);return this.area}getPanelPosition(ne,te,oe=!1){let le,ue,Te;for(let he=this.area.length-1;he>=0&&this.height-this.area[he]>0;he--)if(ue===void 0)ue=he;else if(he<this.area.length-1&&this.area[he]<=this.area[he+1])le=he;else break;if(le!==void 0&&ue!==void 0&&ue-le>=te-1){const he=(0,t.max)(this.area.slice(le));Te={x:le,y:he}}else return oe?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ne,te,!0));return Te}}function F(G){let ne=G.url;return!ne&&G.dashboard&&(ne=`dashboard/db/${C.A.slugifyForUrl(G.dashboard)}`),!ne&&G.dashUri&&(ne=`dashboard/${G.dashUri}`),ne||(ne="/"),G.keepTime&&(ne=o.kM.appendQueryToUrl(ne,`$${m.c.keepTime}`)),G.includeVars&&(ne=o.kM.appendQueryToUrl(ne,`$${m.c.includeVars}`)),G.params&&(ne=o.kM.appendQueryToUrl(ne,G.params)),{url:ne,title:G.title,targetBlank:G.targetBlank}}function z(G){const ne=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return G.replace(ne,(te,oe,le,ue,Te,he)=>oe?"__series.name":le?"${__series.name}":ue?"__value.time":Te?"__field.name":he?"${__field.name}":te)}function Y(G){if(h.config.panels["grafana-singlestat-panel"])return G.type="grafana-singlestat-panel",G;let ne=!1;return G.changePlugin||(ne=!0,G=new w.a9(G)),G.plugin={angularPanelCtrl:{}},G.gauge?.show?(O.plugin.meta=h.config.panels.gauge,G.changePlugin(O.plugin)):(S.plugin.meta=h.config.panels.stat,G.changePlugin(S.plugin)),ne?G.getSaveModel():G}function H(G,ne){if(ne.returnDefaultAsNull&&(G==null||G==="default"))return null;if((0,s.fN)(G))return G;const te=(0,E.l)().getInstanceSettings(G);return te?(0,s.p$)(te):{uid:G||void 0}}function k(G,ne,te){if(G.transformations){const oe=[];for(const le of G.transformations)oe.push(le),le.id===ne&&oe.push({...te});G.transformations=oe}return G}function ee(G){const ne=G.fieldConfig;if(!ne)return G;if(ne.defaults&&ne.defaults.mappings&&(ne.defaults.mappings=q(ne.defaults.mappings,ne.defaults.thresholds)),Array.isArray(ne.overrides))for(const te of ne.overrides)for(const oe of te.properties)oe.id==="mappings"&&(oe.value=q(oe.value));return G}function ie(G){return G.hasOwnProperty("dimensions")&&G.hasOwnProperty("namespace")&&G.hasOwnProperty("region")&&G.hasOwnProperty("metricName")}function fe(G){return G.hasOwnProperty("dimensions")&&G.hasOwnProperty("namespace")&&G.hasOwnProperty("region")&&G.hasOwnProperty("prefixMatching")&&G.hasOwnProperty("statistics")}function q(G,ne){if(!G)return;const te={type:i.d.ValueToText,options:{}},oe=[];for(const le of G){if(le.type&&le.options){le.type===i.d.ValueToText?te.options={...te.options,...le.options}:oe.push(le);continue}let ue;const Te=parseFloat(le.text);if(ne&&!isNaN(Te)){const he=(0,l.yQ)(Te,ne.steps);he&&he.color&&(ue=he.color)}switch(le.type){case 1:le.value!=null&&(le.value==="null"?oe.push({type:i.d.SpecialValue,options:{match:i.W.Null,result:{text:le.text,color:ue}}}):te.options[String(le.value)]={text:le.text,color:ue});break;case 2:oe.push({type:i.d.RangeToText,options:{from:+le.from,to:+le.to,result:{text:le.text,color:ue}}});break}}return Object.keys(te.options).length>0&&oe.unshift(te),oe}function Z(G){return(G.type==="timeseries"||G.type==="xychart"||G.type==="xychart2")&&G.options.tooltipOptions&&(G.options={...G.options,tooltip:G.options.tooltipOptions},delete G.options.tooltipOptions),G}function J(G){return G.type==="timeseries"&&G.fieldConfig?.defaults.custom?.axisPlacement===p.vM.Hidden&&(G.fieldConfig={...G.fieldConfig,overrides:[...G.fieldConfig.overrides,{matcher:{id:d.Ct.byType,options:c.PU.time},properties:[{id:"custom.axisPlacement",value:p.vM.Auto}]}]}),G}},98365:(Q,I,e)=>{"use strict";e.d(I,{G:()=>U});var t=e(2543),n=e(64423),r=e(18226),s=e(72724),o=e(47232),m=e(3591),i=e(32264),l=e(24284),d=e(15054),c=e(16233),g=e(28874),u=e(8480),E=e(20601),p=e(72401),b=e(87421),a=e(31678),h=e(28444),P=e(10096),y=e(99140),C=e(80484),f=e(75096),D=e(74856),T=e(34214);const M=new Set(["gridPos","title","description","transparent"]);function O(N,L){const V=[],F={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:V};let z=0;const Y=new Map;for(let H of L){let{id:k}=H;k||(z||(z=v([N,L])),k=z++,H={...H,id:k}),Y.set(k,H)}for(const H of N){const k=Y.get(H.id);if(!k){F.changed=!0,F.actions.remove.push(H.id),H.destroy();continue}if(Y.delete(H.id),k===H){V.push(H),F.actions.noop.push(H.id);continue}if(H.type===k.type){const ie=H.getSaveModel();let fe=!0,q=!1;for(const[Z,J]of Object.entries(k))if(!(0,t.isEqualWith)(J,ie[Z],S))if(F.changed=!0,fe=!1,M.has(Z))H[Z]=J,q=!0;else{q=!1;break}if(fe){V.push(H),F.actions.noop.push(H.id);continue}if(q){V.push(H),F.actions.update.push(H.id);continue}}H.destroy();const ee=new T.a(k);ee.key=`${ee.id}-update-${Date.now()}`,V.push(ee),F.changed=!0,F.actions.replace.push(H.id)}for(const H of Y.values())V.push(new T.a(H)),F.changed=!0,F.actions.add.push(H.id);return F}function S(N,L){if(N==null&&(L===1/0||L===-1/0||L==null)||L==null&&(N===1/0||N===-1/0||N==null))return!0}function v(N){let L=0;for(const V of N)for(const F of V)F.id>L&&(L=F.id);return L+1}var x=e(79056),A=e(84423);function R(N,L){return N.repeatDirection===d.HG?!1:L.gridPos.x>=N.gridPos.x+N.gridPos.w&&L.gridPos.y===N.gridPos.y}function B(N){for(const L of N)if(delete L.scopedVars,L.panels?.length)for(const V of L.panels)delete V.scopedVars}class U{constructor(L,V,F){this.timeRangeUpdatedDuringEditOrView=!1,this.originalDashboard=null,this.getVariablesFromState=F?.getVariablesFromState??b.SS,this.events=new r.o,this.id=L.id||null,this.uid=L.uid||null,this.revision=L.revision??void 0,this.title=L.title??"No Title",this.description=L.description,this.tags=L.tags??[],this.timezone=L.timezone??"",this.weekStart=L.weekStart??"",this.editable=L.editable!==!1,this.graphTooltip=L.graphTooltip||0,this.time=L.time??{from:"now-6h",to:"now"},this.timepicker=L.timepicker??{},this.liveNow=L.liveNow,this.templating=this.ensureListExist(L.templating),this.annotations=this.ensureListExist(L.annotations),this.refresh=L.refresh,this.snapshot=L.snapshot,this.schemaVersion=L.schemaVersion??0,this.fiscalYearStartMonth=L.fiscalYearStartMonth??0,this.version=L.version??0,this.links=L.links??[],this.gnetId=L.gnetId||null,this.panels=(0,t.map)(L.panels??[],z=>new A.a9(z)),this.originalDashboard=(0,t.cloneDeep)(L),this.originalTemplating=(0,t.cloneDeep)(this.templating),this.originalTime=(0,t.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(V),this.updateSchema(L),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.yU,this.lastRefresh=Date.now(),this.appEventsSubscription.add(P.lE.subscribe(C.og,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(P.lE.subscribe(C.BS,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(P.lE.subscribe(C.eF,this.variablesChangedInUrlHandler.bind(this)))}static{this.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0}}addBuiltInAnnotationQuery(){this.annotations.list.some(V=>V.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:l.Mk,enable:!0,hide:!0,builtIn:1})}initMeta(L){L=L||{},L.canShare=L.canShare!==!1,L.canSave=L.canSave!==!1,L.canStar=L.canStar!==!1,L.canEdit=L.canEdit!==!1,L.canDelete=L.canDelete!==!1,L.showSettings=L.canEdit,L.canMakeEditable=L.canSave&&!this.editable,L.hasUnsavedFolderChange=!1,this.editable||(L.canEdit=!1,L.canDelete=!1,L.canSave=!1),this.meta=L}getSaveModelCloneOld(L){const V=(0,t.defaults)(L||{},{saveVariables:!0,saveTimerange:!0});let F={};for(const z in this)U.nonPersistedProperties[z]||!this.hasOwnProperty(z)||(F[z]=(0,t.cloneDeep)(this[z]));return F.templating=this.getTemplatingSaveModel(V),V.saveTimerange||(F.time=this.originalTime),F.panels=this.getPanelSaveModels(),F=(0,g.v)(F),F.getVariables=()=>F.templating.list,F}getSaveModelClone(L){const V=this.getSaveModelCloneOld(L),F=JSON.stringify(V);return JSON.parse(F)}updatePanels(L){const V=O(this.panels,L??[]);return V.changed&&(this.panels=V.panels??[],this.sortPanelsByGridPos(),this.events.publish(new h.Q$)),V}getPanelSaveModels(){return this.panels.filter(L=>this.isSnapshotTruthy()||!(L.repeatPanelId||L.repeatedByRow)).map(L=>{if(L.libraryPanel){const{id:V,title:F,libraryPanel:z,gridPos:Y}=L;return{id:V,title:F,gridPos:Y,libraryPanel:{uid:z.uid,name:z.name}}}return this.panelInEdit&&this.panelInEdit.id===L.id?this.panelInEdit.getSaveModel():L.getSaveModel()}).map(L=>(this.isSnapshotTruthy()||(delete L.scopedVars,L.type==="row"&&L.panels&&L.panels.length>0&&(L.panels=L.panels.filter(V=>!V.repeatPanelId).map(V=>(delete V.scopedVars,V)))),L))}getTemplatingSaveModel(L){const V=this.originalTemplating?.list??[],z=this.getVariablesFromState(this.uid).map(H=>{const k=E.B.get(H.type).getSaveModel(H,L.saveVariables);if(!L.saveVariables){const ee=V.find(({name:ie,type:fe})=>ie===H.name&&fe===H.type);if(!ee)return k;H.type==="adhoc"?k.filters=ee.filters:(k.current=ee.current,k.options=ee.options)}return k});return{list:(0,g.v)(z)}}timeRangeUpdated(L){this.events.publish(new m.sR(L)),(0,y.JD)((0,p.RK)(this.uid,L)),(this.panelInEdit||this.panelInView)&&(this.timeRangeUpdatedDuringEditOrView=!0)}startRefresh(L={refreshAll:!0,panelIds:[]}){if(this.events.publish(new m._),this.lastRefresh=Date.now(),this.panelInEdit&&(L.refreshAll||L.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}const V=this.panels.filter(F=>!this.otherPanelInFullscreen(F)&&(L.refreshAll||L.panelIds.includes(F.id)));if(!this.isSnapshot())for(const F of V)F.refreshWhenInView=!0;for(const F of V)F.refresh()}render(){this.events.publish(new h.XM);for(const L of this.panels)L.render()}panelInitialized(L){const V=L.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(L)&&!V&&L.refresh()}otherPanelInFullscreen(L){return(this.panelInEdit||this.panelInView)&&!(L.isViewing||L.isEditing)}initEditPanel(L){return(0,D.jG)().stopAutoRefresh(),this.panelInEdit=L.getEditClone(),this.timeRangeUpdatedDuringEditOrView=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.jG)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}initViewPanel(L){this.panelInView=L,this.timeRangeUpdatedDuringEditOrView=!1,L.setIsViewing(!0)}exitViewPanel(L){this.panelInView=void 0,L.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged(){(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEditOrView)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEditOrView}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEditOrView=!1)}ensurePanelsHaveUniqueIds(){const L=new Set;let V=this.getNextPanelId();for(const F of this.panelIterator())(!F.id||L.has(F.id))&&(F.id=V++),L.add(F.id)}ensureListExist(L={}){return L.list??=[],L}getNextPanelId(){let L=0;for(const V of this.panelIterator())V.id>L&&(L=V.id);return L+1}*panelIterator(){for(const L of this.panels){yield L;const V=L.panels??[];for(const F of V)yield F}}forEachPanel(L){for(let V=0;V<this.panels.length;V++)L(this.panels[V],V)}getPanelById(L,V=!1){if(this.panelInEdit&&this.panelInEdit.id===L)return this.panelInEdit;if(V){for(const F of this.panelIterator())if(F.id===L)return F;return null}else return this.panels.find(F=>F.id===L)??null}canEditPanel(L){return!!(this.meta.canEdit&&L&&!L.repeatPanelId&&L.type!=="row")}canEditPanelById(L){return this.canEditPanel(this.getPanelById(L))}addPanel(L){L.id=this.getNextPanelId(),this.panels.unshift(new A.a9(L)),this.sortPanelsByGridPos(),this.events.publish(new h.Q$)}updateMeta(L){this.meta={...this.meta,...L},this.events.publish(new h.Cf)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((L,V)=>L.gridPos.y===V.gridPos.y?L.gridPos.x-V.gridPos.x:L.gridPos.y-V.gridPos.y)}clearUnsavedChanges(L,V){for(const F of this.panels)F.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=L,this.originalTemplating=L.templating,V.saveTimerange&&(this.originalTime=L.time)}hasUnsavedChanges(){return!!this.panels.find(V=>V.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;B(this.panels);const L=this.panels.filter(V=>(!V.repeat||V.repeatedByRow)&&V.repeatPanelId);(0,t.pull)(this.panels,...L),L.map(V=>V.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let L=0;L<this.panels.length;L++){const V=this.panels[L];V.repeat&&this.repeatPanel(V,L)}this.sortPanelsByGridPos(),this.events.publish(new h.Q$)}}cleanUpRowRepeats(L){const V=L.map(z=>z.id),F=L.filter(z=>!z.repeat&&z.repeatPanelId&&V.includes(z.repeatPanelId));(0,t.pull)(L,...F),(0,t.pull)(this.panels,...F)}processRowRepeats(L){if(this.isSnapshotTruthy()||!this.hasVariables())return;let V=L.panels??[];if(!L.collapsed){const F=this.panels.findIndex(z=>z.id===L.id);V=this.getRowPanels(F)}this.cleanUpRowRepeats(V);for(const F of V)if(F.repeat){const z=this.panels.findIndex(Y=>Y.id===F.id);this.repeatPanel(F,z)}}getPanelRepeatClone(L,V,F){if(V===0)return L;const z=L.getSaveModel();z.id=this.getNextPanelId();const Y=new A.a9(z);return this.panels.splice(F+V,0,Y),Y.repeatPanelId=L.id,Y.repeat=void 0,this.panelInView?.id===Y.id&&(Y.setIsViewing(!0),this.panelInView=Y),Y}getRowRepeatClone(L,V,F){if(V===0){if(!L.collapsed){const k=this.getRowPanels(F);L.panels=k}return L}const z=new A.a9(L.getSaveModel());let Y,H;return L.collapsed?(Y=(0,t.cloneDeep)(L.panels)??[],z.panels=Y,H=F+V):(Y=this.getRowPanels(F),z.panels=Y.map(k=>k.getSaveModel()),H=F+(Y.length+1)*V),this.panels.splice(H,0,z),this.updateRepeatedPanelIds(z),z}repeatPanel(L,V){const F=this.getPanelRepeatVariable(L);if(!F)return;if(L.type==="row"){this.repeatRow(L,V,F);return}const z=this.getSelectedVariableOptions(F),Y=L.maxPerRow||4;let H=0,k=L.gridPos.y;for(let ie=0;ie<z.length;ie++){const fe=z[ie];let q;q=this.getPanelRepeatClone(L,ie,V),q.scopedVars??={},q.scopedVars[F.name]=fe,L.repeatDirection===d.Pz?(ie>0&&(k+=q.gridPos.h),q.gridPos.y=k):(q.gridPos.w=Math.max(d.cV/z.length,d.cV/Y),q.gridPos.x=H,q.gridPos.y=k,H+=q.gridPos.w,H+q.gridPos.w>d.cV&&(H=0,k+=q.gridPos.h))}const ee=k-L.gridPos.y;if(ee>0){const ie=V+z.length;for(const fe of this.panels.slice(ie))R(L,fe)||(fe.gridPos.y+=ee)}}repeatRow(L,V,F){const z=this.getSelectedVariableOptions(F);for(let Y=0;Y<z.length;Y++){const H=z[Y],k=this.getRowRepeatClone(L,Y,V);K(k,F,H);const ee=this.getRowHeight(k),ie=k.panels||[];let fe;if(L.collapsed){for(const q of ie)K(q,F,H),Y>0&&this.updateRepeatedPanelIds(q,!0);k.gridPos.y+=Y,fe=V+Y+1}else{const q=V+(ie.length+1)*Y+1;ie.forEach((Z,J)=>{if(K(Z,F,H),Y>0){const G=new A.a9(Z);this.updateRepeatedPanelIds(G,!0),G.gridPos.y+=ee*Y,this.panels.splice(q+J,0,G)}}),k.panels=[],k.gridPos.y+=ee*Y,fe=q+ie.length}if(z.length>1)for(const q of this.panels.slice(fe))q.gridPos.y+=ee}}updateRepeatedPanelIds(L,V){return L.repeatPanelId=L.id,L.id=this.getNextPanelId(),V?L.repeatedByRow=!0:L.repeat=void 0,L}getSelectedVariableOptions(L){let V;return(0,f.ML)(L)?V=L.options.slice(1,L.options.length):V=(0,t.filter)(L.options,{selected:!0}),V}getRowHeight(L){if(!L.panels||L.panels.length===0)return 0;if(L.collapsed)return 1;const V=(0,t.maxBy)(L.panels,({gridPos:F})=>F.y+F.h).gridPos;return V.y+V.h-L.gridPos.y}removePanel(L){this.panels=this.panels.filter(V=>V!==L),L.destroy(),this.events.publish(new h.Q$)}removeRow(L,V){(!V&&L.collapsed||V&&!L.collapsed)&&this.toggleRow(L),this.removePanel(L)}expandRows(){const L=this.panels.filter(V=>V.type==="row"&&V.collapsed);for(const V of L)this.toggleRow(V)}collapseRows(){const L=this.panels.filter(V=>V.type==="row"&&!V.collapsed);for(const V of L)this.toggleRow(V)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(L=>L.hide!==2)||this.annotations.list.some(L=>!L.hide)}getPanelInfoById(L){const V=this.panels.findIndex(F=>F.id===L);return V>=0?{panel:this.panels[V],index:V}:null}duplicatePanel(L){const V=L.getSaveModel();return V.id=this.getNextPanelId(),delete V.repeat,delete V.repeatIteration,delete V.repeatPanelId,delete V.scopedVars,V.alert&&delete V.thresholds,delete V.alert,L.gridPos.x+L.gridPos.w*2<=d.cV?V.gridPos.x+=L.gridPos.w:V.gridPos.y+=L.gridPos.h,this.addPanel(V),V}formatDate(L,V){return(0,s.LE)(L,{format:V,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const L of this.panels)L.destroy()}toggleRow(L){const V=(0,t.indexOf)(this.panels,L);if(!L.collapsed){const H=this.getRowPanels(V);(0,t.pull)(this.panels,...H),L.panels=H.map(k=>k.getSaveModel()),L.collapsed=!0,H.some(k=>k.hasChanged)&&L.configRev++,this.events.publish(new h.Q$);return}L.collapsed=!1;const F=L.panels??[],z=F.some(H=>H.repeat),Y=L.repeat;if(F.length>0){const k=(F[0].gridPos.y??L.gridPos.y)-(L.gridPos.y+L.gridPos.h);let ee=V+1,ie=L.gridPos.y;for(const q of F){if(Y){const Z=this.getPanelRepeatVariable(L);if(q.scopedVars??={},Z){const J=this.getSelectedVariableOptions(Z);q.scopedVars={...q.scopedVars,[Z.name]:J[0]}}}q.gridPos.y??(q.gridPos.y=L.gridPos.y),q.gridPos.y-=k,this.panels.splice(ee,0,new A.a9(q)),ee+=1,ie=Math.max(ie,q.gridPos.y+q.gridPos.h)}const fe=ie-L.gridPos.y-1;for(const q of this.panels.slice(ee))q.gridPos.y+=fe;L.panels=[],z&&this.processRowRepeats(L)}this.sortPanelsByGridPos(),this.events.publish(new h.Q$)}getRowPanels(L){const V=this.panels.slice(L+1),F=V.findIndex(Y=>Y.type==="row");return V.slice(0,F>=0?F:this.panels.length)}on(L,V){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(L,V)}off(L,V){console.log("DashboardModel.off is deprecated"),this.events.off(L,V)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(L){return(0,s.fq)(L,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:c.TP?.user?.timezone}updateSchema(L){new x.SW(this).updateSchema(L)}hasTimeChanged(){const{time:L,originalTime:V}=this;return!((0,t.isEqual)(L,V)||(0,t.isEqual)((0,o.KQ)(L?.from),(0,o.KQ)(V?.from))&&(0,t.isEqual)((0,o.KQ)(L?.to),(0,o.KQ)(V?.to)))}autoFitPanels(L,V){const F=Math.max(...this.panels.map(ie=>ie.gridPos.h+ie.gridPos.y)),z=55;let H=L-z-20;V&&V!==a.KioskMode.TV&&(H+=z);const k=Math.floor(H/(d.sD+d.dU)),ee=F/k;for(const ie of this.panels)ie.gridPos.y=Math.round(ie.gridPos.y/ee)||1,ie.gridPos.h=Math.round(ie.gridPos.h/ee)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(a.CoreEvents.bG)}getPanelByUrlId(L){const V=parseInt(L??"0",10),F=this.panels.filter(z=>z.collapsed);for(const z of F)z.panels?.some(H=>H.id===V)&&this.toggleRow(z);return this.getPanelById(V)}toggleLegendsForAll(){const L=this.panels.filter(w),V=L.filter(Y=>Y.legend.show).length,F=L.length-V,z=V>=F;for(const Y of L)Y.legend.show=!z,Y.render()}toggleExemplarsForAll(){for(const L of this.panels)for(const V of L.targets){if(!(V.datasource&&V.datasource.type==="prometheus"))continue;const F=V;F.exemplar=!F.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(L){let V=!0;return L?V=!!this.meta.annotationsPermissions?.dashboard.canEdit:V=!!this.meta.annotationsPermissions?.organization.canEdit,(i.$.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&V}canDeleteAnnotations(L){let V=!0;return L?V=!!this.meta.annotationsPermissions?.dashboard.canDelete:V=!!this.meta.annotationsPermissions?.organization.canDelete,i.$.featureToggles.annotationPermissionUpdate?V:V&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(V=>V.builtIn===1)?.enable===!1?!1:i.$.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(L,V){!(0,t.isEqual)(L?.gridPos,V?.gridPos)&&this.events.publish(new h.Q$)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(L){return this.getVariablesFromState(this.uid).find(V=>V.name===L.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const L=this.originalTemplating?.list??[],V=this.getTemplatingSaveModel({saveVariables:!0}).list;return L.length!==V.length?!1:!(0,t.isEqual)(V,L)}variablesTimeRangeProcessDoneHandler(L){const V=L.payload.variableIds.length>0;this.variablesChangedHandler(new C.og({panelIds:[],refreshAll:!0}),V)}variablesChangedHandler(L,V=!0){if(V&&this.processRepeats(),L.payload.refreshAll||(0,D.jG)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=L.payload.panelIds.filter(F=>F!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(L.payload)}variablesChangedInUrlHandler(L){this.templateVariableValueUpdated(),this.startRefresh(L.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(L=>{const V=(i.$.panels[L.type]?.angular?.detected||A.vI.includes(L.type))&&!i.$.panels[L.type]?.angular?.hideDeprecation;let F=!1;return L.datasource?.uid&&(F=(0,u.Hv)(L.datasource?.uid)),V||F})}}function w(N){return!!N.legend}function K(N,L,V){N.scopedVars??={},N.scopedVars[L.name]=V}},84423:(Q,I,e)=>{"use strict";e.d(I,{Ar:()=>D,NB:()=>y,a9:()=>f,tD:()=>C,tw:()=>T,vI:()=>P});var t=e(2543),n=e.n(t),r=e(62938),s=e(18226),o=e(41987),m=e(581),i=e(3591),l=e(72574),d=e(2913),c=e(87490),g=e(21969),u=e(28444),E=e(80924),p=e(96382);const b={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},a={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,isViewing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},h={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},links:[],transformations:[],fieldConfig:{defaults:{},overrides:[]},title:""},P=["graph","table-old","grafana-piechart-panel","grafana-worldmap-panel","singlestat","grafana-singlestat-panel"],y={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},C={"heatmap-new":"heatmap"};class f{constructor(O){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!0,this.cachedPluginOptions={},this.events=new s.o,this.restoreModel(O),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,r.A)()}restoreModel(O){for(const v in this)b[v]||!this.hasOwnProperty(v)||O[v]||typeof this[v]!="function"&&typeof this[v]!="symbol"&&delete this[v];for(const v in O)this[v]=O[v];const S=(0,p.p)(this);S&&(this.autoMigrateFrom=this.type,this.type=S),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(h)),this.ensureQueryIds()}generateNewKey(){this.key=(0,r.A)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const O of this.targets)O.refId||(O.refId=(0,g.W3)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(O){this.options=O,this.configRev++,this.events.publish(new u.PR),this.render()}updateFieldConfig(O){this.fieldConfig=O,this.configRev++,this.events.publish(new u.PR),this.resendLastResult(),this.render()}getSaveModel(){const O={};for(const S in this)b[S]||!this.hasOwnProperty(S)||(0,t.isEqual)(this[S],h[S])||(O[S]=(0,t.cloneDeep)(this[S]));return this.type==="row"&&this.panels&&this.panels.length>0&&(O.panels=this.panels.map(S=>{if(S.libraryPanel){const{id:v,title:x,libraryPanel:A,gridPos:R}=S;return{id:v,title:x,gridPos:R,libraryPanel:{uid:A.uid,name:A.name}}}return S})),O}setIsViewing(O){this.isViewing=O}updateGridPos(O,S=!0){O.x===this.gridPos.x&&O.y===this.gridPos.y&&O.h===this.gridPos.h&&O.w===this.gridPos.w||(this.gridPos.x=O.x,this.gridPos.y=O.y,this.gridPos.w=O.w,this.gridPos.h=O.h,S&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:O,dashboardTimezone:S,timeData:v,width:x}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,panelPluginId:this.type,dashboardUID:O,timezone:S,timeRange:v.timeRange,timeInfo:v.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(x),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?o.Jk.PanelEditor:this.isViewing?o.Jk.PanelViewer:o.Jk.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new i._)}render(){this.hasRefreshed?this.events.publish(new u.XM):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((O,S)=>b[S]||a[S]?O:{...O,[S]:this[S]},{})}restorePanelOptions(O){const S=this.cachedPluginOptions[O];S&&(Object.keys(S.properties).map(v=>{this[v]=S.properties[v]}),this.fieldConfig=(0,m.H9)(this.fieldConfig,S.fieldConfig))}applyPluginOptionDefaults(O,S){const v=(0,m.F)({plugin:O,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:S});this.fieldConfig=v.fieldConfig,this.options=v.options}async pluginLoaded(O){this.plugin=O;const S=D(O);if(this.autoMigrateFrom){const v=y[this.autoMigrateFrom]!=null,x=this.getOptionsToRemember(),A=this.autoMigrateFrom,R=this.type;this.clearPropertiesBeforePluginChange(),this.type=R,this.plugin=O,this.callPanelTypeChangeHandler(O,A,x,v)}if(O.onPanelMigration&&S!==this.pluginVersion){const v=O.onPanelMigration(this);this.options=await v,this.pluginVersion=S}this.applyPluginOptionDefaults(O,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const O in this)a[O]||delete this[O];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,m.aW)(this.fieldConfig.overrides,m.nx)}}callPanelTypeChangeHandler(O,S,v,x){if(O.onPanelTypeChanged){const A=x?{angular:v}:v.options;Object.assign(this.options,O.onPanelTypeChanged(this,S,A,this.fieldConfig))}}changePlugin(O){const S=O.meta.id,v=this.getOptionsToRemember(),x=this.fieldConfig,A=this.type,R=this.isAngularPlugin()||!!y[A];this.cachedPluginOptions[A]={properties:v,fieldConfig:x},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(S),this.callPanelTypeChangeHandler(O,A,v,R),this.type=S,this.plugin=O,this.configRev++,this.applyPluginOptionDefaults(O,!0),O.onPanelMigration&&(this.pluginVersion=D(O))}updateQueries(O){const{dataSource:S}=O;this.datasource={uid:S.uid,type:S.type},this.cacheTimeout=O.cacheTimeout,this.queryCachingTTL=O.queryCachingTTL,this.timeFrom=O.timeRange?.from,this.timeShift=O.timeRange?.shift,this.hideTimeOverride=O.timeRange?.hide,this.interval=O.minInterval,this.maxDataPoints=O.maxDataPoints,this.targets=O.queries,this.configRev++,this.events.publish(new u.zq)}addQuery(O){O=O||{refId:"A"},O.refId=(0,g.W3)(this.targets),this.targets.push(O),this.configRev++}changeQuery(O,S){O.refId=this.targets[S].refId,this.configRev++,this.targets=this.targets.map((v,x)=>x===S?O:v)}getEditClone(){const O=this.getSaveModel(),S=new f(O);S.isEditing=!0,S.plugin=this.plugin;const v=this.getQueryRunner();return S.getQueryRunner().useLastResultFrom(v),S}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:d.Ay.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new E.Z(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(O){this.transformations=O,this.resendLastResult(),this.configRev++,this.events.publish(new u.JI)}setProperty(O,S){this[O]=S,this.configRev++,O==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(O,S,v){const x=this.getQueryRunner().getLastRequest(),A=Object.assign({},this.scopedVars,x?.scopedVars,S);return(0,l.w)().replace(O,A,v)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(O){for(const[S,v]of Object.entries(O.model)){switch(S){case"id":case"gridPos":case"libraryPanel":continue}this[S]=v}this.libraryPanel=O}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function D(M){return M&&M.meta.info.version?M.meta.info.version:d.Ay.buildInfo.version}function T(M){const O={};return Object.entries(M).filter(([S,v])=>!b[S]&&M.hasOwnProperty(S)&&!(0,t.isEqual)(v,h[S])).forEach(([S,v])=>{O[S]=v}),(0,c.MA)(O)}},3673:(Q,I,e)=>{"use strict";e.d(I,{Bz:()=>p,Q9:()=>u,Ss:()=>a,TA:()=>E,lC:()=>b});var t=e(17172),n=e(82467),r=e(3169),s=e(6473),o=e(80095),m=e(81862),i=e(20701),l=e(72401),d=e(14792),c=e(74856),g=e(28601);function u(h,P){return async y=>{await(0,t.AI)().post("/api/dashboards/import",h),y((0,n.dx)((0,r.tZ)("Dashboard Imported",P))),y((0,i.h9)())}}function E(h){return async P=>{await(0,t.AI)().delete(`/api/dashboards/uid/${h}`),P((0,i.h9)())}}const p=()=>(h,P)=>{const C=P().dashboard.getModel();C&&(C.destroy(),h((0,l.Y7)(C.uid))),(0,c.jG)().stopAutoRefresh(),h((0,g.p0)()),h((0,o.rG)()),s.t.leave(),(0,d.UA)().setCurrent(void 0)},b=h=>P=>{P((0,m.Cj)(h)),(0,c.jG)().refreshTimeModel()},a=h=>P=>{P((0,m.xu)(h)),(0,c.jG)().refreshTimeModel()}},96382:(Q,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(2913),n=e(84423);function r(s,o){if(n.tD[s.type])return n.tD[s.type];const m=l=>{const d="__feature."+l,g=new URLSearchParams(window.location.search).get(d);return g==="true"||g===""},i=o||!t.Ay.angularSupportEnabled||t.Ay.featureToggles.autoMigrateOldPanels||m("autoMigrateOldPanels")||m("disableAngular");if(s.type==="graph"&&(i||t.Ay.featureToggles.autoMigrateGraphPanel||m("autoMigrateGraphPanel")))return s.xaxis?.mode==="series"?"barchart":s.xaxis?.mode==="histogram"?"histogram":"timeseries";if(i)return n.NB[s.type];if(s.type==="table-old"&&(t.Ay.featureToggles.autoMigrateTablePanel||m("autoMigrateTablePanel")))return"table";if(s.type==="grafana-piechart-panel"&&(t.Ay.featureToggles.autoMigratePiechartPanel||m("autoMigratePiechartPanel")))return"piechart";if(s.type==="grafana-worldmap-panel"&&(t.Ay.featureToggles.autoMigrateWorldmapPanel||m("autoMigrateWorldmapPanel")))return"geomap";if((s.type==="singlestat"||s.type==="grafana-singlestat-panel")&&t.Ay.featureToggles.autoMigrateStatPanel||m("autoMigrateStatPanel"))return"stat"}},34214:(Q,I,e)=>{"use strict";e.d(I,{G:()=>t.G,a:()=>n.a9});var t=e(98365),n=e(84423)},79999:(Q,I,e)=>{"use strict";e.d(I,{us:()=>F,vR:()=>V,yZ:()=>Y,OI:()=>z});var t=e(71733),n=e(47232),r=e(69129),s=e(12131),o=e(17172),m=e(32264),i=e(82467),l=e(28138),d=e(3169),c=e(27677),g=e(33390),u=e(78160),E=e(17493),p=e(14792),b=e(74856),a=e(72255),h=e(71176),P=e(71101),y=e(54650);function C(H){return async k=>{const ee=await c.IB.getFolderByUid(H);return k((0,y.jl)(ee)),k((0,i.Vz)((0,P.R4)(ee))),ee}}var f=e(6473),D=e(2609),T=e(75096),M=e(31678),O=e(42972),S=e(72401),v=e(87421),x=e(16833),A=e(98365),R=e(61298),B=e(14110);function U(H){const k={dashboardId:H.id,dashboardName:H.title,dashboardUid:H.uid,folderName:H.meta.folderTitle,eventName:R.n_.DashboardView};(0,B.G$)(k)}var w=e(28601);const K="initDashboard";async function N(H,k,ee){const ie=g.A.getObject(F);if(ie)return Y(),ie;try{switch(H.routeName){case M.DashboardRoutes.Home:{const q=(0,a.sP)().getFromCache(a.m6);if(q)return q;const Z=await c.IB.get("/api/dashboards/home");if(Z.redirectUri){const J=t.I.stripBaseFromUrl(Z.redirectUri);return s.Ny.replace(J),null}return Z.meta.canSave=!1,Z.meta.canShare=!1,Z.meta.canStar=!1,Z}case M.DashboardRoutes.Public:return await E.np.loadDashboard("public",H.urlSlug,H.accessToken);case M.DashboardRoutes.Normal:{const fe=await E.np.loadDashboard(H.urlType,H.urlSlug,H.urlUid);if(fe.meta.folderUid)try{await k(C(fe.meta.folderUid))}catch(q){console.warn("Error fetching parent folder",fe.meta.folderUid,"for dashboard",q)}if(H.fixUrl&&fe.meta.url&&!D._o.state.isPlaying){const q=t.I.stripBaseFromUrl(fe.meta.url),Z=s.Ny.getLocation().pathname;q!==Z&&(s.Ny.replace({...s.Ny.getLocation(),pathname:q}),console.log("not correct url correcting",q,Z))}return fe}case M.DashboardRoutes.New:return H.urlFolderUid&&await k(C(H.urlFolderUid)),(0,h.X)(H.urlFolderUid);case M.DashboardRoutes.Path:{const fe=H.urlSlug??"";return await E.np.loadDashboard(M.DashboardRoutes.Path,fe,fe)}default:throw{message:"Unknown route "+H.routeName}}}catch(fe){return(0,o.NF)(fe)&&fe.cancelled||(k((0,w.ig)({message:"Failed to fetch dashboard",error:fe})),console.error(fe)),null}}const L=(H,k={})=>(H.forEach(ee=>{ee.panels?L(ee.panels,k):ee.targets&&ee.targets.forEach(ie=>{ie.datasource?.type&&(k[ie.datasource.type]?k[ie.datasource.type].push(ie):k[ie.datasource.type]=[ie])})}),k);function V(H){return async(k,ee)=>{(0,u.j)(K),k((0,w.xS)());const ie=await N(H,k,ee),fe=ie?.dashboard?.version;if(!ie)return;k((0,w.X1)());let q;try{q=new A.G(ie.dashboard,ie.meta)}catch(ue){k((0,w.ig)({message:"Failed create dashboard model",error:ue})),console.error(ue);return}const Z=ee(),J=s.Ny.getSearchObject();J.orgId||s.Ny.partial({orgId:Z.user.orgId},!0);const G=(0,b.jG)();(0,p.UA)().setCurrent(q),G.init(q);const te=(0,T.q4)(H.urlUid??q.uid);if(await k((0,S._q)(te,q)),(0,O.nm)({dashboard:q,timeSrv:G}).run({dashboard:q,range:G.timeRange()}),(0,v.Tk)(ee())!==te||ee().dashboard.initPhase!==M.DashboardInitPhase.Services)return;try{q.processRepeats(),J.autofitpanels&&q.autoFitPanels(window.innerHeight,J.kiosk),m.$.publicDashboardAccessToken||H.keybindingSrv.setupDashboardBindings(q)}catch(ue){ue instanceof Error&&k((0,i.dx)((0,d.gi)("Dashboard init failed",ue))),console.error(ue)}H.routeName!==M.DashboardRoutes.New?(U(q),f.t.watch(q.uid)):f.t.leave(),q.weekStart!==""?(0,n.$D)(q.weekStart):(0,n.$D)(m.$.bootData.user.weekStart),l.A.publish(new r.gc({dashboardId:q.uid,orgId:Z.user.orgId,userId:Z.user.user?.id,grafanaVersion:m.$.buildInfo.version,queries:L(q.panels)}));const le=(0,u.z)(K);(0,x.d)(q,le?.duration,fe),k((0,w.O9)(q))}}const F="DASHBOARD_FROM_LS_KEY";function z(H){g.A.setObject(F,H)}function Y(){g.A.delete(F)}},28601:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>b,O9:()=>d,Ub:()=>E,X1:()=>c,ig:()=>l,p0:()=>g,xS:()=>i});var t=e(30038),n=e(79422),r=e(31678),s=e(98365);const o={initPhase:r.DashboardInitPhase.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},m=(0,t.Z0)({name:"dashboard",initialState:o,reducers:{dashboardInitFetching:a=>{a.initPhase=r.DashboardInitPhase.Fetching},dashboardInitServices:a=>{a.initPhase=r.DashboardInitPhase.Services},dashboardInitCompleted:(a,h)=>{a.getModel=()=>h.payload,a.initPhase=r.DashboardInitPhase.Completed},dashboardInitFailed:(a,h)=>{a.initPhase=r.DashboardInitPhase.Failed,a.initError=h.payload,a.getModel=()=>new s.G({...n.Ye,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:a=>{a.initPhase=r.DashboardInitPhase.NotStarted,a.initError=null,a.getModel=()=>null},addPanel:(a,h)=>{},setInitialDatasource:(a,h)=>{a.initialDatasource=h.payload}}}),{dashboardInitFetching:i,dashboardInitFailed:l,dashboardInitCompleted:d,dashboardInitServices:c,cleanUpDashboard:g,addPanel:u,setInitialDatasource:E}=m.actions,b={dashboard:m.reducer}},36974:(Q,I,e)=>{"use strict";e.d(I,{B1:()=>P,CW:()=>a,OK:()=>l,SD:()=>c,VF:()=>g,_u:()=>p,dH:()=>y,ko:()=>h,no:()=>E,ob:()=>d,s3:()=>u});var t=e(2543),n=e.n(t),r=e(12131),s=e(2913),o=e(15054),m=e(33390),i=e(19752);function l(f,D){const T={type:"timeseries",title:"Panel Title",gridPos:(0,i.Ft)(f),datasource:D?{uid:D}:null,isNew:!0};return f.addPanel(T),T.id}function d(f,D){const T={type:D,title:"Widget title",gridPos:(0,i.Ft)(f),datasource:null,isNew:!0};return f.addPanel(T),T.id}function c(f){const D={type:"row",title:"Row title",gridPos:{x:0,y:0}};f.addPanel(D)}function g(){r.Ny.push("/dashboard/import")}function u(f){const D={type:"add-library-panel",gridPos:(0,i.Ft)(f)};f.addPanel(D)}function E(f,D){if(!D)return;const T=(0,i.Ft)(f),M={type:D.id,title:"Panel Title",gridPos:{x:T.x,y:T.y,w:D.defaults.gridPos.w,h:D.defaults.gridPos.h}};D.defaults&&((0,t.defaults)(M,D.defaults),M.title=D.defaults.title,m.A.delete(o.tH)),f.addPanel(M)}function p(){const f=(0,t.chain)(s.Ay.panels).filter({hideFromList:!1}).map(T=>T).value(),D=m.A.get(o.tH);if(D){const T=JSON.parse(D),M=(0,t.find)(f,{id:T.type});if(M){const O=(0,t.cloneDeep)(M);return O.name=T.title,O.sort=-1,{...O,defaults:{...T}}}}}const b="grafana.dashboards.panelEdit.lastUsedDatasource";function a(f){if(m.A.exists(b)){const D=m.A.getObject(b);if(D?.dashboardUid===f)return D}}function h(f){if(!m.A.exists(b))return;const T=m.A.getObject(b)?.datasourceUid??"";C(f,T)}function P(f){m.A.setObject(b,{dashboardUid:f,datasourceUid:""})}function y(f,D){const T=a(f);if(!T)C(f,D);else{const M=T?.dashboardUid??"";C(M,D)}}function C(f,D){m.A.setObject(b,{dashboardUid:f,datasourceUid:D})}},19752:(Q,I,e)=>{"use strict";e.d(I,{ET:()=>S,FC:()=>y,Ft:()=>R,KJ:()=>f,Mc:()=>D,ZY:()=>M,d7:()=>T,iU:()=>C,nk:()=>v});var t=e(2543),n=e.n(t),r=e(26272),s=e(65879),o=e(47232),m=e(85858),i=e(72574),l=e(28138),d=e(2913),c=e(15054),g=e(33390),u=e(1702),E=e(84423),p=e(54174),b=e(96227),a=e(79971),h=e(99140),P=e(28444);const y=(B,U,w)=>{if(w!==!1){const K=U.alert?"YES":void 0;l.A.publish(new P.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",icon:"trash-alt",confirmText:K,yesText:"Remove",onConfirm:()=>y(B,U,!1)}));return}B.removePanel(U),(0,h.JD)((0,a.O6)(U.key))},C=(B,U)=>{B.duplicatePanel(U)},f=B=>{let U=B;B instanceof E.a9&&(U=B.getSaveModel()),g.A.set(c.tH,JSON.stringify(U)),l.A.emit(r.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},D=(B,U)=>{l.A.publish(new P.S8({component:u.ShareModal,props:{dashboard:B,panel:U}}))},T=(B,U)=>{l.A.publish(new P.S8({component:b.o,props:{panel:U,initialFolderUid:B.meta.folderUid,isOpen:!0}}))},M=B=>{l.A.publish(new P.S8({component:p.l,props:{onConfirm:()=>B.unlinkLibraryPanel(),isOpen:!0}}))},O=B=>{B.refresh()},S=B=>{const U={...B.options};U.legend.showLegend===!0?U.legend.showLegend=!1:U.legend.showLegend=!0,B.updateOptions(U)};function v(B,U){const w={timeInfo:"",timeRange:U};if(B.timeFrom){const K=(0,i.w)().replace(B.timeFrom,B.scopedVars),N=s.describeTextRange(K);if(N.invalid)return w.timeInfo="invalid time override",w;if((0,t.isString)(U.raw.from)){const L=(0,o.AN)(U.from).tz(),V=(0,o.AN)(U.to).tz(),F=m.parse(N.from,void 0,L);w.timeInfo=N.display,w.timeRange={from:F,to:m.parse(N.to,void 0,V),raw:{from:N.from,to:N.to}}}}if(B.timeShift){const K=(0,i.w)().replace(B.timeShift,B.scopedVars);if(s.describeTextRange(K).invalid)return w.timeInfo="invalid timeshift",w;const L="-"+K;w.timeInfo+=" timeshift "+L;const V=m.parseDateMath(L,w.timeRange.from,!1),F=m.parseDateMath(L,w.timeRange.to,!0);w.timeRange={from:V,to:F,raw:{from:V,to:F}}}return B.hideTimeOverride&&(w.timeInfo=""),w}function x(B){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return B.maxDataPoints?B.maxDataPoints:Math.ceil(w*(B.gridPos.w/24))}function A(B,U){const w=B.plugin&&B.plugin.noPadding?0:config.theme.panelPadding*2,K=B.hasTitle()?config.theme.panelHeaderHeight:0;return U-K-w-PANEL_BORDER}function R(B){for(const w of B.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},21380:(Q,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(47232),n=e(85858);const r=(s,o)=>{const m={from:(0,t.Ar)(s.from)?(0,t.KQ)(s.from):s.from,to:(0,t.Ar)(s.to)?(0,t.KQ)(s.to):s.to},i=o?o.getTimezone():void 0;return{from:n.parse(m.from,!1,i,o?.fiscalYearStartMonth),to:n.parse(m.to,!0,i,o?.fiscalYearStartMonth),raw:m}}},16833:(Q,I,e)=>{"use strict";e.d(I,{D:()=>r,d:()=>n});var t=e(7758);function n(l,d,c){const g=o(l.templating.list),u=s(l.panels);t.c.dashboardInitialized({uid:l.uid,title:l.title,theme:l.style,schemaVersion:l.schemaVersion,version_before_migration:c,panels_count:l.panels.length,...u,...g,settings_nowdelay:l.timepicker.nowDelay,settings_livenow:!!l.liveNow,duration:d,isScene:!1})}function r(l,d){const c=l.getInitialSaveModel();if(c){const g=s(c.panels||[]),u=o(c.templating?.list||[]);t.c.dashboardInitialized({uid:c.uid,title:c.title,theme:void 0,schemaVersion:c.schemaVersion,version_before_migration:c.version,panels_count:c.panels?.length||0,...g,...u,settings_nowdelay:void 0,settings_livenow:!!c.liveNow,duration:d,isScene:!0})}}function s(l){return l.map(d=>d.type).reduce((d,c)=>(d[i(c)]=1+d[i(c)]||1,d),{})}function o(l){return l.map(d=>d.type).reduce((d,c)=>(d[m(c)]=1+d[m(c)]||1,d),{})}const m=l=>`variable_type_${l}_count`,i=l=>`panel_type_${l}_count`},40489:(Q,I,e)=>{"use strict";e.d(I,{ZF:()=>m,vI:()=>o,o2:()=>i});var t=e(88483),n=e(14236);function r(l){const d=new Set;return Object.keys(l).forEach(c=>{l[c].forEach(g=>{d.add(g)})}),d}function s(l){const d=Array.from(r(l));return d.length===1?d[0]:`${d.slice(0,-1).join(", ")} or ${d.slice(-1)}`}function o(l){return new t.c(d=>{let c=0;Promise.all([e.e(2136),e.e(3686)]).then(e.bind(e,22136)).then(g=>{l.forEach(u=>{const E=new FileReader;E.readAsArrayBuffer(u),E.onload=()=>{const p=E.result;if(p&&p instanceof ArrayBuffer){if(u.type==="application/json"){const b=new TextDecoder("utf-8"),a=JSON.parse(b.decode(p));d.next({dataFrames:[(0,n.Vc)(a)],file:u})}else d.next({dataFrames:g.readSpreadsheet(p),file:u});++c>=l.length&&d.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const m={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},i=5e5},32738:(Q,I,e)=>{"use strict";e.d(I,{r:()=>i});var t=e(96540),n=e(55852),r=e(10096),s=e(44836),o=e(6320),m=e(31678);function i({variant:l,onClick:d}){const c=r.TP.hasPermission(m.AccessControlAction.DataSourcesCreate),g=o.b.DataSourcesNew;return t.createElement(n.z9,{variant:l||"primary",href:g,disabled:!c,tooltip:c?void 0:"You do not have permission to configure new data sources",onClick:d,target:"_blank"},t.createElement(s.x6,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},2221:(Q,I,e)=>{"use strict";e.d(I,{A:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(10860),o=e(64149);function m({ds:l,onClick:d,selected:c,description:g,...u}){const E=(0,r.$j)(),p=i(E,l.meta.builtIn);return n.createElement(s.Z,{key:l.uid,onClick:d,className:(0,t.cx)(p.card,c?p.selected:void 0),...u},n.createElement(s.Z.Heading,{className:p.heading},n.createElement("div",{className:p.headingContent},n.createElement("span",{className:p.name},l.name," ",l.isDefault?n.createElement(o.L,{tags:["default"]}):null),n.createElement("small",{className:p.type},g||l.meta.name))),n.createElement(s.Z.Figure,{className:p.logo},n.createElement("img",{src:l.meta.info.logos.small,alt:`${l.meta.name} Logo`})))}function i(l,d=!1){return{card:(0,t.css)`
      cursor: pointer;
      background-color: ${l.colors.background.primary};
      border-bottom: 1px solid ${l.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${l.spacing(1)};
    `,heading:(0,t.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,t.css)`
      color: ${l.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,t.css)`
      width: 32px;
      height: 32px;
      padding: ${l.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${d&&l.isLight?1:0});
      }
    `,name:(0,t.css)`
      color: ${l.colors.text.primary};
      display: flex;
      gap: ${l.spacing(2)};
    `,type:(0,t.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,t.css)`
      margin: 0 ${l.spacing(1)};
      color: ${l.colors.border.weak};
    `,selected:(0,t.css)`
      background-color: ${l.colors.background.secondary};
    `,meta:(0,t.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},11219:(Q,I,e)=>{"use strict";e.d(I,{S:()=>g});var t=e(32196),n=e(96540),r=e(13544),s=e(72574),o=e(40845),m=e(44836),i=e(87282),l=e(32738),d=e(2221),c=e(47311);function g(a){const h=(0,n.useRef)(null),[P,y]=(0,i.dR)({keyboardEvents:a.keyboardEvents,containerRef:h}),C=(0,o.$j)(),f=b(C,y),{className:D,current:T,onChange:M,enableKeyboardNavigation:O,onClickEmptyStateCTA:S}=a,v=(0,i.Kr)({alerting:a.alerting,annotations:a.annotations,dashboard:a.dashboard,logs:a.logs,metrics:a.metrics,mixed:a.mixed,pluginId:a.pluginId,tracing:a.tracing,type:a.type,variables:a.variables}),[x,A]=(0,i.TX)(),R=a.filter?v.filter(a.filter):v;return n.createElement("div",{ref:h,className:(0,t.cx)(D,f.container),"data-testid":r.Tp.components.DataSourcePicker.dataSourceList},R.length===0&&n.createElement(u,{className:f.emptyState,onClickCTA:S}),R.sort((0,c.Tj)(T,x,p())).map(B=>n.createElement(d.A,{"data-testid":"data-source-card",key:B.uid,ds:B,onClick:()=>{A(B),M(B)},selected:(0,c.Df)(B,T),...O?P:{}})))}function u({className:a,onClickCTA:h}){const P=(0,o.of)(E);return n.createElement("div",{className:(0,t.cx)(a,P.container)},n.createElement("p",{className:P.message},n.createElement(m.x6,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),n.createElement(l.r,{onClick:h}))}function E(a){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,t.css)`
      margin-bottom: ${a.spacing(3)};
    `}}function p(){return(0,s.w)().getVariables().filter(h=>h.type==="datasource").map(h=>`\${${h.id}}`)}function b(a,h){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      ${h} {
        background-color: ${a.colors.background.secondary};
      }
    `,emptyState:(0,t.css)`
      height: 100%;
      flex: 1;
    `}}},50481:(Q,I,e)=>{"use strict";e.d(I,{p:()=>O});var t=e(32196),n=e(2543),r=e(96540),s=e(14110),o=e(32264),m=e(40845),i=e(37390),l=e(10354),d=e(14578),c=e(40276),g=e(37270),u=e(44836),E=e(40489),p=e(90478),b=e(87282),a=e(32738),h=e(13544),P=e(2221),y=e(47311);const C={grafana:(0,u.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,u.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,u.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function f({className:v,current:x,onChange:A,tracing:R,dashboard:B,mixed:U,metrics:w,type:K,annotations:N,variables:L,alerting:V,pluginId:F,logs:z,filter:Y}){const k=(0,b.Kr)({tracing:R,dashboard:B,mixed:U,metrics:w,type:K,annotations:N,variables:L,alerting:V,pluginId:F,logs:z}).filter(ee=>(Y?Y?.(ee):!0)&&!!ee.meta.builtIn);return r.createElement("div",{className:v,"data-testid":h.Tp.components.DataSourcePicker.advancedModal.builtInDataSourceList},k.map(ee=>r.createElement(P.A,{key:ee.uid,ds:ee,description:C[ee.uid],selected:(0,y.Df)(ee,x),onClick:()=>A(ee)})))}var D=e(11219);const T="dashboards_dspickermodal_clicked",M={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function O({tracing:v,dashboard:x,mixed:A,metrics:R,type:B,annotations:U,variables:w,alerting:K,pluginId:N,logs:L,uploadFile:V,filter:F,onChange:z,current:Y,onDismiss:H,reportedInteractionFrom:k}){const ee=(0,m.of)(S),[ie,fe]=(0,r.useState)(""),q=k||"modal",Z=()=>{H(),(0,s.rR)(T,{item:M.DISMISS,src:q})},J=le=>{z(le),(0,s.rR)(T,{item:M.SELECT_DS,ds_type:le.type,src:q})},G=r.useMemo(()=>(0,n.once)(()=>{(0,s.rR)(T,{item:"search",src:q})}),[q]),ne=(0,b.ps)("-- Grafana --"),te=(0,p.j)((le,ue)=>{ne&&(z(ne,[le]),(0,s.rR)(T,{item:M.UPLOAD_FILE,src:q}),ue.length<1&&H())}),oe=({className:le})=>r.createElement(f,{className:le,onChange:J,current:Y,filter:F,variables:w,tracing:v,metrics:R,type:B,annotations:U,alerting:K,pluginId:N,logs:L,dashboard:x,mixed:A});return r.createElement(i.a,{title:(0,u.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:ee.modal,contentClassName:ee.modalContent,onClickBackdrop:Z,onDismiss:Z},r.createElement("div",{className:ee.leftColumn},r.createElement(l.p,{type:"search",autoFocus:!0,className:ee.searchInput,value:ie,prefix:r.createElement(d.I,{name:"search"}),placeholder:(0,u.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:le=>{fe(le.currentTarget.value),G()}}),r.createElement(c.E,null,r.createElement(D.S,{onChange:J,current:Y,onClickEmptyStateCTA:()=>(0,s.rR)(T,{item:M.CONFIG_NEW_DS_EMPTY_STATE,src:q}),filter:le=>(F?F?.(le):!0)&&(0,y.Zn)(le,ie)&&!le.meta.builtIn,variables:w,tracing:v,metrics:R,type:B,annotations:U,alerting:K,pluginId:N,logs:L,dashboard:x,mixed:A}),r.createElement(oe,{className:ee.appendBuiltInDataSourcesList}))),r.createElement("div",{className:ee.rightColumn},r.createElement("div",{className:ee.builtInDataSources},r.createElement(c.E,{className:ee.builtInDataSourcesList},r.createElement(oe,null)),V&&o.$.featureToggles.editPanelCSVDragAndDrop&&r.createElement(g.gH,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:E.o2,multiple:!1,accept:E.ZF,onDrop:te}},r.createElement(g.wI,null))),r.createElement("div",{className:ee.newDSSection},r.createElement("span",{className:ee.newDSDescription},r.createElement(u.x6,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),r.createElement(a.r,{variant:"secondary",onClick:()=>{(0,s.rR)(T,{item:M.CONFIG_NEW_DS,src:q}),H()}}))))}function S(v){return{modal:(0,t.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${v.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,t.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${v.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${v.spacing(4)};
      border-right: 1px solid ${v.colors.border.weak};

      ${v.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${v.spacing(4)};

      ${v.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,t.css)`
      flex: 1 1;
      margin-bottom: ${v.spacing(4)};

      ${v.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,t.css)`
      ${v.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${v.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,t.css)`
      ${v.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,t.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,t.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${v.colors.text.secondary};
    `,searchInput:(0,t.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${v.spacing(1)};
    `}}},51612:(Q,I,e)=>{"use strict";e.d(I,{s:()=>B});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(80279),m=e(7887),i=e(87073),l=e(96540),d=e(13544),c=e(14110),g=e(40845),u=e(10354),E=e(14578),p=e(17464),b=e(40276),a=e(71678),h=e(55852),P=e(2913),y=e(44836),C=e(97427),f=e(68706),D=e(87282),T=e(11219);function M(V){const{dataSource:F}=V,z=(0,g.$j)(),Y=S(z,F?.meta.builtIn);return F?l.createElement("img",{className:Y.pickerDSLogo,alt:`${F.meta.name} logo`,src:F.meta.info.logos.small}):O()}function O(){const V=(0,g.of)(S);return l.createElement("div",{className:V.pickerDSLogo})}function S(V,F=!1){return{pickerDSLogo:(0,t.css)`
      height: 20px;
      width: 20px;
      filter: invert(${F&&V.isLight?1:0});
    `}}var v=e(50481),x=e(47311);const A="dashboards_dspicker_clicked",R={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function B(V){const{current:F,onChange:z,hideTextValue:Y=!1,width:H,inputId:k,noDefault:ee=!1,disabled:ie=!1,placeholder:fe="Select data source",...q}=V,Z=(0,g.of)(U,V),[J,G]=(0,l.useState)(!1),[ne,te]=(0,l.useState)(!1),[oe,le]=(0,l.useState)(""),{onKeyDown:ue,keyboardEvents:Te}=(0,C.d)(),he=(0,l.useRef)(null),[re,De]=(0,l.useState)(),[Fe,Ee]=(0,l.useState)(),Me=(0,D.ps)(F),ze=(0,D.ps)("-- Grafana --"),xe=!F&&ee?void 0:Me,We=oe&&J?l.createElement(O,null):l.createElement(M,{dataSource:xe}),be=[(0,n.cY)(4),(0,r.Ej)({apply({availableHeight:se,elements:ae}){ae.floating.style.maxHeight=`${Math.max(200,se-20)}px`,ae.floating.style.minHeight="200px"}}),(0,r.UU)({fallbackStrategy:"initialPlacement",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{refs:pe,floatingStyles:Ue}=(0,s.we)({open:J,placement:"bottom-start",onOpenChange:G,middleware:be,whileElementsMounted:r.ll,strategy:"fixed"}),we=(0,l.useCallback)(se=>{pe.setReference(se),De(se)},[pe]),je=(0,l.useCallback)(()=>{le(""),G(!1),re?.focus()},[G,re]),{overlayProps:He,underlayProps:rt}=(0,i.e)({onClose:je,isDismissable:!0,isOpen:J,shouldCloseOnInteractOutside:se=>re?!re.isSameNode(se):!1},he),{dialogProps:Je}=(0,o.s)({"aria-label":"Opened data source picker list"},he);function Ve(){(0,c.rR)(A,{item:R.OPEN_DROPDOWN}),G(!0),re?.focus()}function Oe(){ze&&z(ze,[f.dx])}function Ne(se){se.key==="Tab"&&!se.shiftKey&&J&&(se.preventDefault(),Fe?.focus()),se.key==="Tab"&&se.shiftKey&&J&&je(),ue(se)}function ye(se){se.shiftKey?(se.preventDefault(),re?.focus()):je()}return(0,l.useEffect)(()=>{const se=Te.subscribe({next:ae=>{switch(ae?.code){case"ArrowDown":Ve(),ae.preventDefault();break;case"ArrowUp":Ve(),ae.preventDefault();break;case"Escape":je(),ae.preventDefault();break}}});return()=>se.unsubscribe()}),l.createElement("div",{className:Z.container,"data-testid":d.Tp.components.DataSourcePicker.container},l.createElement("div",{className:Z.trigger,onClick:Ve},l.createElement(u.p,{id:k||"data-source-picker",className:ne?void 0:Z.input,"data-testid":d.Tp.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:xe?We:void 0,suffix:l.createElement(E.I,{name:J?"search":"angle-down"}),placeholder:Y?"":(0,x.q7)(xe)||fe,onFocus:()=>{te(!0)},onBlur:()=>{te(!1)},onKeyDown:Ne,value:oe,onChange:se=>{Ve(),le(se.currentTarget.value)},ref:we,disabled:ie})),J?l.createElement(p.ZL,null,l.createElement("div",{...rt}),l.createElement("div",{ref:he,...He,...Je},l.createElement(w,{...q,style:Ue,ref:pe.setFloating,footerRef:Ee,current:xe,filterTerm:oe,keyboardEvents:Te,onChange:(se,ae)=>{je(),se.uid!==xe?.uid&&(z(se,ae),(0,c.rR)(A,{item:R.SELECT_DS,ds_type:se.type}))},onClose:je,onClickAddCSV:Oe,onDismiss:je,onNavigateOutsiteFooter:ye}))):null)}function U(V,F){return{container:(0,t.css)({position:"relative",cursor:F.disabled?"not-allowed":"pointer",width:V.spacing(F.width||"auto")}),trigger:(0,t.css)({cursor:"pointer",pointerEvents:F.disabled?"none":"auto"}),input:(0,t.css)({"input::placeholder":{color:F.disabled?V.colors.action.disabledText:V.colors.text.primary}})}}const w=l.forwardRef((V,F)=>{const{filterTerm:z,onChange:Y,onClose:H,onClickAddCSV:k,current:ee,filter:ie}=V,fe=(0,l.useCallback)(J=>{Y(J)},[Y]),q=(0,l.useCallback)(()=>{k?.(),H(),(0,c.rR)(A,{item:R.ADD_FILE})},[k,H]),Z=(0,g.of)(K);return l.createElement("div",{style:V.style,ref:F,className:Z.container},l.createElement(b.E,null,l.createElement(T.S,{...V,enableKeyboardNavigation:!0,className:Z.dataSourceList,current:ee,onChange:fe,filter:J=>(ie?ie?.(J):!0)&&(0,x.Zn)(J,z),onClickEmptyStateCTA:()=>(0,c.rR)(A,{item:R.CONFIG_NEW_DS_EMPTY_STATE})})),l.createElement(m.n1,null,l.createElement(N,{...V,onClickAddCSV:q,onChange:fe,onNavigateOutsiteFooter:V.onNavigateOutsiteFooter})))});w.displayName="PickerContent";function K(V){return{container:(0,t.css)({display:"flex",flexDirection:"column",background:V.colors.background.primary,boxShadow:V.shadows.z3}),picker:(0,t.css)({background:V.colors.background.secondary}),dataSourceList:(0,t.css)({flex:1}),footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}function N({onClose:V,onChange:F,onClickAddCSV:z,...Y}){const H=(0,g.of)(L),k=Y.uploadFile&&P.Ay.featureToggles.editPanelCSVDragAndDrop,ee=fe=>{fe.key==="Tab"&&Y.onNavigateOutsiteFooter(fe)},ie=fe=>{fe.key==="Tab"&&fe.shiftKey&&Y.onNavigateOutsiteFooter(fe)};return l.createElement("div",{className:H.footer},l.createElement(a.$s,null,({showModal:fe,hideModal:q})=>l.createElement(h.$n,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{V(),fe(v.p,{reportedInteractionFrom:"ds_picker",tracing:Y.tracing,dashboard:Y.dashboard,mixed:Y.mixed,metrics:Y.metrics,type:Y.type,annotations:Y.annotations,variables:Y.variables,alerting:Y.alerting,pluginId:Y.pluginId,logs:Y.logs,filter:Y.filter,uploadFile:Y.uploadFile,current:Y.current,onDismiss:q,onChange:(Z,J)=>{F(Z,J),q()}}),(0,c.rR)(A,{item:R.OPEN_ADVANCED_DS_PICKER})},ref:Y.footerRef,onKeyDown:k?ie:ee},l.createElement(y.x6,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),l.createElement(E.I,{name:"arrow-right"}))),k&&l.createElement(h.$n,{variant:"secondary",size:"sm",onClick:z,onKeyDown:ee},"Add csv or spreadsheet"))}function L(V){return{footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}},47311:(Q,I,e)=>{"use strict";e.d(I,{Df:()=>s,Tj:()=>m,Zn:()=>i,q7:()=>o,tw:()=>l});var t=e(14792),n=e(36974),r=e(14678);function s(d,c){return!d||!c?!1:typeof c=="string"?d.uid===c:d.uid===c.uid}function o(d){if(d){if(typeof d=="string")return`${d} - not found`;if("name"in d)return d.name;if(d.uid)return`${d.uid} - not found`}}function m(d,c,g){return(E,p)=>{const b=E.name.toUpperCase(),a=p.name.toUpperCase();if(d&&s(E,d))return-1;if(d&&s(p,d))return 1;const h=c.indexOf(E.uid),P=c.indexOf(p.uid);if(h>-1&&h>P)return-1;if(P>-1&&P>h)return 1;const y=g.includes(E.uid),C=g.includes(p.uid);return y&&!C?-1:C&&!y||E.meta.builtIn&&!p.meta.builtIn?1:p.meta.builtIn&&!E.meta.builtIn||b<a?-1:1}}function i(d,c=""){return d.name.toLowerCase().includes(c.toLowerCase())}function l(d){if(!d.uid)return;const c=(0,t.UA)().getCurrent()?.uid??"";if(d.uid===r.uv)return(0,n.B1)(c);(0,n.dH)(c,d.uid)}},83883:(Q,I,e)=>{"use strict";e.d(I,{I:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},87282:(Q,I,e)=>{"use strict";e.d(I,{Kr:()=>m,TX:()=>o,dR:()=>l,ps:()=>i});var t=e(96540),n=e(78685),r=e(19347);const s="grafana.features.datasources.components.picker.DataSourceDropDown.history";function o(){const[d=[],c]=(0,n.A)(s,[]),g=(0,t.useCallback)(u=>{u.meta.builtIn||(d.includes(u.uid)?(d.splice(d.findIndex(E=>u.uid===E),1),c([...d,u.uid])):c([...d,u.uid].slice(1,6)))},[d,c]);return[d,g]}function m(d){return(0,r.l)().getList(d)}function i(d){const c=(0,r.l)();return c.getInstanceSettings(d)}function l(d){const{keyboardEvents:c,containerRef:g}=d,u=(0,t.useRef)(0),E="data-role",p="keyboardSelectableItem",b={[E]:p},a=`[${E}="${p}"`,h="data-selectedItem",P=`[${h}="true"]`,y=(0,t.useCallback)(f=>{const D=g?.current?.querySelectorAll(a),T=D?.item(f%D?.length);D?.forEach(M=>M.setAttribute(h,"false")),T&&(T.scrollIntoView({block:"center"}),T.setAttribute(h,"true"))},[g,a]),C=(0,t.useCallback)(()=>{g?.current?.querySelector(P)?.querySelector("button")?.click()},[g,P]);return(0,t.useEffect)(()=>{if(!c)return;const f=c.subscribe({next:D=>{switch(D?.code){case"ArrowDown":{y(++u.current),D.preventDefault();break}case"ArrowUp":u.current=u.current>0?u.current-1:u.current,y(u.current),D.preventDefault();break;case"Enter":C();break}}});return()=>f.unsubscribe()},[c,y,C]),(0,t.useEffect)(()=>{const f=new MutationObserver(D=>{D.some(M=>M.addedNodes&&M.addedNodes.length>0||M.removedNodes&&M.removedNodes.length>0)&&y(0)});return g.current&&f.observe(g.current,{childList:!0}),()=>{f.disconnect()}},[g,a,y]),[b,P]}},34258:(Q,I,e)=>{"use strict";e.d(I,{du:()=>ie,Qq:()=>Z,PK:()=>z,G2:()=>fe,bn:()=>H,Ge:()=>Y,jB:()=>q});var t=e(69129),n=e(71733),r=e(26657),s=e(17172),o=e(32264),m=e(12131),i=e(82467),l=e(10096),d=e(27677),c=e(6320),g=e(31193),u=e(27716),E=e(22854),p=e(31678),b=e(75505),a=e(80714);const h=async()=>await(0,d.AI)().get("/api/datasources"),P=async J=>{const G=await(0,b.s)((0,d.AI)().fetch({method:"GET",url:`/api/datasources/${J}`,params:(0,a.F)(),showErrorAlert:!1}));if(G.ok)return G.data;throw Error(`Could not find data source by ID: "${J}"`)},y=async J=>{const G=await(0,b.s)((0,d.AI)().fetch({method:"GET",url:`/api/datasources/uid/${J}`,params:(0,a.F)(),showErrorAlert:!1}));if(G.ok)return G.data;throw Error(`Could not find data source by UID: "${J}"`)},C=async J=>{try{return await y(J)}catch{console.log(`Failed to lookup data source using UID "${J}"`)}try{return await P(J)}catch{console.log(`Failed to lookup data source using ID "${J}"`)}throw Error("Could not find data source")},f=J=>(0,d.AI)().post("/api/datasources",J),D=()=>(0,d.AI)().get("/api/plugins",{enabled:1,type:"datasource"}),T=J=>(0,d.AI)().put(`/api/datasources/uid/${J.uid}`,J,{showErrorAlert:!1,showSuccessAlert:!1}),M=J=>(0,d.AI)().delete(`/api/datasources/uid/${J}`);var O=e(83883),S=e(4589),v=e(43429),x=e(33378);function A(J){const G=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(le=>le),ne={},te={},oe=B();for(const le of G)ne[le.id]=le;for(const le of J){const ue=oe.find(he=>he.id===le.id);if((le.enterprise||ue)&&(le.category="enterprise",le.unlicensed=!(0,x.a)("enterprise.plugins"),le.info.links=ue?.info?.links||le.info.links),le.info.links)for(const he of le.info.links)he.name="Learn more";(G.find(he=>he.id===le.category)||ne.other).plugins.push(le),te[le.id]=le}for(const le of G){if(le.id==="cloud"&&le.plugins.push(U()),le.id==="enterprise")for(const ue of oe)te[ue.id]||le.plugins.push(ue);R(le.plugins)}return G.filter(le=>le.plugins.length>0)}function R(J){const G={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};J.sort((ne,te)=>{const oe=G[ne.id]||0,le=G[te.id]||0;return oe>le?-1:oe<le||ne.name>te.name?1:-1})}function B(){return[w({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),w({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),w({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),w({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),w({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),w({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),w({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),w({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),w({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),w({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),w({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),w({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),w({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),w({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),w({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),w({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),w({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),w({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"}),w({id:"grafana-pagerduty-datasource",description:"PagerDuty datasource",name:"PagerDuty",imgUrl:"public/img/plugins/pagerduty.svg"})]}function U(){return{id:"gcloud",name:"Grafana Cloud",type:v.QE.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function w(J){return{id:J.id,name:J.name,type:v.QE.datasource,module:"phantom",baseUrl:"",info:{description:J.description,logos:{small:J.imgUrl,large:J.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+J.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var K=e(74984),N=e(36227),L=e(54226);const V=J=>{let G,ne;return J.error&&J.error instanceof r.b1?(G=J.error.message,ne=J.error.details):(0,s.NF)(J)?G=J.data.message??`HTTP error ${J.statusText}`:J instanceof Error&&(G=J.message),{message:G,details:ne}},F=J=>{const{details:G,message:ne,status:te}=J;return{status:te,message:ne,details:G}},z=(J,G={loadDataSource:k,loadDataSourceMeta:ee,getDataSource:L.U4,getDataSourceMeta:L.Fj,importDataSourcePlugin:E.cS})=>async(ne,te)=>{if(!J){ne((0,N.qR)(new Error("Invalid UID")));return}try{const oe=await ne(G.loadDataSource(J));await ne(G.loadDataSourceMeta(oe));const le=G.getDataSource(te().dataSources,J),ue=G.getDataSourceMeta(te().dataSources,le.type),Te=await G.importDataSourcePlugin(ue);ne((0,N.Ks)(Te))}catch(oe){oe instanceof Error&&ne((0,N.qR)(oe))}},Y=(J,G=O.I.Edit,ne={getDatasourceSrv:g.tR,getBackendSrv:d.AI})=>async(te,oe)=>{const le=await ne.getDatasourceSrv().get(J),ue=G.replace(/:uid/gi,J);le.testDatasource&&(te((0,N.QZ)()),ne.getBackendSrv().withNoBackendCache(async()=>{try{const Te=await le.testDatasource(),he=F({...Te,details:{...Te.details}});te((0,N.lg)(he)),(0,S.Mh)({grafana_version:o.$.buildInfo.version,plugin_id:le.type,datasource_uid:le.uid,success:!0,path:ue}),l.lE.publish(new t.NI)}catch(Te){const he=V(Te);te((0,N.UP)({...he})),(0,S.Mh)({grafana_version:o.$.buildInfo.version,plugin_id:le.type,datasource_uid:le.uid,success:!1,path:ue}),l.lE.publish(new t.LL)}}))};function H(){return async J=>{if(!l.TP.hasPermission(p.AccessControlAction.DataSourcesRead))return;J((0,N.TN)());const G=await h();J((0,N.E1)(G))}}function k(J){return async G=>{let ne=await C(J);return J!==ne.uid&&(window.location.href=n.I.assureBaseUrl(`/datasources/edit/${ne.uid}`),ne={}),G((0,N.jz)(ne)),ne}}function ee(J){return async G=>{const ne=await(0,u.x)(J.type),te=await(0,E.cS)(ne),oe=te.DataSourceClass.prototype instanceof r.iy,le={...ne,isBackend:ne.backend||oe};G((0,N.gZ)(le)),te.meta=le,G((0,i.Vz)((0,K.R4)(J,te)))}}function ie(J,G=O.I.Edit){return async()=>{const ne={type:J.id,access:"proxy"},te=await f(ne),oe=G.replace(/:uid/gi,te.datasource.uid);await(0,g.tR)().reload(),await l.TP.fetchUserPermissions(),(0,S.V9)({grafana_version:o.$.buildInfo.version,plugin_id:J.id,datasource_uid:te.datasource.uid,plugin_version:te.meta?.info?.version,path:oe}),m.Ny.push(oe)}}function fe(){return async J=>{J((0,N.Gc)());const G=await D(),ne=A(G);J((0,N.f$)({plugins:G,categories:ne}))}}function q(J){return async G=>{try{await T(J)}catch(ne){const te=V(ne);return G((0,N.UP)(te)),Promise.reject(J)}return await(0,g.tR)().reload(),G(k(J.uid))}}function Z(){return async(J,G)=>{const{uid:ne}=G().dataSources.dataSource;try{await M(ne),await(0,g.tR)().reload();const te=c.b.DataSources;m.Ny.push(te)}catch(te){const oe=V(te);J((0,N.UP)(oe))}}}},458:(Q,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(96540),n=e(83883);const r=(0,t.createContext)(n.I)},11084:(Q,I,e)=>{"use strict";e.d(I,{$k:()=>y,BY:()=>E,S4:()=>D,Tn:()=>f,US:()=>p,Um:()=>h,_e:()=>T,aM:()=>O,hx:()=>a,k9:()=>P,oU:()=>u,u1:()=>M,xw:()=>C});var t=e(96540),n=e(97007),r=e(28138),s=e(10096),o=e(31678),m=e(28444),i=e(11959),l=e(34258),d=e(458),c=e(36227),g=e(54226);const u=S=>{const v=(0,o.useDispatch)();(0,t.useEffect)(()=>(v((0,l.PK)(S)),function(){v((0,n.N)({cleanupAction:A=>A.dataSourceSettings=c.IJ}))}),[S,v])},E=S=>{const v=(0,o.useDispatch)(),x=O();return()=>v((0,l.Ge)(S,x.Edit))},p=()=>{const S=(0,o.useDispatch)(),v=(0,o.useSelector)(A=>A.dataSources.isLoadingDataSources),x=(0,o.useSelector)(A=>A.dataSources.dataSources);return(0,t.useEffect)(()=>{S((0,l.bn)())},[S]),{isLoading:v,dataSources:x}},b=S=>{const v=useDispatch();useEffect(()=>{v(loadDataSource(S))},[v,S])},a=()=>{const S=(0,o.useDispatch)();(0,t.useEffect)(()=>{S((0,l.G2)())},[S])},h=()=>{const S=(0,o.useDispatch)(),v=O();return x=>{S((0,l.du)(x,v.Edit))}},P=()=>{const S=(0,o.useDispatch)();return async v=>S((0,l.jB)(v))},y=()=>{const S=(0,o.useDispatch)(),{name:v}=(0,o.useSelector)(x=>x.dataSources.dataSource);return()=>{r.A.publish(new m.bY({title:"Delete",text:`Are you sure you want to delete the "${v}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>S((0,l.Qq)())}))}},C=S=>(0,o.useSelector)(v=>(0,g.U4)(v.dataSources,S)),f=S=>{const v=C(S);return(0,i.h)(v)},D=S=>(0,o.useSelector)(v=>(0,g.Fj)(v.dataSources,S)),T=()=>(0,o.useSelector)(S=>S.dataSourceSettings),M=S=>{const v=C(S),x=v.readOnly===!0,A=s.TP.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,v),R=s.TP.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,v);return{readOnly:x,hasWriteRights:A,hasDeleteRights:R}},O=()=>(0,t.useContext)(d.C)},85464:(Q,I,e)=>{"use strict";e.d(I,{$k:()=>r.$k,BY:()=>r.BY,Bs:()=>o.Bs,CR:()=>n.C,C_:()=>o.C_,S4:()=>r.S4,Tk:()=>o.Tk,Tn:()=>r.Tn,US:()=>r.US,Um:()=>r.Um,_e:()=>r._e,aM:()=>r.aM,du:()=>t.du,eB:()=>o.eB,hp:()=>m.hp,hx:()=>r.hx,jz:()=>o.jz,k9:()=>r.k9,lv:()=>m.lv,oU:()=>r.oU,rb:()=>o.rb,u1:()=>r.u1,wC:()=>m.wC,xs:()=>m.xs,xw:()=>r.xw,zC:()=>m.zC});var t=e(34258),n=e(458),r=e(11084),s=e(74984),o=e(36227),m=e(54226)},74984:(Q,I,e)=>{"use strict";e.d(I,{$m:()=>g,R4:()=>d,Vh:()=>c});var t=e(43429),n=e(33378),r=e(76323),s=e(2913),o=e(10096),m=e(35538),i=e(31678);const l="Loading";function d(E,p){const b=p.meta,a=s.Ay.featureToggles.featureHighlights,h={img:b.info.logos.large,id:"datasource-"+E.uid,url:"",text:E.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${E.uid}`,text:"Settings",url:`datasources/edit/${E.uid}/`}]};if(p.configPages)for(const T of p.configPages)h.children.push({active:!1,text:T.title,icon:T.icon,url:`datasources/edit/${E.uid}/?page=${T.id}`,id:`datasource-page-${T.id}`});b.includes&&u(b.includes)&&o.TP.hasRole("Admin")&&h.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${E.uid}`,text:"Dashboards",url:`datasources/edit/${E.uid}/dashboards`});const P=E.type===l,y="feature-highlights-data-source-permissions-badge",C={active:!1,icon:"lock",id:`datasource-permissions-${E.uid}`,text:"Permissions",url:`datasources/edit/${E.uid}/permissions`};if((0,m.z5)()&&!P&&(C.tabSuffix=()=>(0,r.J)({experimentId:y,eventVariant:"trial"})),(0,n.a)("dspermissions.enforcement")?o.TP.hasPermissionInMetadata(i.AccessControlAction.DataSourcesPermissionsRead,E)&&h.children.push(C):a&&!P&&h.children.push({...C,url:C.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:y})}),s.Ay.analytics?.enabled){const T="feature-highlights-data-source-insights-badge",M={active:!1,icon:"info-circle",id:`datasource-insights-${E.uid}`,text:"Insights",url:`datasources/edit/${E.uid}/insights`};(0,m.z5)()&&!P&&(M.tabSuffix=()=>(0,r.J)({experimentId:T,eventVariant:"trial"})),(0,n.a)("analytics")?o.TP.hasPermission(i.AccessControlAction.DataSourcesInsightsRead)&&h.children.push(M):a&&!P&&h.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:T})})}const f="feature-highlights-query-caching-badge",D={active:!1,icon:"database",id:`datasource-cache-${E.uid}`,text:"Cache",url:`datasources/edit/${E.uid}/cache`,hideFromTabs:!b.isBackend||!s.Ay.caching.enabled};return(0,m.z5)()&&!P&&(D.tabSuffix=()=>(0,r.J)({experimentId:f,eventVariant:"trial"})),(0,n.a)("caching")?o.TP.hasPermissionInMetadata(i.AccessControlAction.DataSourcesCachingRead,E)&&h.children.push(D):a&&!P&&h.children.push({...D,url:D.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:f})}),h}function c(E,p){let b={text:""};for(const a of E.children)if(a.id.indexOf(p)>0){a.active=!0,b=a;break}return{main:E,node:b}}function g(E){const p=d({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:l,typeName:l,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.QE.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return c(p,E)}function u(E){return E.find(p=>p.type==="dashboard")!==void 0}},36227:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>M,Bs:()=>c,C_:()=>p,E1:()=>m,Gc:()=>l,IJ:()=>h,Ks:()=>P,QZ:()=>C,TN:()=>o,Tk:()=>b,UP:()=>D,eB:()=>u,f$:()=>d,gZ:()=>i,jz:()=>s,lg:()=>f,qR:()=>y,rb:()=>E});var t=e(30038),n=e(19484);const r={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.R.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.VP)("dataSources/dataSourceLoaded"),o=(0,t.VP)("dataSources/dataSourcesLoad"),m=(0,t.VP)("dataSources/dataSourcesLoaded"),i=(0,t.VP)("dataSources/dataSourceMetaLoaded"),l=(0,t.VP)("dataSources/dataSourcePluginsLoad"),d=(0,t.VP)("dataSources/dataSourcePluginsLoaded"),c=(0,t.VP)("dataSources/setDataSourcesSearchQuery"),g=(0,t.VP)("dataSources/setDataSourcesLayoutMode"),u=(0,t.VP)("dataSources/setDataSourceTypeSearchQuery"),E=(0,t.VP)("dataSources/setDataSourceName"),p=(0,t.VP)("dataSources/setIsDefault"),b=(0,t.VP)("dataSources/setIsSortAscending"),a=(O=r,S)=>o.match(S)?{...O,isLoadingDataSources:!0}:m.match(S)?{...O,isLoadingDataSources:!1,dataSources:S.payload,dataSourcesCount:S.payload.length}:s.match(S)?{...O,dataSource:S.payload}:c.match(S)?{...O,searchQuery:S.payload}:g.match(S)?{...O,layoutMode:S.payload}:l.match(S)?{...O,plugins:[],isLoadingDataSourcePlugins:!0}:d.match(S)?{...O,plugins:S.payload.plugins,categories:S.payload.categories,isLoadingDataSourcePlugins:!1}:u.match(S)?{...O,dataSourceTypeSearchQuery:S.payload}:i.match(S)?{...O,dataSourceMeta:S.payload}:E.match(S)?{...O,dataSource:{...O.dataSource,name:S.payload}}:p.match(S)?{...O,dataSource:{...O.dataSource,isDefault:S.payload}}:b.match(S)?{...O,isSortAscending:S.payload}:O,h={testingStatus:{},loadError:null,loading:!0,plugin:null},P=(0,t.VP)("dataSourceSettings/initDataSourceSettingsSucceeded"),y=(0,t.VP)("dataSourceSettings/initDataSourceSettingsFailed"),C=(0,t.VP)("dataSourceSettings/testDataSourceStarting"),f=(0,t.VP)("dataSourceSettings/testDataSourceSucceeded"),D=(0,t.VP)("dataSourceSettings/testDataSourceFailed"),M={dataSources:a,dataSourceSettings:(O=h,S)=>P.match(S)?{...O,plugin:S.payload,loadError:null,loading:!1}:y.match(S)?{...O,plugin:null,loadError:S.payload.message,loading:!1}:C.match(S)?{...O,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:f.match(S)?{...O,testingStatus:{status:S.payload?.status,message:S.payload?.message,details:S.payload?.details}}:D.match(S)?{...O,testingStatus:{status:"error",message:S.payload?.message,details:S.payload?.details}}:O}},54226:(Q,I,e)=>{"use strict";e.d(I,{Fj:()=>o,U4:()=>s,hp:()=>r,lv:()=>d,wC:()=>l,xs:()=>m,zC:()=>n});var t=e(41811);const n=(0,t.A)(c=>{const g=new RegExp(c.searchQuery,"i");return c.dataSources.filter(E=>g.test(E.name)||g.test(E.database)||g.test(E.type)).sort((E,p)=>c.isSortAscending?E.name.localeCompare(p.name):p.name.localeCompare(E.name))}),r=(0,t.A)(c=>{const g=new RegExp(c.dataSourceTypeSearchQuery,"i");return c.plugins.filter(u=>g.test(u.name))}),s=(c,g)=>c.dataSource.uid===g?c.dataSource:{},o=(c,g)=>c.dataSourceMeta.id===g?c.dataSourceMeta:{},m=c=>c.searchQuery,i=c=>c.layoutMode,l=c=>c.dataSourcesCount,d=c=>c.isSortAscending},4589:(Q,I,e)=>{"use strict";e.d(I,{M1:()=>s,Mh:()=>r,TR:()=>o,V9:()=>n,_i:()=>i,kg:()=>m,m3:()=>l});var t=e(14110);const n=d=>{(0,t.rR)("grafana_ds_add_datasource_clicked",d)},r=d=>{(0,t.rR)("grafana_ds_test_datasource_clicked",d)},s=d=>{(0,t.rR)("grafana_ds_explore_datasource_clicked",d)},o=d=>{(0,t.rR)("grafana_ds_create_dashboard_clicked",d)},m=d=>{(0,t.rR)("grafana_ds_datasources_list_viewed",d)},i=d=>{(0,t.rR)("connections_datasources_settings_clicked",{item:d})},l=d=>{(0,t.rR)("connections_datasources_ds_configured",d)}},11959:(Q,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(76885),n=e(71733);const r=s=>{const o=JSON.stringify({datasource:s.name,context:"explore"});return t.kM.renderUrl(n.I.assureBaseUrl("/explore"),{left:o})}},38074:()=>{"use strict"},25148:(Q,I,e)=>{"use strict";e.d(I,{n:()=>b});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(39268),m=e(14186),i=e(10354),l=e(95868),d=e(13840),c=e(40321),g=e(47694),u=e(21813),E=e(80744),p=e(19448);const b=P=>{const{value:y,src:C,name:f,placeholder:D,onChange:T,onClear:M,mediaType:O,folderName:S,size:v,color:x,maxFiles:A}=P,R=(0,r.of)(h),B=(0,r.$j)(),U=(0,n.createRef)(),w=n.createElement(p.i,{onChange:T,value:y,mediaType:O,folderName:S,maxFiles:A});let K=C;!K&&y&&(K=(0,u.D)(y));const N=x&&{fill:B.visualization.getColorByName(x)},L=()=>y&&K?n.createElement(g.y,{src:K,className:R.icon,style:{...N}}):n.createElement(s.z9,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(o.C,null,n.createElement(m.I,{label:null,grow:!0},n.createElement(i.p,{value:a(C,f),placeholder:D,readOnly:!0,prefix:K&&n.createElement(g.y,{src:K,className:R.icon,style:{...N}}),suffix:n.createElement(s.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:M})})));return n.createElement(l.I,{content:w},(F,z,Y)=>n.createElement(n.Fragment,null,U.current&&n.createElement(d.A,{...Y,referenceElement:U.current,onMouseEnter:F,onKeyDown:H=>{(0,c.Q)(H,z)}}),n.createElement("div",{ref:U,className:R.pointer,onClick:F,onKeyDown:H=>{H.key==="Enter"&&F()},role:"button",tabIndex:0},v===E.Iy.SMALL&&L(),v===E.Iy.NORMAL&&V())))};function a(P,y){if(P?.startsWith("public/img/icons")){const C=y?.lastIndexOf(".svg")??0;if(C>0)return y.substring(0,C)}return y}const h=P=>({pointer:(0,t.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,t.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},19448:(Q,I,e)=>{"use strict";e.d(I,{i:()=>K});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(17172),i=e(40845),l=e(55852),d=e(2913),c=e(80744),g=e(88575),u=e(37270),E=e(47694);function p({secondaryText:L="Drag and drop here or browse"}){const V=(0,i.of)(a);return o.createElement("div",{className:V.iconWrapper},o.createElement("small",{className:V.small},L),o.createElement(l.$n,{type:"button",icon:"upload"},"Upload"))}const b=({mediaType:L,setFormData:V,setUpload:F,error:z})=>{const Y=(0,i.of)(a),[H,k]=(0,o.useState)(!1),[ee,ie]=(0,o.useState)(""),fe=()=>o.createElement(g.D,{label:"Preview"},o.createElement("div",{className:Y.iconPreview},L===c.zu.Icon&&o.createElement(E.y,{src:ee,className:Y.img}),L===c.zu.Image&&o.createElement("img",{src:ee,alt:"Preview of the uploaded file",className:Y.img}))),q=J=>{fetch(`/api/storage/delete/upload/${J.file.name}`,{method:"DELETE"}).catch(G=>console.error("cannot delete file",G))},Z=L==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return o.createElement(u.gH,{readAs:"readAsBinaryString",onFileRemove:q,options:{accept:Z,multiple:!1,onDrop:J=>{let G=new FormData;G.append("file",J[0]),ie(URL.createObjectURL(J[0])),k(!0),V(G),F(!0)}}},z.message!==""&&H?o.createElement("p",null,z.message):H?o.createElement(fe,null):o.createElement(p,null))};function a(L,V){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,t.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${L.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${L.colors.border.medium};
      background-color: ${V?L.colors.background.secondary:L.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,t.css)`
      margin: ${L.spacing(2,0,1)};
    `,small:(0,t.css)`
      color: ${L.colors.text.secondary};
      margin-bottom: ${L.spacing(2)};
    `,iconContainer:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,t.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${L.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,t.css)`
      width: 147px;
      height: 147px;
      fill: ${L.colors.text.primary};
    `}}var h=e(88323),P=e(67647),y=e(31193),C=e(70713),f=e(97222);const D=(0,o.memo)(function(V){const{columnIndex:F,rowIndex:z,style:Y,data:H}=V,{cards:k,columnCount:ee,onChange:ie,selected:fe}=H,q=F+z*ee,Z=k[q],J=(0,i.of)(M);return o.createElement("div",{style:Y},Z&&o.createElement("div",{key:Z.value,className:fe===Z.value?(0,t.cx)(J.card,J.selected):J.card,onClick:()=>ie(Z.value),onKeyDown:G=>{G.key==="Enter"&&ie(Z.value)},role:"button",tabIndex:0},Z.imgUrl.endsWith(".svg")?o.createElement(E.y,{src:Z.imgUrl,className:J.img}):o.createElement("img",{src:Z.imgUrl,alt:"",className:J.img}),o.createElement("h6",{className:J.text},Z.label.slice(0,-4))))},f.t7),T=L=>{const{onChange:V,cards:F,value:z}=L,Y=(0,i.of)(M);return o.createElement(C.Ay,{defaultWidth:680},({width:H,height:k})=>{const fe=Math.floor(H/90),q=Math.ceil(F.length/fe);return o.createElement(f.yi,{width:H,height:k,columnCount:fe,columnWidth:90,rowCount:q,rowHeight:90,itemData:{cards:F,columnCount:fe,onChange:V,selected:z},className:Y.grid},D)})},M=L=>({card:(0,t.css)`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${L.colors.action.hover};
      box-shadow: ${L.shadows.z2};
    }
  `,selected:(0,t.css)`
    border: 2px solid ${L.colors.primary.main};
    :hover {
      border-color: ${L.colors.primary.main};
    }
  `,img:(0,t.css)`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${L.colors.text.primary};
  `,text:(0,t.css)`
    color: ${L.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:(0,t.css)`
    border: 1px solid ${L.colors.border.medium};
  `}),O=L=>L===c.zu.Icon?[c.Iu.Icon,c.Iu.IOT,c.Iu.Marker]:[c.Iu.BG],S=(L,V)=>L.find(F=>V.startsWith(F.value))??L[0],v=L=>{const{value:V,mediaType:F,folderName:z,newValue:Y,setNewValue:H,maxFiles:k}=L,ee=(0,i.of)(x),ie=O(F).map(ue=>({label:ue,value:ue})),[fe,q]=(0,o.useState)(),[Z,J]=(0,o.useState)(S(ie,V?.length?V:z)),[G,ne]=(0,o.useState)([]),[te,oe]=(0,o.useState)([]),le=ue=>{ue?(ue=ue.toLowerCase(),oe(G.filter(Te=>Te.search.includes(ue)))):oe(G)};return(0,o.useEffect)(()=>{const ue=Z?.value;if(ue){const Te=F===c.zu.Icon?he=>he.name.endsWith(".svg"):he=>he.name.endsWith(".png")||he.name.endsWith(".gif");(0,y.tR)().get("-- Grafana --").then(he=>{he.listFiles(ue,k).subscribe({next:re=>{const De=[];re.forEach(Fe=>{if(Te(Fe)){const Ee=Fe.name.lastIndexOf(".");De.push({value:`${ue}/${Fe.name}`,label:Fe.name,search:(Ee?Fe.name.substring(0,Ee):Fe.name).toLowerCase(),imgUrl:`public/${ue}/${Fe.name}`})}}),ne(De),oe(De)}})})}},[F,Z,k]),o.createElement(o.Fragment,null,o.createElement(g.D,null,o.createElement(h.l6,{options:ie,onChange:J,value:Z,menuShouldPortal:!1})),o.createElement(g.D,null,o.createElement(P.Z,{value:fe??"",placeholder:"Search",onChange:ue=>{le(ue),q(ue)}})),te&&o.createElement("div",{className:ee.cardsWrapper},o.createElement(T,{cards:te,onChange:ue=>H(ue),value:Y})))},x=L=>({cardsWrapper:(0,t.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var A=e(10354),R=e(60029),B=e(21813);const U=L=>{const{newValue:V,setNewValue:F,mediaType:z}=L,Y=(0,i.of)(w),H=(0,B.D)(V);let k=V?.substring(V.lastIndexOf("/")+1,V.lastIndexOf("."));return k.length>20&&(k=k.substring(0,20)+"..."),o.createElement(o.Fragment,null,o.createElement(g.D,null,o.createElement(A.p,{onChange:ee=>F(ee.currentTarget.value),value:V})),o.createElement("div",{className:Y.iconContainer},o.createElement(g.D,{label:"Preview"},o.createElement("div",{className:Y.iconPreview},z===c.zu.Icon&&o.createElement(E.y,{src:H,className:Y.img}),z===c.zu.Image&&V&&o.createElement("img",{src:H,alt:"Preview of the selected URL",className:Y.img}))),o.createElement(R.J,null,k)))},w=L=>({iconContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,t.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${L.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,t.css)`
    width: 147px;
    height: 147px;
    fill: ${L.colors.text.primary};
  `}),K=L=>{const{value:V,onChange:F,mediaType:z,folderName:Y,maxFiles:H}=L,k=(0,i.of)(N),ee=()=>{F(V)},ie=(0,o.createRef)(),{dialogProps:fe}=(0,n.s)({},ie),{overlayProps:q}=(0,s.e)({onClose:ee,isDismissable:!0,isOpen:!0},ie),Z=V&&V.includes("://"),[J,G]=(0,o.useState)(V??""),[ne,te]=(0,o.useState)(Z?c.QC.URL:c.QC.Folder),[oe,le]=(0,o.useState)(new FormData),[ue,Te]=(0,o.useState)(!1),[he,re]=(0,o.useState)({message:""}),De=xe=>`${k.resourcePickerPopoverTab} ${ne===xe&&k.resourcePickerPopoverActiveTab}`,Fe=()=>o.createElement(v,{value:V,mediaType:z,folderName:Y,newValue:J,setNewValue:G,maxFiles:H}),Ee=()=>o.createElement(U,{newValue:J,setNewValue:G,mediaType:z}),Me=()=>o.createElement(b,{mediaType:z,setFormData:le,setUpload:Te,newValue:J,error:he}),ze=()=>{switch(ne){case c.QC.Folder:return Fe();case c.QC.URL:return Ee();case c.QC.Upload:return Me();default:return Fe()}};return o.createElement(r.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{ref:ie,...q,...fe},o.createElement("div",{className:k.resourcePickerPopover},o.createElement("div",{className:k.resourcePickerPopoverTabs},o.createElement("button",{className:De(c.QC.Folder),onClick:()=>te(c.QC.Folder)},"Folder"),o.createElement("button",{className:De(c.QC.URL),onClick:()=>te(c.QC.URL)},"URL")),o.createElement("div",{className:k.resourcePickerPopoverContent},ze(),o.createElement("div",{className:k.buttonRow},o.createElement(l.$n,{variant:"secondary",onClick:()=>ee(),fill:"outline"},"Cancel"),o.createElement(l.$n,{variant:J&&J!==V?"primary":"secondary",onClick:()=>{ue?fetch("/api/storage/upload",{method:"POST",body:oe}).then(xe=>{if(xe.status>=400){xe.json().then(We=>re(We));return}else return xe.json()}).then(xe=>{(0,m.AI)().get(`api/storage/read/${xe.path}`).then(()=>G(`${d.config.appUrl}api/storage/read/${xe.path}`)).then(()=>F(`${d.config.appUrl}api/storage/read/${xe.path}`))}).catch(xe=>console.error(xe)):F(J)}},"Select"))))))},N=L=>({resourcePickerPopover:(0,t.css)`
    border-radius: ${L.shape.radius.default};
    box-shadow: ${L.shadows.z3};
    background: ${L.colors.background.primary};
    border: 1px solid ${L.colors.border.weak};
  `,resourcePickerPopoverTab:(0,t.css)`
    width: 50%;
    text-align: center;
    padding: ${L.spacing(1,0)};
    background: ${L.colors.background.secondary};
    color: ${L.colors.text.secondary};
    font-size: ${L.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,t.css)`
    color: ${L.colors.text.primary};
    font-weight: ${L.typography.fontWeightMedium};
    background: ${L.colors.background.primary};
  `,resourcePickerPopoverContent:(0,t.css)`
    width: 315px;
    font-size: ${L.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${L.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,t.css)`
    display: flex;
    width: 100%;
    border-radius: ${L.shape.radius.default} ${L.shape.radius.default} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:L.spacing(2),padding:L.spacing(1)})})},63577:(Q,I,e)=>{"use strict";e.d(I,{MediaType:()=>t.zu,ResourceFolderName:()=>t.Iu,findField:()=>o.UI,findFieldIndex:()=>o.gG,getColorDimension:()=>m,getPublicOrAbsoluteUrl:()=>p.D,getResourceDimension:()=>p.$,getScalarDimension:()=>a.H,getScaledDimension:()=>l.hX,getScaledDimensionForField:()=>l.qx,getTextDimension:()=>u});var t=e(80744),n=e(8066),r=e(58563),s=e(57875),o=e(33924);function m(h,P,y){return i((0,o.UI)(h,P.field),P,y)}function i(h,P,y){if(!h){const D=y.visualization.getColorByName(P.fixed??"grey");return{isAssumed:!!P.field?.length||!P.fixed,fixed:D,value:()=>D,get:T=>D}}const C=(0,n.Qi)(h);if(C.isByValue||h.config.mappings?.length){const D=(0,r.xg)(h,!0);D!==h.config&&(h={...h,config:D},h.state=void 0);const T=(0,s.J)({field:h,theme:y}),M=O=>T(O).color??"#ccc";return{field:h,get:O=>M(h.values[O]),value:()=>M((0,o.sB)(h))}}const f=C.getCalculator(h,y)(0,0);return{fixed:f,value:()=>f,get:D=>f,field:h}}var l=e(18379),d=e(11261),c=e(83195),g=e(52622);function u(h,P){const y=P.field?(0,o.UI)(h,P.field):h?.fields.find(C=>C.type===d.PU.string);return E(y,P)}function E(h,P){let y=P.fixed;const C=P.mode??g.RU.Fixed;if(C===g.RU.Fixed)return{isAssumed:!y,fixed:y,value:()=>y,get:D=>y};if(C===g.RU.Template){const D=T=>`TEMPLATE[${P.fixed} // ${T}]`;return h?{field:h,get:T=>D(h.values[T]),value:()=>D((0,o.sB)(h))}:(y=D(""),{isAssumed:!0,fixed:y,value:()=>y,get:T=>y})}if(!h)return{isAssumed:!0,fixed:y,value:()=>y,get:D=>y};let f=D=>(0,c.cN)(h.display(D));return{field:h,get:D=>f(h.values[D]),value:()=>f((0,o.sB)(h))}}var p=e(21813),b=e(38074),a=e(26781)},21813:(Q,I,e)=>{"use strict";e.d(I,{$:()=>s,D:()=>r});var t=e(52622),n=e(33924);function r(o){return o?o.indexOf(":/")>0?o:window.__grafana_public_path__+o:""}function s(o,m){const i=m.mode??t.q_.Fixed;if(i===t.q_.Fixed){const c=r(m.fixed);return{isAssumed:!c,fixed:c,value:()=>c,get:g=>c}}const l=(0,n.UI)(o,m.field);if(!l){const c="";return{isAssumed:!0,fixed:c,value:()=>c,get:g=>c}}if(i===t.q_.Mapping){const c=g=>r(`${g}`);return{field:l,get:g=>c(l.values[g]),value:()=>c((0,n.sB)(l))}}const d=c=>{if(l&&l.display){const g=l.display(c).icon;return r(g??"")}return""};return{field:l,get:c=>d(l.values[c]),value:()=>d((0,n.sB)(l))}}},26781:(Q,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(52622),n=e(33924);function r(o,m){return s((0,n.UI)(o,m?.field),m)}function s(o,m){if(!o){const d=m.fixed??0;return{isAssumed:!!m.field?.length||!m.fixed,fixed:d,value:()=>d,get:()=>d}}let i=d=>d%m.max;return m.mode===t.WQ.Clamped&&(i=d=>d<m.min?m.min:d>m.max?m.max:d),{field:o,get:d=>{const c=o.values[d];return c===null||typeof c!="number"?0:i(c)},value:()=>(0,n.sB)(o)}}},18379:(Q,I,e)=>{"use strict";e.d(I,{Nn:()=>m,Ru:()=>i,hX:()=>s,qx:()=>o});var t=e(58563),n=e(52622),r=e(33924);function s(l,d){return o((0,r.UI)(l,d?.field),d)}function o(l,d,c){if(!l){const a=d.fixed??0;return{isAssumed:!!d.field?.length||!d.fixed,fixed:a,value:()=>a,get:()=>a}}const g=(0,t.AP)(l),u=d.max-d.min;if(l.values.length<1||u<=0||g.delta<=0)return{fixed:d.min,value:()=>d.min,get:()=>d.min};let p=a=>d.min+a*u;if(c===n.QH.Quad){const a=Math.PI*(d.max/2)**2,h=Math.PI*(d.min/2)**2,P=a-h;p=y=>{let C=h+P*y;return Math.sqrt(C/Math.PI)*2}}const b=a=>{const h=l.values[a];let P=0;return h!==-1/0&&(P=(h-g.min)/g.delta),P>1?P=1:P<0&&(P=0),p(P)};return{get:b,value:()=>b((0,r.sB)(l)),field:l}}function m(l){return l||(l={min:0,max:1}),l.min==null&&(l.min=0),l.max==null&&(l.max=1),l}function i(l,d){let{min:c,max:g}=m(d);if(l||(l={}),l.max==null&&(l.max=g),l.min==null&&(l.min=c),l.min>l.max){const u=l.max;l.max=l.min,l.min=u}return l.min<c&&(l.min=c),l.max>g&&(l.max=g),l.fixed==null&&(l.fixed=l.min+(l.max-l.min)/2),l.field||(l.fixed>g?l.fixed=g:l.fixed<c&&(l.fixed=c)),l}},80744:(Q,I,e)=>{"use strict";e.d(I,{Iu:()=>r,Iy:()=>m,QC:()=>o,nG:()=>n,zu:()=>s});var t=e(52622);const n=Object.freeze({fixed:"",mode:t.RU.Field,field:""});var r=(i=>(i.Icon="img/icons/unicons",i.IOT="img/icons/iot",i.Marker="img/icons/marker",i.BG="img/bg",i))(r||{}),s=(i=>(i.Icon="icon",i.Image="image",i))(s||{}),o=(i=>(i.Folder="folder",i.URL="url",i.Upload="upload",i))(o||{}),m=(i=>(i.SMALL="small",i.NORMAL="normal",i))(m||{})},33924:(Q,I,e)=>{"use strict";e.d(I,{B_:()=>d,UI:()=>g,Wb:()=>m,XV:()=>i,b5:()=>l,gG:()=>u,sB:()=>E,wv:()=>c});var t=e(28240),n=e(75059),r=e(32264),s=e(63577),o=e(26781);function m(p,b){if(p?.series&&b.field)for(const a of p.series){const h=(0,s.getColorDimension)(a,b,r.$.theme2);if(!h.isAssumed||p.series.length===1)return h}return(0,s.getColorDimension)(void 0,b,r.$.theme2)}function i(p,b){if(p?.series&&b.field)for(const a of p.series){const h=(0,s.getScaledDimension)(a,b);if(!h.isAssumed||p.series.length===1)return h}return(0,s.getScaledDimension)(void 0,b)}function l(p,b){if(p?.series&&b.field)for(const a of p.series){const h=(0,o.H)(a,b);if(!h.isAssumed||p.series.length===1)return h}return(0,o.H)(void 0,b)}function d(p,b){if(p?.series&&b.field)for(const a of p.series){const h=(0,s.getResourceDimension)(a,b);if(!h.isAssumed||p.series.length===1)return h}return(0,s.getResourceDimension)(void 0,b)}function c(p,b){if(p?.series&&b.field)for(const a of p.series){const h=(0,s.getTextDimension)(a,b);if(!h.isAssumed||p.series.length===1)return h}return(0,s.getTextDimension)(void 0,b)}function g(p,b){const a=u(b,p);return a==null?void 0:p.fields[a]}function u(p,b,a){if(!(!b||!p?.length))for(let h=0;h<b.fields.length;h++){const P=b.fields[h];if(p===P.name)return h;const y=(0,t.Ct)(P,b,a);if(p===y)return h}}function E(p){const b=p.state?.calcs;if(b){const P=b[n.gy.lastNotNull];if(P!=null)return P}const a=p.values;let h=a.length-1;for(;h>=0;){const P=a[h--];if(P!=null)return P}}},9791:(Q,I,e)=>{"use strict";e.d(I,{k:()=>M});var t=e(2543),n=e(96540),r=e(84596),s=e(39070),o=e(47232),m=e(28528),i=e(24293),l=e(90708),d=e(28240),c=e(94624),g=e(24308),u=e(52622),E=e(40845),p=e(79041),b=e(41706),a=e(91126),h=e(33368),P=e(1932);function y(O,S,v){return(0,P.jM)(O,x=>{x.defaults.custom===void 0&&(x.defaults.custom={}),x.defaults.max=v;const{custom:A}=x.defaults;switch(A.stacking===void 0&&(A.stacking={group:"A"}),S){case"lines":A.drawStyle=u.GR.Line,A.stacking.mode=u.gs.None,A.fillOpacity=0;break;case"bars":A.drawStyle=u.GR.Bars,A.stacking.mode=u.gs.None,A.fillOpacity=100;break;case"points":A.drawStyle=u.GR.Points,A.stacking.mode=u.gs.None,A.fillOpacity=0;break;case"stacked_lines":A.drawStyle=u.GR.Line,A.stacking.mode=u.gs.Normal,A.fillOpacity=100,A.axisSoftMin=0;break;case"stacked_bars":A.drawStyle=u.GR.Bars,A.stacking.mode=u.gs.Normal,A.fillOpacity=100,A.axisSoftMin=0;break;default:{const R=S;throw new Error(`Invalid graph-style: ${R}`)}}})}function C(O,S,v){return(0,P.jM)(O,x=>{x.defaults.thresholds=v,x.defaults.custom=x.defaults.custom??{},x.defaults.custom.thresholdsStyle=S})}var f=e(56737),D=e(21423);function T(O){const[S,{inc:v}]=(0,f.A)(1),x=(0,r.A)(O);return(0,n.useMemo)(()=>{x&&!(0,D.J3)(O,x,D.bW)&&v()},[O,x,v]),S}function M({data:O,height:S,width:v,timeZone:x,absoluteRange:A,onChangeTime:R,loadingState:B,annotations:U,onHiddenSeriesChanged:w,splitOpenFn:K,graphStyle:N,tooltipDisplayMode:L=u.$N.Single,anchorToZero:V=!1,yAxisMaximum:F,thresholdsConfig:z,thresholdsStyle:Y,eventBus:H,vizLegendOverrides:k}){const ee=(0,E.$j)(),ie=(0,r.A)(A),fe=B===s.Gu.Loading&&ie?ie:A,q=(0,n.useMemo)(()=>({from:(0,o.KQ)(fe.from),to:(0,o.KQ)(fe.to),raw:{from:(0,o.KQ)(fe.from),to:(0,o.KQ)(fe.to)}}),[fe.from,fe.to]),Z=(0,n.useMemo)(()=>(0,m.O)((0,b.V)(b.S),"Explore"),[]),[J,G]=(0,n.useState)({defaults:{min:V?0:void 0,max:F||void 0,unit:"short",color:{mode:i.Y.PaletteClassic},custom:{drawStyle:u.GR.Line,fillOpacity:0,pointSize:5}},overrides:[]}),ne=(0,n.useMemo)(()=>{const re=y(J,N,F);return C(re,Y,z)},[J,N,F,z,Y]),te=(0,h.h)(K,q),oe=(0,n.useMemo)(()=>(0,l.we)({fieldConfig:ne,data:O,timeZone:x,replaceVariables:re=>re,theme:ee,fieldConfigRegistry:Z,dataLinkPostProcessor:te}),[Z,O,x,ee,ne,te]),le=(0,n.useMemo)(()=>(0,l.we)({fieldConfig:{defaults:{},overrides:[]},data:U,timeZone:x,replaceVariables:re=>re,theme:ee,dataLinkPostProcessor:te}),[U,x,ee,te]),ue=T(oe);(0,n.useEffect)(()=>{if(w){const re=[];oe.forEach(De=>{De.fields.map(Ee=>Ee.config?.custom?.hideFrom?.viz).every(t.identity)&&re.push((0,d.Ri)(De))}),w(re)}},[oe,w]);const Te={eventsScope:"explore",eventBus:H,sync:()=>c.y.Off,onToggleSeriesVisibility(re,De){G((0,a.M)(re,De,J,O))},dataLinkPostProcessor:te},he=(0,n.useMemo)(()=>({tooltip:{mode:L,sort:u.xB.None},legend:{displayMode:u.lm.List,showLegend:!0,placement:"bottom",calcs:[],...k}}),[L,k]);return n.createElement(p.XF,{value:Te},n.createElement(g.m,{data:{series:oe,timeRange:q,state:B,annotations:le,structureRev:ue},pluginId:"timeseries",title:"",width:v,height:S,onChangeTimeRange:R,timeZone:x,options:he}))}},72519:(Q,I,e)=>{"use strict";e.d(I,{y:()=>T});var t=e(32196),n=e(96540),r=e(42941),s=e(40845),o=e(91052),m=e(14578),i=e(56034),l=e(55852),d=e(44836),c=e(34028),g=e(9791),u=e(94354),E=e(31678);const p=E.EXPLORE_GRAPH_STYLES.map(O=>({value:O,label:O[0].toUpperCase()+O.slice(1).replace(/_/," ")}));function b(O){const{graphStyle:S,onChangeGraphStyle:v}=O;return n.createElement(u.z,{size:"sm",options:p,value:S,onChange:v})}var a=e(33390);const h="grafana.explore.style.graph",P=O=>{store.set(h,O)},y=()=>f(a.A.get(h)),C="lines",f=O=>E.EXPLORE_GRAPH_STYLES.find(v=>v===O)??C,D=20,T=({data:O,eventBus:S,height:v,width:x,absoluteRange:A,timeZone:R,annotations:B,onChangeTime:U,splitOpenFn:w,thresholdsConfig:K,thresholdsStyle:N,loadingState:L,statusMessage:V})=>{const[F,z]=(0,r.A)(!1),[Y,H]=(0,n.useState)(y),k=(0,s.of)(M),ee=(0,n.useCallback)(fe=>{(0,c.ng)(fe),H(fe)},[]),ie=(0,n.useMemo)(()=>F?O:O.slice(0,D),[O,F]);return n.createElement(o.NR,{title:(0,d.t)("graph.container.title","Graph"),titleItems:[!F&&D<O.length&&n.createElement("div",{key:"disclaimer",className:k.timeSeriesDisclaimer},n.createElement("span",{className:k.warningMessage},n.createElement(m.I,{name:"exclamation-triangle","aria-hidden":"true"}),n.createElement(d.x6,{i18nKey:"graph.container.show-only-series"},"Showing only ",{MAX_NUMBER_OF_TIME_SERIES:D}," series")),n.createElement(i.m,{content:(0,d.t)("graph.container.content","Rendering too many series in a single panel may impact performance and make data harder to read. Consider refining your queries.")},n.createElement(l.$n,{variant:"secondary",size:"sm",onClick:z},n.createElement(d.x6,{i18nKey:"graph.container.show-all-series"},"Show all ",{length:O.length}))))].filter(Boolean),width:x,height:v,loadingState:L,statusMessage:V,actions:n.createElement(b,{graphStyle:Y,onChangeGraphStyle:ee})},(fe,q)=>n.createElement(g.k,{graphStyle:Y,data:ie,height:q,width:fe,absoluteRange:A,onChangeTime:U,timeZone:R,annotations:B,splitOpenFn:w,loadingState:L,thresholdsConfig:K,thresholdsStyle:N,eventBus:S}))},M=O=>({timeSeriesDisclaimer:(0,t.css)({label:"time-series-disclaimer",display:"flex",alignItems:"center",gap:O.spacing(1)}),warningMessage:(0,t.css)({display:"flex",alignItems:"center",gap:O.spacing(.5),color:O.colors.warning.main,fontSize:O.typography.bodySmall.fontSize})})},97186:(Q,I,e)=>{"use strict";e.d(I,{$:()=>t,r:()=>n});const t={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",logContextWrapLogMessage:"grafana.explore.logs.logContext.wrapLogMessage"},n="grafana.explore.logs.visualisationType"},9651:(Q,I,e)=>{"use strict";e.d(I,{a:()=>i,d:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(87066),o=e(9663);const m=(d,c)=>({valueNavigation:(0,t.css)`
      width: ${o.QH};
      font-weight: bold;
    `,valueNavigationWrapper:(0,t.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,t.css)`
      ${c?"":`border-bottom: 1px solid ${d.colors.border.medium}`};
    `}),i=d=>d.includes(s.gs)?d.replace(s.gs,""):d,l=({valueLabels:d,expanded:c})=>{const g=(0,r.of)(m,c);return n.createElement("div",{className:g.itemLabelsWrap},n.createElement("div",{className:g.valueNavigationWrapper},d.map((u,E)=>n.createElement("span",{className:g.valueNavigation,key:u.name},i(u.name)))))}},9663:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>C,QH:()=>b,Jd:()=>a});var t=e(32196),n=e(96540),r=e(73287),s=e(14110),o=e(40845),m=e(29158),i=e(9651),l=e(57408);const d=(f,D)=>({rowWrapper:(0,t.css)`
    position: relative;
    min-width: ${b};
    padding-right: 5px;
  `,rowValue:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${f.colors.background.primary});
    }
  `,rowValuesWrap:(0,t.css)`
    padding-left: ${a};
    width: calc(${D} * ${b});
    display: flex;
  `}),c=({totalNumberOfValues:f,values:D,hideFieldsWithoutValues:T})=>{const M=(0,o.of)(d,f);return n.createElement("div",{role:"cell",className:M.rowValuesWrap},D?.map(O=>T&&(O.value===void 0||O.value===l.M)?null:n.createElement("span",{key:O.key,className:M.rowWrapper},n.createElement("span",{className:M.rowValue},O.value))))},g=f=>{const D=f.isDark?"#ce9178":"#a31515",T=f.isDark?"#73bf69":"#56a64b";return{metricName:(0,t.css)`
      color: ${T};
    `,metricValue:(0,t.css)`
      color: ${D};
    `,expanded:(0,t.css)`
      display: block;
      text-indent: 1em;
    `}},E=({value:f,index:D,length:T,isExpandedView:M})=>{const O=(0,o.of)(g),S=f.key,v=f.value;return n.createElement("span",{className:M?O.expanded:"",key:D},n.createElement("span",{className:O.metricName},S),n.createElement("span",null,"="),n.createElement("span",null,'"'),n.createElement("span",{className:O.metricValue},v),n.createElement("span",null,'"'),D<T-1&&n.createElement("span",null,", "))},p="20px",b="80px",a="25px",h=(f,D,T)=>({rowWrapper:(0,t.css)`
    border-bottom: 1px solid ${f.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${T?"":"align-items: center;"}
    ${T?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,t.css)`
    position: absolute;
    left: 0;
    ${T?"":"bottom: 0;"}
    ${T?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,t.css)`
    position: relative;
    width: calc(100% - (${D} * ${b}) - ${a});
  `,rowLabelWrap:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${p};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${p}),
        ${f.colors.background.primary}
      );
    }
  `});function P(f){let D=[],T=[];for(const M in f)M in f&&f[M]&&!M.includes("Value")?D.push({key:M,value:f[M]}):M in f&&f[M]&&M.includes("Value")&&T.push({key:M,value:f[M]});return{values:T,attributeValues:D}}const C=({listItemData:f,listKey:D,totalNumberOfValues:T,valueLabels:M,isExpandedView:O})=>{const{__name__:S,...v}=f,[x,A]=(0,r.A)(),R=M?.length??T,B=(0,o.of)(h,R,O),{values:U,attributeValues:w}=P(v),K=V=>V==="\u221E"||V==="Infinity"?"+Inf":V,N=`${S}{${w.map(V=>`${V.key}="${K(V.value)}"`)}}`,L=!!(M&&M?.length);return n.createElement(n.Fragment,null,M!==void 0&&O&&n.createElement(i.d,{valueLabels:M,expanded:O}),n.createElement("div",{key:D,className:B.rowWrapper},n.createElement("span",{className:B.copyToClipboardWrapper},n.createElement(m.K,{tooltip:"Copy to clipboard",onClick:()=>{(0,s.rR)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),A(N)},name:"copy"})),n.createElement("span",{role:"cell",className:B.rowLabelWrapWrap},n.createElement("div",{className:B.rowLabelWrap},n.createElement("span",null,S),n.createElement("span",null,"{"),n.createElement("span",null,w.map((V,F)=>n.createElement(E,{isExpandedView:O,value:V,key:F,index:F,length:w.length}))),n.createElement("span",null,"}"))),n.createElement(c,{hideFieldsWithoutValues:L,totalNumberOfValues:R,values:U})))}},57408:(Q,I,e)=>{"use strict";e.d(I,{E:()=>r,M:()=>n});var t=e(83195);const n=" ",r=s=>{const o={},m=[],i=s.fields.filter(c=>!["Time"].includes(c.name));let l=i.find(c=>c.name==="__name__")?.values??[];!l.length&&i.length&&i[0].values.length&&(l=Array(i[0].values.length).fill(""));const d=s.fields.filter(c=>!["__name__"].includes(c.name));return l.forEach(function(c,g){o[c]={};const u=o[c][g]??{};for(const E of d){const p=E.name;if(p!=="Time")if(typeof E?.display=="function"){const b=E?.display(E.values[g]);if(!isNaN(b.numeric))u[p]=b.numeric.toString(10);else{const a=(0,t.cN)(b);a?u[p]=a:p.includes("Value #")&&(u[p]=n)}}else console.warn("Field display method is missing!")}m.push({...u,__name__:c})}),m}},97814:(Q,I,e)=>{"use strict";e.d(I,{g:()=>r});var t=e(96540),n=e(47232);const r=({timeInMs:o,className:m,humanize:i})=>t.createElement("span",{className:m},s(o,i)),s=(o,m=!1)=>{const i=o/1e3;if(!m)return`${i.toFixed(1)}s`;const l=(0,n.Ah)(i,"seconds"),d=l.hours(),c=l.minutes(),g=l.seconds();return d?`${d}h ${c}m ${g}s`:c?`${c}m ${g}s`:`${g}s`}},92599:(Q,I,e)=>{"use strict";e.d(I,{V:()=>ye});var t=e(32196),n=e(96540),r=e(42941),s=e(41987),o=e(6709);function m(ae){if(ae?.tracesToLogsV2)return ae.tracesToLogsV2;if(!ae?.tracesToLogs)return;const ge={customQuery:!1};return ge.datasourceUid=ae.tracesToLogs.datasourceUid,ge.tags=ae.tracesToLogs.mapTagNamesEnabled?ae.tracesToLogs.mappedTags:ae.tracesToLogs.tags?.map(Pe=>({key:Pe})),ge.filterByTraceID=ae.tracesToLogs.filterByTraceID,ge.filterBySpanID=ae.tracesToLogs.filterBySpanID,ge.spanStartTimeShift=ae.tracesToLogs.spanStartTimeShift,ge.spanEndTimeShift=ae.tracesToLogs.spanEndTimeShift,ge}function i({options:ae,onOptionsChange:ge}){const Pe=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],Re=useMemo(()=>m(ae.jsonData)||{customQuery:!1},[ae.jsonData]),{query:Be="",tags:_e,customQuery:Xe}=Re,tt=useCallback(at=>{ge({...ae,jsonData:{...ae.jsonData,tracesToLogsV2:{...Re,...at},tracesToLogs:void 0}})},[ge,ae,Re]);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},React.createElement(DataSourcePicker,{inputId:"trace-to-logs-data-source-picker",filter:at=>Pe.includes(at.type),current:Re.datasourceUid,noDefault:!0,width:40,onChange:at=>tt({datasourceUid:at.uid})}))),React.createElement(InlineFieldRow,null,React.createElement(IntervalInput,{label:d("start"),tooltip:c("start","0"),value:Re.spanStartTimeShift||"",onChange:at=>{tt({spanStartTimeShift:at})},isInvalidError:g})),React.createElement(InlineFieldRow,null,React.createElement(IntervalInput,{label:d("end"),tooltip:c("end","0"),value:Re.spanEndTimeShift||"",onChange:at=>{tt({spanEndTimeShift:at})},isInvalidError:g})),React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},React.createElement(TagMappingInput,{values:_e??[],onChange:at=>tt({tags:at})}))),React.createElement(l,{disabled:Xe,type:"trace",id:"filterByTraceID",value:!!Re.filterByTraceID,onChange:at=>tt({filterByTraceID:at})}),React.createElement(l,{disabled:Xe,type:"span",id:"filterBySpanID",value:!!Re.filterBySpanID,onChange:at=>tt({filterBySpanID:at})}),React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},React.createElement(InlineSwitch,{id:"customQuerySwitch",value:Xe,onChange:at=>tt({customQuery:at.currentTarget.checked})}))),Xe&&React.createElement(InlineField,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},React.createElement(Input,{label:"Query",type:"text",allowFullScreen:!0,value:Be,onChange:at=>tt({query:at.currentTarget.value})})))}function l(ae){return React.createElement(InlineFieldRow,null,React.createElement(InlineField,{disabled:ae.disabled,label:`Filter by ${ae.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${ae.type} ID, where the ${ae.type} ID should be part of the log line`},React.createElement(InlineSwitch,{id:ae.id,value:ae.value,onChange:ge=>ae.onChange(ge.currentTarget.checked)})))}const d=ae=>`Span ${ae} time shift`,c=(ae,ge)=>`Shifts the ${ae} time of the span. Default: ${ge} (Time units can be used here, for example: 5s, -1m, 3h)`,g="Invalid time shift. See tooltip for examples.",u=({options:ae,onOptionsChange:ge})=>{let Pe=ae.type;return Pe+=ae.type==="tempo"?"/configure-tempo-data-source/#trace-to-logs":"/#trace-to-logs",React.createElement(ConfigSection,{title:"Trace to logs",description:React.createElement(ConfigDescriptionLink,{description:"Navigate from a trace span to the selected data source's logs.",suffix:Pe,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},React.createElement(i,{options:ae,onOptionsChange:ge}))};var E=e(72574),p=e(40845),b=e(31193),a=e(32901),h=e(31678),P=e(62256),y=e(56271),C=e(41811);const D=(ae,ge,Pe)=>{let Re;return Pe?Re=ge?.childSpanIds.find(Be=>ae.has(Be)&&ae.get(Be).startTime+ae.get(Be).duration<Pe):Re=ge.childSpanIds[0],Re?ae.get(Re):void 0},M=ae=>{const ge=[],Pe=[];ae.forEach(_e=>{if(_e.references[0]?.refType==="FOLLOWS_FROM"){ge.push(_e.spanID);const Xe=ae.get(_e.references[0].spanID);Xe.childSpanIds=Xe.childSpanIds.filter(tt=>tt!==_e.spanID),ae.set(Xe.spanID,{...Xe})}});const Re=_e=>{_e.forEach(Xe=>{const tt=ae.get(Xe);tt.hasChildren&&(Pe.push(...tt.childSpanIds),Re(tt.childSpanIds))})};return Re(ge),[...ge,...Pe].forEach(_e=>ae.delete(_e)),ae},S=ae=>{let ge=[...ae.keys()];return ge.forEach(Pe=>{const Re=ae.get(Pe);if(!(Re&&Re.references.length&&Re.depth))return;const Be=ae.get(Re.references[0].spanID);if(!Be){ae.delete(Re.spanID);return}const _e=Re.startTime+Re.duration,Xe=Be.startTime+Be.duration;if(Re.startTime>=Be.startTime){if(Re.startTime>=Xe){ae.delete(Re.spanID),Be.childSpanIds=Be.childSpanIds.filter(tt=>tt!==Re.spanID);return}if(_e>Xe){ae.set(Re.spanID,{...Re,duration:Xe-Re.startTime});return}return}_e<=Be.startTime?(ae.delete(Re.spanID),Be.childSpanIds=Be.childSpanIds.filter(tt=>tt!==Re.spanID)):_e<=Xe?ae.set(Re.spanID,{...Re,startTime:Be.startTime,duration:_e-Be.startTime}):ae.set(Re.spanID,{...Re,startTime:Be.startTime,duration:Xe-Be.startTime})}),ge=[...ae.keys()],ge.forEach(Pe=>{const Re=ae.get(Pe);if(Re.references.length){const Be=ae.get(Re.references[0].spanID);Re.references[0].span=Be,ae.set(Pe,{...Re})}}),ae},v=(ae,ge,Pe,Re)=>{const Be=ae.get(ge);if(!Be)return Pe;const _e=D(ae,Be,Re);let Xe;if(_e)Xe={spanId:Be.spanID,section_start:_e.startTime+_e.duration,section_end:Re||Be.startTime+Be.duration},Xe.section_start!==Xe.section_end&&Pe.push(Xe),v(ae,_e.spanID,Pe);else if(Xe={spanId:Be.spanID,section_start:Be.startTime,section_end:Re||Be.startTime+Be.duration},Xe.section_start!==Xe.section_end&&Pe.push(Xe),Be.references.length){const tt=Be.references.filter(at=>at.refType==="CHILD_OF")[0].spanID;v(ae,tt,Pe,Be.startTime)}return Pe};function x(ae){let ge=[];const Pe=ae?.spans[0].spanID;if(Pe){const Re=ae.spans.reduce((Be,_e)=>(Be.set(_e.spanID,_e),Be),new Map);try{const Be=M(Re),_e=S(Be);ge=v(_e,Pe,ge)}catch(Be){console.log("error while computing critical path for a trace",Be)}}return ge}const R=(0,C.A)(x);var B=e(3911),U=e(71656),w=e(30700);const K=.8,N=2,L=200,V=10,F=60,z=6;function Y(ae,ge,Pe,Re,Be){const _e=new Map,Xe=ge.length<F?F:Math.min(ge.length,L),tt=window.innerWidth*2;ae.width=tt,ae.height=Xe;const at=Math.min(z,Math.max(N,Xe/ge.length)),st=Xe/ge.length,dt=ae.getContext("2d",{alpha:!1});if(dt){dt.fillStyle=Be,dt.fillRect(0,0,tt,Xe);for(let ot=0;ot<ge.length;ot++){const{valueWidth:ft,valueOffset:yt,serviceName:Tt}=ge[ot],Kt=yt/Pe*tt;let Gt=ft/Pe*tt;Gt<V&&(Gt=V);let _t=_e.get(Tt);_t||(_t=`rgba(${Re(Tt).concat(K).join()})`,_e.set(Tt,_t)),dt.fillStyle=_t,dt.fillRect(Kt,ot*st,Gt,at)}}}const H=(0,B.N)(ae=>({CanvasSpanGraph:(0,t.css)`
      label: CanvasSpanGraph;
      background: ${(0,U.R)(ae,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class k extends n.PureComponent{constructor(ge){super(ge),this.getColor=Pe=>(0,w.rY)(Pe,this.props.theme),this._setCanvasRef=Pe=>{this._canvasElm=Pe},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:ge,items:Pe}=this.props;Y(this._canvasElm,Pe,ge,this.getColor,(0,U.R)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:H(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const ee=(0,p.cV)(k);var ie=e(6389);const fe=()=>({TickLabels:(0,t.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,t.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function q(ae){const{numTicks:ge,duration:Pe}=ae,Re=(0,p.of)(fe),Be=[];for(let _e=0;_e<ge+1;_e++){const Xe=_e/ge,tt=Xe===1?{right:"0%"}:{left:`${Xe*100}%`};Be.push(n.createElement("div",{key:Xe,className:Re.TickLabelsLabel,style:tt,"data-testid":"tick"},(0,ie.a3)(Pe*Xe)))}return n.createElement("div",{className:Re.TickLabels,"data-testid":"TickLabels"},Be)}var Z=e(46942),J=e.n(Z),G=e(55852),ne=e(92151);const te=()=>({GraphTick:(0,t.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function oe(ae){const{numTicks:ge}=ae,Pe=(0,p.of)(te),Re=[];for(let Be=1;Be<ge;Be++){const _e=`${Be/ge*100}%`;Re.push(n.createElement("line",{className:Pe.GraphTick,x1:_e,y1:"0%",x2:_e,y2:"100%",key:Be/ge}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Re)}const le=()=>({ScrubberHandleExpansion:J()((0,t.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:J()((0,t.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:J()((0,t.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,t.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,t.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function ue({isDragging:ae,onMouseDown:ge,onMouseEnter:Pe,onMouseLeave:Re,position:Be}){const _e=`${Be*100}%`,Xe=(0,p.of)(le),tt=J()({[Xe.ScrubberDragging]:ae});return n.createElement("g",{className:tt,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:Xe.ScrubberHandles,onMouseDown:ge,onMouseEnter:Pe,onMouseLeave:Re},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:_e,className:Xe.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:_e,className:Xe.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:Xe.ScrubberLine,y2:"100%",x1:_e,x2:_e,"data-testid":"scrubber-component-line"}))}const Te=(0,B.N)(ae=>{const ge="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Pe=(0,t.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,t.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${ge} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,t.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,U.R)(ae,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,t.css)`
      label: ViewingLayerInactive;
      fill: ${(0,U.R)(ae,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,t.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,U.R)(ae,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,t.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,t.css)`
      label: ViewingLayerDrag;
      fill: ${(0,U.R)(ae,"#44f")};
    `,ViewingLayerFullOverlay:(0,t.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Pe,ViewingLayerResetZoomHoverClassName:ge}}),he={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function re(ae,ge){const[Pe,Re]=ae<ge?[ae,ge]:[ge,ae];return{x:`${Pe*100}%`,width:`${(Re-Pe)*100}%`,leadingX:`${ge*100}%`}}class De extends n.PureComponent{constructor(ge){super(ge),this._setRoot=Pe=>{this._root=Pe},this._getDraggingBounds=Pe=>{if(!this._root)throw new Error("invalid state");const{left:Re,width:Be}=this._root.getBoundingClientRect(),[_e,Xe]=this.props.viewRange.time.current;let tt=1,at=0;return Pe===he.SHIFT_START?tt=Xe:Pe===he.SHIFT_END&&(at=_e),{clientXLeft:Re,maxValue:tt,minValue:at,width:Be}},this._handleReframeMouseMove=({value:Pe})=>{this.props.updateNextViewRangeTime({cursor:Pe})},this._handleReframeMouseLeave=()=>{this._draggerReframe.resetBounds(),this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Pe})=>{const Re=Pe,{time:Be}=this.props.viewRange,Xe={reframe:{anchor:Be.reframe?Be.reframe.anchor:Re,shift:Re}};this.props.updateNextViewRangeTime(Xe)},this._handleReframeDragEnd=({manager:Pe,value:Re})=>{const{time:Be}=this.props.viewRange,_e=Be.reframe?Be.reframe.anchor:Re,[Xe,tt]=Re<_e?[Re,_e]:[_e,Re];Pe.resetBounds(),this.props.updateViewRangeTime(Xe,tt,"minimap")},this._handleScrubberEnterLeave=({type:Pe})=>{const Re=Pe===ne.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:Re})},this._handleScrubberDragUpdate=({event:Pe,tag:Re,type:Be,value:_e})=>{Be===ne.EUpdateTypes.DragStart&&Pe.stopPropagation(),Re===he.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:_e}):Re===he.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:_e})},this._handleScrubberDragEnd=({manager:Pe,tag:Re,value:Be})=>{const[_e,Xe]=this.props.viewRange.time.current;let tt;if(Re===he.SHIFT_START)tt=[Be,Xe];else if(Re===he.SHIFT_END)tt=[_e,Be];else throw new Error("bad state");Pe.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(tt[0],tt[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:he.REFRAME}),this._draggerStart=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:he.SHIFT_START}),this._draggerEnd=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:he.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(ge,Pe){const Re=Te(this.props.theme),Be=re(ge,Pe);return[n.createElement("rect",{key:"fill",className:J()(Re.ViewingLayerDraggedShift,Re.ViewingLayerDrag),x:Be.x,y:"0",width:Be.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:J()(Re.ViewingLayerDrag),x:Be.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:ge,viewRange:Pe,numTicks:Re,theme:Be}=this.props,{preventCursorLine:_e}=this.state,{current:Xe,cursor:tt,shiftStart:at,shiftEnd:st,reframe:dt}=Pe.time,ot=at!=null||st!=null||dt!=null,[ft,yt]=Xe;let Tt=0;ft&&(Tt=ft*100);let Kt=100;yt&&(Kt=100-yt*100);let Gt;!ot&&tt!=null&&!_e&&(Gt=`${tt*100}%`);const _t=Te(Be);return n.createElement("div",{"aria-hidden":!0,className:_t.ViewingLayer,style:{height:ge}},(ft!==0||yt!==1)&&n.createElement(G.$n,{onClick:this._resetTimeZoomClickHandler,className:J()(_t.ViewingLayerResetZoom,_t.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:ge,className:_t.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Tt>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${Tt}%`,className:_t.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Kt>0&&n.createElement("rect",{x:`${100-Kt}%`,y:0,height:"100%",width:`${Kt}%`,className:_t.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(oe,{numTicks:Re}),Gt&&n.createElement("line",{className:_t.ViewingLayerCursorGuide,x1:Gt,y1:"0",x2:Gt,y2:ge-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),at!=null&&this._getMarkers(ft,at),st!=null&&this._getMarkers(yt,st),n.createElement(ue,{isDragging:at!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ft||0}),n.createElement(ue,{isDragging:st!=null,position:yt||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),dt!=null&&this._getMarkers(dt.anchor,dt.shift)),ot&&n.createElement("div",{className:_t.ViewingLayerFullOverlay}))}}const Fe=(0,p.cV)(De),Ee=()=>({container:(0,t.css)({padding:"0 0.5rem 0.5rem 0.5rem"}),canvasContainer:(0,t.css)({position:"relative"})}),Me=60,ze=4;function xe(ae){return{valueOffset:ae.relativeStartTime,valueWidth:ae.duration,serviceName:ae.process.serviceName}}function We(ae){return ae.spans.map(xe)}const be=(0,C.A)(We);class pe extends n.PureComponent{static{this.defaultProps={height:Me}}render(){const{height:ge,trace:Pe,viewRange:Re,updateNextViewRangeTime:Be,updateViewRangeTime:_e}=this.props,Xe=Ee();if(!Pe)return n.createElement("div",null);const tt=be(Pe);return n.createElement("div",{className:Xe.container},n.createElement(q,{numTicks:ze,duration:Pe.duration}),n.createElement("div",{className:Xe.canvasContainer},n.createElement(ee,{valueWidth:Pe.duration,items:tt}),n.createElement(Fe,{viewRange:Re,numTicks:ze,height:ge||Me,updateViewRangeTime:_e,updateNextViewRangeTime:Be})))}}var Ue=e(28114);function we(){const[ae,ge]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(at){if(ae.size===0)return;let st=-1,dt=!0;const ot=at.reduce((ft,yt)=>(yt.depth<=st&&(dt=!0),dt&&ft.has(yt.spanID)&&(ft.delete(yt.spanID),dt=!1,st=yt.depth),ft),new Set(ae));ge(ot)},[ae]),Re=(0,n.useCallback)(function(at){if(je(at,ae))return;let st;const dt=at.reduce((ot,ft)=>(st&&ft.depth<=st.depth?(ot.add(st.spanID),ft.hasChildren&&(st=ft)):ft.hasChildren&&!ot.has(ft.spanID)&&(st=ft),ot),new Set(ae));st&&dt.add(st.spanID),ge(dt)},[ae]),Be=(0,n.useCallback)(function(){ge(new Set)},[]),_e=(0,n.useCallback)(function(at){if(je(at,ae))return;const st=at.reduce((dt,ot)=>(ot.hasChildren&&dt.add(ot.spanID),dt),new Set);ge(st)},[ae]),Xe=(0,n.useCallback)(function(at){const st=new Set(ae);ae.has(at)?st.delete(at):st.add(at),ge(st)},[ae]);return{childrenHiddenIDs:ae,expandOne:Pe,collapseOne:Re,expandAll:Be,collapseAll:_e,childrenToggle:Xe}}function je(ae,ge){return ae.filter(Re=>Re.hasChildren).length===ge.size}function He(ae){const[ge,Pe]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Pe(new Map)},[ae,Pe]);const Re=(0,n.useCallback)(function(tt){const at=new Map(ge);at.has(tt)?at.delete(tt):at.set(tt,new y.DetailState),Pe(at)},[ge]),Be=(0,n.useCallback)(function(tt,at){const st=ge.get(tt);if(!st)return;const dt=st.toggleLogItem(at),ot=new Map(ge);return ot.set(tt,dt),Pe(ot)},[ge]),_e=(0,n.useCallback)(function(tt,at){const st=ge.get(tt);if(!st)return;const dt=st.toggleReferenceItem(at),ot=new Map(ge);return ot.set(tt,dt),Pe(ot)},[ge]);return{detailStates:ge,toggleDetail:Re,detailLogItemToggle:Be,detailLogsToggle:(0,n.useCallback)(Xe=>rt("logs",ge,Pe)(Xe),[ge]),detailWarningsToggle:(0,n.useCallback)(Xe=>rt("warnings",ge,Pe)(Xe),[ge]),detailStackTracesToggle:(0,n.useCallback)(Xe=>rt("stackTraces",ge,Pe)(Xe),[ge]),detailReferenceItemToggle:_e,detailReferencesToggle:(0,n.useCallback)(Xe=>rt("references",ge,Pe)(Xe),[ge]),detailProcessToggle:(0,n.useCallback)(Xe=>rt("process",ge,Pe)(Xe),[ge]),detailTagsToggle:(0,n.useCallback)(Xe=>rt("tags",ge,Pe)(Xe),[ge])}}function rt(ae,ge,Pe){return Re=>{const Be=ge.get(Re);if(!Be)return;let _e;ae==="tags"?_e=Be.toggleTags():ae==="process"?_e=Be.toggleProcess():ae==="warnings"?_e=Be.toggleWarnings():ae==="references"?_e=Be.toggleReferences():ae==="stackTraces"?_e=Be.toggleStackTraces():_e=Be.toggleLogs();const Xe=new Map(ge);Xe.set(Re,_e),Pe(Xe)}}function Je(){const[ae,ge]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(_e){ge(Xe=>{const tt=new Set(Xe);return tt.add(_e),tt})},[]),Re=(0,n.useCallback)(function(_e){ge(Xe=>{const tt=new Set(Xe);return tt.delete(_e),tt})},[]);return{hoverIndentGuideIds:ae,addHoverIndentGuideId:Pe,removeHoverIndentGuideId:Re}}var Ve=e(15583);function Oe(){const[ae,ge]=(0,n.useState)({time:{current:[0,1]}}),Pe=(0,n.useCallback)(function(_e){ge(Xe=>{const tt={...Xe.time,..._e};return{...Xe,time:tt}})},[]),Re=(0,n.useCallback)(function(_e,Xe){const at={current:[_e,Xe]};ge(st=>({...st,time:at}))},[]);return{viewRange:ae,updateViewRangeTime:Re,updateNextViewRangeTime:Pe}}const Ne=ae=>({noDataMsg:(0,t.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ae.typography.h4.fontSize};
    color: ${ae.colors.text.secondary};
  `});function ye(ae){const{traceProp:ge,datasource:Pe,topOfViewRef:Re,exploreId:Be,createSpanLink:_e,focusedSpanId:Xe,createFocusSpanLink:tt}=ae,{detailStates:at,toggleDetail:st,detailLogItemToggle:dt,detailLogsToggle:ot,detailProcessToggle:ft,detailReferencesToggle:yt,detailReferenceItemToggle:Tt,detailTagsToggle:Kt,detailWarningsToggle:Gt,detailStackTracesToggle:_t}=He(ae.dataFrames[0]),{removeHoverIndentGuideId:it,addHoverIndentGuideId:Mt,hoverIndentGuideIds:Dn}=Je(),{viewRange:lt,updateViewRangeTime:Ct,updateNextViewRangeTime:Vt}=Oe(),{expandOne:qt,collapseOne:rn,childrenToggle:en,collapseAll:Jt,childrenHiddenIDs:hn,expandAll:Fn}=we(),{search:Kn,setSearch:na,spanFilterMatches:Ut}=(0,Ve.SQ)(ge?.spans),[on,mn]=(0,n.useState)(""),[vn,pn]=(0,r.A)(!1),[Un,Bn]=(0,n.useState)(!1),[kn,Mn]=(0,n.useState)(!1),[xn,Vn]=(0,n.useState)(100),[aa,Jn]=(0,n.useState)({}),[_n,Hn]=(0,n.useState)({}),ba=(0,p.of)(Ne),[va,Ca]=(0,n.useState)(.4),[dn,pt]=se({refId:ae.dataFrames[0]?.refId,exploreId:ae.exploreId,datasource:Pe,splitOpenFn:ae.splitOpenFn}),Dt=Xe??dn,nn=tt??pt,gn=(0,n.useMemo)(()=>({childrenHiddenIDs:hn,detailStates:at,hoverIndentGuideIds:Dn,spanNameColumnWidth:va,traceID:ae.traceProp?.traceID}),[hn,at,Dn,va,ae.traceProp?.traceID]),Cn=(0,b.tR)().getInstanceSettings(Pe?.name),In=m(Cn?.jsonData),ga=Cn?.jsonData?.tracesToMetrics,da=Cn?.jsonData?.tracesToProfiles,Ma=Cn?.jsonData,_a=(0,n.useMemo)(()=>_e??(0,Ue.lU)({splitOpenFn:ae.splitOpenFn,traceToLogsOptions:In,traceToMetricsOptions:ga,traceToProfilesOptions:da,dataFrame:ae.dataFrames[0],createFocusSpanLink:nn,trace:ge}),[ae.splitOpenFn,In,ga,da,ae.dataFrames,nn,ge,_e]),Xa=(0,h.useSelector)(vs=>(0,a.O)(vs.user)),ps=Pe?Pe?.type:"unknown",As=ae.scrollElement?ae.scrollElement:document.getElementsByClassName(ae.scrollElementClass??"")[0],ys=R(ge);return n.createElement(n.Fragment,null,ae.dataFrames?.length&&ge?n.createElement(n.Fragment,null,n.createElement(y.TracePageHeader,{trace:ge,data:ae.dataFrames[0],timeZone:Xa,search:Kn,setSearch:na,showSpanFilters:vn,setShowSpanFilters:pn,showSpanFilterMatchesOnly:Un,setShowSpanFilterMatchesOnly:Bn,showCriticalPathSpansOnly:kn,setShowCriticalPathSpansOnly:Mn,setFocusedSpanIdForSearch:mn,spanFilterMatches:Ut,datasourceType:ps,setHeaderHeight:Vn,app:Be?s.Jk.Explore:s.Jk.Unknown}),n.createElement(pe,{trace:ge,viewRange:lt,updateNextViewRangeTime:Vt,updateViewRangeTime:Ct}),n.createElement(y.TraceTimelineViewer,{findMatchesIDs:Ut,trace:ge,traceToProfilesOptions:da,datasourceType:ps,spanBarOptions:Ma?.spanBar,traceTimeline:gn,updateNextViewRangeTime:Vt,updateViewRangeTime:Ct,viewRange:lt,timeZone:Xa,setSpanNameColumnWidth:Ca,collapseAll:Jt,collapseOne:rn,expandAll:Fn,expandOne:qt,childrenToggle:en,detailLogItemToggle:dt,detailLogsToggle:ot,detailWarningsToggle:Gt,detailStackTracesToggle:_t,detailReferencesToggle:yt,detailReferenceItemToggle:Tt,detailProcessToggle:ft,detailTagsToggle:Kt,detailToggle:st,addHoverIndentGuideId:Mt,removeHoverIndentGuideId:it,linksGetter:()=>[],createSpanLink:_a,scrollElement:As,focusedSpanId:Dt,focusedSpanIdForSearch:on,showSpanFilterMatchesOnly:Un,showCriticalPathSpansOnly:kn,createFocusSpanLink:nn,topOfViewRef:Re,headerHeight:xn,criticalPath:ys,traceFlameGraphs:aa,setTraceFlameGraphs:Jn,redrawListView:_n,setRedrawListView:Hn})):n.createElement("div",{className:ba.noDataMsg},"No data"))}function se(ae){const ge=(0,h.useSelector)(tt=>tt.explore.panes[ae.exploreId]?.panelsState.trace),Pe=ge?.spanId,Re=(0,h.useDispatch)(),Be=tt=>Re((0,P.EA)(ae.exploreId,"trace",{...ge,spanId:tt})),_e=(0,h.useSelector)(tt=>tt.explore.panes[ae.exploreId]?.queries.find(at=>at.refId===ae.refId));return[Pe,(tt,at)=>{const st={title:"Deep link to this span",url:"",internal:{datasourceUid:ae.datasource?.uid,datasourceName:ae.datasource?.name,query:{..._e,query:tt},panelsState:{trace:{spanId:at}}}},dt=_e?.queryType==="traceql"&&_e.query===tt;return(0,o.u)({link:st,internalLink:st.internal,scopedVars:{},field:{},onClickFn:dt?()=>Be(Pe===at?void 0:at):ae.splitOpenFn?()=>ae.splitOpenFn({datasourceUid:ae.datasource?.uid,queries:[{..._e,query:tt}],panelsState:{trace:{spanId:at}}}):void 0,replaceVariables:(0,E.w)().replace.bind((0,E.w)())})}]}},71656:(Q,I,e)=>{"use strict";e.d(I,{R:()=>n});var t=e(84140);function n(r,s,o){if(r.isLight)return s;{if(o){const l=(0,t.A)(s);return t.A.mostReadable(o,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const m=(0,t.A)(s).toHsl();m.l=1-m.l;const i=(0,t.A)(m);return i.isLight()?i.darken(5).toHex8String():i.lighten(5).toHex8String()}}},56271:(Q,I,e)=>{"use strict";e.d(I,{DetailState:()=>Yr,TracePageHeader:()=>ol,TraceTimelineViewer:()=>mo,filterSpans:()=>sl,transformTraceData:()=>fi});var t=e(32196),n=e(96540),r=e(14110),s=e(32264),o=e(3911),m=e(40845),i=e(71656),l=e(75888),d=e.n(l);const g={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let u;function E(){if(u)return u;const Qe=new(d())(document.body);return u=Qe,Qe}function p(Qe){const qe=E();Object.keys(Qe).forEach(et=>{const ct=Qe[et];ct&&qe.bind(g[et].binding,ct)})}function b(){E().reset()}var a=e(46942),h=e.n(a),P=e(6389);function y(Qe){const{min:qe,max:et,viewStart:ct,viewEnd:Ot}=Qe,Ft=et-qe,zt=qe+ct*Ft,un=et-(1-Ot)*Ft-zt;return(yn,$n)=>({start:(yn-zt)/un,end:($n-zt)/un})}function C(Qe,qe,et){return!Array.isArray(et.tags)||!et.tags.length?!1:et.tags.some(ct=>ct.key===Qe&&ct.value===qe)}const f=Qe=>Qe.kind==="client",D=C.bind(null,"span.kind","client"),T=Qe=>f(Qe)||D(Qe),M=Qe=>Qe.kind==="server",O=C.bind(null,"span.kind","server"),S=Qe=>M(Qe)||O(Qe),v=Qe=>Qe.statusCode===2,x=C.bind(null,"error",!0),A=C.bind(null,"error","true"),R=Qe=>v(Qe)||x(Qe)||A(Qe);function B(Qe,qe){const{depth:et}=Qe[qe];let ct=qe+1;for(;ct<Qe.length&&Qe[ct].depth>et;ct++)if(R(Qe[ct]))return!0;return!1}function U(Qe){if(Qe.length<=1||!T(Qe[0]))return!1;const et=Qe[0].depth+1;let ct=1;for(;ct<Qe.length&&Qe[ct].depth===et;){if(S(Qe[ct]))return Qe[ct];ct++}return null}const w=Qe=>Qe.kind?Qe.kind==="client":Qe.tags.some(({key:qe,value:et})=>qe==="span.kind"&&et==="client"),K=Qe=>({Ticks:(0,t.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,t.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,i.R)(Qe,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,t.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,t.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function N(Qe){const{endTime:qe,numTicks:et,showLabels:ct,startTime:Ot}=Qe;let Ft;if(ct){Ft=[];const un=(qe||0)-(Ot||0);for(let yn=0;yn<et;yn++){const $n=(Ot||0)+yn/(et-1)*un;Ft.push((0,P.a3)($n))}}const zt=(0,m.of)(K),sn=[];for(let un=0;un<et;un++){const yn=un/(et-1);sn.push(n.createElement("div",{"data-testid":"TicksID",key:yn,className:zt.TicksTick,style:{left:`${yn*100}%`}},Ft&&n.createElement("span",{className:h()(zt.TicksTickLabel,{[zt.TicksTickLabelEndAnchor]:yn>=1})},Ft[un])))}return n.createElement("div",{className:zt.Ticks},sn)}N.defaultProps={endTime:null,showLabels:null,startTime:null};const L=()=>({row:(0,t.css)({display:"flex",flex:"0 1 auto",flexDirection:"row"}),rowCell:(0,t.css)({position:"relative"})});function V(Qe){const{children:qe,className:et="",...ct}=Qe,Ot=(0,m.of)(L);return n.createElement("div",{className:h()(Ot.row,et),...ct},qe)}V.defaultProps={className:""};function F(Qe){const{children:qe,className:et="",width:ct,style:Ot,...Ft}=Qe,zt=`${ct*100}%`,sn={...Ot,flexBasis:zt,maxWidth:zt},un=(0,m.of)(L);return n.createElement("div",{className:h()(un.rowCell,et),style:sn,"data-testid":"TimelineRowCell",...Ft},qe)}F.defaultProps={className:"",style:{}},V.Cell=F;var z=e(29158);const Y=()=>({TimelineCollapser:(0,t.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function H(Qe){const{onExpandAll:qe,onExpandOne:et,onCollapseAll:ct,onCollapseOne:Ot}=Qe,Ft=(0,m.of)(Y);return n.createElement("div",{className:Ft.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(z.K,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:et}),n.createElement(z.K,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Ot}),n.createElement(z.K,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:qe}),n.createElement(z.K,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:ct}))}var k=e(92151);const ee=()=>({TimelineColumnResizer:(0,t.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,t.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,t.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,t.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,t.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,t.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,t.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,t.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `});class ie extends n.PureComponent{constructor(qe){super(qe),this._setRootElm=et=>{this._rootElm=et},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:et,width:ct}=this._rootElm.getBoundingClientRect(),{min:Ot,max:Ft}=this.props;return{clientXLeft:et,width:ct,maxValue:Ft,minValue:Ot}},this._handleDragUpdate=({value:et})=>{this.setState({dragPosition:et})},this._handleDragEnd=({manager:et,value:ct})=>{et.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(ct)},this._dragManager=new k.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let qe,et;const{position:ct,columnResizeHandleHeight:Ot}=this.props,{dragPosition:Ft}=this.state;qe=`${ct*100}%`;const zt={left:qe};let sn=!1,un=!1;const yn=ee();if(this._dragManager.isDragging()&&this._rootElm&&Ft!=null){sn=Ft<ct,un=Ft>ct;const ea=`${Math.min(ct,Ft)*100}%`,Xn=`calc(${(1-Math.max(ct,Ft))*100}% - 1px)`;et={left:ea,right:Xn}}else et=zt;et.height=Ot;const $n=sn||un;return n.createElement("div",{className:yn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:h()(yn.gripIcon,$n&&yn.gripIconDragging),style:zt,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:h()(yn.dragger,$n&&yn.draggerDragging,un&&yn.draggerDraggingRight,sn&&yn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:et,"data-testid":"TimelineColumnResizer--dragger"}))}}const fe=(0,o.N)(()=>({TimelineViewingLayer:(0,t.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,t.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,t.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,t.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function q(Qe){return Reflect.has(Qe,"isOutOfView")}function Z(Qe,qe,et){return Qe+et*(qe-Qe)}function J(Qe,qe,et){return(et-Qe)/(qe-Qe)}function G(Qe,qe){let[et,ct]=Qe<qe?[Qe,qe]:[qe,Qe];return et>=1||ct<=0?{isOutOfView:!0}:(et<0&&(et=0),ct>1&&(ct=1),{isDraggingLeft:Qe>qe,left:`${et*100}%`,width:`${(ct-et)*100}%`})}function ne(Qe,qe,et,ct,Ot){const Ft=J(Qe,qe,et),zt=J(Qe,qe,ct),sn=G(Ft,zt);if(q(sn))return null;const{isDraggingLeft:un,left:yn,width:$n}=sn,ea=fe(),Xn=(0,t.cx)({[ea.TimelineViewingLayerDraggedDraggingRight]:!un,[ea.TimelineViewingLayerDraggedReframeDrag]:!Ot,[ea.TimelineViewingLayerDraggedShiftDrag]:Ot});return n.createElement("div",{className:(0,t.cx)(ea.TimelineViewingLayerDragged,ea.TimelineViewingLayerDraggedDraggingLeft,Xn),style:{left:yn,width:$n},"data-testid":"Dragged"})}class te extends n.PureComponent{constructor(qe){super(qe),this._setRoot=et=>{this._root=et},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:et,width:ct}=this._root.getBoundingClientRect();return{clientXLeft:et,width:ct}},this._handleReframeMouseMove=({value:et})=>{const[ct,Ot]=this.props.viewRangeTime.current,Ft=Z(ct,Ot,et);this.props.updateNextViewRangeTime({cursor:Ft})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:et})=>{const{current:ct,reframe:Ot}=this.props.viewRangeTime,[Ft,zt]=ct,sn=Z(Ft,zt,et),yn={reframe:{anchor:Ot?Ot.anchor:sn,shift:sn}};this.props.updateNextViewRangeTime(yn)},this._handleReframeDragEnd=({manager:et,value:ct})=>{const{current:Ot,reframe:Ft}=this.props.viewRangeTime,[zt,sn]=Ot,un=Z(zt,sn,ct),yn=Ft?Ft.anchor:un,[$n,ea]=un<yn?[un,yn]:[yn,un];et.resetBounds(),this.props.updateViewRangeTime($n,ea,"timeline-header")},this._draggerReframe=new k.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(qe){const{boundsInvalidator:et}=this.props;et!==qe.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:qe}=this.props,{current:et,cursor:ct,reframe:Ot,shiftEnd:Ft,shiftStart:zt}=qe,[sn,un]=et,yn=Ot!=null||Ft!=null||zt!=null;let $n;!yn&&ct!=null&&ct>=sn&&ct<=un&&($n=`${J(sn,un,ct)*100}%`);const ea=fe();return n.createElement("div",{"aria-hidden":!0,className:ea.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},$n!=null&&n.createElement("div",{className:ea.TimelineViewingLayerCursorGuide,style:{left:$n},"data-testid":"TimelineViewingLayer--cursorGuide"}),Ot!=null&&ne(sn,un,Ot.anchor,Ot.shift,!1),Ft!=null&&ne(sn,un,un,Ft,!0),zt!=null&&ne(sn,un,sn,zt,!0))}}const oe=Qe=>({TimelineHeaderRow:(0,t.css)`
      label: TimelineHeaderRow;
      background: ${(0,i.R)(Qe,"#ececec")};
      border-bottom: 1px solid ${(0,i.R)(Qe,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,t.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,t.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
      display: flex;
      padding-left: ${Qe.spacing(1)};
      padding-right: ${Qe.spacing(1)};
    `});function le(Qe){const{duration:qe,nameColumnWidth:et,numTicks:ct,onCollapseAll:Ot,onCollapseOne:Ft,onColummWidthChange:zt,onExpandAll:sn,onExpandOne:un,updateViewRangeTime:yn,updateNextViewRangeTime:$n,viewRangeTime:ea,columnResizeHandleHeight:Xn}=Qe,[ra,Ua]=ea.current,Ta=(0,m.of)(oe);return n.createElement(V,{className:Ta.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(V.Cell,{className:Ta.TimelineHeaderWrapper,width:et},n.createElement("h4",{className:Ta.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(H,{onCollapseAll:Ot,onExpandAll:sn,onCollapseOne:Ft,onExpandOne:un})),n.createElement(V.Cell,{width:1-et},n.createElement(te,{boundsInvalidator:et,updateNextViewRangeTime:$n,updateViewRangeTime:yn,viewRangeTime:ea}),n.createElement(N,{numTicks:ct,startTime:ra*qe,endTime:Ua*qe,showLabels:!0})),n.createElement(ie,{columnResizeHandleHeight:Xn,position:et,onChange:zt,min:.2,max:.85}))}var ue=e(2543),Te=e(41811),he=e(27746);const re="peer.service";var De=e(30700);class Fe{constructor(qe){this.ys=[],this.heights=[],this.bufferLen=qe,this.dataLen=-1,this.lastI=-1}profileData(qe){qe!==this.dataLen&&(this.dataLen=qe,this.ys.length=qe,this.heights.length=qe,this.lastI>=qe&&(this.lastI=qe-1))}calcHeights(qe,et,ct){ct!=null&&(this.lastI=ct);let Ot=qe+this.bufferLen;if(Ot<=this.lastI)return;Ot>=this.heights.length&&(Ot=this.heights.length-1);let Ft=this.lastI;for(this.lastI===-1&&(Ft=0,this.ys[0]=0);Ft<=Ot;){const zt=this.heights[Ft]=et(Ft);this.ys[Ft+1]=this.ys[Ft]+zt,Ft++}this.lastI=Ot}calcYs(qe,et){for(;(this.ys[this.lastI]==null||qe>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,et)}confirmHeight(qe,et){let ct=qe;if(ct>this.lastI){this.calcHeights(ct,et);return}const Ot=et(ct);if(Ot===this.heights[ct])return;const Ft=Ot-this.heights[ct];for(this.heights[ct]=Ot;++ct<=this.lastI;)this.ys[ct]+=Ft;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Ft)}findFloorIndex(qe,et){this.calcYs(qe,et);let ct=0,Ot=this.lastI;if(this.ys.length<2||qe<this.ys[1])return 0;if(qe>this.ys[Ot])return Ot;let Ft;for(;ct<Ot;)if(Ft=ct+.5*(Ot-ct)|0,qe>this.ys[Ft]){if(qe<=this.ys[Ft+1])return Ft;ct=Ft}else if(qe<this.ys[Ft]){if(qe>=this.ys[Ft-1])return Ft-1;Ot=Ft}else return Ft;throw new Error(`unable to find floor index for y=${qe}`)}getRowPosition(qe,et){return this.confirmHeight(qe,et),{height:this.heights[qe],y:this.ys[qe]}}getEstimatedHeight(){const qe=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?qe|0:qe/(this.lastI+1)*this.heights.length|0}}const Ee=100;class Me extends n.Component{constructor(qe){super(qe),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const et=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(et,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=et=>this._yPositions.getRowPosition(et,this._getHeight),this.scrollToIndex=(et,ct)=>{const{scrollElement:Ot}=this.props,Ft=Ot?.getBoundingClientRect().top||0,sn=(Ot?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Ft,un=this.getRowPosition(et).y;this.props.scrollElement?.scrollTo({top:un+sn-ct-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const et=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,ct=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(et<this._startIndexDrawn||ct>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=et=>{this.props.windowScroller&&(this._wrapperElm=et,et&&(this._viewHeight=et.clientHeight))},this._initItemHolder=et=>{this._itemHolderElm=et,this._scanItemHeights()},this._scanItemHeights=()=>{const et=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let ct=null,Ot=null,Ft=!1;const zt=this._itemHolderElm.childNodes,sn=zt.length;for(let un=0;un<sn;un++){const yn=zt[un];if(yn instanceof HTMLElement){const $n=yn.getAttribute("data-item-key");if(!$n){console.warn("itemKey not found");continue}const Xn=(yn.firstElementChild||yn).clientHeight,ra=this._knownHeights.get($n);Xn!==ra&&(this._knownHeights.set($n,Xn),Ft?Ot=$n:(Ft=!0,ct=Ot=$n))}}if(ct!=null&&Ot!=null){const un=et(ct),yn=Ot===ct?un:et(Ot);this._yPositions.calcHeights(yn,this._getHeight,un),this.forceUpdate()}},this._getHeight=et=>{const ct=this.props.getKeyFromIndex(et),Ot=this._knownHeights.get(ct);return Ot!=null&&Ot===Ot?Ot:this.props.itemHeightGetter(et,ct)},this._yPositions=new Fe(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}static{this.defaultProps={initialDraw:Ee,itemsWrapperClassName:"",windowScroller:!1}}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:qe}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=qe+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(qe){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&qe.scrollElement!==this.props.scrollElement&&(qe.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const qe=this.props.windowScroller,et=qe?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,ct=qe?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return et!==this._viewHeight||ct!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const et=this._scrollTop,ct=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(et,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(ct,this._getHeight)}render(){const{dataLength:qe,getKeyFromIndex:et,initialDraw:ct=Ee,itemRenderer:Ot,viewBuffer:Ft,viewBufferMin:zt}=this.props,sn=this._getHeight,un=[];let yn,$n;if(this._yPositions.profileData(qe),!this._wrapperElm)yn=0,$n=(ct<qe?ct:qe)-1;else{this._isViewChanged()&&this._calcViewIndexes();const ra=zt>this._startIndex?0:this._startIndex-zt,Ua=zt<qe-this._endIndex?this._endIndex+zt:qe-1;ra<this._startIndexDrawn||Ua>this._endIndexDrawn?(yn=Ft>this._startIndex?0:this._startIndex-Ft,$n=this._endIndex+Ft,$n>=qe&&($n=qe-1)):(yn=this._startIndexDrawn>qe-1?0:this._startIndexDrawn,$n=this._endIndexDrawn>qe-1?qe-1:this._endIndexDrawn)}this._yPositions.calcHeights($n,sn,yn||-1),this._startIndexDrawn=yn,this._endIndexDrawn=$n,un.length=$n-yn+1;for(let ra=yn;ra<=$n;ra++){const{y:Ua,height:Ta}=this._yPositions.getRowPosition(ra,sn),ja={height:Ta,top:Ua,position:"absolute"},Sa=et(ra),za={"data-item-key":Sa};un.push(Ot(Sa,ja,ra,za))}const ea={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(ea.onScroll=this._onScroll,ea.style.height="100%",ea.style.overflowY="auto");const Xn={position:"relative",height:this._yPositions.getEstimatedHeight()};return n.createElement("div",{...ea,"data-testid":"ListView"},n.createElement("div",{style:Xn},n.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},un)))}}const ze="None",xe="Duration",We="Tag";function be({options:Qe,onOptionsChange:qe}){const et=useStyles2(Ue),ct=[ze,xe,We].map(toOption);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,{className:et.row},React.createElement(InlineField,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},React.createElement(Select,{inputId:"label",options:ct,value:Qe.jsonData.spanBar?.type||"",onChange:Ot=>{updateDatasourcePluginJsonDataOption({onOptionsChange:qe,options:Qe},"spanBar",{...Qe.jsonData.spanBar,type:Ot?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),Qe.jsonData.spanBar?.type===We&&React.createElement(InlineFieldRow,{className:et.row},React.createElement(InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},React.createElement(Input,{type:"text",placeholder:"Enter tag key",onChange:Ot=>updateDatasourcePluginJsonDataOption({onOptionsChange:qe,options:Qe},"spanBar",{...Qe.jsonData.spanBar,tag:Ot.currentTarget.value}),value:Qe.jsonData.spanBar?.tag||"",width:40}))))}const pe=({options:Qe,onOptionsChange:qe})=>{let et=Qe.type;return et+=Qe.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",React.createElement(ConfigSubSection,{title:"Span bar",description:React.createElement(ConfigDescriptionLink,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:et,feature:"the span bar"})},React.createElement(be,{options:Qe,onOptionsChange:qe}))},Ue=Qe=>({infoText:css({label:"infoText",paddingBottom:Qe.spacing(2),color:Qe.colors.text.secondary}),row:css({label:"row",alignItems:"baseline"})});var we=e(14578),je=e(13544),He=e(56034),rt=e(95868),Je=e(13840);function Ve({children:Qe,content:qe,overlayClassName:et}){const ct=(0,n.useRef)(null);return n.createElement(rt.I,{content:qe,hideAfter:300},(Ot,Ft,zt)=>n.createElement(n.Fragment,null,ct.current&&n.createElement(Je.A,{...zt,referenceElement:ct.current,wrapperClassName:et,onMouseLeave:Ft,onMouseEnter:Ot}),n.cloneElement(Qe,{ref:ct,onMouseEnter:Ot,onMouseLeave:Ft})))}const Oe="label";var Ne=e(55852);const ye=()=>({CopyIcon:(0,t.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function se(Qe){const qe=(0,m.of)(ye),[et,ct]=(0,n.useState)(!1),Ot=()=>{navigator.clipboard.writeText(Qe.copyText),ct(!0)};return n.createElement(He.m,{content:et?"Copied":Qe.tooltipTitle},n.createElement(Ne.$n,{className:h()(qe.CopyIcon),type:"button",icon:Qe.icon,onClick:Ot}))}se.defaultProps={icon:"copy",className:void 0};var ae=e(72834),ge=e.n(ae);const Pe="copyIcon",Re=Qe=>({KeyValueTable:(0,t.css)`
      label: KeyValueTable;
      background: ${(0,i.R)(Qe,"#fff")};
      border: 1px solid ${(0,i.R)(Qe,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,table:(0,t.css)({width:"100%"}),body:(0,t.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,t.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,i.R)(Qe,"#f5f5f5")};
      }
      &:not(:hover) .${Pe} {
        visibility: hidden;
      }
    `,keyColumn:(0,t.css)`
      label: keyColumn;
      color: ${(0,i.R)(Qe,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,t.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,t.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `,jsonTable:(0,t.css)({display:"inline-block"})}),Be=/^(\[|\{)/;function _e(Qe){if(typeof Qe=="string"&&Be.test(Qe))try{return JSON.parse(Qe)}catch{}return Qe}const Xe=Qe=>n.createElement("a",{href:Qe.href,title:Qe.title,target:"_blank",rel:"noopener noreferrer"},Qe.children," ",n.createElement(we.I,{name:"external-link-alt"}));Xe.defaultProps={title:""};function tt(Qe){const{data:qe,linksGetter:et}=Qe,ct=(0,m.of)(Re);return n.createElement("div",{className:h()(ct.KeyValueTable),"data-testid":"KeyValueTable"},n.createElement("table",{className:ct.table},n.createElement("tbody",{className:ct.body},qe.map((Ot,Ft)=>{const zt={__html:ge()(_e(Ot.value))},sn=n.createElement("div",{className:ct.jsonTable,dangerouslySetInnerHTML:zt}),un=et?et(qe,Ft):null;let yn;return un&&un.length?yn=n.createElement("div",null,n.createElement(Xe,{href:un[0].url,title:un[0].text},sn)):yn=sn,n.createElement("tr",{className:ct.row,key:`${Ot.key}-${Ft}`},n.createElement("td",{className:ct.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Ot.key),n.createElement("td",null,yn),n.createElement("td",{className:ct.copyColumn},n.createElement(se,{className:Pe,copyText:JSON.stringify(Ot,null,2),tooltipTitle:"Copy JSON"})))}))))}var at=e(11908),st=e(72724),dt=e(12131),ot=e(14689),ft=e(25994),yt=e(21744),Tt=e(19071),Kt=e(28114);const Gt=Qe=>qe=>({LabeledList:(0,t.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Qe&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,t.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Qe&&`
        border-right: 1px solid ${(0,i.R)(qe,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,t.css)`
      label: LabeledListLabel;
      color: ${qe.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,t.css)`
      label: LabeledListValue;
      ${!Qe&&"margin-right: 0.55rem;"}
    `});function _t(Qe){const{className:qe,divider:et=!1,items:ct}=Qe,Ot=(0,m.of)(Gt(et));return n.createElement("ul",{className:h()(Ot.LabeledList,qe)},ct.map(({key:Ft,label:zt,value:sn})=>n.createElement("li",{className:Ot.LabeledListItem,key:`${Ft}`},n.createElement("span",{className:Ot.LabeledListLabel},zt),n.createElement("strong",{className:Ot.LabeledListValue},sn))))}const it="kind",Mt="status",Dn="status.message",lt="library.name",Ct="library.version",Vt="trace.state",qt="id";var rn=e(92102);function en(Qe){const{reference:qe,children:et,createFocusSpanLink:ct}=Qe,Ot=ct(qe.traceID,qe.spanID);return n.createElement("a",{href:Ot.href,target:Ot.target,rel:"noopener noreferrer",onClick:Ot.onClick?Ft=>{Ft.preventDefault(),Ot.onClick(Ft)}:void 0},et)}const Jt=Qe=>({AccordianReferenceItem:(0,t.css)`
      border-bottom: 1px solid ${(0,i.R)(Qe,"#d8d8d8")};
    `,AccordianKeyValues:(0,t.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,t.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,i.R)(Qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,t.css)`
      label: AccordianReferencesHeader;
      background: ${(0,i.R)(Qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,i.R)(Qe,"#dadada")};
      }
    `,AccordianReferencesContent:(0,t.css)`
      label: AccordianReferencesContent;
      background: ${(0,i.R)(Qe,"#f0f0f0")};
      border-top: 1px solid ${(0,i.R)(Qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,t.css)`
      label: AccordianReferencesFooter;
      color: ${(0,i.R)(Qe,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Qe.spacing(.5)}),ReferencesList:(0,t.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,t.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,t.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,t.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,t.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,t.css)`
      margin-right: 8px;
    `,title:(0,t.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function hn(Qe){const{data:qe,createFocusSpanLink:et,openedItems:ct,onItemToggle:Ot,interactive:Ft}=Qe,zt=(0,m.of)(Jt);return n.createElement("div",{className:zt.AccordianReferencesContent},qe.map((sn,un)=>n.createElement("div",{className:un<qe.length-1?zt.AccordianReferenceItem:void 0,key:un},n.createElement("div",{className:zt.item,key:`${sn.spanID}`},n.createElement(en,{reference:sn,createFocusSpanLink:et},n.createElement("span",{className:zt.itemContent},sn.span?n.createElement("span",null,n.createElement("span",{className:(0,t.cx)("span-svc-name",zt.serviceName)},sn.span.process.serviceName),n.createElement("small",{className:"endpoint-name"},sn.span.operationName)):n.createElement("span",{className:(0,t.cx)("span-svc-name",zt.title)},"View Linked Span ",n.createElement(we.I,{name:"external-link-alt"})),n.createElement("small",{className:zt.debugInfo},n.createElement("span",{className:zt.debugLabel,"data-label":"TraceID:"},sn.traceID),n.createElement("span",{className:zt.debugLabel,"data-label":"SpanID:"},sn.spanID))))),!!sn.tags?.length&&n.createElement("div",{className:zt.AccordianKeyValues},n.createElement(Dt,{className:un<qe.length-1?zt.AccordianKeyValuesItem:null,data:sn.tags||[],highContrast:!0,interactive:Ft,isOpen:ct?ct.has(sn):!1,label:"attributes",linksGetter:null,onToggle:Ft&&Ot?()=>Ot(sn):null})))))}const Fn=({data:Qe,interactive:qe=!0,isOpen:et,onToggle:ct,onItemToggle:Ot,openedItems:Ft,createFocusSpanLink:zt})=>{const sn=!Array.isArray(Qe)||!Qe.length;let un=null,yn="span",$n=null;qe&&(un=et?n.createElement(we.I,{name:"angle-down",className:ba}):n.createElement(we.I,{name:"angle-right",className:ba}),yn="a",$n={"aria-checked":et,onClick:sn?null:ct,role:"switch"});const ea=(0,m.of)(Jt);return n.createElement("div",{className:ea.AccordianReferences},n.createElement(yn,{className:ea.AccordianReferencesHeader,...$n},un,n.createElement("strong",null,n.createElement("span",null,"References"))," ","(",Qe.length,")"),et&&n.createElement(hn,{data:Qe,openedItems:Ft,createFocusSpanLink:zt,onItemToggle:Ot,interactive:qe}))},Kn=n.memo(Fn),na=()=>({TextList:(0,t.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,t.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Ut(Qe){const{data:qe}=Qe,et=(0,m.of)(na);return n.createElement("div",{className:h()(et.TextList),"data-testid":"TextList"},n.createElement("ul",{className:et.List},qe.map((ct,Ot)=>n.createElement("li",{className:et.item,key:`${Ot}`},ct))))}const on=Qe=>({header:(0,t.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,i.R)(Qe,"#e8e8e8")};
      }
    `});function mn({data:Qe}){return n.createElement(Ut,{data:Qe})}function vn(Qe){const{className:qe,data:et,headerClassName:ct,interactive:Ot,isOpen:Ft,label:zt,onToggle:sn,TextComponent:un=mn}=Qe,yn=!Array.isArray(et)||!et.length,$n=(0,m.of)(dn),ea=h()(ba,{[$n.emptyIcon]:yn});let Xn=null,ra=null;Ot&&(Xn=Ft?n.createElement(we.I,{name:"angle-down",className:ea}):n.createElement(we.I,{name:"angle-right",className:ea}),ra={"aria-checked":Ft,onClick:yn?null:sn,role:"switch"});const Ua=(0,m.of)(on);return n.createElement("div",{className:qe||""},n.createElement("div",{className:h()(Ua.header,ct),...ra,"data-testid":"AccordianText--header"},Xn,n.createElement("strong",null,zt)," (",et.length,")"),Ft&&n.createElement(un,{data:et}))}vn.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var pn=e(49185),Un=e(75505),Bn=e(47232),kn=e(41987),Mn=e(85194),xn=e(26657),Vn=e(72574),aa=e(31193);function Jn(Qe){const{span:qe,traceToProfilesOptions:et,timeZone:ct,traceFlameGraphs:Ot,setTraceFlameGraphs:Ft,setRedrawListView:zt,traceDuration:sn,traceName:un}=Qe,[yn,{height:$n}]=(0,pn.A)(),ea=(0,m.of)(_n),Xn=qe.tags.filter(Sa=>Sa.key===Kt.QW),ra=Xn.length>0?Xn[0].value:void 0,Ua=(0,n.useCallback)(()=>{const Sa=Math.floor(qe.startTime/1e3)-3e4,za=(qe.startTime+qe.duration)/1e3+3e4,ka=(0,Bn.KQ)(za),Ia=(0,Bn.KQ)(Sa);return{from:Ia,to:ka,raw:{from:Ia,to:ka}}},[qe.duration,qe.startTime]),Ta=async(Sa,za)=>{const ka=await(0,aa.tR)().get(za);if(ka instanceof xn.iy){const hs=(await(0,Un.s)(ka.query(Sa))).data.find(Is=>Is.name==="response");if(hs&&hs.length>1)return hs}},ja=(0,n.useCallback)(async(Sa,za,ka)=>{let Ia="{}";if(za.customQuery&&za.query){const Ks={...(0,Kt.gt)(sn,un,ka.traceID),...(0,Kt.hv)(ka),...(0,Kt.Cr)(ka,za)};Ia=(0,Vn.w)().replace(za.query,Ks)}else{const Ks=za.tags&&za.tags.length>0?za.tags:Kt.i0;Ia=`{${(0,Kt._o)(ka,Ks)}}`}const hs={requestId:"span-flamegraph-requestId",interval:"2s",intervalMs:2e3,range:Ua(),scopedVars:{},app:kn.Jk.Unknown,timezone:ct,startTime:ka.startTime,targets:[{labelSelector:Ia,groupBy:[],profileTypeId:za.profileTypeId??"",queryType:"profile",spanSelector:[ra],refId:"span-flamegraph-refId",datasource:{type:Sa.type,uid:Sa.uid}}]},Is=await Ta(hs,Sa.uid);Is&&Is.length>0&&Ft({...Ot,[ra]:Is})},[Ua,ra,Ft,ct,sn,Ot,un]);return(0,n.useEffect)(()=>{if(!Object.keys(Ot).includes(ra)){let Sa;et&&et?.datasourceUid&&(Sa=(0,aa.tR)().getInstanceSettings(et.datasourceUid)),et&&Sa&&ja(Sa,et,qe)}},[Ft,qe,Ot,et,Ua,ct,ja,ra]),(0,n.useEffect)(()=>{zt({})},[$n,zt]),Ot[ra]?n.createElement("div",{className:ea.flameGraph,ref:yn},n.createElement("div",{className:ea.flameGraphTitle},"Flame graph"),n.createElement(Mn.A,{data:Ot[ra],getTheme:()=>s.$.theme2,showFlameGraphOnly:!0,disableCollapsing:!0})):n.createElement(n.Fragment,null)}const _n=()=>({flameGraph:(0,t.css)({label:"flameGraphInSpan",margin:"5px"}),flameGraphTitle:(0,t.css)({label:"flameGraphTitleInSpan",marginBottom:"5px",fontWeight:"bold"})}),Hn=Qe=>({header:(0,t.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,t.css)`
      overflow: hidden;
    `,list:(0,t.css)({textAlign:"right"}),operationName:(0,t.css)({margin:0}),debugInfo:(0,t.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,t.css)`
      label: debugLabel;
      &::before {
        color: ${(0,i.R)(Qe,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,t.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,i.R)(Qe,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,i.R)(Qe,"#333")};
      }
    `,AccordianWarnings:(0,t.css)`
      label: AccordianWarnings;
      background: ${(0,i.R)(Qe,"#fafafa")};
      border: 1px solid ${(0,i.R)(Qe,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,t.css)`
      label: AccordianWarningsHeader;
      background: ${(0,i.R)(Qe,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,i.R)(Qe,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,t.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,i.R)(Qe,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,t.css)`
      label: AccordianWarningsLabel;
      color: ${(0,i.R)(Qe,"#d36c08")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Qe.spacing(.5)}),Textarea:(0,t.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,t.css)`
      font-size: 1.5em;
    `}),ba=(0,t.css)({margin:"-0.2rem 0.25rem 0 0"});function va(Qe){const{detailState:qe,linksGetter:et,logItemToggle:ct,logsToggle:Ot,processToggle:Ft,span:zt,tagsToggle:sn,traceStartTime:un,traceDuration:yn,traceName:$n,warningsToggle:ea,stackTracesToggle:Xn,referencesToggle:ra,referenceItemToggle:Ua,createSpanLink:Ta,createFocusSpanLink:ja,datasourceType:Sa,traceFlameGraphs:za,setTraceFlameGraphs:ka,traceToProfilesOptions:Ia,setRedrawListView:hs}=Qe,{isTagsOpen:Is,isProcessOpen:Ks,logs:Es,isWarningsOpen:Gs,references:Ss,isStackTracesOpen:hr}=qe,{operationName:Or,process:js,duration:vr,relativeStartTime:ro,startTime:br,traceID:fr,spanID:cr,logs:oa,tags:La,warnings:es,references:Ds,stackTraces:$s}=zt,{timeZone:or}=Qe;let er=[{key:"svc",label:"Service:",value:js.serviceName},{key:"duration",label:"Duration:",value:(0,P.a3)(vr)},{key:"start",label:"Start Time:",value:(0,P.a3)(ro)+Ca(br,or)},...zt.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:zt.childSpanCount}]:[]];const Os=(0,m.of)(Hn);zt.kind&&er.push({key:it,label:"Kind:",value:zt.kind}),zt.statusCode!==void 0&&er.push({key:Mt,label:"Status:",value:at.s[zt.statusCode].toLowerCase()}),zt.statusMessage&&er.push({key:Dn,label:"Status Message:",value:zt.statusMessage}),zt.instrumentationLibraryName&&er.push({key:lt,label:"Library Name:",value:zt.instrumentationLibraryName}),zt.instrumentationLibraryVersion&&er.push({key:Ct,label:"Library Version:",value:zt.instrumentationLibraryVersion}),zt.traceState&&er.push({key:Vt,label:"Trace State:",value:zt.traceState});const ho=(Vs,Oo,Nr,Kr)=>n.createElement(ot.R,{link:{...Vs,title:Nr,target:"_blank",origin:Vs.field,onClick:pi=>{(0,r.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Sa,grafana_version:s.$.buildInfo.version,type:Oo,location:"spanDetails"}),Vs.onClick?Vs.onClick?.(pi):dt.Ny.push(Vs.href)}},buttonProps:{icon:Kr}});let vo=null,gi=null;if(Ta){const Vs=Ta(zt),Oo=Vs?.filter(Kr=>Kr.type===rn.N.Logs);Vs&&Oo&&Oo.length>0&&(vo=ho(Oo[0],rn.N.Logs,"Logs for this span","gf-logs"));const Nr=Vs?.filter(Kr=>Kr.type===rn.N.Profiles&&Kr.title===Tt.cd);Vs&&Nr&&Nr.length>0&&(gi=ho(Nr[0],rn.N.Profiles,"Profiles for this span","link"))}const xo=ja(fr,cr);return n.createElement("div",{"data-testid":"span-detail-component"},n.createElement("div",{className:Os.header},n.createElement("h2",{className:Os.operationName},Or),n.createElement("div",{className:Os.listWrapper},n.createElement(_t,{className:Os.list,divider:!0,items:er}))),n.createElement("span",{style:{marginRight:"10px"}},vo),gi,n.createElement(ft.c,{spacing:1}),n.createElement("div",null,n.createElement("div",null,n.createElement(Dt,{data:La,label:"Span Attributes",linksGetter:et,isOpen:Is,onToggle:()=>sn(cr)}),js.tags&&n.createElement(Dt,{className:Os.AccordianKeyValuesItem,data:js.tags,label:"Resource Attributes",linksGetter:et,isOpen:Ks,onToggle:()=>Ft(cr)})),oa&&oa.length>0&&n.createElement(gn,{linksGetter:et,logs:oa,isOpen:Es.isOpen,openedItems:Es.openedItems,onToggle:()=>Ot(cr),onItemToggle:Vs=>ct(cr,Vs),timestamp:un}),es&&es.length>0&&n.createElement(vn,{className:Os.AccordianWarnings,headerClassName:Os.AccordianWarningsHeader,label:n.createElement("span",{className:Os.AccordianWarningsLabel},"Warnings"),data:es,isOpen:Gs,onToggle:()=>ea(cr)}),$s?.length?n.createElement(vn,{label:"Stack trace",data:$s,isOpen:hr,TextComponent:Vs=>{let Oo;return Vs.data?.length>1?Oo=Vs.data.map((Nr,Kr)=>`StackTrace ${Kr+1}:
${Nr}`).join(`
`):Oo=Vs.data?.[0],n.createElement(yt.f,{className:Os.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Oo})},onToggle:()=>Xn(cr)}):null,Ds&&Ds.length>0&&(Ds.length>1||Ds[0].refType!=="CHILD_OF")&&n.createElement(Kn,{data:Ds,isOpen:Ss.isOpen,openedItems:Ss.openedItems,onToggle:()=>ra(cr),onItemToggle:Vs=>Ua(cr,Vs),createFocusSpanLink:ja}),zt.tags.some(Vs=>Vs.key===Kt.QW)&&n.createElement(Jn,{span:zt,timeZone:or,traceFlameGraphs:za,setTraceFlameGraphs:ka,traceToProfilesOptions:Ia,setRedrawListView:hs,traceDuration:yn,traceName:$n}),n.createElement("small",{className:Os.debugInfo},n.createElement("a",{...xo,onClick:Vs=>{xo.onClick&&Vs.button===0&&(!Vs.currentTarget.target||Vs.currentTarget.target==="_self")&&!(Vs.metaKey||Vs.altKey||Vs.ctrlKey||Vs.shiftKey)&&(Vs.preventDefault(),xo.onClick(Vs))}},n.createElement(we.I,{name:"link",className:h()(ba,Os.LinkIcon)})),n.createElement("span",{className:Os.debugLabel,"data-label":"SpanID:"})," ",cr)))}const Ca=(Qe,qe)=>{const et=(0,st.LE)(Qe/1e3,{timeZone:qe,defaultWithMS:!0}),ct=et.split(" ");return` (${ct[1]?ct[1]:et})`},dn=Qe=>({container:(0,t.css)({textOverflow:"ellipsis"}),header:(0,t.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,i.R)(Qe,"#e8e8e8")};
      }
    `,headerEmpty:(0,t.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,t.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,i.R)(Qe,"#ddd")};
      }
    `,emptyIcon:(0,t.css)`
      label: emptyIcon;
      color: ${(0,i.R)(Qe,"#aaa")};
    `,summary:(0,t.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,t.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,i.R)(Qe,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,t.css)`
      label: summaryLabel;
      color: ${(0,i.R)(Qe,"#777")};
    `,summaryDelim:(0,t.css)`
      label: summaryDelim;
      color: ${(0,i.R)(Qe,"#bbb")};
      padding: 0 0.2em;
    `});function pt(Qe){const{data:qe}=Qe,et=(0,m.of)(dn);return!Array.isArray(qe)||!qe.length?null:n.createElement("ul",{className:et.summary},qe.map((ct,Ot)=>n.createElement("li",{className:et.summaryItem,key:`${ct.key}-${Ot}`},n.createElement("span",{className:et.summaryLabel},ct.key),n.createElement("span",{className:et.summaryDelim},"="),String(ct.value))))}pt.defaultProps={data:null};function Dt(Qe){const{className:qe,data:et,highContrast:ct,interactive:Ot,isOpen:Ft,label:zt,linksGetter:sn,onToggle:un}=Qe,yn=!Array.isArray(et)||!et.length,$n=(0,m.of)(dn),ea=h()(ba,{[$n.emptyIcon]:yn});let Xn=null,ra=null;return Ot&&(Xn=Ft?n.createElement(we.I,{name:"angle-down",className:ea}):n.createElement(we.I,{name:"angle-right",className:ea}),ra={"aria-checked":Ft,onClick:yn?null:un,role:"switch"}),n.createElement("div",{className:h()(qe,$n.container)},n.createElement("div",{className:h()($n.header,{[$n.headerEmpty]:yn,[$n.headerHighContrast]:ct&&!yn}),...ra,"data-testid":"AccordianKeyValues--header"},Xn,n.createElement("strong",{"data-test":Oe},zt,Ft||":"),!Ft&&n.createElement(pt,{data:et})),Ft&&n.createElement(tt,{data:et,linksGetter:sn}))}Dt.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const nn=Qe=>({AccordianLogs:(0,t.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,i.R)(Qe,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,t.css)`
      label: AccordianLogsHeader;
      background: ${(0,i.R)(Qe,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,i.R)(Qe,"#dadada")};
      }
    `,AccordianLogsContent:(0,t.css)`
      label: AccordianLogsContent;
      background: ${(0,i.R)(Qe,"#f0f0f0")};
      border-top: 1px solid ${(0,i.R)(Qe,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,t.css)`
      label: AccordianLogsFooter;
      color: ${(0,i.R)(Qe,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Qe.spacing(.5)})});function gn(Qe){const{interactive:qe,isOpen:et,linksGetter:ct,logs:Ot,openedItems:Ft,onItemToggle:zt,onToggle:sn,timestamp:un}=Qe;let yn=null,$n="span",ea=null;qe&&(yn=et?n.createElement(we.I,{name:"angle-down",className:ba}):n.createElement(we.I,{name:"angle-right",className:"u-align-icon"}),$n="a",ea={"aria-checked":et,onClick:sn,role:"switch"});const Xn=(0,m.of)(nn);return n.createElement("div",{className:Xn.AccordianLogs},n.createElement($n,{className:Xn.AccordianLogsHeader,...ea},yn," ",n.createElement("strong",null,"Events")," (",Ot.length,")"),et&&n.createElement("div",{className:Xn.AccordianLogsContent},(0,ue.sortBy)(Ot,"timestamp").map((ra,Ua)=>n.createElement(Dt,{key:`${ra.timestamp}-${Ua}`,className:Ua<Ot.length-1?Xn.AccordianKeyValuesItem:null,data:ra.fields||[],highContrast:!0,interactive:qe,isOpen:Ft?Ft.has(ra):!1,label:`${(0,P.a3)(ra.timestamp-un)}`,linksGetter:ct,onToggle:qe&&zt?()=>zt(ra):null})),n.createElement("small",{className:Xn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}gn.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const Cn=Qe=>({wrapper:(0,t.css)({label:"wrapper",bottom:0,left:0,position:"absolute",right:0,top:0,overflow:"hidden",zIndex:0}),bar:(0,t.css)({label:"bar",borderRadius:Qe.shape.radius.default,minWidth:"2px",position:"absolute",height:"36%",top:"32%"}),rpc:(0,t.css)({label:"rpc",position:"absolute",top:"35%",bottom:"35%",zIndex:1}),label:(0,t.css)({label:"label",color:"#aaa",fontSize:"12px",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans - serif",lineHeight:"1em",whiteSpace:"nowrap",padding:"0 0.5em",position:"absolute"}),logMarker:(0,t.css)({label:"logMarker",backgroundColor:(0,i.R)(Qe,"#2c3235"),cursor:"pointer",height:"60%",minWidth:"1px",position:"absolute",top:"20%","&:hover":{backgroundColor:(0,i.R)(Qe,"#464c54")},"&::before, &::after":{content:"''",position:"absolute",top:0,bottom:0,right:0,border:"1px solid transparent"},"&::after":{left:0}}),criticalPath:(0,t.css)({position:"absolute",top:"45%",height:"11%",zIndex:2,overflow:"hidden",background:(0,i.R)(Qe,"#f1f1f1"),borderLeft:`1px solid ${(0,i.R)(Qe,"#2c3235")}`,borderRight:`1px solid ${(0,i.R)(Qe,"#2c3235")}`})});function In(Qe){return`${(Qe*100).toFixed(1)}%`}function fa(Qe){return`${Qe*100}%`}function ga({criticalPath:Qe,viewEnd:qe,viewStart:et,getViewedBounds:ct,color:Ot,shortLabel:Ft,longLabel:zt,onClick:sn,rpc:un,traceStartTime:yn,span:$n,className:ea,labelClassName:Xn}){const[ra,Ua]=(0,n.useState)(Ft),Ta=()=>Ua(Ft),ja=()=>Ua(zt),Sa=(0,ue.groupBy)($n.logs,ka=>{const Ia=ct(ka.timestamp,ka.timestamp).start;return In(Math.round(Ia*500)/500)}),za=(0,m.of)(Cn);return n.createElement("div",{className:h()(za.wrapper,ea),onBlur:Ta,onClick:sn,onFocus:ja,onMouseOut:Ta,onMouseOver:ja,"aria-hidden":!0,"data-testid":je.Tp.components.TraceViewer.spanBar},n.createElement("div",{"aria-label":ra,className:h()(za.bar),style:{background:Ot,left:In(et),width:In(qe-et)}},n.createElement("div",{className:h()(za.label,Xn),"data-testid":"SpanBar--label"},ra)),n.createElement("div",null,Object.keys(Sa).map(ka=>n.createElement(Ve,{key:ka,content:n.createElement(gn,{interactive:!1,isOpen:!0,logs:Sa[ka],timestamp:yn})},n.createElement("div",{"data-testid":"SpanBar--logMarker",className:h()(za.logMarker),style:{left:ka}})))),un&&n.createElement("div",{className:h()(za.rpc),style:{background:un.color,left:In(un.viewStart),width:In(un.viewEnd-un.viewStart)}}),Qe?.map((ka,Ia)=>{const hs=ct(ka.section_start,ka.section_end),Is=hs.start,Ks=hs.end,Es=`${ka.spanId}-${Ia}`;return n.createElement(He.m,{key:Es,placement:"top",content:n.createElement("div",null,"A segment on the ",n.createElement("em",null,"critical path")," of the overall trace / request / workflow.")},n.createElement("div",{"data-testid":"SpanBar--criticalPath",className:za.criticalPath,style:{left:fa(Is),width:fa(Ks-Is)}}))}))}const sa=n.memo(ga);var da=e(64539),Ma=e(28122);const _a=(Qe,qe,et,ct)=>(Qe.sort(function(Ot,Ft){return(Ot.title||"link").toLowerCase().localeCompare((Ft.title||"link").toLowerCase())}),Qe.map((Ot,Ft)=>n.createElement(da.D,{key:Ft,label:Ot.title||"Link",onClick:Ot.onClick?zt=>{(0,r.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:ct,grafana_version:s.$.buildInfo.version,type:Ot.type,location:"menu"}),zt?.preventDefault(),Ot.onClick(zt),et()}:void 0,url:Ot.href,className:qe.menuItem}))),Xa=({links:Qe,datasourceType:qe,color:et})=>{const ct=(0,m.of)(()=>ps(et)),[Ot,Ft]=(0,n.useState)(!1),[zt,sn]=(0,n.useState)({x:0,y:0}),un=()=>Ft(!1);return n.createElement("div",{"data-testid":"SpanLinksMenu",className:ct.wrapper},n.createElement("button",{onClick:yn=>{Ft(!0),sn({x:yn.pageX,y:yn.pageY})},className:ct.button},n.createElement(we.I,{name:"link",className:ct.icon})),Ot?n.createElement(Ma.t,{onClose:()=>Ft(!1),renderMenuItems:()=>_a(Qe,ct,un,qe),focusOnOpen:!1,x:zt.x,y:zt.y}):null)},ps=Qe=>({wrapper:(0,t.css)`
      border: none;
      background: ${Qe}10;
      border-bottom: 1px solid ${Qe}CF;
      padding-right: 4px;
    `,button:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,t.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function As(Qe){return(0,ue.get)((0,ue.find)(Qe.references,({span:qe,refType:et})=>qe&&qe.spanID&&(et==="CHILD_OF"||et==="FOLLOWS_FROM")),"span")}function ys(Qe){const qe=[];if(!Qe)return qe;let et=As(Qe);for(;et;)qe.push(et.spanID),et=As(et);return qe}const vs=(0,o.N)(Qe=>({SpanTreeOffset:(0,t.css)`
      label: SpanTreeOffset;
      color: ${(0,i.R)(Qe,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,t.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,t.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,i.R)(Qe,"lightgrey")};
      }
    `,indentGuideActive:(0,t.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,i.R)(Qe,"#777")};
      }
    `,indentGuideThin:(0,t.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,t.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class ar extends n.PureComponent{constructor(qe){super(qe),this.handleMouseLeave=(et,ct)=>{(!(et.relatedTarget instanceof HTMLSpanElement)||(0,ue.get)(et,"relatedTarget.dataset.ancestorId")!==ct)&&this.props.removeHoverIndentGuideId(ct)},this.handleMouseEnter=(et,ct)=>{(!(et.relatedTarget instanceof HTMLSpanElement)||(0,ue.get)(et,"relatedTarget.dataset.ancestorId")!==ct)&&this.props.addHoverIndentGuideId(ct)},this.ancestorIds=ys(qe.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}static{this.displayName="UnthemedSpanTreeOffset"}static{this.defaultProps={childrenVisible:!1,showChildrenIcon:!0}}render(){const{childrenVisible:qe,onClick:et,showChildrenIcon:ct,span:Ot,theme:Ft,visibleSpanIds:zt}=this.props,{hasChildren:sn,spanID:un}=Ot,yn=sn?{onClick:et,role:"switch","aria-checked":qe}:null,$n=ct&&sn&&(qe?n.createElement(we.I,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):n.createElement(we.I,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),ea=vs(Ft);return n.createElement("span",{className:h()(ea.SpanTreeOffset,{[ea.SpanTreeOffsetParent]:sn}),...yn},this.ancestorIds.map((Xn,ra)=>n.createElement("span",{key:Xn,className:h()(ea.indentGuide,{[ea.indentGuideActive]:this.props.hoverIndentGuideIds.has(Xn),[ea.indentGuideThin]:ra!==this.ancestorIds.length-1&&Xn!=="root"&&!zt.includes(Xn)}),"data-ancestor-id":Xn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Ua=>this.handleMouseEnter(Ua,Xn),onMouseLeave:Ua=>this.handleMouseLeave(Ua,Xn)})),$n&&n.createElement("span",{className:ea.iconWrapper,onMouseEnter:Xn=>this.handleMouseEnter(Xn,un),onMouseLeave:Xn=>this.handleMouseLeave(Xn,un),"data-testid":"icon-wrapper"},$n))}}const ss=(0,m.cV)(ar),Rs="spanBar",Cs="spanBarLabel",ws="nameWrapper",kr="nameWrapperMatchingFilter",Xs="jaegerView",dr="nameColumn",ks=(0,o.N)((Qe,qe)=>{const et={label:"flash",flash:(0,t.keyframes)`
    from {
      background-color: ${(0,i.R)(Qe,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},ct=qe?"":(0,i.R)(Qe,"#fffce4");return{nameWrapper:(0,t.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,t.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${ct};
    `,nameColumn:(0,t.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,t.css)`
      label: endpointName;
      color: ${(0,i.R)(Qe,"#484848")};
      font-size: 0.9em;
    `,view:(0,t.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,t.css)`
      label: viewExpanded;
      background: ${(0,i.R)(Qe,"#f8f8f8")};
      outline: 1px solid ${(0,i.R)(Qe,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,t.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,i.R)(Qe,"#fff3d7")};
      outline: 1px solid ${(0,i.R)(Qe,"#ddd")};
    `,row:(0,t.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${Rs} {
        opacity: 1;
      }
      &:hover .${Cs} {
        color: ${(0,i.R)(Qe,"#000")};
      }
      &:hover .${ws} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,i.R)(Qe,"#fafafa")},
          ${(0,i.R)(Qe,"#f8f8f8")} 75%,
          ${(0,i.R)(Qe,"#eee")}
        );
      }
      &:hover .${Xs} {
        background-color: ${(0,i.R)(Qe,"#f5f5f5")};
        outline: 1px solid ${(0,i.R)(Qe,"#ddd")};
      }
    `,rowClippingLeft:(0,t.css)`
      label: rowClippingLeft;
      & .${dr}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,i.R)(Qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,i.R)(Qe,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,t.css)`
      label: rowClippingRight;
      & .${Xs}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,i.R)(Qe,"rgba(25, 25, 25, 0.25)")},
          ${(0,i.R)(Qe,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,t.css)`
      label: rowExpanded;
      & .${Rs} {
        opacity: 1;
      }
      & .${Cs} {
        color: ${(0,i.R)(Qe,"#000")};
      }
      & .${ws}, &:hover .${ws} {
        background: ${(0,i.R)(Qe,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,i.R)(Qe,"#ddd")};
      }
      & .${kr} {
        background: ${(0,i.R)(Qe,"#fff3d7")};
      }
      &:hover .${Xs} {
        background: ${(0,i.R)(Qe,"#eee")};
      }
    `,rowMatchingFilter:(0,t.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,i.R)(Qe,"#fffbde")};
      &:hover .${ws} {
        background: linear-gradient(
          90deg,
          ${(0,i.R)(Qe,"#fffbde")},
          ${(0,i.R)(Qe,"#fffbde")} 75%,
          ${(0,i.R)(Qe,"#f7f1c6")}
        );
      }
      &:hover .${Xs} {
        background-color: ${(0,i.R)(Qe,"#f7f1c6")};
        outline: 1px solid ${(0,i.R)(Qe,"#ddd")};
      }
    `,rowFocused:(0,t.css)`
      label: rowFocused;
      background-color: ${(0,i.R)(Qe,"#cbe7ff")};
      animation: ${et.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${ws}, .${Xs}, .${kr} {
        background-color: ${(0,i.R)(Qe,"#cbe7ff")};
        animation: ${et.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Rs} {
        opacity: 1;
      }
      & .${Cs} {
        color: ${(0,i.R)(Qe,"#000")};
      }
      &:hover .${ws}, :hover .${Xs} {
        background: ${(0,i.R)(Qe,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,i.R)(Qe,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,t.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Xs} {
        background: ${(0,i.R)(Qe,"#ffeccf")};
      }
    `,name:(0,t.css)`
      label: name;
      color: ${(0,i.R)(Qe,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,i.R)(Qe,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,t.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,t.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,t.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,t.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,i.R)(Qe,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,t.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,t.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,t.css)`
      label: labelLeft;
      right: 100%;
    `}});class bo extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(qe,et,ct)=>{const Ot=et?.type??"";if(Ot===ze)return"";if(Ot===""||Ot===xe)return`(${ct})`;if(Ot===We){const Ft=et?.tag?.trim()??"";if(Ft!==""&&qe.tags){const zt=qe.tags?.find(un=>un.key===Ft);if(zt)return`(${zt.value})`;const sn=qe.process?.tags?.find(un=>un.key===Ft);if(sn)return`(${sn.value})`}}return""}}static{this.displayName="UnthemedSpanBarRow"}static{this.defaultProps={className:"",rpc:null}}render(){const{className:qe,color:et,spanBarOptions:ct,columnDivision:Ot,isChildrenExpanded:Ft,isDetailExpanded:zt,isMatchingFilter:sn,showSpanFilterMatchesOnly:un,isFocused:yn,numTicks:$n,rpc:ea,noInstrumentedServer:Xn,showErrorIcon:ra,getViewedBounds:Ua,traceStartTime:Ta,span:ja,hoverIndentGuideIds:Sa,addHoverIndentGuideId:za,removeHoverIndentGuideId:ka,clippingLeft:Ia,clippingRight:hs,theme:Is,createSpanLink:Ks,datasourceType:Es,showServiceName:Gs,visibleSpanIds:Ss,criticalPath:hr}=this.props,{duration:Or,hasChildren:js,operationName:vr,process:{serviceName:ro}}=ja,br=(0,P.a3)(Or),fr=Ua(ja.startTime,ja.startTime+ja.duration),cr=fr.start,oa=fr.end,La=ks(Is,un),es=`${ro}::${vr}`;let Ds,$s;return cr>1-oa?(Ds=`${es} | ${br}`,$s=La.labelLeft):(Ds=`${br} | ${es}`,$s=La.labelRight),n.createElement(V,{className:h()(La.row,{[La.rowExpanded]:zt,[La.rowMatchingFilter]:sn,[La.rowExpandedAndMatchingFilter]:sn&&zt,[La.rowFocused]:yn,[La.rowClippingLeft]:Ia,[La.rowClippingRight]:hs},qe)},n.createElement(V.Cell,{className:h()(La.nameColumn,dr),width:Ot},n.createElement("div",{className:h()(La.nameWrapper,ws,{[La.nameWrapperMatchingFilter]:sn,nameWrapperMatchingFilter:sn})},n.createElement(ss,{onClick:js?this._childrenToggle:void 0,childrenVisible:Ft,span:ja,hoverIndentGuideIds:Sa,addHoverIndentGuideId:za,removeHoverIndentGuideId:ka,visibleSpanIds:Ss}),n.createElement("button",{type:"button",className:h()(La.name,{[La.nameDetailExpanded]:zt}),"aria-checked":zt,title:es,onClick:this._detailToggle,role:"switch",style:{background:`${et}10`,borderBottomColor:`${et}CF`},tabIndex:0},ra&&n.createElement(we.I,{name:"exclamation-circle",style:{backgroundColor:ja.errorIconColor?(0,i.R)(Is,ja.errorIconColor):(0,i.R)(Is,"#db2828")},className:La.errorIcon}),Gs&&n.createElement("span",{className:h()(La.svcName,{[La.svcNameChildrenCollapsed]:js&&!Ft})},`${ro} `),ea&&n.createElement("span",null,n.createElement(we.I,{name:"arrow-right"})," ",n.createElement("i",{className:La.rpcColorMarker,style:{background:ea.color}}),ea.serviceName),Xn&&n.createElement("span",null,n.createElement(we.I,{name:"arrow-right"})," ",n.createElement("i",{className:La.rpcColorMarker,style:{background:Xn.color}}),Xn.serviceName),n.createElement("span",{className:La.endpointName},ea?ea.operationName:vr),n.createElement("span",{className:La.endpointName}," ",this.getSpanBarLabel(ja,ct,br))),Ks&&(()=>{const or=Ks(ja),er=or?.length||0;return or&&er===1?or[0]?n.createElement("a",{href:or[0].href,target:"_blank",style:{background:`${et}10`,borderBottom:`1px solid ${et}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:or[0].onClick?Os=>{!(Os.ctrlKey||Os.metaKey||Os.shiftKey)&&or[0].onClick&&(Os.preventDefault(),or[0].onClick(Os))}:void 0},or[0].content):null:or&&er>1?n.createElement(Xa,{links:or,datasourceType:Es,color:et}):null})())),n.createElement(V.Cell,{className:h()(La.view,Xs,{[La.viewExpanded]:zt,[La.viewExpandedAndMatchingFilter]:sn&&zt}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Ot,onClick:this._detailToggle},n.createElement(N,{numTicks:$n}),n.createElement(sa,{criticalPath:hr,rpc:ea,viewStart:cr,viewEnd:oa,getViewedBounds:Ua,color:et,shortLabel:br,longLabel:Ds,traceStartTime:Ta,span:ja,labelClassName:`${Cs} ${$s}`,className:Rs})))}}const _s=(0,m.cV)(bo),Ls=(0,o.N)(Qe=>({expandedAccent:(0,t.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,t.css)`
      label: infoWrapper;
      border: 1px solid ${(0,i.R)(Qe,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Bs extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(qe,et)=>{const{linksGetter:ct,span:Ot}=this.props;return ct(Ot,qe,et)}}render(){const{color:qe,columnDivision:et,detailState:ct,logItemToggle:Ot,logsToggle:Ft,processToggle:zt,referenceItemToggle:sn,referencesToggle:un,warningsToggle:yn,stackTracesToggle:$n,span:ea,traceToProfilesOptions:Xn,timeZone:ra,tagsToggle:Ua,traceStartTime:Ta,traceDuration:ja,traceName:Sa,hoverIndentGuideIds:za,addHoverIndentGuideId:ka,removeHoverIndentGuideId:Ia,theme:hs,createSpanLink:Is,focusedSpanId:Ks,createFocusSpanLink:Es,datasourceType:Gs,visibleSpanIds:Ss,traceFlameGraphs:hr,setTraceFlameGraphs:Or,setRedrawListView:js}=this.props,vr=Ls(hs);return n.createElement(V,null,n.createElement(V.Cell,{width:et,style:{overflow:"hidden"}},n.createElement(ss,{span:ea,showChildrenIcon:!1,hoverIndentGuideIds:za,addHoverIndentGuideId:ka,removeHoverIndentGuideId:Ia,visibleSpanIds:Ss}),n.createElement(Ne.$n,{fill:"text",onClick:this._detailToggle,className:h()(vr.expandedAccent,(0,Ne.my)(hs)),style:{borderColor:qe},"data-testid":"detail-row-expanded-accent"})),n.createElement(V.Cell,{width:1-et},n.createElement("div",{className:vr.infoWrapper,style:{borderTopColor:qe}},n.createElement(va,{detailState:ct,linksGetter:this._linksGetter,logItemToggle:Ot,logsToggle:Ft,processToggle:zt,referenceItemToggle:sn,referencesToggle:un,warningsToggle:yn,stackTracesToggle:$n,span:ea,traceToProfilesOptions:Xn,timeZone:ra,tagsToggle:Ua,traceStartTime:Ta,traceDuration:ja,traceName:Sa,createSpanLink:Is,focusedSpanId:Ks,createFocusSpanLink:Es,datasourceType:Gs,traceFlameGraphs:hr,setTraceFlameGraphs:Or,setRedrawListView:js}))))}}const Tr=(0,m.cV)(Bs),Ws=(0,o.N)(()=>({rowsWrapper:(0,t.css)`
      width: 100%;
    `,row:(0,t.css)`
      width: 100%;
    `,scrollToTopButton:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `})),co={bar:28,detail:161,detailWithLogs:197},ei=5,Ur=33;function Ao(Qe,qe,et,ct,Ot,Ft,zt){if(!Qe)return[];Ot&&ct&&(Qe=Qe.filter(yn=>ct.has(yn.spanID))),Ft&&zt&&(Qe=Qe.filter(yn=>zt.find($n=>$n.spanId===yn.spanID)));let sn=null;const un=[];for(let yn=0;yn<Qe.length;yn++){const $n=Qe[yn],{spanID:ea,depth:Xn}=$n;let ra=!1;sn!=null&&(Xn>=sn?ra=!0:sn=null),!ra&&(qe.has(ea)&&(sn=Xn+1),un.push({span:$n,isDetail:!1,spanIndex:yn}),et.has(ea)&&un.push({span:$n,isDetail:!0,spanIndex:yn}))}return un}function uo(Qe){const[qe,et]=Qe;return{left:qe>0,right:et<1}}function rs(Qe,qe,et,ct,Ot,Ft,zt){return Qe?Ao(Qe.spans,qe,et,ct,Ot,Ft,zt):[]}function Ro(Qe){const qe=new Map;return Qe&&Qe.spans.forEach(et=>{et.childSpanIds.length&&qe.set(et.spanID,et.childSpanIds)}),qe}const Do=(0,Te.A)(rs),lr=(0,Te.A)(y,ue.isEqual),Lo=(0,Te.A)(uo,ue.isEqual),ii=(0,Te.A)(Ro);class Hr extends n.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=qe=>this.getRowStates()[qe].spanIndex,this.mapSpanIndexToRowIndex=qe=>{const et=this.getRowStates().length;for(let ct=0;ct<et;ct++){const{spanIndex:Ot}=this.getRowStates()[ct];if(Ot===qe)return ct}throw new Error(`unable to find row for span index: ${qe}`)},this.setListView=qe=>{this.listView=qe},this.getKeyFromIndex=qe=>{const{isDetail:et,span:ct}=this.getRowStates()[qe];return`${ct.traceID}--${ct.spanID}--${et?"detail":"bar"}`},this.getIndexFromKey=qe=>{const et=qe.split("--"),ct=et[0],Ot=et[1],Ft=et[2]==="detail",zt=this.getRowStates().length;for(let sn=0;sn<zt;sn++){const{span:un,isDetail:yn}=this.getRowStates()[sn];if(un.spanID===Ot&&un.traceID===ct&&yn===Ft)return sn}return-1},this.getRowHeight=qe=>{const{span:et,isDetail:ct}=this.getRowStates()[qe];return ct?Array.isArray(et.logs)&&et.logs.length?co.detailWithLogs:co.detail:co.bar},this.renderRow=(qe,et,ct,Ot)=>{const{isDetail:Ft,span:zt,spanIndex:sn}=this.getRowStates()[ct],un=Math.max((this.listView?.getTopVisibleIndex()||0)-Ur,0),yn=(this.listView?.getBottomVisibleIndex()||0)+Ur,$n=this.getVisibleSpanIds(un,yn);return Ft?this.renderSpanDetailRow(zt,qe,et,Ot,$n):this.renderSpanBarRow(zt,sn,qe,et,Ot,$n)},this.scrollToSpan=(qe,et)=>{if(et==null)return;const ct=this.getRowStates().findIndex(Ot=>Ot.span.spanID===et);ct>=0&&this.listView?.scrollToIndex(ct,qe)},this.scrollToTop=()=>{const{topOfViewRef:qe,datasourceType:et,trace:ct}=this.props;qe?.current?.scrollIntoView({behavior:"smooth"}),(0,r.rR)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:et,grafana_version:s.$.buildInfo.version,numServices:ct.services.length,numSpans:ct.spans.length})},this.getVisibleSpanIds=(0,Te.A)((qe,et)=>{const ct=[];for(let Ot=qe;Ot<et;Ot++){const Ft=this.getRowStates()[Ot];Ft?.span&&ct.push(Ft.span.spanID)}return ct})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(qe){let et;for(et in qe)if(qe[et]!==this.props[et])return!0;return!1}componentDidUpdate(qe){const{headerHeight:et,focusedSpanId:ct,focusedSpanIdForSearch:Ot}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(et,ct),this.hasScrolledToSpan=!0),ct!==qe.focusedSpanId&&this.scrollToSpan(et,ct),Ot!==qe.focusedSpanIdForSearch&&this.scrollToSpan(et,Ot)}getRowStates(){const{childrenHiddenIDs:qe,detailStates:et,trace:ct,findMatchesIDs:Ot,showSpanFilterMatchesOnly:Ft,showCriticalPathSpansOnly:zt,criticalPath:sn}=this.props;return Do(ct,qe,et,Ot,Ft,zt,sn)}getClipping(){const{currentViewRangeTime:qe}=this.props;return Lo(qe)}getViewedBounds(){const{currentViewRangeTime:qe,trace:et}=this.props,[ct,Ot]=qe;return lr({min:et.startTime,max:et.endTime,viewStart:ct,viewEnd:Ot})}getChildSpansMap(){return ii(this.props.trace)}getAccessors(){const qe=this.listView;if(!qe)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:qe.getViewHeight,getBottomRowIndexVisible:qe.getBottomVisibleIndex,getTopRowIndexVisible:qe.getTopVisibleIndex,getRowPosition:qe.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(qe,et,ct,Ot,Ft,zt){const{spanID:sn,childSpanIds:un}=qe,{serviceName:yn}=qe.process,{childrenHiddenIDs:$n,childrenToggle:ea,detailStates:Xn,detailToggle:ra,findMatchesIDs:Ua,spanNameColumnWidth:Ta,trace:ja,spanBarOptions:Sa,hoverIndentGuideIds:za,addHoverIndentGuideId:ka,removeHoverIndentGuideId:Ia,createSpanLink:hs,focusedSpanId:Is,focusedSpanIdForSearch:Ks,showSpanFilterMatchesOnly:Es,theme:Gs,datasourceType:Ss,criticalPath:hr}=this.props;if(!ja)return null;const Or=(0,De.Kv)(yn,Gs),js=$n.has(sn),vr=Xn.has(sn),ro=Ua?Ua.has(sn):!1,br=sn===Is||sn===Ks,fr=R(qe)||js&&B(ja.spans,et);let cr=null;if(js){const Os=U(ja.spans.slice(et));if(Os){const ho=this.getViewedBounds()(Os.startTime,Os.startTime+Os.duration);cr={color:(0,De.Kv)(Os.process.serviceName,Gs),operationName:Os.operationName,serviceName:Os.process.serviceName,viewEnd:ho.end,viewStart:ho.start}}}const oa=qe.tags.find(Os=>Os.key===re);let La=null;!qe.hasChildren&&oa&&w(qe)&&(La={serviceName:oa.value,color:(0,De.Kv)(oa.value,Gs)});const es=et>0?ja.spans[et-1]:null,Ds=[sn,...un],$s=Os=>{Os.forEach(ho=>{const vo=this.getChildSpansMap().get(ho);vo?.length&&(Ds.push(...vo),$s(vo))})};$s(un);const or=hr?.filter(Os=>js?Ds.includes(Os.spanId):Os.spanId===sn),er=Ws();return n.createElement("div",{className:er.row,key:ct,style:Ot,...Ft},n.createElement(_s,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Or,spanBarOptions:Sa,columnDivision:Ta,isChildrenExpanded:!js,isDetailExpanded:vr,isMatchingFilter:ro,isFocused:br,showSpanFilterMatchesOnly:Es,numTicks:ei,onDetailToggled:ra,onChildrenToggled:ea,rpc:cr,noInstrumentedServer:La,showErrorIcon:fr,getViewedBounds:this.getViewedBounds(),traceStartTime:ja.startTime,span:qe,hoverIndentGuideIds:za,addHoverIndentGuideId:ka,removeHoverIndentGuideId:Ia,createSpanLink:hs,datasourceType:Ss,showServiceName:es===null||es.process.serviceName!==qe.process.serviceName,visibleSpanIds:zt,criticalPath:or}))}renderSpanDetailRow(qe,et,ct,Ot,Ft){const{spanID:zt}=qe,{serviceName:sn}=qe.process,{detailLogItemToggle:un,detailLogsToggle:yn,detailProcessToggle:$n,detailReferencesToggle:ea,detailReferenceItemToggle:Xn,detailWarningsToggle:ra,detailStackTracesToggle:Ua,detailStates:Ta,detailTagsToggle:ja,detailToggle:Sa,spanNameColumnWidth:za,trace:ka,traceToProfilesOptions:Ia,timeZone:hs,hoverIndentGuideIds:Is,addHoverIndentGuideId:Ks,removeHoverIndentGuideId:Es,linksGetter:Gs,createSpanLink:Ss,focusedSpanId:hr,createFocusSpanLink:Or,theme:js,datasourceType:vr,traceFlameGraphs:ro,setTraceFlameGraphs:br,setRedrawListView:fr}=this.props,cr=Ta.get(zt);if(!ka||!cr)return null;const oa=(0,De.Kv)(sn,js),La=Ws();return n.createElement("div",{className:La.row,key:et,style:{...ct,zIndex:1},...Ot},n.createElement(Tr,{color:oa,columnDivision:za,onDetailToggled:Sa,detailState:cr,linksGetter:Gs,logItemToggle:un,logsToggle:yn,processToggle:$n,referenceItemToggle:Xn,referencesToggle:ea,warningsToggle:ra,stackTracesToggle:Ua,span:qe,traceToProfilesOptions:Ia,timeZone:hs,tagsToggle:ja,traceStartTime:ka.startTime,traceDuration:ka.duration,traceName:ka.traceName,hoverIndentGuideIds:Is,addHoverIndentGuideId:Ks,removeHoverIndentGuideId:Es,createSpanLink:Ss,focusedSpanId:hr,createFocusSpanLink:Or,datasourceType:vr,visibleSpanIds:Ft,traceFlameGraphs:ro,setTraceFlameGraphs:br,setRedrawListView:fr}))}render(){const qe=Ws(),{scrollElement:et,redrawListView:ct}=this.props;return n.createElement(n.Fragment,null,n.createElement(Me,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:Ur,viewBufferMin:Ur,itemsWrapperClassName:qe.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:et,redraw:ct}),this.props.topOfViewRef&&n.createElement(he.I,{className:qe.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Po=(0,m.cV)(Hr),Co=(0,o.N)(Qe=>({TraceTimelineViewer:(0,t.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,i.R)(Qe,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,i.R)(Qe,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,i.R)(Qe,"teal")};
      }

      & .json-markup-null {
        color: ${(0,i.R)(Qe,"teal")};
      }

      & .json-markup-number {
        color: ${(0,i.R)(Qe,"blue","black")};
      }
    `})),ur=5;class Vo extends n.PureComponent{constructor(qe){super(qe),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){p({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:qe,updateNextViewRangeTime:et,updateViewRangeTime:ct,viewRange:Ot,traceTimeline:Ft,theme:zt,topOfViewRef:sn,focusedSpanIdForSearch:un,...yn}=this.props,{trace:$n}=yn,ea=Co(zt);return n.createElement("div",{className:ea.TraceTimelineViewer,ref:Xn=>Xn&&this.setState({height:Xn.getBoundingClientRect().height})},n.createElement(le,{duration:$n.duration,nameColumnWidth:Ft.spanNameColumnWidth,numTicks:ur,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:qe,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Ot.time,updateNextViewRangeTime:et,updateViewRangeTime:ct,columnResizeHandleHeight:this.state.height}),n.createElement(Po,{...yn,...Ft,setSpanNameColumnWidth:qe,currentViewRangeTime:Ot.time.current,topOfViewRef:sn,focusedSpanIdForSearch:un,datasourceType:this.props.datasourceType}))}}const mo=(0,m.cV)(Vo);var jr=e(39938);const Bo=()=>({NewWindowIconLarge:(0,t.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function mr(Qe){const{isLarge:qe,className:et,...ct}=Qe,Ot=(0,m.of)(Bo),Ft=h()({[Ot.NewWindowIconLarge]:qe},et);return n.createElement(we.I,{className:Ft,name:"anchor",...ct})}mr.defaultProps={isLarge:!1};const xt=Qe=>n.createElement("a",{href:Qe.href,title:Qe.title,target:"_blank",rel:"noopener noreferrer",className:Qe.className},Qe.children," ",n.createElement(mr,null));function wt(Qe){const{links:qe}=Qe;return n.createElement(xt,{href:qe[0].url,title:qe[0].text,className:Qe.className})}const fn=100,cn="<trace-without-root-span>",bn=()=>({BreakableText:(0,t.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),Wn=/\W*\w+\W*/g;function jn(Qe){const{className:qe,text:et,wordRegexp:ct=Wn}=Qe,Ot=(0,m.of)(bn);if(!et)return null;const Ft=[];ct.exec("");let zt=ct.exec(et)||[et];for(;zt;)Ft.push(n.createElement("span",{key:`${et}-${Ft.length}`,className:qe||Ot.BreakableText},zt[0])),zt=ct.exec(et);return n.createElement(n.Fragment,null,Ft)}jn.defaultProps={wordRegexp:Wn};const pa=Qe=>({TraceName:(0,t.css)`
      label: TraceName;
      font-size: ${Qe.typography.size.lg};
    `});function xa(Qe){const{className:qe,traceName:et}=Qe,ct=(0,m.of)(pa),Ot=String(et||cn),Ft=n.createElement(jn,{text:Ot});return n.createElement("span",{className:h()(ct.TraceName,qe)},Ft)}var us=e(40784);const bs=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:fn,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ga(){return bs}function Qa(Qe){return(0,ue.get)(Ga(),Qe)}const Zs=/#\{([^{}]*)\}/g;function yr(Qe){const qe=new Set;return Qe.replace(Zs,(et,ct)=>(qe.add(ct),et)),Array.from(qe)}function sr(Qe,qe,et){return Qe.replace(Zs,(ct,Ot)=>{const Ft=et[Ot];return Ft==null?"":qe(Ft)})}function xr(Qe,qe){if(typeof Qe!="string")throw new Error("Invalid template");return{parameters:yr(Qe),template:sr.bind(null,Qe,qe)}}function To(Qe){if(typeof Qe=="string")return qe=>qe===Qe;if(Array.isArray(Qe))return qe=>Qe.indexOf(qe)>-1;if(Qe==null)return()=>!0;throw new Error(`Invalid value: ${Qe}`)}const qs=Qe=>Qe;function _o(Qe){try{const qe=xr(Qe.url,encodeURIComponent),et=xr(Qe.text,qs);return{object:Qe,type:To(Qe.type),key:To(Qe.key),value:To(Qe.value),url:qe,text:et,parameters:(0,ue.uniq)(qe.parameters.concat(et.parameters))}}catch(qe){return console.error(`Ignoring invalid link pattern: ${qe}`,Qe),null}}function no(Qe,qe){return Qe.template(qe)}function ms(Qe,qe){const et=[],ct=Object.keys(qe).filter(Ot=>typeof qe[Ot]=="string"||qe[Ot]==="number");return Qe?.filter(Ot=>Ot?.type("traces")).forEach(Ot=>{const Ft={};Ot?.parameters.every(sn=>{const un=sn;return ct.includes(un)?(Ft[sn]=qe[un],!0):!1})&&et.push({url:no(Ot.url,Ft),text:no(Ot.text,Ft)})}),et}const Hs=(Qa("linkPatterns")||[]).map(_o).filter(Qe=>!!Qe),ao=(0,us.A)(10)(Qe=>{const qe=[];return Qe?ms(Hs,Qe):qe});function fs(Qe){let qe;const et=new Set(Qe.map(({spanID:ct})=>ct));for(let ct=0;ct<Qe.length;ct++){if(Qe[ct].references&&Qe[ct].references.some(({traceID:sn,spanID:un})=>sn===Qe[ct].traceID&&et.has(un)))continue;if(!qe){qe=Qe[ct];continue}const Ft=Qe[ct].references&&Qe[ct].references.length||0,zt=qe.references&&qe.references.length||0;(Ft<zt||Ft===zt&&Qe[ct].startTime<qe.startTime)&&(qe=Qe[ct])}return qe?`${qe.process.serviceName}: ${qe.operationName}`:""}const Gr=(0,ue.memoize)(fs,Qe=>Qe.length?Qe[0].traceID:0);function Uo(Qe){for(let qe=0;qe<Qe.length;qe++){const et=Qe[qe].tags.filter(Ft=>Ft.key==="http.method"),ct=Qe[qe].tags.filter(Ft=>Ft.key==="http.status_code"),Ot=Qe[qe].tags.filter(Ft=>Ft.key==="http.url"||Ft.key==="http.target"||Ft.key==="http.path");if(et.length>0||ct.length>0||Ot.length>0)return{method:et,status:ct,url:Ot}}return{}}const li=(0,ue.memoize)(Uo,Qe=>Qe.length?Qe[0].traceID:0);var El=e(2913),Ts=e(18358);const yl=Qe=>({ActionButton:(0,t.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${Qe.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function nl(Qe){const{onClick:qe,ariaLabel:et,label:ct,icon:Ot}=Qe,Ft=(0,m.of)(yl);return n.createElement(Ne.$n,{className:Ft.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:Ot,"aria-label":et,onClick:qe},ct)}const bl=Qe=>({TracePageActions:(0,t.css)({label:"TracePageActions",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"10px"}),feedback:(0,t.css)({margin:"6px 6px 6px 0",color:Qe.colors.text.secondary,fontSize:Qe.typography.bodySmall.fontSize,"&:hover":{color:Qe.colors.text.link}})});function wi(Qe){const{traceId:qe,data:et,app:ct}=Qe,Ot=(0,m.$j)(),Ft=bl(Ot),[zt,sn]=(0,n.useState)(!1),un=()=>{navigator.clipboard.writeText(qe),sn(!0),setTimeout(()=>{sn(!1)},5e3)},yn=()=>{const $n=(0,Ts.ek)(et,"Trace-"+qe.substring(qe.length-6));(0,r.rR)("grafana_traces_download_traces_clicked",{app:ct,grafana_version:El.config.buildInfo.version,trace_format:$n,location:"trace-view"})};return n.createElement("div",{className:Ft.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:Ft.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(we.I,{name:"comment-alt-message"})," Give feedback"),n.createElement(nl,{onClick:un,ariaLabel:"Copy Trace ID",label:zt?"Copied!":"Trace ID",icon:"copy"}),n.createElement(nl,{onClick:yn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var Sr=e(50877),Ci=e(3721),ci=e(40996),Qr=e(14186),Fi=e(10354);const Dl=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,fo=(Qe,qe)=>!(Qe.match(qe)||!Qe),zo=Qe=>{const qe=Qe.validationRegex||Dl,[et,ct]=(0,n.useState)(()=>Qe.value?fo(Qe.value,qe):!1);(0,ci.A)(()=>{ct(fo(Qe.value,qe))},500,[Qe.value]);const Ot={labelWidth:26,disabled:Qe.disabled??!1,invalid:et,error:Qe.isInvalidError};return Qe.label&&(Ot.label=Qe.label,Ot.tooltip=Qe.tooltip||""),n.createElement(Qr.I,{...Ot},n.createElement(Fi.p,{type:"text",placeholder:Qe.placeholder||"0",width:Qe.width||40,onChange:Ft=>{Qe.onChange(Ft.currentTarget.value)},value:Qe.value,"aria-label":Qe.ariaLabel||"interval input"}))};var Mr=e(82762),ko=e(39268),Ho=e(66864),So=e(88323),Wi=e(15583);class Ki extends n.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}static{this.defaultProps={value:void 0}}render(){const{value:qe}=this.props,et=n.createElement(n.Fragment,null,qe&&qe.length&&n.createElement(z.K,{name:"times",onClick:this.clearUiFind,tooltip:"Clear input"}));return n.createElement("div",{style:{width:"200px"}},n.createElement(Fi.p,{placeholder:"Find...",onChange:ct=>this.props.onChange(ct.currentTarget.value),suffix:et,value:qe}))}}const Ti=(0,n.memo)(function(qe){const{trace:et,spanFilterMatches:ct,setFocusedSpanIdForSearch:Ot,focusedSpanIndexForSearch:Ft,setFocusedSpanIndexForSearch:zt,datasourceType:sn,showSpanFilters:un}=qe,yn=Pl((0,m.$j)(),un);(0,n.useEffect)(()=>{if(ct&&Ft!==-1){const Ia=Array.from(ct);Ot(Ia[Ft])}},[Ft,Ot,ct]);const $n=(Ia,hs)=>{if(Ia.preventDefault(),Ia.stopPropagation(),hs){if((0,r.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:sn,grafana_version:s.$.buildInfo.version,direction:"next"}),Ft===-1||ct&&Ft===ct.size-1){zt(0);return}zt(Ft+1)}},ea=(Ia,hs)=>{if(Ia.preventDefault(),Ia.stopPropagation(),hs){if((0,r.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:sn,grafana_version:s.$.buildInfo.version,direction:"prev"}),ct&&(Ft===-1||Ft===0)){zt(ct.size-1);return}zt(Ft-1)}},Xn=(Ia,hs)=>{Ia.key==="Enter"&&$n(Ia,hs)},ra=(Ia,hs)=>{Ia.key==="Enter"&&ea(Ia,hs)},Ua=(ct&&ct?.size>0)??!1,Ta=Ua?yn.button:(0,t.cx)(yn.button,yn.buttonDisabled),ja=(0,n.useCallback)(Ia=>n.createElement(He.m,{content:Ia,placement:"top"},n.createElement("span",{className:yn.tooltip},n.createElement(we.I,{name:"info-circle",size:"md"}))),[yn.tooltip]),Sa=(0,n.useCallback)((Ia,hs)=>{let Is=n.createElement(n.Fragment,null,n.createElement("span",null,`${et.spans.length} spans`),ja(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",hs),n.createElement("div",null,"Depth: ",Ia))));if(ct)if(ct.size===0)Is=n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),ja("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const Ks=ct.size===1?"match":"matches",Es=Ft!==-1?`${Ft+1}/${ct.size} ${Ks}`:`${ct.size} ${Ks}`,Gs=[];ct.forEach(Ss=>{et.processes[Ss]&&Gs.push(et.processes[Ss].serviceName)}),Is=n.createElement(n.Fragment,null,n.createElement("span",null,Es),ja(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",new Set(Gs).size,"/",hs),n.createElement("div",null,"Depth: ",Ia))))}return Is},[Ft,ja,ct,et.processes,et.spans]),za=new Set((0,ue.values)(et.processes).map(Ia=>Ia.serviceName)).size,ka=(0,ue.get)((0,ue.maxBy)(et.spans,"depth"),"depth",0)+1;return n.createElement(n.Fragment,null,n.createElement("span",{className:yn.matches},Sa(ka,za)),n.createElement("div",{className:Ua?yn.buttons:(0,t.cx)(yn.buttons,yn.buttonsDisabled)},n.createElement("div",{"aria-label":"Prev result button",className:Ta,onClick:Ia=>ea(Ia,Ua),onKeyDown:Ia=>ra(Ia,Ua),role:"button",tabIndex:Ua?0:-1},"Prev"),n.createElement("div",{"aria-label":"Next result button",className:Ta,onClick:Ia=>$n(Ia,Ua),onKeyDown:Ia=>Xn(Ia,Ua),role:"button",tabIndex:Ua?0:-1},"Next")))}),Pl=(Qe,qe)=>{const et=(0,Ne.hs)({theme:Qe,variant:"secondary",size:qe?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,t.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,t.css)`
      cursor: not-allowed;
    `,button:(0,t.css)`
      ${et.button};
    `,buttonDisabled:(0,t.css)`
      ${et.disabled};
      pointer-events: none;
    `,matches:(0,t.css)`
      margin-right: ${Qe.spacing(2)};
      text-wrap: nowrap;
    `,tooltip:(0,t.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var al=e(15292);function sl(Qe,qe){if(!qe)return;let et=!1;Qe.serviceName&&(qe=Wr(qe,Qe),et=!0),Qe.spanName&&(qe=$i(qe,Qe),et=!0),(Qe.from||Qe.to)&&(qe=Si(qe,Qe),et=!0);const ct=Cl(qe,Qe.tags);if(ct&&(qe=ct,et=!0),Qe.query){const Ot=rl(Qe.query,qe);Ot&&(qe=Ot,et=!0)}return et?new Set(qe.map(Ot=>Ot.spanID)):void 0}function rl(Qe,qe){if(!qe)return;const et=[];Qe.split(/\s+/).filter(Boolean).forEach(zt=>{et.push(zt.toLowerCase())});const ct=(zt,sn)=>zt.some(un=>sn.toLowerCase().includes(un)),Ot=zt=>zt?zt.some(sn=>ct(et,sn.key)||ct(et,sn.value.toString())):!1,Ft=zt=>ct(et,zt.operationName)||ct(et,zt.process.serviceName)||Ot(zt.tags)||zt.kind&&ct(et,zt.kind)||zt.statusCode!==void 0&&ct(et,at.s[zt.statusCode])||zt.statusMessage&&ct(et,zt.statusMessage)||zt.instrumentationLibraryName&&ct(et,zt.instrumentationLibraryName)||zt.instrumentationLibraryVersion&&ct(et,zt.instrumentationLibraryVersion)||zt.traceState&&ct(et,zt.traceState)||zt.logs!==null&&zt.logs.some(sn=>Ot(sn.fields))||Ot(zt.process.tags)||et.some(sn=>sn===zt.spanID);return qe.filter(Ft)}const Cl=(Qe,qe)=>{if(qe=qe.filter(et=>et.key&&et.key!==""||et.value),qe.length>0)return Qe.filter(et=>qe.every(ct=>{if(ct.key&&ct.value){if(et.tags.some(Ot=>No(ct,Ot))||et.process.tags.some(Ot=>No(ct,Ot))||et.logs&&et.logs.some(Ot=>Ot.fields.some(Ft=>No(ct,Ft)))||et.kind&&ct.key===it&&ct.value===et.kind||et.statusCode!==void 0&&ct.key===Mt&&ct.value===at.s[et.statusCode].toLowerCase()||et.statusMessage&&ct.key===Dn&&ct.value===et.statusMessage||et.instrumentationLibraryName&&ct.key===lt&&ct.value===et.instrumentationLibraryName||et.instrumentationLibraryVersion&&ct.key===Ct&&ct.value===et.instrumentationLibraryVersion||et.traceState&&ct.key===Vt&&ct.value===et.traceState||ct.key===qt&&ct.value===et.spanID)return so(ct.operator,!0)}else if(ct.key&&(et.tags.some(Ot=>go(ct.key,Ot.key))||et.process.tags.some(Ot=>go(ct.key,Ot.key))||et.logs&&et.logs.some(Ot=>Ot.fields.some(Ft=>go(ct.key,Ft.key)))||et.kind&&ct.key===it||et.statusCode!==void 0&&ct.key===Mt||et.statusMessage&&ct.key===Dn||et.instrumentationLibraryName&&ct.key===lt||et.instrumentationLibraryVersion&&ct.key===Ct||et.traceState&&ct.key===Vt||ct.key===qt))return so(ct.operator,!0);return so(ct.operator,!1)}))},go=(Qe,qe)=>Qe===qe.toString(),No=(Qe,qe)=>Qe.key===qe.key.toString()&&Qe.value===qe.value.toString(),so=(Qe,qe)=>Qe==="="?qe:!qe,Wr=(Qe,qe)=>Qe.filter(et=>qe.serviceNameOperator==="="?et.process.serviceName===qe.serviceName:et.process.serviceName!==qe.serviceName),$i=(Qe,qe)=>Qe.filter(et=>qe.spanNameOperator==="="?et.operationName===qe.spanName:et.operationName!==qe.spanName),Si=(Qe,qe)=>{const et=di(qe?.from||""),ct=di(qe?.to||"");let Ot=[];if(et&&(Ot=Qe.filter(Ft=>qe.fromOperator===">"?Ft.duration>et:Ft.duration>=et)),ct){const Ft=zt=>qe.toOperator==="<"?zt.duration<ct:zt.duration<=ct;Ot=Ot.length>0?Ot.filter(zt=>Ft(zt)):Qe.filter(zt=>Ft(zt))}return Ot},di=Qe=>{if(Qe.includes("ns"))return parseFloat(Qe.split("ns")[0])/1e3;if(Qe.includes("us"))return parseFloat(Qe.split("us")[0]);if(Qe.includes("\xB5s"))return parseFloat(Qe.split("\xB5s")[0]);if(Qe.includes("ms"))return parseFloat(Qe.split("ms")[0])*1e3;if(Qe.includes("s"))return parseFloat(Qe.split("s")[0])*1e3*1e3;if(Qe.includes("m"))return parseFloat(Qe.split("m")[0])*1e3*1e3*60;if(Qe.includes("h"))return parseFloat(Qe.split("h")[0])*1e3*1e3*60*60},jo=(0,n.memo)(function(qe){const{trace:et,search:ct,spanFilterMatches:Ot,showSpanFilterMatchesOnly:Ft,setShowSpanFilterMatchesOnly:zt,showCriticalPathSpansOnly:sn,setShowCriticalPathSpansOnly:un,focusedSpanIndexForSearch:yn,setFocusedSpanIndexForSearch:$n,setFocusedSpanIdForSearch:ea,datasourceType:Xn,clear:ra,showSpanFilters:Ua}=qe,Ta=(0,m.of)(Vi),ja=(0,n.useMemo)(()=>ct.serviceName&&ct.serviceName!==""||ct.spanName&&ct.spanName!==""||di(ct.from||"")||di(ct.to||"")||ct.tags.length>1||ct.tags.some(Sa=>Sa.key)||ct.query&&ct.query!==""||Ft,[ct.serviceName,ct.spanName,ct.from,ct.to,ct.tags,ct.query,Ft]);return n.createElement("div",{className:Ta.container},n.createElement("div",{className:Ta.controls},n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(Ne.$n,{variant:"destructive",disabled:!ja,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:ra},"Clear"),n.createElement("div",{className:Ta.matchesOnly},n.createElement(al.d,{value:Ft,onChange:Sa=>zt(Sa.currentTarget.checked??!1),label:"Show matches only switch",disabled:!Ot?.size}),n.createElement(Ne.$n,{onClick:()=>zt(!Ft),className:Ta.clearMatchesButton,variant:"secondary",fill:"text",disabled:!Ot?.size},"Show matches only")),n.createElement("div",{className:Ta.matchesOnly},n.createElement(al.d,{value:sn,onChange:Sa=>un(Sa.currentTarget.checked??!1),label:"Show critical path only switch"}),n.createElement(Ne.$n,{onClick:()=>un(!sn),className:Ta.clearMatchesButton,variant:"secondary",fill:"text"},"Show critical path only"))),n.createElement("div",{className:Ta.nextPrevResult},n.createElement(Ti,{trace:et,spanFilterMatches:Ot,setFocusedSpanIdForSearch:ea,focusedSpanIndexForSearch:yn,setFocusedSpanIndexForSearch:$n,datasourceType:Xn,showSpanFilters:Ua})))))}),Vi=Qe=>{const qe=(0,Ne.hs)({theme:Qe,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,t.css)(qe.button),buttonDisabled:(0,t.css)(qe.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,t.css)`
      display: inline;
    `,controls:(0,t.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,matchesOnly:(0,t.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,t.css)`
      color: ${Qe.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,t.css)`
      margin-left: auto;
      display: flex;
      align-items: center;
    `}},po=(0,n.memo)(Qe=>{const{trace:qe,search:et,setSearch:ct,showSpanFilters:Ot,setShowSpanFilters:Ft,showSpanFilterMatchesOnly:zt,setShowSpanFilterMatchesOnly:sn,showCriticalPathSpansOnly:un,setShowCriticalPathSpansOnly:yn,setFocusedSpanIdForSearch:$n,spanFilterMatches:ea,datasourceType:Xn}=Qe,ra={...(0,m.of)(Tl)},[Ua,Ta]=(0,n.useState)(),[ja,Sa]=(0,n.useState)(),[za,ka]=(0,n.useState)(),[Ia,hs]=(0,n.useState)({}),[Is,Ks]=(0,n.useState)(-1),Es=/^\d+(?:\.\d)?\d*(?:ns|us|µs|ms|s|m|h)$/,Gs=(0,n.useCallback)(()=>{Ta(void 0),Sa(void 0),ka(void 0),hs({}),ct(Wi.Ji),sn(!1)},[ct,sn]);if((0,n.useEffect)(()=>{Gs()},[Gs,qe]),!qe)return null;const Ss=oa=>{Ks(-1),$n(""),ct(oa)},hr=()=>{if(!Ua){const oa=qe.spans.map(La=>La.process.serviceName);Ta((0,ue.uniq)(oa).sort().map(Sr.z))}},Or=()=>{if(!ja){const oa=qe.spans.map(La=>La.operationName);Sa((0,ue.uniq)(oa).sort().map(Sr.z))}},js=()=>{if(!za){let oa=[],La=[];qe.spans.forEach(es=>{es.tags.forEach(Ds=>{oa.push(Ds.key)}),es.process.tags.forEach(Ds=>{oa.push(Ds.key)}),es.logs!==null&&es.logs.forEach(Ds=>{Ds.fields.forEach($s=>{La.push($s.key)})}),es.kind&&oa.push(it),es.statusCode!==void 0&&oa.push(Mt),es.statusMessage&&oa.push(Dn),es.instrumentationLibraryName&&oa.push(lt),es.instrumentationLibraryVersion&&oa.push(Ct),es.traceState&&oa.push(Vt),oa.push(qt)}),oa=(0,ue.uniq)(oa).sort(),La=(0,ue.uniq)(La).sort(),ka([...oa,...La].map(Sr.z))}},vr=async oa=>{const La=[];return qe.spans.forEach(es=>{const Ds=es.tags.find(or=>or.key===oa)?.value;Ds&&La.push(Ds.toString());const $s=es.process.tags.find(or=>or.key===oa)?.value;switch($s&&La.push($s.toString()),es.logs!==null&&es.logs.forEach(or=>{const er=or.fields.find(Os=>Os.key===oa)?.value;er&&La.push(er.toString())}),oa){case it:es.kind&&La.push(es.kind);break;case Mt:es.statusCode!==void 0&&La.push(at.s[es.statusCode].toLowerCase());break;case Dn:es.statusMessage&&La.push(es.statusMessage);break;case lt:es.instrumentationLibraryName&&La.push(es.instrumentationLibraryName);break;case Ct:es.instrumentationLibraryVersion&&La.push(es.instrumentationLibraryVersion);break;case Vt:es.traceState&&La.push(es.traceState);break;case qt:La.push(es.spanID);break;default:break}}),(0,ue.uniq)(La).sort().map(Sr.z)},ro=(oa,La)=>{ct({...et,tags:et.tags?.map(Ds=>Ds.id===oa.id?{...Ds,key:La?.value||"",value:void 0}:Ds)}),(async()=>{if(La?.value)hs({...Ia,[oa.id]:await vr(La.value)});else{const Ds={...Ia};Ds[oa.id]&&delete Ds[oa.id],hs(Ds)}})()},br=()=>{const oa={id:(0,Wi.zE)(),operator:"="};ct({...et,tags:[...et.tags,oa]})},fr=oa=>{let La=et.tags.filter(es=>es.id!==oa);La.length===0&&(La=[{id:(0,Wi.zE)(),operator:"="}]),ct({...et,tags:La})},cr=n.createElement(n.Fragment,null,n.createElement(He.m,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},n.createElement("span",{className:ra.collapseLabel},"Span Filters",n.createElement(we.I,{size:"md",name:"info-circle"}))),!Ot&&n.createElement("div",{className:ra.nextPrevResult},n.createElement(Ti,{trace:qe,spanFilterMatches:ea,setFocusedSpanIdForSearch:$n,focusedSpanIndexForSearch:Is,setFocusedSpanIndexForSearch:Ks,datasourceType:Xn,showSpanFilters:Ot})));return n.createElement("div",{className:ra.container},n.createElement(Mr.S,{label:cr,collapsible:!0,isOpen:Ot,onToggle:Ft},n.createElement(ko.C,{className:ra.flexContainer},n.createElement(Qr.I,{label:"Service Name",labelWidth:16},n.createElement(Ho.Gy,{spacing:"xs"},n.createElement(So.l6,{"aria-label":"Select service name operator",onChange:oa=>Ss({...et,serviceNameOperator:oa.value}),options:[(0,Sr.z)("="),(0,Sr.z)("!=")],value:et.serviceNameOperator}),n.createElement(So.l6,{"aria-label":"Select service name",isClearable:!0,onChange:oa=>Ss({...et,serviceName:oa?.value||""}),onOpenMenu:hr,options:Ua,placeholder:"All service names",value:et.serviceName||null}))),n.createElement(Ki,{onChange:oa=>{Ss({...et,query:oa}),oa===""&&sn(!1)},value:et.query||""})),n.createElement(ko.C,null,n.createElement(Qr.I,{label:"Span Name",labelWidth:16},n.createElement(Ho.Gy,{spacing:"xs"},n.createElement(So.l6,{"aria-label":"Select span name operator",onChange:oa=>Ss({...et,spanNameOperator:oa.value}),options:[(0,Sr.z)("="),(0,Sr.z)("!=")],value:et.spanNameOperator}),n.createElement(So.l6,{"aria-label":"Select span name",isClearable:!0,onChange:oa=>Ss({...et,spanName:oa?.value||""}),onOpenMenu:Or,options:ja,placeholder:"All span names",value:et.spanName||null})))),n.createElement(ko.C,null,n.createElement(Qr.I,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},n.createElement(Ho.Gy,{spacing:"xs",align:"flex-start"},n.createElement(So.l6,{"aria-label":"Select min span operator",onChange:oa=>Ss({...et,fromOperator:oa.value}),options:[(0,Sr.z)(">"),(0,Sr.z)(">=")],value:et.fromOperator}),n.createElement("div",{className:ra.intervalInput},n.createElement(zo,{ariaLabel:"Select min span duration",onChange:oa=>Ss({...et,from:oa}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:et.from||"",validationRegex:Es})),n.createElement(So.l6,{"aria-label":"Select max span operator",onChange:oa=>Ss({...et,toOperator:oa.value}),options:[(0,Sr.z)("<"),(0,Sr.z)("<=")],value:et.toOperator}),n.createElement(zo,{ariaLabel:"Select max span duration",onChange:oa=>Ss({...et,to:oa}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:et.to||"",validationRegex:Es})))),n.createElement(ko.C,{className:ra.tagsRow},n.createElement(Qr.I,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,et.tags.map((oa,La)=>n.createElement("div",{key:La},n.createElement(Ho.Gy,{spacing:"xs",width:"auto"},n.createElement(So.l6,{"aria-label":"Select tag key",isClearable:!0,key:oa.key,onChange:es=>ro(oa,es),onOpenMenu:js,options:za,placeholder:"Select tag",value:oa.key||null}),n.createElement(So.l6,{"aria-label":"Select tag operator",onChange:es=>{Ss({...et,tags:et.tags?.map(Ds=>Ds.id===oa.id?{...Ds,operator:es.value}:Ds)})},options:[(0,Sr.z)("="),(0,Sr.z)("!=")],value:oa.operator}),n.createElement("span",{className:ra.tagValues},n.createElement(So.l6,{"aria-label":"Select tag value",isClearable:!0,key:oa.value,onChange:es=>{Ss({...et,tags:et.tags?.map(Ds=>Ds.id===oa.id?{...Ds,value:es?.value||""}:Ds)})},options:Ia[oa.id]?Ia[oa.id]:[],placeholder:"Select value",value:oa.value})),(oa.key||oa.value||et.tags.length>1)&&n.createElement(Ci.Z,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>fr(oa.id),tooltip:"Remove tag"}),(oa.key||oa.value)&&La===et.tags.length-1&&n.createElement("span",{className:ra.addTag},n.createElement(Ci.Z,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:br,tooltip:"Add tag"})))))))),n.createElement(jo,{trace:qe,search:et,spanFilterMatches:ea,showSpanFilterMatchesOnly:zt,setShowSpanFilterMatchesOnly:sn,showCriticalPathSpansOnly:un,setShowCriticalPathSpansOnly:yn,setFocusedSpanIdForSearch:$n,focusedSpanIndexForSearch:Is,setFocusedSpanIndexForSearch:Ks,datasourceType:Xn,clear:Gs,showSpanFilters:Ot})))});po.displayName="SpanFilters";const Tl=Qe=>({container:(0,t.css)`
      label: SpanFilters;
      margin: 0.5em 0 -${Qe.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,t.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,flexContainer:(0,t.css)({display:"flex",justifyContent:"space-between"}),addTag:(0,t.css)({marginLeft:Qe.spacing(1)}),intervalInput:(0,t.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,t.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,t.css)`
      max-width: 200px;
    `,nextPrevResult:(0,t.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${Qe.spacing(1)};
    `}),ol=(0,n.memo)(Qe=>{const{trace:qe,data:et,app:ct,timeZone:Ot,search:Ft,setSearch:zt,showSpanFilters:sn,setShowSpanFilters:un,showSpanFilterMatchesOnly:yn,setShowSpanFilterMatchesOnly:$n,showCriticalPathSpansOnly:ea,setShowCriticalPathSpansOnly:Xn,setFocusedSpanIdForSearch:ra,spanFilterMatches:Ua,datasourceType:Ta,setHeaderHeight:ja}=Qe,Sa=(0,m.of)(_i);(0,n.useEffect)(()=>{ja(document.querySelector("."+Sa.header)?.scrollHeight??0)},[ja,sn,Sa.header]);const za=(0,n.useMemo)(()=>qe?ao(qe):[],[qe]);if(!qe)return null;const ka=(Gs,Ss)=>{const hr=(0,st.LE)(Gs.startTime/1e3,{timeZone:Ss,defaultWithMS:!0}),Or=hr.match(/^(.+)(:\d\d\.\d+)$/);return Or?n.createElement("span",{className:Sa.TracePageHeaderOverviewItemValue},Or[1],n.createElement("span",{className:Sa.TracePageHeaderOverviewItemValueDetail},Or[2])):hr},Ia=n.createElement("h1",{className:h()(Sa.title)},n.createElement(xa,{traceName:Gr(qe.spans)}),n.createElement("small",{className:Sa.duration},(0,P.a3)(qe.duration))),{method:hs,status:Is,url:Ks}=li(qe.spans);let Es="green";return Is&&Is.length>0&&(Is[0].value.toString().charAt(0)==="4"?Es="orange":Is[0].value.toString().charAt(0)==="5"&&(Es="red")),n.createElement("header",{className:Sa.header},n.createElement("div",{className:Sa.titleRow},za&&za.length>0&&n.createElement(wt,{links:za,className:Sa.TracePageHeaderBack}),Ia,n.createElement(wi,{traceId:qe.traceID,data:et,app:ct})),n.createElement("div",{className:Sa.subtitle},n.createElement("span",{className:Sa.timestamp},ka(qe,Ot)),n.createElement("span",{className:Sa.tagMeta},hs&&hs.length>0&&n.createElement(He.m,{content:"http.method",interactive:!0},n.createElement("span",{className:Sa.tag},n.createElement(jr.E,{text:hs[0].value,color:"blue"}))),Is&&Is.length>0&&n.createElement(He.m,{content:"http.status_code",interactive:!0},n.createElement("span",{className:Sa.tag},n.createElement(jr.E,{text:Is[0].value,color:Es}))),Ks&&Ks.length>0&&n.createElement(He.m,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:Sa.url},Ks[0].value)))),n.createElement(po,{trace:qe,showSpanFilters:sn,setShowSpanFilters:un,showSpanFilterMatchesOnly:yn,setShowSpanFilterMatchesOnly:$n,showCriticalPathSpansOnly:ea,setShowCriticalPathSpansOnly:Xn,search:Ft,setSearch:zt,spanFilterMatches:Ua,setFocusedSpanIdForSearch:ra,datasourceType:Ta}))});ol.displayName="TracePageHeader";const _i=Qe=>({TracePageHeaderBack:(0,t.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:h()((0,t.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,t.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,t.css)({label:"TracePageHeader",backgroundColor:Qe.colors.background.primary,padding:"0.5em 0 0 0",position:"sticky",top:0,zIndex:5,textAlign:"left"}),titleRow:(0,t.css)({alignItems:"flex-start",display:"flex",padding:"0 8px",flexWrap:"wrap"}),title:(0,t.css)({color:"inherit",flex:1,fontSize:"1.7em",lineHeight:"1em",marginBottom:0,minWidth:"200px"}),subtitle:(0,t.css)({flex:1,lineHeight:"1em",margin:"-0.5em 0.5em 0.75em 0.5em"}),tag:(0,t.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,t.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,t.css)`
      vertical-align: middle;
    `,tagMeta:(0,t.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,t.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,t.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `}),zi="None",wo="Duration",il="Tag";function ki({options:Qe,onOptionsChange:qe}){const et=useStyles2(Hi),ct=[zi,wo,il].map(toOption);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,{className:et.row},React.createElement(InlineField,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},React.createElement(Select,{inputId:"label",options:ct,value:Qe.jsonData.spanBar?.type||"",onChange:Ot=>{updateDatasourcePluginJsonDataOption({onOptionsChange:qe,options:Qe},"spanBar",{...Qe.jsonData.spanBar,type:Ot?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),Qe.jsonData.spanBar?.type===il&&React.createElement(InlineFieldRow,{className:et.row},React.createElement(InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},React.createElement(Input,{type:"text",placeholder:"Enter tag key",onChange:Ot=>updateDatasourcePluginJsonDataOption({onOptionsChange:qe,options:Qe},"spanBar",{...Qe.jsonData.spanBar,tag:Ot.currentTarget.value}),value:Qe.jsonData.spanBar?.tag||"",width:40}))))}const Ql=({options:Qe,onOptionsChange:qe})=>{let et=Qe.type;return et+=Qe.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",React.createElement(ConfigSubSection,{title:"Span bar",description:React.createElement(ConfigDescriptionLink,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:et,feature:"the span bar"})},React.createElement(ki,{options:Qe,onOptionsChange:qe}))},Hi=Qe=>({infoText:css`
    label: infoText;
    padding-bottom: ${Qe.spacing(2)};
    color: ${Qe.colors.text.secondary};
  `,row:css`
    label: row;
    align-items: baseline;
  `});class Yr{constructor(qe){const{isTagsOpen:et,isProcessOpen:ct,isReferencesOpen:Ot,isWarningsOpen:Ft,isStackTracesOpen:zt,logs:sn,references:un}=qe||{};this.isTagsOpen=!!et,this.isProcessOpen=!!ct,this.isReferencesOpen=!!Ot,this.isWarningsOpen=!!Ft,this.isStackTracesOpen=!!zt,this.logs={isOpen:!!(sn&&sn.isOpen),openedItems:sn&&sn.openedItems?new Set(sn.openedItems):new Set},this.references={isOpen:!!(un&&un.isOpen),openedItems:un&&un.openedItems?new Set(un.openedItems):new Set}}toggleTags(){const qe=new Yr(this);return qe.isTagsOpen=!this.isTagsOpen,qe}toggleProcess(){const qe=new Yr(this);return qe.isProcessOpen=!this.isProcessOpen,qe}toggleReferences(){const qe=new Yr(this);return qe.references.isOpen=!this.references.isOpen,qe}toggleReferenceItem(qe){const et=new Yr(this);return et.references.openedItems.has(qe)?et.references.openedItems.delete(qe):et.references.openedItems.add(qe),et}toggleWarnings(){const qe=new Yr(this);return qe.isWarningsOpen=!this.isWarningsOpen,qe}toggleStackTraces(){const qe=new Yr(this);return qe.isStackTracesOpen=!this.isStackTracesOpen,qe}toggleLogs(){const qe=new Yr(this);return qe.logs.isOpen=!this.logs.isOpen,qe}toggleLogItem(qe){const et=new Yr(this);return et.logs.openedItems.has(qe)?et.logs.openedItems.delete(qe):et.logs.openedItems.add(qe),et}}var Mo=e(1081);class rr{static iterFunction(qe,et=0){return ct=>qe(ct.value,ct,et)}static searchFunction(qe){return typeof qe=="function"?qe:(et,ct)=>qe instanceof rr?ct===qe:et===qe}constructor(qe,et=[]){this.value=qe,this.children=et}get depth(){return this.children.reduce((qe,et)=>Math.max(et.depth+1,qe),1)}get size(){let qe=0;return this.walk(()=>qe++),qe}addChild(qe){return this.children.push(qe instanceof rr?qe:new rr(qe)),this}find(qe){if(rr.iterFunction(rr.searchFunction(qe))(this))return this;for(let ct=0;ct<this.children.length;ct++){const Ot=this.children[ct].find(qe);if(Ot)return Ot}return null}getPath(qe){const et=rr.iterFunction(rr.searchFunction(qe)),ct=(Ot,Ft)=>{const zt=Ft.concat([Ot]);if(et(Ot))return zt;for(let sn=0;sn<Ot.children.length;sn++){const un=Ot.children[sn],yn=ct(un,zt);if(yn)return yn}return null};return ct(this,[])}walk(qe,et=0){const ct=[];let Ot=et;for(ct.push({node:this,depth:Ot});ct.length;){const Ft=ct[ct.length-1];ct.pop();const{node:zt,depth:sn}=Ft;qe(zt.value,zt,sn),Ot=sn+1;let un=zt.children.length-1;for(;un>=0;)ct.push({node:zt.children[un],depth:Ot}),un--}}paths(qe){const et=[];et.push({node:this,childIndex:0});const ct=[];for(;et.length;){const{node:Ot,childIndex:Ft}=et[et.length-1];if(Ot.children.length>=Ft+1)et[et.length-1].childIndex++,et.push({node:Ot.children[Ft],childIndex:0});else{if(Ot.children.length===0){const zt=et.map(sn=>sn.node.value);qe(zt)}et.pop()}}return ct}}const ji=Qe=>Qe.spanID,Mi=Qe=>Qe.references||[],ti=(0,Mo.Mz)((0,Mo.Mz)(({span:Qe})=>Qe,Mi),({type:Qe})=>Qe,(Qe,qe)=>Qe.find(et=>et.refType===qe)),ui=(0,Mo.Mz)(Qe=>ti({span:Qe,type:"CHILD_OF"}),Qe=>Qe?Qe.spanID:null),ll=Qe=>Qe.spans,Yl=(0,Mo.Mz)(ll,Qe=>Qe.reduce((qe,et)=>qe.set(ji(et),et),new Map)),Sl="__root__";function Ml(Qe,qe=null){const et=new Map(Qe.spans.map(zt=>[zt.spanID,new rr(zt.spanID)])),ct=qe??new Map(Qe.spans.map(zt=>[zt.spanID,zt])),Ot=new rr(Sl);Qe.spans.forEach(zt=>{const sn=et.get(zt.spanID);if(Array.isArray(zt.references)&&zt.references.length){const{refType:un,spanID:yn}=zt.references[0];if(un==="CHILD_OF"||un==="FOLLOWS_FROM")(et.get(yn)||Ot).children?.push(sn);else throw new Error(`Unrecognized ref type: ${un}`)}else Ot.children.push(sn)});const Ft=(zt,sn)=>{const un=zt?.value?ct.get(zt.value.toString()):void 0,yn=sn?.value?ct.get(sn.value.toString()):void 0;return+(un?.startTime>yn?.startTime)||+(un?.startTime===yn?.startTime)-1};return Qe.spans.forEach(zt=>{const sn=et.get(zt.spanID);sn.children.length>1&&sn?.children.sort(Ft)}),Ot.children.sort(Ft),Ot}function xl(Qe){const qe=new Map,et=Qe.reduce((Ot,Ft)=>(Ot.some(zt=>zt.key===Ft.key&&zt.value===Ft.value)?qe.set(`${Ft.key}:${Ft.value}`,`Duplicate tag "${Ft.key}:${Ft.value}"`):Ot.push(Ft),Ot),[]),ct=Array.from(qe.values());return{dedupedTags:et,warnings:ct}}function mi(Qe,qe){const et=Qe?.slice()??[],ct=(qe||[]).map(Ot=>Ot.toLowerCase());return et.sort((Ot,Ft)=>{const zt=Ot.key.toLowerCase(),sn=Ft.key.toLowerCase();for(let un=0;un<ct.length;un++){const yn=ct[un];if(zt.startsWith(yn)&&!sn.startsWith(yn))return-1;if(!zt.startsWith(yn)&&sn.startsWith(yn))return 1}return zt>sn?1:zt<sn?-1:0}),et}function fi(Qe){if(!Qe?.traceID)return null;const qe=Qe.traceID.toLowerCase();let et=0,ct=Number.MAX_SAFE_INTEGER;const Ot=new Map,Ft=new Map;Qe.spans=Qe.spans.filter(Xn=>!!Xn.startTime),Qe.processes=Object.entries(Qe.processes).reduce((Xn,[ra,Ua])=>(Xn[ra]={...Ua,tags:mi(Ua.tags)},Xn),{});const zt=Qe.spans.length;for(let Xn=0;Xn<zt;Xn++){const ra=Qe.spans[Xn],{startTime:Ua,duration:Ta,processID:ja}=ra;let Sa=ra.spanID;Ua<ct&&(ct=Ua),Ua+Ta>et&&(et=Ua+Ta);const za=Ot.get(Sa);za!=null?(console.warn(`Dupe spanID, ${za+1} x ${Sa}`,ra,Ft.get(Sa)),(0,ue.isEqual)(ra,Ft.get(Sa))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Ot.set(Sa,za+1),Sa=`${Sa}_${za}`,ra.spanID=Sa):Ot.set(Sa,1),ra.process=Qe.processes[ja],Ft.set(Sa,ra)}const sn=Ml(Qe,Ft),un=[],yn={};sn.walk((Xn,ra,Ua=0)=>{if(Xn==="__root__"||typeof Xn!="string")return;const Ta=Ft.get(Xn);if(!Ta)return;const{serviceName:ja}=Ta.process;yn[ja]=(yn[ja]||0)+1,Ta.relativeStartTime=Ta.startTime-ct,Ta.depth=Ua-1,Ta.hasChildren=ra.children.length>0,Ta.childSpanCount=ra.children.length,Ta.warnings=Ta.warnings||[],Ta.tags=Ta.tags||[],Ta.references=Ta.references||[],Ta.childSpanIds=ra.children.slice().sort((za,ka)=>{const Ia=Ft.get(za.value),hs=Ft.get(ka.value);return hs.startTime+hs.duration-(Ia.startTime+Ia.duration)}).map(za=>za.value);const Sa=xl(Ta.tags);Ta.tags=mi(Sa.dedupedTags,Qa("topTagPrefixes")),Ta.warnings=Ta.warnings.concat(Sa.warnings),Ta.references.forEach((za,ka)=>{const Ia=Ft.get(za.spanID);Ia&&(za.span=Ia,ka>0&&(Ia.subsidiarilyReferencedBy=Ia.subsidiarilyReferencedBy||[],Ia.subsidiarilyReferencedBy.push({spanID:Xn,traceID:qe,span:Ta,refType:za.refType})))}),un.push(Ta)});const $n=Gr(un);return{services:Object.keys(yn).map(Xn=>({name:Xn,numberOfSpans:yn[Xn]})),spans:un,traceID:qe,traceName:$n,processes:Qe.processes,duration:et-ct,startTime:ct,endTime:et}}},92102:(Q,I,e)=>{"use strict";e.d(I,{N:()=>t});var t=(n=>(n.Logs="log",n.Traces="trace",n.Metrics="metric",n.Profiles="profile",n.Unknown="unknown",n))(t||{})},92151:(Q,I,e)=>{"use strict";e.d(I,{EUpdateTypes:()=>n,default:()=>o});var t=(m=>(m.DragEnd="DragEnd",m.DragMove="DragMove",m.DragStart="DragStart",m.MouseEnter="MouseEnter",m.MouseLeave="MouseLeave",m.MouseMove="MouseMove",m))(t||{});const n=t;var r=e(2543);const s=0;class o{constructor({getBounds:i,tag:l,resetBoundsOnResize:d=!0,...c}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=g=>{const{button:u,clientX:E,type:p}=g;if(this._isDragging||u!==s)return;let b=null,a;if(p==="mouseenter")b=n.MouseEnter,a=this._onMouseEnter;else if(p==="mouseleave")b=n.MouseLeave,a=this._onMouseLeave;else if(p==="mousemove")b=n.MouseMove,a=this._onMouseMove;else throw new Error(`invalid event type: ${p}`);if(!a)return;const{value:h,x:P}=this._getPosition(E);a({event:g,type:b,value:h,x:P,manager:this,tag:this.tag})},this._handleDragEvent=g=>{const{button:u,clientX:E,type:p}=g;let b=null,a;if(p==="mousedown"){if(this._isDragging||u!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const y=(0,r.get)(document,"body.style");y&&(y.userSelect="none"),this._isDragging=!0,b=n.DragStart,a=this._onDragStart}else if(p==="mousemove"){if(!this._isDragging)return;b=n.DragMove,a=this._onDragMove}else if(p==="mouseup"){if(!this._isDragging)return;this._stopDragging(),b=n.DragEnd,a=this._onDragEnd}else throw new Error(`invalid event type: ${p}`);if(!a)return;const{value:h,x:P}=this._getPosition(E);a({event:g,type:b,value:h,x:P,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=i,this.tag=l,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!d,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=c.onMouseEnter,this._onMouseLeave=c.onMouseLeave,this._onMouseMove=c.onMouseMove,this._onDragStart=c.onDragStart,this._onDragMove=c.onDragMove,this._onDragEnd=c.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(i){const{clientXLeft:l,maxValue:d,minValue:c,width:g}=this._getBounds();let u=i-l,E=u/g;return c!=null&&E<c?(E=c,u=c*g):d!=null&&E>d&&(E=d,u=d*g),{value:E,x:u}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const i=(0,r.get)(document,"body.style");i&&(i.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},30700:(Q,I,e)=>{"use strict";e.d(I,{Kv:()=>l,rY:()=>d});var t=e(41811),n=e(84140),r=e(24284);function s(g){if(g.length!==7)return[0,0,0];const u=g.slice(1,3),E=g.slice(3,5),p=g.slice(5);return[parseInt(u,16),parseInt(E,16),parseInt(p,16)]}class o{constructor(u,E){const p=c(u,E);this.colorsHex=p,this.colorsRgb=p.map(s),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(u){let E=this.cache.get(u);if(E==null){const p=this.hashCode(u?u.toLowerCase():"");if(E=Math.abs(p%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===E&&(E=this.getNextIndex(E));const b=this.colorsHex[this.prevColorIndex];if(n.A.readability(b,this.colorsHex[E])<1.5){let a=E;for(let h=0;h<this.colorsHex.length;h++)if(a=this.getNextIndex(a),n.A.readability(b,this.colorsHex[a])>1.5){E=a;break}}}this.cache.set(u,E),this.prevColorIndex=E}return E}getNextIndex(u){return u+1<this.colorsHex.length?u+1:0}hashCode(u){let E=0,p,b;for(p=0;p<u.length;p++)b=u.charCodeAt(p),E=(E<<5)-E+b;return E}getColorByKey(u){const E=this._getColorIndex(u);return this.colorsHex[E]}getRgbColorByKey(u){const E=this._getColorIndex(u);return this.colorsRgb[E]}clear(){this.cache.clear()}}const m=(0,t.A)((g,u)=>new o(g,u));function i(g){m([],g)}function l(g,u){return m(r.Tj,u).getColorByKey(g)}function d(g,u){return m(r.Tj,u).getRgbColorByKey(g)}function c(g,u){const E=[...g],p=E.indexOf("#E24D42");p>-1&&E.splice(p,1);const b=g.indexOf("#BF1B00");b>-1&&E.splice(b,1);let a=[];for(const h of E)n.A.readability(u.colors.background.primary,h)>=3&&a.push(h);return a}},6389:(Q,I,e)=>{"use strict";e.d(I,{a3:()=>y});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r);const o="YYYY-MM-DD",m="HH:mm",i=1e3,l=1e3*i,d=60*l,c=60*d,g=24*c,u=Math.log10(i),E=[{unit:"d",microseconds:g,ofPrevious:24},{unit:"h",microseconds:c,ofPrevious:60},{unit:"m",microseconds:d,ofPrevious:60},{unit:"s",microseconds:l,ofPrevious:1e3},{unit:"ms",microseconds:i,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],p=(C,f,D)=>toFloatPrecision(C/D,f)*D;function b(C){return moment(C/i).format(o)}function a(C){return moment(C/i).format(m)}function h(C){const f=p(C,u,i);return`${moment.duration(f/i).asMilliseconds()}ms`}function P(C){const f=p(C,u,l);return`${moment.duration(f/i).asSeconds()}s`}function y(C){const[f,D]=(0,t.dropWhile)(E,({microseconds:v},x)=>x<E.length-1&&v>C);if(f.ofPrevious===1e3)return`${(0,t.round)(C/f.microseconds,2)}${f.unit}`;const M=`${Math.floor(C/f.microseconds)}${f.unit}`,O=Math.round(C/D.microseconds%f.ofPrevious),S=`${O}${D.unit}`;return O===0?M:`${M} ${S}`}},28114:(Q,I,e)=>{"use strict";e.d(I,{Cr:()=>O,QW:()=>p,_o:()=>f,gt:()=>T,hv:()=>M,i0:()=>E,lU:()=>c});var t=e(96540),n=e(6709),r=e(65879),s=e(47232),o=e(72574),m=e(14578),i=e(31193),l=e(96192),d=e(92102);function c({splitOpenFn:S,traceToLogsOptions:v,traceToMetricsOptions:x,traceToProfilesOptions:A,dataFrame:R,createFocusSpanLink:B,trace:U}){if(!R)return;let w=T(U.duration,U.traceName,U.traceID);const K=R.fields.some(L=>!!L.config.links?.length),N=b(S,R.fields[0],v,x,B,w);return function(V){let F=N(V);if(K){w={...w,...M(V),...O(V,A)};const z=R.fields.filter(Y=>!!Y.config.links?.length);try{let Y;A?.datasourceUid&&(Y=(0,i.tR)().getInstanceSettings(A.datasourceUid));const H=Y?.type==="grafana-pyroscope-datasource",k=V.tags.some(q=>q.key===p),ee=H&&k;let ie=[];z.forEach(q=>{const Z=(0,l.QL)({field:q,rowIndex:V.dataFrameRowIndex,splitOpenFn:S,range:D(V,void 0,void 0,ee),dataFrame:R,vars:w});ie=ie.concat(Z)});const fe=ie.map(q=>({title:q.title,href:q.href,onClick:q.onClick,content:t.createElement(m.I,{name:"link",title:q.title||"Link"}),field:q.origin,type:ee?d.N.Profiles:d.N.Unknown}));F.push.apply(F,fe)}catch(Y){return console.error(Y),F}}return F}}const g=S=>S.map(v=>({key:v,value:v.includes(".")?v.replace(".","_"):void 0})),u=g(["cluster","hostname","namespace","pod","service.name","service.namespace"]),E=g(["service.name","service.namespace"]),p="pyroscope.profile.id";function b(S,v,x,A,R,B){let U;x?.datasourceUid&&(U=(0,i.tR)().getInstanceSettings(x.datasourceUid));const w=U?.type==="grafana-splunk-datasource";let K;return A?.datasourceUid&&(K=(0,i.tR)().getInstanceSettings(A.datasourceUid)),function(L){B={...B,...M(L)};const V=[];let F,z="";if(U&&x){const Y=x.customQuery?x.query:void 0,H=x.tags&&x.tags.length>0?x.tags:u;switch(U?.type){case"loki":z=f(L,H),F=a(L,x,z,Y);break;case"grafana-splunk-datasource":z=f(L,H,{joinBy:" "}),F=P(L,x,z,Y);break;case"elasticsearch":case"grafana-opensearch-datasource":z=f(L,H,{labelValueSign:":",joinBy:" AND "}),F=h(L,x,z,Y);break;case"grafana-falconlogscale-datasource":z=f(L,H,{joinBy:" OR "}),F=C(L,x,z,Y);break;case"googlecloud-logging-datasource":z=f(L,H,{joinBy:" AND "}),F=y(L,x,z,Y)}if(F){const k={title:U.name,url:"",internal:{datasourceUid:U.uid,datasourceName:U.name,query:F}};if(B={...B,__tags:{text:"Tags",value:z}},(0,l.O1)(k.internal.query,B).allVariablesDefined){const ee=(0,n.u)({link:k,internalLink:k.internal,scopedVars:B,range:D(L,{startMs:x.spanStartTimeShift?r.intervalToMs(x.spanStartTimeShift):0,endMs:x.spanEndTimeShift?r.intervalToMs(x.spanEndTimeShift):0},w),field:{},onClickFn:S,replaceVariables:(0,o.w)().replace.bind((0,o.w)())});V.push({href:ee.href,title:"Related logs",onClick:ee.onClick,content:t.createElement(m.I,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:v,type:d.N.Logs})}}}if(K&&A?.queries)for(const Y of A.queries){const H=Y.query||`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${L.process.serviceName}"}[5m])) by (le))`,k={title:K.name,url:"",internal:{datasourceUid:K.uid,datasourceName:K.name,query:{expr:H,refId:"A"}}},ee=A.tags&&A.tags.length>0?A.tags:u;B={...B,__tags:{text:"Tags",value:f(L,ee)}};const ie=(0,n.u)({link:k,internalLink:k.internal,scopedVars:B,range:D(L,{startMs:A.spanStartTimeShift?r.intervalToMs(A.spanStartTimeShift):-12e4,endMs:A.spanEndTimeShift?r.intervalToMs(A.spanEndTimeShift):12e4}),field:{},onClickFn:S,replaceVariables:(0,o.w)().replace.bind((0,o.w)())});V.push({title:Y?.name,href:ie.href,onClick:ie.onClick,content:t.createElement(m.I,{name:"chart-line",title:"Explore metrics for this span"}),field:v,type:d.N.Metrics})}if(L.references&&R)for(const Y of L.references){if(Y.refType==="CHILD_OF")continue;const H=R(Y.traceID,Y.spanID);V.push({href:H.href,title:Y.span?Y.span.operationName:"View linked span",content:t.createElement(m.I,{name:"link",title:"View linked span"}),onClick:H.onClick,field:H.origin,type:d.N.Traces})}if(L.subsidiarilyReferencedBy&&R)for(const Y of L.subsidiarilyReferencedBy){const H=R(Y.traceID,Y.spanID);V.push({href:H.href,title:Y.span?Y.span.operationName:"View linked span",content:t.createElement(m.I,{name:"link",title:"View linked span"}),onClick:H.onClick,field:H.origin,type:d.N.Traces})}return V}}function a(S,v,x,A){const{filterByTraceID:R,filterBySpanID:B}=v;if(A)return{expr:A,refId:""};if(!x)return;let U="{${__tags}}";return R&&S.traceID&&(U+=' |="${__span.traceId}"'),B&&S.spanID&&(U+=' |="${__span.spanId}"'),{expr:U,refId:""}}function h(S,v,x,A){const{filterByTraceID:R,filterBySpanID:B}=v;if(A)return{query:A,refId:"",metrics:[{id:"1",type:"logs"}]};let U=[];return B&&S.spanID&&U.push('"${__span.spanId}"'),R&&S.traceID&&U.push('"${__span.traceId}"'),x&&U.push("${__tags}"),{query:U.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function P(S,v,x,A){const{filterByTraceID:R,filterBySpanID:B}=v;if(A)return{query:A,refId:""};let U="";return x&&(U+="${__tags}"),R&&S.traceID&&(U+=' "${__span.traceId}"'),B&&S.spanID&&(U+=' "${__span.spanId}"'),{query:U,refId:""}}function y(S,v,x,A){const{filterByTraceID:R,filterBySpanID:B}=v;if(A)return{query:A,refId:""};let U=[];return B&&S.spanID&&U.push('"${__span.spanId}"'),R&&S.traceID&&U.push('"${__span.traceId}"'),x&&U.push("${__tags}"),{query:U.join(" AND "),refId:""}}function C(S,v,x,A){const{filterByTraceID:R,filterBySpanID:B}=v;if(A)return{lsql:A,refId:""};if(!x)return;let U="${__tags}";return R&&S.traceID&&(U+=' or "${__span.traceId}"'),B&&S.spanID&&(U+=' or "${__span.spanId}"'),{lsql:U,refId:""}}function f(S,v,{labelValueSign:x="=",joinBy:A=", "}={}){return[...S.process.tags,...S.tags,{key:"spanId",value:S.spanID},{key:"traceId",value:S.traceID},{key:"name",value:S.operationName},{key:"duration",value:S.duration}].map(R=>{const B=v.find(U=>U.key===R.key);if(B)return`${B.value?B.value:B.key}${x}"${R.value}"`}).filter(R=>!!R).join(A)}function D(S,v={startMs:0,endMs:0},x=!1,A=!1){let R=Math.floor(S.startTime/1e3+v.startMs);const B=(S.startTime+S.duration)/1e3;let U=Math.floor(B+v.endMs);x&&U-R<1e3?U=R+1e3:A?(R=R-6e4,U=U+6e4):R===U&&U++;const w=(0,s.KQ)(U),K=(0,s.KQ)(R);return{from:K,to:w,raw:{from:K,to:w}}}function T(S,v,x){return{__trace:{text:"Trace",value:{duration:S,name:v,traceId:x}}}}function M(S){const v={};for(const x of S.process.tags)v[x.key]=x.value;for(const x of S.tags)v[x.key]=x.value;return{__span:{text:"Span",value:{spanId:S.spanID,traceId:S.traceID,duration:S.duration,name:S.operationName,tags:v}}}}function O(S,v){let x={};if(v){const A=v.tags&&v.tags.length>0?v.tags:E;x={__tags:{text:"Tags",value:f(S,A)}}}return x}},15583:(Q,I,e)=>{"use strict";e.d(I,{Ji:()=>m,SQ:()=>i,zE:()=>s});var t=e(96540),n=e(62938),r=e(56271);const s=()=>(0,n.A)().slice(0,12),m={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function i(l){const[d,c]=(0,t.useState)(m),g=(0,t.useMemo)(()=>l&&(0,r.filterSpans)(d,l),[d,l]);return{search:d,setSearch:c,spanFilterMatches:g}}},35090:(Q,I,e)=>{"use strict";e.d(I,{L:()=>r});var t=e(78368),n=e(56271);function r(o){if(!o)return null;let m=o.fields.length===1?o.fields[0].values[0]:s(o);return m?(0,n.transformTraceData)(m):null}function s(o){const m=new t.R(o),i={};for(let l=0;l<m.length;l++){const d=m.get(l);if(!d.spanID)return null;i[d.spanID]||(i[d.spanID]={serviceName:d.serviceName,tags:d.serviceTags})}return{traceID:m.get(0).traceID,processes:i,spans:m.toArray().map((l,d)=>{const c=[];return l.parentSpanID&&c.push({refType:"CHILD_OF",spanID:l.parentSpanID,traceID:l.traceID}),l.references&&c.push(...l.references.map(g=>({refType:"FOLLOWS_FROM",...g}))),{...l,duration:l.duration*1e3,startTime:l.startTime*1e3,processID:l.spanID,flags:0,references:c,logs:l.logs?.map(g=>({...g,timestamp:g.timestamp*1e3}))||[],dataFrameRowIndex:d}})}}},11140:(Q,I,e)=>{"use strict";e.d(I,{v:()=>R});var t=e(2543),n=e(96540),r=e(49785),s=e(71733),o=e(14110),m=e(12131),i=e(32264),l=e(88575),d=e(94354),c=e(42418),g=e(37390),u=e(55852),E=e(59429),p=e(16233),b=e(79999),a=e(31678),h=e(9955),P=e(27677),y=e(71176),C=(B=>(B.FETCH_DASHBOARD="fetch-dashboard",B.SET_DASHBOARD_LS="set-dashboard-ls-error",B))(C||{});function f(B,U){let w=[];return B==="table"&&U.panelState?.logs?.columns&&(U.panelState.logs?.labelFieldName&&w.push({id:"extractFields",options:{source:U.panelState.logs.labelFieldName}}),w.push({id:"organize",options:{indexByName:Object.values(U.panelState.logs.columns).reduce((K,N,L)=>({...K,[N]:L}),{}),includeByName:Object.values(U.panelState.logs.columns).reduce((K,N)=>({...K,[N]:!0}),{})}})),w}async function D(B){const U=O(B.queries,B.queryResponse,B?.panelState),w={targets:B.queries,type:U,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:B.datasource,transformations:f(U,B)};let K;if(B.dashboardUid)try{K=await P.IB.getDashboardByUid(B.dashboardUid)}catch{throw"fetch-dashboard"}else K=(0,y.X)();K.dashboard.panels=[w,...K.dashboard.panels??[]],K.dashboard.time=B.time;try{(0,b.OI)(K)}catch{throw"set-dashboard-ls-error"}}const T=B=>!B.hide,M=B=>U=>U.refId===B;function O(B,U,w){for(const{refId:K}of B.filter(T)){const N=M(K);if(U.flameGraphFrames.some(N))return"flamegraph";if(U.graphFrames.some(N))return"timeseries";if(U.logsFrames.some(N))return w?.logs?.visualisationType?w.logs.visualisationType:"logs";if(U.nodeGraphFrames.some(N))return"nodeGraph";if(U.traceFrames.some(N))return"traces";if(U.customFrames.some(N))return U.customFrames.find(N)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var S=(B=>(B.NewDashboard="new-dashboard",B.ExistingDashboard="existing-dashboard",B))(S||{});function v(B){}function x(B){return B?`d/${B}`:"dashboard/new"}var A=(B=>(B.UNKNOWN="unknown-error",B.NAVIGATION="navigation-error",B))(A||{});function R(B){const{exploreId:U,onClose:w}=B,K=(0,a.useSelector)((0,h.qq)(U)),[N,L]=(0,n.useState)(),{handleSubmit:V,control:F,formState:{errors:z},watch:Y}=(0,r.mN)({defaultValues:{saveTarget:"new-dashboard"}}),H=p.TP.hasPermission(a.AccessControlAction.DashboardsCreate),k=p.TP.hasPermission(a.AccessControlAction.DashboardsWrite),ee=[];H&&ee.push({label:"New dashboard",value:"new-dashboard"}),k&&ee.push({label:"Existing dashboard",value:"existing-dashboard"});const ie=ee.length>1?Y("saveTarget"):ee[0].value,fe=async(q,Z)=>{L(void 0);const J=Z.saveTarget==="existing-dashboard"?Z.dashboardUid:void 0;(0,o.rR)("e_2_d_submit",{newTab:q,saveTarget:Z.saveTarget,queries:K.queries.length});const{from:G,to:ne}=K.range.raw;try{await D({dashboardUid:J,datasource:K.datasourceInstance?.getRef(),queries:K.queries,queryResponse:K.queryResponse,panelState:K?.panelsState,time:{from:typeof G=="string"?G:G.toISOString(),to:typeof ne=="string"?ne:ne.toISOString()}})}catch(le){switch(le){case C.FETCH_DASHBOARD:L({error:le,message:"Could not fetch dashboard information. Please try again."});break;case C.SET_DASHBOARD_LS:L({error:le,message:"Could not add panel to dashboard. Please try again."});break;default:L({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const te=x(J);if(!q){w(),m.Ny.push(s.I.stripBaseFromUrl(te));return}if(!!!e.g.open(i.$.appUrl+te,"_blank")){L({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,b.yZ)();return}w()};return(0,n.useEffect)(()=>{(0,o.rR)("e_2_d_open")},[]),n.createElement("form",null,ee.length>1&&n.createElement(r.xI,{control:F,render:({field:{ref:q,...Z}})=>n.createElement(l.D,{label:"Target dashboard",description:"Choose where to add the panel."},n.createElement(d.z,{options:ee,...Z,id:"e2d-save-target"})),name:"saveTarget"}),ie==="existing-dashboard"&&n.createElement(r.xI,{render:({field:{ref:q,value:Z,onChange:J,...G}})=>n.createElement(l.D,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:z.dashboardUid?.message,invalid:!!z.dashboardUid},n.createElement(E.b,{...G,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:ne=>J(ne?.uid)})),control:F,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}),N&&n.createElement(c.F,{severity:"error",title:"Error adding the panel"},N.message),n.createElement(g.a.ButtonRow,null,n.createElement(u.$n,{type:"reset",onClick:w,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(u.$n,{type:"submit",variant:"secondary",onClick:V((0,t.partial)(fe,!0)),icon:"external-link-alt"},"Open in new tab"),n.createElement(u.$n,{type:"submit",variant:"primary",onClick:V((0,t.partial)(fe,!1)),icon:"apps"},"Open dashboard")))}},12881:(Q,I,e)=>{"use strict";e.d(I,{t:()=>r});var t=e(16233),n=e(31678);function r(){const s=t.TP.hasPermission(n.AccessControlAction.DashboardsCreate),o=t.TP.hasPermission(n.AccessControlAction.DashboardsWrite);return s&&!o?"Add panel to new dashboard":o&&!s?"Add panel to existing dashboard":"Add panel to dashboard"}},24401:(Q,I,e)=>{"use strict";e.d(I,{s:()=>i});var t=e(96540),n=e(71733),r=e(12131),s=e(37390),o=e(66864),m=e(55852);function i(l){const{onDismiss:d,path:c,title:g}=l,u=()=>{e.g.open(n.I.assureBaseUrl(c),"_blank"),d()},E=()=>r.Ny.push(c);return t.createElement(s.a,{title:g,isOpen:!0,onDismiss:d},t.createElement(o.gW,{spacing:"sm"},t.createElement("p",null,"Do you want to proceed in the current tab or open a new tab?")),t.createElement(s.a.ButtonRow,null,t.createElement(m.$n,{onClick:d,fill:"outline",variant:"secondary"},"Cancel"),t.createElement(m.$n,{type:"submit",variant:"secondary",onClick:u,icon:"external-link-alt"},"Open in new tab"),t.createElement(m.$n,{type:"submit",variant:"primary",onClick:E,icon:"apps"},"Open")))}},30973:(Q,I,e)=>{"use strict";e.d(I,{w:()=>s});var t=e(96540),n=e(38138),r=e(75462);function s({extensions:i,onSelect:l}){const{categorised:d,uncategorised:c}=m(i),g=c.length>0&&Object.keys(d).length>0;return t.createElement(n.W,null,t.createElement(t.Fragment,null,Object.keys(d).map(u=>t.createElement(n.W.Group,{key:u,label:(0,r.pL)(u,25)},o(d[u],l))),g&&t.createElement(n.W.Divider,{key:"divider"}),o(c,l)))}function o(i,l){return i.map(d=>t.createElement(n.W.Item,{ariaLabel:d.title,icon:d?.icon||"plug",key:d.id,label:(0,r.pL)(d.title,25),onClick:c=>{if(d.path)return l(d);d.onClick?.(c)}}))}function m(i){return(0,t.useMemo)(()=>{const l=[],d={};for(const c of i){if(!c.category){l.push(c);continue}Array.isArray(d[c.category])||(d[c.category]=[]),d[c.category].push(c)}return{uncategorised:l,categorised:d}},[i])}},33368:(Q,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(96540),n=e(96192);const r=(s,o)=>(0,t.useMemo)(()=>(0,n.YV)(s,o),[s,o])},39590:(Q,I,e)=>{"use strict";e.d(I,{m:()=>ie,s:()=>q});var t=e(96540),n=e(76888),r=e(3169),s=e(31678),o=e(9955),m=e(34028);const i={parse:Z=>{if(!Z.left&&!Z.right)return{to:{left:{datasource:null,queries:[],range:{from:m.kn.from,to:m.kn.to}},schemaVersion:0},error:!1};let J,G,ne,te;return typeof Z.left=="string"&&([J,ne]=g(Z.left)),typeof Z.right=="string"?[G,te]=g(Z.right):Z.right&&(G=c,te=!0),J||(J=c),{to:{schemaVersion:0,left:J,...G&&{right:G}},error:!!ne||!!te}}},l=(Z,...J)=>J.some(G=>Z.hasOwnProperty(G));var d=(Z=>(Z[Z.RangeFrom=0]="RangeFrom",Z[Z.RangeTo=1]="RangeTo",Z[Z.Datasource=2]="Datasource",Z[Z.SegmentsStart=3]="SegmentsStart",Z))(d||{});const c={datasource:null,queries:[],range:m.kn};function g(Z){let J;try{J=JSON.parse(Z)}catch{return[c,!0]}if(!Array.isArray(J))return[{queries:[],range:m.kn,...J},!1];if(J.length<=3)return[c,!0];const G={from:J[0],to:J[1]},ne=J[2],te=J.slice(3),oe=te.filter(ue=>!l(ue,"ui","mode","__panelsState")),le=te.find(ue=>l(ue,"__panelsState"))?.__panelsState;return[{datasource:ne,queries:oe,range:G,panelsState:le},!1]}var u=e(87490),E=e(15961);const p={parse:Z=>{if(!Z||!Z.panes||typeof Z.panes!="string")return{to:{schemaVersion:1,panes:{[(0,u.o$)()]:b}},error:!1};let J;try{J=JSON.parse(Z.panes)}catch{}if(J==null||typeof J!="object")return{to:{schemaVersion:1,panes:{[(0,u.o$)()]:b}},error:!0};const G=Object.entries(J).map(([ne,te])=>[ne,a(te)]).reduce((ne,[te,oe])=>{let le=te;return(le.length!==3||/^\d+$/.test(le)||le.split("").some(ue=>u.WP.indexOf(ue)===-1))&&(le=(0,u.o$)()),{...ne,[le]:oe}},{});return Object.keys(G).length||(G[(0,u.o$)()]=b),{to:{schemaVersion:1,panes:G},error:!1}},migrate:Z=>({schemaVersion:1,panes:{[(0,u.o$)()]:Z.left,...Z.right&&{[(0,u.o$)()]:Z.right}}})},b={datasource:null,queries:[],range:m.kn};function a(Z){return!Z||typeof Z!="object"?b:{...b,...(0,E.C)("queries",Z)&&Array.isArray(Z.queries)&&{queries:Z.queries},...(0,E.C)("datasource",Z)&&typeof Z.datasource=="string"&&{datasource:Z.datasource},...(0,E.C)("panelsState",Z)&&!!Z.panelsState&&typeof Z.panelsState=="object"&&{panelsState:Z.panelsState},...(0,E.C)("range",Z)&&!!Z.range&&typeof Z.range=="object"&&(0,E.C)("from",Z.range)&&(0,E.C)("to",Z.range)&&typeof Z.range.from=="string"&&typeof Z.range.to=="string"&&{range:{from:Z.range.from,to:Z.range.to}}}}const h=Z=>y(Z),P=[i,p],y=Z=>{const J=C(Z),[G,...ne]=P.slice(J),{error:te,to:oe}=G.parse(Z);return[ne.reduce((ue,Te)=>Te.migrate?Te.migrate(ue):ue,oe),te]};function C(Z){return!Z||!("schemaVersion"in Z)||!Z.schemaVersion?0:typeof Z.schemaVersion=="number"?Z.schemaVersion:typeof Z.schemaVersion=="string"?Number.parseInt(Z.schemaVersion,10):0}var f=e(2543),D=e(18226),T=e(62860),M=e(62256),O=e(29436),S=e(23994),v=e(89224),x=e(27649),A=e(39070),R=e(41987),B=e(31193),U=e(14678);const w=(Z,J)=>{const G=!(0,f.isEqual)(J?.datasource,Z?.datasource),ne=!(0,f.isEqual)(J?.queries,Z?.queries),te=!(0,f.isEqual)(J?.range||m.kn,Z?.range||m.kn),oe=!(0,f.isEqual)(J?.panelsState,Z?.panelsState);return{datasource:G,queries:ne,range:te,panelsState:oe}};async function K(Z,J,G){if(Z)try{return await(0,B.tR)().get(Z)}catch{}const ne=[...new Set(J.map(te=>te.datasource).filter(A.zz).map(te=>typeof te=="string"?te:te.uid))];try{if(ne.length>=1){const te=(await Promise.allSettled(ne.map(oe=>(0,B.tR)().get(oe)))).filter(E.s);if(te.length>1)return await(0,B.tR)().get(U.uv);if(te.length===1)return await(0,B.tR)().get(ne[0])}}catch{}return(0,B.tR)().get((0,u.HQ)(G)).catch(()=>(0,B.tR)().get()).catch(()=>{})}function N(Z){return{...Z.getDefaultQuery?.(R.Jk.Explore),refId:"A",datasource:Z.getRef()}}function L(Z){return Z.name===U.uv}function V(Z){return Z&&L(Z)?J=>!!J.datasource:J=>J.datasource?typeof J.datasource=="string"?J.datasource===Z?.uid:J.datasource.uid===Z?.uid:!0}async function F(Z){return(await Promise.allSettled(Z.map(G=>(0,B.tR)().get(G.datasource).then(ne=>({query:G,ds:ne}))))).filter(E.s).map(({value:G})=>G.query)}function z(Z,J,G){const ne=Object.values(Z.panes);if(ne.length>1){const te=ne.some(({range:oe},le,[{range:ue}])=>!(0,f.isEqual)(oe,ue));G((0,O.qz)({syncedTimes:!te}))}Object.entries(Z.panes).forEach(async([te,oe],le)=>{const{datasource:ue,queries:Te,range:he,panelsState:re}=oe,De=J[te];if(De!==void 0){const Fe=w(oe,ie(De));Promise.resolve().then(async()=>{Fe.datasource&&ue&&await G((0,T.wh)({exploreId:te,datasource:ue}))}).then(async()=>{Fe.range&&G((0,v.JA)({exploreId:te,rawRange:(0,m.Z9)(he)})),Fe.queries&&G((0,S.h9)({exploreId:te,queries:(0,x.v)(Te)})),(Fe.queries||Fe.range)&&(await G((0,S.hS)(te)),G((0,S.Od)({exploreId:te}))),Fe.panelsState&&re&&G((0,M.fx)({exploreId:te,panelsState:re}))})}else G((0,M.Gd)({exploreId:te,datasource:ue||"",queries:(0,x.v)(Te),range:(0,m.Z9)(he),panelsState:re,position:le,eventBridge:new D.o}))}),Object.keys(J).filter(te=>!Object.keys(Z.panes).includes(te)).forEach(te=>G((0,O.J8)(te)))}function Y(Z,J,G,ne,te){ne((0,O.Ve)()),Promise.all(Object.entries(Z.panes).map(([oe,{datasource:le,queries:ue,range:Te,panelsState:he}])=>K(le,ue,G).then(re=>Promise.resolve(re?ue.length?(0,x.v)(ue).filter(V(re)).map(L(re)?f.identity:De=>({...De,datasource:re.getRef()})):(0,B.tR)().get(L(re)?void 0:re.getRef()).then(De=>[N(De)]):[]).then(async De=>{let Fe=await F(De);return!Fe.length&&re&&(Fe=[N(L(re)?await(0,B.tR)().get():re)]),{exploreId:oe,range:Te,panelsState:he,queries:Fe,datasource:re}})))).then(async oe=>{const le=await Promise.all(oe.map(({exploreId:De,range:Fe,panelsState:Ee,queries:Me,datasource:ze})=>ne((0,M.Gd)({exploreId:De,datasource:ze,queries:Me,range:(0,m.Z9)(Fe),panelsState:Ee,eventBridge:new D.o})).unwrap()));if(le.length>1){const De=le.some(({state:Fe},Ee,[{state:Me}])=>!(0,f.isEqual)(Fe.range.raw,Me.range.raw));ne((0,O.qz)({syncedTimes:!De}))}const ue=le.reduce((De,{exploreId:Fe,state:Ee})=>({...De,[Fe]:ie(Ee)}),{}),Te=te.getSearchObject();let he={};for(const[De,Fe]of Object.entries(Te).filter(([Ee])=>!["schemaVersion","panes","orgId","left","right"].includes(Ee)))he[De]=Fe;const re=new URLSearchParams({schemaVersion:`${Z.schemaVersion}`,panes:JSON.stringify(ue),orgId:`${G}`,...he});te.replace({pathname:te.getLocation().pathname,search:re.toString()}),J.current="done"})}function H(Z,J){return Z.current=T.wh.pending.type===J.type,[O.J8.type,O.ve.fulfilled.type,S.Od.pending.type,v.eM.type,M.fx.type,T.wh.fulfilled.type].includes(J.type)&&!Z.current}function k(Z,J,G,ne){const te=Object.entries(Z.panes).reduce((oe,[le,ue])=>ue?{...oe,[le]:ie(ue)}:oe,{});if(!(0,f.isEqual)(J.current.panes,JSON.stringify(te))){const oe=!!J.current.panes&&Object.values(J.current.panes).filter(Boolean).length===0||G.current==="pending";J.current={panes:JSON.stringify(te)},ne.partial({panes:J.current.panes},oe)}}var ee=e(76885);function ie(Z){return{datasource:Z.datasourceInstance?.uid||"",queries:Z.queries.map(u.w4),range:(0,ee.sQ)(Z.range.raw),panelsState:fe(Z.panelsState)}}function fe(Z){let J=(0,f.mapValues)(Z,G=>(0,f.isObject)(G)?fe(G):G);if(J=(0,f.omitBy)(J,f.isEmpty),!(0,f.isEmpty)(J))return J}function q(Z){const{location:J}=(0,n.Il)(),G=(0,s.useDispatch)(),ne=(0,s.useSelector)(o.Qb),te=(0,s.useSelector)(he=>he.user.orgId),oe=(0,t.useRef)(Z),le=(0,t.useRef)("notstarted"),ue=(0,t.useRef)(!1),{warning:Te}=(0,r._2)();(0,t.useEffect)(()=>{Z.panes||(le.current="notstarted",oe.current=Z)},[Z]),(0,t.useEffect)(()=>{const he=G((0,s.addListener)({predicate:re=>H(ue,re),effect:async(re,{cancelActiveListeners:De,delay:Fe,getState:Ee})=>{De(),await Fe(200),k(Ee().explore,oe,le,J)}}));return()=>he()},[G,J]),(0,t.useEffect)(()=>{const he=oe.current?.panes!==Z.panes,[re,De]=h(Z);De&&Te("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded."),!he&&le.current==="notstarted"&&(le.current="pending",Y(re,le,te,G,J)),oe.current=Z,he&&le.current==="done"&&z(re,ne,G)},[G,ne,te,J,Z,Te])}},15961:(Q,I,e)=>{"use strict";e.d(I,{C:()=>n,s:()=>t});const t=r=>r.status==="fulfilled";function n(r,s){return r in s}},324:(Q,I,e)=>{"use strict";e.d(I,{M:()=>g,v:()=>E});var t=e(88483),n=e(19347),r=e(14110),s=e(82467),o=e(3169),m=e(18380),i=e(99140),l=e(62256),d=e(29436),c=e(23994);const g=p=>new t.c(b=>{const a=i.M_.getState().explore.panes[p]?.correlations;if(a)b.next(a),b.complete();else{const h=i.M_.subscribe(()=>{const P=i.M_.getState().explore.panes[p]?.correlations;P&&(h(),b.next(P),b.complete())})}});function u(p){return async(b,a)=>{const h=a().explore.panes[p];if(h.datasourceInstance?.uid!==void 0){let P=h.datasourceInstance.meta.mixed?h.queries.map(C=>C.datasource?.uid).filter(C=>C!==null):[h.datasourceInstance.uid];const y=await(0,m.J6)(P);b((0,l.Fb)({exploreId:p,correlations:y.correlations||[]}))}}}function E(p,b,a){return async(h,P)=>{const y=Object.keys(P().explore?.panes),C=P().explore?.panes[y[0]],f=P().explore?.panes[y[1]];if(!C||!f)return;const D=C.datasourceInstance?.meta.mixed?C.queries[0].datasource:C.datasourceInstance?.getRef(),T=f.datasourceInstance?.meta.mixed?f.queries[0].datasource:f.datasourceInstance?.getRef(),[M,O]=await Promise.all([(0,n.l)().get(D),(0,n.l)().get(T)]);if(M?.uid&&O?.uid&&f.correlationEditorHelperData?.resultField){const S={sourceUID:M.uid,targetUID:O.uid,label:p||await(0,m.tZ)(C,f),description:b,config:{field:f.correlationEditorHelperData.resultField,target:f.queries[0],type:"query",transformations:a}};await(0,m.$q)(M.uid,S).then(async()=>{h((0,d.J8)(y[1])),await h(u(y[0])),await h((0,c.Od)({exploreId:y[0]})),(0,r.rR)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:M.type,targetDataSourceType:O.type})}).catch(v=>{h((0,s.dx)((0,o.gi)("Error creating correlation",v))),console.error(v)})}}}},62860:(Q,I,e)=>{"use strict";e.d(I,{YR:()=>p,wh:()=>E});var t=e(30038),n=e(14110),r=e(11134),s=e(87490),o=e(18380),m=e(31678),i=e(57288),l=e(62256),d=e(23994),c=e(89224),g=e(34028);const u=(0,t.VP)("explore/updateDatasourceInstance"),E=(0,m.createAsyncThunk)("explore/changeDatasource",async({datasource:b,exploreId:a,options:h},{getState:P,dispatch:y})=>{const C=P().user.orgId,{history:f,instance:D}=await(0,g.BE)(C,b),T=P().explore.panes[a].datasourceInstance;(0,n.rR)("explore_change_ds",{from:(T?.meta?.mixed?"mixed":T?.type)||"unknown",to:D.meta.mixed?"mixed":D.type,exploreId:a}),y(u({exploreId:a,datasourceInstance:D,history:f}));const M=P().explore.panes[a].queries,O=(0,g.dq)(D.uid,M),S=await(0,o.J6)(O);y((0,l.Fb)({exploreId:a,correlations:S.correlations||[]})),h?.importQueries&&await y((0,d.y2)(a,M,T,D)),P().explore.panes[a].isLive&&y((0,c.hO)({exploreId:a,refreshInterval:r.cC.offOption.value})),h?.importQueries&&y((0,d.Od)({exploreId:a}))}),p=(b,a)=>{if(u.match(a)){const{datasourceInstance:h,history:P}=a.payload;return(0,s._u)(b.querySubscription),{...b,datasourceInstance:h,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.Ez)(),queryResponse:(0,g.RA)(),queryKeys:[],history:P}}return b}},62256:(Q,I,e)=>{"use strict";e.d(I,{EA:()=>E,Fb:()=>h,Gd:()=>y,LJ:()=>C,QZ:()=>P,fx:()=>u,nE:()=>p});var t=e(30038),n=e(87490),r=e(18380),s=e(32901),o=e(31678),m=e(62860),i=e(29436),l=e(23994),d=e(89224),c=e(34028);const g=(0,t.VP)("explore/changeSize"),u=(0,t.VP)("explore/changePanels");function E(f,D,T){return async(M,O)=>{const S=O().explore.panes[f];if(S===void 0)return;const{panelsState:v}=S;M(u({exploreId:f,panelsState:{...v,[D]:T}}))}}const p=(0,t.VP)("explore/changeCorrelationHelperData"),b=(0,t.VP)("explore/initializeExploreAction"),a=(0,t.VP)("explore/setUrlReplaced"),h=(0,t.VP)("explore/saveCorrelationsAction");function P(f,{width:D}){return g({exploreId:f,width:D})}const y=(0,o.createAsyncThunk)("explore/initializeExplore",async({exploreId:f,datasource:D,queries:T,range:M,panelsState:O,correlationHelperData:S,eventBridge:v},{dispatch:x,getState:A,fulfillWithValue:R})=>{let B,U=[];if(D){const w=A().user.orgId,K=await(0,c.BE)(w,D);B=K.instance,U=K.history}if(x(b({exploreId:f,queries:T,range:(0,c.eO)(M,(0,s.O)(A().user)),datasourceInstance:B,history:U,eventBridge:v})),O!==void 0&&x(u({exploreId:f,panelsState:O})),x((0,d.JA)({exploreId:f})),B){const w=(0,c.dq)(B.uid,T),K=await(0,r.J6)(w);x(h({exploreId:f,correlations:K.correlations||[]})),x((0,l.Od)({exploreId:f}))}return S!==void 0&&A().explore.correlationEditorDetails?.editorMode&&x(p({exploreId:f,correlationEditorHelperData:S})),R({exploreId:f,state:A().explore.panes[f]})}),C=(f=(0,c.HZ)(),D)=>{if(f=(0,l.JQ)(f,D),f=(0,m.YR)(f,D),f=(0,d.QP)(f,D),i.U2.match(D)){const{richHistory:T,total:M}=D.payload.richHistoryResults;return{...f,richHistory:T,richHistoryTotal:M}}if(i.Ju.match(D)){const T=D.payload.filters;return{...f,richHistorySearchFilters:T}}if(g.match(D)){const T=D.payload.width;return{...f,containerWidth:T}}if(u.match(D)){const{panelsState:T}=D.payload;return{...f,panelsState:T}}if(p.match(D)){const{correlationEditorHelperData:T}=D.payload;return{...f,correlationEditorHelperData:T}}if(h.match(D))return{...f,correlations:D.payload.correlations};if(b.match(D)){const{queries:T,range:M,datasourceInstance:O,history:S,eventBridge:v}=D.payload;return{...f,range:M,queries:T,initialized:!0,eventBridge:v,queryKeys:(0,n.dY)(T),datasourceInstance:O,history:S,queryResponse:(0,c.RA)(),cache:[],correlations:[]}}return f}},72433:(Q,I,e)=>{"use strict";e.d(I,{Bj:()=>h,H9:()=>d,PA:()=>b,Uu:()=>E,VM:()=>c,fP:()=>a,jX:()=>u,ri:()=>i,s1:()=>g,sh:()=>l,wk:()=>p});var t=e(81523),n=e(11401),r=e(29436),s=e(9955);const o=({updatedQuery:P,deletedId:y})=>async(C,f)=>{m(f().explore,(D,T)=>{const M=D.richHistory.map(S=>S.id===P?.id?P:S).filter(S=>S.id!==y),O=D.richHistory.length-M.length;C((0,r.U2)({richHistoryResults:{richHistory:M,total:D.richHistoryTotal-O},exploreId:T}))})},m=(P,y)=>{Object.entries(P.panes).forEach(([C,f])=>{f&&y(f,C)})},i=(P,y,C,f,D)=>async(T,M)=>{const O=D?{quotaExceededError:!1,limitExceededWarning:!1,otherErrors:!1}:{quotaExceededError:!M().explore.richHistoryStorageFull,limitExceededWarning:!M().explore.richHistoryLimitExceededWarningShown},{richHistoryStorageFull:S,limitExceeded:v}=await(0,t.l0)({localOverride:P,datasource:{uid:y,name:C},queries:f,starred:!1,showNotif:O});D||(S&&T((0,r.fj)()),v&&T((0,r.D)()))},l=(P,y)=>async(C,f)=>{const D=await(0,t.oU)(P,y);C(o({updatedQuery:D}))},d=(P,y)=>async C=>{const f=await(0,t.cX)(P,y);C(o({updatedQuery:f}))},c=P=>async y=>{const C=await(0,t.NC)(P);y(o({deletedId:C}))},g=()=>async(P,y)=>{await(0,t.X1)(),(0,s.K6)(y()).forEach(([C])=>{P((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:C})),P((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:C}))})},u=P=>async(y,C)=>{const f=C().explore.panes[P].richHistorySearchFilters;if(f){const D=await(0,t.DI)(f);y((0,r.U2)({richHistoryResults:D,exploreId:P}))}},E=P=>async(y,C)=>{const f=C().explore.panes[P]?.richHistorySearchFilters,D=C().explore.panes[P]?.richHistory;if(f&&D){const T={...f,page:(f?.page||1)+1},M=await(0,t.DI)(T),O=[...D,...M.richHistory];y((0,r.Ju)({filters:T,exploreId:P})),y((0,r.U2)({richHistoryResults:{richHistory:O,total:M.total},exploreId:P}))}},p=P=>async y=>{y((0,r.Ju)({filters:void 0,exploreId:P})),y((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:P}))},b=()=>async(P,y)=>{let C=y().explore.richHistorySettings;C||(C=await(0,t.Gx)(),P((0,r.bZ)(C)))},a=P=>async y=>{y((0,r.bZ)(P)),await(0,t.rs)(P)},h=(P,y)=>async(C,f)=>{await C((0,r.Ju)({exploreId:P,filters:{...y}}));const D=f().explore.richHistorySettings;(0,n.gQ)().lastUsedDataSourcesAvailable&&await C(a({...D,lastUsedDatasourceFilters:y.datasourceFilters}))}},29436:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>B,D:()=>b,J8:()=>f,JA:()=>C,Ju:()=>h,U2:()=>E,Ve:()=>T,am:()=>S,bZ:()=>a,fj:()=>p,nD:()=>P,ow:()=>v,qz:()=>u,tP:()=>y,ve:()=>M});var t=e(30038),n=e(2543),r=e.n(n),s=e(18226),o=e(12131),m=e(87490),i=e(23989),l=e(31678),d=e(27649),c=e(62256),g=e(34028);const u=(0,t.VP)("explore/syncTimes"),E=(0,t.VP)("explore/richHistoryUpdated"),p=(0,t.VP)("explore/richHistoryStorageFullAction"),b=(0,t.VP)("explore/richHistoryLimitExceededAction"),a=(0,t.VP)("explore/richHistorySettingsUpdated"),h=(0,t.VP)("explore/richHistorySearchFiltersUpdatedAction"),P=(0,t.VP)("explore/splitSizeUpdateAction"),y=(0,t.VP)("explore/maximizePaneAction"),C=(0,t.VP)("explore/evenPaneResizeAction"),f=(0,t.VP)("explore/splitClose"),D=(0,t.VP)("explore/setPaneState"),T=(0,t.VP)("explore/clearPanes"),M=(0,l.createAsyncThunk)("explore/splitOpen",async(U,{getState:w,dispatch:K})=>{const N=Object.values(w().explore.panes)[0],L=U?.queries??N?.queries??[];Object.keys(w().explore.panes).forEach((z,Y)=>{Y>=1&&K(f(z))});const V=U?.range||N?.range.raw||g.kn;let F=(0,m.o$)();for(;w().explore.panes[F];)F=(0,m.o$)();await K(O({exploreId:F,datasource:U?.datasourceUid||N?.datasourceInstance?.getRef(),queries:(0,d.v)(L),range:V,panelsState:U?.panelsState||N?.panelsState,correlationHelperData:U?.correlationHelperData,eventBridge:new s.o})),N?.range&&await K(u({syncedTimes:(0,n.isEqual)(N.range.raw,V)}))}),O=(0,l.createAsyncThunk)("explore/createNewSplitOpen",async(U,{dispatch:w})=>{await w((0,c.Gd)(U))}),S=(0,t.VP)("explore/changeCorrelationEditorDetails"),v=(U,w)=>async K=>{const{timeRange:N,getExploreUrl:L,openInNewWindow:V}=w,F=await L({queries:U.targets,dsRef:U.datasource,scopedVars:U.scopedVars,timeRange:N,adhocFilters:(0,i.w)().getAdhocFilters(U.datasource?.uid??"",!0)});if(V&&F){V(F);return}o.Ny.push(F)},x=(0,g.HZ)(),A={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},B={explore:(U=A,w)=>{if(f.match(w)){const{[w.payload]:N,...L}={...U.panes};return{...U,panes:L,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(P.match(w)){const{largerExploreId:N}=w.payload;return{...U,largerExploreId:N,maxedExploreId:void 0,evenSplitPanes:N===void 0}}if(y.match(w)){const{exploreId:N}=w.payload;return{...U,largerExploreId:N,maxedExploreId:N,evenSplitPanes:!1}}if(C.match(w))return{...U,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(u.match(w))return{...U,syncedTimes:w.payload.syncedTimes};if(p.match(w))return{...U,richHistoryStorageFull:!0};if(b.match(w))return{...U,richHistoryLimitExceededWarningShown:!0};if(a.match(w)){const N=w.payload;return{...U,richHistorySettings:N}}if(O.pending.match(w))return{...U,panes:{...U.panes,[w.meta.arg.exploreId]:x}};if(c.Gd.pending.match(w)){const N=Object.entries(U.panes),L=N.slice(0,w.meta.arg.position),V=N.slice(L.length),F=[...L,[w.meta.arg.exploreId,x],...V].reduce((z,[Y,H])=>({...z,[Y]:H}),{});return{...U,panes:F}}if(T.match(w))return{...U,panes:{}};if(S.match(w)){const{editorMode:N,label:L,description:V,canSave:F,correlationDirty:z,queryEditorDirty:Y,isExiting:H,postConfirmAction:k,transformations:ee}=w.payload;return{...U,correlationEditorDetails:{editorMode:!!(N??U.correlationEditorDetails?.editorMode),canSave:!!(F??U.correlationEditorDetails?.canSave),label:L??U.correlationEditorDetails?.label,description:V??U.correlationEditorDetails?.description,transformations:ee??U.correlationEditorDetails?.transformations,correlationDirty:!!(z??U.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(Y??U.correlationEditorDetails?.queryEditorDirty),isExiting:!!(H??U.correlationEditorDetails?.isExiting),postConfirmAction:k}}}const K=w.payload?.exploreId;return typeof K=="string"?{...U,panes:Object.entries(U.panes).reduce((N,[L,V])=>({...N,[L]:L===K?(0,c.LJ)(V,w):V}),{})}:U}}},23994:(Q,I,e)=>{"use strict";e.d(I,{_0:()=>ae,He:()=>Kt,hS:()=>ge,bO:()=>Be,IL:()=>Gt,rR:()=>Ve,y2:()=>_e,Az:()=>_t,PD:()=>Xe,JQ:()=>Mt,S6:()=>st,Od:()=>at,GI:()=>Tt,q9:()=>Ne,h1:()=>re,qk:()=>Je,Rk:()=>yt,h9:()=>He,TO:()=>it});var t=e(30038),n=e(32017),r=e.n(n),s=e(2543),o=e(49510),m=e(62467),i=e(58307),l=e(69862),d=e(99165),c=e(39070),g=e(73372),u=e(47232),E=e(9557),p=e(40187),b=e(26272),a=e(14236),h=e(80822),P=e(19347),y=e(32264),C=e(14110),f=e(33390),D=e(87490),T=e(80582),M=e(18380),O=e(69147),S=e(32901),v=e(43269),x=e(14678),A=e(31678),R=e(82467),B=e(3169),U=e(39374),w=e(97186),K=e(81160),N=e(57875),L=e(91890),V=e(57934),F=e(11261),z=e(91002),Y=e(15162);const H=lt=>{const Ct=[],Vt=[],qt=[],rn=[],en=[],Jt=[],hn=[],Fn=[];for(const Kn of lt.series){if(G(Kn)){Fn.push(Kn);continue}switch(Kn.meta?.preferredVisualisationType){case"logs":rn.push(Kn);break;case"graph":Ct.push(Kn);break;case"trace":en.push(Kn);break;case"table":Vt.push(Kn);break;case"rawPrometheus":qt.push(Kn);break;case"nodeGraph":Jt.push(Kn);break;case"flamegraph":hn.push(Kn);break;default:J(Kn)&&Ct.push(Kn),Vt.push(Kn)}}return{...lt,graphFrames:Ct,tableFrames:Vt,logsFrames:rn,traceFrames:en,nodeGraphFrames:Jt,customFrames:Fn,flameGraphFrames:hn,rawPrometheusFrames:qt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},k=({showCorrelationEditorLinks:lt,queries:Ct,correlations:Vt,defaultTargetDatasource:qt})=>rn=>{if(lt&&qt)for(const en of rn.series)for(const Jt of en.fields){Jt.config.links=[],Jt.display=Jt.display||(0,N.H)();const hn={};en.fields.map(Fn=>{hn[`${Fn.name}`]=`\${__data.fields.['${Fn.name}']}`}),Jt.config.links.push({url:"",origin:L.x0.ExploreCorrelationsEditor,title:`Correlate with ${Jt.name}`,internal:{datasourceUid:qt.uid,datasourceName:qt.name,query:{datasource:{uid:qt.uid}},meta:{correlationData:{resultField:Jt.name,vars:hn,origVars:hn}}}})}else if(Ct?.length&&Vt?.length){const en=(0,s.mapValues)((0,s.groupBy)(Ct,"refId"),"0.datasource.uid");(0,M.cA)(rn.series,Vt,en)}return rn},ee=lt=>lt.graphFrames.length?{...lt,graphResult:lt.graphFrames}:{...lt,graphResult:null},ie=lt=>{if(lt.tableFrames.length===0)return(0,m.of)({...lt,tableResult:null});lt.tableFrames.sort((rn,en)=>{const Jt=rn.refId,hn=en.refId;return Jt>hn?1:Jt<hn?-1:0});const Ct=lt.tableFrames.every(rn=>J(rn)),Vt={interpolate:rn=>rn};return(Ct?(0,m.of)(lt.tableFrames).pipe(V.c.joinByFieldTransformer.operator({},Vt)):(0,m.of)(lt.tableFrames).pipe(V.c.mergeTransformer.operator({},Vt))).pipe((0,K.T)(rn=>{for(const en of rn)for(const Jt of en.fields)Jt.display=Jt.display??(0,N.J)({field:Jt,theme:y.$.theme2,timeZone:lt.request?.timezone??"browser"});return{...lt,tableResult:rn}}))},fe=lt=>{const Ct=lt.rawPrometheusFrames;if(!Ct||Ct.length===0)return(0,m.of)({...lt,tableResult:null});Ct.sort((en,Jt)=>{const hn=en.refId,Fn=Jt.refId;return hn>Fn?1:hn<Fn?-1:0});const Vt=Ct.every(en=>J(en)),qt={interpolate:en=>en};return(Vt?(0,m.of)(Ct).pipe(V.c.joinByFieldTransformer.operator({},qt)):(0,m.of)(Ct).pipe(V.c.mergeTransformer.operator({},qt))).pipe((0,K.T)(en=>{const Jt=en[0];for(const hn of Jt.fields)hn.display=hn.display??(0,N.J)({field:hn,theme:y.$.theme2,timeZone:lt.request?.timezone??"browser"});return{...lt,rawPrometheusResult:Jt}}))},q=(lt={})=>Ct=>{if(Ct.logsFrames.length===0)return{...Ct,logsResult:null};const Vt=Ct.request?.intervalMs,qt=(0,O.HT)(Ct.logsFrames,Vt,lt.absoluteRange,lt.queries),rn=(0,D.uE)(lt.refreshInterval),en=(0,z.zy)(qt,rn),Jt=en.rows,hn=en.series,Fn={...en,rows:Jt,series:hn};return{...Ct,logsResult:Fn}};function Z(lt,Ct,Vt,qt,rn,en,Jt,hn){return(0,m.of)(lt).pipe((0,K.T)(Fn=>(0,a.N$)(Fn,Ct)),(0,K.T)(k({defaultTargetDatasource:hn,showCorrelationEditorLinks:Jt,queries:rn,correlations:en})),(0,K.T)(H),(0,K.T)(ee),(0,K.T)(q({absoluteRange:Vt,refreshInterval:qt,queries:rn})),(0,l.Z)(fe),(0,l.Z)(ie))}function J(lt){const Ct=(0,s.groupBy)(lt.fields,Vt=>Vt.type);return!!(Object.keys(Ct).length===2&&Ct[F.PU.time]?.length===1&&Ct[F.PU.number])}function G(lt){return lt.meta?.preferredVisualisationPluginId?(0,Y.oZ)(lt.meta?.preferredVisualisationPluginId):!1}var ne=e(57288),te=e(324),oe=e(62256),le=e(72433),ue=e(29436),Te=e(89224),he=e(34028);const re=lt=>Ct=>{const Vt=Ct.explore.panes[lt];return Vt&&Vt.queryResponse?Vt.queryResponse.state===c.Gu.Loading||Vt.queryResponse.state===c.Gu.Streaming:!1},De=(0,t.VP)("explore/addQueryRow"),Fe=(0,t.VP)("explore/changeQueries"),Ee=(0,t.VP)("explore/cancelQueries"),Me=(0,t.VP)("explore/queriesImported"),ze=(0,t.VP)("explore/queryStoreSubscription"),xe=(0,t.VP)("explore/setSupplementaryQueryEnabledAction"),We=(0,t.VP)("explore/storeSupplementaryQueryDataProviderAction"),be=(0,t.VP)("explore/cleanSupplementaryQueryDataProviderAction"),pe=(0,t.VP)("explore/cleanSupplementaryQueryAction"),Ue=(0,t.VP)("explore/storeSupplementaryQueryDataSubscriptionAction"),we=(0,t.VP)("explore/updateSupplementaryQueryDataAction"),je=(0,t.VP)("explore/queryStreamUpdated"),He=(0,t.VP)("explore/setQueries"),rt=(0,t.VP)("changeLoadingState"),Je=(0,t.VP)("explore/setPausedState"),Ve=(0,t.VP)("explore/clearLogs"),Oe=(0,t.VP)("explore/scanStart"),Ne=(0,t.VP)("explore/scanStop"),ye=(0,t.VP)("explore/addResultsToCache"),se=(0,t.VP)("explore/clearCache");function ae(lt,Ct){return async(Vt,qt)=>{const rn=qt().explore.panes[lt];let en;rn.datasourceInstance?.meta.mixed?en=(0,s.findLast)(rn.queries,hn=>!!hn.datasource)?.datasource||void 0:en=rn.datasourceInstance?.getRef();const Jt=await(0,D.Ll)(rn.queries,Ct,en);Vt(De({exploreId:lt,index:Ct,query:Jt}))}}function ge(lt){return(Ct,Vt)=>{Ct(Ne({exploreId:lt})),Ct(Ee({exploreId:lt}));const qt=Vt().explore.panes[lt].supplementaryQueries;for(const rn of ne.VW)Ct(be({exploreId:lt,type:rn})),qt[rn]?.data?.state!==c.Gu.Done&&Ct(pe({exploreId:lt,type:rn}))}}const Pe=(lt,Ct)=>{const Vt=lt.getRef();return Ct.map(qt=>({...qt,datasource:Vt}))},Re=async(lt,Ct,Vt)=>{let qt=[];if(Ct.meta?.id===lt.meta?.id)qt=Vt;else if((0,g.Ee)(Ct)&&(0,g.FL)(lt)){const rn=await Ct.exportToAbstractQueries(Vt);qt=await lt.importFromAbstractQueries(rn)}else lt.importQueries&&(qt=await lt.importQueries(Vt,Ct));return Pe(lt,qt)},Be=(0,A.createAsyncThunk)("explore/changeQueries",async({queries:lt,exploreId:Ct},{getState:Vt,dispatch:qt})=>{let rn=!1;const en=Vt().explore.panes[Ct].queries,Jt=Vt().explore.panes[Ct].datasourceInstance?.uid,hn=Vt().explore.correlationEditorDetails,Fn=hn?.editorMode||!1;!(Object.keys(Vt().explore.panes)[0]===Ct)&&Fn&&!hn?.queryEditorDirty&&qt((0,ue.am)({queryEditorDirty:!0}));for(const na of lt)for(const Ut of en){if(na.refId===Ut.refId&&na.datasource?.type!==Ut.datasource?.type){const on=await(0,P.l)().get(Ut.datasource),mn=await(0,P.l)().get({uid:na.datasource?.uid});await qt(_e(Ct,en,on,mn,na.refId)),rn=!0}if(Jt===x.uv&&na.refId===Ut.refId&&na.datasource?.uid!==Ut.datasource?.uid){const on=(0,he.dq)(x.uv,lt),mn=await(0,M.J6)(on);qt((0,oe.Fb)({exploreId:Ct,correlations:mn.correlations||[]}))}}rn||qt(Fe({queries:lt,exploreId:Ct})),lt.length<en.length&&qt(at({exploreId:Ct}))}),_e=(lt,Ct,Vt,qt,rn)=>async en=>{if(!Vt){en(Me({exploreId:lt,queries:Ct}));return}let Jt=Ct;if(qt.uid===x.uv)Jt=Ct.map(Fn=>({...Fn,datasource:Vt.getRef()}));else if(Vt.uid===x.uv){const Fn=(0,s.groupBy)(Ct,na=>na.datasource?.uid),Kn=await Promise.all(Object.keys(Fn).map(async na=>{const Ut=await(0,P.l)().get({uid:na});return await Re(qt,Ut,Fn[na])}));Jt=(0,s.flatten)(Kn.filter(na=>na.length>0))}else{let Fn=Ct;if(rn!==void 0){const Kn=Ct.find(na=>na.refId===rn);Kn&&(Fn=[Kn])}Jt=await Re(qt,Vt,Fn)}let hn=await(0,D.di)(Jt,qt.getRef());if(rn!==void 0){Jt.length===0&&(Jt=[await(0,D.Ll)([],void 0,qt.getRef())]);const Fn=Ct.findIndex(na=>na.refId===rn),Kn={...hn[0],refId:Ct[Fn].refId};hn=[...Ct],hn[Fn]=Kn}return en(Me({exploreId:lt,queries:hn})),hn};function Xe(lt,Ct,Vt){return async(qt,rn)=>{const en=rn().explore.panes[lt],{queries:Jt}=en,Fn=(await Promise.all(Jt.map(Kn=>Vt({...Kn},Ct)))).map((Kn,na)=>(0,D.eF)(Kn,Jt,na));qt(He({exploreId:lt,queries:Fn})),Ct.preventSubmit||qt(at({exploreId:lt}))}}async function tt(lt,Ct,Vt,qt){lt((0,le.ri)(!0,Vt.uid,Vt.name,qt,y.$.queryHistoryEnabled)),y.$.queryHistoryEnabled&&lt((0,le.ri)(!1,Vt.uid,Vt.name,qt,!1));for(const rn in Ct.panes)await lt((0,le.jX)(rn))}const at=(0,A.createAsyncThunk)("explore/runQueries",async({exploreId:lt,preserveCache:Ct},{dispatch:Vt,getState:qt})=>{Vt(ge(lt));const{defaultCorrelationEditorDatasource:rn,scopedVars:en,showCorrelationEditorLinks:Jt}=await(0,he.aj)(qt(),lt),hn=(0,te.M)(lt);Vt((0,Te.JA)({exploreId:lt})),Ct!==!0&&Vt(Gt(lt));const Kn=qt().explore.panes[lt],{datasourceInstance:na,containerWidth:Ut,isLive:on,range:mn,scanning:vn,queryResponse:pn,querySubscription:Un,refreshInterval:Bn,absoluteRange:kn,cache:Mn,supplementaryQueries:xn}=Kn;let Vn,aa;const Jn=Kn.queries.map(Hn=>({...Hn,datasource:Hn.datasource||na?.getRef()}));na!=null&&tt(Vt,qt().explore,na,Jn);const _n=(0,he.rk)(Mn,kn);if(_n)Vn=(0,o.z)([(0,m.of)(_n),hn]).pipe((0,l.Z)(([Hn,ba])=>Z(Hn,pn,kn,Bn,Jn,ba,Jt,rn))),aa=Vn.subscribe(Hn=>{Vt(je({exploreId:lt,response:Hn}))});else{if(!(0,D.zT)(Jn)||!na)return;const Hn=na?.interval;(0,D._u)(Un);const ba={minInterval:Hn,maxDataPoints:Ut,liveStreaming:on},va=(0,S.O)(qt().user),Ca=(0,D.bI)(lt,Jn,ba,mn,vn,va,en);if(Vt(rt({exploreId:lt,loadingState:c.Gu.Loading})),Vn=(0,o.z)([(0,U.BN)(na,Ca.request).pipe(on?(0,d.c)(500):i.D),hn]).pipe((0,l.Z)(([dn,pt])=>Z(dn,pn,kn,Bn,Jn,pt,Jt,rn))),aa=Vn.subscribe({next(dn){const pt=qt().explore.panes[lt];if(dn.logsResult!==null&&dn.state===c.Gu.Done&&(0,C.rR)("grafana_explore_logs_result_displayed",{datasourceType:na.type,visualisationType:pt?.panelsState?.logs?.visualisationType??f.A.get(w.r)??"N/A",length:dn.logsResult.rows.length}),Vt(je({exploreId:lt,response:dn})),pt.scanning)if(dn.state===c.Gu.Done&&dn.series.length===0){const Dt=(0,T.Wb)(-1,pt.range);Vt((0,Te.JA)({exploreId:lt,absoluteRange:Dt})),Vt(at({exploreId:lt}))}else Vt(Ne({exploreId:lt}))},error(dn){Vt((0,R.dx)((0,B.gi)("Query processing error",dn))),Vt(rt({exploreId:lt,loadingState:c.Gu.Error})),console.error(dn)},complete(){qt().explore.panes[lt].queryResponse.state===c.Gu.Loading&&Vt(rt({exploreId:lt,loadingState:c.Gu.Done}))}}),on)for(const dn of ne.VW)Vt(be({exploreId:lt,type:dn})),Vt(pe({exploreId:lt,type:dn}));else Vt(ot({exploreId:lt,datasourceInstance:na,transaction:Ca,newQuerySource:Vn,supplementaryQueries:xn,queries:Jn,absoluteRange:kn}))}Vt(ze({exploreId:lt,querySubscription:aa}))}),st=(0,A.createAsyncThunk)("explore/runLoadMoreQueries",async({exploreId:lt,absoluteRange:Ct},{dispatch:Vt,getState:qt})=>{Vt(ge(lt));const{datasourceInstance:rn,containerWidth:en,queryResponse:Jt}=qt().explore.panes[lt],{defaultCorrelationEditorDatasource:hn,scopedVars:Fn,showCorrelationEditorLinks:Kn}=await(0,he.aj)(qt(),lt),na=(0,te.M)(lt);let Ut;const on=Jt.logsResult?.queries||[],mn=Jt.logsFrames.map(Mn=>Mn.refId),vn=on.filter(Mn=>mn.includes(Mn.refId)).map(Mn=>({...Mn,datasource:Mn.datasource||rn?.getRef(),refId:`${O.O6}${Mn.refId}`,supportingQueryType:v.Q$.InfiniteScroll}));if(!(0,D.zT)(vn)||!rn)return;const pn={minInterval:rn?.interval,maxDataPoints:en},Un=(0,S.O)(qt().user),Bn=(0,D.zq)(Un,{from:(0,u.oZ)(Un,Ct.from),to:(0,u.oZ)(Un,Ct.to)},(0,S.q)(qt().user)),kn=(0,D.bI)(lt,vn,pn,Bn,!1,Un,Fn);Vt(rt({exploreId:lt,loadingState:c.Gu.Loading})),Ut=(0,o.z)([(0,U.BN)(rn,kn.request),na]).pipe((0,l.Z)(([Mn,xn])=>Mn.state!==c.Gu.Done?(0,m.of)({...Jt,state:c.Gu.Loading}):Z((0,h._k)(Jt,Mn),Jt,Ct,void 0,vn,xn,Kn,hn))),Ut.subscribe({next(Mn){Vt(je({exploreId:lt,response:Mn}))},error(Mn){Vt((0,R.dx)((0,B.gi)("Query processing error",Mn))),Vt(rt({exploreId:lt,loadingState:c.Gu.Error})),console.error(Mn)},complete(){Vt(rt({exploreId:lt,loadingState:c.Gu.Done}))}})}),dt=async(lt,Ct)=>{const Vt=lt.filter(rn=>rn.datasource?.uid!==x.uv),qt=(0,s.groupBy)(Vt,"datasource.uid");return await Promise.all(Object.values(qt).map(async rn=>({datasource:await(0,P.l)().get(rn[0].datasource,Ct),targets:rn})))},ot=(0,A.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:lt,exploreId:Ct,transaction:Vt,newQuerySource:qt,supplementaryQueries:rn,queries:en,absoluteRange:Jt},{dispatch:hn})=>{let Fn;lt.meta.mixed?Fn=await dt(Vt.request.targets,Vt.request.scopedVars):Fn=[{datasource:lt,targets:Vt.request.targets}];for(const Kn of ne.VW){const na=(0,ne.Pm)(Fn,Kn,{...Vt.request,requestId:`${Vt.request.requestId}_${(0,s.snakeCase)(Kn)}`},qt);na?(hn(We({exploreId:Ct,type:Kn,dataProvider:na})),ft(rn[Kn].data,en,Jt)||(hn(pe({exploreId:Ct,type:Kn})),rn[Kn].enabled&&hn(_t(Ct,Kn)))):hn(be({exploreId:Ct,type:Kn}))}});function ft(lt,Ct,Vt){if(!lt)return!1;const qt=(0,s.zipObject)((0,s.map)(Ct,"refId"),Ct),rn=(0,s.mapValues)((0,s.groupBy)(lt.data.map(Fn=>Fn.meta?.custom?.sourceQuery),"refId"),s.head),en=lt.data.every(Fn=>Fn.meta?.custom?.logsVolumeType===E.Aj.FullRange),Jt=r()(qt,rn),hn=lt.data.every(Fn=>{const Kn=Fn.meta?.custom?.absoluteRange;return Kn?Kn&&Kn.from<=Vt.from&&Vt.to<=Kn.to:!0});return en&&Jt&&hn}function yt(lt,Ct){return(Vt,qt)=>{const rn=qt().explore.panes[lt].queries,en=Ct.map((Jt,hn)=>(0,D.eF)(Jt,rn,hn));Vt(He({exploreId:lt,queries:en})),Vt(at({exploreId:lt}))}}function Tt(lt){return(Ct,Vt)=>{Ct(Oe({exploreId:lt}));const qt=(0,T.Wb)(-1,Vt().explore.panes[lt].range);Ct((0,Te.JA)({exploreId:lt,absoluteRange:qt})),Ct(at({exploreId:lt}))}}function Kt(lt){return(Ct,Vt)=>{const qt=Vt().explore.panes[lt].queryResponse,rn=Vt().explore.panes[lt].absoluteRange,en=(0,he.O2)(rn);qt.state===c.Gu.Done&&Ct(ye({exploreId:lt,cacheKey:en,queryResponse:qt}))}}function Gt(lt){return(Ct,Vt)=>{Ct(se({exploreId:lt}))}}function _t(lt,Ct){return(Vt,qt)=>{const{supplementaryQueries:rn}=qt().explore.panes[lt],en=rn[Ct].dataProvider;if(en){const Jt=en.subscribe({next:hn=>{Vt(we({exploreId:lt,type:Ct,data:hn}))}});Vt(Ue({exploreId:lt,type:Ct,dataSubscription:Jt}))}}}function it(lt,Ct,Vt){return(qt,rn)=>{qt(xe({exploreId:lt,enabled:Ct,type:Vt})),(0,ne.Oi)(Ct,Vt),Ct&&qt(_t(lt,Vt))}}const Mt=(lt,Ct)=>{if(De.match(Ct)){const{queries:Vt}=lt,{index:qt,query:rn}=Ct.payload,en=[...Vt.slice(0,qt+1),{...rn},...Vt.slice(qt+1)];return{...lt,queries:en,queryKeys:(0,D.dY)(en)}}if(Fe.match(Ct)){const{queries:Vt}=Ct.payload;return{...lt,queries:Vt}}if(Ee.match(Ct))return(0,D._u)(lt.querySubscription),{...lt,...lt.queryResponse?{queryResponse:{...lt.queryResponse,state:c.Gu.Done}}:{}};if(He.match(Ct)){const{queries:Vt}=Ct.payload;return{...lt,queries:Vt.slice(),queryKeys:(0,D.dY)(Vt)}}if(ze.match(Ct)){const{querySubscription:Vt}=Ct.payload;return{...lt,querySubscription:Vt}}if(xe.match(Ct)){const{enabled:Vt,type:qt}=Ct.payload,{supplementaryQueries:rn}=lt,en=rn[qt].dataSubscription;!Vt&&en&&en.unsubscribe();const Jt={...rn,[qt]:{...rn[qt],enabled:Vt,data:void 0}};return{...lt,supplementaryQueries:Jt}}if(We.match(Ct)){const{dataProvider:Vt,type:qt}=Ct.payload,{supplementaryQueries:rn}=lt,en=rn[qt];en?.dataSubscription&&en.dataSubscription.unsubscribe();const Jt={...rn,[qt]:{...en,dataProvider:Vt,dataSubscription:void 0}};return{...lt,supplementaryQueries:Jt}}if(be.match(Ct)){const{type:Vt}=Ct.payload,{supplementaryQueries:qt}=lt,rn=qt[Vt];rn?.dataSubscription&&rn.dataSubscription.unsubscribe();const en={...qt,[Vt]:{...rn,dataProvider:void 0,dataSubscription:void 0}};return{...lt,supplementaryQueries:en}}if(pe.match(Ct)){const{type:Vt}=Ct.payload,{supplementaryQueries:qt}=lt,rn={...qt,[Vt]:{...qt[Vt],data:void 0}};return{...lt,supplementaryQueries:rn}}if(Ue.match(Ct)){const{dataSubscription:Vt,type:qt}=Ct.payload,{supplementaryQueries:rn}=lt,en={...rn,[qt]:{...rn[qt],dataSubscription:Vt}};return{...lt,supplementaryQueries:en}}if(we.match(Ct)){let{data:Vt,type:qt}=Ct.payload;const{supplementaryQueries:rn}=lt,en={...rn,[qt]:{...rn[qt],data:Vt}};return{...lt,supplementaryQueries:en}}if(je.match(Ct))return Dn(lt,Ct);if(Me.match(Ct)){const{queries:Vt}=Ct.payload;return{...lt,queries:Vt,queryKeys:(0,D.dY)(Vt)}}if(rt.match(Ct)){const{loadingState:Vt}=Ct.payload;return{...lt,queryResponse:{...lt.queryResponse,state:Vt}}}if(Je.match(Ct)){const{isPaused:Vt}=Ct.payload;return{...lt,isPaused:Vt}}if(Oe.match(Ct))return{...lt,scanning:!0};if(Ne.match(Ct))return{...lt,scanning:!1,scanRange:void 0};if(ye.match(Ct)){const{cache:qt}=lt,{queryResponse:rn,cacheKey:en}=Ct.payload;let Jt=[...qt];return Jt.some(Fn=>Fn.key===en)||(Jt=[{key:en,value:rn},...Jt].slice(0,5)),{...lt,cache:Jt}}if(se.match(Ct))return{...lt,cache:[]};if(Ve.match(Ct)){if(!lt.logsResult)return{...lt,clearedAtIndex:null};if(lt.queryResponse.state===c.Gu.Loading)return{...lt,clearedAtIndex:null,logsResult:{...lt.logsResult,rows:[]}};const Vt=lt.clearedAtIndex?lt.clearedAtIndex+lt.logsResult.rows.length:lt.logsResult.rows.length-1;return{...lt,clearedAtIndex:Vt,logsResult:{...lt.logsResult,rows:[]}}}return lt},Dn=(lt,Ct)=>{const{response:Vt}=Ct.payload,{request:qt,series:rn,error:en,graphResult:Jt,logsResult:hn,tableResult:Fn,rawPrometheusResult:Kn,traceFrames:na,nodeGraphFrames:Ut,flameGraphFrames:on,rawPrometheusFrames:mn,customFrames:vn}=Vt;if(en){if(en.type===p.v2.Timeout||en.type===p.v2.Cancelled)return{...lt};y.$.angularSupportEnabled&&lt.datasourceInstance?.components?.QueryCtrl&&lt.eventBridge.emit(b.ee.dataError,en)}if(!qt)return{...lt};if(y.$.angularSupportEnabled&&lt.datasourceInstance?.components?.QueryCtrl){const pn=rn.map(Un=>(0,a.w3)(Un));lt.eventBridge.emit(b.ee.dataReceived,pn)}return{...lt,queryResponse:Vt,graphResult:Jt,tableResult:Fn,rawPrometheusResult:Kn,logsResult:lt.isLive&&hn?{...hn,rows:(0,he.pg)(lt.clearedAtIndex,hn.rows)}:hn,showLogs:!!hn,showMetrics:!!Jt,showTable:!!Fn?.length,showTrace:!!na.length,showNodeGraph:!!Ut.length,showRawPrometheus:!!mn.length,showFlameGraph:!!on.length,showCustom:!!vn?.length,clearedAtIndex:lt.isLive?lt.clearedAtIndex:null}}},9955:(Q,I,e)=>{"use strict";e.d(I,{Jr:()=>i,K6:()=>s,Qb:()=>n,pF:()=>o,qq:()=>l,st:()=>m,vC:()=>d});var t=e(1081);const n=c=>c.explore.panes,r=c=>c.explore,s=(0,t.Mz)(n,Object.entries),o=(0,t.Mz)(s,c=>c.length>1),m=(0,t.Mz)(s,c=>c.some(g=>g[1].correlationEditorHelperData!==void 0)),i=c=>(0,t.Mz)(n,g=>Object.keys(g)[0]===c),l=c=>(0,t.Mz)(n,g=>g[c]),d=(0,t.Mz)(r,c=>c.correlationEditorDetails)},89224:(Q,I,e)=>{"use strict";e.d(I,{$_:()=>T,GA:()=>v,GH:()=>P,Iy:()=>M,JA:()=>C,QP:()=>x,Xk:()=>S,eM:()=>a,hO:()=>h,iO:()=>f,ke:()=>O,zY:()=>y});var t=e(30038),n=e(47232),r=e(26272),s=e(39070),o=e(72574),m=e(11134),i=e(76412),l=e(28138),d=e(87490),c=e(80582),g=e(74856),u=e(91002),E=e(32901),p=e(29436),b=e(23994);const a=(0,t.VP)("explore/changeRange"),h=(0,t.VP)("explore/changeRefreshInterval"),P=A=>(R,B)=>{const{syncedTimes:U}=B().explore;U?Object.keys(B().explore.panes).forEach(w=>{R(C({...A,exploreId:w})),R((0,b.Od)({exploreId:w,preserveCache:!0}))}):(R(C({...A})),R((0,b.Od)({exploreId:A.exploreId,preserveCache:!0})))},y=A=>R=>{R((0,b.S6)({...A}))},C=A=>(R,B)=>{const{exploreId:U,absoluteRange:w,rawRange:K}=A,N=B().explore.panes[U],L=(0,E.O)(B().user),V=(0,E.q)(B().user),{range:F}=N;let z=F.raw;w&&(z={from:(0,n.oZ)(L,w.from),to:(0,n.oZ)(L,w.to)}),K&&(z=K);const Y=(0,d.zq)(L,z,V),H={from:Y.from.valueOf(),to:Y.to.valueOf()};(0,g.jG)().init({timepicker:{},getTimezone:()=>L,timeRangeUpdated(k){},time:Y.raw}),(0,o.w)().updateTimeRange(Y),R(a({exploreId:U,range:Y,absoluteRange:H}))};function f(A){return(R,B)=>{const U=B().explore.panes[A].range.raw;Object.keys(B().explore.panes).filter(K=>K!==A).forEach(K=>{R(P({exploreId:K,rawRange:U}))});const w=B().explore.syncedTimes;R((0,p.qz)({syncedTimes:!w}))}}function D(A){return(R,B)=>{const U=(0,E.O)(B().user),w=(0,E.q)(B().user);Object.entries(B().explore.panes).forEach(([K,N])=>{const L=(0,d.zq)(U,N.range.raw,w);A(K,N,L,R)})}}function T(){return D((A,R,B,U)=>{const w={from:B.from.valueOf(),to:B.to.valueOf()};U(P({exploreId:A,absoluteRange:w}))})}function M(A){return D((R,B,U,w)=>{const K=(0,c.Wb)(A,U);w(P({exploreId:R,absoluteRange:K}))})}function O(A){return D((R,B,U,w)=>{const K=(0,c.Zk)(U,A);w(P({exploreId:R,absoluteRange:K}))})}function S(){return(A,R)=>{const B=R().explore.panes[Object.keys(R().explore.panes)[0]].range.raw;navigator.clipboard.writeText(JSON.stringify(B)),l.A.emit(r.r1.alertSuccess,[(0,i.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}}function v(){return async(A,R)=>{const{range:B,isError:U}=await(0,c.zG)();if(U===!0){l.A.emit(r.r1.alertError,[(0,i.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,i.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:B})]);return}if(R().explore.syncedTimes){A(P({exploreId:Object.keys(R().explore.panes)[0],rawRange:B})),A(P({exploreId:Object.keys(R().explore.panes)[1],rawRange:B}));return}A(P({exploreId:Object.keys(R().explore.panes)[0],rawRange:B}))}}const x=(A,R)=>{if(h.match(R)){const{refreshInterval:B}=R.payload,U=m.cC.isLive(B),w=(0,d.uE)(B),K=(0,u.zy)(A.logsResult,w);return m.cC.isLive(A.refreshInterval)&&!U&&(0,d._u)(A.querySubscription),{...A,refreshInterval:B,queryResponse:{...A.queryResponse,state:U?s.Gu.Streaming:s.Gu.Done},isLive:U,isPaused:U?!1:A.isPaused,logsResult:K}}if(a.match(R)){const{range:B,absoluteRange:U}=R.payload;return{...A,range:B,absoluteRange:U}}return A}},34028:(Q,I,e)=>{"use strict";e.d(I,{BE:()=>f,HZ:()=>y,O2:()=>D,RA:()=>C,Z9:()=>O,aj:()=>A,dq:()=>x,eO:()=>M,kn:()=>a,ng:()=>P,pg:()=>v,rk:()=>T});var t=e(2543),n=e.n(t),r=e(39070),s=e(43127),o=e(85858),m=e(47232),i=e(19347),l=e(11401),d=e(81523),c=e(14678),g=e(33390),u=e(87490),E=e(31193),p=e(57288);const b=100,a={from:"now-1h",to:"now"},h="grafana.explore.style.graph",P=R=>{g.A.set(h,R)},y=R=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:a},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:C(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,p.Ez)(),panelsState:{},correlations:void 0,...R}),C=()=>({state:r.Gu.NotStarted,series:[],timeRange:(0,s.E2)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function f(R,B){let U;try{U=await(0,E.tR)().get(B)}catch{U=await(0,E.tR)().get()}if(U.init)try{U.init()}catch(L){console.error(L)}let w=[];const K=(0,l.tU)(),N=await K.getRichHistory({search:"",sortOrder:d.xB.Ascending,datasourceFilters:[U.name],starred:!1});if((N.total||0)>0&&N.richHistory.forEach(L=>{L.queries.forEach(V=>{w.push({ts:parseInt(L.id,10),query:V})})}),w.length<b){const L=await K.getRichHistory({search:"",sortOrder:d.xB.Ascending,datasourceFilters:[c.uv],starred:!1});(L.total||0)>0&&L.richHistory.forEach(V=>{V.queries.forEach(F=>{F?.datasource?.uid===U.uid&&w.push({ts:parseInt(V.id,10),query:F})})})}if(w.length<b){const L=`grafana.explore.history.${U.meta?.id}`;w=[...w,...g.A.getObject(L,[])]}return w.length>b&&(w.length=b),(0,u.dr)(R,U.uid),{history:w,instance:U}}function D(R){const B={from:R.from,to:R.to};return Object.entries(B).map(([w,K])=>`${encodeURIComponent(w)}=${encodeURIComponent(K.toString())}`).join("&")}function T(R,B){const U=D(B),w=R.findIndex(N=>N.key===U);return w>=0?R[w].value:void 0}function M(R,B){return{from:o.parse(R.from,!1,B),to:o.parse(R.to,!0,B),raw:R}}function O(R){let B=a,U={from:S(R.from),to:S(R.to)};return U.from!==null&&U.to!==null&&(B={from:U.from,to:U.to}),B}function S(R){if(R===null)return null;if((0,m.Ar)(R))return R;if(typeof R!="string")return null;const B=R;if(B.indexOf("now")!==-1)return B;if(B.length===8)return(0,m.yT)(B,"YYYYMMDD");if(B.length===15)return(0,m.yT)(B,"YYYYMMDDTHHmmss");if(B.length===19)return(0,m.yT)(B,"YYYY-MM-DD HH:mm:ss");if(B.match(/^\d+$/)){const w=parseInt(B,10);return(0,m.yT)(w)}const U=(0,m.yT)(B);return U.isValid()?U:null}const v=(R,B)=>B?R?B.slice(R+1):B:[],x=(R,B)=>R===c.uv?(0,t.uniq)(B.map(U=>U.datasource?.uid).filter(U=>!!U)):[R];async function A(R,B){const U=R.explore.panes[B].correlationEditorHelperData,w=R.explore.correlationEditorDetails?.editorMode||!1,K=Object.keys(R.explore.panes)[0]===B,N=w&&K,L=N?await(0,i.l)().get():void 0,V=w&&!K&&U!==void 0;let F={};return V&&U!==void 0&&Object.entries(U?.vars).forEach(z=>{F[z[0]]={value:z[1]}}),{defaultCorrelationEditorDatasource:L,scopedVars:F,showCorrelationEditorLinks:N}}},96192:(Q,I,e)=>{"use strict";e.d(I,{JQ:()=>f,O1:()=>T,QL:()=>y,YV:()=>P,_O:()=>S,eT:()=>C});var t=e(2543),n=e.n(t),r=e(96540),s=e(92461),o=e(91890),m=e(41987),i=e(6709),l=e(76885),d=e(72574),c=e(14110),g=e(16233),u=e(67023),E=e(6923),p=e(39590);const a=[v=>!v.internal||g.TP.hasAccessToExplore()],h="grafana_data_link_clicked",P=(v,x)=>R=>{const{field:B,dataLinkScopedVars:U,frame:w,link:K,linkModel:N}=R,{valueRowIndex:L}=R.config;if(!K.internal||L===void 0)return N;const V=y({field:B,rowIndex:L,splitOpenFn:v,range:x,vars:U,dataFrame:w,linksToProcess:[K]});return V.length?(0,t.first)(V):void 0},y=v=>{const{field:x,vars:A,splitOpenFn:R,range:B,rowIndex:U,dataFrame:w}=v,K={...A||{}};K.__value={value:{raw:x.values[U]},text:"Raw value"};let N;w&&(N=(0,s.F)({frame:w,rowIndex:U}),K.__data={value:{name:w.name,refId:w.refId,fields:N},text:"Data"},w.fields.forEach(V=>{N&&N[V.name]&&(K[V.name]={value:N[V.name]})}),K.__targetField={value:N[x.name]});const L=v.linksToProcess||x.config.links;return L?L.filter(z=>a.every(Y=>Y(z,K))).map(z=>{if(z.internal){let Y={};z.internal?.transformations&&z.internal?.transformations.forEach(fe=>{let q;fe.field?q=w?.fields.find(J=>J.name===fe.field)?.values[U]:q=x.values[U],Y={...Y,...(0,u.k)(fe,q,x.name)}});const H={...K,...Y},k=T(z,H);let ee=[];if(k.variables.length===0){const fe=x.name.toString();ee.push({variableName:fe,value:"",match:""})}else ee=k.variables;const ie=fe=>{(0,c.rR)(h,{origin:z.origin||o.x0.Datasource,app:m.Jk.Explore,internal:!0}),R?.(fe)};return k.allVariablesDefined?{...(0,i.u)({link:z,internalLink:z.internal,scopedVars:H,range:B,field:x,onClickFn:v.splitOpenFn?q=>ie(q):void 0,replaceVariables:(0,d.w)().replace.bind((0,d.w)())}),variables:ee}:void 0}else{const Y=(k,ee)=>(0,d.w)().replace(k,{...ee,...K}),H=(0,E.mQ)().getDataLinkUIModel(z,Y,x);return H.title||(H.title=C(H.href)),H}}).filter(z=>!!z):[]};function C(v){v.indexOf("://")<0&&(v=`http://${v}`);let x;try{x=new URL(v).hostname}catch{x=v}return x}function f(v,x){return(0,r.useCallback)((A,R)=>A.fields.flatMap(B=>B.config?.links&&B.config?.links.length?y({field:B,rowIndex:R,range:v,dataFrame:A,splitOpenFn:x}):[]),[v,x])}const D=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function T(v,x){let A=[];return(0,d.w)().replace.bind((0,d.w)())(M(v),x,void 0,A),A=(0,t.uniqBy)(A,"variableName"),{variables:A,allVariablesDefined:A.filter(B=>!D.includes(B.variableName)).every(B=>B.found)}}function M(v){let x="",A;for(A in v)typeof v[A]=="string"?x+=" "+v[A]:typeof v[A]=="object"&&(x+=" "+M(v[A]));return x}const O=v=>v[1]!==void 0,S=v=>{const x=Object.entries(v).filter(O).map(([A,R])=>{const B=(0,p.m)(R);return B.range={to:R.range.to.valueOf().toString(),from:R.range.from.valueOf().toString()},[A,B]}).reduce((A,[R,B])=>({...A,[R]:B}),{});return l.kM.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(x)})}},27649:(Q,I,e)=>{"use strict";e.d(I,{v:()=>n});var t=e(21969);function n(r){const s=new Set(r.map(o=>o.refId).filter(Boolean));return s.size===r.length?r:(s.clear(),r.map(o=>{if(o.refId&&!s.has(o.refId))return s.add(o.refId),o;const m=(0,t.W3)(r);return s.add(m),{...o,refId:m}}))}},57288:(Q,I,e)=>{"use strict";e.d(I,{Ez:()=>p,Oi:()=>E,Pm:()=>h,VW:()=>g});var t=e(2543),n=e.n(t),r=e(88483),s=e(44240),o=e(6276),m=e(29405),i=e(9557),l=e(39070),d=e(33390),c=e(69147);const g=[i.cF.LogsVolume,i.cF.LogsSample],u=P=>`grafana.explore.logs.enable${P}`,E=(P,y)=>{d.A.set(u(y),P?"true":"false")},p=()=>{let P={[i.cF.LogsVolume]:{enabled:!0},[i.cF.LogsSample]:{enabled:!1}};for(const y of g){if(y===i.cF.LogsSample)continue;d.A.get(u(y))==="false"&&(P[y]={enabled:!1})}return P},b=(P,y,C)=>new r.c(f=>P.subscribe(D=>{if(D.logsResult&&D.logsResult.rows&&D.logsResult.visibleRange&&D.logsResult.bucketSize!==void 0&&D.state===l.Gu.Done){const T=D.logsResult.bucketSize,M=y.map(v=>v.refId),O=(0,t.groupBy)(D.logsResult.rows,"dataFrame.refId");let S=[];M.forEach(v=>{if(O[v]?.length){const x=(0,c.J9)(O[v],T);S=[...S,...x];const A={logsVolumeType:i.Aj.Limited,absoluteRange:D.logsResult?.visibleRange,datasourceName:C,sourceQuery:y.find(R=>R.refId===v)};f.next({data:S.map(R=>{const B=R.meta?.custom||{};return{...R,meta:{custom:{...B,...A}}}}),state:D.state})}}),f.complete()}})),a=(P,y,C,f)=>{if(P===i.cF.LogsVolume)return b(y,C,f)},h=(P,y,C,f)=>{const T=P.map(({datasource:M,targets:O},S)=>{const v=(0,t.cloneDeep)(C);if(v.requestId=`${v.requestId||""}_${S}`,v.targets=O,(0,i.Nc)(M,y)){if(M.getDataProvider)return M.getDataProvider(y,v);if(M.getSupplementaryRequest){const x=M.getSupplementaryRequest(y,v);return x?y===i.cF.LogsVolume?(0,c.sg)(M,x,{targets:v.targets}):(0,c.Wr)(M,x):void 0}else return}else return a(y,f,O,M.name)}).filter(l.zz);if(T.length!==0)return T.length===1?T[0]:(0,s.h)(...T).pipe((0,m.S)((M,O)=>M.errors&&M.errors.length||O.state===l.Gu.NotStarted?M:O.state===l.Gu.Loading&&M.state===l.Gu.NotStarted?{...M,state:l.Gu.Loading}:O.state&&O.state!==l.Gu.Done?M:{...M,data:[...M.data,...O.data],state:l.Gu.Done},{data:[],state:l.Gu.NotStarted}),(0,o.d)())}},53478:(Q,I,e)=>{"use strict";e.d(I,{Ex:()=>T,$i:()=>D});var t=e(65474),n=e(69862),r=e(43429),s=e(26657),o=e(72574),m=e(19347),i=e(96540),l=e(14186),d=e(88323),c=e(98808),g=e(71680),u=e(1712),E=e(34263),p=e(18225),b=e(76658),a=e(66718),h=e(76942);const P=15;function y(){const M=(0,i.useRef)({}),O=(0,i.useCallback)(v=>{switch(v){case a.Tz.math:case a.Tz.reduce:case a.Tz.resample:case a.Tz.threshold:case a.Tz.sql:return M.current[v];case a.Tz.classic:return}},[]),S=(0,i.useCallback)((v,x)=>{switch(v){case a.Tz.math:M.current.math=x;break;case a.Tz.reduce:case a.Tz.resample:case a.Tz.resample:M.current.reduce=x,M.current.resample=x,M.current.threshold=x;break;case a.Tz.sql:M.current.sql=x}},[]);return{getCachedExpression:O,setCachedExpression:S}}function C(M){const{query:O,queries:S,onRunQuery:v,onChange:x}=M,{getCachedExpression:A,setCachedExpression:R}=y();(0,i.useEffect)(()=>{R(O.type,O.expression)},[O.expression,O.type,R]);const B=(0,i.useCallback)(K=>{const N=A(K.value),L=(0,h.r)({...O,type:K.value});x({...L,expression:N??L.expression})},[O,x,A]),U=()=>{const K=S.filter(N=>O.refId!==N.refId).map(N=>({value:N.refId,label:N.refId}));switch(O.type){case a.Tz.math:return i.createElement(g.z,{onChange:x,query:O,labelWidth:P,onRunQuery:v});case a.Tz.reduce:return i.createElement(u.Z,{refIds:K,onChange:x,labelWidth:P,query:O});case a.Tz.resample:return i.createElement(E.C,{query:O,labelWidth:P,onChange:x,refIds:K});case a.Tz.classic:return i.createElement(c.z,{onChange:x,query:O,refIds:K});case a.Tz.threshold:return i.createElement(b.O,{onChange:x,query:O,labelWidth:P,refIds:K});case a.Tz.sql:return i.createElement(p.k,{onChange:x,query:O,refIds:K})}},w=a.uQ.find(K=>K.value===O.type);return i.createElement("div",null,i.createElement(l.I,{label:"Operation",labelWidth:P},i.createElement(d.l6,{options:a.uQ,value:w,onChange:B,width:25})),U())}class f extends s.iy{constructor(O){super(O),this.instanceSettings=O}applyTemplateVariables(O,S){const v=(0,o.w)();return{...O,expression:v.replace(O.expression,S),window:v.replace(O.window,S)}}getCollapsedText(O){return`Expression: ${O.type}`}query(O){let S=O.targets.map(async x=>{const A=await(0,m.l)().get(x.datasource);return A.interpolateVariablesInQueries?A?.interpolateVariablesInQueries([x],O.scopedVars,O.filters)[0]:x});return(0,t.H)(Promise.all(S)).pipe((0,n.Z)(x=>super.query({...O,targets:x})))}newQuery(O){return{refId:"--",datasource:s.dR,type:O?.type??a.Tz.math,...O}}}const D={id:-100,uid:a.Uj,name:s.dR.name,type:s.dR.type,access:"proxy",meta:{baseUrl:"",module:"",type:r.QE.datasource,name:s.dR.type,id:s.dR.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},T=new f(D);T.meta={id:s.dR.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},T.components={QueryEditor:C}},98808:(Q,I,e)=>{"use strict";e.d(I,{z:()=>y});var t=e(96540),n=e(39268),r=e(14186),s=e(55852),o=e(14578),m=e(76942),i=e(32196),l=e(40845),d=e(67061),c=e(9261),g=e(88323),u=e(10354),E=e(55907);const p=E.A.reducerTypes.map(C=>({label:C.text,value:C.value})),b=E.A.evalOperators.map(C=>({label:C.text,value:C.value})),a=E.A.evalFunctions.map(C=>({label:C.text,value:C.value})),h=({condition:C,index:f,onChange:D,onRemoveCondition:T,refIds:M})=>{const O=(0,l.of)(P),S=w=>{D({...C,operator:{type:w.value}})},v=w=>{D({...C,reducer:{type:w.value,params:[]}})},x=w=>{D({...C,query:{params:[w.value]}})},A=w=>{D({...C,evaluator:{params:C.evaluator.params,type:w.value}})},R=(w,K)=>{const N=parseFloat(w.currentTarget.value),L=[...C.evaluator.params];L[K]=N,D({...C,evaluator:{...C.evaluator,params:L}})},B=(0,i.css)`
    width: 60px;
  `,U=C.evaluator.type===E.p.IsWithinRange||C.evaluator.type===E.p.IsOutsideRange;return t.createElement(d.B,null,t.createElement("div",{style:{flex:1}},t.createElement(n.C,null,f===0?t.createElement("div",{className:(0,i.cx)(O.button,B)},"WHEN"):t.createElement(c.f,{className:(0,i.cx)(O.buttonSelectText,B),options:b,onChange:S,value:b.find(w=>w.value===C.operator.type)}),t.createElement(g.l6,{options:p,onChange:v,width:20,value:p.find(w=>w.value===C.reducer.type)}),t.createElement("div",{className:O.button},"OF"),t.createElement(g.l6,{onChange:x,options:M,width:"auto",value:M.find(w=>w.value===C.query.params[0])})),t.createElement(n.C,null,t.createElement(c.f,{className:O.buttonSelectText,options:a,onChange:A,value:a.find(w=>w.value===C.evaluator.type)}),U?t.createElement(t.Fragment,null,t.createElement(u.p,{type:"number",width:10,onChange:w=>R(w,0),value:C.evaluator.params[0]}),t.createElement("div",{className:O.button},"TO"),t.createElement(u.p,{type:"number",width:10,onChange:w=>R(w,1),value:C.evaluator.params[1]})):C.evaluator.type!==E.p.HasNoValue?t.createElement(u.p,{type:"number",width:10,onChange:w=>R(w,0),value:C.evaluator.params[0]}):null)),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:()=>T(f)},t.createElement(o.I,{name:"trash-alt"})))},P=C=>{const f=(0,i.css)`
    color: ${C.colors.primary.text};
    font-size: ${C.typography.bodySmall.fontSize};
  `;return{buttonSelectText:f,button:(0,i.cx)((0,i.css)`
        display: flex;
        align-items: center;
        border-radius: ${C.shape.radius.default};
        font-weight: ${C.typography.fontWeightMedium};
        border: 1px solid ${C.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${C.spacing(1)};
        background-color: ${C.colors.background.canvas};
      `,f)}},y=({onChange:C,query:f,refIds:D})=>{const T=(S,v)=>{f.conditions&&C({...f,conditions:[...f.conditions.slice(0,v),S,...f.conditions.slice(v+1)]})},M=()=>{if(f.conditions){const S=f.conditions.at(-1)?.query?.params??[],v={...m.P,query:{params:S}};C({...f,conditions:f.conditions.length>0?[...f.conditions,v]:[v]})}},O=S=>{if(f.conditions){const v=f.conditions[S],x=f.conditions.filter(A=>A!==v).map((A,R)=>R===0?{...A,operator:{type:"when"}}:A);C({...f,conditions:x})}};return t.createElement("div",null,t.createElement(n.C,null,t.createElement(r.I,{label:"Conditions",labelWidth:14},t.createElement("div",null,f.conditions?.map((S,v)=>{if(S)return t.createElement(h,{key:v,index:v,condition:S,onChange:x=>T(x,v),onRemoveCondition:O,refIds:D})})))),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:M},t.createElement(o.I,{name:"plus-circle"})))}},71680:(Q,I,e)=>{"use strict";e.d(I,{z:()=>g});var t=e(32196),n=e(96540),r=e(40845),s=e(67061),o=e(14186),m=e(76892),i=e(60782),l=e(14578),d=e(21744);const c="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",g=({labelWidth:b,onChange:a,query:h,onRunQuery:P})=>{const y=D=>{a({...h,expression:D.target.value})},C=(0,r.of)(E),f=()=>{h.expression&&P()};return n.createElement(s.B,null,n.createElement(o.I,{label:n.createElement(m.c,{width:"auto"},n.createElement(i.G,{fitContent:!0,content:n.createElement("div",{className:C.documentationContainer},n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:C.documentationHeader},"Available Math functions"),n.createElement("div",{className:C.documentationFunctions},n.createElement(u,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(u,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(u,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(u,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(u,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(u,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(u,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(u,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(u,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(u,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:n.createElement(s.B,{gap:1,direction:"row"},n.createElement(l.I,{name:"book-open"})," Math operator"),footer:n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:C.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(l.I,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},n.createElement("div",{className:C.info},"Expression ",n.createElement(l.I,{name:"info-circle"})))),labelWidth:b,grow:!0,shrink:!0},n.createElement(d.f,{value:h.expression,onChange:y,rows:1,placeholder:c,onBlur:f,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},u=({name:b,description:a})=>{const h=(0,r.of)(p);return n.createElement(n.Fragment,null,n.createElement("span",{className:h.name},b),n.createElement("span",{className:h.description},a))},E=b=>({documentationHeader:(0,t.css)`
    font-size: ${b.typography.h5.fontSize};
    font-weight: ${b.typography.h5.fontWeight};
  `,documentationLink:(0,t.css)`
    color: ${b.colors.text.link};
  `,documentationContainer:(0,t.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${b.spacing(2)};

    padding: ${b.spacing(1)} ${b.spacing(2)};
  `,documentationFunctions:(0,t.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${b.spacing(2)};
  `,info:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${b.spacing(1)};
  `}),p=b=>({name:(0,t.css)`
    font-weight: ${b.typography.fontWeightBold};
  `,description:(0,t.css)`
    font-size: ${b.typography.bodySmall.fontSize};
    color: ${b.colors.text.disabled};
  `})},1712:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(96540),n=e(14186),r=e(10354),s=e(39268),o=e(88323),m=e(66718);const i=({labelWidth:l="auto",onChange:d,refIds:c,query:g})=>{const u=m.Cu.find(C=>C.value===g.reducer),E=C=>{d({...g,expression:C.value})},p=C=>{d({...g,reducer:C.value})},b=C=>{d({...g,settings:C})},a=C=>{let f;switch(C.value){case m.Mt.ReplaceNonNumbers:let D=0;g.settings?.mode===m.Mt.ReplaceNonNumbers&&(D=g.settings?.replaceWithValue??0),f={mode:m.Mt.ReplaceNonNumbers,replaceWithValue:D};break;default:f={mode:C.value}}b(f)},h=C=>{const f=C.currentTarget.valueAsNumber;b({mode:m.Mt.ReplaceNonNumbers,replaceWithValue:f??0})},P=g.settings?.mode??m.Mt.Strict,y=()=>{if(P===m.Mt.ReplaceNonNumbers)return t.createElement(n.I,{label:"Replace With",labelWidth:l},t.createElement(r.p,{type:"number",width:10,onChange:h,value:g.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.C,null,t.createElement(n.I,{label:"Input",labelWidth:l},t.createElement(o.l6,{onChange:E,options:c,value:g.expression,width:"auto"}))),t.createElement(s.C,null,t.createElement(n.I,{label:"Function",labelWidth:l},t.createElement(o.l6,{options:m.Cu,value:u,onChange:p,width:20})),t.createElement(n.I,{label:"Mode",labelWidth:l},t.createElement(o.l6,{onChange:a,options:m.HZ,value:P,width:25})),y()))}},34263:(Q,I,e)=>{"use strict";e.d(I,{C:()=>i});var t=e(96540),n=e(39268),r=e(14186),s=e(88323),o=e(10354),m=e(66718);const i=({labelWidth:l="auto",onChange:d,refIds:c,query:g})=>{const u=m.PN.find(P=>P.value===g.downsampler),E=m.iX.find(P=>P.value===g.upsampler),p=P=>{d({...g,window:P.target.value})},b=P=>{d({...g,expression:P.value})},a=P=>{d({...g,downsampler:P.value})},h=P=>{d({...g,upsampler:P.value})};return t.createElement(t.Fragment,null,t.createElement(n.C,null,t.createElement(r.I,{label:"Input",labelWidth:l},t.createElement(s.l6,{onChange:b,options:c,value:g.expression,width:20}))),t.createElement(n.C,null,t.createElement(r.I,{label:"Resample to",labelWidth:l,tooltip:"10s, 1m, 30m, 1h"},t.createElement(o.p,{onChange:p,value:g.window,width:15})),t.createElement(r.I,{label:"Downsample"},t.createElement(s.l6,{options:m.PN,value:u,onChange:a,width:25})),t.createElement(r.I,{label:"Upsample"},t.createElement(s.l6,{options:m.iX,value:E,onChange:h,width:25}))))}},18225:(Q,I,e)=>{"use strict";e.d(I,{k:()=>r});var t=e(96540),n=e(6867);const r=({onChange:s,refIds:o,query:m})=>{const l=`select * from ${(0,t.useMemo)(()=>o.map(c=>c.value),[o])[0]} limit 1`,d=c=>{s({...m,expression:c})};return t.createElement(n.Y,{query:m.expression||l,onChange:d})}},76658:(Q,I,e)=>{"use strict";e.d(I,{O:()=>O});var t=e(32196),n=e(96540),r=e(46819),s=e(40845),o=e(39268),m=e(14186),i=e(88323),l=e(9261),d=e(10354),c=e(15292),g=e(2913),u=e(55907),E=e(66718),p=e(30038);const b=(0,p.VP)("thresold/updateRefId"),a=(0,p.VP)("thresold/updateThresholdType"),h=(0,p.VP)("thresold/updateThresholdParams"),P=(0,p.VP)("thresold/updateHysteresis"),y=(0,p.VP)("thresold/updateUnloadParams"),C=(0,p.vy)({type:E.Tz.threshold,refId:"",conditions:[]},x=>{x.addCase(b,(A,R)=>{A.expression=R.payload}),x.addCase(a,(A,R)=>{const B=R.payload.evalFunction,U=R.payload.onError;if(A.conditions[0].evaluator.type=B,!!A.conditions[0].unloadEvaluator){const K=f(A.conditions[0].evaluator.type);U&&U(void 0),A.conditions[0].evaluator.type=B;const N={type:K,params:A.conditions[0].evaluator?.params??[0,0]};A.conditions[0].unloadEvaluator=N}}),x.addCase(h,(A,R)=>{const{param:B,index:U}=R.payload;A.conditions[0].evaluator.params[U]=B}),x.addCase(P,(A,R)=>{const{hysteresisChecked:B,onError:U}=R.payload;B?A.conditions[0].unloadEvaluator={type:f(A.conditions[0].evaluator.type),params:A.conditions[0].evaluator?.params??[0,0]}:(A.conditions[0].unloadEvaluator=void 0,U&&U(void 0))}),x.addCase(y,(A,R)=>{const{param:B,index:U,onError:w}=R.payload;A.conditions[0].unloadEvaluator?A.conditions[0].unloadEvaluator.params[U]=B:A.conditions[0].unloadEvaluator={type:f(A.conditions[0].evaluator.type),params:A.conditions[0].evaluator?.params??[0,0]};const K=D(A.conditions[0]),{errorMsg:N,errorMsgFrom:L,errorMsgTo:V}=K??{};w&&w(N||L||V)})});function f(x){return x===u.p.IsAbove?u.p.IsBelow:x===u.p.IsBelow?u.p.IsAbove:x===u.p.IsWithinRange?u.p.IsOutsideRange:x===u.p.IsOutsideRange?u.p.IsWithinRange:u.p.IsBelow}function D(x){const{unloadEvaluator:A,evaluator:R}=x;if(!R)return;if(A?.params[0]===void 0||Number.isNaN(A?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:B,params:U}=R,{params:w}=A;if(B===u.p.IsWithinRange||B===u.p.IsOutsideRange){if(w[0]===void 0||Number.isNaN(w[0]))return{errorMsgFrom:"This value cannot be empty"};if(w[1]===void 0||Number.isNaN(w[1]))return{errorMsgTo:"This value cannot be empty"}}const[K,N]=A.params,[L,V]=U;switch(B){case u.p.IsAbove:if(K>L)return{errorMsg:`Enter a number less than or equal to ${L}`};break;case u.p.IsBelow:if(K<L)return{errorMsg:`Enter a number more than or equal to ${L}`};break;case u.p.IsOutsideRange:if(K<L)return{errorMsgFrom:`Enter a number more than or equal to ${L}`};if(N>V)return{errorMsgTo:`Enter a number less than or equal to ${V}`};break;case u.p.IsWithinRange:if(K>L)return{errorMsgFrom:`Enter a number less than or equal to ${L}`};if(N<V)return{errorMsgTo:`Enter a number be more than or equal to ${V}`};break;default:throw new Error(`evaluator function type ${B} not supported.`)}}const T=u.p.IsAbove,M={type:"query",evaluator:{type:T,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},O=({labelWidth:x,onChange:A,refIds:R,query:B,onError:U,useHysteresis:w=!1})=>{const K=(0,s.of)(v),N={...B,conditions:B.conditions?.length?B.conditions:[M]},[L,V]=(0,n.useReducer)(C,N),F=L.conditions[0],z=E.zd.find(q=>q.value===L.conditions[0].evaluator?.type),Y=q=>{V(b(q.value))};(0,n.useEffect)(()=>{L&&A(L)},[L]);const H=q=>{V(a({evalFunction:q.value??T,onError:U}))},k=(q,Z)=>{V(h({param:parseFloat(q.currentTarget.value),index:Z}))},ee=F.evaluator.type===u.p.IsWithinRange||F.evaluator.type===u.p.IsOutsideRange,ie=!!g.config.featureToggles?.recoveryThreshold&&w;return n.createElement(n.Fragment,null,n.createElement(o.C,null,n.createElement(m.I,{label:"Input",labelWidth:x},n.createElement(i.l6,{onChange:Y,options:R,value:B.expression,width:20}))),n.createElement(o.C,null,n.createElement(l.f,{className:K.buttonSelectText,options:E.zd,onChange:H,value:z}),ee?n.createElement(n.Fragment,null,n.createElement(d.p,{type:"number",width:10,onChange:q=>k(q,0),defaultValue:F.evaluator.params[0]}),n.createElement("div",{className:K.button},"TO"),n.createElement(d.p,{type:"number",width:10,onChange:q=>k(q,1),defaultValue:F.evaluator.params[1]})):n.createElement(d.p,{type:"number",width:10,onChange:q=>k(q,0),defaultValue:F.evaluator.params[0]||0})),ie&&n.createElement(fe,{isRange:ee,onError:U}));function fe({isRange:q,onError:Z}){const J=!!F.unloadEvaluator,G=oe=>{V(P({hysteresisChecked:oe.currentTarget.checked,onError:Z})),ne.current=!0},ne=n.useRef(!0),te=()=>{ne.current=!1};return n.createElement("div",{className:K.hysteresis},n.createElement("div",{onMouseDown:te},n.createElement(c.K,{showLabel:!0,label:"Custom recovery threshold",value:J,onChange:G,className:K.switch})),J&&n.createElement(S,{isRange:q,condition:F,onError:Z,dispatch:V,allowOnblur:ne}))}};function S({isRange:x,condition:A,onError:R,dispatch:B,allowOnblur:U}){const w=(0,s.of)(v),K=(H,k)=>{const ee=parseFloat(H.currentTarget.value);B(y({param:ee,index:k,onError:R}))},N=D(A),{errorMsg:L,errorMsgFrom:V,errorMsgTo:F}=N??{};if(x)return n.createElement(z,{allowOnblur:U});return n.createElement(Y,{allowOnblur:U});function z({allowOnblur:H}){return A.evaluator.type===u.p.IsWithinRange?n.createElement(o.C,{className:w.hysteresis},n.createElement(m.I,{label:"Stop alerting when outside range",labelWidth:"auto"},n.createElement(r.B,{direction:"row",gap:0},n.createElement("div",{className:w.range},n.createElement(m.I,{invalid:!!V,error:V,className:w.noMargin},n.createElement(d.p,{type:"number",width:10,onBlur:k=>H.current&&K(k,0),defaultValue:A.unloadEvaluator?.params[0]}))),n.createElement("div",{className:w.button},"TO"),n.createElement("div",{className:w.range},n.createElement(m.I,{invalid:!!F,error:F},n.createElement(d.p,{type:"number",width:10,onBlur:k=>H.current&&K(k,1),defaultValue:A.unloadEvaluator?.params[1]})))))):n.createElement(o.C,{className:w.hysteresis},n.createElement(m.I,{label:"Stop alerting when inside range",labelWidth:"auto"},n.createElement(r.B,{direction:"row",gap:0},n.createElement("div",{className:w.range},n.createElement(m.I,{invalid:!!V,error:V},n.createElement(d.p,{type:"number",width:10,onBlur:k=>H.current&&K(k,0),defaultValue:A.unloadEvaluator?.params[0]}))),n.createElement("div",{className:w.button},"TO"),n.createElement("div",{className:w.range},n.createElement(m.I,{invalid:!!F,error:F},n.createElement(d.p,{type:"number",width:10,onBlur:k=>H.current&&K(k,1),defaultValue:A.unloadEvaluator?.params[1]}))))))}function Y({allowOnblur:H}){return A.evaluator.type===u.p.IsAbove?n.createElement(o.C,{className:w.hysteresis},n.createElement(m.I,{label:"Stop alerting when below",labelWidth:"auto",invalid:!!L,error:L},n.createElement(d.p,{type:"number",width:10,onBlur:k=>{H.current&&K(k,0)},defaultValue:A.unloadEvaluator?.params[0]}))):n.createElement(o.C,{className:w.hysteresis},n.createElement(m.I,{label:"Stop alerting when above",labelWidth:"auto",invalid:!!L,error:L},n.createElement(d.p,{type:"number",width:10,onBlur:k=>{H.current&&K(k,0)},defaultValue:A.unloadEvaluator?.params[0]})))}}const v=x=>({buttonSelectText:(0,t.css)({color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${x.spacing(1)}`}),button:(0,t.css)({height:"32px",color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",display:"flex",alignItems:"center",borderRadius:x.shape.radius.default,fontWeight:x.typography.fontWeightBold,border:`1px solid ${x.colors.border.medium}`,whiteSpace:"nowrap",padding:`0 ${x.spacing(1)}`,backgroundColor:x.colors.background.primary}),range:(0,t.css)({width:"min-content"}),hysteresis:(0,t.css)({marginTop:x.spacing(2)}),switch:(0,t.css)({paddingLeft:x.spacing(1)}),noMargin:(0,t.css)({margin:0})})},69437:(Q,I,e)=>{"use strict";e.d(I,{f:()=>r});var t=e(26657),n=e(66718);const r=s=>{if(!s)return!1;if((0,t.s9)(s.datasource))return!0;const o=s;return typeof o.type!="string"?!1:Object.values(n.Tz).includes(o.type)}},66718:(Q,I,e)=>{"use strict";e.d(I,{Cu:()=>l,HZ:()=>c,Mt:()=>d,NI:()=>m,PN:()=>g,Tz:()=>o,Uj:()=>s,iX:()=>u,uQ:()=>i,zd:()=>E});var t=e(75059),n=e(2913),r=e(55907);const s="__expr__";var o=(p=>(p.math="math",p.reduce="reduce",p.resample="resample",p.classic="classic_conditions",p.threshold="threshold",p.sql="sql",p))(o||{});const m=p=>{switch(p){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition (legacy)";case"threshold":return"Threshold";case"sql":return"SQL"}},i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition (legacy)",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."},{value:"sql",label:"SQL",description:"Transform data using SQL. Supports Aggregate/Analytics functions from DuckDB"}].filter(p=>p.value==="sql"?n.config.featureToggles?.sqlExpressions:!0),l=[{value:t.gy.min,label:"Min",description:"Get the minimum value"},{value:t.gy.max,label:"Max",description:"Get the maximum value"},{value:t.gy.mean,label:"Mean",description:"Get the average value"},{value:t.gy.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gy.count,label:"Count",description:"Get the number of values"},{value:t.gy.last,label:"Last",description:"Get the last value"}];var d=(p=>(p.Strict="",p.ReplaceNonNumbers="replaceNN",p.DropNonNumbers="dropNN",p))(d||{});const c=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],g=[{value:t.gy.last,label:"Last",description:"Fill with the last value"},{value:t.gy.min,label:"Min",description:"Fill with the minimum value"},{value:t.gy.max,label:"Max",description:"Fill with the maximum value"},{value:t.gy.mean,label:"Mean",description:"Fill with the average value"},{value:t.gy.sum,label:"Sum",description:"Fill with the sum of all values"}],u=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],E=[{value:r.p.IsAbove,label:"Is above"},{value:r.p.IsBelow,label:"Is below"},{value:r.p.IsWithinRange,label:"Is within range"},{value:r.p.IsOutsideRange,label:"Is outside range"}]},76942:(Q,I,e)=>{"use strict";e.d(I,{P:()=>o,r:()=>s});var t=e(75059),n=e(55907),r=e(66718);const s=m=>{switch(m.type){case r.Tz.reduce:m.reducer||(m.reducer=t.gy.mean);break;case r.Tz.resample:m.downsampler||(m.downsampler=t.gy.mean),m.upsampler||(m.upsampler="fillna"),m.reducer=void 0;break;case r.Tz.math:m.expression=void 0;break;case r.Tz.classic:m.conditions||(m.conditions=[o]);break;default:m.reducer=void 0}return m},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.p.IsAbove}}},71101:(Q,I,e)=>{"use strict";e.d(I,{Cg:()=>i,Fk:()=>d,R4:()=>u,Rj:()=>m,pq:()=>l});var t=e(32264),n=e(44836),r=e(16233),s=e(36689),o=e(31678);const m="manage-folder",i=p=>`folder-dashboards-${p}`,l=p=>`folder-library-panels-${p}`,d=p=>`folder-alerting-${p}`,c=p=>`folder-permissions-${p}`,g=p=>`folder-settings-${p}`;function u(p,b=p.parents){const a={icon:"folder",id:m,subTitle:(0,s.o)("manage-folder"),url:p.url,text:p.title,children:[{active:!1,icon:"apps",id:i(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:p.url}]};if(b&&b.length>0){const h=b[b.length-1],P=b.slice(0,b.length-1);a.parentItem=u(h,P)}return a.children.push({active:!1,icon:"library-panel",id:l(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${p.url}/library-panels`}),r.TP.hasPermission(o.AccessControlAction.AlertingRuleRead)&&t.$.unifiedAlertingEnabled&&a.children.push({active:!1,icon:"bell",id:d(p.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${p.url}/alerting`}),a}function E(p){const b=u({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return b.children[p].active=!0,{main:b,node:b.children[p]}}},54650:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>d,jl:()=>m});var t=e(30038),n=e(55314);const r={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},s=(c,g)=>({...c,...g.payload,hasChanged:!1}),o=(0,t.Z0)({name:"folder",initialState:r,reducers:{loadFolder:s,setFolderTitle:(c,g)=>({...c,title:g.payload,hasChanged:g.payload.trim().length>0})},extraReducers:c=>{c.addMatcher(n.vZ.getFolder.matchFulfilled,s)}}),{loadFolder:m,setFolderTitle:i}=o.actions,d={folder:o.reducer}},84350:(Q,I,e)=>{"use strict";e.d(I,{G:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(88323),o=e(42418),m=e(67140);const i=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:m.fx},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:c,onChange:g,context:u,item:E})=>{const p=(0,r.of)(d),[b,a]=(0,n.useState)(),h=E.settings;(0,n.useEffect)(()=>{async function C(){const f=await(0,m.q3)(c);a(f)}C()},[c,a]);const{current:P,options:y}=(0,n.useMemo)(()=>{let C=h?.options?[...h.options]:[...i],f=C?.find(D=>D.value===b?.path);return!f&&b&&(f={label:b.path,value:b.path},C.push(f)),{options:C,current:f}},[b,h?.options]);return n.createElement(n.Fragment,null,n.createElement(s.l6,{value:P,options:y,onChange:C=>g(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),b&&n.createElement(n.Fragment,null,b.error&&n.createElement(o.F,{title:b.error,severity:"warning"}),b.count&&n.createElement("div",{className:p.keys},n.createElement("b",null,"(",b.count,")"),b.examples(10).map(C=>n.createElement("span",{key:C},C,",")),b.count>10&&" ...")))},d=()=>({keys:(0,t.css)`
    margin-top: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;

    > span {
      margin-left: 4px;
    }
  `})},61983:(Q,I,e)=>{"use strict";e.d(I,{G:()=>h});var t=e(11261),n=e(52622),r=e(84350),s=e(32196),o=e(96540),m=e(13544),i=e(40845),l=e(42418),d=e(14578),c=e(88323),g=e(66864),u=e(31484);const E=[{value:n.aG.Auto,label:"Auto",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.aG.Coords,label:"Coords",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.aG.Geohash,label:"Geohash",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.aG.Lookup,label:"Lookup",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",b=({value:P,onChange:y,context:C,item:f})=>{const[D,T]=(0,o.useState)();(0,o.useEffect)(()=>{f.settings?.source&&f.settings?.data?.length&&f.settings.data[0]&&(0,u.nE)(f.settings.source).then(S=>{f.settings&&f.settings.data&&T((0,u.FM)(f.settings.data[0],S))})},[f.settings]);const M=(0,i.of)(a),O=()=>{if(D){if(D.warning)return o.createElement(l.F,{title:D.warning,severity:"warning",buttonContent:o.createElement(d.I,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const S=window.open(p,"_blank","noopener,noreferrer");S&&(S.opener=null)}});if(P===n.aG.Auto&&D.description)return o.createElement("span",null,D.description)}return null};return o.createElement(o.Fragment,null,o.createElement(c.l6,{options:E,value:P,onChange:S=>{y(S.value)}}),o.createElement(g.Gy,{className:M.hGroup},O()))},a=P=>({alert:(0,s.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,s.css)`
      & div {
        width: 100%;
      }
    `});function h(P,y,C,f,D){switch(C.addCustomEditor({id:"modeEditor",path:`${y}mode`,name:"Location Mode",editor:b,settings:{data:D,source:f}}),f?.mode){case n.aG.Coords:C.addFieldNamePicker({path:`${y}latitude`,name:"Latitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${y}longitude`,name:"Longitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}});break;case n.aG.Geohash:C.addFieldNamePicker({path:`${y}geohash`,name:"Geohash field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}});break;case n.aG.Lookup:C.addFieldNamePicker({path:`${y}lookup`,name:"Lookup field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${y}gazetteer`,name:"Gazetteer",editor:r.G})}}},96606:(Q,I,e)=>{"use strict";e.d(I,{RA:()=>u,XR:()=>E,Dc:()=>g,qy:()=>d,Pz:()=>c});var t=e(44294),n=e(34338),r=e(11217),s=e(22796),o=e(11261),m=e(78134);function i(b){if(!b?.length)return;const a=[16,8,4,2,1],h="0123456789bcdefghjkmnpqrstuvwxyz";let P=!0;const y=[],C=[];y[0]=-90,y[1]=90,C[0]=-180,C[1]=180;let f;b.split("").forEach(M=>{f=h.indexOf(M),a.forEach(O=>{l(P?C:y,f,O),P=!P})});const D=(y[0]+y[1])/2;return[(C[0]+C[1])/2,D]}function l(b,a,h){a&h?b[0]=(b[0]+b[1])/2:b[1]=(b[0]+b[1])/2}function d(b){return{name:b.name??"Point",type:o.PU.geo,values:b.values.map(a=>{const h=i(a);if(h)return new t.A((0,s.Rb)(h))}),config:p}}function c(b,a){const h=new Array(b.values.length);for(let P=0;P<b.values.length;P++){const y=b.values[P],C=a.values[P];y===null||C===null||(h[P]=new t.A((0,s.Rb)([y,C])))}return{name:"Point",type:o.PU.geo,values:h,config:p}}function g(b,a){const h=a.values.length,P=new Array(h);for(let y=0;y<h;y++)P[y]=b.find(a.values[y])?.geometry();return{name:"Geometry",type:o.PU.geo,values:P,config:p}}function u(b,a){const h=b.values,P=a.values;if(!h||!P)throw"missing src/dest";if(h.length!==P.length)throw"Source and destination field lengths do not match";const y=b.values.length,C=new Array(y);for(let f=0;f<y;f++){const D=h[f],T=P[f];D&&T?C[f]=new n.A([D,T]):D?C[f]=D:T&&(C[f]=T)}return{name:"Geometry",type:o.PU.geo,values:C,config:p}}function E(b,a){const h=b.values,P=a.values;if(!h||!P)throw"missing src/dest";if(h.length!==P.length)throw"Source and destination field lengths do not match";const y=b.values.length,C=new Array(y);for(let f=0;f<y;f++){const D=h[f],T=P[f];D&&T&&(C[f]=new r.A([(0,m.EX)(D),(0,m.EX)(T)]))}return{name:"Geometry",type:o.PU.geo,values:C,config:p}}const p=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},67140:(Q,I,e)=>{"use strict";e.d(I,{fx:()=>b,q3:()=>a});var t=e(70915),n=e(44294),r=e(14236),s=e(11261),o=e(17172),m=e(11365);function i(h){const P=new m.A().readFeatures(h,{featureProjection:"EPSG:3857"}),y=P.length,C=new Array(y).fill(null),f=[],D=new Map,T=v=>{let x=D.get(v);return x||(x={types:new Set,values:new Array(y).fill(null),count:0},f.push(v),D.set(v,x)),x},M=(...v)=>{for(const x of v)if(!D.has(x))return x;return"___"+v[0]},O={types:new Set,values:new Array(y).fill(null),count:0};for(let v=0;v<y;v++){const x=P[v];C[v]=x.getGeometry();const A=x.getId();A!=null&&(O.values[v]=A,O.types.add((0,r.oE)(A)),O.count++);for(const R of x.getKeys()){const B=x.get(R);if(B===C[v]||B==null)continue;const U=T(R);U.values[v]=B,U.types.add((0,r.oE)(B)),U.count++}}const S=[];if(O.count>0){const v=l(O);S.push({name:M("id","_id","__id"),type:v,values:O.values,config:{}})}S.push({name:M("geo","geometry"),type:s.PU.geo,values:C,config:{}});for(const v of f){const x=D.get(v);if(!x)continue;const A=l(x);S.push({name:v,type:A,values:x.values,config:{}})}return{fields:S,length:y}}function l(h){return h.count<1?s.PU.other:h.types.size>1?(h.values=h.values.map(P=>P!=null?`${P}`:P),s.PU.string):h.types.values().next().value}var d=e(96606),c=e(22796);function g(h,P){let y=0;const C=new Map;for(const f of P){const D=new n.A((0,c.Rb)([f.longitude,f.latitude])),T={point:()=>D,geometry:()=>D};if(f.name&&(C.set(f.name,T),C.set(f.name.toUpperCase(),T)),f.key&&(C.set(f.key,T),C.set(f.key.toUpperCase(),T)),f.keys)for(const M of f.keys)C.set(M,T),C.set(M.toUpperCase(),T);y++}return{path:h,find:f=>{let D=C.get(f);return!D&&typeof f=="string"&&(D=C.get(f.toUpperCase())),D},count:y,examples:f=>{const D=[];if(C.size<1)D.push("no values found");else for(const T of C.keys())if(D.push(T),D.length>=f)break;return D}}}function u(h,P){let y;if(Array.isArray(P)){const C=P[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return g(h,P)}else Array.isArray(P?.features)&&P?.type==="FeatureCollection"&&(y=i(P));if(!y)try{y=(0,r.Vc)(P)}catch(C){return{path:h,error:`${C}`,find:f=>{},examples:f=>[]}}return E(y,{path:h})}function E(h,P){const y=[];let C,f,D,T,M;for(const v of h.fields)if(v.type===s.PU.geo&&(C=v),!M&&v.type===s.PU.string&&(M=v),v.name){P.keys&&P.keys.includes(v.name)&&y.push(v);const x=v.name.toUpperCase();switch(x){case"LAT":case"LATITUTE":f=v;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=v;break;case"GEOHASH":T=v;break;case"ID":case"UID":case"KEY":case"CODE":P.keys||y.push(v);break;default:P.keys||(x.endsWith("_ID")||x.endsWith("_CODE"))&&y.push(v)}}!y.length&&M&&y.push(M);let O=!1;C?O=C.values[0]?.getType()==="Point":T?(C=(0,d.qy)(T),O=!0):f&&D&&(C=(0,d.Pz)(D,f),O=!0);const S=new Map;return y.forEach(v=>{v.values.forEach((x,A)=>{const R=`${x}`;S.set(R.toUpperCase(),A),S.set(R,A)})}),{path:P.path,find:v=>{const x=S.get(v);if(x!=null){const A=C?.values[x];return{frame:h,index:x,point:()=>!A||O?A:new n.A((0,t.q1)(A.getExtent())),geometry:()=>A}}},examples:v=>{const x=[];for(let A of S.keys())if(x.push(A),x.length>v)break;return x},frame:()=>h,count:h.length}}const p={},b="public/gazetteer/countries.json";async function a(h){h||(h=b);let P=p[h];if(!P){try{const y=await(0,o.AI)().get(h);P=u(h,y)}catch(y){console.warn("Error loading placename lookup",h,y),P={path:h,error:"Error loading URL",find:C=>{},examples:C=>[]}}p[h]=P}return P}},31484:(Q,I,e)=>{"use strict";e.d(I,{FM:()=>E,nE:()=>g});var t=e(28240),n=e(11261),r=e(85200),s=e(1173),o=e(52622),m=e(96606),i=e(67140);function l(p){return b=>{for(const a of b.fields)if(p(a,b,[]))return a}}function d(p){return b=>{for(const a of b.fields){if(p.has(a.name.toLowerCase()))return a;const h=(0,t.Ct)(a,b);if(p.has(h))return a}}}const c={mode:o.aG.Auto,geohash:d(new Set(["geohash"])),latitude:d(new Set(["latitude","lat"])),longitude:d(new Set(["longitude","lon","lng"])),h3:d(new Set(["h3"])),wkt:d(new Set(["wkt"])),lookup:d(new Set(["lookup"])),geo:p=>p.fields.find(b=>b.type===n.PU.geo)};async function g(p){const b={...c,mode:p?.mode??o.aG.Auto};switch(b.gazetteer=await(0,i.q3)(p?.gazetteer),b.mode){case o.aG.Geohash:p?.geohash?b.geohash=l((0,r.NS)({id:s.Ct.byName,options:p.geohash})):b.geohash=()=>{};break;case o.aG.Lookup:const a=p?.lookup?.length?(0,r.NS)({id:s.Ct.byName,options:p.lookup}):(0,r.NS)({id:s.Ct.byType,options:n.PU.string});b.lookup=l(a);break;case o.aG.Coords:p?.latitude?b.latitude=l((0,r.NS)({id:s.Ct.byName,options:p.latitude})):b.latitude=()=>{},p?.longitude?b.longitude=l((0,r.NS)({id:s.Ct.byName,options:p.longitude})):b.longitude=()=>{};break}return b}function u(p,b){const a={mode:b.mode??o.aG.Auto};if(a.mode===o.aG.Auto){if(a.geo=b.geo(p),a.geo)return a;if(a.latitude=b.latitude(p),a.longitude=b.longitude(p),a.latitude&&a.longitude)return a.mode=o.aG.Coords,a;if(a.geohash=b.geohash(p),a.geohash)return a.mode=o.aG.Geohash,a;if(a.lookup=b.lookup(p),a.lookup)return a.mode=o.aG.Lookup,a}switch(a.mode){case o.aG.Coords:a.latitude=b.latitude(p),a.longitude=b.longitude(p);break;case o.aG.Geohash:a.geohash=b.geohash(p);break;case o.aG.Lookup:a.lookup=b.lookup(p);break}return a}function E(p,b){const a=u(p,b);switch(a.mode){case o.aG.Auto:return a.geo?{field:a.geo}:{warning:"Unable to find location fields"};case o.aG.Coords:return a.latitude&&a.longitude?{field:(0,m.Pz)(a.longitude,a.latitude),derived:!0,description:`${a.mode}: ${a.latitude.name}, ${a.longitude.name}`}:{warning:"Select latitude/longitude fields"};case o.aG.Geohash:return a.geohash?{field:(0,m.qy)(a.geohash),derived:!0,description:`${a.mode}`}:{warning:"Select geohash field"};case o.aG.Lookup:return a.lookup?b.gazetteer?{field:(0,m.Dc)(b.gazetteer,a.lookup),derived:!0,description:`${a.mode}: ${b.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},61453:(Q,I,e)=>{"use strict";e.d(I,{q:()=>A});var t=e(2543),n=e(96540),r=e(70713),s=e(18282),o=e(2514),m=e(90708),i=e(13544),l=e(14110),d=e(72574),c=e(55852),g=e(62930),u=e(77093),E=e(2913),p=e(44836),b=e(69147),a=e(28240),h=e(40845),P=e(66864),y=e(88575),C=e(88323),f=e(15292),D=e(7788),T=e(32196);const M=B=>(0,T.css)`
  padding: ${B.spacing(0,2)};
  font-size: ${B.typography.bodySmall.fontSize};
  color: ${B.colors.text.secondary};
  overflow: hidden;
  text-overflow: ellipsis;
`,O=({children:B})=>{const U=(0,h.of)(M);return n.createElement("div",{className:U},B)};var S=e(26323);const v=({options:B,actions:U,formattedDataDescription:w,onOptionsChange:K,hasTransformations:N,data:L,dataFrames:V,transformationOptions:F,selectedDataFrame:z,onDataFrameChange:Y,downloadForExcel:H,toggleDownloadForExcel:k})=>{const ee=(0,h.of)(S.A);let ie=V;z===s.F.joinByField&&(ie=L);const fe=ie.map((J,G)=>({value:G,label:`${(0,a.Ri)(J)} (${G})`})),q=[...F,...fe];function Z(){let J="";if(!L)return J;const G=[];return z===s.F.joinByField?G.push((0,p.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):L.length>1&&G.push((0,a.Ri)(L[z])),(B.withTransforms||B.withFieldConfig)&&(B.withTransforms&&G.push((0,p.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),B.withTransforms&&B.withFieldConfig,B.withFieldConfig&&G.push((0,p.t)("dashboard.inspect-data.formatted","Formatted data"))),H&&G.push((0,p.t)("dashboard.inspect-data.excel-header","Excel header")),G.join(", ")}return n.createElement("div",{className:ee.dataDisplayOptions},n.createElement(D.u,{id:"Data options",index:0,title:(0,p.t)("dashboard.inspect-data.data-options","Data options"),headerElement:n.createElement(O,null,Z()),isOpen:!1,actions:U},n.createElement("div",{className:ee.options,"data-testid":"dataOptions"},n.createElement(P.gW,{spacing:"none"},L.length>1&&n.createElement(y.D,{label:(0,p.t)("dashboard.inspect-data.dataframe-label","Show data frame")},n.createElement(C.l6,{options:q,value:z,onChange:Y,width:30,"aria-label":(0,p.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})),n.createElement(P.Gy,null,N&&K&&n.createElement(y.D,{label:(0,p.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,p.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab.")},n.createElement(f.d,{value:!!B.withTransforms,onChange:()=>K({...B,withTransforms:!B.withTransforms})})),K&&n.createElement(y.D,{label:(0,p.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:w||(0,p.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs.")},n.createElement(f.d,{id:"formatted-data-toggle",value:!!B.withFieldConfig,onChange:()=>K({...B,withFieldConfig:!B.withFieldConfig})})),n.createElement(y.D,{label:(0,p.t)("dashboard.inspect-data.download-excel-label","Download for Excel"),description:(0,p.t)("dashboard.inspect-data.download-excel-description","Adds header to CSV for use with Excel")},n.createElement(f.d,{id:"excel-toggle",value:H,onChange:k})))))))};var x=e(18358);class A extends n.PureComponent{constructor(U){super(U),this.onExportLogsAsTxt=()=>{const{data:w,dataName:K,app:N}=this.props;(0,l.rR)("grafana_logs_download_logs_clicked",{app:N,format:"logs",area:"inspector"});const L=(0,b.HT)(w||[]);(0,x.Zy)(L,K)},this.onExportTracesAsJson=()=>{const{data:w,dataName:K,app:N}=this.props;if(w)for(const L of w){if(L.meta?.preferredVisualisationType!=="trace")continue;const V=(0,x.ek)(L,K+"-traces");(0,l.rR)("grafana_traces_download_traces_clicked",{app:N,grafana_version:E.config.buildInfo.version,trace_format:V,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:w,dataName:K,app:N}=this.props;(0,l.rR)("grafana_traces_download_service_graph_clicked",{app:N,grafana_version:E.config.buildInfo.version,location:"inspector"}),w&&(0,x.ny)(w,K)},this.onDataFrameChange=w=>{this.setState({transformId:w.value===s.F.joinByField?s.F.joinByField:s.F.noop,dataFrameIndex:typeof w.value=="number"?w.value:0,selectedDataFrame:w.value})},this.onToggleDownloadForExcel=()=>{this.setState(w=>({downloadForExcel:!w.downloadForExcel}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:s.F.noop,transformationOptions:R(),transformedData:U.data??[],downloadForExcel:!1}}componentDidUpdate(U,w){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(U.data!==this.props.data||w.transformId!==this.state.transformId){const K=this.state.transformationOptions.find(N=>N.value===this.state.transformId);if(K&&K.transformer.id!==s.F.noop){const N=this.state.selectedDataFrame,L=this.state.dataFrameIndex,V=(0,o.m)([K.transformer],this.props.data).subscribe(F=>{this.setState({transformedData:F,selectedDataFrame:N,dataFrameIndex:L},()=>V.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(U,w){const{dataName:K}=this.props,{transformId:N}=this.state,L=U[this.state.dataFrameIndex];w&&(0,l.rR)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,x.EM)(L,K,{useExcelHeader:this.state.downloadForExcel},N)}getProcessedData(){const{options:U,panelPluginId:w,fieldConfig:K,timeZone:N}=this.props,L=this.state.transformedData;if(!U.withFieldConfig)return(0,m.K3)(L);let V=K??{defaults:{},overrides:[]};return w==="table"&&K&&(V=this.cleanTableConfigFromFieldConfig(K)),(0,m.we)({data:L,theme:E.config.theme2,fieldConfig:V,timeZone:N,replaceVariables:(F,z,Y)=>(0,d.w)().replace(F,z,Y)})}cleanTableConfigFromFieldConfig(U){U=(0,t.cloneDeep)(U),U.defaults.custom={};for(const w of U.overrides)for(const K of w.properties)if(K.id.startsWith("custom.")){const N=w.properties.indexOf(K);w.properties.slice(N,1)}return U}renderActions(U,w,K,N){return n.createElement(n.Fragment,null,n.createElement(c.$n,{variant:"primary",onClick:()=>this.exportCsv(U,w),size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-csv"},"Download CSV")),w&&n.createElement(c.$n,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-logs"},"Download logs")),K&&n.createElement(c.$n,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-traces"},"Download traces")),N&&n.createElement(c.$n,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm"},n.createElement(p.x6,{i18nKey:"dashboard.inspect-data.download-service"},"Download service graph")))}render(){const{isLoading:U,options:w,data:K,formattedDataDescription:N,onOptionsChange:L,hasTransformations:V}=this.props,{dataFrameIndex:F,transformationOptions:z,selectedDataFrame:Y,downloadForExcel:H}=this.state,k=(0,S.c)();if(U)return n.createElement("div",null,n.createElement(g.y,{inline:!0})," Loading");const ee=this.getProcessedData();if(!ee||!ee.length)return n.createElement("div",null,"No Data");const ie=ee[F]?F:0,fe=ee[ie],q=ee.some(G=>G?.meta?.preferredVisualisationType==="logs"),Z=ee.some(G=>G?.meta?.preferredVisualisationType==="trace"),J=ee.some(G=>G?.meta?.preferredVisualisationType==="nodeGraph");return n.createElement("div",{className:k.wrap,"aria-label":i.Tp.components.PanelInspector.Data.content},n.createElement("div",{className:k.toolbar},n.createElement(v,{data:K,hasTransformations:V,options:w,dataFrames:ee,transformationOptions:z,selectedDataFrame:Y,downloadForExcel:H,formattedDataDescription:N,onOptionsChange:L,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.onToggleDownloadForExcel,actions:this.renderActions(ee,q,Z,J)})),n.createElement("div",{className:k.content},n.createElement(r.Ay,null,({width:G,height:ne})=>G===0?null:n.createElement(u.X,{width:G,height:ne,data:fe,showTypeIcons:!0}))))}}function R(){return[{value:s.F.joinByField,label:(0,p.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:s.F.joinByField,options:{byField:void 0}}}]}},32067:(Q,I,e)=>{"use strict";e.d(I,{N:()=>p});var t=e(32196),n=e(96540),r=e(13544),s=e(44836),o=e(57875),m=e(11261),i=e(83195),l=e(40845);const d=({timeZone:a,name:h,stats:P})=>{const y=(0,l.$j)(),C=(0,l.of)(g);return!P||!P.length?null:n.createElement("div",{className:C.wrapper},n.createElement("div",{className:"section-heading"},h),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,P.map((f,D)=>n.createElement("tr",{key:`${f.displayName}-${D}`},n.createElement("td",null,f.displayName),n.createElement("td",{className:C.cell},c(f,a,y)))))))};function c(a,h,P){const y=(0,o.J)({field:{type:m.PU.number,config:a},theme:P,timeZone:h});return(0,i.cN)(y(a.value))}const g=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),u=({name:a,traceIds:h})=>{const P=(0,l.of)(E);return h.length===0?null:n.createElement("div",{className:P.wrapper},n.createElement("div",{className:"section-heading"},a),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,h.map((y,C)=>n.createElement("tr",{key:`${y}-${C}`},n.createElement("td",null,y))))))},E=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),p=({data:a,timeZone:h})=>{if(!a.request)return null;let P=[];const y=a.request.endTime?a.request.endTime-a.request.startTime:-1,C=a.timings?.dataProcessingTime||-1;let f=0;for(const S of a.series)f+=S.length;y>0&&P.push({displayName:(0,s.t)("dashboard.inspect-stats.request-time","Total request time"),value:y,unit:"ms"}),C>0&&P.push({displayName:(0,s.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:C,unit:"ms"}),P.push({displayName:(0,s.t)("dashboard.inspect-stats.queries","Number of queries"),value:a.request.targets?.length??0}),P.push({displayName:(0,s.t)("dashboard.inspect-stats.rows","Total number rows"),value:f});let D=[];for(const S of a.series)S.meta&&S.meta.stats&&(D=D.concat(S.meta.stats));const T=(0,s.t)("dashboard.inspect-stats.table-title","Stats"),M=(0,s.t)("dashboard.inspect-stats.data-title","Data source stats"),O=(0,s.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return n.createElement("div",{"aria-label":r.Tp.components.PanelInspector.Stats.content,className:b},n.createElement(d,{timeZone:h,name:T,stats:P}),n.createElement(d,{timeZone:h,name:M,stats:D}),n.createElement(u,{name:O,traceIds:a.traceIds??[]}))},b=(0,t.css)`
  height: 100%;
  overflow-y: scroll;
`},90820:(Q,I,e)=>{"use strict";e.d(I,{e:()=>b});var t=e(32196),n=e(96540),r=e(64423),s=e(39070),o=e(13544),m=e(32264),i=e(67061),l=e(55852),d=e(10534),c=e(39558),g=e(24022),u=e(44836),E=e(27677),p=e(26323);class b extends n.PureComponent{constructor(h){super(h),this.subs=new r.yU,this.setFormattedJson=P=>{this.formattedJson=P},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(P=>({...P,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(P=>({...P,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(E.IB.getInspectorStream().subscribe({next:h=>{let P=!0;if(this.props.instanceId&&h?.requestId&&(P=h.requestId.startsWith(this.props.instanceId)),P)return this.onDataSourceResponse(h.response)}}))}componentDidUpdate(h){this.props.data!==h.data&&this.updateQueryList()}updateQueryList(){const{data:h}=this.props,P=h.series,y=[];if(P?.length){let C;P.forEach((f,D)=>{const T=f.meta?.executedQueryString;if(T){const M=f.refId||"?";C?.refId===M?(C.frames++,C.rows+=f.length):(C={refId:M,frames:0,rows:f.length,query:T},y.push(C))}})}this.setState({executedQueries:y})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(h){h.config?.hideFromInspector||(h={...h},h.headers&&delete h.headers,h.config&&(h.request=h.config,delete h.config,delete h.request.transformRequest,delete h.request.transformResponse,delete h.request.paramSerializer,delete h.request.jsonpCallbackParam,delete h.request.headers,delete h.request.requestId,delete h.request.inspect,delete h.request.retry,delete h.request.timeout),h.data&&(h.response=h.data,delete h.config,delete h.data,delete h.status,delete h.statusText,delete h.ok,delete h.url,delete h.redirected,delete h.type,delete h.$$config),this.setState({response:h}))}renderExecutedQueries(h){if(!h.length)return null;const P={refId:(0,t.css)`
        font-weight: ${m.$.theme.typography.weight.semibold};
        color: ${m.$.theme.colors.textBlue};
        margin-right: 8px;
      `};return n.createElement("div",null,h.map(y=>n.createElement(i.B,{key:y.refId,gap:1,direction:"column"},n.createElement("div",null,n.createElement("span",{className:P.refId},y.refId,":"),y.frames>1&&n.createElement("span",null,y.frames," frames, "),n.createElement("span",null,y.rows," rows")),n.createElement("pre",null,y.query))))}render(){const{allNodesExpanded:h,executedQueries:P,response:y}=this.state,{onRefreshQuery:C,data:f}=this.props,D=this.getNrOfOpenNodes(),T=(0,p.A)(m.$.theme2),M=Object.keys(y).length>0,O=f.state===s.Gu.Loading;return n.createElement("div",{className:T.wrap},n.createElement("div",{"aria-label":o.Tp.components.PanelInspector.Query.content},n.createElement("h3",{className:"section-heading"},"Query inspector"),n.createElement("p",{className:"small muted"},n.createElement(u.x6,{i18nKey:"inspector.query.description"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."))),this.renderExecutedQueries(P),n.createElement("div",{className:T.toolbar},n.createElement(l.$n,{icon:"sync",onClick:C,"aria-label":o.Tp.components.PanelInspector.Query.refreshButton},n.createElement(u.x6,{i18nKey:"inspector.query.refresh"},"Refresh")),M&&h&&n.createElement(l.$n,{icon:"minus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(u.x6,{i18nKey:"inspector.query.collapse-all"},"Collapse all")),M&&!h&&n.createElement(l.$n,{icon:"plus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(u.x6,{i18nKey:"inspector.query.expand-all"},"Expand all")),M&&n.createElement(d.b,{getText:this.getTextForClipboard,className:T.toolbarItem,icon:"copy",variant:"secondary"},n.createElement(u.x6,{i18nKey:"inspector.query.copy-to-clipboard"},"Copy to clipboard")),n.createElement("div",{className:"flex-grow-1"})),n.createElement("div",{className:T.content},O&&n.createElement(c._,{text:"Loading query inspector..."}),!O&&M&&n.createElement(g.B,{json:y,open:D,onDidRender:this.setFormattedJson}),!O&&!M&&n.createElement("p",{className:"muted"},n.createElement(u.x6,{i18nKey:"inspector.query.no-data"},"No request and response collected yet. Hit refresh button"))))}}},26323:(Q,I,e)=>{"use strict";e.d(I,{A:()=>o,c:()=>s});var t=e(32196),n=e(3911),r=e(2913);const s=(0,n.N)(()=>o(r.config.theme2)),o=m=>({wrap:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
      min-height: 0;
    `,toolbar:(0,t.css)`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${m.v1.spacing.sm};
    `,toolbarItem:(0,t.css)`
      margin-left: ${m.v1.spacing.md};
    `,content:(0,t.css)`
      flex-grow: 1;
      height: 100%;
    `,editor:(0,t.css)`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:(0,t.css)`
      overflow: scroll;
    `,dataFrameSelect:(0,t.css)`
      flex-grow: 2;
    `,leftActions:(0,t.css)`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:(0,t.css)`
      padding-top: ${m.v1.spacing.sm};
    `,dataDisplayOptions:(0,t.css)`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${m.v1.spacing.sm};
    `,selects:(0,t.css)`
      display: flex;
      > * {
        margin-right: ${m.v1.spacing.sm};
      }
    `})},16560:(Q,I,e)=>{"use strict";e.d(I,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Help="help",n))(t||{})},18358:(Q,I,e)=>{"use strict";e.d(I,{ny:()=>U,EM:()=>B,Zy:()=>R,ek:()=>w});var t=e(4213),n=e.n(t),r=e(72724),s=e(18282),o=e(72436),m=e(37471),i=e(19071),l=e(2543);const c=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function g(){return defaultConfig}function u(K){return _get(g(),K)}function E(K){let N;const L=new Set(K.map(({spanID:V})=>V));for(let V=0;V<K.length;V++){if(K[V].references&&K[V].references.some(({traceID:H,spanID:k})=>H===K[V].traceID&&L.has(k)))continue;if(!N){N=K[V];continue}const z=K[V].references&&K[V].references.length||0,Y=N.references&&N.references.length||0;(z<Y||z===Y&&K[V].startTime<N.startTime)&&(N=K[V])}return N?`${N.process.serviceName}: ${N.operationName}`:""}const p=(0,l.memoize)(E,K=>K.length?K[0].traceID:0);function b(K){const N=new Map,L=K.reduce((F,z)=>(F.some(Y=>Y.key===z.key&&Y.value===z.value)?N.set(`${z.key}:${z.value}`,`Duplicate tag "${z.key}:${z.value}"`):F.push(z),F),[]),V=Array.from(N.values());return{dedupedTags:L,warnings:V}}function a(K,N){const L=K?.slice()??[],V=(N||[]).map(F=>F.toLowerCase());return L.sort((F,z)=>{const Y=F.key.toLowerCase(),H=z.key.toLowerCase();for(let k=0;k<V.length;k++){const ee=V[k];if(Y.startsWith(ee)&&!H.startsWith(ee))return-1;if(!Y.startsWith(ee)&&H.startsWith(ee))return 1}return Y>H?1:Y<H?-1:0}),L}function h(K){if(!K?.traceID)return null;const N=K.traceID.toLowerCase();let L=0,V=Number.MAX_SAFE_INTEGER;const F=new Map,z=new Map;K.spans=K.spans.filter(q=>!!q.startTime),K.processes=Object.entries(K.processes).reduce((q,[Z,J])=>(q[Z]={...J,tags:a(J.tags)},q),{});const Y=K.spans.length;for(let q=0;q<Y;q++){const Z=K.spans[q],{startTime:J,duration:G,processID:ne}=Z;let te=Z.spanID;J<V&&(V=J),J+G>L&&(L=J+G);const oe=F.get(te);oe!=null?(console.warn(`Dupe spanID, ${oe+1} x ${te}`,Z,z.get(te)),_isEqual(Z,z.get(te))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),F.set(te,oe+1),te=`${te}_${oe}`,Z.spanID=te):F.set(te,1),Z.process=K.processes[ne],z.set(te,Z)}const H=getTraceSpanIdsAsTree(K,z),k=[],ee={};H.walk((q,Z,J=0)=>{if(q==="__root__"||typeof q!="string")return;const G=z.get(q);if(!G)return;const{serviceName:ne}=G.process;ee[ne]=(ee[ne]||0)+1,G.relativeStartTime=G.startTime-V,G.depth=J-1,G.hasChildren=Z.children.length>0,G.childSpanCount=Z.children.length,G.warnings=G.warnings||[],G.tags=G.tags||[],G.references=G.references||[],G.childSpanIds=Z.children.slice().sort((oe,le)=>{const ue=z.get(oe.value),Te=z.get(le.value);return Te.startTime+Te.duration-(ue.startTime+ue.duration)}).map(oe=>oe.value);const te=b(G.tags);G.tags=a(te.dedupedTags,getConfigValue("topTagPrefixes")),G.warnings=G.warnings.concat(te.warnings),G.references.forEach((oe,le)=>{const ue=z.get(oe.spanID);ue&&(oe.span=ue,le>0&&(ue.subsidiarilyReferencedBy=ue.subsidiarilyReferencedBy||[],ue.subsidiarilyReferencedBy.push({spanID:q,traceID:N,span:G,refType:oe.refType})))}),k.push(G)});const ie=getTraceName(k);return{services:Object.keys(ee).map(q=>({name:q,numberOfSpans:ee[q]})),spans:k,traceID:N,traceName:ie,processes:K.processes,duration:L-V,startTime:V,endTime:L}}function P(K){const N=K.spans.map(V=>y(V,K.processes)),L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string},{name:"spanID",type:FieldType.string},{name:"parentSpanID",type:FieldType.string},{name:"operationName",type:FieldType.string},{name:"serviceName",type:FieldType.string},{name:"serviceTags",type:FieldType.other},{name:"startTime",type:FieldType.number},{name:"duration",type:FieldType.number},{name:"logs",type:FieldType.other},{name:"tags",type:FieldType.other},{name:"warnings",type:FieldType.other},{name:"stackTraces",type:FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const V of N)L.add(V);return L}function y(K,N){return{spanID:K.spanID,traceID:K.traceID,parentSpanID:K.references?.find(L=>L.refType==="CHILD_OF")?.spanID,operationName:K.operationName,startTime:K.startTime/1e3,duration:K.duration/1e3,logs:K.logs.map(L=>({...L,timestamp:L.timestamp/1e3})),tags:K.tags,warnings:K.warnings??void 0,stackTraces:K.stackTraces,serviceName:N[K.processID].serviceName,serviceTags:N[K.processID].tags}}function C(K,N){const L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:N.uid,datasourceName:N.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),V=K.map(f).sort((F,z)=>z?.startTime-F?.startTime);for(const F of V)L.add(F);return L}function f(K){const N=transformTraceData(K);if(N)return{traceID:N.traceID,startTime:N.startTime/1e3,duration:N.duration,traceName:N.traceName}}function D(K){let N={traceID:"",spans:[],processes:{},warnings:null},L=[];for(let V=0;V<K.length;V++){const F=K.get(V);N.traceID||(N.traceID=F.traceID),L.find(z=>z===F.serviceName)||(L.push(F.serviceName),N.processes[`p${L.length}`]={serviceName:F.serviceName,tags:F.serviceTags}),N.spans.push({traceID:F.traceID,spanID:F.spanID,duration:F.duration*1e3,references:F.parentSpanID?[{refType:"CHILD_OF",spanID:F.parentSpanID,traceID:F.traceID}]:[],flags:0,logs:F.logs.map(z=>({...z,timestamp:z.timestamp*1e3})),operationName:F.operationName,processID:Object.keys(N.processes).find(z=>N.processes[z].serviceName===F.serviceName)||"",startTime:F.startTime*1e3,tags:F.tags,warnings:F.warnings?F.warnings:null})}return{data:[N],total:0,limit:0,offset:0,errors:null}}function T(K){const N=K.map(M),L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const V of N)L.add(V);return L}function M(K){const N={traceID:K.traceId,spanID:K.id,parentSpanID:K.parentId,operationName:K.name,serviceName:K.localEndpoint?.serviceName||K.remoteEndpoint?.serviceName||"unknown",serviceTags:S(K),startTime:K.timestamp/1e3,duration:K.duration/1e3,logs:K.annotations?.map(O)??[],tags:Object.keys(K.tags||{}).reduce((L,V)=>V==="error"?(L.push({key:"error",value:!0}),L.push({key:"errorValue",value:K.tags.error}),L):(L.push({key:V,value:K.tags[V]}),L),[])};return K.kind&&(N.tags=[{key:"kind",value:K.kind},...N.tags??[]]),K.shared&&(N.tags=[{key:"shared",value:K.shared},...N.tags??[]]),N}function O(K){return{timestamp:K.timestamp,fields:[{key:"annotation",value:K.value}]}}function S(K){const N=K.localEndpoint||K.remoteEndpoint;return N?[v("ipv4",N.ipv4),v("ipv6",N.ipv6),v("port",N.port),v("endpointType",K.localEndpoint?"local":"remote")].filter(L=>!!L):[]}function v(K,N){if(N)return{key:K,value:N}}const x=K=>{let N=[];for(let L=0;L<K.length;L++){const V=K.get(L);N.push({traceId:V.traceID,parentId:V.parentSpanID,name:V.operationName,id:V.spanID,timestamp:V.startTime*1e3,duration:V.duration*1e3,...A(V),annotations:V.logs.length?V.logs.map(F=>({timestamp:F.timestamp,value:F.fields[0].value})):void 0,tags:V.tags.length?V.tags.filter(F=>F.key!=="kind"&&F.key!=="endpointType"&&F.key!=="shared").reduce((F,z)=>z.key==="error"?{...F,[z.key]:V.tags.find(Y=>Y.key==="errorValue").value||""}:{...F,[z.key]:z.value},{}):void 0,kind:V.tags.find(F=>F.key==="kind")?.value,shared:V.tags.find(F=>F.key==="shared")?.value})}return N},A=K=>{const N=K.serviceTags.find(L=>L.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return K.serviceName!=="unknown"?{[N]:{serviceName:K.serviceName,ipv4:K.serviceTags.find(L=>L.key==="ipv4")?.value,ipv6:K.serviceTags.find(L=>L.key==="ipv6")?.value,port:K.serviceTags.find(L=>L.key==="port")?.value}}:void 0};function R(K,N){let L="";K.meta?.forEach(z=>{const Y=`${z.label}: ${JSON.stringify(z.value)}
`;L=L+Y}),L=L+`

`,K.rows.forEach(z=>{const Y=(0,r.LE)(z.timeEpochMs,{defaultWithMS:!0})+"	"+z.entry+`
`;L=L+Y});const V=new Blob([L],{type:"text/plain;charset=utf-8"}),F=`${N}-logs-${(0,r.LE)(new Date)}.txt`;n()(V,F)}function B(K,N,L,V=s.F.noop){const F=(0,o._O)([K],L),z=new Blob(["\uFEFF",F],{type:"text/csv;charset=utf-8"}),Y=V!==s.F.noop?"-as-"+V.toLocaleLowerCase():"",H=`${N}-data${Y}-${(0,r.LE)(new Date)}.csv`;n()(z,H)}function U(K,N){const L=new Blob([JSON.stringify(K)],{type:"application/json"}),V=`${N}-${(0,r.LE)(new Date)}.json`;n()(L,V)}function w(K,N){let L="otlp";switch(K.meta?.custom?.traceFormat){case"jaeger":{let V=D(new m.k(K));U(V,N),L="jaeger";break}case"zipkin":{let V=x(new m.k(K));U(V,N),L="zipkin";break}case"otlp":default:{let V=(0,i.xw)(new m.k(K));U(V,N);break}}return L}},77938:(Q,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(26272),n=e(28138);function r(o){let m="";try{m=JSON.stringify(o,s(),2)}catch(i){i instanceof Error&&(i.toString().includes("RangeError")||i.toString().includes("allocation size overflow"))?n.A.emit(t.r1.alertError,[i.toString(),"Cannot display JSON, the object is too big."]):n.A.emit(t.r1.alertError,[i instanceof Error?i.toString():i])}return m}function s(){const o=new WeakSet;return(m,i)=>{if(m==="__dataContext"||m==="__sceneObject")return"Filtered out in JSON serialization";if(typeof i=="object"&&i!==null){if(o.has(i))return;o.add(i)}return i}}},47259:(Q,I,e)=>{"use strict";e.d(I,{G7:()=>s,KU:()=>o,eb:()=>m});var t=e(17172),n=e(10096),r=e(31678);const s=(0,r.createAsyncThunk)("users/fetchInvitees",async()=>n.TP.hasPermission(r.AccessControlAction.OrgUsersAdd)?await(0,t.AI)().get("/api/org/invites"):[]),o=(0,r.createAsyncThunk)("users/addInvitee",async(i,{dispatch:l})=>{await(0,t.AI)().post("/api/org/invites",i),await l(s())}),m=(0,r.createAsyncThunk)("users/revokeInvite",async i=>(await(0,t.AI)().patch(`/api/org/invites/${i}/revoke`,{}),i))},40823:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>l,Tp:()=>s});var t=e(30038),n=e(47259);const r=(0,t.pU)({selectId:d=>d.code}),s=r.getSelectors(),o=r.getInitialState({status:"idle"}),l={invites:(0,t.Z0)({name:"invites",initialState:o,reducers:{},extraReducers:d=>{d.addCase(n.G7.pending,c=>{c.status="loading"}).addCase(n.G7.fulfilled,(c,{payload:g})=>{r.setAll(c,g),c.status="succeeded"}).addCase(n.G7.rejected,c=>{c.status="failed"}).addCase(n.eb.fulfilled,(c,{payload:g})=>{r.removeOne(c,g),c.status="succeeded"})}}).reducer}},96227:(Q,I,e)=>{"use strict";e.d(I,{b:()=>E,o:()=>p});var t=e(96540),n=e(40996),r=e(16817),s=e(17172),o=e(88575),m=e(10354),i=e(37390),l=e(55852),d=e(85242),c=e(44836),g=e(57767),u=e(88861);const E=({panel:b,initialFolderUid:a,onDismiss:h})=>{const[P,y]=(0,t.useState)(a),[C,f]=(0,t.useState)(b.title),[D,T]=(0,t.useState)(b.title),[M,O]=(0,t.useState)(!1);console.log("folderUid",P),(0,t.useEffect)(()=>O(!0),[C]),(0,n.A)(()=>T(C),350,[C]);const{saveLibraryPanel:S}=(0,u.b)(),v=(0,t.useCallback)(()=>{b.libraryPanel={uid:"",name:C},S(b,P).then(R=>{(0,s.NF)(R)?b.libraryPanel=void 0:h?.()})},[b,C,P,h,S]),x=(0,r.A)(async()=>{try{return!(await(0,g.e9)(C)).some(R=>R.folderUid===P)}catch(R){return(0,s.NF)(R)&&(R.isHandled=!0),!0}finally{O(!1)}},[D,P]);console.log("isValidName:",x);const A=!x?.value&&x.value!==void 0&&C===D&&!M;return t.createElement(t.Fragment,null,t.createElement(o.D,{label:(0,c.t)("library-panel.add-modal.name","Library panel name"),invalid:A,error:A?(0,c.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(m.p,{id:"share-panel-library-panel-name-input",name:"name",value:C,onChange:R=>f(R.currentTarget.value)})),t.createElement(o.D,{label:(0,c.t)("library-panel.add-modal.folder","Save in folder"),description:(0,c.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(d.sR,{onChange:({uid:R})=>y(R),initialFolderUid:a,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(i.a.ButtonRow,null,t.createElement(l.$n,{variant:"secondary",onClick:h,fill:"outline"},t.createElement(c.x6,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(l.$n,{onClick:v,disabled:A},t.createElement(c.x6,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:b=!1,panel:a,initialFolderUid:h,...P})=>t.createElement(i.a,{title:"Create library panel",isOpen:b,onDismiss:P.onDismiss},t.createElement(E,{panel:a,initialFolderUid:h,onDismiss:P.onDismiss}))},86474:(Q,I,e)=>{"use strict";e.d(I,{E:()=>x});var t=e(32196),n=e(96540),r=e(70255),s=e(32264),o=e(40845),m=e(14578),i=e(50720),l=e(72129),d=e(41394),c=e(25701),g=e(39070),u=e(37390),E=e(55852),p=e(43535),b=e(16547),a=e(57767),h=e(30038);const P={loadingState:g.Gu.Loading,dashboardTitles:[]},y=(0,h.VP)("libraryPanels/delete/searchCompleted"),C=(B=P,U)=>y.match(U)?{...B,dashboardTitles:U.payload.dashboards.map(w=>w.title),loadingState:g.Gu.Done}:B;function f(B){return async function(U){const w=await(0,a.xV)(B.uid);U(y({dashboards:w}))}}const D=({libraryPanel:B,onDismiss:U,onConfirm:w})=>{const K=(0,o.of)(p.o),[{dashboardTitles:N,loadingState:L},V]=(0,n.useReducer)(C,P),F=(0,n.useMemo)(()=>(0,b.QC)(V),[V]);(0,n.useEffect)(()=>{F(f(B))},[F,B]);const z=!!N.length,Y=L===g.Gu.Done;return n.createElement(u.a,{className:K.modal,title:"Delete library panel",icon:"trash-alt",onDismiss:U,isOpen:!0},Y?null:n.createElement(T,null),Y?n.createElement("div",null,z?n.createElement(O,{dashboardTitles:N}):null,z?null:n.createElement(M,null),n.createElement(u.a.ButtonRow,null,n.createElement(E.$n,{variant:"secondary",onClick:U,fill:"outline"},"Cancel"),n.createElement(E.$n,{variant:"destructive",onClick:w,disabled:z},"Delete"))):null)},T=()=>n.createElement("span",null,"Loading library panel..."),M=()=>{const B=(0,o.of)(p.o);return n.createElement("div",{className:B.modalText},"Do you want to delete this panel?")},O=({dashboardTitles:B})=>{const U=(0,o.of)(p.o),w=B.length===1?"dashboard.":"dashboards.",K=`${B.length} ${w}`;return B.length===0?null:n.createElement("div",null,n.createElement("p",{className:U.textInfo},"This library panel can not be deleted because it is connected to ",n.createElement("strong",null,K)," Remove the library panel from the dashboards listed below and retry."),n.createElement("table",{className:U.myTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Dashboard name"))),n.createElement("tbody",null,B.map((N,L)=>n.createElement("tr",{key:`dash-title-${L}`},n.createElement("td",null,N))))))},S=({libraryPanel:B,onClick:U,onDelete:w,showSecondaryActions:K})=>{const[N,L]=(0,n.useState)(!1),V=()=>{w?.(B),L(!1)},F=s.$.panels[B.model.type]??(0,d.$)(B.model.type).meta;return n.createElement(n.Fragment,null,n.createElement(c.b,{isCurrent:!1,title:B.name,description:B.description,plugin:F,onClick:()=>U?.(B),onDelete:K?()=>L(!0):void 0},n.createElement(A,{libraryPanel:B})),N&&n.createElement(D,{libraryPanel:B,onConfirm:V,onDismiss:()=>L(!1)}))},v=({showSecondaryActions:B,rootProps:U})=>{const w=(0,o.of)(R);return n.createElement(c.b.Skeleton,{hasDelete:B,...U},n.createElement(r.A,{containerClassName:w.metaContainer,width:80}))},x=(0,l.j)(S,v);function A({libraryPanel:B}){const U=(0,o.of)(R);return!B.meta?.folderUid&&!B.meta?.folderName?null:B.meta.folderUid?n.createElement("span",{className:U.metaContainer},n.createElement(i.N,{href:`/dashboards/f/${B.meta.folderUid}`},n.createElement(m.I,{name:"folder-upload",size:"sm"}),n.createElement("span",null,B.meta.folderName))):n.createElement("span",{className:U.metaContainer},n.createElement(m.I,{name:"folder",size:"sm"}),n.createElement("span",null,B.meta.folderName))}function R(B){return{metaContainer:(0,t.css)({display:"flex",alignItems:"center",color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize,paddingTop:B.spacing(.5),svg:{marginRight:B.spacing(.5),marginBottom:3}})}}},16678:(Q,I,e)=>{"use strict";e.d(I,{j:()=>T,s:()=>D});var t=e(32196),n=e(96540),r=e(40996),s=e(40845),o=e(66864),m=e(67647),i=e(76459),l=e.n(i),d=e(55852),c=e(88323),g=e(14578),u=e(27677),E=e(64161),p=e(31678);function b({onChange:v,maxMenuHeight:x}){const A=(0,s.of)(h),[R,B]=(0,n.useState)(!1),U=(0,n.useCallback)(V=>a(V,B),[]),w=(0,n.useMemo)(()=>l()(U,300),[U]),[K,N]=(0,n.useState)([]),L=(0,n.useCallback)(V=>{const F=V.filter(z=>!!z.value).map(z=>z.value);v(F),N(V)},[v]);return n.createElement("div",{className:A.container},K.length>0&&n.createElement(d.$n,{size:"xs",icon:"trash-alt",fill:"text",className:A.clear,onClick:()=>v([]),"aria-label":"Clear folders"},"Clear folders"),n.createElement(c.Iv,{value:K,onChange:L,isLoading:R,loadOptions:w,maxMenuHeight:x,placeholder:"Filter by folder",noOptionsMessage:"No folders found",prefix:n.createElement(g.I,{name:"filter"}),"aria-label":"Folder filter",defaultOptions:!0}))}async function a(v,x){x(!0);const A={query:v,type:E.G.DashFolder,permission:p.PermissionLevelString.View},B=(await(0,u.AI)().search(A)).map(U=>({label:U.title,value:{uid:U.uid,title:U.title}}));return(!v||"general".includes(v.toLowerCase()))&&B.unshift({label:"General",value:{uid:"general",title:"General"}}),x(!1),B}function h(v){return{container:(0,t.css)({label:"container",position:"relative",minWidth:"180px",flexGrow:1}),clear:(0,t.css)({label:"clear",fontSize:v.spacing(1.5),position:"absolute",top:-v.spacing(4.5),right:0})}}var P=e(68313),y=e(73725),C=e(15054),f=e(83791),D=(v=>(v.Tight="tight",v.Spacious="spacious",v))(D||{});const T=({onClick:v,variant:x="spacious",currentPanelId:A,currentFolderUID:R,perPage:B=C.FG,showPanelFilter:U=!1,showFolderFilter:w=!1,showSort:K=!1,showSecondaryActions:N=!1})=>{const L=(0,s.of)(M,x),[V,F]=(0,n.useState)(""),[z,Y]=(0,n.useState)("");(0,r.A)(()=>Y(V),200,[V]);const[H,k]=(0,n.useState)({}),[ee,ie]=(0,n.useState)(R?[R]:[]),[fe,q]=(0,n.useState)([]),Z=K||U||w,J=x==="tight"?"lg":"xs";return n.createElement("div",{className:L.container},n.createElement(o.gW,{spacing:J},n.createElement("div",{className:(0,t.cx)(L.gridContainer,{[L.tightLayout]:x==="tight"})},n.createElement("div",{className:L.filterInputWrapper},n.createElement(m.Z,{value:V,onChange:F,placeholder:"Search by name or description",width:0,escapeRegex:!1})),Z&&n.createElement(O,{showSort:K,showPanelFilter:U,showFolderFilter:w,onSortChange:k,onFolderFilterChange:ie,onPanelFilterChange:q,sortDirection:H.value,variant:x})),n.createElement("div",{className:L.libraryPanelsView},n.createElement(f.y,{onClickCard:v,searchString:z,sortDirection:H.value,panelFilter:fe,folderFilter:ee,currentPanelId:A,showSecondaryActions:N,perPage:B}))))};function M(v,x){return{filterInputWrapper:(0,t.css)({flexGrow:x==="tight"?1:"initial"}),container:(0,t.css)({width:"100%",overflowY:"auto",padding:v.spacing(1)}),libraryPanelsView:(0,t.css)({width:"100%"}),gridContainer:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",columnGap:v.spacing(1),rowGap:v.spacing(1),paddingBottom:v.spacing(2)}),tightLayout:(0,t.css)({flexDirection:"row",rowGap:v.spacing(1)})}}const O=n.memo(({variant:v="spacious",showSort:x,showPanelFilter:A,showFolderFilter:R,sortDirection:B,onSortChange:U,onFolderFilterChange:w,onPanelFilterChange:K})=>{const N=(0,s.of)(S),L=(0,n.useCallback)(F=>K(F.map(z=>z.id)),[K]),V=(0,n.useCallback)(F=>w(F.map(z=>z.uid??"")),[w]);return n.createElement("div",{className:(0,t.cx)(N.container,{[N.containerTight]:v==="tight"})},x&&n.createElement(y.r,{value:B,onChange:U,filter:["alpha-asc","alpha-desc"]}),(R||A)&&n.createElement("div",{className:(0,t.cx)(N.filterContainer,{[N.filterContainerTight]:v==="tight"})},R&&n.createElement(b,{onChange:V}),A&&n.createElement(P.$,{onChange:L})))});O.displayName="SearchControls";function S(v){return{container:(0,t.css)({display:"flex",gap:v.spacing(1),flexGrow:1,flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),containerTight:(0,t.css)({flexGrow:"initial",flexDirection:"column",justifyContent:"normal"}),filterContainer:(0,t.css)({display:"flex",flexDirection:"row",gap:v.spacing(1)}),filterContainerTight:(0,t.css)({flexDirection:"column",marginLeft:"initial"})}}},83791:(Q,I,e)=>{"use strict";e.d(I,{y:()=>E});var t=e(32196),n=e(96540),r=e(40996),s=e(39070),o=e(40845),m=e(67061),i=e(69529),l=e(19384),d=e(44836),c=e(86474),g=e(16547),u=e(8184);const E=({onClickCard:b,searchString:a,sortDirection:h,panelFilter:P,folderFilter:y,showSecondaryActions:C,currentPanelId:f,perPage:D=40,isWidget:T})=>{const M=(0,o.of)(p),[{libraryPanels:O,page:S,perPage:v,numberOfPages:x,loadingState:A,currentPanelId:R},B]=(0,n.useReducer)(u.w_,{...u.Xb,currentPanelId:f,perPage:D}),U=(0,n.useMemo)(()=>(0,g.QC)(B),[B]);(0,r.A)(()=>U((0,g.IF)({searchString:a,sortDirection:h,panelFilter:P,folderFilterUIDs:y,page:S,perPage:v,currentPanelId:R,isWidget:T})),300,[a,h,P,y,S,U]);const w=({uid:N})=>U((0,g.h4)(N,{searchString:a,sortDirection:h,panelFilter:P,folderFilterUIDs:y,page:S,perPage:v})),K=N=>U((0,u.yd)({page:N}));return n.createElement(m.B,{direction:"column",wrap:"nowrap"},A===s.Gu.Loading?n.createElement(n.Fragment,null,n.createElement(c.E.Skeleton,{showSecondaryActions:C}),n.createElement(c.E.Skeleton,{showSecondaryActions:C}),n.createElement(c.E.Skeleton,{showSecondaryActions:C})):O.length<1?n.createElement(i.p,{variant:"not-found",message:(0,d.t)("library-panels.empty-state.message","No library panels found")}):O?.map((N,L)=>n.createElement(c.E,{key:`library-panel=${L}`,libraryPanel:N,onDelete:w,onClick:b,showSecondaryActions:C})),O.length?n.createElement("div",{className:M.pagination},n.createElement(l.d,{currentPage:S,numberOfPages:x,onNavigate:K,hideWhenSinglePage:!0})):null)},p=b=>({pagination:(0,t.css)({alignSelf:"center",marginTop:b.spacing(1)})})},16547:(Q,I,e)=>{"use strict";e.d(I,{IF:()=>a,QC:()=>P,h4:()=>h});var t=e(64423),n=e(65474),r=e(62467),s=e(44240),o=e(39697),m=e(69862),i=e(66847),l=e(69850),d=e(1005),c=e(65961),g=e(67791),u=e(32264),E=e(17706),p=e(57767),b=e(8184);function a(y){const C=(D,T)=>D.id===T.type,f=(D,T)=>{const M=(0,E.A4)();return D.filter(O=>{const S=M.find(v=>C(v,O));return T?!!S?.skipDataQuery:!S?.skipDataQuery})};return function(D){const T=new t.yU,M=(0,n.H)((0,p.dq)({searchString:y.searchString,perPage:y.perPage,page:y.page,excludeUid:y.currentPanelId,sortDirection:y.sortDirection,typeFilter:y.panelFilter,folderFilterUIDs:y.folderFilterUIDs})).pipe((0,m.Z)(O=>{const{elements:S}=O;if(u.$.featureToggles.vizAndWidgetSplit&&y.isWidget!==void 0){const v=f(S,y.isWidget);return(0,r.of)({...O,elements:v})}return(0,r.of)({...O,elements:S})}),(0,m.Z)(({perPage:O,elements:S,page:v,totalCount:x})=>(0,r.of)((0,b.c4)({libraryPanels:S,page:v,perPage:O,totalCount:x}))),(0,i.W)(O=>(console.error(O),(0,r.of)((0,b.c4)({...b.Xb,page:y.page,perPage:y.perPage})))),(0,l.j)(()=>T.unsubscribe()),(0,d.u)());T.add((0,s.h)((0,o.O)(50).pipe((0,c.u)((0,b.d9)()),(0,g.Q)(M)),M).subscribe(D))}}function h(y,C){return async function(f){try{await(0,p.h4)(y),a(C)(f)}catch(D){console.error(D)}}}function P(y){return function(C){return C instanceof Function?C(y):y(C)}}},8184:(Q,I,e)=>{"use strict";e.d(I,{Xb:()=>r,c4:()=>o,d9:()=>s,w_:()=>i,yd:()=>m});var t=e(30038),n=e(39070);const r={loadingState:n.Gu.Loading,libraryPanels:[],totalCount:0,perPage:40,page:1,numberOfPages:0,currentPanelId:void 0},s=(0,t.VP)("libraryPanels/view/initSearch"),o=(0,t.VP)("libraryPanels/view/searchCompleted"),m=(0,t.VP)("libraryPanels/view/changePage"),i=(l,d)=>{if(s.match(d))return{...l,loadingState:n.Gu.Loading};if(o.match(d)){const{libraryPanels:c,page:g,perPage:u,totalCount:E}=d.payload,p=Math.ceil(E/u);return{...l,libraryPanels:c,perPage:u,totalCount:E,loadingState:n.Gu.Done,numberOfPages:p,page:g>p?g-1:g}}return m.match(d)?{...l,page:d.payload.page}:l}},82792:(Q,I,e)=>{"use strict";e.d(I,{X:()=>t});function t(n){return!!n.libraryPanel?.uid}},57767:(Q,I,e)=>{"use strict";e.d(I,{GN:()=>p,GX:()=>h,Yr:()=>d,d7:()=>g,dq:()=>l,e9:()=>c,h4:()=>E,jc:()=>u,xV:()=>b});var t=e(75505),n=e(79422),r=e(34214),s=e(41507),o=e(20455),m=e(27677),i=e(98796);async function l({searchString:P="",perPage:y=100,page:C=1,excludeUid:f="",sortDirection:D="",typeFilter:T=[],folderFilterUIDs:M=[]}={}){const O=new URLSearchParams;O.append("searchString",P),O.append("sortDirection",D),O.append("typeFilter",T.join(",")),O.append("folderFilterUIDs",M.join(",")),O.append("excludeUid",f),O.append("perPage",y.toString(10)),O.append("page",C.toString(10)),O.append("kind",i.i.Panel.toString(10));const{result:S}=await(0,m.AI)().get(`/api/library-elements?${O.toString()}`);return S}async function d(P,y=!1){const C=await(0,t.s)((0,m.AI)().fetch({method:"GET",url:`/api/library-elements/${P}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:f}=C.data,D=new r.G({...n.Ye,schemaVersion:35,panels:[f.model]}),{scopedVars:T,...M}=D.panels[0].getSaveModel();return delete M.gridPos,delete M.id,delete M.libraryPanel,D.destroy(),{...f,model:M}}async function c(P){const{result:y}=await(0,m.AI)().get(`/api/library-elements/name/${P}`);return y}async function g(P,y){const{result:C}=await(0,m.AI)().post("/api/library-elements",{folderUid:y,name:P.libraryPanel.name,model:P,kind:i.i.Panel});return C}async function u(P){const{libraryPanel:y,...C}=P,{uid:f,name:D,version:T,folderUid:M}=y,O=i.i.Panel,{result:S}=await(0,m.AI)().patch(`/api/library-elements/${f}`,{folderUid:M,name:D,model:C,version:T,kind:O});return S}function E(P){return(0,m.AI)().delete(`/api/library-elements/${P}`)}async function p(P){const{result:y}=await(0,m.AI)().get(`/api/library-elements/${P}/connections`);return y}async function b(P){const y=await p(P);return y.length===0?[]:await(0,m.AI)().search({dashboardUIDs:y.map(f=>f.connectionUid)})}function a(P){const{panel:y,uid:C,name:f,_loadedPanel:D}=P.state,T=P.parent;if(!T||!(T instanceof s.U))throw new Error("LibraryVizPanel must be a child of DashboardGridItem");return{uid:C,folderUID:D?.folderUid,name:f,version:D?.version||0,model:(0,o.Z6)(y,{x:T.state.x??0,y:T.state.y??0,w:T.state.width??0,h:T.state.height??0},!1,T),kind:i.i.Panel}}async function h(P){const{uid:y,folderUID:C,name:f,model:D,version:T,kind:M}=a(P);console.log("updateLibraryVizPanel",D);const{result:O}=await(0,m.AI)().patch(`/api/library-elements/${y}`,{folderUID:C,name:f,model:D,version:T,kind:M});return O}},43535:(Q,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(32196);function n(r){return{myTable:(0,t.css)`
      max-height: 204px;
      overflow-y: auto;
      margin-top: 11px;
      margin-bottom: 28px;
      border-radius: ${r.shape.radius.default};
      border: 1px solid ${r.colors.action.hover};
      background: ${r.colors.background.primary};
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.h6.fontSize};
      width: 100%;

      thead {
        color: #538ade;
        font-size: ${r.typography.bodySmall.fontSize};
      }

      th,
      td {
        padding: 6px 13px;
        height: ${r.spacing(4)};
      }

      tbody > tr:nth-child(odd) {
        background: ${r.colors.background.secondary};
      }
    `,noteTextbox:(0,t.css)`
      margin-bottom: ${r.spacing(4)};
    `,textInfo:(0,t.css)`
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
    `,dashboardSearch:(0,t.css)`
      margin-top: ${r.spacing(2)};
    `,modal:(0,t.css)`
      width: 500px;
    `,modalText:(0,t.css)`
      font-size: ${r.typography.h4.fontSize};
      color: ${r.colors.text.primary};
      margin-bottom: ${r.spacing(4)};
      padding-top: ${r.spacing(2)};
    `}}},98796:(Q,I,e)=>{"use strict";e.d(I,{i:()=>t});var t=(r=>(r[r.Panel=1]="Panel",r))(t||{}),n=(r=>(r[r.Dashboard=1]="Dashboard",r))(n||{})},88861:(Q,I,e)=>{"use strict";e.d(I,{b:()=>c});var t=e(5805),n=e(17172),r=e(3169),s=e(44836),o=e(57767);async function m(g,u){const E=i(g),p=await d(E,u);return l(g,p),p}function i(g){let{scopedVars:u,...E}=g.getSaveModel();return E={libraryPanel:{name:g.title,uid:void 0},...E},E}function l(g,u){g.restoreModel({...u.model,configRev:0,libraryPanel:u,title:g.title}),g.hasSavedPanelEditChange=!0,g.refresh()}function d(g,u){return g.libraryPanel?g.libraryPanel&&g.libraryPanel.uid===""?(0,o.d7)(g,u):(0,o.jc)(g):Promise.reject()}const c=()=>{const g=(0,r._2)(),[u,E]=(0,t.default)(async(p,b)=>{try{const a=await m(p,b);return g.success((0,s.t)("library-panels.save.success","Library panel saved")),a}catch(a){throw(0,n.NF)(a)&&(a.isHandled=!0,g.error((0,s.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:a.message??a.data.message}))),a}},[]);return{state:u,saveLibraryPanel:E}}},6473:(Q,I,e)=>{"use strict";e.d(I,{t:()=>y});var t=e(62938),n=e(55004),r=e(26272),s=e(78731),o=e(12131),m=e(10096),i=e(28444),l=e(14792),d=e(32196),c=e(96540),g=e(40845),u=e(37390),E=e(55852),p=(C=>(C.Saved="saved",C.EditingStarted="editing-started",C.EditingCanceled="editing-cancelled",C.Deleted="deleted",C))(p||{});function b({onDismiss:C,event:f}){const D=(0,g.of)(a),T=()=>{if(f?.action===p.Deleted){o.Ny.push("/");return}y.reloadPage(),C()};return c.createElement(u.a,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:C,onClickBackdrop:()=>{},className:D.modal},c.createElement("div",{className:D.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),c.createElement(u.a.ButtonRow,null,c.createElement(E.$n,{onClick:C,variant:"secondary",fill:"outline"},"Continue editing"),c.createElement(E.$n,{onClick:T,variant:"destructive"},"Discard local changes")))}const a=C=>({modal:(0,d.css)({width:"600px"}),description:(0,d.css)({color:C.colors.text.secondary,paddingBottom:C.spacing(1)})}),h=(0,t.A)();class P{constructor(){this.editing=!1,this.observer={next:f=>{if((0,n.ew)(f)&&this.editing&&f.state===n.ZF.Connected&&this.sendEditingState(),(0,n.Z7)(f)){if(f.message.sessionId===h)return;const{action:D}=f.message;switch(D){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const T=(0,l.UA)().getCurrent();if(T?.uid!==f.message.uid){console.log("dashboard event for different dashboard?",f,T);return}const M=this.editing||T.hasUnsavedChanges();if(D===p.Saved)M?m.lE.publish(new i.S8({component:b,props:{event:f}})):(m.lE.emit(r.r1.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&D===p.EditingStarted&&!this.hasSeenNotice){const O=f.message,S=this.getRecentEditingEvent();(!S||S.message!==O.message)&&(this.hasSeenNotice=!0,m.lE.emit(r.r1.alertWarning,["Another session is editing this dashboard",O.message])),this.lastEditing=O}return}}}}}}setEditingState(f){const D=this.editing=f;this.editing=f,this.hasSeenNotice=!1,D&&m.TP.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:f,uid:D}=this;f&&D&&(0,s.oF)().publish(f,{sessionId:h,uid:D,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(f){const D=(0,s.oF)();D&&f!==this.uid&&(this.channel={scope:n.qD.Grafana,namespace:"dashboard",path:`uid/${f}`},this.leave(),f&&(this.subscription=D.getStream(this.channel).subscribe(this.observer)),this.uid=f)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){o.Ny.reload()}}const y=new P},47118:(Q,I,e)=>{"use strict";e.d(I,{_w:()=>n,o$:()=>m,ot:()=>r});var t=e(14236),n=(i=>(i.NewValuesSameSchema="NewValuesSameSchema",i.FullFrame="FullFrame",i))(n||{});const r=(i,l)=>"type"in i&&i.type===l,s=Object.values(n),o=i=>"type"in i&&s.includes(i.type),m=i=>(0,t.ci)(i)&&"packetInfo"in i},39408:(Q,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(89667),n=e(17172);async function r(){return(0,n.AI)().get("api/live/list").then(s=>{const o=s.channels??[],m={},i=o.map(l=>{if(l.data){const d=new Set,c=(0,t.or)(l.data);for(const g of c.fields)d.add(g.name);m[l.channel]=Array.from(d).map(g=>({value:g,label:g}))}return{value:l.channel,label:l.channel+" ["+l.minute_rate+" msg/min]"}});return{channelFields:m,channels:i}})}},81073:(Q,I,e)=>{"use strict";e.d(I,{I:()=>s});var t=e(32196),n=e(96540),r=e(62930);const s=({adjective:m="newer"})=>{const i=`Loading ${m} logs...`;return n.createElement("div",{className:o},n.createElement("div",null,i," ",n.createElement(r.y,{inline:!0})))},o=(0,t.css)`
  display: flex;
  justify-content: center;
`},93463:(Q,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=["level","lvl","filename"],o=({labels:i})=>{const l=(0,r.of)(m),d=Object.keys(i).filter(c=>!c.startsWith("_")&&!s.includes(c));return d.length===0?n.createElement("span",{className:(0,t.cx)([l.logsLabels])},n.createElement("span",{className:(0,t.cx)([l.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([l.logsLabels])},d.sort().map(c=>{const g=i[c];if(!g)return;const u=`${c}: ${g}`;return n.createElement("span",{key:c,className:(0,t.cx)([l.logsLabel])},n.createElement("span",{className:(0,t.cx)([l.logsLabelValue]),title:u},g))}))},m=i=>({logsLabels:(0,t.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${i.typography.size.xs};
    `,logsLabel:(0,t.css)`
      label: logs-label;
      display: flex;
      padding: ${i.spacing(0,.25)};
      background-color: ${i.colors.background.secondary};
      border-radius: ${i.shape.radius.default};
      margin: ${i.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,t.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${i.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},85492:(Q,I,e)=>{"use strict";e.d(I,{$:()=>d});var t=e(88838),n=e(96540),r=e(23257),s=e.n(r),o=e(21),m=e(40845);function i(c,g){return g.split(/;\s*/).reduce((u,E)=>{if(E==="color:rgba(0,0,0,0.5)")return{color:c.colors.text.secondary};const p=E.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const b=p[1].replace(/-([a-z])/g,(a,h)=>h.toUpperCase());u[b]=p[2]}return u},{})}class l extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(g,u){return g.value===u.prevValue?null:{chunks:t.Ay.parse(g.value).spans.map(p=>p.css?{style:i(g.theme,p.css),text:p.text}:{text:p.text}),prevValue:g.value}}render(){const{chunks:g}=this.state;return g.map((u,E)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:E,textToHighlight:u.text,searchWords:this.props.highlight.searchWords,findChunks:o.Oq,highlightClassName:this.props.highlight.highlightClassName}):u.text;return u.style?n.createElement("span",{key:E,style:u.style,"data-testid":"ansiLogLine"},p):p})}}const d=(0,m.cV)(l);d.displayName="LogMessageAnsi"},42785:(Q,I,e)=>{"use strict";e.d(I,{Q:()=>l});var t=e(96540),n=e(76885),r=e(71733),s=e(43127),o=e(29158),m=e(10534),i=e(2913);const l=t.memo(({logText:d,onOpenContext:c,onPermalinkClick:g,onPinLine:u,onUnpinLine:E,pinned:p,row:b,showContextToggle:a,styles:h,mouseIsOver:P,onBlur:y,getRowContextQuery:C})=>{const f=a?a(b):!1,D=(0,t.useCallback)(S=>{S.stopPropagation()},[]),T=(0,t.useCallback)(async S=>{if(S.stopPropagation(),C&&(S.nativeEvent.ctrlKey||S.nativeEvent.metaKey||S.nativeEvent.shiftKey)){const v=window.open("about:blank"),x=await C(b,void 0,!1);if(x&&v){const A=n.kM.renderUrl(r.I.assureBaseUrl(`${(0,i.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:x.datasource,queries:[x],range:(0,s.E2)()})});v.location=A;return}v?.close()}c(b)},[c,C,b]),M=(0,t.useCallback)(S=>{!S.currentTarget.contains(S.relatedTarget)&&y&&y()},[y]),O=(0,t.useCallback)(()=>d,[d]);return t.createElement("span",{className:`log-row-menu ${h.rowMenu}`,onClick:D,onBlur:M},p&&!P&&t.createElement(o.K,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>E&&E(b),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),P&&t.createElement(t.Fragment,null,f&&t.createElement(o.K,{size:"md",name:"gf-show-context",onClick:T,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),t.createElement(m.b,{className:h.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:O,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),p&&E&&t.createElement(o.K,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>E&&E(b),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!p&&u&&t.createElement(o.K,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>u&&u(b),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),g&&b.rowId!==void 0&&b.uid&&t.createElement(o.K,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>g(b),tabIndex:0})))});l.displayName="LogRowMenuCell"},40455:(Q,I,e)=>{"use strict";e.d(I,{S:()=>i,a:()=>c});var t=e(96540),n=e(23257),r=e.n(n),s=e(21),o=e(85492),m=e(42785);const i=1e5,l=({hasAnsi:g,entry:u,highlights:E,styles:p})=>{const b=E&&E.length>0&&E[0]&&E[0].length>0&&u.length<i,a=E??[];if(g){const h=b?{searchWords:a,highlightClassName:p.logsRowMatchHighLight}:void 0;return t.createElement(o.$,{value:u,highlight:h})}else if(b)return t.createElement(r(),{textToHighlight:u,searchWords:a,findChunks:s.Oq,highlightClassName:p.logsRowMatchHighLight});return t.createElement(t.Fragment,null,u)},d=(g,u)=>{if(u)try{return JSON.stringify(JSON.parse(g),void 0,2)}catch{return g}return g},c=t.memo(g=>{const{row:u,wrapLogMessage:E,prettifyLogMessage:p,showContextToggle:b,styles:a,onOpenContext:h,onPermalinkClick:P,onUnpinLine:y,onPinLine:C,pinned:f,mouseIsOver:D,onBlur:T,getRowContextQuery:M}=g,{hasAnsi:O,raw:S}=u,v=(0,t.useMemo)(()=>d(S,p),[S,p]),x=(0,t.useMemo)(()=>D||f,[D,f]);return t.createElement(t.Fragment,null,t.createElement("td",{className:a.logsRowMessage},t.createElement("div",{className:E?a.positionRelative:a.horizontalScroll},t.createElement("button",{className:`${a.logLine} ${a.positionRelative}`},t.createElement(l,{hasAnsi:O,entry:v,highlights:u.searchWords,styles:a})))),t.createElement("td",{className:`log-row-menu-cell ${a.logRowMenuCell}`},x&&t.createElement(m.Q,{logText:v,row:u,showContextToggle:b,getRowContextQuery:M,onOpenContext:h,onPermalinkClick:P,onPinLine:C,onUnpinLine:y,pinned:f,styles:a,mouseIsOver:D,onBlur:T})))});c.displayName="LogRowMessage"},14647:(Q,I,e)=>{"use strict";e.d(I,{k:()=>J});var t=e(32196),n=e(41811),r=e(96540),s=e(41987),o=e(52622),m=e(32264),i=e(40845),l=e(14110),d=e(38138),c=e(91002);const g=({x:G,y:ne,onClickFilterValue:te,onClickFilterOutValue:oe,selection:le,row:ue,close:Te})=>{const he=(0,r.useRef)(null),re=(0,i.of)(E);return(0,r.useEffect)(()=>{function Fe(Ee){Ee.key==="Escape"&&Te()}return document.addEventListener("keyup",Fe),()=>{document.removeEventListener("keyup",Fe)}},[Te]),te||oe?r.createElement("div",{className:re.menu,style:{top:ne,left:G}},r.createElement(d.W,{ref:he},r.createElement(d.W.Item,{label:"Copy selection",onClick:()=>{(0,c.Dk)(le,he),Te(),u("copy",le.length,ue.datasourceType)}}),te&&r.createElement(d.W.Item,{label:"Add as line contains filter",onClick:()=>{te(le,ue.dataFrame.refId),Te(),u("line_contains",le.length,ue.datasourceType)}}),oe&&r.createElement(d.W.Item,{label:"Add as line does not contain filter",onClick:()=>{oe(le,ue.dataFrame.refId),Te(),u("line_does_not_contain",le.length,ue.datasourceType)}}))):null};function u(G,ne,te){(0,l.rR)("grafana_explore_logs_popover_menu",{action:G,selectionLength:ne,datasourceType:te||"unknown"})}const E=G=>({menu:(0,t.css)({position:"fixed",zIndex:G.zIndex.modal})});class p{constructor(){this.seen=new Set,this.count=0}getKey(ne){this.count+=1;const te=`k_${ne}`;return this.seen.has(te)?`i_${this.count}`:(this.seen.add(te),te)}}var b=e(2543),a=e(72724),h=e(56034),P=e(14578),y=e(41260),C=e(10534),f=e(29158),D=e(14689),T=e(69147),M=e(3911);const O=G=>({logsStatsRow:(0,t.css)`
    label: logs-stats-row;
    margin: ${parseInt(G.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,t.css)`
    label: logs-stats-row--active;
    color: ${G.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,t.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,t.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,t.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${G.spacing(.75)};
  `,logsStatsRowPercent:(0,t.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${G.spacing(.75)};
    width: ${G.spacing(4.5)};
  `,logsStatsRowBar:(0,t.css)`
    label: logs-stats-row__bar;
    height: ${G.spacing(.5)};
    overflow: hidden;
    background: ${G.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,t.css)`
    label: logs-stats-row__innerbar;
    height: ${G.spacing(.5)};
    overflow: hidden;
    background: ${G.colors.primary.main};
  `}),S=({active:G,count:ne,proportion:te,value:oe})=>{const le=(0,i.of)(O),ue=`${Math.round(te*100)}%`,Te={width:ue},he=G?(0,t.cx)([le.logsStatsRow,le.logsStatsRowActive]):(0,t.cx)([le.logsStatsRow]);return r.createElement("div",{className:he},r.createElement("div",{className:(0,t.cx)([le.logsStatsRowLabel])},r.createElement("div",{className:(0,t.cx)([le.logsStatsRowValue]),title:oe},oe),r.createElement("div",{className:(0,t.cx)([le.logsStatsRowCount])},ne),r.createElement("div",{className:(0,t.cx)([le.logsStatsRowPercent])},ue)),r.createElement("div",{className:(0,t.cx)([le.logsStatsRowBar])},r.createElement("div",{className:(0,t.cx)([le.logsStatsRowInnerBar]),style:Te})))};S.displayName="LogLabelStatsRow";const v=5,x=(0,M.N)(G=>({logsStats:(0,t.css)`
      label: logs-stats;
      background: inherit;
      color: ${G.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,t.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${G.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,t.css)`
      label: logs-stats__title;
      font-weight: ${G.typography.fontWeightMedium};
      padding-right: ${G.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,t.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,t.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class A extends r.PureComponent{render(){const{label:ne,rowCount:te,stats:oe,value:le,theme:ue,isLabel:Te}=this.props,he=x(ue),re=oe.slice(0,v);let De=re.find(be=>be.value===le),Fe=oe.slice(v);const Ee=!De;Ee&&(De=Fe.find(be=>be.value===le),Fe=Fe.filter(be=>be.value!==le));const Me=Fe.reduce((be,pe)=>be+pe.count,0),xe=re.reduce((be,pe)=>be+pe.count,0)+Me,We=Me/xe;return r.createElement("div",{className:he.logsStats,"data-testid":"logLabelStats"},r.createElement("div",{className:he.logsStatsHeader},r.createElement("div",{className:he.logsStatsTitle},ne,": ",xe," of ",te," rows have that ",Te?"label":"field")),r.createElement("div",{className:he.logsStatsBody},re.map(be=>r.createElement(S,{key:be.value,...be,active:be.value===le})),Ee&&De&&r.createElement(S,{key:De.value,...De,active:!0}),Me>0&&r.createElement(S,{key:"__OTHERS__",count:Me,value:"Other",proportion:We})))}}const R=(0,i.cV)(A);R.displayName="LogLabelStats";var B=e(77020);const U=(0,n.A)(G=>({wordBreakAll:(0,t.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,t.css)`
      & > button {
        color: ${G.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${G.shape.radius.circle};
        height: ${G.spacing(G.components.height.sm)};
        width: ${G.spacing(G.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${G.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,t.css)`
      margin-left: ${G.spacing(1)};
    `,wrapLine:(0,t.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,t.css)`
      padding: 0 ${G.spacing(1)};
    `,logDetailsValue:(0,t.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      gap: ${G.spacing(.5)};
      margin-left: ${G.spacing(.5)};
    `}));class w extends r.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:ne,parsedKeys:te,row:oe}=this.props;ne&&ne(te[0]),(0,l.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:oe.datasourceType,logRowUid:oe.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:ne,parsedKeys:te,row:oe}=this.props;ne&&ne(te[0]),(0,l.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:oe.datasourceType,logRowUid:oe.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:ne,parsedKeys:te,parsedValues:oe,row:le}=this.props;return ne?await ne(te[0],oe[0],le.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:ne,parsedKeys:te,parsedValues:oe,row:le}=this.props;ne&&ne(te[0],oe[0],(0,T.f8)(le)||void 0),(0,l.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:le.datasourceType,filterType:"include",logRowUid:le.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:ne,parsedKeys:te,parsedValues:oe,row:le}=this.props;ne&&ne(te[0],oe[0],(0,T.f8)(le)||void 0),(0,l.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:le.datasourceType,filterType:"exclude",logRowUid:le.uid})},this.updateStats=()=>{const{getStats:ne}=this.props,te=ne(),oe=te?te.reduce((le,ue)=>le+ue.count,0):0;(!(0,b.isEqual)(this.state.fieldStats,te)||oe!==this.state.fieldCount)&&this.setState({fieldStats:te,fieldCount:oe})},this.showStats=()=>{const{isLabel:ne,row:te,app:oe}=this.props,{showFieldsStats:le}=this.state;le||this.updateStats(),this.toggleFieldsStats(),(0,l.rR)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:te.datasourceType,fieldType:ne?"label":"detectedField",type:le?"close":"open",logRowUid:te.uid,app:oe})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(ne=>({showFieldsStats:!ne.showFieldsStats}))}generateClipboardButton(ne){const{theme:te}=this.props,oe=U(te);return r.createElement("div",{className:`log-details-value-copy ${oe.copyButton}`},r.createElement(C.b,{getText:()=>ne,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(ne,te){return r.createElement("table",null,r.createElement("tbody",null,ne?.map((oe,le)=>r.createElement("tr",{key:`${oe}-${le}`},r.createElement("td",null,oe,te&&oe!==""&&this.generateClipboardButton(oe))))))}render(){const{theme:ne,parsedKeys:te,parsedValues:oe,isLabel:le,links:ue,displayedFields:Te,wrapLogMessage:he,onClickFilterLabel:re,onClickFilterOutLabel:De,disableActions:Fe,row:Ee}=this.props,{showFieldsStats:Me,fieldStats:ze,fieldCount:xe}=this.state,We=U(ne),be=(0,B.D)(ne),pe=te==null?!1:te.length===1,Ue=oe==null?!1:oe.length===1,we=!Fe&&re&&De,je=Ee.dataFrame?.refId?` in query ${Ee.dataFrame?.refId}`:"",He=!Ue&&oe!=null&&!oe.every(Je=>Je===""),rt=Te&&te!=null&&Te.includes(te[0])?r.createElement(f.K,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):r.createElement(f.K,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return r.createElement(r.Fragment,null,r.createElement("tr",{className:be.logDetailsValue},r.createElement("td",{className:be.logsDetailsIcon},r.createElement("div",{className:We.buttonRow},we&&r.createElement(r.Fragment,null,r.createElement(K,{name:"search-plus",onClick:this.filterLabel,isActive:()=>this.isFilterLabelActive(),tooltipSuffix:je}),r.createElement(f.K,{name:"search-minus",tooltip:`Filter out value${je}`,onClick:this.filterOutLabel})),!Fe&&Te&&rt,!Fe&&r.createElement(f.K,{variant:Me?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!pe,onClick:this.showStats}))),r.createElement("td",{className:be.logDetailsLabel},pe?te[0]:this.generateMultiVal(te)),r.createElement("td",{className:(0,t.cx)(We.wordBreakAll,he&&We.wrapLine)},r.createElement("div",{className:We.logDetailsValue},Ue?oe[0]:this.generateMultiVal(oe,!0),Ue&&this.generateClipboardButton(oe[0]),r.createElement("div",{className:(0,t.cx)((Ue||He)&&We.adjoiningLinkButton)},ue?.map((Je,Ve)=>r.createElement("span",{key:`${Je.title}-${Ve}`},r.createElement(D.R,{link:Je}))))))),Me&&pe&&Ue&&r.createElement("tr",null,r.createElement("td",null,r.createElement(f.K,{variant:Me?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),r.createElement("td",{colSpan:2},r.createElement("div",{className:We.logDetailsStats},r.createElement(R,{stats:ze,label:te[0],value:oe[0],rowCount:xe,isLabel:le})))))}}const K=({isActive:G,tooltipSuffix:ne,...te})=>{const[oe,le]=(0,r.useState)(!1),ue=oe?"Remove filter":"Filter for value";return(0,r.useEffect)(()=>{G().then(le)},[G]),r.createElement(f.K,{...te,variant:oe?"primary":void 0,tooltip:ue+ne})},N=(0,i.cV)(w);N.displayName="LogDetailsRow";var L=e(70377);class V extends r.PureComponent{render(){const{app:ne,row:te,theme:oe,hasError:le,onClickFilterOutLabel:ue,onClickFilterLabel:Te,getRows:he,showDuplicates:re,className:De,onClickShowField:Fe,onClickHideField:Ee,displayedFields:Me,getFieldLinks:ze,wrapLogMessage:xe,styles:We}=this.props,be=(0,B.L)(oe,te.logLevel),pe=te.labels?te.labels:{},Ue=Object.keys(pe).length>0,we=(0,L.jE)(te,ze);let je=we.filter(se=>se.links?.length);const He=je.filter(se=>se.fieldIndex!==te.entryFieldIndex).sort(),rt=je.filter(se=>se.fieldIndex===te.entryFieldIndex).sort(),Je=(0,L.qE)(rt),Ve=He&&He.length>0||Je&&Je.length>0,Oe=te.dataFrame.meta?.type===y.m.LogLines?[]:we.filter(se=>se.links?.length===0&&se.fieldIndex!==te.entryFieldIndex).sort(),Ne=Oe&&Oe.length>0,ye=le?"":`${be.logsRowLevelColor} ${We.logsRowLevel} ${We.logsRowLevelDetails}`;return r.createElement("tr",{className:(0,t.cx)(De,We.logDetails)},re&&r.createElement("td",null),r.createElement("td",{className:ye,"aria-label":"Log level"}),r.createElement("td",{colSpan:4},r.createElement("div",{className:We.logDetailsContainer},r.createElement("table",{className:We.logDetailsTable},r.createElement("tbody",null,(Ue||Ne)&&r.createElement("tr",null,r.createElement("td",{colSpan:100,className:We.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(pe).sort().map((se,ae)=>{const ge=pe[se];return r.createElement(N,{key:`${se}=${ge}-${ae}`,parsedKeys:[se],parsedValues:[ge],isLabel:!0,getStats:()=>(0,c.Tj)(he(),se),onClickFilterOutLabel:ue,onClickFilterLabel:Te,onClickShowField:Fe,onClickHideField:Ee,row:te,app:ne,wrapLogMessage:xe,displayedFields:Me,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Oe.map((se,ae)=>{const{keys:ge,values:Pe,fieldIndex:Re}=se;return r.createElement(N,{key:`${ge[0]}=${Pe[0]}-${ae}`,parsedKeys:ge,parsedValues:Pe,onClickShowField:Fe,onClickHideField:Ee,onClickFilterOutLabel:ue,onClickFilterLabel:Te,getStats:()=>(0,c.s2)(te.dataFrame.fields[Re].values),displayedFields:Me,wrapLogMessage:xe,row:te,app:ne,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Ve&&r.createElement("tr",null,r.createElement("td",{colSpan:100,className:We.logDetailsHeading,"aria-label":"Data Links"},"Links")),He.map((se,ae)=>{const{keys:ge,values:Pe,links:Re,fieldIndex:Be}=se;return r.createElement(N,{key:`${ge[0]}=${Pe[0]}-${ae}`,parsedKeys:ge,parsedValues:Pe,links:Re,onClickShowField:Fe,onClickHideField:Ee,getStats:()=>(0,c.s2)(te.dataFrame.fields[Be].values),displayedFields:Me,wrapLogMessage:xe,row:te,app:ne,disableActions:!1})}),Je?.map((se,ae)=>{const{keys:ge,values:Pe,links:Re,fieldIndex:Be}=se;return r.createElement(N,{key:`${ge[0]}=${Pe[0]}-${ae}`,parsedKeys:ge,parsedValues:Pe,links:Re,onClickShowField:Fe,onClickHideField:Ee,getStats:()=>(0,c.s2)(te.dataFrame.fields[Be].values),displayedFields:Me,wrapLogMessage:xe,row:te,app:ne,disableActions:!0})}),!Ne&&!Ue&&!Ve&&r.createElement("tr",null,r.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const F=(0,i.cV)(V);F.displayName="LogDetails";var z=e(93463),Y=e(40455),H=e(42785);const k=r.memo(G=>{const{row:ne,detectedFields:te,getFieldLinks:oe,wrapLogMessage:le,styles:ue,mouseIsOver:Te,pinned:he,...re}=G,De=le?"":ee.noWrap,Fe=(0,r.useMemo)(()=>(0,L.jE)(ne,oe),[oe,ne]),Ee=(0,r.useMemo)(()=>{let ze="";for(let xe=0;xe<te.length;xe++){const We=te[xe],be=Fe.find(pe=>{const{keys:Ue}=pe;return Ue[0]===We});be&&(ze+=` ${We}=${be.values}`),ne.labels[We]!==void 0&&ne.labels[We]!==null&&(ze+=` ${We}=${ne.labels[We]}`)}return ze.trimStart()},[te,Fe,ne.labels]),Me=(0,r.useMemo)(()=>Te||he,[Te,he]);return r.createElement(r.Fragment,null,r.createElement("td",{className:ue.logsRowMessage},r.createElement("div",{className:De},Ee)),r.createElement("td",{className:`log-row-menu-cell ${ue.logRowMenuCell}`},Me&&r.createElement(H.Q,{logText:Ee,row:ne,styles:ue,pinned:he,mouseIsOver:Te,...re})))}),ee={noWrap:(0,t.css)`
    white-space: nowrap;
  `};k.displayName="LogRowMessageDisplayedFields";class ie extends r.PureComponent{constructor(ne){super(ne),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,b.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=te=>{this.setState({showingContext:!0}),this.props.onOpenContext(te,this.debouncedContextClose)},this.onRowClick=te=>{this.props.handleTextSelection?.(te,this.props.row)||this.props.enableLogDetails&&((0,l.rR)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(oe=>({showDetails:!oe.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseMove=te=>{this.props.handleTextSelection&&document.getSelection()?.toString()&&te.buttons>0&&this.setState({mouseIsOver:!1})},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(te,oe=!1)=>{const{row:le,permalinkedRowId:ue,scrollIntoView:Te,containerRendered:he}=this.props;if(ue!==le.uid){(te.permalinked||oe)&&this.setState({permalinked:!1});return}!this.state.permalinked&&he&&this.logLineRef.current&&Te&&(Te(this.logLineRef.current),(0,l.rR)("grafana_explore_logs_permalink_opened",{datasourceType:le.datasourceType??"unknown",logRowUid:le.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,n.A)((te,oe)=>te.hasUnescapedContent&&oe?{...te,entry:(0,c.Hw)(te.entry),raw:(0,c.Hw)(te.raw)}:te),this.logLineRef=r.createRef()}renderTimeStamp(ne){return(0,a.LE)(ne,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(ne,te){this.scrollToLogRow(te)}render(){const{getRows:ne,onClickFilterLabel:te,onClickFilterOutLabel:oe,onClickShowField:le,onClickHideField:ue,enableLogDetails:Te,row:he,showDuplicates:re,showContextToggle:De,showLabels:Fe,showTime:Ee,displayedFields:Me,wrapLogMessage:ze,prettifyLogMessage:xe,theme:We,getFieldLinks:be,forceEscape:pe,app:Ue,styles:we,getRowContextQuery:je}=this.props,{showDetails:He,showingContext:rt,permalinked:Je}=this.state,Ve=(0,B.L)(We,he.logLevel),{errorMessage:Oe,hasError:Ne}=(0,c.Ei)(he),ye=(0,t.cx)(we.logsRow,{[we.errorLogRow]:Ne,[we.highlightBackground]:rt||Je}),se=(0,t.cx)(we.logsRow,{[we.errorLogRow]:Ne,[we.highlightBackground]:Je&&!this.state.showDetails}),ae=this.escapeRow(he,pe);return r.createElement(r.Fragment,null,r.createElement("tr",{ref:this.logLineRef,className:ye,onClick:this.onRowClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onFocus:this.onMouseEnter},re&&r.createElement("td",{className:we.logsRowDuplicates},ae.duplicates&&ae.duplicates>0?`${ae.duplicates+1}x`:null),r.createElement("td",{className:Ne?"":`${Ve.logsRowLevelColor} ${we.logsRowLevel}`},Ne&&r.createElement(h.m,{content:`Error: ${Oe}`,placement:"right",theme:"error"},r.createElement(P.I,{className:we.logIconError,name:"exclamation-triangle",size:"xs"}))),Te&&r.createElement("td",{title:He?"Hide log details":"See log details",className:we.logsRowToggleDetails},r.createElement(P.I,{className:we.topVerticalAlign,name:He?"angle-down":"angle-right"})),Ee&&r.createElement("td",{className:we.logsRowLocalTime},this.renderTimeStamp(he.timeEpochMs)),Fe&&ae.uniqueLabels&&r.createElement("td",{className:we.logsRowLabels},r.createElement(z.A,{labels:ae.uniqueLabels})),Me&&Me.length>0?r.createElement(k,{row:ae,showContextToggle:De,detectedFields:Me,getFieldLinks:be,wrapLogMessage:ze,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:we,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):r.createElement(Y.a,{row:ae,showContextToggle:De,getRowContextQuery:je,wrapLogMessage:ze,prettifyLogMessage:xe,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ue,styles:we,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&r.createElement(F,{className:se,showDuplicates:re,getFieldLinks:be,onClickFilterLabel:te,onClickFilterOutLabel:oe,onClickShowField:le,onClickHideField:ue,getRows:ne,row:ae,wrapLogMessage:ze,hasError:Ne,displayedFields:Me,app:Ue,styles:we,isFilterLabelActive:this.props.isFilterLabelActive}))}}const fe=(0,i.cV)(ie);fe.displayName="LogRow";const q=100;class Z extends r.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.logRowsRef=(0,r.createRef)(),this.state={renderAll:!1,selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}},this.openContext=(ne,te)=>{this.props.onOpenContext&&this.props.onOpenContext(ne,te)},this.handleSelection=(ne,te)=>{if(this.popoverMenuSupported()===!1)return!1;const oe=document.getSelection()?.toString();if(!oe||!this.logRowsRef.current)return!1;const le=270,ue=105,Te=ne.clientX+le>window.innerWidth?window.innerWidth-le:ne.clientX,he=ne.clientY+ue>window.innerHeight?window.innerHeight-ue:ne.clientY;return this.setState({selection:oe,popoverMenuCoordinates:{x:Te,y:he},selectedRow:te}),document.addEventListener("click",this.handleDeselection),document.addEventListener("contextmenu",this.handleDeselection),!0},this.handleDeselection=ne=>{if((0,c.a8)(ne.target)&&!this.logRowsRef.current?.contains(ne.target)){this.closePopoverMenu();return}document.getSelection()?.toString()},this.closePopoverMenu=()=>{document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.setState({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},this.makeGetRows=(0,n.A)(ne=>()=>ne),this.sortLogs=(0,n.A)((ne,te)=>(0,c.oR)(ne,te))}static{this.defaultProps={previewLimit:q}}popoverMenuSupported(){return!m.$.featureToggles.logRowsPopoverMenu||this.props.app!==s.Jk.Explore?!1:!!(this.props.onClickFilterOutValue||this.props.onClickFilterValue)}componentDidMount(){const{logRows:ne,previewLimit:te}=this.props,le=(ne?ne.length:0)<=te*2;le?this.setState({renderAll:le}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),document.removeEventListener("selectionchange",this.handleDeselection),this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:ne,logRows:te,dedupStrategy:oe,theme:le,logsSortOrder:ue,previewLimit:Te,...he}=this.props,{renderAll:re}=this.state,De=(0,B.D)(le),Fe=ne||te,Ee=te&&te.length>0,Me=Fe?Fe.reduce((je,He)=>He.duplicates?je+He.duplicates:je,0):0,ze=oe!==o.fY.none&&Me>0,xe=Fe||[],We=ue?this.sortLogs(xe,ue):xe,be=We.slice(0,Te),pe=We.slice(Te,We.length),Ue=this.makeGetRows(We),we=new p;return r.createElement("div",{className:De.logRows,ref:this.logRowsRef},this.state.selection&&this.state.selectedRow&&r.createElement(g,{close:this.closePopoverMenu,row:this.state.selectedRow,selection:this.state.selection,...this.state.popoverMenuCoordinates,onClickFilterValue:he.onClickFilterValue,onClickFilterOutValue:he.onClickFilterOutValue}),r.createElement("table",{className:(0,t.cx)(De.logsRowsTable,this.props.overflowingContent?"":De.logsRowsTableContain)},r.createElement("tbody",null,Ee&&be.map(je=>r.createElement(fe,{key:we.getKey(je.uid),getRows:Ue,row:je,showDuplicates:ze,logsSortOrder:ue,onOpenContext:this.openContext,styles:De,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===je.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...he})),Ee&&re&&pe.map(je=>r.createElement(fe,{key:we.getKey(je.uid),getRows:Ue,row:je,showDuplicates:ze,logsSortOrder:ue,onOpenContext:this.openContext,styles:De,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===je.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...he})),Ee&&!re&&r.createElement("tr",null,r.createElement("td",{colSpan:5},"Rendering ",We.length-Te," rows...")))))}}const J=(0,i.cV)(Z);J.displayName="LogsRows"},77020:(Q,I,e)=>{"use strict";e.d(I,{D:()=>l,L:()=>i});var t=e(32196),n=e(41811),r=e(84140),s=e(9557),o=e(23596),m=e(16797);const i=(d,c)=>{let g=d.isLight?d.v1.palette.gray5:d.v1.palette.gray2;switch(c){case s.$b.crit:case s.$b.critical:g="#705da0";break;case s.$b.error:case s.$b.err:g="#e24d42";break;case s.$b.warning:case s.$b.warn:g=d.colors.warning.main;break;case s.$b.info:g="#7eb26d";break;case s.$b.debug:g="#1f78c1";break;case s.$b.trace:g="#6ed0e0";break}return{logsRowLevelColor:(0,t.css)`
      &::after {
        background-color: ${g};
      }
    `}},l=(0,n.A)(d=>{const c=m.hoverColor(d.colors.background.secondary,d),g=(0,r.A)(d.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:(0,t.css)`
      label: logs-row__level;
      max-width: ${d.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${d.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,t.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${d.components.textHighlight.text}
      background-color: ${d.components.textHighlight};
    `,logRows:(0,t.css)({position:"relative"}),logsRowsTable:(0,t.css)`
      label: logs-rows;
      font-family: ${d.typography.fontFamilyMonospace};
      font-size: ${d.typography.bodySmall.fontSize};
      width: 100%;
      position: relative;
    `,logsRowsTableContain:(0,t.css)`
      contain: strict;
    `,highlightBackground:(0,t.css)`
      background-color: ${(0,r.A)(d.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,t.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${c};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${d.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,t.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,t.css)`
      color: ${d.colors.warning.main};
    `,logsRowToggleDetails:(0,t.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,t.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,t.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,t.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,t.css)`
      padding: 0 0 0 ${d.spacing(.5)};
      height: ${d.spacing(3)};
      width: ${d.spacing(3.25)};
      line-height: ${d.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${o.alpha(d.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,t.css)`
      label: logs-row-details-table;
      border: 1px solid ${d.colors.border.medium};
      padding: 0 ${d.spacing(1)} ${d.spacing(1)};
      border-radius: ${d.shape.radius.default};
      margin: ${d.spacing(2.5)} ${d.spacing(1)} ${d.spacing(2.5)} ${d.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,t.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,t.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${d.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${d.spacing(.75)};
    `,logDetailsLabel:(0,t.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${d.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,t.css)`
      label: logs-row-details__heading;
      font-weight: ${d.typography.fontWeightBold};
      padding: ${d.spacing(1)} 0 ${d.spacing(.5)};
    `,logDetailsValue:(0,t.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${c};
      }
    `,topVerticalAlign:(0,t.css)`
      label: topVerticalAlign;
      margin-top: -${d.spacing(.9)};
      margin-left: -${d.spacing(.25)};
    `,detailsOpen:(0,t.css)`
      &:hover {
        background-color: ${m.hoverColor(d.colors.background.primary,d)};
      }
    `,errorLogRow:(0,t.css)`
      label: erroredLogRow;
      color: ${d.colors.text.secondary};
    `,positionRelative:(0,t.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,t.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${g};
      display: inherit;
    `,horizontalScroll:(0,t.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,t.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,t.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${d.colors.background.primary};
      box-shadow: ${d.shadows.z3};
      padding: ${d.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${d.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,t.css)`
      position: sticky;
      z-index: ${d.zIndex.dropdown};
      margin-top: -${d.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,t.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${d.typography.fontFamilyMonospace};
      font-size: ${d.typography.bodySmall.fontSize};
      letter-spacing: ${d.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,t.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,t.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${d.colors.background.primary};
      }
    `,visibleRowMenu:(0,t.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,t.css)`
      label: linkButton;
      > button {
        padding-top: ${d.spacing(.5)};
      }
    `,hidden:(0,t.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,t.css)`
      height: ${d.spacing(3)};
      line-height: ${d.spacing(2.5)};
    `}})},81166:(Q,I,e)=>{"use strict";e.d(I,{V:()=>B});var t=e(32196),n=e(2543),r=e(96540),s=e(16817),o=e(39070),m=e(52622),i=e(9557),l=e(47232),d=e(14110),c=e(32264),g=e(40845),u=e(37390),E=e(55852),p=e(33390),b=e(97186),a=e(29436),h=e(31678),P=e(69147),y=e(91002),C=e(81073),f=e(14647),D=e(15292);function T(U){return{buttons:(0,t.css)({display:"flex",gap:U.spacing(1)})}}const M=U=>{const w=(0,g.of)(T),{wrapLines:K,onChangeWrapLines:N,onScrollCenterClick:L}=U,V=(0,r.useCallback)(F=>{const z=F.currentTarget.checked;(0,d.rR)("grafana_explore_logs_log_context_toggle_lines_clicked",{state:z}),N(z)},[N]);return r.createElement("div",{className:w.buttons},r.createElement(D.K,{showLabel:!0,value:K,onChange:V,label:"Wrap lines"}),r.createElement(E.$n,{variant:"secondary",onClick:L},"Center matched line"))},O=U=>({modal:(0,t.css)`
      width: 85vw;
      ${U.breakpoints.down("md")} {
        width: 100%;
      }
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    `,sticky:(0,t.css)`
      position: sticky;
      z-index: 1;
      top: -1px;
      bottom: -1px;
    `,entry:(0,t.css)`
      & > td {
        padding: ${U.spacing(1)} 0 ${U.spacing(1)} 0;
      }
      background: ${U.colors.emphasize(U.colors.background.secondary)};

      & > table {
        margin-bottom: 0;
      }

      & .log-row-menu {
        margin-top: -6px;
      }
    `,datasourceUi:(0,t.css)`
      padding-bottom: ${U.spacing(1.25)};
      display: flex;
      align-items: center;
    `,logRowGroups:(0,t.css)`
      overflow: auto;
      max-height: 75%;
      align-self: stretch;
      display: inline-block;
      border: 1px solid ${U.colors.border.weak};
      border-radius: ${U.shape.radius.default};
      & > table {
        min-width: 100%;
      }
    `,flexColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: 0 ${U.spacing(3)} ${U.spacing(3)} ${U.spacing(3)};
    `,flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      & > div:last-child {
        margin-left: auto;
      }
    `,noMarginBottom:(0,t.css)`
      & > table {
        margin-bottom: 0;
      }
    `,hidden:(0,t.css)`
      display: none;
    `,paddingTop:(0,t.css)`
      padding-top: ${U.spacing(1)};
    `,paddingBottom:(0,t.css)`
      padding-bottom: ${U.spacing(1)};
    `,link:(0,t.css)`
      color: ${U.colors.text.secondary};
      font-size: ${U.typography.bodySmall.fontSize};
      :hover {
        color: ${U.colors.text.link};
      }
    `,loadingCell:(0,t.css)`
      position: sticky;
      left: 50%;
      display: inline-block;
      transform: translateX(-50%);
    `}),S=()=>({above:{loadingState:o.Gu.NotStarted,rows:[]},below:{loadingState:o.Gu.NotStarted,rows:[]}}),v=(U,w)=>U==="above"&&w===m.uH.Descending||U==="below"&&w===m.uH.Ascending?i.ZF.Forward:i.ZF.Backward,x=(U,w)=>({...U,dataFrame:{...U.dataFrame,refId:`context_${w.above}_${w.below}`}}),A=(U,w)=>U.some(K=>K.entry===w.entry&&K.timeEpochNs===w.timeEpochNs),R=100,B=({row:U,open:w,logsSortOrder:K,timeZone:N,getLogRowContextUi:L,getRowContextQuery:V,onClose:F,getRowContext:z})=>{const Y=(0,r.useRef)(null),H=(0,r.useRef)(null),k=(0,r.useRef)(null),ee=(0,r.useRef)(null),ie=(0,r.useRef)(null),fe=(0,r.useRef)(null),q=(0,r.useRef)(null),Z=(0,r.useRef)({above:0,below:0}),J=(0,h.useDispatch)(),G=(0,g.$j)(),ne=O(G),[te,oe]=(0,r.useState)(!0),[le,ue]=(0,r.useState)(S()),Te=(Oe,Ne)=>{ue(ye=>{const se={...ye};return se[Oe]=Ne(ye[Oe]),se})},he=(0,r.useRef)(1),[re,De]=(0,r.useState)(null),[Fe,Ee]=(0,r.useState)(p.A.getBool(b.$.logContextWrapLogMessage,p.A.getBool(b.$.wrapLogMessage,!0))),Me=(0,r.useCallback)(()=>{const{below:Oe,above:Ne}=le,ye=(0,y.oR)([...Oe.rows,U,...Ne.rows],m.uH.Ascending),se=ye[0].timeEpochMs;let ae=ye[ye.length-1].timeEpochMs;se===ae&&(ae+=1);const ge=(0,l.KQ)(se),Pe=(0,l.KQ)(ae);return{from:ge,to:Pe,raw:{from:ge,to:Pe}}},[le,U]),ze=(0,r.useCallback)(async()=>{const Oe=V?await V(U):null;De(Oe)},[U,V]),xe=async()=>{await ze(),ue(S()),Z.current={above:0,below:0},he.current+=1},We=async(Oe,Ne)=>{Z.current[Oe]+=1;const ye=Ne.at(Oe==="above"?0:-1);if(ye==null)throw new Error("should never happen. the array always contains at least 1 item (the middle row)");(0,d.rR)("grafana_explore_logs_log_context_load_more_called",{datasourceType:ye.datasourceType,above:Z.current.above,below:Z.current.below});const se=v(Oe,K),ae=await z(x(ye,Z.current),{limit:R,direction:se}),ge=(0,P.HT)(ae.data).rows;return K===m.uH.Ascending&&ge.reverse(),ge.filter(Re=>!A(Ne,Re))};(0,r.useEffect)(()=>{w&&ze()},[ze,w]);const[be,pe]=(0,r.useState)([]),Ue=Oe=>{be.indexOf(Oe)===-1&&pe([...be,Oe])},we=Oe=>{const Ne=be.indexOf(Oe);Ne>-1&&(be.splice(Ne,1),pe([...be]))},je=async Oe=>{const{below:Ne,above:ye}=le;if(le[Oe].loadingState===o.Gu.Loading)return;Te(Oe,ge=>({...ge,loadingState:o.Gu.Loading}));const ae=he.current;try{const ge=[...ye.rows,U,...Ne.rows],Pe=(await We(Oe,ge)).map(tt=>!tt.searchWords||!tt.searchWords?.length?{...tt,searchWords:U.searchWords}:tt),[Re,Be]=(0,n.partition)(Pe,tt=>tt.timeEpochNs>U.timeEpochNs),_e=K===m.uH.Ascending?Be:Re,Xe=K===m.uH.Ascending?Re:Be;ae===he.current&&ue(tt=>{const at=_e.length>0?(0,y.oR)([..._e,...tt.above.rows],K):tt.above.rows,st=Xe.length>0?(0,y.oR)([...tt.below.rows,...Xe],K):tt.below.rows;return{above:{rows:at,loadingState:Oe==="above"?Pe.length===0?o.Gu.Done:o.Gu.NotStarted:tt.above.loadingState},below:{rows:st,loadingState:Oe==="below"?Pe.length===0?o.Gu.Done:o.Gu.NotStarted:tt.below.loadingState}}})}catch{Te(Oe,ge=>({rows:ge.rows,loadingState:o.Gu.Error}))}},He=async(Oe,Ne)=>{for(const ye of Oe){if(!ye.isIntersecting)continue;const se=ye.target;se===fe.current?je("above"):se===q.current&&je("below")}};(0,r.useEffect)(()=>{const Oe=Y.current,Ne=fe.current,ye=q.current;if(Oe==null)return;const se=new IntersectionObserver(He,{root:Oe});return Ne!=null&&se.observe(Ne),ye!=null&&se.observe(ye),()=>{se.disconnect()}});const rt=(0,r.useCallback)(()=>{k.current?.scrollIntoView({block:"center"}),H.current?.scrollIntoView({block:"center"})},[k,H]);(0,r.useLayoutEffect)(()=>{const Oe=Y.current;if(Oe==null)return;const Ne=ie.current,ye=Oe.clientHeight;if(ie.current=ye,Ne!==ye){rt();return}if(Z.current.above<=1&&Z.current.below<=1){rt();return}const se=ee.current,ae=Oe.scrollHeight;if(ee.current=ae,se!=null){const ge=Oe.scrollTop+(ae-se);Oe.scrollTop=ge}},[le.above.rows,rt]),(0,s.A)(ze,[V,U]);const Je=le.above.loadingState,Ve=le.below.loadingState;return r.createElement(u.a,{isOpen:w,title:"Log context",contentClassName:ne.flexColumn,className:ne.modal,onDismiss:F},c.$.featureToggles.logsContextDatasourceUi&&L&&r.createElement("div",{className:ne.datasourceUi},L(U,xe)),r.createElement("div",{className:(0,t.cx)(ne.flexRow,ne.paddingBottom)},r.createElement("div",null,r.createElement(M,{wrapLines:Fe,onChangeWrapLines:Ee,onScrollCenterClick:rt}))),r.createElement("div",{ref:Y,className:ne.logRowGroups},r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:ne.loadingCell},Je!==o.Gu.Done&&Je!==o.Gu.Error&&r.createElement("div",{ref:fe},r.createElement(C.I,{adjective:"newer"})),Je===o.Gu.Error&&r.createElement("div",null,"Error loading log more logs."),Je===o.Gu.Done&&r.createElement("div",null,"No more logs available."))),r.createElement("tr",null,r.createElement("td",{className:ne.noMarginBottom},r.createElement(f.k,{logRows:le.above.rows,dedupStrategy:m.fY.none,showLabels:p.A.getBool(b.$.showLabels,!1),showTime:p.A.getBool(b.$.showTime,!0),wrapLogMessage:Fe,prettifyLogMessage:p.A.getBool(b.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:N,displayedFields:be,onClickShowField:Ue,onClickHideField:we}))),r.createElement("tr",{ref:k}),r.createElement("tr",{ref:H,className:(0,t.cx)(ne.entry,te?ne.sticky:null),"data-testid":"entry-row"},r.createElement("td",{className:ne.noMarginBottom},r.createElement(f.k,{logRows:[U],dedupStrategy:m.fY.none,showLabels:p.A.getBool(b.$.showLabels,!1),showTime:p.A.getBool(b.$.showTime,!0),wrapLogMessage:Fe,prettifyLogMessage:p.A.getBool(b.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:N,displayedFields:be,onClickShowField:Ue,onClickHideField:we,onUnpinLine:()=>oe(!1),onPinLine:()=>oe(!0),pinnedRowId:te?U.uid:void 0,overflowingContent:!0}))),r.createElement("tr",null,r.createElement("td",null,r.createElement(r.Fragment,null,r.createElement(f.k,{logRows:le.below.rows,dedupStrategy:m.fY.none,showLabels:p.A.getBool(b.$.showLabels,!1),showTime:p.A.getBool(b.$.showTime,!0),wrapLogMessage:Fe,prettifyLogMessage:p.A.getBool(b.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:N,displayedFields:be,onClickShowField:Ue,onClickHideField:we})))),r.createElement("tr",null,r.createElement("td",{className:ne.loadingCell},Ve!==o.Gu.Done&&Ve!==o.Gu.Error&&r.createElement("div",{ref:q},r.createElement(C.I,{adjective:"older"})),Ve===o.Gu.Error&&r.createElement("div",null,"Error loading log more logs."),Ve===o.Gu.Done&&r.createElement("div",null,"No more logs available.")))))),r.createElement(u.a.ButtonRow,null,re?.datasource?.uid&&r.createElement(E.$n,{variant:"secondary",onClick:async()=>{let Oe=U.uid;U.dataFrame.refId&&(Oe=U.uid.replace(U.dataFrame.refId,re.refId)),J((0,a.ve)({queries:[re],range:Me(),datasourceUid:re.datasource.uid,panelsState:{logs:{id:Oe}}})),F(),(0,d.rR)("grafana_explore_logs_log_context_open_split_view_clicked",{datasourceType:U.datasourceType,logRowUid:U.uid})}},"Open in split view")))}},70377:(Q,I,e)=>{"use strict";e.d(I,{FE:()=>i,jE:()=>o,qE:()=>m});var t=e(2543),n=e.n(t),r=e(87490),s=e(98101);const o=(g,u)=>i(g,u),m=g=>{let u=[];return g.forEach(E=>{E.links?.forEach(p=>{if(p.variables){const b=p.variables.map(h=>{const P=h.variableName,y=h.fieldPath?`.${h.fieldPath}`:"";return`${P}${y}`}),a=p.variables.map(h=>h.found?h.value:"");u.push({keys:b,values:a,links:[p],fieldIndex:E.fieldIndex})}})}),u},i=(g,u)=>c(g).map(p=>{const b=u?u(p,g.rowIndex,g.dataFrame):[],a=p.values[g.rowIndex],h=typeof a=="string"||typeof a=="number"?a.toString():(0,r.MA)(a);return{keys:[p.name],values:[h],links:b,fieldIndex:p.index}});function l(g,u){const E=(0,s.O)(g);if(E===null)return new Set;const p=new Set(E.extraFields.map(b=>b.index));return E.severityField!==null&&p.add(E.severityField.index),u.keepBody&&p.add(E.bodyField.index),u.keepTimestamp&&p.add(E.timeField.index),p}function d(g,u){const E=g.fields.map((h,P)=>({...h,index:P})),p=l(g,u??{}),[b,a]=partition(E,h=>h.config.custom?.hidden?!1:(h.config.links??[]).length>0?!0:p.has(h.index));return{visible:b,hidden:a}}function c(g,u){const E=g.dataFrame,p=l(E,u??{}),b=[];for(let a=0;a<E.fields.length;a++){const h=E.fields[a];h.values[g.rowIndex]!=null&&(h.config.custom?.hidden||(h.config.links&&h.config.links.length>0||p.has(a))&&b.push({...h,index:a}))}return b}},98101:(Q,I,e)=>{"use strict";e.d(I,{n:()=>E,O:()=>b});var t=e(85404),n=e(11261),r=e(41260);function s(a,h){const P=a.labels;if(P!==void 0){const y=new Array(h);return y.fill(P),y}else return null}function o(a,h,P){const y=a.getFieldByName("labels");if(y!==void 0&&y.type===n.PU.other){const C=y.values.map(E);return[y,()=>C]}else return[null,()=>s(h,P.length)]}function m(a){const h=new t.L(a),P=h.getFirstFieldOfType(n.PU.time),y=h.getFirstFieldOfType(n.PU.string);if(P===void 0||y===void 0)return null;const C=h.getFieldByName("tsNs")??null,f=h.getFieldByName("level")??null,D=h.getFieldByName("id")??null,[T,M]=o(h,y,a),O=h.fields.filter((S,v)=>v!==P.index&&v!==y.index&&v!==C?.index&&v!==f?.index&&v!==D?.index&&v!==T?.index);return{timeField:P,bodyField:y,timeNanosecondField:C,severityField:f,idField:D,getLogFrameLabels:M,getLogFrameLabelsAsLabels:M,getLabelFieldName:()=>T?.name??null,extraFields:O}}function i(a,h,P){const y=a.getFieldByName(h);if(y!==void 0)return y.type===P?y:void 0}const l="timestamp",d="body",c="severity",g="id",u="labels";function E(a){const h={};return Object.entries(a).forEach(([P,y])=>{h[P]=typeof y=="string"?y:JSON.stringify(y)}),h}function p(a){const h=new t.L(a),P=i(h,l,n.PU.time),y=i(h,d,n.PU.string);if(P===void 0||y===void 0)return null;const C=i(h,c,n.PU.string)??null,f=i(h,g,n.PU.string)??null,D=i(h,u,n.PU.other)??null,T=D===null?null:D.values,M=h.fields.filter((O,S)=>S!==P.index&&S!==y.index&&S!==C?.index&&S!==f?.index&&S!==D?.index);return{timeField:P,bodyField:y,severityField:C,idField:f,getLogFrameLabels:()=>T,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>T!==null?T.map(E):null,getLabelFieldName:()=>D!==null?D.name:null,extraFields:M}}function b(a){return a.meta?.type===r.m.LogLines?p(a):m(a)}},69147:(Q,I,e)=>{"use strict";e.d(I,{yR:()=>S,HT:()=>Y,M0:()=>N,ct:()=>L,O6:()=>z,f8:()=>le,J9:()=>V,Wr:()=>te,sg:()=>ne});var t=e(2543),n=e(88483),r=e(50832),s=e(65474),o=e(9557),m=e(52622),i=e(14236),l=e(85404),d=e(11261),c=e(24293),g=e(47232),u=e(8249),E=e(40672),p=e(72724),b=e(65879),a=e(39070),h=e(26517),P=e(32264),y=e(24284),C=e(88838),f=e(2913);function D(ue,Te){return f.Ay.bootData?.user?.lightTheme?Te:ue}var T=e(98101),M=e(91002);const O="Line limit",S="Common labels",v={[o.$b.critical]:y.Tj[7],[o.$b.warning]:y.Tj[1],[o.$b.error]:y.Tj[4],[o.$b.info]:y.Tj[0],[o.$b.debug]:y.Tj[5],[o.$b.trace]:y.Tj[2],[o.$b.unknown]:D("#8e8e8e","#bdc4cd")},x=1,A=1e3*x,R=60*A,B=60*R,U=24*B,w=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function K(ue,Te,he){switch(he){case m.fY.exact:return ue.entry.replace(w,"")===Te.entry.replace(w,"");case m.fY.numbers:return ue.entry.replace(/\d/g,"")===Te.entry.replace(/\d/g,"");case m.fY.signature:return ue.entry.replace(/\w/g,"")===Te.entry.replace(/\w/g,"");default:return!1}}function N(ue,Te){return Te===m.fY.none?ue:ue.reduce((he,re,De)=>{const Fe={...re},Ee=he[he.length-1];return De>0&&K(re,Ee,Te)?Ee.duplicates++:(Fe.duplicates=0,he.push(Fe)),he},[])}function L(ue,Te){return Te.size===0?ue:ue.filter(he=>!Te.has(he.logLevel))}function V(ue,Te){const he={},re=[];for(const De of ue){let Fe=he[De.logLevel];Fe||(he[De.logLevel]=Fe={lastTs:null,datapoints:[],target:De.logLevel,color:v[De.logLevel]},re.push(Fe));const Ee=Math.floor(De.timeEpochMs/Te)*Te;Ee===Fe.lastTs?Fe.datapoints[Fe.datapoints.length-1][0]++:(Fe.datapoints.push([1,Ee]),Fe.lastTs=Ee);for(const Me of re)Me!==Fe&&Me.lastTs!==Ee&&(Me.datapoints.push([0,Ee]),Me.lastTs=Ee)}return re.map((De,Fe)=>{De.datapoints.sort((xe,We)=>xe[1]-We[1]);const Ee=(0,i.Vc)(De),ze=new l.L(Ee).getFirstFieldOfType(d.PU.number);return Ee.fields[ze.index].config.min=0,Ee.fields[ze.index].config.decimals=0,Ee.fields[ze.index].config.color={mode:c.Y.Fixed,fixedColor:De.color},Ee.fields[ze.index].config.custom={drawStyle:m.GR.Bars,barAlignment:m.Nj.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:De.color,pointColor:De.color,fillColor:De.color,lineWidth:0,fillOpacity:100,stacking:{mode:m.gs.Normal,group:"A"}},Ee})}function F(ue){return ue.fields.some(Te=>Te.type===d.PU.time)&&ue.fields.some(Te=>Te.type===d.PU.string)}const z="infinite-scroll-";function Y(ue,Te,he,re){let De=!1;re=re?.map(Me=>Me.refId.includes(z)?(De=!0,{...Me,refId:Me.refId.replace(z,"")}):Me),De&&(ue=ue.map(Me=>({...Me,refId:Me.refId?.replace(z,"")})));const{logSeries:Fe}=k(ue),Ee=ie(Fe,re,De);if(Ee){if(Te&&Ee.rows.length>0){const Me=Ee.rows.sort(M.M1),{visibleRange:ze,bucketSize:xe,visibleRangeMs:We,requestedRangeMs:be}=H(Me,Te,he);Ee.visibleRange=ze,Ee.bucketSize=xe,Ee.series=V(Me,xe),Ee.meta&&(Ee.meta=fe(Ee,We,be))}else Ee.series=[];return Ee.queries=re,Ee}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:re}}function H(ue,Te,he,re=20,De=1e3){let Fe=he,Ee=Te,Me=Math.max(Ee*re,De),ze,xe;if(he){const We=ue[0].timeEpochMs;if(xe=he.to-he.from,ze=he.to-We,ze>0){const be=ze/xe;Ee*=be,Me=Math.max(Math.ceil(Ee*re),De),Fe={from:Math.floor(We/Me)*Me,to:he.to}}else ze=1}return{bucketSize:Me,visibleRange:Fe,visibleRangeMs:ze,requestedRangeMs:xe}}function k(ue){const Te=[],he=[];for(const re of ue){if(F(re)||!re.fields.length){he.push(re);continue}re.length>0&&Te.push(re)}return{logSeries:he,metricSeries:Te}}function ee(ue,Te,he){const re=ue.values[he],Fe=(0,g.yT)(re).valueOf();if(Te)return{ts:re,timeEpochMs:Fe,timeEpochNs:Te.values[he]};if(ue.nanos!==void 0){const Ee=ue.nanos[he].toString().padStart(6,"0"),Me=`${Fe}${Ee}`;return{ts:re,timeEpochMs:Fe,timeEpochNs:Me}}return{ts:re,timeEpochMs:Fe,timeEpochNs:Fe+"000000"}}function ie(ue,Te=[],he=!1){if(ue.length===0)return;const re=[];let De=[];const Fe=ue.filter(Je=>Je.fields.length);Fe.length&&Fe.forEach(Je=>{const Ve=(0,T.O)(Je);if(Ve!=null){const Oe=Ve.getLogFrameLabelsAsLabels()??void 0,Ne={rawFrame:Je,logsFrame:Ve,frameLabels:Oe};De.push(Ne),Oe&&Oe.length>0&&re.push(Oe)}});const Ee=re.flat(),Me=Ee.length>0?(0,u.yO)(Ee):{};let ze=[],xe=!1;const We=(0,M.kA)();for(const Je of De){const{logsFrame:Ve,rawFrame:Oe,frameLabels:Ne}=Je,{timeField:ye,timeNanosecondField:se,bodyField:ae,severityField:ge,idField:Pe}=Ve;for(let Re=0;Re<Oe.length;Re++){const{ts:Be,timeEpochMs:_e,timeEpochNs:Xe}=ee(ye,se??void 0,Re),tt=ae.values[Re]??"",at=typeof tt=="string"?tt:JSON.stringify(tt),st=E.sQ.hasAnsiCodes(at),dt=!!at.match(/\\n|\\t|\\r/),ot=Oe.meta?.custom?.searchWords??Oe.meta?.searchWords??[],ft=st?C.DB.strip(at):at,yt=Ne?.[Re],Tt=(0,u.s6)(yt,Me);Object.keys(Tt).length>0&&(xe=!0);let Kt=o.$b.unknown;const Gt=ge&&ge.values[Re]||yt&&yt.level;Gt?Kt=(0,M.EK)(Gt):Kt=(0,M.XM)(ft);const _t=Te.find(Mt=>Mt.refId===Oe.refId)?.datasource?.type,it={entryFieldIndex:ae.index,rowIndex:Re,dataFrame:Oe,logLevel:Kt,timeFromNow:(0,p.fq)(Be),timeEpochMs:_e,timeEpochNs:Xe,timeLocal:(0,p.LE)(Be,{timeZone:"browser"}),timeUtc:(0,p.LE)(Be,{timeZone:"utc"}),uniqueLabels:Tt,hasAnsi:st,hasUnescapedContent:dt,searchWords:ot,entry:ft,raw:at,labels:yt||{},uid:`${Oe.refId}_${Pe?Pe.values[Re]:Re.toString()}`,datasourceType:_t};Pe!==null&&(it.rowId=Pe.values[Re]),!(he&&We(it))&&ze.push(it)}}const be=[];(0,t.size)(Me)>0&&be.push({label:S,value:Me,kind:o.tG.LabelsMap});const Ue=ue.filter(Je=>Je?.meta?.custom?.limit??Je?.meta?.limit).reduce((Je,Ve)=>(Je[Ve.refId??""]=Ve.meta?.custom?.limit??Ve.meta?.limit??0,Je),{}),we=Object.values(Ue).reduce((Je,Ve)=>Je+=Ve,0);we>0&&be.push({label:O,value:we,kind:o.tG.Number});let je=0;const He={};let rt=!1;for(const Je of ue){const Ve=Je.meta?.custom?.lokiQueryStatKey,{refId:Oe}=Je;if(!rt&&Je.meta?.custom?.error&&(be.push({label:"",value:Je.meta?.custom.error,kind:o.tG.Error}),rt=!0),Oe&&!He[Oe]){if(Ve&&Je.meta?.stats){const Ne=Je.meta.stats.find(ye=>ye.displayName===Ve);Ne&&(je+=Ne.value)}He[Oe]=!0}}if(je>0){const{text:Je,suffix:Ve}=(0,h.rT)("B")(je);be.push({label:"Total bytes processed",value:`${Je} ${Ve}`,kind:o.tG.String})}return{hasUniqueLabels:xe,meta:be,rows:ze}}function fe(ue,Te,he){if(!ue.meta)return[];let re=[...ue.meta];const De=re.findIndex(Ee=>Ee.label===O),Fe=De>=0&&re[De]?.value;if(Fe&&typeof Fe=="number"&&Fe>0){let Ee;if(Fe===ue.rows.length&&Te&&he){const Me=(Te/he*100).toFixed(2);Ee=`${Fe} reached, received logs cover ${Me}% (${b.msRangeToTimeString(Te)}) of your selected time range (${b.msRangeToTimeString(he)})`}else{const Me=P.$.featureToggles.logsInfiniteScrolling?"displayed":"returned";Ee=`${Fe} (${ue.rows.length} ${Me})`}re[De]={label:O,value:Ee,kind:o.tG.String}}return re}function q(ue,Te){const he=Te&&ue===o.$b.unknown?"logs":ue,re=v[ue];return{displayNameFromDS:he,color:{mode:c.Y.Fixed,fixedColor:re},custom:{drawStyle:m.GR.Bars,barAlignment:m.Nj.Center,lineColor:re,pointColor:re,fillColor:re,lineWidth:1,fillOpacity:100,stacking:{mode:m.gs.Normal,group:"A"}}}}const Z=(ue,Te,he)=>(ue.fields=ue.fields.map(re=>(re.type===d.PU.number&&(re.config={...re.config,...q(Te(ue),he)}),re)),ue);function J(ue){let Te;try{Te=new l.L(ue).getFirstFieldOfType(d.PU.number)}catch{}return Te?.labels?G(Te.labels):o.$b.unknown}function G(ue){const Te=ue.level??ue.lvl??ue.loglevel??"";return Te?(0,M.EK)(Te):o.$b.unknown}function ne(ue,Te,he){const re=Te.range,De=he.targets,Fe=J,Ee=re.to.valueOf()-re.from.valueOf(),Me=oe(Te.scopedVars,Ee);return Te.interval=Me.interval,Te.scopedVars.__interval={value:Me.interval,text:Me.interval},Me.intervalMs!==void 0&&(Te.intervalMs=Me.intervalMs,Te.scopedVars.__interval_ms={value:Me.intervalMs,text:Me.intervalMs}),Te.hideFromInspector=!0,new n.c(ze=>{let xe=[];ze.next({state:a.Gu.Loading,error:void 0,data:[]});const We=ue.query(Te),pe=((0,r.A)(We)?We:(0,s.H)(We)).subscribe({complete:()=>{ze.complete()},next:Ue=>{const{error:we}=Ue;if(we!==void 0)ze.next({state:a.Gu.Error,error:we,data:[]}),ze.error(we);else{const je=(0,t.groupBy)(Ue.data,"refId");xe=Ue.data.map(He=>{if(He.meta?.dataTopic===m.QR.Annotations)return He;let rt=He.refId||"";rt.startsWith("log-volume-")&&(rt=rt.substr(11));const Je={logsVolumeType:o.Aj.FullRange,absoluteRange:{from:re.from.valueOf(),to:re.to.valueOf()},datasourceName:ue.name,sourceQuery:De.find(Ve=>Ve.refId===rt)};return He.meta={...He.meta,custom:{...He.meta?.custom,...Je}},Z(He,Fe,je[He.refId].length===1)}),ze.next({state:Ue.state,error:void 0,data:xe})}},error:Ue=>{ze.next({state:a.Gu.Error,error:Ue,data:[]}),ze.error(Ue)}});return()=>{pe?.unsubscribe()}})}function te(ue,Te){return Te.hideFromInspector=!0,new n.c(he=>{let re=[];he.next({state:a.Gu.Loading,error:void 0,data:[]});const De=ue.query(Te),Ee=((0,r.A)(De)?De:(0,s.H)(De)).subscribe({complete:()=>{he.next({state:a.Gu.Done,error:void 0,data:re}),he.complete()},next:Me=>{const{error:ze}=Me;ze!==void 0?(he.next({state:a.Gu.Error,error:ze,data:[]}),he.error(ze)):re=Me.data.map(xe=>{const We=(0,i.Vc)(xe),{timeIndex:be}=(0,i.KR)(We);return(0,i.ES)(We,be)})},error:Me=>{he.next({state:a.Gu.Error,error:Me,data:[]}),he.error(Me)}});return()=>{Ee?.unsubscribe()}})}function oe(ue,Te){if(ue.__interval_ms){let he=ue.__interval_ms.value,re="";return Te<A*5?(he=x,re="1ms"):he>B?(he=U,re="1d"):he>R?(he=B,re="1h"):he>A?(he=R,re="1m"):(he=A,re="1s"),{interval:re,intervalMs:he}}else return{interval:"$__interval"}}function le(ue){const Te=ue.dataFrame;return Te.length===0||Te.length<=ue.rowIndex?null:(0,i.EI)({fields:Te.fields.map(re=>({...re,values:[re.values[ue.rowIndex]]})),refId:Te.refId})}},91002:(Q,I,e)=>{"use strict";e.d(I,{Dg:()=>C,Dk:()=>O,Dm:()=>T,Dx:()=>f,EK:()=>c,Ei:()=>P,Hw:()=>y,M1:()=>p,Tj:()=>g,XM:()=>d,a8:()=>S,e3:()=>M,kA:()=>v,oR:()=>h,oT:()=>D,s2:()=>u,zy:()=>a});var t=e(2543),n=e.n(t),r=e(9557),s=e(52622),o=e(85404),m=e(11261),i=e(37471),l=e(70377);function d(x){if(!x)return r.$b.unknown;let A=r.$b.unknown,R;for(const[B,U]of Object.entries(r.$b)){const K=new RegExp(`\\b${B}\\b`,"i").exec(x);K&&(R===void 0||K.index<R)&&(A=U,R=K.index)}return A}function c(x){const A=r.$b[x.toString().toLowerCase()];return A||r.$b.unknown}function g(x,A){const R=x.filter(w=>w.labels[A]!==void 0),B=R.length,U=(0,t.countBy)(R,w=>w.labels[A]);return E(U,B)}function u(x){const A=x.filter(B=>B!=null),R=(0,t.countBy)(A);return E(R,A.length)}const E=(x,A)=>(0,t.chain)(x).map((R,B)=>({count:R,value:B,proportion:R/A})).sortBy("count").reverse().value(),p=(x,A)=>x.timeEpochMs<A.timeEpochMs?-1:x.timeEpochMs>A.timeEpochMs?1:x.timeEpochNs<A.timeEpochNs?-1:x.timeEpochNs>A.timeEpochNs?1:0,b=(x,A)=>x.timeEpochMs>A.timeEpochMs?-1:x.timeEpochMs<A.timeEpochMs?1:x.timeEpochNs>A.timeEpochNs?-1:x.timeEpochNs<A.timeEpochNs?1:0,a=(x,A)=>{const R=x?h(x.rows,A):[];return x?{...x,rows:R}:{hasUniqueLabels:!1,rows:R}},h=(x,A)=>A===s.uH.Ascending?x.sort(p):x.sort(b),P=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},y=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,A=>A.slice(1)==="t"?"	":`
`);function C(x){return x.map(A=>{const R=(0,l.FE)(A).reduce((B,U)=>{const w=U.keys[0];return B[w]=U.values[0],B},{});return{line:A.entry,timestamp:A.timeEpochNs,fields:{...R,...A.labels}}})}const f=x=>{let A={from:1/0,to:-1/0};return x.forEach(R=>{const B=R.meta?.custom||{};B.absoluteRange?.from&&B.absoluteRange?.to&&(A={from:Math.min(A.from,B.absoluteRange.from),to:Math.max(A.to,B.absoluteRange.to)})}),A},D=x=>{if(x.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const A={},R={};let B=-1/0;const U={};let w=[];return x.forEach(K=>{const N=new o.L(K),L=N.getFirstFieldOfType(m.PU.time),V=N.getFirstFieldOfType(m.PU.number);if(!L)throw new Error("Missing time field");if(!V)throw new Error("Missing value field");const F=V.config.displayNameFromDS||K.name||"logs",z=V.values.length;U[F]={meta:K.meta,valueFieldConfig:V.config,timeFieldConfig:L.config};for(let Y=0;Y<z;Y++){const H=L.values[Y],k=V.values[Y];A[F]??={},A[F][H]=(A[F][H]||0)+k,R[H]=(R[H]||0)+k,B=Math.max(R[H],B)}}),Object.keys(A).forEach(K=>{const N=new i.k,{meta:L,timeFieldConfig:V,valueFieldConfig:F}=U[K];N.name=K,N.meta=L,N.addField({name:"Time",type:m.PU.time,config:V}),N.addField({name:"Value",type:m.PU.number,config:F}),Object.entries(A[K]).sort((z,Y)=>Number(z[0])-Number(Y[0])).forEach(([z,Y])=>{N.add({Time:Number(z),Value:Y})}),w.push(N)}),{dataFrames:w,maximum:B}},T=x=>{const A=x[0]?.meta?.custom;return A&&A.datasourceName?{name:A.datasourceName}:null},M=x=>x[0]?.meta?.custom?.logsVolumeType===r.Aj.Limited,O=async(x,A)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(x);{const R=document.createElement("textarea");A.current?.appendChild(R),R.value=x,R.focus(),R.select(),document.execCommand("copy"),R.remove()}};function S(x){return x instanceof Element}function v(){const x=new Set;return function(A){let R=`${A.dataFrame.refId}_${A.rowId?A.rowId:`${A.timeEpochNs}_${A.entry}`}`;return x.has(R)?!0:(x.add(R),!1)}}},90591:(Q,I,e)=>{"use strict";e.d(I,{m:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(96374),o=e(44836);const m=({title:d})=>{const c=(0,r.of)(l);return n.createElement("p",{className:c.description},d?(0,o.t)("public-dashboard.delete-modal.revoke-nonorphaned-body-text","Are you sure you want to revoke this URL? The dashboard will no longer be public."):(0,o.t)("public-dashboard.delete-modal.revoke-orphaned-body-text","Orphaned public dashboard will no longer be public."))},i=({dashboardTitle:d,onConfirm:c,onDismiss:g})=>{const u=(0,o.t)("public-dashboard.delete-modal.revoke-title","Revoke public URL");return n.createElement(s.u,{isOpen:!0,body:n.createElement(m,{title:d}),onConfirm:c,onDismiss:g,title:u,icon:"trash-alt",confirmText:u})},l=d=>({title:(0,t.css)`
    margin-bottom: ${d.spacing(1)};
  `,description:(0,t.css)`
    font-size: ${d.typography.body.fontSize};
  `})},71500:(Q,I,e)=>{"use strict";e.d(I,{P:()=>s});var t=e(24439);class n extends Error{constructor(m,i){super(i),this.type=m}}class r{constructor(){this.rootName="general"}validateNewDashboardName(m,i){return this.validate(m,i,"A dashboard or a folder with the same name already exists")}validateNewFolderName(m){return this.validate(this.rootName,m,"A folder or dashboard in the general folder with the same name already exists")}async validate(m,i,l){i=(i||"").trim();const d=i.toLowerCase();if(i.length===0)throw new n("REQUIRED","Name is required");if(d===this.rootName)throw new n("EXISTING","This is a reserved name and cannot be used for a folder.");const g=await(0,t.getGrafanaSearcher)().search({kind:["dashboard"],query:i,location:m||"general"});for(const u of g.view)if(d===u.name.toLowerCase())throw new n("EXISTING",l)}}const s=new r},11230:(Q,I,e)=>{"use strict";e.d(I,{A_:()=>N,FG:()=>C,Q9:()=>f,Ql:()=>w,c0:()=>U,iP:()=>u,kV:()=>v,rw:()=>g,vV:()=>A});var t=e(17172),n=e(19347),r=e(82467),s=e(3169),o=e(55314),m=e(6473),i=e(31678),l=e(57767),d=e(98796),c=e(88264);function g(V){return async F=>{try{F((0,c.f7)());const z=await(0,t.AI)().get(`/api/gnet/dashboards/${V}`);await F(P(z.json)),await F(b(z)),F(h())}catch(z){F((0,c.oQ)()),(0,t.NF)(z)&&F((0,r.dx)((0,s.gi)(z.data.message||z)))}}}function u(V){return async F=>{await F(P(V)),await F(a(V)),F(h())}}const E=(V,F)=>V?.usage?.libraryPanels?.filter(z=>F.inputs.libraryPanels.some(Y=>Y.state!==c.J7.Exists&&Y.model.uid===z.uid));function p(V,F){let z=V.__inputs;if(F.inputs.libraryPanels?.length){const Y=[];V.__inputs?.forEach(H=>{if(!H?.usage?.libraryPanels){Y.push(H);return}const k=E(H,F);H.usage={libraryPanels:k},!!k?.length&&Y.push(H)}),z=Y}return{...V,__inputs:z}}function b(V){return(F,z)=>{const Y=z().importDashboard,H=p(V.json,Y);F((0,c.Rp)({...V,json:H}))}}function a(V){return(F,z)=>{const Y=z().importDashboard,H=p(V,Y);F((0,c.dd)(H))}}function h(){return(V,F)=>{const z=F().importDashboard.dashboard;if(z&&z.__inputs){const Y=[];z.__inputs.forEach(H=>{const k={name:H.name,label:H.label,info:H.description,value:H.value,type:H.type,pluginId:H.pluginId,options:[]};k.description=T(H),H.type===c.NZ.DataSource?D(H,k):k.info||(k.info="Specify a string constant"),Y.push(k)}),V((0,c.y3)(Y))}}}function P(V){return async function(F){const z=await y(V);F((0,c.dW)(z))}}async function y(V){if(!V||!V.__elements)return[];const F=[];for(const z of Object.values(V.__elements)){if(z.kind!==d.i.Panel)continue;const Y=z.model,{type:H,description:k}=Y,{uid:ee,name:ie}=z,fe={model:{model:Y,uid:ee,name:ie,version:0,type:H,kind:d.i.Panel,description:k},state:c.J7.New};try{const q=await(0,l.Yr)(ee,!0);fe.state=c.J7.Exists,fe.model=q}catch(q){if(q.status!==404)throw q}F.push(fe)}return F}function C(){return V=>{V((0,c.SN)())}}function f(V){return async(F,z)=>{const Y=z().importDashboard.dashboard,H=z().importDashboard.inputs,k=[];V.dataSources?.forEach((ee,ie)=>{const fe=H.dataSources[ie];k.push({name:fe.name,type:fe.type,pluginId:fe.pluginId,value:ee.uid})}),V.constants?.forEach((ee,ie)=>{const fe=H.constants[ie];k.push({value:ee,name:fe.name,type:fe.type})}),F(o.cU.endpoints.importDashboard.initiate({dashboard:{...Y,title:V.title,uid:V.uid||Y.uid},overwrite:!0,inputs:k,folderUid:V.folder.uid}))}}const D=(V,F)=>{(0,n.l)().getList({pluginId:V.pluginId}).length===0?F.info="No data sources of type "+V.pluginName+" found":F.info||(F.info="Select a "+V.pluginName+" data source")},T=V=>{if(V.usage&&V.usage.libraryPanels)return`List of affected library panels: ${V.usage.libraryPanels.reduce((z,Y,H)=>H===0?Y.name:`${z}, ${Y.name}`,"")}`};async function M(V,F){const z={totalCount:V.length,successCount:0};for(const Y of V)try{await R(Y,F)!==null&&(z.successCount+=1)}catch(H){console.error("Failed to move a folder",H)}return z}function O(V,F,...z){return async Y=>{try{const H=await V(...z);return Array.prototype.concat(Y,[H])}catch(H){if(F)return Y;throw H}}}function S(V,F){const z=[];for(const Y of V)z.push(O(x,!0,Y,!0));for(const Y of F)z.push(O(N,!0,Y,!0));return L(z)}function v(V){return m.t.ignoreNextSave(),(0,t.AI)().post("/api/dashboards/db/",{dashboard:V.dashboard,message:V.message??"",overwrite:V.overwrite??!1,folderUid:V.folderUid})}function x(V,F){return getBackendSrv().delete(`/api/folders/${V}?forceDeleteRules=false`,void 0,{showSuccessAlert:F})}function A(V){return(0,t.AI)().post("/api/folders",V)}function R(V,F){const z={parentUid:F.uid};return getBackendSrv().post(`/api/folders/${V}/move`,z,{showErrorAlert:!1})}const B=1e3;function U(V,F,z=i.SearchQueryType.Folder){return(0,t.AI)().get("/api/search",{query:V,type:z,permission:F,limit:B})}function w(V){return(0,t.AI)().get(`/api/folders/${V}`)}function K(V){return getBackendSrv().get(`/api/folders/id/${V}`)}function N(V,F){return(0,t.AI)().delete(`/api/dashboards/uid/${V}`,{showSuccessAlert:F})}function L(V){return V.reduce((F,z)=>Promise.resolve(F).then(z),[])}},88264:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>a,J7:()=>o,NZ:()=>s,Rp:()=>c,SN:()=>l,V9:()=>m,dW:()=>u,dd:()=>g,f7:()=>p,oQ:()=>E,qx:()=>r,y3:()=>d});var t=e(30038),n=e(39070),r=(h=>(h[h.Gcom=0]="Gcom",h[h.Json=1]="Json",h))(r||{}),s=(h=>(h.DataSource="datasource",h.Constant="constant",h.LibraryPanel="libraryPanel",h))(s||{}),o=(h=>(h.New="new",h.Exists="exists",h.Different="different",h))(o||{});const m={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},i=(0,t.Z0)({name:"manageDashboards",initialState:m,reducers:{setGcomDashboard:(h,P)=>{h.dashboard={...P.payload.json,id:null},h.meta={updatedAt:P.payload.updatedAt,orgName:P.payload.orgName},h.source=0,h.state=n.Gu.Done},setJsonDashboard:(h,P)=>{h.dashboard={...P.payload,id:null},h.meta=m.meta,h.source=1,h.state=n.Gu.Done},clearDashboard:h=>{h.dashboard={},h.state=n.Gu.NotStarted},setInputs:(h,P)=>{h.inputs={dataSources:P.payload.filter(y=>y.type==="datasource"),constants:P.payload.filter(y=>y.type==="constant"),libraryPanels:h.inputs.libraryPanels||[]}},setLibraryPanelInputs:(h,P)=>{h.inputs.libraryPanels=P.payload},fetchFailed:h=>{h.dashboard={},h.state=n.Gu.Error},fetchDashboard:h=>{h.state=n.Gu.Loading}}}),{clearDashboard:l,setInputs:d,setGcomDashboard:c,setJsonDashboard:g,setLibraryPanelInputs:u,fetchFailed:E,fetchDashboard:p}=i.actions,a={importDashboard:i.reducer}},249:(Q,I,e)=>{"use strict";e.d(I,{$5:()=>C,A:()=>D,AL:()=>P,Lu:()=>O,PT:()=>f,Pr:()=>T,pR:()=>M,sK:()=>y,tH:()=>S});var t=e(93020),n=e(75505),r=e(17172);function s({baseURL:v}){async function x(A){try{const{data:R,...B}=await(0,n.s)((0,r.AI)().fetch({...A,url:v+A.url,showErrorAlert:A.showErrorAlert}));return{data:R,meta:B}}catch(R){return A.manageError?A.manageError(R):{error:R}}}return x}const o=["auth-service","web server","backend"],m=["DEV","PROD"],i=["db","load-balancer","server","logs"],l=["Prometheus","Loki","AWS Athena","AWS Cloudwatch","InfluxDB","Elasticsearch"],d={Prometheus:{image:"https://grafana.com/api/plugins/prometheus/versions/5.0.0/logos/small"},Loki:{image:"https://grafana.com/api/plugins/loki/versions/5.0.0/logos/small"},"AWS Athena":{image:"https://grafana.com/api/plugins/grafana-athena-datasource/versions/2.13.5/logos/small"},"AWS Cloudwatch":{image:"https://grafana.com/api/plugins/computest-cloudwatchalarm-datasource/versions/2.0.0/logos/small"},InfluxDB:{image:"https://grafana.com/api/plugins/influxdb/versions/5.0.0/logos/small"},Elasticsearch:{image:"https://grafana.com/api/plugins/elasticsearch/versions/5.0.0/logos/small"}},c=Array.from({length:500}).map((v,x)=>{const A=l[x%l.length],R=m[x%m.length],B=o[x%o.length],U=i[x%i.length];return{status:"not-migrated",type:"datasource",uid:x.toString(16),resource:{uid:`${B}-${R}-${U}-${x}`,name:`${B} ${R} ${U}`,icon:d[A]?.image,type:A}}});c[0].status="migrated",c[1].status="failed",c[1].statusMessage=`Source map error: Error: request failed with status 404
Resource URL: http://localhost:3000/public/build/app.f4d0c6a0daa6a5b14892.js
Source Map URL: app.f4d0c6a0daa6a5b14892.js.map`,c[2].status="migrated",c[3].status="migrated",c[4].status="migrating",c[5].status="migrating";const g=new URLSearchParams(window.location.search),u=1e3,E="TODO_thisWillBeABigLongToken";let p=!1,b=!!g.get("mockStackURL"),a=g.get("mockStackURL")||void 0;function h(v){return new Promise(x=>{setTimeout(()=>{x({data:v})},u)})}const P=(0,t.xP)({tagTypes:["migrationToken","stackDetails","resource"],reducerPath:"migrateToCloudAPI",baseQuery:s({baseURL:"/api"}),endpoints:v=>({getStatus:v.query({providesTags:["stackDetails"],queryFn:()=>{const x={enabled:b};return a&&(x.stackURL=a),h(x)}}),connectStack:v.mutation({invalidatesTags:["stackDetails"],queryFn:async({stackURL:x})=>(b=!0,a=x,h(void 0))}),disconnectStack:v.mutation({invalidatesTags:["stackDetails"],queryFn:async()=>(b=!1,h(void 0))}),createMigrationToken:v.mutation({invalidatesTags:["migrationToken"],queryFn:async()=>(p=!0,h({token:E}))}),deleteMigrationToken:v.mutation({invalidatesTags:["migrationToken"],queryFn:async()=>(p=!1,h(void 0))}),hasMigrationToken:v.query({providesTags:["migrationToken"],queryFn:async()=>h(p)}),startMigration:v.mutation({queryFn:async()=>h(void 0)}),listResources:v.query({providesTags:["resource"],queryFn:async()=>h(c)})})}),{useGetStatusQuery:y,useConnectStackMutation:C,useDisconnectStackMutation:f,useCreateMigrationTokenMutation:D,useDeleteMigrationTokenMutation:T,useHasMigrationTokenQuery:M,useListResourcesQuery:O,useStartMigrationMutation:S}=P},32931:(Q,I,e)=>{"use strict";e.d(I,{EC:()=>i,L_:()=>o,YS:()=>s,bA:()=>m,wV:()=>l});var t=e(17172),n=e(82467),r=e(10943);function s(d={getBackendSrv:t.AI}){return async c=>{const g=await d.getBackendSrv().get("/api/org");return c((0,r.bK)(g)),g}}function o(d={getBackendSrv:t.AI}){return async(c,g)=>{const u=g().organization.organization;await d.getBackendSrv().put("/api/org",{name:u.name}),c((0,n.YA)(u.name)),c(s(d))}}function m(d,c={getBackendSrv:t.AI}){return async g=>{const u=await c.getBackendSrv().post("/api/user/using/"+d);g((0,n.YA)(u.name))}}function i(d,c={getBackendSrv:t.AI}){return async g=>{const u=await c.getBackendSrv().post("/api/orgs/",d);g(m(u.orgId))}}function l(d={getBackendSrv:t.AI}){return async c=>{const g=await d.getBackendSrv().get("/api/user/orgs");return c((0,r.Bz)(g)),g}}},10943:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>l,Bz:()=>m,bK:()=>o,n:()=>s});var t=e(30038);const n={organization:{},userOrgs:[]},r=(0,t.Z0)({name:"organization",initialState:n,reducers:{organizationLoaded:(d,c)=>({...d,organization:c.payload}),setOrganizationName:(d,c)=>({...d,organization:{...d.organization,name:c.payload}}),userOrganizationsLoaded:(d,c)=>({...d,userOrgs:c.payload})}}),{setOrganizationName:s,organizationLoaded:o,userOrganizationsLoaded:m}=r.actions,l={organization:r.reducer}},17888:(Q,I,e)=>{"use strict";e.d(I,{a:()=>y});var t=e(32196),n=e(96540),r=e(47070),s=e(41987),o=e(13544),m=e(12131),i=e(40845),l=e(79041),d=e(14578);const c=n.forwardRef(({icon:D,children:T,onClick:M,...O},S)=>{const v=(0,i.of)(g);return n.createElement("button",{...O,className:v.action,onClick:M},n.createElement(d.I,{name:D,size:"xl"}),T)});c.displayName="CardButton";const g=D=>({action:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:D.colors.background.secondary,borderRadius:D.shape.radius.default,color:D.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:D.colors.emphasize(D.colors.background.secondary)}})});var u=e(15054),E=e(33390),p=e(53466),b=e(32696),a=e(14792),h=e(31678),P=e(79971);function y(D){const T=(0,i.of)(f),M=(0,l.d2)(),O=new r.v2(D.data),{dataSummary:S}=O,v=C(D,S),x=(0,h.useDispatch)(),A=(0,a.UA)().getCurrent()?.getPanelById(D.panelId),R=()=>{E.A.setObject(u.wV,b.__.Suggestions),x((0,p.eK)(!0))},B=()=>{A&&x((0,P.gW)({panel:A,pluginId:"table"}))},U=w=>{A&&(x((0,P.gW)({...w,panel:A})),w.transformations&&setTimeout(()=>{m.Ny.partial({tab:"transform"})},100))};return n.createElement("div",{className:T.wrapper},n.createElement("div",{className:T.message,"data-testid":o.Tp.components.Panels.Panel.PanelDataErrorMessage},v),M.app===s.Jk.PanelEditor&&S.hasData&&A&&n.createElement("div",{className:T.actions},D.suggestions&&n.createElement(n.Fragment,null,D.suggestions.map(w=>n.createElement(c,{key:w.name,icon:"process",onClick:()=>U(w)},w.name))),n.createElement(c,{icon:"table",onClick:B},"Switch to table"),n.createElement(c,{icon:"chart-line",onClick:R},"Open visualization suggestions")))}function C({data:D,fieldConfig:T,message:M,needsNumberField:O,needsTimeField:S,needsStringField:v},x){return M||(!D.series||D.series.length===0||D.series.every(A=>A.length===0)?T?.defaults.noValue??"No data":v&&!x.hasStringField?"Data is missing a string field":O&&!x.hasNumberField?"Data is missing a number field":S&&!x.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const f=D=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:D.colors.text.secondary,fontSize:D.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:D.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:D.spacing(1),rowGap:D.spacing(1),width:"100%",maxWidth:"600px"})})},41394:(Q,I,e)=>{"use strict";e.d(I,{$:()=>l,W:()=>i});var t=e(96540),n=e(65158),r=e(43429),s=e(42418),o=e(31678);class m extends t.PureComponent{constructor(c){super(c)}render(){const c={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:c},t.createElement(s.F,{severity:o.AppNotificationSeverity.Error,...this.props}))}}function i(d,c){const g=class extends t.PureComponent{render(){const p=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(m,{title:`Error loading: ${d.id}`,text:p})}},u=new n.m(g);return u.meta=d,u.loadError=!0,u}function l(d,c){const g=class extends t.PureComponent{render(){return t.createElement(m,{title:`Panel plugin not found: ${d}`})}},u=new n.m(c?()=>null:g);return u.meta={id:d,name:d,sort:100,type:r.QE.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},u}},20726:(Q,I,e)=>{"use strict";e.d(I,{m:()=>E});var t=e(96540),n=e(1933),r=e(90708),s=e(13834),o=e(581),m=e(72574),i=e(40845),l=e(79041),d=e(66602),c=e(10096),g=e(15162);const u={defaults:{},overrides:[]};function E(b){const{pluginId:a,data:h,timeZone:P=(0,n.O)(),options:y={},width:C,height:f,title:D,onOptionsChange:T=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:O=()=>{},fieldConfig:S=u}=b,v=(0,i.$j)(),x=(0,m.w)(),A=(0,t.useMemo)(()=>x.replace.bind(x),[x]),[R,B]=(0,t.useState)((0,g.PY)(a)),[U,w]=(0,t.useState)(),K=p(R,y,S),{dataLinkPostProcessor:N}=(0,l.d2)(),L=(0,r.rJ)(R,K?.fieldConfig,h,P,v,A,N);if((0,t.useEffect)(()=>{R&&R.hasPluginId(a)||(0,g.TV)(a).then(F=>B(F)).catch(F=>{w(F.message)})},[a,R]),U)return t.createElement("div",null,"Failed to load plugin: ",U);if(!R||!R.hasPluginId(a))return t.createElement("div",null,"Loading plugin panel...");if(!R.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!L)return t.createElement("div",null,"No panel data");const V=R.panel;return t.createElement(d.Xw,{dependencies:[R,h]},t.createElement(s.a,{meta:R.meta},t.createElement(V,{id:1,data:L,title:D,timeRange:L.timeRange,timeZone:P,options:K.options,fieldConfig:S,transparent:!1,width:C,height:f,renderCounter:0,replaceVariables:F=>F,onOptionsChange:T,onFieldConfigChange:O,onChangeTimeRange:M,eventBus:c.lE})))}function p(b,a,h){return(0,t.useMemo)(()=>{if(b)return(0,o.F)({plugin:b,currentOptions:a,currentFieldConfig:h,isAfterPluginChange:!1})},[b,h,a])}},25701:(Q,I,e)=>{"use strict";e.d(I,{b:()=>b});var t=e(32196),n=e(96540),r=e(70255),s=e(43429),o=e(51527),m=e(13544),i=e(40845),l=e(29158),d=e(98624),c=e(72129),g=e(10803);const u=38,E=({isCurrent:y,title:C,plugin:f,onClick:D,onDelete:T,disabled:M,showBadge:O,description:S,children:v})=>{const x=(0,i.of)(h),A=M||f.state===s.pn.deprecated,R=(0,t.cx)({[x.item]:!0,[x.itemDisabled]:A,[x.current]:y});return n.createElement("div",{className:R,"aria-label":m.Tp.components.PluginVisualization.item(f.name),"data-testid":m.Tp.components.PluginVisualization.item(f.name),onClick:A?void 0:D,title:y?"Click again to close this section":f.name},n.createElement("img",{className:(0,t.cx)(x.img,{[x.disabled]:A}),src:f.info.logos.small,alt:""}),n.createElement("div",{className:(0,t.cx)(x.itemContent,{[x.disabled]:A})},n.createElement("div",{className:x.name},C),S?n.createElement("span",{className:x.description},S):null,v),O&&n.createElement("div",{className:(0,t.cx)(x.badge,{[x.disabled]:A})},n.createElement(P,{plugin:f})),T&&n.createElement(l.K,{name:"trash-alt",onClick:B=>{B.stopPropagation(),T()},className:x.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))};E.displayName="PanelTypeCard";const p=({children:y,hasDescription:C,hasDelete:f,rootProps:D})=>{const T=(0,i.of)(h),M=(0,i.of)(a);return n.createElement("div",{className:T.item,...D},n.createElement(r.A,{className:(0,t.cx)(T.img,M.image),width:u,height:u}),n.createElement("div",{className:T.itemContent},n.createElement("div",{className:T.name},n.createElement(r.A,{width:160})),C?n.createElement(r.A,{containerClassName:T.description,width:80}):null,y),f&&n.createElement(r.A,{containerClassName:(0,t.cx)(T.deleteButton,M.deleteButton),width:16,height:16}))},b=(0,c.j)(E,p),a=()=>({deleteButton:(0,t.css)({lineHeight:1}),image:(0,t.css)({lineHeight:1})}),h=y=>({item:(0,t.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:y.colors.background.secondary,borderRadius:y.shape.radius.default,boxShadow:y.shadows.z1,border:`1px solid ${y.colors.background.secondary}`,alignItems:"center",padding:y.spacing(1),width:"100%",overflow:"hidden",transition:y.transitions.create(["background"],{duration:y.transitions.duration.short}),"&:hover":{background:y.colors.emphasize(y.colors.background.secondary,.03)}}),itemContent:(0,t.css)({overflow:"hidden",position:"relative",padding:y.spacing(0,1)}),itemDisabled:(0,t.css)({cursor:"default","&, &:hover":{background:y.colors.action.disabledBackground}}),current:(0,t.css)({label:"currentVisualizationItem",border:`1px solid ${y.colors.primary.border}`,background:y.colors.action.selected}),disabled:(0,t.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,t.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:y.typography.size.sm,fontWeight:y.typography.fontWeightMedium,width:"100%"}),description:(0,t.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:y.colors.text.secondary,fontSize:y.typography.bodySmall.fontSize,fontWeight:y.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,t.css)({maxHeight:u,width:u,display:"flex",alignItems:"center"}),badge:(0,t.css)({background:y.colors.background.primary}),deleteButton:(0,t.css)({cursor:"pointer",marginLeft:"auto"})}),P=({plugin:y})=>(0,o.x)(y.signature)?n.createElement(d.B,{status:y.signature}):n.createElement(g.p,{state:y.state});P.displayName="PanelPluginBadge"},56707:(Q,I,e)=>{"use strict";e.d(I,{a:()=>P});var t=e(32196),n=e(96540),r=e(16817),s=e(70713),o=e(40845),m=e(47070),i=e(32264),l=e(15162);const d=["timeseries","barchart","gauge","stat","piechart","bargauge","table","state-timeline","status-history","logs","candlestick","flamegraph","traces","nodeGraph"];async function c(f,D){const T=new m.v2(f,D);for(const O of d){const v=(await(0,l.TV)(O)).getSuggestionsSupplier();v&&v.getSuggestionsForData(T)}const M=T.getList();if(!i.$.featureToggles.vizAndWidgetSplit&&T.dataSummary.fieldCount===0)for(const O of Object.values(i.$.panels))!O.skipDataQuery||O.hideFromList||M.push({name:O.name,pluginId:O.id,description:O.info.description,cardOptions:{imgSrc:O.info.logos.small}});return M.sort((O,S)=>{if(T.dataSummary.preferredVisualisationType){if(O.pluginId===T.dataSummary.preferredVisualisationType)return-1;if(S.pluginId===T.dataSummary.preferredVisualisationType)return 1}return(S.score??m.nQ.OK)-(O.score??m.nQ.OK)})}var g=e(2543),u=e(13544),E=e(56034),p=e(20726);function b({data:f,suggestion:D,onChange:T,width:M}){const O=(0,o.of)(a),{innerStyles:S,outerStyles:v,renderWidth:x,renderHeight:A}=h(M),R=D.cardOptions??{},B={"aria-label":D.name,className:O.vizBox,"data-testid":u.Tp.components.VisualizationPreview.card(D.name),style:v,onClick:()=>{T({pluginId:D.pluginId,options:D.options,fieldConfig:D.fieldConfig})}};if(R.imgSrc)return n.createElement(E.m,{content:D.description??D.name},n.createElement("button",{...B,className:(0,t.cx)(O.vizBox,O.imgBox)},n.createElement("div",{className:O.name},D.name),n.createElement("img",{className:O.img,src:R.imgSrc,alt:D.name})));let U=D;return D.cardOptions?.previewModifier&&(U=(0,g.cloneDeep)(D),D.cardOptions.previewModifier(U)),n.createElement("button",{...B},n.createElement(E.m,{content:D.name},n.createElement("div",{style:S,className:O.renderContainer},n.createElement(p.m,{title:"",data:f,pluginId:D.pluginId,width:x,height:A,options:U.options,fieldConfig:U.fieldConfig}),n.createElement("div",{className:O.hoverPane}))))}const a=f=>({hoverPane:(0,t.css)({position:"absolute",top:0,right:0,left:0,borderRadius:f.spacing(2),bottom:0}),vizBox:(0,t.css)`
      position: relative;
      background: none;
      border-radius: ${f.shape.radius.default};
      cursor: pointer;
      border: 1px solid ${f.colors.border.medium};

      transition: ${f.transitions.create(["background"],{duration:f.transitions.duration.short})};

      &:hover {
        background: ${f.colors.background.secondary};
      }
    `,imgBox:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      color: ${f.colors.text.primary};
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;
    `,name:(0,t.css)`
      padding-bottom: ${f.spacing(.5)};
      margin-top: ${f.spacing(-1)};
      font-size: ${f.typography.bodySmall.fontSize};
      white-space: nowrap;
      overflow: hidden;
      color: ${f.colors.text.secondary};
      font-weight: ${f.typography.fontWeightMedium};
      text-overflow: ellipsis;
    `,img:(0,t.css)`
      max-width: ${f.spacing(8)};
      max-height: ${f.spacing(8)};
    `,renderContainer:(0,t.css)`
      position: absolute;
      transform-origin: left top;
      top: 6px;
      left: 6px;
    `});function h(f){const T=f,M=f*(1/1.6),O=350,S=O*(1/1.6),v=6,x=(T-v*2)/O,A=(M-v*2)/S;return{renderHeight:S,renderWidth:O,outerStyles:{width:T,height:M},innerStyles:{width:O,height:S,transform:`scale(${x}, ${A})`}}}function P({searchQuery:f,onChange:D,data:T,panel:M}){const O=(0,o.of)(C),{value:S}=(0,r.A)(()=>c(T,M),[T,M]),v=y(f,S);return n.createElement("div",null,n.createElement(s.Ay,{disableHeight:!0,style:{width:"100%",height:"100%"}},({width:x})=>{if(!x)return null;x=x-1;const A=Math.floor(x/200),R=8*(A-1),B=Math.floor((x-R)/A);return n.createElement("div",null,n.createElement("div",{className:O.filterRow},n.createElement("div",{className:O.infoText},"Based on current data")),n.createElement("div",{className:O.grid,style:{gridTemplateColumns:`repeat(auto-fill, ${B}px)`}},v.map((U,w)=>n.createElement(b,{key:w,data:T,suggestion:U,onChange:D,width:B-1})),f&&v.length===0&&n.createElement("div",{className:O.infoText},"No results matched your query")))}))}function y(f,D){if(!f||!D)return D||[];const T=new RegExp(f,"i");return D.filter(M=>T.test(M.name)||T.test(M.pluginId))}const C=f=>({heading:(0,t.css)({...f.typography.h5,margin:f.spacing(0,.5,1)}),filterRow:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingBottom:"8px"}),infoText:(0,t.css)({fontSize:f.typography.bodySmall.fontSize,color:f.colors.text.secondary,fontStyle:"italic"}),grid:(0,t.css)({display:"grid",gridGap:f.spacing(1),gridTemplateColumns:"repeat(auto-fill, 144px)",marginBottom:f.spacing(1),justifyContent:"space-evenly"})})},86292:(Q,I,e)=>{"use strict";e.d(I,{G:()=>l});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(41670),m=e(17706),i=e(48889);function l({pluginId:c,searchQuery:g,onChange:u,isWidget:E=!1}){const p=(0,s.of)(d),b=(0,n.useMemo)(()=>r.$.featureToggles.vizAndWidgetSplit?E?(0,m.nr)():(0,m.if)():(0,m.A4)(),[E]),a=(0,n.useMemo)(()=>(0,m.CO)(b,g,c),[b,g,c]);return a.length===0?n.createElement(o.Z,null,"Could not find anything matching your query"):n.createElement("div",{className:p.grid},a.map(h=>n.createElement(i.f,{disabled:!1,key:h.id,isCurrent:h.id===c,plugin:h,onClick:P=>u({pluginId:h.id,withModKey:P.metaKey||P.ctrlKey||P.altKey})})))}const d=c=>({grid:(0,t.css)({maxWidth:"100%",display:"grid",gridGap:c.spacing(.5)}),heading:(0,t.css)({...c.typography.h5,margin:c.spacing(0,.5,1)})})},48889:(Q,I,e)=>{"use strict";e.d(I,{f:()=>r});var t=e(96540),n=e(25701);const r=({isCurrent:s,plugin:o,onClick:m,disabled:i})=>t.createElement(n.b,{title:o.name,plugin:o,description:o.info.description,onClick:m,isCurrent:s,disabled:i,showBadge:!0});r.displayName="VizTypePickerPlugin"},32349:(Q,I,e)=>{"use strict";e.d(I,{CH:()=>l,E7:()=>i,EO:()=>m});var t=e(14236),n=e(83195),r=e(92461),s=e(32023),o=e(6923);const m=d=>{const c=d.field.links;if(!(!c||c.length===0))return{getLinks:g=>{const u={};if(d.view){const{dataFrame:p}=d.view;u.__series={value:{name:p.name,refId:p.refId},text:"Series"};const b=d.colIndex!==void 0?p.fields[d.colIndex]:void 0;if(b){if(u.__field={value:{name:b.name,labels:b.labels},text:"Field"},d.rowIndex!==void 0&&d.rowIndex>=0){const{timeField:a}=(0,t.KR)(p);u.__value={value:{raw:b.values[d.rowIndex],numeric:d.display.numeric,text:(0,n.cN)(d.display),time:a?a.values[d.rowIndex]:void 0},text:"Value"}}d.view&&(u.__data={value:{name:p.name,refId:p.refId,fields:(0,r.F)({frame:p,rowIndex:d.rowIndex})},text:"Data"})}else u.__value={value:{raw:d.display.numeric,numeric:d.display.numeric,text:(0,n.cN)(d.display),calc:d.name},text:"Value"}}else console.log("VALUE",d);const E=(p,b,a)=>{const h={...u,...b};return g(p,h,a)};return c.map(p=>(0,o.mQ)().getDataLinkUIModel(p,E,d))}}},i=(d,c)=>{const g=d.links;if(!(!g||g.length===0))return{getLinks:()=>g.map(u=>(0,o.mQ)().getDataLinkUIModel(u,c||d.replaceVariables,d))}},l=(d,c)=>{const g=s.b4.getPanelLinks(d)?.state.rawLinks;if(!(!g||g.length===0))return{getLinks:()=>g.map(u=>(0,o.mQ)().getDataLinkUIModel(u,c,d))}}},6923:(Q,I,e)=>{"use strict";e.d(I,{Fq:()=>P,Hf:()=>f,mQ:()=>S});var t=e(2543),n=e.n(t),r=e(6709),s=e(91890),o=e(28240),m=e(11261),i=e(71733),l=e(40672),d=e(76885),c=e(95344),g=e(72574),u=e(52622),E=e(2913);const p=[{value:`${r.c.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.$0.BuiltIn},{value:`${r.c.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.$0.BuiltIn},{value:`${r.c.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.$0.BuiltIn}],b=[{value:`${r.c.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.$0.Series}],a=[{value:`${r.c.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.$0.Value},{value:`${r.c.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.$0.Value},{value:`${r.c.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.$0.Value}],h=v=>v.includes(".")||v.trim().includes(" ")?`["${v}"]`:`.${v}`,P=()=>[...(0,g.w)().getVariables().map(v=>({value:v.name,label:v.name,origin:s.$0.Template})),{value:`${r.c.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.$0.Template},...p],y=v=>{const x=[];for(const R of v)for(const B of R.fields)if(B.labels)for(const U of Object.keys(B.labels))x.push(U);const A=(0,t.chain)(x).flatten().uniq().value();return[{value:`${r.c.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.$0.Field},...A.map(R=>({value:`__field.labels${h(R)}`,label:`labels.${R}`,documentation:`${R} label value`,origin:s.$0.Field}))]},C=v=>{let x,A;const R=[],B={};if(v.length!==1)return[];const U=v[0];for(const w of U.fields){const K=(0,o.Ct)(w,U,v);B[K]||(R.push({value:`__data.fields${h(K)}`,label:`${K}`,documentation:`Formatted value for ${K} on the same row`,origin:s.$0.Fields}),B[K]=!0,!x&&w.type===m.PU.number&&(x={...w,name:K}),!A&&w.config.displayName&&w.config.displayName!==w.name&&(A={...w,name:K}))}return R.length&&R.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.$0.Fields}),x&&(R.push({value:`__data.fields${h(x.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.$0.Fields}),R.push({value:`__data.fields${h(x.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.$0.Fields})),A&&R.push({value:`__data.fields${h(A.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.$0.Fields}),R},f=(v,x)=>{const A={value:`${r.c.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.$0.Value};return x===s.uP.Values?[...b,...y(v),...a,A,...C(v),...P()]:[...b,...y(v),...C(v),...P()]},D=v=>{const x=y(v),A={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...b,...x,...a,A,...P()]};class T{constructor(){this.getDataLinkUIModel=(x,A,R)=>{let B=x.url;x.onBuildUrl&&(B=x.onBuildUrl({origin:R,replaceVariables:A}));const U={href:i.I.assureBaseUrl(B.replace(/\n/g,"")),title:x.title??"",target:x.targetBlank?"_blank":void 0,origin:R};return A&&(U.href=A(U.href,void 0,u.$m.UriEncode),U.title=A(x.title)),x.onClick&&(U.onClick=w=>{x.onClick({origin:R,replaceVariables:A,e:w})}),U.href=(0,E.zj)().disableSanitizeHtml?U.href:l.sQ.sanitizeUrl(U.href),U}}getLinkUrl(x){let A={};x.keepTime&&(A[`$${r.c.keepTime}`]=!0),x.includeVars&&(A[`$${r.c.includeVars}`]=!0);let R=i.I.assureBaseUrl(d.kM.appendQueryToUrl(x.url||"",d.kM.toUrlParams(A)));return R=(0,g.w)().replace(R),(0,E.zj)().disableSanitizeHtml?R:l.sQ.sanitizeUrl(R)}getAnchorInfo(x){const A=(0,g.w)();return{href:this.getLinkUrl(x),title:A.replace(x.title||""),tooltip:A.replace(x.tooltip||"")}}getPanelLinkAnchorInfo(x,A){(0,c.l)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const R=(B,U,w)=>(0,g.w)().replace(B,{...A,...U},w);return this.getDataLinkUIModel(x,R,{})}}let M;function O(v){M=v}function S(){return M||(M=new T),M}},79971:(Q,I,e)=>{"use strict";e.d(I,{Ap:()=>i,O6:()=>l,Xk:()=>c,gW:()=>d});var t=e(581),n=e(57767),r=e(41394),s=e(20701),o=e(28444),m=e(80095);function i(u){return async(E,p)=>{if(u.libraryPanel?.uid&&!("model"in u.libraryPanel)){E(g(u));return}u.maxDataPoints&&(u.maxDataPoints=Number(u.maxDataPoints));let b=u.type,a=p().plugins.panels[b];if(!a)try{a=await E((0,s.y7)(b))}catch{a=(0,r.$)(b,b==="row")}u.plugin||await u.pluginLoaded(a),E((0,m.XM)({key:u.key,plugin:a}))}}function l(u){return E=>{E((0,m.FC)({key:u}))}}function d({panel:u,pluginId:E,options:p,fieldConfig:b,transformations:a}){return async(h,P)=>{if(u.type===E&&!p&&!b&&!a)return;let C=P().plugins.panels[E];if(C||(C=await h((0,s.y7)(E))),u.type!==E&&u.changePlugin(C),p||b||a){const f=(0,t.F)({plugin:C,currentOptions:p||u.options,currentFieldConfig:b||u.fieldConfig,isAfterPluginChange:!1});u.options=f.options,u.fieldConfig=f.fieldConfig,u.transformations=a||u.transformations,u.configRev++}u.generateNewKey(),h((0,m.XM)({key:u.key,plugin:C}))}}function c(u,E){return async(p,b)=>{const a=E.model.type,h=u.type;if(u.restoreModel({...E.model,gridPos:u.gridPos,id:u.id,libraryPanel:E}),u.getQueryRunner().clearLastResult(),h!==a){let y=b().plugins.panels[a];y||(y=await p((0,s.y7)(a))),await u.pluginLoaded(y),u.generateNewKey(),await p((0,m.XM)({key:u.key,plugin:y}))}else{const P=u.key;u.generateNewKey(),p((0,m.io)({oldKey:P,newKey:u.key}))}u.configRev=0,u.hasSavedPanelEditChange=!0,u.refresh(),u.events.publish(o.zq),u.events.publish(o.PR)}}function g(u){return async(E,p)=>{const b=u.libraryPanel.uid;try{const a=await(0,n.Yr)(b,!0);u.initLibraryPanel(a);const h=p().dashboard.getModel();if(u.repeat&&h){const P=h.panels.findIndex(y=>y.id===u.id);h.repeatPanel(u,P),h.sortPanelsByGridPos(),h.events.publish(new o.Q$)}await E(i(u))}catch(a){console.log("ERROR: ",a),E((0,m.XM)({key:u.key,plugin:(0,r.$)("Unable to load library panel: "+b,!1)}))}}}},80095:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>g,FC:()=>l,S3:()=>o,XM:()=>s,io:()=>i,nF:()=>m,rG:()=>d});var t=e(30038);const n={},r=(0,t.Z0)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(u,E)=>{u[E.payload.key]={plugin:E.payload.plugin}},changePanelKey:(u,E)=>{u[E.payload.newKey]=u[E.payload.oldKey],delete u[E.payload.oldKey]},removePanel:(u,E)=>{delete u[E.payload.key]},removeAllPanels:u=>{Object.keys(u).forEach(E=>delete u[E])},setPanelInstanceState:(u,E)=>{u[E.payload.key].instanceState=E.payload.value},setPanelAngularComponent:(u,E)=>{const p=u[E.payload.key];p.angularComponent=E.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:o,setPanelInstanceState:m,changePanelKey:i,removePanel:l,removeAllPanels:d}=r.actions,g={panels:r.reducer}},40334:(Q,I,e)=>{"use strict";e.d(I,{U:()=>t});function t(n,r){return n.panels[r.key]}},17706:(Q,I,e)=>{"use strict";e.d(I,{A4:()=>s,CO:()=>i,if:()=>m,nr:()=>o});var t=e(43429),n=e(54479),r=e(2913);function s(){const l=r.config.panels;return Object.keys(l).filter(d=>l[d].hideFromList===!1).map(d=>l[d]).sort((d,c)=>d.sort-c.sort)}function o(){return s().filter(l=>!!l.skipDataQuery)}function m(){return s().filter(l=>!l.skipDataQuery)}function i(l,d,c){if(!d.length)return l.filter(b=>b.state===t.pn.deprecated?c===b.id:!0);const g=(0,n.xb)(d).toLowerCase(),u=[],E=[],p="graph".startsWith(g);for(const b of l){if(b.state===t.pn.deprecated&&c!==b.id)continue;const h=b.name.toLowerCase().indexOf(g);h===0?u.push(b):h>0?E.push(b):p&&b.id==="timeseries"&&u.push(b)}return u.concat(E)}},2609:(Q,I,e)=>{"use strict";e.d(I,{_o:()=>g});var t=e(2543),n=e.n(t),r=e(71733),s=e(76885),o=e(65879),m=e(12131),i=e(2619),l=e(12604);const d={kiosk:!0,autofitpanels:!0,orgId:!0};class c extends i.Q{constructor(){super({isPlaying:!1}),this.urls=[],this.index=0,this.numberOfLoops=0,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,l.NF)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],b=m.Ny.getSearchObject(),a=(0,t.pickBy)(b,(P,y)=>d[y]),h=r.I.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=h,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),m.Ny.push(h+"?"+s.kM.toUrlParams(a))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(E){E.pathname!==this.validPlaylistUrl&&this.stop()}async start(E){this.stop(),this.startUrl=window.location.href,this.index=0,this.setState({isPlaying:!0}),this.locationListenerUnsub=m.Ny.getHistory().listen(this.locationUpdated);const p=[];let b=await this.api.getPlaylist(E);if(!b.items?.length)return;this.interval=o.intervalToMs(b.interval);const a=await(0,l.qY)(b.items);for(const h of a)if(h.dashboards)for(const P of h.dashboards)p.push(P.url);p.length&&(this.urls=p,this.setState({isPlaying:!0}),this.next())}stop(){this.state.isPlaying&&(this.index=0,this.setState({isPlaying:!1}),this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),m.Ny.getSearchObject().kiosk&&m.Ny.partial({kiosk:null}))}}const g=new c},12604:(Q,I,e)=>{"use strict";e.d(I,{aV:()=>P,NF:()=>C,qY:()=>h,GM:()=>y});var t=e(75505),n=e(78368),r=e(17172),s=e(32264),o=e(82467),m=e(3169),i=e(90183),l=e(68706),d=e(99140);class c{constructor(D,T=!0){const M=T?`namespaces/${s.$.namespace}/`:"";this.url=`/apis/${D.group}/${D.version}/${M}${D.resource}`}async create(D){return(0,r.AI)().post(this.url,D)}async get(D){return(0,r.AI)().get(`${this.url}/${D}`)}async list(D){const T=D||{};return T.labelSelector=this.parseLabelSelector(T?.labelSelector),(0,r.AI)().get(this.url,D)}async update(D){return(0,r.AI)().put(`${this.url}/${D.metadata.name}`,D)}async delete(D){return(0,r.AI)().delete(`${this.url}/${D}`)}parseLabelSelector(D){return Array.isArray(D)?D.map(T=>{const M=String(T.key),O=T.operator;switch(O){case"=":case"!=":return`${M}${O}${T.value}`;case"in":case"notin":return`${M}${O}(${T.value.join(",")})`;case"":case"!":return`${O}${M}`;default:return null}}).filter(Boolean).join(","):D}}var g=e(24439);class u{async getAllPlaylist(){return(0,r.AI)().get("/api/playlists/")}async getPlaylist(D){const T=await(0,r.AI)().get(`/api/playlists/${D}`);return await b(T),T}async createPlaylist(D){await a(()=>(0,r.AI)().post("/api/playlists",D))}async updatePlaylist(D){await a(()=>(0,r.AI)().put(`/api/playlists/${D.uid}`,D))}async deletePlaylist(D){await a(()=>(0,r.AI)().delete(`/api/playlists/${D}`),"Playlist deleted")}}class E{constructor(){this.playlistAsK8sResource=D=>({metadata:{name:D.uid},spec:{title:D.name,interval:D.interval,items:D.items??[]}}),this.server=new c({group:"playlist.grafana.app",version:"v0alpha1",resource:"playlists"})}async getAllPlaylist(){return(await this.server.list()).items.map(p)}async getPlaylist(D){const T=await this.server.get(D),M=p(T);return await b(M),M}async createPlaylist(D){const T=this.playlistAsK8sResource(D);await a(()=>this.server.create(T))}async updatePlaylist(D){const T=this.playlistAsK8sResource(D);await a(()=>this.server.update(T).then(()=>{}))}async deletePlaylist(D){await a(()=>this.server.delete(D).then(()=>{}),"Playlist deleted")}}function p(f){const{spec:D,metadata:T}=f;return{uid:T.name,name:D.title,interval:D.interval,items:D.items}}async function b(f){if(f?.items){for(const D of f.items)if(D.type==="dashboard_by_id"){D.type="dashboard_by_uid";const T=await(0,r.AI)().get(`/api/dashboards/ids/${D.value}`);T?.length&&(D.value=T[0])}}}async function a(f,D="Playlist saved"){try{await f(),(0,d.JD)((0,o.dx)((0,m.tZ)(D)))}catch(T){T instanceof Error&&(0,d.JD)((0,o.dx)((0,m.gi)("Unable to save playlist",T)))}}async function h(f){let D=0;if(!f?.length)return[];const T=[];for(const S of f){const v={query:"*",kind:["dashboard"],limit:1e3};switch(S.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":v.uid=[S.value];break;case"dashboard_by_tag":v.tags=[S.value];break}T.push({refId:`${D++}`,queryType:l.nj.Search,search:v})}if(!s.$.featureToggles.panelTitleSearch){const S=(0,g.getGrafanaSearcher)(),v=[];for(let x=0;x<T.length;x++){const A=(await S.search(T[x].search)).view;v.push({...f[x],dashboards:A.map(R=>({...R}))})}return v}const M=await(0,i.o)(),O=await(0,t.s)(M.query({targets:T}));if(O.data.length!==f.length)throw new Error("unexpected result size");return f.map((S,v)=>{const x=new n.R(O.data[v]);return{...S,dashboards:x.map(A=>({...A}))}})}function P(){return{items:[],interval:"5m",name:"",uid:""}}function y(f,D){return D?.length?(D=D.toLowerCase(),f.filter(T=>T.name.toLowerCase().includes(D))):f}function C(){return s.$.featureToggles.kubernetesPlaylists?new E:new u}},84684:(Q,I,e)=>{"use strict";e.d(I,{Ap:()=>E,Bj:()=>l,CB:()=>m,Gd:()=>u,T_:()=>i,XP:()=>p,cu:()=>a,ij:()=>h,xZ:()=>b});var t=e(36663),n=e(17172),r=e(80714),s=e(6745),o=e(5129);async function m(y){const C=await d(y),f=!!C,[D,T,M]=await Promise.all([u(),c(y,f),g(y)]),O=D.find(v=>v.id===y),S=O?.dependencies||C?.json?.dependencies;return{grafanaDependency:S?.grafanaDependency??S?.grafanaVersion??"",pluginDependencies:S?.plugins||[],links:O?.info.links||C?.json?.info.links||[],readme:M||C?.readme,versions:T,statusContext:C?.statusContext??"",iam:C?.json?.iam}}async function i(){try{const{items:y}=await(0,n.AI)().get(`${s.P5}/plugins`,{includeDeprecated:!0});return y.filter(o.hY)}catch(y){if((0,n.NF)(y))return y.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw y}}async function l(){try{return await(0,n.AI)().get(`${s.Sw}/errors`)}catch{return[]}}async function d(y){try{return await(0,n.AI)().get(`${s.P5}/plugins/${y}`,{})}catch(C){(0,n.NF)(C)&&(C.isHandled=!0);return}}async function c(y,C){try{return C?((await(0,n.AI)().get(`${s.P5}/plugins/${y}/versions`)).items||[]).map(D=>({version:D.version,createdAt:D.createdAt,isCompatible:D.isCompatible,grafanaDependency:D.grafanaDependency})):[]}catch(f){return(0,n.NF)(f)&&(f.isHandled=!0),[]}}async function g(y){try{const C=await(0,n.AI)().get(`${s.Sw}/${y}/markdown/README`);return C?(0,t.G)(C):""}catch(C){return(0,n.NF)(C)&&(C.isHandled=!0),""}}async function u(){return(await(0,n.AI)().get(`${s.Sw}`,(0,r.F)({embedded:0}))).filter(o.Sq)}async function E(){const{items:y}=await(0,n.AI)().get(`${s.Mi}/plugins`);return y}async function p(){const{items:y}=await(0,n.AI)().get(`${s.Mi}/provisioned-plugins`);return y.map(C=>({slug:C.type}))}async function b(y){return await(0,n.AI)().post(`${s.Sw}/${y}/install`,void 0,{showErrorAlert:!1})}async function a(y){return await(0,n.AI)().post(`${s.Sw}/${y}/uninstall`)}async function h(y,C){return(await(0,n.AI)().datasourceRequest({url:`/api/plugins/${y}/settings`,method:"POST",data:C}))?.data}const P={getRemotePlugins:i,getInstalledPlugins:u,installPlugin:b,uninstallPlugin:a}},42930:(Q,I,e)=>{"use strict";e.d(I,{G:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,wrap:i,className:l})=>{const d=(0,r.$j)(),c=o(d,i);return n.createElement("div",{className:(0,t.cx)(c.container,l)},m)},o=(m,i)=>({container:(0,t.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${i?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${m.spacing()};
      margin-right: ${m.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},6745:(Q,I,e)=>{"use strict";e.d(I,{Mi:()=>n,P5:()=>r,Sw:()=>t,fu:()=>s});const t="/api/plugins",n="/api/instance",r="/api/gnet",s="plugins"},5129:(Q,I,e)=>{"use strict";e.d(I,{Gl:()=>D,H2:()=>a,N6:()=>M,Sq:()=>O,TD:()=>U,Xc:()=>P,by:()=>h,hY:()=>S,j_:()=>T,kH:()=>p,td:()=>g,tr:()=>f});var t=e(53076),n=e(43429),r=e(53531),s=e(32264),o=e(33378),m=e(2913),i=e(10096),l=e(27677),d=e(31678),c=e(66253);function g({local:w=[],remote:K=[],instance:N=[],provisioned:L=[],pluginErrors:V}){const F=[],z=y(V),Y=N.reduce((k,ee)=>(k.set(ee.pluginSlug,ee),k),new Map),H=L.reduce((k,ee)=>(k.add(ee.slug),k),new Set);return w.forEach(k=>{const ee=K.find(fe=>fe.slug===k.id),ie=z[k.id];ee||F.push(u(k,void 0,ie))}),K.forEach(k=>{const ee=w.find(q=>q.id===k.slug),ie=z[k.slug];if(!(k.status===c.Uy.Deprecated&&!ee)){const q=u(ee,k,ie);if(m.Ay.featureToggles.managedPluginsInstall&&s.$.pluginAdminExternalManageEnabled){q.isFullyInstalled=q.isCore?!0:(Y.has(k.slug)||H.has(k.slug))&&q.isInstalled,q.isInstalled=Y.has(k.slug)||q.isInstalled;const Z=Y.get(k.slug);q.isUpdatingFromInstance=Y.has(k.slug)&&q.hasUpdate&&q.installedVersion!==Z?.version,q.isUninstallingFromInstance=!!ee&&!Y.has(k.slug)}F.push(q)}}),F}function u(w,K,N){return!w&&K?E(K,N):w&&!K?p(w,N):b(w,K,N)}function E(w,K){const{name:N,slug:L,description:V,version:F,orgName:z,popularity:Y,downloads:H,typeCode:k,updatedAt:ee,createdAt:ie,status:fe,angularDetected:q,keywords:Z}=w,J=!!K||x(k);return{description:V,downloads:H,id:L,info:{logos:{small:`https://grafana.com/api/plugins/${L}/versions/${F}/logos/small`,large:`https://grafana.com/api/plugins/${L}/versions/${F}/logos/large`},keywords:Z},name:N,orgName:z,popularity:Y,publishedAt:ie,signature:C({remote:w,error:K}),updatedAt:ee,hasUpdate:!1,isPublished:!0,isInstalled:J,isDisabled:J,isDeprecated:fe===c.Uy.Deprecated,isCore:w.internal,isDev:!1,isEnterprise:fe===c.Uy.Enterprise,type:k,error:K?.errorCode,angularDetected:q,isFullyInstalled:J}}function p(w,K){const{name:N,info:{description:L,version:V,logos:F,updated:z,author:Y,keywords:H},id:k,dev:ee,type:ie,signature:fe,signatureOrg:q,signatureType:Z,hasUpdate:J,accessControl:G,angularDetected:ne}=w,te=!!K||x(ie);return{description:L,downloads:0,id:k,info:{logos:F,keywords:H},name:N,orgName:Y.name,popularity:0,publishedAt:"",signature:C({local:w,error:K}),signatureOrg:q,signatureType:Z,updatedAt:z,installedVersion:V,hasUpdate:J,isInstalled:!0,isDisabled:te,isCore:fe==="internal",isPublished:!1,isDeprecated:!1,isDev:!!ee,isEnterprise:!1,type:ie,error:K?.errorCode,accessControl:G,angularDetected:ne,isFullyInstalled:!0,iam:w.iam}}function b(w,K,N){const L=w?.info.version,V=K?.slug||w?.id||"",F=w?.type||K?.typeCode,z=!!N||x(F),Y=K?.keywords||w?.info.keywords||[];let H={small:`/public/img/icn-${F}.svg`,large:`/public/img/icn-${F}.svg`};return K?H={small:`https://grafana.com/api/plugins/${V}/versions/${K.version}/logos/small`,large:`https://grafana.com/api/plugins/${V}/versions/${K.version}/logos/large`}:w&&w.info.logos&&(H=w.info.logos),{description:w?.info.description||K?.description||"",downloads:K?.downloads||0,hasUpdate:w?.hasUpdate||!1,id:V,info:{logos:H,keywords:Y},isCore:!!(K?.internal||w?.signature===n.Ac.internal),isDev:!!w?.dev,isEnterprise:K?.status===c.Uy.Enterprise,isInstalled:!!w||z,isDisabled:z,isDeprecated:K?.status===c.Uy.Deprecated,isPublished:!0,name:K?.name||w?.name||"",orgName:K?.orgName||w?.info.author.name||"",popularity:K?.popularity||0,publishedAt:K?.createdAt||"",type:F,signature:C({local:w,remote:K,error:N}),signatureOrg:w?.signatureOrg||K?.versionSignedByOrgName,signatureType:w?.signatureType||K?.versionSignatureType||K?.signatureType||void 0,updatedAt:K?.updatedAt||w?.info.updated||"",installedVersion:L,error:N?.errorCode,accessControl:w?.accessControl,angularDetected:w?.angularDetected??K?.angularDetected,isFullyInstalled:!!w||z,iam:w?.iam}}const a=w=>`${s.$.pluginCatalogURL}${w}`;var h=(w=>(w.nameAsc="nameAsc",w.nameDesc="nameDesc",w.updated="updated",w.published="published",w.downloads="downloads",w))(h||{});const P=(w,K)=>{const N={nameAsc:(L,V)=>L.name.localeCompare(V.name),nameDesc:(L,V)=>V.name.localeCompare(L.name),updated:(L,V)=>(0,r.b)(V.updatedAt).valueOf()-(0,r.b)(L.updatedAt).valueOf(),published:(L,V)=>(0,r.b)(V.publishedAt).valueOf()-(0,r.b)(L.publishedAt).valueOf(),downloads:(L,V)=>V.downloads-L.downloads};return N[K]?w.sort(N[K]):w};function y(w=[]){return w.reduce((K,N)=>(K[N.pluginId]=N,K),{})}function C(w){const{error:K,local:N,remote:L}=w;if(K)switch(K.errorCode){case n.ZK.invalidSignature:return n.Ac.invalid;case n.ZK.missingSignature:return n.Ac.missing;case n.ZK.modifiedSignature:return n.Ac.modified}return N?.signature?N.signature:L?.signatureType&&L?.versionSignatureType?n.Ac.valid:n.Ac.missing}const f=()=>(0,l.AI)().get("/api/frontend/settings").then(w=>{s.$.panels=w.panels});function D(w){if(!w)return;const[K]=w.filter(N=>!!N.isCompatible);return K}const T=()=>s.$.pluginAdminEnabled,M=(w,K,N)=>{const L=s.$.pluginAdminExternalManageEnabled,V=i.TP.hasPermission(d.AccessControlAction.PluginsInstall),F=!!N;return w.type===n.QE.renderer||w.type===n.QE.secretsmanager||w.isEnterprise&&!(0,o.a)("enterprise.plugins")||w.isDev||!V&&!L||!w.isPublished||!F||!K},O=w=>v(w.id),S=w=>v(w.slug);function v(w){const{pluginCatalogHiddenPlugins:K}=s.$;return!K.includes(w)}function x(w){return w===n.QE.secretsmanager&&!s.$.secretsManagerPluginEnabled}function A(w){return w?.signature==="internal"}function R(w){return w.split(" - ")[0]}function B(w){return w.reduce((K,{id:N,name:L,type:V,orgName:F,info:z})=>{const Y=z.keywords?.join(" ").toLowerCase(),H=`${N} - ${L} - ${V} - ${F} - ${Y}`;return K.push(H),K},[])}function U(w,K){const N=B(w);let V=new t.A({intraMode:1,intraSub:0}).filter(N,K);return V===null?null:V.map(F=>R(N[F]))}},20701:(Q,I,e)=>{"use strict";e.d(I,{JC:()=>S,JJ:()=>P,LR:()=>h,NJ:()=>x,aU:()=>C,ai:()=>M,h9:()=>v,mj:()=>a,nT:()=>O,t5:()=>y,y7:()=>A});var t=e(30038),n=e(65474),r=e(62467),s=e(66847),o=e(45650),m=e(90593),i=e(75505),l=e(32264),d=e(17172),c=e(2913),g=e(15162),u=e(81900),E=e(84684),p=e(6745),b=e(5129);const a=(0,t.zD)(`${p.fu}/fetchAll`,async(R,B)=>{try{B.dispatch({type:`${p.fu}/fetchLocal/pending`}),B.dispatch({type:`${p.fu}/fetchRemote/pending`});const U=l.$.pluginAdminExternalManageEnabled&&c.Ay.featureToggles.managedPluginsInstall?(0,n.H)((0,E.Ap)()):(0,r.of)(void 0),w=l.$.pluginAdminExternalManageEnabled&&c.Ay.featureToggles.managedPluginsInstall?(0,n.H)((0,E.XP)()):(0,r.of)(void 0),K=500,N=(0,n.H)((0,E.Bj)()),L=(0,n.H)((0,E.Gd)()),V=(0,n.H)((0,E.T_)()).pipe((0,s.W)(F=>(B.dispatch({type:`${p.fu}/fetchRemote/rejected`}),console.error(F),(0,r.of)([]))));return(0,o.p)({local:L,remote:V,instance:U,provisioned:w,pluginErrors:N}).pipe((0,m.w)({each:K,with:()=>(V.subscribe(async F=>{if(B.dispatch({type:`${p.fu}/fetchRemote/fulfilled`}),F.length>0){const z=await(0,i.s)(L),Y=await(0,i.s)(U),H=await(0,i.s)(w),k=await(0,i.s)(N);B.dispatch(C((0,b.td)({local:z,remote:F,instance:Y,provisioned:H,pluginErrors:k})))}}),(0,o.p)({local:L,instance:U,provisioned:w,pluginErrors:N}))})).subscribe(({local:F,remote:z,instance:Y,provisioned:H,pluginErrors:k})=>{F&&z?(B.dispatch({type:`${p.fu}/fetchLocal/fulfilled`}),B.dispatch({type:`${p.fu}/fetchRemote/fulfilled`}),B.dispatch(C((0,b.td)({local:F,remote:z,instance:Y,provisioned:H,pluginErrors:k})))):F&&(B.dispatch({type:`${p.fu}/fetchLocal/fulfilled`}),B.dispatch(C((0,b.td)({local:F,pluginErrors:k}))))},F=>(console.log(F),B.dispatch({type:`${p.fu}/fetchLocal/rejected`}),B.dispatch({type:`${p.fu}/fetchRemote/rejected`}),B.rejectWithValue("Unknown error."))),null}catch{return B.rejectWithValue("Unknown error.")}}),h=(0,t.zD)(`${p.fu}/fetchAllLocal`,async(R,B)=>{try{return(await(0,E.Gd)()).map(w=>(0,b.kH)(w))}catch{return B.rejectWithValue("Unknown error.")}}),P=(0,t.zD)(`${p.fu}/fetchRemotePlugins`,async(R,B)=>{try{return await(0,E.T_)()}catch(U){return(0,d.NF)(U)&&(U.isHandled=!0),B.rejectWithValue([])}}),y=(0,t.zD)(`${p.fu}/fetchDetails`,async(R,B)=>{try{const U=await(0,E.CB)(R);return{id:R,changes:{details:U}}}catch{return B.rejectWithValue("Unknown error.")}}),C=(0,t.VP)(`${p.fu}/addPlugins`),f=(0,t.VP)(`${p.fu}/addLocalPlugins`),D=(0,t.VP)(`${p.fu}/addLocalPlugins`),T=(0,t.VP)(`${p.fu}/addLocalPlugins`),M=(0,t.zD)(`${p.fu}/install`,async({id:R,version:B,isUpdating:U=!1},w)=>{const K=U?{isInstalled:!0,installedVersion:B,hasUpdate:!1}:{isInstalled:!0,installedVersion:B};try{return await(0,E.xZ)(R),await(0,b.tr)(),U&&(0,u.sk)(R),{id:R,changes:K}}catch(N){return console.error(N),(0,d.NF)(N)?w.rejectWithValue(N.data):w.rejectWithValue("Unknown error.")}}),O=(0,t.zD)(`${p.fu}/install`,async()=>({})),S=(0,t.zD)(`${p.fu}/uninstall`,async(R,B)=>{try{return await(0,E.cu)(R),await(0,b.tr)(),(0,u.sk)(R),{id:R,changes:{isInstalled:!1,installedVersion:void 0}}}catch(U){return console.error(U),B.rejectWithValue("Unknown error.")}}),v=(0,t.zD)(`${p.fu}/loadPluginDashboards`,async(R,B)=>{const K=`api/plugins/${B.getState().dataSources.dataSource.type}/dashboards`;return(0,d.AI)().get(K)}),x=(0,t.VP)(`${p.fu}/panelPluginLoaded`),A=R=>async(B,U)=>{let w=U().plugins.panels[R];return w||(w=await(0,g.TV)(R),U().plugins.panels[R]||B(x(w))),w}},31326:(Q,I,e)=>{"use strict";e.d(I,{AI:()=>o,Ff:()=>E,qo:()=>u});var t=e(30038),n=e(6745),r=e(66253),s=e(20701);const o=(0,t.pU)(),m=p=>new RegExp(`${n.fu}/(.*)/pending`).test(p.type),i=p=>new RegExp(`${n.fu}/(.*)/fulfilled`).test(p.type),l=p=>new RegExp(`${n.fu}/(.*)/rejected`).test(p.type),d=p=>{const b=p.lastIndexOf("/");return p.substring(0,b)},c={items:o.getInitialState(),requests:{},settings:{displayMode:r.fy.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},g=(0,t.Z0)({name:"plugins",initialState:c,reducers:{setDisplayMode(p,b){p.settings.displayMode=b.payload}},extraReducers:p=>p.addCase(s.aU,(b,a)=>{o.upsertMany(b.items,a.payload)}).addCase(s.LR.fulfilled,(b,a)=>{o.upsertMany(b.items,a.payload)}).addCase(s.t5.fulfilled,(b,a)=>{o.updateOne(b.items,a.payload)}).addCase(s.ai.fulfilled,(b,a)=>{o.updateOne(b.items,a.payload)}).addCase(s.JC.fulfilled,(b,a)=>{o.updateOne(b.items,a.payload)}).addCase(s.NJ,(b,a)=>{b.panels[a.payload.meta.id]=a.payload}).addCase(s.h9.pending,(b,a)=>{b.isLoadingPluginDashboards=!0,b.dashboards=[]}).addCase(s.h9.fulfilled,(b,a)=>{b.isLoadingPluginDashboards=!1,b.dashboards=a.payload}).addMatcher(m,(b,a)=>{b.requests[d(a.type)]={status:r.IZ.Pending}}).addMatcher(i,(b,a)=>{b.requests[d(a.type)]={status:r.IZ.Fulfilled}}).addMatcher(l,(b,a)=>{b.requests[d(a.type)]={status:r.IZ.Rejected,error:a.payload}})}),{setDisplayMode:u}=g.actions,E=g.reducer},66253:(Q,I,e)=>{"use strict";e.d(I,{IZ:()=>l,Ip:()=>r,LZ:()=>i,Uy:()=>s,fy:()=>t,og:()=>m,u8:()=>o,vk:()=>n});var t=(d=>(d.Grid="grid",d.List="list",d))(t||{}),n=(d=>(d.Home="plugins-home",d.Browse="plugins-browse",d.Details="plugins-details",d))(n||{}),r=(d=>(d.app="apps",d.datasource="database",d.panel="credit-card",d.renderer="capture",d.secretsmanager="key-skeleton-alt",d))(r||{}),s=(d=>(d.Deleted="deleted",d.Active="active",d.Pending="pending",d.Deprecated="deprecated",d.Enterprise="enterprise",d))(s||{}),o=(d=>(d.INSTALL="INSTALL",d.UNINSTALL="UNINSTALL",d.UPDATE="UPDATE",d.REINSTALL="REINSTALL",d))(o||{}),m=(d=>(d.OVERVIEW="Overview",d.VERSIONS="Version history",d.CONFIG="Config",d.DASHBOARDS="Dashboards",d.USAGE="Usage",d.IAM="IAM",d))(m||{}),i=(d=>(d.OVERVIEW="overview",d.VERSIONS="version-history",d.CONFIG="config",d.DASHBOARDS="dashboards",d.USAGE="usage",d.IAM="iam",d))(i||{}),l=(d=>(d.Pending="Pending",d.Fulfilled="Fulfilled",d.Rejected="Rejected",d))(l||{})},74106:(Q,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(96540),n=e(43429),r=e(14110),s=e(42418);function o(i,l){let d;switch(i){case n.QE.app:d="app plugin";break;case n.QE.panel:d="panel plugin";break;case n.QE.datasource:d="data source plugin";break;default:d="plugin"}let c=`This ${d} uses a deprecated, legacy platform based on AngularJS and `;return l===void 0?c+" may be incompatible depending on your Grafana configuration.":l?c+" will stop working in future releases of Grafana.":c+" is incompatible with your current Grafana configuration."}function m(i){const{className:l,angularSupportEnabled:d,pluginId:c,pluginType:g,showPluginDetailsLink:u,interactionElementId:E}=i,[p,b]=(0,t.useState)(!1),a={};return c&&(a.pluginId=c),E&&(a.elementId=E),p?null:t.createElement(s.F,{severity:"warning",title:"Angular plugin",className:l,onRemove:()=>b(!0)},t.createElement("p",null,o(g,d)),t.createElement("div",{className:"markdown-html"},t.createElement("ul",null,t.createElement("li",null,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/",className:"external-link",target:"_blank",rel:"noreferrer",onClick:()=>{(0,r.rR)("angular_deprecation_docs_clicked",a)}},"Read our deprecation notice and migration advice.")),u&&c?t.createElement("li",null,t.createElement("a",{href:`plugins/${encodeURIComponent(c)}`,className:"external-link",target:"_blank",rel:"noreferrer"},"View plugin details")):null)))}},8480:(Q,I,e)=>{"use strict";e.d(I,{Hv:()=>s,mz:()=>o});var t=e(32264);function n(m){return Object.values(t.$.datasources).find(i=>i.uid===m)??null}function r(m){return n(m)?.meta.angular?.detected??!1}function s(m){const i=n(m);return(i?.meta.angular?.detected&&!i?.meta.angular.hideDeprecation)??!1}const o=new Set(["autoMigrateOldPanels","autoMigrateGraphPanel","autoMigrateTablePanel","autoMigratePiechartPanel","autoMigrateWorldmapPanel","autoMigrateStatPanel","disableAngular"])},72798:(Q,I,e)=>{"use strict";e.d(I,{A:()=>n,S:()=>s});var t=e(96540);const n=t.createContext(r());n.displayName="PluginPageContext";function r(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(o){return{sectionNav:o??r().sectionNav}}},10803:(Q,I,e)=>{"use strict";e.d(I,{p:()=>s});var t=e(96540),n=e(43429),r=e(39938);const s=m=>{const i=o(m.state);return i?t.createElement(r.E,{className:m.className,color:i.color,title:i.tooltip,text:i.text,icon:i.icon}):null};function o(m){switch(m){case n.pn.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case n.pn.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case n.pn.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},31193:(Q,I,e)=>{"use strict";e.d(I,{tR:()=>h,xq:()=>p});var t=e(40187),n=e(26272),r=e(80147),s=e(72574),o=e(81634),m=e(17172),i=e(19347),l=e(26657),d=e(28138),c=e(2913),g=e(53478),u=e(66718),E=e(22854);class p{constructor(y=(0,s.w)()){this.templateSrv=y,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(y,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=y,this.defaultName=C;for(const f of Object.values(y))f.uid||(f.uid=f.name),this.settingsMapByUid[f.uid]=f,this.settingsMapById[f.id]=f;this.datasources[l.dR.type]=g.Ex,this.datasources[u.Uj]=g.Ex,this.settingsMapByUid[l.dR.uid]=g.$i,this.settingsMapByUid[u.Uj]=g.$i}getDataSourceSettingsByUid(y){return this.settingsMapByUid[y]}getInstanceSettings(y,C){let f=b(y);if((0,l.s9)(f))return g.$i;if(f==="default"||f==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(f[0]==="$"){const D=this.templateSrv.replace(f,C,a);let T;return D==="default"?T=this.settingsMapByName[this.defaultName]:T=this.settingsMapByUid[D]??this.settingsMapByName[D],T?{...T,isDefault:!1,name:f,uid:f,rawRef:{type:T.type,uid:T.uid}}:void 0}return this.settingsMapByUid[f]??this.settingsMapByName[f]??this.settingsMapById[f]}get(y,C){let f=b(y);if(!f)return this.get(this.defaultName);if((0,l.s9)(y))return Promise.resolve(this.datasources[u.Uj]);const D=this.settingsMapByName[f];return D&&(f=D.uid),this.datasources[f]?Promise.resolve(this.datasources[f]):(f=this.templateSrv.replace(f,C,a),f==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[f]?Promise.resolve(this.datasources[f]):this.loadDatasource(f))}async loadDatasource(y){if(this.datasources[y])return Promise.resolve(this.datasources[y]);const C=this.getInstanceSettings(y);if(!C)return Promise.reject({message:`Datasource ${y} was not found`});try{const f=await(0,E.cS)(C.meta);if(this.datasources[y])return this.datasources[y];const D=f.DataSourceClass.length!==1;let T;if(D?T=(0,o.C)().instantiate(f.DataSourceClass,{instanceSettings:C}):T=new f.DataSourceClass(C),T.components=f.components,!(T instanceof t.mA)){const M=T;M.name=C.name,M.id=C.id,M.type=C.type,M.meta=C.meta,M.uid=C.uid,T.getRef=t.mA.prototype.getRef}return this.datasources[y]=T,this.datasources[T.uid]=T,T}catch(f){return f instanceof Error&&d.A.emit(n.r1.alertError,[C.name+" plugin failed",f.toString()]),Promise.reject({message:`Datasource: ${y} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(y={}){const C=Object.values(this.settingsMapByName).filter(D=>!(D.meta.id==="grafana"||D.meta.id==="mixed"||D.meta.id==="dashboard"||y.metrics&&!D.meta.metrics||y.tracing&&!D.meta.tracing||y.logs&&D.meta.category!=="logging"&&!D.meta.logs||y.annotations&&!D.meta.annotations||y.alerting&&!D.meta.alerting||y.pluginId&&!(0,r._)(y.pluginId,D.meta)||y.filter&&!y.filter(D)||y.type&&(Array.isArray(y.type)?!y.type.includes(D.type):y.type!==D.type)||!y.all&&D.meta.metrics!==!0&&D.meta.annotations!==!0&&D.meta.tracing!==!0&&D.meta.logs!==!0&&D.meta.alerting!==!0));if(y.variables)for(const D of this.templateSrv.getVariables()){if(D.type!=="datasource")continue;let T=D.current.value==="default"?this.defaultName:D.current.value;Array.isArray(T)&&(T=T[0]);const M=!Array.isArray(T)&&(this.settingsMapByName[T]||this.settingsMapByUid[T]);if(M){const O=`\${${D.name}}`;C.push({...M,isDefault:!1,name:O,uid:O})}}const f=C.sort((D,T)=>D.name.toLowerCase()>T.name.toLowerCase()?1:D.name.toLowerCase()<T.name.toLowerCase()?-1:0);if(!y.pluginId&&!y.alerting){if(y.mixed){const D=this.getInstanceSettings("-- Mixed --");D&&C.push(D)}if(y.dashboard){const D=this.getInstanceSettings("-- Dashboard --");D&&C.push(D)}if(!y.tracing){const D=this.getInstanceSettings("-- Grafana --");D&&C.push(D)}}return f}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(y=>({name:y.name,value:y.name,meta:y.meta}))}getMetricSources(y){return this.getList({metrics:!0,variables:!y?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const y=await(0,m.AI)().get("/api/frontend/settings");c.Ay.datasources=y.datasources,c.Ay.defaultDatasource=y.defaultDatasource,this.init(y.datasources,y.defaultDatasource)}}function b(P){return(0,l.s9)(P)?l.dR.uid:typeof P=="string"?P:P?.uid}function a(P){return Array.isArray(P)?P[0]:P}const h=()=>(0,i.l)()},75462:(Q,I,e)=>{"use strict";e.d(I,{$Y:()=>T,FF:()=>E,N9:()=>A,io:()=>S,nv:()=>P,ol:()=>C,pL:()=>x,yS:()=>b,yb:()=>h,yt:()=>f,z1:()=>p});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(16817),m=e(74135),i=e(13834),l=e(47232),d=e(37390),c=e(28138),g=e(27716),u=e(28444);function E(R){console.warn(`[Plugin Extensions] ${R}`)}function p(R){return typeof R=="object"&&"type"in R&&R.type===m.u.link}function b(R){return typeof R=="object"&&"type"in R&&R.type===m.u.component}function a(R,B=""){return(...U)=>{try{return R(...U)}catch(w){w instanceof Error&&console.warn(`${B}${w.message}`)}}}function h(R,B){return{openModal:async w=>{const{title:K,body:N,width:L,height:V}=w;c.A.publish(new u.S8({component:P(R,y({title:K,body:N,width:L,height:V}))}))},context:B}}const P=(R,B)=>w=>{const{error:K,loading:N,value:L}=(0,o.A)(()=>(0,g.x)(R,{showErrorAlert:!1}));return N?null:K?(E(`Could not fetch plugin meta information for "${R}", aborting. (${K.message})`),null):L?s.createElement(i.a,{meta:L},s.createElement(B,{...w})):(E(`Fetched plugin meta information is empty for "${R}", aborting.`),null)},y=({title:R,body:B,width:U,height:w})=>{const K=(0,t.css)({width:U,height:w});return({onDismiss:L})=>s.createElement(d.a,{title:R,className:K,isOpen:!0,onDismiss:L,onClickBackdrop:L},s.createElement(B,{onDismiss:L}))};function C(R,B=new Map){if(!R||typeof R!="object"||Object.isFrozen(R))return R;const U=Array.isArray(R)?[...R]:{...R};if(B.has(R))return B.get(R);B.set(R,U);const w=Reflect.ownKeys(U);for(const K of w){const N=Array.isArray(U)?U[Number(K)]:U[K];N&&(typeof N=="object"||typeof N=="function")&&(Array.isArray(U)?U[Number(K)]=C(N,B):U[K]=C(N,B))}return Object.freeze(U)}function f(R,B){const U=`${R}${B.extensionPointId}${B.title}`;return Array.from(U).reduce((w,K)=>Math.imul(31,w)+K.charCodeAt(0)|0,0).toString()}const D=Symbol("isReadOnlyProxy");function T(R){if(!R||typeof R!="object"||O(R))return R;const B=new WeakMap;return new Proxy(R,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(U,w,K){if(w===D)return!0;const N=Reflect.get(U,w,K);return(0,l.Ar)(N)?(0,l.KQ)(N):(0,n.isObject)(N)||(0,n.isArray)(N)?(B.has(N)||B.set(N,T(N)),B.get(N)):N}})}function M(R){return typeof R=="object"&&R!==null}function O(R){return M(R)&&R[D]===!0}function S(R){const B={type:m.u.link,...R};return v(B),B}function v(R){if(R.type!==m.u.link)throw Error("config is not a extension link")}function x(R,B){return R.length<B?R:`${R.slice(0,B-3).trimEnd()}...`}function A(R){const B={},U=[];for(const K of R){const N=K.category;if(!N){U.push({text:x(K.title,25),href:K.path,onClick:K.onClick});continue}Array.isArray(B[N])||(B[N]=[]),B[N].push({text:x(K.title,25),href:K.path,onClick:K.onClick})}const w=Object.keys(B).reduce((K,N)=>(K.push({text:x(N,25),type:"group",subMenu:B[N]}),K),[]);return U.length>0&&(w.length>0&&w.push({text:"divider",type:"divider"}),Array.prototype.push.apply(w,U)),w}},15162:(Q,I,e)=>{"use strict";e.d(I,{Kk:()=>c,PY:()=>g,TV:()=>i,d4:()=>d,f7:()=>p,oZ:()=>l});var t=e(65158),n=e(2913),r=e(41394),s=e(22854);const o={},m={};function i(b){const a=o[b];if(a)return a;const h=d(b);if(!h)throw new Error(`Plugin ${b} not found`);return o[b]=u(h),b!==h.type&&(o[h.type]=o[b]),o[b]}function l(b){return!!d(b)}function d(b){const a=n.Ay.panels[b];if(!a){for(const h of Object.values(n.Ay.panels))if(h.aliasIDs?.includes(b))return h}return a}function c(b){return u(b)}function g(b){return m[b]}function u(b){return(0,s.j4)({path:b.module,version:b.info?.version,isAngular:b.angular?.detected,pluginId:b.id}).then(a=>{if(a.plugin)return a.plugin;if(a.PanelCtrl){const h=new t.m(null);return h.angularPanelCtrl=a.PanelCtrl,h}throw new Error("missing export: plugin or PanelCtrl")}).then(a=>(a.meta=b,m[b.id]=a,!a.panel&&a.angularPanelCtrl&&(a.panel=E(a)),a)).catch(a=>(console.warn("Error loading panel plugin: "+b.id,a),(0,r.W)(b,a)))}let E=b=>null;function p(b){E=b}},81900:(Q,I,e)=>{"use strict";e.d(I,{GD:()=>s,ni:()=>m,sk:()=>o});var t=e(27716);const n={},r=Date.now();function s({path:l,version:d}){const c=i(l);c&&!n[c]&&(n[c]=encodeURI(d))}function o(l){const d=`plugins/${l}/module`;n[d]&&delete n[d],(0,t.o)(l)}function m(l,d=r){const c=i(l);if(!c)return`${l}?_cache=${d}`;const u=n[c]||d;return`${l}?_cache=${u}`}function i(l){const d=/\/?.+\/(plugins\/.+\/module)\.js/i.exec(l);if(!d)return;const[c,g]=d;if(g)return g}},45179:(Q,I,e)=>{"use strict";e.d(I,{$b:()=>n,Bu:()=>r,XV:()=>t});const t="package",n=/^plugins.+\.css$/i,r=/^(text|application)\/(x-)?javascript(;|$)/},63770:(Q,I,e)=>{"use strict";e.d(I,{z:()=>i});var t=e(59511),n=e.n(t),r=e(65024),s=e.n(r),o=e(35135),m=e.n(o);const i=window.System},94429:(Q,I,e)=>{"use strict";e.d(I,{kB:()=>g,OD:()=>u,Av:()=>E});var t=e(32264),n=e(66161),r=e(45179),s=e(34867);const o=new WeakMap,m={};function i(p,b,a){const h={get(P,y){if(document.currentScript===null&&typeof y!="symbol"&&y.toString()!=="__useDefault"){const f=`${b}.${String(y)}`,D=`${f}`;m[D]||(m[D]=!0,(0,s.fH)(`Plugin using ${f}`,{key:String(y),parent:b,packageName:a}))}let C=Reflect.get(P,y);return C!==null&&typeof C=="object"&&!(C instanceof RegExp)?(o.has(C)||o.set(C,i(C,`${b}.${String(y)}`,a)),o.get(C)):(typeof C=="function"&&(C=C.bind(P)),C)}};return typeof p=="object"&&p!==null?new Proxy(p,h):p}const l=/^(@grafana|app\/)/;function d(p,b){return l.test(b)?i(p,b,b):p}var c=e(63770);function g(p){return Object.keys(p).reduce((b,a)=>{const h=`${r.XV}:${a}`,P=t.$.featureToggles.pluginsAPIMetrics?d(p[a],a):p[a];return c.z.set(h,P),n.s.set(a,p[a]),b[a]=h,b},{})}function u(p){return!!t.$.pluginsCDNBaseURL&&p.startsWith(t.$.pluginsCDNBaseURL)}function E(p){return p.startsWith("http")||p.startsWith("/")?p:`${t.$.appSubUrl??""}/${p}`}},27716:(Q,I,e)=>{"use strict";e.d(I,{o:()=>s,x:()=>r});var t=e(17172);const n={};function r(o,m){const i=n[o];return i?Promise.resolve(i):(0,t.AI)().get(`/api/plugins/${o}/settings`,void 0,void 0,m).then(l=>(n[o]=l,l)).catch(l=>typeof l=="object"&&l!==null&&"status"in l&&l.status===403?(l.isHandled=!0,Promise.reject(l)):Promise.reject(new Error("Unknown Plugin")))}const s=o=>o?delete n[o]:Object.keys(n).forEach(m=>delete n[m])},22854:(Q,I,e)=>{"use strict";e.d(I,{ui:()=>Ep,cS:()=>vp,j4:()=>Wd});var t={};e.r(t),e.d(t,{plugin:()=>lt});var n={};e.r(n),e.d(n,{plugin:()=>Jn});var r={};e.r(r),e.d(r,{plugin:()=>nl});var s={};e.r(s),e.d(s,{plugin:()=>Dl});var o={};e.r(o),e.d(o,{plugin:()=>Os});var m={};e.r(m),e.d(m,{plugin:()=>zc});var i={};e.r(i),e.d(i,{plugin:()=>rd});var l={};e.r(l),e.d(l,{plugin:()=>id});var d={};e.r(d),e.d(d,{plugin:()=>oc});var c={};e.r(c),e.d(c,{plugin:()=>ut});var g={};e.r(g),e.d(g,{plugin:()=>Ji});var u={};e.r(u),e.d(u,{plugin:()=>Qs});var E={};e.r(E),e.d(E,{plugin:()=>Pm});var p={};e.r(p),e.d(p,{plugin:()=>Cm});var b={};e.r(b),e.d(b,{plugin:()=>Wm});var a={};e.r(a),e.d(a,{plugin:()=>Qm});var h={};e.r(h),e.d(h,{plugin:()=>Jm});var P={};e.r(P),e.d(P,{plugin:()=>Cd});var y={};e.r(y),e.d(y,{plugin:()=>gf});var C={};e.r(C),e.d(C,{plugin:()=>Rf});var f={};e.r(f),e.d(f,{plugin:()=>Uf});var D={};e.r(D),e.d(D,{plugin:()=>Kf});var T={};e.r(T),e.d(T,{plugin:()=>_f});var M=e(40187),O=e(41987),S=e(32264),v=e(96540),x=e(65158),A=e(67061),R=e(55852),B=e(85242),U=e(51612),w=e(31678),K=e(57220),N=e(2543),L=e.n(N),V=e(88323),F=e(14578),z=e(61410),Y=e(23770),H=e(88467),k=e(94822),ee=e(98164),ie=e(54317);function fe(j,ce){const ve=(0,ee.J$)(j);return(0,ee.Av)(ce,ve)}function q(j,ce){const{stateFilter:ve,alertInstanceLabelFilter:Ie}=j;return(0,N.isEmpty)(ve)?ce:ce.filter(Ke=>(ve.firing&&((0,ie.S)(Ke,k.Gi.Alerting)||(0,ie.S)(Ke,k.cF.Firing))||ve.pending&&((0,ie.S)(Ke,k.Gi.Pending)||(0,ie.S)(Ke,k.cF.Pending))||ve.noData&&(0,ie.S)(Ke,k.Gi.NoData)||ve.normal&&(0,ie.S)(Ke,k.Gi.Normal)||ve.error&&(0,ie.S)(Ke,k.Gi.Error)||ve.inactive&&(0,ie.S)(Ke,k.cF.Inactive))&&(Ie?fe(j.alertInstanceLabelFilter,Ke.labels):!0))}function Z(j){return!(j.startsWith("__")&&j.endsWith("__"))}const J=j=>{const{onChange:ce,id:ve,defaultValue:Ie,dataSource:Ke}=j,Ge=(0,w.useDispatch)();(0,v.useEffect)(()=>{Ke?Ke&&Ge((0,Y.mB)({rulesSourceName:Ke})):Ge((0,Y.nV)())},[Ge,Ke]);const nt=(0,z.$)(Rt=>Rt.promRules),gt=(0,H.p0)(nt),vt=(0,H.Vf)(nt),bt=(0,v.useMemo)(()=>{if((0,N.isEmpty)(nt))return[];if(!gt)return[];const Rt=Object.keys(nt).flatMap(Lt=>nt[Lt].result??[]).flatMap(Lt=>Lt.groups).flatMap(Lt=>Lt.rules.filter(Nt=>Nt.type===k.JS.Alerting)).flatMap(Lt=>Lt.alerts??[]).map(Lt=>Object.keys(Lt.labels??{})).flatMap(Lt=>Lt.filter(Z));return(0,N.uniq)(Rt)},[gt,nt]);return v.createElement(V.KF,{id:ve,isLoading:vt,defaultValue:Ie,"aria-label":"group by label keys",placeholder:"Group by",prefix:v.createElement(F.I,{name:"tag-alt"}),onChange:Rt=>{ce(Rt.map(Lt=>Lt.value??""))},options:bt.map(Rt=>({label:Rt,value:Rt}))})};var G=e(32196),ne=e(42941),te=e(94701),oe=e(3591),le=e(40845),ue=e(40276),Te=e(37494),he=e(39558),re=e(42418),De=e(2913),Fe=e(55907),Ee=e(79938),Me=e(15300),ze=e(9518),xe=e(55740),We=e(23662),be=e(14792),pe=e(19073),Ue=e(64861),we=e(15458),je=e(55127),He=e.n(je),rt=e(80045),Je=e(56361),Ve=e(15054);const Oe=({rule:j,alerts:ce,options:ve,grafanaTotalInstances:Ie,handleInstancesLimit:Ke,limitInstances:Ge,grafanaFilteredInstancesTotal:nt})=>{const gt=ve.groupMode===Ue.r6.Custom?!0:ve.showInstances,[vt,bt]=(0,v.useState)(gt),Rt=(0,le.of)(Ne),Lt=(0,le.of)(R.my),Nt=(0,v.useCallback)(()=>{bt(Wa=>!Wa)},[]),St=(0,v.useMemo)(()=>q(ve,(0,Je.Cp)(ve.sortOrder,ce))??[],[ce,ve]),Qt=Ie!==void 0,Zt=Ie&&nt?Ie-nt:0,jt=ce.length-St.length,Yt=Qt?Zt:jt,tn=St.length>0,Pn=tn?Nt:N.noop;(0,v.useEffect)(()=>{St.length===0&&bt(!1)},[St]);const ln=async()=>{Ke&&(Ke(!1),bt(!0))},Zn=async()=>{Ke&&(Ke(!0),bt(!0))},Nn=Ge?nt:St.length,zn=St.length,Aa=Qt?Nn:zn,ma=Ge?`Showing ${Me.Ys} of ${Ie} instances`:`Showing all ${Ie} instances`,Da=Ge?"View all instances":`Limit the result to ${Me.Ys} instances`,Sn=Ie&&Me.Ys===St.length&&Ie>St.length,wn=Ie&&Me.Ys<St.length&&!Ge,Ln=Sn||wn?v.createElement("div",{className:Rt.footerRow},v.createElement("div",null,ma),v.createElement(R.$n,{size:"sm",variant:"secondary",onClick:Ge?ln:Zn},Da)):void 0;return v.createElement("div",null,ve.groupMode===Ue.r6.Default&&v.createElement("button",{className:(0,G.cx)(Lt,tn?Rt.clickable:""),onClick:()=>Pn()},tn&&v.createElement(F.I,{name:vt?"angle-down":"angle-right",size:"md"}),v.createElement("span",null,`${Aa} ${He()("instance",Aa)}`),Yt>0&&v.createElement("span",null,", ",`${Yt} hidden by filters`)),vt&&v.createElement(rt.D,{rule:j,instances:St,pagination:{itemsPerPage:2*Ve.FG},footerRow:Ln}))},Ne=j=>({clickable:(0,G.css)`
    cursor: pointer;
  `,footerRow:(0,G.css)`
    display: flex;
    flex-direction: column;
    gap: ${j.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),ye="__ungrouped__",se=({rules:j,options:ce})=>{const ve=(0,le.of)(it),Ie=ce.groupBy,Ke=(0,v.useMemo)(()=>{const Ge=new Map,nt=bt=>Ie?Pe(bt,Ie):!0;j.forEach(bt=>{const Rt=(0,We.TU)(bt),Lt=nt(bt);(Rt?.alerts??[]).forEach(Nt=>{const St=Lt?ae(Ie,Nt.labels):ye,Qt=Ge.get(St)?.alerts??[];Ge.set(St,{rule:bt,alerts:[...Qt,Nt]})})});const gt=Ge.get(ye)?.alerts??[];return Ge.delete(ye),Ge.set(ye,{alerts:gt}),Array.from(Ge.entries()).reduce((bt,[Rt,{rule:Lt,alerts:Nt}])=>{const St=q(ce,Nt);return St.length>0&&bt.set(Rt,{rule:Lt,alerts:St}),bt},new Map)},[Ie,j,ce]);return v.createElement(v.Fragment,null,Array.from(Ke).map(([Ge,{rule:nt,alerts:gt}])=>v.createElement("li",{className:ve.alertRuleItem,key:Ge,"data-testid":Ge},v.createElement("div",null,v.createElement("div",{className:ve.customGroupDetails},v.createElement("div",{className:ve.alertLabels},Ge!==ye&&ge(Ge).map(([vt,bt])=>v.createElement(we.R,{key:vt,labelKey:vt,value:bt})),Ge===ye&&"No grouping")),v.createElement(Oe,{rule:nt,alerts:gt,options:ce})))))};function ae(j,ce){return new URLSearchParams(j.map(ve=>[ve,ce[ve]])).toString()}function ge(j){return[...new URLSearchParams(j)]}function Pe(j,ce){const ve=(0,We.TU)(j);return ce.every(Ie=>(ve?.alerts??[]).some(Ke=>Ke.labels[Ie]))}const Re=se;var Be=e(87586),_e=e(70416),Xe=e(26058),tt=e(18461),at=e(3704);function st(j){return Object.values(j).filter(ce=>ce!==void 0).reduce((ce,ve)=>ce+ve,0)}const dt=({rules:j,options:ce,handleInstancesLimit:ve,limitInstances:Ie,hideViewRuleLinkText:Ke})=>{const Ge=(0,le.of)(it),nt=(0,le.of)(ot),{href:gt}=(0,Be.A)(),vt=j.length<=ce.maxItems?j:j.slice(0,ce.maxItems);return v.createElement(v.Fragment,null,v.createElement("ol",{className:Ge.alertRuleList},vt.map((bt,Rt)=>{const{namespaceName:Lt,groupName:Nt,dataSourceName:St}=bt,Qt=(0,We.Z8)(bt.promRule)?bt.promRule:void 0,Zt=(0,We.Om)(Qt),jt=(0,tt.UP)(bt.dataSourceName,bt),Yt=(0,tt.$9)(jt),tn=bt.dataSourceName===K.hY?st(bt.instanceTotals):void 0,Pn=bt.dataSourceName===K.hY?st(bt.filteredInstanceTotals):void 0,ln=(0,at.c)(`/alerting/${encodeURIComponent(St)}/${encodeURIComponent(Yt)}/view`,{returnTo:gt??""});return Qt?v.createElement("li",{className:Ge.alertRuleItem,key:`alert-${Lt}-${Nt}-${bt.name}-${Rt}`},v.createElement("div",{className:nt.icon},v.createElement(F.I,{name:Fe.A.getStateDisplayModel(Qt.state).iconClass,className:nt[(0,We.Wy)(Qt.state)],size:"lg"})),v.createElement("div",{className:Ge.alertNameWrapper},v.createElement("div",{className:Ge.instanceDetails},v.createElement(A.B,{direction:"row",gap:1},v.createElement("div",{className:Ge.alertName,title:bt.name},bt.name),v.createElement(Xe.h,null),ln&&v.createElement("a",{href:ln,target:"__blank",className:Ge.link,rel:"noopener","aria-label":"View alert rule"},v.createElement("span",{className:(0,G.cx)({[Ge.hidden]:Ke})},"View alert rule"),v.createElement(F.I,{name:"external-link-alt",size:"sm"}))),v.createElement("div",{className:Ge.alertDuration},v.createElement("span",{className:nt[(0,We.Wy)(Qt.state)]},(0,We.XI)(Qt.state))," ",Zt&&Qt.state!==k.cF.Inactive&&v.createElement(v.Fragment,null,"for"," ",v.createElement("span",null,(0,_e.dU)({start:Zt,end:Date.now()}))))),v.createElement(Oe,{rule:bt,alerts:Qt.alerts??[],options:ce,grafanaTotalInstances:tn,grafanaFilteredInstancesTotal:Pn,handleInstancesLimit:ve,limitInstances:Ie}))):null})))},ot=j=>({common:(0,G.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${j.shape.radius.default};
    font-size: ${j.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,G.css)`
    margin-top: ${j.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,G.css)`
    color: ${j.colors.success.main};
  `,bad:(0,G.css)`
    color: ${j.colors.error.main};
  `,warning:(0,G.css)`
    color: ${j.colors.warning.main};
  `,neutral:(0,G.css)`
    color: ${j.colors.secondary.main};
  `,info:(0,G.css)`
    color: ${j.colors.primary.main};
  `}),ft=dt;function yt(j){const ce=(ve,[Ie,Ke])=>Ke?[...ve,Ie]:ve;return Object.entries(j).reduce(ce,[])}const Tt=({dispatch:j,limitInstances:ce,matcherList:ve,dataSourceName:Ie,stateList:Ke})=>{j(Ie?(0,Y.Lc)({rulesSourceName:Ie,limitAlerts:ce?Me.Ys:void 0,matcher:ve,state:Ke}):(0,Y.yo)(!1,{limitAlerts:ce?Me.Ys:void 0,matcher:ve,state:Ke}))};function Kt(j){const ce=(0,w.useDispatch)(),[ve,Ie]=(0,ne.A)(!0),[,Ke]=(0,pe.Ej)(pe.RY.ViewAlertRule),{usePrometheusRulesByNamespaceQuery:Ge}=Ee.hK,nt=(0,z.$)(ha=>ha.promRules),gt=(0,z.$)(ha=>ha.rulerRules),vt=(0,H.t4)(nt),bt=j.width<320;(0,v.useEffect)(()=>{j.options.stateFilter.inactive===!0&&(j.options.stateFilter.normal=!0),j.options.stateFilter.inactive=void 0},[j.options.stateFilter]);let Rt;(0,te.A)(()=>{Rt=(0,be.UA)().getCurrent()});const Lt=(0,v.useMemo)(()=>yt(j.options.stateFilter),[j.options.stateFilter]),{options:Nt,replaceVariables:St}=j,Qt=Nt.datasource===K.vv?K.hY:Nt.datasource,Zt={...j.options,alertName:St(Nt.alertName),alertInstanceLabelFilter:St(Nt.alertInstanceLabelFilter)},jt=(0,v.useMemo)(()=>(0,ee.J$)(Zt.alertInstanceLabelFilter),[Zt.alertInstanceLabelFilter]),Yt=(!Qt||Qt===K.hY)&&Ke,{currentData:tn=[],isLoading:Pn,refetch:ln}=Ge({limitAlerts:ve?Me.Ys:void 0,matcher:jt,state:Lt},{skip:!Yt});(0,v.useEffect)(()=>{nt.loading||Tt({dispatch:ce,limitInstances:ve,matcherList:jt,dataSourceName:Qt,stateList:Lt});const ha=Rt?.events.subscribe(oe.sR,()=>{Yt&&ln(),(!Qt||Qt!==K.hY)&&Tt({dispatch:ce,limitInstances:ve,matcherList:jt,dataSourceName:Qt,stateList:Lt})});return()=>{ha?.unsubscribe()}},[ce,Rt,jt,Lt,ve,Qt,ln,Yt,nt.loading]);const Zn=ha=>{ha?(Tt({dispatch:ce,limitInstances:ve,matcherList:jt,dataSourceName:Qt,stateList:Lt}),Ie(!0)):(Tt({dispatch:ce,limitInstances:!1,matcherList:jt,dataSourceName:Qt,stateList:Lt}),Ie(!1))},Nn=(0,ze.dy)(void 0,tn),zn=(0,H.t4)(gt),Aa=(0,H.BU)(nt),ma=vt||zn,Da=(0,H.Vf)(nt),Sn=(0,le.of)(it),wn=(0,We.dS)(Nn),Ln=j.options.sortOrder,Wa=(0,v.useMemo)(()=>_t(j,Gt(Ln,wn)),[wn,Ln,j]),Za=Wa.length===0?"No alerts matching filters":void 0,ds=Pn||ma&&Da&&!Aa,la=Object.values(nt).some(ha=>ha.result);return v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},v.createElement("div",{className:Sn.container},la&&Za&&v.createElement("div",{className:Sn.noAlertsMessage},Za),la&&v.createElement("section",null,j.options.viewMode===Ue.nE.Stat&&v.createElement(Te.yV,{width:j.width,height:j.height,graphMode:Te.$p.None,textMode:Te.SV.Auto,justifyMode:Te.F8.Auto,theme:De.config.theme2,value:{text:`${Wa.length}`,numeric:Wa.length}}),j.options.viewMode===Ue.nE.List&&j.options.groupMode===Ue.r6.Custom&&v.createElement(Re,{rules:Wa,options:Zt}),j.options.viewMode===Ue.nE.List&&j.options.groupMode===Ue.r6.Default&&v.createElement(ft,{rules:Wa,options:Zt,handleInstancesLimit:Zn,limitInstances:ve,hideViewRuleLinkText:bt})),ds&&v.createElement(he._,{text:"Loading..."})))}function Gt(j,ce){if(j===Ue.xB.Importance)return(0,N.sortBy)(ce,Ie=>Fe.A.alertStateSortScore[Ie.state]);if(j===Ue.xB.TimeAsc)return(0,N.sortBy)(ce,Ie=>{const Ke=(0,We.TU)(Ie)??void 0;return(0,We.Om)(Ke)||new Date});if(j===Ue.xB.TimeDesc)return(0,N.sortBy)(ce,Ie=>{const Ke=(0,We.TU)(Ie)??void 0;return(0,We.Om)(Ke)||new Date}).reverse();const ve=(0,N.sortBy)(ce,Ie=>Ie.name.toLowerCase());return j===Ue.xB.AlphaDesc&&ve.reverse(),ve}function _t(j,ce){const{options:ve,replaceVariables:Ie}=j;let Ke=[...ce];if(ve.dashboardAlerts){const Ge=(0,be.UA)().getCurrent()?.uid;Ke=Ke.filter(({annotations:nt={}})=>Object.entries(nt).some(([gt,vt])=>gt===xe.YH.dashboardUID&&vt===Ge))}if(ve.alertName){const Ge=Ie(ve.alertName);Ke=Ke.filter(({name:nt})=>nt.toLocaleLowerCase().includes(Ge.toLocaleLowerCase()))}if(Ke=Ke.filter(Ge=>{const nt=(0,We.TU)(Ge);return nt?ve.stateFilter.firing&&nt.state===k.cF.Firing||ve.stateFilter.pending&&nt.state===k.cF.Pending||ve.stateFilter.normal&&nt.state===k.cF.Inactive:!1}),ve.folder&&(Ke=Ke.filter(Ge=>Ge.namespaceName===ve.folder.title)),ve.datasource){const Ge=ve.datasource===K.vv;Ke=Ke.filter(Ge?({dataSourceName:nt})=>nt===K.hY:({dataSourceName:nt})=>nt===ve.datasource)}return Ke=Ke.reduce((Ge,nt)=>{const gt=(0,We.TU)(nt);return(gt?q({stateFilter:ve.stateFilter,alertInstanceLabelFilter:Ie(ve.alertInstanceLabelFilter)},gt.alerts??[]):[]).length&&Ge.push(nt),Ge},[]),Ke}const it=j=>({cardContainer:(0,G.css)`
    padding: ${j.spacing(.5)} 0 ${j.spacing(.25)} 0;
    line-height: ${j.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,G.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,G.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,G.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${j.colors.background.secondary};
    padding: ${j.spacing(.5)} ${j.spacing(1)};
    border-radius: ${j.shape.radius.default};
    margin-bottom: ${j.spacing(.5)};

    gap: ${j.spacing(2)};
  `,alertName:(0,G.css)`
    font-size: ${j.typography.h6.fontSize};
    font-weight: ${j.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,G.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,G.css)`
    > * {
      margin-right: ${j.spacing(.5)};
    }
  `,alertDuration:(0,G.css)`
    font-size: ${j.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,G.css)`
    font-weight: ${j.typography.fontWeightBold};
    font-size: ${j.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,G.css)`
    color: ${j.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,G.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,G.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,G.css)`
    margin-right: ${j.spacing(.5)};
  `,instanceDetails:(0,G.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,G.css)`
    margin-bottom: ${j.spacing(.5)};
  `,link:(0,G.css)`
    word-break: break-all;
    color: ${j.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${j.spacing(1)};
  `,hidden:(0,G.css)`
    display: none;
  `});function Mt(j){const[,ce]=(0,pe.Ej)(pe.RY.ViewAlertRule),[,ve]=(0,pe.Ej)(pe.RY.ViewExternalAlertRule);return!ce&&!ve?v.createElement(re.F,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):v.createElement(Kt,{...j})}const lt=new x.m(Mt).setPanelOptions(j=>{j.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:Ue.nE.List,settings:{options:[{label:"List",value:Ue.nE.List},{label:"Stat",value:Ue.nE.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Ue.r6.Default,settings:{options:[{value:Ue.r6.Default,label:"Default grouping"},{value:Ue.r6.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:ce=>ce.groupMode===Ue.r6.Custom,category:["Options"],editor:ce=>v.createElement(J,{id:ce.id??"groupBy",defaultValue:ce.value.map(ve=>({label:ve,value:ve})),onChange:ce.onChange,dataSource:ce.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Ue.xB.AlphaAsc},{label:"Alphabetical (desc)",value:Ue.xB.AlphaDesc},{label:"Importance",value:Ue.xB.Importance},{label:"Time (asc)",value:Ue.xB.TimeAsc},{label:"Time (desc)",value:Ue.xB.TimeDesc}]},defaultValue:Ue.xB.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts linked to this dashboard",description:"Only show alerts linked to this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter from alert source",id:"datasource",defaultValue:null,editor:function(ve){return v.createElement(A.B,{gap:1},v.createElement(U.s,{...ve,type:["prometheus","loki","grafana"],noDefault:!0,current:ve.value,onChange:Ie=>ve.onChange(Ie.name)}),v.createElement(R.$n,{variant:"secondary",onClick:()=>ve.onChange(null)},"Clear"))},category:["Filter"]}).addCustomEditor({showIf:ce=>ce.datasource===K.vv||!ce.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ve){return v.createElement(B.sR,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ve.value?.title,initialFolderUid:ve.value?.uid,permissionLevel:w.PermissionLevelString.View,onClear:()=>ve.onChange(""),...ve})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})});var Ct=e(79924),Vt=e(64423),qt=e(71733),rn=e(26272),en=e(69129),Jt=e(47232),hn=e(12131),Fn=e(17172),Kn=e(64149),na=e(3911),Ut=e(85918),on=e(28138),mn=e(10860),vn=e(44522),pn=e(56034);const Un=({options:j,annotation:ce,formatDate:ve,onClick:Ie,onAvatarClick:Ke,onTagClick:Ge})=>{const nt=(0,le.of)(Mn),{showUser:gt,showTags:vt,showTime:bt}=j,{text:Rt="",login:Lt,email:Nt,avatarUrl:St,tags:Qt,time:Zt,timeEnd:jt}=ce,Yt=()=>{Ie(ce)},tn=()=>{Ke(ce)},Pn=Lt&&gt,ln=Zt&&bt,Zn=jt&&jt!==Zt&&bt;return v.createElement(mn.Z,{className:nt.card,onClick:Yt},v.createElement(mn.Z.Heading,null,v.createElement(vn.I,{className:nt.heading,onClick:Nn=>{Nn.stopPropagation()},content:Rt})),ln&&v.createElement(mn.Z.Description,{className:nt.timestamp},v.createElement(kn,{formatDate:ve,time:Zt}),Zn&&v.createElement(v.Fragment,null,v.createElement("span",{className:nt.time},"-"),v.createElement(kn,{formatDate:ve,time:jt})," ")),Pn&&v.createElement(mn.Z.Meta,{className:nt.meta},v.createElement(Bn,{email:Nt,login:Lt,avatarUrl:St,onClick:tn})),vt&&Qt&&v.createElement(mn.Z.Tags,null,v.createElement(Kn.L,{tags:Qt,onClick:Nn=>Ge(Nn,!1)})))},Bn=({onClick:j,avatarUrl:ce,login:ve,email:Ie})=>{const Ke=(0,le.of)(Mn),Ge=gt=>{gt.stopPropagation(),j()},nt=v.createElement("span",null,"Created by:",v.createElement("br",null)," ",Ie);return v.createElement(pn.m,{content:nt,theme:"info",placement:"top"},v.createElement("button",{onClick:Ge,className:Ke.avatar},v.createElement("img",{src:ce,alt:"avatar icon"})))},kn=({time:j,formatDate:ce})=>{const ve=(0,le.of)(Mn);return v.createElement("span",{className:ve.time},v.createElement("span",null,ce(j)))};function Mn(j){return{card:(0,G.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:j.spacing(1),margin:j.spacing(.5),width:"inherit"}),heading:(0,G.css)({a:{zIndex:1,position:"relative",color:j.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,G.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,G.css)({margin:0,alignSelf:"center"}),time:(0,G.css)({marginLeft:j.spacing(1),marginRight:j.spacing(1),fontSize:j.typography.bodySmall.fontSize,color:j.colors.text.secondary}),avatar:(0,G.css)({border:"none",background:"inherit",margin:0,padding:j.spacing(.5),img:{borderRadius:j.shape.radius.circle,width:j.spacing(2),height:j.spacing(2)}})}}class xn extends v.PureComponent{constructor(ce){super(ce),this.style=Vn(S.$.theme2),this.subs=new Vt.yU,this.tagListRef=v.createRef(),this.onAnnoClick=async ve=>{if(!ve.time)return;const{options:Ie}=this.props,Ge=(0,be.UA)().getCurrent(),nt={from:this._timeOffset(ve.time,Ie.navigateBefore,!0),to:this._timeOffset(ve.timeEnd??ve.time,Ie.navigateAfter,!1),viewPanel:Ie.navigateToPanel?ve.panelId:void 0};if(Ge?.uid===ve.dashboardUID){hn.Ny.partial(nt);return}const gt=await(0,Fn.AI)().get("/api/search",{dashboardUIDs:ve.dashboardUID});if(gt&&gt.length&&gt[0].uid===ve.dashboardUID){const vt=gt[0],bt=new URL(vt.url,window.location.origin);bt.searchParams.set("from",String(nt.from)),bt.searchParams.set("to",String(nt.to)),hn.Ny.push(qt.I.stripBaseFromUrl(bt.toString()));return}on.A.emit(rn.r1.alertWarning,["Unknown Dashboard: "+ve.dashboardUID])},this.onTagClick=(ve,Ie)=>{if(!Ie&&this.state.queryTags.includes(ve))return;const Ke=Ie?this.state.queryTags.filter(nt=>nt!==ve):[...this.state.queryTags,ve];let Ge;if(Ie){const nt=document.activeElement,gt=nt?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(nt)&&gt){const vt=Number.parseInt(gt,10),bt=this.tagListRef.current.querySelector(`[data-tag-id="${vt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${vt-1}"]`);bt instanceof HTMLElement&&(Ge=bt)}}this.setState({queryTags:Ke},()=>Ge?.focus())},this.onUserClick=ve=>{this.setState({queryUser:{id:ve.userId,login:ve.login,email:ve.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ve,Ie)=>{const{options:Ke}=this.props,Ge=(0,be.UA)().getCurrent();return Ge?v.createElement(Un,{annotation:ve,formatDate:Ge.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ke}):v.createElement(v.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(en.We).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(ce,ve){const{options:Ie,timeRange:Ke}=this.props;(Ie!==ce.options||this.state.queryTags!==ve.queryTags||this.state.queryUser!==ve.queryUser||ce.renderCounter!==this.props.renderCounter||Ie.onlyInTimeRange&&Ke!==ce.timeRange)&&this.doSearch()}async doSearch(){const{options:ce}=this.props,{queryUser:ve,queryTags:Ie}=this.state,Ke={tags:ce.tags,limit:ce.limit,type:"annotation"};ce.onlyFromThisDashboard&&(Ke.dashboardUID=(0,be.UA)().getCurrent()?.uid);let Ge="";if(ce.onlyInTimeRange){const{timeRange:gt}=this.props;Ke.from=gt.from.valueOf(),Ke.to=gt.to.valueOf()}else Ge="All Time";ve&&(Ke.userId=ve.id),ce.tags&&ce.tags.length&&(Ke.tags=ce.tags.map(gt=>this.props.replaceVariables(gt))),Ie.length&&(Ke.tags=Ke.tags?[...Ke.tags,...Ie]:Ie);const nt=await(0,Fn.AI)().get("/api/annotations",Ke,`anno-list-panel-${this.props.id}`);this.setState({annotations:nt,timeInfo:Ge,loaded:!0})}_timeOffset(ce,ve,Ie=!1){let Ke=5,Ge="m";const nt=/^(\d+)(\w)/.exec(ve);nt&&nt.length===3&&(Ke=parseInt(nt[1],10),Ge=nt[2]);const gt=(0,Jt.KQ)(ce);return Ie&&(Ke*=-1),gt.add(Ke,Ge).valueOf()}render(){const{loaded:ce,annotations:ve,queryUser:Ie,queryTags:Ke}=this.state;if(!ce)return v.createElement("div",null,"loading...");const Ge=Ie||Ke.length>0;return v.createElement(ue.E,{autoHeightMin:"100%"},Ge&&v.createElement("div",{className:this.style.filter},v.createElement("b",null,"Filter:"),Ie&&v.createElement(R.$n,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ie.email}`},Ie.email),Ke.length>0&&v.createElement(Kn.L,{icon:"times",tags:Ke,onClick:nt=>this.onTagClick(nt,!0),getAriaLabel:nt=>`Remove ${nt} tag`,className:this.style.tagList,ref:this.tagListRef})),ve.length<1&&v.createElement("div",{className:this.style.noneFound},"No Annotations Found"),v.createElement(Ut.p,{items:ve,renderItem:this.renderItem,getItemKey:nt=>`${nt.id}`}))}}const Vn=(0,na.N)(j=>({noneFound:(0,G.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,G.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:j.spacing(.5),padding:j.spacing(.5)}),tagList:(0,G.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),aa={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Jn=new x.m(xn).setPanelOptions(j=>{j.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:aa.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:aa.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(ce){return v.createElement(Ct.u,{tags:ce.value,onChange:ce.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:aa.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:aa.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:aa.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:aa.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:aa.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:aa.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:aa.navigateAfter,description:""})}).setPanelChangeHandler((j,ce,ve)=>ce==="ryantxu-annolist-panel"?ve:j.options);var _n=e(37055),Hn=e(24293),ba=e(27310),va=e(28240),Ca=e(47070),dn=e(11261),pt=e(52622),Dt=e(52198),nn=e(38248),gn=e(11404),Cn=e(89654),In=e(22680),fa=e(71242),ga=e(24882),sa=e(21423),da=e(97152),Ma=e(79041),_a=e(29413),Xa=e(30501),ps=e(67266),As=e(55726),ys=e(24182),vs=e(77455),ar=e(17464),ss=e(69503),Rs=e(94624),Cs=e(16615);const ws=({config:j,onUPlotClick:ce,setFocusedSeriesIdx:ve,setFocusedPointIdx:Ie,setCoords:Ke,setHover:Ge,isToolTipOpen:nt,isActive:gt,setIsActive:vt,sync:bt})=>{nt.current=!1;const Rt=()=>{vt&&vt(!0)},Lt=()=>{nt.current||(Ke(null),vt&&vt(!1))};let Nt=null,St=null;j.addHook("init",Yt=>{Nt=Yt.root.parentElement,St=Yt.over,Nt?.addEventListener("click",ce),St.addEventListener("mouseleave",Lt),St.addEventListener("mouseenter",Rt),bt&&bt()===Rs.y.Crosshair&&Yt.root.classList.add("shared-crosshair")});const Qt=()=>{nt.current&&(Ke(null),ce())};j.addHook("drawClear",Qt),j.addHook("destroy",()=>{Nt?.removeEventListener("click",ce),St?.removeEventListener("mouseleave",Lt),St?.removeEventListener("mouseenter",Rt),Qt()});let Zt;j.addHook("syncRect",(Yt,tn)=>{Zt=tn});const jt=j.getTooltipInterpolator();return jt&&j.addHook("setCursor",Yt=>{nt.current||jt(ve,Ie,tn=>{if(tn){Ke(null);return}if(!Zt)return;const{x:Pn,y:ln}=(0,Cs.n)(Yt,Zt);Pn!==void 0&&ln!==void 0&&Ke({canvas:{x:Yt.cursor.left,y:Yt.cursor.top},viewport:{x:Pn,y:ln}})},Yt)}),j.addHook("setLegend",Yt=>{if(!nt.current&&!jt&&Ie(Yt.legend.idx),Yt.cursor.idxs!=null)for(let tn=0;tn<Yt.cursor.idxs.length;tn++){const Pn=Yt.cursor.idxs[tn];if(Pn!=null){const ln={xIndex:Pn,yIndex:0,pageX:Zt.left+Yt.cursor.left,pageY:Zt.top+Yt.cursor.top};(!nt.current||!ln)&&Ge(ln);return}}}),j.addHook("setSeries",(Yt,tn)=>{nt.current||ve(tn)}),j};var kr=e(25469),Xs=e(30249),dr=e(28895),ks=e(1819),bo=e(22731),_s=e(36613),Ls=e(83195),Bs=e(8066),Tr=e(73060),Ws=e(57875),co=e(51336),ei=e(52811),Ur=e(16895),Ao=e(63577),uo=e(50311),rs=e(46294),Ro=e(39624),Do=e(55129);function lr(j){let ce=new Map;return j.map(Ie=>({...Ie,fields:Ie.fields.map(Ke=>{if(Ke.type===dn.PU.enum){let Ge=(0,Do.M)(Ke.config,Ke.type),nt=ce.get(Ge);nt||(nt=[],ce.set(Ge,nt));let gt=Ke.values.toArray().slice(),vt=Ke.config.type.enum.text;if(nt.length>0)for(let bt=0;bt<gt.length;bt++)gt[bt]+=nt.length;return nt.push(...vt),Ke.config.type.enum.text=nt,{...Ke,values:gt}}return Ke})}))}function Lo(j,ce,ve,Ie){if(!j?.length)return null;(0,va.Fm)(j);let Ke=Ie!=null;Ie!=null&&Ie>0&&(j=[{...j[0],fields:[j[0].fields[Ie],...j[0].fields.filter((vt,bt)=>bt!==Ie)]}]);for(let vt of j)for(let bt of vt.fields)bt.type===dn.PU.time&&typeof bt.values[0]!="number"&&(bt.values=(0,uo.s7)(bt,{destinationType:dn.PU.time}).values);let Ge=0;e:for(let vt of j)for(let bt of vt.fields)if(bt.type===dn.PU.enum&&++Ge>1){j=lr(j);break e}let nt;const gt=[];for(let vt of j){const bt=[];let Rt=!1,Lt=!1,Nt=Ke?vt:(0,rs.M)({frame:vt,refFieldPseudoMin:ve?.from.valueOf(),refFieldPseudoMax:ve?.to.valueOf()});const St=(0,Ro.C)(Nt).fields;for(let Qt=0;Qt<St?.length;Qt++){const Zt=St[Qt];switch(Zt.type){case dn.PU.time:Rt=!0,bt.push(Zt);break;case dn.PU.number:Lt=Ke?Qt>0:!0,nt={...Zt,values:Zt.values.map(tn=>Number.isFinite(tn)||tn==null?tn:null)},bt.push(nt);break;case dn.PU.enum:Lt=!0;case dn.PU.string:nt={...Zt,values:Zt.values},bt.push(nt);break;case dn.PU.boolean:Lt=!0;const jt=Zt.config?.custom??{},Yt={...Zt.config,max:1,min:0,custom:jt};jt.lineInterpolation!==pt.dx.StepBefore&&(jt.lineInterpolation=pt.dx.StepAfter),nt={...Zt,config:Yt,type:dn.PU.number,values:Zt.values.map(tn=>tn==null?tn:tn?1:0)},(0,Ls.j9)(Yt.unit)||(Yt.unit="bool",nt.display=(0,Ws.J)({field:nt,theme:ce})),bt.push(nt);break}}(Ke||Rt)&&Lt&&gt.push({...vt,length:Nt.length,fields:bt})}return gt.length?(Hr(gt,ce,0),ii(gt,ce),gt):null}const ii=(j,ce)=>{const{palette:ve}=ce.visualization;for(const Ie of j)for(const Ke of Ie.fields)if(Ke.type===dn.PU.enum){const Ge=ve[Ke.state?.seriesIndex%ve.length],nt=ce.visualization.getColorByName(Ge),gt=Ke.config.type.enum;gt.color=Array(gt.text.length).fill(nt),Ke.display=(0,Ws.J)({field:Ke,theme:ce})}},Hr=(j,ce,ve)=>{let Ie=0;j.forEach(Ke=>{Ke.fields.forEach((Ge,nt)=>{nt!==ve&&(Ge.type===dn.PU.number||Ge.type===dn.PU.boolean||Ge.type===dn.PU.enum)&&(Ge.state={...Ge.state,seriesIndex:Ie++},Ge.display=(0,Ws.J)({field:Ge,theme:ce}))})})};function Po(j,ce){return!j||!j.length?[ce]:j.map(ve=>ve?.length?ve:ce)}const Co=j=>j.mode===pt.$N.Multi&&j.maxHeight!=null;var ur=e(42994),Vo=e(72724),mo=e(23596),jr=e(39758),Bo=e(4134);const mr=ur.WC.interval,xt=jr.ur,wt=jr.ur,fn=8,cn=30,bn=.65,Wn=.1,jn=.15,pa=5,xa=10,us=.1;function bs(j,ce,ve,Ie,Ke){const Ge=(0,_a.kD)(j,14),nt=ce/(Ge.width+2)*14,gt=ve/Ie,vt=Math.min(gt,nt);return{fontSize:Math.min(vt,Ke??vt),textMetrics:Ge}}function Ga(j,ce){const{xOri:ve,xDir:Ie,rawValue:Ke,getColor:Ge,formatValue:nt,formatShortValue:gt,fillOpacity:vt=1,showValue:bt,xSpacing:Rt=0,hoverMulti:Lt=!1,timeZone:Nt="browser"}=j,St=ve===pt.Lt.Horizontal,Qt=!j.text?.valueSize,Zt=j.stacking!==pt.gs.None,jt=j.stacking===pt.gs.Percent;let{groupWidth:Yt,barWidth:tn,barRadius:Pn=0}=j;Zt&&([Yt,tn]=[tn,Yt]);let ln;const Nn=Array(30).fill(null);let zn;const Aa=Yn=>Array.from(Yn.data[0].map((ta,ya)=>ya)),ma=Rt===0?void 0:(Yn,ta)=>{const ya=Yn.bbox.width,Ya=Ie*(St?1:-1);let qa=ta.length,xs=qa-1,gs=0,pr=ya/_s.A.pxRatio,yo=Math.abs(Math.floor(pr/Rt));gs=qa<yo?0:Math.ceil(qa/yo);let oi=ta.map((Io,Ni)=>gs!==0&&(Rt>0?Ni:xs-Ni)%gs>0?null:Io);return Ya===1?oi:oi.reverse()},Da=(Yn,ta,ya,Ya,qa)=>{if(j.xTimeAuto){let xs=mr.year;return qa<Xa.Zj.second?xs=mr.millisecond:qa<Xa.Zj.minute?xs=mr.second:qa<Xa.Zj.hour?xs=mr.minute:qa<Xa.Zj.day?xs=mr.hour:qa<Xa.Zj.month?xs=mr.day:qa<Xa.Zj.year?xs=mr.month:xs=mr.year,ta.map(gs=>gs==null?"":(0,Vo.LE)(gs,{format:xs,timeZone:Nt}))}return ta.map(xs=>St?gt(0,xs):nt(0,xs))},Sn=(Yn,ta,ya)=>{ta=0,ya=Math.max(1,Yn.data[0].length-1);let Ya=0;(0,jr.mn)(Yn.data[0].length,Yt,xt,0,(xs,gs,pr)=>{Ya=gs+pr/2});let qa=ya-ta;if(Ya===.5)ta-=qa;else{let gs=(1/(1-Ya*2)*qa-qa)/2;ta-=gs,ya+=gs}return[ta,ya]};let wn=(Yn,ta)=>{let ya=Array.from({length:ta},()=>({offs:Array(Yn).fill(0),size:Array(Yn).fill(0)}));return(0,jr.mn)(Yn,Yt,xt,null,(Ya,qa,xs)=>{(0,jr.mn)(ta,tn,wt,null,(gs,pr,yo)=>{ya[gs].offs[Ya]=qa+xs*pr,ya[gs].size[Ya]=xs*yo})}),ya},Ln=(Yn,ta)=>{let ya=Array.from({length:ta},()=>({offs:Array(Yn).fill(0),size:Array(Yn).fill(0)}));return(0,jr.mn)(Yn,Yt,xt,null,(Ya,qa,xs)=>{(0,jr.mn)(ta,tn,wt,null,(gs,pr,yo)=>{ya[gs].offs[Ya]=qa,ya[gs].size[Ya]=xs})}),ya};const Wa=St?Wn:jn,Za=St?pa:xa;let ds=[],la=[],ha=1,as,Ps=j.text?.valueSize??cn,Ms=Za,Pa=1/0,Ka=1/0,Qn=Ge!=null,Tn=Qn?{fill:{unit:3,values:(Yn,ta)=>la[ta].fill},stroke:{unit:3,values:(Yn,ta)=>la[ta].stroke}}:{},ca=_s.A.paths.bars({radius:jt?0:Zt?(Yn,ta)=>ta===Yn.data.length-1?[Pn,0]:[0,0]:Pn,disp:{x0:{unit:2,values:(Yn,ta)=>ds[ta].offs},size:{unit:2,values:(Yn,ta)=>ds[ta].size},...Tn},each:(Yn,ta,ya,Ya,qa,xs,gs)=>{Ya-=Yn.bbox.left,qa-=Yn.bbox.top;let pr=Yn.data[ta][ya];St?(Pa=Math.min(Pa,pr<0?Yn.bbox.height-(qa+gs):qa),Ka=xs):(Pa=gs,Ka=Math.min(Ka,pr<0?Ya:Yn.bbox.width-(Ya+xs)));let yo={x:Ya,y:qa,w:xs,h:gs,sidx:ta,didx:ya};if(!Zt&&j.fullHighlight&&(j.xOri===pt.Lt.Horizontal?(yo.y=0,yo.h=Yn.bbox.height):(yo.x=0,yo.w=Yn.bbox.width)),ln.add(yo),bt!==pt.yL.Never){const oi=Ke(ta,ya);let Io=1;jt&&kt[ta][ya]&&(Io=kt[ta][ya]);const Ni=Io===0?0:oi/Io,jl=nt(ta,Ni);if(Ms=Math.min(Ms,Math.round(Wa*(St?xs:gs))),as[ya]===void 0&&(as[ya]={}),as[ya][ta]={text:jl,value:Ke(ta,ya),hidden:!1},Qt){const{fontSize:Zo,textMetrics:pl}=bs(as[ya][ta].text,Ka*(St?bn:1)-(St?0:Ms),Pa*(St?1:bn)-(St?Ms:0),1);as[ya][ta].textMetrics=pl;let Zr=Math.round(Math.min(Ps,cn,Zo));ha=Zr/Ps*(Zr/14),Ps=Zr}else as[ya][ta].textMetrics=(0,_a.kD)(as[ya][ta].text,Ps);let Wc=St?0:-Math.round(us*Ps),Xo=Ke(ta,ya);if(j.negY?.[ta]&&Xo!=null&&(Xo*=-1),Xo!=null){const Zo=Yn.bbox.left+(St?Ya+xs/2:Xo<0?Ya-Ms:Ya+xs+Ms),pl=Yn.bbox.top+(St?Xo<0?qa+gs+Ms:qa-Ms:qa+gs/2-Wc),{textMetrics:Zr={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=as[ya][ta];let Gl=0,Kd=0;St?(Gl=Zr.width*ha/2,Kd=Xo>0?(Zr.actualBoundingBoxAscent+Zr.actualBoundingBoxDescent)*ha:0):(Kd=(Zr.actualBoundingBoxAscent+Zr.actualBoundingBoxDescent)*ha/2,Gl=Xo<0?Zr.width*ha:0),as[ya][ta].x=Zo,as[ya][ta].y=pl,as[ya][ta].bbox={x:Zo-Gl,y:pl-Kd,w:Zr.width*ha,h:(Zr.actualBoundingBoxAscent+Zr.actualBoundingBoxDescent)*ha}}}}});const Ra=Yn=>{Yn.root.querySelectorAll(".u-cursor-pt").forEach(ta=>{ta.style.borderRadius="0",j.fullHighlight&&(ta.style.zIndex="-1")})},Ba={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Yn,ta)=>{if(ta===0){Nn.fill(null),zn=null;let ya=Yn.cursor.left*_s.A.pxRatio,Ya=Yn.cursor.top*_s.A.pxRatio;ln.get(ya,Ya,1,1,qa=>{(0,Bo.ur)(ya,Ya,qa.x,qa.y,qa.x+qa.w,qa.y+qa.h)&&(zn=Nn[0]=qa,Nn[zn.sidx]=zn,Lt&&(0,Bo.Tr)(ln,void 0,zn.didx).forEach(xs=>{Nn[xs.sidx]=xs}))})}return Nn[ta]?.didx},points:{fill:"rgba(255,255,255,0.4)",bbox:(Yn,ta)=>{let ya=Nn[ta],Ya=ya!=null;return{left:Ya?ya.x/_s.A.pxRatio:-10,top:Ya?ya.y/_s.A.pxRatio:-10,width:Ya?ya.w/_s.A.pxRatio:0,height:Ya?ya.h/_s.A.pxRatio:0}}},focus:{prox:1e3,dist:(Yn,ta)=>zn?.sidx===ta?0:1/0}},Fa=Yn=>{if(ln=ln||new Bo.C$(0,0,Yn.bbox.width,Yn.bbox.height),ln.clear(),Yn.series.forEach(ta=>{ta._paths=null}),Zt?ds=[null,...Ln(Yn.data[0].length,Yn.data.length-1)]:ds=[null,...wn(Yn.data[0].length,Yn.data.length-1)],Qn){la=[null];for(let ta=1;ta<Yn.data.length;ta++){let ya=Yn.data[ta].map((Ya,qa)=>Ya!=null?Ge(ta,qa,Ya):null);la.push({fill:vt<1?ya.map(Ya=>Ya!=null?(0,mo.alpha)(Ya,vt):null):ya,stroke:ya})}}as={},Ps=j.text?.valueSize??cn,Ms=Za,Pa=Ka=1/0},ls=Yn=>{if(bt===pt.yL.Never||Ps<fn)return;Yn.ctx.save(),Yn.ctx.fillStyle=ce.colors.text.primary,Yn.ctx.font=`${Ps}px ${ce.typography.fontFamily}`;let ta,ya;for(const Ya in as){let qa=!0;for(const xs in as[Ya]){const gs=as[Ya][xs],{text:pr,x:yo=0,y:oi=0}=gs;let{value:Io}=gs;j.negY?.[xs]&&Io!=null&&(Io*=-1);let Ni=St?"center":Io!==null&&Io<0?"right":"left",jl=St?Io!==null&&Io<0?"top":"alphabetic":"middle";if(Ni!==ta&&(Yn.ctx.textAlign=ta=Ni),jl!==ya&&(Yn.ctx.textBaseline=ya=jl),bt===pt.yL.Always)Yn.ctx.fillText(pr,yo,oi);else if(bt===pt.yL.Auto){let{bbox:Wc}=gs,Xo=!1;if(Wc==null)Xo=!0,gs.hidden=!0;else if(!qa)for(const Zo in as[Ya]){if(Zo===xs)continue;const pl=as[Ya][Zo],{bbox:Zr,hidden:Gl}=pl;if(!Gl&&Zr&&(0,Bo.HY)(Wc,Zr)){Xo=!0,gs.hidden=!0;break}}qa=!1,!Xo&&Yn.ctx.fillText(pr,yo,oi)}}}Yn.ctx.restore()},Ns=(Yn,ta,ya,Ya)=>{zn?(Yn(zn.sidx),ta(zn.didx),ya()):ya(!0)};let kt=null;function nr(Yn,ta){return kt=null,(0,Ur.bq)(Yn[0],ta,({totals:ya})=>{kt=ya})}return{cursor:Ba,xRange:Sn,xValues:Da,xSplits:Aa,hFilter:ma,barsBuilder:ca,init:Ra,drawClear:Fa,draw:ls,interpolateTooltip:Ns,prepData:nr}}const Qa={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:pt.wV.Auto,showValue:pt.yL.Auto,stacking:pt.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},Zs={fillOpacity:80,gradientMode:pt.on.None,lineWidth:1};function yr(j){return j===Ca.wV.Vertical?{xOri:pt.Lt.Horizontal,xDir:pt.ON.Right,yOri:pt.Lt.Vertical,yDir:pt.ON.Up}:{xOri:pt.Lt.Vertical,xDir:pt.ON.Down,yOri:pt.Lt.Horizontal,yDir:pt.ON.Right}}const sr=({frame:j,theme:ce,orientation:ve,showValue:Ie,groupWidth:Ke,barWidth:Ge,barRadius:nt=0,stacking:gt,text:vt,rawValue:bt,getColor:Rt,fillOpacity:Lt,allFrames:Nt,xTickLabelRotation:St,xTickLabelMaxLength:Qt,xTickLabelSpacing:Zt=0,legend:jt,timeZone:Yt,fullHighlight:tn,hoverMulti:Pn})=>{const ln=new co.e,Zn=(ds,la)=>(0,Ls.cN)(j.fields[ds].display(la)),Nn=(ds,la)=>xr(Zn(ds,la),Qt),zn=yr(ve);j.fields.length===2&&(Ke=Ge,Ge=1);const Aa={xOri:zn.xOri,xDir:zn.xDir,groupWidth:Ke,barWidth:Ge,barRadius:nt,stacking:gt,rawValue:bt,getColor:Rt,fillOpacity:Lt,formatValue:Zn,formatShortValue:Nn,timeZone:Yt,text:vt,showValue:Ie,legend:jt,xSpacing:Zt,xTimeAuto:j.fields[0]?.type===dn.PU.time&&!j.fields[0].config.unit?.startsWith("time:"),negY:j.fields.map(ds=>ds.config.custom?.transform===pt.NU.NegativeY),fullHighlight:tn,hoverMulti:Pn},ma=Ga(Aa,ce);if(ln.setCursor(ma.cursor),ln.addHook("init",ma.init),ln.addHook("drawClear",ma.drawClear),ln.addHook("draw",ma.draw),!!!S.$.featureToggles.newVizTooltips&&ln.setTooltipInterpolator(ma.interpolateTooltip),St!==0){let ds=50,la=zn.xOri===pt.Lt.Horizontal?14:5;ln.setPadding(To(j,St,Qt,ds,la))}ln.setPrepData(ma.prepData),ln.addScale({scaleKey:"x",isTime:!1,range:ma.xRange,distribution:pt.L4.Ordinal,orientation:zn.xOri,direction:zn.xDir});const Sn=j.fields[0].config.custom?.axisPlacement!==pt.vM.Hidden?zn.xOri===pt.Lt.Horizontal?pt.vM.Bottom:pt.vM.Left:pt.vM.Hidden,wn=j.fields[0].config.custom?.axisPlacement!==pt.vM.Hidden;ln.addAxis({scaleKey:"x",isTime:!1,placement:Sn,label:j.fields[0].config.custom?.axisLabel,splits:ma.xSplits,filter:zn.xOri===0?ma.hFilter:void 0,values:ma.xValues,timeZone:Yt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:zn.xOri===0?St*-1:0,theme:ce,show:wn});let Ln=0;const Wa=_o(jt);for(let ds=1;ds<j.fields.length;ds++){const la=j.fields[ds];Ln++;const ha={...Zs,...la.config.custom},as=la.config.unit||ei.s,Ps=(0,Bs.Qi)(la),Pa=(0,Bs.lz)(la,ce).color;let Ka=ha.axisSoftMin,Qn=ha.axisSoftMax;if(Ka==null&&la.config.min==null&&(Ka=0),Qn==null&&la.config.max==null&&(Qn=0),ha.thresholdsStyle&&la.config.thresholds&&(ha.thresholdsStyle.mode??pt.Ly.Off)!==pt.Ly.Off&&ln.addThresholds({config:ha.thresholdsStyle,thresholds:la.config.thresholds,scaleKey:as,theme:ce,hardMin:la.config.min,hardMax:la.config.max,softMin:ha.axisSoftMin,softMax:ha.axisSoftMax}),ln.addSeries({scaleKey:as,pxAlign:!0,lineWidth:ha.lineWidth,lineColor:Pa,fillOpacity:ha.fillOpacity,theme:ce,colorMode:Ps,pathBuilder:ma.barsBuilder,show:!ha.hideFrom?.viz,gradientMode:ha.gradientMode,thresholds:la.config.thresholds,hardMin:la.config.min,hardMax:la.config.max,softMin:ha.axisSoftMin,softMax:ha.axisSoftMax,dataFrameFieldIndex:{fieldIndex:Wa?ds:Nt[0].fields.findIndex(Tn=>Tn.type===dn.PU.number&&Tn.state?.seriesIndex===Ln-1),frameIndex:0}}),ln.addScale({scaleKey:as,min:la.config.min,max:la.config.max,softMin:Ka,softMax:Qn,centeredZero:ha.axisCenteredZero,orientation:zn.yOri,direction:zn.yDir,distribution:ha.scaleDistribution?.type,log:ha.scaleDistribution?.log}),ha.axisPlacement!==pt.vM.Hidden){let Tn=ha.axisPlacement;(!Tn||Tn===pt.vM.Auto)&&(Tn=pt.vM.Left),zn.xOri===1&&(Tn===pt.vM.Left&&(Tn=pt.vM.Bottom),Tn===pt.vM.Right&&(Tn=pt.vM.Top));let ca={scaleKey:as,label:ha.axisLabel,size:ha.axisWidth,placement:Tn,formatValue:(Ra,Ba)=>(0,Ls.cN)(la.display(Ra,Ba)),filter:zn.yOri===0?ma.hFilter:void 0,tickLabelRotation:zn.xOri===1?St*-1:0,theme:ce,grid:{show:ha.axisGridShow}};ha.axisBorderShow&&(ca.border={show:!0}),ha.axisColorMode===pt.Y$.Series&&(ca.color=Pa),ln.addAxis(ca)}}let Za=(0,Ur.ro)(j);return ln.setStackingGroups(Za),ln};function xr(j,ce){return j.length>ce?j.substring(0,ce).concat("..."):j}function To(j,ce,ve,Ie=0,Ke=0){const Ge=j.fields[0].values,nt=Xa.pi,gt=j.fields[0].display,vt=St=>gt?gt(Ge[St]):Ge[St];let bt=0;for(let St=0;St<Ge.length;St++){let Qt=(0,_a.kD)(xr((0,Ls.cN)(vt(St)),ve),nt);bt=Qt.width>bt?Qt.width:bt}const Rt=ce>0?Math.cos(ce*Math.PI/180)*(0,_a.kD)(xr((0,Ls.cN)(vt(Ge.length-1)),ve),nt).width:0,Lt=ce<0?Math.cos(ce*-1*Math.PI/180)*(0,_a.kD)(xr((0,Ls.cN)(vt(0)),ve),nt).width:0,Nt=Math.sin((ce>=0?ce:ce*-1)*Math.PI/180)*bt-Ke;return[Math.round(Xa.pi*_s.A.pxRatio),Rt,Nt,Math.max(0,Lt-Ie)]}function qs(j,ce,ve){if(!j.length||j.every(Lt=>Lt.length===0))return{warn:"No data in response"};(0,va.Fm)(j);const Ie=j.length===1?(0,Tr.Yj)(j[0],j[0].fields.findIndex(Lt=>Lt.type===dn.PU.time)):(0,Tr.Fd)({frames:j,keepDisplayNames:!0});if(!Ie)return{warn:"Unable to join data"};let Ke;if(ve.colorByField&&(Ke=(0,Ao.findField)(Ie,ve.colorByField),!Ke))return{warn:"Color field not found"};let Ge;if(ve.xField&&(Ge=(0,Ao.findField)(Ie,ve.xField),!Ge))return{warn:"Configured x field not found"};let nt,gt,vt=[];for(const Lt of Ie.fields)if(Lt!==Ge)switch(Lt.type){case dn.PU.string:nt||(nt=Lt);break;case dn.PU.time:gt||(gt=Lt);break;case dn.PU.number:{const Nt={...Lt,state:{...Lt.state,seriesIndex:vt.length},config:{...Lt.config,custom:{...Lt.config.custom,stacking:{group:"_",mode:ve.stacking}}},values:Lt.values.map(St=>Number.isFinite(St)||St==null?St:null)};ve.stacking===pt.gs.Percent&&(Nt.config.unit="percentunit",Nt.display=(0,Ws.J)({field:Nt,theme:ce})),vt.push(Nt)}}let bt=Ge;if(bt||(bt=nt||gt),!bt)return{warn:"Bar charts requires a string or time field"};if(Ie.fields[0].type===dn.PU.time&&Ie.fields[0]!==bt&&Ie.fields.shift(),Hr([Ie],ce,0),!vt.length)return{warn:"No numeric fields found"};if(Ke&&vt.length>1){const Lt=vt.find(Nt=>Nt!==Ke);Lt&&(vt=[Lt])}let Rt=(0,N.cloneDeep)(vt);return ve.stacking===pt.gs.Percent&&Rt.map(Lt=>{const Nt=Ie.fields.find(St=>(0,va.Ct)(St,Ie)===(0,va.Ct)(St,Ie));Lt.config.unit=Nt?.config?.unit??void 0,Lt.display=(0,Ws.J)({field:Lt,theme:ce})}),vt.unshift(bt),Rt.unshift(bt),{aligned:Ie,colorByField:Ke,viz:[{fields:vt,length:bt.values.length}],legend:{fields:Rt,length:bt.values.length}}}const _o=j=>!!(j?.sortBy&&j.sortDesc!==null),no=10,ms=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(j,ce)=>ce.text?.valueSize===j.text?.valueSize],Hs=({data:j,options:ce,fieldConfig:ve,width:Ie,height:Ke,timeZone:Ge,id:nt,replaceVariables:gt})=>{const vt=(0,le.$j)(),{dataLinkPostProcessor:bt}=(0,Ma.d2)(),Rt=(0,v.useRef)(void 0),Lt=(0,v.useRef)(!1),[Nt,St]=(0,v.useState)(void 0),[Qt,Zt]=(0,v.useState)(null),[jt,Yt]=(0,v.useState)(null),[tn,Pn]=(0,v.useState)(null),[ln,Zn]=(0,v.useState)(!1),[Nn,zn]=(0,v.useState)(!1),Aa=()=>{Lt.current=!1,Zt(null),zn(!1)},ma=()=>{Lt.current=!Lt.current,zn(Lt.current)},Da=(0,v.useRef)(),Sn=(0,v.useRef)(),wn=(0,v.useMemo)(()=>qs(j.series,vt,ce),[j.series,vt,ce]),Ln="viz"in wn?wn:null;Sn.current=Ln?.colorByField;const Wa=(0,v.useRef)(1e4);(0,v.useMemo)(()=>{Wa.current++},[ce]);const Za=(0,v.useMemo)(()=>{const Tn=Ln?.viz[0],ca=Da.current;return Tn&&ca&&(0,sa.bW)(Tn,ca,!0)||Wa.current++,Da.current=Tn,(j.structureRev??0)+Wa.current},[Ln,j.structureRev]),ds=(0,v.useMemo)(()=>!ce.orientation||ce.orientation===Ca.wV.Auto?Ie<Ke?Ca.wV.Horizontal:Ca.wV.Vertical:ce.orientation,[Ie,Ke,ce.orientation]),la=(0,v.useMemo)(()=>{if(ce.xTickLabelMaxLength)return ce.xTickLabelMaxLength;{const Tn=ce.xTickLabelRotation,ca=(0,_a.kD)("M",Xa.pi).width;return Ke/2/(Math.sin((Tn>=0?Tn:Tn*-1)*Math.PI/180)*ca)-3}},[Ke,ce.xTickLabelRotation,ce.xTickLabelMaxLength]);if("warn"in wn)return v.createElement(da.a,{panelId:nt,fieldConfig:ve,data:j,message:wn.warn,needsNumberField:!0});const ha=(Tn,ca,Ra)=>{const Ba=ca==null?null:Tn.fields[ca];if(Ba){const Ns=(0,va.Ct)(Ba,Tn);ca=wn.aligned.fields.findIndex(kt=>Ns===(0,va.Ct)(kt,wn.aligned))}const Fa=ce.fullHighlight&&ce.stacking!==pt.gs.None?pt.$N.Multi:ce.tooltip.mode,ls=ce.tooltip.mode===pt.$N.Multi?ce.tooltip.sort:pt.xB.None;return v.createElement(v.Fragment,null,Nn&&v.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},v.createElement(kr.J,{onClick:Aa,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),v.createElement(ks.e,{data:wn.aligned,rowIndex:Ra,columnIndex:ca,sortOrder:ls,mode:Fa}))},as=Tn=>{const{legend:ca}=ce;if(!Tn||ca.showLegend===!1)return null;if(wn.colorByField){const Ra=(0,dr.jY)([wn.colorByField],vt);if(Ra?.length)return v.createElement(ps.KU.Legend,{placement:ca.placement},v.createElement(As.t,{placement:ca.placement,items:Ra,displayMode:ca.displayMode}))}return v.createElement(ys.$,{data:[wn.legend],config:Tn,maxHeight:"35%",maxWidth:"60%",...ce.legend})},Ps=(Tn,ca)=>Da.current.fields[Tn].values[ca];let Ms,Pa=1;if(wn.colorByField){const Tn=wn.colorByField,ca=Tn.display;Pa=(Tn.config.custom.fillOpacity??100)/100,Ms=(Ra,Ba)=>ca(Sn.current?.values[Ba]).color}else Da.current.fields.some(ca=>ca.config.custom?.gradientMode===pt.on.Scheme&&ca.config.color?.mode===Hn.Y.Thresholds||ca.config.mappings?.some(Ba=>Ba.type==="value"?Object.values(Ba.options).some(Fa=>Fa.color!=null):Ba.options.result.color!=null))&&(Pa=(Da.current.fields.find(Ra=>Ra.type===dn.PU.number).config.custom.fillOpacity??100)/100,Ms=(Ra,Ba)=>{let Fa=Da.current.fields[Ra];return Fa.display(Fa.values[Ba]).color});const Ka=(Tn,ca,Ra)=>{const{barWidth:Ba,barRadius:Fa=0,showValue:ls,groupWidth:Ns,stacking:kt,legend:nr,tooltip:Yn,text:ta,xTickLabelRotation:ya,xTickLabelSpacing:Ya,fullHighlight:qa}=ce;return sr({frame:Tn,getTimeRange:Ra,timeZone:Ge,theme:vt,timeZones:[Ge],orientation:ds,barWidth:Ba,barRadius:Fa,showValue:ls,groupWidth:Ns,xTickLabelRotation:ya,xTickLabelMaxLength:la,xTickLabelSpacing:Ya,stacking:kt,legend:nr,tooltip:Yn,text:ta,rawValue:Ps,getColor:Ms,fillOpacity:Pa,allFrames:wn.viz,fullHighlight:qa,hoverMulti:Yn.mode===pt.$N.Multi})},Qn=!!S.$.featureToggles.newVizTooltips;return v.createElement(Xs.o,{theme:vt,frames:wn.viz,prepConfig:Ka,propsToDiff:ms,preparePlotFrame:Tn=>Tn[0],renderLegend:as,legend:ce.legend,timeZone:Ge,timeRange:{from:1,to:1},structureRev:Za,width:Ie,height:Ke,replaceVariables:gt,dataLinkPostProcessor:bt},Tn=>Qn&&ce.tooltip.mode!==pt.$N.None?v.createElement(vs.xl,{config:Tn,hoverMode:ce.tooltip.mode===pt.$N.Single?vs.b3.xOne:vs.b3.xAll,render:(ca,Ra,Ba,Fa,ls,Ns)=>v.createElement(bo.k,{frames:wn.viz,seriesFrame:wn.aligned,dataIdxs:Ra,seriesIdx:Ba,mode:ce.tooltip.mode,sortOrder:ce.tooltip.sort,isPinned:Fa}),maxWidth:ce.tooltip.maxWidth,maxHeight:ce.tooltip.maxHeight}):(!Qn&&Rt.current!==Tn&&(Rt.current=ws({config:Tn,onUPlotClick:ma,setFocusedSeriesIdx:Yt,setFocusedPointIdx:Pn,setCoords:Zt,setHover:St,isToolTipOpen:Lt,isActive:ln,setIsActive:Zn})),ce.tooltip.mode===pt.$N.None?null:v.createElement(ar.ZL,null,Nt&&Qt&&jt&&v.createElement(ss.o,{position:{x:Qt.viewport.x,y:Qt.viewport.y},offset:{x:no,y:no},allowPointerEvents:Lt.current},ha(wn.viz[0],jt,tn)))))};var ao=e(66864),fs=e(94354),Gr=e(10880);const Uo=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],li=j=>{let ce=j.value??0;const ve=ce<0;ve&&(ce*=-1);let Ie=Uo[0];for(const nt of Uo)if(Ie=nt,ce<=Ie.value)break;const Ke=nt=>{j.onChange(nt*(ve?-1:1))},Ge=()=>{j.onChange(j.value*-1)};return v.createElement(ao.Gy,null,v.createElement(fs.z,{value:Ie.value,options:Uo,onChange:Ke}),ce!==0&&v.createElement(pn.m,{content:"Require space from the right side",placement:"top"},v.createElement("div",null,v.createElement(Gr.S,{value:ve,onChange:Ge,label:"RTL"}))))},El=(j,ce,ve,Ie)=>{if(ce==="graph"){const Ke=ve.angular;if(Ke.xaxis?.mode==="series"){const Ge=j.transformations||[];Ge.push({id:"reduce",options:{reducers:Ke.xaxis?.values??["sum"]}}),j.transformations=Ge}}return{}};var Ts=e(38824);class yl{getListWithDefaults(ce){return ce.getListAppender({name:Ts.m.BarChart,pluginId:"barchart",options:{showValue:pt.yL.Never,legend:{calcs:[],displayMode:pt.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ve=>{ve.options.barWidth=.8}}})}getSuggestionsForData(ce){const ve=this.getListWithDefaults(ce),{dataSummary:Ie}=ce;Ie.frameCount===1&&(!Ie.hasNumberField||!Ie.hasStringField||Ie.rowCountTotal>50||(ve.append({name:Ts.m.BarChart}),Ie.numberFieldCount>1&&(ve.append({name:Ts.m.BarChartStacked,options:{stacking:pt.gs.Normal}}),ve.append({name:Ts.m.BarChartStackedPercent,options:{stacking:pt.gs.Percent}})),ve.append({name:Ts.m.BarChartHorizontal,options:{orientation:Ca.wV.Horizontal}}),Ie.numberFieldCount>1&&(ve.append({name:Ts.m.BarChartHorizontalStacked,options:{stacking:pt.gs.Normal,orientation:Ca.wV.Horizontal}}),ve.append({name:Ts.m.BarChartHorizontalStackedPercent,options:{orientation:Ca.wV.Horizontal,stacking:pt.gs.Percent}}))))}}const nl=new x.m(Hs).setPanelChangeHandler(El).useFieldConfig({standardOptions:{[_n.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Hn.Y.PaletteClassic}}},useCustomConfig:j=>{const ce=Zs;j.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ce.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ce.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Dt.t.fillGradient[0].value,settings:{options:Dt.t.fillGradient}}),j.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:pt.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:pt.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),j.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:pt.Ly.Off},settings:{options:Dt.t.thresholdsDisplayModes},editor:ga.D,override:ga.D,process:ba.hS,shouldApply:()=>!0}),nn.r(j,ce,!1),gn.e(j)}}).setPanelOptions((j,ce)=>{const ve=qs(ce.data,S.$.theme2,ce.options??{});let Ie="First string or time field";const Ke="viz"in ve?ve.viz[0]:void 0;if(Ke?.fields?.length){const Ge=Ke.fields[0];Ie+=` (${(0,va.Ct)(Ge,Ke)})`}j.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ie}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Ca.wV.Auto,label:"Auto"},{value:Ca.wV.Horizontal,label:"Horizontal"},{value:Ca.wV.Vertical,label:"Vertical"}]},defaultValue:Qa.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Qa.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ge=>Ge.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Qa.xTickLabelSpacing,editor:li}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:pt.yL.Auto,label:"Auto"},{value:pt.yL.Always,label:"Always"},{value:pt.yL.Never,label:"Never"}]},defaultValue:Qa.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Dt.t.stacking},defaultValue:Qa.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Qa.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ge,nt)=>Ge.stacking&&Ge.stacking!==pt.gs.None?!1:bl(nt)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Qa.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Qa.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Qa.fullHighlight,showIf:Ge=>Ge.stacking===pt.gs.None}),j.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),Cn.D(j),In.H(j),fa.I(j,!1)}).setSuggestionsSupplier(new yl);function bl(j){let ce=0;if(j)for(const ve of j)for(const Ie of ve.fields)Ie.type===dn.PU.number&&ce++;return ce}var wi=e(63250),Sr=e(23799);const Ci=j=>(0,wi._$)(j);var ci=e(58384),Qr=e(17516);class Fi{getSuggestionsForData(ce){const{dataSummary:ve}=ce;if(!ve.hasData||!ve.hasNumberField)return;const Ie=ce.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ve.numberFieldCount>50||(ve.hasStringField&&ve.frameCount===1&&ve.rowCountTotal<30?(Ie.append({name:Ts.m.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:pt.eX.Basic,orientation:Ca.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ie.append({name:Ts.m.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:pt.eX.Lcd,orientation:Ca.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ie.append({name:Ts.m.BarGaugeBasic,options:{displayMode:pt.eX.Basic,orientation:Ca.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ie.append({name:Ts.m.BarGaugeLCD,options:{displayMode:pt.eX.Lcd,orientation:Ca.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Dl=new x.m(ci.d).useFieldConfig().setPanelOptions(j=>{(0,Sr.L)(j),(0,Sr.h)(j),fa.I(j),j.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:pt.eX.Gradient,label:"Gradient"},{value:pt.eX.Lcd,label:"Retro LCD"},{value:pt.eX.Basic,label:"Basic"}]},defaultValue:Qr.K.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:pt.$l.Color,label:"Value color"},{value:pt.$l.Text,label:"Text color"},{value:pt.$l.Hidden,label:"Hidden"}]},defaultValue:Qr.K.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:pt.TZ.Auto,label:"Auto"},{value:pt.TZ.Top,label:"Top"},{value:pt.TZ.Left,label:"Left"}]},defaultValue:Qr.K.namePlacement,showIf:ce=>ce.orientation!==Ca.wV.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Qr.K.showUnfilled,showIf:ce=>ce.displayMode!=="lcd"}).addRadio({path:"sizing",name:"Bar size",settings:{options:[{value:pt.T6.Auto,label:"Auto"},{value:pt.T6.Manual,label:"Manual"}]},defaultValue:Qr.K.sizing}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:Qr.K.minVizWidth,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===pt.T6.Manual&&(ce.orientation===Ca.wV.Auto||ce.orientation===Ca.wV.Vertical)}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:Qr.K.minVizHeight,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===pt.T6.Manual&&(ce.orientation===Ca.wV.Auto||ce.orientation===Ca.wV.Horizontal)}).addSliderInput({path:"maxVizHeight",name:"Max height",description:"Maximum row height (horizontal orientation)",defaultValue:Qr.K.maxVizHeight,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===pt.T6.Manual&&(ce.orientation===Ca.wV.Auto||ce.orientation===Ca.wV.Horizontal)})}).setPanelChangeHandler(wi.gl).setMigrationHandler(Ci).setSuggestionsSupplier(new Fi);var fo=e(41706),zo=e(73134),Mr=e(23117),ko=e(68268),Ho=e(10175),So=e(74863);const Wi=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),Ki=Array(53);for(let j=0;j<Ki.length;j++)Ki[j]=2**j;const Ti=(j,ce=1)=>j==null?"-":j.toFixed(ce),Pl={drawStyle:pt.GR.Line,showPoints:pt.yL.Auto,axisPlacement:pt.vM.Auto},al=({frame:j,theme:ce,timeZones:ve,getTimeRange:Ie,sync:Ke,allFrames:Ge,renderers:nt,tweakScale:gt=Nt=>Nt,tweakAxis:vt=Nt=>Nt,eventsScope:bt="__global_",hoverProximity:Rt,orientation:Lt=pt.wV.Horizontal})=>{const Nt=Lt!==pt.wV.Vertical,St=new co.e(ve[0]);let Qt;St.setPrepData(Da=>(Qt=Da[0],(0,Ur.bq)(Da[0],St.getStackingGroups())));const Zt=j.fields[0];if(!Zt)return St;const jt="x";let Yt="";const tn=Zt.config.custom?.axisPlacement===pt.vM.Hidden?pt.vM.Hidden:Nt?pt.vM.Bottom:pt.vM.Left,Pn=Zt.config.custom?.axisPlacement!==pt.vM.Hidden;if(Zt.type===dn.PU.time){St.addScale({scaleKey:jt,orientation:Nt?pt.Lt.Horizontal:pt.Lt.Vertical,direction:Nt?pt.ON.Right:pt.ON.Up,isTime:!0,range:()=>{const Sn=Ie();return[Sn.from.valueOf(),Sn.to.valueOf()]}});const Da=ve.length>1?(Sn,wn)=>Nt?wn.map((Ln,Wa)=>Wa<2?null:Ln):wn:void 0;for(let Sn=0;Sn<ve.length;Sn++){const wn=ve[Sn];St.addAxis({scaleKey:jt,isTime:!0,placement:tn,show:Pn,label:Zt.config.custom?.axisLabel,timeZone:wn,theme:ce,grid:{show:Sn===0&&Zt.config.custom?.axisGridShow},filter:Da})}ve.length>1&&St.addHook("drawAxes",Sn=>{Sn.ctx.save();let wn=0;Sn.axes.forEach(Ln=>{if(Nt&&Ln.side===2){Sn.ctx.fillStyle=ce.colors.text.primary,Sn.ctx.textAlign="left",Sn.ctx.textBaseline="bottom";let Wa=Ln._pos+Ln._size;Sn.ctx.fillText(ve[wn],Sn.bbox.left,Wa*_s.A.pxRatio),wn++}}),Sn.ctx.restore()})}else St.addScale({scaleKey:jt,orientation:Nt?pt.Lt.Horizontal:pt.Lt.Vertical,direction:Nt?pt.ON.Right:pt.ON.Up,range:(Da,Sn,wn)=>[Zt.config.min??Sn,Zt.config.max??wn]}),St.addAxis({scaleKey:jt,placement:tn,show:Pn,label:Zt.config.custom?.axisLabel,theme:ce,grid:{show:Zt.config.custom?.axisGridShow},formatValue:(Da,Sn)=>(0,Ls.cN)(Zt.display(Da,Sn))});let ln=nt?.flatMap(Da=>Object.values(Da.fieldMap).filter(Sn=>Da.indicesOnly.indexOf(Sn)===-1))??[],Zn;for(let Da=1;Da<j.fields.length;Da++){const Sn=j.fields[Da],wn={...Sn.config,custom:{...Pl,...Sn.config.custom}},Ln=wn.custom;if(Sn===Zt||Sn.type!==dn.PU.number&&Sn.type!==dn.PU.enum)continue;let Wa=Sn.display??Ti;Sn.config.custom?.stacking?.mode===pt.gs.Percent&&(Wa=(0,Ws.J)({field:{...Sn,config:{...Sn.config,unit:"percentunit"}},theme:ce}));const Za=(0,Do.M)(wn,Sn.type),ds=(0,Bs.Qi)(Sn),ha=(0,Bs.lz)(Sn,ce).color;if(St.addScale(gt({scaleKey:Za,orientation:Nt?pt.Lt.Vertical:pt.Lt.Horizontal,direction:Nt?pt.ON.Up:pt.ON.Right,distribution:Ln.scaleDistribution?.type,log:Ln.scaleDistribution?.log,linearThreshold:Ln.scaleDistribution?.linearThreshold,min:Sn.config.min,max:Sn.config.max,softMin:Ln.axisSoftMin,softMax:Ln.axisSoftMax,centeredZero:Ln.axisCenteredZero,range:Ln.stacking?.mode===pt.gs.Percent?(Tn,ca,Ra)=>(ca=ca<0?-1:0,Ra=Ra>0?1:0,[ca,Ra]):Sn.type===dn.PU.enum?(Tn,ca,Ra)=>[-1,Sn.config.type.enum.text.length]:void 0,decimals:Sn.config.decimals},Sn)),Yt||(Yt=Za),Ln.axisPlacement!==pt.vM.Hidden){let Tn;Ln.axisColorMode===pt.Y$.Series&&(ds.isByValue&&Sn.config.custom?.gradientMode===pt.on.Scheme&&ds.id===Hn.Y.Thresholds?Tn=(0,So.pl)(1,ce,ds,Sn.config.thresholds):Tn=ha);const ca={border:{show:Ln.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Tn||ce.colors.text.primary},ticks:{show:Ln.axisBorderShow||!1,stroke:Tn||ce.colors.text.primary},color:Tn||ce.colors.text.primary};let Ra,Ba,Fa;if(Wi.has(wn.unit))Ra=Ki;else if(Sn.type===dn.PU.enum){let ls=Sn.config.type.enum.text;Fa=ls.map((Ns,kt)=>kt),Ba=ls}St.addAxis(vt({scaleKey:Za,label:Ln.axisLabel,size:Ln.axisWidth,placement:Nt?Ln.axisPlacement??pt.vM.Auto:pt.vM.Bottom,formatValue:(ls,Ns)=>(0,Ls.cN)(Wa(ls,Ns)),theme:ce,grid:{show:Ln.axisGridShow},decimals:Sn.config.decimals,distr:Ln.scaleDistribution?.type,splits:Fa,values:Ba,incrs:Ra,...ca},Sn))}const as=Ln.drawStyle===pt.GR.Points?pt.yL.Always:Ln.showPoints;let Ps=()=>null;Ln.spanNulls!==!0&&(Ps=(Tn,ca,Ra,Ba)=>{let Fa=[],ls=Tn.series[ca];if(!Ra&&Ba&&Ba.length){const[Ns,kt]=ls.idxs,nr=Tn.data[0],Yn=Tn.data[ca],ta=Math.round(Tn.valToPos(nr[Ns],"x",!0)),ya=Math.round(Tn.valToPos(nr[kt],"x",!0));Ba[0][0]===ta&&Fa.push(Ns);for(let Ya=0;Ya<Ba.length;Ya++){let qa=Ba[Ya],xs=Ba[Ya+1];if(xs&&qa[1]===xs[0]){let gs=Tn.posToIdx(qa[1],!0);if(Yn[gs]==null)for(let pr=1;pr<100;pr++){if(Yn[gs+pr]!=null){gs+=pr;break}if(Yn[gs-pr]!=null){gs-=pr;break}}Fa.push(gs)}}Ba[Ba.length-1][1]===ya&&Fa.push(kt)}return Fa.length?Fa:null});let{fillOpacity:Ms}=Ln,Pa=null,Ka=null;if(Sn.state?.origin){Zn||(Zn=sl(j,Ge));const Tn=Ge[Sn.state.origin.frameIndex],ca=Tn?.fields[Sn.state.origin.fieldIndex],Ra=(0,va.Ct)(ca??Sn,Tn,Ge);if(ln.indexOf(Ra)>=0)Pa=()=>null,Ka=()=>{};else if(Ln.transform===pt.NU.Constant){const Ba=_s.A.paths.linear();Pa=(Fa,ls)=>{const Ns=Fa._data,kt=Ie();let nr=[kt.from.valueOf(),kt.to.valueOf()],Yn=Ns[ls].find(Ya=>Ya!=null),ta=[Yn,Yn],ya=Ns.slice();return ya[0]=nr,ya[ls]=ta,Ba({...Fa,_data:ya},ls,0,1)}}if(Ln.fillBelowTo){const Ba=j.fields.find(kt=>Ln.fillBelowTo===kt.name||Ln.fillBelowTo===kt.config?.displayNameFromDS||Ln.fillBelowTo===(0,va.Ct)(kt,j,Ge)),Fa=Ba?(0,va.Ct)(Ba,j,Ge):Ln.fillBelowTo,ls=Zn.get(Ra),Ns=Zn.get(Fa);(0,N.isNumber)(Ns)&&(0,N.isNumber)(ls)?(St.addBand({series:[ls,Ns],fill:void 0}),Ms||(Ms=35)):Ms=0}}let Qn;ds.id===Hn.Y.Thresholds&&(Qn=Tn=>(0,Bs.lz)(Qt.fields[Tn],ce).color),St.addSeries({pathBuilder:Pa,pointsBuilder:Ka,scaleKey:Za,showPoints:as,pointsFilter:Ps,colorMode:ds,fillOpacity:Ms,theme:ce,dynamicSeriesColor:Qn,drawStyle:Ln.drawStyle,lineColor:Ln.lineColor??ha,lineWidth:Ln.lineWidth,lineInterpolation:Ln.lineInterpolation,lineStyle:Ln.lineStyle,barAlignment:Ln.barAlignment,barWidthFactor:Ln.barWidthFactor,barMaxWidth:Ln.barMaxWidth,pointSize:Ln.pointSize,spanNulls:Ln.spanNulls||!1,show:!Ln.hideFrom?.viz,gradientMode:Ln.gradientMode,thresholds:wn.thresholds,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:Ln.axisSoftMin,softMax:Ln.axisSoftMax,dataFrameFieldIndex:Sn.state?.origin}),Ln.thresholdsStyle&&wn.thresholds&&(Ln.thresholdsStyle.mode??pt.Ly.Off)!==pt.Ly.Off&&St.addThresholds({config:Ln.thresholdsStyle,thresholds:wn.thresholds,scaleKey:Za,theme:ce,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:Ln.axisSoftMin,softMax:Ln.axisSoftMax})}let Nn=(0,Ur.ro)(j);St.setStackingGroups(Nn),nt?.forEach(Da=>{Zn||(Zn=sl(j,Ge));let Sn={};for(let wn in Da.fieldMap){let Ln=Da.fieldMap[wn];Sn[wn]=Zn.get(Ln)}Da.init(St,Sn)}),St.scaleKeys=[jt,Yt];const zn=15;let ma={hover:{prox:(Da,Sn,wn)=>Rt??(Da.data[Sn][wn]===null?zn:null),skip:[null]},focus:{prox:Rt??30}};return Zt.type===dn.PU.time&&Ke&&Ke()!==Rs.y.Off&&(ma.sync={key:bt,scales:[jt,null]}),St.setSync(),St.setCursor(ma),St};function sl(j,ce){const ve=new Map;return j.fields.forEach((Ie,Ke)=>{const Ge=Ie.state?.origin;if(Ge){const nt=ce[Ge.frameIndex]?.fields[Ge.fieldIndex];nt&&ve.set((0,va.Ct)(nt,ce[Ge.frameIndex],ce),Ke)}}),ve}const rl=["legend","options","theme"];class Cl extends v.Component{constructor(){super(...arguments),this.prepConfig=(ce,ve,Ie)=>{const{eventsScope:Ke,sync:Ge}=this.context,{theme:nt,timeZone:gt,options:vt,renderers:bt,tweakAxis:Rt,tweakScale:Lt}=this.props;return al({frame:ce,theme:nt,timeZones:Array.isArray(gt)?gt:[gt],getTimeRange:Ie,sync:Ge,allFrames:ve,renderers:bt,tweakScale:Lt,tweakAxis:Rt,eventsScope:Ke,hoverProximity:vt?.tooltip?.hoverProximity,orientation:vt?.orientation})},this.renderLegend=ce=>{const{legend:ve,frames:Ie}=this.props;return!ce||ve&&!ve.showLegend||!(0,ys.t)(ce,Ie)?null:v.createElement(ys.$,{data:Ie,config:ce,...ve})}}static{this.contextType=Ma.e4}render(){return v.createElement(Xs.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:rl,renderLegend:this.renderLegend})}}const go=(0,le.cV)(Cl);go.displayName="TimeSeries";var No=e(1604),so=e(18491),Wr=e(36376),$i=e(24284);const Si=j=>ce=>{const ve=j.visualization.getColorByName(ce?.color||$i.Mk);return{markerTriangle:(0,G.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ve};
      `,markerBar:(0,G.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ve};
      `}};var di=e(49785),jo=e(5805),Vi=e(37151),po=e(88575),Tl=e(21744),ol=e(72235),_i=e(99818),zi=e(10154);const wo=v.forwardRef(({annotation:j,onSave:ce,onDismiss:ve,timeFormatter:Ie,className:Ke,...Ge},nt)=>{const gt=(0,le.of)(il),vt=(0,Ma.d2)(),bt=(0,v.useRef)(null);(0,Vi.A)(bt,()=>{ve()});const[Rt,Lt]=(0,jo.default)(async Zn=>{const Nn=await vt.onAnnotationCreate(Zn);return ce&&ce(),Nn}),[Nt,St]=(0,jo.default)(async Zn=>{const Nn=await vt.onAnnotationUpdate(Zn);return ce&&ce(),Nn}),Qt=j.id!==void 0,Zt=j.time!==j.timeEnd,jt=Qt?St:Lt,Yt=Qt?Nt:Rt,tn=Zt?`${Ie(j.time)} - ${Ie(j.timeEnd)}`:Ie(j.time),Pn=({tags:Zn,description:Nn})=>{jt({id:j.id,tags:Zn,description:Nn,from:Math.round(j.time),to:Math.round(j.timeEnd)})},ln=v.createElement("div",{ref:nt,className:(0,G.cx)(gt.editor,Ke),...Ge},v.createElement("div",{className:gt.header},v.createElement(A.B,{justifyContent:"space-between",alignItems:"center"},v.createElement("div",{className:gt.title},"Add annotation"),v.createElement("div",{className:gt.ts},tn))),v.createElement("div",{className:gt.editorForm},v.createElement(ol.l,{onSubmit:Pn,defaultValues:{description:j?.text,tags:j?.tags||[]}},({register:Zn,errors:Nn,control:zn})=>v.createElement(v.Fragment,null,v.createElement(po.D,{label:"Description",invalid:!!Nn.description,error:Nn?.description?.message},v.createElement(Tl.f,{...Zn("description",{required:"Annotation description is required"})})),v.createElement(po.D,{label:"Tags"},v.createElement(di.xI,{control:zn,name:"tags",render:({field:{ref:Aa,onChange:ma,...Da}})=>v.createElement(_i.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:ma,tagOptions:zi.vy,tags:Da.value})})),v.createElement(A.B,{justifyContent:"flex-end"},v.createElement(R.$n,{size:"sm",variant:"secondary",onClick:ve,fill:"outline"},"Cancel"),v.createElement(R.$n,{size:"sm",type:"submit",disabled:Yt?.loading},Yt?.loading?"Saving":"Save"))))));return v.createElement(v.Fragment,null,v.createElement("div",{className:gt.backdrop}),v.createElement("div",{ref:bt},ln))});wo.displayName="AnnotationEditorForm";const il=j=>({backdrop:(0,G.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${j.zIndex.navbarFixed};
    `,editorContainer:(0,G.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,G.css)`
      background: ${j.colors.background.primary};
      box-shadow: ${j.shadows.z3};
      z-index: ${j.zIndex.dropdown};
      border: 1px solid ${j.colors.border.weak};
      border-radius: ${j.shape.radius.default};
      width: 460px;
    `,editorForm:(0,G.css)`
      padding: ${j.spacing(1)};
    `,header:(0,G.css)`
      border-bottom: 1px solid ${j.colors.border.weak};
      padding: ${j.spacing(1.5,1)};
    `,title:(0,G.css)`
      font-weight: ${j.typography.fontWeightMedium};
    `,ts:(0,G.css)`
      font-size: ${j.typography.bodySmall.fontSize};
      color: ${j.colors.text.secondary};
    `}),ki=({onDismiss:j,onSave:ce,timeZone:ve,data:Ie,selection:Ke,annotation:Ge,style:nt})=>{const gt=(0,le.$j)(),vt=(0,le.of)(Ql),bt=(0,le.of)(Si),Rt=[(0,so.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,so.BN)()],{context:Lt,refs:Nt,floatingStyles:St}=(0,Wr.we)({open:!0,placement:"bottom",onOpenChange:ln=>{ln||j()},middleware:Rt,whileElementsMounted:so.ll,strategy:"fixed"}),Qt=(0,Wr.s9)(Lt),{getReferenceProps:Zt,getFloatingProps:jt}=(0,Wr.bv)([Qt]);let Yt=Ie.fields[0];if(!Yt)return null;const tn=Yt.display||(0,Ws.J)({field:Yt,timeZone:ve,theme:gt}),Pn=Ke.min!==Ke.max;return v.createElement(ar.ZL,null,v.createElement(v.Fragment,null,v.createElement("div",{style:nt},v.createElement("div",{className:(0,G.cx)((0,G.css)({position:"absolute",top:Ke.bbox.top,left:Ke.bbox.left,width:Ke.bbox.width,height:Ke.bbox.height}),Pn?vt.overlayRange(Ge):vt.overlay(Ge))},v.createElement("div",{ref:Nt.setReference,className:Pn?(0,G.cx)(bt(Ge).markerBar,vt.markerBar):(0,G.cx)(bt(Ge).markerTriangle,vt.markerTriangle),...Zt()}))),v.createElement(wo,{annotation:Ge||{time:Ke.min,timeEnd:Ke.max},timeFormatter:ln=>tn(ln).text,onSave:ce,onDismiss:j,ref:Nt.setFloating,style:St,...jt()})))},Ql=j=>({overlay:ce=>{const ve=j.visualization.getColorByName(ce?.color||$i.Mk);return(0,G.css)({borderLeft:`1px dashed ${ve}`})},overlayRange:ce=>{const ve=j.visualization.getColorByName(ce?.color||$i.Mk);return(0,G.css)({background:mo.alpha(ve,.1),borderLeft:`1px dashed ${ve}`,borderRight:`1px dashed ${ve}`})},markerTriangle:(0,G.css)({top:"calc(100% + 2px)",left:"-4px",position:"absolute"}),markerBar:(0,G.css)({top:"100%",left:0,position:"absolute"})}),Hi=({data:j,timeZone:ce,config:ve,children:Ie})=>{const Ke=(0,v.useRef)(),[Ge,nt]=(0,v.useState)(),[gt,vt]=(0,v.useState)(!1),[bt,Rt]=(0,v.useState)(null),Lt=(0,No.A)(),Nt=(0,v.useCallback)(()=>{Rt(null),Ke.current&&Ke.current.setSelect({top:0,left:0,width:0,height:0}),vt(!1)},[vt,Rt]);(0,v.useLayoutEffect)(()=>{let Qt=!1;ve.addHook("init",jt=>{Ke.current=jt;const Yt=jt.hooks.setSelect;if(Yt)for(let tn=0;tn<Yt.length;tn++){const Pn=Yt[tn];Pn!==Zt&&(Yt[tn]=(...ln)=>{!Qt&&Pn(...ln)})}}),ve.addHook("syncRect",(jt,Yt)=>{Lt()&&nt(Yt)});const Zt=jt=>{Qt&&(vt(!0),Rt({min:jt.posToVal(jt.select.left,"x"),max:jt.posToVal(jt.select.left+jt.select.width,"x"),bbox:{left:jt.select.left,top:0,height:jt.select.height,width:jt.select.width}}),Qt=!1)};ve.addHook("setSelect",Zt),ve.setCursor({bind:{mousedown:(jt,Yt,tn)=>Pn=>(Qt=Pn.button===0&&(Pn.metaKey||Pn.ctrlKey),tn(Pn),null),mouseup:(jt,Yt,tn)=>Pn=>(Qt&&jt.select.width===0&&(jt.select.left=jt.cursor.left,jt.select.height=jt.bbox.height/window.devicePixelRatio),tn(Pn),null)}})},[ve,nt,Lt]);const St=(0,v.useCallback)(({coords:Qt})=>{if(!Ke.current||!Ge||!Qt)return;const Zt=Ke.current.posToVal(Qt.plotCanvas.x,"x");Zt&&(Rt({min:Zt,max:Zt,bbox:{left:Qt.plotCanvas.x,top:0,height:Ge.height,width:0}}),vt(!0))},[Ge]);return v.createElement(v.Fragment,null,gt&&bt&&Ge&&v.createElement(ki,{selection:bt,onDismiss:Nt,onSave:Nt,data:j,timeZone:ce,style:{position:"absolute",top:`${Ge.top}px`,left:`${Ge.left}px`,width:`${Ge.width}px`,height:`${Ge.height}px`}}),Ie?Ie({startAnnotating:St}):null)};var Yr=e(78368),Mo=e(78226),rr=e(13544),ji=e(16797),Mi=e(40672),ti=e(29158),ui=e(78369);const ll=({annotation:j,timeFormatter:ce,canEdit:ve,canDelete:Ie,onEdit:Ke,onDelete:Ge})=>{const nt=(0,le.of)(Yl),gt=ce(j.time),vt=ce(j.timeEnd);let bt=j.text;const Rt=j.tags;let Lt="",Nt,St,Qt=null;const Zt=v.createElement("span",{className:nt.time},j.isRegion?`${gt} - ${vt}`:gt);if(j.login&&j.avatarUrl&&(Nt=v.createElement("img",{className:nt.avatar,alt:"Annotation avatar",src:j.avatarUrl})),j.alertId!==void 0&&j.newState){const jt=Fe.A.getStateDisplayModel(j.newState);Qt=v.createElement("div",{className:nt.alertState},v.createElement("i",{className:jt.stateClass},jt.text)),Lt=Fe.A.getAlertAnnotationInfo(j)}else j.title&&(bt=j.title+"<br />"+(typeof bt=="string"?bt:""));return(ve||Ie)&&(St=v.createElement("div",{className:nt.editControls},ve&&v.createElement(ti.K,{name:"pen",size:"sm",onClick:Ke,tooltip:"Edit"}),Ie&&v.createElement(ti.K,{name:"trash-alt",size:"sm",onClick:Ge,tooltip:"Delete"}))),v.createElement("div",{className:nt.wrapper},v.createElement("div",{className:nt.header},v.createElement(ao.Gy,{justify:"space-between",align:"center",spacing:"md"},v.createElement("div",{className:nt.meta},v.createElement("span",null,Nt,Qt),Zt),St)),v.createElement("div",{className:nt.body},bt&&v.createElement("div",{dangerouslySetInnerHTML:{__html:Mi.sQ.sanitize(bt)}}),Lt,v.createElement(v.Fragment,null,v.createElement(ao.Gy,{spacing:"xs",wrap:!0},Rt?.map((jt,Yt)=>v.createElement(ui.v,{name:jt,key:`${jt}-${Yt}`}))))))};ll.displayName="AnnotationTooltip";const Yl=j=>({wrapper:(0,G.css)`
      max-width: 400px;
    `,commentWrapper:(0,G.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,G.css)`
      padding: ${j.spacing(.5,1)};
      border-bottom: 1px solid ${j.colors.border.weak};
      font-size: ${j.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,G.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,G.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,G.css)`
      border-radius: ${j.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${j.spacing(1)};
    `,alertState:(0,G.css)`
      padding-right: ${j.spacing(1)};
      font-weight: ${j.typography.fontWeightMedium};
    `,time:(0,G.css)`
      color: ${j.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,G.css)`
      padding: ${j.spacing(1)};

      a {
        color: ${j.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Sl=6;function Ml({annotation:j,timeZone:ce,width:ve}){const{canEditAnnotations:Ie,canDeleteAnnotations:Ke,...Ge}=(0,Ma.d2)(),nt=(0,le.of)(Si),gt=(0,le.of)(xl),[vt,bt]=(0,v.useState)(!1),[Rt,Lt]=(0,v.useState)(!1),Nt=[(0,so.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,so.BN)()],{context:St,refs:Qt,floatingStyles:Zt}=(0,Wr.we)({open:vt,placement:"bottom",onOpenChange:bt,middleware:Nt,whileElementsMounted:so.ll,strategy:"fixed"}),jt=(0,Wr.Mk)(St,{handleClose:(0,Wr.iB)()}),Yt=(0,Wr.s9)(St),{getReferenceProps:tn,getFloatingProps:Pn}=(0,Wr.bv)([Yt,jt]),ln=(0,v.useCallback)(()=>{Lt(!0),bt(!1)},[Lt,bt]),Zn=(0,v.useCallback)(()=>{Ge.onAnnotationDelete&&Ge.onAnnotationDelete(j.id)},[j,Ge]),Nn=(0,v.useCallback)(Sn=>(0,Vo.LE)(Sn,{format:ur.WC.fullDate,timeZone:ce}),[ce]),zn=(0,v.useCallback)(()=>v.createElement(ll,{annotation:j,timeFormatter:Nn,onEdit:ln,onDelete:Zn,canEdit:Ie?Ie(j.dashboardUID):!1,canDelete:Ke?Ke(j.dashboardUID):!1}),[Ie,Ke,Zn,ln,Nn,j]),Aa=!!j.isRegion&&ve>Sl;let ma=`${ve/2}px`,Da=v.createElement("div",{className:nt(j).markerTriangle,style:{left:ma,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Aa&&(Da=v.createElement("div",{className:nt(j).markerBar,style:{width:`${ve}px`,transform:"translate3d(0,-50%, 0)"}})),v.createElement(v.Fragment,null,v.createElement("div",{ref:Qt.setReference,className:Aa?void 0:gt.markerWrapper,"data-testid":rr.Tp.pages.Dashboard.Annotations.marker,...tn()},Da),vt&&v.createElement(ar.ZL,null,v.createElement("div",{className:gt.tooltip,ref:Qt.setFloating,style:Zt,...Pn()},zn())),Rt&&v.createElement(ar.ZL,null,v.createElement(wo,{onDismiss:()=>Lt(!1),onSave:()=>Lt(!1),timeFormatter:Nn,annotation:j,ref:Qt.setFloating,style:Zt,...Pn()})))}const xl=j=>({markerWrapper:(0,G.css)({label:"markerWrapper",padding:j.spacing(0,.5,.5,.5)}),tooltip:(0,G.css)({...(0,ji.getTooltipContainerStyles)(j),padding:0})}),mi=({annotations:j,timeZone:ce,config:ve,disableCanvasRendering:Ie=!1})=>{const Ke=(0,le.$j)(),Ge=(0,v.useRef)(),nt=(0,v.useRef)();(0,v.useEffect)(()=>{const bt=[];for(const Rt of j)bt.push(new Yr.R(Rt));return nt.current=bt,()=>{nt.current=[]}},[j]),(0,v.useLayoutEffect)(()=>{ve.addHook("init",bt=>{Ge.current=bt}),ve.addHook("draw",bt=>{if(!nt.current)return null;const Rt=bt.ctx;if(!Rt)return;Rt.save(),Rt.beginPath(),Rt.rect(bt.bbox.left,bt.bbox.top,bt.bbox.width,bt.bbox.height),Rt.clip();const Lt=(Nt,St)=>{Rt.beginPath(),Rt.lineWidth=2,Rt.strokeStyle=St,Rt.setLineDash([5,5]),Rt.moveTo(Nt,bt.bbox.top),Rt.lineTo(Nt,bt.bbox.top+bt.bbox.height),Rt.stroke(),Rt.closePath()};if(!Ie)for(let Nt=0;Nt<nt.current.length;Nt++){const St=nt.current[Nt];for(let Qt=0;Qt<St.length;Qt++){const Zt=St.get(Qt);if(!Zt.time)continue;let jt=bt.valToPos(Zt.time,"x",!0);const Yt=Ke.visualization.getColorByName(Zt.color);if(Lt(jt,Yt),Zt.isRegion&&Zt.timeEnd){let tn=bt.valToPos(Zt.timeEnd,"x",!0);Lt(tn,Yt),Rt.fillStyle=mo.alpha(Yt,.1),Rt.rect(jt,bt.bbox.top,tn-jt,bt.bbox.height),Rt.fill()}}}Rt.restore()})},[ve,Ke,Ie]);const gt=(0,v.useCallback)((bt,Rt)=>{const Nt=new Yr.R(bt).get(Rt.fieldIndex);if(!Nt.time||!Ge.current)return;let St=Ge.current.valToPos(Nt.time,"x");return St<0&&(St=0),{x:St,y:Ge.current.bbox.height/window.devicePixelRatio+4}},[]),vt=(0,v.useCallback)((bt,Rt)=>{let Lt=0;const St=new Yr.R(bt).get(Rt.fieldIndex);if(!!St.isRegion&&Ge.current){let Zt=Ge.current.valToPos(St.time,"x"),jt=Ge.current.valToPos(St.timeEnd,"x");Zt<0&&(Zt=0),jt>Ge.current.bbox.width/window.devicePixelRatio&&(jt=Ge.current.bbox.width/window.devicePixelRatio),Lt=jt-Zt}return v.createElement(Ml,{annotation:St,timeZone:ce,width:Lt})},[ce]);return v.createElement(Mo.a,{id:"annotations",config:ve,events:j,renderEventMarker:vt,mapEventToXYCoords:gt})};var fi=e(62567),Qe=e(29647),qe=e(33083),et=e(59093),ct=e(64539),Ot=e(28122);const Ft=({data:j,config:ce,onClose:ve,timeZone:Ie,replaceVariables:Ke,...Ge})=>{const[nt,gt]=(0,v.useState)(null),[vt,bt]=(0,v.useState)(null),[Rt,Lt]=(0,v.useState)(!1);(0,v.useLayoutEffect)(()=>{let St=null;ce.addHook("init",Qt=>{Qt.over.addEventListener("click",Zt=>{St!=null&&!Zt.metaKey&&!Zt.ctrlKey&&!Zt.shiftKey&&(gt({viewport:{x:Zt.clientX,y:Zt.clientY},plotCanvas:{x:Zt.clientX-Qt.rect.left,y:Zt.clientY-Qt.rect.top}}),bt({seriesIdx:St,dataIdx:Qt.cursor.idxs[St]}),Lt(!0))})}),ce.addHook("setSeries",(Qt,Zt)=>{St=Zt})},[ce]);const Nt=(0,v.useMemo)(()=>Ge.defaultItems?Ge.defaultItems.map(St=>({...St,items:St.items.map(Qt=>({...Qt,onClick:Zt=>{nt&&Qt.onClick?.(Zt,{coords:nt})}}))})):[],[nt,Ge.defaultItems]);return v.createElement(v.Fragment,null,Rt&&nt&&v.createElement(zt,{data:j,frames:Ge.frames,defaultItems:Nt,timeZone:Ie,selection:{point:vt,coords:nt},replaceVariables:Ke,onClose:()=>{bt(null),Lt(!1),ve&&ve()}}))},zt=({selection:j,timeZone:ce,defaultItems:ve,replaceVariables:Ie,data:Ke,...Ge})=>{const nt=(0,v.useRef)(null),gt=()=>{Ge.onClose&&Ge.onClose()};(0,Qe.A)(nt,()=>{gt()});const vt=Ke.fields[0];if(!vt)return null;const bt=ve?[...ve]:[];let Rt=()=>null;if(j.point){const{seriesIdx:Nt,dataIdx:St}=j.point,Qt=vt.display;if(Nt&&St!==null){const Zt=Ke.fields[Nt],jt=Zt.display(Zt.values[St]);Zt.config.links&&Zt.config.links.length>0&&Zt.getLinks&&bt.push({items:Zt.getLinks({valueRowIndex:St}).map(tn=>({label:tn.title,ariaLabel:tn.title,url:tn.href,target:tn.target,icon:tn.target==="_self"?"link":"external-link-alt",onClick:tn.onClick}))}),Rt=()=>v.createElement(qe.i,{timestamp:Qt(vt.values[St]).text,displayValue:jt,seriesColor:jt.color,displayName:(0,va.Ct)(Zt,Ke,Ge.frames)})}}const Lt=()=>bt?.map((Nt,St)=>v.createElement(et.r,{key:`${Nt.label}${St}`,label:Nt.label},(Nt.items||[]).map(Qt=>v.createElement(ct.D,{key:Qt.url,url:Qt.url,label:Qt.label,target:Qt.target,icon:Qt.icon,active:Qt.active,onClick:Qt.onClick}))));return v.createElement(Ot.t,{renderMenuItems:Lt,renderHeader:Rt,x:j.coords.viewport.x,y:j.coords.viewport.y,onClose:gt})};var sn=e(79961),un=e(74007),yn=e(86106);const $n=({timeZone:j,dataFrame:ce,dataFrameFieldIndex:ve,config:Ie,exemplarColor:Ke,clickedExemplarFieldIndex:Ge,setClickedExemplarFieldIndex:nt})=>{const gt=(0,le.of)(ea),[vt,bt]=(0,v.useState)(!1),[Rt,Lt]=(0,v.useState)(!1),Nt=[(0,so.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,so.BN)()],{context:St,refs:Qt,floatingStyles:Zt}=(0,Wr.we)({open:vt,placement:"bottom",onOpenChange:bt,middleware:Nt,whileElementsMounted:so.ll,strategy:"fixed"}),jt=(0,Wr.s9)(St),Yt=(0,Wr.Mk)(St,{handleClose:(0,Wr.iB)(),enabled:Ge===void 0}),{getReferenceProps:tn,getFloatingProps:Pn}=(0,Wr.bv)([jt,Yt]);(0,v.useEffect)(()=>{Ge?.fieldIndex===ve.fieldIndex&&Ge?.frameIndex===ve.frameIndex||Lt(!1)},[Ge,ve]);const ln=()=>{const ma=[v.createElement("rect",{fill:Ke,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),v.createElement("path",{fill:Ke,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),v.createElement("path",{fill:Ke,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),v.createElement("rect",{fill:Ke,key:"rectangle",width:"5",height:"5"}),v.createElement("path",{fill:Ke,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),v.createElement("path",{fill:Ke,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return ma[ve.frameIndex%ma.length]},Zn=()=>{Lt(!0)},Nn=(0,v.useCallback)(()=>{const ma=ce.fields.filter(la=>la.config.links?.length&&la.config.links?.length>0)||[],Da=[...ma,...ce.fields.filter(la=>!ma.includes(la))],Sn=la=>(0,Vo.LE)(la,{format:ur.WC.fullDate,timeZone:j}),wn=()=>{Lt(!1),bt(!1),nt(void 0)};let Ln=[],Wa=[];Da.map((la,ha)=>{const as=la.values[ve.fieldIndex];la.config.links?.length&&Wa?.push(...la.getLinks?.({valueRowIndex:ve.fieldIndex})||[]);const Ps=la.display?la.display(as):{text:`${as}`,numeric:+as};Ln.push({name:la.name,value:as,valueString:(0,Ls.cN)(Ps),highlight:!1})});const Za={position:"relative",top:"35px",right:"5px",marginRight:0},ds=()=>S.$.featureToggles.newVizTooltips?v.createElement(v.Fragment,null,Rt&&v.createElement(yn.d,{onClick:wn,style:Za}),v.createElement(un.i,{displayValues:Ln,links:Wa})):v.createElement("div",{className:gt.wrapper},Rt&&v.createElement(yn.d,{onClick:wn}),v.createElement("div",{className:gt.body},v.createElement("div",{className:gt.header},v.createElement("span",{className:gt.title},"Exemplars")),v.createElement("div",null,v.createElement("table",{className:gt.exemplarsTable},v.createElement("tbody",null,Da.map((la,ha)=>{const as=la.values[ve.fieldIndex],Ps=la.config.links?.length?la.getLinks?.({valueRowIndex:ve.fieldIndex}):void 0;return v.createElement("tr",{key:ha},v.createElement("td",{valign:"top"},la.name),v.createElement("td",null,v.createElement("div",{className:gt.valueWrapper},v.createElement("span",null,la.type===dn.PU.time?Sn(as):as),Ps&&v.createElement(sn.n,{links:Ps}))))}))))));return v.createElement("div",{className:gt.tooltip,ref:Qt.setFloating,style:Zt,...Pn()},ds())},[ce.fields,ve,gt,j,Rt,nt,Zt,Pn,Qt.setFloating]),zn=Ie.getSeries().find(ma=>ma.props.dataFrameFieldIndex?.frameIndex===ve.frameIndex)?.props.lineColor,Aa=()=>{nt(ve),Zn()};return v.createElement(v.Fragment,null,v.createElement("div",{ref:Qt.setReference,className:gt.markerWrapper,"data-testid":rr.Tp.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0,...tn(),onClick:Aa,onKeyDown:ma=>{ma.key==="Enter"&&Aa()}},v.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:zn},className:(0,G.cx)(gt.marble,(vt||Rt)&&gt.activeMarble)},ln())),(vt||Rt)&&v.createElement(ar.ZL,null,Nn()))},ea=j=>{const ce=j.isDark?j.v1.palette.dark2:j.v1.palette.white,ve=j.isDark?j.v1.palette.dark9:j.v1.palette.gray5,Ie=j.isDark?j.v1.palette.black:j.v1.palette.white,Ke=j.isDark?j.v1.palette.dark3:j.v1.palette.gray6;return{markerWrapper:(0,G.css)({padding:"0 4px 4px 4px",width:"8px",height:"8px",boxSizing:"content-box",transform:"translate3d(-50%, 0, 0)","&:hover":{"> svg":{transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}}}),marker:(0,G.css)({width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:`4px solid ${j.v1.palette.red}`,pointerEvents:"none"}),wrapper:(0,G.css)({background:ce,border:`1px solid ${ve}`,borderRadius:j.shape.borderRadius(2),boxShadow:`0 0 20px ${Ie}`,padding:j.spacing(1)}),exemplarsTable:(0,G.css)({width:"100%","tr td":{padding:"5px 10px",whiteSpace:"nowrap",borderBottom:`4px solid ${j.components.panel.background}`},tr:{backgroundColor:j.colors.background.primary,"&:nth-child(even)":{backgroundColor:Ke}}}),valueWrapper:(0,G.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",columnGap:j.spacing(1),"> span":{flexGrow:0},"> *":{flex:"1 1",alignSelf:"center"}}),tooltip:(0,G.css)({background:"none",padding:0,overflowY:"auto",maxHeight:"95vh"}),header:(0,G.css)({background:ve,padding:"6px 10px",display:"flex"}),title:(0,G.css)({fontWeight:j.typography.fontWeightMedium,paddingRight:j.spacing(2),overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),body:(0,G.css)({fontWeight:j.typography.fontWeightMedium,borderRadius:j.shape.borderRadius(2),overflow:"hidden"}),marble:(0,G.css)({display:"block",opacity:.5,transition:"transform 0.15s ease-out"}),activeMarble:(0,G.css)({transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"})}},Xn=({exemplars:j,timeZone:ce,config:ve,visibleSeries:Ie})=>{const Ke=(0,v.useRef)(),[Ge,nt]=(0,v.useState)();(0,v.useLayoutEffect)(()=>{ve.addHook("init",bt=>{Ke.current=bt})},[ve]);const gt=(0,v.useCallback)((bt,Rt)=>{const Lt=bt.fields.find(Yt=>Yt.name===dn.LE),Nt=bt.fields.find(Yt=>Yt.name===dn.Bc);if(!Lt||!Nt||!Ke.current)return;const St=Object.keys(Ke.current.scales).find(Yt=>!["x","y"].some(tn=>tn===Yt))??ei.s,Qt=Ke.current.scales[St].min,Zt=Ke.current.scales[St].max;let jt=Nt.values[Rt.fieldIndex];return Qt!=null&&jt<Qt&&(jt=Qt),Zt!=null&&jt>Zt&&(jt=Zt),{x:Ke.current.valToPos(Lt.values[Rt.fieldIndex],"x"),y:Ke.current.valToPos(jt,St)}},[]),vt=(0,v.useCallback)((bt,Rt)=>{const Lt=Ie!==void 0?Ta(Ie,bt,Rt):!0,Nt=Ie!==void 0?Ua(bt,Rt,Ie):void 0;return Lt?v.createElement($n,{setClickedExemplarFieldIndex:nt,clickedExemplarFieldIndex:Ge,timeZone:ce,dataFrame:bt,dataFrameFieldIndex:Rt,config:ve,exemplarColor:Nt}):v.createElement(v.Fragment,null)},[ve,ce,Ie,nt,Ge]);return v.createElement(Mo.a,{config:ve,id:"exemplars",events:j,renderEventMarker:vt,mapEventToXYCoords:gt})},ra=(j,ce)=>{const ve=j.series.filter(Ke=>Ke.props.show),Ie=[];return ce?.length&&ve.forEach(Ke=>{const Ge=Ke.props?.dataFrameFieldIndex?.frameIndex,nt=Ke.props?.dataFrameFieldIndex?.fieldIndex;if(Ge!==void 0&&nt!==void 0){const gt=ce[Ge]?.fields[nt];gt?.labels&&Ie.push({labels:gt.labels,color:Ke.props?.lineColor??""})}}),{labels:Ie,totalSeriesCount:j.series.length}},Ua=(j,ce,ve)=>{let Ie;return ve.labels.some(Ke=>{const Ge=Object.keys(Ke.labels),nt=j.fields.filter(gt=>Ge.find(vt=>vt===gt.name));return nt.length&&nt.every((vt,bt,Rt)=>{const Lt=vt.values[ce.fieldIndex];return Ke.labels[vt.name]===Lt})?(Ie=Ke.color,!0):!1}),Ie},Ta=(j,ce,ve)=>{let Ie=!1;return j.labels.length===j.totalSeriesCount?Ie=!0:j.labels.some(Ke=>{const Ge=Object.keys(Ke.labels);if(Object.keys(Ke.labels).length===0)Ie=!0;else{const nt=ce.fields.filter(gt=>Ge.find(vt=>vt===gt.name));nt.length&&(Ie=j.labels.some(gt=>Object.keys(gt.labels).every(vt=>{const bt=gt.labels[vt];return nt.find(Rt=>Rt.values[ve.fieldIndex]===bt)})))}return Ie}),Ie},ja=({config:j,onChangeTimeRange:ce})=>{const ve=(0,v.useRef)(),[Ie,Ke]=(0,v.useState)([]),[Ge,nt]=(0,v.useState)();if((0,v.useLayoutEffect)(()=>{j.addHook("init",St=>{ve.current=St}),j.addHook("setScale",St=>{Ke(St.data?.[0]??[]),nt(St.scales.x??void 0)})},[j]),Ie.length<2||!ce||!Ge||!Ge.time||!Ge.min||!Ge.max)return null;let gt=0,vt=Ie.length-1;for(;gt<=vt&&Ie[gt]==null;)gt++;for(;vt>=0&&Ie[vt]==null;)vt--;const bt=Ie[gt],Rt=Ie[vt],Lt=Ge.min,Nt=Ge.max;return bt==null||Rt==null||bt<=Nt&&Rt>=Lt?null:v.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},v.createElement("div",null,v.createElement("div",null,"Data outside time range"),v.createElement(R.$n,{onClick:St=>ce({from:bt,to:Rt}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};ja.displayName="OutsideRangePlugin";var Sa=e(55794),za=e.n(Sa);const ka=({step:j,y:ce,dragBounds:ve,mapPositionToValue:Ie,formatValue:Ke,onChange:Ge})=>{const nt=(0,le.$j)();let gt=ce,vt="none";ce<(ve.top??0)&&(vt="top"),ce>(ve.bottom??0)+22&&(vt="bottom"),vt==="bottom"&&(gt=ve.bottom??ce),vt==="top"&&(gt=ve.top??ce);const bt=typeof Ge!="function",Rt=(0,le.of)(Ia,j,vt,bt),[Lt,Nt]=(0,v.useState)(j.value),St=(0,v.useMemo)(()=>nt.colors.getContrastText(nt.visualization.getColorByName(j.color)),[j.color,nt]);return v.createElement(za(),{axis:"y",grid:[1,1],disabled:bt,onStop:bt?N.noop:(Qt,Zt)=>(Ge(Ie(Zt.lastY)),!1),onDrag:(Qt,Zt)=>Nt(Ie(Zt.lastY)),position:{x:0,y:gt},bounds:ve},v.createElement("div",{className:Rt.handle,style:{color:St}},v.createElement("span",{className:Rt.handleText},Ke(Lt))))};ka.displayName="ThresholdDragHandle";const Ia=(j,ce,ve,Ie)=>{const Ke=j.visualization.getColorByName(ce.color),Ge=hs(ve),nt=ve!=="none";return{handle:(0,G.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ke};
      cursor: ${Ie?"initial":"grab"};
      border-top-right-radius: ${j.shape.radius.default};
      border-bottom-right-radius: ${j.shape.radius.default};
      ${nt&&(0,G.css)`
        margin-top: 0;
        border-radius: ${j.shape.radius.default};
      `}
      background: ${Ke};
      font-size: ${j.typography.bodySmall.fontSize};
      &:before {
        ${Ge};
      }
    `,handleText:(0,G.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function hs(j){const ce=j==="none",ve=Ie=>(0,G.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ie}px;
    border-right-color: inherit;
    border-top: ${Ie}px solid transparent;
    border-bottom: ${Ie}px solid transparent;
  `;return ce?(0,G.css)`
      ${ve(9)};
      left: -9px;
    `:j==="top"?(0,G.css)`
      ${ve(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:j==="bottom"?(0,G.css)`
      ${ve(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Is=60,Ks=({config:j,fieldConfig:ce,onThresholdsChange:ve})=>{const Ie=(0,v.useRef)(),[Ke,Ge]=(0,v.useState)(0);(0,v.useLayoutEffect)(()=>{j.setPadding([0,Is,0,0]),j.addHook("init",gt=>{Ie.current=gt}),j.addHook("draw",()=>{Ge(gt=>gt+1)})},[j]);const nt=(0,v.useMemo)(()=>{const gt=Ie.current;if(!gt)return null;const vt=ce.defaults.thresholds;if(!vt)return null;const bt=(0,Do.M)(ce.defaults,dn.PU.number),Rt=ce.defaults.decimals,Lt=[];for(let Nt=0;Nt<vt.steps.length;Nt++){const St=vt.steps[Nt],Qt=gt.valToPos(St.value,bt);if(Number.isNaN(Qt)||!Number.isFinite(Qt))continue;const Zt=gt.bbox.height/window.devicePixelRatio,Yt=typeof ve=="function"?Pn=>{const ln=[...vt.steps.slice(0,Nt),...vt.steps.slice(Nt+1),{...vt.steps[Nt],value:Pn}].sort((Zn,Nn)=>Zn.value-Nn.value);ve({...vt,steps:ln})}:void 0,tn=v.createElement(ka,{key:`${St.value}-${Nt}`,step:St,y:Qt,dragBounds:{top:0,bottom:Zt},mapPositionToValue:Pn=>gt.posToVal(Pn,bt),formatValue:Pn=>(0,Ls.j_)(bt)(Pn,Rt).text,onChange:Yt});Lt.push(tn)}return Lt},[Ke,ce,ve]);return Ie.current?v.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ie.current.bbox.left+Ie.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ie.current.bbox.top/window.devicePixelRatio}px`,width:`${Is}px`,height:`${Ie.current.bbox.height/window.devicePixelRatio}px`}},nt):null};Ks.displayName="ThresholdControlsPlugin";var Es=(j=>(j.Candles="candles",j.CandlesVolume="candles+volume",j.Volume="volume",j))(Es||{}),Gs=(j=>(j.Candles="candles",j.OHLCBars="ohlcbars",j))(Gs||{}),Ss=(j=>(j.CloseClose="close-close",j.OpenClose="open-close",j))(Ss||{});const hr={down:"red",flat:"gray",up:"green"},js={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:pt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:pt.$N.Multi,sort:pt.xB.None}},vr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function ro(j,ce,ve){const Ie=(0,Ao.findField)(j,ve[ce.key]);if(!Ie)for(const Ke of j.fields){const Ge=(0,va.Ct)(Ke,j).toLowerCase();if(ce.defaults.includes(Ge)||ce.defaults.includes(Ke.name))return Ke}return Ie}function br(j,ce,ve,Ie){if(!j?.length)return null;const Ke=ce.fields??{},Ge=j.length===1?(0,Tr.Yj)(j[0],j[0].fields.findIndex(St=>St.type===dn.PU.time)):(0,Tr.Fd)({frames:j});if(!Ge?.length)return null;const nt={aligned:Ge,frame:Ge,names:{}},gt=Lo([Ge],ve,Ie);if(!gt)return null;const vt=nt.frame=gt[0],bt=vt.fields.findIndex(St=>St.type===dn.PU.time);if(bt<0)return null;const Rt=new Set;for(const St of Object.values(vr)){const Qt=ro(vt,St,Ke);Qt&&(nt[St.key]=Qt,Rt.add(Qt))}if(!nt.open&&!nt.close&&(nt.open=vt.fields.find(St=>St.type===dn.PU.number),nt.open&&Rt.add(nt.open)),nt.open&&!nt.close&&!Ke.close){const St=nt.open.values.slice(1);St.push(St[St.length-1]),nt.close={...nt.open,values:St,name:"Next open",state:void 0},Rt.add(nt.close),vt.fields.push(nt.close),nt.autoOpenClose=!0}if(nt.close&&!nt.open&&!Ke.open){const St=nt.close.values.slice();St.unshift(St[0]),St.length=vt.length,nt.open={...nt.close,values:St,name:"Previous close",state:void 0},Rt.add(nt.open),vt.fields.push(nt.open),nt.autoOpenClose=!0}!nt.high&&!Ke.high&&(nt.high=nt.open),!nt.low&&!Ke.low&&(nt.low=nt.open),ce.mode===Es.Volume?(nt.high&&(nt.high!==nt.open&&Rt.delete(nt.high),nt.high=void 0),nt.low&&(nt.low!==nt.open&&Rt.delete(nt.low),nt.low=void 0)):ce.mode===Es.Candles&&nt.volume&&(Rt.delete(nt.volume),nt.volume=void 0);for(const St of Object.values(vr)){const Qt=nt[St.key];Qt&&(nt.names[St.key]=(0,va.Ct)(Qt,nt.frame))}const Lt=vt.fields[bt],Nt=[Lt];ce.includeAllFields?Nt.push(...vt.fields.filter(St=>St!==Lt)):Nt.push(...Rt),nt.frame={...nt.frame,fields:Nt};for(let St=0;St<nt.frame.fields.length;St++){const Qt=nt.frame.fields[St];Qt.state={...Qt.state,seriesIndex:St-1,origin:{fieldIndex:St,frameIndex:0}}}return nt}const{alpha:fr}=mo;function cr(j){let{mode:ce,candleStyle:ve,fields:Ie,colorStrategy:Ke,upColor:Ge,downColor:nt,flatColor:gt,volumeAlpha:vt,flatAsUp:bt=!0}=j;const Rt=ce!==Es.Volume&&Ie.high!=null&&Ie.low!=null,Lt=Rt&&ve===Gs.Candles,Nt=ce!==Es.Candles&&Ie.volume!=null;function St(ln,Zn,Nn,zn,Aa){return ln>0?Nn:ln<0?zn:Aa?Nn:Zn}let Qt=0,Zt=Ie.open,jt=Ie.high,Yt=Ie.low,tn=Ie.close,Pn=Ie.volume;return ln=>{let Zn,Nn,zn,Aa,ma,Da;Rt&&(zn=new Path2D,Nn=new Path2D,Zn=new Path2D),Nt&&(Aa=new Path2D,ma=new Path2D,Da=new Path2D);let Sn=new Path2D,wn=ln.ctx,Ln=ln.data[Qt],Wa=ln.data[Zt],Za=ln.data[tn],ds=Rt?ln.data[jt]:null,la=Rt?ln.data[Yt]:null,ha=Nt?ln.data[Pn]:null,as=Pn!=null?Math.round(ln.valToPos(0,ln.series[Pn].scale,!0)):null,[Ps,Ms]=ln.series[0].idxs,Pa=ln.data[0],Ka=Wa,Qn=ln.bbox.width;if(Pa.length>1){let Fa=null;for(let ls=0,Ns=1/0;ls<Pa.length;ls++)if(Ka[ls]!==void 0){if(Fa!=null){let kt=Math.abs(Pa[ls]-Pa[Fa]);kt<Ns&&(Ns=kt,Qn=Math.abs(ln.valToPos(Pa[ls],"x",!0)-ln.valToPos(Pa[Fa],"x",!0)))}Fa=ls}}let Tn=Math.round(.6*Qn),ca=2,Ra=2;Tn<=12&&(ca=Ra=1);let Ba=Math.floor(Tn/2);for(let Fa=Ps;Fa<=Ms;Fa++){let ls=Math.round(ln.valToPos(Ln[Fa],"x",!0)),Ns=Fa===Ps?0:Math.sign(Za[Fa]-Za[Fa-1]),kt=Math.sign(Za[Fa]-Wa[Fa]);if(Nt&&Da&&ma&&Aa){let nr=St(Ke===Ss.CloseClose?Ns:kt,Da,ma,Aa,Fa===Ps&&Ss.CloseClose?!1:bt),Yn=Math.round(ln.valToPos(ha[Fa],ln.series[Pn].scale,!0));nr.rect(ls-Ba,Yn,Tn,as-Yn)}if(Rt&&zn&&Nn&&Zn){let nr=St(Ke===Ss.CloseClose?Ns:kt,zn,Nn,Zn,Fa===Ps&&Ss.CloseClose?!1:bt),Yn=Math.round(ln.valToPos(ds[Fa],ln.series[jt].scale,!0)),ta=Math.round(ln.valToPos(la[Fa],ln.series[Yt].scale,!0));nr.rect(ls-Math.floor(ca/2),Yn,ca,ta-Yn);let ya=Math.round(ln.valToPos(Wa[Fa],ln.series[Zt].scale,!0)),Ya=Math.round(ln.valToPos(Za[Fa],ln.series[tn].scale,!0));if(Lt){let qa=Math.min(ya,Ya),xs=Math.max(ya,Ya),gs=Math.max(1,xs-qa);nr.rect(ls-Ba,qa,Tn,gs),Ke===Ss.CloseClose&&kt>=0&&gs>Ra*2&&Sn.rect(ls-Ba+Ra,qa+Ra,Tn-Ra*2,gs-Ra*2)}else nr.rect(ls-Ba,ya,Ba,ca),nr.rect(ls,Ya,Ba,ca)}}wn.save(),wn.rect(ln.bbox.left,ln.bbox.top,ln.bbox.width,ln.bbox.height),wn.clip(),Nt&&Da&&ma&&Aa&&(wn.fillStyle=fr(Ge,vt),wn.fill(ma),wn.fillStyle=fr(nt,vt),wn.fill(Aa),wn.fillStyle=fr(gt,vt),wn.fill(Da)),Rt&&zn&&Nn&&Zn&&(wn.fillStyle=Ge,wn.fill(Nn),wn.fillStyle=nt,wn.fill(Zn),wn.fillStyle=gt,wn.fill(zn),wn.globalCompositeOperation="destination-out",wn.fill(Sn)),wn.restore()}}const oa=({data:j,id:ce,timeRange:ve,timeZone:Ie,width:Ke,height:Ge,options:nt,fieldConfig:gt,onChangeTimeRange:vt,replaceVariables:bt})=>{const{sync:Rt,canAddAnnotations:Lt,onThresholdsChange:Nt,canEditThresholds:St,showThresholds:Qt,dataLinkPostProcessor:Zt,eventBus:jt}=(0,Ma.d2)(),Yt=(0,le.$j)(),tn=(0,v.useCallback)(()=>Rt?.()===zo.yV.Tooltip,[]),Pn=(0,v.useCallback)(()=>Rt?.()!==zo.yV.Off,[]),ln=(0,v.useMemo)(()=>br(j.series,nt,Yt,ve),[j.series,nt,Yt,ve]),[Zn,Nn]=(0,v.useState)(null),{renderers:zn,tweakScale:Aa,tweakAxis:ma,shouldRenderPrice:Da}=(0,v.useMemo)(()=>{let Ln=(kt,nr)=>kt,Wa=(kt,nr)=>kt,Za={renderers:[],tweakScale:Ln,tweakAxis:Wa,shouldRenderPrice:!1};if(!ln)return Za;const ds=ln.names;if(!Object.keys(ds).length)return Za;const{mode:la,candleStyle:ha,colorStrategy:as}=nt,Ps={...hr,...nt.colors};let{open:Ms,high:Pa,low:Ka,close:Qn,volume:Tn}=ds;if(Ms==null||Qn==null)return Za;let ca=.5,Ra=-1,Ba=!1;if(Tn!=null&&la!==Es.Candles){let kt=ln.volume;if(kt!=null){Ba=!0;let{fillOpacity:nr}=kt.config.custom;nr&&(ca=nr/100),la!==Es.Volume&&(kt.config={...kt.config},kt.config.unit="short",kt.display=(0,Ws.J)({field:kt,theme:De.config.theme2}),Wa=(Yn,ta)=>{if(ta.name===ln.volume?.name){let ya=(Ya,qa)=>{let xs=[],gs=Ya.series[Ra].max;for(let pr=0;pr<qa.length&&(xs.push(qa[pr]),!(gs&&qa[pr]>gs));pr++);return xs};Yn.space=20,Yn.filter=ya,Yn.ticks={...Yn.ticks,filter:ya}}return Yn},Ln=(Yn,ta)=>(ta.name===ln.volume?.name&&(Yn.range=(ya,Ya,qa)=>[0,qa*7]),Yn))}}let Fa=la!==Es.Volume&&Pa!=null&&Ka!=null;if(!Fa&&!Ba)return Za;let ls={},Ns=[];return Fa?ls={open:Ms,high:Pa,low:Ka,close:Qn}:Ns.push(Ms,Qn),Ba&&(ls.volume=Tn,ls.open=Ms,ls.close=Qn),{shouldRenderPrice:Fa,renderers:[{fieldMap:ls,indicesOnly:Ns,init:(kt,nr)=>{Ra=nr.volume,kt.addHook("drawAxes",cr({mode:la,fields:nr,upColor:De.config.theme2.visualization.getColorByName(Ps.up),downColor:De.config.theme2.visualization.getColorByName(Ps.down),flatColor:De.config.theme2.visualization.getColorByName(Ps.flat),volumeAlpha:ca,colorStrategy:as,candleStyle:ha,flatAsUp:!0}))}}],tweakScale:Ln,tweakAxis:Wa}},[nt,j.structureRev,j.series.length]);if(!ln)return v.createElement(da.a,{panelId:ce,fieldConfig:gt,data:j,needsTimeField:!0,needsNumberField:!0});if(Da)for(let Ln in zn[0].fieldMap){let Wa=ln[Ln];Wa.config={...Wa.config,custom:{...Wa.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const Sn=!!Lt?.(),wn=!!De.config.featureToggles.newVizTooltips;return v.createElement(go,{frames:[ln.frame],structureRev:j.structureRev,timeRange:ve,timeZone:Ie,width:Ke,height:Ge,legend:nt.legend,renderers:zn,tweakAxis:ma,tweakScale:Aa,options:nt,replaceVariables:bt,dataLinkPostProcessor:Zt},(Ln,Wa)=>v.createElement(v.Fragment,null,v.createElement(Mr.Z,{config:Ln}),v.createElement(ko.K,{config:Ln,sync:Pn,eventBus:jt,frame:Wa}),wn?v.createElement(vs.xl,{config:Ln,hoverMode:nt.tooltip.mode===pt.$N.Single?vs.b3.xOne:vs.b3.xAll,queryZoom:vt,clientZoom:!0,syncTooltip:tn,render:(Za,ds,la,ha=!1,as,Ps,Ms)=>{if(Sn&&Ps!=null){Nn(Ps),as();return}const Pa=()=>{let Ka=Za.posToVal(Za.cursor.left,"x");Nn({from:Ka,to:Ka}),as()};return v.createElement(bo.k,{frames:[ln.frame],seriesFrame:Wa,dataIdxs:ds,seriesIdx:la,mode:Ms?pt.$N.Multi:nt.tooltip.mode,sortOrder:nt.tooltip.sort,isPinned:ha,annotate:Sn?Pa:void 0,scrollable:Co(nt.tooltip)})},maxWidth:nt.tooltip.maxWidth,maxHeight:nt.tooltip.maxHeight}):v.createElement(v.Fragment,null,v.createElement(Ho.j,{config:Ln,onZoom:vt,withZoomY:!0}),v.createElement(Cs.T,{data:Wa,config:Ln,mode:pt.$N.Multi,sync:Rt,timeZone:Ie})),wn?v.createElement(fi.W,{annotations:j.annotations??[],config:Ln,timeZone:Ie,newRange:Zn,setNewRange:Nn}):j.annotations&&v.createElement(mi,{annotations:j.annotations,config:Ln,timeZone:Ie}),wn?void 0:Sn?v.createElement(Hi,{data:Wa,timeZone:Ie,config:Ln},({startAnnotating:Za})=>v.createElement(Ft,{data:Wa,config:Ln,timeZone:Ie,replaceVariables:bt,defaultItems:Sn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(ds,la)=>{la&&Za({coords:la.coords})}}]}]:[]})):v.createElement(Ft,{data:Wa,config:Ln,timeZone:Ie,replaceVariables:bt,defaultItems:[]}),j.annotations&&v.createElement(Xn,{config:Ln,exemplars:j.annotations,timeZone:Ie}),(St&&Nt||Qt)&&v.createElement(Ks,{config:Ln,fieldConfig:gt,onThresholdsChange:St?Nt:void 0}),v.createElement(ja,{config:Ln,onChangeTimeRange:vt})))};class La{getSuggestionsForData(ce){const{dataSummary:ve}=ce;if(!ce.data?.series||!ve.hasData||ve.timeFieldCount<1||ve.numberFieldCount<2||ve.numberFieldCount>10)return;const Ie=br(ce.data.series,js,S.$.theme2);if(!Ie||Ie.open===Ie.high&&Ie.open===Ie.low)return;ce.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ts.m.Candlestick,options:js,fieldConfig:{defaults:{},overrides:[]},score:Ie.autoOpenClose?Ca.nQ.Good:Ca.nQ.Best})}}const es=[{label:"Candles",value:Es.Candles},{label:"Volume",value:Es.Volume},{label:"Both",value:Es.CandlesVolume}],Ds=[{label:"Candles",value:Gs.Candles},{label:"OHLC Bars",value:Gs.OHLCBars}],$s=[{label:"Since Open",value:Ss.OpenClose},{label:"Since Prior Close",value:Ss.CloseClose}],or=j=>j.type===dn.PU.number;function er(j,ce,ve){let Ie="Auto ";if(ve){const Ke=ve[ce.key];Ke?.config?(Ie+="= "+(0,va.Ct)(Ke),Ke===ve?.open&&ce.key!=="open"&&(Ie+=` (${ce.defaults.join(",")})`)):Ie+=`(${ce.defaults.join(",")})`}j.addFieldNamePicker({path:`fields.${ce.key}`,name:ce.name,description:ce.description,settings:{filter:or,placeholderText:Ie}})}const Os=new x.m(oa).useFieldConfig((0,fo.V)(fo.S)).setPanelOptions((j,ce)=>{const ve=ce.options??js,Ie=br(ce.data,ve,S.$.theme2);j.addRadio({path:"mode",name:"Mode",description:"",defaultValue:js.mode,settings:{options:es}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:js.candleStyle,settings:{options:Ds},showIf:Ke=>Ke.mode!==Es.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:js.colorStrategy,settings:{options:$s}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:hr.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:hr.down}),er(j,vr.open,Ie),ve.mode!==Es.Volume&&(er(j,vr.high,Ie),er(j,vr.low,Ie)),er(j,vr.close,Ie),ve.mode!==Es.Candles&&er(j,vr.volume,Ie),j.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:js.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),S.$.featureToggles.newVizTooltips&&Cn.D(j,!1,!0,ve),In.H(j)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new La);var ho=e(36607),vo=e(76885),gi=e(6709),xo=e(10096),Vs=e(16021),Oo=e(91219),Nr=e(27677),Kr=e(62301),pi=e(80484);const $c=j=>({dashlistSectionHeader:(0,G.css)`
    padding: ${j.spacing(.25,1)};
    margin-right: ${j.spacing(1)};
  `,dashlistSection:(0,G.css)`
    margin-bottom: ${j.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,G.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${j.colors.border.weak};
    margin-right: ${j.spacing(1)};
    padding: ${j.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${j.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,G.css)`
    color: ${j.colors.text.secondary};
    font-size: ${j.typography.bodySmall.fontSize};
    line-height: ${j.typography.body.lineHeight};
  `,dashlistTitle:(0,G.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,G.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,G.css)`
    position: relative;
    list-style: none;
  `});async function Jl(j,ce){let ve=Promise.resolve([]);if(j.showStarred){const Rt={limit:j.maxItems,starred:"true"};ve=(0,Nr.AI)().search(Rt)}let Ie=Promise.resolve([]),Ke=[];if(j.showRecentlyViewed){let Rt=await Kr.A.getDashboardOpened();Ke=(0,N.take)(Rt,j.maxItems),Ie=(0,Nr.AI)().search({dashboardUIDs:Ke,limit:j.maxItems})}let Ge=Promise.resolve([]);if(j.showSearch){const Rt=j.folderUID===""?"general":j.folderUID,Lt={limit:j.maxItems,query:ce(j.query,{},"text"),folderUIDs:Rt,tag:j.tags.map(Nt=>ce(Nt,{},"text")),type:"dash-db"};Ge=(0,Nr.AI)().search(Lt)}const[nt,gt,vt]=await Promise.all([ve,Ge,Ie]);let bt=new Map;for(const Rt of Ke){const Lt=vt.find(Nt=>Nt.uid===Rt);Lt&&bt.set(Rt,{...Lt,isRecent:!0})}return gt.forEach(Rt=>{Rt.uid&&(bt.has(Rt.uid)?bt.get(Rt.uid).isSearchResult=!0:bt.set(Rt.uid,{...Rt,isSearchResult:!0}))}),nt.forEach(Rt=>{Rt.uid&&(bt.has(Rt.uid)?bt.get(Rt.uid).isStarred=!0:bt.set(Rt.uid,{...Rt,isStarred:!0}))}),bt}function Xl(j){const[ce,ve]=(0,v.useState)(new Map),Ie=(0,w.useDispatch)();(0,v.useEffect)(()=>{Jl(j.options,j.replaceVariables).then(jt=>{ve(jt)})},[j.options,j.replaceVariables,j.renderCounter]);const Ke=async(jt,Yt)=>{const{uid:tn,title:Pn,url:ln}=Yt;jt.preventDefault(),jt.stopPropagation();const Zn=await(0,be.UA)().starDashboard(Yt.uid,Yt.isStarred),Nn=new Map(ce);Nn.set(Yt?.uid??"",{...Yt,isStarred:Zn}),ve(Nn),Ie((0,Oo.ci)({id:tn??"",title:Pn,url:ln,isStarred:Zn}))},[Ge,nt,gt]=(0,v.useMemo)(()=>{const jt=[...ce.values()];return[jt.filter(Yt=>Yt.isStarred).sort((Yt,tn)=>Yt.title.localeCompare(tn.title)),jt.filter(Yt=>Yt.isRecent),jt.filter(Yt=>Yt.isSearchResult).sort((Yt,tn)=>Yt.title.localeCompare(tn.title))]},[ce]),{showStarred:vt,showRecentlyViewed:bt,showHeadings:Rt,showSearch:Lt}=j.options,Nt=[{header:"Starred dashboards",dashboards:Ge,show:vt},{header:"Recently viewed dashboards",dashboards:nt,show:bt},{header:"Search",dashboards:gt,show:Lt}],St=(0,le.of)($c),Qt=Vc(j),Zt=jt=>v.createElement("ul",null,jt.map(Yt=>{let tn=Yt.url;return tn=vo.kM.appendQueryToUrl(tn,Qt),tn=(0,De.zj)().disableSanitizeHtml?tn:Mi.sQ.sanitizeUrl(tn),v.createElement("li",{className:St.dashlistItem,key:`dash-${Yt.uid}`},v.createElement("div",{className:St.dashlistLink},v.createElement("div",{className:St.dashlistLinkBody},v.createElement("a",{className:St.dashlistTitle,href:tn},Yt.title),Yt.folderTitle&&v.createElement("div",{className:St.dashlistFolder},Yt.folderTitle)),v.createElement(ti.K,{tooltip:Yt.isStarred?`Unmark "${Yt.title}" as favorite`:`Mark "${Yt.title}" as favorite`,name:Yt.isStarred?"favorite":"star",iconType:Yt.isStarred?"mono":"default",onClick:Pn=>Ke(Pn,Yt)})))}));return v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},Nt.map(({show:jt,header:Yt,dashboards:tn},Pn)=>jt&&v.createElement("div",{className:St.dashlistSection,key:`dash-group-${Pn}`},Rt&&v.createElement("h6",{className:St.dashlistSectionHeader},Yt),Zt(tn))))}function Vc(j){(0,Vs.u)(xo.lE,pi.og);let ce={};return j.options.keepTime&&(ce[`$${gi.c.keepTime}`]=!0),j.options.includeVars&&(ce[`$${gi.c.includeVars}`]=!0),j.replaceVariables(vo.kM.toUrlParams(ce))}async function Zl(j){return j===0?"":(await(0,Fn.AI)().get(`/api/folders/id/${j}`,void 0,void 0,{showErrorAlert:!1})).uid}async function _c(j){const ce={...j.options,showStarred:j.options.showStarred??j.starred,showRecentlyViewed:j.options.showRecentlyViewed??j.recent,showSearch:j.options.showSearch??j.search,showHeadings:j.options.showHeadings??j.headings,maxItems:j.options.maxItems??j.limit,query:j.options.query??j.query,folderId:j.options.folderId??j.folderId,tags:j.options.tags??j.tags};if(parseFloat(j.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ke=>delete j[Ke]),ce.folderId!==void 0){const Ie=ce.folderId;try{const Ke=await Zl(Ie);ce.folderUID=Ke,delete ce.folderId}catch(Ke){console.warn("Dashlist: Error migrating folder ID to UID",Ke)}}return ce}const $r={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},zc=new x.m(Xl).setPanelOptions(j=>{j.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:$r.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:$r.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:$r.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:$r.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:$r.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:$r.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:$r.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:$r.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:ve,onChange:Ie}){return v.createElement(ho.d,{clearable:!0,permission:w.PermissionLevelString.View,value:ve,onChange:Ke=>Ie(Ke)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:$r.tags,editor(ce){return v.createElement(Ct.u,{tags:ce.value,onChange:ce.onChange})}})}).setMigrationHandler(_c);var kc=e(47187),os=e(14110),ni=e(11503);const Dr=({onBlur:j,placeholder:ce})=>{const ve=(0,v.useRef)(null);(0,v.useEffect)(()=>{ve.current&&ve.current.focus()});const Ie=Ke=>{Ke.key==="Enter"&&Ke.currentTarget.blur()};return v.createElement("input",{type:"text",placeholder:ce,onBlur:j,ref:ve,onKeyDown:Ie,"data-testid":"column-input"})},ql=({divStyle:j,onColumnInputBlur:ce})=>{const[ve,Ie]=(0,v.useState)(!1),Ke=()=>{Ie(!0)},Ge=nt=>{const gt=nt.target.value;gt&&ce(gt),Ie(!1)};return v.createElement("div",{className:j},ve?v.createElement(Dr,{placeholder:"Column Name",onBlur:Ge}):v.createElement("button",{onClick:Ke},"+"))};var Ir=e(27183),oo=e(69321);const Pr=()=>S.$.featureToggles.enableDatagridEditing,ec="600 13px Inter",Hc="400 13px Inter",Ar=document.createElement("canvas"),tc=20,cs=300,jc=65,Gc="both",Qc="number",Ol={isContextMenuOpen:!1},Yc={isInputOpen:!1},Er="datagrid_panel",gr={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},Jc={name:"A",fields:[],length:0},Xc={kind:oo.dd.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},nc={columns:oo.I1.empty(),rows:oo.I1.empty()},Zc={sticky:!1,tint:!0},qc={fill:!0,sticky:!1};async function Fo(j,ce){if(ce&&Pr()){for(let ve=0;ve<j.fields.length;ve++)delete j.fields[ve].config.displayName,delete j.fields[ve].config.displayNameFromDS;return await ce([j])}return!1}const wr=(j,ce=!1)=>{const ve=Ar.getContext("2d");return ve.font=ce?ec:Hc,ve.measureText(j).width},ed=j=>Math.max(wr(j.name,!0)+jc,Math.min(cs,j.values.toArray().reduce((ce,ve)=>{const Ie=wr(ve?.toString()??"");return Ie>ce?Ie:ce},0)+tc)),xi=(j,ce,ve=!1)=>{const Ie={...j,fields:j.fields.map(Ke=>({...Ke,values:Ke.values.slice()}))};for(const Ke of Ie.fields){const Ge=Ke.values.toArray();for(let nt=ce.length-1;nt>=0;nt--)ve?Ge.splice(ce[nt],1):Ge.splice(ce[nt],1,null);Ke.values=[...Ge]}return{...Ie,length:Ie.fields[0]?.values.length??0}},td=(j,ce)=>{const ve=ce.x,Ie=ce.y,Ke=ce.x+ce.width-1,Ge={...j,fields:j.fields.map(nt=>({...nt,values:nt.values.slice()}))};for(let nt=ve;nt<=Ke;nt++){const gt=Ge.fields[nt],vt=gt.values.toArray();vt.splice(Ie,ce.height,...new Array(ce.height).fill(null)),gt.values=[...vt]}return{...Ge,length:Ge.fields[0]?.values.length??0}},nd=j=>{const ce=j.values.toArray();j.values=ce.map(ve=>ve==="undefined"||ve==="null"?null:ve)};function Wo(j){return{accentColor:j.colors.primary.main,accentFg:j.colors.secondary.main,textDark:j.colors.text.primary,textMedium:j.colors.text.secondary,textLight:j.colors.text.secondary,textBubble:j.colors.text.primary,textHeader:j.colors.text.primary,bgCell:j.colors.background.primary,bgCellMedium:j.colors.background.primary,bgHeader:j.colors.background.primary,bgHeaderHasFocus:j.colors.background.secondary,bgHeaderHovered:j.colors.background.secondary,linkColor:j.colors.text.link,fontFamily:j.typography.fontFamily,headerFontStyle:`${j.typography.fontWeightMedium} ${j.typography.fontSize}px`,fgIconHeader:j.colors.secondary.contrastText,bgIconHeader:j.colors.secondary.main}}const ad=(j,ce,ve=!1)=>{const Ie=j.values.get(ce);switch(j.type){case dn.PU.boolean:return{kind:oo.dd.Boolean,data:Ie||!1,allowOverlay:!1,readonly:!1};case dn.PU.number:return{kind:oo.dd.Number,data:Ie||0,allowOverlay:Pr()&&!ve,readonly:!1,displayData:Ie!=null?Ie.toString():""};case dn.PU.string:return{kind:oo.dd.Text,data:Ie||"",allowOverlay:Pr()&&!ve,readonly:!1,displayData:Ie!=null?Ie.toString():""};default:return{kind:oo.dd.Text,data:Ie||"",allowOverlay:Pr()&&!ve,readonly:!1,displayData:Ie!=null?Ie.toString():""}}},cl=(j,ce)=>({dataEditor:(0,G.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${j.colors.background.secondary} ${j.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${j.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,G.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${j.colors.background.primary};
      button {
        pointer-events: ${ce?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${j.colors.background.primary};
        color: ${j.colors.text.primary};
        border-right: 1px solid ${j.components.panel.borderColor};
        border-bottom: 1px solid ${j.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${j.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${j.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,G.css)`
      height: 37px;
      border: 1px solid ${j.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),Il=j=>j.rows.length||j.columns.length?!0:j.current===void 0?!1:j.current.range&&!(j.current.range.height===1&&j.current.range.width===1);var Cr=(j=>(j.columnResizeStart="columnResizeStart",j.columnResizeEnd="columnResizeEnd",j.columnMove="columnMove",j.updateColumns="updateColumns",j.showColumnRenameInput="showColumnRenameInput",j.hideColumnRenameInput="hideColumnRenameInput",j.openCellContextMenu="openCellContextMenu",j.openHeaderContextMenu="openHeaderContextMenu",j.openHeaderDropdownMenu="openHeaderDropdownMenu",j.closeContextMenu="closeContextMenu",j.multipleCellsSelected="multipleCellsSelected",j.gridSelectionCleared="gridSelectionCleared",j.columnFreezeReset="columnFreezeReset",j.columnFreezeChanged="columnFreezeChanged",j.openSearch="openSearch",j.closeSearch="closeSearch",j))(Cr||{});const Js={columns:[],contextMenuData:Ol,renameColumnInputData:Yc,gridSelection:nc,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},ac=new Map([[dn.PU.number,oo.Gf.HeaderNumber],[dn.PU.string,oo.Gf.HeaderTextTemplate],[dn.PU.boolean,oo.Gf.HeaderBoolean],[dn.PU.time,oo.Gf.HeaderDate],[dn.PU.other,oo.Gf.HeaderReference]]),Fs=(j,ce)=>{let ve=[];switch(ce.type){case"columnResizeStart":ve=[...j.columns];const Ie=ce.payload;return ve[Ie.columnIndex]={...j.columns[Ie.columnIndex],width:Ie.width},{...j,columns:ve,isResizeInProgress:!0};case"columnMove":ve=[...j.columns];const Ke=ce.payload,Ge=j.columns[Ke.from].width;let nt=ve.splice(Ke.from,1)[0];return nt={...nt,width:Ge},ve.splice(Ke.to,0,nt),{...j,columns:ve};case"columnResizeEnd":return{...j,isResizeInProgress:!1};case"updateColumns":const gt=ce.payload;return ve=[...gt.frame.fields.map((Yt,tn)=>{const Pn=j.columns.find(Zn=>Zn.title===Yt.name)?.width;return{title:(0,va.Ct)(Yt,gt.frame),width:Pn??ed(Yt),icon:ac.get(Yt.type),hasMenu:Pr(),trailingRowOptions:{targetColumn:--tn}}})],{...j,columns:ve};case"showColumnRenameInput":return{...j,renameColumnInputData:{...j.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...j,renameColumnInputData:{...j.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const vt=ce.payload,bt=vt.event,Rt=vt.cell;return{...j,contextMenuData:{x:bt.bounds.x+bt.localEventX,y:bt.bounds.y+bt.localEventY,column:Rt[0]===-1?void 0:Rt[0],row:Rt[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Lt=ce.payload,Nt=Lt.event;return{...j,contextMenuData:{x:Nt.bounds.x+Nt.localEventX,y:Nt.bounds.y+Nt.localEventY,column:Lt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const St=ce.payload,Qt=St.screenPosition;return{...j,contextMenuData:{x:Qt.x+Qt.width,y:Qt.y+Qt.height,column:St.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Qt.x,y:Qt.y,width:Qt.width,height:Qt.height,columnIdx:St.columnIndex,isInputOpen:!1,inputValue:St.value}};case"closeContextMenu":return{...j,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...j,toggleSearch:!1};case"openSearch":return{...j,toggleSearch:!0};case"multipleCellsSelected":const Zt=ce.payload;return{...j,gridSelection:Zt.selection};case"gridSelectionCleared":return{...j,gridSelection:nc};case"columnFreezeReset":return{...j,columnFreezeIndex:0};case"columnFreezeChanged":const jt=ce.payload;return{...j,columnFreezeIndex:jt.columnIndex};default:return j}},An=({menuData:j,data:ce,saveData:ve,closeContextMenu:Ie,dispatch:Ke,gridSelection:Ge,columnFreezeIndex:nt,renameColumnClicked:gt})=>{let vt=[],bt=[];const{row:Rt,column:Lt,x:Nt,y:St,isHeaderMenu:Qt}=j;Ge.rows&&(vt=Ge.rows.toArray()),Ge.columns&&(bt=Ge.columns.toArray());let Zt="Delete row";vt.length&&vt.length>1&&(Zt=`Delete ${vt.length} rows`);let jt="Delete column";bt.length&&bt.length>1&&(jt=`Delete ${bt.length} columns`);const Yt=Rt!==void 0&&Rt>=0||vt.length,tn=Lt!==void 0&&Lt>=0&&Rt!==void 0||bt.length,Pn=Rt!==void 0&&Rt>=0&&!vt.length,ln=Lt!==void 0&&Lt>=0&&Rt!==void 0&&!bt.length,Zn=()=>v.createElement(v.Fragment,null,Yt?v.createElement(ct.D,{label:Zt,onClick:()=>{if(vt.length){ve(xi(ce,vt,!0)),Ke({type:Cr.gridSelectionCleared});return}Rt!==void 0&&Rt>=0&&((0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),ve(xi(ce,[Rt],!0)))}}):null,tn?v.createElement(ct.D,{label:jt,onClick:()=>{if(bt.length){ve({...ce,fields:ce.fields.filter((zn,Aa)=>!bt.includes(Aa))}),Ke({type:Cr.gridSelectionCleared});return}Lt!==void 0&&Lt>=0&&((0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),ve({...ce,fields:ce.fields.filter((zn,Aa)=>Aa!==Lt)}))}}):null,tn||Yt?v.createElement(Ir.N,null):null,Pn?v.createElement(ct.D,{label:"Clear row",onClick:()=>{(0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),ve(xi(ce,[Rt]))}}):null,ln?v.createElement(ct.D,{label:"Clear column",onClick:()=>{const zn=ce.fields[Lt];zn.values=zn.values.map(()=>null),(0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),ve({...ce})}}):null,Pn||ln?v.createElement(Ir.N,null):null,v.createElement(ct.D,{label:"Remove all data",onClick:()=>{(0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),ve(Jc)}}),v.createElement(ct.D,{label:"Search...",onClick:()=>{(0,os.rR)(Er,{item:gr.CONTEXT_MENU_ACTION,menu_action:"open_search"}),Ke({type:Cr.openSearch})}})),Nn=()=>{if(Lt==null)return null;const zn=ce.fields[Lt].type,Aa=[],ma=wn=>{Aa.push({label:(0,N.capitalize)(wn),options:{targetField:ce.fields[Lt].name,destinationType:wn}})};zn===dn.PU.string?(ma(dn.PU.number),ma(dn.PU.boolean)):zn===dn.PU.number?(ma(dn.PU.string),ma(dn.PU.boolean)):zn===dn.PU.boolean?(ma(dn.PU.number),ma(dn.PU.string)):(ma(dn.PU.string),ma(dn.PU.number),ma(dn.PU.boolean));let Da="Set column freeze position";const Sn=Lt+1;return nt===Sn&&(Da="Unset column freeze"),v.createElement(v.Fragment,null,Aa.length?v.createElement(et.r,{label:"Set field type"},Aa.map((wn,Ln)=>v.createElement(ct.D,{key:Ln,label:wn.label,onClick:()=>{const Wa=(0,uo.s7)(ce.fields[Lt],wn.options);wn.options.destinationType===dn.PU.string&&nd(Wa);const Za={name:ce.name,fields:[...ce.fields],length:ce.length};Za.fields[Lt]=Wa,(0,os.rR)(Er,{item:gr.HEADER_MENU_ACTION,menu_action:"convert_field"}),ve(Za)}}))):null,v.createElement(Ir.N,null),v.createElement(ct.D,{label:Da,onClick:()=>{(0,os.rR)(Er,{item:gr.HEADER_MENU_ACTION,menu_action:"column_freeze"}),Ke(nt===Sn?{type:Cr.columnFreezeReset}:{type:Cr.columnFreezeChanged,payload:{columnIndex:Sn}})}}),v.createElement(ct.D,{label:"Rename column",onClick:gt}),v.createElement(Ir.N,null),v.createElement(ct.D,{label:"Delete column",onClick:()=>{(0,os.rR)(Er,{item:gr.HEADER_MENU_ACTION,menu_action:"delete_column"}),ve({...ce,fields:ce.fields.filter((wn,Ln)=>Ln!==Lt)}),Ke({type:Cr.gridSelectionCleared})}}),v.createElement(ct.D,{label:"Clear column",onClick:()=>{const wn=ce.fields[Lt];wn.values=wn.values.map(()=>null),(0,os.rR)(Er,{item:gr.HEADER_MENU_ACTION,menu_action:"clear_column"}),ve({...ce})}}))};return v.createElement(Ot.t,{renderMenuItems:Qt?Nn:Zn,x:Nt,y:St,onClose:Ie})},sc=({renameColumnData:j,onColumnInputBlur:ce,classStyle:ve})=>{const{x:Ie,y:Ke,width:Ge,height:nt,inputValue:gt,columnIdx:vt}=j,[bt,Rt]=(0,v.useState)({}),[Lt,Nt]=(0,v.useState)(gt),St=(0,v.useRef)(null);(0,v.useLayoutEffect)(()=>{St.current?.focus();const Yt=St.current?.getBoundingClientRect();if(Yt){const tn={right:window.innerWidth<Ie+Yt.width,bottom:window.innerHeight<Ke+Yt.height};Rt({position:"fixed",left:tn.right?Ie-Yt.width:Ie,top:tn.bottom?Ke-Yt.height:Ke,width:Ge,height:nt})}},[nt,Ge,Ie,Ke]);const Qt=Yt=>{const tn=Yt.target.value;tn&&ce(tn,vt)},Zt=Yt=>{Nt(Yt.target.value)},jt=Yt=>{Yt.key==="Enter"&&Yt.currentTarget.blur()};return v.createElement(ar.ZL,null,v.createElement("input",{type:"text",className:ve,value:Lt,onBlur:Qt,ref:St,style:bt,onChange:Zt,onKeyDown:jt}))};function sd({options:j,data:ce,id:ve,fieldConfig:Ie,width:Ke,height:Ge}){const[nt,gt]=(0,v.useReducer)(Fs,Js),{onUpdateData:vt}=(0,Ma.d2)(),{columns:bt,contextMenuData:Rt,renameColumnInputData:Lt,gridSelection:Nt,columnFreezeIndex:St,toggleSearch:Qt,isResizeInProgress:Zt}=nt,jt=ce.series[j.selectedSeries??0],Yt=(0,le.$j)(),tn=Wo(Yt);(0,v.useEffect)(()=>{jt&&gt({type:Cr.updateColumns,payload:{frame:jt}})},[jt]);const Pn=([Pa,Ka])=>{const Qn=jt.fields[Pa];return!Qn||Ka>jt.length?Xc:ad(Qn,Ka,Il(Nt))},ln=(Pa,Ka)=>{if(Il(Nt))return;const[Qn,Tn]=Pa,ca={...jt,fields:jt.fields.map(Fa=>({...Fa,values:[...Fa.values]}))},Ra=ca.fields[Qn];if(!Ra)return;const Ba=Ra.values.toArray();Ba[Tn]=Ka.data,Ra.values=[...Ba],(0,os.rR)(Er,{item:gr.EDIT_CELL}),Fo(ca,vt)},Zn=Pa=>{const Ka=jt.length??0;(0,os.rR)(Er,{item:gr.APPEND_COLUMN}),Fo({...jt,fields:[...jt.fields,{name:Pa,type:dn.PU.string,config:{},values:new Array(Ka).fill("")}]},vt)},Nn=()=>{const Pa=jt.fields.map(Ka=>{const Qn=Ka.values.slice();return Qn.push(null),{...Ka,values:Qn}});(0,os.rR)(Er,{item:gr.APPEND_ROW}),Fo({...jt,fields:Pa,length:jt.length+1},vt)},zn=(Pa,Ka,Qn,Tn)=>{(0,os.rR)(Er,{item:gr.COLUMN_RESIZE}),gt({type:Cr.columnResizeStart,payload:{columnIndex:Qn,width:Ka}})},Aa=(Pa,Ka,Qn,Tn)=>{gt({type:Cr.columnResizeEnd})},ma=()=>{gt({type:Cr.closeContextMenu})},Da=Pa=>{if(Pa.current&&Pa.current.range)return(0,os.rR)(Er,{item:gr.DELETE_BTN_PRESSED,selection:"grid-cell"}),Fo(td(jt,Pa.current.range),vt),!0;const Ka=Pa.rows.toArray(),Qn=Pa.columns.toArray();if(Ka.length)return(0,os.rR)(Er,{item:gr.DELETE_BTN_PRESSED,selection:"rows"}),Fo(xi(jt,Ka),vt),!0;if(Qn.length){const Tn={...jt,fields:jt.fields.map((ca,Ra)=>Qn.includes(Ra)?{...ca,values:new Array(jt.length).fill(null)}:ca)};return(0,os.rR)(Er,{item:gr.DELETE_BTN_PRESSED,selection:"columns"}),Fo(Tn,vt),!0}return!1},Sn=(Pa,Ka)=>{Ka.preventDefault(),gt({type:Cr.openCellContextMenu,payload:{event:Ka,cell:Pa}})},wn=(Pa,Ka)=>{Ka.preventDefault(),gt({type:Cr.openHeaderContextMenu,payload:{event:Ka,columnIndex:Pa}})},Ln=(Pa,Ka)=>{gt({type:Cr.openHeaderDropdownMenu,payload:{screenPosition:Ka,columnIndex:Pa,value:nt.columns[Pa].title}})},Wa=async(Pa,Ka)=>{const Qn=jt.fields.map(Ra=>Ra),Tn=Qn[Pa];Qn.splice(Pa,1),Qn.splice(Ka,0,Tn),await Fo({...jt,fields:Qn},vt)&&((0,os.rR)(Er,{item:gr.COLUMN_REORDER}),gt({type:Cr.columnMove,payload:{from:Pa,to:Ka}}))},Za=(Pa,Ka)=>{const Qn=jt.fields.map(Tn=>({...Tn,values:Tn.values.slice()}));for(const Tn of Qn){const ca=Tn.values[Pa];Tn.values.splice(Pa,1),Tn.values.splice(Ka,0,ca)}(0,os.rR)(Er,{item:gr.ROW_REORDER}),Fo({...jt,fields:Qn},vt)},ds=()=>{(0,os.rR)(Er,{item:gr.HEADER_MENU_ACTION,menu_action:"rename_column"}),gt({type:Cr.showColumnRenameInput})},la=(Pa,Ka)=>{const Qn=jt.fields.map(Tn=>Tn);Qn[Ka].name=Pa,gt({type:Cr.hideColumnRenameInput}),Fo({...jt,fields:Qn},vt)},ha=()=>{gt({type:Cr.closeSearch})},as=Pa=>{(0,os.rR)(Er,{item:gr.GRID_SELECTED}),gt({type:Cr.multipleCellsSelected,payload:{selection:Pa}})},Ps=Pa=>{Fo(Pa,vt)};if(!jt)return v.createElement(da.a,{panelId:ve,fieldConfig:Ie,data:ce});if(!Pr())return v.createElement(da.a,{panelId:ve,message:"Datagrid is not enabled",fieldConfig:Ie,data:ce});if(!document.getElementById("portal")){const Pa=document.createElement("div");Pa.id="portal",document.body.appendChild(Pa)}const Ms=cl(Yt,Zt);return v.createElement(v.Fragment,null,v.createElement(kc.D,{className:Ms.dataEditor,getCellContent:Pn,columns:bt,rows:jt.length,width:Ke,height:Ge,initialSize:[Ke,Ge],theme:tn,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:Pr()?ln:void 0,getCellsForSelection:Pr()?!0:void 0,showSearch:Pr()?Qt:!1,onSearchClose:ha,gridSelection:Nt,onGridSelectionChange:Pr()?as:void 0,onRowAppended:Pr()?Nn:void 0,onDelete:Pr()?Da:void 0,rowMarkers:Pr()?Gc:Qc,onColumnResize:zn,onColumnResizeEnd:Aa,onCellContextMenu:Pr()?Sn:void 0,onHeaderContextMenu:Pr()?wn:void 0,onHeaderMenuClick:Pr()?Ln:void 0,trailingRowOptions:Zc,rightElement:Pr()?v.createElement(ql,{onColumnInputBlur:Zn,divStyle:Ms.addColumnDiv}):null,rightElementProps:qc,freezeColumns:St,onRowMoved:Pr()?Za:void 0,onColumnMoved:Pr()?Wa:void 0}),Rt.isContextMenuOpen&&v.createElement(An,{menuData:Rt,data:jt,saveData:Ps,closeContextMenu:ma,dispatch:gt,gridSelection:Nt,columnFreezeIndex:St,renameColumnClicked:ds}),Lt.isInputOpen?v.createElement(sc,{onColumnInputBlur:la,renameColumnData:Lt,classStyle:Ms.renameColumnInput}):null)}const rc={selectedSeries:0},rd=new x.m(sd).setPanelOptions((j,ce)=>{const ve=ce.data.map((Ie,Ke)=>({value:Ke,label:Ie.refId}));return ce.options&&!ve.map(Ie=>Ie.value).includes(ce.options.selectedSeries??0)&&(ce.options.selectedSeries=rc.selectedSeries),j.addSelect({path:"selectedSeries",name:"Select series",defaultValue:rc.selectedSeries,settings:{options:ve}})});class dl extends v.Component{constructor(){super(...arguments),this.subscription=new Vt.yU,this.state={}}componentDidMount(){const{eventBus:ce}=this.props;this.subscription.add(ce.subscribe(en.b_,ve=>{this.setState({event:ve})})),this.subscription.add(ce.subscribe(en.ql,ve=>{this.setState({event:ve})})),this.subscription.add(ce.subscribe(rn.kb,ve=>{this.setState({event:ve})})),this.subscription.add(ce.subscribe(rn.Tq,ve=>{this.setState({event:ve})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:ce}=this.state;if(!ce)return v.createElement("div",null,"no events yet");const{type:ve,payload:Ie,origin:Ke}=ce;return v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},v.createElement("h3",null,"Origin: ",Ke?.path),v.createElement("span",null,"Type: ",ve),!!Ie&&v.createElement(v.Fragment,null,v.createElement("pre",null,JSON.stringify(Ie.point,null,"  ")),Ie.data&&v.createElement(ks.e,{data:Ie.data,rowIndex:Ie.rowIndex,columnIndex:Ie.columnIndex})))}}var Gi=e(36120);let ul=100;class Oi extends v.PureComponent{constructor(ce){super(ce),this.history=new Gi.$({capacity:40,append:"head"}),this.eventObserver={next:Ie=>{const Ke=Ie.origin;this.history.add({key:ul++,type:Ie.type,path:Ke?.path,payload:Ie.payload}),this.setState({counter:ul})}},this.state={counter:ul};const ve=[];ve.push(ce.eventBus.getStream(en.b_).subscribe(this.eventObserver)),ve.push(ce.eventBus.getStream(en.ql).subscribe(this.eventObserver)),ve.push(ce.eventBus.getStream(en.LO).subscribe(this.eventObserver)),this.subs=ve}componentWillUnmount(){for(const ce of this.subs)ce.unsubscribe()}render(){return v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((ce,ve)=>v.createElement("div",{key:ce.key},JSON.stringify(ce.path)," ",ce.type," / X:",JSON.stringify(ce.payload.x)," / Y:",JSON.stringify(ce.payload.y))))}}var ai=e(75059);class Al extends v.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(ce){const{data:ve,options:Ie}=this.props;if(ce.data!==ve&&(this.counters.dataChanged++,Ie.counters?.schemaChanged)){const Ke=ce.data?.series,Ge=ve.series;Ge&&Ke&&((0,sa.J3)(Ge,Ke,sa.bW)||this.counters.schemaChanged++)}return!0}render(){const{data:ce,options:ve}=this.props,Ie=ve.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Ke=Date.now(),Ge=Ke-this.lastRender;this.lastRender=Ke;const nt=ai.AS.get(ai.gy.lastNotNull);return v.createElement("div",null,v.createElement("div",null,v.createElement(ti.K,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),v.createElement("span",null,Ie.render&&v.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ie.dataChanged&&v.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ie.schemaChanged&&v.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),v.createElement("span",null,"TIME: ",Ge,"ms"))),ce.series&&ce.series.map((gt,vt)=>v.createElement("div",{key:`${vt}/${gt.refId}`},v.createElement("h4",null,(0,va.Ri)(gt,vt)," (",gt.length,")"),v.createElement("table",{className:"filter-table"},v.createElement("thead",null,v.createElement("tr",null,v.createElement("td",null,"Field"),v.createElement("td",null,"Type"),v.createElement("td",null,"Last"))),v.createElement("tbody",null,gt.fields.map((bt,Rt)=>{const Lt=nt.reduce(bt,!1,!1)[nt.id];return v.createElement("tr",{key:`${Rt}/${bt.name}`},v.createElement("td",null,(0,va.Ct)(bt,gt,ce.series)),v.createElement("td",null,bt.type),v.createElement("td",null,`${Lt}`))}))))))}}var od=e(10354);function Rl(j){const ce=(0,Ma.d2)(),ve=Ie=>{ce.onInstanceStateChange({name:Ie.currentTarget.value})};return v.createElement(v.Fragment,null,v.createElement(po.D,{label:"State name"},v.createElement(od.p,{value:ce.instanceState?.name??"",onChange:ve})))}function hi({value:j,context:ce,onChange:ve,item:Ie}){return v.createElement("div",null,"Current value: ",ce.instanceState?.name," ")}var Fr=(j=>(j.Cursor="cursor",j.Events="events",j.Render="render",j.State="State",j.ThrowError="ThrowError",j))(Fr||{});class Ll extends v.Component{render(){const{options:ce}=this.props;switch(ce.mode){case Fr.Events:return v.createElement(Oi,{eventBus:this.props.eventBus});case Fr.Cursor:return v.createElement(dl,{eventBus:this.props.eventBus});case Fr.State:return v.createElement(Rl,{...this.props});case Fr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return v.createElement(Al,{...this.props})}}}const id=new x.m(Ll).useFieldConfig().setPanelOptions(j=>{j.addSelect({path:"mode",name:"Mode",defaultValue:Fr.Render,settings:{options:[{label:"Render",value:Fr.Render},{label:"Events",value:Fr.Events},{label:"Cursor",value:Fr.Cursor},{label:"Cursor",value:Fr.Cursor},{label:"Share state",value:Fr.State},{label:"Throw error",value:Fr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:ce})=>ce===Fr.State,editor:hi}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:ce})=>ce===Fr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:ce})=>ce===Fr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:ce})=>ce===Fr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Bl=e(76365),ld=e(85194);function Qi(j,ce={}){(0,os.rR)(`grafana_flamegraph_${j}`,{app:O.Jk.Unknown,grafana_version:S.$.buildInfo.version,...ce})}const cd=j=>{const ce=(0,Bl.oA)(j.data.series[0]);return ce?v.createElement(da.a,{panelId:j.id,data:j.data,message:(0,Bl.Ik)(ce)}):v.createElement(ld.A,{data:j.data.series[0],stickyHeader:!1,getTheme:()=>S.$.theme2,showFlameGraphOnly:j.options?.showFlameGraphOnly??!1,onTableSymbolClick:()=>Qi("table_item_selected"),onViewSelected:ve=>Qi("view_selected",{view:ve}),onTextAlignSelected:ve=>Qi("text_align_selected",{align:ve}),onTableSort:ve=>Qi("table_sort_selected",{sort:ve}),disableCollapsing:!S.$.featureToggles.flameGraphItemCollapsing})};class dd{getListWithDefaults(ce){return ce.getListAppender({name:Ts.m.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(ce){if(!ce.data)return;const ve=ce.data.series[0];!ve||(0,Bl.oA)(ve)||this.getListWithDefaults(ce).append({name:Ts.m.FlameGraph})}}const oc=new x.m(cd).setSuggestionsSupplier(new dd);var ud=e(14738),md=e(62930);const ic=(j,ce)=>{const ve="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ie=ce?ve:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ke=ce?ve:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ge=j.isDark?Ie:Ke;return`
      background-color: ${j.colors.background.secondary};
      margin-right: ${j.spacing(4)};
      border: 1px solid ${j.colors.border.weak};
      border-bottom-left-radius: ${j.shape.borderRadius(2)};
      border-bottom-right-radius: ${j.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${j.breakpoints.down("xxl")} {
        margin-right: ${j.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ge};
      }
`},lc=(0,G.css)`
  padding: 16px;
`,ml=({card:j})=>{const ce=(0,le.of)(cc,j.done);return v.createElement("div",{className:ce.card},v.createElement("div",{className:lc},v.createElement("a",{href:`${j.href}?utm_source=grafana_gettingstarted`,className:ce.url,onClick:()=>(0,os.rR)("grafana_getting_started_docs",{title:j.title,link:j.href})},v.createElement("div",{className:ce.heading},j.done?"complete":j.heading),v.createElement("h4",{className:ce.title},j.title))),v.createElement("a",{href:`${j.learnHref}?utm_source=grafana_gettingstarted`,className:ce.learnUrl,target:"_blank",rel:"noreferrer",onClick:()=>(0,os.rR)("grafana_getting_started_docs",{title:j.title,link:j.learnHref})},"Learn how in the docs ",v.createElement(F.I,{name:"external-link-alt"})))},cc=(j,ce)=>({card:(0,G.css)`
      ${ic(j,ce)}

      min-width: 230px;

      ${j.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,G.css)`
      text-transform: uppercase;
      color: ${ce?j.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${j.spacing(2)};
    `,title:(0,G.css)`
      margin-bottom: ${j.spacing(2)};
    `,url:(0,G.css)`
      display: inline-block;
    `,learnUrl:(0,G.css)`
      border-top: 1px solid ${j.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var fl=e(33390);const Yi=({card:j})=>{const ce=(0,le.of)(dc,j.done);return v.createElement("a",{className:ce.card,target:"_blank",rel:"noreferrer",href:`${j.href}?utm_source=grafana_gettingstarted`,onClick:ve=>fd(ve,j)},v.createElement("div",{className:lc},v.createElement("div",{className:ce.type},j.type),v.createElement("div",{className:ce.heading},j.done?"complete":j.heading),v.createElement("h4",{className:ce.cardTitle},j.title),v.createElement("div",{className:ce.info},j.info)))},fd=(j,ce)=>{j.preventDefault(),fl.A.get(ce.key)||fl.A.set(ce.key,!0),(0,os.rR)("grafana_getting_started_tutorial",{title:ce.title})},dc=(j,ce)=>({card:(0,G.css)`
      ${ic(j,ce)}
      width: 460px;
      min-width: 460px;

      ${j.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${j.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,G.css)`
      color: ${j.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,G.css)`
      text-transform: uppercase;
      color: ${j.colors.primary.text};
      margin-bottom: ${j.spacing(1)};
    `,cardTitle:(0,G.css)`
      margin-bottom: ${j.spacing(2)};
    `,info:(0,G.css)`
      margin-bottom: ${j.spacing(2)};
    `,status:(0,G.css)`
      display: flex;
      justify-content: flex-end;
    `}),gd=({step:j})=>{const ce=(0,le.of)(tr);return v.createElement("div",{className:ce.setup},v.createElement("div",{className:ce.info},v.createElement("h2",{className:ce.title},j.title),v.createElement("p",null,j.info)),v.createElement("div",{className:ce.cards},j.cards.map((ve,Ie)=>{const Ke=`${ve.title}-${Ie}`;return ve.type==="tutorial"?v.createElement(Yi,{key:Ke,card:ve}):v.createElement(ml,{key:Ke,card:ve})})))},tr=j=>({setup:(0,G.css)({display:"flex",width:"95%"}),info:(0,G.css)({width:"172px",marginRight:"5%",[j.breakpoints.down("xxl")]:{marginRight:j.spacing(4)},[j.breakpoints.down("sm")]:{display:"none"}}),title:(0,G.css)({color:j.v1.palette.blue95}),cards:(0,G.css)({overflowX:"auto",overflowY:"hidden",width:"100%",display:"flex",justifyContent:"flex-start"})});var uc=e(31193);const Ul="Grafana fundamentals",mc="Create users and teams",Nl="getting.started.",fc=`${Nl}${Ul.replace(" ","-").trim().toLowerCase()}`,Se=`${Nl}${mc.replace(" ","-").trim().toLowerCase()}`,me=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Ul,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(fl.A.get(fc)),key:fc,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(j=>{j((0,uc.tR)().getMetricSources().filter(ce=>ce.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Nr.AI)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Se,check:()=>Promise.resolve(fl.A.get(Se)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const j=await(0,Nr.AI)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(j.length>0)},done:!1}]}];class Le extends v.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:me()},this.onForwardClick=()=>{(0,os.rR)("grafana_getting_started_button_to_advanced_tutorials"),this.setState(ce=>({currentStep:ce.currentStep+1}))},this.onPreviousClick=()=>{(0,os.rR)("grafana_getting_started_button_to_basic_tutorials"),this.setState(ce=>({currentStep:ce.currentStep-1}))},this.dismiss=()=>{const{id:ce}=this.props,ve=(0,be.UA)().getCurrent(),Ie=ve?.getPanelById(ce);(0,os.rR)("grafana_getting_started_remove_panel"),ve?.removePanel(Ie),Nr.IB.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ke=>{xo.TP.user.helpFlags1=Ke.helpFlags1})}}async componentDidMount(){const{steps:ce}=this.state,ve=ce.map(async Ke=>{const Ge=Ke.cards.map(async gt=>gt.check().then(vt=>({...gt,done:vt}))),nt=await Promise.all(Ge);return{...Ke,done:nt.every(gt=>gt.done),cards:nt}}),Ie=await Promise.all(ve);this.setState({currentStep:Ie[0].done?1:0,steps:Ie,checksDone:!0})}render(){const{checksDone:ce,currentStep:ve,steps:Ie}=this.state,Ke=ke(),Ge=Ie[ve];return v.createElement("div",{className:Ke.container},ce?v.createElement(v.Fragment,null,v.createElement(R.$n,{variant:"secondary",fill:"text",className:Ke.dismiss,onClick:this.dismiss},"Remove this panel"),ve===Ie.length-1&&v.createElement(R.$n,{className:(0,G.cx)(Ke.backForwardButtons,Ke.previous),onClick:this.onPreviousClick,"aria-label":"To basic tutorials",icon:"angle-left",variant:"secondary"}),v.createElement("div",{className:Ke.content},v.createElement(gd,{step:Ge})),ve<Ie.length-1&&v.createElement(R.$n,{className:(0,G.cx)(Ke.backForwardButtons,Ke.forward),onClick:this.onForwardClick,"aria-label":"To advanced tutorials",icon:"angle-right",variant:"secondary"})):v.createElement("div",{className:Ke.loading},v.createElement("div",{className:Ke.loadingText},"Checking completed setup steps"),v.createElement(md.y,{size:"xl",inline:!0})))}}const ke=(0,na.N)(()=>{const j=S.$.theme2;return{container:(0,G.css)({display:"flex",flexDirection:"column",height:"100%",backgroundSize:"cover",padding:`${j.spacing(4)} ${j.spacing(2)} 0`}),content:(0,G.css)({label:"content",display:"flex",justifyContent:"center",[j.breakpoints.down("xxl")]:{marginLeft:j.spacing(3),justifyContent:"flex-start"}}),header:(0,G.css)({label:"header",marginBottom:j.spacing(3),display:"flex",flexDirection:"column",[j.breakpoints.down("lg")]:{flexDirection:"row"}}),headerLogo:(0,G.css)({height:"58px",paddingRight:j.spacing(2),display:"none",[j.breakpoints.up("md")]:{display:"block"}}),heading:(0,G.css)({label:"heading",marginRight:j.spacing(3),marginBottom:j.spacing(3),flexGrow:1,display:"flex",[j.breakpoints.up("md")]:{marginBottom:0}}),backForwardButtons:(0,G.css)({position:"absolute",top:"50%",transform:"translateY(-50%)"}),previous:(0,G.css)({left:"10px",[j.breakpoints.down("md")]:{left:0}}),forward:(0,G.css)({right:"10px",[j.breakpoints.down("md")]:{right:0}}),dismiss:(0,G.css)({alignSelf:"flex-end",textDecoration:"underline",marginBottom:j.spacing(1)}),loading:(0,G.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}),loadingText:(0,G.css)({marginRight:j.spacing(1)})}}),ut=new x.m(Le).setNoPadding();var ht=e(77678),It=e(56675),Ht=e(97706),an=e(81297);const Xt={bucketCount:30,bucketOffset:0},On={fillOpacity:80,gradientMode:pt.on.None,lineWidth:1};function ia(j,ce){return Math.floor(j/ce)*ce}function qn(j,ce){return Math.ceil(j/ce)*ce}function Rn(j){return j.fields[0].type===dn.PU.string?1:(0,Ht.h)(j.fields[1].values[0]-j.fields[0].values[0],9)}function ua(j){return j.fields[0].type===dn.PU.string?1:(0,Ht.h)(j.fields[1].values[1]-j.fields[0].values[1],9)}const is=(j,ce)=>{let{min:ve,max:Ie}=j.fields[2].config,Ke=new co.e,Ge=j.fields[0].type===dn.PU.string,nt=Rn(j),gt=ua(j),vt=gt/nt,bt=gt!==nt,Rt=(tn,Pn,ln,Zn,Nn,zn)=>{let Aa=tn.axes[Pn]._space,ma=tn.valToPos(tn.data[0][0]+nt,"x")-tn.valToPos(tn.data[0][0],"x"),Da=ia(ve??tn.data[0][0],nt),Sn=qn(Ie??tn.data[0][tn.data[0].length-1]+nt,nt),wn=[],Ln=Math.ceil(Aa/ma);for(let Wa=0,Za=Da;Za<=Sn;Wa++,Za+=nt)!(Wa%Ln)&&wn.push(Za);return wn};Ke.addScale({scaleKey:"x",isTime:!1,distribution:Ge?pt.L4.Ordinal:bt?pt.L4.Log:pt.L4.Linear,log:2,orientation:pt.Lt.Horizontal,direction:pt.ON.Right,range:bt?(tn,Pn,ln)=>_s.A.rangeLog(Pn,ln*vt,2,!0):(tn,Pn,ln)=>{ve!=null&&(Pn=ve),Ie!=null&&(ln=Ie);let Zn=tn.data[0][tn.data[0].length-1];return Pn=qn(Pn,nt),ln=!Ge&&ln===Zn?ln+nt:ia(ln,nt),[Pn,ln]}}),Ke.addScale({scaleKey:"y",isTime:!1,distribution:pt.L4.Linear,orientation:pt.Lt.Vertical,direction:pt.ON.Up,softMin:0});const Lt=j.fields[0].display,Nt=tn=>(0,Ls.cN)(Lt(tn));Ke.addAxis({scaleKey:"x",isTime:!1,placement:pt.vM.Bottom,incrs:Ge?[1]:bt?void 0:ht.rW,splits:bt||Ge?void 0:Rt,values:Ge?(tn,Pn)=>Pn:(tn,Pn)=>{const ln=Pn.map(Nt),Zn=ln.reduce((ma,Da)=>Math.max((0,_a.kD)(Da,Xa.pi).width,ma),0),zn=tn.bbox.width/((Zn+10)*devicePixelRatio),Aa=Math.ceil(ln.length/zn);return ln.map((ma,Da)=>Da%Aa===0?ma:null)},theme:ce});let Qt=j.fields[2].display;Ke.addAxis({scaleKey:"y",isTime:!1,placement:pt.vM.Left,formatValue:(tn,Pn)=>(0,Ls.cN)(Qt(tn,Pn)),theme:ce}),Ke.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Zt=(0,Ur.ro)(Ea(j));Ke.setStackingGroups(Zt);let jt=_s.A.paths.bars({align:1,size:[1,1/0]}),Yt=0;for(let tn=2;tn<j.fields.length;tn++){const Pn=j.fields[tn];Pn.state=Pn.state??{},Pn.state.seriesIndex=Yt++;const ln={...On,...Pn.config.custom},Zn="y",Nn=(0,Bs.Qi)(Pn),Aa=(0,Bs.lz)(Pn,ce).color;Ke.addSeries({scaleKey:Zn,lineWidth:ln.lineWidth,lineColor:Aa,fillOpacity:ln.fillOpacity,theme:ce,colorMode:Nn,pathBuilder:jt,show:!ln.hideFrom?.viz,gradientMode:ln.gradientMode,thresholds:Pn.config.thresholds,hardMin:Pn.config.min,hardMax:Pn.config.max,softMin:ln.axisSoftMin,softMax:ln.axisSoftMax,dataFrameFieldIndex:Pn.state.origin})}return Ke},Ea=j=>({...j,fields:j.fields.filter(ce=>ce.name!==ht.dA)}),$a=(j,ce)=>{for(let ve=1;ve<ce.fields.length;ve++){let Ie=ce.fields[ve].values;for(let Ke=0;Ke<Ie.length;Ke++)Ie[Ke]===0&&(Ie[Ke]=null)}return(0,Ur.bq)(ce,j.getStackingGroups())};class Gn extends v.Component{constructor(ce){super(ce),this.state=this.prepState(ce)}prepState(ce,ve=!0){const{alignedFrame:Ie}=ce,Ke=ve?is(Ie,this.props.theme):this.state.config,Ge=$a(Ke,Ea(Ie));return{alignedFrame:Ie,alignedData:Ge,config:Ke}}renderLegend(ce){const{legend:ve}=this.props;if(!ce||ve.showLegend===!1)return null;const Ie=this.props.options.combine?[this.props.alignedFrame]:this.props.rawSeries;return v.createElement(ys.$,{data:Ie,config:ce,maxHeight:"35%",maxWidth:"60%",...ve})}componentDidUpdate(ce){const{structureRev:ve,alignedFrame:Ie,bucketSize:Ke,bucketCount:Ge}=this.props;if(Ie!==ce.alignedFrame){const nt=this.state.config==null||Ge!==ce.bucketCount||Ke!==ce.bucketSize||this.props.options!==ce.options||this.state.config===void 0||ve!==ce.structureRev||!ve,gt=this.prepState(this.props,nt);this.setState(gt)}}render(){const{width:ce,height:ve,children:Ie,alignedFrame:Ke}=this.props,{config:Ge}=this.state;return Ge?v.createElement(ps.KU,{width:ce,height:ve,legend:this.renderLegend(Ge)},(nt,gt)=>v.createElement(an.Z,{config:this.state.config,data:this.state.alignedData,width:nt,height:gt},Ie?Ie(Ge,Ke):null)):null}}const Oa=({data:j,options:ce,width:ve,height:Ie})=>{const Ke=(0,le.$j)(),Ge=(0,v.useMemo)(()=>{if(!j.series.length)return;if(j.series.forEach((vt,bt)=>{vt.fields.forEach((Rt,Lt)=>{Rt.state={...Rt.state,origin:{frameIndex:bt,fieldIndex:Lt}}})}),j.series.length===1){const vt=(0,ht.ix)(j.series[0]);if(vt)return(0,ht.cg)(vt)}const gt=(0,ht.p3)(j.series,ce);if(gt)return(0,ht.cg)(gt,Ke)},[j.series,ce,Ke]);if(!Ge||!Ge.fields.length)return v.createElement("div",{className:"panel-empty"},v.createElement("p",null,"No histogram found in response"));const nt=Rn(Ge);return v.createElement(Gn,{options:ce,theme:Ke,legend:ce.legend,rawSeries:j.series,structureRev:j.structureRev,width:ve,height:Ie,alignedFrame:Ge,bucketSize:nt,bucketCount:ce.bucketCount},(gt,vt)=>null)},ts={stacking:{mode:pt.gs.None,group:"A"}},ns=(j,ce,ve,Ie)=>{if(ce==="graph"&&ve.angular.xaxis?.mode==="histogram"){const{fieldConfig:Ge,options:nt}=Eo({...ve.angular,fieldConfig:Ie});return j.fieldConfig=Ge,nt}return{}};function Eo(j){const ce=j;let ve={};const Ie={legend:{displayMode:pt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:pt.$N.Single,sort:pt.xB.None},combine:!1};return ce.stack&&(ve.stacking={mode:ce.percentage?pt.gs.Percent:pt.gs.Normal,group:ts.stacking.group},Ie.combine=!1),{fieldConfig:{defaults:(0,N.omitBy)({custom:ve},N.isNil),overrides:[]},options:Ie}}function Go(j){if(j?.length!==1)return!1;const ce=j[0];if(ce.fields.length<3||!(0,ht.NX)(ce.fields[0].name)||!(0,ht.H1)(ce.fields[1].name))return!1;for(const ve of ce.fields)if(ve.type!==dn.PU.number)return!1;return!0}const Ji=new x.m(Oa).setPanelChangeHandler(ns).setPanelOptions(j=>{j.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(ce,ve)=>Go(ve)}).addNumberInput({path:"bucketCount",name:ht.Rt.bucketCount.name,description:ht.Rt.bucketCount.description,settings:{placeholder:`Default: ${Xt.bucketCount}`,min:0},showIf:(ce,ve)=>!Go(ve)}).addNumberInput({path:"bucketSize",name:ht.Rt.bucketSize.name,description:ht.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Xt.bucketSize,showIf:(ce,ve)=>!Go(ve)}).addNumberInput({path:"bucketOffset",name:ht.Rt.bucketOffset.name,description:ht.Rt.bucketOffset.description,settings:{placeholder:`Default: ${Xt.bucketOffset}`,min:0},showIf:(ce,ve)=>!Go(ve)}).addBooleanSwitch({path:"combine",name:ht.Rt.combine.name,description:ht.Rt.combine.description,defaultValue:Xt.combine,showIf:(ce,ve)=>!Go(ve)}),In.H(j)}).useFieldConfig({standardOptions:{[_n.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Hn.Y.PaletteClassic}}},useCustomConfig:j=>{const ce=On;j.addCustomEditor({id:"stacking",path:"stacking",name:"Stacking",category:["Histogram"],defaultValue:ts.stacking,editor:It.m,override:It.m,settings:{options:Dt.t.stacking},process:ba.hS,shouldApply:ve=>ve.type===dn.PU.number,showIf:(ve,Ie)=>!Go(Ie)}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ce.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ce.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Dt.t.fillGradient[0].value,settings:{options:Dt.t.fillGradient}}),gn.e(j)}});var Us=e(55004),ir=e(60029),pd=e(39408);const Qd=[{label:"Grafana",value:Us.qD.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Us.qD.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Us.qD.Plugin,description:"Plugins with live support"},{label:"Stream",value:Us.qD.Stream,description:"data streams (eg, influx style)"}];function hd(j){const[ce,ve]=(0,v.useState)([]),[Ie,Ke]=(0,v.useMemo)(()=>{const Nt=[],St=[],Qt=j.value.scope,Zt=j.value.namespace;if(!Qt?.length)return[Nt,St];const jt={};for(let Yt of ce){const tn=(0,Us.DG)(Yt.value);!tn||tn.scope!==Qt||(jt[tn.namespace]||(Nt.push({value:tn.namespace,label:tn.namespace}),jt[tn.namespace]=!0),Zt?.length&&Zt===tn.namespace&&St.push({...Yt,value:tn.path}))}return[Nt,St]},[ce,j.value.scope,j.value.namespace]);(0,v.useEffect)(()=>{(0,pd.l)().then(Nt=>{ve(Nt.channels)})},[j.value.scope]);const Ge=Nt=>{Nt.value&&j.onChange({scope:Nt.value,namespace:void 0,path:void 0})},nt=Nt=>{j.onChange({scope:j.value?.scope,namespace:Nt?.value,path:void 0})},gt=Nt=>{const{value:St,onChange:Qt}=j;Qt({scope:St.scope,namespace:St.namespace,path:Nt?.value})},{scope:vt,namespace:bt,path:Rt}=j.value,Lt=om(De.config.theme2);return v.createElement(v.Fragment,null,v.createElement(re.F,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),v.createElement("div",null,v.createElement("div",{className:Lt.dropWrap},v.createElement(ir.J,null,"Scope"),v.createElement(V.l6,{options:Qd,value:Qd.find(Nt=>Nt.value===vt),onChange:Ge})),vt&&v.createElement("div",{className:Lt.dropWrap},v.createElement(ir.J,null,"Namespace"),v.createElement(V.l6,{options:Ie,value:Ie.find(Nt=>Nt.value===bt)??(bt?{label:bt,value:bt}:void 0),onChange:nt,allowCustomValue:!0,backspaceRemovesValue:!0,isClearable:!0})),vt&&bt&&v.createElement("div",{className:Lt.dropWrap},v.createElement(ir.J,null,"Path"),v.createElement(V.l6,{options:Ke,value:rm(Ke,Rt),onChange:gt,allowCustomValue:!0,backspaceRemovesValue:!0,isClearable:!0}))))}function rm(j,ce){const ve=j.find(Ie=>Ie.value===ce);if(ve)return ve;if(ce)return{label:ce,value:ce}}const om=(0,na.N)(j=>({dropWrap:(0,G.css)`
    margin-bottom: ${j.spacing(1)};
  `}));var Qo=e(9631),im=e(90708),gc=e(39070),Ii=e(78731),lm=e(24022),Vr=e(1173),Up=e(77093),pc=e(65885);function wl(j){const{data:ce,height:ve,width:Ie,options:Ke,fieldConfig:Ge,id:nt,timeRange:gt}=j,vt=(0,le.$j)(),bt=(0,Ma.d2)(),Rt=(0,pc.gy)(ce.series)?(0,pc.S5)(ce.series):ce.series,Lt=Rt?.length,Nt=Rt[0]?.fields.length,St=cm(Rt,Ke),Qt=Rt[St];let Zt=ve;if(!Lt||!Nt)return v.createElement(da.a,{panelId:nt,fieldConfig:Ge,data:ce});if(Lt>1){const Pn=vt.spacing.gridSize*vt.components.height.md,ln=vt.spacing.gridSize;Zt=ve-Pn-ln}const jt=bt.sync&&bt.sync()!==Rs.y.Off,Yt=v.createElement(Up.X,{height:Zt,width:Ie,data:Qt,noHeader:!Ke.showHeader,showTypeIcons:Ke.showTypeIcons,resizable:!0,initialSortBy:Ke.sortBy,onSortByChange:Pn=>Jd(Pn,j),onColumnResize:(Pn,ln)=>Yd(Pn,ln,j),onCellFilterAdded:bt.onAddAdHocFilter,footerOptions:Ke.footer,enablePagination:Ke.footer?.enablePagination,cellHeight:Ke.cellHeight,timeRange:gt,enableSharedCrosshair:S.$.featureToggles.tableSharedCrosshair&&jt,fieldConfig:Ge});if(Lt===1)return Yt;const tn=Rt.map((Pn,ln)=>({label:(0,va.Ri)(Pn),value:ln}));return v.createElement("div",{className:hc.wrapper},Yt,v.createElement("div",{className:hc.selectWrapper},v.createElement(V.l6,{options:tn,value:tn[St],onChange:Pn=>Xd(Pn,j)})))}function cm(j,ce){return ce.frameIndex>0&&ce.frameIndex<j.length?ce.frameIndex:0}function Yd(j,ce,ve){const{fieldConfig:Ie}=ve,{overrides:Ke}=Ie,Ge=Vr.Ct.byName,nt="custom.width",gt=Ke.find(vt=>vt.matcher.id===Ge&&vt.matcher.options===j);if(gt){const vt=gt.properties.find(bt=>bt.id===nt);vt?vt.value=ce:gt.properties.push({id:nt,value:ce})}else Ke.push({matcher:{id:Ge,options:j},properties:[{id:nt,value:ce}]});ve.onFieldConfigChange({...Ie,overrides:Ke})}function Jd(j,ce){ce.onOptionsChange({...ce.options,sortBy:j})}function Xd(j,ce){ce.onOptionsChange({...ce.options,frameIndex:j.value||0})}const hc={wrapper:(0,G.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,G.css)`
    padding: 8px 8px 0px 8px;
  `};var vc=e(32372),si=(j=>(j.Raw="raw",j.JSON="json",j.Auto="auto",j.None="none",j))(si||{}),Jr=(j=>(j.None="none",j.JSON="json",j.Influx="influx",j))(Jr||{});function dm({height:j,mode:ce,body:ve,addr:Ie,onSave:Ke}){const Ge=(0,v.useMemo)(()=>ce===Jr.JSON?ve?JSON.stringify(ve,null,2):"{ }":ve==null?"":`${ve}`,[ce,ve]),nt=vt=>{ce===Jr.JSON?Ke(JSON.parse(vt)):Ke(vt)},gt=async()=>{if(ce===Jr.Influx){if(Ie?.scope!=="stream"){alert("expected stream scope!");return}return(0,Fn.AI)().post(`api/live/push/${Ie.namespace}`,ve)}if(!(0,Us.aj)(Ie)){alert("invalid address");return}const vt=await(0,Ii.oF)().publish(Ie,ve);console.log("onPublishClicked (response from publish)",vt)};return v.createElement(v.Fragment,null,v.createElement(vc.B,{height:j-32,language:ce===Jr.JSON?"json":"text",value:Ge,onBlur:nt,onSave:nt,showMiniMap:!1,showLineNumbers:!0}),v.createElement("div",{style:{height:32}},v.createElement(R.$n,{onClick:gt},"Publish")))}class um extends v.PureComponent{constructor(ce){super(ce),this.styles=Zd(S.$.theme2),this.streamObserver={next:ve=>{(0,Us.ew)(ve)?this.setState({status:ve,changed:Date.now()}):(0,Us.Z7)(ve)?this.setState({message:ve.message,changed:Date.now()}):console.log("ignore",ve)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.isValid=!!(0,Ii.oF)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(ce){this.props.options?.channel!==ce.options?.channel&&this.loadChannel()}async loadChannel(){const ce=this.props.options?.channel;if(!(0,Us.aj)(ce)){console.log("INVALID",ce),this.unsubscribe(),this.setState({addr:void 0});return}if((0,N.isEqual)(ce,this.state.addr)){console.log("Same channel",this.state.addr);return}const ve=(0,Ii.oF)();if(!ve){console.log("INVALID",ce),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",ce);try{this.subscription=ve.getStream(ce).subscribe(this.streamObserver),this.setState({addr:ce,error:void 0})}catch(Ie){this.setState({addr:void 0,error:Ie})}}renderNotEnabled(){return v.createElement(re.F,{title:"Grafana Live",severity:"info"},v.createElement("p",null,"Grafana live requires a feature flag to run"),v.createElement("b",null,"custom.ini:"),v.createElement("pre",null,`[feature_toggles]
    enable = live`))}renderMessage(ce){const{options:ve}=this.props,{message:Ie}=this.state;if(!Ie)return v.createElement("div",null,v.createElement("h4",null,"Waiting for data:"),ve.channel?.scope,"/",ve.channel?.namespace,"/",ve.channel?.path);if(ve.display===si.JSON)return v.createElement(lm.B,{json:Ie,open:5});if(ve.display===si.Auto&&Ie instanceof Qo.k9){const Ke={series:(0,im.we)({data:[Ie],theme:S.$.theme2,replaceVariables:nt=>nt,fieldConfig:{defaults:{},overrides:[]}}),state:gc.Gu.Streaming},Ge={...this.props,options:{frameIndex:0,showHeader:!0}};return v.createElement(wl,{...Ge,data:Ke,height:ce})}return v.createElement("pre",null,JSON.stringify(Ie))}renderPublish(ce){const{options:ve}=this.props;return v.createElement(dm,{height:ce,body:ve.message,mode:ve.publish??Jr.JSON,onSave:Ie=>this.props.onOptionsChange({...ve,message:Ie}),addr:this.state.addr})}renderStatus(){const{status:ce}=this.state;if(ce?.state===Us.ZF.Connected)return;let ve="";return ce&&(ve=this.styles.status[ce.state]),v.createElement("div",{className:(0,G.cx)(ve,this.styles.statusWrap)},ce?.state)}renderBody(){const{status:ce}=this.state,{options:ve,height:Ie}=this.props;if(ve.publish===Jr.JSON||ve.publish===Jr.Influx){if(ve.display===si.None)return this.renderPublish(Ie);const Ge=Ie/2;return v.createElement("div",null,v.createElement("div",{style:{height:Ge,overflow:"hidden"}},v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ge))),v.createElement("div",null,this.renderPublish(Ge)))}return ve.display===si.None?v.createElement("pre",null,JSON.stringify(ce)):v.createElement("div",{style:{overflow:"hidden",height:Ie}},v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ie)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:ce,error:ve}=this.state;return ce?ve?v.createElement("div",null,v.createElement("h2",null,"ERROR"),v.createElement("div",null,JSON.stringify(ve))):v.createElement(v.Fragment,null,this.renderStatus(),this.renderBody()):v.createElement(re.F,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Zd=(0,na.N)(j=>({statusWrap:(0,G.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${j.components.panel.background};
    padding: 10px;
    z-index: ${j.zIndex.modal};
  `,status:{[Us.ZF.Pending]:(0,G.css)`
      border: 1px solid ${j.v1.palette.orange};
    `,[Us.ZF.Connected]:(0,G.css)`
      border: 1px solid ${j.colors.success.main};
    `,[Us.ZF.Connecting]:(0,G.css)`
      border: 1px solid ${j.v1.palette.brandWarning};
    `,[Us.ZF.Disconnected]:(0,G.css)`
      border: 1px solid ${j.colors.warning.main};
    `,[Us.ZF.Shutdown]:(0,G.css)`
      border: 1px solid ${j.colors.error.main};
    `,[Us.ZF.Invalid]:(0,G.css)`
      border: 1px solid red;
    `}})),Qs=new x.m(um).setPanelOptions(j=>{j.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:hd,defaultValue:{}}),j.addRadio({path:"display",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:si.Raw,label:"Raw Text"},{value:si.JSON,label:"JSON"},{value:si.Auto,label:"Auto"},{value:si.None,label:"None"}]},defaultValue:si.JSON}).addRadio({path:"publish",name:"Publish",description:"Display a form to publish values",settings:{options:[{value:Jr.None,label:"None"},{value:Jr.JSON,label:"JSON"},{value:Jr.Influx,label:"Influx"}]},defaultValue:Jr.None})});var Xi=e(9557),qd=e(96192),mm=e(81166),fm=e(17888),gm=e(7030),pm=e(93463),hm=e(14647),Ec=e(69147),vi=e(16817),eu=e(19347);const vm=j=>{const[ce,ve]=(0,v.useState)(new Map);return(0,vi.A)(async()=>{if(!j){ve(new Map);return}const Ie=await Promise.all(j.filter(Ke=>!!Ke.datasource?.uid).map(Ke=>(0,eu.l)().get(Ke.datasource?.uid).then(Ge=>({key:Ke.refId,ds:Ge}))));ve(new Map(Ie.map(({key:Ke,ds:Ge})=>[Ke,Ge])))},[j]),ce},Ai=({data:j,timeZone:ce,fieldConfig:ve,options:{showLabels:Ie,showTime:Ke,wrapLogMessage:Ge,showCommonLabels:nt,prettifyLogMessage:gt,sortOrder:vt,dedupStrategy:bt,enableLogDetails:Rt,showLogContextToggle:Lt},id:Nt})=>{const St=vt===pt.uH.Ascending,Qt=(0,le.of)(Em),[Zt,jt]=(0,v.useState)(0),Yt=(0,v.useRef)(null),[tn,Pn]=(0,v.useState)(null),ln=j.timeRange,Zn=vm(j.request?.targets),[Nn,zn]=(0,v.useState)(null);let Aa=(0,v.useRef)();const{eventBus:ma}=(0,Ma.d2)(),Da=(0,v.useCallback)(Qn=>{Qn?ma.publish(new en.b_({point:{time:Qn.timeEpochMs}})):ma.publish(new en.ql)},[ma]),Sn=(0,v.useCallback)(()=>{Pn(null),Aa.current&&Aa.current()},[Aa]),wn=(0,v.useCallback)((Qn,Tn)=>{Pn(Qn),Aa.current=Tn},[Aa]),Ln=(0,v.useCallback)(async Qn=>await bm(Qn,ln),[ln]),Wa=(0,v.useCallback)(Qn=>{if(!Qn.dataFrame.refId||!Zn||!Lt&&j.request?.app!==O.Jk.Dashboard&&j.request?.app!==O.Jk.PanelEditor&&j.request?.app!==O.Jk.PanelViewer)return!1;const Tn=Zn.get(Qn.dataFrame.refId);return(0,Xi.Ol)(Tn)},[Zn,Lt,j.request?.app]),Za=(0,v.useCallback)(()=>!(j.request?.app!==O.Jk.Dashboard&&j.request?.app!==O.Jk.PanelEditor&&j.request?.app!==O.Jk.PanelViewer),[j.request?.app]),ds=(0,v.useCallback)(async(Qn,Tn,ca)=>{if(!Tn.dataFrame.refId||!Zn)return Promise.resolve({data:[]});const Ra=j.request?.targets[0];if(!Ra)return Promise.resolve({data:[]});const Ba=Zn.get(Tn.dataFrame.refId);return(0,Xi.Ol)(Ba)?Ba.getLogRowContext(Qn,ca,Ra):Promise.resolve({data:[]})},[j.request?.targets,Zn]),la=(0,v.useCallback)((Qn,Tn)=>{if(!Qn.dataFrame.refId||!Zn)return v.createElement(v.Fragment,null);const ca=j.request?.targets[0];if(!ca)return v.createElement(v.Fragment,null);const Ra=Zn.get(Qn.dataFrame.refId);return!(0,Xi.wj)(Ra)||!Ra.getLogRowContextUi?v.createElement(v.Fragment,null):Ra.getLogRowContextUi(Qn,Tn,ca)},[j.request?.targets,Zn]),[ha,as,Ps]=(0,v.useMemo)(()=>{const Qn=j?(0,Ec.HT)(j.series,j.request?.intervalMs,void 0,j.request?.targets):null,Tn=Qn?.rows||[],ca=Qn?.meta?.find(Ba=>Ba.label===Ec.yR),Ra=(0,Ec.M0)(Tn,bt);return[Tn,Ra,ca]},[j,bt]);(0,v.useLayoutEffect)(()=>{St&&Yt.current?jt(Yt.current.offsetHeight):jt(0)},[St,ha]);const Ms=(0,v.useCallback)((Qn,Tn)=>(0,qd.QL)({field:Qn,rowIndex:Tn,range:j.timeRange}),[j]),Pa=(0,v.useCallback)(Qn=>{Nn?.scrollTo({top:Qn.offsetTop,behavior:"smooth"})},[Nn]);if(!j||ha.length===0)return v.createElement(fm.a,{fieldConfig:ve,panelId:Nt,data:j,needsStringField:!0});const Ka=()=>v.createElement("div",{className:(0,G.cx)(Qt.labelContainer,St&&Qt.labelContainerAscending)},v.createElement("span",{className:Qt.label},"Common labels:"),v.createElement(pm.A,{labels:Ps?Ps.value:{labels:"(no common labels)"}}));return v.createElement(v.Fragment,null,tn&&v.createElement(mm.V,{open:tn!==null,row:tn,onClose:Sn,getRowContext:(Qn,Tn)=>ds(Qn,tn,Tn),logsSortOrder:vt,timeZone:ce,getLogRowContextUi:la}),v.createElement(ue.E,{autoHide:!0,scrollTop:Zt,scrollRefCallback:Qn=>zn(Qn)},v.createElement("div",{className:Qt.container,ref:Yt},nt&&!St&&Ka(),v.createElement(hm.k,{containerRendered:Yt.current!==null,scrollIntoView:Pa,permalinkedRowId:ym()?.logs?.id??void 0,onPermalinkClick:Za()?Ln:void 0,logRows:ha,showContextToggle:Wa,deduplicatedRows:as,dedupStrategy:bt,showLabels:Ie,showTime:Ke,wrapLogMessage:Ge,prettifyLogMessage:gt,timeZone:ce,getFieldLinks:Ms,logsSortOrder:vt,enableLogDetails:Rt,previewLimit:St?ha.length:void 0,onLogRowHover:Da,app:O.Jk.Dashboard,onOpenContext:wn}),nt&&St&&Ka())))},Em=j=>({container:(0,G.css)({marginBottom:j.spacing(1.5)}),labelContainer:(0,G.css)({margin:j.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,G.css)({margin:j.spacing(.5,0,.5,0)}),label:(0,G.css)({marginRight:j.spacing(.5),fontSize:j.typography.bodySmall.fontSize,fontWeight:j.typography.fontWeightMedium})});function ym(){const ce=vo.kM.getUrlSearchParams()?.panelState;if(ce&&Array.isArray(ce)&&ce?.length>0&&typeof ce[0]=="string")try{return JSON.parse(ce[0])}catch(ve){console.error("error parsing logsPanelState",ve)}}async function bm(j,ce){if(j.rowId===void 0||!j.dataFrame.refId)return;const ve={logs:{id:j.uid}},Ie=new URL(window.location.href);return Ie.searchParams.set("panelState",JSON.stringify(ve)),Ie.searchParams.set("from",(0,Jt.yT)(ce.from).valueOf().toString(10)),Ie.searchParams.set("to",(0,Jt.yT)(ce.to).valueOf().toString(10)),await(0,gm.V)(Ie.toString()),Promise.resolve()}class Dm{getSuggestionsForData(ce){const ve=ce.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ie}=ce;!Ie.hasData||!Ie.hasTimeField||!Ie.hasStringField||(Ie.preferredVisualisationType==="logs"?ve.append({name:Ts.m.Logs,score:Ca.nQ.Best}):ve.append({name:Ts.m.Logs}))}}const Pm=new x.m(Ai).setPanelOptions(j=>{j.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:pt.fY.none,label:"None",description:Xi._C[pt.fY.none]},{value:pt.fY.exact,label:"Exact",description:Xi._C[pt.fY.exact]},{value:pt.fY.numbers,label:"Numbers",description:Xi._C[pt.fY.numbers]},{value:pt.fY.signature,label:"Signature",description:Xi._C[pt.fY.signature]}]},defaultValue:pt.fY.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:pt.uH.Descending,label:"Newest first"},{value:pt.uH.Ascending,label:"Oldest first"}]},defaultValue:pt.uH.Descending})}).setSuggestionsSupplier(new Dm);var Fl=e(69386),Ei=e(62372),tu=e(4172);function nu(j){const{width:ce,options:{feedUrl:ve=Ei.$,showImage:Ie}}=j,{state:Ke,getNews:Ge}=(0,tu.n)(ve);return(0,v.useEffect)(()=>{const nt=j.eventBus.subscribe(oe._,Ge);return()=>{nt.unsubscribe()}},[Ge,j.eventBus]),(0,v.useEffect)(()=>{Ge()},[Ge]),Ke.error?v.createElement(re.F,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",v.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",v.createElement(F.I,{name:"external-link-alt"}))):Ke.loading?v.createElement("div",null,"Loading..."):Ke.value?v.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},Ke.value.map((nt,gt)=>v.createElement(Fl.K,{key:gt,index:gt,width:ce,showImage:Ie,data:Ke.value}))):null}const yc={showImage:!0},Cm=new x.m(nu).setPanelOptions(j=>{j.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Ei.$},defaultValue:yc.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:yc.showImage})});var Tm=e(56323),au=e(29995),Sm=e(89227),bc=e(98361),Mm=e(33434),su=e(44916),xm=e(4118),Om=e(35472),vd=e(84140),Im=e(59796),Dc=e(3139);let Am=0;const Rm=()=>Am++;function Lm(j){const ce=(0,v.useRef)(null);return ce.current===null&&(ce.current=j+Rm()),ce.current.toString()}var Yo=(j=>(j.Donut="donut",j.Pie="pie",j))(Yo||{}),Ko=(j=>(j.Name="name",j.Percent="percent",j.Value="value",j))(Ko||{}),Ri=(j=>(j.Percent="percent",j.Value="value",j))(Ri||{});const Np={values:[]},Bm={displayLabels:[]};function ru(j){return!j.field.custom?.hideFrom?.viz&&!isNaN(j.display.numeric)}function ou(j,ce){return ce.display.numeric+j}const Um=({fieldDisplayValues:j,pieType:ce,width:ve,height:Ie,highlightedTitle:Ke,displayLabels:Ge=[],tooltipOptions:nt})=>{const gt=(0,le.$j)(),vt=Lm("PieChart"),bt=(0,le.of)(Cc),Rt=(0,xm.A)(),{containerRef:Lt,TooltipInPortal:Nt}=(0,Om.A)({detectBounds:!0,scroll:!0}),St=j.filter(ru),Qt=Nn=>Nn.display.numeric,Zt=Nn=>`${vt}-${(0,vd.A)(Nn).toHex()}`,jt=Nn=>`url(#${Zt(Nn)})`,Yt=Ge.length>0,tn=nt.mode!=="none"&&Rt.tooltipOpen,Pn=St.reduce(ou,0),ln=Ed(ve,Ie,ce),Zn=[...new Set(St.map(Nn=>Nn.display.color??Hn.F))];return v.createElement("div",{className:bt.container},v.createElement("svg",{width:ln.size,height:ln.size,ref:Lt,style:{overflow:"visible"}},v.createElement(Mm.A,{top:ln.position,left:ln.position},Zn.map(Nn=>v.createElement(bc.A,{key:Nn,id:Zt(Nn),from:lu(Nn,gt),to:cu(Nn,gt),fromOffset:ln.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:ln.outerRadius})),v.createElement(su.A,{data:St,pieValue:Qt,outerRadius:ln.outerRadius,innerRadius:ln.innerRadius,cornerRadius:3,padAngle:.005},Nn=>v.createElement(v.Fragment,null,Nn.arcs.map(zn=>{const Aa=zn.data.display.color??Hn.F,ma=Pc(Ke,zn);return zn.data.hasLinks&&zn.data.getLinks?v.createElement(Im.e,{key:zn.index,links:zn.data.getLinks},Da=>v.createElement(iu,{tooltip:Rt,highlightState:ma,arc:zn,pie:Nn,fill:jt(Aa),openMenu:Da.openMenu,tooltipOptions:nt})):v.createElement(iu,{key:zn.index,highlightState:ma,tooltip:Rt,arc:zn,pie:Nn,fill:jt(Aa),tooltipOptions:nt})}),Yt&&Nn.arcs.map(zn=>{const Aa=Pc(Ke,zn);return v.createElement(Xr,{arc:zn,key:zn.index,highlightState:Aa,outerRadius:ln.outerRadius,innerRadius:ln.innerRadius,displayLabels:Ge,total:Pn,color:gt.colors.text.primary})}))))),tn?v.createElement(Nt,{key:Math.random(),top:Rt.tooltipTop,className:bt.tooltipPortal,left:Rt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},v.createElement(Dc.o,{series:Rt.tooltipData})):null)};function iu({arc:j,pie:ce,highlightState:ve,openMenu:Ie,fill:Ke,tooltip:Ge,tooltipOptions:nt}){const gt=(0,le.$j)(),vt=(0,le.of)(Cc),{eventBus:bt}=(0,Ma.d2)(),Rt=(0,v.useCallback)(St=>{bt?.publish({type:en.ql.type,payload:{raw:St,x:0,y:0,dataId:j.data.display.title}}),Ge.hideTooltip()},[bt,j,Ge]),Lt=(0,v.useCallback)(St=>{bt?.publish({type:en.b_.type,payload:{raw:St,x:0,y:0,dataId:j.data.display.title}});const Qt=St.currentTarget.ownerSVGElement;if(Qt){const Zt=(0,Sm.A)(Qt,St);Ge.showTooltip({tooltipLeft:Zt.x,tooltipTop:Zt.y,tooltipData:Rr(ce,j,nt)})}},[bt,j,Ge,ce,nt]),Nt=Wl(ve,vt);return v.createElement("g",{key:j.data.display.title,className:Nt,onMouseMove:nt.mode!=="none"?Lt:void 0,onMouseOut:Rt,onClick:Ie,"data-testid":rr.Tp.components.Panels.Visualization.PieChart.svgSlice},v.createElement("path",{d:ce.path({...j}),fill:Ke,stroke:gt.colors.background.primary,strokeWidth:1}))}function Xr({arc:j,outerRadius:ce,innerRadius:ve,displayLabels:Ie,total:Ke,color:Ge,highlightState:nt}){const gt=(0,le.of)(Cc),vt=ve===0?ce/6:ve,[bt,Rt]=Nm(j,ce,vt);if(!(j.endAngle-j.startAngle>=.3))return null;let Nt=Ie.includes(Ko.Name)?Math.min(Math.max(ce/150*14,12),30):Math.min(Math.max(ce/100*14,12),36);return v.createElement("g",{className:Wl(nt,gt)},v.createElement("text",{fill:Ge,x:bt,y:Rt,dy:".33em",fontSize:Nt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ie.includes(Ko.Name)&&v.createElement("tspan",{x:bt,dy:"1.2em"},j.data.display.title),Ie.includes(Ko.Value)&&v.createElement("tspan",{x:bt,dy:"1.2em"},(0,Ls.cN)(j.data.display)),Ie.includes(Ko.Percent)&&v.createElement("tspan",{x:bt,dy:"1.2em"},(j.data.display.numeric/Ke*100).toFixed(j.data.field.decimals??0)+"%")))}function Rr(j,ce,ve){return ve.mode==="multi"?j.arcs.filter(Ie=>{const Ke=Ie.data.field;return Ke&&!Ke.custom?.hideFrom?.tooltip&&!Ke.custom?.hideFrom?.viz}).map(Ie=>({color:Ie.data.display.color??Hn.F,label:Ie.data.display.title,value:(0,Ls.cN)(Ie.data.display),isActive:Ie.index===ce.index})):[{color:ce.data.display.color??Hn.F,label:ce.data.display.title,value:(0,Ls.cN)(ce.data.display)}]}function Nm(j,ce,ve){const Ie=(ce+ve)/2,Ke=(+j.startAngle+ +j.endAngle)/2-Math.PI/2;return[Math.cos(Ke)*Ie,Math.sin(Ke)*Ie]}function lu(j,ce){return(0,vd.A)(j).darken(20*(ce.isDark?1:-.7)).spin(4).toRgbString()}function cu(j,ce){return(0,vd.A)(j).darken(10*(ce.isDark?1:-.7)).spin(-4).toRgbString()}function Ed(j,ce,ve,Ie=16){const Ke=Math.min(ce,j),Ge=(Ke-Ie*2)/2,nt=ve===Yo.Pie?Ge:Math.max(Ge/3,20),gt=Ge-nt,vt=(Ke-Ie*2)/2,bt=1-(Ge-gt)/Ge;return{position:vt+Ie,size:Ke,outerRadius:Ge,innerRadius:gt,gradientFromOffset:bt}}var wp=(j=>(j[j.Highlighted=0]="Highlighted",j[j.Deemphasized=1]="Deemphasized",j[j.Normal=2]="Normal",j))(wp||{});function Pc(j,ce){return j?j===ce.data.display.title?0:1:2}function Wl(j,ce){switch(j){case 0:return ce.svgArg.highlighted;case 1:return ce.svgArg.deemphasized;case 2:default:return ce.svgArg.normal}}const Cc=j=>({container:(0,G.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,G.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,G.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,G.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,G.css)`
      ${(0,ji.getTooltipContainerStyles)(j)}
    `}),du={displayMode:pt.lm.List,showLegend:!0,placement:"right",calcs:[],values:[Ri.Percent]};function wm(j){const{data:ce,timeZone:ve,fieldConfig:Ie,replaceVariables:Ke,width:Ge,height:nt,options:gt,id:vt}=j,bt=(0,le.$j)(),Rt=Fm(),Lt=(0,Tm.PI)({fieldConfig:Ie,reduceOptions:gt.reduceOptions,data:ce.series,theme:bt,replaceVariables:Ke,timeZone:ve});return Kl(Lt)?v.createElement(ps.KU,{width:Ge,height:nt,legend:Tc(j,Lt)},(Nt,St)=>v.createElement(Um,{width:Nt,height:St,highlightedTitle:Rt,fieldDisplayValues:Lt,tooltipOptions:gt.tooltip,pieType:gt.pieType,displayLabels:gt.displayLabels})):v.createElement(da.a,{panelId:vt,fieldConfig:Ie,data:ce})}function Tc(j,ce){const ve=j.options.legend??du;if(ve.showLegend===!1)return;const Ie=ce.filter(ru).reduce(ou,0),Ke=ce.sort((Ge,nt)=>isNaN(Ge.display.numeric)?1:isNaN(nt.display.numeric)?-1:nt.display.numeric-Ge.display.numeric).map((Ge,nt)=>{const gt=Ge.field.custom?.hideFrom??{};if(gt.legend)return;const vt=!!gt.viz,bt=Ge.display;return{label:bt.title??"",color:bt.color??Hn.F,yAxis:1,disabled:vt,getItemKey:()=>(bt.title??"")+nt,getDisplayValues:()=>{const Rt=ve.values??[];let Lt=[];if(Rt.includes(Ri.Value)&&Lt.push({numeric:bt.numeric,text:(0,Ls.cN)(bt),title:"Value"}),Rt.includes(Ri.Percent)){const Nt=vt?0:bt.numeric/Ie,St=Nt*100;Lt.push({numeric:Nt,percent:St,text:vt||isNaN(Nt)?j.fieldConfig.defaults.noValue??"-":St.toFixed(Ge.field.decimals??0)+"%",title:Rt.length>1?"Percent":""})}return Lt}}}).filter(Ge=>!!Ge);return v.createElement(ps.KU.Legend,{placement:ve.placement,width:ve.width},v.createElement(As.t,{items:Ke,seriesVisibilityChangeBehavior:au.K.Hide,placement:ve.placement,displayMode:ve.displayMode}))}function Kl(j){return j.some(ce=>ce.view?.dataFrame.length)}function Fm(){const[j,ce]=(0,v.useState)(),{eventBus:ve}=(0,Ma.d2)();return(0,v.useEffect)(()=>{const Ie=nt=>{ce(nt.payload.dataId)},Ke=nt=>{ce(void 0)},Ge=new Vt.yU;return Ge.add(ve.getStream(en.b_).subscribe({next:Ie})),Ge.add(ve.getStream(en.ql).subscribe({next:Ke})),()=>{Ge.unsubscribe()}},[ce,ve]),j}const uu=(j,ce,ve)=>{if(ce==="grafana-piechart-panel"&&ve.angular){const Ie=ve.angular,Ke=[];let Ge=j.options;if(Ie.aliasColors)for(const nt of Object.keys(Ie.aliasColors)){const gt=Ie.aliasColors[nt];gt&&Ke.push({matcher:{id:Vr.Ct.byName,options:nt},properties:[{id:_n.uo.Color,value:{mode:Hn.Y.Fixed,fixedColor:gt}}]})}if(j.fieldConfig={overrides:Ke,defaults:{unit:Ie.format,decimals:Ie.decimals?Ie.decimals:0}},Ge.legend={placement:"right",values:[],displayMode:pt.lm.Table,showLegend:!0,calcs:[]},Ie.valueName)switch(Ge.reduceOptions={calcs:[]},Ie.valueName){case"current":Ge.reduceOptions.calcs=["lastNotNull"];break;case"min":Ge.reduceOptions.calcs=["min"];break;case"max":Ge.reduceOptions.calcs=["max"];break;case"avg":Ge.reduceOptions.calcs=["mean"];break;case"total":Ge.reduceOptions.calcs=["sum"];break}switch(Ie.legendType){case"Under graph":Ge.legend.placement="bottom";break;case"Right side":Ge.legend.placement="right";break}switch(Ie.pieType){case"pie":Ge.pieType=Yo.Pie;break;case"donut":Ge.pieType=Yo.Donut;break}return Ie.legend&&(Ie.legend.show||(Ge.legend.showLegend=!1),Ie.legend.values&&Ge.legend.values.push(Ri.Value),Ie.legend.percentage&&Ge.legend.values.push(Ri.Percent)),Ie.legendType==="On graph"&&(Ge.legend.showLegend=!1,Ge.displayLabels=[Ko.Name],Ie.legend.values&&Ge.displayLabels.push(Ko.Value),Ie.legend.percentage&&Ge.displayLabels.push(Ko.Percent)),Ge}return{}};class mu{getSuggestionsForData(ce){const ve=ce.getListAppender({name:Ts.m.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Ko.Percent],legend:{calcs:[],displayMode:pt.lm.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:Ie}=ce;if(Ie.hasNumberField){if(Ie.hasStringField&&Ie.frameCount===1){if(Ie.rowCountTotal>30||Ie.rowCountTotal<2)return;ve.append({name:Ts.m.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ve.append({name:Ts.m.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Yo.Donut}});return}Ie.numberFieldCount>30||Ie.numberFieldCount<2||(ve.append({name:Ts.m.PieChart}),ve.append({name:Ts.m.PieChartDonut,options:{pieType:Yo.Donut}}))}}}const Wm=new x.m(wm).setPanelChangeHandler(uu).useFieldConfig({disableStandardOptions:[_n.uo.Thresholds],standardOptions:{[_n.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Hn.Y.PaletteClassic}}},useCustomConfig:j=>{gn.e(j)}}).setPanelOptions(j=>{(0,Sr.L)(j),j.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Yo.Pie,label:"Pie"},{value:Yo.Donut,label:"Donut"}]},defaultValue:Yo.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Ko.Percent,label:"Percent"},{value:Ko.Name,label:"Name"},{value:Ko.Value,label:"Value"}]}}),Cn.D(j),In.H(j,!1),j.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Ri.Percent,label:"Percent"},{value:Ri.Value,label:"Value"}]},showIf:ce=>ce.legend.showLegend!==!1})}).setSuggestionsSupplier(new mu);var Km=e(36373),fu=e(11082),yd=e(34163),Sc=e(82389);const gu=({data:j,alignedData:ce,seriesIdx:ve,datapointIdx:Ie,timeZone:Ke,onAnnotationAdd:Ge})=>{const nt=(0,le.$j)();if(!j||Ie==null)return null;const gt=ce.fields[ve],vt=[],bt=new Set;if(gt.getLinks){const Nn=gt.values[Ie],zn=gt.display?gt.display(Nn):{text:`${Nn}`,numeric:+Nn};gt.getLinks({calculatedValue:zn,valueRowIndex:Ie}).forEach(Aa=>{const ma=`${Aa.title}/${Aa.href}`;bt.has(ma)||(vt.push(Aa),bt.add(ma))})}const Rt=ce.fields[0],Lt=Rt.display||(0,Ws.J)({field:Rt,timeZone:Ke,theme:nt}),Nt=gt.state?.origin,St=gt.display||(0,Ws.J)({field:gt,timeZone:Ke,theme:nt}),Qt=gt.values[Ie],Zt=St(Qt),jt=Nt?(0,va.Ct)(j[Nt.frameIndex].fields[Nt.fieldIndex],j[Nt.frameIndex],j):null,Yt=(0,dr.GY)(gt,Ie);let tn;Yt&&(tn=Rt.values[Yt]);const Pn=Rt.values[Ie];let ln=null,Zn=null;if(tn){const Nn=tn&&(0,dr.c5)(tn-Pn);Zn=v.createElement(v.Fragment,null,v.createElement("br",null),v.createElement("strong",null,"Duration:")," ",Nn),ln=v.createElement(v.Fragment,null," to"," ",v.createElement("strong",null,Lt(Rt.values[Yt]).text))}return v.createElement("div",null,v.createElement("div",{style:{fontSize:nt.typography.bodySmall.fontSize}},jt,v.createElement("br",null),v.createElement(Dc.g,{label:Zt.text,color:Zt.color||Hn.F,isActive:!0}),"From ",v.createElement("strong",null,Lt(Rt.values[Ie]).text),ln,Zn),v.createElement("div",{style:{margin:nt.spacing(1,-1,-1,-1),borderTop:`1px solid ${nt.colors.border.weak}`}},Ge&&v.createElement(ct.D,{label:"Add annotation",icon:"comment-alt",onClick:Ge}),vt.length>0&&vt.map((Nn,zn)=>v.createElement(ct.D,{key:zn,icon:"external-link-alt",target:Nn.target,label:Nn.title,url:Nn.href,onClick:Nn.onClick}))))};gu.displayName="StateTimelineTooltip";var $m=e(11389),Vm=e(58749),_m=e(52415),zm=e(10875),km=e(21164);const bd=({frames:j,seriesFrame:ce,dataIdxs:ve,seriesIdx:Ie,mode:Ke=pt.$N.Single,sortOrder:Ge=pt.xB.None,scrollable:nt=!1,isPinned:gt,annotate:vt,timeRange:bt,withDuration:Rt})=>{const Lt=(0,le.of)(bo.$),Nt=ce.fields[0],St=Ie!=null?ve[Ie]:ve.find(tn=>tn!=null),Qt=Nt.display(Nt.values[St]).text;Ke=gt?pt.$N.Single:Ke;const Zt=(0,zm.cp)(ce.fields,Nt,ve,Ie,Ke,Ge);if(Rt&&Ke===pt.$N.Single){const tn=ce.fields[Ie],Pn=(0,dr.GY)(tn,St);let ln;Pn&&(ln=Nt.values[Pn]);const Zn=Nt.values[St];let Nn;if(ln)Nn=ln&&(0,dr.c5)(ln-Zn);else{const zn=bt.to.valueOf();Nn=(0,dr.c5)(zn-Zn)}Zt.push({label:"Duration",value:Nn})}let jt;if(gt&&Ie!=null){const tn=ce.fields[Ie],Pn=ve[Ie],ln=(0,km.u)(tn,Pn);jt=v.createElement(Vm.S,{dataLinks:ln,annotate:vt})}const Yt={label:Nt.type===dn.PU.time?"":(0,va.Ct)(Nt,ce,j),value:Qt};return v.createElement("div",{className:Lt.wrapper},v.createElement(_m.A,{item:Yt,isPinned:gt}),v.createElement($m.o,{items:Zt,isPinned:gt,scrollable:nt}),jt)},$l=10,Hm=({data:j,timeRange:ce,timeZone:ve,options:Ie,width:Ke,height:Ge,replaceVariables:nt,onChangeTimeRange:gt})=>{const vt=(0,le.$j)(),bt=(0,v.useCallback)(()=>Sn?.()===Rs.y.Tooltip,[]),Rt=(0,v.useCallback)(()=>Sn?.()!==Rs.y.Off,[]),Lt=(0,v.useRef)(void 0),Nt=(0,v.useRef)(!1),[St,Qt]=(0,v.useState)(void 0),[Zt,jt]=(0,v.useState)(null),[Yt,tn]=(0,v.useState)(null),[Pn,ln]=(0,v.useState)(null),[Zn,Nn]=(0,v.useState)(!1),[zn,Aa]=(0,v.useState)(!1),[ma,Da]=(0,v.useState)(null),{sync:Sn,canAddAnnotations:wn,dataLinkPostProcessor:Ln,eventBus:Wa}=(0,Ma.d2)(),Za=()=>{Nt.current=!1,jt(null),Aa(!1)},ds=()=>{Nt.current=!Nt.current,Aa(Nt.current)},{frames:la,warn:ha}=(0,v.useMemo)(()=>(0,dr.Qe)(j.series,Ie.mergeValues??!0,ce,vt),[j.series,Ie.mergeValues,ce,vt]),as=(0,v.useMemo)(()=>(0,dr.Or)(la,Ie.legend,vt),[la,Ie.legend,vt]),Ps=(0,v.useMemo)(()=>Po(Ie.timezone,ve),[Ie.timezone,ve]),Ms=(0,v.useCallback)((Qn,Tn,ca,Ra)=>{const Ba=la??[],Fa=Ba.reduce((ls,Ns)=>ls+Ns.fields.filter(kt=>kt.type!==dn.PU.time).length,0);return Tn===null||ca===null||Qn.fields.length-1!==Fa||!Qn.fields[Tn]?null:v.createElement(v.Fragment,null,zn&&v.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},v.createElement(kr.J,{onClick:Za,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),v.createElement(gu,{data:Ba,alignedData:Qn,seriesIdx:Tn,datapointIdx:ca,timeZone:ve,onAnnotationAdd:Ra}))},[ve,la,zn]);if(!la||ha)return v.createElement("div",{className:"panel-empty"},v.createElement("p",null,ha??"No data found in response"));if(la.length===1){const Qn=(0,Qo.wC)(la[0])}const Pa=!!(wn&&wn()),Ka=!!S.$.featureToggles.newVizTooltips;return v.createElement(Sc.I,{theme:vt,frames:la,structureRev:j.structureRev,timeRange:ce,timeZone:Ps,width:Ke,height:Ge,legendItems:as,...Ie,mode:dr.pm.Changes,replaceVariables:nt,dataLinkPostProcessor:Ln},(Qn,Tn)=>(Lt.current!==Qn&&!Ka&&(Lt.current=ws({config:Qn,onUPlotClick:ds,setFocusedSeriesIdx:tn,setFocusedPointIdx:ln,setCoords:jt,setHover:Qt,isToolTipOpen:Nt,isActive:Zn,setIsActive:Nn,sync:Sn})),v.createElement(v.Fragment,null,v.createElement(ko.K,{config:Qn,sync:Rt,eventBus:Wa,frame:Tn}),Ka?v.createElement(v.Fragment,null,Ie.tooltip.mode!==pt.$N.None&&v.createElement(vs.xl,{config:Qn,hoverMode:Ie.tooltip.mode===pt.$N.Multi?vs.b3.xAll:vs.b3.xOne,queryZoom:gt,syncTooltip:bt,render:(ca,Ra,Ba,Fa,ls,Ns,kt)=>{if(Pa&&Ns!=null){Da(Ns),ls();return}const nr=()=>{let Yn=ca.posToVal(ca.cursor.left,"x");Da({from:Yn,to:Yn}),ls()};return v.createElement(bd,{frames:la??[],seriesFrame:Tn,dataIdxs:Ra,seriesIdx:Ba,mode:kt?pt.$N.Multi:Ie.tooltip.mode,sortOrder:Ie.tooltip.sort,isPinned:Fa,timeRange:ce,annotate:Pa?nr:void 0,withDuration:!0})},maxWidth:Ie.tooltip.maxWidth,maxHeight:Ie.tooltip.maxHeight}),v.createElement(fi.W,{annotations:j.annotations??[],config:Qn,timeZone:ve,newRange:ma,setNewRange:Da,canvasRegionRendering:!1})):v.createElement(v.Fragment,null,v.createElement(Ho.j,{config:Qn,onZoom:gt}),v.createElement(ja,{config:Qn,onChangeTimeRange:gt}),j.annotations&&v.createElement(mi,{annotations:j.annotations,config:Qn,timeZone:ve}),Pa?v.createElement(Hi,{data:Tn,timeZone:ve,config:Qn},({startAnnotating:ca})=>Ie.tooltip.mode===pt.$N.None||Pn===null||!Zn&&Sn&&Sn()===Rs.y.Crosshair?null:v.createElement(ar.ZL,null,St&&Zt&&Yt&&v.createElement(ss.o,{position:{x:Zt.viewport.x,y:Zt.viewport.y},offset:{x:$l,y:$l},allowPointerEvents:Nt.current},Ms(Tn,Yt,Pn,()=>{ca({coords:{plotCanvas:Zt.canvas,viewport:Zt.viewport}}),Za()})))):v.createElement(ar.ZL,null,Ie.tooltip.mode!==pt.$N.None&&St&&Zt&&v.createElement(ss.o,{position:{x:Zt.viewport.x,y:Zt.viewport.y},offset:{x:$l,y:$l},allowPointerEvents:Nt.current},Ms(Tn,Yt,Pn)))))))};var pu=e(25019);const jm=(j,ce,ve)=>{let Ie=j.options??{};if(ce==="natel-discrete-panel"&&ve.angular){const Ke=ve.angular,Ge=j.fieldConfig??{defaults:{},overrides:[]};Ke.units&&(Ge.defaults.unit=Ke.units);const nt={fillOpacity:100,lineWidth:0};Ge.defaults.custom=nt,Ie.mergeValues=!0;const gt={type:pu.d.ValueToText,options:{}};if(Ge.defaults.mappings=[gt],(0,N.isArray)(Ke.colorMaps))for(const vt of Ke.colorMaps){const bt=vt.color;bt&&(gt.options[vt.text]={color:bt})}if((0,N.isArray)(Ke.valueMaps))for(const vt of Ke.valueMaps){const bt=vt.text,Rt=vt.value;if(bt&&Rt){let Lt=gt.options[Rt];Lt?Lt.text=bt:gt.options[Rt]={text:bt}}}if((0,N.isArray)(Ke.rangeMaps))for(const vt of Ke.rangeMaps){let bt=+vt.from,Rt=+vt.to;const Lt=vt.text;Lt&&Ge.defaults.mappings.push({type:pu.d.RangeToText,options:{from:bt,to:Rt,result:{text:Lt}}})}j.fieldConfig=Ge}return Ie},Mc={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:pt.yL.Auto},hu={fillOpacity:70,lineWidth:0};class Gm{getSuggestionsForData(ce){const{dataSummary:ve}=ce;if(!ve.hasData||!ve.hasTimeField||!ve.hasStringField&&!ve.hasNumberField||ve.numberFieldCount>=30||ve.preferredVisualisationType==="logs")return;ce.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ts.m.StateTimeline})}}const Qm=new x.m(Hm).setPanelChangeHandler(jm).useFieldConfig({standardOptions:{[_n.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Hn.Y.ContinuousGrYlRd}}},useCustomConfig:j=>{j.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:hu.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:hu.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:yd.e,override:yd.e,shouldApply:ce=>ce.type!==dn.PU.time,process:ba.hS,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:fu.Z,override:fu.Z,shouldApply:ce=>ce.type!==dn.PU.time,process:ba.hS,settings:{isTime:!0}}),gn.e(j)}}).setPanelOptions(j=>{j.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Mc.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:pt.yL.Auto,label:"Auto"},{value:pt.yL.Always,label:"Always"},{value:pt.yL.Never,label:"Never"}]},defaultValue:Mc.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Mc.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Mc.rowHeight}),In.H(j,!1),Cn.D(j,!S.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new Gm).setDataSupport({annotations:!0}),Dd=({data:j,alignedData:ce,seriesIdx:ve,datapointIdx:Ie,timeZone:Ke})=>{const Ge=(0,le.$j)();if(!j||Ie==null)return null;const nt=ce.fields[ve],gt=[],vt=new Set;if(nt.getLinks){const jt=nt.values[Ie],Yt=nt.display?nt.display(jt):{text:`${jt}`,numeric:+jt};nt.getLinks({calculatedValue:Yt,valueRowIndex:Ie}).forEach(tn=>{const Pn=`${tn.title}/${tn.href}`;vt.has(Pn)||(gt.push(tn),vt.add(Pn))})}const bt=ce.fields[0],Rt=bt.display||(0,Ws.J)({field:bt,timeZone:Ke,theme:Ge}),Lt=nt.state?.origin,Nt=nt.display||(0,Ws.J)({field:nt,timeZone:Ke,theme:Ge}),St=nt.values[Ie],Qt=Nt(St),Zt=Lt?(0,va.Ct)(j[Lt.frameIndex].fields[Lt.fieldIndex],j[Lt.frameIndex],j):null;return v.createElement("div",null,v.createElement("div",{style:{fontSize:Ge.typography.bodySmall.fontSize}},v.createElement("strong",null,Rt(bt.values[Ie]).text),v.createElement("br",null),v.createElement(Dc.g,{label:Qt.text,color:Qt.color||Hn.F,isActive:!0}),Zt),gt.length>0&&v.createElement("div",{style:{margin:Ge.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ge.colors.border.weak}`}},gt.map((jt,Yt)=>v.createElement(ct.D,{key:Yt,icon:"external-link-alt",target:jt.target,label:jt.title,url:jt.href,onClick:jt.onClick}))))};Dd.displayName="StatusHistoryTooltip";const vu=10,xc=({data:j,timeRange:ce,timeZone:ve,options:Ie,width:Ke,height:Ge,replaceVariables:nt,onChangeTimeRange:gt})=>{const vt=(0,le.$j)(),bt=(0,v.useCallback)(()=>Sn?.()===Rs.y.Tooltip,[]),Rt=(0,v.useCallback)(()=>Sn?.()!==Rs.y.Off,[]),Lt=(0,v.useRef)(void 0),Nt=(0,v.useRef)(!1),[St,Qt]=(0,v.useState)(void 0),[Zt,jt]=(0,v.useState)(null),[Yt,tn]=(0,v.useState)(null),[Pn,ln]=(0,v.useState)(null),[Zn,Nn]=(0,v.useState)(!1),[zn,Aa]=(0,v.useState)(!1),[ma,Da]=(0,v.useState)(null),{sync:Sn,canAddAnnotations:wn,dataLinkPostProcessor:Ln,eventBus:Wa}=(0,Ma.d2)(),Za=!!(wn&&wn()),ds=()=>{Nt.current=!1,jt(null),Aa(!1)},la=()=>{Nt.current=!Nt.current,Aa(Nt.current)},{frames:ha,warn:as}=(0,v.useMemo)(()=>(0,dr.Qe)(j.series,!1,ce,vt),[j.series,ce,vt]),Ps=(0,v.useMemo)(()=>(0,dr.Or)(ha,Ie.legend,vt),[ha,Ie.legend,vt]),Ms=(0,v.useCallback)((Tn,ca,Ra)=>{const Ba=ha??[],Fa=Ba.reduce((ls,Ns)=>ls+Ns.fields.filter(kt=>kt.type!==dn.PU.time).length,0);return ca===null||Ra===null||Tn.fields.length-1!==Fa||!Tn.fields[ca]?null:v.createElement(v.Fragment,null,zn&&v.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},v.createElement(kr.J,{onClick:ds,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),v.createElement(Dd,{data:Ba,alignedData:Tn,seriesIdx:ca,datapointIdx:Ra,timeZone:ve}))},[ve,ha,zn]),Pa=Tn=>Ie.tooltip.mode===pt.$N.None||Pn===null||!Zn&&Sn&&Sn()===Rs.y.Crosshair?null:v.createElement(ar.ZL,null,St&&Zt&&Yt&&v.createElement(ss.o,{position:{x:Zt.viewport.x,y:Zt.viewport.y},offset:{x:vu,y:vu},allowPointerEvents:Nt.current},Ms(Tn,Yt,Pn))),Ka=(0,v.useMemo)(()=>Po(Ie.timezone,ve),[Ie.timezone,ve]);if(!ha||as)return v.createElement("div",{className:"panel-empty"},v.createElement("p",null,as??"No data found in response"));if(ha[0].length>Ke/2)return v.createElement("div",{className:"panel-empty"},v.createElement("p",null,"Too many points to visualize properly. ",v.createElement("br",null),"Update the query to return fewer points. ",v.createElement("br",null),"(",ha[0].length," points received)"));const Qn=!!S.$.featureToggles.newVizTooltips;return v.createElement(Sc.I,{theme:vt,frames:ha,structureRev:j.structureRev,timeRange:ce,timeZone:Ka,width:Ke,height:Ge,legendItems:Ps,...Ie,mode:dr.pm.Samples,replaceVariables:nt,dataLinkPostProcessor:Ln},(Tn,ca)=>(Lt.current!==Tn&&!Qn&&(Lt.current=ws({config:Tn,onUPlotClick:la,setFocusedSeriesIdx:tn,setFocusedPointIdx:ln,setCoords:jt,setHover:Qt,isToolTipOpen:Nt,isActive:Zn,setIsActive:Nn})),v.createElement(v.Fragment,null,v.createElement(ko.K,{config:Tn,sync:Rt,eventBus:Wa,frame:ca}),Qn?v.createElement(v.Fragment,null,Ie.tooltip.mode!==pt.$N.None&&v.createElement(vs.xl,{config:Tn,hoverMode:Ie.tooltip.mode===pt.$N.Multi?vs.b3.xAll:vs.b3.xOne,queryZoom:gt,syncTooltip:bt,render:(Ra,Ba,Fa,ls,Ns,kt,nr)=>{if(Za&&kt!=null){Da(kt),Ns();return}const Yn=()=>{let ta=Ra.posToVal(Ra.cursor.left,"x");Da({from:ta,to:ta}),Ns()};return v.createElement(bd,{frames:ha??[],seriesFrame:ca,dataIdxs:Ba,seriesIdx:Fa,mode:nr?pt.$N.Multi:Ie.tooltip.mode,sortOrder:Ie.tooltip.sort,isPinned:ls,timeRange:ce,annotate:Za?Yn:void 0,withDuration:!1})},maxWidth:Ie.tooltip.maxWidth,maxHeight:Ie.tooltip.maxHeight}),v.createElement(fi.W,{annotations:j.annotations??[],config:Tn,timeZone:ve,newRange:ma,setNewRange:Da,canvasRegionRendering:!1})):v.createElement(v.Fragment,null,v.createElement(Ho.j,{config:Tn,onZoom:gt}),Pa(ca),v.createElement(ja,{config:Tn,onChangeTimeRange:gt}),j.annotations&&v.createElement(mi,{annotations:j.annotations,config:Tn,timeZone:ve,disableCanvasRendering:!0})))))},Ym={colWidth:.9,rowHeight:.9,showValue:pt.yL.Auto},Eu={fillOpacity:70,lineWidth:1};class yu{getSuggestionsForData(ce){const{dataSummary:ve}=ce;if(!ve.hasData||!ve.hasTimeField||!ve.hasStringField&&!ve.hasNumberField||ve.numberFieldCount>=30||ve.rowCountMax>100||ve.preferredVisualisationType==="logs")return;ce.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Hn.Y.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ke=>{Ke.options.colWidth=.7}}}).append({name:Ts.m.StatusHistory})}}const Jm=new x.m(xc).useFieldConfig({standardOptions:{[_n.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Hn.Y.Thresholds}}},useCustomConfig:j=>{j.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Eu.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Eu.fillOpacity,settings:{min:0,max:100,step:1}}),gn.e(j)}}).setPanelOptions(j=>{j.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:pt.yL.Auto,label:"Auto"},{value:pt.yL.Always,label:"Always"},{value:pt.yL.Never,label:"Never"}]},defaultValue:pt.yL.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),In.H(j,!1),Cn.D(j,!S.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new yu).setDataSupport({annotations:!0});var bu=e(69550),Zi=e(39651),Du=e(15292);function Oc({onChange:j,value:ce,context:ve}){const Ie=Ke=>{Ke?.currentTarget.checked&&(ve.options.footer.show=!1),j(Ke?.currentTarget.checked)};return v.createElement(Du.d,{value:!!ce,onChange:Ie})}function qi({cellOptions:j,onChange:ce}){const ve=Ke=>{j.mode=Ke,ce(j)},Ie=Ke=>{j.valueDisplayMode=Ke,ce(j)};return v.createElement(A.B,{direction:"column",gap:0},v.createElement(po.D,{label:"Gauge display mode"},v.createElement(fs.z,{value:j?.mode??pt.eX.Gradient,onChange:ve,options:Pd})),v.createElement(po.D,{label:"Value display"},v.createElement(fs.z,{value:j?.valueDisplayMode??pt.$l.Text,onChange:Ie,options:Xm})))}const Pd=[{value:pt.eX.Basic,label:"Basic"},{value:pt.eX.Gradient,label:"Gradient"},{value:pt.eX.Lcd,label:"Retro LCD"}],Xm=[{value:pt.$l.Color,label:"Value color"},{value:pt.$l.Text,label:"Text color"},{value:pt.$l.Hidden,label:"Hidden"}],Zm=[{value:pt.Wq.Basic,label:"Basic"},{value:pt.Wq.Gradient,label:"Gradient"}],qm=({cellOptions:j,onChange:ce})=>{const ve=Ke=>{j.mode=Ke,ce(j)},Ie=()=>{j.applyToRow=!j.applyToRow,ce(j)};return v.createElement(v.Fragment,null,v.createElement(po.D,{label:"Background display mode"},v.createElement(fs.z,{value:j?.mode??pt.Wq.Gradient,onChange:ve,options:Zm})),v.createElement(po.D,{label:"Apply to entire row",description:"If selected the entire row will be colored as this cell would be."},v.createElement(Du.d,{value:j.applyToRow,onChange:Ie})))};var ef=e(28528),Pu=e(30355);const tf=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function Li(j){const ce=(0,fo.V)(j);return{...ce,useCustomConfig:ve=>{ce.useCustomConfig?.(ve),ve.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const Cu=j=>{const{cellOptions:ce,onChange:ve}=j,Ie=(0,v.useMemo)(()=>{const nt=Li(Pu.t);return(0,ef.O)(nt,"ChartCell")},[]),Ke=(0,le.of)(nf),Ge={...Pu.t,...ce};return v.createElement(ao.gW,null,Ie.list(tf.map(nt=>`custom.${nt}`)).map(nt=>{if(nt.showIf&&!nt.showIf(Ge))return null;const gt=nt.editor,vt=nt.path;return v.createElement(po.D,{label:nt.name,key:nt.id,className:Ke.field},v.createElement(gt,{onChange:bt=>ve({...ce,[vt]:bt}),value:(Tu(vt,Ge)?Ge[vt]:void 0)??nt.defaultValue,item:nt,context:{data:[]}}))}))};function Tu(j,ce){return j in ce}const nf=()=>({field:(0,G.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Su=({value:j,onChange:ce})=>{const ve=j.type,Ie=(0,le.of)(af),Ke=Mu.find(bt=>bt.value.type===ve);let[Ge,nt]=(0,v.useState)({});const gt=bt=>{bt.value!==void 0&&(j=bt.value,Ge[j.type]!==void 0&&Object.keys(Ge[j.type]).length>1&&(j=(0,N.merge)(j,Ge[j.type])),ce(j))},vt=bt=>{Ge[j.type]=(0,N.merge)(j,bt),nt(Ge),ce(Ge[j.type])};return v.createElement("div",{className:Ie.fixBottomMargin},v.createElement(po.D,null,v.createElement(V.l6,{options:Mu,value:Ke,onChange:gt})),ve===pt.ob.Gauge&&v.createElement(qi,{cellOptions:j,onChange:vt}),ve===pt.ob.ColorBackground&&v.createElement(qm,{cellOptions:j,onChange:vt}),ve===pt.ob.Sparkline&&v.createElement(Cu,{cellOptions:j,onChange:vt}))},Mu=[{value:{type:pt.ob.Auto},label:"Auto"},{value:{type:pt.ob.Sparkline},label:"Sparkline"},{value:{type:pt.ob.ColorText},label:"Colored text"},{value:{type:pt.ob.ColorBackground},label:"Colored background"},{value:{type:pt.ob.Gauge},label:"Gauge"},{value:{type:pt.ob.DataLinks},label:"Data links"},{value:{type:pt.ob.JSONView},label:"JSON View"},{value:{type:pt.ob.Image},label:"Image"}],af=j=>({fixBottomMargin:(0,G.css)({marginBottom:j.spacing(-2)})}),Ic={cellHeight:pt.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class sf{getSuggestionsForData(ce){const ve=ce.getListAppender({name:Ts.m.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ie=>{Ie.fieldConfig.defaults.custom.minWidth=50}}});ce.dataSummary.fieldCount===0?ve.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ve.append({})}}const Ac="Table footer",xu=["Cell options"],Cd=new x.m(wl).setPanelChangeHandler(pc.l1).setMigrationHandler(pc.fq).useFieldConfig({useCustomConfig:j=>{j.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Zi.gB.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Zi.gB.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"Auto",value:"auto"},{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}]},defaultValue:Zi.gB.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Su,override:Su,defaultValue:Zi.gB.cellOptions,process:ba.hS,category:xu,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:xu,showIf:ce=>ce.cellOptions.type===pt.ob.Auto||ce.cellOptions.type===pt.ob.JSONView||ce.cellOptions.type===pt.ob.ColorText||ce.cellOptions.type===pt.ob.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Zi.gB.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(j=>{j.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Ic.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:Ic.cellHeight,settings:{options:[{value:pt.qM.Sm,label:"Small"},{value:pt.qM.Md,label:"Medium"},{value:pt.qM.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[Ac],name:"Show table footer",defaultValue:Ic.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Ac],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:bu.D.get("stats-picker").editor,defaultValue:[ai.gy.sum],showIf:ce=>ce.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Ac],name:"Count rows",description:"Display a single count for all data rows",defaultValue:Ic.footer?.countRows,showIf:ce=>ce.footer?.reducer?.length===1&&ce.footer?.reducer[0]===ai.gy.count}).addMultiSelect({path:"footer.fields",category:[Ac],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async ce=>{const ve=[];if(ce&&ce.data&&ce.data.length>0){const Ie=ce.data[0];for(const Ke of Ie.fields)if(Ke.type===dn.PU.number){const Ge=(0,va.Ct)(Ke,Ie,ce.data),nt=Ke.name;ve.push({value:nt,label:Ge})}}return ve}},defaultValue:"",showIf:ce=>ce.footer?.show&&!ce.footer?.countRows}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Oc})}).setSuggestionsSupplier(new sf);var Td=e(49880),rf=e.n(Td),Sd=e(40996),of=e(36663),_r=(j=>(j.Code="code",j.HTML="html",j.Markdown="markdown",j))(_r||{}),Ou=(j=>(j.Go="go",j.Html="html",j.Json="json",j.Markdown="markdown",j.Plaintext="plaintext",j.Sql="sql",j.Typescript="typescript",j.Xml="xml",j.Yaml="yaml",j))(Ou||{});const lf="plaintext",Vl={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Rc={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Md(j){const ce=(0,le.of)(cf),[ve,Ie]=(0,v.useState)({mode:j.options.mode,content:Iu(j.options,j.replaceVariables,De.Ay.disableSanitizeHtml)});if((0,Sd.A)(()=>{const{options:Ke,replaceVariables:Ge}=j,nt=Iu(Ke,Ge,De.Ay.disableSanitizeHtml);(nt!==ve.content||Ke.mode!==ve.mode)&&Ie({mode:Ke.mode,content:nt})},100,[j]),ve.mode===_r.Code){const Ke=j.options.code??Vl;return v.createElement(vc.B,{key:`${Ke.showLineNumbers}/${Ke.showMiniMap}`,value:ve.content,language:Ke.language??Vl.language,width:j.width,height:j.height,containerStyles:ce.codeEditorContainer,showMiniMap:Ke.showMiniMap,showLineNumbers:Ke.showLineNumbers,readOnly:!0})}return v.createElement(ue.E,{autoHeightMin:"100%",className:ce.containStrict},v.createElement(rf(),{allowRerender:!0,html:ve.content,className:ce.markdown,"data-testid":"TextPanel-converted-content"}))}function Iu(j,ce,ve){let{mode:Ie,content:Ke}=j;if(!Ke)return" ";switch(Ke=ce(Ke,{},j.code?.language==="json"?"json":"html"),Ie){case _r.Code:break;case _r.HTML:ve||(Ke=Mi.sQ.sanitizeTextPanelContent(Ke));break;case _r.Markdown:default:Ke=(0,of.P)(Ke,{noSanitize:ve})}return Ke}const cf=j=>({codeEditorContainer:(0,G.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${j.colors.background.primary};
    }
  `,markdown:(0,G.cx)("markdown-html",(0,G.css)`
      height: 100%;
    `),containStrict:(0,G.css)({contain:"strict"})});var df=e(70713),uf=e(99544);const gl=({value:j,onChange:ce,context:ve})=>{const Ie=(0,v.useMemo)(()=>ve.options?.mode??_r.Markdown,[ve]),Ke=(0,le.of)(mf),Ge=()=>ve.getSuggestions?ve.getSuggestions().map(nt=>(0,uf.O)(nt)):[];return v.createElement("div",{className:(0,G.cx)(Ke.editorBox)},v.createElement(df.Ay,{disableHeight:!0},({width:nt})=>nt===0?null:v.createElement(vc.B,{value:j,onBlur:ce,onSave:ce,language:Ie,width:nt,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ge})))},mf=j=>({editorBox:(0,G.css)`
    label: editorBox;
    border: 1px solid ${j.colors.border.medium};
    border-radius: ${j.shape.radius.default};
    margin: ${j.spacing(.5)} 0;
    width: 100%;
  `}),ff=j=>{const ce=parseFloat(j.pluginVersion||"6.1");let ve=j.options;if(j.hasOwnProperty("content")&&j.hasOwnProperty("mode")){const Ke=j,Ge=Ke.content,nt=Ke.mode;delete Ke.content,delete Ke.mode,ce<7.1&&(ve={content:Ge,mode:nt})}return[_r.Code,_r.HTML,_r.Markdown].find(Ke=>Ke===ve.mode)||(ve={...ve,mode:_r.Markdown}),ve},gf=new x.m(Md).setPanelOptions(j=>{j.addRadio({path:"mode",name:"Mode",settings:{options:[{value:_r.Markdown,label:"Markdown"},{value:_r.HTML,label:"HTML"},{value:_r.Code,label:"Code"}]},defaultValue:Rc.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Ou).map(ce=>({value:ce,label:ce}))},defaultValue:Vl.language,showIf:ce=>ce.mode===_r.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Vl.showLineNumbers,showIf:ce=>ce.mode===_r.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Vl.showMiniMap,showIf:ce=>ce.mode===_r.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:gl,defaultValue:Rc.content})}).setMigrationHandler(ff);var pf=e(41260),hf=e(18282);class Au{getSuggestionsForData(ce){const{dataSummary:ve}=ce;if(!ve.hasTimeField||!ve.hasNumberField||ve.rowCountTotal<2)return;const Ie=ce.getListAppender({name:Ts.m.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:pt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ge=>{Ge.fieldConfig?.defaults.custom?.drawStyle!==pt.GR.Bars&&(Ge.fieldConfig.defaults.custom.lineWidth=Math.max(Ge.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ke=100;if(Ie.append({name:Ts.m.LineChart}),ve.rowCountMax<200&&Ie.append({name:Ts.m.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:pt.dx.Smooth}},overrides:[]}}),ve.numberFieldCount===1){Ie.append({name:Ts.m.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ie.append({name:Ts.m.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Hn.Y.ContinuousGrYlRd},custom:{gradientMode:pt.on.Scheme,lineInterpolation:pt.dx.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ve.rowCountMax<Ke&&(Ie.append({name:Ts.m.BarChart,fieldConfig:{defaults:{custom:{drawStyle:pt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:pt.on.Hue}},overrides:[]}}),Ie.append({name:Ts.m.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Hn.Y.ContinuousGrYlRd},custom:{drawStyle:pt.GR.Bars,fillOpacity:90,lineWidth:1,gradientMode:pt.on.Scheme}},overrides:[]}}));return}Ie.append({name:Ts.m.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:pt.gs.Normal,group:"A"}}},overrides:[]}}),Ie.append({name:Ts.m.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:pt.gs.Percent,group:"A"}}},overrides:[]}}),ve.rowCountTotal/ve.numberFieldCount<Ke&&(Ie.append({name:Ts.m.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:pt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:pt.on.Hue,stacking:{mode:pt.gs.Normal,group:"A"}}},overrides:[]}}),Ie.append({name:Ts.m.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:pt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:pt.on.Hue,stacking:{mode:pt.gs.Percent,group:"A"}}},overrides:[]}}))}}function vf(j){const ce=(0,be.UA)().getCurrent()?.getPanelById(j);if(ce){const ve=ce.transformations?[...ce.transformations]:[];return ve.push({id:hf.F.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:ve}}}const Ef=({data:j,timeRange:ce,timeZone:ve,width:Ie,height:Ke,options:Ge,fieldConfig:nt,onChangeTimeRange:gt,replaceVariables:vt,id:bt})=>{const{sync:Rt,canAddAnnotations:Lt,onThresholdsChange:Nt,canEditThresholds:St,showThresholds:Qt,dataLinkPostProcessor:Zt,eventBus:jt}=(0,Ma.d2)(),Yt=Ge.orientation===pt.wV.Vertical,tn=(0,v.useMemo)(()=>Lo(j.series,De.config.theme2,ce),[j.series,ce]),Pn=(0,v.useMemo)(()=>Po(Ge.timezone,ve),[Ge.timezone,ve]),ln=(0,v.useMemo)(()=>{if(tn?.length&&tn.every(Sn=>Sn.meta?.type===pf.m.TimeSeriesLong)){const Sn=vf(bt);return{message:"Long data must be converted to wide",suggestions:Sn?[Sn]:void 0}}},[tn,bt]),Zn=!!(Lt&&Lt()),Nn=!!De.config.featureToggles.newVizTooltips,[zn,Aa]=(0,v.useState)(null),ma=(0,v.useCallback)(()=>Rt?.()===Rs.y.Tooltip,[]),Da=(0,v.useCallback)(()=>Rt?.()!==Rs.y.Off,[]);return!tn||ln?v.createElement(da.a,{panelId:bt,message:ln?.message,fieldConfig:nt,data:j,needsTimeField:!0,needsNumberField:!0,suggestions:ln?.suggestions}):v.createElement(go,{frames:tn,structureRev:j.structureRev,timeRange:ce,timeZone:Pn,width:Ie,height:Ke,legend:Ge.legend,options:Ge,replaceVariables:vt,dataLinkPostProcessor:Zt},(Sn,wn)=>v.createElement(v.Fragment,null,v.createElement(Mr.Z,{config:Sn}),v.createElement(ko.K,{config:Sn,sync:Da,eventBus:jt,frame:wn}),Ge.tooltip.mode===pt.$N.None||v.createElement(v.Fragment,null,Nn?v.createElement(vs.xl,{config:Sn,hoverMode:Ge.tooltip.mode===pt.$N.Single?vs.b3.xOne:vs.b3.xAll,queryZoom:gt,clientZoom:!0,syncTooltip:ma,render:(Ln,Wa,Za,ds=!1,la,ha,as)=>{if(Zn&&ha!=null){Aa(ha),la();return}const Ps=()=>{let Ms=Ln.posToVal(Ln.cursor.left,"x");Aa({from:Ms,to:Ms}),la()};return v.createElement(bo.k,{frames:tn,seriesFrame:wn,dataIdxs:Wa,seriesIdx:Za,mode:as?pt.$N.Multi:Ge.tooltip.mode,sortOrder:Ge.tooltip.sort,isPinned:ds,annotate:Zn?Ps:void 0,scrollable:Co(Ge.tooltip)})},maxWidth:Ge.tooltip.maxWidth,maxHeight:Ge.tooltip.maxHeight}):v.createElement(v.Fragment,null,v.createElement(Ho.j,{config:Sn,onZoom:gt,withZoomY:!0}),v.createElement(Cs.T,{frames:tn,data:wn,config:Sn,mode:Ge.tooltip.mode,sortOrder:Ge.tooltip.sort,sync:Rt,timeZone:ve}))),!Yt&&Nn?v.createElement(fi.W,{annotations:j.annotations??[],config:Sn,timeZone:ve,newRange:zn,setNewRange:Aa}):!Yt&&j.annotations&&v.createElement(mi,{annotations:j.annotations,config:Sn,timeZone:ve}),Nn?void 0:Zn&&!Yt?v.createElement(Hi,{data:wn,timeZone:ve,config:Sn},({startAnnotating:Ln})=>v.createElement(Ft,{data:wn,config:Sn,timeZone:ve,replaceVariables:vt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Wa,Za)=>{Za&&Ln({coords:Za.coords})}}]}]})):v.createElement(Ft,{data:wn,frames:tn,config:Sn,timeZone:ve,replaceVariables:vt,defaultItems:[]}),j.annotations&&!Yt&&v.createElement(Xn,{visibleSeries:ra(Sn,tn),config:Sn,exemplars:j.annotations,timeZone:ve}),(St&&Nt||Qt)&&!Yt&&v.createElement(Ks,{config:Sn,fieldConfig:nt,onThresholdsChange:St?Nt:void 0}),v.createElement(ja,{config:Sn,onChangeTimeRange:gt})))};var xd=e(91410),yf=e(20333);const bf=({value:j,onChange:ce})=>{const ve=(0,le.of)(Od);(!j||j.length<1)&&(j=[""]);const Ie=()=>{ce([...j,xd.g$.default])},Ke=nt=>{const gt=j.slice();gt.splice(nt,1),ce(gt)},Ge=(nt,gt)=>{const vt=j.slice();vt[nt]=gt??xd.g$.default,vt.length===0||vt.length===1&&vt[0]===""?ce(void 0):ce(vt)};return v.createElement("div",null,j.map((nt,gt)=>v.createElement("div",{className:ve.wrapper,key:`${gt}.${nt}`},v.createElement("span",{className:ve.first},v.createElement(yf.U,{onChange:vt=>Ge(gt,vt),includeInternal:!0,value:nt??xd.g$.default})),gt===j.length-1?v.createElement(ti.K,{name:"plus",onClick:Ie,tooltip:"Add timezone"}):v.createElement(ti.K,{name:"times",onClick:()=>Ke(gt),tooltip:"Remove timezone"}))))},Od=j=>({wrapper:(0,G.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,G.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var Ru=e(50082),Df=e(74856),Pf=e(38477),Cf=e(45199),Tf=e(32023),Lu=e(68706);let Lc=null;const Sf=(j,ce,ve,Ie)=>{if(ce==="graph"&&ve.angular){const{fieldConfig:Ke,options:Ge,annotations:nt}=Mf({...ve.angular,fieldConfig:Ie,panel:j});return nt?.length>0&&Af(nt),j.fieldConfig=Ke,j.alert=ve.angular.alert,Ge}return Of(j),{}};function Mf(j){let ce=[];const ve=j.fieldConfig?.overrides??[],Ie=j.yaxes??[];let Ke=Bu(Ie[0]);j.fieldConfig?.defaults&&(Ke={...j.fieldConfig?.defaults,...Ke});const Ge={fill:j.dashes?"dash":"solid",dash:[j.dashLength??10,j.spaceLength??10]};if(j.aliasColors)for(const Lt of Object.keys(j.aliasColors)){const Nt=j.aliasColors[Lt];Nt&&ve.push({matcher:{id:Vr.Ct.byName,options:Lt},properties:[{id:_n.uo.Color,value:{mode:Hn.Y.Fixed,fixedColor:Nt}}]})}let nt=!1;if(j.seriesOverrides?.length)for(const Lt of j.seriesOverrides){if(!Lt.alias)continue;const St={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Lt.alias)?Vr.Ct.byRegexp:Vr.Ct.byName,options:Lt.alias},properties:[]};let Qt;for(const Zt of Object.keys(Lt)){const jt=Lt[Zt];switch(Zt){case"alias":case"$$hashKey":break;case"yaxis":if(jt===2){const Yt=Bu(Ie[1]);xf(Ke,Yt,St.properties)}break;case"fill":St.properties.push({id:"custom.fillOpacity",value:jt*10});break;case"fillBelowTo":nt=!0,St.properties.push({id:"custom.fillBelowTo",value:jt});break;case"fillGradient":jt&&(St.properties.push({id:"custom.fillGradient",value:"opacity"}),St.properties.push({id:"custom.fillOpacity",value:jt*10}));break;case"points":St.properties.push({id:"custom.showPoints",value:jt?pt.yL.Always:pt.yL.Never});break;case"bars":jt?(St.properties.push({id:"custom.drawStyle",value:pt.GR.Bars}),St.properties.push({id:"custom.fillOpacity",value:100})):St.properties.push({id:"custom.drawStyle",value:pt.GR.Line});break;case"lines":jt?St.properties.push({id:"custom.drawStyle",value:"line"}):St.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":St.properties.push({id:"custom.lineWidth",value:jt});break;case"pointradius":St.properties.push({id:"custom.pointSize",value:2+jt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Qt||(Qt={fill:Ge.fill,dash:[...Ge.dash]}),Zt){case"dashLength":Qt.dash[0]=jt;break;case"spaceLength":Qt.dash[1]=jt;break;case"dashes":Qt.fill=jt?"dash":"solid";break}break;case"stack":St.properties.push({id:"custom.stacking",value:If(jt)});break;case"color":St.properties.push({id:"color",value:{fixedColor:jt,mode:Hn.Y.Fixed}});break;case"transform":St.properties.push({id:"custom.transform",value:jt==="negative-Y"?pt.NU.NegativeY:pt.NU.Constant});break;default:console.log("Ignore override migration:",Lt.alias,Zt,jt)}}Qt&&St.properties.push({id:"custom.lineStyle",value:Qt}),St.properties.length&&ve.push(St)}const gt=Ke.custom??{};gt.drawStyle=j.bars?pt.GR.Bars:j.lines?pt.GR.Line:pt.GR.Points,j.points?(gt.showPoints=pt.yL.Always,(0,N.isNumber)(j.pointradius)&&(gt.pointSize=2+j.pointradius*2)):gt.drawStyle!==pt.GR.Points&&(gt.showPoints=pt.yL.Never),gt.lineWidth=j.linewidth,Ge.fill!=="solid"&&(gt.lineStyle=Ge),nt?gt.fillOpacity=35:(0,N.isNumber)(j.fill)&&(gt.fillOpacity=j.fill*10),(0,N.isNumber)(j.fillGradient)&&j.fillGradient>0&&(gt.gradientMode=pt.on.Opacity,gt.fillOpacity=j.fillGradient*10),gt.spanNulls=j.nullPointMode===gc.UW.Ignore,j.steppedLine&&(gt.lineInterpolation=pt.dx.StepAfter),gt.drawStyle===pt.GR.Bars&&(gt.fillOpacity=100),j.stack&&(gt.stacking={mode:j.percentage?pt.gs.Percent:pt.gs.Normal,group:fo.S.stacking.group},j.percentage&&j.yaxis&&(delete Ke.min,delete Ke.max,Ke.decimals===0&&delete Ke.decimals)),Ke.custom=(0,N.omitBy)(gt,N.isNil),Ke.nullValueMode=j.nullPointMode;const vt={legend:{displayMode:pt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:pt.$N.Single,sort:pt.xB.None}},bt=j.legend;if(bt){if(bt.show?vt.legend.displayMode=bt.alignAsTable?pt.lm.Table:pt.lm.List:vt.legend.showLegend=!1,bt.rightSide&&(vt.legend.placement="right"),j.legend.values){const Lt=(0,N.pickBy)(j.legend);vt.legend.calcs=Rd(Lt)}j.legend.sideWidth&&(vt.legend.width=j.legend.sideWidth),bt.hideZero&&ve.push(Uu(ai.gy.allIsZero)),bt.hideEmpty&&ve.push(Uu(ai.gy.allIsNull))}j.timeRegions?.length&&j.timeRegions.map((Nt,St)=>({name:`T${St}`,color:Nt.colorMode!=="custom"?Nt.colorMode:Nt.fillColor,line:Nt.line,fill:Nt.fill,fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to})).forEach((Nt,St)=>{const Qt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[j.panel.id]},iconColor:Nt.fillColor??Nt.color,name:`Time region for panel ${j.panel.title}${St>0?` ${St}`:""}`,target:{queryType:Lu.nj.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to,timezone:"utc"}}};Nt.fill?ce.push(Qt):Nt.line&&(Qt.iconColor=Nt.lineColor??"white",ce.push(Qt))});const Rt=j.tooltip;if(Rt&&(Rt.shared!==void 0&&(vt.tooltip.mode=Rt.shared?pt.$N.Multi:pt.$N.Single),Rt.sort!==void 0&&Rt.shared))switch(Rt.sort){case 1:vt.tooltip.sort=pt.xB.Ascending;break;case 2:vt.tooltip.sort=pt.xB.Descending;break;default:vt.tooltip.sort=pt.xB.None}if(j.thresholds&&j.thresholds.length>0){let Lt=[],Nt=!1,St=!1;const Qt=j.thresholds.sort((jt,Yt)=>jt.value>Yt.value?1:-1);for(let jt=0;jt<Qt.length;jt++){const Yt=Qt[jt],tn=Qt.length>jt+1?Qt[jt+1]:null;Yt.fill&&(Nt=!0),Yt.line&&(St=!0),Yt.op==="gt"&&Lt.push({value:Yt.value,color:Id(Yt)}),Yt.op==="lt"&&(Lt.length===0&&Lt.push({value:-1/0,color:Id(Yt)}),tn&&tn.op==="gt"&&tn.value>Yt.value?Lt.push({value:Yt.value,color:"transparent"}):tn&&tn.op==="lt"?Lt.push({value:Yt.value,color:Id(tn)}):Lt.push({value:Yt.value,color:"transparent"}))}Lt.length>0&&Lt[0].value!==-1/0&&Lt.unshift({color:"transparent",value:-1/0});let Zt=Nt?pt.Ly.Area:pt.Ly.Line;St&&Nt&&(Zt=pt.Ly.LineAndArea),Ke.custom.thresholdsStyle={mode:Zt},Ke.thresholds={mode:Ru.O.Absolute,steps:Lt}}return j.xaxis&&j.xaxis.show===!1&&j.xaxis.mode==="time"&&ve.push({matcher:{id:Vr.Ct.byType,options:dn.PU.time},properties:[{id:"custom.axisPlacement",value:pt.vM.Hidden}]}),{fieldConfig:{defaults:(0,N.omitBy)(Ke,N.isNil),overrides:ve},options:vt,annotations:ce}}function Id(j){return j.colorMode==="critical"?"red":j.colorMode==="warning"?"orange":j.colorMode==="custom"?j.fillColor||j.lineColor:"red"}function Bu(j){if(!j)return{};const ce={axisPlacement:j.show?pt.vM.Auto:pt.vM.Hidden};if(j.label&&(ce.axisLabel=j.label),j.logBase){const ve=j.logBase;(ve===2||ve===10)&&(ce.scaleDistribution={type:pt.L4.Log,log:ve})}return(0,N.omitBy)({unit:j.format,decimals:Ad(j.decimals),min:Ad(j.min),max:Ad(j.max),custom:ce},N.isNil)}function xf(j,ce,ve){for(const[Ge,nt]of Object.entries(ce))Ge!=="custom"&&nt!==j[Ge]&&ve.push({id:Ge,value:nt});ve.push({id:"custom.axisPlacement",value:pt.vM.Right});const Ie=j.custom??{},Ke=ce.custom??{};for(const[Ge,nt]of Object.entries(Ke))nt!==Ie[Ge]&&ve.push({id:`custom.${Ge}`,value:nt})}function Ad(j){if((0,N.isNumber)(j))return j;if((0,N.isString)(j)){const ce=Number(j);if(!isNaN(ce))return ce}}function Rd(j){const ce=[];for(const ve of Object.keys(j)){const Ie=ai.AS.getIfExists(ve);Ie&&ce.push(Ie.id)}return ce}function Of(j){j.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(j.fieldConfig.defaults.custom.hideFrom.viz=j.fieldConfig.defaults.custom.hideFrom.graph,delete j.fieldConfig.defaults.custom.hideFrom.graph),j.fieldConfig?.overrides&&(j.fieldConfig.overrides=j.fieldConfig.overrides.map(ce=>(ce.properties=ce.properties.map(ve=>(ve.id==="custom.hideFrom"&&ve.value.graph&&(ve.value.viz=ve.value.graph,delete ve.value.graph),ve)),ce)))}function Uu(j){return{matcher:{id:Vr.Ct.byValue,options:{reducer:j,op:pt.zT.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function If(j){const ce=fo.S.stacking?.group;return{mode:j?pt.gs.Normal:pt.gs.None,group:(0,N.isString)(j)?j:ce}}function Af(j){const ce=window.__grafanaSceneContext;if(ce instanceof Cf.H$){const Ie=Tf.b4.getDataLayers(ce),Ke=[...Ie.state.annotationLayers];for(let Ge of j){const nt=new Pf.g({key:`annotations-${Ge.name}`,query:Ge,name:Ge.name,isEnabled:Ge.enable,isHidden:Ge.hide});Ke.push(nt)}Ie.setState({annotationLayers:Ke});return}const ve=(0,be.UA)().getCurrent();ve&&(ve.annotations.list=[...ve.annotations.list,...j],Lc==null&&(Lc=setTimeout(()=>{Lc=null,(0,Df.jG)().refreshTimeModel()})))}const Rf=new x.m(Ef).setPanelChangeHandler(Sf).useFieldConfig((0,fo.V)(fo.S)).setPanelOptions(j=>{Cn.D(j,!1,!0),In.H(j),j.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:bf,defaultValue:void 0})}).setSuggestionsSupplier(new Au).setDataSupport({annotations:!0,alertStates:!0});var Bc=e(92599),Nu=e(35090);const Uc={wrapper:(0,G.css)`
    height: 100%;
    overflow: scroll;
  `},Lf=({data:j,options:ce})=>{const ve=(0,v.createRef)(),Ie=(0,v.useMemo)(()=>(0,Nu.L)(j.series[0]),[j.series]),Ke=(0,vi.A)(async()=>await(0,eu.l)().get(j.request?.targets[0].datasource?.uid));return!j||!j.series.length||!Ie?v.createElement("div",{className:"panel-empty"},v.createElement("p",null,"No data found in response")):v.createElement("div",{className:Uc.wrapper},v.createElement("div",{ref:ve}),v.createElement(Bc.V,{dataFrames:j.series,scrollElementClass:Uc.wrapper,traceProp:Ie,datasource:Ke.value,topOfViewRef:ve,createSpanLink:ce.createSpanLink,focusedSpanId:ce.focusedSpanId,createFocusSpanLink:ce.createFocusSpanLink}))};class Bf{getListWithDefaults(ce){return ce.getListAppender({name:Ts.m.Trace,pluginId:"traces"})}getSuggestionsForData(ce){!ce.data||!ce.data.series[0]||ce.data.series[0].meta?.preferredVisualisationType==="trace"&&this.getListWithDefaults(ce).append({name:Ts.m.Trace,score:Ca.nQ.Best})}}const Uf=new x.m(Lf).setSuggestionsSupplier(new Bf);var Nf=e(85200),wf=e(40458);const Ff=({data:j,timeRange:ce,timeZone:ve,width:Ie,height:Ke,options:Ge,fieldConfig:nt,replaceVariables:gt,id:vt})=>{const bt=!!S.$.featureToggles.newVizTooltips,{dataLinkPostProcessor:Rt}=(0,Ma.d2)(),Lt=Ge.xField??j.series[0].fields.find(Qt=>Qt.type===dn.PU.number)?.name,Nt=(Qt,Zt,jt)=>(Zt={...Zt,x:Nf.sJ.get(Vr.Ct.byName).get(Lt)},(0,wf.m)(Qt,Zt)),St=(0,v.useMemo)(()=>{if(j.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:j.series};let Qt=j.series,Zt;if(Ge.xField){if(Zt=(0,Ao.findFieldIndex)(Ge.xField,Qt[0]),Zt==null)return{warning:"Unable to find field: "+Ge.xField,frames:j.series}}else if(Zt=Qt[0].fields.findIndex(jt=>jt.type===dn.PU.number),Zt===-1)return{warning:"No numeric fields found for X axis",frames:Qt};if(Zt!=null){const jt=Qt[0].fields[Zt];if(jt.type===dn.PU.number&&!(0,Tr.g2)(jt.values))return{warning:"Values must be in ascending order",frames:Qt}}return{frames:Lo(Qt,S.$.theme2,void 0,Zt)}},[j.series,Ge.xField]);return St.warning||!St.frames?v.createElement(da.a,{panelId:vt,fieldConfig:nt,data:j,message:St.warning,needsNumberField:!0}):v.createElement(go,{frames:St.frames,structureRev:j.structureRev,timeRange:ce,timeZone:ve,width:Ie,height:Ke,legend:Ge.legend,options:Ge,preparePlotFrame:Nt,replaceVariables:gt,dataLinkPostProcessor:Rt},(Qt,Zt)=>v.createElement(v.Fragment,null,v.createElement(Mr.Z,{config:Qt}),Ge.tooltip.mode!==pt.$N.None&&v.createElement(v.Fragment,null,bt?v.createElement(vs.xl,{config:Qt,hoverMode:Ge.tooltip.mode===pt.$N.Single?vs.b3.xOne:vs.b3.xAll,render:(jt,Yt,tn,Pn=!1)=>v.createElement(bo.k,{frames:St.frames,seriesFrame:Zt,dataIdxs:Yt,seriesIdx:tn,mode:Ge.tooltip.mode,sortOrder:Ge.tooltip.sort,isPinned:Pn,scrollable:Co(Ge.tooltip)}),maxWidth:Ge.tooltip.maxWidth,maxHeight:Ge.tooltip.maxHeight}):v.createElement(Cs.T,{frames:St.frames,data:Zt,config:Qt,mode:Ge.tooltip.mode,sortOrder:Ge.tooltip.sort,timeZone:ve}))))};class Wf{getSuggestionsForData(ce){const{dataSummary:ve}=ce;return ve.numberFieldCount<2||ve.rowCountTotal<2||ve.rowCountTotal<2?void 0:ce.getListAppender({name:Ts.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:pt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ke=>{Ke.fieldConfig?.defaults.custom?.drawStyle!==pt.GR.Bars&&(Ke.fieldConfig.defaults.custom.lineWidth=Math.max(Ke.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const Kf=new x.m(Ff).useFieldConfig((0,fo.V)(fo.S,!1)).setPanelOptions(j=>{const ce=["X Axis"];j.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:ce,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:ve=>ve.type===dn.PU.number}}),Cn.D(j,!1,!0),In.H(j)}).setSuggestionsSupplier(new Wf),$f=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],wu=()=>{const j=(0,le.of)(Vf);return v.createElement("div",{className:j.container},v.createElement("h1",{className:j.title},"Welcome to Grafana"),v.createElement("div",{className:j.help},v.createElement("h3",{className:j.helpText},"Need help?"),v.createElement("div",{className:j.helpLinks},$f.map((ce,ve)=>v.createElement("a",{key:`${ce.label}-${ve}`,className:j.helpLink,href:`${ce.href}?utm_source=grafana_gettingstarted`},ce.label)))))},Vf=j=>({container:(0,G.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${j.spacing(3)};

      ${j.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${j.breakpoints.down("sm")} {
        padding: 0 ${j.spacing(1)};
      }
    `,title:(0,G.css)`
      margin-bottom: 0;

      ${j.breakpoints.down("lg")} {
        margin-bottom: ${j.spacing(1)};
      }

      ${j.breakpoints.down("md")} {
        font-size: ${j.typography.h2.fontSize};
      }
      ${j.breakpoints.down("sm")} {
        font-size: ${j.typography.h3.fontSize};
      }
    `,help:(0,G.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,G.css)`
      margin-right: ${j.spacing(2)};
      margin-bottom: 0;

      ${j.breakpoints.down("md")} {
        font-size: ${j.typography.h4.fontSize};
      }

      ${j.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,G.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,G.css)`
      margin-right: ${j.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${j.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),_f=new x.m(wu).setNoPadding(),Qf={"core:plugin/graphite":async()=>await e.e(6134).then(e.bind(e,8652)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(2651),e.e(3766)]).then(e.bind(e,92651)),"core:plugin/dashboard":async()=>await e.e(2058).then(e.bind(e,92058)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(2261),e.e(1717)]).then(e.bind(e,82261)),"core:plugin/opentsdb":async()=>await e.e(747).then(e.bind(e,24989)),"core:plugin/grafana":async()=>await e.e(3648).then(e.bind(e,62391)),"core:plugin/influxdb":async()=>await Promise.all([e.e(6224),e.e(9404)]).then(e.bind(e,23912)),"core:plugin/loki":async()=>await Promise.all([e.e(629),e.e(4417),e.e(1477)]).then(e.bind(e,26798)),"core:plugin/mixed":async()=>await e.e(2513).then(e.bind(e,12870)),"core:plugin/mysql":async()=>await Promise.all([e.e(6224),e.e(6918)]).then(e.bind(e,18715)),"core:plugin/grafana-postgresql-datasource":async()=>await Promise.all([e.e(6224),e.e(8651)]).then(e.bind(e,38254)),"core:plugin/mssql":async()=>await Promise.all([e.e(6224),e.e(9040)]).then(e.bind(e,56694)),"core:plugin/prometheus":async()=>await Promise.all([e.e(629),e.e(6712),e.e(9546)]).then(e.bind(e,86712)),"core:plugin/alertmanager":async()=>await e.e(4737).then(e.bind(e,27013)),"core:plugin/text":y,"core:plugin/timeseries":C,"core:plugin/trend":D,"core:plugin/state-timeline":a,"core:plugin/status-history":h,"core:plugin/candlestick":o,"core:plugin/graph":async()=>await Promise.all([e.e(9362),e.e(8068)]).then(e.bind(e,229)),"core:plugin/xychart":async()=>S.$.featureToggles.autoMigrateXYChartPanel?await e.e(3772).then(e.bind(e,80983)):await Promise.all([e.e(707),e.e(5594)]).then(e.bind(e,89598)),"core:plugin/geomap":async()=>await Promise.all([e.e(1698),e.e(707),e.e(3928),e.e(190)]).then(e.bind(e,63928)),"core:plugin/canvas":async()=>await Promise.all([e.e(707),e.e(7523)]).then(e.bind(e,2064)),"core:plugin/dashlist":m,"core:plugin/alertlist":t,"core:plugin/annolist":n,"core:plugin/heatmap":async()=>await e.e(5857).then(e.bind(e,46369)),"core:plugin/table":P,"core:plugin/table-old":async()=>await e.e(8777).then(e.bind(e,78491)),"core:plugin/news":p,"core:plugin/live":u,"core:plugin/stat":Km,"core:plugin/datagrid":i,"core:plugin/debug":l,"core:plugin/flamegraph":d,"core:plugin/gettingstarted":c,"core:plugin/gauge":ud,"core:plugin/piechart":b,"core:plugin/bargauge":s,"core:plugin/barchart":r,"core:plugin/logs":E,"core:plugin/traces":f,"core:plugin/welcome":T,"core:plugin/nodeGraph":async()=>await Promise.all([e.e(1698),e.e(5511),e.e(7317)]).then(e.bind(e,68403)),"core:plugin/histogram":g};var Ld=e(81900),Nc=e(63770),Yf=e(52762),Jf=e(23482),Xf=e(21313),Zf=e(72635),qf=e(34796),eg=e.n(qf),tg=e(95093),ng=e.n(tg),ag=e(28848),Wu=e.n(ag),sg=e(40961),rg=e(8867),og=e(63329),ig=e(52594),lg=e(25213),cg=e(23546),dg=e(75091),ug=e(32975),mg=e(82611),fg=e(52845),Ku=e(29317),Xp=e(54087),Zp=e(80851),qp=e(32176),eh=e(31221),th=e(91520),nh=e(92275),ah=e(82013),sh=e(2341),rh=e(19538),gg=e(39954),pg=e(85858),hg=e(13303),vg=e(8984),Eg=e(91950),$u=e(31140),yg=e(78827),bg=e(68576),Dg=e(92247);const _l=vg;_l.PanelPlugin=x.m,_l.DataSourcePlugin=M.tD,_l.AppPlugin=O.hX,_l.DataSourceApi=M.mA;const Pg=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((j,ce)=>({...j,[ce]:{fakeDep:1}}),{}),Cg={"@emotion/css":G,"@emotion/react":Yf,"@grafana/data":gg,"@grafana/runtime":hg,"@grafana/slate-react":Ku.Ay,"@grafana/ui":_l,"@kusto/monaco-kusto":Jf,"app/core/app_events":{default:xo.lE,__useDefault:!0},"app/core/config":{default:De.Ay,__useDefault:!0},"app/core/core":{appEvents:xo.lE,contextSrv:xo.TP},"app/core/services/backend_srv":{BackendSrv:Nr.Mf,getBackendSrv:Nr.AI},"app/core/table_model":{default:Eg.A,__useDefault:!0},"app/core/time_series":{default:$u.A,__useDefault:!0},"app/core/time_series2":{default:$u.A,__useDefault:!0},"app/core/utils/datemath":pg,"app/core/utils/flatten":yg,"app/core/utils/kbn":{default:bg.A,__useDefault:!0},"app/core/utils/ticks":Dg,"app/features/dashboard/impression_store":{impressions:Kr.A},d3:Xf,emotion:G,i18next:Zf,jquery:{default:eg(),__useDefault:!0},...Pg,lodash:{default:L(),__useDefault:!0},moment:{default:ng(),__useDefault:!0},prismjs:Wu(),react:v,"react-dom":sg,"react-inlinesvg":rg,"react-redux":og,"react-router-dom":ig,"react-router":lg,redux:cg,rxjs:dg,"rxjs/operators":ug,slate:mg.Ay,"slate-plain-serializer":fg.A,"slate-react":Ku.Ay};function zl({url:j,source:ce,transformSourceMapURL:ve=!1,transformAssets:Ie=!0}){const Ke=j.split("/public/plugins/"),Ge=Ke[0],nt=Ke[1].split("/")[0];let gt=ce;return Ie&&(gt=gt.replace(/(\/?)(public\/plugins)/g,`${Ge}/$2`),gt=gt.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ge}/public/$2$3`)),ve&&(gt=gt.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ge}/public/plugins/${nt}/$2.map`)),gt}var Bd=e(45179),el=e(94429);async function Tg(j,ce,ve){const Ie=await j(ce,ve),Ke=Ie.headers.get("content-type")||"";if(Bd.Bu.test(Ke)){let nt=await Ie.text();if((0,el.OD)(Ie.url)){const gt=zl({url:Ie.url,source:nt});return new Response(new Blob([gt],{type:"text/javascript"}))}return new Response(new Blob([nt],{type:"text/javascript"}))}return Ie}function Sg(j,ce,ve){const Ie=ce.endsWith("module.js")&&!(0,el.OD)(ce);try{const Ke=j.apply(this,[ce,ve]),Ge=xg(Ke);return Ie?(0,Ld.ni)(Ge):Ge}catch{return Bd.$b.test(ce)?`${S.$.appSubUrl??""}/public/${ce}`:(console.log(`SystemJS: failed to resolve '${ce}'`),ce)}}function Mg(j,ce){if(ce.endsWith(".css")&&!j){const Ie=Nc.z.get(ce)?.default;Ie&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Ie])}}function xg(j){return j.startsWith(`${Bd.XV}:`)?j:(j.endsWith("!")&&(j=j.slice(0,-1)),["css","js","json","wasm"].some(Ie=>j.endsWith(Ie))?j:j+".js")}var Og=e(22055),Ig=e(6262),Vu=e(27716),_u=e(35853);function Ag(j){const ce=new URL(window.location.href),ve=new URL(j);return ce.host===ve.host}async function Rg(j,ce,ve){let Ie="";if(Ag(j)?(Ie=await(await fetch(j)).text(),Ie=zl({url:j,source:Ie,transformSourceMapURL:!0,transformAssets:!1})):(0,el.OD)(j)&&(Ie=await(await fetch(j)).text(),Ie=zl({url:j,source:Ie,transformSourceMapURL:!0,transformAssets:!0})),Ie.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Ie=zu(Ie),ve.evaluate(Ie)}async function Lg(j){if((0,el.OD)(j.module)){const ce=j.module;let Ie=await(await fetch(ce)).text();return Ie=zl({url:ce,source:Ie,transformSourceMapURL:!0,transformAssets:!0}),Ie}else{let ce=(0,el.Av)(j.module);const ve=(0,Ld.ni)(ce);let Ke=await(await fetch(ve)).text();return Ke=zl({url:ve,source:Ke,transformSourceMapURL:!0,transformAssets:!1}),Ke=zu(Ke),Ke}}function zu(j){return j.replace(/window\.location/gi,"window.locationSandbox")}function Bg(j){j.evaluate(`${_u.V.toString()};${_u.V.name}()`)}const Bi=["iframe"];var ku=e(7077),Ug=e(29505),wc=e(43429),Ng=e(34867);const wg=!!S.$.featureToggles.frontendSandboxMonitorOnly;function Fg(j){return!!j&&typeof j=="object"&&j?.hasOwnProperty("plugin")}function oh(j){throw new Error(`Unexpected object: ${j}. This should never happen.`)}const Ud=(0,Ng.DW)("sandbox",{monitorOnly:String(wg)});function Wg(j){return j instanceof v.Component}function Jo(j,ce){Ud.logWarning(j,ce)}function kl(j,ce){Ud.logError(j,ce)}function Hu(j,ce){Ud.logInfo(j,ce)}async function Kg({isAngular:j,pluginId:ce}){if(!S.$.featureToggles.pluginsFrontendSandbox||j||location.search.includes("nosandbox")&&S.$.buildInfo.env==="development"||S.$.disableFrontendSandboxForPlugins.includes(ce))return!1;const Ke=await(0,Vu.x)(ce);return!(Ke.type===wc.QE.app&&Ke.signatureType===wc.kv.grafana)}function $g(j){return j?.constructor?.name==="RegExp"}function Nd(j){return j&&($g(j)&&(0,ku.U)(j)?new RegExp(j):Array.isArray(j)?j.map(Nd):typeof j=="object"?Object.keys(j).reduce((ce,ve)=>(Reflect.set(ce,ve,Nd(Reflect.get(j,ve))),ce),{}):j)}const Ui=Symbol.for("@@SANDBOX_LIVE_VALUE"),ju=!!S.$.featureToggles.frontendSandboxMonitorOnly;function Vg(j,ce){const ve=Reflect.get(j,"nodeName");if(ve==="body"||j===document.body)return document.body;if(ve==="head"||j===document.head||j===document.documentElement)return j;if(Bi.includes(ve)&&(Jo("<"+ve+"> is not allowed in sandboxed plugins",{pluginId:ce,param:ve}),!ju))throw new Error("<"+ve+"> is not allowed in sandboxed plugins");if(jg(j,ce)||j.parentNode===document.body||j.closest("#reactRoot")===null||ju)return j;{const Ie=document.createElement(ve);return Ie.dataset.grafanaPluginSandboxElement="true",Ie}}function _g(j){if(typeof j=="object"&&j instanceof Element)try{return j.nodeName!==void 0}catch{return!1}return!1}function zg(j){const ce=Reflect.get(j,"style");Object.hasOwn(ce,Ui)||Reflect.defineProperty(ce,Ui,{})}function wd(j){j&&(Array.isArray(j)?(j.forEach(wd),Gu(j)):typeof j=="object"&&(Object.values(j).forEach(wd),Gu(j)))}function Gu(j){if(j)return Object.hasOwn(j,Ui)||Reflect.defineProperty(j,Ui,{}),j}function kg(j){j&&(Object.hasOwn(j,Ui)||((0,ku.U)(j)&&!(j instanceof Function)&&(Wg(j)||j instanceof M.mA||j instanceof Ug.f5)?Reflect.defineProperty(j,Ui,{}):j===Wu().languages&&Object.defineProperty(j,Ui,{})))}function Hg(j){return Object.hasOwn(j,Ui)}function jg(j,ce){return!document.contains(j)||j.closest(`[data-plugin-sandbox=${ce}]`)!==null}let $o;function ih(){return $o||($o=document.createElement("div"),$o.setAttribute("id","grafana-plugin-sandbox-body"),$o.setAttribute("data-plugin-sandbox","true"),$o.dataset.pluginSandbox="sandboxed-plugin",$o.style.width="100%",$o.style.height="0%",$o.style.overflow="hidden",$o.style.top="0",$o.style.left="0",document.body.appendChild($o)),$o}let Qu=!1;function Gg(){Qu||(Qu=!0,Qg())}function Qg(){const j=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...ce){let ve=ce;try{ve=(0,N.cloneDeep)(ce)}catch(Ie){Jo("Error cloning args in window.history.replaceState",{error:String(Ie)})}return Reflect.apply(j,this,ve)},writable:!0,configurable:!0,enumerable:!1})}const io=new Map,ri=!!S.$.featureToggles.frontendSandboxMonitorOnly,Yu=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function Yg(){return io.size===0&&(Jg(io),Xg(io),Zg(io),np(io),tp(io),qg(io),ep(io),ap(io),sp(io),Ju(io),rp(io),ip(io)),io}function Fc(j,ce){return Jo(`Plugin ${ce.id} tried to set a sandboxed property`,{pluginId:ce.id,attrOrMethod:String(j),entity:"window"}),ri?j:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Jg(j){const ce=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const Ie of ce){const Ke=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,Ie);if(Ke){let Ge=function(nt,gt){const vt=gt.id;return Jo(`Plugin ${vt} tried to access iframe.${Ie}`,{pluginId:vt,attrOrMethod:Ie,entity:"iframe"}),ri?nt:()=>{throw new Error("iframe."+Ie+" is not allowed in sandboxed plugins")}};var ve=Ge;Ke.value&&j.set(Ke.value,Ge),Ke.set&&j.set(Ke.set,Ge),Ke.get&&j.set(Ke.get,Ge)}}}function Xg(j){const ce=Object.getOwnPropertyDescriptor(window,"console");if(ce?.value){let Ie=function(Ke,Ge){const nt=Ge.id;if(ri)return Ke;function gt(...vt){console.log(`[plugin ${nt}]`,...vt)}return{log:gt,warn:gt,error:gt,info:gt,debug:gt,table:gt}};var ve=Ie;j.set(ce.value,Ie)}ce?.set&&j.set(ce.set,Fc)}function Zg(j){function ce(Ie,Ke){const Ge=Ke.id;return Jo(`Plugin ${Ge} accessed window.alert`,{pluginId:Ge,attrOrMethod:"alert",entity:"window"}),ri?Ie:function(...nt){console.log(`[plugin ${Ge}]`,...nt)}}const ve=Object.getOwnPropertyDescriptor(window,"alert");ve?.value&&j.set(ve.value,ce),ve?.set&&j.set(ve.set,Fc)}function qg(j){function ce(Ie,Ke){const Ge=Ke.id;return function(...gt){for(const vt of gt){const bt=vt?.toLowerCase()||"";for(const Rt of Bi)if(bt.includes("<"+Rt)){if(Jo(`Plugin ${Ge} tried to set ${Rt} in innerHTML`,{pluginId:Ge,attrOrMethod:"innerHTML",param:Rt,entity:"HTMLElement"}),ri)continue;throw new Error("<"+Rt+"> is not allowed in sandboxed plugins")}}(0,N.isFunction)(Ie)&&Ie.apply(this,gt)}}const ve=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const Ie of ve)Ie?.set&&j.set(Ie.set,ce),Ie?.value&&j.set(Ie.value,ce)}function ep(j){function ce(Ie,Ke){const Ge=Ke.id;return function(gt,vt){if(gt&&Bi.includes(gt)&&(Jo(`Plugin ${Ge} tried to create ${gt}`,{pluginId:Ge,attrOrMethod:"createElement",param:gt,entity:"document"}),!ri))return document.createDocumentFragment();if((0,N.isFunction)(Ie))return Ie.apply(this,[gt,vt])}}const ve=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");ve?.value&&j.set(ve.value,ce)}function tp(j){function ce(Ge,nt){const gt=nt.id;return function(bt,Rt){const Lt=bt?.nodeName?.toLowerCase()||"";if(bt&&Bi.includes(Lt)&&(Jo(`Plugin ${gt} tried to insert ${Lt}`,{pluginId:gt,attrOrMethod:"insertChild",param:Lt,entity:"HTMLElement"}),!ri))return document.createDocumentFragment();if((0,N.isFunction)(Ge))return Ge.call(this,bt,Rt)}}function ve(Ge,nt){const gt=nt.id;return function(bt,Rt){const Lt=Rt?.nodeName?.toLowerCase()||"";if(Rt&&Bi.includes(Lt)&&(Jo(`Plugin ${gt} tried to insert ${Lt}`,{pluginId:gt,attrOrMethod:"insertAdjacentElement",param:Lt,entity:"HTMLElement"}),!ri))return document.createDocumentFragment();if((0,N.isFunction)(Ge))return Ge.call(this,bt,Rt)}}const Ie=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Ge of Ie)Ge?.value&&j.set(Ge.set,ce);const Ke=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");Ke?.value&&j.set(Ke.set,ve)}function np(j){function ce(Ge,nt){const gt=nt.id;return function(...bt){let Rt=bt;const Lt=bt?.filter(Nt=>!Bi.includes(Nt.nodeName.toLowerCase()));ri||(Rt=Lt),Rt.length!==Lt.length&&Jo(`Plugin ${gt} tried to append fobiddenElements`,{pluginId:gt,attrOrMethod:"append",param:bt?.filter(Nt=>Bi.includes(Nt.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,N.isFunction)(Ge)&&Ge.apply(this,Rt)}}function ve(Ge,nt,gt){const vt=nt.id;return function(Rt){const Lt=Rt?.nodeName?.toLowerCase()||"";if(Rt&&Bi.includes(Lt)&&(Jo(`Plugin ${vt} tried to append ${Lt}`,{pluginId:vt,attrOrMethod:"appendChild",param:Lt,entity:"HTMLElement"}),!ri))return document.createDocumentFragment();if(gt&&Rt&&Lt==="script"&&Rt instanceof HTMLScriptElement){Rg(Rt.src,nt,gt).then(()=>{Rt.onload?.call(Rt,new Event("load"))}).catch(Nt=>{Rt.onerror?.call(Rt,new ErrorEvent("error",{error:Nt}))});return}if((0,N.isFunction)(Ge))return Ge.call(this,Rt)}}const Ie=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Ge of Ie)Ge?.value&&j.set(Ge.value,ce);const Ke=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");Ke?.value&&j.set(Ke.value,ve)}function ap(j){const ce=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function ve(Ie){return function(...Ge){try{const nt=(0,N.cloneDeep)(Ge);(0,N.isFunction)(Ie)&&Ie.apply(this,nt)}catch{throw new Error("postMessage arguments are invalid objects")}}}ce?.value&&j.set(ce.value,ve)}function sp(j){const ce=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");ce?.get&&j.set(ce.get,()=>()=>window);const ve=["write"];for(const Ie of ve){const Ke=Object.getOwnPropertyDescriptor(Document.prototype,Ie);Ke?.set&&j.set(Ke.set,Fc),Ke?.value&&j.set(Ke.value,Fc)}}async function Ju(j){const ce=Reflect.get(window,"monaco");if(!ce||Object.hasOwn(ce,Yu))return;const ve=ce.languages.setMonarchTokensProvider;function Ie(){return function(...Ke){return Ke.length!==2?ve.apply(ce,Ke):ve.call(ce,Ke[0],Nd(Ke[1]))}}j.set(ce.languages.setMonarchTokensProvider,Ie),Reflect.set(ce,Yu,{})}async function rp(j){const ce=Object.getOwnPropertyDescriptor(window,"postMessage");function ve(Ie){return function(...Ge){try{const nt=(0,N.cloneDeep)(Ge);(0,N.isFunction)(Ie)&&Ie.apply(this,nt)}catch{throw new Error("postMessage arguments are invalid objects")}}}ce?.value&&j.set(ce.value,ve)}function op(j){Ju(io)}function ip(j){function ce(ve){return(0,N.isFunction)(ve)?function(...Ie){const Ke=ve.apply(this,Ie);return wd(Ke),Ke}:ve}j.set(N.cloneDeep,ce)}var lp=e(66161);async function cp(j,ce){if(!Fg(j))return j;const ve=await Promise.resolve(j.plugin);if(Reflect.has(ve,"panel")&&Reflect.set(ve,"panel",Hl(Reflect.get(ve,"panel"),ce)),Reflect.has(ve,"components")){const Ie=Reflect.get(ve,"components");Object.entries(Ie).forEach(([Ke,Ge])=>{Reflect.set(Ie,Ke,Hl(Ge,ce))}),Reflect.set(ve,"components",Ie)}if(Reflect.has(ve,"root")&&Reflect.set(ve,"root",Hl(Reflect.get(ve,"root"),ce)),Reflect.has(ve,"extensionConfigs")){const Ie=Reflect.get(ve,"extensionConfigs");for(const Ke of Ie)Reflect.has(Ke,"component")&&Reflect.set(Ke,"component",Hl(Reflect.get(Ke,"component"),ce));Reflect.set(ve,"extensionConfigs",Ie)}if(Reflect.has(ve,"configPages")){const Ie=Reflect.get(ve,"configPages")??[];for(const[Ke,Ge]of Object.entries(Ie))!Ge.body||!(0,N.isFunction)(Ge.body)||Reflect.set(Ie,Ke,{...Ge,body:Hl(Ge.body,ce)});Reflect.set(ve,"configPages",Ie)}return j}const Hl=(j,ce)=>{const ve=v.memo(Ie=>v.createElement("div",{"data-plugin-sandbox":ce.id,style:{height:ce.type===wc.QE.app||ce.type===wc.QE.panel?"100%":"auto"}},v.createElement(j,{...Ie})));return ve.displayName=`GrafanaSandbox(${j.displayName||j.name||"Component"})`,ve},Fd=new Map,Xu={};async function dp({pluginId:j}){Gg();try{const ce=await(0,Vu.x)(j);return Fd.has(j)||Fd.set(j,up(ce)),Fd.get(j)}catch(ce){const ve=new Error(`Could not import plugin ${j} inside sandbox: `+ce);throw kl(ve,{pluginId:j,error:String(ce)}),ve}}async function up(j){return Hu("Loading with sandbox",{pluginId:j.id}),new Promise(async(ce,ve)=>{const Ie=Yg();let Ke;function Ge(gt){if(_g(gt)){const Rt=Vg(gt,j.id);return zg(Rt),Rt}else kg(gt);const vt=Ie.get(gt);if(vt)return vt(gt,j,Ke);const bt=op(gt);return bt||gt}Ke=(0,Og.A)(window,{distortionCallback:Ge,defaultPolicy:Ig.G,liveTargetCallback:Hg,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(gt,...vt){return setTimeout(gt,0,...vt)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(Xu[j.id+"-grafanaBootData"]||(Xu[j.id+"-grafanaBootData"]=!0,Hu("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:j.id,guessedPluginName:j.id,parent:"window",packageName:"window",key:"grafanaBootData"})),S.$.buildInfo.env==="development")throw new Error(`Error in ${j.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${j.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),S.$.bootData},async define(gt,vt,bt){let Rt,Lt;Array.isArray(gt)?(Rt=gt,Lt=vt):(Rt=vt,Lt=bt);try{const Nt=mp(Rt,j.id),St=Lt.apply(null,Nt),Qt=await cp(St,j);ce(Qt)}catch(Nt){const St=new Error(`Could not execute plugin's define ${j.id}: `+Nt);kl(St,{pluginId:j.id,error:String(Nt)}),ve(St)}}})}),Bg(Ke);let nt="";try{nt=await Lg(j)}catch(gt){const vt=new Error(`Could not load plugin code ${j.id}: `+gt);kl(vt,{pluginId:j.id,error:String(gt)}),ve(vt)}try{Ke.evaluate(nt)}catch(gt){const vt=new Error(`Could not run plugin ${j.id} inside sandbox: `+gt);kl(vt,{pluginId:j.id,error:String(gt)}),ve(vt)}})}function mp(j,ce){const ve=[];for(const Ie of j){let Ke=lp.s.get(Ie);if(Ke?.__useDefault&&(Ke=Ke.default),!Ke){const Ge=new Error(`[sandbox] Could not resolve dependency ${Ie}`);throw kl(Ge,{pluginId:ce,dependency:Ie,error:String(Ge)}),Ge}ve.push(Ke)}return ve}const fp=(0,el.kB)(Cg);Nc.z.addImportMap({imports:fp});const yi=Nc.z.constructor.prototype;yi.shouldFetch=()=>!0;const gp=yi.import;yi.import=function(...j){return gp.apply(this,j).then(ce=>ce&&ce.__useDefault?ce.default:ce)};const pp=yi.fetch;yi.fetch=function(j,ce){return Tg(pp,j,ce)};const hp=yi.resolve;yi.resolve=Sg.bind(yi,hp),yi.onload=Mg;async function Wd({path:j,version:ce,isAngular:ve,pluginId:Ie}){ce&&(0,Ld.GD)({path:j,version:ce});const Ke=Qf[j];if(Ke)return typeof Ke=="function"?await Ke():Ke;let Ge=(0,el.Av)(j);return await Kg({isAngular:ve,pluginId:Ie})?dp({pluginId:Ie}):Nc.z.import(Ge)}function vp(j){return Wd({path:j.module,version:j.info?.version,isAngular:j.angular?.detected,pluginId:j.id}).then(ce=>{if(ce.plugin){const ve=ce.plugin;return ve.meta=j,ve}if(ce.Datasource){const ve=new M.tD(ce.Datasource);return ve.setComponentsFromLegacyExports(ce),ve.meta=j,ve}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Ep(j){return Wd({path:j.module,version:j.info?.version,isAngular:j.angular?.detected,pluginId:j.id}).then(ce=>{const ve=ce.plugin?ce.plugin:new O.hX;return ve.init(j),ve.meta=j,ve.setComponentsFromLegacyExports(ce),ve})}},66161:(Q,I,e)=>{"use strict";e.d(I,{s:()=>t});const t=new Map([])},60677:(Q,I,e)=>{"use strict";e.d(I,{W3:()=>m,Wy:()=>i,z4:()=>l});var t=e(43429),n=e(34867),r=e(15162),s=e(27716),o=e(22854);async function m(d){const c=await(0,s.x)(d);let g;if(c.type===t.QE.app&&(g=await(0,o.ui)(c)),c.type===t.QE.datasource&&(g=await(0,o.cS)(c)),c.type===t.QE.panel&&(g=await(0,r.Kk)(c)),c.type===t.QE.renderer&&(g={meta:c}),!g)throw new Error("Unknown Plugin type: "+c.type);return g}function i(d,c,g){let E={...d},p;function b(h,P){return!P.startsWith(h.url??"")||p&&(p.url?.length??0)>(h.url?.length??0)?h:(p&&(p.active=!1),p={...h,active:!0},p)}function a(h,P=0){if(P>10)return h;if(h.children){const y=h.children.map(C=>a(C,P+1));return{...b(h,g),children:y}}return b(h,g)}return E.children=(E?.children??[]).map(a),{main:E,node:p??E}}const l=(0,n.DW)("features.plugins")},81862:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>S,Cj:()=>g,HO:()=>P,Mj:()=>p,Nm:()=>E,Q9:()=>h,RS:()=>f,c1:()=>c,g$:()=>y,ny:()=>b,ri:()=>a,uh:()=>C,xu:()=>u});var t=e(30038),n=e(2543),r=e.n(n),s=e(72724),o=e(47232),m=e(2913),i=e(10096);const l={orgId:m.Ay.bootData.user.orgId,timeZone:m.Ay.bootData.user.timezone,weekStart:m.Ay.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},d=(0,t.Z0)({name:"user/profile",initialState:l,reducers:{updateTimeZone:(v,x)=>{v.timeZone=x.payload.timeZone},updateWeekStart:(v,x)=>{v.weekStart=x.payload.weekStart},updateFiscalYearStartMonth:(v,x)=>{v.fiscalYearStartMonth=x.payload.fiscalYearStartMonth},setUpdating:(v,x)=>{v.isUpdating=x.payload.updating},userLoaded:(v,x)=>{v.user=x.payload.user},initLoadTeams:(v,x)=>{v.teamsAreLoading=!0},teamsLoaded:(v,x)=>{v.teams=x.payload.teams,v.teamsAreLoading=!1},initLoadOrgs:(v,x)=>{v.orgsAreLoading=!0},orgsLoaded:(v,x)=>{v.orgs=x.payload.orgs,v.orgsAreLoading=!1},initLoadSessions:(v,x)=>{v.sessionsAreLoading=!0},sessionsLoaded:(v,x)=>{const A=x.payload.sessions.sort((R,B)=>Number(B.isActive)-Number(R.isActive));v.sessions=A.map(R=>({id:R.id,isActive:R.isActive,seenAt:(0,s.fq)(R.seenAt),createdAt:R.createdAt,clientIp:R.clientIp,browser:R.browser,browserVersion:R.browserVersion,os:R.os,osVersion:R.osVersion,device:R.device})),v.sessionsAreLoading=!1},userSessionRevoked:(v,x)=>{v.sessions=v.sessions.filter(A=>A.id!==x.payload.tokenId),v.isUpdating=!1}}}),c=v=>async x=>{(0,n.set)(i.TP,"user.fiscalYearStartMonth",v),x(M({fiscalYearStartMonth:v}))},g=v=>async x=>{(!(0,n.isString)(v)||(0,n.isEmpty)(v))&&(v=m.Ay?.bootData?.user?.timezone),(0,n.set)(i.TP,"user.timezone",v),x(D({timeZone:v}))},u=v=>async x=>{(!(0,n.isString)(v)||(0,n.isEmpty)(v))&&(v=m.Ay?.bootData?.user?.weekStart),(0,n.set)(i.TP,"user.weekStart",v),x(T({weekStart:v})),(0,o.$D)(v)},{setUpdating:E,initLoadOrgs:p,orgsLoaded:b,initLoadTeams:a,teamsLoaded:h,userLoaded:P,userSessionRevoked:y,initLoadSessions:C,sessionsLoaded:f,updateTimeZone:D,updateWeekStart:T,updateFiscalYearStartMonth:M}=d.actions,O=d.reducer,S={user:d.reducer}},32901:(Q,I,e)=>{"use strict";e.d(I,{O:()=>t,q:()=>n});const t=r=>r.timeZone,n=r=>r.fiscalYearStartMonth},64152:(Q,I,e)=>{"use strict";e.d(I,{d:()=>r,m:()=>n});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(o){this.extraRenderActions=this.extraRenderActions.concat(o)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,r=new t},65160:(Q,I,e)=>{"use strict";e.d(I,{c:()=>V,E:()=>z});var t=e(46942),n=e.n(t),r=e(2543),s=e(55127),o=e.n(s),m=e(96540),i=e(41987),l=e(76287),d=e(18226),c=e(39070),g=e(14236),u=e(26272),E=e(13544),p=e(19347),b=e(7376),a=e(14110),h=e(39938),P=e(66602),y=e(22214),C=e(10343),f=e(7788),D=e(44836),T=e(74856),M=e(84423),O=e(64152),S=e(32196),v=e(40845),x=e(14578),A=e(10354),R=e(72093),B=e(51612);const U=Y=>{const{query:H,queries:k,onChange:ee,collapsedText:ie,renderExtras:fe,hidden:q}=Y,Z=(0,v.of)(K),[J,G]=(0,m.useState)(!1),[ne,te]=(0,m.useState)(null),oe=De=>{G(!0)},le=De=>{if(G(!1),ne){te(null);return}H.refId!==De&&ee({...H,refId:De})},ue=De=>{const Fe=De.currentTarget.value.trim();if(Fe.length===0){te("An empty query name is not allowed");return}for(const Ee of k)if(Ee!==H&&Fe===Ee.refId){te("Query name already exists");return}ne&&te(null)},Te=De=>{le(De.currentTarget.value.trim())},he=De=>{De.key==="Enter"&&le(De.currentTarget.value)},re=De=>{De.target.select()};return m.createElement(m.Fragment,null,m.createElement("div",{className:Z.wrapper},!J&&m.createElement("button",{className:Z.queryNameWrapper,"aria-label":E.Tp.components.QueryEditorRow.title(H.refId),title:"Edit query name",onClick:oe,"data-testid":"query-name-div",type:"button"},m.createElement("span",{className:Z.queryName},H.refId),m.createElement(x.I,{name:"pen",className:Z.queryEditIcon,size:"sm"})),J&&m.createElement(m.Fragment,null,m.createElement(A.p,{type:"text",defaultValue:H.refId,onBlur:Te,autoFocus:!0,onKeyDown:he,onFocus:re,invalid:ne!==null,onChange:ue,className:Z.queryNameInput,"data-testid":"query-name-input"}),ne&&m.createElement(R.P,{horizontal:!0},ne)),w(Y,Z),fe&&m.createElement("div",{className:Z.itemWrapper},fe()),q&&m.createElement("em",{className:Z.contextInfo},"Hidden")),ie&&m.createElement("div",{className:Z.collapsedText},ie))},w=(Y,H)=>{const{alerting:k,dataSource:ee,onChangeDataSource:ie}=Y;return ie?m.createElement("div",{className:H.itemWrapper},m.createElement(B.s,{variables:!0,alerting:k,current:ee.name,onChange:ie})):m.createElement("em",{className:H.contextInfo},"(",ee.name,")")},K=Y=>({wrapper:(0,S.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${Y.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,S.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${Y.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${Y.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${Y.colors.action.hover};
        border: 1px dashed ${Y.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${Y.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,S.css)`
      font-weight: ${Y.typography.fontWeightMedium};
      color: ${Y.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${Y.spacing(.5)};
    `,queryEditIcon:(0,S.cx)((0,S.css)`
        margin-left: ${Y.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,S.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,S.css)`
      font-weight: ${Y.typography.fontWeightRegular};
      font-size: ${Y.typography.bodySmall.fontSize};
      color: ${Y.colors.text.secondary};
      padding-left: ${Y.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,S.css)`
      font-size: ${Y.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${Y.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,S.css)`
      display: flex;
      margin-left: 4px;
    `});function N({error:Y}){const H=(0,v.of)(L),k=Y?.message??Y?.data?.message??"Query error";return m.createElement("div",{className:H.wrapper},m.createElement("div",{className:H.icon},m.createElement(x.I,{name:"exclamation-triangle"})),m.createElement("div",{className:H.message},k,Y.traceId!=null&&m.createElement(m.Fragment,null,m.createElement("br",null)," ",m.createElement("span",null,"(Trace ID: ",Y.traceId,")"))))}const L=Y=>({wrapper:(0,S.css)({marginTop:Y.spacing(.5),background:Y.colors.background.secondary,display:"flex"}),icon:(0,S.css)({background:Y.colors.error.main,color:Y.colors.error.contrastText,padding:Y.spacing(1)}),message:(0,S.css)({fontSize:Y.typography.bodySmall.fontSize,fontFamily:Y.typography.fontFamilyMonospace,padding:Y.spacing(1)})});class V extends m.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,p.l)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const H=(0,b.E)(),k='<plugin-component type="query-ctrl" />',ee={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=H.load(this.element,ee,k),this.angularScope=ee.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:H,onChange:k,queries:ee,onRunQuery:ie,onAddQuery:fe,app:q=i.Jk.PanelEditor,history:Z}=this.props,{datasource:J,data:G}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(J?.components?.QueryCtrl)return m.createElement("div",{ref:ne=>this.element=ne});if(J){let ne=this.getReactQueryEditor(J);if(ne)return m.createElement(l.p,{instanceSettings:this.props.dataSource},m.createElement(ne,{key:J?.name,query:H,datasource:J,onChange:k,onRunQuery:ie,onAddQuery:fe,data:G,range:(0,T.jG)().timeRange(),queries:ee,app:q,history:Z}))}return m.createElement("div",null,m.createElement(D.x6,{i18nKey:"query-operation.query-editor-not-exported"},"Data source plugin does not export any Query Editor component"))},this.onToggleEditMode=(H,k)=>{H.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),k.isOpen||k.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:H,query:k,onQueryRemoved:ee}=this.props;H(k),ee&&ee()},this.onCopyQuery=()=>{const{query:H,onAddQuery:k,onQueryCopied:ee}=this.props,ie=(0,r.cloneDeep)(H);k(ie),ee&&ee()},this.onHideQuery=()=>{const{query:H,onChange:k,onRunQuery:ee,onQueryToggled:ie}=this.props;k({...H,hide:!H.hide}),ee(),ie&&ie(H.hide),(0,a.rR)("query_editor_row_hide_query_clicked",{hide:!H.hide})},this.onToggleHelp=()=>{this.setState(H=>({showingHelp:!H.showingHelp}))},this.onClickExample=H=>{H.datasource===void 0&&(H.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...H,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:H,query:k}=this.props,ie=(z(H,k.refId)?.series??[]).reduce((J,G)=>{if(!G.meta?.notices)return J;const ne=(0,r.filter)(G.meta.notices,{severity:"warning"})??[];return J.concat(ne)},[]),fe=(0,r.uniqBy)(ie,"text");if(!(fe.length>0))return null;const Z=fe.map(J=>J.text).join(`
`);return m.createElement(h.E,{key:"query-warning",color:"orange",icon:"exclamation-triangle",text:m.createElement(m.Fragment,null,fe.length," ",o()("warning",fe.length)),tooltip:Z})},this.renderExtraActions=()=>{const{query:H,queries:k,data:ee,onAddQuery:ie,dataSource:fe}=this.props,q=O.d.getAllExtraRenderAction().map((Z,J)=>Z({query:H,queries:k,timeRange:ee.timeRange,onAddQuery:ie,dataSource:fe,key:J})).filter(Boolean);return q.push(this.renderWarnings()),q},this.renderActions=H=>{const{query:k,hideHideQueryButton:ee=!1}=this.props,{hasTextEditMode:ie,datasource:fe,showingHelp:q}=this.state,Z=!!k.hide,J=fe?.components?.QueryEditorHelp;return m.createElement(m.Fragment,null,J&&m.createElement(C.A,{title:(0,D.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:q}),ie&&m.createElement(C.q,{title:(0,D.t)("query-operation.header.toggle-edit-mode","Toggle text edit mode"),icon:"pen",onClick:G=>{this.onToggleEditMode(G,H)}}),this.renderExtraActions(),m.createElement(C.q,{title:(0,D.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),ee?null:m.createElement(C.A,{dataTestId:E.Tp.components.QueryEditorRow.actionButton("Hide response"),title:k.hide?(0,D.t)("query-operation.header.show-response","Show response"):(0,D.t)("query-operation.header.hide-response","Hide response"),icon:Z?"eye-slash":"eye",active:Z,onClick:this.onHideQuery}),m.createElement(C.q,{title:(0,D.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=H=>{const{alerting:k,query:ee,dataSource:ie,onChangeDataSource:fe,onChange:q,queries:Z,renderHeaderExtras:J}=this.props;return m.createElement(U,{query:ee,queries:Z,onChangeDataSource:fe,dataSource:ie,hidden:ee.hide,onClick:G=>this.onToggleEditMode(G,H),onChange:q,collapsedText:H.isOpen?null:this.renderCollapsedText(),renderExtras:J,alerting:k})}}componentDidMount(){const{data:H,query:k,id:ee}=this.props,ie=z(H,k.refId);this.id=(0,r.uniqueId)(ee+"_"),this.setState({data:ie}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:H,queries:k}=this.props,{datasource:ee}=this.state,ie=new M.a9({targets:k}),fe={},q=this;return{datasource:ee,target:H,panel:ie,dashboard:fe,refresh:()=>{H.hide!==q.props.query.hide&&(H.hide=q.props.query.hide),this.props.onChange(H),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new d.o,range:(0,T.jG)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const H=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return H?.rawRef?.uid??H?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let H;const k=this.getInterpolatedDataSourceUID();try{H=await this.dataSourceSrv.get(k)}catch{H=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(H),this.setState({datasource:H,queriedDataSourceIdentifier:k,hasTextEditMode:(0,r.has)(H,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(H){const{datasource:k,queriedDataSourceIdentifier:ee}=this.state,{data:ie,query:fe}=this.props;if(H.id!==this.props.id&&(this.id=(0,r.uniqueId)(this.props.id+"_")),ie!==H.data){const q=z(ie,fe.refId);this.setState({data:q}),this.angularScope&&(this.angularScope.range=(0,T.jG)().timeRange()),this.angularQueryEditor&&q&&F(this.angularScope,q,this.angularQueryEditor)}if(k&&ee!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(H){if(H)switch(this.props.app){case i.Jk.Explore:return H.components?.ExploreMetricsQueryField||H.components?.ExploreLogsQueryField||H.components?.ExploreQueryField||H.components?.QueryEditor;case i.Jk.PanelEditor:case i.Jk.Dashboard:default:return H.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:H}=this.state;return H?.getQueryDisplayText?H.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:H,index:k,visualization:ee,collapsable:ie}=this.props,{datasource:fe,showingHelp:q,data:Z}=this.state,J=H.hide,G=Z?.error&&Z.error.refId===H.refId?Z.error:Z?.errors?.find(le=>le.refId===H.refId),ne=n()("query-editor-row",{"query-editor-row--disabled":J,"gf-form-disabled":J});if(!fe)return null;const te=this.renderPluginEditor(),oe=fe.components?.QueryEditorHelp;return m.createElement("div",{"data-testid":"query-editor-row","aria-label":E.Tp.components.QueryEditorRows.rows},m.createElement(f.u,{id:this.id,draggable:!0,collapsable:ie,index:k,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},m.createElement("div",{className:ne,id:this.id},m.createElement(P.Xw,null,q&&oe&&m.createElement(y.j,null,m.createElement(oe,{onClickExample:le=>this.onClickExample(le),query:this.props.query,datasource:fe})),te),G&&m.createElement(N,{error:G}),ee)))}}function F(Y,H,k){if(H.state===c.Gu.Done){const ee=H.series.map(ie=>(0,g.w3)(ie));Y.events.emit(u.ee.dataReceived,ee)}else H.state===c.Gu.Error&&Y.events.emit(u.ee.dataError,H.error);setTimeout(k.digest)}function z(Y,H){const k=Y.series.filter(q=>q.refId===H);if(Y.state!==c.Gu.Loading&&(Y.error||Y.errors?.length)&&!Y.series.length)return{...Y,state:c.Gu.Error};let ee=Y.state,ie=Y.errors?.find(q=>q.refId===H);!ie&&Y.error&&(ie=Y.error.refId===H?Y.error:void 0),ee!==c.Gu.Loading&&(ie?ee=c.Gu.Error:Y.state===c.Gu.Error&&(ee=c.Gu.Done));const fe=Y.timeRange;return{...Y,state:ee,series:k,error:ie,errors:ie?[ie]:void 0,timeRange:fe}}},44932:(Q,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(96540),n=e(55244),r=e(14110),s=e(19347),o=e(65160);class m extends t.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=d=>{this.props.onQueriesChange(this.props.queries.filter(c=>c!==d))},this.onDragStart=d=>{const{queries:c,dsSettings:g}=this.props;(0,r.rR)("query_row_reorder_started",{startIndex:d.source.index,numberOfQueries:c.length,datasourceType:g.type})},this.onDragEnd=d=>{const{queries:c,onQueriesChange:g,dsSettings:u}=this.props;if(!d||!d.destination)return;const E=d.source.index,p=d.destination.index;if(E===p){(0,r.rR)("query_row_reorder_canceled",{startIndex:E,endIndex:p,numberOfQueries:c.length,datasourceType:u.type});return}const b=Array.from(c),[a]=b.splice(E,1);b.splice(p,0,a),g(b),(0,r.rR)("query_row_reorder_ended",{startIndex:E,endIndex:p,numberOfQueries:c.length,datasourceType:u.type})}}onChangeQuery(d,c){const{queries:g,onQueriesChange:u}=this.props;u(g.map((E,p)=>p===c?d:E))}onDataSourceChange(d,c){const{queries:g,onQueriesChange:u}=this.props;u(g.map((E,p)=>{if(p!==c)return E;const b={type:d.type,uid:d.uid};return E.datasource&&(0,s.l)().getInstanceSettings(E.datasource)?.type===d.type?{...E,datasource:b}:{refId:E.refId,hide:E.hide,datasource:b}}))}render(){const{dsSettings:d,data:c,queries:g,app:u,history:E,eventBus:p,onAddQuery:b,onRunQueries:a,onQueryCopied:h,onQueryRemoved:P,onQueryToggled:y,queryRowWrapper:C}=this.props;return t.createElement(n.JY,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},f=>t.createElement("div",{"data-testid":"query-editor-rows",ref:f.innerRef,...f.droppableProps},g.map((D,T)=>{const M=i(D,d),O=d.meta.mixed?v=>this.onDataSourceChange(v,T):void 0,S=t.createElement(o.c,{id:D.refId,index:T,key:D.refId,data:c,query:D,dataSource:M,onChangeDataSource:O,onChange:v=>this.onChangeQuery(v,T),onRemoveQuery:this.onRemoveQuery,onAddQuery:b,onRunQuery:a,onQueryCopied:h,onQueryRemoved:P,onQueryToggled:y,queries:g,app:u,history:E,eventBus:p});return C?C(S,D.refId):S}),f.placeholder)))}}const i=(l,d)=>l.datasource&&(0,s.l)().getInstanceSettings(l.datasource)||d},37464:(Q,I,e)=>{"use strict";e.d(I,{g:()=>H,K:()=>ee});var t=e(32196),n=e(96540),r=e(39070),s=e(43127),o=e(41987),m=e(43429),i=e(13544),l=e(19347),d=e(12131),c=e(66864),g=e(55852),u=e(40276),E=e(37390),p=e(3911),b=e(38894),a=e(16817),h=e(36663),P=e(17172),y=e(39558);function C({pluginId:fe}){const{value:q,loading:Z,error:J}=(0,a.A)(async()=>(0,P.AI)().get(`/api/plugins/${fe}/markdown/query_help`),[]),G=(0,h.G)(q);return Z?n.createElement(y._,{text:"Loading help..."}):J?n.createElement("h3",null,"An error occurred when loading help."):q===""?n.createElement("h3",null,"No query help could be found."):n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:G}})}var f=e(2913),D=e(27677),T=e(21969),M=e(50481),O=e(51612),S=e(53478),v=e(74106),x=e(14348),A=e(8480),R=e(93117),B=e(64152),U=e(44932),w=e(65879),K=e(10354),N=e(15292),L=e(7788);class V extends n.PureComponent{constructor(q){super(q),this.onRelativeTimeChange=J=>{this.setState({timeRangeFrom:J.target.value})},this.onTimeShiftChange=J=>{this.setState({timeRangeShift:J.target.value})},this.onOverrideTime=J=>{const{options:G,onChange:ne}=this.props,te=z(J.target.value),oe=F(te);oe&&G.timeRange?.from!==te&&ne({...G,timeRange:{...G.timeRange??{},from:te}}),this.setState({relativeTimeIsValid:oe})},this.onTimeShift=J=>{const{options:G,onChange:ne}=this.props,te=z(J.target.value),oe=F(te);oe&&G.timeRange?.shift!==te&&ne({...G,timeRange:{...G.timeRange??{},shift:te}}),this.setState({timeShiftIsValid:oe})},this.onToggleTimeOverride=()=>{const{onChange:J,options:G}=this.props;this.setState({timeRangeHide:!this.state.timeRangeHide},()=>{J({...G,timeRange:{...G.timeRange??{},hide:this.state.timeRangeHide}})})},this.onCacheTimeoutBlur=J=>{const{options:G,onChange:ne}=this.props;ne({...G,cacheTimeout:z(J.target.value)})},this.onQueryCachingTTLBlur=J=>{const{options:G,onChange:ne}=this.props;let te=parseInt(J.target.value,10);(isNaN(te)||te===0)&&(te=null),ne({...G,queryCachingTTL:te})},this.onMaxDataPointsBlur=J=>{const{options:G,onChange:ne}=this.props;let te=parseInt(J.currentTarget.value,10);(isNaN(te)||te===0)&&(te=null),te!==G.maxDataPoints&&ne({...G,maxDataPoints:te})},this.onMinIntervalBlur=J=>{const{options:G,onChange:ne}=this.props,te=z(J.target.value);te!==G.minInterval&&ne({...G,minInterval:te})},this.onOpenOptions=()=>{this.setState({isOpen:!0})},this.onCloseOptions=()=>{this.setState({isOpen:!1})};const{options:Z}=q;this.state={timeRangeFrom:Z.timeRange?.from||"",timeRangeShift:Z.timeRange?.shift||"",timeRangeHide:Z.timeRange?.hide??!1,isOpen:!1,relativeTimeIsValid:!0,timeShiftIsValid:!0}}renderCacheTimeoutOption(){const{dataSource:q,options:Z}=this.props,J=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return q.meta.queryOptions?.cacheTimeout?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:J},"Cache timeout"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"60",spellCheck:!1,onBlur:this.onCacheTimeoutBlur,defaultValue:Z.cacheTimeout??""}))):null}renderQueryCachingTTLOption(){const{dataSource:q,options:Z}=this.props,J="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return q.cachingConfig?.enabled?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:J},"Cache TTL"),n.createElement(K.p,{type:"number",className:"width-6",placeholder:`${q.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:this.onQueryCachingTTLBlur,defaultValue:Z.queryCachingTTL??void 0}))):null}renderMaxDataPointsOption(){const{data:q,options:Z}=this.props,J=q.request?.maxDataPoints,G=Z.maxDataPoints??"",ne=G==="";return n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(K.p,{type:"number",className:"width-6",placeholder:`${J}`,spellCheck:!1,onBlur:this.onMaxDataPointsBlur,defaultValue:G}),ne&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Width of panel"))))}renderIntervalOption(){const{data:q,dataSource:Z,options:J}=this.props,G=q.request?.interval,ne=Z.interval??"No limit";return n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:n.createElement(n.Fragment,null,"A lower limit for the interval. Recommended to be set to write frequency, for example ",n.createElement("code",null,"1m")," ","if your data is written every minute. Default value can be set in data source settings for most data sources.")},"Min interval"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:`${ne}`,spellCheck:!1,onBlur:this.onMinIntervalBlur,defaultValue:J.minInterval??""}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The evaluated interval that is sent to data source and is used in ",n.createElement("code",null,"$__interval")," and"," ",n.createElement("code",null,"$__interval_ms"),". This value is not exactly equal to"," ",n.createElement("code",null,"Time range / max data points"),", it will approximate a series of magic number.")},"Interval"),n.createElement(b.I,{width:6},G),n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Time range / max data points"))))}renderCollapsedText(q){const{data:Z,options:J}=this.props,{isOpen:G}=this.state;if(G)return;let ne=J.maxDataPoints??"";ne===""&&Z.request&&(ne=`auto = ${Z.request.maxDataPoints}`);let te=J.minInterval;return Z.request&&(te=`${Z.request.interval}`),n.createElement(n.Fragment,null,n.createElement("div",{className:q.collapsedText},"MD = ",ne),n.createElement("div",{className:q.collapsedText},"Interval = ",te))}render(){const{timeRangeHide:q,relativeTimeIsValid:Z,timeShiftIsValid:J}=this.state,{timeRangeFrom:G,timeRangeShift:ne,isOpen:te}=this.state,oe=Y();return n.createElement(L.u,{id:"Query options",index:0,title:"Query options",headerElement:this.renderCollapsedText(oe),isOpen:te,onOpen:this.onOpenOptions,onClose:this.onCloseOptions},this.renderMaxDataPointsOption(),this.renderIntervalOption(),this.renderCacheTimeoutOption(),this.renderQueryCachingTTLOption(),n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",n.createElement("code",null,"now-5m")," and ",n.createElement("code",null,"5m"),", or variables like ",n.createElement("code",null,"$_relativeTime"),".")},"Relative time"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,invalid:!Z,value:G})),n.createElement("div",{className:"gf-form"},n.createElement(b.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",n.createElement("code",null,"now-1h")," and"," ",n.createElement("code",null,"1h"),", or variables like ",n.createElement("code",null,"$_timeShift"),".")},"Time shift"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,invalid:!J,value:ne})),(ne||G)&&n.createElement("div",{className:"gf-form-inline align-items-center"},n.createElement(b.I,{width:9},"Hide time info"),n.createElement(N.d,{value:q,onChange:this.onToggleTimeOverride})))}}const F=fe=>fe?w.isValidTimeSpan(fe):!0,z=fe=>fe===""?null:fe,Y=(0,p.N)(()=>{const{theme:fe}=f.config;return{collapsedText:(0,t.css)`
      margin-left: ${fe.spacing.md};
      font-size: ${fe.typography.size.sm};
      color: ${fe.colors.textWeak};
    `}});class H extends n.PureComponent{constructor(){super(...arguments),this.backendSrv=D.IB,this.dataSourceSrv=(0,l.l)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!d.Ny.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:r.Gu.NotStarted,series:[],timeRange:(0,s.E2)()}},this.onChangeDataSource=async(q,Z)=>{const{dsSettings:J}=this.state,G=J?await(0,l.l)().get(J.uid):void 0,ne=await(0,l.l)().get(q.uid),te=Z||await(0,R.y)(ne,q.uid,this.state.queries,G),oe=await this.dataSourceSrv.get(q.name);this.onChange({queries:te,dataSource:{name:q.name,uid:q.uid,type:q.meta.id,default:q.isDefault}}),this.setState({queries:te,dataSource:oe,dsSettings:q}),Z&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:q}=this.state;this.onQueriesChange((0,T.U7)(q,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,T.U7)(this.state.queries,S.Ex.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=q=>{this.props.onOptionsChange(q),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=q=>{const{dsSettings:Z,queries:J}=this.state;this.onQueriesChange((0,T.U7)(J,q,{type:Z?.type,uid:Z?.uid})),this.onScrollBottom()},this.onQueriesChange=q=>{this.onChange({queries:q}),this.setState({queries:q})},this.setScrollRef=q=>{this.setState({scrollElement:q})}}async componentDidMount(){const{options:q,queryRunner:Z}=this.props;this.querySubscription=Z.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:J=>this.onPanelDataUpdate(J)}),this.setNewQueriesAndDatasource(q)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:q}=this.props,Z=await(0,l.l)().get(q.dataSource);this.state.dataSource&&Z.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(q)}async setNewQueriesAndDatasource(q){try{const Z=await this.dataSourceSrv.get(q.dataSource),J=this.dataSourceSrv.getInstanceSettings(q.dataSource),G=await this.dataSourceSrv.get(),ne=Z.getRef(),te=q.queries.map(oe=>({...(0,T.Ih)(oe)&&Z?.getDefaultQuery?.(o.Jk.PanelEditor),datasource:ne,...oe}));this.setState({queries:te,dataSource:Z,dsSettings:J,defaultDataSource:G})}catch(Z){console.error("failed to load data source",Z)}}onPanelDataUpdate(q){this.setState({data:q})}newQuery(){const{dsSettings:q,defaultDataSource:Z}=this.state,J=q?.meta.mixed?Z:q;return{...this.state.dataSource?.getDefaultQuery?.(o.Jk.PanelEditor),datasource:{uid:J?.uid,type:J?.type}}}onChange(q){this.props.onOptionsChange({...this.props.options,...q})}renderTopSection(q){const{onOpenQueryInspector:Z,options:J}=this.props,{dataSource:G,data:ne,dsSettings:te}=this.state;return!te||!G?null:n.createElement(ee,{data:ne,dataSource:G,options:J,dsSettings:te,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:Z})}renderQueries(q){const{onRunQueries:Z}=this.props,{data:J,queries:G}=this.state;return n.createElement("div",{"aria-label":i.Tp.components.QueryTab.content},n.createElement(U.L,{queries:G,dsSettings:q,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:Z,data:J}))}isExpressionsSupported(q){return(q.meta.alerting||q.meta.mixed)===!0}renderExtraActions(){return B.m.getAllExtraRenderAction().map((q,Z)=>q({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:Z})).filter(Boolean)}renderAddQueryRow(q,Z){const J=!(0,x.kN)(q.name);return n.createElement(c.Gy,{spacing:"md",align:"flex-start"},J&&n.createElement(g.$n,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":i.Tp.components.QueryTab.addQuery},"Add query"),f.Ay.expressionsEnabled&&this.isExpressionsSupported(q)&&n.createElement(g.$n,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:Z.expressionButton,"data-testid":"query-tab-add-expression"},n.createElement("span",null,"Expression\xA0")),this.renderExtraActions())}render(){const{isHelpOpen:q,dsSettings:Z}=this.state,J=k();return n.createElement(u.E,{autoHeightMin:"100%",scrollRefCallback:this.setScrollRef},n.createElement("div",{className:J.innerWrapper},this.renderTopSection(J),Z&&n.createElement(n.Fragment,null,n.createElement("div",{className:J.queriesWrapper},this.renderQueries(Z)),this.renderAddQueryRow(Z,J),q&&n.createElement(E.a,{title:"Data source help",isOpen:!0,onDismiss:this.onCloseHelp},n.createElement(C,{pluginId:Z.meta.id})))))}}const k=(0,p.N)(()=>{const{theme:fe}=f.Ay;return{innerWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: ${fe.spacing.md};
    `,dataSourceRow:(0,t.css)`
      display: flex;
      margin-bottom: ${fe.spacing.md};
    `,dataSourceRowItem:(0,t.css)`
      margin-right: ${fe.spacing.inlineFormMargin};
    `,dataSourceRowItemOptions:(0,t.css)`
      flex-grow: 1;
      margin-right: ${fe.spacing.inlineFormMargin};
    `,queriesWrapper:(0,t.css)`
      padding-bottom: 16px;
    `,expressionWrapper:(0,t.css)``,expressionButton:(0,t.css)`
      margin-right: ${fe.spacing.sm};
    `}});function ee({dataSource:fe,options:q,data:Z,dsSettings:J,onDataSourceChange:G,onOptionsChange:ne,onOpenQueryInspector:te}){const oe=k(),[le,ue]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement("div",{"data-testid":i.Tp.components.QueryTab.queryGroupTopSection},n.createElement("div",{className:oe.dataSourceRow},n.createElement(b.I,{htmlFor:"data-source-picker",width:"auto"},"Data source"),n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(ie,{options:q,onChange:async(Te,he)=>await G?.(Te,he),isDataSourceModalOpen:!!d.Ny.getSearchObject().firstPanel})),fe&&n.createElement(n.Fragment,null,n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(g.$n,{variant:"secondary",icon:"question-circle",title:"Open data source help",onClick:()=>ue(!0),"data-testid":"query-tab-help-button"})),n.createElement("div",{className:oe.dataSourceRowItemOptions},n.createElement(V,{options:q,dataSource:fe,data:Z,onChange:Te=>{ne?.(Te)}})),te&&n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(g.$n,{variant:"secondary",onClick:te,"aria-label":i.Tp.components.QueryTab.queryInspectorButton},"Query inspector")))),fe&&(0,A.Hv)(fe.uid)&&n.createElement(v.c,{pluginId:fe.type,pluginType:m.QE.datasource,angularSupportEnabled:f.Ay?.angularSupportEnabled,showPluginDetailsLink:!0,interactionElementId:"datasource-query"})),le&&n.createElement(E.a,{title:"Data source help",isOpen:!0,onDismiss:()=>ue(!1)},n.createElement(C,{pluginId:J.meta.id})))}function ie({options:fe,onChange:q,...Z}){const[J,G]=(0,n.useState)(!!Z.isDataSourceModalOpen);(0,n.useEffect)(()=>{d.Ny.getSearchObject().firstPanel&&d.Ny.partial({firstPanel:null},!0)},[]);const ne={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:fe.dataSource,uploadFile:!0,onChange:async(te,oe)=>{await q(te,oe),G(!1)}};return n.createElement(n.Fragment,null,J&&n.createElement(M.p,{...ne,onDismiss:()=>G(!1)}),n.createElement(O.s,{...ne}))}},42972:(Q,I,e)=>{"use strict";e.d(I,{nm:()=>J,Dh:()=>fe});var t=e(39741),n=e(13752),r=e(64423),s=e(44240),o=e(39697),m=e(81160),i=e(67791),l=e(93031),d=e(71030),c=e(69850),g=e(1005),u=e(65961),E=e(3591),p=e(2543);function b(G){let ne=[];const te=(0,p.partition)(G,"id"),oe=(0,p.groupBy)(te[0],"id");return ne=(0,p.map)(oe,le=>le.length>1&&!(0,p.every)(le,a)?(0,p.find)(le,ue=>ue.eventType!=="panel-alert"):(0,p.head)(le)),ne=(0,p.concat)(ne,te[1]),ne}function a(G){return G.eventType==="panel-alert"}var h=e(74856),P=e(62467),y=e(65474),C=e(66847),f=e(69862),D=e(16126),T=e(32264),M=e(19347),O=e(90569),S=e(28444),v=e(27302),x=e(7436);class A{canRun(ne){return ne?!!(!ne.annotationQuery||ne.annotations):!1}run({annotation:ne,datasource:te,dashboard:oe,range:le}){if(!this.canRun(te))return(0,P.of)([]);const ue={};return(0,v.b)({dashboard:oe,range:le,panel:ue},te,ne).pipe((0,m.T)(Te=>Te.events??[]),(0,C.W)(x.SD))}}var R=e(42493);class B{canRun(ne){return ne?(0,R.E7)(ne)?!0:!!(ne.annotationQuery&&!ne.annotations):!1}run({annotation:ne,datasource:te,dashboard:oe,range:le}){return this.canRun(te)?(0,y.H)(te.annotationQuery({range:le,rangeRaw:le.raw,annotation:ne,dashboard:oe})).pipe((0,C.W)(x.SD)):(0,P.of)([])}}class U{constructor(ne=[new B,new A]){this.runners=ne}canWork({dashboard:ne}){return!!ne.annotations.list.find(U.getAnnotationsToProcessFilter)}work(ne){if(!this.canWork(ne))return(0,x.$)();const{dashboard:te,range:oe}=ne;let le=te.annotations.list.filter(U.getAnnotationsToProcessFilter);T.$.publicDashboardAccessToken&&le.length>0&&(le=[le[0]]);const ue=le.map(Te=>{let he;if(T.$.publicDashboardAccessToken){const re=new O.X;he=(0,P.of)(re).pipe((0,C.W)(x.H0))}else he=(0,y.H)((0,M.l)().get(Te.datasource)).pipe((0,C.W)(x.H0));return he.pipe((0,f.Z)(re=>{const De=this.runners.find(Fe=>Fe.canRun(re));return De?(te.events.publish(new S.xc(Te)),De.run({annotation:Te,datasource:re,dashboard:te,range:oe}).pipe((0,i.Q)(fe().cancellations().pipe((0,D.p)(Fe=>Fe===Te))),(0,m.T)(Fe=>(te.snapshot&&(Te.snapshotData=(0,p.cloneDeep)(Fe)),T.$.publicDashboardAccessToken?Fe:(0,x.G9)(Te,Fe))),(0,c.j)(()=>{te.events.publish(new S.yj(Te))}))):(0,P.of)([])}))});return(0,s.h)(ue).pipe((0,l.U)(),(0,d.T)((Te,he)=>Te.concat(he)),(0,m.T)(Te=>({annotations:Te,alertStates:[]})))}static getAnnotationsToProcessFilter(ne){return ne.enable&&!ne.snapshotData}}var w=e(85595),K=e(43585),N=e(17172),L=e(16233),V=e(55740),F=e(23662),z=e(91309),Y=e(31678);class H{constructor(){this.hasAlertRules={}}canWork({dashboard:ne,range:te}){return!(!ne.uid||T.$.publicDashboardAccessToken||te.raw.to!=="now"||this.hasAlertRules[ne.uid]===!1||!(L.TP.hasPermission(Y.AccessControlAction.AlertingRuleRead)&&L.TP.hasPermission(Y.AccessControlAction.AlertingRuleExternalRead)))}work(ne){if(!this.canWork(ne))return(0,x.$)();const{dashboard:te}=ne;return(0,y.H)((0,N.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:te.uid},`dashboard-query-runner-unified-alert-states-${te.id}`)).pipe((0,m.T)(oe=>{if(oe.status==="success"){this.hasAlertRules[te.uid]=!1;const le={};return oe.data.groups.forEach(ue=>ue.rules.forEach(Te=>{if((0,F.Z8)(Te)&&Te.annotations&&Te.annotations[V.YH.panelID]){this.hasAlertRules[te.uid]=!0;const he=Number(Te.annotations[V.YH.panelID]),re=(0,z.S)(Te.state);le[he]?re===K.O.Alerting&&le[he].state!==K.O.Alerting?le[he].state=K.O.Alerting:re===K.O.Pending&&le[he].state!==K.O.Alerting&&le[he].state!==K.O.Pending&&(le[he].state=K.O.Pending):le[he]={state:re,id:Object.keys(le).length,panelId:he,dashboardId:te.id}}})),{alertStates:Object.values(le),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,C.W)(x.Zr))}}class k{constructor(ne,te=(0,h.jG)(),oe=[new H,new w.F,new U]){this.dashboard=ne,this.timeSrv=te,this.workers=oe,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.m(1),this.runs=new n.B,this.cancellationStream=new n.B,this.runsSubscription=this.runs.subscribe(le=>this.executeRun(le)),this.eventsSubscription=ne.events.subscribe(E._,le=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(ne){this.runs.next(ne)}getResult(ne){return this.results.asObservable().pipe((0,m.T)(te=>{const oe=(0,x.FK)(te.annotations,ne),le=te.alertStates.find(ue=>!!ne&&ue.panelId===ne);return{annotations:b(oe),alertState:le}}))}executeRun(ne){const oe=this.workers.filter(re=>re.canWork(ne)).map(re=>re.work(ne)),le=new r.yU,ue=(0,s.h)(oe).pipe((0,i.Q)(this.runs.asObservable()),(0,l.U)(),(0,d.T)((re,De)=>(re.annotations=re.annotations.concat(De.annotations),re.alertStates=re.alertStates.concat(De.alertStates),re)),(0,c.j)(()=>{le.unsubscribe()}),(0,g.u)()),Te=new r.yU,he=(0,o.O)(200).pipe((0,u.u)({annotations:[],alertStates:[]}),(0,i.Q)(ue),(0,c.j)(()=>{Te.unsubscribe()}));Te.add(he.subscribe(re=>{this.results.next(re)})),le.add(ue.subscribe(re=>{this.results.next(re)}))}cancel(ne){this.cancellationStream.next(ne)}cancellations(){return this.cancellationStream.asObservable().pipe((0,g.u)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let ee;function ie(G){ee&&ee.destroy(),ee=G}function fe(){if(!ee)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return ee}let q;function Z(G){q=G}function J(G){q||(q=({dashboard:te,timeSrv:oe,workers:le})=>new k(te,oe,le));const ne=q(G);return ie(ne),ne}},90569:(Q,I,e)=>{"use strict";e.d(I,{X:()=>c});var t=e(62467),n=e(65474),r=e(40187),s=e(14236),o=e(17172),m=e(32264),i=e(57220),l=e(68706);const d="-- Public --";class c extends r.mA{constructor(){let u={};super({name:"public-ds",id:0,type:"public-ds",meta:u,uid:d,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(E){return{...E,queryType:l.nj.Annotations,refId:"anno"}}}}query(u){return u.targets.length?u.targets[0]?.datasource?.uid===i.vv?(0,n.H)(this.getAnnotations(u)):(0,t.of)({data:[]}):(0,t.of)({data:[]})}async getAnnotations(u){const{range:{to:E,from:p}}=u,b={from:p.valueOf(),to:E.valueOf()},a=await(0,o.AI)().get(`/api/public/dashboards/${m.$.publicDashboardAccessToken}/annotations`,b);return{data:[(0,s.Vc)(a)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},85595:(Q,I,e)=>{"use strict";e.d(I,{F:()=>r});var t=e(62467),n=e(7436);class r{canWork({dashboard:o}){return o?.annotations?.list?.some(m=>m.enable&&!!m.snapshotData)}work(o){if(!this.canWork(o))return(0,n.$)();const m=this.getAnnotationsFromSnapshot(o.dashboard);return(0,t.of)({annotations:m,alertStates:[]})}getAnnotationsFromSnapshot(o){return(o?.annotations?.list?.filter(d=>d.enable)).filter(d=>!!d.snapshotData).reduce((d,c)=>d.concat((0,n.G9)(c,c.snapshotData)),[])}getAnnotationsInSnapshot(o,m){const i=this.getAnnotationsFromSnapshot(o);return(0,n.FK)(i,m)}}},7436:(Q,I,e)=>{"use strict";e.d(I,{$:()=>u,FK:()=>b,G9:()=>a,H:()=>h,H0:()=>g,SD:()=>c,Zr:()=>E});var t=e(2543),n=e.n(t),r=e(62467),s=e(78368),o=e(12091),m=e(32264),i=e(99140),l=e(3169),d=e(16001);function c(P){return P.cancelled?(0,r.of)([]):(p("AnnotationQueryRunner failed",P),(0,r.of)([]))}function g(P){return p("Failed to retrieve datasource",P),(0,r.of)(void 0)}const u=()=>(0,r.of)({annotations:[],alertStates:[]});function E(P){return P.cancelled||p("DashboardQueryRunner failed",P),u()}function p(P,y){const C=(0,o.u)(y);console.error("handleAnnotationQueryRunnerError",C);const f=(0,l.gi)(P,C.message);(0,i.JD)((0,d.dx)(f))}function b(P,y){return y==null?P:P.filter(C=>{let f;if(f=C.source,!f)return!0;if(f.filter){const D=(f.filter.ids??[]).includes(y);if(f.filter.exclude){if(D)return!1}else if(!D)return!1}return C.panelId&&C.source.type==="dashboard"?C.panelId===y:!0})}function a(P,y){P.snapshotData&&(P=(0,t.cloneDeep)(P),delete P.snapshotData);for(const C of y)switch(C.source=P,C.color=m.$.theme2.visualization.getColorByName(P.iconColor),C.type=P.name,C.isRegion=!!(C.timeEnd&&C.time!==C.timeEnd),C.newState?.toLowerCase()){case"pending":C.color="yellow";break;case"alerting":C.color="red";break;case"ok":C.color="green";break;case"normal":C.color="green";break;case"no_data":C.color="gray";break;case"nodata":C.color="gray";break}return y}function h(P){if(!P||!P.length)return[];const y=[];for(const C of P){const f=new s.R(C);for(let D=0;D<C.length;D++){const T=(0,t.cloneDeep)(f.get(D));y.push(T)}}return y}},80924:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>R,S:()=>A});var t=e(2543),n=e(39741),r=e(62467),s=e(69862),o=e(81160),m=e(66847),i=e(39070),l=e(14236),d=e(43127),c=e(90708),g=e(21423),u=e(52622),E=e(2514),p=e(41987),b=e(65879),a=e(12091),h=e(26657),P=e(47118),y=e(31193),C=e(23989),f=e(14348),D=e(42972),T=e(49510),M=e(33948);function O(U=[]){U.forEach(w=>{w.meta={...w.meta,dataTopic:u.QR.Annotations}})}function S(U,w){return(0,T.z)([U,w]).pipe((0,s.Z)(K=>{const[N,L]=K;if(L.annotations?.length||L.alertState){N.annotations||(N.annotations=[]);const V=N.annotations.concat((0,M.I)(L.annotations));O(V);const F=L.alertState;return(0,r.of)({...N,annotations:V,alertState:F})}return O(N.annotations),(0,r.of)(N)}))}var v=e(39374);let x=100;function A(){return"Q"+x++}class R{constructor(w){this.templateSrv=(0,C.w)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.m(1),this.dataConfigSource=w}getData(w){const{withFieldConfig:K,withTransforms:N}=w;let L=1,V,F=[],z=[],Y,H=!0,k=-1;if(this.dataConfigSource.snapshotData){const ee={state:i.Gu.Done,series:this.dataConfigSource.snapshotData.map(ie=>(0,l.Vc)(ie)),timeRange:(0,d.E2)(),structureRev:L};return(0,r.of)(ee)}return this.subject.pipe((0,s.Z)(ee=>{let ie=this.dataConfigSource.getFieldOverrideOptions(),fe=this.dataConfigSource.getTransformations();if(ee.series===z&&V?.fieldConfig===ie?.fieldConfig&&Y===fe)return(0,r.of)({...ee,structureRev:L,series:F});V=ie,Y=fe,z=ee.series;let q=(0,r.of)(ee);return N&&(q=this.applyTransformations(ee)),q.pipe((0,o.T)(Z=>{let J=Z,G=!1;if(K&&Z.series?.length){if(k===this.dataConfigSource.configRev){let ne;for(const te of Z.series)if((0,P.o$)(te)){ne=te;break}ne&&!ne.packetInfo.schemaChanged&&F[0].fields.length===ne.fields.length&&(J={...J,series:F.map((te,oe)=>({...te,length:Z.series[oe].length,fields:te.fields.map((le,ue)=>({...le,values:Z.series[oe].fields[ue].values,state:{...le.state,calcs:void 0,range:void 0}}))}))},G=!0)}ie!=null&&(H||!G)&&(k=this.dataConfigSource.configRev,J={...J,series:(0,c.we)({timeZone:Z.request?.timezone??"browser",data:J.series,...ie})},J.annotations&&(J.annotations=(0,c.we)({data:J.annotations,...ie,fieldConfig:{defaults:{},overrides:[]}})),H=!1)}return!G&&!(0,g.J3)(F,J.series,g.bW)&&L++,F=J.series,{...J,structureRev:L}}))}))}applyTransformations(w){const K=this.dataConfigSource.getTransformations();if(K&&K.every(H=>H.disabled)||!K||K.length===0)return(0,r.of)(w);const L={interpolate:H=>this.templateSrv.replace(H,w?.request?.scopedVars)};let V=K.filter(H=>H.topic==null||H.topic===u.QR.Series),F=K.filter(H=>H.topic===u.QR.Annotations),z=(0,E.m)(V,w.series,L),Y=(0,E.m)(F,w.annotations??[],L);return(0,t.merge)(z,Y).pipe((0,o.T)(H=>{let ee=H.some(ie=>ie.meta?.dataTopic===u.QR.Annotations)?{annotations:H}:{series:H};return{...w,...ee}}),(0,m.W)(H=>(console.warn("Error running transformation:",H),(0,r.of)({...w,state:i.Gu.Error,errors:[(0,a.u)(H)]}))))}async run(w){const{queries:K,timezone:N,datasource:L,panelId:V,panelPluginId:F,dashboardUID:z,timeRange:Y,timeInfo:H,cacheTimeout:k,queryCachingTTL:ee,maxDataPoints:ie,scopedVars:fe,minInterval:q,app:Z}=w;if((0,f.kN)(L)){this.pipeToSubject((0,f.mw)(w,K[0]),V,!0);return}const J=this.shouldAddErrorWhenDatasourceVariableIsMultiple(L,fe),G={app:Z??p.Jk.Dashboard,requestId:A(),timezone:N,panelId:V,panelPluginId:F,dashboardUID:z,range:Y,timeInfo:H,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(K),maxDataPoints:ie,scopedVars:fe||{},cacheTimeout:k,queryCachingTTL:ee,startTime:Date.now(),rangeRaw:Y.raw};try{const ne=await B(L,G.scopedVars),te=ne.meta?.mixed;G.targets=G.targets.map(ue=>{const Te=ue.datasource?.type===h.dR.type;return(!ue.datasource||ue.datasource.uid!==ne.uid&&!te&&!Te)&&(ue.datasource=ne.getRef()),ue});const oe=q?this.templateSrv.replace(q,G.scopedVars):ne.interval,le=b.calculateInterval(Y,ie,oe);G.scopedVars=Object.assign({},G.scopedVars,{__interval:{text:le.interval,value:le.interval},__interval_ms:{text:le.intervalMs.toString(),value:le.intervalMs}}),G.interval=le.interval,G.intervalMs=le.intervalMs,G.filters=this.templateSrv.getAdhocFilters(ne.name,!0),this.lastRequest=G,this.pipeToSubject((0,v.BN)(ne,G),V,!1,J)}catch(ne){this.pipeToSubject((0,r.of)({state:i.Gu.Error,error:(0,a.u)(ne),series:[],timeRange:G.range}),V)}}pipeToSubject(w,K,N=!1,L=!1){this.subscription&&this.subscription.unsubscribe();let V=w;const F=this.dataConfigSource.getDataSupport();if(F.alertStates||F.annotations){const z=this.dataConfigSource;V=S(w,(0,D.Dh)().getResult(z.id))}this.subscription=V.subscribe({next:z=>{const Y=this.lastResult,H=N?z:(0,l.N$)(z,Y);if(Y!=null&&H.state!==i.Gu.Streaming){let k=(0,g.J3)(Y.series??[],H.series??[],(fe,q)=>fe===q),ee=(0,g.J3)(Y.annotations??[],H.annotations??[],(fe,q)=>fe===q),ie=Y.state===H.state;if(k&&(H.series=Y.series),ee&&(H.annotations=Y.annotations),k&&ee&&ie)return}this.lastResult=H,L&&(H.errors=[{message:"Panel is using a variable datasource with multiple values without repeat option. Please configure the panel to be repeated by the same datasource variable."}],H.state=i.Gu.Error),this.subject.next(H)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===i.Gu.Loading||this.lastResult.state===i.Gu.Streaming)&&this.subject.next({...this.lastResult,state:i.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.m(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(w){this.lastResult=w.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(w){this.lastResult=w}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}shouldAddErrorWhenDatasourceVariableIsMultiple(w,K){let N=!1;return w?.uid?.startsWith("${")&&this.templateSrv.replace(w.uid,K,L=>(Array.isArray(L)&&L.length>1&&(N=!0),"")),N}}async function B(U,w){return U&&typeof U=="object"&&"query"in U?U:await(0,y.tR)().get(U,w)}},81583:(Q,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(69850);function n(r,s){return(0,t.j)(()=>{s&&r.resolveCancelerIfExists(s)})}},72955:(Q,I,e)=>{"use strict";e.d(I,{B:()=>n});var t=e(21423);const n=(r,s)=>{let o=1;return s?.structureRev&&s.series&&(o=s.structureRev,(0,t.J3)(r.series,s.series,t.bW)||o++),r.structureRev=o,r}},39374:(Q,I,e)=>{"use strict";e.d(I,{BN:()=>w});var t=e(2543),n=e(62467),r=e(44240),s=e(39697),o=e(65474),m=e(81160),i=e(66847),l=e(59099),d=e(1005),c=e(65961),g=e(67791),u=e(39070),E=e(52622),p=e(85858),b=e(41987),a=e(12091),h=e(32264),P=e(26657),y=e(27677),C=e(21969),f=e(53478),D=e(34867);const T=(0,D.DW)("features.query");var M=e(81583),O=e(76885),S=e(61298),v=e(14110),x=e(14792);function A(N){let L=!1;return F=>{if(!F.request||L||O.kM.getUrlSearchParams().editPanel!=null||F.state!==u.Gu.Done&&F.state!==u.Gu.Error)return;const Y={eventName:S.n_.DataRequest,source:F.request.app,datasourceName:N.name,datasourceId:N.id,datasourceUid:N.uid,datasourceType:N.type,dataSize:0,panelId:0,panelPluginId:F.request?.panelPluginId,duration:F.request.endTime-F.request.startTime};V(Y,F),F.request.app!==b.Jk.Explore&&F.request.app!==b.Jk.Correlations&&R(Y,F),F.series&&F.series.length>0&&(Y.dataSize=F.series.length),(0,v.G$)(Y),L=!0};function V(F,z){const Y={};for(let k=0;k<z.series.length;k++){const ee=z.series[k].refId;ee&&!Y[ee]&&(Y[ee]=z.series[k].meta?.isCachedResponse??!1)}F.totalQueries=Object.keys(Y).length,F.cachedQueries=Object.values(Y).filter(k=>k===!0).length,z.request&&Number.isInteger(z.request.panelId)&&(F.panelId=z.request.panelId);const H=(0,x.UA)().getCurrent();H&&(F.dashboardId=H.id,F.dashboardName=H.title,F.dashboardUid=H.uid,F.folderName=H.meta.folderTitle)}}function R(N,L){L.errors?.length?N.error=L.errors.join(", "):L.error&&(N.error=L.error.message)}function B(N,L){const V=L.panelData.request,F={...L.packets},z=N.key??N.data?.[0]?.refId??"A";F[z]=N;let Y=N.state||u.Gu.Done,H,k;const ee=[],ie=[];for(const J in F){const G=F[J];if((G.error||G.errors?.length)&&(Y=u.Gu.Error,H=G.error,k=G.errors),G.data&&G.data.length)for(const ne of G.data){if(ne.meta?.dataTopic===E.QR.Annotations){ie.push(ne);continue}ee.push(ne)}}const fe=U(V,Y),q={state:Y,series:ee,annotations:ie,error:H,errors:k,request:V,timeRange:fe},Z=new Set([...L.panelData.traceIds??[],...N.traceIds??[]]);return Z.size>0&&(q.traceIds=Array.from(Z)),{packets:F,panelData:q}}function U(N,L){const V=N.range;return!(0,t.isString)(V.raw.from)||L!==u.Gu.Streaming?V:{...V,from:p.parse(V.raw.from,!1),to:p.parse(V.raw.to,!0)}}function w(N,L,V){let F={panelData:{state:u.Gu.Loading,series:[],request:L,timeRange:L.range},packets:{}};if(!L.targets.length)return L.endTime=Date.now(),F.panelData.state=u.Gu.Done,(0,n.of)(F.panelData);const z=K(N,L,V).pipe((0,m.T)(Y=>{if(!(0,t.map)(Y.data))throw new Error(`Expected response data to be array, got ${typeof Y.data}.`);const H=L.targets.filter(k=>k.hide);for(const k of H)Y.data=Y.data.filter(ee=>ee.refId!==k.refId);return L.endTime=Date.now(),F=B(Y,F),F.panelData}),(0,i.W)(Y=>(console.error("runRequest.catchError",Y),T.logError(Y),(0,n.of)({...F.panelData,state:u.Gu.Error,error:(0,a.u)(Y)}))),(0,l.M)(A(N)),(0,M.N)(y.IB,L.requestId),(0,d.u)());return(0,r.h)((0,s.O)(200).pipe((0,c.u)(F.panelData),(0,g.Q)(z)),z)}function K(N,L,V){if(L.targets=L.targets.map(z=>(0,C.Ih)(z)?{...N?.getDefaultQuery?.(b.Jk.PanelEditor),...z}:z),h.$.publicDashboardAccessToken)return(0,o.H)(N.query(L));for(const z of L.targets)if((0,P.s9)(z.datasource))return f.Ex.query(L);if(V||(L.targets=L.targets.filter(z=>N.filterQuery?.(z)??!0)),L.targets.length===0)return(0,n.of)({data:[]});const F=V?V(L):N.query(L);return(0,o.H)(F)}},93117:(Q,I,e)=>{"use strict";e.d(I,{y:()=>m});var t=e(41987),n=e(73372),r=e(72574),s=e(26657),o=e(21969);async function m(i,l,d,c){let g=d;const u={type:i.type,uid:l},E={...i?.getDefaultQuery?.(t.Jk.PanelEditor),datasource:u,refId:"A"};if(c?.meta.id!==i.meta.id){if(i.meta.mixed)return d;if((0,n.Ee)(c)&&(0,n.FL)(i)){const p=await c.exportToAbstractQueries(d);g=await i.importFromAbstractQueries(p)}else if(c&&i.importQueries)g=await i.importQueries(d,c);else{if(c){const p=(0,r.w)(),b=[];let a=i.uid;const h=p.containsTemplate(l);h&&(a=p.replace(i.uid));const P=d.reduce((y,C)=>{if(C.datasource){let f=C.datasource.uid;const D=p.containsTemplate(f);if(D&&(f=p.replace(C.datasource.uid)),f===a&&D===h)return C.refId=(0,o.W3)(y),y.concat([C])}return y},b);if(P.length>0)return P}return[E]}}return g.length===0?[E]:g.map(p=>(!(0,s.s9)(p.datasource)&&!i.meta.mixed&&(p.datasource=u),p))}},53477:(Q,I,e)=>{"use strict";e.d(I,{G3:()=>m,TF:()=>d,XJ:()=>p,YU:()=>u,d7:()=>g,if:()=>b,r4:()=>o,w7:()=>E});var t=e(64161);const n=null,r=58,s=8,o={label:"A\u2013Z",value:"alpha-asc"},m="search.sections",i="grafana.search.expanded-folder",l=0,d="general",c="General",g="grafana.search.include.panels",u="grafana.search.layout",E="grafana.search.sort",p={dashboard:t.G.DashDB,folder:t.G.DashFolder,home:t.G.DashHome},b=1e3},97427:(Q,I,e)=>{"use strict";e.d(I,{d:()=>o,n:()=>m});var t=e(96540),n=e(13752),r=e(71733),s=e(12131);function o(){const i=(0,t.useRef)(new n.B);return{keyboardEvents:i.current,onKeyDown:l=>{switch(l.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":i.current.next(l);default:}}}}function m(i,l,d){const c=(0,t.useRef)({x:0,y:-1}),[g,u]=(0,t.useState)({x:0,y:-1}),E=(0,t.useRef)();return(0,t.useEffect)(()=>{E.current=d.view.fields.url,c.current.x=0,c.current.y=-1,u({...c.current})},[d]),(0,t.useEffect)(()=>{const p=i.subscribe({next:b=>{switch(b?.code){case"ArrowDown":{c.current.y++,u({...c.current});break}case"ArrowUp":c.current.y=Math.max(0,c.current.y-1),u({...c.current});break;case"ArrowRight":{l>0&&(c.current.x=Math.min(l,c.current.x+1),u({...c.current}));break}case"ArrowLeft":{l>0&&(c.current.x=Math.max(0,c.current.x-1),u({...c.current}));break}case"Enter":if(!E.current)break;const a=c.current.x*l+c.current.y;if(a<0){c.current.x=0,c.current.y=0,u({...c.current});break}const h=E.current.values?.[a];typeof h=="string"&&s.Ny.push(r.I.stripBaseFromUrl(h))}}});return()=>p.unsubscribe()},[i,l]),g}},6204:(Q,I,e)=>{"use strict";e.d(I,{B9:()=>m,J$:()=>s,KZ:()=>o,MK:()=>r,Pf:()=>n});var t=e(14110);const n=(l,d)=>{(0,t.rR)(`${l}_viewed`,i(d))},r=(l,d)=>{(0,t.rR)(`${l}_result_clicked`,i(d))},s=(l,d)=>{(0,t.rR)(`${l}_query_submitted`,i(d))},o=(l,{error:d,...c})=>{(0,t.rR)(`${l}_query_failed`,{...i(c),error:d})},m=(l,d,c)=>{(0,t.rR)(`grafana_panel_inspect_${l}_${d}_clicked`,c)},i=l=>({layout:l.layout,starredFilter:l.starred??!1,sort:l.sortValue??"",tagCount:l.tagCount??0,queryLength:l.query?.length??0,includePanels:l.includePanels??!1})},24439:(Q,I,e)=>{"use strict";e.d(I,{getGrafanaSearcher:()=>O});var t=e(32264),n=e(78368),r=e(14236),s=e(57875),o=e(17172),m=e(40957);const i="Loading",l="api/search-v2",d="name_sort";class c{constructor(v){this.fallbackSearcher=v}async search(v){if(v.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(v)}async starred(v){if(v.facet?.length)throw new Error("facets not supported!");const x=await(0,o.AI)().get("api/user/stars");return x?.length?this.doSearchQuery({uid:x,query:v.query??"*"}):{view:new n.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(A,R)=>{},isItemLoaded:A=>!0}}async tags(v){const x={...v,query:v.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},R=(await(0,o.AI)().post(l,x)).frames.map(B=>(0,r.Vc)(B));if(R[0]?.name===i)return this.fallbackSearcher.tags(v);for(const B of R)if(B.fields[0].name==="tag")return E(B);return[]}getSortOptions(){const v=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.$.licenseInfo.enabledFeatures.analytics){for(const x of p)v.push({value:`-${x.name}`,label:`${x.display} (most)`}),v.push({value:`${x.name}`,label:`${x.display} (least)`});for(const x of b)v.push({value:`-${x.name}`,label:`${x.display} (recent)`}),v.push({value:`${x.name}`,label:`${x.display} (oldest)`})}return Promise.resolve(v)}async doSearchQuery(v){v=await(0,m.u4)(v);const x={...v,query:v.query??"*",limit:v.limit??g},R=(await(0,o.AI)().post(l,x)).frames.map(V=>(0,r.Vc)(V)),B=R.length?(0,r.Vc)(R[0]):{fields:[],length:0};if(B.name===i)return this.fallbackSearcher.search(v);for(const V of B.fields)V.display=(0,s.J)({field:V,theme:t.$.theme2});B.meta?.custom||(B.meta={...B.meta,custom:{count:B.length,max_score:1}});const U=B.meta.custom;if(U.locationInfo||(U.locationInfo={}),U.sortBy?.length){const V=B.fields.find(F=>F.name===U.sortBy);if(V){const F=a(V.name);U.sortBy=F,V.name=F}}let w=0,K;const N=async()=>{for(;w>L.dataFrame.length;){const V=L.dataFrame.length;if(V>=U.count)return;const F=await(0,o.AI)().post(l,{...x??{},from:V,limit:u}),z=(0,r.Vc)(F.frames[0]);if(!z){console.log("no results",z);return}if(z.fields.length!==L.dataFrame.fields.length){console.log("invalid shape",z,L.dataFrame);return}const Y=z.length+L.dataFrame.length;for(let k=0;k<z.fields.length;k++)L.dataFrame.fields[k].values.push(...z.fields[k].values);L.dataFrame.length=Y;const H=z.meta?.custom;if(H?.locationInfo&&U)for(const[k,ee]of Object.entries(H.locationInfo))U.locationInfo[k]=ee}K=void 0},L=new n.R(B);return{totalRows:U.count??B.length,view:L,loadMoreItems:async(V,F)=>(w=Math.max(w,F),K||(K=N()),K),isItemLoaded:V=>V<L.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const g=50,u=100;function E(S){const v=S.fields[0].values,x=S.fields[1].values,A=[];for(let R=0;R<S.length;R++)A.push({term:v[R],count:x[R]});return A}const p=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],b=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function a(S){for(const v of p)if(v.name===S)return v.display;for(const v of b)if(v.name===S)return v.display;return S}var h=e(53076);class P{constructor(v){this.parent=v,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(v){if(v.facet?.length)throw new Error("facets not supported!");if(v.sort!=null)throw new Error("custom sorting is not supported yet");if(v.tags?.length||v.ds_uid?.length)return this.parent.search(v);const A=(await this.getCache(v.kind)).search(v.query);return{isItemLoaded:()=>!0,loadMoreItems:async(R,B)=>{},totalRows:A.length,view:A}}async getCache(v){const x=v?v.sort().join(","):"*",A=this.cache.get(x);if(A)try{return await A}catch{return this.cache.delete(x),new y(new n.R({name:"error",fields:[],length:0}))}const R=this.parent.search({kind:v,limit:5e3}).then(B=>new y(B.view));return this.cache.set(x,R),R}async starred(v){return this.parent.starred(v)}async getSortOptions(){return this.parent.getSortOptions()}async tags(v){return this.parent.tags(v)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class y{constructor(v){this.full=v,this.ufuzzy=new h.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.R({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(x=>({...x,values:[]})),length:0})}search(v){if(!v?.length||v==="*")return this.full;const x=this.full.dataFrame.fields,A=this.names,R=x.map(K=>[]);let[B,U,w]=this.ufuzzy.search(A,v,5);for(let K=0;K<x.length;K++){let N=x[K].values,L=R[K];if(U&&w)for(let V=0;V<w.length;V++){let F=U.idx[w[V]];L.push(N[F])}else if(B)for(let V=0;V<B.length;V++){let F=B[V];L.push(N[F])}}return this.empty.dataFrame.fields.forEach((K,N)=>{K.values=R[N]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var C=e(11261),f=e(27677),D=e(53477);class T{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards"}},this.getFolderViewSort=()=>""}async composeQuery(v,x){const A=await(0,m.u4)(x);return A.query?.length&&A.query!=="*"&&(v.query=A.query),A.kind?.length===1&&D.XJ[A.kind[0]]&&(v.type=D.XJ[A.kind[0]]),A.uid?v.dashboardUID=A.uid:A.location?.length&&(v.folderUIDs=[A.location]),v}async search(v){if(v.facet?.length)throw new Error("facets not supported!");if(v.from!==void 0){if(!v.limit)throw new Error("Must specify non-zero limit parameter when using from");if(v.from/v.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const x=v.limit??(v.from!==void 0?1:D.if),A=v.from!==void 0?v.from/x+1:void 0,R=await this.composeQuery({limit:x,tag:v.tags,sort:v.sort,permission:v.permission,page:A},v);return this.doAPIQuery(R)}async starred(v){if(v.facet?.length)throw new Error("facets not supported!");const x=await this.composeQuery({limit:v.limit??D.if,tag:v.tags,sort:v.sort,starred:v.starred},v);return this.doAPIQuery(x)}async getSortOptions(){return(await f.IB.get("/api/search/sorting")).sortOptions.map(x=>({value:x.name,label:x.displayName}))}async tags(v){return(await f.IB.get("/api/dashboards/tags")).sort((A,R)=>R.count-A.count)}async doAPIQuery(v){const x=await f.IB.get("/api/search",v),A=[],R=[],B=[],U=[],w=[],K=[],N=[];let L;for(let z of x){const Y=z.type==="dash-folder"?"folder":"dashboard";A.push(Y),R.push(z.title),B.push(z.uid),U.push(z.url),w.push(z.tags),N.push(z.sortMeta);let H=z.folderUid;!H&&Y==="dashboard"&&(H="general"),K.push(H),z.sortMetaName?.length&&(L=z.sortMetaName),z.folderUid&&z.folderTitle?this.locationInfo[z.folderUid]={kind:"folder",name:z.folderTitle,url:z.folderUrl,folderUid:z.folderUid}:Y==="folder"&&(this.locationInfo[z.uid]={kind:Y,name:z.title,url:z.url,folderUid:z.folderUid})}const V={fields:[{name:"kind",type:C.PU.string,config:{},values:A},{name:"name",type:C.PU.string,config:{},values:R},{name:"uid",type:C.PU.string,config:{},values:B},{name:"url",type:C.PU.string,config:{},values:U},{name:"tags",type:C.PU.other,config:{},values:w},{name:"location",type:C.PU.string,config:{},values:K}],length:R.length,meta:{custom:{count:R.length,max_score:1,locationInfo:this.locationInfo}}};L?.length&&N.length&&(V.meta.custom.sortBy=L,V.fields.push({name:L,type:C.PU.number,config:{},values:N}));for(const z of V.fields)z.display=(0,s.J)({field:z,theme:t.$.theme2});const F=new n.R(V);return{totalRows:V.length,view:F,loadMoreItems:async(z,Y)=>{},isItemLoaded:z=>!0}}}let M;function O(){if(!M){const S=new T,v=t.$.featureToggles.panelTitleSearch;M=v?new c(S):S,v&&location.search.includes("do-frontend-query")&&(M=new P(M))}return M}},40957:(Q,I,e)=>{"use strict";e.d(I,{TM:()=>m,cu:()=>i,hI:()=>d,u4:()=>r});var t=e(49952),n=e(14792);async function r(c){return c.query&&c.query.indexOf("folder:current")>=0&&(c={...c,location:await s(),query:c.query.replace("folder:current","").trim()},c.query?.length||(c.query="*")),Promise.resolve(c)}async function s(){try{let c=(0,n.UA)().getCurrent();return c||(await o(500),c=(0,n.UA)().getCurrent()),Promise.resolve(c?.meta?.folderUid)}catch(c){console.error(c)}}function o(c){return new Promise(g=>setTimeout(g,c))}function m(c,g){return c==="dashboard"?"apps":c==="folder"?g?"folder-open":"folder":"question-circle"}function i(c,g){return c&&(0,t.I)(c.uid)?"users-alt":m(c.kind,g)}function l(c){switch(c){case"dashboard":case"folder":case"panel":return c;default:return"dashboard"}}function d(c,g){const u=g?.dataFrame.meta?.custom,E={kind:l(c.kind),uid:c.uid,title:c.name,url:c.url,tags:c.tags??[]},p=u?.sortBy;if(p){const b=c[p];(typeof b=="string"||typeof b=="number")&&(E.sortMetaName=p,E.sortMeta=b)}if(c.location){const b=c.location.split("/"),a=b[b.length-1],h=u?.locationInfo[a];h&&(E.parentTitle=h.name,E.parentKind=h.kind,E.parentUID=a)}return E}},64161:(Q,I,e)=>{"use strict";e.d(I,{G:()=>t,P:()=>n});var t=(r=>(r.DashDB="dash-db",r.DashHome="dash-home",r.DashFolder="dash-folder",r))(t||{}),n=(r=>(r.List="list",r.Folders="folders",r))(n||{})},16757:(Q,I,e)=>{"use strict";e.d(I,{N1:()=>o,W1:()=>r});var t=e(53477);const n=m=>m?!!(m.query||m.tag?.length>0||m.starred||m.sort):!1,r=()=>{const m=t.G3+".";for(let i=0;i<window.localStorage.length;i++){const l=window.localStorage.key(i);l?.startsWith(m)&&window.localStorage.removeItem(l)}},s=(m="General")=>`${SECTION_STORAGE_KEY}.${m.toLowerCase()}`,o=m=>{const i=Object.entries(m).reduce((l,[d,c])=>{if(c){if(d==="tag"&&!Array.isArray(c))return{...l,tag:[c]}}else return l;return{...l,[d]:c}},{});if(m.folder){const l=`folder:${m.folder}`;return{...i,query:`${l} ${(i.query??"").replace(l,"")}`}}return{...i}}},1936:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>D,EC:()=>y,FW:()=>b,G3:()=>l,L5:()=>f,QM:()=>m,Yh:()=>a,aD:()=>d,c3:()=>C,ch:()=>i,dJ:()=>c,ew:()=>P,jE:()=>g,zh:()=>h});var t=e(30038),n=e(31678);const r={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.Z0)({name:"serviceaccount",initialState:r,reducers:{serviceAccountFetchBegin:T=>({...T,isLoading:!0}),serviceAccountFetchEnd:T=>({...T,isLoading:!1}),serviceAccountLoaded:(T,M)=>({...T,serviceAccount:M.payload,isLoading:!1}),serviceAccountTokensLoaded:(T,M)=>({...T,tokens:M.payload,isLoading:!1}),rolesFetchBegin:T=>({...T,rolesLoading:!0}),rolesFetchEnd:T=>({...T,rolesLoading:!1})}}),o=s.reducer,{serviceAccountLoaded:m,serviceAccountTokensLoaded:i,serviceAccountFetchBegin:l,serviceAccountFetchEnd:d,rolesFetchBegin:c,rolesFetchEnd:g}=s.actions,u={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},E=(0,t.Z0)({name:"serviceaccounts",initialState:u,reducers:{serviceAccountsFetched:(T,M)=>{const{totalCount:O,perPage:S,...v}=M.payload,x=Math.ceil(O/S);return{...T,...v,totalPages:x,perPage:S,showPaging:x>1,isLoading:!1}},serviceAccountsFetchBegin:T=>({...T,isLoading:!0}),serviceAccountsFetchEnd:T=>({...T,isLoading:!1}),acOptionsLoaded:(T,M)=>({...T,roleOptions:M.payload}),queryChanged:(T,M)=>({...T,query:M.payload,page:0}),pageChanged:(T,M)=>({...T,page:M.payload}),stateFilterChanged:(T,M)=>({...T,serviceAccountStateFilter:M.payload})}}),p=E.reducer,{serviceAccountsFetchBegin:b,serviceAccountsFetchEnd:a,serviceAccountsFetched:h,acOptionsLoaded:P,pageChanged:y,stateFilterChanged:C,queryChanged:f}=E.actions,D={serviceAccountProfile:o,serviceAccounts:p}},8212:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>E,NV:()=>g,Y1:()=>l,j7:()=>i,kH:()=>m,pB:()=>c,s7:()=>d,sF:()=>o,sJ:()=>s});var t=e(30038);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},r=(0,t.Z0)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(p,b)=>({...p,supportBundles:b.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,b)=>({...p,supportBundleCollectors:b.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,b)=>({...p,loadBundlesError:b.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,b)=>({...p,createBundleError:b.payload})}}),{supportBundlesLoaded:s,fetchBegin:o,fetchEnd:m,supportBundleCollectorsLoaded:i,collectorsFetchBegin:l,collectorsFetchEnd:d,setLoadBundleError:c,setCreateBundleError:g}=r.actions,E={supportBundles:r.reducer}},34655:(Q,I,e)=>{"use strict";e.d(I,{$T:()=>E,$u:()=>i,Ay:()=>P,EC:()=>m,L5:()=>o,Q9:()=>s,dJ:()=>l,jE:()=>d,tC:()=>p});var t=e(30038);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},r=(0,t.Z0)({name:"teams",initialState:n,reducers:{teamsLoaded:(y,C)=>{const{totalCount:f,perPage:D,...T}=C.payload,M=Math.ceil(f/D);return{...y,...T,totalPages:M,perPage:D,hasFetched:!0}},queryChanged:(y,C)=>({...y,page:1,query:C.payload}),pageChanged:(y,C)=>({...y,page:C.payload}),sortChanged:(y,C)=>({...y,sort:C.payload,page:1}),rolesFetchBegin:y=>({...y,rolesLoading:!0}),rolesFetchEnd:y=>({...y,rolesLoading:!1})}}),{teamsLoaded:s,queryChanged:o,pageChanged:m,sortChanged:i,rolesFetchBegin:l,rolesFetchEnd:d}=r.actions,c=r.reducer,g={team:{},members:[],groups:[],searchMemberQuery:""},u=(0,t.Z0)({name:"team",initialState:g,reducers:{teamLoaded:(y,C)=>({...y,team:C.payload}),teamMembersLoaded:(y,C)=>({...y,members:C.payload}),setSearchMemberQuery:(y,C)=>({...y,searchMemberQuery:C.payload}),teamGroupsLoaded:(y,C)=>({...y,groups:C.payload})}}),{teamLoaded:E,teamGroupsLoaded:p,teamMembersLoaded:b,setSearchMemberQuery:a}=u.actions,h=u.reducer,P={teams:c,team:h}},23989:(Q,I,e)=>{"use strict";e.d(I,{w:()=>Z});var t=e(2543),n=e(95344),r=e(19347),s=e(72574),o=e(86849),m=e(52622),i=e(73788),l=e(20601),d=e(13344),c=e(24240),g=e(87421),u=e(75096);let E={};function p(J){const G=E[J];return G||(E[J]=(0,t.property)(J))}class b{constructor(G,ne,te){this.state={name:G.name,value:ne,text:te,type:G.type}}getValue(G){let{value:ne}=this.state;return ne==="string"||ne==="number"||ne==="boolean"?ne:String(ne)}getValueText(){const{value:G,text:ne}=this.state;return typeof ne=="string"?G===d.To?d.Zm:ne:Array.isArray(ne)?ne.join(" + "):(console.log("value",ne),String(ne))}}let a;function h(J,G,ne){return a?(a.state.name=J.name,a.state.type=J.type,a.state.value=G,a.state.text=ne):a=new b(J,G,ne),a}function P(J,G,ne,te){if(ne=ne||{},J==null||(0,c.EW)(ne)&&G!==m.$m.QueryParam)return"";if(!Array.isArray(J)&&typeof J=="object"&&(J=`${J}`),typeof G=="function")return G(J,ne,P);G||(G=m.$m.Glob);let oe=G.split(":");oe.length>1?(G=oe[0],oe=oe.slice(1)):oe=[];let le=o.vz.getIfExists(G);le||(console.error(`Variable format ${G} not found. Using glob format as fallback.`),le=o.vz.get(m.$m.Glob));const ue=h(ne,J,te??J);return le.formatter(J,oe,ue)}var y=e(84743),C=e.n(y),f=e(6709),D=e(76885),T=e(1933),M=e(74856),O=e(25304),S=e(83195),v=e(11261),x=e(92461),A=e(57875),R=e(28240),B=e(8249);function U(J,G,ne){return new Proxy({},{get:(te,oe)=>{if(oe==="name")return J.name;if(oe==="displayName")return(0,R.Ct)(J,G,ne);if(oe==="labels"||oe==="formattedLabels")return J.labels?{...J.labels,__values:Object.values(J.labels).sort().join(", "),toString:()=>(0,B.h6)(J.labels,"",!0)}:""}})}function w(J,G,ne,te){const oe=K(J,G,ne);return P(oe,te)}function K(J,G,ne){const te=ne?.__dataContext;if(!te)return J;const{frame:oe,rowIndex:le,field:ue,calculatedValue:Te}=te.value;if(Te)switch(G){case"numeric":return Te.numeric.toString();case"raw":return Te.numeric;case"time":return"";case"text":default:return(0,S.cN)(Te)}if(le===void 0)return J;if(G==="time"){const Fe=oe.fields.find(Ee=>Ee.type===v.PU.time);return Fe?Fe.values[le]:void 0}const he=ue.values[le];if(G==="raw")return he;const De=(ue.display??V())(he);switch(G){case"numeric":return De.numeric;case"text":return De.text;default:return(0,S.cN)(De)}}function N(J,G,ne,te){const oe=ne?.__dataContext;if(!oe||!G)return J;const{frame:le,rowIndex:ue}=oe.value;if(ue===void 0||G===void 0)return J;const Te={name:le.name,refId:le.refId,fields:(0,x.F)({frame:le,rowIndex:ue})},he=p(G)(Te)??"";return P(he,te)}let L;function V(){return L||(L=(0,A.J)()),L}function F(J,G,ne,te){const oe=ne?.__dataContext;if(!oe||G!=="name")return J;const{frame:le,frameIndex:ue}=oe.value,Te=(0,R.Ri)(le,ue);return P(Te,te)}function z(J,G,ne,te){const oe=ne?.__dataContext;if(!oe||G===void 0||G==="")return J;const{frame:le,field:ue,data:Te}=oe.value,he=U(ue,le,Te),re=p(G)(he)??"";return P(re,te)}const Y={__value:w,__data:N,__series:F,__field:z,[f.c.includeVars]:H,[f.c.keepTime]:k,__timezone:ee};function H(J,G,ne){const te=(0,O.z)(ne);return D.kM.toUrlParams(te)}function k(){return D.kM.toUrlParams((0,M.jG)().timeRangeForUrl())}function ee(){const J=(0,T.O)({timeZone:(0,M.jG)().timeModel?.getTimezone()});return J==="browser"?C().tz.guess():J}const ie={getFilteredVariables:g.bZ,getVariables:g.UN,getVariableWithName:g._2};class fe{constructor(G=ie){this.dependencies=G,this.regex=u.SY,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(G,ne){this._variables=G,this.timeRange=ne,this.updateIndex()}get variables(){return(0,n.l)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?(0,i.E)(window.__grafanaSceneContext):this.dependencies.getVariables()}updateIndex(){const G=ne=>ne||ne==="";if(this.index=this._variables.reduce((ne,te)=>(te.current&&(te.current.isNone||G(te.current.value))&&(ne[te.name]=te),ne),{}),this.timeRange){const ne=this.timeRange.from.valueOf().toString(),te=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:ne,text:ne}},__to:{current:{value:te,text:te}}}}}updateTimeRange(G){this.timeRange=G,this.updateIndex()}variableInitialized(G){this.index[G.name]=G}getAdhocFilters(G,ne){let te=[],oe=(0,r.l)().getInstanceSettings(G);if(!oe)return[];!ne&&!this._adhocFiltersDeprecationWarningLogged.get(oe.type)&&((0,n.l)(`DataSource ${oe.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(oe.type,!0));for(const le of this.getAdHocVariables()){const ue=le.datasource?.uid;(ue===oe.uid||ue?.indexOf("$")===0&&this.replace(ue)===oe.uid)&&(te=te.concat(le.filters))}return te}setGrafanaVariable(G,ne){this.grafanaVariables.set(G,ne)}setGlobalVariable(G,ne){(0,n.l)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[G]:{current:ne}}}getVariableName(G){this.regex.lastIndex=0;const ne=this.regex.exec(G);return ne?ne.slice(1).find(oe=>oe!==void 0):null}containsTemplate(G){if(!G)return!1;const ne=this.getVariableName(G),te=ne&&this.getVariableAtIndex(ne);return te!=null}variableExists(G){return(0,n.l)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(G)}highlightVariablesAsHtml(G){return!G||!(0,t.isString)(G)?G:(G=(0,t.escape)(G),this._replaceWithVariableRegex(G,void 0,(ne,te)=>this.getVariableAtIndex(te)?'<span class="template-variable">'+ne+"</span>":ne))}getAllValue(G){if(G.allValue)return G.allValue;const ne=[];for(let te=1;te<G.options.length;te++)ne.push(G.options[te].value);return ne}getVariableValue(G,ne){return ne?p(ne)(G.value):G.value}getVariableText(G,ne){return G.value===ne||typeof ne!="string"?G.text:ne}replace(G,ne,te,oe){return ne&&ne.__sceneObject?o.jh.interpolate(ne.__sceneObject.value,G,ne,te):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.jh.interpolate(window.__grafanaSceneContext,G,ne,te):G?(this.regex.lastIndex=0,this._replaceWithVariableRegex(G,te,(le,ue,Te,he)=>{const re=this._evaluateVariableExpression(le,ue,Te,he,ne);return oe&&oe.push({match:le,variableName:ue,fieldPath:Te,format:he,value:re,found:re!==le}),re})):G??""}_evaluateVariableExpression(G,ne,te,oe,le){const ue=this.getVariableAtIndex(ne),Te=le?.[ne];if(Te){const Fe=this.getVariableValue(Te,te),Ee=this.getVariableText(Te,Fe);if(Fe!=null)return P(Fe,oe,ue,Ee)}if(!ue){const Fe=Y[ne];return Fe?Fe(G,te,le,oe):G}if(oe===m.$m.QueryParam||(0,c.EW)(ue)){const Fe=l.B.get(ue.type).getValueForUrl(ue),Ee=(0,c.EW)(ue)?ue.id:ue.current.text;return P(Fe,oe,ue,Ee)}const he=this.grafanaVariables.get(ue.current.value);if(he)return P(he,oe,ue);let re=ue.current.value,De=ue.current.text;if(this.isAllValue(re)&&(re=this.getAllValue(ue),De=d.Zm,ue.allValue&&oe!==m.$m.Text&&oe!==m.$m.PercentEncode))return this.replace(re);if(te){const Fe=this.getVariableValue({value:re,text:De},te);if(Fe!=null)return P(Fe,oe,ue,De)}return P(re,oe,ue,De)}_replaceWithVariableRegex(G,ne,te){return this.regex.lastIndex=0,G.replace(this.regex,(oe,le,ue,Te,he,re,De)=>te(oe,le||ue||he,re,Te||De||ne))}isAllValue(G){return G===d.To||Array.isArray(G)&&G[0]===d.To}replaceWithText(G,ne){return(0,n.l)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(G,ne,"text")}getVariableAtIndex(G){if(G)return this.index[G]?this.index[G]:this.dependencies.getVariableWithName(G)}getAdHocVariables(){return this.dependencies.getFilteredVariables(c.EW)}}const q=new fe;(0,s.d)(q);const Z=()=>q},3817:(Q,I,e)=>{"use strict";e.d(I,{v:()=>N});var t=e(4200),n=e(86849);function r({title:L,unit:V}){return n.d0.timeseries().setTitle(L).setUnit(V).setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9)}function s({description:L,mainQueryExpr:V,breakdownQueryExpr:F,unit:z}){const Y={title:`${t.Rp}`,unit:z},H={refId:"A",expr:V,legendFormat:L},k={...Y,title:L,queries:[H],variant:"main",vizBuilder:()=>r({...k})},ee={...k,title:`${t.Rp}`,queries:[{...H,legendFormat:L}],vizBuilder:()=>r(ee),variant:"preview"},ie={...Y,queries:[{refId:"A",expr:F,legendFormat:`{{${t.aZ}}}`}],vizBuilder:()=>r(ie),variant:"breakdown"};return{preview:ee,main:k,breakdown:ie,variants:[]}}const o=`${t.Rp}${t.ui}`,m=`rate(${o}[$__rate_interval])`;function i(L){return L?m:o}const l={avg:"average",sum:"overall"};function d(L){return l[L]||L}function c({agg:L,rate:V,unit:F}){const z=i(V),Y=V?`${d(L)} per-second rate`:`${d(L)}`,H=`${t.Rp} (${Y})`,k=`${L}(${z})`,ee=`${L}(${z})by(${t.aZ})`;return s({description:H,mainQueryExpr:k,breakdownQueryExpr:ee,unit:F})}const g="short";function u(L){return L&&E[L]||g}const E={bytes:"bytes",seconds:"s"},p={bytes:"Bps",seconds:"short"},b="cps";function a(L){return L&&p[L]||b}const h=new Set(["count","total"]),P=new Set(["sum","bucket"]),y={count:"sum",total:"sum"};function C(L){return L==="total"}function f(L){const V=L.at(-1);if(V==null||P.has(V))throw new Error(`This function does not support a metric suffix of "${V}"`);const F=h.has(V),z=y[V]||"avg",Y=C(V)?L.at(-2):V,H=F?a(Y):u(Y);return{agg:z,unit:H,rate:F}}function D(L){const V=f(L);return c(V)}const T={generator:D};var M=e(52995);function O({title:L,unit:V}){return n.d0.heatmap().setTitle(L).setUnit(V).setOption("calculate",!1).setOption("color",{mode:M.P7.Scheme,exponent:.5,scheme:"Spectral",steps:32,reverse:!1})}function S({title:L,unit:V}){return n.d0.timeseries().setTitle(L).setUnit(V).setCustomFieldConfig("fillOpacity",9)}function v(L){const V=`${t.Rp}`,F=L.at(-2),z=u(F),Y={title:V,unit:z},H={...Y,variant:"p50",queries:[B(50)],vizBuilder:()=>r(H)},k={...Y,variant:"p50",queries:[B(50,[t.aZ])],vizBuilder:()=>r(k)},ee={...Y,variant:"percentiles",queries:[99,90,50].map(fe=>B(fe)),vizBuilder:()=>S(ee)},ie={...Y,variant:"heatmap",queries:[R()],vizBuilder:()=>O(ie)};return{preview:H,main:ee,variants:[ee,ie],breakdown:k}}const x=`rate(${t.Rp}${t.ui}[$__rate_interval])`;function A(L=[]){return`sum by(${["le",...L].join(", ")}) (${x})`}function R(L=[]){return{refId:"Heatmap",expr:A(L),format:"heatmap"}}function B(L,V=[]){const F=L/100;return{refId:`Percentile${L}`,expr:`histogram_quantile(${F}, ${A(V)})`,legendFormat:`${L}th Percentile`}}function U(L){if(L.at(-1)!=="sum")throw new Error('createSummaryQueryDefs is only to be used for metrics that end in "_sum"');const F=L.at(-2),z=u(F),H=i(!0),k=L.slice(0,-1).join("_"),ee=Z(`sum(${H})`),ie=Z(`sum(${H})by(${t.aZ})`),q=`${k} (average)`;function Z(J){const G=J.replace(t.Rp,`${k}_sum`),ne=J.replace(t.Rp,`${k}_count`);return`${G}/${ne}`}return s({description:q,mainQueryExpr:ee,breakdownQueryExpr:ie,unit:z})}const w={sum:U,bucket:v};function K(L){return L&&w[L]||T.generator}function N(L){const V=L.split("_"),F=V.at(-1),z=K(F);if(!z)throw new Error(`Unable to generate queries for metric "${L}" due to issues with derived suffix "${F}"`);return z(V)}},56833:(Q,I,e)=>{"use strict";e.d(I,{b:()=>f,B:()=>D});var t=e(32196),n=e(96540),r=e(76885),s=e(12470),o=e(12131),m=e(86849),i=e(40845),l=e(15292),d=e(83122),c=e(27746),g=e(40588);class u extends m.Bs{constructor(v){super({stickyMainGraph:v.stickyMainGraph??!0,isOpen:v.isOpen??!1}),this.onToggleStickyMainGraph=()=>{const x=!this.state.stickyMainGraph;(0,g.z)("settings_changed",{stickyMainGraph:x}),this.setState({stickyMainGraph:x})},this.onToggleOpen=x=>{this.setState({isOpen:x})}}static{this.Component=({model:v})=>{const{stickyMainGraph:x,isOpen:A}=v.useState(),R=(0,i.of)(E),B=()=>n.createElement("div",{className:R.popover,onClick:U=>U.stopPropagation()},n.createElement("div",{className:R.heading},"Settings"),n.createElement("div",{className:R.options},n.createElement("div",null,"Always keep selected metric graph in-view"),n.createElement(l.d,{value:x,onChange:v.onToggleStickyMainGraph})));return n.createElement(d.m,{overlay:B,placement:"bottom",onVisibleChange:v.onToggleOpen},n.createElement(c.I,{icon:"cog",variant:"canvas",isOpen:A}))}}}function E(S){return{popover:(0,t.css)({display:"flex",padding:S.spacing(2),flexDirection:"column",background:S.colors.background.primary,boxShadow:S.shadows.z3,borderRadius:S.shape.borderRadius(),border:`1px solid ${S.colors.border.weak}`,zIndex:1,marginRight:S.spacing(2)}),heading:(0,t.css)({fontWeight:S.typography.fontWeightMedium,paddingBottom:S.spacing(2)}),options:(0,t.css)({display:"grid",gridTemplateColumns:"1fr 50px",rowGap:S.spacing(1),columnGap:S.spacing(2)})}}var p=e(13054),b=e(75176),a=e(59055),h=e(90623),P=e(74764),y=e(88434),C=e(4200);class f extends m.Bs{constructor(v){super({$timeRange:v.$timeRange??new m.JZ({}),$variables:v.$variables??T(v.initialDS,v.metric,v.initialFilters),controls:v.controls??[new m.K8({layout:"vertical"}),new m.N0,new m.KE({}),new m.WM({})],history:v.history??new p.L({}),settings:v.settings??new u({}),createdAt:v.createdAt??new Date().getTime(),...v}),this._urlSync=new m.So(this,{keys:["metric"]}),this._variableDependency=new m.Sh(this,{variableNames:[C.EY],onReferencedVariableValueChanged:x=>{const{name:A}=x.state;A===C.EY&&this.datasourceHelper.reset()}}),this._addingFilterWithoutReportingInteraction=!1,this.datasourceHelper=new y.q(this),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.topScene||this.setState({topScene:D(this.state.metric)}),this.subscribeToEvent(C.OO,this._handleMetricSelectedEvent.bind(this));const v=m.jh.lookupVariable(C.Ao,this);v instanceof m.H9&&this._subs.add(v?.subscribeToState((R,B)=>{this._addingFilterWithoutReportingInteraction||(0,g.h)(R.filters,B.filters)}));const x=this.state.history.state.steps[this.state.history.state.currentStep]?.trailState;x&&this.restoreFromHistoryStep(x),this.enableUrlSync();const A=()=>(0,P._)().setRecentTrail(this);return window.addEventListener("unload",A),()=>{this.disableUrlSync(),this.state.embedded||A(),window.removeEventListener("unload",A)}}enableUrlSync(){this.state.embedded||(0,m.Is)().initSync(this)}disableUrlSync(){this.state.embedded||(0,m.Is)().cleanUp(this)}addFilterWithoutReportingInteraction(v){const x=m.jh.lookupVariable("filters",this);x instanceof m.H9&&(this._addingFilterWithoutReportingInteraction=!0,x.setState({filters:[...x.state.filters,v]}),this._addingFilterWithoutReportingInteraction=!1)}getMetricMetadata(v){return this.datasourceHelper.getMetricMetadata(v)}getCurrentMetricMetadata(){return this.getMetricMetadata(this.state.metric)}restoreFromHistoryStep(v){this.disableUrlSync(),!v.topScene&&!v.metric&&(v.topScene=new a.t({})),this.setState(m.Go.cloneSceneObjectState(v,{history:this.state.history,metric:v.metric?v.metric:void 0}));const x=(0,m.Is)().getUrlState(this),A=r.kM.renderUrl(o.Ny.getLocation().pathname,x);o.Ny.replace(A),this.enableUrlSync()}_handleMetricSelectedEvent(v){this.setState(this.getSceneUpdatesForNewMetricValue(v.payload));const x=m.jh.lookupVariable(C.Ao,this);x instanceof m.H9&&x.setState({baseFilters:O(v.payload)})}getSceneUpdatesForNewMetricValue(v){const x={};return x.metric=v,x.topScene=D(v),x}getUrlState(){return{metric:this.state.metric}}updateFromUrl(v){const x={};typeof v.metric=="string"?this.state.metric!==v.metric&&Object.assign(x,this.getSceneUpdatesForNewMetricValue(v.metric)):v.metric==null&&(x.metric=void 0,x.topScene=new a.t({})),this.setState(x)}static{this.Component=({model:v})=>{const{controls:x,topScene:A,history:R,settings:B}=v.useState(),U=(0,i.of)(M),w=(0,P._)().recent.length<2;return n.createElement("div",{className:U.container},w&&n.createElement(h.p,null),n.createElement(R.Component,{model:R}),x&&n.createElement("div",{className:U.controls},x.map(K=>n.createElement(K.Component,{key:K.state.key,model:K})),n.createElement(B.Component,{model:B})),n.createElement("div",{className:U.body},A&&n.createElement(A.Component,{model:A})))}}}function D(S){return S?new b.R({metric:S}):new a.t({})}function T(S,v,x){return new m.Pj({variables:[new m.mI({name:C.EY,label:"Data source",description:"Only prometheus data sources are supported",value:S,pluginId:"prometheus"}),new m.H9({name:C.Ao,addFilterButtonText:"Add label",datasource:C.GH,hide:s.zL.hideLabel,layout:"vertical",filters:x??[],baseFilters:O(v)})]})}function M(S){return{container:(0,t.css)({flexGrow:1,display:"flex",gap:S.spacing(1),minHeight:"100%",flexDirection:"column"}),body:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column"}),controls:(0,t.css)({display:"flex",gap:S.spacing(1),padding:S.spacing(1,0),alignItems:"flex-end",flexWrap:"wrap",position:"sticky",background:S.isDark?S.colors.background.canvas:S.colors.background.primary,zIndex:S.zIndex.navbarFixed,top:0})}}function O(S){return S?[{key:"__name__",operator:"=",value:S}]:[]}},13054:(Q,I,e)=>{"use strict";e.d(I,{L:()=>u,h:()=>g});var t=e(32196),n=e(96540),r=e(86849),s=e(67061),o=e(40845),m=e(56034),i=e(56833),l=e(40588),d=e(4200),c=e(51080);function g(a){return"currentStep"in a&&"steps"in a}class u extends r.Bs{constructor(h){super({steps:h.steps??[],currentStep:h.currentStep??0}),this.stepTransitionInProgress=!1,this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const h=(0,c.kj)(this);if(this.state.steps.length===0&&(this.addTrailStep(h,"start"),h.state.metric)){const{metric:P,...y}=h.state;y.topScene=(0,i.B)(void 0),this.state.steps[0].trailState=y,this.addTrailStep(h,"metric")}h.subscribeToState((P,y)=>{P.metric!==y.metric&&(this.state.steps.length===1&&(this.state.steps[0].trailState=r.Go.cloneSceneObjectState(y,{history:this})),(P.metric||y.metric)&&this.addTrailStep(h,"metric"))}),h.subscribeToEvent(r.oh,P=>{P.payload.state.name===d.Ao&&this.addTrailStep(h,"filters")}),h.subscribeToEvent(r.bZ,P=>{if(P.payload.changedObject instanceof r.JZ){const{prevState:y,newState:C}=P.payload;if((0,c.iG)(y)&&(0,c.iG)(C)&&y.from===C.from&&y.to===C.to)return;this.addTrailStep(h,"time")}})}addTrailStep(h,P){if(this.stepTransitionInProgress)return;const y=this.state.steps.length,C=P==="start"?-1:this.state.currentStep;this.setState({currentStep:y,steps:[...this.state.steps,{description:"Test",type:P,trailState:r.Go.cloneSceneObjectState(h.state,{history:this}),parentIndex:C}]})}goBackToStep(h){if(h===this.state.currentStep)return;const P=this.state.steps[h],y=P.type==="metric"&&P.trailState.metric===void 0?"metric-clear":P.type;(0,l.z)("history_step_clicked",{type:y}),this.stepTransitionInProgress=!0,this.setState({currentStep:h}),(0,c.kj)(this).restoreFromHistoryStep(P.trailState),this.stepTransitionInProgress=!1}renderStepTooltip(h){return n.createElement(s.B,{direction:"column"},n.createElement("div",null,h.type),h.type==="metric"&&n.createElement("div",null,h.trailState.metric||"Select new metric"))}static{this.Component=({model:h})=>{const{steps:P,currentStep:y}=h.useState(),C=(0,o.of)(E),{ancestry:f,alternatePredecessorStyle:D}=(0,n.useMemo)(()=>{const T=new Set;let M=y;for(;M>=0;){const S=P[M];if(!S)break;T.add(M),M=S.parentIndex}const O=new Map;return T.forEach(S=>{const v=P[S].parentIndex;v+1!==S&&O.set(S,b(S,v))}),{ancestry:T,alternatePredecessorStyle:O}},[y,P]);return n.createElement("div",{className:C.container},n.createElement("div",{className:C.heading},"History"),P.map((T,M)=>{let O=T.type;return O==="metric"&&T.trailState.metric===void 0&&(O="start"),n.createElement(m.m,{content:()=>h.renderStepTooltip(T),key:M},n.createElement("button",{className:(0,t.cx)(C.step,C.stepTypes[O],h.state.currentStep===M?C.stepSelected:"",D.get(M)??"",M!==T.parentIndex+1?C.stepOmitsDirectLeftLink:"",M===0?C.stepOmitsDirectLeftLink:"",f.has(M)?"":C.stepIsNotAncestorOfCurrent),onClick:()=>h.goBackToStep(M)}))}))}}}function E(a){const h=a.visualization;return{container:(0,t.css)({display:"flex",gap:10,alignItems:"center"}),heading:(0,t.css)({}),step:(0,t.css)({flexGrow:0,cursor:"pointer",border:"none",boxShadow:"none",padding:0,margin:0,width:8,height:8,opacity:.7,borderRadius:a.shape.radius.circle,background:a.colors.primary.main,position:"relative","&:hover":{opacity:1},"&:hover:before":{opacity:.7},"&:before":{content:'""',position:"absolute",width:10,height:2,left:-10,top:3,background:a.colors.primary.border,pointerEvents:"none"}}),stepSelected:(0,t.css)({"&:after":{content:'""',borderStyle:"solid",borderWidth:2,borderRadius:"50%",position:"absolute",width:16,height:16,left:-4,top:-4,boxShadow:`0px 0px 0px 2px inset ${a.colors.background.canvas}`}}),stepOmitsDirectLeftLink:(0,t.css)({"&:before":{background:"none"}}),stepIsNotAncestorOfCurrent:(0,t.css)({opacity:.2,"&:hover:before":{opacity:.2}}),stepTypes:{start:p(h.getColorByName("green")),filters:p(h.getColorByName("purple")),metric:p(h.getColorByName("orange")),time:p(a.colors.primary.main)}}}function p(a){return(0,t.css)({background:a,"&:before":{background:a,borderColor:a},"&:after":{borderColor:a}})}function b(a,h){const C=(a-h)*18;return(0,t.css)({"&:before":{content:'""',width:C+2,height:10,borderStyle:"solid",borderWidth:2,borderBottom:"none",borderTopLeftRadius:8,borderTopRightRadius:8,top:-10,left:3-C,background:"none"}})}},75176:(Q,I,e)=>{"use strict";e.d(I,{k:()=>rt,R:()=>je});var t=e(32196),n=e(96540),r=e(32264),s=e(86849),o=e(40845),m=e(90613),i=e(67061),l=e(27746),d=e(14578),c=e(55852),g=e(63021),u=e(40675),E=e(56034),p=e(87490),b=e(2543),a=e(11261),h=e(88575),P=e(13344),y=e(3817),C=e(16792),f=e(29413),D=e(94354),T=e(88323);function M({options:Oe,value:Ne,onChange:ye}){const se=(0,o.of)(O),ae=(0,o.$j)(),[ge,Pe]=(0,n.useState)(0),[Re,Be]=(0,n.useState)(0),_e=Re>ge,Xe=(0,n.useRef)(null);return(0,C.wY)({ref:Xe,onResize:()=>{const tt=Xe.current;tt&&Be(tt.clientWidth)}}),(0,n.useEffect)(()=>{const{fontSize:tt}=ae.typography,at=Oe.map(ot=>ot.label||ot.value||"").join(" "),st=(0,f.kD)(at,tt).width;Pe(st+32*Oe.length)},[Oe,ae]),n.createElement("div",{ref:Xe},_e?n.createElement(D.z,{options:Oe,value:Ne,onChange:ye}):n.createElement(T.l6,{options:Oe,value:Ne,onChange:tt=>ye(tt.value),className:se.select}))}function O(Oe){return{select:(0,t.css)({maxWidth:Oe.spacing(16)})}}var S=e(69096),v=e(40588),x=e(4200),A=e(51080);class R extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{if(!(s.jh.lookupVariable("filters",this)instanceof s.H9))return;const ye=this.state.frame.fields[1]?.labels??{};if(Object.keys(ye).length!==1)return;const se=Object.keys(ye)[0];(0,v.z)("label_filter_changed",{label:se,action:"added",cause:"breakdown"});const ae=(0,A.kj)(this),ge={key:se,operator:"=",value:ye[se]};ae.addFilterWithoutReportingInteraction(ge)}}static{this.Component=({model:Ne})=>{const se=Ne.useState().frame.fields[1]?.labels||{};return Object.keys(se).length!==0?n.createElement(c.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:Ne.onClick},"Add to filters"):null}}}var B=e(39070);function U(Oe,Ne){const ye=s.jh.lookupVariable(x.Ao,Oe),se=[];if(!(ye instanceof s.H9))return[];const ae=ye.state.filters;for(const ge of Ne.getOptionsForSelect()){const Pe=ae.find(Re=>Re.key===ge.value);ge.label!=="le"&&(Pe||se.push({label:ge.label,value:String(ge.value)}))}return se}function w(Oe,Ne){const ye=sceneGraph.findObject(Oe,se=>se instanceof Ne);return ye instanceof Ne?ye:null}function K(Oe,Ne){function ye(ae){return ae instanceof Ne}return s.jh.findAllObjects(Oe,ye).filter(ye)}class N extends s.Bs{constructor(Ne){super(Ne),this.addActivationHandler(()=>{const ye=s.jh.getData(this);this._subs.add(ye.subscribeToState((se,ae)=>{if(se.data===void 0)return;const ge=se.data;se.data!==void 0&&se.data?.state!==ae.data?.state&&K(this,s.Zv).forEach(Pe=>{Pe.setState({data:{...Pe.state.data,state:ge.state}})}),ge.state===B.Gu.Done&&this.performRepeat(ge)})),ye.state.data&&this.performRepeat(ye.state.data)})}performRepeat(Ne){const ye=[];for(let se=0;se<Ne.series.length;se++){const ae=Ne.series[se];if(ae.length<=1)continue;const ge=this.state.getLayoutChild(Ne,ae,se);ye.push(ge)}this.state.body.setState({children:ye}),this.setState({body:this.state.body})}static{this.Component=({model:Ne})=>{const{body:ye}=Ne.useState(),{children:se}=ye.useState(),Pe=s.jh.getData(Ne).useState()?.data,Re=Pe?.state==="Loading"&&se.length===0,Be=Pe?.state===B.Gu.Error?"Failed to load data.":void 0,_e=!Re&&se.length===0&&!Be?"There is no data available. Try adjusting your filters, time range, or selecting a different label.":void 0;return n.createElement(S.O,{blockingMessage:_e,error:Be,isLoading:Re},n.createElement(ye.Component,{model:ye}))}}}class L extends s.Bs{constructor(){super(...arguments),this.onLayoutChange=Ne=>{(0,v.z)("breakdown_layout_changed",{layout:Ne}),this.getMetricScene().setState({layout:Ne})}}getMetricScene(){return s.jh.getAncestor(this,je)}Selector({model:Ne}){const{options:ye}=Ne.useState(),se=Ne.useActiveLayout();return n.createElement(h.D,{label:"View"},n.createElement(D.z,{options:ye,value:se,onChange:Ne.onLayoutChange}))}useActiveLayout(){const{options:Ne}=this.useState(),{layout:ye}=this.getMetricScene().useState();return Ne.map(ae=>ae.value).includes(ye)?ye:Ne[0].value}static{this.Component=({model:Ne})=>{const{layouts:ye,options:se}=Ne.useState(),ae=Ne.useActiveLayout(),ge=se.findIndex(Re=>Re.value===ae);if(ge===-1)return null;const Pe=ye[ge];return n.createElement(Pe.Component,{model:Pe})}}}var V=e(52622);const F=s.zd.timeseries().setOption("tooltip",{mode:V.$N.Multi,sort:V.xB.Descending}).setOption("legend",{showLegend:!1}).build();var z=e(65463);class Y extends z.x{static{this.type="selected-metric-query-results-event"}}const H=Oe=>{const Ne=s.jh.getAncestor(Oe,ee);K(Oe,s.Eb).forEach(ae=>{ae.isActive?ye(ae.state.$data):ae.addActivationHandler(()=>{ye(ae.state.$data)})}),K(Oe,s.Eb).forEach(ae=>ye(ae.state.$data));function ye(ae){ae&&(ae.isActive||ae.addActivationHandler(()=>{ye(ae)}),ae.state.data&&Ne.reportBreakdownPanelData(ae.state.data),ae.subscribeToState(({data:ge},Pe)=>{Ne.reportBreakdownPanelData(ge)}))}const se=Ne.subscribeToEvent(Y,ae=>{if(!Oe.isActive){se.unsubscribe();return}const ge=s.No.timeseries().setCustomFieldConfig("axisSoftMin",ae.payload.min).setCustomFieldConfig("axisSoftMax",ae.payload.max).build();K(Oe,s.Eb).forEach(Pe=>{function Re(){Pe.onFieldConfigChange(ge)}Pe.isActive?Re():Pe.addActivationHandler(Re)})})},k=60;class ee extends s.Bs{constructor(Ne){super({labels:Ne.labels??[],...Ne}),this._variableDependency=new s.Sh(this,{variableNames:[x.Ao],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this._triggerAxisChangedEvent=(0,b.throttle)(()=>{const{breakdownPanelMinValue:ye,breakdownPanelMaxValue:se}=this;ye!==void 0&&se!==void 0&&this.publishEvent(new Y({min:ye,max:se}))},1e3),this.onChange=ye=>{if(!ye)return;(0,v.z)("label_selected",{label:ye,cause:"selector"}),this.getVariable().changeValueTo(ye)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const Ne=this.getVariable();Ne.subscribeToState((ge,Pe)=>{(ge.options!==Pe.options||ge.value!==Pe.value||ge.loading!==Pe.loading)&&this.updateBody(Ne)});const ye=s.jh.getAncestor(this,je),se=ye.state.metric;this._query=(0,y.v)(se).breakdown,(0,A.kj)(this).state.$timeRange?.subscribeToState(()=>{this.clearBreakdownPanelAxisValues()}),ye.subscribeToState(({layout:ge},Pe)=>{ge!==Pe.layout&&this.clearBreakdownPanelAxisValues()}),this.updateBody(Ne)}reportBreakdownPanelData(Ne){if(!Ne)return;let ye=this.breakdownPanelMinValue,se=this.breakdownPanelMaxValue;Ne.series.forEach(ae=>{ae.fields.forEach(ge=>{if(ge.type!==a.PU.number)return;const Pe=ge.values.filter(b.isNumber),Re=(0,b.max)(Pe),Be=(0,b.min)(Pe);se=(0,b.max)([se,Re].filter(b.isNumber)),ye=(0,b.min)([ye,Be].filter(b.isNumber))})}),!(se===void 0||ye===void 0||!Number.isFinite(se+ye))&&(this.breakdownPanelMaxValue===se&&this.breakdownPanelMinValue===ye||(this.breakdownPanelMaxValue=se,this.breakdownPanelMinValue=ye,this._triggerAxisChangedEvent()))}clearBreakdownPanelAxisValues(){this.breakdownPanelMaxValue=void 0,this.breakdownPanelMinValue=void 0}getVariable(){const Ne=s.jh.lookupVariable(x.yr,this);if(!(Ne instanceof s.fS))throw new Error("Group by variable not found");return Ne}onReferencedVariableValueChanged(){const Ne=this.getVariable();Ne.changeValueTo(P.To),this.updateBody(Ne)}updateBody(Ne){const ye=U(this,Ne),se={loading:Ne.state.loading,value:String(Ne.state.value),labels:ye,error:Ne.state.error,blockingMessage:void 0};!Ne.state.loading&&Ne.state.options.length?se.body=Ne.hasAllValue()?fe(ye,this._query):Z(this._query):Ne.state.loading||(se.body=void 0,se.blockingMessage="Unable to retrieve label options for currently selected metric."),this.clearBreakdownPanelAxisValues(),this.setState(se)}static{this.Component=({model:Ne})=>{const{labels:ye,body:se,loading:ae,value:ge,blockingMessage:Pe}=Ne.useState(),Re=(0,o.of)(ie);return n.createElement("div",{className:Re.container},n.createElement(S.O,{isLoading:ae,blockingMessage:Pe},n.createElement("div",{className:Re.controls},!ae&&ye.length&&n.createElement("div",{className:Re.controlsLeft},n.createElement(h.D,{label:"By label"},n.createElement(M,{options:ye,value:ge,onChange:Ne.onChange}))),se instanceof L&&n.createElement("div",{className:Re.controlsRight},n.createElement(se.Selector,{model:se}))),n.createElement("div",{className:Re.content},se&&n.createElement(se.Component,{model:se}))))}}}function ie(Oe){return{container:(0,t.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,t.css)({flexGrow:1,display:"flex",paddingTop:Oe.spacing(0)}),controls:(0,t.css)({flexGrow:0,display:"flex",alignItems:"top",gap:Oe.spacing(2)}),controlsRight:(0,t.css)({flexGrow:0,display:"flex",justifyContent:"flex-end"}),controlsLeft:(0,t.css)({display:"flex",justifyContent:"flex-left",justifyItems:"left",width:"100%",flexDirection:"column"})}}function fe(Oe,Ne){const ye=[];for(const se of Oe){if(se.value===P.To)continue;if(ye.length===k)break;const ae=Ne.queries[0].expr.replaceAll(x.aZ,String(se.value)),ge=Ne.unit,Pe=s.d0.timeseries().setTitle(se.label).setData(new s.dt({maxDataPoints:250,datasource:x.GH,queries:[{refId:"A",expr:ae,legendFormat:`{{${se.label}}}`}]})).setHeaderActions(new ne({labelName:String(se.value)})).setUnit(ge).build();Pe.addActivationHandler(()=>{Pe.onOptionsChange(F)}),ye.push(new s.xK({$behaviors:[H],body:Pe}))}return new L({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],layouts:[new s.gF({templateColumns:q,autoRows:"200px",children:ye,isLazy:!0}),new s.gF({templateColumns:"1fr",autoRows:"200px",children:ye.map(se=>se.clone()),isLazy:!0})]})}const q="repeat(auto-fit, minmax(400px, 1fr))";function Z(Oe){const Ne=Oe.unit;function ye(se,ae,ge){const Pe=Oe.vizBuilder().setTitle(J(ae)).setData(new s.Zv({data:{...se,series:[ae]}})).setColor({mode:"fixed",fixedColor:(0,A.Vy)(ge)}).setHeaderActions(new R({frame:ae})).setUnit(Ne).build(),Re=ae.length<=1,Be=new s.xK({$behaviors:[H],body:Pe,isHidden:Re});return Pe.addActivationHandler(()=>{Pe.onOptionsChange(F)}),Be}return new L({$data:new s.dt({datasource:x.GH,maxDataPoints:300,queries:Oe.queries}),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],layouts:[new s.G1({direction:"column",children:[new s.vA({minHeight:300,body:s.d0.timeseries().setTitle("$metric").build()})]}),new N({body:new s.gF({templateColumns:q,autoRows:"200px",children:[]}),getLayoutChild:ye}),new N({body:new s.gF({templateColumns:"1fr",autoRows:"200px",children:[]}),getLayoutChild:ye})]})}function J(Oe){const Ne=Oe.fields[1]?.labels||{},ye=Object.keys(Ne);return ye.length===0?"<unspecified>":Ne[ye[0]]}function G(){return new ee({})}class ne extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{const Ne=this.state.labelName;(0,v.z)("label_selected",{label:Ne,cause:"breakdown_panel"}),te(this).onChange(Ne)}}static{this.Component=({model:Ne})=>n.createElement(c.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:Ne.onClick},"Select")}}function te(Oe){if(Oe instanceof ee)return Oe;if(Oe.parent)return te(Oe.parent);throw new Error("Unable to find breakdown scene")}var oe=e(94753),le=e(72109);class ue extends s.Bs{constructor(Ne){super({...Ne}),this._variableDependency=new s.Sh(this,{variableNames:[x.gR],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this.addActivationHandler(this._onActivate.bind(this))}getVariable(){const Ne=s.jh.lookupVariable(x.yr,this);if(!(Ne instanceof s.fS))throw new Error("Group by variable not found");return Ne}_onActivate(){this.updateMetadata()}onReferencedVariableValueChanged(){this.updateMetadata()}async updateMetadata(){this.setState({metadataLoading:!0,metadata:void 0});const ye=(0,A.aM)(this).state.metric,ae=await(0,A.kj)(this).getMetricMetadata(ye);this.setState({metadata:ae,metadataLoading:!1})}static{this.Component=({model:Ne})=>{const{metadata:ye,metadataLoading:se}=Ne.useState(),ae=Ne.getVariable(),{loading:ge}=ae.useState(),Pe=U(Ne,ae).filter(Re=>Re.value!==P.To);return n.createElement(S.O,{isLoading:ge||se},n.createElement(i.B,{gap:6},n.createElement(n.Fragment,null,n.createElement(i.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Description"),n.createElement("div",{style:{maxWidth:360}},ye?.help?n.createElement("div",null,ye?.help):n.createElement("i",null,"No description available"))),n.createElement(i.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Type"),ye?.type?n.createElement("div",null,ye?.type):n.createElement("i",null,"Unknown")),n.createElement(i.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Unit"),ye?.unit?n.createElement("div",null,ye?.unit):n.createElement("i",null,"Unknown")),n.createElement(i.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Labels"),Pe.length===0&&"Unable to fetch labels.",Pe.map(Re=>n.createElement(le.Y,{key:Re.label,href:`#View breakdown for ${Re.label}`,title:`View breakdown for ${Re.label}`,onClick:Be=>{Be.preventDefault(),Be.stopPropagation(),s.jh.getAncestor(Ne,je).setActionView("breakdown");const _e=s.jh.lookupVariable(x.yr,Ne);return _e instanceof s.fS&&Re.label!=null&&((0,v.z)("label_selected",{label:Re.label,cause:"overview_link"}),_e.setState({value:Re.value})),!1}},Re.label))))))}}}function Te(){return new ue({})}var he=e(59055);function re(){return new he.t({})}var De=e(94624);class Fe extends s.Bs{constructor(Ne){super(Ne),this.onChangeQuery=ye=>{const se=(0,A.aM)(this),ae=se.state.autoQuery.variants.find(ge=>ge.variant===ye);this.setState({panel:this.getVizPanelFor(ae)}),se.setState({queryDef:ae})},this.addActivationHandler(this.onActivate.bind(this))}onActivate(){if(!this.state.panel){const{autoQuery:Ne}=(0,A.aM)(this).state;this.setState({panel:this.getVizPanelFor(Ne.main)})}}getQuerySelector(Ne){const{autoQuery:ye}=(0,A.aM)(this).state;if(ye.variants.length===0)return;const se=ye.variants.map(ae=>({label:ae.variant,value:ae.variant}));return n.createElement(D.z,{size:"sm",options:se,value:Ne.variant,onChange:this.onChangeQuery})}getVizPanelFor(Ne){return Ne.vizBuilder().setData(new s.dt({datasource:x.GH,maxDataPoints:500,queries:Ne.queries})).setHeaderActions(this.getQuerySelector(Ne)).build()}static{this.Component=({model:Ne})=>{const{panel:ye}=Ne.useState();if(ye)return n.createElement(ye.Component,{model:ye})}}}const Ee=280,Me="40%";class ze extends s.Bs{constructor(Ne){super({topView:Ne.topView??We(),...Ne})}static{this.Component=({model:Ne})=>{const{topView:ye,selectedTab:se}=Ne.useState(),{stickyMainGraph:ae}=(0,A.KE)(Ne).useState(),ge=(0,o.of)(xe);return n.createElement("div",{className:ge.container},n.createElement("div",{className:ae?ge.sticky:ge.nonSticky},n.createElement(ye.Component,{model:ye})),se&&n.createElement(se.Component,{model:se}))}}}function xe(Oe){return{container:(0,t.css)({display:"flex",flexDirection:"column",position:"relative"}),sticky:(0,t.css)({display:"flex",flexDirection:"row",background:Oe.isLight?Oe.colors.background.primary:Oe.colors.background.canvas,position:"sticky",top:"70px",zIndex:10}),nonSticky:(0,t.css)({display:"flex",flexDirection:"row"})}}function We(){return new s.G1({direction:"column",$behaviors:[new s.Gg.K2({key:"metricCrosshairSync",sync:De.y.Crosshair})],children:[new s.vA({minHeight:Ee,maxHeight:Me,body:new Fe({})}),new s.vA({ySizing:"content",body:new rt({})})]})}const be=({trail:Oe})=>{const[Ne,ye]=(0,n.useState)("Copy url"),se=()=>{if(navigator.clipboard){(0,v.z)("selected_metric_action_clicked",{action:"share_url"});const ge=(r.$.appUrl.endsWith("/")?r.$.appUrl.slice(0,-1):r.$.appUrl)+(0,A.xi)(Oe);navigator.clipboard.writeText(ge),ye("Copied!"),setTimeout(()=>{ye("Copy url")},2e3)}};return n.createElement(l.I,{variant:"canvas",icon:"share-alt",tooltip:Ne,onClick:se})};var pe=e(13054),Ue=e(74764);function we(Oe){const Ne=()=>(0,Ue._)().getBookmarkIndex(Oe),ye=Ne(),[se,ae]=(0,n.useState)(ye);(0,n.useEffect)(()=>{const Be=Oe.subscribeToEvent(s.bZ,({payload:{prevState:_e,newState:Xe}})=>{(0,pe.h)(_e)&&(0,pe.h)(Xe)&&Xe.steps.length>_e.steps.length&&ae((0,Ue._)().getBookmarkIndex(Oe))});return()=>Be.unsubscribe()},[Oe]),ye!==se&&ae(ye);const ge=se!=null;return[ge,()=>{if((0,v.z)("bookmark_changed",{action:ge?"toggled_off":"toggled_on"}),ge){let Be=Ne();for(;Be!=null;)(0,Ue._)().removeBookmark(Be),Be=Ne()}else(0,Ue._)().addBookmark(Oe);ae(Ne())}]}class je extends s.Bs{constructor(Ne){const ye=Ne.autoQuery??(0,y.v)(Ne.metric);super({$variables:Ne.$variables??Ve(Ne.metric),body:Ne.body??new ze({}),autoQuery:ye,queryDef:Ne.queryDef??ye.main,layout:Ne.layout??"grid",...Ne}),this._urlSync=new s.So(this,{keys:["actionView","layout"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.actionView===void 0&&this.setActionView("overview")}getUrlState(){return{actionView:this.state.actionView,layout:this.state.layout}}updateFromUrl(Ne){if(typeof Ne.actionView=="string"){if(this.state.actionView!==Ne.actionView){const ye=He.find(se=>se.value===Ne.actionView);ye&&this.setActionView(ye.value)}}else Ne.actionView===null&&this.setActionView(void 0);if(typeof Ne.layout=="string"){const ye=Ne.layout;this.state.layout!==ye&&this.setState({layout:ye})}}setActionView(Ne){const{body:ye}=this.state,se=He.find(ae=>ae.value===Ne);se&&se.value!==this.state.actionView?(ye.state.topView.state.children[0].setState({maxHeight:Ee}),ye.setState({selectedTab:se.getScene()}),this.setState({actionView:se.value})):(ye.state.topView.state.children[0].setState({maxHeight:Me}),ye.setState({selectedTab:void 0}),this.setState({actionView:void 0}))}static{this.Component=({model:Ne})=>{const{body:ye}=Ne.useState();return n.createElement(ye.Component,{model:ye})}}}const He=[{displayName:"Overview",value:"overview",getScene:Te},{displayName:"Breakdown",value:"breakdown",getScene:G},{displayName:"Related metrics",value:"related",getScene:re,description:"Relevant metrics based on current label filters"}];class rt extends s.Bs{constructor(){super(...arguments),this.getLinkToExplore=async()=>{const Ne=s.jh.getAncestor(this,je),ye=(0,A.kj)(this),se=(0,A.U4)(ye),ae=Ne.state.queryDef?.queries||[],ge=s.jh.getTimeRange(this);return(0,p.Xe)({queries:ae,dsRef:{uid:se},timeRange:ge.state.value,scopedVars:{__sceneObject:{value:Ne}}})},this.openExploreLink=async()=>{(0,v.z)("selected_metric_action_clicked",{action:"open_in_explore"}),this.getLinkToExplore().then(Ne=>{const ye=`${r.$.appSubUrl}${Ne}`;window.open(ye,"_blank")})}}static{this.Component=({model:Ne})=>{const ye=s.jh.getAncestor(Ne,je),se=(0,o.of)(Je),ae=(0,A.kj)(Ne),[ge,Pe]=we(ae),{actionView:Re}=ye.useState();return n.createElement(m.a,{paddingY:1},n.createElement("div",{className:se.actions},n.createElement(i.B,{gap:1},n.createElement(l.I,{variant:"canvas",tooltip:"Remove existing metric and choose a new metric",onClick:()=>{(0,v.z)("selected_metric_action_clicked",{action:"unselect"}),ae.publishEvent(new x.OO(void 0))}},"Select new metric"),n.createElement(l.I,{variant:"canvas",icon:"compass",tooltip:"Open in explore",onClick:Ne.openExploreLink}),n.createElement(be,{trail:ae}),n.createElement(l.I,{variant:"canvas",icon:ge?n.createElement(d.I,{name:"favorite",type:"mono",size:"lg"}):n.createElement(d.I,{name:"star",type:"default",size:"lg"}),tooltip:"Bookmark",onClick:Pe}),ae.state.embedded&&n.createElement(c.z9,{href:(0,A.xi)(ae),variant:"secondary",onClick:()=>(0,v.z)("selected_metric_action_clicked",{action:"open_from_embedded"})},"Open"))),n.createElement(g.U,null,He.map((Be,_e)=>{const Xe=n.createElement(u.o,{key:_e,label:Be.displayName,active:Re===Be.value,onChangeTab:()=>{(0,v.z)("metric_action_view_changed",{view:Be.value}),ye.setActionView(Be.value)}});return Be.description?n.createElement(E.m,{key:_e,content:Be.description,placement:"bottom-start",theme:"info"},Xe):Xe})))}}}function Je(Oe){return{actions:(0,t.css)({[Oe.breakpoints.up(Oe.breakpoints.values.md)]:{position:"absolute",right:0,top:16,zIndex:2}})}}function Ve(Oe){return new s.Pj({variables:[...(0,x.ym)(Oe),new s.fS({name:x.yr,label:"Group by",datasource:x.GH,includeAll:!0,defaultToAll:!0,query:{query:`label_names(${x.Rp})`,refId:"A"},value:"",text:""})]})}},59055:(Q,I,e)=>{"use strict";e.d(I,{t:()=>w});var t=e(32196),n=e(2543),r=e(96540),s=e(12470),o=e(86849),m=e(79422),i=e(40845),l=e(88575),d=e(10354),c=e(14578),g=e(15292),u=e(42418),E=e(55852),p=e(4200);class b extends o.Bs{constructor(){super(...arguments),this.onClick=()=>{this.publishEvent(new p.OO(this.state.metric),!0)}}static{this.Component=({model:H})=>r.createElement(E.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:H.onClick},H.state.title)}}var a=e(39070),h=e(11261);function P(Y){return H=>{const k=o.jh.getData(H);k&&k.subscribeToState(ee=>{if(ee.data?.state===a.Gu.Loading||ee.data?.state===a.Gu.Error)return;const ie=o.jh.getAncestor(H,w);if(!ee.data?.series.length){ie.updateMetricPanel(Y,!0,!0);return}let fe=!1;for(const q of ee.data.series){for(const Z of q.fields)if(Z.type===h.PU.number&&(fe=Z.values.some(J=>J!=null&&!isNaN(J)&&J!==0),fe))break;if(fe)break}ie.updateMetricPanel(Y,!0,!fe)})}}var y=e(51080),C=e(3817);function f(Y,H,k,ee){const ie=(0,C.v)(Y),fe=ie.preview.vizBuilder().setColor({mode:"fixed",fixedColor:(0,y.Vy)(H)}).setDescription(ee).setHeaderActions(new b({metric:Y,title:"Select"})).build(),q=ie.preview.queries.map(Z=>D(Z,k));return new o.xK({$variables:new o.Pj({variables:(0,p.ym)(Y)}),$behaviors:[P(Y)],$data:new o.dt({datasource:p.GH,maxDataPoints:200,queries:q}),body:fe})}function D(Y,H){const k=H>0?'${filters},__ignore_usage__=""':'__ignore_usage__=""',ee=Y.expr?.replace("${filters}",k);return{...Y,expr:ee}}var T=e(75176),M=e(69096),O=e(88434),S=e(40588),v=e(51088);function x(Y,H){return Y.sort((k,ee)=>{const ie=R(k,H),fe=R(ee,H);return ie.halfLeven+ie.wholeLeven-(fe.halfLeven+fe.wholeLeven)})}const A=new Map;function R(Y,H){let k=A.get(Y);k||(k=new Map,A.set(Y,k));let ee=k.get(H);if(!ee){const ie=Y.split("_"),fe=ie.slice(0,ie.length/2).join("_"),q=(0,v.A)(fe,H)||0,Z=(0,v.A)(Y,H)||0;ee={halfLeven:q,wholeLeven:Z},k.set(H,ee)}return ee}const B="175px",U="64px";class w extends o.Bs{constructor(H){super({$variables:H.$variables??K(),body:H.body??new o.gF({children:[],templateColumns:"repeat(auto-fill, minmax(450px, 1fr))",autoRows:B,isLazy:!0}),showPreviews:!0,...H}),this.previewCache={},this.ignoreNextUpdate=!1,this._variableDependency=new o.Sh(this,{variableNames:[p.MN,p.EY],onReferencedVariableValueChanged:k=>{const{name:ee}=k.state;ee===p.EY?this.state.body.setState({children:[]}):ee===p.MN&&(this.onMetricNamesChange(),this.updateMetrics(),this.buildLayout())}}),this.currentMetricNames=new Set,this.updateMetricPanel=(k,ee,ie)=>{const fe=this.previewCache[k];fe&&(fe.isEmpty=ie,fe.loaded=ee,this.previewCache[k]=fe,this.buildLayout())},this.onSearchQueryChange=k=>{this.setState({searchQuery:k.currentTarget.value}),this.searchQueryChangedDebounced()},this.searchQueryChangedDebounced=(0,n.debounce)(()=>{this.updateMetrics(),this.buildLayout()},500),this.onTogglePreviews=()=>{this.setState({showPreviews:!this.state.showPreviews}),this.buildLayout()},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.body.state.children.length===0?this.buildLayout():this.ignoreNextUpdate=!0;const H=(0,y.kj)(this),k=H.subscribeToEvent(p.OO,ee=>{const{steps:ie,currentStep:fe}=H.state.history.state,q=ie[fe].parentIndex,J=ie[q].trailState.metric!==void 0,G=this.state.searchQuery?.split(V).filter(ne=>ne.length>0);ee.payload!==void 0&&(0,S.z)("metric_selected",{from:J?"related_metrics":"metric_list",searchTermCount:G?.length||0})});return()=>{k.unsubscribe()}}sortedPreviewMetrics(){return Object.values(this.previewCache).sort((H,k)=>H.isEmpty&&k.isEmpty?H.index-k.index:H.isEmpty?1:k.isEmpty?-1:H.index-k.index)}onMetricNamesChange(){const H=o.jh.lookupVariable(p.MN,this);if(!(H instanceof o.fS)||H.state.loading)return;const k=H.state.options.map(ie=>ie.value.toString()),ee=new Set(k);Object.values(this.previewCache).forEach(ie=>{ee.has(ie.name)||(ie.isEmpty=!0)}),this.currentMetricNames=ee,this.buildLayout()}applyMetricSearch(){const H=Array.from(this.currentMetricNames);if(H==null)return;const k=F(this.state.searchQuery);if(!k)this.setState({metricsAfterSearch:H});else{const ee=H.filter(ie=>!k||k.test(ie));this.setState({metricsAfterSearch:ee})}}updateMetrics(H=!0){H&&this.applyMetricSearch();const{metricsAfterSearch:k}=this.state,ee=k||[],ie=(0,y.kj)(this),fe=ie.state.metric!==void 0?x(ee,ie.state.metric):ee,q={},Z=120;Object.keys(this.previewCache).forEach(J=>{this.currentMetricNames.has(J)||delete this.previewCache[J]});for(let J=0;J<fe.length;J++){const G=fe[J];if(Object.keys(q).length>Z)break;const te=this.previewCache[G]||{name:G,index:J,loaded:!1};q[G]=te}try{const J=o.jh.getAncestor(this,T.R).state.metric;delete q[J]}catch{}this.previewCache=q}async buildLayout(){if(this.ignoreNextUpdate){this.ignoreNextUpdate=!1;return}const H=o.jh.lookupVariable(p.MN,this);if(!(H instanceof o.fS)||H.state.loading)return;Object.keys(this.previewCache).length||this.updateMetrics();const k=[],ee=(0,y.kj)(this),ie=this.sortedPreviewMetrics(),q=(0,y.gA)(this)?.length||0;for(let J=0;J<ie.length;J++){const G=ie[J],ne=await ee.getMetricMetadata(G.name),te=(0,O.R)(ne);if(this.state.showPreviews){if(G.itemRef&&G.isPanel){k.push(G.itemRef.resolve());continue}const oe=f(G.name,J,q,te);G.itemRef=oe.getRef(),G.isPanel=!0,k.push(oe)}else{const oe=new o.xK({$variables:new o.Pj({variables:(0,p.ym)(G.name)}),body:N(G.name,te)});G.itemRef=oe.getRef(),G.isPanel=!1,k.push(oe)}}const Z=this.state.showPreviews?B:U;this.state.body.setState({children:k,autoRows:Z})}static{this.Component=({model:H})=>{const{searchQuery:k,showPreviews:ee,body:ie}=H.useState(),{children:fe}=ie.useState(),q=(0,i.of)(L),Z=z(p.MN,H),J=fe.length===0&&k,G=!Z.isLoading&&H.currentMetricNames.size===0,ne=Z.isLoading&&fe.length===0,te=ne?void 0:G&&"There are no results found. Try a different time range or a different data source."||J&&"There are no results found. Try adjusting your search or filters."||void 0,oe=Z.error||Z.isLoading;return r.createElement("div",{className:q.container},r.createElement("div",{className:q.header},r.createElement(l.D,{label:"Search metrics",className:q.searchField},r.createElement(d.p,{placeholder:"Search metrics",prefix:r.createElement(c.I,{name:"search"}),value:k,onChange:H.onSearchQueryChange,disabled:oe})),r.createElement(g.K,{showLabel:!0,label:"Show previews",value:ee,onChange:H.onTogglePreviews,disabled:oe})),Z.error&&r.createElement(u.F,{title:"Unable to retrieve metric names",severity:"error"},r.createElement("div",null,"We are unable to connect to your data source. Double check your data source URL and credentials."),r.createElement("div",null,"(",Z.error,")")),r.createElement(M.O,{isLoading:ne,blockingMessage:te},r.createElement(H.state.body.Component,{model:H.state.body})))}}}function K(){return new o.Pj({variables:[new o.fS({name:p.MN,datasource:p.GH,hide:m.zL.hideVariable,includeAll:!0,defaultToAll:!0,skipUrlSync:!0,refresh:s.CO.onTimeRangeChanged,query:{query:`label_values(${p.ui},__name__)`,refId:"A"}})]})}function N(Y,H){return o.d0.text().setTitle(Y).setDescription(H).setHeaderActions(new b({metric:Y,title:"Select"})).setOption("content","").build()}function L(Y){return{container:(0,t.css)({display:"flex",flexDirection:"column",flexGrow:1}),headingWrapper:(0,t.css)({marginBottom:Y.spacing(.5)}),header:(0,t.css)({flexGrow:0,display:"flex",gap:Y.spacing(2),marginBottom:Y.spacing(2),alignItems:"flex-end"}),searchField:(0,t.css)({flexGrow:1,marginBottom:0})}}const V=/[^a-z0-9_:]+/;function F(Y){if(!Y)return null;const H=Y?.toLowerCase().split(V).filter(ee=>ee.length>0).map(ee=>`(?=(.*${ee}.*))`);if(H.length===0)return null;const k=H.join("");return new RegExp(k,"igy")}function z(Y,H){const k=o.jh.lookupVariable(Y,H),ee=(0,r.useCallback)(()=>{if(k)return k.useState()},[k]),{error:ie,loading:fe}=ee()||{};return{isLoading:!!fe,error:ie}}},90623:(Q,I,e)=>{"use strict";e.d(I,{p:()=>s});var t=e(96540),n=e(67061),r=e(94753);const s=()=>t.createElement(n.B,{direction:"column",gap:1},t.createElement(r.E,{variant:"h1"},"Metrics"),t.createElement(r.E,{color:"secondary"},"Explore your Prometheus-compatible metrics without writing a query"))},69096:(Q,I,e)=>{"use strict";e.d(I,{O:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(39558);function o({blockingMessage:i,isLoading:l,children:d}){const c=(0,r.of)(m);return l&&!i&&(i="Loading..."),l?n.createElement(s._,{className:c.statusMessage,text:i}):i?n.createElement("div",{className:c.statusMessage},i):d}function m(i){return{statusMessage:(0,t.css)({fontStyle:"italic",marginTop:i.spacing(7),textAlign:"center",width:"100%"})}}},74764:(Q,I,e)=>{"use strict";e.d(I,{_:()=>h});var t=e(2543),n=e(86849),r=e(99140),s=e(16001),o=e(56833),m=e(4200),i=e(96540),l=e(67061),d=e(55852),c=e(3169);function g(){const P=(0,c.tZ)("Bookmark created");return P.component=i.createElement(l.B,{gap:2,direction:"row"},i.createElement("div",null,"You can view bookmarks under ",i.createElement("i",null,"Explore > Metrics")),i.createElement(d.z9,{fill:"solid",variant:"secondary",href:m.QX},"View bookmarks")),P}const u=20;class E{constructor(){this._recent=[],this._bookmarks=[],this._bookmarkIndexMap=new Map,this.load();const y=()=>{const C=this._recent.slice(0,u).map(D=>this._serializeTrail(D.resolve()));localStorage.setItem(m.sQ,JSON.stringify(C));const f=this._bookmarks.map(D=>this._serializeTrail(D.resolve()));localStorage.setItem(m.me,JSON.stringify(f))};this._save=(0,t.debounce)(y,1e3),window.addEventListener("beforeunload",C=>{this._save=y})}_loadFromStorage(y){const C=[],f=localStorage.getItem(y);if(f){const D=JSON.parse(f);for(const T of D){const M=this._deserializeTrail(T);C.push(M.getRef())}}return C}_deserializeTrail(y){const C=new o.b({createdAt:y.createdAt});y.history.map(D=>{this._loadFromUrl(C,D.urlValues);const T=D.parentIndex??C.state.history.state.steps.length-1;C.state.history.setState({currentStep:T}),C.state.history.addTrailStep(C,D.type)});const f=y.currentStep??C.state.history.state.steps.length-1;return C.state.history.setState({currentStep:f}),C.setState(C.state.history.state.steps[f].trailState),C}_serializeTrail(y){return{history:y.state.history.state.steps.map(f=>{const D=new o.b(n.Go.cloneSceneObjectState(f.trailState));return{urlValues:(0,n.Is)().getUrlState(D),type:f.type,description:f.description,parentIndex:f.parentIndex}}),currentStep:y.state.history.state.currentStep,createdAt:y.state.createdAt}}_loadFromUrl(y,C){y.urlSync?.updateFromUrl(C),y.forEachChild(f=>this._loadFromUrl(f,C))}get recent(){return this._recent}load(){this._recent=this._loadFromStorage(m.sQ),this._bookmarks=this._loadFromStorage(m.me),this._refreshBookmarkIndexMap()}setRecentTrail(y){const{steps:C}=y.state.history.state;if(C.length===0||C.length===1&&C[0].type==="start")return;this._recent=this._recent.filter(D=>D!==y.getRef());const f=p(y);this._recent=this._recent.filter(D=>{const T=p(D.resolve());return!(0,t.isEqual)(f,T)}),this._recent.unshift(y.getRef()),this._save()}findMatchingRecentTrail(y){const C=p(y);return this._recent.find(f=>{const D=p(f.resolve());return(0,t.isEqual)(C,D)})}get bookmarks(){return this._bookmarks}addBookmark(y){const C=new o.b(n.Go.cloneSceneObjectState(y.state));this._bookmarks.unshift(C.getRef()),this._refreshBookmarkIndexMap(),this._save(),(0,r.JD)((0,s.dx)(g()))}removeBookmark(y){y<this._bookmarks.length&&(this._bookmarks.splice(y,1),this._refreshBookmarkIndexMap(),this._save())}getBookmarkIndex(y){const C=b(y);return this._bookmarkIndexMap.get(C)}_refreshBookmarkIndexMap(){this._bookmarkIndexMap.clear(),this._bookmarks.forEach((y,C)=>{const f=y.resolve(),D=b(f);this._bookmarkIndexMap.set(D,C)})}}function p(P){const y=(0,n.Is)().getUrlState(P);return delete y.actionView,delete y.layout,y["var-groupby"]===""&&(y["var-groupby"]="$__all"),y}function b(P){return JSON.stringify(p(P))}let a;function h(){return a||(a=new E),a}},88434:(Q,I,e)=>{"use strict";e.d(I,{R:()=>o,q:()=>s});var t=e(19347),n=e(32799),r=e(4200);class s{constructor(i){this._trail=i}reset(){this._datasource=void 0,this._metricsMetadata=void 0}async getDatasource(){return this._datasource||(this._datasource=(0,t.l)().get(r.gR,{__sceneObject:{value:this._trail}})),await this._datasource}async _getMetricsMetadata(){const i=await this.getDatasource();if(i.languageProvider instanceof n.Ay)return i.languageProvider.metricsMetadata||await i.languageProvider.loadMetricsMetadata(),i.languageProvider.metricsMetadata}async getMetricMetadata(i){return i?(this._metricsMetadata||(this._metricsMetadata=this._getMetricsMetadata()),(await this._metricsMetadata)?.[i]):void 0}}function o(m){if(!m)return;const{type:i,help:l,unit:d}=m;return[l,i&&`**Type:** *${i}*`,d&&`**Unit:** ${d}`].join(`

`)}},40588:(Q,I,e)=>{"use strict";e.d(I,{h:()=>s,z:()=>r});var t=e(14110);const n="grafana_explore_metrics_";function r(o,m){(0,t.rR)(`${n}${o}`,m)}function s(o,m){if(o.length===m.length)for(const i of m)for(const l of o)i.key===l.key&&i.value!==l.value&&r("label_filter_changed",{label:i.key,action:"changed",cause:"adhoc_filter"});else if(o.length<m.length)for(const i of m){let l=!1;for(const d of o)if(i.key===d.key){l=!0;break}l||r("label_filter_changed",{label:i.key,action:"removed",cause:"adhoc_filter"})}else for(const i of o){let l=!1;for(const d of m)if(d.key===i.key){l=!0;break}l||r("label_filter_changed",{label:i.key,action:"added",cause:"adhoc_filter"})}}},4200:(Q,I,e)=>{"use strict";e.d(I,{Ao:()=>i,EY:()=>E,GH:()=>y,MN:()=>m,OO:()=>T,QX:()=>o,Rp:()=>c,aZ:()=>u,gR:()=>p,km:()=>s,me:()=>f,sQ:()=>C,td:()=>h,ui:()=>l,ym:()=>D,yr:()=>g});var t=e(65463),n=e(86849),r=e(79422);const s="/explore/metrics/trail",o="/explore/metrics",m="metricNames",i="filters",l="{${filters}}",d="metric",c="${metric}",g="groupby",u="${groupby}",E="ds",p="${ds}",b="logsDs",a="${logsDs}",h="$__logs__",P="sqr-metric-viz-query",y={uid:p},C="grafana.trails.recent",f="grafana.trails.bookmarks";function D(M){return[new n.x0({name:d,value:M,hide:r.zL.hideVariable})]}class T extends t.x{static{this.type="metric-selected-event"}}},51080:(Q,I,e)=>{"use strict";e.d(I,{KE:()=>g,U4:()=>a,Vy:()=>C,aM:()=>b,aO:()=>P,ef:()=>u,gA:()=>D,hR:()=>y,iG:()=>f,kj:()=>c,nH:()=>h,xi:()=>E});var t=e(76885),n=e(19347),r=e(32264),s=e(86849),o=e(31193),m=e(56833),i=e(75176),l=e(74764),d=e(4200);function c(T){return s.jh.getAncestor(T,m.b)}function g(T){return s.jh.getAncestor(T,m.b).state.settings}function u(T){return new m.b({initialDS:T,$timeRange:new s.JZ({from:"now-1h",to:"now"}),embedded:!1})}function E(T){const M=(0,s.Is)().getUrlState(T);return p(M)}function p(T){return t.kM.renderUrl(d.km,T)}function b(T){if(T instanceof i.R)return T;if(T.parent)return b(T.parent);throw console.error("Unable to find graph view for",T),new Error("Unable to find trail")}function a(T){return s.jh.interpolate(T,d.gR)}function h(T){return(0,n.l)().getInstanceSettings(T)?.name||T}function P(T){return T?T===d.td?"Logs":T:"Select metric"}function y(){const T=(0,l._)().recent[0];if(T){const O=s.jh.interpolate(T.resolve(),d.gR);if(typeof O=="string"&&O.length>0)return O}const M=(0,o.tR)().getList({type:"prometheus"});if(M.length>0)return M.find(O=>O.uid===r.$.defaultDatasource)?.uid??M[0].uid}function C(T){const M=r.$.theme2.visualization;return M.getColorByName(M.palette[T%8])}function f(T){const M=Object.keys(T);return M.includes("from")&&M.includes("to")}function D(T){const M=s.jh.lookupVariable("filters",T);return M instanceof s.H9?M.state.filters:null}},27825:(Q,I,e)=>{"use strict";e.d(I,{J:()=>b});var t=e(52622),n=e(38248),r=e(96540),s=e(91890),o=e(72574),m=e(32264),i=e(66864),l=e(94354),d=e(10354),c=e(88841),g=e(94397);const u=[{label:"Size",value:t.J1.Size,description:"Split the buckets based on size"},{label:"Count",value:t.J1.Count,description:"Split the buckets based on count"}],E=[{label:"Split",value:t.J1.Size,description:"Split the buckets based on size"}],p=({value:a,onChange:h,item:P})=>{const[y,C]=(0,r.useState)(!1),f=M=>{C(!(0,g.N_)(M)),h({...a,value:M})},T=(0,o.w)().getVariables().map(M=>({value:M.name,label:M.label||M.name,origin:s.$0.Template}));return r.createElement(i.Gy,null,r.createElement(l.z,{value:a?.mode||t.J1.Size,options:a?.scale?.type===t.L4.Log?E:u,onChange:M=>{h({...a,mode:M})}}),m.$.featureToggles.transformationsVariableSupport?r.createElement(c.y,{invalid:y,error:"Value needs to be an integer or a variable",value:a?.value??"",placeholder:"Auto",onChange:f,suggestions:T}):r.createElement(d.p,{value:a?.value??"",placeholder:"Auto",onChange:M=>{h({...a,value:M.currentTarget.value})}}))};function b(a,h,P,y){h.addCustomEditor({id:"xBuckets",path:`${a}xBuckets`,name:"X Bucket",editor:p,category:y,defaultValue:{mode:t.J1.Size}}),h.addCustomEditor({id:"yBuckets",path:`${a}yBuckets`,name:"Y Bucket",editor:p,category:y,defaultValue:{mode:t.J1.Size}}),h.addCustomEditor({id:"yBuckets-scale",path:`${a}yBuckets.scale`,name:"Y Bucket scale",category:y,editor:n.W,defaultValue:{type:t.L4.Linear}})}},3290:(Q,I,e)=>{"use strict";e.d(I,{VQ:()=>F,wY:()=>B,Nb:()=>N,eE:()=>K,yJ:()=>L});var t=e(81160),n=e(18282),r=e(81010),s=e(11261),o=e(28240),m=e(83195),i=e(41260),l=e(70416),d=e(77678),c=e(73060),g=e(32264),u=e(52622),E=e(97706);const{abs:p,pow:b}=Math,a=new Map;function h(k,ee,ie,fe){let q=[],Z=fe.map(E.E);for(let J=ee;J<ie;J++){let G=p(J),ne=(0,E.h)(b(k,J),G);for(let te=0;te<fe.length;te++){let oe=fe[te]*ne,le=(oe>=0&&J>=0?0:G)+(J>=Z[te]?0:Z[te]),ue=(0,E.h)(oe,le);q.push(ue),a.set(ue,le)}}return q}const P=k=>k%1===0,y=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],C=h(10,-16,0,y),f=h(10,0,16,y),D=f.filter(P),T=C.concat(f),M=C.concat(D),O=1*1e3,S=60*O,v=60*S,x=24*v,A=365*x,R=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,O,2*O,4*O,5*O,10*O,15*O,20*O,30*O,S,2*S,4*S,5*S,10*S,15*S,20*S,30*S,v,2*v,4*v,6*v,8*v,12*v,18*v,x,2*x,3*x,4*x,5*x,6*x,7*x,10*x,15*x,30*x,45*x,60*x,90*x,180*x,A,2*A,3*A,4*A,5*A,6*A,7*A,8*A,9*A,10*A],B={id:n.F.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:k=>{const{xField:ee,yField:ie,xs:fe,ys:q}=z(k);return ee||ie||!fe.length||!q.length?r.M.NotPossible:r.M.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(k,ee)=>ie=>ie.pipe((0,t.T)(fe=>{if(g.$.featureToggles.transformationsVariableSupport){const q={...k,xBuckets:{...k.xBuckets},yBuckets:{...k.yBuckets}};return q.xBuckets?.value&&(q.xBuckets.value=ee.interpolate(q.xBuckets.value)),q.yBuckets?.value&&(q.yBuckets.value=ee.interpolate(q.yBuckets.value)),B.transformer(q,ee)(fe)}else return B.transformer(k,ee)(fe)})),transformer:k=>ee=>{const ie=F(ee,k);return k.keepOriginalData?[ie,...ee]:[ie]}};function U(k){return k==="+Inf"?1/0:k==="-Inf"?-1/0:+(k??0)}function w(k,ee){return U(k)-U(ee)}function K(k){return k?.meta?.custom??{}}function N(k){let ee=!1;for(let ie of k.fields)switch(ie.name){case"y":case"yMin":case"yMax":if(ee)return!1;ee=!0}return ee}function L(k){const ee=k.frame.fields[0],ie=ee.values,fe=k.frame.fields.filter((Te,he)=>Te.type===s.PU.number&&he>0),q=ie.length*fe.length,Z=new Array(q),J=new Array(q),G=new Array(q),ne=fe.map(Te=>Te.values.slice());ne.forEach((Te,he)=>{for(let re=0;re<Te.length;re++)G[ne.length*re+he]=Te[re]});const te=Array.from({length:fe.length},(Te,he)=>he);for(let Te=0,he=0,re=0;Te<q;he=++Te%te.length)J[Te]=te[he],he===0&&Te>=te.length&&re++,Z[Te]=ie[re];let oe=fe[0].labels?.le!=null?"yMax":"y";switch(k.layout){case u.D7.le:oe="yMax";break;case u.D7.ge:oe="yMin";break;case u.D7.unknown:oe="y";break}const le={yOrdinalDisplay:fe.map(Te=>(0,o.Ct)(Te,k.frame)),yMatchWithLabel:Object.keys(fe[0].labels??{})[0]};if(le.yMatchWithLabel&&(le.yOrdinalLabel=fe.map(Te=>Te.labels?.[le.yMatchWithLabel]??""),le.yMatchWithLabel==="le"&&(le.yMinDisplay="0.0")),k.unit?.length||k.decimals!=null){const Te=(0,m.j_)(k.unit??"short");le.yMinDisplay&&(le.yMinDisplay=(0,m.cN)(Te(0,k.decimals))),le.yOrdinalDisplay=le.yOrdinalDisplay.map(he=>{let re=+he;return Number.isNaN(re)?he:(0,m.cN)(Te(re,k.decimals))})}const ue={...fe[0].config};return ue.displayNameFromDS&&delete ue.displayNameFromDS,{length:Z.length,refId:k.frame.refId,meta:{type:i.m.HeatmapCells,custom:le},fields:[{name:ee.type===s.PU.time?"xMax":"x",type:ee.type,values:Z,config:ee.config},{name:oe,type:s.PU.number,values:J,config:{unit:"short"}},{name:k.value?.length?k.value:"Value",type:s.PU.number,values:G,config:ue,display:fe[0].display}]}}function V(k){k=k.slice(),k.sort((ie,fe)=>w(ie.name,fe.name));const ee=k.map(ie=>ie.fields[1].values.slice());return ee.reverse(),ee.forEach((ie,fe)=>{if(fe<ee.length-1)for(let q=0;q<ie.length;q++)ie[q]-=ee[fe+1][q]}),ee.reverse(),k.map((ie,fe)=>({...ie,fields:[ie.fields[0],{...ie.fields[1],values:ee[fe]}]}))}function F(k,ee){const{xField:ie,yField:fe,xs:q,ys:Z}=z(k);if(!ie||!fe)throw"no heatmap fields found";if(!q.length||!Z.length)throw"no values found";const J=ee.xBuckets??{},G=ee.yBuckets??{};if(J.scale?.type===u.L4.Log)throw"X axis only supports linear buckets";const ne=ee.yBuckets?.scale??{type:u.L4.Linear},te=Y(q,Z,{xSorted:(0,c.g2)(q),xTime:ie.type===s.PU.time,xMode:J.mode,xSize:J.mode===u.J1.Size?(0,l.WT)((0,l.E9)(J.value??"")):J.value?+J.value:void 0,yMode:G.mode,ySize:G.value?+G.value:void 0,yLog:ne?.type===u.L4.Log?ne?.log:void 0});return{length:te.x.length,name:(0,o.Ct)(fe),meta:{type:i.m.HeatmapCells},fields:[{name:"xMin",type:ie.type,values:te.x,config:ie.config},{name:"yMin",type:s.PU.number,values:te.y,config:{...fe.config,custom:{scaleDistribution:ne}}},{name:"Count",type:s.PU.number,values:te.count,config:{unit:"short"}}]}}function z(k){let ee,ie,fe=0;for(let G of k)G.fields.find(te=>te.type===s.PU.time)&&(fe+=G.length);let q=Array(fe),Z=Array(fe),J=0;for(let G of k){const ne=G.fields.find(oe=>oe.type===s.PU.time);if(!ne)continue;ee||(ee=ne);const te=ne.values;for(let oe of G.fields)if(oe!==ne&&oe.type===s.PU.number){const le=oe.values;for(let ue=0;ue<te.length;ue++,J++)q[J]=te[ue],Z[J]=le[ue];ie||(ie=oe)}}return{xField:ee,yField:ie,xs:q,ys:Z}}function Y(k,ee,ie){let fe=k.length,q=ie?.xSorted??!1,Z=ie?.ySorted??!1,J=q?k[0]:1/0,G=Z?ee[0]:1/0,ne=q?k[fe-1]:-1/0,te=Z?ee[fe-1]:-1/0,oe=ie?.yLog;for(let we=0;we<fe;we++)q||(J=Math.min(J,k[we]),ne=Math.max(ne,k[we])),Z||(!oe||ee[we]>0)&&(G=Math.min(G,ee[we]),te=Math.max(te,ee[we]));let le=ie?.xSize??0,ue=ie?.ySize??0,Te=ie?.xMode,he=ie?.yMode;if((!Number.isFinite(le)||le<=0)&&(Te=u.J1.Count,le=20),(!Number.isFinite(ue)||ue<=0)&&(he=u.J1.Count,ue=10),Te===u.J1.Count){let we=(ne-J)/Math.max(le-1,1),je=ie?.xTime?R:M,He=je.findIndex(rt=>rt>we)-1;le=je[Math.max(He,0)]}if(he===u.J1.Count){let we=(te-G)/Math.max(ue-1,1),je=ie?.yTime?R:M,He=je.findIndex(rt=>rt>we)-1;ue=je[Math.max(He,0)]}let re=ie?.xCeil?we=>(0,d.Uh)(we,le):we=>(0,d.rs)(we,le),De=ie?.yCeil?we=>(0,d.Uh)(we,ue):we=>(0,d.rs)(we,ue);if(oe){ue=1/(ie?.ySize??1);let we=oe===2?Math.log2:Math.log10;De=ie?.yCeil?je=>(0,d.Uh)(we(je),ue):je=>(0,d.rs)(we(je),ue)}let Fe=re(J),Ee=re(ne),Me=De(G),ze=De(te),xe=Math.round((Ee-Fe)/le)+1,We=Math.round((ze-Me)/ue)+1,[be,pe,Ue]=H(xe,We,Fe,le,Me,ue,oe);for(let we=0;we<fe;we++){if(oe&&ee[we]<=0)continue;const je=(re(k[we])-Fe)/le,He=(De(ee[we])-Me)/ue,rt=je*We+He;Ue[rt]++}return{x:be,y:pe,count:Ue}}function H(k,ee,ie,fe,q,Z,J){const G=k*ee,ne=new Array(G),te=new Array(G),oe=new Array(G);for(let le=0,ue=0,Te=ie;le<G;ue=++le%ee)oe[le]=0,J?te[le]=J**(q+ue*Z):te[le]=q+ue*Z,ue===0&&le>=ee&&(Te+=fe),ne[le]=Te;return[ne,te,oe]}},91847:(Q,I,e)=>{"use strict";e.d(I,{$n:()=>r,g_:()=>t,uk:()=>n});var t=(o=>(o.ShortcodeFigure="shortcodeFigure",o.UIImage="uiImage",o))(t||{});const n={calculateField:{name:"Add field from calculation",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

- **Mode** - Select a mode:
  - **Reduce row** - Apply selected calculation on each row of selected fields independently.
  - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
  - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
    - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
    - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
    - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
    - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
    - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
  - **Cumulative functions** - Apply functions on the current row and all preceding rows.
    - **Total** - Calculates the cumulative total up to and including the current row.
    - **Mean** - Calculates the mean up to and including the current row.
  - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
    With a trailing window the current row will be the last row in the window.
    With a centered window the window will be centered on the current row.
    For even window sizes, the window will be centered between the current row, and the previous row.
    - **Mean** - Calculates the moving mean or running average.
    - **Stddev** - Calculates the moving standard deviation.
    - **Variance** - Calculates the moving variance.
  - **Row index** - Insert a field with the row index.
- **Field name** - Select the names of fields you want to use in the calculation for the new field.
- **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
- **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
- **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
- **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
- **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.

> **Note:** **Cumulative functions** and **Window functions** modes are currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`addFieldFromCalculationStatFunctions\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.

In the example below, we added two fields together and named them Sum.

${s("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",o,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
Use this transformation to combine all fields from all frames into one result.

For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

Consider the following:

**Query A:**

| Temp  | Uptime  |
| ----- | ------- |
| 15.4  | 1230233 |

**Query B:**

| AQI   | Errors |
| ----- | ------ |
| 3.2   | 5      |

After you concatenate the fields, the data frame would be:

| Temp | Uptime  | AQI | Errors |
| ---- | ------- | --- | ------ |
| 15.4 | 1230233 | 3.2 | 5      |

This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

#### Options

- **Config query** - Select the query that returns the data you want to use as configuration.
- **Apply to** - Select the fields or series to which the configuration should be applied.
- **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

#### Field mapping table

Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

#### Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

#### Value mappings

You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Color | All values |

Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.
  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
Use this transformation to modify the field type of a specified field.

This transformation has the following options:

- **Field** - Select from available fields
- **as** - Select the FieldType to convert to
  - **Numeric** - attempts to make the values numbers
  - **String** - will make the values strings
  - **Time** - attempts to parse the values as time
    - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
  - **Boolean** - will make the values booleans
  - **Enum** - will make the values enums
    - Will show a table to manage the enums
  - **Other** - attempts to parse the values as JSON

For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

#### Sample Query

| Time       | Mark  | Value |
|------------|-------|-------|
| 2017-07-01 | above | 25    |
| 2018-08-02 | below | 22    |
| 2019-09-02 | below | 29    |
| 2020-10-04 | above | 22    |

The result:

#### Transformed Query

| Time                | Mark  | Value |
|---------------------|-------|-------|
| 2017-01-01 00:00:00 | above | 25    |
| 2018-01-01 00:00:00 | below | 22    |
| 2019-01-01 00:00:00 | below | 29    |
| 2020-01-01 00:00:00 | above | 22    |

This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(){return`
Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

- **Source** - Select the field for the source of data.
- **Format** - Choose one of the following:
  - **JSON** - Parse JSON content from the source.
  - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
  - **Auto** - Discover fields automatically.
- **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
- **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

Consider the following dataset:

#### Dataset Example

| Timestamp           | json_data     |
|---------------------|---------------|
| 1636678740000000000 | {"value": 1}  |
| 1636678680000000000 | {"value": 5}  |
| 1636678620000000000 | {"value": 12} |

You could prepare the data to be used by a [Time series panel][] with this configuration:

- Source: json_data
- Format: JSON
  - Field: value
  - Alias: my_value
- Replace all fields: true
- Keep time: true

This will generate the following output:

#### Transformed Data

| Timestamp           | my_value |
|---------------------|----------|
| 1636678740000000000 | 1        |
| 1636678680000000000 | 5        |
| 1636678620000000000 | 12       |

This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
This transformation has the following fields:

- **Field** - Select a text field from your dataset.
- **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

This transformation currently supports spatial data.

For example, if you have this data:

#### Dataset Example

| Location  | Values |
|-----------|--------|
| AL        | 0      |
| AK        | 10     |
| Arizona   | 5      |
| Arkansas  | 1      |
| Somewhere | 5      |

With this configuration:

- Field: location
- Lookup: USA States

You'll get the following output:

#### Transformed Data

| Location  | ID | Name     | Lng         | Lat       | Values |
|-----------|----|----------|-------------|-----------|--------|
| AL        | AL | Alabama  | -80.891064  | 12.448457 | 0      |
| AK        | AK | Arkansas | -100.891064 | 24.448457 | 10     |
| Arizona   |    |          |             |           | 5      |
| Arkansas  |    |          |             |           | 1      |
| Somewhere |    |          |             |           | 5      |

This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to hide one or more queries in panels that have multiple queries.

Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

> **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

${s("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",o,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

The available conditions for all fields are:

- **Regex** - Match a regex expression.
- **Is Null** - Match if the value is null.
- **Is Not Null** - Match if the value is not null.
- **Equal** - Match if the value is equal to the specified value.
- **Different** - Match if the value is different than the specified value.

The available conditions for string fields are:

- **Contains substring** - Match if the value contains the specified substring (case insensitive).
- **Does not contain substring** - Match if the value doesn't contain the specified substring (case insensitive).

The available conditions for number fields are:

- **Greater** - Match if the value is greater than the specified value.
- **Lower** - Match if the value is lower than the specified value.
- **Greater or equal** - Match if the value is greater or equal.
- **Lower or equal** - Match if the value is lower or equal.
- **Range** - Match a range between a specified minimum and maximum, min and max included.

Consider the following dataset:

#### Dataset Example

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:23 | 32          | 101      |
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:32:24 | 31          | 95       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

- Filter Type: 'Include'
- Condition: Rows where 'Temperature' matches 'Lower Than' '30'

And you will get the following result, where only the temperatures below 30\xB0C are included:

#### Transformed Data

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

- Filter type: 'Include' rows that 'Match All' conditions
- Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
- Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

Conditions that are invalid or incompletely configured are ignored.

This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:

- [Using a regular expression](#use-a-regular-expression)
- [Manually selecting included fields](#manually-select-included-fields)
- [Using a dashboard variable](#use-a-dashboard-variable)

#### Use a regular expression

When you filter using a regular expression, field names that match the regular expression are included. 

For example, from the input data:

| Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
| ------------------- | ----------- | ------------ | ------------ | ------------- |
| 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |

The result from using the regular expression 'prod.*' would be:

| Time                | prod-eu-west | prod-eu-north |
| ------------------- | ------------ | ------------- |
| 2023-03-04 23:56:23 | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 22.1         | 20.1          |

The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.

#### Manually select included fields

Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.

#### Use a dashboard variable

Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

${s("/static/img/docs/transformations/filter-name-table-before-7-0.png",o,"A table visualization with time, value, Min, and Max columns")}

Here's the table after we applied the transformation to remove the Min field.

${s("/static/img/docs/transformations/filter-name-table-after-7-0.png",o,"A table visualization with time, value, and Max columns")}

Here is the same query using a Stat visualization.

${s("/static/img/docs/transformations/filter-name-stat-after-7-0.png",o,"A stat visualization with value and Max fields")}

This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
Use this transformation to customize the output of a string field. This transformation has the following fields:

- **Upper case** - Formats the entire string in uppercase characters.
- **Lower case** - Formats the entire string in lowercase characters.
- **Sentence case** - Formats the first character of the string in uppercase.
- **Title case** - Formats the first character of each word in the string in uppercase.
- **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
- **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
- **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
- **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
- **Trim** - Removes all leading and trailing spaces from the string.
- **Substring** - Returns a substring of the string, using the specified start and end positions.

This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.

> **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`formatString\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

**Before Transformation:**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 1636678740000000000 | System Start |
| 1636678680000000000 | User Login   |
| 1636678620000000000 | Data Updated |

**After applying 'YYYY-MM-DD HH:mm:ss':**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 2021-11-12 14:25:40 | System Start |
| 2021-11-12 14:24:40 | User Login   |
| 2021-11-12 14:23:40 | Data Updated |

This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

> **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

Here's an example of original data.

| Time                | Server ID | CPU Temperature | Server Status |
| ------------------- | --------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
| 2020-07-07 11:34:20 | server 3  | 62              | OK            |
| 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
| 2020-07-07 10:31:22 | server 3  | 55              | OK            |
| 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
| 2020-07-07 09:30:05 | server 2  | 88              | OK            |
| 2020-07-07 09:28:06 | server 1  | 80              | OK            |
| 2020-07-07 09:25:05 | server 2  | 88              | OK            |
| 2020-07-07 09:23:07 | server 1  | 86              | OK            |

This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

| Time                | Server ID      | CPU Temperature | Server Status |
| ------------------- | -------------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
| 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
| 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
| 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
| 2020-07-07 09:30:05 | server 2       | 88              | OK            |
| 2020-07-07 09:25:05 | server 2       | 88              | OK            |
| 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
| 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
| 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

All rows with the same value of Server ID are grouped together.

After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

| Server ID | CPU Temperature (mean) |
| --------- | ---------------------- |
| server 1  | 82                     |
| server 2  | 88.6                   |
| server 3  | 59.6                   |

And we can add more than one calculation. For instance:

- For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
- For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
- For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

We would then get:

| Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
| --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
| server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
| server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
| server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

**Original data**

| Server ID | CPU Temperature | Server Status |
| --------- | --------------- | ------------- |
| server 1  | 82              | OK            |
| server 2  | 88.6            | OK            |
| server 3  | 59.6            | Shutdown      |

We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

**Output**

| Server IDServer Status | OK   | Shutdown |
| ----------------------- | ---- | -------- |
| server 1                | 82   |          |
| server 2                | 88.6 |          |
| server 3                |      | 59.6     |

Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},groupToNestedTable:{name:"Group to nested table",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Records are generated that share the same grouped field value, to be displayed in a nested table.
    
  To calculate a statistic for a field, click the selection box next to it and select the **Calculate** option:

  ${s("/static/img/docs/transformations/nested-table-select-calculation.png",o,"A select box showing the Group and Calculate options for the transformation.")}

  Once **Calculate** has been selected, another selection box will appear next to the respective field which will allow statistics to be selected:

  ${s("/static/img/docs/transformations/nested-table-select-stat.png",o,"A select box showing available statistic calculations once the calculate option for the field has been selected.")}

  For information about available calculations, refer to [Calculation types][].

  Here's an example of original data:

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation has two steps. First, specify one or more fields by which to group the data. This groups all the same values of those fields together, as if you sorted them. For instance, if you group by the Server ID field, Grafana groups the data this way:

  | Server ID      |  |
  | -------------- | ------------- |
  | server 1 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>80</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>80</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>86</td><td>OK</td></tr></tbody></table> |
  | server 2 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>90</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>88</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>88</td><td>OK</td></tr></tbody></table> |
  | server 3 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>62</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>55</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>62</td><td>Rebooting</td></tr></tbody></table> |

  After choosing the field by which you want to group your data, you can add various calculations on the other fields and apply the calculation to each group of rows. For instance, you might want to calculate the average CPU temperature for each of those servers. To do so, add the **mean calculation** applied on the CPU Temperature field to get the following result:

  | Server ID      | CPU Temperatute (mean) | |
  | -------------- | ------------- | ------------- |
  | server 1 | 82 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>OK</td></tr></tbody></table> |
  | server 2 | 88.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>OK</td></tr></tbody></table> |
  | server 3 | 59.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>Rebooting</td></tr></tbody></table> |
      `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

#### X Bucket

This setting determines how the x-axis is split into buckets.

- **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
- **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

#### Y Bucket

This setting determines how the y-axis is split into buckets.

- **Linear**
- **Logarithmic** - Choose between log base 2 or log base 10.
- **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

Assume you have the following dataset:

| Timestamp           | Value |
|-------------------- |-------|
| 2023-01-01 12:00:00 | 5     |
| 2023-01-01 12:15:00 | 10    |
| 2023-01-01 12:30:00 | 15    |
| 2023-01-01 12:45:00 | 8     |

- With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
- For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

- **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
- **Bucket offset** - The offset for non-zero-based buckets.
- **Combine series** - Create a unified histogram using all available series.

**Original data**

Series 1:

| A | B | C |
| - | - | - |
| 1 | 3 | 5 |
| 2 | 4 | 6 |
| 3 | 5 | 7 |
| 4 | 6 | 8 |
| 5 | 7 | 9 |

Series 2:

| C |
| - |
| 5 |
| 6 |
| 7 |
| 8 |
| 9 |

**Output**

| xMin | xMax | A | B | C | C |
| ---- | ---- | --| --| --| --|
| 1    | 2    | 1 | 0 | 0 | 0 |
| 2    | 3    | 1 | 0 | 0 | 0 |
| 3    | 4    | 1 | 1 | 0 | 0 |
| 4    | 5    | 1 | 1 | 0 | 0 |
| 5    | 6    | 1 | 1 | 1 | 1 |
| 6    | 7    | 0 | 1 | 1 | 1 |
| 7    | 8    | 0 | 1 | 1 | 1 |
| 8    | 9    | 0 | 0 | 1 | 1 |
| 9    | 10   | 0 | 0 | 1 | 1 |

Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

This is especially useful for converting multiple time series results into a single wide table with a shared time field.

#### Inner join

An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur.

In the following example, two queries return table data. It is visualized as two separate tables before applying the inner join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the inner join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

#### Outer join

An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the outer join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:04:20 |         |           | server 3 | 10     |
| 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

${s("/static/img/docs/transformations/join-fields-before-7-0.png",o,"A table visualization showing results for one server")}

I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

${s("/static/img/docs/transformations/join-fields-after-7-0.png",o,"A table visualization showing results for multiple servers")}

Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
Use this transformation to join multiple results into a single table.

This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

- **Join** - Select the label to join by between the labels available or common across all time series.
- **Value** - The name for the output result.

#### Example

##### Input

series1{what="Temp", cluster="A", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series2{what="Temp", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series3{what="Speed", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 22   | 22    |
| 28   | 77    |

##### Config

value: "what"

##### Output

| cluster | job | Temp | Speed |
| ------- | --- | ---- | ----- |
| A       | J1  | 10   |       |
| A       | J1  | 200  |       |
| B       | J1  | 10   | 22    |
| B       | J1  | 200  | 77    |

Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

Given a query result of two time series:

- Series 1: labels Server=Server A, Datacenter=EU
- Series 2: labels Server=Server B, Datacenter=EU

In "Columns" mode, the result looks like this:

| Time                | Server   | Datacenter | Value |
| ------------------- | -------- | ---------- | ----- |
| 2020-07-07 11:34:20 | Server A | EU         | 1     |
| 2020-07-07 11:34:20 | Server B | EU         | 2     |

In "Rows" mode, the result has a table for each series and show each label value like this:

| label      | value    |
| ---------- | -------- |
| Server     | Server A |
| Datacenter | EU       |

| label      | value    |
| ---------- | -------- |
| Server     | Server B |
| Datacenter | EU       |

#### Value field name

If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

| Time                | Datacenter | Server A | Server B |
| ------------------- | ---------- | -------- | -------- |
| 2020-07-07 11:34:20 | EU         | 1        | 2        |

#### Merging behavior

The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

- Series 1: labels Server=ServerA
- Series 2: labels Datacenter=EU

This will first result in these two tables:

| Time                | Server  | Value |
| ------------------- | ------- | ----- |
| 2020-07-07 11:34:20 | ServerA | 10    |

| Time                | Datacenter | Value |
| ------------------- | ---------- | ----- |
| 2020-07-07 11:34:20 | EU         | 20    |

After merge:

| Time                | Server  | Value | Datacenter |
| ------------------- | ------- | ----- | ---------- |
| 2020-07-07 11:34:20 | ServerA | 10    |            |
| 2020-07-07 11:34:20 |         | 20    | EU         |

Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

Here is the result after adding a Limit transformation with a value of '3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.

Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |

**Query B:**

| Time                | Job     | Errors |
| ------------------- | ------- | ------ |
| 2020-07-07 11:34:20 | node    | 15     |
| 2020-07-07 11:24:20 | postgre | 5      |

Here is the result after applying the Merge transformation.

| Time                | Job     | Errors | Uptime    |
| ------------------- | ------- | ------ | --------- |
| 2020-07-07 11:34:20 | node    | 15     | 25260122  |
| 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

#### Transforming fields

Grafana displays a list of fields returned by the query, allowing you to perform the following actions:

- **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
- **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
- **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.

#### Example:

##### Original Query Result

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

##### After Applying Field Overrides

| Time                | Sensor      | Reading |
| ------------------- | ----------- | ------- |
| 2020-07-07 11:34:20 | Temperature | 25      |
| 2020-07-07 11:34:20 | Humidity    | 22      |
| 2020-07-07 10:32:20 | Humidity    | 29      |

This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.

This is particularly useful when dealing with a metrics SQL table, as illustrated below:

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | US     | 1327  |
| 2022-10-20 01:00:00 | EU     | 912   |

With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 01:00:00 | US     | 1327  |

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | EU     | 912   |

This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

#### Available options

##### Multi-frame time series

Use this option to transform the time series data frame from the wide format to the long format. This is particularly helpful when your data source delivers time series information in a format that needs to be reshaped for optimal compatibility with your visualization.

**Example: Converting from wide to long format**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

**Transformed to:**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |


##### Wide time series

Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.

**Example: Converting from long to wide format**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

> **Note:** This transformation is available in Grafana 7.5.10+ and Grafana 8.0.6+.
  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

Consider the input:

**Query A:**

| Time                | Temp | Uptime  |
| ------------------- | ---- | ------- |
| 2020-07-07 11:34:20 | 12.3 | 256122  |
| 2020-07-07 11:24:20 | 15.4 | 1230233 |

**Query B:**

| Time                | AQI | Errors |
| ------------------- | --- | ------ |
| 2020-07-07 11:34:20 | 6.5 | 15     |
| 2020-07-07 11:24:20 | 3.2 | 5      |

The reduce transformer has two modes:

- **Series to rows** - Creates a row for each field and a column for each calculation.
- **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
the result would be:

| Field  | First  | Last    |
| ------ | ------ | ------- |
| Temp   | 12.3   | 15.4    |
| Uptime | 256122 | 1230233 |
| AQI    | 6.5    | 3.2     |
| Errors | 15     | 5       |

The **Reduce fields** with the **Last** calculation,
results in two frames, each with one row:

**Query A:**

| Temp | Uptime  |
| ---- | ------- |
| 15.4 | 1230233 |

**Query B:**

| AQI | Errors |
| --- | ------ |
| 3.2 | 5      |

This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '/^([^.]+).*/' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.

> **Note:** The Rename by regex transformation was improved in Grafana v9.0.0 to allow global patterns of the form '/<stringToReplace>/g'. Depending on the regex match used, this may cause some transformations to behave slightly differently. You can guarantee the same behavior as before by wrapping the match string in forward slashes '(/)', e.g. '(.*)' would become '/(.*)/'.

In the following example, we are stripping the 'A-' prefix from field names. In the before image, you can see everything is prefixed with 'A-':

${s("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-before-v11.0.png",o,"A time series with full series names")}

With the transformation applied, you can see we are left with just the remainder of the string.

${s("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-after-v11.0.png",o,"A time series with shortened series names")}

This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

This transformation requires:

- One field to use as the source of field names.

  By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

- One field to use as the source of values.

  By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

Useful when visualizing data in:

- Gauge
- Stat
- Pie chart

#### Map extra fields to labels

If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

**Example:**

| Name    | DataCenter | Value |
| ------- | ---------- | ----- |
| ServerA | US         | 100   |
| ServerB | EU         | 200   |

**Output:**

| ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
| -------------------------------- | -------------------------------- |
| 10                               | 20                               |

The extra labels can now be used in the field display name provide more complete field names.

If you want to extract config from one query and apply it to another you should use the config from query results transformation.

#### Example

**Input:**

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

**Output:**

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

**Query A:**

| Time                | Temperature |
| ------------------- | ----------- |
| 2020-07-07 11:34:20 | 25          |
| 2020-07-07 10:31:22 | 22          |
| 2020-07-07 09:30:05 | 19          |

**Query B:**

| Time                | Humidity |
| ------------------- | -------- |
| 2020-07-07 11:34:20 | 24       |
| 2020-07-07 10:32:20 | 29       |
| 2020-07-07 09:30:57 | 33       |

Here is the result after applying the Series to rows transformation.

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

> **Note:** This transformation is available in Grafana 7.1+.
  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.

For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
Use this transformation to apply spatial operations to query results.

- **Action** - Select an action:
  - **Prepare spatial field** - Set a geometry field based on the results of other fields.
    - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
      - **Auto** - Automatically identify location data based on default field names.
      - **Coords** - Specify latitude and longitude fields.
      - **Geohash** - Specify a geohash field.
      - **Lookup** - Specify Gazetteer location fields.
  - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
    - **Function** - Choose a mathematical operation to apply to the geometry:
      - **Heading** - Calculate the heading (direction) between two points.
      - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
      - **Distance** - Calculate the distance between two points.
  - **Transform** - Apply spatial operations to the geometry.
    - **Operation** - Choose an operation to apply to the geometry:
      - **As line** - Create a single line feature with a vertex at each row.
      - **Line builder** - Create a line between two points.

This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field which can then be used with the [sparkline cell type][]. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

${s("/static/img/docs/transformations/table-sparklines.png",o,"A table panel showing multiple values and their corresponding sparklines.")}

For each generated **Trend** field value, a calculation function can be selected. This value is displayed next to the sparkline and will be used for sorting table rows.

${s("/static/img/docs/transformations/timeseries-table-select-stat.png",o,"A select box showing available statistics that can be calculated.")}


> **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},regression:{name:"Regression analysis",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

There are two different models:

- **Linear regression** - Fits a linear function to the data.
${s("/static/img/docs/transformations/linear-regression.png",o,"A time series visualization with a straight line representing the linear function")}
- **Polynomial regression** - Fits a polynomial function to the data.
${s("/static/img/docs/transformations/polynomial-regression.png",o,"A time series visualization with a curved line representing the polynomial function")}

> **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`regressionTransformation\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}}};function r(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function s(o,m,i){return m==="shortcodeFigure"?`{{< figure src="${o}" class="docs-image--no-shadow" max-width= "1100px" alt="${i}" >}}`:`![${i}](https://grafana.com${o})`}},9581:(Q,I,e)=>{"use strict";e.d(I,{YD:()=>s,dy:()=>n,kD:()=>r});var t=e(52622),n=(m=>(m.Prepare="prepare",m.Calculate="calculate",m.Modify="modify",m))(n||{}),r=(m=>(m.Heading="heading",m.Distance="distance",m.Area="area",m))(r||{}),s=(m=>(m.AsLine="asLine",m.LineBuilder="lineBuilder",m))(s||{});const o={action:"prepare",source:{mode:t.aG.Auto}}},78134:(Q,I,e)=>{"use strict";e.d(I,{EX:()=>c,pp:()=>u,tt:()=>l});var t=e(70915),n=e(11217),r=e(44294),s=e(22796),o=e(52490),m=e(11261),i=e(9581);function l(E){const p=[];for(const b of E.values)b&&p.push(c(b));return new n.A(p)}function d(E){const p=new Array(E.length);if(E.length>1){let b=g(E[0]);for(let a=1;a<E.length;a++){let h=g(E[a]);if(b&&h){let P=Math.atan2(h[0]-b[0],h[1]-b[1])*180/Math.PI;P<0&&(P+=360),p[a-1]=p[a]=P}}}else p.fill(0);return p}function c(E){return E instanceof r.A?E.getCoordinates():(0,t.q1)(E.getExtent())}function g(E){if(E)return(0,s.WP)(c(E))}function u(E,p){const b=E.values,a=new Array(E.values.length),h=p.calc??i.kD.Heading,P=p.field??h;switch(h){case i.kD.Area:{for(let y=0;y<b.length;y++){const C=b[y];C&&(a[y]=(0,o.UG)(C))}return{name:P,type:m.PU.number,config:{unit:"areaM2"},values:a}}case i.kD.Distance:{for(let y=0;y<b.length;y++){const C=b[y];C&&(a[y]=(0,o.R3)(C))}return{name:P,type:m.PU.number,config:{unit:"lengthm"},values:a}}case i.kD.Heading:default:return{name:P,type:m.PU.number,config:{unit:"degree"},values:d(b)}}}},88841:(Q,I,e)=>{"use strict";e.d(I,{y:()=>p});var t=e(32196),n=e(18491),r=e(36376),s=e(96540),o=e(40845),m=e(17464),i=e(40276),l=e(72093),d=e(10354),c=e(43538);const g=(a,h)=>a-h*Math.floor(a/h),u=8,E=(a,h)=>({suggestionsWrapper:(0,t.css)({boxShadow:a.shadows.z2}),errorTooltip:(0,t.css)({position:"absolute",top:h+u+"px",zIndex:a.zIndex.tooltip}),inputWrapper:(0,t.css)({position:"relative"})}),p=({value:a="",onChange:h,suggestions:P,placeholder:y,error:C,invalid:f})=>{const[D,T]=(0,s.useState)(!1),[M,O]=(0,s.useState)(0),[S,v]=(0,s.useState)(a.toString()),[x,A]=(0,s.useState)(0),[R,B]=(0,s.useState)(0),[U,w]=(0,s.useState)(0),K=(0,o.$j)(),N=E(K,R),L=(0,s.useRef)(),V=[(0,n.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,n.BN)()],{refs:F,floatingStyles:z}=(0,r.we)({open:D,placement:"bottom-start",onOpenChange:T,middleware:V,whileElementsMounted:n.ll,strategy:"fixed"}),Y=(0,s.useCallback)(q=>{F.setReference(q),L.current=q},[F]),H=(0,s.useRef)(null);(0,s.useEffect)(()=>{A(b(H.current,M))},[M]);const k=s.useCallback((q,Z=L.current)=>{const J=Z.selectionStart,G=Z.value;G[U-1]==="$"?Z.value=G.slice(0,U)+q.value+G.slice(J):Z.value=G.slice(0,U)+"$"+q.value+G.slice(J),v(Z.value),T(!1),O(0),h(Z.value)},[h,U]),ee=s.useCallback(q=>{if(!D){if(q.key==="$"||q.key===" "&&q.ctrlKey){w(L.current.selectionStart||0),T(!0);return}return}switch(q.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return T(!1),O(0);case"Enter":return q.preventDefault(),k(P[M]);case"ArrowDown":case"ArrowUp":q.preventDefault();const Z=q.key==="ArrowDown"?1:-1;return O(J=>g(J+Z,P.length));default:return}},[D,P,M,k]),ie=s.useCallback(q=>{v(q.currentTarget.value)},[]),fe=s.useCallback(q=>{h(q.currentTarget.value)},[h]);return(0,s.useEffect)(()=>{B(L.current.clientHeight)},[]),s.createElement("div",{className:N.inputWrapper},D&&s.createElement(m.ZL,null,s.createElement("div",{ref:F.setFloating,style:z,className:N.suggestionsWrapper},s.createElement(i.E,{scrollTop:x,autoHeightMax:"300px",setScrollTop:({scrollTop:q})=>A(q)},s.createElement(c.k,{activeRef:H,suggestions:P,onSuggestionSelect:k,onClose:()=>T(!1),activeIndex:M})))),f&&C&&s.createElement("div",{className:N.errorTooltip},s.createElement(l.P,null,C)),s.createElement(d.p,{placeholder:y,invalid:f,ref:Y,value:S,onChange:ie,onBlur:fe,onKeyDown:ee}))};p.displayName="SuggestionsInput";function b(a,h){return(a?.clientHeight??0)*h}},94397:(Q,I,e)=>{"use strict";e.d(I,{N_:()=>l,ZI:()=>o,aG:()=>m,eJ:()=>i,qt:()=>d});var t=e(96540),n=e(28240),r=e(91410),s=e(32264);function o(c){return(0,t.useMemo)(()=>Array.isArray(c)?Object.keys(c.reduce((g,u)=>!u||!Array.isArray(u.fields)?g:u.fields.reduce((E,p)=>{const b=(0,n.Ct)(p,u,c);return E[b]=!0,E},g),{})):[],[c])}function m(c){const g=new Set;for(const u of c)for(const E of u.fields)if(E.labels)for(const p of Object.keys(E.labels))g.add(p);return g}const i={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},l=c=>!!(typeof c=="number"||!Number.isNaN(Number(c))||/^\$[A-Za-z0-9_]+$/.test(c)&&s.$.featureToggles.transformationsVariableSupport);function d(c){const g=[];c&&(g.push({label:"Browser",value:"browser"}),g.push({label:"UTC",value:"utc"}));const u=(0,r.P3)();for(const E of u)g.push({label:E,value:E});return g}},87617:(Q,I,e)=>{"use strict";e.d(I,{$u:()=>g,Ay:()=>b,Cj:()=>l,EC:()=>c,Y_:()=>i,dJ:()=>u,g4:()=>d,jE:()=>E,t_:()=>o});var t=e(30038),n=e(2913);const r={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:n.Ay.externalUserMngInfo,externalUserMngLinkName:n.Ay.externalUserMngLinkName,externalUserMngLinkUrl:n.Ay.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},s=(0,t.Z0)({name:"users",initialState:r,reducers:{usersLoaded:(a,h)=>{const{totalCount:P,perPage:y,page:C,orgUsers:f}=h.payload,D=Math.ceil(P/y);return{...a,isLoading:!0,users:f,perPage:y,page:C,totalPages:D}},searchQueryChanged:(a,h)=>({...a,searchQuery:h.payload,page:r.page}),setUsersSearchPage:(a,h)=>({...a,page:h.payload}),pageChanged:(a,h)=>({...a,page:h.payload}),sortChanged:(a,h)=>({...a,sort:h.payload}),usersFetchBegin:a=>({...a,isLoading:!0}),usersFetchEnd:a=>({...a,isLoading:!1}),rolesFetchBegin:a=>({...a,rolesLoading:!0}),rolesFetchEnd:a=>({...a,rolesLoading:!1})}}),{searchQueryChanged:o,setUsersSearchPage:m,usersLoaded:i,usersFetchBegin:l,usersFetchEnd:d,pageChanged:c,sortChanged:g,rolesFetchBegin:u,rolesFetchEnd:E}=s.actions,b={users:s.reducer}},20601:(Q,I,e)=>{"use strict";e.d(I,{B:()=>n});var t=e(83077);const n=new t.O},26260:(Q,I,e)=>{"use strict";e.d(I,{$u:()=>p,D4:()=>h,Iv:()=>P,U2:()=>a,VT:()=>b,z_:()=>E});var t=e(2543),n=e.n(t),r=e(31193),s=e(3843),o=e(24240),m=e(72401),i=e(48594),l=e(87421),d=e(56968),c=e(75096),g=e(53699);const u="Filters",E=f=>async(D,T)=>{let M=C(f,T());if(!M&&(D(y(f)),M=C(f,T()),!M))return;const O=M.filters.findIndex(v=>v.key===f.key&&v.value===f.value);if(O===-1){const{value:v,key:x,operator:A}=f,R={value:v,key:x,operator:A};return await D(a((0,c.jX)(M),R))}const S={...M.filters[O],operator:f.operator};return await D(p((0,c.jX)(M),{index:O,filter:S}))},p=(f,D)=>async(T,M)=>{const O=(0,l.dn)(f,M());T((0,i.kb)(f.rootStateKey,(0,g.E2)((0,c.qD)(O,D)))),await T((0,m.us)((0,c.jX)(O),!0))},b=(f,D)=>async(T,M)=>{const O=(0,l.dn)(f,M());T((0,i.kb)(f.rootStateKey,(0,g.D$)((0,c.qD)(O,D)))),await T((0,m.us)((0,c.jX)(O),!0))},a=(f,D)=>async(T,M)=>{const O=(0,l.dn)(f,M());T((0,i.kb)(f.rootStateKey,(0,g.xt)((0,c.qD)(O,D)))),await T((0,m.us)((0,c.jX)(O),!0))},h=(f,D)=>async(T,M)=>{const O=(0,l.dn)(f,M());T((0,i.kb)(f.rootStateKey,(0,g.qZ)((0,c.qD)(O,D)))),await T((0,m.us)((0,c.jX)(O),!0))},P=(f,D)=>async(T,M)=>{const O=(0,l.dn)(f,M());T((0,i.kb)(f.rootStateKey,(0,d.QP)((0,c.qD)(O,{propName:"datasource",propValue:D}))));const v=(await(0,r.tR)().get(D))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";T((0,i.kb)(f.rootStateKey,(0,s.BC)({infoText:v})))},y=f=>(D,T)=>{const M=(0,l.y7)(T()),O={...(0,t.cloneDeep)(g.MK),datasource:f.datasource,name:u,id:u,rootStateKey:M},S=!1,v=(0,l.hk)(M,T()),x={type:"adhoc",id:O.id,rootStateKey:M};D((0,i.kb)(M,(0,d.QV)((0,c.qD)(x,{global:S,model:O,index:v}))))},C=(f,D)=>{const T=(0,l.y7)(D),M=(0,l.nx)(T,D);let O;for(const S of Object.values(M.variables))if((0,o.EW)(S)&&S.datasource?.uid===f.datasource.uid){O=S;break}return O}},53699:(Q,I,e)=>{"use strict";e.d(I,{AA:()=>g,D$:()=>l,E2:()=>d,MK:()=>o,qZ:()=>c,xt:()=>i});var t=e(30038),n=e(80484),r=e(87421),s=e(83370);const o={...n.Vg,type:"adhoc",datasource:null,filters:[]},m=(0,t.Z0)({name:"templating/adhoc",initialState:s.j,reducers:{filterAdded:(u,E)=>{const p=(0,r.Fs)(u,E.payload.id);p.type==="adhoc"&&p.filters.push(E.payload.data)},filterRemoved:(u,E)=>{const p=(0,r.Fs)(u,E.payload.id);if(p.type!=="adhoc")return;const b=E.payload.data;p.filters.splice(b,1)},filterUpdated:(u,E)=>{const p=(0,r.Fs)(u,E.payload.id);if(p.type!=="adhoc")return;const{filter:b,index:a}=E.payload.data;p.filters[a]=b},filtersRestored:(u,E)=>{const p=(0,r.Fs)(u,E.payload.id);p.type==="adhoc"&&(p.filters=E.payload.data)}}}),{filterAdded:i,filterRemoved:l,filterUpdated:d,filtersRestored:c}=m.actions,g=m.reducer},13344:(Q,I,e)=>{"use strict";e.d(I,{Ek:()=>o,To:()=>r,Zm:()=>n,ou:()=>s,qF:()=>t,qz:()=>m});const t="00000000-0000-0000-0000-000000000000",n="All",r="$__all",s="None",o="",m="var-"},35589:(Q,I,e)=>{"use strict";e.d(I,{c:()=>i,z:()=>l});var t=e(16792),n=e(96540),r=e(13544),s=e(40845),o=e(21744),m=e(85140);const i="Grafana-LegacyVariableQueryEditor",l=({onChange:d,query:c})=>{const g=(0,s.of)(m.$),[u,E]=(0,n.useState)(c),p=h=>{E(h.currentTarget.value)},b=(0,n.useCallback)(h=>{d(h.currentTarget.value,h.currentTarget.value)},[d]),a=(0,t.Bi)();return n.createElement(o.f,{id:a,rows:2,value:u,onChange:p,onBlur:b,placeholder:"Metric name or tags query",required:!0,"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:g.textarea})};l.displayName=i},70766:(Q,I,e)=>{"use strict";e.d(I,{y:()=>m});var t=e(96540),n=e(72574),r=e(22854),s=e(24240),o=e(35589);async function m(l,d=r.cS){if((0,s.zs)(l))return l.variables.editor;if((0,s.X3)(l)){const c=await d(l.meta);if(!c.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return c.components.QueryEditor??null}return(0,s.Hf)(l)?i:(0,s.d5)(l)?(await d(l.meta)).components.VariableQueryEditor??o.z:null}function i({datasource:l,query:d,onChange:c}){const g=(0,t.useCallback)(u=>{c({refId:"StandardVariableQuery",query:u})},[c]);return t.createElement(o.z,{query:d.query,onChange:g,datasource:l,templateSrv:(0,n.w)()})}},3843:(Q,I,e)=>{"use strict";e.d(I,{BC:()=>d,DW:()=>m,Eo:()=>g,FN:()=>o,NY:()=>c,T7:()=>l,nS:()=>n,sJ:()=>i,wf:()=>s,y8:()=>u});var t=e(30038);const n={id:"",isValid:!0,errors:{},name:"",extended:null},r=(0,t.Z0)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(E,p)=>{E.name=p.payload.name,E.id=p.payload.id},variableEditorUnMounted:(E,p)=>n,changeVariableNameSucceeded:(E,p)=>{E.name=p.payload.data.newName,delete E.errors.name,E.isValid=Object.keys(E.errors).length===0},changeVariableNameFailed:(E,p)=>{E.name=p.payload.newName,E.errors.name=p.payload.errorText,E.isValid=Object.keys(E.errors).length===0},addVariableEditorError:(E,p)=>{E.errors[p.payload.errorProp]=p.payload.errorText,E.isValid=Object.keys(E.errors).length===0},removeVariableEditorError:(E,p)=>{delete E.errors[p.payload.errorProp],E.isValid=Object.keys(E.errors).length===0},changeVariableEditorExtended:(E,p)=>{E.extended={...E.extended,...p.payload}},cleanEditorState:()=>n}}),s=r.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:m,variableEditorMounted:i,variableEditorUnMounted:l,changeVariableEditorExtended:d,addVariableEditorError:c,removeVariableEditorError:g,cleanEditorState:u}=r.actions},85830:(Q,I,e)=>{"use strict";e.d(I,{M:()=>t});var t=(n=>(n[n.MaxSize=50]="MaxSize",n))(t||{})},25304:(Q,I,e)=>{"use strict";e.d(I,{z:()=>s});var t=e(72574),n=e(20601),r=e(13344);function s(o){const m={},i=(0,t.w)().getVariables();for(let l=0;l<i.length;l++){const d=i[l],c=o&&o[d.name];d.skipUrlSync||(c?m[r.qz+d.name]=c.value:m[r.qz+d.name]=n.B.get(d.type).getValueForUrl(d))}return m}},24240:(Q,I,e)=>{"use strict";e.d(I,{CH:()=>b,EW:()=>s,Hf:()=>g,P4:()=>r,SP:()=>i,VN:()=>p,VO:()=>o,X3:()=>E,d5:()=>c,iv:()=>m,m8:()=>l,zs:()=>u});var t=e(29505),n=e(35589);const r=a=>a.type==="query",s=a=>a.type==="adhoc",o=a=>a.type==="constant",m=a=>"multi"in a,i=a=>"options"in a,l=a=>"current"in a;function d(a){return a===null?!1:typeof a=="string"}const c=a=>!!a.metricFindQuery&&!a.variables,g=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Standard)return!1;const h=a.variables;return"toDataQuery"in h&&!!h.toDataQuery},u=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Custom)return!1;const h=a.variables;return"query"in h&&"editor"in h&&!!h.query&&!!h.editor},E=a=>a.variables?a.variables.getType()===t.Qz.Datasource:!1;function p(a,h){return a?a.displayName===n.c||c(h):!1}function b(a,h){return a?a.displayName!==n.c&&(E(h)||g(h)||u(h)):!1}},27238:(Q,I,e)=>{"use strict";e.d(I,{WT:()=>n,bX:()=>o,t4:()=>s});var t=e(30038);const n={usages:[],usagesNetwork:[]},r=(0,t.Z0)({name:"templating/inspect",initialState:n,reducers:{initInspect:(m,i)=>{const{usages:l,usagesNetwork:d}=i.payload;m.usages=l,m.usagesNetwork=d}}}),s=r.reducer,{initInspect:o}=r.actions},12846:(Q,I,e)=>{"use strict";e.d(I,{qJ:()=>g,hI:()=>d,hM:()=>a,H7:()=>c,xU:()=>y,P5:()=>S,g0:()=>h,PK:()=>M,Ow:()=>D});var t=e(6709);function n(v,x){const A=new Set;for(const R of v)A.add(x(R));return A}var r=e(84423),s=e(87490),o=e(34214),m=e(20601),i=e(24240),l=e(75096);const d=v=>{const x=[];for(const A of v)x.push({id:A.id,label:`${A.id}`});return x},c=(v,x)=>v.filter(A=>x.some(R=>R.from===A.id||R.to===A.id)),g=v=>{const x=[];for(const A of v)for(const R of v){if(A===R)continue;m.B.get(A.type).dependsOn(A,R)&&x.push({from:A.id,to:R.id})}return x};function u(v){const x=(0,l.t4)(v);if(!x)return;const A=x.slice(1).find(R=>R!==void 0);if(!(A in{}))return A}const E=(v,x)=>{l.SY.lastIndex=0;const A=[],B=(0,s.MA)(x,2).match(l.SY);if(!B)return A;for(const U of B){if(!U||U.indexOf("$__")!==-1||U.indexOf("${__")!==-1||U.indexOf("$hashKey")!==-1)continue;const w=u(U);v.some(K=>K.id===w)||A.find(K=>K===w)||w&&A.push(w)}return A},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},b=(v,x,A)=>{const R=Object.keys(x.value).reduce((U,w)=>{const K=x.value[w];if(!K||typeof K!="string")return U;const N=p[w]?p[w].find(V=>V.test(v)):void 0;let L=(0,l.wJ)(K,v);return w==="repeat"&&K===v&&(L=!0),!N&&L&&(U={...U,[w]:K}),U},{}),B=Object.keys(x.value).reduce((U,w)=>{const K=x.value[w];if(K&&typeof K=="object"&&Object.keys(K).length){let N=K.title||K.name||K.id||w;Array.isArray(x.value)&&x.key==="panels"&&(N=`${N}[${K.id}]`);const L=b(v,{key:w,value:K},{});Object.keys(L).length&&(U={...U,[N]:L})}return U},{});return(Object.keys(R).length||Object.keys(B).length)&&(A={...A,...R,...B}),A},a=(v,x)=>{if(!x)return{unUsed:[],usages:[]};const A=[];let R=[];const B=x.getSaveModelCloneOld();for(const U of v){const w=U.id,K=b(w,{key:"model",value:B},{});!Object.keys(K).length&&!(0,i.EW)(U)&&A.push(U),Object.keys(K).length&&R.push({variable:U,tree:K})}return{unUsed:A,usages:R}};async function h(v,x){return new Promise((A,R)=>{setTimeout(()=>{try{const B=P(v,x);A(D(B))}catch(B){R(B)}},200)})}function P(v,x){if(!x)return[];let A=[];const R=x.getSaveModelCloneOld(),B=E(v,R);for(const U of B){const w=b(U,{key:"model",value:R},{});if(Object.keys(w).length){const K={id:U,name:U};A.push({variable:K,tree:w})}}return A}function y(v,x,A){const R=n(x.descendants(v),U=>U.name);R.add(t.c.includeVars);for(const U of v)R.add(U);return C([...R],A)}function C(v,x){const A=[];for(const R of v)x[R]&&A.push(...x[R]);return new Set(A)}const f=(v,x)=>{const{id:A,value:R}=x,{nodes:B,edges:U}=v;if(R&&typeof R=="string"){const w=`${x.id}-${R}`;return B.push({id:w,label:R}),U.push({from:w,to:A}),v}if(R&&typeof R=="object"){const w=Object.keys(R);for(const K of w){const N=`${x.id}-${K}`;B.push({id:N,label:K}),U.push({from:N,to:A}),v=f(v,{id:N,value:R[K]})}return v}return v},D=v=>{const x=[];for(const A of v){const{variable:R,tree:B}=A,U={variable:R,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};x.push(f(U,{id:"dashboard",value:B}))}return x},T=v=>Object.values(v).reduce((A,R)=>typeof R=="object"?A+T(R):A+1,0),M=(v,x)=>{const A=x.find(R=>R.variable.id===v);return A?T(A.tree):0};function O(v){const x=[];for(const A of v)x.push(A),A.panels?.length&&x.push(...O(A.panels.map(R=>new PanelModel(R))));return x}function S(v){const x={};for(const A of v){const R=(0,r.tw)(A),B=[...R.matchAll(/"repeat":"([^"]+)"/g)].map(K=>K[1]),U=R.match(l.SY)?.map(K=>u(K))??[],w=[...B,...U];for(const K of w)K in x?x[K].add(A.id):x[K]=new Set([A.id])}return x}},81515:(Q,I,e)=>{"use strict";e.d(I,{E5:()=>d,Ez:()=>i,mn:()=>c});var t=e(30038),n=e(2543),r=e.n(n),s=e(87421),o=e(83370),m=e(80484);const i={...m.Vg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:m.CO.onTimeRangeChanged,current:{}},l=(0,t.Z0)({name:"templating/interval",initialState:o.j,reducers:{createIntervalOptions:(g,u)=>{const E=(0,s.Fs)(g,u.payload.id);if(E.type!=="interval")return;const p=(0,n.map)(E.query.match(/(["'])(.*?)\1|\w+/g),b=>(b=b.replace(/["']+/g,""),{text:b.trim(),value:b.trim(),selected:!1}));E.auto&&p.length&&p[0].text!=="auto"&&p.unshift({text:"auto",value:"$__auto_interval_"+E.name,selected:!1}),E.options=p}}}),d=l.reducer,{createIntervalOptions:c}=l.actions},24300:(Q,I,e)=>{"use strict";e.d(I,{jR:()=>S,Fu:()=>C,$z:()=>l,O$:()=>f,ho:()=>v,MO:()=>y,an:()=>D,U9:()=>P,fx:()=>M,qh:()=>O,S8:()=>T});var t=e(53076),n=e(30038),r=e(2543),s=e(92053);const o=(x,...A)=>A.reduce((R,B)=>B(R),x);var m=e(13344),i=e(24240);const l={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},d=1e3,c=new t.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),g=x=>Array.isArray(x)?x.reduce((A,R)=>((0,r.isString)(R.value)&&(A[R.value]=R),A),{}):{},u=x=>{if(!Array.isArray(x.options))return x.options=[],x;const A=g(x.selectedValues);return x.selectedValues=Object.values(A),x.options=x.options.map(R=>{if(!(0,r.isString)(R.value))return R;const B=!!A[R.value];return R.selected===B?R:{...R,selected:B}}),x.options=E(x.options),x},E=x=>Array.isArray(x)?x.length<=d?x:x.slice(0,d):[],p=x=>{const{options:A,selectedValues:R}=x;return A.length===0||R.length>0||!A[0]||A[0].value!==m.To||(x.selectedValues=[{...A[0],selected:!0}]),x},b=x=>{const{selectedValues:A}=x;return A.length>1&&(x.selectedValues=A.filter(R=>R.value!==m.To)),x},a=x=>x.filter(A=>A.value!==m.To).map(A=>({...A,selected:!0})),h=(0,n.Z0)({name:"templating/optionsPicker",initialState:l,reducers:{showOptions:(x,A)=>{const{query:R,options:B}=A.payload;if(x.highlightIndex=-1,x.options=(0,r.cloneDeep)(B),x.id=A.payload.id,x.queryValue="",x.multi=!1,(0,i.iv)(A.payload)&&(x.multi=A.payload.multi??!1),(0,i.P4)(A.payload)){const{queryValue:U}=A.payload,w=(0,s.E)(R);x.queryValue=w&&U?U:""}return x.selectedValues=x.options.filter(U=>U.selected),o(x,p,u)},hideOptions:(x,A)=>({...l}),toggleOption:(x,A)=>{const{option:R,clearOthers:B,forceSelect:U}=A.payload,{multi:w,selectedValues:K}=x;if(R){const N=!K.find(L=>L.value===R.value&&L.text===R.text);if(R.value===m.To||!w||B)return N||U?x.selectedValues=[{...R,selected:!0}]:x.selectedValues=[],o(x,p,b,u);if(U||N)return x.selectedValues.push({...R,selected:!0}),o(x,p,b,u);x.selectedValues=K.filter(L=>L.value!==R.value&&L.text!==R.text)}else x.selectedValues=[];return o(x,p,b,u)},moveOptionsHighlight:(x,A)=>{let R=x.highlightIndex+A.payload;return R<0?R=-1:R>=x.options.length&&(R=x.options.length-1),{...x,highlightIndex:R}},toggleAllOptions:(x,A)=>{const R=x.selectedValues.find(U=>U.value===m.To),B=x.options.find(U=>U.value===m.To);return x.selectedValues.length>0&&B&&!R?(x.selectedValues=[],x.selectedValues.push({text:B.text??"All",value:B.value,selected:!0}),o(x,u)):R&&x.selectedValues.length===1?(x.selectedValues=a(x.options),o(x,u)):x.selectedValues.length>0&&!B?(x.selectedValues=[],o(x,u)):(x.selectedValues=a(x.options),o(x,u))},updateSearchQuery:(x,A)=>(x.queryValue=A.payload,x),updateOptionsAndFilter:(x,A)=>{const R=x.queryValue.trim();let B=[];if(R==="")B=A.payload;else{const U=A.payload.map(({text:L})=>Array.isArray(L)?L.toString():L),[w,K,N]=c.search(U,R,5);w?.length&&(K&&N?B=N.map(L=>A.payload[K.idx[L]]):B=w.map(L=>A.payload[L]),B.sort((L,V)=>(L.value===m.To?-1:0)-(V.value===m.To?-1:0)))}if(x.highlightIndex=0,R!==""){let U=B.findIndex(w=>w.value!==m.To);(U===-1||B[U].value!==R)&&(B.unshift({selected:!1,text:"> "+R,value:R}),x.highlightIndex=U===-1?0:U+1)}return x.options=B,o(x,p,u)},updateOptionsFromSearch:(x,A)=>(x.options=A.payload,x.highlightIndex=0,o(x,p,u)),cleanPickerState:()=>l}}),{toggleOption:P,showOptions:y,hideOptions:C,moveOptionsHighlight:f,toggleAllOptions:D,updateSearchQuery:T,updateOptionsAndFilter:M,updateOptionsFromSearch:O,cleanPickerState:S}=h.actions,v=h.reducer},86886:(Q,I,e)=>{"use strict";e.d(I,{C:()=>t});const t=(s,o)=>s&&(o&&!Array.isArray(s.value)?{...s,value:r(s.value),text:r(s.text)}:!o&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,r=s=>Array.isArray(s)?s:[s]},72401:(Q,I,e)=>{"use strict";e.d(I,{Y7:()=>He,TI:()=>fe,_q:()=>Ue,RK:()=>ze,t9:()=>Te,x7:()=>oe,Hn:()=>We,mZ:()=>rt,kl:()=>ue,us:()=>re});var t=e(2543),n=e(12470),r=e(92041),s=e(39070),o=e(22391),m=e(12131),i=e(32264),l=e(82467),d=e(16233),c=e(74856),g=e(99140),u=e(3169),E=e(10096),p=e(27677),b=e(34525),a=e(31193),h=e(23989),P=e(20601),y=e(13344),C=e(3843),f=e(24240),D=e(12846),T=e(24300),M=e(86886),O=e(80484),S=e(75096),v=e(73134),x=e(28601),A=e(48594),R=e(84014);const B=(ye,se=-1,ae=!1,ge=!1)=>{const Pe={};if(ge){const Re={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Be={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},_e={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};Pe[Re.id]=Re,Pe[Be.id]=Be,Pe[_e.id]=_e}for(let Re=0;Re<ye;Re++)Pe[Re]=createQueryVariable({id:Re.toString(),name:`Name-${Re}`,label:`Label-${Re}`,index:Re});return ae&&(Pe[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:ye})),Pe},U=(ye,se={})=>{const ae={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...ye.initialState,...ae},...se}}}},w=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),K=()=>combineReducers({templating:keyedVariablesReducer});function N(ye,se){return{templating:{lastKey:ye,keys:{[ye]:{...getInitialTemplatingState(),...se}}}}}function L(ye,se){return ye.find(ge=>ge.name===se)}function V(ye){return(ye.type==="query"||ye.type==="datasource"||ye.type==="interval")&&ye.refresh===v.CO.onTimeRangeChanged}var F=e(87421),z=e(56968),Y=e(85675),H=e(15120);const k=(ye,se)=>(ae,ge)=>{let Pe=0;const Re=se.templating.list;for(let _e=0;_e<Re.length;_e++){const Xe=ee(Re[_e]);Xe.rootStateKey=ye,P.B.getIfExists(Xe.type)&&ae((0,A.kb)(ye,(0,z.QV)((0,S.qD)(Xe,{global:!1,index:Pe++,model:Xe}))))}(0,h.w)().updateTimeRange((0,c.jG)().timeRange());const Be=(0,F.SS)(ye,ge());for(const _e of Be)ae((0,A.kb)(ye,(0,z.wB)((0,S.qD)(_e))))};function ee(ye){if(!(0,f.SP)(ye))return ye;let se=!1;for(const ae of ye.options)if(ae.selected=!1,Array.isArray(ye.current.value))for(const ge of ye.current.value)ae.value===ge&&(ae.selected=se=!0);else ae.value===ye.current.value&&(ae.selected=se=!0);return!se&&ye.options.length&&(ye.options[0].selected=!0),ye}const ie=(ye,se)=>ae=>{const ge={...O.Vg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:se.title,uid:se.uid,toString:()=>se.title}}};ae((0,A.kb)(ye,(0,z.QV)((0,S.qD)(ge,{global:ge.global,index:ge.index,model:ge}))));const Pe={...O.Vg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:d.TP.user.orgName,id:d.TP.user.orgId,toString:()=>d.TP.user.orgId.toString()}}};ae((0,A.kb)(ye,(0,z.QV)((0,S.qD)(Pe,{global:Pe.global,index:Pe.index,model:Pe}))));const Re={...O.Vg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{login:d.TP.user.login,id:d.TP.user.id,email:d.TP.user.email,toString:()=>d.TP.user.id.toString()}}};ae((0,A.kb)(ye,(0,z.QV)((0,S.qD)(Re,{global:Re.global,index:Re.index,model:Re}))))},fe=(ye,se)=>(ae,ge)=>{const{rootStateKey:Pe}=ye,Re=(0,F.dn)(ye,ge());if(!(0,f.iv)(Re)||(0,r.R)(Re.current))return;const Be=(0,M.C)(Re.current,se);ae((0,A.kb)(Pe,(0,z.QP)((0,S.qD)(ye,{propName:"multi",propValue:se})))),ae((0,A.kb)(Pe,(0,z.QP)((0,S.qD)(ye,{propName:"current",propValue:Be}))))},q=async(ye,se)=>{if(!ye.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ye.id}`);if(Z(ye,se))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const ae=J(ye,se);G(ye.rootStateKey,ae,se)&&await new Promise(ge=>{const Pe=g.M_.subscribe(()=>{if(!ye.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ye.id}`);G(ye.rootStateKey,ae,g.M_.getState())||(Pe(),ge())})})},Z=(ye,se,ae=new Set)=>ae.has(ye.id)?!0:(ae=new Set([...ae,ye.id]),J(ye,se).some(ge=>Z(ge,se,ae))),J=(ye,se)=>{if(!ye.rootStateKey)return[];const ae=[];for(const ge of(0,F.SS)(ye.rootStateKey,se))ye!==ge&&P.B.getIfExists(ye.type)&&P.B.get(ye.type).dependsOn(ye,ge)&&ae.push(ge);return ae},G=(ye,se,ae)=>{if(se.length===0)return!1;const ge=(0,F.SS)(ye,ae);return se.filter(Re=>ge.some(Be=>Be.id===Re.id&&(Be.state===s.Gu.NotStarted||Be.state===s.Gu.Loading))).length>0},ne=(ye,se)=>async(ae,ge)=>{const Pe=(0,F.dn)(ye,ge());await q(Pe,ge());const Re=se[y.qz+Pe.name];if(Re!==void 0){const Be=(0,S.QT)(Re);await P.B.get(Pe.type).setValueFromUrl(Pe,Be);return}if(Pe.hasOwnProperty("refresh")){const Be=Pe;if(Be.refresh===n.CO.onDashboardLoad||Be.refresh===n.CO.onTimeRangeChanged){await ae(rt((0,S.jX)(Be)));return}}if(Pe.type==="custom"){await ae(rt((0,S.jX)(Pe)));return}ae(Ve(ye))},te=ye=>async(se,ae)=>{const ge=m.Ny.getSearchObject(),Pe=(0,F.SS)(ye,ae()).map(async Re=>await se(ne((0,S.jX)(Re),ge)));await Promise.all(Pe)},oe=(ye,se)=>async(ae,ge)=>{const Pe=(0,S.QT)(se),Re=(0,F.dn)(ye,ge());(0,S.q$)(Re)!==n.CO.never&&await ae(rt((0,S.jX)(Re)));const Be=(0,F.dn)((0,S.jX)(Re),ge());if(!(0,f.SP)(Be))return;if(!Be)throw new Error(`Couldn't find variable with name: ${Re.name}`);let _e=Be.options.find(Xe=>Xe.text===Pe||Xe.value===Pe);if(!_e&&(0,f.iv)(Be)&&Be.allValue&&Pe===Be.allValue&&(_e={text:y.Zm,value:y.To,selected:!1}),!_e){let Xe=Pe;const tt=Pe;Array.isArray(Pe)&&(Xe=Pe.reduce((at,st)=>{const dt=Be.options.find(ot=>ot.value===st);return dt?[].concat(at,[dt.text]):[].concat(at,[st])},[])),_e={text:Xe,value:tt,selected:!1}}(0,f.iv)(Be)&&(_e=(0,M.C)({text:(0,t.castArray)(_e.text),value:(0,t.castArray)(_e.value),selected:!1},Be.multi)),await P.B.get(Re.type).setValue(Be,_e)},le=ye=>{let se,ae,ge,Pe;const Re=[];for(se=0;se<ye.options.length;se++)if(Pe={...ye.options[se]},Pe.selected=!1,Array.isArray(ye.current.value))for(ae=0;ae<ye.current.value.length;ae++)ge=ye.current.value[ae],Pe.value===ge&&(Pe.selected=!0,Re.push(Pe));else Pe.value===ye.current.value&&(Pe.selected=!0,Re.push(Pe));return Re},ue=(ye,se)=>(ae,ge)=>{const Pe=(0,F.dn)(ye,ge());if(!(0,f.SP)(Pe))return Promise.resolve();const Re=Pe.current||{},Be=P.B.get(Pe.type).setValue;if(Array.isArray(Re.value)){const at=le(Pe);if(at.length===0){const dt=Pe.options[0];return Be(Pe,{value:typeof dt.value=="string"?[dt.value]:dt.value,text:typeof dt.text=="string"?[dt.text]:dt.text,selected:!0})}const st={value:at.map(dt=>dt.value),text:at.map(dt=>dt.text),selected:!0};return Be(Pe,st)}let _e=null;const Xe=(0,S.Nz)(Pe),tt=(0,S.Lz)(Pe);if(_e=Pe.options?.find(at=>at.text===Xe||at.value===tt),_e||se&&(_e=Pe.options?.find(at=>at.text===se||at.value===se),_e))return Be(Pe,_e);if(Pe.options){const at=Pe.options[0];if(at)return Be(Pe,at)}return Promise.resolve()},Te=(ye,se,ae)=>async ge=>{const{rootStateKey:Pe}=ye;return ge((0,A.kb)(Pe,(0,z.dE)((0,S.qD)(ye,{option:se})))),await ge(re(ye,ae))},he=ye=>{const se=new b.TS;return ye.forEach(ae=>{se.createNode(ae.name)}),ye.forEach(ae=>{ye.forEach(ge=>{ae!==ge&&P.B.get(ae.type).dependsOn(ae,ge)&&se.link(ae.name,ge.name)})}),se},re=(ye,se,ae=E.lE)=>async(ge,Pe)=>{const Re=Pe(),{rootStateKey:Be}=ye,_e=(0,F.dn)(ye,Re);if((0,F.nx)(Be,Re).transaction.status===O.x8.Fetching)return(0,S.q$)(_e)===n.CO.never&&(await ge(Oe((0,S.jX)(_e))),ge(Ve(ye))),Promise.resolve();const Xe=(0,F.SS)(Be,Re),tt=he(Xe),at=Re.dashboard?.getModel()?.panels??[],st=(0,D.P5)(at),dt=_e.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,D.xU)([_e.id],tt,st)),variable:(0,F.dn)(ye,Re)},ot=tt.getNode(_e.name);let ft=[];return ot&&(ft=ot.getOptimizedInputEdges().map(yt=>{const Tt=Xe.find(Kt=>Kt.name===yt.inputNode?.name);return Tt?ge(rt((0,S.jX)(Tt))):Promise.resolve()})),Promise.all(ft).then(()=>{se&&(ae.publish(new O.og(dt)),m.Ny.partial(pe(Be,Pe)))})},De=(ye,se,ae,ge)=>(se.includes(ye.name)||se.push(ye.name),ye.outputEdges.forEach(Pe=>{const Re=Pe.outputNode;if(Re&&!se.includes(Re.name)){const Be=ae.find(_e=>_e.name===Re.name);Be&&Be.refresh===n.CO.onTimeRangeChanged&&ge.indexOf(Be)===-1?(ge.push(Be),se.push(Re.name)):De(Re,se,ae,ge)}}),ge),Fe=(ye,se)=>ye.outputEdges.every(ae=>{const ge=ae.outputNode;if(ge){const Pe=L(se,ge.name);if(Pe&&Pe.type==="query")return Pe.refresh!==n.CO.onTimeRangeChanged}return!0}),Ee=(ye,se)=>{const ae=(0,F.SS)(ye,se),ge=he(ae),Pe=[],Re=[];return ae.forEach(Be=>{const _e=ge.getNode(Be.name);if(!Pe.includes(Be.name)&&_e){const Xe=L(ae,_e.name);if(!Xe)return;const tt=V(Xe);tt&&_e.outputEdges.length===0&&Re.push(Xe),tt&&Re.includes(Xe)&&_e.outputEdges.length>0&&(Re.push(Xe),De(_e,Pe,ae,Re)),tt&&_e.outputEdges.length>0&&Fe(_e,ae)&&(Re.includes(Xe)||Re.push(Xe)),!tt&&_e.outputEdges.length>0&&De(_e,Pe,ae,Re)}}),Re},Me=(ye,se)=>(0,F.SS)(ye,se).filter(Pe=>"refresh"in Pe&&"options"in Pe?Pe.refresh===n.CO.onTimeRangeChanged:!1),ze=(ye,se,ae={templateSrv:(0,h.w)(),events:E.lE})=>async(ge,Pe)=>{ae.templateSrv.updateTimeRange(se);let Re=[];i.$.featureToggles.refactorVariablesTimeRange?Re=Ee(ye,Pe()):Re=Me(ye,Pe());const Be=Re.map(Xe=>Xe.id),_e=Re.map(Xe=>ge(xe((0,S.jX)(Xe))));try{await Promise.all(_e),ae.events.publish(new O.BS({variableIds:Be}))}catch(Xe){console.error(Xe),ge((0,l.dx)(Je("Template variable service failed",Xe)))}},xe=ye=>async(se,ae)=>{const ge=(0,F.dn)(ye,ae());if(!(0,f.SP)(ge))return;const Pe=ge.options.slice();await se(rt((0,S.jX)(ge),!0));const Re=(0,F.dn)(ye,ae());if(!(0,f.SP)(Re))return;const Be=Re.options;JSON.stringify(Pe)!==JSON.stringify(Be)&&ae().dashboard.getModel()?.templateVariableValueUpdated()},We=(ye,se,ae=E.lE)=>async(ge,Pe)=>{const Re=[],Be=Pe().dashboard.getModel(),_e=(0,F.SS)(ye,Pe());for(const dt of _e){const ot=y.qz+dt.name;if(!se.hasOwnProperty(ot)||!be(dt,se[ot].value))continue;let ft=se[ot].value;if(se[ot].removed){const Tt=Be?.templating.list.find(Kt=>Kt.name===dt.name);Tt&&(0,f.m8)(Tt)&&(ft=Tt.current.value),Tt&&Tt.type==="constant"&&(ft=Tt.query)}const yt=P.B.get(dt.type).setValueFromUrl(dt,ft);Re.push(yt)}const Xe=_e.filter(dt=>{const ot=y.qz+dt.name;return se.hasOwnProperty(ot)&&be(dt,se[ot].value)&&dt.type!=="adhoc"}),tt=he(_e),at=(0,D.P5)(Be?.panels??[]),st=(0,D.xU)(Xe.map(dt=>dt.id),tt,at);Re.length&&(await Promise.all(Re),ae.publish(new O.eF({refreshAll:st.size===0,panelIds:Array.from(st)})))};function be(ye,se){const ae=P.B.get(ye.type).getValueForUrl(ye);let ge=(0,S.QT)(se);return Array.isArray(ae)&&!Array.isArray(ge)&&(ge=[ge]),!(0,t.isEqual)(ae,ge)}const pe=(ye,se)=>{const ae=m.Ny.getSearchObject(),ge=Object.keys(ae).filter(Pe=>Pe.indexOf(y.qz)===-1).reduce((Pe,Re)=>(Pe[Re]=ae[Re],Pe),{});for(const Pe of(0,F.SS)(ye,se())){if(Pe.skipUrlSync)continue;const Re=P.B.get(Pe.type);ge[y.qz+Pe.name]=Re.getValueForUrl(Pe)}return ge},Ue=(ye,se)=>async(ae,ge)=>{try{const Pe=(0,S.q4)(ye),Re=ge(),Be=(0,F.Tk)(Re);Be&&(0,F.nx)(Be,Re).transaction.status===O.x8.Fetching&&ae(He(Be)),ae((0,A.kb)(Pe,(0,Y.kH)({uid:Pe}))),ae(ie(Pe,se)),ae(k(Pe,se)),ae(we(Pe)),await ae(te(Pe)),ae((0,A.kb)(Pe,(0,Y.$O)({uid:Pe})))}catch(Pe){ae((0,l.dx)(Je("Templating init failed",Pe))),console.error(Pe)}};function we(ye,se=a.tR){return(ae,ge)=>{const Pe=(0,F.SS)(ye,ge());for(const Re of Pe){if(Re.type!=="adhoc"&&Re.type!=="query")continue;const{datasource:Be}=Re;if((0,o.fN)(Be))continue;const _e=se().getInstanceSettings(Be),Xe=_e?(0,o.p$)(_e):{uid:Be};ae((0,A.kb)(ye,(0,z.QP)((0,S.qD)(Re,{propName:"datasource",propValue:Xe}))))}}}const je=ye=>se=>{se((0,A.kb)(ye,(0,H.v)())),se((0,A.kb)(ye,(0,C.y8)())),se((0,A.kb)(ye,(0,T.jR)())),se((0,A.kb)(ye,(0,Y.pu)()))},He=(ye,se={getBackendSrv:p.AI})=>ae=>{se.getBackendSrv().cancelAllInFlightRequests(),ae(je(ye))},rt=(ye,se=!1)=>async(ae,ge)=>{const{rootStateKey:Pe}=ye;try{if(!(0,S.sN)(Pe,ge()))return;const Re=(0,F.dn)(ye,ge());ae((0,A.kb)(Pe,(0,z.a7)((0,S.qD)(Re)))),await ae(Oe((0,S.jX)(Re))),await P.B.get(Re.type).updateOptions(Re),ae(Ve(ye))}catch(Re){if(ae((0,A.kb)(Pe,(0,z.Te)((0,S.qD)(ye,{error:Re})))),se||(console.error(Re),ae((0,l.dx)(Je("Error updating options:",Re,ye)))),se)throw Re}},Je=(ye,se,ae)=>(0,u.gi)(`${ae?`Templating [${ae.id}]`:"Templating"}`,se instanceof Error?`${ye} ${se.message}`:`${ye}`),Ve=ye=>(se,ae)=>{const{rootStateKey:ge}=ye;if(!(0,S.sN)(ge,ae()))return;const Pe=(0,F.dn)(ye,ae());Pe.state!==s.Gu.Done&&se((0,A.kb)(ye.rootStateKey,(0,z.Pu)((0,S.qD)(Pe))))};function Oe(ye,se=a.tR){return async function(ae,ge){const{id:Pe,rootStateKey:Re}=ye;if(!(0,S.sN)(Re,ge()))return;const Be=(0,F.dn)(ye,ge());if(Be.type==="query")try{const _e=await se().get(Be.datasource??"");if((0,f.d5)(_e)||!(0,f.Hf)(_e)||Ne(Be.query))return;const Xe={refId:`${_e.name}-${Pe}-Variable-Query`,query:Be.query};ae((0,A.kb)(Re,(0,z.QP)((0,S.qD)(ye,{propName:"query",propValue:Xe}))))}catch(_e){ae((0,l.dx)(Je("Failed to upgrade legacy queries",_e))),console.error(_e)}}}function Ne(ye){return(0,s.Gv)(ye)&&"refId"in ye&&typeof ye.refId=="string"}},48594:(Q,I,e)=>{"use strict";e.d(I,{Ay:()=>d,L1:()=>s,kb:()=>m});var t=e(75096),n=e(84014),r=e(85675);const s={keys:{}},o=c=>({type:`templating/keyed/${c.action.type.replace(/^templating\//,"")}`,payload:c});function m(c,g){const u=(0,t.q4)(c);return o({key:u,action:g})}const i=c=>typeof c.type=="string"&&c.type.startsWith("templating/keyed")&&"payload"in c&&typeof c.payload.key=="string";function l(c=s,g){if(i(g)){const{key:u,action:E}=g.payload,p=(0,t.q4)(u),b=r.kH.match(E)?p:c.lastKey,a=(0,n.H)(),h=c.keys[p],P=a(h,E);return{...c,lastKey:b,keys:{...c.keys,[p]:P}}}return c}const d={templating:l}},84014:(Q,I,e)=>{"use strict";e.d(I,{H:()=>d,x:()=>c});var t=e(23546),n=e(3843),r=e(27238),s=e(24300),o=e(85675),m=e(83370),i=e(15120);let l;function d(){return l||(l=(0,t.combineReducers)({editor:n.wf,variables:i.Y,optionsPicker:s.ho,transaction:o.Dd,inspect:r.t4})),l}function c(){return{editor:n.nS,variables:m.j,optionsPicker:s.$z,transaction:o.i3,inspect:r.WT}}},87421:(Q,I,e)=>{"use strict";e.d(I,{Fs:()=>C,SS:()=>l,Tk:()=>b,UN:()=>P,_2:()=>y,bZ:()=>h,dn:()=>o,hk:()=>u,nS:()=>g,nx:()=>i,pi:()=>c,wk:()=>E,y7:()=>a});var t=e(41811),n=e(99140),r=e(75096),s=e(84014);function o(f,D=(0,n.Gu)(),T=!0){const{id:M,rootStateKey:O}=f,v=i(O,D).variables[M];if(!v){if(T)throw new Error(`Couldn't find variable with id:${M}`);return}return v}function m(f,D,T=(0,n.Gu)()){return Object.values(i(D,T).variables).filter(f).sort((M,O)=>M.index-O.index)}function i(f,D=(0,n.Gu)()){return D.templating.keys[(0,r.q4)(f)]??(0,s.x)()}function l(f,D=(0,n.Gu)()){return m(d,f,D)}function d(f){return f.type!=="system"}const c=(0,t.A)((f,D)=>l(f,(0,n.Gu)())),g=(f,D)=>l(f,D);function u(f,D=(0,n.Gu)()){return E(Object.values(i(f,D).variables))}function E(f){const D=f.filter(d).sort((T,M)=>T.index-M.index);return D.length>0?D[D.length-1].index+1:0}function p(f,D=getState()){return i(f,D).transaction.isDirty}function b(f=(0,n.Gu)()){return f.templating?.lastKey}function a(f=(0,n.Gu)()){if(!f.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return f.templating.lastKey}function h(f,D=(0,n.Gu)()){const T=b(D);return T?m(f,T,D):[]}function P(f=(0,n.Gu)()){const D=b(f);return D?l(D,f):[]}function y(f,D=(0,n.Gu)()){const T=b(D);if(T)return o({id:f,rootStateKey:T,type:"query"},D,!1)}function C(f,D){return f[D]}},56968:(Q,I,e)=>{"use strict";e.d(I,{Hr:()=>E,Pu:()=>D,QP:()=>b,QV:()=>p,Te:()=>T,a7:()=>f,dE:()=>P,hj:()=>a,l_:()=>y,qi:()=>u,ut:()=>h,wB:()=>C});var t=e(30038),n=e(2543),r=e.n(n),s=e(39070),o=e(20601),m=e(3843),i=e(24240),l=e(75096),d=e(87421),c=e(83370);const g=(0,t.Z0)({name:"templating/shared",initialState:c.j,reducers:{addVariable:(M,O)=>{const S=O.payload.id??O.payload.data.model.name,v=o.B.get(O.payload.type),x=(0,n.cloneDeep)(v.initialState),A=v.beforeAdding?v.beforeAdding(O.payload.data.model):(0,n.cloneDeep)(O.payload.data.model),R={...(0,n.defaults)({},A,x),id:S,index:O.payload.data.index,global:O.payload.data.global};M[S]=R},variableStateNotStarted:(M,O)=>{const S=(0,d.Fs)(M,O.payload.id);S.state=s.Gu.NotStarted,S.error=null},variableStateFetching:(M,O)=>{const S=(0,d.Fs)(M,O.payload.id);S.state=s.Gu.Loading,S.error=null},variableStateCompleted:(M,O)=>{const S=(0,d.Fs)(M,O.payload.id);S&&(S.state=s.Gu.Done,S.error=null)},variableStateFailed:(M,O)=>{const S=(0,d.Fs)(M,O.payload.id);S&&(S.state=s.Gu.Error,S.error=O.payload.data.error)},removeVariable:(M,O)=>{if(delete M[O.payload.id],!O.payload.data.reIndex)return;const S=Object.values(M).sort((v,x)=>v.index-x.index);for(let v=0;v<S.length;v++)S[v].index=v},duplicateVariable:(M,O)=>{function S(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const v=(0,n.cloneDeep)(M[O.payload.id]),x=new RegExp(`^copy_of_${S(v.name)}(_(\\d+))?$`),A=Object.values(M).map(({name:N})=>N.match(x)).filter(N=>N!=null),R=A.map(N=>N[2]).filter(N=>N!=null),B=A.length===0?null:R.length===0?1:R.map(N=>+N).sort((N,L)=>L-N)[0]+1,U=`copy_of_${v.name}${B?`_${B}`:""}`,w=O.payload.data?.newId??U,K=(0,d.wk)(Object.values(M));M[w]={...(0,n.cloneDeep)(o.B.get(O.payload.type).initialState),...v,id:w,name:U,index:K}},changeVariableOrder:(M,O)=>{const{toIndex:S,fromIndex:v}=O.payload.data,x=Object.values(M);for(let A=0;A<x.length;A++){const R=x[A];R.index===v?R.index=S:R.index>v&&R.index<=S?R.index--:R.index<v&&R.index>=S&&R.index++}},changeVariableType:(M,O)=>{const{id:S}=O.payload,{label:v,name:x,index:A,description:R,rootStateKey:B}=M[S];M[S]={...(0,n.cloneDeep)(o.B.get(O.payload.data.newType).initialState),id:S,rootStateKey:B,label:v,name:x,index:A,description:R}},setCurrentVariableValue:(M,O)=>{if(!O.payload.data.option)return;const S=(0,d.Fs)(M,O.payload.id);if(!(0,i.SP)(S))return;const{option:v}=O.payload.data,x={...v,text:(0,l.QT)(v?.text),value:(0,l.QT)(v?.value)};S.current=x,S.options=S.options.map(A=>{A.value=(0,l.QT)(A.value),A.text=(0,l.QT)(A.text);let R=!1;if(Array.isArray(x.value))for(let B=0;B<x.value.length;B++){const U=x.value[B];if(A.value===U){R=!0;break}}else A.value===x.value&&(R=!0);return A.selected=R,A})},changeVariableProp:(M,O)=>{const S=(0,d.Fs)(M,O.payload.id);S[O.payload.data.propName]=O.payload.data.propValue}},extraReducers:M=>M.addCase(m.FN,(O,S)=>{const v=(0,d.Fs)(O,S.payload.id);v.name=S.payload.data.newName})}),u=g.reducer,{removeVariable:E,addVariable:p,changeVariableProp:b,changeVariableOrder:a,duplicateVariable:h,setCurrentVariableValue:P,changeVariableType:y,variableStateNotStarted:C,variableStateFetching:f,variableStateCompleted:D,variableStateFailed:T}=g.actions},85675:(Q,I,e)=>{"use strict";e.d(I,{$O:()=>d,Dd:()=>c,i3:()=>s,kH:()=>i,pu:()=>l});var t=e(30038),n=e(80484),r=e(56968);const s={uid:null,status:n.x8.NotStarted,isDirty:!1},o=(0,t.Z0)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(g,u)=>{g.uid=u.payload.uid,g.status=n.x8.Fetching},variablesCompleteTransaction:(g,u)=>{g.uid===u.payload.uid&&(g.status=n.x8.Completed)},variablesClearTransaction:(g,u)=>{g.uid=null,g.status=n.x8.NotStarted,g.isDirty=!1}},extraReducers:g=>g.addMatcher(m,(u,E)=>{u.status===n.x8.Completed&&(u.isDirty=!0)})});function m(g){return r.Hr.match(g)||r.QV.match(g)||r.QP.match(g)||r.hj.match(g)||r.ut.match(g)||r.l_.match(g)}const{variablesInitTransaction:i,variablesClearTransaction:l,variablesCompleteTransaction:d}=o.actions,c=o.reducer},83370:(Q,I,e)=>{"use strict";e.d(I,{j:()=>t});const t={}},15120:(Q,I,e)=>{"use strict";e.d(I,{Y:()=>m,v:()=>o});var t=e(30038),n=e(20601),r=e(56968),s=e(83370);const o=(0,t.VP)("templating/cleanVariables"),m=(i=s.j,l)=>{if(o.match(l)){const d=Object.values(i).filter(g=>g.global);return d?d.reduce((g,u)=>(g[u.id]=u,g),{}):s.j}return l?.payload?.type&&n.B.getIfExists(l?.payload?.type)?n.B.get(l.payload.type).reducer((0,r.qi)(i,l),l):i}},80484:(Q,I,e)=>{"use strict";e.d(I,{BS:()=>l,CO:()=>t.CO,Vg:()=>m,ZG:()=>t.ZG,eF:()=>d,og:()=>i,x8:()=>o,zL:()=>t.zL});var t=e(12470),n=e(39070),r=e(65463),s=e(13344),o=(c=>(c.NotStarted="Not started",c.Fetching="Fetching",c.Completed="Completed",c))(o||{});const m={id:s.qF,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.zL.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class i extends r.x{static{this.type="variables-changed"}}class l extends r.x{static{this.type="variables-time-range-process-done"}}class d extends r.x{static{this.type="variables-changed-in-url"}}},75096:(Q,I,e)=>{"use strict";e.d(I,{AX:()=>C,Lz:()=>a,ML:()=>p,Nz:()=>b,QT:()=>T,SY:()=>g,Wz:()=>D,iP:()=>P,jX:()=>S,q$:()=>y,q4:()=>O,qD:()=>v,sN:()=>M,t4:()=>u,u7:()=>h,wJ:()=>E});var t=e(2543),n=e.n(t),r=e(12470),s=e(72574),o=e(87490),m=e(99140),i=e(20601),l=e(13344),d=e(87421),c=e(80484);const g=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,u=A=>(g.lastIndex=0,g.exec(A));function E(...A){const R=A[A.length-1];A[0]=typeof A[0]=="string"?A[0]:(0,o.MA)(A[0]);const U=A.slice(0,-1).join(" ").match(g);return!!(U!==null?U.find(K=>{const N=u(K);return N!==null&&N.indexOf(R)>-1}):!1)}const p=A=>{if(!A||!A.current)return!1;if(A.current.value){const R=Array.isArray(A.current.value);if(R&&A.current.value.length&&A.current.value[0]===l.To||!R&&A.current.value===l.To)return!0}if(A.current.text){const R=Array.isArray(A.current.text);if(R&&A.current.text.length&&A.current.text[0]===l.Zm||!R&&A.current.text===l.Zm)return!0}return!1},b=A=>!A||!A.current||!A.current.text?"":Array.isArray(A.current.text)?A.current.text.toString():typeof A.current.text!="string"?"":A.current.text,a=A=>!A||!A.current||A.current.value===void 0||A.current.value===null?null:Array.isArray(A.current.value)?A.current.value.toString():typeof A.current.value!="string"?null:A.current.value;function h(A,R=(0,s.w)()){return!A||!A.regex?"":R.replace(A.regex,{},"regex")}function P(A,R,B,U){const w={range:void 0,variable:A,searchFilter:R,scopedVars:U};return(A.refresh===r.CO.onTimeRangeChanged||A.refresh===r.CO.onDashboardLoad)&&(w.range=B.timeRange()),w}function y(A){return A?.type==="custom"?r.CO.onDashboardLoad:!A||!("refresh"in A)||A.refresh!==r.CO.onTimeRangeChanged&&A.refresh!==r.CO.onDashboardLoad?r.CO.never:A.refresh}function C(){return i.B.list().filter(A=>A.id!=="system").map(({id:A,name:R,description:B})=>({label:R,value:A,description:B}))}function f(A){return(0,t.isArray)(A)&&(A.length===0?A=void 0:A.length===1&&(A=A[0])),A}function D(A,R){let B=0;const U={};for(const w in A){if(!w.startsWith(l.qz))continue;let K=f(R[w]),N=f(A[w]);(0,t.isEqual)(N,K)||(U[w]={value:A[w]},B++)}for(const w in R){if(!w.startsWith(l.qz))continue;const K=R[w];(0,t.isArray)(K)&&K.length===0||A.hasOwnProperty(w)||(U[w]={value:"",removed:!0},B++)}return B?U:void 0}function T(A){return Array.isArray(A)?A.map(String):A==null?"":typeof A=="number"?A.toString(10):typeof A=="string"?A:typeof A=="boolean"?A.toString():""}function M(A,R=(0,m.Gu)()){return(0,d.nx)(A,R).transaction.status!==c.x8.NotStarted}function O(A){return String(A)}const S=A=>{if(!A.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${A.id}`);return{type:A.type,id:A.id,rootStateKey:A.rootStateKey}};function v(A,R){return{type:A.type,id:A.id,data:R}}function x(){const A=getTemplateSrv().getVariables(),R=locationService.getSearchObject();return Object.keys(R).filter(B=>B.indexOf(VARIABLE_PREFIX)!==-1&&A.some(U=>U.name===B.replace(VARIABLE_PREFIX,""))).reduce((B,U)=>{const w=U.replace(VARIABLE_PREFIX,"");return B[w]=R[U],B},{})}},1819:(Q,I,e)=>{"use strict";e.d(I,{e:()=>E});var t=e(32196),n=e(96540),r=e(28240),s=e(83195),o=e(14588),m=e(32264),i=e(52622),l=e(40845),d=e(72109),c=e(61994),g=e(74007);function u(b,a,h,P,y){const C=b.fields,f=h!=null?C[h]:null,D=C.filter(x=>!x.config.custom?.hideFrom?.tooltip),T=D.find(x=>x.name==="traceID")||C[0],M=[];if(D.filter(x=>T===x).length>0&&M.push(T),M.push(...D.filter(x=>T!==x)),M.length===0)return null;const O=[],S=[],v=new Set;for(const x of M){if(y===i.$N.Single&&x!==f)continue;const A=x.values[a],R=x.display?x.display(A):{text:`${A}`,numeric:+A};x.getLinks&&x.getLinks({calculatedValue:R,valueRowIndex:a}).forEach(B=>{const U=`${B.title}/${B.href}`;v.has(U)||(S.push(B),v.add(U))}),O.push({name:(0,r.Ct)(x,b),value:A,valueString:(0,s.cN)(R),highlight:x===f})}return P&&P!==i.xB.None&&O.sort((x,A)=>o.sortValues(P)(x.value,A.value)),{displayValues:O,links:S}}const E=({data:b,rowIndex:a,columnIndex:h,sortOrder:P,mode:y,header:C,padding:f=0})=>{const D=(0,l.of)(p,f);if(!b||a==null)return null;const T=u(b,a,h,P,y);if(T==null)return null;const{displayValues:M,links:O}=T;return m.$.featureToggles.newVizTooltips&&C==="Exemplar"?n.createElement(g.i,{displayValues:M,links:O,header:C}):n.createElement("div",{className:D.wrapper},C&&n.createElement("div",{className:D.header},n.createElement("span",{className:D.title},C)),n.createElement("table",{className:D.infoWrap},n.createElement("tbody",null,M.map((S,v)=>n.createElement("tr",{key:`${v}/${a}`},n.createElement("th",null,S.name),n.createElement("td",null,(0,c.A)(S.valueString)))),O.map((S,v)=>n.createElement("tr",{key:v},n.createElement("th",null,"Link"),n.createElement("td",{colSpan:2},n.createElement(d.Y,{href:S.href,external:S.target==="_blank",weight:"medium",inline:!1},S.title)))))))},p=(b,a=0)=>({wrapper:(0,t.css)({padding:`${a}px`,background:b.components.tooltip.background,borderRadius:b.shape.borderRadius(2)}),header:(0,t.css)({background:b.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:b.spacing(1)}),title:(0,t.css)({fontWeight:b.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,t.css)({padding:b.spacing(1),background:"transparent",border:"none",th:{fontWeight:b.typography.fontWeightMedium,padding:b.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${b.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,t.css)({color:b.colors.text.link})})},74007:(Q,I,e)=>{"use strict";e.d(I,{i:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(14689),o=e(13471),m=e(61994);const i=({displayValues:d,links:c,header:g="Exemplar"})=>{const u=(0,r.of)(l),E=d.find(p=>p.name==="Time");return d=d.filter(p=>p.name!=="Time"),n.createElement("div",{className:u.exemplarWrapper},n.createElement("div",{className:u.exemplarHeader},n.createElement("span",{className:u.title},g),E&&n.createElement("span",{className:u.time},(0,m.A)(E.valueString))),n.createElement("div",{className:u.exemplarContent},d.map((p,b)=>n.createElement(o.B,{key:b,label:p.name,value:(0,m.A)(p.valueString),justify:"space-between",isPinned:!1}))),c&&c.length>0&&n.createElement("div",{className:u.exemplarFooter},c.map((p,b)=>n.createElement(s.R,{link:p,key:b,buttonProps:{size:"md"}}))))},l=(d,c=0)=>({exemplarWrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,whiteSpace:"pre",borderRadius:d.shape.radius.default,background:d.colors.background.primary,border:`1px solid ${d.colors.border.weak}`,boxShadow:`0 4px 8px ${d.colors.background.primary}`}),exemplarHeader:(0,t.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:d.spacing(.5),color:d.colors.text.secondary,padding:d.spacing(1)}),time:(0,t.css)({color:d.colors.text.primary}),exemplarContent:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${d.colors.border.medium}`,padding:d.spacing(1)}),exemplarFooter:(0,t.css)({display:"flex",flexDirection:"column",flex:1,borderTop:`1px solid ${d.colors.border.medium}`,padding:d.spacing(1),overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap"}),linkButton:(0,t.css)({width:"fit-content"}),label:(0,t.css)({color:d.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:d.spacing(.5)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),title:(0,t.css)({fontWeight:d.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1})})},98958:(Q,I,e)=>{"use strict";var t=e(6262),n=e(9423),r=e(7452),s=e(78624),o=e(4213),m=e(34796),i=e(13609),l=e(31193),d=e(17493),c=e(14792),g=e(15858),u=e(16495),E=e(16561),p=e(2543),b=e.n(p),a=e(96540),h=e(5338),P=e(47232),y=e(1933),C=e(69550),f=e(97497),D=e(96915),T=e(71733),M=e(17172),O=e(23509),S=e(12131),v=e(96937),x=e(3591),A=e(63639),R=e(89191),B=e(19347),U=e(4402),w=e(14778),K=e(63415),N=e(97152),L=e(24308),V=e(46235),F=e(5260),z=e(2913),Y=e(94041),H=e(32264),k=e(11261),ee=e(85200),ie=e(1173),fe=e(28240),q=e(18282),Z=e(57934),J=e(73376),G=e(14186),ne=e(94354),te=e(90613),oe=e(55852),le=e(91847);function ue(W){if(W in le.uk){const{name:_,getHelperDocs:X,links:de}=le.uk[W],Ce=X(le.g_.UIImage),Ae=Te(Ce);if(de?.length){const $e=de.map(Ye=>`
  Or visit <a href="${Ye.url}" target="_blank">${Ye.title}</a>

  `).join("");return{name:_,helperDocs:`
        ${Ae}
        ${(0,le.$n)()}
  ${$e}
        `}}return{name:_,helperDocs:`
      ${Ae}
      ${(0,le.$n)()}
      `}}return{name:"No documentation found",helperDocs:(0,le.$n)()}}const Te=W=>W.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var he=e(39268),re=e(88323),De=e(83077),Fe=e(91890),Ee=e(72574),Me=e(10354),ze=e(88841),xe=e(94397);function We(W,_){switch(_.type){case k.PU.boolean:return(0,p.isUndefined)(W)?!1:be(W);case k.PU.number:return isNaN(W)?0:parseFloat(W);case k.PU.string:return W?String(W):"";default:return W}}const be=W=>(0,p.isString)(W)?!(W[0]==="F"||W[0]==="f"||W[0]==="0"):!!W;function pe(W){return function({options:X,onChange:de,field:Ce}){const{validator:Ae,converter:$e=We}=W,{value:Ye}=X,[Ze,mt]=(0,a.useState)(!Ae(Ye)),Pt=(0,Ee.w)().getVariables().map(Wt=>({value:Wt.name,label:Wt.label||Wt.name,origin:Fe.$0.Template})),$t=(0,a.useCallback)(Wt=>{mt(!Ae(Wt.currentTarget.value))},[mt,Ae]),Bt=(0,a.useCallback)(Wt=>{if(Ze)return;const{value:En}=Wt.currentTarget;de({...X,value:$e(En,Ce)})},[X,de,Ze,Ce,$e]),At=(0,a.useCallback)(Wt=>{mt(!Ae(Wt)),de({...X,value:Wt})},[mt,Ae,de,X]);return H.$.featureToggles.transformationsVariableSupport?a.createElement(ze.y,{invalid:Ze,value:Ye,error:"Value needs to be an integer or a variable",onChange:At,placeholder:"Value or variable",suggestions:Pt}):a.createElement(Me.p,{className:"flex-grow-1",invalid:Ze,defaultValue:String(X.value),placeholder:"Value",onChange:$t,onBlur:Bt})}}const Ue=()=>[{name:"Is greater",id:ie.Js.greater,component:pe({validator:xe.N_})},{name:"Is greater or equal",id:ie.Js.greaterOrEqual,component:pe({validator:xe.N_})},{name:"Is lower",id:ie.Js.lower,component:pe({validator:xe.N_})},{name:"Is lower or equal",id:ie.Js.lowerOrEqual,component:pe({validator:xe.N_})},{name:"Is equal",id:ie.Js.equal,component:pe({validator:()=>!0})},{name:"Is not equal",id:ie.Js.notEqual,component:pe({validator:()=>!0})},{name:"Is Substring",id:ie.Js.substring,component:pe({validator:()=>!0})},{name:"Is not substring",id:ie.Js.notSubstring,component:pe({validator:()=>!0})}],we=()=>null,je=()=>[{name:"Is null",id:ie.Js.isNull,component:we},{name:"Is not null",id:ie.Js.isNotNull,component:we}];function He(W){return function({options:X,onChange:de,field:Ce}){const{validator:Ae}=W,[$e,Ye]=(0,a.useState)({from:!Ae(X.from),to:!Ae(X.to)}),mt=(0,Ee.w)().getVariables().map(Bt=>({value:Bt.name,label:Bt.label||Bt.name,origin:Fe.$0.Template})),Et=(0,a.useCallback)((Bt,At)=>{Ye({...$e,[At]:!Ae(Bt.currentTarget.value)})},[Ye,Ae,$e]),Pt=(0,a.useCallback)((Bt,At)=>{if($e[At])return;const{value:Wt}=Bt.currentTarget;de({...X,[At]:We(Wt,Ce)})},[X,de,$e,Ce]),$t=(0,a.useCallback)((Bt,At)=>{const Wt=!Ae(Bt);Ye({...$e,[At]:Wt}),!Wt&&de({...X,[At]:Bt})},[X,de,$e,Ye,Ae]);return H.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(ze.y,{value:String(X.from),invalid:$e.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Bt=>$t(Bt,"from"),suggestions:mt}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(ze.y,{invalid:$e.to,error:"Value needs to be an integer or a variable",value:String(X.to),placeholder:"To",suggestions:mt,onChange:Bt=>$t(Bt,"to")})):a.createElement(a.Fragment,null,a.createElement(Me.p,{className:"flex-grow-1 gf-form-spacing",invalid:$e.from,defaultValue:String(X.from),placeholder:"From",onChange:Bt=>Et(Bt,"from"),onBlur:Bt=>Pt(Bt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(Me.p,{className:"flex-grow-1",invalid:$e.to,defaultValue:String(X.to),placeholder:"To",onChange:Bt=>Et(Bt,"to"),onBlur:Bt=>Pt(Bt,"to")}))}}const rt=()=>[{name:"Is between",id:ie.Js.between,component:He({validator:xe.N_})}];function Je(W){return function({options:X,onChange:de,field:Ce}){const{validator:Ae,converter:$e=We}=W,{value:Ye}=X,[Ze,mt]=(0,a.useState)(!Ae(Ye)),Et=(0,a.useCallback)($t=>{mt(!Ae($t.currentTarget.value))},[mt,Ae]),Pt=(0,a.useCallback)($t=>{if(Ze)return;const{value:Bt}=$t.currentTarget;de({...X,value:$e(Bt,Ce)})},[X,de,Ze,Ce,$e]);return a.createElement(Me.p,{className:"flex-grow-1",invalid:Ze,defaultValue:String(X.value),placeholder:"Value",onChange:Et,onBlur:Pt})}}const Ve=()=>[{name:"Regex",id:ie.Js.regex,component:Je({validator:()=>!0,converter:W=>String(W)})}],Oe=new De.O(()=>[...Ue(),...je(),...rt(),...Ve()]),Ne=W=>{const{onDelete:_,onChange:X,filter:de,fieldsInfo:Ce}=W,{fieldsAsOptions:Ae,fieldByDisplayName:$e}=Ce,Ye=ae(de,Ae)??"",Ze=$e[Ye],mt=Ze?ye(Ze):[],Et=se(de,mt),Pt=Oe.getIfExists(Et),$t=(0,a.useCallback)(Wt=>{Wt?.value&&X({...de,fieldName:Wt.value})},[X,de]),Bt=(0,a.useCallback)(Wt=>{if(!Wt?.value)return;const En=Wt.value,wa=ee.hI.get(En).getDefaultOptions(Ze);X({...de,config:{id:En,options:wa}})},[X,de,Ze]),At=(0,a.useCallback)(Wt=>{X({...de,config:{...de.config,options:Wt}})},[X,de]);return!Ze||!Pt||!Pt.component?null:a.createElement(he.C,null,a.createElement(G.I,{label:"Field",labelWidth:14},a.createElement(re.l6,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Ae,value:de.fieldName,onChange:$t})),a.createElement(G.I,{label:"Match"},a.createElement(re.l6,{className:"width-12",placeholder:"Select test",options:mt,value:Et,onChange:Bt})),a.createElement(G.I,{label:"Value",grow:!0},a.createElement(Pt.component,{field:Ze,options:de.config.options??{},onChange:At})),a.createElement(te.a,{marginBottom:.5},a.createElement(oe.$n,{icon:"times",onClick:_,variant:"secondary"})))},ye=W=>{const _=[];for(const X of ee.hI.list())!X.isApplicable(W)||!Oe.getIfExists(X.id)||_.push({value:X.id,label:X.name,description:X.description});return _},se=(W,_)=>{const X=_.find(de=>de.value===W.config.id);if(X&&X.value)return X.value;if(_[0]?.value)return _[0]?.value},ae=(W,_)=>{const X=_.find(de=>de.value===W.fieldName);if(X&&X.value)return X.value;if(_[0]?.value)return _[0]?.value},ge=[{label:"Include",value:J.j4.include},{label:"Exclude",value:J.j4.exclude}],Pe=[{label:"Match all",value:J.Sm.all},{label:"Match any",value:J.Sm.any}],Re=W=>{const{input:_,options:X,onChange:de}=W,Ce=_e(_),Ae=(0,a.useCallback)(()=>{const Et=_[0],Pt=Et.fields.find(At=>At.type!==k.PU.time);if(!Pt)return;const $t=(0,p.cloneDeep)(X.filters),Bt=ee.hI.get(ie.Js.greater);$t.push({fieldName:(0,fe.Ct)(Pt,Et,_),config:{id:Bt.id,options:Bt.getDefaultOptions(Pt)}}),de({...X,filters:$t})},[de,X,_]),$e=(0,a.useCallback)(Et=>{let Pt=(0,p.cloneDeep)(X.filters);Pt.splice(Et,1),de({...X,filters:Pt})},[X,de]),Ye=(0,a.useCallback)((Et,Pt)=>{let $t=(0,p.cloneDeep)(X.filters);$t[Pt]=Et,de({...X,filters:$t})},[X,de]),Ze=(0,a.useCallback)(Et=>{de({...X,type:Et??J.j4.include})},[X,de]),mt=(0,a.useCallback)(Et=>{de({...X,match:Et??J.Sm.all})},[X,de]);return a.createElement("div",null,a.createElement(G.I,{label:"Filter type",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(ne.z,{options:ge,value:X.type,onChange:Ze,fullWidth:!0}))),a.createElement(G.I,{label:"Conditions",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(ne.z,{options:Pe,value:X.match,onChange:mt,fullWidth:!0}))),a.createElement(te.a,{paddingLeft:2},X.filters.map((Et,Pt)=>a.createElement(Ne,{key:Pt,filter:Et,fieldsInfo:Ce,onChange:$t=>Ye($t,Pt),onDelete:()=>$e(Pt)})),a.createElement(oe.$n,{icon:"plus",size:"sm",onClick:Ae,variant:"secondary"},"Add condition")))},Be={id:q.F.filterByValue,editor:Re,transformation:Z.c.filterByValueTransformer,name:Z.c.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([f.m.Filter]),help:ue(q.F.filterByValue).helperDocs},_e=W=>(0,a.useMemo)(()=>{const _={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(W)?W.reduce((X,de)=>de.fields.reduce((Ce,Ae)=>{const $e=(0,fe.Ct)(Ae,de,W);return Ce.fieldByDisplayName[$e]||(Ce.fieldsAsOptions.push({label:$e,value:$e,type:Ae.type}),Ce.fieldByDisplayName[$e]=Ae),Ce},X),_):_},[W]);var Xe=e(43429),tt=e(60264),at=e(48192),st=e(66211),dt=e(54612);function ot(W,_){const X={data:W.input,options:W.options},de=new at.C({id:"root",title:"root"}),Ce=$e=>{if($e?.length){const Ye=$e[0];let Ze=de.categories.find(mt=>mt.props.id===Ye);return Ze||(Ze=new at.C({id:Ye,title:Ye}),de.categories.push(Ze)),Ze}return de},Ae={getValue:$e=>(0,p.get)(W.options,$e),onChange:($e,Ye)=>{W.onChange((0,dt.Sf)(W.options,$e,Ye))}};return(0,st.g5)(_,Ae,Ce,X),de}function ft(W){const _={data:[],options:{}},X={},de=new tt.pv;W(de,_);for(const Ce of de.getItems())Ce.defaultValue!=null&&(0,p.set)(X,Ce.path,Ce.defaultValue);return X}var yt=e(27825),Tt=e(3290);const Kt=(W,_)=>{const X=_.options??{};(0,yt.J)("",W,X)},Gt=W=>{(0,a.useEffect)(()=>{if(!W.options.xBuckets?.mode){const X=ft(Kt);W.onChange({...X,...W.options})}});const _=ot(W,Kt);return a.createElement("div",null,a.createElement("div",null,_.items.map(X=>X.render())))},_t={id:Tt.wY.id,editor:Gt,transformation:Tt.wY,name:Tt.wY.name,description:Tt.wY.description,state:Xe.pn.alpha,categories:new Set([f.m.CreateNewVisualization]),help:ue(Tt.wY.id).helperDocs};var it=e(32196),Mt=e(40845),Dn=e(84349),lt=e(75059),Ct=e(42734),Vt=e(24293),qt=e(28802),rn=e(50082),en=e(25019);function Jt(W,_,X){const de={},Ce={};for(const Ae of W.fields){const $e=(0,fe.Ct)(Ae,W),Ye=X.index[$e],Ze=Ye.handler;if(!Ze)continue;const mt=Ae.values[_];if(mt==null)continue;const Et=Ze.processor(mt,de,Ce,Ye.handlerArguments);Et!=null&&(de[Ze.targetProperty??Ze.key]=Et)}return Ce.mappingValues&&(de.mappings=Kn(Ce)),de}var hn=(W=>(W.Name="field.name",W.Value="field.value",W.Label="field.label",W.Ignore="__ignore",W))(hn||{});const Fn=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:on},{key:"min",processor:on},{key:"unit",processor:W=>W.toString()},{key:"decimals",processor:on},{key:"displayName",name:"Display name",processor:W=>W.toString()},{key:"color",processor:W=>({fixedColor:W,mode:Vt.Y.Fixed})},{key:"threshold1",name:"Threshold",targetProperty:"thresholds",processor:(W,_,X,de)=>{const Ce=(0,qt.t)(W);if(!isNaN(Ce))return _.thresholds||(_.thresholds={mode:rn.O.Absolute,steps:[{value:-1/0,color:"green"}]}),_.thresholds.steps.push({value:Ce,color:de.threshold?.color??"red"}),_.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:lt.gy.allValues,processor:(W,_,X)=>{if((0,p.isArray)(W))return X.mappingValues=W,_.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:lt.gy.allValues,processor:(W,_,X)=>{if((0,p.isArray)(W))return X.mappingColors=W,_.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:lt.gy.allValues,processor:(W,_,X)=>{if((0,p.isArray)(W))return X.mappingTexts=W,_.mappings}}];function Kn(W){const _={type:en.d.ValueToText,options:{}};if(!W.mappingValues)return[];for(let X=0;X<W.mappingValues.length;X++){const de=W.mappingValues[X];de!=null&&(_.options[de.toString()]={color:W.mappingColors&&W.mappingColors[X],text:W.mappingTexts&&W.mappingTexts[X],index:X})}return[_]}let na=null;function Ut(){if(na===null){na={};for(const W of Fn)na[W.key]=W}return na}function on(W){const _=(0,qt.t)(W);if(!isNaN(_))return _}function mn(W,_){for(const X of _)if(W===X.fieldName)return X.handlerKey;return W.toLowerCase()}function vn(W){return W?Ut()[W]:null}function pn(W,_,X){const de={index:{}};let Ce=_.find($e=>$e.handlerKey==="field.name"),Ae=_.find($e=>$e.handlerKey==="field.value");for(const $e of W.fields){const Ye=(0,fe.Ct)($e,W),Ze=_.find(Pt=>Pt.fieldName===Ye),mt=Ze?Ze.handlerKey:Ye.toLowerCase();let Et=vn(mt);X&&(Et?(Et.key==="field.name"&&(de.nameField=$e),Et.key==="field.value"&&(de.valueField=$e)):Ze||(!de.nameField&&!Ce&&$e.type===k.PU.string&&(de.nameField=$e,Et=vn("field.name")),!de.valueField&&!Ae&&$e.type===k.PU.number&&(de.valueField=$e,Et=vn("field.value")))),!Et&&X&&(Et=vn("field.label")),de.index[Ye]={automatic:!Ze,handler:Et,handlerArguments:Ze?.handlerArguments??{},reducerId:Ze?.reducerId??Et?.defaultReducer??lt.gy.lastNotNull}}return de}var Un=e(83598);function Bn(W){switch(W){case"threshold1":return!0;default:return!1}}function kn({handlerArguments:W,handlerKey:_,onChange:X}){const de=Ce=>{X(Ce?{...W,threshold:{...W.threshold,color:Ce}}:{...W,threshold:void 0})};return a.createElement(a.Fragment,null,_==="threshold1"&&a.createElement(Me.p,{type:"text",value:"Threshold color","aria-label":"Threshold color",disabled:!0,width:20,prefix:a.createElement(Un.sk,{color:W.threshold?.color??"red",onChange:de,enableNamedColors:!0})}))}function Mn({frame:W,mappings:_,onChange:X,withReducers:de,withNameAndValue:Ce}){const Ae=(0,Mt.of)(aa),$e=xn(W,_,Ce),Ye=Fn.map($t=>Vn($t,!1)),Ze=_.reduce(($t,Bt)=>$t||Bn(Bt.handlerKey),!1),mt=($t,Bt)=>{const At=_.findIndex(Wt=>Wt.fieldName===$t.fieldName);if(Bt)if(At!==-1){const Wt=[..._];Wt.splice(At,1,{..._[At],handlerKey:Bt.value}),X(Wt)}else X([..._,{fieldName:$t.fieldName,handlerKey:Bt.value}]);else X(At!==-1?_.filter((Wt,En)=>En!==At):[..._,{fieldName:$t.fieldName,handlerKey:"__ignore"}])},Et=($t,Bt)=>{const At=_.findIndex(Wt=>Wt.fieldName===$t.fieldName);if(At!==-1){const Wt=[..._];Wt.splice(At,1,{..._[At],reducerId:Bt}),X(Wt)}else X([..._,{fieldName:$t.fieldName,handlerKey:$t.handlerKey,reducerId:Bt}])},Pt=($t,Bt)=>{const At=_.findIndex(Wt=>Wt.fieldName===$t.fieldName);if(At!==-1){const Wt=[..._];Wt.splice(At,1,{..._[At],handlerArguments:Bt}),X(Wt)}else X([..._,{fieldName:$t.fieldName,handlerKey:$t.handlerKey,handlerArguments:Bt}])};return a.createElement("table",{className:Ae.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),de&&a.createElement("th",null,"Select"),Ze&&a.createElement("th",null,"Additional settings"))),a.createElement("tbody",null,$e.map($t=>a.createElement("tr",{key:$t.fieldName},a.createElement("td",{className:Ae.labelCell},$t.fieldName),a.createElement("td",{className:Ae.selectCell,"data-testid":`${$t.fieldName}-config-key`},a.createElement(re.l6,{options:Ye,value:$t.configOption,placeholder:$t.placeholder,isClearable:!0,onChange:Bt=>mt($t,Bt)})),de&&a.createElement("td",{"data-testid":`${$t.fieldName}-reducer`,className:Ae.selectCell},a.createElement(Ct.S,{stats:[$t.reducerId],defaultStat:$t.reducerId,onChange:Bt=>Et($t,Bt[0])})),Ze&&a.createElement("td",{"data-testid":`${$t.fieldName}-handler-arg`,className:Ae.selectCell},a.createElement(kn,{handlerKey:$t.handlerKey,handlerArguments:$t.handlerArguments,onChange:Bt=>Pt($t,Bt)}))))))}function xn(W,_,X){const de=[],Ce=pn(W,_??[],X);for(const Ae of W.fields){const $e=(0,fe.Ct)(Ae,W),Ye=Ce.index[$e],Ze=Vn(Ye.handler,Ye.automatic);de.push({fieldName:$e,configOption:Ye.automatic?null:Ze,placeholder:Ye.automatic?Ze?.label:"Choose",handlerKey:Ye.handler?.key??null,reducerId:Ye.reducerId,handlerArguments:Ye.handlerArguments})}for(const Ae of _)if(!de.find($e=>$e.fieldName===Ae.fieldName)){const $e=vn(Ae.handlerKey);de.push({fieldName:Ae.fieldName,handlerKey:Ae.handlerKey,configOption:Vn($e,!1),missingInFrame:!0,reducerId:Ae.reducerId??lt.gy.lastNotNull,handlerArguments:{}})}return Object.values(de)}function Vn(W,_){if(!W)return null;let X=W.name??(0,p.capitalize)(W.key);return _&&(X=`${X} (auto)`),{label:X,value:W.key}}const aa=W=>({table:(0,it.css)`
    margin-top: ${W.spacing(1)};

    td,
    th {
      border-right: 4px solid ${W.colors.background.primary};
      border-bottom: 4px solid ${W.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${W.typography.bodySmall.fontSize};
      line-height: ${W.spacing(4)};
      padding: ${W.spacing(0,1)};
    }
  `,labelCell:(0,it.css)`
    font-size: ${W.typography.bodySmall.fontSize};
    background: ${W.colors.background.secondary};
    padding: ${W.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,it.css)`
    padding: 0;
    min-width: 161px;
  `});var Jn=e(81160);function _n(W,_){let X=null;for(const Ye of _)if(Ye.refId===W.configRefId){X=Ye;break}if(!X)return _;const de={fields:[],length:1},Ce=pn(X,W.mappings??[],!1);for(const Ye of X.fields){const Ze={...Ye},mt=(0,fe.Ct)(Ye,X),Et=Ce.index[mt],Pt=(0,lt.Nw)({field:Ye,reducers:[Et.reducerId]});Ze.values=[Pt[Et.reducerId]],de.fields.push(Ze)}const Ae=[],$e=(0,ee.NS)(W.applyTo||{id:ie.Ct.numeric});for(const Ye of _){if(Ye===X&&_.length>1)continue;const Ze={fields:[],length:Ye.length,refId:Ye.refId};for(const mt of Ye.fields)if($e(mt,Ye,_)){const Et=Jt(de,0,Ce);Ze.fields.push({...mt,config:{...mt.config,...Et}})}else Ze.fields.push(mt);Ae.push(Ze)}return Ae}const Hn={id:q.F.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:W=>_=>_.pipe((0,Jn.T)(X=>_n(W,X)))};function ba({input:W,onChange:_,options:X}){const de=(0,Mt.of)(Ca),Ce=W.map(Bt=>Bt.refId).filter(Bt=>Bt!=null).map(Bt=>({label:Bt,value:Bt})),Ae=X.configRefId||"config",$e=X.applyTo??{id:ie.Ct.byType,options:"number"},Ye=Dn.g.get($e.id),Ze=W.find(Bt=>Bt.refId===Ae),mt=Bt=>{_({...X,configRefId:Bt.value||"config"})},Et=Bt=>{_({...X,applyTo:{id:Bt.value}})},Pt=Bt=>{_({...X,applyTo:{id:$e.id,options:Bt}})},$t=Dn.g.list().filter(Bt=>!Bt.excludeFromPicker).map(Bt=>({label:Bt.name,value:Bt.id,description:Bt.description}));return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Config query",labelWidth:20},a.createElement(re.l6,{onChange:mt,options:Ce,value:Ae,width:30}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Apply to",labelWidth:20},a.createElement(re.l6,{onChange:Et,options:$t,value:$e.id,width:30}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Apply to options",labelWidth:20,className:de.matcherOptions},a.createElement(Ye.component,{matcher:Ye.matcher,data:W,options:$e.options,onChange:Pt}))),a.createElement(he.C,null,Ze&&a.createElement(Mn,{frame:Ze,mappings:X.mappings,onChange:Bt=>_({...X,mappings:Bt}),withReducers:!0})))}const va={id:Hn.id,editor:ba,transformation:Hn,name:Hn.name,description:Hn.description,state:Xe.pn.beta,categories:new Set([f.m.CalculateNewFields]),help:ue(Hn.id).helperDocs},Ca=W=>({matcherOptions:(0,it.css)`
    min-width: 404px;
  `});var dn=e(62467),pt=e(58307),Dt=e(66350),nn=e(15292),gn=e(11710);const Cn=16,In=W=>{const{options:_,onChange:X}=W,{binary:de}=_;let Ce=!de?.left,Ae=!de?.right;const $e=W.names.map(At=>(At===de?.left&&(Ce=!0),At===de?.right&&(Ae=!0),{label:At,value:At})),Ye=Ce?$e:[...$e,{label:de?.left,value:de?.left}],Ze=Ae?$e:[...$e,{label:de?.right,value:de?.right}],mt=gn.b.list().map(At=>({label:At.binaryOperationID,value:At.binaryOperationID})),Et=At=>{X({..._,mode:Dt.UY.BinaryOperation,binary:At})},Pt=At=>{Et({...de,left:At.value})},$t=At=>{Et({...de,right:At.value})},Bt=At=>{Et({...de,operator:At.value})};return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Operation",labelWidth:Cn},a.createElement(re.l6,{allowCustomValue:!0,placeholder:"Field or number",options:Ye,className:"min-width-18",value:de?.left,onChange:Pt})),a.createElement(G.I,null,a.createElement(re.l6,{className:"width-4",options:mt,value:de?.operator??mt[0].value,onChange:Bt})),a.createElement(G.I,null,a.createElement(re.l6,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:Ze,value:de?.right,onChange:$t}))))},fa=W=>{const{names:_,onChange:X,options:de}=W,{cumulative:Ce}=de,Ae=_.map(mt=>({label:mt,value:mt})),$e=mt=>{const Et=mt.length?mt[0]:lt.gy.sum;Ye({...Ce,reducer:Et})},Ye=mt=>{X({...de,mode:Dt.UY.CumulativeFunctions,cumulative:mt})},Ze=mt=>{Ye({...Ce,field:mt.value})};return a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Field",labelWidth:Cn},a.createElement(re.l6,{placeholder:"Field",options:Ae,className:"min-width-18",value:Ce?.field,onChange:Ze})),a.createElement(G.I,{label:"Calculation",labelWidth:Cn},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ce?.reducer||lt.gy.sum],onChange:$e,defaultStat:lt.gy.sum,filterOptions:mt=>mt.id===lt.gy.sum||mt.id===lt.gy.mean})))},ga=W=>{const{options:_,onChange:X}=W,{index:de}=_,Ce=Ae=>{X({..._,index:{asPercentile:Ae.currentTarget.checked}})};return a.createElement(a.Fragment,null,a.createElement(G.I,{labelWidth:Cn,label:"As percentile",tooltip:"Transform the row index as a percentile."},a.createElement(nn.K,{value:!!de?.asPercentile,onChange:Ce})))};var sa=e(66864),da=e(92174);const Ma=W=>{const{names:_,selected:X,onChange:de,options:Ce}=W,{reduce:Ae}=Ce,$e=Et=>{de({...Ce,reduce:Et})},Ye=Et=>{X.indexOf(Et)>-1?Ze(X.filter(Pt=>Pt!==Et)):Ze([...X,Et])},Ze=Et=>{$e({...Ae,include:Et})},mt=Et=>{const Pt=Et.length?Et[0]:lt.gy.sum,{reduce:$t}=Ce;$e({...$t,reducer:Pt})};return a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Operation",labelWidth:Cn,grow:!0},a.createElement(sa.Gy,{spacing:"xs",align:"flex-start",wrap:!0},_.map((Et,Pt)=>a.createElement(da.m,{key:`${Et}/${Pt}`,onClick:()=>{Ye(Et)},label:Et,selected:X.indexOf(Et)>-1})))),a.createElement(G.I,{label:"Calculation",labelWidth:Cn},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ae?.reducer||lt.gy.sum],onChange:mt,defaultStat:lt.gy.sum})))};var _a=e(27618),Xa=e(76892);const ps=W=>{const{options:_,onChange:X}=W,{unary:de}=_,Ce=Pt=>{X({..._,mode:Dt.UY.UnaryOperation,unary:Pt})},Ae=Pt=>{Ce({...de,operator:Pt.value})},$e=Pt=>{Ce({...de,fieldName:Pt.value})};let Ye=!de?.fieldName;const Ze=W.names.map(Pt=>(Pt===de?.fieldName&&(Ye=!0),{label:Pt,value:Pt})),mt=_a.j.list().map(Pt=>({label:Pt.unaryOperationID,value:Pt.unaryOperationID})),Et=Ye?Ze:[...Ze,{label:de?.fieldName,value:de?.fieldName}];return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Operation",labelWidth:Cn},a.createElement(re.l6,{options:mt,value:de?.operator??mt[0].value,onChange:Ae})),a.createElement(G.I,{label:"(",labelWidth:2},a.createElement(re.l6,{placeholder:"Field",className:"min-width-11",options:Et,value:de?.fieldName,onChange:$e})),a.createElement(Xa.c,{width:2},")")))};var As=e(60188);const ys=W=>{const{options:_,names:X,onChange:de}=W,{window:Ce}=_,Ae=X.map(At=>({label:At,value:At})),$e=[{label:"Trailing",value:Dt.ip.Trailing},{label:"Centered",value:Dt.ip.Centered}],Ye=[{label:"Percentage",value:Dt.Bp.Percentage},{label:"Fixed",value:Dt.Bp.Fixed}],Ze=At=>{de({..._,mode:Dt.UY.WindowFunctions,window:At})},mt=At=>{Ze({...Ce,field:At.value})},Et=At=>{Ze({...Ce,windowSize:At&&Ce?.windowSizeMode===Dt.Bp.Percentage?At/100:At})},Pt=At=>{Ze({...Ce,windowSize:Ce?.windowSize?At===Dt.Bp.Percentage?Ce.windowSize/100:Ce.windowSize*100:void 0,windowSizeMode:At})},$t=At=>{const Wt=At.length?At[0]:lt.gy.sum;Ze({...Ce,reducer:Wt})},Bt=At=>{Ze({...Ce,windowAlignment:At})};return a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Field",labelWidth:Cn},a.createElement(re.l6,{placeholder:"Field",options:Ae,className:"min-width-18",value:Ce?.field,onChange:mt})),a.createElement(G.I,{label:"Calculation",labelWidth:Cn},a.createElement(Ct.S,{allowMultiple:!1,className:"width-18",stats:[Ce?.reducer||lt.gy.mean],onChange:$t,defaultStat:lt.gy.mean,filterOptions:At=>At.id===lt.gy.mean||At.id===lt.gy.variance||At.id===lt.gy.stdDev})),a.createElement(G.I,{label:"Type",labelWidth:Cn},a.createElement(ne.z,{value:Ce?.windowAlignment??Dt.ip.Trailing,options:$e,onChange:Bt})),a.createElement(G.I,{label:"Window size mode"},a.createElement(ne.z,{value:Ce?.windowSizeMode??Dt.Bp.Percentage,options:Ye,onChange:Pt})),a.createElement(G.I,{label:Ce?.windowSizeMode===Dt.Bp.Percentage?"Window size %":"Window size",labelWidth:Cn,tooltip:Ce?.windowSizeMode===Dt.Bp.Percentage?"Set the window size as a percentage of the total data":"Window size"},a.createElement(As.Q,{placeholder:"Auto",min:.1,value:Ce?.windowSize&&Ce.windowSizeMode===Dt.Bp.Percentage?Ce.windowSize*100:Ce?.windowSize,onChange:Et})))},vs=[{value:Dt.UY.BinaryOperation,label:"Binary operation"},{value:Dt.UY.UnaryOperation,label:"Unary operation"},{value:Dt.UY.ReduceRow,label:"Reduce row"},{value:Dt.UY.Index,label:"Row index"}];H.$.featureToggles.addFieldFromCalculationStatFunctions&&vs.push({value:Dt.UY.CumulativeFunctions,label:"Cumulative functions"},{value:Dt.UY.WindowFunctions,label:"Window functions"});const ar=new Set([k.PU.time,k.PU.number,k.PU.string]),ss=W=>{const{options:_,onChange:X,input:de}=W,Ce=_?.reduce?.include,[Ae,$e]=(0,a.useState)({names:[],selected:[]});(0,a.useEffect)(()=>{const At={interpolate:En=>En},Wt=(0,dn.of)(de).pipe(Z.c.ensureColumnsTransformer.operator(null,At),Ze(),Ye(),mt(Ce||[])).subscribe(({selected:En,names:wa})=>{$e({names:wa,selected:En})});return()=>{Wt.unsubscribe()}},[de,Ce]);const Ye=()=>{if(!H.$.featureToggles.transformationsVariableSupport)return pt.D;const At=(0,Ee.w)();return Wt=>Wt.pipe((0,Jn.T)(En=>(En.push(...At.getVariables().map(wa=>"$"+wa.name)),En)))},Ze=()=>At=>At.pipe((0,Jn.T)(Wt=>{const En=[],wa={};for(const Ja of Wt)for(const Ha of Ja.fields){if(!ar.has(Ha.type))continue;const Va=(0,fe.Ct)(Ha,Ja,Wt);wa[Va]||(wa[Va]=!0,En.push(Va))}return En})),mt=At=>Wt=>Wt.pipe((0,Jn.T)(En=>{if(!At.length)return{names:En,selected:[]};const wa=[],Ja=[];for(const Ha of En)At.includes(Ha)&&Ja.push(Ha),wa.push(Ha);return{names:wa,selected:Ja}})),Et=At=>{X({..._,replaceFields:At.currentTarget.checked})},Pt=At=>{const Wt=At.value??Dt.UY.BinaryOperation;Wt===Dt.UY.WindowFunctions&&(_.window=_.window??Dt.Uj),X({..._,mode:Wt})},$t=At=>{X({..._,alias:At.target.value})},Bt=_.mode??Dt.UY.BinaryOperation;return a.createElement(a.Fragment,null,a.createElement(G.I,{labelWidth:Cn,label:"Mode"},a.createElement(re.l6,{className:"width-18",options:vs,value:vs.find(At=>At.value===Bt),onChange:Pt})),Bt===Dt.UY.BinaryOperation&&a.createElement(In,{options:_,names:Ae.names,onChange:W.onChange}),Bt===Dt.UY.UnaryOperation&&a.createElement(ps,{names:Ae.names,options:_,onChange:W.onChange}),Bt===Dt.UY.ReduceRow&&a.createElement(Ma,{names:Ae.names,selected:Ae.selected,options:_,onChange:W.onChange}),Bt===Dt.UY.CumulativeFunctions&&a.createElement(fa,{names:Ae.names,options:_,onChange:W.onChange}),Bt===Dt.UY.WindowFunctions&&a.createElement(ys,{names:Ae.names,options:_,onChange:W.onChange}),Bt===Dt.UY.Index&&a.createElement(ga,{options:_,onChange:W.onChange}),a.createElement(G.I,{labelWidth:Cn,label:"Alias"},a.createElement(Me.p,{className:"width-18",value:_.alias??"",placeholder:(0,Dt.sw)(_),onChange:$t})),a.createElement(G.I,{labelWidth:Cn,label:"Replace all fields"},a.createElement(nn.K,{value:!!_.replaceFields,onChange:Et})))},Rs={id:q.F.calculateField,editor:ss,transformation:Z.c.calculateFieldTransformer,name:Z.c.calculateFieldTransformer.name,description:"Use the row values to calculate a new field.",categories:new Set([f.m.CalculateNewFields]),help:ue(q.F.calculateField).helperDocs};var Cs=e(82150);const ws=[{value:Cs.x1.FieldName,label:"Copy frame name to field name"},{value:Cs.x1.Label,label:"Add a label with the frame name"},{value:Cs.x1.Drop,label:"Ignore the frame name"}];class kr extends a.PureComponent{constructor(_){super(_),this.onModeChanged=X=>{const{options:de,onChange:Ce}=this.props,Ae=X.value??Cs.x1.FieldName;Ce({...de,frameNameMode:Ae})},this.onLabelChanged=X=>{const{options:de}=this.props;this.props.onChange({...de,frameNameLabel:X.target.value})}}render(){const{options:_}=this.props,X=_.frameNameMode??Cs.x1.FieldName;return a.createElement("div",null,a.createElement(G.I,{label:"Name",labelWidth:16,grow:!0},a.createElement(re.l6,{width:36,options:ws,value:ws.find(de=>de.value===X),onChange:this.onModeChanged})),X===Cs.x1.Label&&a.createElement(G.I,{label:"Label",labelWidth:16,grow:!0},a.createElement(Me.p,{width:36,value:_.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged})))}}const Xs={id:q.F.concatenate,editor:kr,transformation:Z.c.concatenateTransformer,name:Z.c.concatenateTransformer.name,description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([f.m.Combine]),help:ue(q.F.concatenate).helperDocs};var dr=e(91410),ks=e(76218),bo=e(9988),_s=e(63577),Ls=e(55244),Bs=e(14578),Tr=e(72093),Ws=e(29158);const co=({transformIndex:W,value:_,index:X,mappedIndex:de,onChangeEnumValue:Ce,onRemoveEnumRow:Ae,checkIsEnumUniqueValue:$e})=>{const Ye=(0,Mt.of)(ei),[Ze,mt]=(0,a.useState)(_),[Et,Pt]=(0,a.useState)(Ze===""),[$t,Bt]=(0,a.useState)(null),At=(0,a.useRef)(null);(0,a.useEffect)(()=>{At.current&&At.current.focus()},[At]);const Wt=Va=>{Va.currentTarget.value!==""&&$e(Va.currentTarget.value)&&Va.currentTarget.value!==_?Bt("Enum value already exists"):Bt(null),mt(Va.currentTarget.value)},En=()=>{if(Pt(!1),Bt(null),Ze===""||$t!==null){Ae(de);return}Ce(de,Ze)},wa=Va=>{Va.key==="Enter"&&(Va.preventDefault(),En())},Ja=()=>{Pt(!0)},Ha=()=>{Ae(de)};return a.createElement(Ls.sx,{key:`${W}/${_}`,draggableId:`${W}/${_}`,index:X},Va=>a.createElement("tr",{key:X,ref:Va.innerRef,...Va.draggableProps},a.createElement("td",null,a.createElement("div",{className:Ye.dragHandle,...Va.dragHandleProps},a.createElement(Bs.I,{name:"draggabledots",size:"lg"}))),Et?a.createElement("td",null,a.createElement(Me.p,{ref:At,type:"text",value:Ze,onChange:Wt,onBlur:En,onKeyDown:wa}),$t&&a.createElement(Tr.P,null,$t)):a.createElement("td",{onClick:Ja,className:Ye.clickableTableCell},_&&_!==""?_:"Click to edit"),a.createElement("td",{className:Ye.textAlignCenter},a.createElement(sa.Gy,{spacing:"sm"},a.createElement(Ws.K,{name:"trash-alt",onClick:Ha,"data-testid":"remove-enum-row","aria-label":"Delete enum row",tooltip:"Delete"})))))},ei=W=>({dragHandle:(0,it.css)({cursor:"grab"}),textAlignCenter:(0,it.css)({textAlign:"center"}),clickableTableCell:(0,it.css)({cursor:"pointer",width:"100px","&:hover":{color:W.colors.text.maxContrast}})}),Ur=co,Ao=({input:W,options:_,transformIndex:X,onChange:de})=>{const Ce=(0,Mt.of)(uo),[Ae,$e]=(0,a.useState)(_.conversions[X].enumConfig?.text??[]);(0,a.useEffect)(()=>{!_.conversions[X].enumConfig?.text?.length&&W.length&&Ye()},[W]),(0,a.useEffect)(()=>{(()=>{const Wt=Ae.map(Ja=>Ja),En=_.conversions,wa={text:Wt};En[X]={...En[X],enumConfig:wa},de({..._,conversions:En})})()},[X,Ae]);const Ye=()=>{const At=W.flatMap(En=>En?.fields??[]).find(En=>En.name===_.conversions[X].targetField);if(!At)return;const Wt=new Set(At?.values);Ae.length>0&&!(0,p.isEqual)(Ae,Array.from(Wt))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||$e([...Wt])},Ze=(At,Wt)=>{const En=[...Ae];En.splice(At,1,Wt),$e(En)},mt=At=>{const Wt=[...Ae];Wt.splice(At,1),$e(Wt)},Et=()=>{$e(["",...Ae])},Pt=(At,Wt)=>{Ae.includes(Wt)||Ze(At,Wt)},$t=At=>Ae.includes(At),Bt=At=>{if(!At.destination)return;const Wt=Ae.length-At.source.index-1,En=Ae.length-At.destination.index-1,wa=[...Ae],Ja=wa[Wt];wa.splice(Wt,1),wa.splice(En,0,Ja),$e(wa)};return a.createElement(he.C,null,a.createElement(sa.Gy,null,a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:()=>Ye(),className:Ce.button},"Generate enum values from data"),a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:()=>Et(),className:Ce.button},"Add enum value")),a.createElement(sa.gW,null,a.createElement("table",{className:Ce.compactTable},a.createElement(Ls.JY,{onDragEnd:Bt},a.createElement(Ls.gL,{droppableId:"sortable-enum-config-mappings",direction:"vertical"},At=>a.createElement("tbody",{ref:At.innerRef,...At.droppableProps},[...Ae].reverse().map((Wt,En)=>{const wa=Ae.length-En-1;return a.createElement(Ur,{key:`${X}/${Wt}`,transformIndex:X,value:Wt,index:En,mappedIndex:wa,onChangeEnumValue:Pt,onRemoveEnumRow:mt,checkIsEnumUniqueValue:$t})}),At.placeholder))))))},uo=W=>({compactTable:(0,it.css)({"tbody td":{padding:W.spacing(.5)},marginTop:W.spacing(1),marginBottom:W.spacing(2)}),button:(0,it.css)({marginTop:W.spacing(1)})}),rs={settings:{width:24,isClearable:!1}},Ro=({input:W,options:_,onChange:X})=>{const de=bo.bx.filter(Bt=>Bt.value!==k.PU.trace),Ce=(0,xe.qt)(!0),Ae=(0,dr.P3)();Ce.push({label:"Browser",value:"browser"}),Ce.push({label:"UTC",value:"utc"});for(const Bt of Ae)Ce.push({label:Bt,value:Bt});const $e=(0,a.useCallback)(Bt=>At=>{const Wt=_.conversions;Wt[Bt]={...Wt[Bt],targetField:At??"",dateFormat:void 0},X({..._,conversions:Wt})},[X,_]),Ye=(0,a.useCallback)(Bt=>At=>{const Wt=_.conversions;Wt[Bt]={...Wt[Bt],destinationType:At.value},X({..._,conversions:Wt})},[X,_]),Ze=(0,a.useCallback)(Bt=>At=>{const Wt=_.conversions;Wt[Bt]={...Wt[Bt],dateFormat:At.currentTarget.value},X({..._,conversions:Wt})},[X,_]),mt=(0,a.useCallback)(Bt=>At=>{const Wt=_.conversions;Wt[Bt]={...Wt[Bt],joinWith:At.currentTarget.value},X({..._,conversions:Wt})},[X,_]),Et=(0,a.useCallback)(()=>{X({..._,conversions:[..._.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[X,_]),Pt=(0,a.useCallback)(Bt=>{const At=_.conversions;At.splice(Bt,1),X({..._,conversions:At})},[X,_]),$t=(0,a.useCallback)(Bt=>At=>{const Wt=_.conversions;Wt[Bt]={...Wt[Bt],timezone:At?.value},X({..._,conversions:Wt})},[X,_]);return a.createElement(a.Fragment,null,_.conversions.map((Bt,At)=>{const Wt=(0,_s.findField)(W?.[0],Bt.targetField);return a.createElement("div",{key:`${Bt.targetField}-${At}`},a.createElement(he.C,null,a.createElement(G.I,{label:"Field"},a.createElement(ks.O,{context:{data:W},value:Bt.targetField??"",onChange:$e(At),item:rs})),a.createElement(G.I,{label:"as"},a.createElement(re.l6,{options:de,value:Bt.destinationType,placeholder:"Type",onChange:Ye(At),width:18})),Bt.destinationType===k.PU.time&&a.createElement(G.I,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(Me.p,{value:Bt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Ze(At),width:24})),Bt.destinationType===k.PU.string&&a.createElement(a.Fragment,null,(Bt.joinWith?.length||Wt?.type===k.PU.other)&&a.createElement(G.I,{label:"Join with",tooltip:"Use an explicit separator when joining array values"},a.createElement(Me.p,{value:Bt.joinWith,placeholder:"JSON",onChange:mt(At),width:9})),Bt.dateFormat||Wt?.type===k.PU.time&&a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Date format",tooltip:"Specify the output format."},a.createElement(Me.p,{value:Bt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Ze(At),width:24})),a.createElement(G.I,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},a.createElement(re.l6,{options:Ce,value:Bt.timezone,onChange:$t(At),isClearable:!0})))),a.createElement(oe.$n,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Pt(At),"aria-label":"Remove convert field type transformer"})),Bt.destinationType===k.PU.enum&&a.createElement(Ao,{input:W,options:_,transformIndex:At,onChange:X}))}),a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:Et,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Do={id:q.F.convertFieldType,editor:Ro,transformation:Z.c.convertFieldTypeTransformer,name:Z.c.convertFieldTypeTransformer.name,description:Z.c.convertFieldTypeTransformer.description,categories:new Set([f.m.Reformat]),help:ue(q.F.convertFieldType).helperDocs};var lr=e(54479);class Lo extends a.PureComponent{constructor(_){super(_),this.onFieldToggle=X=>{const{selected:de}=this.state;de.indexOf(X)>-1?this.onChange(de.filter(Ce=>Ce!==X)):this.onChange([...de,X])},this.onChange=X=>{const{regex:de,isRegexValid:Ce}=this.state,Ae={...this.props.options,include:{names:X}};de&&Ce&&(Ae.include=Ae.include??{},Ae.include.pattern=de),this.setState({selected:X},()=>{this.props.onChange(Ae)})},this.onInputBlur=X=>{const{selected:de,regex:Ce}=this.state;let Ae=!0;try{Ce&&(0,lr.dO)(Ce)}catch{Ae=!1}Ae?this.props.onChange({...this.props.options,include:{pattern:Ce}}):this.props.onChange({...this.props.options,include:{names:de}}),this.setState({isRegexValid:Ae})},this.onVariableChange=X=>{this.props.onChange({...this.props.options,include:{variable:X.value}}),this.setState({variable:X.value})},this.onFromVariableChange=X=>{const de=X.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:de}),this.setState({byVariable:de})},this.state={include:_.options.include?.names||[],regex:_.options.include?.pattern,variable:_.options.include?.variable,byVariable:_.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(_){this.props.input!==_.input&&this.initOptions()}initOptions(){const{input:_,options:X}=this.props,de=Array.from(X.include?.names??[]),Ce=(0,Ee.w)().getVariables().map(Ye=>({label:"$"+Ye.name,value:"$"+Ye.name})),Ae=[],$e={};for(const Ye of _)for(const Ze of Ye.fields){const mt=(0,fe.Ct)(Ze,Ye,_);let Et=$e[mt];Et||(Et=$e[mt]={name:mt,count:0},Ae.push(Et)),Et.count++}if(X.include?.pattern)try{const Ye=(0,lr.dO)(X.include.pattern);for(const Ze of Ae)Ye.test(Ze.name)&&de.push(Ze.name)}catch(Ye){console.error(Ye)}if(de.length){const Ye=Ae.filter(Ze=>de.includes(Ze.name));this.setState({options:Ae,selected:Ye.map(Ze=>Ze.name),variables:Ce,byVariable:X.byVariable||!1,variable:X.include?.variable,regex:X.include?.pattern})}else this.setState({options:Ae,selected:Ae.map(Ye=>Ye.name),variables:Ce,byVariable:X.byVariable||!1,variable:X.include?.variable,regex:X.include?.pattern})}render(){const{options:_,selected:X,isRegexValid:de}=this.state;return a.createElement("div",null,a.createElement(he.C,{label:"Use variable"},a.createElement(G.I,{label:"From variable"},a.createElement(nn.K,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?a.createElement(he.C,null,a.createElement(G.I,{label:"Variable"},a.createElement(re.l6,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):a.createElement(he.C,{label:"Identifier"},a.createElement(G.I,{label:"Identifier",invalid:!de,error:de?void 0:"Invalid pattern"},a.createElement(Me.p,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:Ce=>this.setState({regex:Ce.currentTarget.value}),onBlur:this.onInputBlur,width:25})),_.map((Ce,Ae)=>{const $e=`${Ce.name}${Ce.count>1?" ("+Ce.count+")":""}`,Ye=X.indexOf(Ce.name)>-1;return a.createElement(da.m,{key:`${Ce.name}/${Ae}`,onClick:()=>{this.onFieldToggle(Ce.name)},label:$e,selected:Ye})})))}}const ii={id:q.F.filterFieldsByName,editor:Lo,transformation:Z.c.filterFieldsByNameTransformer,name:Z.c.filterFieldsByNameTransformer.name,description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([f.m.Filter]),help:ue(q.F.filterFieldsByName).helperDocs};class Hr extends a.PureComponent{constructor(_){super(_),this.onFieldToggle=X=>{const{selected:de}=this.state;de.indexOf(X)>-1?this.onChange(de.filter(Ce=>Ce!==X)):this.onChange([...de,X])},this.onChange=X=>{this.setState({selected:X}),this.props.onChange({...this.props.options,include:X.join("|")})},this.state={include:_.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(_){this.props.input!==_.input&&this.initOptions()}initOptions(){const{input:_,options:X}=this.props,de=X.include?X.include.split("|"):[],Ce=[],Ae={};for(const $e of _)if($e.refId){let Ye=Ae[$e.refId];Ye||(Ye=Ae[$e.refId]={refId:$e.refId,count:0},Ce.push(Ye)),Ye.count++}if(de.length){const $e=[],Ye=[];for(const Ze of Ce)de.includes(Ze.refId)&&Ye.push(Ze),$e.push(Ze);this.setState({options:$e,selected:Ye.map(Ze=>Ze.refId)})}else this.setState({options:Ce,selected:[]})}render(){const{options:_,selected:X}=this.state,{input:de}=this.props;return a.createElement(a.Fragment,null,de.length<=1&&a.createElement("div",null,a.createElement(Tr.P,null,"Filter data by query expects multiple queries in the input.")),a.createElement(G.I,{label:"Series refId",labelWidth:16,shrink:!0},a.createElement(sa.Gy,{spacing:"xs",align:"flex-start",wrap:!0},_.map((Ce,Ae)=>{const $e=`${Ce.refId}${Ce.count>1?" ("+Ce.count+")":""}`,Ye=X.indexOf(Ce.refId)>-1;return a.createElement(da.m,{key:`${Ce.refId}/${Ae}`,onClick:()=>{this.onFieldToggle(Ce.refId)},label:$e,selected:Ye})}))))}}const Po={id:q.F.filterByRefId,editor:Hr,transformation:Z.c.filterFramesByRefIdTransformer,name:Z.c.filterFramesByRefIdTransformer.name,description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([f.m.Filter]),help:ue(q.F.filterByRefId).helperDocs};var Co=e(15400);const ur={settings:{width:30,filter:W=>W.type===k.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function Vo({input:W,options:_,onChange:X}){const de=(0,a.useCallback)(Ze=>{X({..._,stringField:Ze??""})},[X,_]),Ce=(0,a.useCallback)(Ze=>{const mt=Ze.value??Co.gs.UpperCase;X({..._,outputFormat:mt})},[X,_]),Ae=(0,a.useCallback)(Ze=>{X({..._,substringStart:Ze??0})},[X,_]),$e=(0,a.useCallback)(Ze=>{X({..._,substringEnd:Ze??0})},[X,_]),Ye=Object.values(Co.gs).map(Ze=>({label:Ze,value:Ze}));return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Field",labelWidth:10},a.createElement(ks.O,{context:{data:W},value:_.stringField??"",onChange:de,item:ur})),a.createElement(G.I,{label:"Format",labelWidth:10},a.createElement(re.l6,{options:Ye,value:_.outputFormat,onChange:Ce,width:20}))),_.outputFormat===Co.gs.Substring&&a.createElement(he.C,null,a.createElement(G.I,{label:"Substring range",labelWidth:15},a.createElement(As.Q,{min:0,value:_.substringStart??0,onChange:Ae,width:7})),a.createElement(G.I,null,a.createElement(As.Q,{min:0,value:_.substringEnd??0,onChange:$e,width:7}))))}const mo={id:q.F.formatString,editor:Vo,transformation:Z.c.formatStringTransformer,name:Z.c.formatStringTransformer.name,state:Xe.pn.beta,description:Z.c.formatStringTransformer.description,categories:new Set([f.m.Reformat])};function jr({input:W,options:_,onChange:X}){const de=[],Ce=(0,xe.qt)(!0);for(const Ze of W)for(const mt of Ze.fields)if(mt.type==="time"){const Et=(0,fe.Ct)(mt,Ze,W);de.push({label:Et,value:Et})}const Ae=(0,a.useCallback)(Ze=>{const mt=Ze?.value!==void 0?Ze.value:"";X({..._,timeField:mt})},[X,_]),$e=(0,a.useCallback)(Ze=>{const mt=Ze.target.value;X({..._,outputFormat:mt})},[X,_]),Ye=(0,a.useCallback)(Ze=>{const mt=Ze?.value!==void 0?Ze.value:"";X({..._,timezone:mt})},[X,_]);return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Time Field",labelWidth:15,grow:!0},a.createElement(re.l6,{options:de,value:_.timeField,onChange:Ae,placeholder:"time",isClearable:!0})),a.createElement(G.I,{label:"Format",labelWidth:10,tooltip:a.createElement(a.Fragment,null,"The output format for the field specified as a"," ",a.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},a.createElement(Me.p,{onChange:$e,value:_.outputFormat})),a.createElement(G.I,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},a.createElement(re.l6,{options:Ce,value:_.timezone,onChange:Ye,isClearable:!0}))))}const Bo={id:q.F.formatTime,editor:jr,transformation:Z.c.formatTimeTransformer,name:Z.c.formatTimeTransformer.name,state:Xe.pn.alpha,description:Z.c.formatTimeTransformer.description,help:ue(q.F.formatTime).helperDocs};var mr=e(25094),xt=e(67061),wt=e(42418);const fn=({input:W,options:_,onChange:X})=>{const de=(0,xe.ZI)(W),Ce=(0,a.useCallback)(Ze=>mt=>{X({..._,fields:{..._.fields,[Ze]:mt}})},[X]);let Ae,$e=!1;for(const Ze of Object.values(_.fields))Ze.aggregations.length>0&&Ze.operation!==null&&($e=!0),Ze.operation===mr.R3.groupBy&&(Ae=!0);const Ye=$e&&!Ae;return a.createElement(xt.B,{direction:"column"},Ye&&a.createElement(wt.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),de.map(Ze=>a.createElement(bn,{onConfigChange:Ce(Ze),fieldName:Ze,config:_.fields[Ze],key:Ze})))},cn=[{label:"Group by",value:mr.R3.groupBy},{label:"Calculate",value:mr.R3.aggregate}],bn=({fieldName:W,config:_,onConfigChange:X})=>{const de=(0,Mt.$j)(),Ce=Wn(de),Ae=(0,a.useCallback)($e=>{X({aggregations:_?.aggregations??[],operation:$e?.value??null})},[_,X]);return a.createElement(G.I,{className:Ce.label,label:W,grow:!0,shrink:!0},a.createElement(xt.B,{gap:.5,direction:"row"},a.createElement("div",{className:Ce.operation},a.createElement(re.l6,{options:cn,value:_?.operation,placeholder:"Ignored",onChange:Ae,isClearable:!0})),_?.operation===mr.R3.aggregate&&a.createElement(Ct.S,{className:Ce.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:_.aggregations,onChange:$e=>{X({..._,aggregations:$e})}})))},Wn=W=>({label:(0,it.css)`
      label {
        min-width: ${W.spacing(32)};
      }
    `,operation:(0,it.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${W.spacing(24)};
    `,aggregations:(0,it.css)`
      flex-grow: 1;
    `}),jn={id:q.F.groupBy,editor:fn,transformation:Z.c.groupByTransformer,name:Z.c.groupByTransformer.name,description:Z.c.groupByTransformer.description,categories:new Set([f.m.Combine,f.m.CalculateNewFields,f.m.Reformat]),help:ue(q.F.groupBy).helperDocs};var pa=e(68133),xa=e(46819),us=e(88575);const bs=({input:W,options:_,onChange:X})=>{const de=(0,xe.ZI)(W),Ce=_.showSubframeHeaders===void 0?pa.l:_.showSubframeHeaders,Ae=(0,a.useCallback)(Et=>Pt=>{X({..._,fields:{..._.fields,[Et]:Pt}})},[X]),$e=(0,a.useCallback)(()=>{const Et=_.showSubframeHeaders===void 0?!pa.l:!_.showSubframeHeaders;X({showSubframeHeaders:Et,fields:{..._.fields}})},[X]);let Ye,Ze=!1;for(const Et of Object.values(_.fields))Et.aggregations.length>0&&Et.operation!==null&&(Ze=!0),Et.operation===mr.R3.groupBy&&(Ye=!0);const mt=Ze&&!Ye;return a.createElement(xa.B,{direction:"column"},mt&&a.createElement(wt.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),a.createElement("div",null,de.map(Et=>a.createElement(Qa,{onConfigChange:Ae(Et),fieldName:Et,config:_.fields[Et],key:Et}))),a.createElement(us.D,{label:"Show field names in nested tables",description:"If enabled nested tables will show field names as a table header"},a.createElement(nn.d,{value:Ce,onChange:$e})))},Ga=[{label:"Group by",value:mr.R3.groupBy},{label:"Calculate",value:mr.R3.aggregate}],Qa=({fieldName:W,config:_,onConfigChange:X})=>{const de=(0,Mt.$j)(),Ce=Zs(de),Ae=(0,a.useCallback)($e=>{X({aggregations:_?.aggregations??[],operation:$e?.value??null})},[_,X]);return a.createElement(G.I,{className:Ce.label,label:W,grow:!0,shrink:!0},a.createElement(xa.B,{gap:.5,direction:"row",wrap:!1},a.createElement("div",{className:Ce.operation},a.createElement(re.l6,{options:Ga,value:_?.operation,placeholder:"Ignored",onChange:Ae,isClearable:!0})),_?.operation===mr.R3.aggregate&&a.createElement(Ct.S,{className:Ce.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:_.aggregations,onChange:$e=>{X({..._,aggregations:$e})}})))},Zs=W=>({label:(0,it.css)({minWidth:W.spacing(32)}),operation:(0,it.css)({flexShrink:0,height:"100%",width:W.spacing(24)}),aggregations:(0,it.css)({flexGrow:1})}),yr={id:q.F.groupToNestedTable,editor:bs,transformation:Z.c.groupToNestedTable,name:Z.c.groupToNestedTable.name,description:Z.c.groupToNestedTable.description,categories:new Set([f.m.Combine,f.m.CalculateNewFields,f.m.Reformat])};var sr=e(81010);const xr=({input:W,options:_,onChange:X})=>{const de=(0,xe.ZI)(W).map(mt=>({label:mt,value:mt})),Ce=(0,a.useCallback)(mt=>{X({..._,columnField:mt?.value})},[X,_]),Ae=(0,a.useCallback)(mt=>{X({..._,rowField:mt?.value})},[X,_]),$e=(0,a.useCallback)(mt=>{X({..._,valueField:mt?.value})},[X,_]),Ye=[{label:"Null",value:sr.N.Null,description:"Null value"},{label:"True",value:sr.N.True,description:"Boolean true value"},{label:"False",value:sr.N.False,description:"Boolean false value"},{label:"Empty",value:sr.N.Empty,description:"Empty string"}],Ze=(0,a.useCallback)(mt=>{X({..._,emptyValue:mt?.value})},[X,_]);return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Column",labelWidth:8},a.createElement(re.l6,{options:de,value:_.columnField,onChange:Ce,isClearable:!0})),a.createElement(G.I,{label:"Row",labelWidth:8},a.createElement(re.l6,{options:de,value:_.rowField,onChange:Ae,isClearable:!0})),a.createElement(G.I,{label:"Cell Value",labelWidth:10},a.createElement(re.l6,{options:de,value:_.valueField,onChange:$e,isClearable:!0})),a.createElement(G.I,{label:"Empty Value"},a.createElement(re.l6,{options:Ye,value:_.emptyValue,onChange:Ze,isClearable:!0}))))},To={id:q.F.groupingToMatrix,editor:xr,transformation:Z.c.groupingToMatrixTransformer,name:Z.c.groupingToMatrixTransformer.name,description:"Takes a three fields combination and produces a Matrix.",categories:new Set([f.m.Combine,f.m.Reformat]),help:ue(q.F.groupingToMatrix).helperDocs};var qs=e(77678);const _o=({input:W,options:_,onChange:X})=>{const[Ce,Ae]=(0,a.useState)({bucketCount:!(0,xe.N_)(_.bucketCount||""),bucketSize:!(0,xe.N_)(_.bucketSize||""),bucketOffset:!(0,xe.N_)(_.bucketOffset||"")}),$e=(0,a.useCallback)(Wt=>{X({..._,bucketCount:Wt})},[X,_]),Ye=(0,a.useCallback)(Wt=>{X({..._,bucketSize:Wt})},[X,_]),Ze=(0,a.useCallback)(Wt=>{X({..._,bucketOffset:Wt})},[X,_]),mt=(0,a.useCallback)(Wt=>{Ae({...Ce,bucketCount:!(0,xe.N_)(Wt)}),X({..._,bucketCount:Number(Wt)===0?void 0:Number(Wt)})},[X,_,Ce]),Et=(0,a.useCallback)(Wt=>{Ae({...Ce,bucketSize:!(0,xe.N_)(Wt)}),X({..._,bucketSize:Wt})},[X,_,Ce,Ae]),Pt=(0,a.useCallback)(Wt=>{Ae({...Ce,bucketOffset:!(0,xe.N_)(Wt)}),X({..._,bucketOffset:Wt})},[X,_,Ce,Ae]),$t=(0,a.useCallback)(()=>{X({..._,combine:!_.combine})},[X,_]),At=(0,Ee.w)().getVariables().map(Wt=>({value:Wt.name,label:Wt.label||Wt.name,origin:Fe.$0.Template}));if(!H.$.featureToggles.transformationsVariableSupport){let Wt;typeof _.bucketSize=="string"?Wt=parseInt(_.bucketSize,10):Wt=_.bucketSize;let En;return typeof _.bucketOffset=="string"?En=parseInt(_.bucketOffset,10):En=_.bucketOffset,a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.bucketCount.name,tooltip:qs.Rt.bucketCount.description},a.createElement(As.Q,{value:_.bucketCount,placeholder:"Default: 30",onChange:$e,min:0}))),a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.bucketSize.name,tooltip:qs.Rt.bucketSize.description},a.createElement(As.Q,{value:Wt,placeholder:"auto",onChange:Ye,min:0}))),a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.bucketOffset.name,tooltip:qs.Rt.bucketOffset.description},a.createElement(As.Q,{value:En,placeholder:"none",onChange:Ze,min:0}))),a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.combine.name,tooltip:qs.Rt.combine.description},a.createElement(nn.K,{value:_.combine??!1,onChange:$t}))))}return a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{invalid:Ce.bucketCount,error:"Value needs to be an integer or a variable",labelWidth:18,label:qs.Rt.bucketCount.name,tooltip:qs.Rt.bucketCount.description},a.createElement(ze.y,{suggestions:At,value:_.bucketCount,placeholder:"Default: 30",onChange:mt}))),a.createElement(he.C,null,a.createElement(G.I,{invalid:Ce.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:qs.Rt.bucketSize.name,tooltip:qs.Rt.bucketSize.description},a.createElement(ze.y,{suggestions:At,value:_.bucketSize,placeholder:"auto",onChange:Et}))),a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.bucketOffset.name,tooltip:qs.Rt.bucketOffset.description,invalid:Ce.bucketOffset,error:"Value needs to be an integer or a variable"},a.createElement(ze.y,{suggestions:At,value:_.bucketOffset,placeholder:"none",onChange:Pt}))),a.createElement(he.C,null,a.createElement(G.I,{labelWidth:18,label:qs.Rt.combine.name,tooltip:qs.Rt.combine.description},a.createElement(nn.K,{value:_.combine??!1,onChange:$t}))))},no={id:q.F.histogram,editor:_o,transformation:Z.c.histogramTransformer,name:Z.c.histogramTransformer.name,description:Z.c.histogramTransformer.description,categories:new Set([f.m.CreateNewVisualization]),help:ue(q.F.histogram).helperDocs};var ms=e(41511),Hs=e(64278);const ao=[{value:ms.W.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:ms.W.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:ms.W.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function fs({input:W,options:_,onChange:X}){const de=(0,Hs.sE)(W),Ce=(0,Hs.m3)(de),Ae=(0,Ee.w)().getVariables().map(Ze=>({value:"$"+Ze.name,label:"$"+Ze.name})),$e=(0,a.useCallback)(Ze=>{X({..._,byField:Ze?.value})},[X,_]),Ye=(0,a.useCallback)(Ze=>{X({..._,mode:Ze?.value})},[X,_]);return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Mode",labelWidth:8,grow:!0},a.createElement(re.l6,{options:ao,value:_.mode??ms.W.outer,onChange:Ye}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Field",labelWidth:8,grow:!0},a.createElement(re.l6,{options:[...Ce,...Ae],value:_.byField,onChange:$e,placeholder:"time",isClearable:!0}))))}const Gr={id:q.F.joinByField,aliasIds:[q.F.seriesToColumns],editor:fs,transformation:Z.c.joinByFieldTransformer,name:Z.c.joinByFieldTransformer.name,description:Z.c.joinByFieldTransformer.description,categories:new Set([f.m.Combine]),help:ue(q.F.joinByField).helperDocs};var Uo=e(6829);const li=[{value:Uo.n.Columns,label:"Columns"},{value:Uo.n.Rows,label:"Rows"}],El=({input:W,options:_,onChange:X})=>{const{labelNames:Ce,selected:Ae}=(0,a.useMemo)(()=>{let Ze=[],mt={};for(const Pt of W)for(const $t of Pt.fields)if($t.labels)for(const Bt of Object.keys($t.labels))mt[Bt]||(Ze.push({value:Bt,label:Bt}),mt[Bt]=!0);const Et=new Set(_.keepLabels?.length?_.keepLabels:Object.keys(mt));return{labelNames:Ze,selected:Et}},[_.keepLabels,W]),$e=Ze=>{X({..._,valueLabel:Ze?.value})},Ye=Ze=>{if(Ae.has(Ze)?Ae.delete(Ze):Ae.add(Ze),Ae.size===Ce.length||!Ae.size){const{keepLabels:mt,...Et}=_;X(Et)}else X({..._,keepLabels:[...Ae]})};return a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{label:"Mode",labelWidth:20},a.createElement(ne.z,{options:li,value:_.mode??Uo.n.Columns,onChange:Ze=>X({..._,mode:Ze})}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Labels",labelWidth:20},a.createElement(xt.B,{gap:1,wrap:"wrap"},Ce.map((Ze,mt)=>{const Et=Ze.label;return a.createElement(da.m,{key:`${Et}/${mt}`,onClick:()=>Ye(Et),label:Et,selected:Ae.has(Et)})})))),_.mode!==Uo.n.Rows&&a.createElement(he.C,null,a.createElement(G.I,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(re.l6,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:Ce,value:_?.valueLabel,onChange:$e,className:"min-width-16"}))))},Ts={id:q.F.labelsToFields,editor:El,transformation:Z.c.labelsToFieldsTransformer,name:Z.c.labelsToFieldsTransformer.name,description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([f.m.Reformat]),help:ue(q.F.labelsToFields).helperDocs},yl=({options:W,onChange:_})=>{const[X,de]=(0,a.useState)(!1),Ce=(0,a.useCallback)(Ze=>{_({...W,limitField:Number(Ze.currentTarget.value)})},[_,W]),Ae=(0,a.useCallback)(Ze=>{de(!(0,xe.N_)(Ze)),_({...W,limitField:Ze})},[_,W]),Ye=(0,Ee.w)().getVariables().map(Ze=>({value:Ze.name,label:Ze.label||Ze.name,origin:Fe.$0.Template}));return H.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(ze.y,{invalid:X,error:"Value needs to be an integer or a variable",value:String(W.limitField),onChange:Ae,placeholder:"Value or variable",suggestions:Ye}))):a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Limit",labelWidth:8},a.createElement(Me.p,{placeholder:"Limit count",pattern:"[0-9]*",value:W.limitField,onChange:Ce,width:25}))))},nl={id:q.F.limit,editor:yl,transformation:Z.c.limitTransformer,name:Z.c.limitTransformer.name,description:"Limit the number of items displayed.",categories:new Set([f.m.Filter]),help:ue(q.F.limit).helperDocs},bl=({input:W,options:_,onChange:X})=>W.length<=1?a.createElement(Tr.P,null,"Merge has no effect when applied on a single frame."):null,wi={id:q.F.merge,editor:bl,transformation:Z.c.mergeTransformer,name:Z.c.mergeTransformer.name,description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([f.m.Combine]),help:ue(q.F.merge).helperDocs};var Sr=e(82280);const Ci=({options:W,input:_,onChange:X})=>{const{indexByName:de,excludeByName:Ce,renameByName:Ae,includeByName:$e}=W,Ye=(0,xe.ZI)(_),Ze=(0,a.useMemo)(()=>Dl(Ye,de),[Ye,de]),mt=$e&&Object.keys($e).length>0?"include":"exclude",Et=(0,a.useCallback)((At,Wt)=>{X({...W,excludeByName:{...Ce,[At]:Wt}})},[X,W,Ce]),Pt=(0,a.useCallback)((At,Wt)=>{const En={...W,includeByName:{...$e,[At]:!Wt}};X(En)},[X,W,$e]),$t=(0,a.useCallback)(At=>{if(!At||!At.destination)return;const Wt=At.source.index,En=At.destination.index;Wt!==En&&X({...W,indexByName:Fi(Ye,Wt,En)})},[X,W,Ye]),Bt=(0,a.useCallback)((At,Wt)=>{X({...W,renameByName:{...W.renameByName,[At]:Wt}})},[X,W]);return _.length>1?a.createElement(Tr.P,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(Ls.JY,{onDragEnd:$t},a.createElement(Ls.gL,{droppableId:"sortable-fields-transformer",direction:"vertical"},At=>a.createElement("div",{ref:At.innerRef,...At.droppableProps},Ze.map((Wt,En)=>{const wa=$e&&Wt in $e?$e[Wt]:!1,Ja=mt==="include"?wa:!Ce[Wt],Ha=mt==="include"?Pt:Et;return a.createElement(ci,{fieldName:Wt,renamedFieldName:Ae[Wt],index:En,onToggleVisibility:Ha,onRenameField:Bt,visible:Ja,key:Wt})}),At.placeholder)))};Ci.displayName="OrganizeFieldsTransformerEditor";const ci=({fieldName:W,renamedFieldName:_,index:X,visible:de,onToggleVisibility:Ce,onRenameField:Ae})=>{const $e=(0,Mt.of)(Qr);return a.createElement(Ls.sx,{draggableId:W,index:X},Ye=>a.createElement("div",{className:"gf-form-inline",ref:Ye.innerRef,...Ye.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement("span",{...Ye.dragHandleProps},a.createElement(Bs.I,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:$e.draggable})),a.createElement(Ws.K,{className:$e.toggle,size:"md",name:de?"eye":"eye-slash",onClick:()=>Ce(W,de),tooltip:de?"Disable":"Enable"}),a.createElement("span",{className:$e.name,title:W},W)),a.createElement(Me.p,{className:"flex-grow-1",defaultValue:_||"",placeholder:`Rename ${W}`,onBlur:Ze=>Ae(W,Ze.currentTarget.value)}))))};ci.displayName="DraggableFieldName";const Qr=W=>({toggle:(0,it.css)`
    margin: 0 8px;
    color: ${W.colors.text.secondary};
  `,draggable:(0,it.css)`
    opacity: 0.4;
    &:hover {
      color: ${W.colors.text.maxContrast};
    }
  `,name:(0,it.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${W.typography.bodySmall.fontSize};
    font-weight: ${W.typography.fontWeightMedium};
  `}),Fi=(W,_,X)=>{const de=Array.from(W),[Ce]=de.splice(_,1);return de.splice(X,0,Ce),de.reduce((Ae,$e,Ye)=>(Ae[$e]=Ye,Ae),{})},Dl=(W,_={})=>{if(!_||Object.keys(_).length===0)return W;const X=(0,Sr.X)(_);return W.sort(X)},fo={id:q.F.organize,editor:Ci,transformation:Z.c.organizeFieldsTransformer,name:Z.c.organizeFieldsTransformer.name,description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([f.m.ReorderAndRename]),help:ue(q.F.organize).helperDocs};var zo=e(21128),Mr=e(13544);const ko=({options:W,onChange:_})=>{const X=[{label:"Series to rows",value:zo.rV.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:zo.rV.ReduceFields,description:"Collapse each field into a single value"}],de=(0,a.useCallback)($e=>{const Ye=$e.value;_({...W,mode:Ye,includeTimeField:Ye===zo.rV.ReduceFields?!!W.includeTimeField:!1})},[_,W]),Ce=(0,a.useCallback)(()=>{_({...W,includeTimeField:!W.includeTimeField})},[_,W]),Ae=(0,a.useCallback)(()=>{_({...W,labelsToFields:!W.labelsToFields})},[_,W]);return a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Mode","data-testid":Mr.Tp.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},a.createElement(re.l6,{options:X,value:X.find($e=>$e.value===W.mode)||X[0],onChange:de})),a.createElement(G.I,{label:"Calculations","data-testid":Mr.Tp.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},a.createElement(Ct.S,{placeholder:"Choose Stat",allowMultiple:!0,stats:W.reducers||[],onChange:$e=>{_({...W,reducers:$e})}})),W.mode===zo.rV.ReduceFields&&a.createElement(G.I,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},a.createElement(nn.K,{id:"include-time-field",value:!!W.includeTimeField,onChange:Ce})),W.mode!==zo.rV.ReduceFields&&a.createElement(G.I,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},a.createElement(nn.K,{id:"labels-to-fields",value:!!W.labelsToFields,onChange:Ae})))},Ho={id:q.F.reduce,editor:ko,transformation:Z.c.reduceTransformer,name:Z.c.reduceTransformer.name,description:Z.c.reduceTransformer.description,categories:new Set([f.m.CalculateNewFields]),help:ue(q.F.reduce).helperDocs};class So extends a.PureComponent{constructor(_){super(_),this.handleRegexChange=X=>{const de=X.currentTarget.value;let Ce=!0;if(de)try{de&&(0,lr.dO)(de)}catch{Ce=!1}this.setState(Ae=>({...Ae,regex:de,isRegexValid:Ce}))},this.handleRenameChange=X=>{const de=X.currentTarget.value;this.setState(Ce=>({...Ce,renamePattern:de}))},this.handleRegexBlur=X=>{const de=X.currentTarget.value;let Ce=!0;try{de&&(0,lr.dO)(de)}catch{Ce=!1}this.setState({isRegexValid:Ce},()=>{Ce&&this.props.onChange({...this.props.options,regex:de})})},this.handleRenameBlur=X=>{const de=X.currentTarget.value;this.setState({renamePattern:de},()=>this.props.onChange({...this.props.options,renamePattern:de}))},this.state={regex:_.options.regex,renamePattern:_.options.renamePattern,isRegexValid:!0}}render(){const{regex:_,renamePattern:X,isRegexValid:de}=this.state;return a.createElement(a.Fragment,null,a.createElement(G.I,{label:"Match",labelWidth:16,invalid:!de,error:de?void 0:"Invalid pattern"},a.createElement(Me.p,{placeholder:"Regular expression pattern",value:_||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})),a.createElement(G.I,{label:"Replace",labelWidth:16},a.createElement(Me.p,{placeholder:"Replacement pattern",value:X||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))}}const Wi={id:q.F.renameByRegex,editor:So,transformation:Z.c.renameByRegexTransformer,name:Z.c.renameByRegexTransformer.name,description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([f.m.ReorderAndRename]),help:ue(q.F.renameByRegex).helperDocs},Ki=({input:W,options:_,onChange:X})=>null,Ti={id:q.F.seriesToRows,editor:Ki,transformation:Z.c.seriesToRowsTransformer,name:Z.c.seriesToRowsTransformer.name,description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([f.m.Combine,f.m.Reformat]),help:ue(q.F.seriesToRows).helperDocs},Pl=({input:W,options:_,onChange:X})=>{const de=(0,xe.ZI)(W).map(Ze=>({label:Ze,value:Ze})),Ae=(0,Ee.w)().getVariables().map(Ze=>({label:"$"+Ze.name,value:"$"+Ze.name})),$e=(0,a.useCallback)((Ze,mt)=>{X({..._,sort:[mt]})},[X,_]),Ye=_.sort?.length?_.sort:[{}];return a.createElement("div",null,Ye.map((Ze,mt)=>a.createElement(he.C,{key:`${Ze.field}/${mt}`},a.createElement(G.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(re.l6,{options:H.$.featureToggles.transformationsVariableSupport?[...de,...Ae]:de,value:Ze.field,placeholder:"Select field",onChange:Et=>{$e(mt,{...Ze,field:Et.value})}})),a.createElement(G.I,{label:"Reverse"},a.createElement(nn.K,{value:!!Ze.desc,onChange:()=>{$e(mt,{...Ze,desc:!Ze.desc})}})))))},al={id:q.F.sortBy,editor:Pl,transformation:Z.c.sortByTransformer,name:Z.c.sortByTransformer.name,description:Z.c.sortByTransformer.description,categories:new Set([f.m.ReorderAndRename]),help:ue(q.F.sortBy).helperDocs};function sl({options:W,onChange:_}){const[X,de]=(0,a.useState)(W),Ce=rl(),Ae=Cl(),$e=()=>{X.push({path:""}),de([...X]),mt()},Ye=Et=>{X&&(X.splice(Et,1),de([...X]),mt())},Ze=(Et,Pt,$t)=>{X&&($t==="alias"?X[Pt].alias=Et.currentTarget.value??"":X[Pt].path=Et.currentTarget.value??"",de([...X]))},mt=()=>{_(X)};return a.createElement("ol",{className:(0,it.cx)(Ae.list)},X&&X.map((Et,Pt)=>a.createElement("li",{key:Pt},a.createElement(he.C,null,a.createElement(G.I,{label:"Field",tooltip:Ce.field,grow:!0},a.createElement(Me.p,{onBlur:mt,onChange:$t=>Ze($t,Pt,"path"),value:Et.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(G.I,{label:"Alias",tooltip:Ce.alias},a.createElement(Me.p,{width:12,value:Et.alias,onBlur:mt,onChange:$t=>Ze($t,Pt,"alias")})),a.createElement(G.I,{className:(0,it.cx)(Ae.removeIcon)},a.createElement(Ws.K,{onClick:()=>Ye(Pt),name:"trash-alt",tooltip:"Remove path"}))))),a.createElement(G.I,null,a.createElement(oe.$n,{icon:"plus",onClick:()=>$e(),variant:"secondary"},"Add path")))}const rl=()=>{const W=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),W.map((_,X)=>a.createElement("p",{key:X},a.createElement("code",null,_.path),a.createElement("i",null,_.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function Cl(){return{list:(0,it.css)`
      margin-left: 20px;
    `,removeIcon:(0,it.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var go=e(14236),No=(W=>(W.JSON="json",W.KeyValues="kvp",W.Auto="auto",W))(No||{});const so={id:No.JSON,name:"JSON",description:"Parse JSON string",parse:W=>JSON.parse(W)};function Wr(W){const _=[];let X="",de="";const Ce={};for(let Ae=0;Ae<W.length;Ae++){let $e=W[Ae];$e===X&&(X="",$e=W[++Ae]);const Ye=$e==="\\";if(Ye&&($e=W[++Ae]),Ye||X.length){_.push($e);continue}switch(($e==='"'||$e==="'")&&(X=$e),$e){case":":case"=":_.length&&(de&&(Ce[de]=""),de=_.join(""),_.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:_.length&&de===""&&(Ce[_.join("")]="",_.length=0);case",":case";":case"&":case"{":case"}":if(_.length){const Ze=_.join("");de.length?(Ce[de]=Ze,de=""):de=Ze,_.length=0}break;default:_.push($e),Ae===W.length-1&&de===""&&_.length&&(Ce[_.join("")]="",_.length=0)}}return de.length&&(Ce[de]=_.join("")),Ce}const $i={id:No.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Wr},Si=[so,$i],di={id:No.Auto,name:"Auto",description:"parse new fields automatically",parse:W=>{for(const _ of Si)try{const X=_.parse(W);if(X!=null)return X}catch{}}},jo=new De.O(()=>[...Si,di]),Vi={id:q.F.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(W,_)=>X=>X.pipe((0,Jn.T)(de=>Vi.transformer(W,_)(de))),transformer:W=>_=>_.map(X=>po(X,W))};function po(W,_){if(!_.source)return W;const X=(0,_s.findField)(W,_.source);if(!X)return W;const de=jo.getIfExists(_.format??No.Auto);if(!de)throw new Error("unkonwn extractor");const Ce=W.length,Ae=[],$e=new Map;for(let Ze=0;Ze<Ce;Ze++){let mt=X.values[Ze];if((0,p.isString)(mt))try{mt=de.parse(mt)}catch{mt={}}if(mt!=null){if(_.format===No.JSON&&_.jsonPaths&&_.jsonPaths?.length>0){const Et={},Pt=_.jsonPaths.filter($t=>$t.path);Pt.length>0&&(Pt.forEach($t=>{const Bt=$t.alias&&$t.alias.length>0?$t.alias:$t.path;Et[Bt]=(0,p.get)(mt,$t.path)??"Not Found"}),mt=Et)}for(const[Et,Pt]of Object.entries(mt)){let $t=$e.get(Et);$t==null&&($t=new Array(Ce).fill(void 0),$e.set(Et,$t),Ae.push(Et)),$t[Ze]=Pt}}}const Ye=Ae.map(Ze=>{const mt=$e.get(Ze),Et={name:Ze,values:mt,type:mt?(0,go.oE)(mt.find(Pt=>Pt!=null)):k.PU.other,config:{}};return H.$.featureToggles.extractFieldsNameDeduplication&&(Et.name=(0,fe.fk)(Et,W)),Et});if(_.keepTime){const Ze=(0,_s.findField)(W,"Time")||(0,_s.findField)(W,"time");Ze&&Ye.unshift(Ze)}return _.replace||Ye.unshift(...W.fields),{...W,fields:Ye}}const Tl={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},ol=({input:W,options:_,onChange:X})=>{const de=mt=>{X({..._,source:mt})},Ce=mt=>{X({..._,format:mt?.value})},Ae=mt=>{X({..._,jsonPaths:mt})},$e=()=>{_.replace&&(_.keepTime=!1),X({..._,replace:!_.replace})},Ye=()=>{X({..._,keepTime:!_.keepTime})},Ze=jo.selectOptions(_.format?[_.format]:void 0);return a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{label:"Source",labelWidth:16},a.createElement(ks.O,{context:{data:W},value:_.source??"",onChange:de,item:Tl}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Format",labelWidth:16},a.createElement(re.l6,{value:Ze.current[0],options:Ze.options,onChange:Ce,width:24,placeholder:"Auto"}))),_.format==="json"&&a.createElement(sl,{options:_.jsonPaths??[],onChange:Ae}),a.createElement(he.C,null,a.createElement(G.I,{label:"Replace all fields",labelWidth:16},a.createElement(nn.K,{value:_.replace??!1,onChange:$e}))),_.replace&&a.createElement(he.C,null,a.createElement(G.I,{label:"Keep time",labelWidth:16},a.createElement(nn.K,{value:_.keepTime??!1,onChange:Ye}))))},_i={id:q.F.extractFields,editor:ol,transformation:Vi,name:Vi.name,description:"Parse fields from content (JSON, labels, etc).",categories:new Set([f.m.Reformat]),help:ue(q.F.extractFields).helperDocs};var zi=e(51986);const wo={id:q.F.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(W,_)=>X=>X.pipe((0,Jn.T)(de=>wo.transformer(W,_)(de))),transformer:W=>_=>!_||!_.length?_:[il(W,_)]};function il(W,_){if(!W.value?.length)return ki("No value labele configured");const X=(0,xe.aG)(_);if(X.size<1)return ki("No labels in result");if(!X.has(W.value))return ki("Value label not found");let de=W.join?.length?W.join:Array.from(X);de=de.filter(Pt=>Pt!==W.value);const Ce=new Set,Ae=new Map,$e={};for(const Pt of _)for(const $t of Pt.fields)if($t.labels&&$t.type!==k.PU.time){const Bt=de.map(Ha=>$t.labels[Ha]),At=Bt.join(",");let Wt=Ae.get(At);Wt||(Wt={keys:Bt,values:{}},Ae.set(At,Wt));const En=$t.labels[W.value],wa=$t.values,Ja=Wt.values[En];Ja?Wt.values[En]=Ja.concat(wa):Wt.values[En]=wa,$e[En]||($e[En]=$t),Ce.add(En)}const Ye=Array.from(Ce),Ze=de.map(()=>[]),mt=Ye.map(()=>[]);for(const Pt of Ae.values()){let $t=-1,Bt=!1;for(;!Bt;){$t++,Bt=!0;for(let At=0;At<de.length;At++)Ze[At].push(Pt.keys[At]);for(let At=0;At<Ye.length;At++){const Wt=Ye[At],En=Pt.values[Wt]??[];mt[At].push(En[$t]),En.length>$t+1&&(Bt=!1)}}}const Et={fields:[],length:mt[0].length};for(let Pt=0;Pt<de.length;Pt++)Et.fields.push({name:de[Pt],config:{},type:k.PU.string,values:Ze[Pt]});for(let Pt=0;Pt<Ye.length;Pt++){const $t=$e[Ye[Pt]];Et.fields.push({name:Ye[Pt],config:{},type:$t.type??k.PU.number,values:mt[Pt]})}return Et}function ki(W){return{meta:{notices:[{severity:"error",text:W}]},fields:[{name:"Error",type:k.PU.string,config:{},values:[W]}],length:0}}function Ql({input:W,options:_,onChange:X}){const de=(0,a.useMemo)(()=>{let Ze;const mt=(0,xe.aG)(W),Et=Array.from(mt).map(En=>({label:En,value:En}));let Pt=Et.find(En=>En.value===_.value);!Pt&&_.value&&(Pt={label:`${_.value} (not found)`,value:_.value},Et.push(Pt)),W.length?mt.size===0&&(Ze=a.createElement(wt.F,{title:"No labels found"},"The input does not contain any labels")):Ze=a.createElement(wt.F,{title:"No input found"},"No input (or labels) found"),mt.delete(_.value);const $t=Array.from(mt).map(En=>({label:En,value:En}));let Bt=$t;const At=!!_.join?.length;let Wt="Join";return At?Bt=$t.filter(En=>!_.join.includes(En.value)):Wt=$t.map(En=>En.value).join(", "),{warn:Ze,valueOptions:Et,valueOption:Pt,joinOptions:$t,addOptions:Bt,addText:Wt,hasJoin:At,key:Date.now()}},[_,W]),Ce=(Ze,mt)=>{if(!_.join)return;const Et=_.join.slice();if(mt)Et[Ze]=mt;else if(Et.splice(Ze,1),!Et.length){X({..._,join:void 0});return}const Pt=new Set(Et);_.value&&Pt.delete(_.value),X({..._,join:Array.from(Pt)})},Ae=Ze=>{const mt=Ze?.value;if(!mt)return;const Et=_.join?_.join.slice():[];Et.push(mt),X({..._,join:Et})},$e=10,Ye="No labels found";return a.createElement("div",null,de.warn,a.createElement(he.C,null,a.createElement(G.I,{error:"required",invalid:!_.value?.length,label:"Value",labelWidth:$e,tooltip:"Select the label indicating the values name"},a.createElement(re.l6,{options:de.valueOptions,value:de.valueOption,onChange:Ze=>X({..._,value:Ze.value}),noOptionsMessage:Ye}))),de.hasJoin?_.join.map((Ze,mt)=>a.createElement(he.C,{key:Ze+mt},a.createElement(G.I,{label:"Join",labelWidth:$e,error:"Unable to join by the value label",invalid:Ze===_.value},a.createElement(sa.Gy,null,a.createElement(re.l6,{options:de.joinOptions,value:de.joinOptions.find(Et=>Et.value===Ze),isClearable:!0,onChange:Et=>Ce(mt,Et?.value),noOptionsMessage:Ye}),!!(de.addOptions.length&&mt===_.join.length-1)&&a.createElement(zi.i,{icon:"plus",label:"",options:de.addOptions,onChange:Ae,variant:"secondary"}))))):a.createElement(a.Fragment,null,!!de.addOptions.length&&a.createElement(he.C,null,a.createElement(G.I,{label:"Join",labelWidth:$e},a.createElement(re.l6,{options:de.addOptions,placeholder:de.addText,onChange:Ae,noOptionsMessage:Ye})))))}const Hi={id:wo.id,editor:Ql,transformation:wo,name:wo.name,description:wo.description,state:Xe.pn.beta,categories:new Set([f.m.Combine]),help:ue(wo.id).helperDocs};var Yr=e(84350),Mo=e(69862),rr=e(65474),ji=e(67140);const Mi={id:q.F.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:W=>_=>_.pipe((0,Mo.Z)(X=>(0,rr.H)(ti(X,W))))};async function ti(W,_){const X=ee.sJ.get(ie.Ct.byName).get(_?.lookupField),de=await(0,ji.q3)(_?.gazetteer??ji.fx);return de.frame?ui(W,de,X):Promise.reject("missing frame in gazetteer")}function ui(W,_,X){const de=_.frame()?.fields;return de?W.map(Ce=>{const Ae=Ce.length,$e=[];for(const Ye of Ce.fields)if($e.push(Ye),X(Ye,Ce,W)){const Ze=Ye.values,mt=[];for(const Et of de){const Pt=new Array(Ae);mt.push(Pt),$e.push({...Et,values:Pt})}for(let Et=0;Et<_.count;Et++){const Pt=_.find(Ze[Et]);if(Pt?.index!=null)for(let $t=0;$t<de.length;$t++)mt[$t][Et]=de[$t].values[Pt.index]}}return{...Ce,fields:$e}}):W}const ll={settings:{width:30,filter:W=>W.type===k.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Yl={settings:{}},Sl=({input:W,options:_,onChange:X})=>{const de=(0,a.useCallback)(Ae=>{X({..._,lookupField:Ae})},[X,_]),Ce=(0,a.useCallback)(Ae=>{X({..._,gazetteer:Ae})},[X,_]);return a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{label:"Field",labelWidth:12},a.createElement(ks.O,{context:{data:W},value:_?.lookupField??"",onChange:de,item:ll}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Lookup",labelWidth:12},a.createElement(Yr.G,{value:_?.gazetteer??"",context:{data:W},item:Yl,onChange:Ce}))))},Ml={id:q.F.fieldLookup,editor:Sl,transformation:Mi,name:Mi.name,description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:Xe.pn.alpha,categories:new Set([f.m.PerformSpatialOperations]),help:ue(q.F.fieldLookup).helperDocs};var xl=e(35602),mi=e(64586);const fi=(W,_,X=[])=>(_===0?X.push(W):W.forEach(de=>{fi(de,_-1,X)}),X);function Qe(W){const _=W[0].length,X=W.length,de=new Map;for(let Ce=0;Ce<_;Ce++){let Ae=de;for(let $e=0;$e<X;$e++){let Ye=W[$e][Ce],Ze=Ae.get(Ye);Ze==null&&(Ze=$e===X-1?[]:new Map,Ae.set(Ye,Ze)),Ae=Ze}Ae.push(Ce)}return fi(de,X)}const qe={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function et(W,_,X){return _.map((de,Ce)=>W.withNames?`${de}${W.separator1}${X[Ce]}`:X[Ce]).join(W.separator2)}function ct(W,_){const X={};return W.forEach((de,Ce)=>{X[de]=String(_[Ce])}),X}const Ot={id:q.F.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{keepFields:!1},operator:(W,_)=>X=>X.pipe((0,Jn.T)(de=>Ot.transformer(W,_)(de))),transformer:(W,_)=>{const X=(0,xl.R)(_,{names:W.fields});if(!X)return mi.W.transformer({},_);const de=(0,ee.NS)(X);return Ce=>Ce.length?Ft(Ce[0],de,W):Ce}};function Ft(W,_,X){const de=W.fields.filter(Ye=>_(Ye,W,[W]));if(!de.length)return[W];const Ce=de.map(Ye=>Ye.values),Ae=de.map(Ye=>Ye.name),$e={...qe,...X?.naming};return Qe(Ce).map(Ye=>{let Ze=W.name,mt={};if($e.asLabels)mt=ct(Ae,de.map((Pt,$t)=>Ce[$t][Ye[0]]));else{let Pt=et($e,Ae,de.map(($t,Bt)=>Ce[Bt][Ye[0]]));$e?.append&&W.name&&(Pt=`${W.name} ${Pt}`),Ze=Pt}let Et=W.fields;if(!X?.keepFields){const Pt=new Set(Ae);Et=W.fields.filter($t=>!Pt.has($t.name))}return{name:Ze,meta:W.meta,length:Ye.length,fields:Et.map(Pt=>{const $t=Pt.values,Bt=Array(Ye.length);for(let At=0;At<Ye.length;At++)Bt[At]=$t[Ye[At]];return{name:Pt.name,type:Pt.type,config:Pt.config,labels:{...Pt.labels,...mt},values:Bt}})}})}function zt({input:W,options:_,onChange:X}){const de=(0,Hs.sE)(W),Ce=(0,Hs.m3)(de),Ae=(0,a.useMemo)(()=>{const $t=new Set(_.fields);return $t.size<1?Ce:Ce.filter(Bt=>!$t.has(Bt.value))},[Ce,_]),$e=(0,a.useCallback)($t=>{if(!$t.value)return;const Bt=new Set(_.fields);Bt.add($t.value),X({..._,fields:[...Bt]})},[X,_]);let Ye;($t=>{$t[$t.asLabels=0]="asLabels",$t[$t.frameName=1]="frameName"})(Ye||(Ye={}));const Ze=[{label:"As label",value:0},{label:"As frame name",value:1}],mt=[{label:"Yes",value:!0},{label:"No",value:!1}],Et=(0,a.useCallback)($t=>{if(!$t)return;const Bt=new Set(_.fields);Bt.delete($t),X({..._,fields:[...Bt]})},[X,_]);if(W.length>1)return a.createElement(Tr.P,null,"Partition by values only works with a single frame.");const Pt=[...new Set(_.fields)];return a.createElement("div",null,a.createElement(he.C,null,a.createElement(G.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(sa.Gy,null,Pt.map($t=>a.createElement(oe.$n,{key:$t,icon:"times",variant:"secondary",size:"md",onClick:()=>Et($t)},$t)),Ae.length&&a.createElement(zi.i,{variant:"secondary",size:"md",options:Ae,onChange:$e,label:"Select field",icon:"plus"})))),a.createElement(he.C,null,a.createElement(G.I,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},a.createElement(ne.z,{options:Ze,value:_.naming?.asLabels===void 0||_.naming.asLabels?0:1,onChange:$t=>X({..._,naming:{..._.naming,asLabels:$t===0}})}))),a.createElement(he.C,null,a.createElement(G.I,{tooltip:"Keeps the partition fields in the frames.",label:"Keep fields",labelWidth:16},a.createElement(ne.z,{options:mt,value:_.keepFields,onChange:$t=>X({..._,keepFields:$t})}))))}const sn={id:q.F.partitionByValues,editor:zt,transformation:Ot,name:Ot.name,description:Ot.description,state:Xe.pn.alpha,categories:new Set([f.m.Reformat]),help:ue(q.F.partitionByValues).helperDocs};var un=e(41260),yn=e(37471),$n=e(73060),ea=(W=>(W.TimeSeriesWide="wide",W.TimeSeriesLong="long",W.TimeSeriesMulti="multi",W.TimeSeriesMany="many",W))(ea||{});function Xn(W){if(!Array.isArray(W)||W.length===0)return W;const _=[];for(const X of ra(W)){const de=X.fields[0];if(!de||de.type!==k.PU.time)continue;const Ce=[],Ae=[];for(const $e of X.fields)switch($e.type){case k.PU.number:case k.PU.boolean:Ce.push($e);break;case k.PU.string:Ae.push($e);break}for(const $e of Ce)if(Ae.length){const Ye=new Map;for(let Ze=0;Ze<X.length;Ze++){const mt=de.values[Ze],Et=$e.values[Ze];if(Et===void 0||mt==null)continue;const Pt=Ae.map(Bt=>Bt.values[Ze]).join("/");let $t=Ye.get(Pt);if(!$t){$t={key:Pt,time:[],value:[],labels:{}};for(const Bt of Ae)$t.labels[Bt.name]=Bt.values[Ze];Ye.set(Pt,$t)}$t.time.push(mt),$t.value.push(Et)}for(const Ze of Ye.values())_.push({name:X.name,refId:X.refId,meta:{...X.meta,type:un.m.TimeSeriesMulti},fields:[{...de,values:Ze.time},{...$e,values:Ze.value,labels:Ze.labels}],length:Ze.time.length})}else _.push({name:X.name,refId:X.refId,meta:{...X.meta,type:un.m.TimeSeriesMulti},fields:[de,$e],length:X.length})}return _}function ra(W){if(!Array.isArray(W)||W.length===0)return W;const _=[];for(const X of W){let de;const Ce=[],Ae={},$e={},Ye={},Ze={};for(let At=0;At<X.fields.length;At++){const Wt=X.fields[At];switch(Wt.type){case k.PU.string:case k.PU.boolean:Wt.name in Ze||(Ze[Wt.name]=At,$e[Wt.name]=!0);break;case k.PU.time:if(!de){de=Wt;break}default:if(Wt.name in Ae){const Ja=Ae[Wt.name];if(Wt.type!==Ja)continue}else Ae[Wt.name]=Wt.type,Ce.push(Wt.name);const En=JSON.stringify(Wt.labels),wa=Ye[En];if(wa!==void 0?wa.push(At):Ye[En]=[At],Wt.labels!=null)for(const Ja in Wt.labels)$e[Ja]=!0}}if(!de)continue;const mt=[],Et=[],Pt=[],$t=[];for(let At=0;At<X.length;At++)mt.push({time:de.values[At],wideRowIndex:At});for(const At in Ye)Et.push(At);for(const At in $e)Pt.push(At);for(const At in Ze)$t.push(At);mt.sort((At,Wt)=>At.time-Wt.time),Et.sort(),Pt.sort(),Ce.sort();const Bt=new yn.k({...X,meta:{...X.meta,type:un.m.TimeSeriesLong},fields:[{name:de.name,type:de.type}]});for(const At of Ce)Bt.addField({name:At,type:Ae[At]});for(const At of Pt)Bt.addField({name:At,type:k.PU.string});for(const At of mt){const{time:Wt,wideRowIndex:En}=At;for(const wa of Et){const Ja={};for(const Va of $t)Ja[Va]=X.fields[Ze[Va]].values[En];let Ha=0;for(const Va of Ye[wa]){const zr=X.fields[Va];if(Ha++===0&&zr.labels!=null)for(const Di in zr.labels)Ja[Di]=zr.labels[Di];Ja[zr.name]=zr.values[En]}Ja[de.name]=Wt,Bt.add(Ja)}}_.push(Bt)}return _}function Ua(W){return Ft(W,X=>X.type===k.PU.string).map(X=>(X.meta||(X.meta={}),X.meta.type=un.m.TimeSeriesMulti,X))}const Ta={id:q.F.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(W,_)=>X=>X.pipe((0,Jn.T)(de=>Ta.transformer(W,_)(de))),transformer:W=>{const _=W?.format??"wide";if(_==="many"||_==="multi")return Xn;if(_==="long")return ra;const X=ee.sJ.get(ie.Ct.firstTimeField).get({});return de=>{if(!de.length)return[];const Ce=[];for(const $e of de)$e.meta?.type===un.m.TimeSeriesLong?Ua($e).forEach(Ye=>Ce.push(Ye)):Ce.push($e);const Ae=(0,$n.Fd)({frames:Ce,joinBy:X,keepOriginIndices:!0});return Ae?(Ae.meta||(Ae.meta={}),Ae.meta.type=un.m.TimeSeriesWide,[Ae]):[]}}},ja={label:"Wide time series",value:ea.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},Sa={label:"Multi-frame time series",value:ea.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},za={label:"Long time series",value:ea.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},ka=[ja,Sa,za];function Ia(W){const{options:_,onChange:X}=W,de=(0,Mt.of)(hs),Ce=(0,a.useCallback)(Ae=>{X({..._,format:Ae.value})},[X,_]);return a.createElement(a.Fragment,null,a.createElement(he.C,null,a.createElement(G.I,{label:"Format",labelWidth:12},a.createElement(re.l6,{width:35,options:ka,value:ka.find(Ae=>Ae.value===ea.TimeSeriesMulti&&_.format===ea.TimeSeriesMany?!0:Ae.value===_.format)||ka[0],onChange:Ce,className:"flex-grow-1"}))),a.createElement(he.C,null,a.createElement(G.I,{label:"Info",labelWidth:12},a.createElement("div",{className:de.info},(ka.find(Ae=>Ae.value===_.format)||ka[0]).info))))}const hs=W=>({info:(0,it.css)`
    margin-left: 20px;
  `}),Is={id:Ta.id,editor:Ia,transformation:Ta,name:Ta.name,description:Ta.description,categories:new Set([f.m.Reformat]),help:ue(Ta.id).helperDocs};var Ks=e(66648),Es=e(48817),Gs=(W=>(W.linear="linear",W.polynomial="polynomial",W))(Gs||{});const Ss={predictionCount:100,modelType:"linear",degree:2},hr={id:q.F.regression,name:"Regression analysis",operator:(W,_)=>X=>X.pipe((0,Jn.T)(de=>hr.transformer(W,_)(de))),transformer:(W,_)=>X=>{const{predictionCount:de,modelType:Ce,degree:Ae}={...Ss,...W};if(X.length===0)return X;const $e=ee.sJ.get(ie.Ct.byName).get(W.yFieldName),Ye=ee.sJ.get(ie.Ct.byName).get(W.xFieldName);let Ze,mt,Et;for(const Va of X){const zr=Va.fields.find(Di=>$e(Di,Va,X));if(zr){mt=zr;const Di=Va.fields.find(Bp=>Ye(Bp,Va,X));if(Di){Ze=Di,Et=Va;break}else throw"X and Y fields must be part of the same frame"}}if(!Ze||!mt)return X;let Pt=Ze.values[0],$t=Ze.values[0];for(let Va=1;Va<Ze.values.length;Va++)Ze.values[Va]<Pt&&(Pt=Ze.values[Va]),Ze.values[Va]>$t&&($t=Ze.values[Va]);const Bt=($t-Pt)/(de-1),At=[...[...Array(de-1).keys()].map((Va,zr)=>zr*Bt+Pt),$t],Wt=Ze.type===k.PU.time?Pt:0,En=[],wa=[];for(let Va=0;Va<Ze.values.length;Va++)mt.values[Va]!==null&&!isNaN(mt.values[Va])&&(wa.push(Ze.values[Va]-Wt),En.push(mt.values[Va]));let Ja;switch(Ce){case"linear":Ja=new Es.X(wa,En);break;case"polynomial":Ja=new Ks.Y(wa,En,Ae);break;default:return X}const Ha={name:`${Ce} regression`,length:At.length,fields:[{name:Ze.name,type:Ze.type,values:At,config:{}},{name:`${(0,fe.Ct)(mt,Et,X)} predicted`,type:mt.type,values:At.map(Va=>Ja.predict(Va-Wt)),config:{}}]};return[...X,Ha]}},Or={editor:ks.O,id:"",name:"",settings:{width:24,isClearable:!1}},js=20,vr=({input:W,options:_,onChange:X})=>{const de=[{label:"Linear",value:Gs.linear},{label:"Polynomial",value:Gs.polynomial}];return(0,a.useEffect)(()=>{let Ce,Ae;if(!_.xFieldName){const $e=ee.sJ.get(ie.Ct.firstTimeField).get({});for(const Ye of W)if(Ce=Ye.fields.find(Ze=>$e(Ze,Ye,W)),Ce)break;if(!Ce){const Ye=ee.sJ.get(ie.Ct.numeric).get({});for(const Ze of W)if(Ce=Ze.fields.find(mt=>Ye(mt,Ze,W)),Ce)break}}if(!_.yFieldName){const $e=ee.sJ.get(ie.Ct.numeric).get({});for(const Ye of W)if(Ae=Ye.fields.find(Ze=>$e(Ze,Ye,W)&&Ze!==Ce),Ae)break}Ce&&Ae&&X({..._,xFieldName:Ce.name,yFieldName:Ae.name})}),a.createElement(a.Fragment,null,a.createElement(G.I,{labelWidth:js,label:"X field"},a.createElement(ks.O,{context:{data:W},value:_.xFieldName??"",item:Or,onChange:Ce=>{X({..._,xFieldName:Ce})}})),a.createElement(G.I,{labelWidth:js,label:"Y field"},a.createElement(ks.O,{context:{data:W},value:_.yFieldName??"",item:Or,onChange:Ce=>{X({..._,yFieldName:Ce})}})),a.createElement(G.I,{labelWidth:js,label:"Model type"},a.createElement(re.l6,{value:_.modelType??Ss.modelType,onChange:Ce=>{X({..._,modelType:Ce.value??Ss.modelType})},options:de})),a.createElement(G.I,{labelWidth:js,label:"Predicted points",tooltip:"Number of X,Y points to predict"},a.createElement(As.Q,{value:_.predictionCount??Ss.predictionCount,onChange:Ce=>{X({..._,predictionCount:Ce})}})),_.modelType===Gs.polynomial&&a.createElement(G.I,{labelWidth:js,label:"Degree"},a.createElement(re.l6,{value:_.degree??Ss.degree,options:[{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5}],onChange:Ce=>{X({..._,degree:Ce.value})}})))},ro={id:q.F.regression,editor:vr,transformation:hr,name:hr.name,description:hr.description,categories:new Set([f.m.CalculateNewFields]),help:ue(q.F.regression).helperDocs},br={id:q.F.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:W=>_=>_.pipe((0,Jn.T)(X=>X.map(de=>fr(W,de))))};function fr(W,_){const X=pn(_,W.mappings??[],!0),{nameField:de,valueField:Ce}=X;if(!de||!Ce)return _;const Ae=[];for(let $e=0;$e<de.values.length;$e++){const Ye=de.values[$e],Ze=Ce.values[$e],mt=Jt(_,$e,X),Et=cr(_,$e,X),Pt={name:`${Ye}`,type:Ce.type,values:[Ze],config:mt,labels:Et};Ae.push(Pt)}return{fields:Ae,length:1}}function cr(W,_,X){const de={...X.nameField.labels};for(let Ce=0;Ce<W.fields.length;Ce++){const Ae=W.fields[Ce],$e=(0,fe.Ct)(Ae,W),Ye=X.index[$e];if(Ye.handler&&Ye.handler.key!==hn.Label)continue;const Ze=Ae.values[_];Ze!=null&&(de[$e]=Ze)}return de}function oa({input:W,options:_,onChange:X}){return W.length===0?null:a.createElement("div",null,a.createElement(Mn,{frame:W[0],mappings:_.mappings??[],onChange:de=>X({..._,mappings:de}),withNameAndValue:!0}))}const La={id:br.id,editor:oa,transformation:br,name:br.name,description:br.description,state:Xe.pn.beta,categories:new Set([f.m.Reformat]),help:ue(br.id).helperDocs};var es=e(52622),Ds=e(61983),$s=e(9581),or=e(96606),er=e(31484),Os=e(78134);const ho={id:q.F.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:W=>_=>_.pipe((0,Mo.Z)(X=>(0,rr.H)(gi(X,W))))};function vo(W){return W.action===$s.dy.Modify&&W.modify?.op===$s.YD.LineBuilder}async function gi(W,_){const X=await(0,er.nE)(_.source);if(vo(_)){const de=await(0,er.nE)(_.modify?.target);return W.map(Ce=>{const Ae=(0,er.FM)(Ce,X),$e=(0,er.FM)(Ce,de);if(Ae.field&&$e.field){const Ye=[...Ce.fields],Ze=(0,or.XR)(Ae.field,$e.field),mt=Ye[0];return mt.type===k.PU.geo&&mt!==Ae.field&&mt!==$e.field?Ye[0]=(0,or.RA)(mt,Ze):Ye.unshift(Ze),{...Ce,fields:Ye}}return Ce})}return W.map(de=>{let Ce=(0,er.FM)(de,X);if(Ce.field){if(_.action===$s.dy.Modify){switch(_.modify?.op){case $s.YD.AsLine:let $e=Ce.field.name;return(!$e||$e==="Point")&&($e="Line"),{...de,length:1,fields:[{...Ce.field,name:$e,type:k.PU.geo,values:[(0,Os.tt)(Ce.field)]}]}}return de}const Ae=Ce.derived?[Ce.field,...de.fields]:de.fields.slice(0);if(_.action===$s.dy.Calculate&&(Ae.push((0,Os.pp)(Ce.field,_.calculate??{})),Ce.derived=!0),Ce.derived)return{...de,fields:Ae}}return de})}const xo=(W,_)=>{const X=_.options??{};W.addSelect({path:"action",name:"Action",description:"",defaultValue:$s.dy.Prepare,settings:{options:[{value:$s.dy.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:$s.dy.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:$s.dy.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),X.action===$s.dy.Calculate?W.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:$s.kD.Heading,settings:{options:[{value:$s.kD.Heading,label:"Heading"},{value:$s.kD.Area,label:"Area"},{value:$s.kD.Distance,label:"Distance"}]}}):X.action===$s.dy.Modify&&W.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:$s.YD.AsLine,settings:{options:[{value:$s.YD.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:$s.YD.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),vo(X)?(W.addNestedOptions({category:["Source"],path:"source",build:(de,Ce)=>{const Ae=X.source??{mode:es.aG.Auto};(0,Ds.G)("Point","",de,Ae)}}),W.addNestedOptions({category:["Target"],path:"modify",build:(de,Ce)=>{const Ae=X.modify?.target??{mode:es.aG.Auto};(0,Ds.G)("Point","target.",de,Ae)}})):(0,Ds.G)("Location","source.",W,X.source)},Vs=W=>{(0,a.useEffect)(()=>{if(!W.options.source?.mode){const de=ft(xo);W.onChange({...de,...W.options}),console.log("geometry useEffect",de)}},[]);const _=Oo((0,Mt.$j)()),X=ot(W,xo);return a.createElement("div",null,a.createElement("div",null,X.items.map(de=>de.render())),a.createElement("div",null,X.categories.map(de=>a.createElement("div",{key:de.props.id,className:_.wrap},a.createElement("h5",null,de.props.title),a.createElement("div",{className:_.item},de.items.map(Ce=>Ce.render()))))))},Oo=W=>({wrap:(0,it.css)`
      margin-bottom: 20px;
    `,item:(0,it.css)`
      border-left: 4px solid ${W.colors.border.strong};
      padding-left: 10px;
    `}),Nr={id:q.F.spatial,editor:Vs,transformation:ho,name:ho.name,description:ho.description,state:Xe.pn.alpha,categories:new Set([f.m.PerformSpatialOperations]),help:ue(q.F.spatial).helperDocs};var Kr=e(19845);const pi={id:q.F.timeSeriesTable,name:"Time series to table",description:"Convert time series data to table rows so that they can be viewed in tabular or sparkline format.",defaultOptions:{},isApplicable:W=>{for(const _ of W)if((0,Kr.aH)(_))return sr.M.Applicable;return sr.M.NotApplicable},isApplicableDescription:"The Time series to table transformation requires at least one time series frame to function. You currently have none.",operator:W=>_=>_.pipe((0,Jn.T)(X=>$c(W,X)))};function $c(W,_){const X={},de={},Ce=[];let Ae=Xl(_);for(const $e of Object.keys(Ae)){const Ye=_.filter(mt=>mt.refId===$e);X[$e]={},de[$e]={};const Ze=[];Ye.forEach(mt=>{mt.fields.forEach(Et=>{Et.type===k.PU.number&&Et.labels&&Object.keys(Et.labels).forEach(Pt=>{Ze.includes(Pt)||(de[$e][Pt]=Jl(Pt,k.PU.string),Ze.push(Pt))})})});for(let mt=0;mt<Ye.length;mt++){const Et=Ye[mt];let Pt=null,$t=W[$e]?.timeField;if($t&&$t.length>0?Pt=Et.fields.find(Bt=>Bt.name===$t):Pt=Et.fields.find(Bt=>(0,Kr.hF)(Bt)),!(0,Kr.aH)(Et)){Ce.push(Et);continue}for(const Bt of Et.fields){if(Bt.type!==k.PU.number)continue;const At=W[$e]?.stat??lt.gy.lastNotNull,Wt=(0,lt.Nw)({field:Bt,reducers:[At]})[At]??null,En=new yn.k;Pt!==void 0&&(En.addField(Pt),En.addField(Bt),X[$e][`Trend #${$e}`]===void 0&&(X[$e][`Trend #${$e}`]=Jl(`Trend #${$e}`,k.PU.frame)),X[$e][`Trend #${$e}`].values.push({...En,value:Wt,length:Bt.values.length})),Ze.forEach(wa=>{de[$e][wa].values.push(Bt.labels?.[wa]??"")})}}}for(const $e of Object.keys(Ae)){const Ye={},Ze=new yn.k;Ze.refId=$e;const mt=de[$e];if(mt!==void 0)for(const[Pt,$t]of Object.entries(mt))Ye[Pt]===void 0&&(Ye[Pt]=$t);for(const Pt of Object.values(Ye))Ze.addField(Pt);const Et=X[$e];for(const Pt of Object.values(Et))Ze.addField(Pt);Ze.fields.length>0&&Ce.push(Ze)}return Ce}function Jl(W,_){return{name:W,type:_,config:{},values:[]}}function Xl(W){let _={};for(const X of W)X.refId!==void 0&&(_[X.refId]===void 0?_[X.refId]=1:_[X.refId]++);return _}function Vc({input:W,options:_,onChange:X}){const de=Xl(W),Ce=(0,a.useCallback)((Ye,Ze)=>{const mt=Ze?.value!==void 0?Ze.value:"";X({..._,[Ye]:{..._[Ye],timeField:mt}})},[X,_]),Ae=(0,a.useCallback)((Ye,Ze)=>{const mt=Ze[0];mt&&(0,lt.Em)(mt)&&X({..._,[Ye]:{..._[Ye],stat:mt}})},[X,_]);let $e=[];for(const Ye of Object.keys(de)){const Ze={},mt=[];for(const Et of W)if(Et.refId===Ye)for(const Pt of Et.fields)(0,Kr.hF)(Pt)&&(Ze[Pt.name]=Pt);for(const Et of Object.values(Ze)){const{name:Pt}=Et;mt.push({label:Pt,value:Pt})}$e.push(a.createElement(he.C,{key:Ye},a.createElement(G.I,null,a.createElement(Xa.c,null,`Trend #${Ye}`)),a.createElement(G.I,{label:"Time field",tooltip:"The time field that will be used for the time series. If not selected the first found will be used."},a.createElement(re.l6,{onChange:Ce.bind(null,Ye),options:mt,value:_[Ye]?.timeField,isClearable:!0})),a.createElement(G.I,{label:"Stat",tooltip:"The statistic that should be calculated for this time series."},a.createElement(Ct.S,{stats:[_[Ye]?.stat??lt.gy.lastNotNull],onChange:Ae.bind(null,Ye),filterOptions:Et=>Et.id!==lt.gy.allValues&&Et.id!==lt.gy.uniqueValues}))))}return a.createElement(a.Fragment,null,$e)}const Zl={id:pi.id,editor:Vc,transformation:pi,name:pi.name,description:pi.description,state:Xe.pn.beta,help:ue(pi.id).helperDocs},_c=()=>[Ho,ii,Wi,Po,Be,fo,Gr,Ti,Xs,Rs,Ts,jn,al,wi,no,La,va,Is,Do,Nr,Ml,_i,_t,To,nl,Hi,sn,...H.$.featureToggles.formatString?[mo]:[],...H.$.featureToggles.regressionTransformation?[ro]:[],...H.$.featureToggles.groupToNestedTableTransformation?[yr]:[],Bo,Zl];var $r=e(67278);function zc(){return new $r.c(new URL(e.p+e.u(7887),e.b))}function kc(){return[{id:"kusto",name:"kusto",init:zc}]}var os=e(1503),ni=e(63329),Dr=e(58476),ql=e(25213),Ir=e(14110),oo=e(66602),Pr=e(93218),ec=e(71678),Hc=e(17464),Ar=e(39070),tc=e(19361),cs=e(44836),jc=e(53153),Gc=e(87570),Qc=e(4691),Ol=e(20851),Yc=e(58649);const Er=()=>{const W=!!z.Ay.oauth;return{saml:{bgColor:"#464646",enabled:z.Ay.samlEnabled,name:z.Ay.samlName||Yc.En,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:W&&!!z.Ay.oauth.google,name:z.Ay.oauth?.google?.name||"Google",icon:z.Ay.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:W&&!!z.Ay.oauth.azuread,name:z.Ay.oauth?.azuread?.name||"Microsoft",icon:z.Ay.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:W&&!!z.Ay.oauth.github,name:z.Ay.oauth?.github?.name||"GitHub",icon:z.Ay.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:W&&!!z.Ay.oauth.gitlab,name:z.Ay.oauth?.gitlab?.name||"GitLab",icon:z.Ay.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:W&&!!z.Ay.oauth.grafana_com,name:z.Ay.oauth?.grafana_com?.name||"Grafana.com",icon:z.Ay.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:W&&!!z.Ay.oauth.okta,name:z.Ay.oauth?.okta?.name||"Okta",icon:z.Ay.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:W&&!!z.Ay.oauth.generic_oauth,name:z.Ay.oauth?.generic_oauth?.name||"OAuth",icon:z.Ay.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},gr=W=>({button:(0,it.css)({color:"#d8d9da",position:"relative"}),buttonIcon:(0,it.css)({position:"absolute",left:W.spacing(1),top:"50%",transform:"translateY(-50%)"}),divider:{base:(0,it.css)({color:W.colors.text.primary,display:"flex",marginBottom:W.spacing(1),justifyContent:"space-between",textAlign:"center",width:"100%"}),line:(0,it.css)({width:100,height:10,borderBottom:`1px solid ${W.colors.text}`})}}),Jc=()=>{const W=(0,Mt.of)(gr);return a.createElement(a.Fragment,null,a.createElement("div",{className:W.divider.base},a.createElement("div",null,a.createElement("div",{className:W.divider.line})),a.createElement("div",null,a.createElement("span",null,!z.Ay.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:W.divider.line}))),a.createElement("div",{className:"clearfix"}))};function Xc(W,_,X){return(0,it.cx)(_.button,(0,it.css)({backgroundColor:W.bgColor,color:X.colors.getContrastText(W.bgColor),"&:hover":{backgroundColor:X.colors.emphasize(W.bgColor,.15),boxShadow:X.shadows.z1}}))}const nc=()=>{const W=(0,p.pickBy)(Er(),Ce=>Ce.enabled),_=Object.keys(W).length>0,X=(0,Mt.$j)(),de=(0,Mt.of)(gr);return _?a.createElement(sa.gW,null,a.createElement(Jc,null),Object.entries(W).map(([Ce,Ae])=>{const $e=Ae.name;return a.createElement(oe.z9,{key:Ce,className:Xc(Ae,de,X),href:`login/${Ae.hrefName?Ae.hrefName:Ce}`,target:"_self",fullWidth:!0},a.createElement(Bs.I,{className:de.buttonIcon,name:Ae.icon}),a.createElement(cs.x6,{i18nKey:"login.services.sing-in-with-prefix"},"Sign in with ",{serviceName:$e}))})):null},Zc=()=>{const W=(0,z.zj)().verifyEmailEnabled?`${(0,z.zj)().appSubUrl}/verify`:`${(0,z.zj)().appSubUrl}/signup`,_=(0,it.css)({paddingTop:"16px"});return a.createElement(sa.gW,null,a.createElement("div",{className:_},a.createElement(cs.x6,{i18nKey:"login.signup.new-to-question"},"New to Grafana?")),a.createElement(oe.z9,{className:(0,it.css)({width:"100%",justifyContent:"center"}),href:W,variant:"secondary",fill:"outline"},a.createElement(cs.x6,{i18nKey:"login.signup.button-label"},"Sign up")))},qc=()=>{const W=(0,Mt.of)(Fo);return document.title=tc.M.AppTitle,a.createElement(Gc.A,null,({loginHint:_,passwordHint:X,disableLoginForm:de,disableUserSignUp:Ce,login:Ae,isLoggingIn:$e,changePassword:Ye,skipPasswordChange:Ze,isChangingPassword:mt,showDefaultPasswordWarning:Et,loginErrorMessage:Pt})=>a.createElement(Ol.GU,{isChangingPassword:mt},!mt&&a.createElement(Ol.qm,null,Pt&&a.createElement(wt.F,{className:W.alert,severity:"error",title:(0,cs.t)("login.error.title","Login failed")},Pt),!de&&a.createElement(Qc.Q,{onSubmit:Ae,loginHint:_,passwordHint:X,isLoggingIn:$e},a.createElement(sa.Gy,{justify:"flex-end"},!H.$.auth.disableLogin&&a.createElement(oe.z9,{className:W.forgottenPassword,fill:"text",href:`${H.$.appSubUrl}/user/password/send-reset-email`},a.createElement(cs.x6,{i18nKey:"login.forgot-password"},"Forgot your password?")))),a.createElement(nc,null),!Ce&&a.createElement(Zc,null)),mt&&a.createElement(Ol.qm,null,a.createElement(jc.S,{showDefaultPasswordWarning:Et,onSubmit:Ye,onSkip:()=>Ze()}))))},Fo=W=>({forgottenPassword:(0,it.css)({padding:0,marginTop:W.spacing(.5)}),alert:(0,it.css)({width:"100%"})});var wr=e(17205),ed=e(25249),xi=e(10860);function td({description:W,text:_,url:X}){const de=(0,Mt.of)(nd);return a.createElement(xi.Z,{className:de.card,href:X},a.createElement(xi.Z.Heading,null,_),a.createElement(xi.Z.Description,{className:de.description},W))}const nd=W=>({card:(0,it.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,it.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function Wo({navId:W,header:_}){const{node:X}=(0,ed.C)(W),de=(0,Mt.of)(ad),Ce=X.children?.filter(Ae=>!Ae.hideFromTabs);return a.createElement(wr.Y,{navId:X.id},a.createElement(wr.Y.Contents,null,a.createElement("div",{className:de.content},_,Ce&&Ce.length>0&&a.createElement("section",{className:de.grid},Ce?.map(Ae=>a.createElement(td,{key:Ae.id,description:Ae.subTitle,text:Ae.text,url:Ae.url??""}))))))}const ad=W=>({content:(0,it.css)({display:"flex",flexDirection:"column",gap:W.spacing(2)}),grid:(0,it.css)({display:"grid",gap:W.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:W.spacing(2,0)})});var cl=e(64388),Il=e(7392);function Cr(){return a.createElement(wr.Y,{navId:"home",layout:cl.k.Canvas,pageNav:{text:"Page not found"}},a.createElement(Il.L,{entity:"Page"}))}var Js=e(16233),ac=e(33378),Fs=e(10096),An=e(31678),sc=e(72724);const sd="dddd YYYY-MM-DD HH:mm zz",rc="/admin/authentication/ldap";class rd extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:_,user:X}=this.props,Ce=_&&_.nextSync?(0,sc.LE)(_.nextSync,{format:sd}):"",Ae=`${rc}?user=${X&&X.login}`,$e=Fs.TP.hasPermission(An.AccessControlAction.LDAPUsersRead),Ye=Fs.TP.hasPermission(An.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,_.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},Ce)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},Ye&&a.createElement(oe.$n,{variant:"secondary",onClick:this.onUserSync},"Sync user"),$e&&a.createElement(oe.z9,{variant:"secondary",href:Ae},"Debug LDAP Mapping"))))}}var dl=e(3911),Gi=e(82702),ul=e(37390),Oi=e(56034),ai=e(89062),Al=e(85927),od=e(41053);function Rl({onSelected:W,className:_,inputId:X,autoFocus:de,excludeOrgs:Ce}){(0,a.useEffect)(()=>{de&&X&&document.getElementById(X)?.focus()},[de,X]);const[Ae,$e]=(0,od.A)(async()=>{const Ze=(await(0,M.AI)().get("/api/orgs")).map(mt=>({value:{id:mt.id,name:mt.name},label:mt.name}));if(Ce){let mt=Ce.map(Pt=>Pt.orgId);return Ze.filter(Pt=>!mt.includes(Pt.value.id))}else return Ze});return a.createElement(re.DW,{inputId:X,className:_,isLoading:Ae.loading,defaultOptions:!0,loadOptions:$e,filterOption:(Ye,Ze)=>{const mt=Ze.toLowerCase();return!!Ye.value?.name.toLowerCase().includes(mt)},onChange:W,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var hi=e(5133);class Fr extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:_,orgs:X,isExternalUser:de,onOrgRoleChange:Ce,onOrgRemove:Ae,onOrgAdd:$e}=this.props,{showAddOrgModal:Ye}=this.state,Ze=Fs.TP.hasPermission(An.AccessControlAction.OrgUsersAdd)&&!de;return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement(xt.B,{gap:1.5,direction:"column"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,X.map((mt,Et)=>a.createElement(Bl,{key:`${mt.orgId}-${Et}`,isExternalUser:de,user:_,org:mt,onOrgRoleChange:Ce,onOrgRemove:Ae})))),a.createElement("div",null,Ze&&a.createElement(oe.$n,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(Qi,{user:_,userOrgs:X,isOpen:Ye,onOrgAdd:$e,onDismiss:this.dismissOrgAddModal})))}}const Ll=(0,dl.N)(W=>({removeButton:(0,it.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${W.v1.palette.blue95};
    `,label:(0,it.css)`
      font-weight: 500;
    `,disabledTooltip:(0,it.css)`
      display: flex;
    `,tooltipItem:(0,it.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,it.css)`
      color: ${W.v1.palette.blue95};
    `,rolePickerWrapper:(0,it.css)`
      display: flex;
    `,rolePicker:(0,it.css)`
      flex: auto;
      margin-right: ${W.spacing(1)};
    `}));class id extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:_}=this.props;this.props.onOrgRemove(_.orgId)},this.onChangeRoleClick=()=>{const{org:_}=this.props;this.setState({isChangingRole:!0,currentRole:_.role})},this.onOrgRoleChange=_=>{this.setState({currentRole:_})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=_=>{this.props.onOrgRoleChange(this.props.org.orgId,_)}}componentDidMount(){Fs.TP.licensedAccessControlEnabled()&&Fs.TP.hasPermission(An.AccessControlAction.ActionRolesList)&&(0,Al.RL)(this.props.org.orgId).then(_=>this.setState({roleOptions:_})).catch(_=>console.error(_))}render(){const{user:_,org:X,isExternalUser:de,theme:Ce}=this.props,Ae=_?.authLabels?.length&&_?.authLabels[0],$e=Ae?`Synced via ${Ae}`:"",{currentRole:Ye,isChangingRole:Ze}=this.state,mt=Ll(Ce),Et=(0,it.cx)("width-16",mt.label),Pt=Fs.TP.hasPermission(An.AccessControlAction.OrgUsersWrite),$t=Fs.TP.hasPermission(An.AccessControlAction.OrgUsersRemove)&&!de,Bt=de||!Pt,At=`${X.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:Et},a.createElement("label",{htmlFor:At},X.name)),Fs.TP.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:mt.rolePickerWrapper},a.createElement("div",{className:mt.rolePicker},a.createElement(ai.y,{userId:_?.id||0,orgId:X.orgId,basicRole:X.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Bt,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),de&&a.createElement(oc,{lockMessage:$e}))):a.createElement(a.Fragment,null,Ze?a.createElement("td",null,a.createElement(hi.r,{inputId:At,value:Ye,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},X.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Pt&&a.createElement(dd,{lockMessage:$e,isExternalUser:de,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},$t&&a.createElement(Gi.Z,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove},"Remove from organization"))))}}const Bl=(0,Mt.cV)(id),ld=(0,dl.N)(()=>({modal:(0,it.css)`
    width: 500px;
  `,buttonRow:(0,it.css)`
    text-align: center;
  `,modalContent:(0,it.css)`
    overflow: visible;
  `}));class Qi extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:An.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=_=>{const X=this.props.userOrgs.find(de=>de.orgId===_.value?.id);this.setState({selectedOrg:_.value,role:X?.role||An.OrgRole.Viewer}),Fs.TP.licensedAccessControlEnabled()&&Fs.TP.hasPermission(An.AccessControlAction.ActionRolesList)&&(0,Al.RL)(_.value?.id).then(de=>this.setState({roleOptions:de})).catch(de=>console.error(de))},this.onOrgRoleChange=_=>{this.setState({role:_})},this.onAddUserToOrg=async()=>{const{selectedOrg:_,role:X}=this.state;this.props.onOrgAdd(_.id,X),Fs.TP.licensedAccessControlEnabled()&&Fs.TP.hasPermission(An.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Al.eA)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(_,X,de)=>{this.setState({pendingRoles:_,pendingOrgId:de,pendingUserId:X})}}render(){const{isOpen:_,user:X,userOrgs:de}=this.props,{role:Ce,roleOptions:Ae,selectedOrg:$e}=this.state,Ye=ld();return a.createElement(ul.a,{className:Ye.modal,contentClassName:Ye.modalContent,title:"Add to an organization",isOpen:_,onDismiss:this.onCancel},a.createElement(us.D,{label:"Organization"},a.createElement(Rl,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:de,autoFocus:!0})),a.createElement(us.D,{label:"Role",disabled:$e===null},a.createElement(ai.y,{userId:X?.id||0,orgId:$e?.id,basicRole:Ce,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Ae,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),a.createElement(ul.a.ButtonRow,null,a.createElement(sa.Gy,{spacing:"md",justify:"center"},a.createElement(oe.$n,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(oe.$n,{variant:"primary",disabled:$e===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const cd=W=>({disabledTooltip:(0,it.css)`
    display: flex;
  `,tooltipItemLink:(0,it.css)`
    color: ${W.v1.palette.blue95};
  `,lockMessageClass:(0,it.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,it.css)`
    line-height: 2;
  `});function dd({lockMessage:W,onChangeRoleClick:_,isExternalUser:X,onOrgRoleSave:de,onCancelClick:Ce}){const Ae=(0,Mt.of)(cd);return a.createElement("div",{className:Ae.disabledTooltip},X?a.createElement(a.Fragment,null,a.createElement("span",{className:Ae.lockMessageClass},W),a.createElement(Oi.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:Ae.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:Ae.icon},a.createElement(Bs.I,{name:"question-circle"})))):a.createElement(Gi.Z,{confirmText:"Save",onClick:_,onCancel:Ce,onConfirm:de,disabled:X},"Change role"))}const oc=({lockMessage:W})=>{const _=(0,Mt.of)(ud);return a.createElement("div",{className:_.disabledTooltip},a.createElement("span",{className:_.lockMessageClass},W),a.createElement(Oi.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:_.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(Bs.I,{name:"question-circle"})))},ud=W=>({disabledTooltip:(0,it.css)`
    display: flex;
  `,tooltipItemLink:(0,it.css)`
    color: ${W.v1.palette.blue95};
  `,lockMessageClass:(0,it.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),md=[{label:"Yes",value:!0},{label:"No",value:!1}];function ic({isGrafanaAdmin:W,isExternalUser:_,lockMessage:X,onGrafanaAdminChange:de}){const[Ce,Ae]=(0,a.useState)(!1),[$e,Ye]=(0,a.useState)(W),Ze=()=>Ae(!0),mt=()=>{Ae(!1),Ye(W)},Et=()=>de($e),Pt=Fs.TP.hasPermission(An.AccessControlAction.UsersPermissionsUpdate)&&!_,$t=(0,Mt.of)(lc);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),Ce?a.createElement("td",{colSpan:2},a.createElement(ne.z,{options:md,value:$e,onChange:Ye,autoFocus:!0})):a.createElement("td",{colSpan:2},W?a.createElement(a.Fragment,null,a.createElement(Bs.I,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,Pt&&a.createElement(Gi.Z,{onClick:Ze,onConfirm:Et,onCancel:mt,confirmText:"Change"},"Change"),_&&a.createElement("div",{className:$t.lockMessageClass},a.createElement(oc,{lockMessage:X})))))))}const lc=W=>({lockMessageClass:(0,it.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${W.spacing(.6)};
  `});var ml=e(96374),cc=e(91634);function fl({user:W,onUserUpdate:_,onUserDelete:X,onUserDisable:de,onUserEnable:Ce,onPasswordChange:Ae}){const[$e,Ye]=(0,a.useState)(!1),[Ze,mt]=(0,a.useState)(!1),Et=(0,a.useRef)(null),Pt=Pi=>()=>{Ye(Pi),!Pi&&Et.current&&Et.current.focus()},$t=(0,a.useRef)(null),Bt=Pi=>()=>{mt(Pi),!Pi&&$t.current&&$t.current.focus()},At=()=>X(W.id),Wt=()=>de(W.id),En=()=>Ce(W.id),wa=Pi=>{_({...W,name:Pi})},Ja=Pi=>{_({...W,email:Pi})},Ha=Pi=>{_({...W,login:Pi})},Va=W.authLabels?.length&&W.authLabels[0],zr=Va?`Synced via ${Va}`:"",Di=W.isExternal||!Fs.TP.hasPermissionInMetadata(An.AccessControlAction.UsersWrite,W),Bp=W.isExternal||!Fs.TP.hasPermissionInMetadata(An.AccessControlAction.UsersPasswordUpdate,W),Pb=Fs.TP.hasPermissionInMetadata(An.AccessControlAction.UsersDelete,W),Cb=Fs.TP.hasPermissionInMetadata(An.AccessControlAction.UsersDisable,W),Tb=Fs.TP.hasPermissionInMetadata(An.AccessControlAction.UsersEnable,W);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement(xt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Yi,{label:"Name",value:W.name,locked:Di,lockMessage:zr,onChange:wa}),a.createElement(Yi,{label:"Email",value:W.email,locked:Di,lockMessage:zr,onChange:Ja}),a.createElement(Yi,{label:"Username",value:W.login,locked:Di,lockMessage:zr,onChange:Ha}),a.createElement(Yi,{label:"Password",value:"********",inputType:"password",locked:Bp,lockMessage:zr,onChange:Ae})))),a.createElement(xt.B,{gap:2},Pb&&a.createElement(a.Fragment,null,a.createElement(oe.$n,{variant:"destructive",onClick:Pt(!0),ref:Et},"Delete user"),a.createElement(ml.u,{isOpen:$e,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:At,onDismiss:Pt(!1)})),W.isDisabled&&Tb&&a.createElement(oe.$n,{variant:"secondary",onClick:En},"Enable user"),!W.isDisabled&&Cb&&a.createElement(a.Fragment,null,a.createElement(oe.$n,{variant:"secondary",onClick:Bt(!0),ref:$t},"Disable user"),a.createElement(ml.u,{isOpen:Ze,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:Wt,onDismiss:Bt(!1)})))))}class Yi extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=_=>{this.inputElem=_},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(_,X)=>{X!==cc.O.Invalid&&this.setState({value:_.target.value})},this.onInputBlur=(_,X)=>{X!==cc.O.Invalid&&this.setState({value:_.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}static{this.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"}}render(){const{label:_,locked:X,lockMessage:de,inputType:Ce}=this.props,{value:Ae}=this.state,$e=(0,it.cx)("width-16",(0,it.css)`
        font-weight: 500;
      `);if(X)return a.createElement(fd,{label:_,value:Ae,lockMessage:de});const Ye=`${_}-input`;return a.createElement("tr",null,a.createElement("td",{className:$e},a.createElement("label",{htmlFor:Ye},_)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(Me.p,{id:Ye,type:Ce,defaultValue:Ae,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(Gi.Z,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}const fd=({label:W,value:_,lockMessage:X})=>{const de=(0,it.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,Ce=(0,it.cx)("width-16",(0,it.css)`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:Ce},W),a.createElement("td",{className:"width-25",colSpan:2},_),a.createElement("td",null,a.createElement("span",{className:de},X)))};class dc extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=_=>()=>{this.props.onSessionRevoke(_)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:_}=this.props,{showLogoutModal:X}=this.state,de=Fs.TP.hasPermission(An.AccessControlAction.UsersLogout);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement(xt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,_&&_.map((Ce,Ae)=>a.createElement("tr",{key:`${Ce.id}-${Ae}`},a.createElement("td",null,Ce.isActive?"Now":Ce.seenAt),a.createElement("td",null,(0,cs.Xj)(Ce.createdAt,{dateStyle:"long"})),a.createElement("td",null,Ce.clientIp),a.createElement("td",null,`${Ce.browser} on ${Ce.os} ${Ce.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},de&&a.createElement(Gi.Z,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Ce.id)},"Force logout")))))))),a.createElement("div",null,de&&_.length>0&&a.createElement(oe.$n,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(ml.u,{isOpen:X,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const gd=dc;var tr=e(57334);class uc extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=_=>{this.props.updateUser(_)},this.onPasswordChange=_=>{const{user:X,setUserPassword:de}=this.props;X&&de(X.id,_)},this.onUserDelete=_=>{this.props.deleteUser(_)},this.onUserDisable=_=>{this.props.disableUser(_)},this.onUserEnable=_=>{this.props.enableUser(_)},this.onGrafanaAdminChange=_=>{const{user:X,updateUserPermissions:de}=this.props;X&&de(X.id,_)},this.onOrgRemove=_=>{const{user:X,deleteOrgUser:de}=this.props;X&&de(X.id,_)},this.onOrgRoleChange=(_,X)=>{const{user:de,updateOrgUserRole:Ce}=this.props;de&&Ce(de.id,_,X)},this.onOrgAdd=(_,X)=>{const{user:de,addOrgUser:Ce}=this.props;de&&Ce(de,_,X)},this.onSessionRevoke=_=>{const{user:X,revokeSession:de}=this.props;X&&de(_,X.id)},this.onAllSessionsRevoke=()=>{const{user:_,revokeAllSessions:X}=this.props;_&&X(_.id)},this.onUserSync=()=>{const{user:_,syncLdapUser:X}=this.props;_&&X(_.id)}}async componentDidMount(){const{match:_,loadAdminUserPage:X}=this.props;X(parseInt(_.params.id,10))}render(){const{user:_,orgs:X,sessions:de,ldapSyncInfo:Ce,isLoading:Ae}=this.props,$e=_?.isExternal&&_?.authLabels?.includes("LDAP"),Ye=Fs.TP.hasPermission(An.AccessControlAction.UsersAuthTokenList),Ze=Fs.TP.hasPermission(An.AccessControlAction.LDAPStatusRead),mt=_?.authLabels?.[0],Et=mt?`Synced via ${mt}`:"",Pt={text:_?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return a.createElement(wr.Y,{navId:"global-users",pageNav:Pt},a.createElement(wr.Y.Contents,{isLoading:Ae},a.createElement(xt.B,{gap:5,direction:"column"},_&&a.createElement(a.Fragment,null,a.createElement(fl,{user:_,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),$e&&_?.isExternallySynced&&(0,ac.a)("ldapsync")&&Ce&&Ze&&a.createElement(rd,{ldapSyncInfo:Ce,user:_,onUserSync:this.onUserSync}),a.createElement(ic,{isGrafanaAdmin:_.isGrafanaAdmin,isExternalUser:_?.isGrafanaAdminExternallySynced,lockMessage:Et,onGrafanaAdminChange:this.onGrafanaAdminChange})),X&&a.createElement(Fr,{user:_,orgs:X,isExternalUser:_?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),de&&Ye&&a.createElement(gd,{sessions:de,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke}))))}}const Ul=W=>({user:W.userAdmin.user,sessions:W.userAdmin.sessions,orgs:W.userAdmin.orgs,ldapSyncInfo:W.ldap.syncInfo,isLoading:W.userAdmin.isLoading,error:W.userAdmin.error}),mc={loadAdminUserPage:tr.kz,updateUser:tr.TK,setUserPassword:tr.ly,disableUser:tr.MV,enableUser:tr.nr,deleteUser:tr.hG,updateUserPermissions:tr.N6,addOrgUser:tr.nh,updateOrgUserRole:tr.P3,deleteOrgUser:tr.Pi,revokeSession:tr.T$,revokeAllSessions:tr.VR,syncLdapUser:tr.mI},fc=(0,ni.connect)(Ul,mc)(uc);var Se=e(49785),me=e(94753),Le=e(48840);const ke=({ldapConnectionInfo:W})=>{const _=(0,a.useMemo)(()=>[{id:"host",header:"Host",disableGrow:!0},{id:"port",header:"Port",disableGrow:!0},{id:"available",cell:de=>de.cell.value?a.createElement(xt.B,{justifyContent:"end"},a.createElement(Oi.m,{content:"Connection is available"},a.createElement(Bs.I,{name:"check",className:"pull-right"}))):a.createElement(xt.B,{justifyContent:"end"},a.createElement(Oi.m,{content:"Connection is not available"},a.createElement(Bs.I,{name:"exclamation-triangle"})))}],[]),X=(0,a.useMemo)(()=>W,[W]);return a.createElement("section",null,a.createElement(xt.B,{direction:"column",gap:2},a.createElement(me.E,{color:"primary",element:"h3"},"LDAP Connection"),a.createElement(Le.j,{data:X,columns:_,getRowId:de=>de.host+de.port}),a.createElement(ut,{ldapConnectionInfo:W})))},ut=({ldapConnectionInfo:W})=>{if(!W.some(Ce=>Ce.error))return null;const X=[];W.forEach(Ce=>{Ce.error&&X.push(Ce)});const de=X.map((Ce,Ae)=>a.createElement("div",{key:Ae},a.createElement("span",{style:{fontWeight:500}},Ce.host,":",Ce.port,a.createElement("br",null)),a.createElement("span",null,Ce.error),Ae!==X.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(wt.F,{title:"Connection error",severity:An.AppNotificationSeverity.Error},de)},ht="dddd YYYY-MM-DD HH:mm zz",It=({ldapSyncInfo:W})=>{const _=(0,sc.LE)(W.nextSync,{format:ht}),X=[{id:"syncAttribute"},{id:"syncValue"}],de=[{syncAttribute:"Active synchronization",syncValue:W.enabled?"Enabled":"Disabled"},{syncAttribute:"Scheduled",syncValue:W.schedule},{syncAttribute:"Next synchronization",syncValue:_}];return a.createElement("section",null,a.createElement(me.E,{element:"h3"},"LDAP Synchronization"),a.createElement(Le.j,{data:de,columns:X,getRowId:Ce=>Ce.syncAttribute}))},Ht=({groups:W})=>{const _=(0,a.useMemo)(()=>W,[W]),X=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:de=>de.value&&de.row.original.orgRole?de.value:""},{id:"orgRole",header:"Role",cell:de=>de.value||a.createElement(a.Fragment,null,"No match"," ",a.createElement(Oi.m,{content:"No matching organizations found"},a.createElement(Bs.I,{name:"info-circle"})))}],[]);return a.createElement(Le.j,{headerTooltips:{orgName:{content:"Only the first match for an Organization will be used",iconName:"info-circle"}},columns:X,data:_,getRowId:de=>de.orgId+de.orgRole+de.groupDN})},an=({info:W})=>{const _=(0,a.useMemo)(()=>[{id:"userInfo",header:"User Information",disableGrow:!0},{id:"ldapValue"},{id:"cfgAttrValue",header:"LDAP attribute"}],[]),X=(0,a.useMemo)(()=>[{userInfo:"First name",ldapValue:W.name.ldapValue,cfgAttrValue:W.name.cfgAttrValue},{userInfo:"Surname",ldapValue:W.surname.ldapValue,cfgAttrValue:W.surname.cfgAttrValue},{userInfo:"Username",ldapValue:W.login.ldapValue,cfgAttrValue:W.login.cfgAttrValue},{userInfo:"Email",ldapValue:W.email.ldapValue,cfgAttrValue:W.email.cfgAttrValue}],[W]);return a.createElement(Le.j,{columns:_,data:X,getRowId:de=>de.userInfo})},Xt=({permissions:W})=>{const _=(0,a.useMemo)(()=>[{id:"permission",header:"Permissions",disableGrow:!0},{id:"value"}],[]),X=(0,a.useMemo)(()=>[{permission:"Grafana admin",value:W.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(Bs.I,{name:"shield"})," Yes"):"No"},{permission:"Status",value:W.isDisabled?a.createElement(a.Fragment,null,a.createElement(Bs.I,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(Bs.I,{name:"check"})," Active")}],[W]);return a.createElement(Le.j,{data:X,columns:_,getRowId:de=>de.permission})},On=({teams:W})=>{const _=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:({row:{original:{orgName:X}}})=>a.createElement(a.Fragment,null,X||"No matching teams found")},{id:"teamName",header:"Team",cell:({row:{original:{teamName:X,orgName:de}}})=>X&&de?X:""}],[]);return a.createElement(Le.j,{data:W,columns:_,getRowId:X=>X.teamName})},ia=({ldapUser:W})=>a.createElement(xt.B,{direction:"column",gap:4},a.createElement(an,{info:W.info}),a.createElement(Xt,{permissions:W.permissions}),W.roles&&W.roles.length>0&&a.createElement(Ht,{groups:W.roles}),W.teams&&W.teams.length>0?a.createElement(On,{teams:W.teams}):a.createElement(te.a,null,a.createElement(me.E,null,"No teams found via LDAP"))),qn={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"},Rn=({clearUserMappingInfo:W,queryParams:_,loadLdapState:X,loadLdapSyncStatus:de,loadUserMapping:Ce,clearUserError:Ae,ldapUser:$e,userError:Ye,ldapError:Ze,ldapSyncInfo:mt,ldapConnectionInfo:Et})=>{const[Pt,$t]=(0,a.useState)(!0),{register:Bt,handleSubmit:At}=(0,Se.mN)(),Wt=(0,a.useCallback)(async Ha=>Ce(Ha),[Ce]);(0,a.useEffect)(()=>{const Ha=async()=>Promise.all([X(),de()]);async function Va(){await W(),await Ha(),_.username&&await Wt(_.username),$t(!1)}Va()},[W,Wt,X,de,_]);const En=({username:Ha})=>{Ha&&Wt(Ha)},wa=()=>{Ae()},Ja=Fs.TP.hasPermission(An.AccessControlAction.LDAPUsersRead);return a.createElement(wr.Y,{navId:"authentication",pageNav:qn},a.createElement(wr.Y.Contents,{isLoading:Pt},a.createElement(xt.B,{direction:"column",gap:4},Ze&&Ze.title&&a.createElement(wt.F,{title:Ze.title,severity:An.AppNotificationSeverity.Error},Ze.body),a.createElement(ke,{ldapConnectionInfo:Et}),(0,ac.a)("ldapsync")&&mt&&a.createElement(It,{ldapSyncInfo:mt}),Ja&&a.createElement("section",null,a.createElement("h3",null,"Test user mapping"),a.createElement("form",{onSubmit:At(En)},a.createElement(us.D,{label:"Username"},a.createElement(Me.p,{...Bt("username",{required:!0}),width:34,id:"username",type:"text",defaultValue:_.username,addonAfter:a.createElement(oe.$n,{variant:"primary",type:"submit"},"Run")}))),Ye&&Ye.title&&a.createElement(wt.F,{title:Ye.title,severity:An.AppNotificationSeverity.Error,onRemove:wa},Ye.body),$e&&a.createElement(ia,{ldapUser:$e})))))},ua=W=>({ldapConnectionInfo:W.ldap.connectionInfo,ldapUser:W.ldap.user,ldapSyncInfo:W.ldap.syncInfo,userError:W.ldap.userError,ldapError:W.ldap.ldapError}),is={loadLdapState:tr.JI,loadLdapSyncStatus:tr.pm,loadUserMapping:tr.Kg,clearUserError:tr.DX,clearUserMappingInfo:tr.Jc},$a=(0,ni.connect)(ua,is)(Rn);var Gn=e(27921),Oa=e(75471);function ts(W=z.config){return[{path:"/alerting",component:ns(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/home",exact:!1,component:ns(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/list",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleRead,An.AccessControlAction.AlertingRuleExternalRead]),component:ns(()=>Promise.all([e.e(3541),e.e(3511)]).then(e.bind(e,31987)))},{path:"/alerting/routes",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsRead,An.AccessControlAction.AlertingNotificationsExternalRead]),component:ns(()=>Promise.all([e.e(6489),e.e(6719)]).then(e.bind(e,34708)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4501).then(e.bind(e,39349)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4501).then(e.bind(e,39349)))},{path:"/alerting/silences",roles:(0,Oa.C0)([An.AccessControlAction.AlertingInstanceRead,An.AccessControlAction.AlertingInstancesExternalRead]),component:ns(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/new",roles:(0,Oa.C0)([An.AccessControlAction.AlertingInstanceCreate,An.AccessControlAction.AlertingInstancesExternalWrite]),component:ns(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/:id/edit",roles:(0,Oa.C0)([An.AccessControlAction.AlertingInstanceUpdate,An.AccessControlAction.AlertingInstancesExternalWrite]),component:ns(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/notifications",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsRead,An.AccessControlAction.AlertingNotificationsExternalRead]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/new",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite,An.AccessControlAction.AlertingNotificationsRead,An.AccessControlAction.AlertingNotificationsExternalRead]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type",roles:(0,Oa.C0)([An.AccessControlAction.AlertingNotificationsWrite,An.AccessControlAction.AlertingNotificationsExternalWrite]),component:ns(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/groups/",roles:(0,Oa.C0)([An.AccessControlAction.AlertingInstanceRead,An.AccessControlAction.AlertingInstancesExternalRead]),component:ns(()=>e.e(8427).then(e.bind(e,12564)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleCreate,An.AccessControlAction.AlertingRuleExternalWrite]),component:ns(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleUpdate,An.AccessControlAction.AlertingRuleExternalWrite]),component:ns(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleRead]),component:ns(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,69179)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleRead,An.AccessControlAction.AlertingRuleExternalRead]),component:ns(()=>Promise.resolve().then(e.bind(e,79741)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Oa.C0)([An.AccessControlAction.AlertingRuleRead,An.AccessControlAction.AlertingRuleExternalRead]),component:ns(()=>e.e(5516).then(e.bind(e,6165)))},{path:"/alerting/admin",roles:()=>["Admin"],component:ns(()=>e.e(6130).then(e.bind(e,24513)))}]}function ns(W){const _=()=>e.e(9029).then(e.bind(e,5961));return(0,Gn.A)(z.config.unifiedAlertingEnabled?W:_)}var Eo=e(6320);const Go=W=>({alertContent:(0,it.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,it.css)`
    margin: 0 ${W.spacing(1)} 0 0;
    line-height: ${W.spacing(W.components.height.sm)};
  `});function Ji(){const W=(0,Mt.of)(Go),[_,X]=(0,a.useState)(!0);return _?a.createElement(wt.F,{severity:"info",title:"",onRemove:()=>X(!1)},a.createElement("div",{className:W.alertContent},a.createElement("p",{className:W.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),a.createElement(oe.z9,{"aria-label":"Link to Connections",icon:"arrow-right",href:Eo.b.DataSources,fill:"text"},"Go to connections"))):a.createElement(a.Fragment,null)}function Us(){return[{path:`/${Eo.q}`,exact:!1,component:(0,Gn.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(2154)]).then(e.bind(e,19514)))}]}var ir=e(83883),pd=e(66253);const Qd=[{path:"/plugins",navId:"plugins",roles:hd([An.AccessControlAction.PluginsInstall,An.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:pd.vk.Home,component:(0,Gn.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/browse",navId:"plugins",roles:hd([An.AccessControlAction.PluginsInstall,An.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:pd.vk.Browse,component:(0,Gn.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:hd([An.AccessControlAction.PluginsInstall,An.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:pd.vk.Details,component:(0,Gn.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(7891)]).then(e.bind(e,86400)))}];function hd(W,_){return()=>W.some(X=>Fs.TP.hasPermission(X))?[]:_}function rm(){return Qd}var om=e(17422),Qo=e(30038),im=e(13834),gc=e(62625),Ii=e(26272),lm=e(39419),Vr=e(76888);function Up(W){return console.error(W),wl("Exception thrown","See console for details")}function pc(){return wl("Page not found","404 Error")}function wl(W,_){const X={text:W,subTitle:_,icon:"exclamation-triangle"};return{node:X,main:X}}var cm=e(94954),Yd=e(27716),Jd=e(22854),Xd=e(60677),hc=e(72798);const vc={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function si({pluginId:W,pluginNavSection:_}){const X=(0,Dr.W5)(),de=(0,Dr.zy)(),[Ce,Ae]=(0,a.useReducer)(Jr.reducer,vc),$e=H.$.appSubUrl+de.pathname+de.search,{plugin:Ye,loading:Ze,loadingError:mt,pluginNav:Et}=Ce,Pt=(0,Xd.Wy)(_,Et,$e),$t=(0,a.useMemo)(()=>(0,S.SE)(de.search),[de.search]),Bt=(0,a.useMemo)(()=>(0,hc.S)(Pt),[Pt]),At=(0,Vr.Il)();(0,a.useEffect)(()=>{dm(W,Ae)},[W]);const Wt=(0,a.useCallback)(Ha=>Ae(Jr.actions.changeNav(Ha)),[]);if(!Ye||W!==Ye.meta.id){const Ha=At.chrome.state.getValue().layout;return a.createElement(wr.Y,{navModel:Pt,pageNav:{text:""},layout:Ha},Ze&&a.createElement(lm.A,null),!Ze&&mt&&a.createElement(Il.L,{entity:"App"}))}if(!Ye.root)return a.createElement(wr.Y,{navModel:Pt??wl("Plugin load error")},a.createElement("div",null,"No root app page component found"));const En=Ye.root&&a.createElement(im.a,{meta:Ye.meta},a.createElement(Ye.root,{meta:Ye.meta,basename:X.url,onNavChanged:Wt,query:$t,path:de.pathname})),wa=()=>{if(!Ye.meta?.includes)return!0;const Ha=Ye.meta?.includes.find(zr=>zr.path===de.pathname);if(!Ha)return!0;if(Ha?.action&&H.$.featureToggles.accessControlOnCall)return Fs.TP.hasPermission(Ha.action);if(Fs.TP.isGrafanaAdmin||Fs.TP.user.orgRole===gc.X.Admin)return!0;const Va=Ha?.role||"";return!Va||Fs.TP.isEditor&&Va===gc.X.Viewer?!0:Fs.TP.hasRole(Va)},Ja=()=>a.createElement(wt.F,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return wa()?Et?a.createElement(a.Fragment,null,Pt?a.createElement(wr.Y,{navModel:Pt,pageNav:Et?.node},a.createElement(wr.Y.Contents,{isLoading:Ze},En)):a.createElement(wr.Y,null,En)):a.createElement(hc.A.Provider,{value:Bt},En):a.createElement(Ja,null)}const Jr=(0,Qo.Z0)({name:"prom-builder-container",initialState:vc,reducers:{setState:(W,_)=>{Object.assign(W,_.payload)},changeNav:(W,_)=>{let X=_.payload;X&&X.node.children&&(X={...X,node:{...X.main,hideFromBreadcrumbs:!0}}),W.pluginNav=X}}});async function dm(W,_){try{const X=await(0,Yd.x)(W).then(de=>{const Ce=um(de);return Ce?(Fs.lE.emit(Ii.r1.alertError,[Ce]),_(Jr.actions.setState({pluginNav:wl(Ce)})),null):(0,Jd.ui)(de)});_(Jr.actions.setState({plugin:X,loading:!1,loadingError:!1,pluginNav:null}))}catch(X){_(Jr.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:pc()}));const de=X instanceof Error?X:new Error((0,cm.q)(X));Xd.z4.logError(de),console.error(de)}}function um(W){return W?W.type!==Xe.QE.app?"Plugin must be an app":W.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Zd=si;var Qs=e(99140);function Xi(){const W=(0,Qs.Gu)(),{navIndex:_}=W,X=Ae=>Ae.startsWith("standalone-plugin-page-/"),de=Ae=>"pluginId"in Ae&&"id"in Ae;return[...Object.values(_).filter(de).map(Ae=>{const $e=(0,om.rH)(Ae),Ye=`/a/${Ae.pluginId}`,Ze=X(Ae.id)&&Ae.url||Ye,mt=X(Ae.id)&&!Ae.url?.startsWith("/a/");return{path:Ze,exact:!1,sensitive:mt,component:()=>a.createElement(Zd,{pluginId:Ae.pluginId,pluginNavSection:$e})}}),{path:"/a/:pluginId",exact:!1,component:({match:Ae})=>a.createElement(Zd,{pluginId:Ae.params.pluginId,pluginNavSection:_.home})}]}const qd=[{path:"/profile",component:(0,Gn.A)(()=>e.e(2472).then(e.bind(e,48357)))},{path:"/profile/password",component:(0,Gn.A)(()=>e.e(8107).then(e.bind(e,28107)))},{path:"/profile/select-org",component:(0,Gn.A)(()=>e.e(7430).then(e.bind(e,44613)))},{path:"/profile/notifications",component:(0,Gn.A)(()=>e.e(4140).then(e.bind(e,78015)))}];function mm(W=z.config){return W.profileEnabled?qd:(0,p.uniq)(qd.map(X=>X.path)).map(X=>({path:X,component:(0,Gn.A)(()=>e.e(5173).then(e.bind(e,35208)))}))}const fm=()=>!z.config.publicDashboardsEnabled||!z.config.featureToggles.publicDashboards?[]:[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:An.DashboardRoutes.Public,component:(0,Gn.A)(()=>e.e(5761).then(e.bind(e,53371)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:An.DashboardRoutes.Public,chromeless:!0,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(7197)]).then(e.bind(e,20302)))}],gm=[];function pm(){return[...Xi(),{path:"/",pageClass:"page-dashboard",routeName:An.DashboardRoutes.Home,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,63392)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:An.DashboardRoutes.Normal,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,63392)))},{path:"/dashboard/new",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:An.DashboardRoutes.New,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,63392)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.DashboardsCreate]),component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,30798)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:An.DashboardRoutes.Normal,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,63392)))},{path:"/dashboards/embedding-test",component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,14962)))},{path:"/d-solo/:uid/:slug?",pageClass:"dashboard-solo",routeName:An.DashboardRoutes.Normal,chromeless:!0,component:(0,Gn.A)(()=>z.Ay.featureToggles.dashboardSceneSolo?Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,24880)):Promise.all([e.e(9569),e.e(4492)]).then(e.bind(e,55087)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:An.DashboardRoutes.Normal,chromeless:!0,component:(0,Gn.A)(()=>Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,55087)))},{path:"/dashboard/import",component:(0,Gn.A)(()=>e.e(2550).then(e.bind(e,23390)))},{path:ir.I.List,component:()=>a.createElement(Dr.rd,{to:Eo.b.DataSources})},{path:ir.I.Edit,component:W=>a.createElement(Dr.rd,{to:Eo.b.DataSourcesEdit.replace(":uid",W.match.params.uid)})},{path:ir.I.Dashboards,component:W=>a.createElement(Dr.rd,{to:Eo.b.DataSourcesDashboards.replace(":uid",W.match.params.uid)})},{path:ir.I.New,component:()=>a.createElement(Dr.rd,{to:Eo.b.DataSourcesNew})},{path:"/datasources/correlations",component:(0,Gn.A)(()=>z.Ay.featureToggles.correlations?e.e(9981).then(e.bind(e,32429)):e.e(8014).then(e.bind(e,32863)))},{path:"/dashboards",component:(0,Gn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/dashboards/f/:uid/:slug",component:(0,Gn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/dashboards/f/:uid",component:(0,Gn.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/explore",pageClass:"page-explore",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.DataSourcesExplore]),component:(0,Gn.A)(()=>z.Ay.exploreEnabled?Promise.all([e.e(660),e.e(1698),e.e(5511),e.e(9604)]).then(e.bind(e,88322)):e.e(4422).then(e.bind(e,53518)))},{path:"/apps",component:()=>a.createElement(Wo,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(Wo,{navId:"alerts-and-incidents"})},{path:"/testing-and-synthetics",component:()=>a.createElement(Wo,{navId:"testing-and-synthetics"})},{path:"/monitoring",component:()=>a.createElement(Wo,{navId:"monitoring"})},{path:"/infrastructure",component:()=>a.createElement(Wo,{navId:"infrastructure"})},{path:"/frontend",component:()=>a.createElement(Wo,{navId:"frontend"})},{path:"/admin/general",component:()=>a.createElement(Wo,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>a.createElement(Wo,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>a.createElement(Wo,{navId:"cfg/access"})},{path:"/org",component:(0,Gn.A)(()=>e.e(1510).then(e.bind(e,69047)))},{path:"/org/new",component:(0,Gn.A)(()=>e.e(7930).then(e.bind(e,25913)))},{path:"/org/users",component:(0,Gn.A)(()=>e.e(9856).then(e.bind(e,31083)))},{path:"/org/users/invite",component:(0,Gn.A)(()=>e.e(7720).then(e.bind(e,91230)))},{path:"/org/apikeys",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.ActionAPIKeysRead]),component:(0,Gn.A)(()=>e.e(4196).then(e.bind(e,9699)))},{path:"/org/serviceaccounts",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.ServiceAccountsRead,An.AccessControlAction.ServiceAccountsCreate]),component:(0,Gn.A)(()=>e.e(6777).then(e.bind(e,74409)))},{path:"/org/serviceaccounts/create",component:(0,Gn.A)(()=>e.e(4176).then(e.bind(e,63606)))},{path:"/org/serviceaccounts/:id",component:(0,Gn.A)(()=>e.e(6576).then(e.bind(e,82936)))},{path:"/org/teams",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.ActionTeamsRead,An.AccessControlAction.ActionTeamsCreate]),component:(0,Gn.A)(()=>e.e(1036).then(e.bind(e,52576)))},{path:"/org/teams/new",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.ActionTeamsCreate]),component:(0,Gn.A)(()=>e.e(5436).then(e.bind(e,80011)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.ActionTeamsRead,An.AccessControlAction.ActionTeamsCreate]),component:(0,Gn.A)(()=>e.e(2212).then(e.bind(e,92886)))},{path:"/admin",component:()=>a.createElement(Wo,{navId:"cfg",header:a.createElement(Ji,null)})},{path:"/admin/authentication",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.SettingsWrite]),component:z.Ay.licenseInfo.enabledFeatures?.saml||z.Ay.ldapEnabled||z.Ay.featureToggles.ssoSettingsApi?(0,Gn.A)(()=>e.e(5592).then(e.bind(e,51332))):()=>a.createElement(Dr.rd,{to:"/admin"})},{path:"/admin/authentication/ldap",component:$a},{path:"/admin/authentication/:provider",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.SettingsWrite]),component:z.Ay.featureToggles.ssoSettingsApi?(0,Gn.A)(()=>e.e(5592).then(e.bind(e,22468))):()=>a.createElement(Dr.rd,{to:"/admin"})},{path:"/admin/settings",component:(0,Gn.A)(()=>e.e(7659).then(e.bind(e,98493)))},{path:"/admin/upgrading",component:(0,Gn.A)(()=>e.e(5356).then(e.bind(e,55356)))},{path:"/admin/users",component:(0,Gn.A)(()=>e.e(1743).then(e.bind(e,20972)))},{path:"/admin/users/create",component:(0,Gn.A)(()=>e.e(9239).then(e.bind(e,64665)))},{path:"/admin/users/edit/:id",component:fc},{path:"/admin/orgs",component:(0,Gn.A)(()=>e.e(9736).then(e.bind(e,24870)))},{path:"/admin/orgs/edit/:id",component:(0,Gn.A)(()=>e.e(9119).then(e.bind(e,57582)))},{path:"/admin/featuretoggles",component:z.Ay.featureToggles.featureToggleAdminPage?(0,Gn.A)(()=>e.e(7024).then(e.bind(e,47295))):()=>a.createElement(Dr.rd,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,Gn.A)(()=>e.e(1927).then(e.bind(e,68932)))},{path:"/admin/stats",component:(0,Gn.A)(()=>e.e(9299).then(e.bind(e,51372)))},z.Ay.featureToggles.onPremToCloudMigrations&&{path:"/admin/migrate-to-cloud",roles:()=>["Admin"],component:(0,Gn.A)(()=>e.e(3704).then(e.bind(e,36479)))},{path:"/login",component:qc,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,Gn.A)(()=>e.e(8576).then(e.bind(e,14383))),chromeless:!0},{path:"/verify",component:z.Ay.verifyEmailEnabled?(0,Gn.A)(()=>e.e(8786).then(e.bind(e,78786))):()=>a.createElement(Dr.rd,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:z.Ay.disableUserSignUp?()=>a.createElement(Dr.rd,{to:"/login"}):(0,Gn.A)(()=>e.e(7914).then(e.bind(e,27914))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,Gn.A)(()=>e.e(3818).then(e.bind(e,2713)))},{path:"/user/password/reset",component:(0,Gn.A)(()=>e.e(641).then(e.bind(e,37344))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,Gn.A)(()=>e.e(6590).then(e.bind(e,72602)))},{path:"/playlists",component:(0,Gn.A)(()=>e.e(1168).then(e.bind(e,44450)))},{path:"/playlists/play/:uid",component:(0,Gn.A)(()=>e.e(1374).then(e.bind(e,93129)))},{path:"/playlists/new",component:(0,Gn.A)(()=>e.e(7616).then(e.bind(e,62579)))},{path:"/playlists/edit/:uid",component:(0,Gn.A)(()=>e.e(7620).then(e.bind(e,84535)))},{path:"/sandbox/benchmarks",component:(0,Gn.A)(()=>e.e(9354).then(e.bind(e,98351)))},{path:"/sandbox/test",component:(0,Gn.A)(()=>e.e(5354).then(e.bind(e,65802)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,Gn.A)(()=>e.e(5804).then(e.bind(e,15111)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Js.TP.evaluatePermission([An.AccessControlAction.AlertingRuleRead]),component:(0,Gn.A)(()=>e.e(4333).then(e.bind(e,30027)))},{path:"/library-panels",component:(0,Gn.A)(()=>e.e(8516).then(e.bind(e,45434)))},{path:"/notifications",component:(0,Gn.A)(()=>e.e(4140).then(e.bind(e,78015)))},{path:"/explore/metrics",chromeless:!1,exact:!1,component:(0,Gn.A)(()=>e.e(4785).then(e.bind(e,89858)))},...rm(),...hm(),...ts(),...mm(),...gm,...fm(),...Us(),{path:"/*",component:Cr}].filter(Ar.zz)}function hm(W=z.Ay){return W.supportBundlesEnabled?[{path:"/support-bundles",component:(0,Gn.A)(()=>e.e(123).then(e.bind(e,21821)))},{path:"/support-bundles/create",component:(0,Gn.A)(()=>e.e(1515).then(e.bind(e,33809)))}]:[]}const Ec=a.forwardRef((W,_)=>a.createElement("div",{id:"ngRoot",ref:_,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));Ec.displayName="AngularRoot";var vi=e(95344),eu=e(7376),vm=e(81634),Ai=e(74856),Em=e(71500),ym=e(6923);async function bm(){if(H.$.angularSupportEnabled){const{AngularApp:W}=await Promise.all([e.e(9362),e.e(8138),e.e(8888)]).then(e.bind(e,88138)),_=new W;_.init(),_.bootstrap()}else(0,eu.w)({load:(W,_,X)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,vm.j)({get:W=>{switch(W){case"backendSrv":return(0,vi.l)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,M.AI)();case"contextSrv":return(0,vi.l)("getLegacyAngularInjector","contextSrv"),Fs.TP;case"dashboardSrv":return(0,vi.l)("getLegacyAngularInjector","getDashboardSrv"),(0,c.UA)();case"datasourceSrv":return(0,vi.l)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,B.l)();case"linkSrv":return(0,vi.l)("getLegacyAngularInjector","linkSrv"),(0,ym.mQ)();case"validationSrv":return(0,vi.l)("getLegacyAngularInjector","validationSrv"),Em.P;case"timeSrv":return(0,vi.l)("getLegacyAngularInjector","timeSrv"),(0,Ai.jG)();case"templateSrv":return(0,vi.l)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,Ee.w)()}throw"Angular is disabled.  Unable to expose: "+W}})}var Dm=e(46942),Pm=e.n(Dm),Fl=e(60619),Ei=e(33390),tu=e(80279),nu=e(7887),yc=e(87073),Cm=e(57514),Tm=e(69529),au=e(65178),Sm=e(35822);const bc=0,Mm=W=>{const _=a.useRef(null),X=a.useRef(null),de=a.useRef(W.items);de.current=W.items;const Ce=(0,Sm.useVirtual)({size:de.current.length,parentRef:X}),{query:Ae,search:$e,currentRootActionId:Ye,activeIndex:Ze,options:mt}=(0,os.useKBar)(Bt=>({search:Bt.searchQuery,currentRootActionId:Bt.currentRootActionId,activeIndex:Bt.activeIndex}));a.useEffect(()=>{const Bt=At=>{At.key==="ArrowUp"||At.ctrlKey&&At.key==="p"?(At.preventDefault(),Ae.setActiveIndex(Wt=>{let En=Wt>bc?Wt-1:Wt;if(typeof de.current[En]=="string"){if(En===0)return Wt;En-=1}return En})):At.key==="ArrowDown"||At.ctrlKey&&At.key==="n"?(At.preventDefault(),Ae.setActiveIndex(Wt=>{let En=Wt<de.current.length-1?Wt+1:Wt;if(typeof de.current[En]=="string"){if(En===de.current.length-1)return Wt;En+=1}return En})):At.key==="Enter"&&(At.preventDefault(),_.current?.click())};return window.addEventListener("keydown",Bt),()=>window.removeEventListener("keydown",Bt)},[Ae]);const{scrollToIndex:Et}=Ce;a.useEffect(()=>{Et(Ze,{align:Ze<=1?"end":"auto"})},[Ze,Et]),a.useEffect(()=>{Ae.setActiveIndex(typeof W.items[bc]=="string"?bc+1:bc)},[$e,Ye,W.items,Ae]);const Pt=a.useCallback((Bt,At)=>{if(typeof At=="string")return;const Wt=At.url;At.command?(At.command.perform(At),Ae.toggle()):Wt?Bt.ctrlKey||Bt.metaKey||Bt.shiftKey||Ae.toggle():(Ae.setSearch(""),Ae.setCurrentRootAction(At.id)),mt.callbacks?.onSelectAction?.(At)},[Ae,mt]),$t=(0,au.usePointerMovedSinceMount)();return a.createElement("div",{ref:X,style:{maxHeight:W.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:os.KBAR_LISTBOX,style:{height:`${Ce.totalSize}px`,width:"100%"}},Ce.virtualItems.map(Bt=>{const At=de.current[Bt.index],{target:Wt,url:En}=At,wa=typeof At!="string"&&{onPointerMove:()=>$t&&Ze!==Bt.index&&Ae.setActiveIndex(Bt.index),onPointerDown:()=>Ae.setActiveIndex(Bt.index),onClick:zr=>Pt(zr,At)},Ja=Bt.index===Ze,Ha={id:(0,os.getListboxItemId)(Bt.index),role:"option","aria-selected":Ja,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Bt.start}px)`},...wa},Va=a.cloneElement(W.onRender({item:At,active:Ja}),{ref:Bt.measureRef});return En?a.createElement("a",{key:Bt.index,href:typeof En=="function"?En($e):En,target:Wt,ref:Ja?_:null,...Ha},Va):a.createElement("div",{key:Bt.index,ref:Ja?_:null,...Ha},Va)})))},su=a.forwardRef(({action:W,active:_,currentRootActionId:X},de)=>{const Ce=a.useMemo(()=>{if(!X)return W.ancestors;const Ze=W.ancestors.findIndex(mt=>mt.id===X);return W.ancestors.slice(Ze+1)},[W.ancestors,X]),Ae=(0,Mt.of)(xm);let $e=W.name;const Ye=Ze=>!!(Ze.command?.perform||Ze.url);return W.children.length&&!Ye(W)&&!$e.endsWith("...")&&($e+="..."),a.createElement("div",{ref:de,className:(0,it.cx)(Ae.row,_&&Ae.activeRow)},a.createElement("div",{className:Ae.actionContainer},W.icon,a.createElement("div",{className:Ae.textContainer},Ce.map(Ze=>a.createElement(a.Fragment,{key:Ze.id},!Ye(Ze)&&a.createElement(a.Fragment,null,a.createElement("span",{className:Ae.breadcrumbAncestor},Ze.name),a.createElement("span",{className:Ae.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,$e)),W.subtitle&&a.createElement("span",{className:Ae.subtitleText},W.subtitle)))});su.displayName="ResultItem";const xm=W=>({row:(0,it.css)({padding:W.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:W.shape.radius.default,margin:W.spacing(0,1)}),activeRow:(0,it.css)({color:W.colors.text.maxContrast,background:W.colors.emphasize(W.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:W.spacing(.5),borderRadius:W.shape.radius.default,backgroundImage:W.colors.gradients.brandVertical}}),actionContainer:(0,it.css)({display:"flex",gap:W.spacing(1),alignItems:"baseline",fontSize:W.typography.fontSize,width:"100%"}),textContainer:(0,it.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,it.css)({color:W.colors.text.secondary}),breadcrumbSeparator:(0,it.css)({color:W.colors.text.secondary,marginLeft:W.spacing(1),marginRight:W.spacing(1)}),subtitleText:(0,it.css)({...W.typography.bodySmall,color:W.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Om=e(76459),vd=e.n(Om),Im=e(62301),Dc=e(24439);const Am=6,Rm=5,Lm=4,Yo=3,Ko=2,Ri=1,Np=100,Bm=5,ru=vd()(Um,200);async function ou(){if(!Js.TP.user.isSignedIn)return[];const W=(await Im.A.getDashboardOpened()).slice(0,Bm),X=(await(0,Dc.getGrafanaSearcher)().search({kind:["dashboard"],limit:Bm,uid:W})).view.toArray();return X.sort((Ce,Ae)=>{const $e=W.indexOf(Ce.uid),Ye=W.indexOf(Ae.uid);return $e-Ye}),X.map(Ce=>{const{url:Ae,name:$e}=Ce;return{id:`recent-dashboards${Ae}`,name:`${$e}`,section:(0,cs.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Am,url:Ae}})}async function Um(W){if(W.length===0||!Js.TP.user.isSignedIn&&!H.$.bootData.settings.anonymousEnabled)return[];const _=await(0,Dc.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:W,limit:Np});return _.view.map(de=>{const{url:Ce,name:Ae,kind:$e,location:Ye}=de;return{id:`go/${$e}${Ce}`,name:`${Ae}`,section:$e==="dashboard"?(0,cs.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,cs.t)("command-palette.section.folder-search-results","Folders"),priority:Ri,url:Ce,subtitle:_.view.dataFrame.meta?.custom?.locationInfo[Ye]?.name}})}function iu(W,_){const[X,de]=(0,a.useState)([]),[Ce,Ae]=(0,a.useState)(!1),$e=(0,a.useRef)(0);return(0,a.useEffect)(()=>{const Ye=Date.now();_&&W.length>0?(Ae(!0),ru(W).then(Ze=>{Ye>$e.current&&(de(Ze),Ae(!1),$e.current=Ye)})):(de([]),Ae(!1),$e.current=Ye)},[_,W]),{searchResults:X,isFetchingSearchResults:Ce}}var Xr=e(28444),Rr=e(28138),Nm=e(38645),lu=e(93522);const cu=W=>{let _=W.children||[];if(W.id==="help"){const X=()=>{Rr.A.publish(new Xr.S8({component:lu.N}))};W.children=[..._,...(0,Nm.Dd)(),...wm(),{id:"keyboard-shortcuts",text:(0,cs.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:X}]}return W},Ed=(W,_)=>{const X={...W},de=X.onClick;return X.onClick=()=>{(0,Ir.rR)("grafana_navigation_item_clicked",{path:X.url??X.id,menuIsDocked:_}),de?.()},X.children&&(X.children=X.children.map(Ce=>Ed(Ce,_))),X},wp=(W,_)=>!!(W===_||Pc(W,_)),Pc=(W,_)=>!!W.children?.some(X=>X===_?!0:Pc(X,_)),Wl=W=>W?.split("?")[0]??"",Cc=(W,_)=>{const X=Wl(_?.url),de=Wl(W.url);return de&&de.length>X?.length},du=(W,_,X)=>{const de="/dashboards";for(const Ce of W){const Ae=Wl(Ce.url),$e=T.I.stripBaseFromUrl(Ae);if($e&&Ce.id!=="starred")if($e===_){X=Ce;break}else if($e!=="/"&&_.startsWith($e))Cc(Ce,X)&&(X=Ce);else if($e==="/alerting/list"&&_.startsWith("/alerting/notification/")){X=Ce;break}else $e===de&&_.startsWith("/d/")&&Cc(Ce,X)&&(X=Ce);if(Ce.children&&(X=du(Ce.children,_,X)),Wl(X?.url)===_)return X}return X};function wm(){const{buildInfo:W,licenseInfo:_}=H.$,X=_.stateInfo?` (${_.stateInfo})`:"",de=[];return de.push({target:"_blank",id:"version",text:`${W.edition}${X}`,url:_.licenseUrl,icon:"external-link-alt"}),W.hasUpdate&&de.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),de}var Tc=e(2769),Kl=e(74135);function Fm(){const W={},{extensions:_}=(0,U.Kf)({extensionPointId:Kl.S.CommandPalette,context:W,limitPerPlugin:3});return _.map(X=>({section:X.category??"Extensions",priority:Ko,id:X.id,name:X.title,target:X.path,perform:()=>X.onClick&&X.onClick()}))}function uu(W){return"navModel."+W.id}function mu(W,_=[]){const X=[];for(let de of W){de.id==="help"&&(de=cu({...de}),delete de.url);const{url:Ce,target:Ae,text:$e,isCreateAction:Ye,children:Ze,onClick:mt,keywords:Et}=de,Pt=!!Ze?.length;if(!(Ce||mt||Pt))continue;let $t=Ce;Ce&&(de.id==="connections-add-new-connection"||de.id==="standalone-plugin-page-/connections/add-new-connection")&&($t=wa=>{const Ja=Et?.find(Ha=>Ha.toLowerCase().includes(wa.toLowerCase()));return Ja?`${Ce}?search=${Ja}`:Ce});const Bt=Ye?(0,cs.t)("command-palette.section.actions","Actions"):(0,cs.t)("command-palette.section.pages","Pages"),At=Ye?Rm:Lm,Wt=_.map(wa=>wa.text).join(" > "),En={id:uu(de),name:$e,section:Bt,url:$t,target:Ae,parent:_.length>0&&!Ye?uu(_[_.length-1]):void 0,perform:mt,keywords:Et?.join(" "),priority:At,subtitle:Ye?void 0:Wt};if(X.push(En),Ze?.length){const wa=mu(Ze,[..._,de]);X.push(...wa)}}return X}const Wm=W=>{const _=[{id:"preferences/theme",name:(0,cs.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,cs.t)("command-palette.section.preferences","Preferences"),priority:Yo},{id:"preferences/dark-theme",name:(0,cs.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Tc.K)("dark"),parent:"preferences/theme",priority:Yo},{id:"preferences/light-theme",name:(0,cs.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Tc.K)("light"),parent:"preferences/theme",priority:Yo}],X=Fm(),de=mu(W);return[..._,...X,...de]};function Km(W){const[_,X]=(0,a.useState)([]),[de,Ce]=(0,a.useState)([]),Ae=(0,An.useSelector)($e=>$e.navBarTree);return(0,a.useEffect)(()=>{const $e=Wm(Ae);X($e)},[Ae]),(0,a.useEffect)(()=>{W||ou().then($e=>Ce($e)).catch($e=>{console.error("Error loading recent dashboard actions",$e)})},[W]),W?_:[...de,..._]}var fu=e(53076);const yd={name:"none",priority:os.Priority.NORMAL};function Sc(W,_){return _.priority-W.priority}function gu(){const{search:W,actions:_,rootActionId:X}=(0,os.useKBar)(Et=>({search:Et.searchQuery,actions:Et.actions,rootActionId:Et.currentRootActionId})),de=a.useMemo(()=>Object.keys(_).reduce((Et,Pt)=>{const $t=_[Pt];if(!$t.parent&&!X&&Et.push($t),$t.id===X)for(let Bt=0;Bt<$t.children.length;Bt++)Et.push($t.children[Bt]);return Et},[]).sort(Sc),[_,X]),Ce=a.useCallback(Et=>{let Pt=[];for(let $t=0;$t<Et.length;$t++)Pt.push(Et[$t]);return function $t(Bt,At=Pt){for(let Wt=0;Wt<Bt.length;Wt++)if(Bt[Wt].children.length>0){let En=Bt[Wt].children;for(let wa=0;wa<En.length;wa++)At.push(En[wa]);$t(Bt[Wt].children,At)}return At}(Et)},[]),Ae=!W,$e=a.useMemo(()=>Ae?de:Ce(de),[Ce,de,Ae]),Ye=$m($e,W),Ze=a.useMemo(()=>{let Et={},Pt=[],$t=[];for(let At=0;At<Ye.length;At++){const Wt=Ye[At],En=Wt.action,wa=Wt.score||os.Priority.NORMAL,Ja={name:typeof En.section=="string"?En.section:En.section?.name||yd.name,priority:typeof En.section=="string"?wa:En.section?.priority||0+wa};Et[Ja.name]||(Et[Ja.name]=[],Pt.push(Ja)),Et[Ja.name].push({priority:En.priority+wa,action:En})}$t=Pt.sort(Sc).map(At=>({name:At.name,actions:Et[At.name].sort(Sc).map(Wt=>Wt.action)}));let Bt=[];for(let At=0;At<$t.length;At++){let Wt=$t[At];Wt.name!==yd.name&&Bt.push(Wt.name);for(let En=0;En<Wt.actions.length;En++)Bt.push(Wt.actions[En])}return Bt},[Ye]),mt=a.useMemo(()=>X,[Ze]);return a.useMemo(()=>({results:Ze,rootActionId:mt}),[mt,Ze])}function $m(W,_){const X=_m(),de=a.useMemo(()=>({filtered:W,search:_}),[W,_]),{filtered:Ce,search:Ae}=(0,au.useThrottledValue)(de);return a.useMemo(()=>{if(Ae.trim()==="")return Ce.map(Ze=>({score:0,action:Ze}));const $e=Ce.map(({name:Ze,keywords:mt})=>`${Ze} ${mt??""}`.toLowerCase()),Ye=[];if(Ae.length>Vm){const Ze=Ae.toLowerCase();for(let mt=0;mt<$e.length;mt++){const Pt=$e[mt].indexOf(Ze);if(Pt>-1){const $t=Pt*-1,Bt=Ce[mt];Ye.push({score:$t,action:Bt})}}}else{const Ze=X.split(Ae).length,mt=1/0,Et=Ze<5?4:0,[,Pt,$t]=X.search($e,Ae,Et,mt);if(Pt&&$t)for(let Bt=0;Bt<$t.length;Bt++){const At=$t[Bt],Wt=$t.length-Bt,En=Ce[Pt.idx[At]];Ye.push({score:Wt,action:En})}}return Ye},[Ce,Ae,X])}const Vm=25;function _m(){const W=a.useRef();return W.current||(W.current=new fu.A({intraMode:0,intraIns:0})),W.current}function zm(){const W=(0,Mt.of)(bd),{query:_,showing:X,searchQuery:de}=(0,os.useKBar)(Et=>({showing:Et.visualState===os.VisualState.showing,searchQuery:Et.searchQuery})),Ce=Km(de);(0,os.useRegisterActions)(Ce,[Ce]);const{searchResults:Ae,isFetchingSearchResults:$e}=iu(de,X),Ye=(0,a.useRef)(null),{overlayProps:Ze}=(0,yc.e)({isOpen:X,onClose:()=>_.setVisualState(os.VisualState.animatingOut)},Ye),{dialogProps:mt}=(0,tu.s)({},Ye);return(0,a.useEffect)(()=>{X&&(0,Ir.rR)("command_palette_opened")},[X]),Ce.length>0?a.createElement(os.KBarPortal,null,a.createElement(os.KBarPositioner,{className:W.positioner},a.createElement(os.KBarAnimator,{className:W.animator},a.createElement(nu.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...Ze,...mt},a.createElement("div",{className:W.searchContainer},a.createElement(Bs.I,{name:"search",size:"md"}),a.createElement(os.KBarSearch,{defaultPlaceholder:(0,cs.t)("command-palette.search-box.placeholder","Search or jump to..."),className:W.search}),a.createElement("div",{className:W.loadingBarContainer},$e&&a.createElement(Cm.G,{width:500,delay:0}))),a.createElement("div",{className:W.resultsContainer},a.createElement(km,{isFetchingSearchResults:$e,searchResults:Ae}))))))):null}const km=({isFetchingSearchResults:W,searchResults:_})=>{const{results:X,rootActionId:de}=gu(),Ce=(0,Mt.of)(bd),Ae=(0,cs.t)("command-palette.section.dashboard-search-results","Dashboards"),$e=(0,cs.t)("command-palette.section.folder-search-results","Folders"),Ye=(0,a.useMemo)(()=>_.filter(Pt=>Pt.id.startsWith("go/dashboard")).map(Pt=>new os.ActionImpl(Pt,{store:{}})),[_]),Ze=(0,a.useMemo)(()=>_.filter(Pt=>Pt.id.startsWith("go/folder")).map(Pt=>new os.ActionImpl(Pt,{store:{}})),[_]),mt=(0,a.useMemo)(()=>{const Pt=[...X];return Ze.length>0&&(Pt.push($e),Pt.push(...Ze)),Ye.length>0&&(Pt.push(Ae),Pt.push(...Ye)),Pt},[X,Ae,Ye,$e,Ze]);return!W&&mt.length===0?a.createElement(Tm.p,{variant:"not-found",message:(0,cs.t)("command-palette.empty-state.message","No results found")}):a.createElement(Mm,{items:mt,maxHeight:650,onRender:({item:Pt,active:$t})=>{const Bt=mt[0]===Pt;return typeof Pt=="string"?a.createElement("div",{className:(0,it.cx)(Ce.sectionHeader,Bt&&Ce.sectionHeaderFirst)},Pt):a.createElement(su,{action:Pt,active:$t,currentRootActionId:de})}})},bd=W=>({positioner:(0,it.css)({zIndex:W.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:W.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,it.css)({maxWidth:W.breakpoints.values.md,width:"100%",background:W.colors.background.primary,color:W.colors.text.primary,borderRadius:W.shape.radius.default,border:`1px solid ${W.colors.border.weak}`,overflow:"hidden",boxShadow:W.shadows.z3}),loadingBarContainer:(0,it.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,it.css)({alignItems:"center",background:W.components.input.background,borderBottom:`1px solid ${W.colors.border.weak}`,display:"flex",gap:W.spacing(1),padding:W.spacing(1,2),position:"relative"}),search:(0,it.css)({fontSize:W.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:W.components.input.text}),spinner:(0,it.css)({height:"22px"}),resultsContainer:(0,it.css)({paddingBottom:W.spacing(1)}),sectionHeader:(0,it.css)({padding:W.spacing(1.5,2,2,2),fontSize:W.typography.bodySmall.fontSize,fontWeight:W.typography.fontWeightMedium,color:W.colors.text.secondary,borderTop:`1px solid ${W.colors.border.weak}`,marginTop:W.spacing(1)}),sectionHeaderFirst:(0,it.css)({paddingBottom:W.spacing(1),borderTop:"none",marginTop:0})});var $l=e(66588),Hm=e(40276),pu=e(78685),jm=e(8887),Mc=e(18759);const hu=({children:W})=>{const _=(0,Mt.of)(Gm);return a.createElement(a.Fragment,null,W,a.createElement("span",{className:_.highlight}))},Gm=W=>({highlight:(0,it.css)({backgroundColor:W.colors.success.main,borderRadius:W.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Qm=e(50720);function Dd({children:W,isActive:_,onClick:X,target:de,url:Ce}){const Ae=(0,Mt.$j)(),$e=vu(Ae,_),Ye=!de&&Ce.startsWith("/")?Qm.N:"a",Ze=a.createElement("div",{className:$e.linkContent},W,de==="_blank"&&a.createElement(Bs.I,{"data-testid":"external-link-icon",name:"external-link-alt"}));return a.createElement(Ye,{"data-testid":Mr.Tp.components.NavMenu.item,className:(0,it.cx)($e.container,{[$e.containerActive]:_}),href:Ce,target:de,onClick:X},Ze)}Dd.displayName="MegaMenuItemText";const vu=(W,_)=>({container:(0,it.css)({alignItems:"center",color:_?W.colors.text.primary:W.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover, &:focus-visible":{color:W.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${W.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),containerActive:(0,it.css)({backgroundColor:W.colors.background.secondary,borderTopRightRadius:W.shape.radius.default,borderBottomRightRadius:W.shape.radius.default,position:"relative","&::before":{backgroundImage:W.colors.gradients.brandVertical,borderRadius:W.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:W.spacing(.5)}}),linkContent:(0,it.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"})}),xc=2;function Ym({link:W,activeItem:_,level:X=0,onClick:de}){const{chrome:Ce}=(0,Vr.Il)(),$e=Ce.useState().megaMenuDocked,Ye=(0,Dr.zy)(),Ze=W.highlightText?hu:a.Fragment,mt=Pc(W,_),Et=W===_||X===xc&&mt,[Pt,$t]=(0,pu.A)(`grafana.navigation.expanded[${W.text}]`,!!mt),Bt=X<xc&&!!(yu(W)||W.emptyMessage),At=(0,a.useRef)(null),Wt=(0,Mt.of)(Eu);return(0,a.useEffect)(()=>{mt&&$t(!0)},[mt,Ye,$e,$t]),(0,a.useEffect)(()=>{Et&&At.current&&Jm(At.current)&&At.current.scrollIntoView({block:"center"})},[Et]),W.url?a.createElement("li",{ref:At,className:Wt.listItem},a.createElement("div",{className:(0,it.cx)(Wt.menuItem,{[Wt.menuItemWithIcon]:!!(X===0&&W.icon)})},X!==0&&a.createElement(Mc.T,{level:X===xc?X-1:X,spacing:3}),X===xc&&a.createElement("div",{className:Wt.itemConnector}),a.createElement("div",{className:Wt.collapseButtonWrapper},Bt&&a.createElement(Ws.K,{"aria-label":`${Pt?"Collapse":"Expand"} section ${W.text}`,className:Wt.collapseButton,onClick:()=>$t(!Pt),name:Pt?"angle-down":"angle-right",size:"md",variant:"secondary"})),a.createElement("div",{className:Wt.collapsibleSectionWrapper},a.createElement(Dd,{isActive:Et,onClick:()=>{W.onClick?.(),de?.()},target:W.target,url:W.url},a.createElement("div",{className:(0,it.cx)(Wt.labelWrapper,{[Wt.hasActiveChild]:mt,[Wt.labelWrapperWithIcon]:!!(X===0&&W.icon)})},X===0&&W.icon&&a.createElement(Ze,null,a.createElement(Bs.I,{className:Wt.icon,name:(0,jm.Uo)(W.icon)??"link",size:"lg"})),a.createElement(me.E,{truncate:!0},W.text))))),Bt&&Pt&&a.createElement("ul",{className:Wt.children},yu(W)?W.children.filter(En=>!En.isCreateAction).map(En=>a.createElement(Ym,{key:`${W.text}-${En.text}`,link:En,activeItem:_,onClick:de,level:X+1})):a.createElement("div",{className:Wt.emptyMessage,"aria-live":"polite"},W.emptyMessage))):null}const Eu=W=>({icon:(0,it.css)({width:W.spacing(3)}),listItem:(0,it.css)({flex:1,maxWidth:"100%"}),menuItem:(0,it.css)({display:"flex",alignItems:"center",gap:W.spacing(1),height:W.spacing(4),paddingLeft:W.spacing(.5),position:"relative"}),menuItemWithIcon:(0,it.css)({paddingLeft:W.spacing(0)}),collapseButtonWrapper:(0,it.css)({display:"flex",justifyContent:"center",width:W.spacing(3),flexShrink:0}),itemConnector:(0,it.css)({position:"relative",height:"100%",width:W.spacing(1.5),"&::before":{borderLeft:`1px solid ${W.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,it.css)({margin:0}),collapsibleSectionWrapper:(0,it.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,it.css)({display:"flex",alignItems:"center",gap:W.spacing(2),minWidth:0,paddingLeft:W.spacing(1)}),labelWrapperWithIcon:(0,it.css)({paddingLeft:W.spacing(.5)}),hasActiveChild:(0,it.css)({color:W.colors.text.primary}),children:(0,it.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,it.css)({color:W.colors.text.secondary,fontStyle:"italic",padding:W.spacing(1,1.5,1,7)})});function yu(W){return!!(W.children&&W.children.length>0)}function Jm(W){const _=W.getBoundingClientRect();return _.bottom<0||_.top>=window.innerHeight}const bu="300px",Zi=a.memo((0,a.forwardRef)(({onClose:W,..._},X)=>{const de=(0,An.useSelector)(Pt=>Pt.navBarTree),Ce=(0,Mt.of)(Du),Ae=(0,Dr.zy)(),{chrome:$e}=(0,Vr.Il)(),Ye=$e.useState(),Ze=de.filter(Pt=>Pt.id!=="profile"&&Pt.id!=="help").map(Pt=>Ed(Pt,Ye.megaMenuDocked)),mt=du(Ze,Ae.pathname),Et=()=>{$e.setMegaMenuDocked(!Ye.megaMenuDocked),Ye.megaMenuDocked&&$e.setMegaMenuOpen(!1),setTimeout(()=>{document.getElementById(Ye.megaMenuDocked?"mega-menu-toggle":"dock-menu-button")?.focus()})};return a.createElement("div",{"data-testid":Mr.Tp.components.NavMenu.Menu,ref:X,..._},a.createElement("div",{className:Ce.mobileHeader},a.createElement(Bs.I,{name:"bars",size:"xl"}),a.createElement(Ws.K,{tooltip:(0,cs.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:W,size:"xl",variant:"secondary"})),a.createElement("nav",{className:Ce.content},a.createElement(Hm.E,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:Ce.itemList,"aria-label":(0,cs.t)("navigation.megamenu.list-label","Navigation")},Ze.map((Pt,$t)=>a.createElement(xt.B,{key:Pt.text,direction:$t===0?"row-reverse":"row",alignItems:"center"},$t===0&&a.createElement(Ws.K,{id:"dock-menu-button",className:Ce.dockMenuButton,tooltip:Ye.megaMenuDocked?(0,cs.t)("navigation.megamenu.undock","Undock menu"):(0,cs.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:Et,variant:"secondary"}),a.createElement(Ym,{link:Pt,onClick:Ye.megaMenuDocked?void 0:W,activeItem:mt})))))))}));Zi.displayName="MegaMenu";const Du=W=>({content:(0,it.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,it.css)({display:"flex",justifyContent:"space-between",padding:W.spacing(1,1,1,2),borderBottom:`1px solid ${W.colors.border.weak}`,[W.breakpoints.up("md")]:{display:"none"}}),itemList:(0,it.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:W.spacing(1,1,2,1),[W.breakpoints.up("md")]:{width:bu}}),dockMenuButton:(0,it.css)({display:"none",[W.breakpoints.up("xl")]:{display:"inline-flex"}})});var Oc=e(13390),qi=e(27746),Pd=e(28215);function Xm({href:W,isCurrent:_,text:X,index:de,flexGrow:Ce}){const Ae=(0,Mt.of)(Zm),$e=()=>{(0,Ir.rR)("grafana_breadcrumb_clicked",{url:W})};return a.createElement("li",{className:Ae.breadcrumbWrapper,style:{flexGrow:Ce}},_?a.createElement("span",{"data-testid":Oc.X.Breadcrumbs.breadcrumb(X),className:Ae.breadcrumb,"aria-current":"page",title:X},X):a.createElement(a.Fragment,null,a.createElement("a",{onClick:$e,"data-testid":Oc.X.Breadcrumbs.breadcrumb(X),className:(0,it.cx)(Ae.breadcrumb,Ae.breadcrumbLink),title:X,href:W},X),a.createElement("div",{className:Ae.separator,"aria-hidden":!0},a.createElement(Bs.I,{name:"angle-right"}))))}const Zm=W=>({breadcrumb:(0,it.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:W.spacing(0,.5),whiteSpace:"nowrap",color:W.colors.text.secondary}),breadcrumbLink:(0,it.css)({color:W.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,it.css)({alignItems:"center",color:W.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[W.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,it.css)({color:W.colors.text.secondary})});function qm({breadcrumbs:W,className:_}){const X=(0,Mt.of)(Pu);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:_},a.createElement("ol",{className:X.breadcrumbs},W.map((de,Ce)=>a.createElement(Xm,{...de,isCurrent:Ce===W.length-1,key:Ce,index:Ce,flexGrow:ef(Ce,W.length)}))))}function ef(W,_){return _<5&&W>0&&W<_-2||_>6&&W>1&&W<_-3?4:10}const Pu=W=>({breadcrumbs:(0,it.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var tf=e(3984),Li=e(57571),Cu=e(10804);const Tu="mega-menu-toggle";function nf({actions:W,searchBarHidden:_,sectionNav:X,pageNav:de,onToggleMegaMenu:Ce,onToggleSearchBar:Ae,onToggleKioskMode:$e}){const{chrome:Ye}=(0,Vr.Il)(),Ze=Ye.useState(),mt=(0,An.useSelector)($t=>$t.navIndex)[Pd.Id],Et=(0,Mt.of)(Su),Pt=(0,tf.Z)(X,de,mt);return a.createElement("div",{"data-testid":Oc.X.NavToolbar.container,className:Et.pageToolbar},a.createElement("div",{className:Et.menuButton},a.createElement(Ws.K,{id:Tu,name:"bars",tooltip:Ze.megaMenuOpen?(0,cs.t)("navigation.toolbar.close-menu","Close menu"):(0,cs.t)("navigation.toolbar.open-menu","Open menu"),tooltipPlacement:"bottom",size:"xl",onClick:Ce,"data-testid":Oc.X.NavBar.Toggle.button})),a.createElement(qm,{breadcrumbs:Pt,className:Et.breadcrumbsWrapper}),a.createElement("div",{className:Et.actions},W,_&&a.createElement(qi.I,{onClick:$e,narrow:!0,title:(0,cs.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),W&&a.createElement(Cu.K,null),a.createElement(qi.I,{onClick:Ae,narrow:!0,title:(0,cs.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(Bs.I,{name:_?"angle-down":"angle-up",size:"xl"}))))}const Su=W=>({breadcrumbsWrapper:(0,it.css)({display:"flex",overflow:"hidden",[W.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,it.css)({height:Li.l,display:"flex",padding:W.spacing(0,1,0,2),alignItems:"center",borderBottom:`1px solid ${W.colors.border.weak}`}),menuButton:(0,it.css)({display:"flex",alignItems:"center",marginRight:W.spacing(1)}),actions:(0,it.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:W.spacing(1),flexGrow:1,gap:W.spacing(1),minWidth:0,".body-drawer-open &":{display:"none"}})});function Mu({}){const W=(0,Mt.$j)(),{chrome:_}=(0,Vr.Il)(),X=_.useState(),de=X.searchBarHidden||X.kioskMode===An.KioskMode.TV,Ce=(0,a.useRef)(null),Ae=(0,a.useRef)(null),$e=W.transitions.duration.shortest,Ye=(0,Mt.of)(Ic,$e),Ze=X.megaMenuOpen&&!X.megaMenuDocked,mt=()=>_.setMegaMenuOpen(!1),{overlayProps:Et,underlayProps:Pt}=(0,yc.e)({isDismissable:!0,isOpen:!0,onClose:mt,shouldCloseOnInteractOutside:At=>!document.getElementById(Tu)?.contains(At)},Ce),{dialogProps:$t}=(0,tu.s)({},Ce),Bt=(0,Mt.of)(af,de);return a.createElement("div",{className:Bt.wrapper},a.createElement(yc.Sf,null,a.createElement($l.A,{nodeRef:Ce,in:Ze,unmountOnExit:!0,classNames:Ye.overlay,timeout:{enter:$e,exit:0}},a.createElement(nu.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement(Zi,{className:Bt.menu,onClose:mt,ref:Ce,...Et,...$t}))),a.createElement($l.A,{nodeRef:Ae,in:Ze,unmountOnExit:!0,classNames:Ye.backdrop,timeout:{enter:$e,exit:0}},a.createElement("div",{ref:Ae,className:Bt.backdrop,...Pt}))))}const af=(W,_)=>{const X=_?Li.l:Li.l*2;return{backdrop:(0,it.css)({backdropFilter:"blur(1px)",backgroundColor:W.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:_?0:Li.l,zIndex:W.zIndex.modalBackdrop,[W.breakpoints.up("md")]:{top:X}}),menu:(0,it.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:W.zIndex.modal,position:"fixed",top:_?0:Li.l,backgroundColor:W.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[W.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${W.colors.border.weak}`,top:X}}),wrapper:(0,it.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:W.zIndex.sidemenu})}},Ic=(W,_)=>{const X={transitionDuration:`${_}ms`,transitionTimingFunction:W.transitions.easing.easeInOut,[W.breakpoints.down("md")]:{overflow:"hidden"}},de={...X,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},Ce={...X,transitionProperty:"opacity"},Ae={width:"100%",[W.breakpoints.up("md")]:{boxShadow:W.shadows.z3,width:bu}},$e={boxShadow:"none",width:0},Ye={opacity:1},Ze={opacity:0};return{backdrop:{enter:(0,it.css)(Ze),enterActive:(0,it.css)(Ce,Ye),enterDone:(0,it.css)(Ye)},overlay:{enter:(0,it.css)($e),enterActive:(0,it.css)(de,Ae),enterDone:(0,it.css)(Ae)}}};var sf=e(24120),Ac=e(49426);function xu(W,_){if(W===_)return!0;if(!(W instanceof Object)||!(_ instanceof Object))return!1;const X=Object.keys(W),de=X.length;for(let Ce=0;Ce<de;Ce++)if(!(X[Ce]in _))return!1;for(let Ce=0;Ce<de;Ce++)if(W[X[Ce]]!==_[X[Ce]])return!1;return de===Object.keys(_).length}const Cd="grafana.navigation.docked",Td="grafana.navigation.open";class rf{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(window.innerWidth>=H.$.theme2.breakpoints.values.xl&&Ei.A.getBool(Cd,window.innerWidth>=H.$.theme2.breakpoints.values.xxl)),this.sessionStorageData=window.sessionStorage.getItem("returnToPrevious"),this.returnToPreviousData=this.sessionStorageData?JSON.parse(this.sessionStorageData):void 0,this.state=new Ac.t({chromeless:!0,sectionNav:{node:{text:(0,cs.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Ei.A.getBool(this.searchBarStorageKey,!1),megaMenuOpen:this.megaMenuDocked&&Ei.A.getBool(Td,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:cl.k.Canvas,returnToPrevious:this.returnToPreviousData}),this.setReturnToPrevious=_=>{if(!H.$.featureToggles.returnToPrevious)return;const de=this.state.getValue().returnToPrevious;(0,Ir.rR)("grafana_return_to_previous_button_created",{page:_.href,previousPage:de?.href}),this.update({returnToPrevious:_}),window.sessionStorage.setItem("returnToPrevious",JSON.stringify(_))},this.clearReturnToPrevious=_=>{if(!H.$.featureToggles.returnToPrevious)return;const de=this.state.getValue().returnToPrevious;de&&(0,Ir.rR)("grafana_return_to_previous_button_dismissed",{action:_,page:de.href}),this.update({returnToPrevious:void 0}),window.sessionStorage.removeItem("returnToPrevious")},this.setMegaMenuOpen=_=>{const{megaMenuDocked:X}=this.state.getValue();X&&Ei.A.set(Td,_),(0,Ir.rR)("grafana_mega_menu_open",{state:_}),this.update({megaMenuOpen:_})},this.setMegaMenuDocked=(_,X=!0)=>{X&&Ei.A.set(Cd,_),(0,Ir.rR)("grafana_mega_menu_docked",{state:_}),this.update({megaMenuDocked:_})},this.onToggleSearchBar=()=>{const{searchBarHidden:_,kioskMode:X}=this.state.getValue(),de=!_;Ei.A.set(this.searchBarStorageKey,de),X&&S.Ny.partial({kiosk:null}),this.update({searchBarHidden:de,kioskMode:null})},this.onToggleKioskMode=()=>{const _=this.getNextKioskMode();this.update({kioskMode:_}),S.Ny.partial({kiosk:this.getKioskUrlValue(_)})}}setMatchedRoute(_){this.currentRoute!==_&&(this.currentRoute=_,this.routeChangeHandled=!1)}update(_){const X=this.state.getValue(),de={...X};this.routeChangeHandled||(de.actions=void 0,de.pageNav=void 0,de.sectionNav={node:{text:(0,cs.t)("nav.home.title","Home")},main:{text:""}},de.chromeless=this.currentRoute?.chromeless,de.layout=cl.k.Standard,this.routeChangeHandled=!0),Object.assign(de,_),de.chromeless=de.kioskMode===An.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(de,X)||this.state.next(de)}ignoreStateUpdate(_,X){return!!(xu(_,X)||(_.sectionNav!==X.sectionNav||_.pageNav!==X.pageNav)&&_.actions===X.actions&&_.layout===X.layout&&Sd(_.sectionNav.node,X.sectionNav.node)&&Sd(_.pageNav,X.pageNav))}useState(){return(0,sf.A)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),S.Ny.partial({kiosk:null})}setKioskModeFromUrl(_){let X;switch(_){case"tv":X=An.KioskMode.TV;break;case"1":case!0:X=An.KioskMode.Full}X&&X!==this.state.getValue().kioskMode&&this.update({kioskMode:X})}getKioskUrlValue(_){switch(_){case An.KioskMode.TV:return"tv";case An.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:_,searchBarHidden:X}=this.state.getValue();return X||_===An.KioskMode.TV?(Rr.A.emit(Ii.r1.alertSuccess,[(0,cs.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),An.KioskMode.Full):_?null:An.KioskMode.TV}}function Sd(W,_){if(W===_)return!0;const X=W?.children?.find(Ce=>Ce.active),de=_?.children?.find(Ce=>Ce.active);return W?.text===_?.text&&W?.url===_?.url&&X?.url===de?.url&&Sd(W?.parentItem,_?.parentItem)}var of=e(19727);const _r=({label:W,onClick:_,onDismiss:X})=>{const de=(0,Mt.of)(Ou);return a.createElement(of.e,{className:de.buttonGroup},a.createElement(oe.$n,{icon:"angle-left",size:"sm",variant:"primary",fill:"outline",onClick:_,title:W,className:de.mainDismissableButton,"data-testid":Mr.Tp.components.ReturnToPrevious.backButton},W),a.createElement(oe.$n,{icon:"times","aria-label":(0,cs.t)("return-to-previous.dismissable-button","Close"),variant:"primary",fill:"outline",size:"sm",onClick:X,"data-testid":Mr.Tp.components.ReturnToPrevious.dismissButton}))},Ou=W=>({mainDismissableButton:(0,it.css)({width:"100%","> span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"270px",display:"inline-block"}}),buttonGroup:(0,it.css)({width:"fit-content",backgroundColor:W.colors.background.secondary})});_r.displayName="DismissableButton";const lf=({href:W,title:_})=>{const X=(0,Mt.of)(Vl),{chrome:de}=(0,Vr.Il)(),Ce=(0,a.useCallback)(()=>{S.Ny.push(W),de.clearReturnToPrevious("clicked")},[W,de]),Ae=(0,a.useCallback)(()=>{de.clearReturnToPrevious("dismissed")},[de]);return a.createElement("div",{className:X.returnToPrevious,"data-testid":Mr.Tp.components.ReturnToPrevious.buttonGroup},a.createElement(_r,{label:(0,cs.t)("return-to-previous.button.label","Back to {{title}}",{title:_}),onClick:Ce,onDismiss:Ae}))},Vl=W=>({returnToPrevious:(0,it.css)({label:"return-to-previous",display:"flex",justifyContent:"center",left:"50%",transform:"translateX(-50%)",zIndex:W.zIndex.tooltip,position:"fixed",bottom:W.spacing.x4,boxShadow:W.shadows.z3})});lf.displayName="ReturnToPrevious";var Rc=e(40672),Md=e(83122),Iu=e(42941),cf=e(87978),df=e(62372),uf=e(49185),gl=e(69386),mf=e(4172);function ff({feedUrl:W}){const _=(0,Mt.of)(gf),{state:X,getNews:de}=(0,mf.n)(W),[Ce,Ae]=(0,uf.A)();return(0,a.useEffect)(()=>{de()},[de]),X.error?a.createElement("div",{className:_.innerWrapper},X.error&&X.error.message):a.createElement("div",{ref:Ce},X.loading?a.createElement(a.Fragment,null,a.createElement(gl.K.Skeleton,{showImage:!0,width:Ae.width}),a.createElement(gl.K.Skeleton,{showImage:!0,width:Ae.width}),a.createElement(gl.K.Skeleton,{showImage:!0,width:Ae.width}),a.createElement(gl.K.Skeleton,{showImage:!0,width:Ae.width}),a.createElement(gl.K.Skeleton,{showImage:!0,width:Ae.width})):a.createElement(a.Fragment,null,Ae.width>0&&X.value?.map(($e,Ye)=>a.createElement(gl.K,{key:Ye,index:Ye,showImage:!0,width:Ae.width,data:X.value}))),a.createElement("div",{className:_.grot},a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"}))))}const gf=W=>({innerWrapper:(0,it.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,it.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:W.spacing(5,0),img:{width:"186px",height:"186px"}})});function pf({className:W}){const[_,X]=(0,Iu.A)(!1),de=(0,Mt.of)(hf);return a.createElement(a.Fragment,null,a.createElement(qi.I,{className:W,onClick:X,iconOnly:!0,icon:"rss","aria-label":"News"}),_&&a.createElement(cf._,{title:a.createElement("div",{className:de.title},a.createElement(me.E,{element:"h3"},(0,cs.t)("news.title","Latest from the blog")),a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:de.grot},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),a.createElement("div",{className:de.actions},a.createElement(Ws.K,{name:"times",variant:"secondary",onClick:X,"data-testid":Mr.Tp.components.Drawer.General.close,tooltip:(0,cs.t)("news.drawer.close","Close Drawer")}))),onClose:X,size:"md"},a.createElement(ff,{feedUrl:df.$})))}const hf=W=>({title:(0,it.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:W.spacing(2),borderBottom:`1px solid ${W.colors.border.weak}`}),grot:(0,it.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:W.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,it.css)({position:"absolute",right:W.spacing(1),top:W.spacing(2)})});var Au=e(32931);function vf({orgs:W,onSelectChange:_}){const X=(0,Mt.of)(Ef);return a.createElement(zi.i,{"aria-label":"Change organization",variant:"secondary",buttonCss:X.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:W.map(de=>({label:de.name,description:de.role,value:de})),onChange:_,icon:"building"})}const Ef=W=>({buttonCss:(0,it.css)({color:W.colors.text.secondary,"&:hover":{color:W.colors.text.primary}})});function xd({orgs:W,onSelectChange:_}){const X=(0,Mt.of)(yf),{orgName:de,orgId:Ce,orgRole:Ae}=Js.TP.user,[$e,Ye]=(0,a.useState)(()=>({label:de,value:{role:Ae,orgId:Ce,name:de},description:Ae})),Ze=mt=>{Ye(mt),_(mt)};return a.createElement(re.l6,{"aria-label":"Change organization",width:"auto",value:$e,prefix:a.createElement(Bs.I,{className:"prefix-icon",name:"building"}),className:X.select,options:W.map(mt=>({label:mt.name,description:mt.role,value:mt})),onChange:Ze})}const yf=W=>({select:(0,it.css)({border:"none",background:"none",color:W.colors.text.secondary,"&:hover":{color:W.colors.text.primary,"& .prefix-icon":(0,it.css)({color:W.colors.text.primary})}})});function bf(){const W=(0,Mt.$j)(),_=(0,An.useDispatch)(),X=(0,An.useSelector)(Ze=>Ze.organization.userOrgs),de=Ze=>{Ze.value&&((0,Au.bA)(Ze.value.orgId),S.Ny.push(`/?orgId=${Ze.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{Js.TP.isSignedIn&&_((0,Au.wV)())},[_]);const Ce=W.breakpoints.values.sm,[Ae,$e]=(0,a.useState)(!window.matchMedia(`(min-width: ${Ce}px)`).matches);if((0,Fl.Y)({breakpoint:Ce,onChange:Ze=>{$e(!Ze.matches)}}),X?.length<=1)return null;const Ye=Ae?vf:xd;return a.createElement(Ye,{orgs:X,onSelectChange:de})}var Od=e(38138);function Ru(W){const _=[];for(const X of W)X.isCreateAction&&_.push(X),X.children&&_.push(...Ru(X.children));return _}const Df=({})=>{const W=(0,Mt.of)(Pf),_=(0,Mt.$j)(),X=(0,An.useSelector)(Et=>Et.navBarTree),de=_.breakpoints.values.sm,[Ce,Ae]=(0,a.useState)(!1),[$e,Ye]=(0,a.useState)(!window.matchMedia(`(min-width: ${de}px)`).matches),Ze=(0,a.useMemo)(()=>Ru(X),[X]);(0,Fl.Y)({breakpoint:de,onChange:Et=>{Ye(!Et.matches)}});const mt=()=>a.createElement(Od.W,null,Ze.map((Et,Pt)=>a.createElement(Od.W.Item,{key:Pt,url:Et.url,label:Et.text,onClick:()=>(0,Ir.rR)("grafana_menu_item_clicked",{url:Et.url,from:"quickadd"})})));return Ze.length>0?a.createElement(a.Fragment,null,a.createElement(Md.m,{overlay:mt,placement:"bottom-end",onVisibleChange:Ae},a.createElement(qi.I,{iconOnly:!0,icon:$e?"plus-circle":"plus",isOpen:$e?void 0:Ce,"aria-label":"New"})),a.createElement(Cu.K,{className:W.separator})):null},Pf=W=>({buttonContent:(0,it.css)({alignItems:"center",display:"flex"}),buttonText:(0,it.css)({[W.breakpoints.down("md")]:{display:"none"}}),separator:(0,it.css)({[W.breakpoints.down("sm")]:{display:"none"}})});function Cf(){const W=(0,Dr.zy)(),_=(0,Mt.of)(Tf);let X=Rc.sQ.sanitizeUrl(T.I.getUrlForPartial(W,{forceLogin:"true"}));return X.startsWith("//")&&(X=X.replace(/\/+/g,"/")),a.createElement("a",{className:_.link,href:X,target:"_self"},"Sign in")}const Tf=W=>({link:(0,it.css)({paddingRight:W.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Lu=e(64539);function Lc({node:W}){const _=(0,Mt.of)(Sf),X=Ed((0,p.cloneDeep)(W),!1);return X?a.createElement(Od.W,{header:a.createElement("div",{onClick:de=>de.stopPropagation(),className:_.header},a.createElement("div",null,X.text),X.subTitle&&a.createElement("div",{className:_.subTitle},X.subTitle))},X.children?.map(de=>de.url?a.createElement(Lu.D,{url:de.url,label:de.text,icon:de.icon,target:de.target,key:de.id}):a.createElement(Lu.D,{icon:de.icon,onClick:de.onClick,label:de.text,key:de.id}))):null}const Sf=W=>({header:(0,it.css)({fontSize:W.typography.h5.fontSize,fontWeight:W.typography.h5.fontWeight,padding:W.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,it.css)({color:W.colors.text.secondary,fontSize:W.typography.bodySmall.fontSize})});var Mf=e(16797),Id=e(63917);function Bu(){const W=(0,Mt.$j)(),{query:_}=(0,os.useKBar)($e=>({kbarSearchQuery:$e.searchQuery,kbarIsOpen:$e.visualState===os.VisualState.showing})),X=W.breakpoints.values.sm,[de,Ce]=(0,a.useState)(!window.matchMedia(`(min-width: ${X}px)`).matches);(0,Fl.Y)({breakpoint:X,onChange:$e=>{Ce(!$e.matches)}});const Ae=()=>{_.toggle()};return de?a.createElement(qi.I,{iconOnly:!0,icon:"search","aria-label":(0,cs.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Ae}):a.createElement(xf,{onClick:Ae})}function xf({onClick:W}){const _=(0,Mt.of)(Ad),X=(0,a.useMemo)(()=>(0,Id.gn)(),[]);return a.createElement("div",{className:_.wrapper},a.createElement("div",{className:_.inputWrapper},a.createElement("div",{className:_.prefix},a.createElement(Bs.I,{name:"search"})),a.createElement("button",{className:_.fakeInput,onClick:W},(0,cs.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:_.suffix},a.createElement(Bs.I,{name:"keyboard"}),a.createElement(me.E,{variant:"bodySmall"},X,"+k"))))}const Ad=W=>{const _=(0,Me.n)({theme:W});return{wrapper:_.wrapper,inputWrapper:_.inputWrapper,prefix:_.prefix,suffix:(0,it.css)([_.suffix,{display:"flex",gap:W.spacing(.5)}]),fakeInput:(0,it.css)([_.input,{textAlign:"left",paddingLeft:28,color:W.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,it.css)`
          ${(0,Mf.focusCss)(W)}
        `}]),button:(0,it.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function Rd({children:W,align:_="left"}){const X=(0,Mt.of)(Of),Ce=(0,Mt.$j)().breakpoints.values.sm,[Ae,$e]=(0,a.useState)(!window.matchMedia(`(min-width: ${Ce}px)`).matches);return(0,Fl.Y)({breakpoint:Ce,onChange:Ye=>{$e(!Ye.matches)}}),Ae?a.createElement(a.Fragment,null,W):a.createElement("div",{"data-testid":"wrapper",className:(0,it.cx)(X.wrapper,{[X[_]]:_==="right"})},W)}const Of=W=>({wrapper:(0,it.css)({display:"flex",gap:W.spacing(.5),alignItems:"center"}),right:(0,it.css)({justifyContent:"flex-end"}),left:(0,it.css)({}),center:(0,it.css)({})}),Uu=a.memo(function(){const _=(0,Mt.of)(If),X=(0,An.useSelector)(Ze=>Ze.navIndex),de=(0,Dr.zy)(),Ce=(0,p.cloneDeep)(X.help),Ae=Ce?cu(Ce):void 0,$e=X.profile;let Ye=z.config.appSubUrl||"/";return!z.config.bootData.user.isSignedIn&&!z.config.anonymousEnabled&&(Ye=Rc.sQ.sanitizeUrl(T.I.getUrlForPartial(de,{forceLogin:"true"}))),a.createElement("div",{className:_.layout},a.createElement(Rd,null,a.createElement("a",{className:_.logo,href:Ye,title:"Go to home"},a.createElement(tc.M.MenuLogo,{className:_.img})),a.createElement(bf,null)),a.createElement(Rd,null,a.createElement(Bu,null)),a.createElement(Rd,{align:"right"},a.createElement(Df,null),Ae&&a.createElement(Md.m,{overlay:()=>a.createElement(Lc,{node:Ae}),placement:"bottom-end"},a.createElement(qi.I,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),z.config.newsFeedEnabled&&a.createElement(pf,null),!Fs.TP.user.isSignedIn&&a.createElement(Cf,null),$e&&a.createElement(Md.m,{overlay:()=>a.createElement(Lc,{node:$e}),placement:"bottom-end"},a.createElement(qi.I,{className:_.profileButton,imgSrc:Fs.TP.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),If=W=>({layout:(0,it.css)({height:Li.l,display:"flex",gap:W.spacing(1),alignItems:"center",padding:W.spacing(0,1,0,2),borderBottom:`1px solid ${W.colors.border.weak}`,justifyContent:"space-between",[W.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,it.css)({height:W.spacing(3),width:W.spacing(3)}),logo:(0,it.css)({display:"flex"}),profileButton:(0,it.css)({padding:W.spacing(0,.25),img:{borderRadius:W.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function Af({children:W}){const{chrome:_}=(0,Vr.Il)(),X=_.useState(),de=X.searchBarHidden||X.kioskMode===An.KioskMode.TV,Ce=(0,Mt.$j)(),Ae=(0,Mt.of)(Rf),$e=Ce.breakpoints.values.xl,Ye=Ei.A.getBool(Cd,!0);(0,Fl.Y)({breakpoint:$e,onChange:At=>{Ye&&(_.setMegaMenuDocked(At.matches,!1),_.setMegaMenuOpen(At.matches?Ei.A.getBool(Td,X.megaMenuOpen):!1))}});const Ze=(0,it.cx)({[Ae.content]:!0,[Ae.contentNoSearchBar]:de,[Ae.contentChromeless]:X.chromeless}),mt=()=>{_.setMegaMenuOpen(!X.megaMenuOpen)},{pathname:Et,search:Pt}=S.Ny.getLocation(),$t=Et+Pt,Bt=z.Ay.featureToggles.returnToPrevious&&X.returnToPrevious&&$t!==X.returnToPrevious.href;return(0,a.useEffect)(()=>{X.returnToPrevious&&$t===X.returnToPrevious.href&&_.clearReturnToPrevious("auto_dismissed")},[_,$t]),(0,a.useEffect)(()=>{const At=(0,S.SE)(Pt);_.setKioskModeFromUrl(At.kiosk)},[_,Pt]),a.createElement("div",{className:Pm()("main-view",{"main-view--search-bar-hidden":de&&!X.chromeless,"main-view--chrome-hidden":X.chromeless})},!X.chromeless&&a.createElement(a.Fragment,null,a.createElement(oe.z9,{className:Ae.skipLink,href:"#pageContent"},"Skip to main content"),a.createElement("header",{className:(0,it.cx)(Ae.topNav)},!de&&a.createElement(Uu,null),a.createElement(nf,{searchBarHidden:de,sectionNav:X.sectionNav.node,pageNav:X.pageNav,actions:X.actions,onToggleSearchBar:_.onToggleSearchBar,onToggleMegaMenu:mt,onToggleKioskMode:_.onToggleKioskMode}))),a.createElement("div",{className:Ze},a.createElement("div",{className:Ae.panes},!X.chromeless&&X.megaMenuDocked&&X.megaMenuOpen&&a.createElement(Zi,{className:Ae.dockedMegaMenu,onClose:()=>_.setMegaMenuOpen(!1)}),a.createElement("main",{className:Ae.pageContainer,id:"pageContent"},W))),!X.chromeless&&!X.megaMenuDocked&&a.createElement(Mu,null),!X.chromeless&&a.createElement(zm,null),Bt&&X.returnToPrevious&&a.createElement(lf,{href:X.returnToPrevious.href,title:X.returnToPrevious.title}))}const Rf=W=>({content:(0,it.css)({display:"flex",flexDirection:"column",paddingTop:Li.l*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,it.css)({paddingTop:Li.l}),contentChromeless:(0,it.css)({paddingTop:0}),dockedMegaMenu:(0,it.css)({background:W.colors.background.primary,borderRight:`1px solid ${W.colors.border.weak}`,display:"none",zIndex:W.zIndex.navbarFixed,[W.breakpoints.up("xl")]:{display:"block"}}),topNav:(0,it.css)({display:"flex",position:"fixed",zIndex:W.zIndex.navbarFixed,left:0,right:0,background:W.colors.background.primary,flexDirection:"column"}),panes:(0,it.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[W.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,it.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0,overflow:"auto","@media print":{overflow:"visible"},"@page":{margin:0,size:"auto",padding:0}}),skipLink:(0,it.css)({position:"absolute",top:-1e3,":focus":{left:W.spacing(1),top:W.spacing(1),zIndex:W.zIndex.portal}})});var Bc=e(82467),Nu=e(16001),Uc=e(3169),Lf=e(94701);function Bf({appNotification:W,onClearNotification:_}){const X=(0,Mt.of)(Uf);(0,Lf.A)(()=>{setTimeout(()=>{_(W.id)},An.timeoutMap[W.severity])});const de=W.component||W.text||W.traceId;return a.createElement(wt.F,{severity:W.severity,title:W.title,onRemove:()=>_(W.id),elevated:!0},de&&a.createElement("div",{className:X.wrapper},a.createElement("span",null,W.component||W.text),W.traceId&&a.createElement("span",{className:X.trace},"Trace ID: ",W.traceId)))}function Uf(W){return{wrapper:(0,it.css)({display:"flex",flexDirection:"column"}),trace:(0,it.css)({fontSize:W.typography.pxToRem(10)})}}function Nf(){const W=(0,An.useSelector)(Ce=>(0,Nu.fX)(Ce.appNotifications)),_=(0,An.useDispatch)(),X=(0,Mt.of)(wf);(0,a.useEffect)(()=>{Rr.A.on(Ii.r1.alertWarning,Ce=>_((0,Bc.dx)((0,Uc.q8)(...Ce)))),Rr.A.on(Ii.r1.alertSuccess,Ce=>_((0,Bc.dx)((0,Uc.tZ)(...Ce)))),Rr.A.on(Ii.r1.alertError,Ce=>_((0,Bc.dx)((0,Uc.gi)(...Ce))))},[_]);const de=Ce=>{_((0,Bc.Do)(Ce))};return a.createElement("div",{className:X.wrapper},a.createElement(sa.gW,null,W.map((Ce,Ae)=>a.createElement(Bf,{key:`${Ce.id}-${Ae}`,appNotification:Ce,onClearNotification:de}))))}function wf(W){return{wrapper:(0,it.css)({label:"app-notifications-list",zIndex:W.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}function Ff(W){const[_,X]=(0,a.useState)({component:null,props:{}}),de=(0,a.useMemo)(()=>{function Ce($e,Ye){X({component:$e,props:Ye})}function Ae(){X({component:null,props:{}})}return{component:_.component,props:{..._.props,isOpen:!0,onDismiss:Ae},showModal:Ce,hideModal:Ae}},[_]);return(0,a.useEffect)(()=>{Rr.A.subscribe(Xr.S8,({payload:Ae})=>{X({component:Ae.component,props:Ae.props})}),Rr.A.subscribe(Xr.bY,Ae=>{Wf(Ae,X)});let Ce="";S.Ny.getHistory().listen(Ae=>{Ae.pathname!==Ce&&X({component:null,props:{}}),Ce=Ae.pathname})},[]),a.createElement(ec.wE.Provider,{value:de},W.children)}function Wf({payload:W},_){const{confirmText:X,onConfirm:de=()=>{},onDismiss:Ce,text2:Ae,altActionText:$e,onAltAction:Ye,noText:Ze,text:mt,text2htmlBind:Et,yesText:Pt="Yes",icon:$t,title:Bt="Confirm",yesButtonVariant:At}=W,Wt=()=>_({component:null,props:{}}),En={confirmText:Pt,confirmButtonVariant:At,confirmationText:X,icon:$t,title:Bt,body:mt,description:Ae&&Et?Rc.sQ.sanitize(Ae):Ae,isOpen:!0,dismissText:Ze,onConfirm:()=>{de(),Wt()},onDismiss:()=>{Ce?.(),Wt()},onAlternative:Ye?()=>{Ye(),Wt()}:void 0,alternativeText:$e};_({component:ml.u,props:En})}var Kf=e(66899),$f=e.n(Kf),wu=e(52446);function Vf({error:W,errorInfo:_}){const X=(0,Dr.zy)(),de=W?.name==="ChunkLoadError",Ce=(0,Mt.of)(_f);return(0,a.useEffect)(()=>{de&&X.search.indexOf("chunkNotFound")===-1&&(window.location.href=T.I.getUrlForPartial(X,{chunkNotFound:!0}))},[X,de]),a.createElement(wr.Y,{navId:"error",layout:cl.k.Canvas},a.createElement("div",{className:Ce.container},de&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement(oe.$n,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload"),a.createElement(wu.D,{title:"Error details",error:W,errorInfo:_})),!de&&a.createElement(wu.D,{title:"An unexpected error happened",error:W,errorInfo:_})))}const _f=W=>({container:(0,it.css)({width:"500px",margin:W.spacing(8,"auto")})});function Fp(){const W=(0,Mt.of)(Vp);return a.createElement("div",{className:W.container,"aria-live":"polite",role:"status","aria-label":(0,cs.t)("bouncing-loader.label","Loading")},a.createElement("div",{className:W.bounce},a.createElement("img",{alt:"",src:"public/img/grafana_icon.svg",className:W.logo})))}const Wp=(0,it.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),Kp=(0,it.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),$p=(0,it.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),Vp=W=>({container:(0,it.css)({opacity:0,animationName:Wp,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"}),bounce:(0,it.css)({textAlign:"center",animationName:Kp,animationDuration:"0.9s",animationIterationCount:"infinite"}),logo:(0,it.css)({display:"inline-block",animationName:$p,animationDuration:"0.9s",animationIterationCount:"infinite",width:"60px",height:"60px"})});function _p(){const W=(0,Mt.of)(zp);return a.createElement("div",{className:W.loadingPage},a.createElement(Fp,null))}const zp=W=>({loadingPage:(0,it.css)({backgroundColor:W.colors.background.primary,height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function kp(W){const{chrome:_,keybindings:X}=(0,Vr.Il)();return _.setMatchedRoute(W.route),(0,a.useLayoutEffect)(()=>{X.clearAndInitGlobalBindings(W.route)},[X,W.route]),(0,a.useEffect)(()=>(zf(W.route),kf(),(0,S.Lc)("GrafanaRoute",!1,"Mounted",W.match),()=>{(0,S.Lc)("GrafanaRoute",!1,"Unmounted",W.route),zf(W.route,!0)}),[]),(0,a.useEffect)(()=>{kf(),(0,Ir.Jy)(),(0,S.Lc)("GrafanaRoute",!1,"Updated",W)}),(0,S.Lc)("GrafanaRoute",!1,"Rendered",W.route),a.createElement(oo.tH,null,({error:de,errorInfo:Ce})=>de?a.createElement(Vf,{error:de,errorInfo:Ce}):a.createElement(a.Suspense,{fallback:a.createElement(_p,null)},a.createElement(W.route.component,{...W,queryParams:(0,S.SE)(W.location.search)})))}function Hp(W){return W.pageClass?W.pageClass.split(" "):[]}function zf(W,_=!1){for(const X of Hp(W))_?document.body.classList.remove(X):document.body.classList.add(X)}function kf(){document.body.classList.remove("sidemenu-open--xs");const W=document.getElementById("tooltip");W?.parentElement?.removeChild(W);const _=document.querySelectorAll(".tooltip");for(let X=0;X<_.length;X++){const de=_[X];de.parentElement?.removeChild(de)}for(const X of $f().drops)X.destroy()}var jp=e(96378),Fu=e(78731);class Gp extends a.PureComponent{constructor(){super(...arguments),this.styles=Qp(H.$.theme2),this.state={},this.initListener=()=>{const _=(0,Fu.oF)();_&&(this.subscription=_.getConnectionState().subscribe({next:X=>{this.setState({show:!X})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:_}=this.state;return _?!Js.TP.isSignedIn||!H.$.liveEnabled||Js.TP.user.orgRole===gc.X.None?null:a.createElement("div",{className:this.styles.foot},a.createElement(wt.F,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Qp=(0,dl.N)(W=>({foot:(0,it.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,it.css)`
      max-width: 400px;
      margin: auto;
    `}));let Hf=[],jf=[];function Yh(W){Hf.push(W)}function Jh(W){jf.push(W)}class Yp extends a.Component{constructor(_){super(_),this.renderRoute=X=>{const de=X.roles?X.roles():[];return a.createElement(ql.CompatRoute,{exact:X.exact===void 0?!0:X.exact,sensitive:X.sensitive===void 0?!1:X.sensitive,path:X.path,key:X.path,render:Ce=>de?.length&&!de.some(Ae=>Js.TP.hasRole(Ae))?a.createElement(Dr.rd,{to:"/"}):a.createElement(kp,{...Ce,route:X})})},this.state={}}async componentDidMount(){await bm(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(Dr.dO,null,pm().map(_=>this.renderRoute(_)))}render(){const{app:_}=this.props,{ready:X}=this.state;(0,S.Lc)("AppWrapper",!1,"rendering");const de=Ce=>{(0,Ir.rR)("command_palette_action_selected",{actionId:Ce.id,actionName:Ce.name})};return a.createElement(ni.Provider,{store:Qs.M_},a.createElement(oo.Xw,{style:"page"},a.createElement(Vr.YE.Provider,{value:_.context},a.createElement(jp.N,{value:H.$.theme2},a.createElement(os.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:de}}},a.createElement(Dr.Ix,{history:S.Ny.getHistory()},a.createElement(ql.CompatRouter,null,a.createElement(Ff,null,a.createElement(Pr.k,null),a.createElement("div",{className:"grafana-app"},a.createElement(Af,null,jf.map((Ce,Ae)=>a.createElement(Ce,{key:Ae.toString()})),a.createElement(Ec,null),a.createElement(Nf,null),X&&this.renderRoutes(),Hf.map((Ce,Ae)=>a.createElement(Ce,{key:Ae.toString()})))),a.createElement(Gp,null),a.createElement(ec.EO,null),a.createElement(Hc.qB,null)))))))))}}var Gf=e(33919);function Jp({actions:W,children:_,info:X,pageNav:de,layout:Ce,renderTitle:Ae,subTitle:$e}){const Ye=(0,a.useContext)(hc.A);return a.createElement(wr.Y,{navModel:Ye.sectionNav,pageNav:de,layout:Ce,actions:W,renderTitle:Ae,info:X,subTitle:$e},a.createElement(wr.Y.Contents,null,_))}var Qf=e(8867),Ld=e(91324),Nc=e(23227),Yf=e(83712),Jf=e(93455),Xf=e(99443),Zf=e(70699),qf=e(63997),eg=e(5798),tg=e(61061),ng=e(85346),ag=e(41731),Wu=e(36294),sg=e(62575),rg=e(27798),og=e(53392),ig=e(17694),lg=e(27743),cg=e(66509),dg=e(98368),ug=e(67341),mg=e(51472),fg=e(90517),Ku=e(78412),Xp=e(24548),Zp=e(41366),qp=e(63892),eh=e(22965),th=e(19336),nh=e(66163),ah=e(30259),sh=e(96725),rh=e(30283),gg=e(53141),pg=e(69382),hg=e(88790),vg=e(388),Eg=e(58689),$u=e(29342),yg=e(27583),bg=e(34153),Dg=e(13852),_l=e(5614),Pg=e(34715),Cg=e(25853),zl=e(98020),Bd=e(90088),el=e(79764),Tg=e(5422),Sg=e(61987),Mg=e(88225),xg=e(13896),Og=e(68018),Ig=e(63023),Vu=e(32437),_u=e(99996),Ag=e(99641),Rg=e(70649),Lg=e(98828),zu=e(79151),Bg=e(53663),Bi=e(27193),ku=e(53123),Ug=e(4458),wc=e(28643),Ng=e(33311),wg=e(90841),Fg=e(49018),oh=e(63738),Ud=e(63263),Wg=e(29340),Jo=e(45937),kl=e(29339),Hu=e(6820),Kg=e(77444),$g=e(3327),Nd=e(70794),Ui=e(11273),ju=e(80641),Vg=e(28867),_g=e(11220),zg=e(23544),wd=e(48339),Gu=e(4240),kg=e(95224),Hg=e(82382),jg=e(87048),$o=e(53007),ih=e(12179),Qu=e(17226),Gg=e(42982),Qg=e(42806),io=e(50459),ri=e(84879),Yu=e(52664),Yg=e(26868),Fc=e(72805),Jg=e(73575),Xg=e(56811),Zg=e(53896),qg=e(97918),ep=e(81422),tp=e(29130),np=e(45376),ap=e(73642),sp=e(83267),Ju=e(80021),rp=e(41684),op=e(72215),ip=e(81656),lp=e(29424),cp=e(7682),Hl=e(51764),Fd=e(76151),Xu=e(30781),dp=e(65972),up=e(90756),mp=e(24289),fp=e(84472),yi=e(71533),gp=e(45298),pp=e(96906),hp=e(95311),Wd=e(82349),vp=e(43482),Ep=e(49935),j=e(48761),ce=e(97231),ve=e(13835),Ie=e(91381),Ke=e(52859),Ge=e(25928),nt=e(36714),gt=e(30815),vt=e(3465),bt=e(39012),Rt=e(94675),Lt=e(40051),Nt=e(4543),St=e(89579),Qt=e(82524),Zt=e(31115),jt=e(99003),Yt=e(95684),tn=e(1624),Pn=e(93644),ln=e(96619),Zn=e(61748),Nn=e(57169),zn=e(11769),Aa=e(26551),ma=e(40295),Da=e(38514),Sn=e(81312),wn=e(64298),Ln=e(70866),Wa=e(30587),Za=e(44850),ds=e(54556),la=e(81615),ha=e(82798),as=e(8687),Ps=e(77270),Ms=e(10742),Pa=e(41404),Ka=e(72579),Qn=e(39973),Tn=e(56963),ca=e(8807),Ra=e(24109),Ba=e(46255),Fa=e(68636),ls=e(74305);let Ns=!1;function kt(W,_){Qf.cacheStore[_]={content:W,status:"loaded"}}function nr(){let W="public/img/icons/";const _=typeof window<"u"&&window.__grafana_public_path__;return _&&(W=_+"img/icons/"),X=>W+X}function Yn(){if(Ns)return;Ns=!0;const W=nr();kt(Ld,W("unicons/at.svg")),kt(Nc,W("unicons/adjust-circle.svg")),kt(Yf,W("unicons/align-left.svg")),kt(Jf,W("unicons/align-right.svg")),kt(Xf,W("unicons/angle-double-down.svg")),kt(Zf,W("unicons/angle-double-right.svg")),kt(qf,W("unicons/angle-down.svg")),kt(eg,W("unicons/angle-left.svg")),kt(tg,W("unicons/angle-right.svg")),kt(ng,W("unicons/angle-up.svg")),kt(ag,W("unicons/apps.svg")),kt(Wu,W("unicons/arrow.svg")),kt(sg,W("unicons/arrow-down.svg")),kt(rg,W("unicons/arrow-from-right.svg")),kt(og,W("unicons/arrow-left.svg")),kt(ig,W("unicons/arrow-random.svg")),kt(lg,W("unicons/arrow-right.svg")),kt(cg,W("unicons/arrow-to-right.svg")),kt(dg,W("unicons/arrow-up.svg")),kt(ug,W("unicons/arrows-h.svg")),kt(mg,W("unicons/backward.svg")),kt(fg,W("unicons/bars.svg")),kt(Ku,W("unicons/bell.svg")),kt(Xp,W("unicons/bell-slash.svg")),kt(Zp,W("unicons/bolt.svg")),kt(qp,W("unicons/book.svg")),kt(eh,W("unicons/book-open.svg")),kt(th,W("unicons/brackets-curly.svg")),kt(nh,W("unicons/bug.svg")),kt(ah,W("unicons/building.svg")),kt(sh,W("unicons/calculator-alt.svg")),kt(rh,W("unicons/calendar-alt.svg")),kt(gg,W("unicons/calendar-slash.svg")),kt(pg,W("unicons/camera.svg")),kt(hg,W("unicons/channel-add.svg")),kt(vg,W("unicons/chart-line.svg")),kt(Eg,W("unicons/check.svg")),kt($u,W("unicons/check-circle.svg")),kt(yg,W("unicons/circle.svg")),kt(bg,W("unicons/clipboard-alt.svg")),kt(Dg,W("unicons/clock-nine.svg")),kt(_l,W("unicons/cloud.svg")),kt(Pg,W("unicons/cloud-download.svg")),kt(Cg,W("unicons/code-branch.svg")),kt(zl,W("unicons/cog.svg")),kt(Bd,W("unicons/columns.svg")),kt(el,W("unicons/comment-alt.svg")),kt(Tg,W("unicons/comment-alt-share.svg")),kt(Sg,W("unicons/comments-alt.svg")),kt(Mg,W("unicons/compass.svg")),kt(xg,W("unicons/copy.svg")),kt(Og,W("unicons/corner-down-right-alt.svg")),kt(Ig,W("unicons/cube.svg")),kt(Vu,W("unicons/dashboard.svg")),kt(_u,W("unicons/database.svg")),kt(Ag,W("unicons/document-info.svg")),kt(Rg,W("unicons/download-alt.svg")),kt(Lg,W("unicons/draggabledots.svg")),kt(zu,W("unicons/edit.svg")),kt(Bg,W("unicons/ellipsis-v.svg")),kt(Bi,W("unicons/ellipsis-h.svg")),kt(ku,W("unicons/envelope.svg")),kt(Ug,W("unicons/exchange-alt.svg")),kt(wc,W("unicons/exclamation-circle.svg")),kt(Ng,W("unicons/exclamation-triangle.svg")),kt(wg,W("unicons/external-link-alt.svg")),kt(Fg,W("unicons/eye.svg")),kt(oh,W("unicons/eye-slash.svg")),kt(Ud,W("unicons/file-alt.svg")),kt(Wg,W("unicons/file-blank.svg")),kt(Jo,W("unicons/filter.svg")),kt(kl,W("unicons/folder.svg")),kt(Hu,W("unicons/folder-open.svg")),kt(Kg,W("unicons/folder-plus.svg")),kt($g,W("unicons/folder-upload.svg")),kt(Nd,W("unicons/forward.svg")),kt(Ui,W("unicons/graph-bar.svg")),kt(ju,W("unicons/history.svg")),kt(Vg,W("unicons/history-alt.svg")),kt(_g,W("unicons/home-alt.svg")),kt(zg,W("unicons/import.svg")),kt(wd,W("unicons/info.svg")),kt(Gu,W("unicons/info-circle.svg")),kt(kg,W("unicons/k6.svg")),kt(Hg,W("unicons/key-skeleton-alt.svg")),kt(jg,W("unicons/keyboard.svg")),kt($o,W("unicons/link.svg")),kt(ih,W("unicons/list-ul.svg")),kt(Qu,W("unicons/lock.svg")),kt(Gg,W("unicons/minus.svg")),kt(Qg,W("unicons/minus-circle.svg")),kt(io,W("unicons/mobile-android.svg")),kt(ri,W("unicons/monitor.svg")),kt(Yu,W("unicons/pause.svg")),kt(Yg,W("unicons/pen.svg")),kt(Fc,W("unicons/play.svg")),kt(Jg,W("unicons/plug.svg")),kt(Xg,W("unicons/plus.svg")),kt(Zg,W("unicons/plus-circle.svg")),kt(qg,W("unicons/power.svg")),kt(ep,W("unicons/presentation-play.svg")),kt(tp,W("unicons/process.svg")),kt(np,W("unicons/question-circle.svg")),kt(ap,W("unicons/repeat.svg")),kt(sp,W("unicons/rocket.svg")),kt(Ju,W("unicons/rss.svg")),kt(rp,W("unicons/save.svg")),kt(op,W("unicons/search.svg")),kt(ip,W("unicons/search-minus.svg")),kt(lp,W("unicons/search-plus.svg")),kt(cp,W("unicons/share-alt.svg")),kt(Hl,W("unicons/shield.svg")),kt(Fd,W("unicons/signal.svg")),kt(Xu,W("unicons/signin.svg")),kt(dp,W("unicons/signout.svg")),kt(up,W("unicons/sitemap.svg")),kt(mp,W("unicons/slack.svg")),kt(fp,W("unicons/sliders-v-alt.svg")),kt(yi,W("unicons/sort-amount-down.svg")),kt(gp,W("unicons/sort-amount-up.svg")),kt(pp,W("unicons/square-shape.svg")),kt(hp,W("unicons/star.svg")),kt(Wd,W("unicons/step-backward.svg")),kt(vp,W("unicons/sync.svg")),kt(Ep,W("unicons/stopwatch.svg")),kt(j,W("unicons/table.svg")),kt(ce,W("unicons/tag-alt.svg")),kt(ve,W("unicons/times.svg")),kt(Ie,W("unicons/trash-alt.svg")),kt(Ke,W("unicons/unlock.svg")),kt(Ge,W("unicons/upload.svg")),kt(nt,W("unicons/user.svg")),kt(gt,W("unicons/users-alt.svg")),kt(vt,W("unicons/wrap-text.svg")),kt(bt,W("unicons/cloud-upload.svg")),kt(Rt,W("unicons/credit-card.svg")),kt(Lt,W("unicons/file-copy-alt.svg")),kt(Nt,W("unicons/fire.svg")),kt(St,W("unicons/hourglass.svg")),kt(Qt,W("unicons/layer-group.svg")),kt(Zt,W("unicons/layers-alt.svg")),kt(jt,W("unicons/line-alt.svg")),kt(Yt,W("unicons/list-ui-alt.svg")),kt(tn,W("unicons/message.svg")),kt(Pn,W("unicons/palette.svg")),kt(ln,W("unicons/percentage.svg")),kt(Zn,W("unicons/shield-exclamation.svg")),kt(Nn,W("unicons/plus-square.svg")),kt(zn,W("unicons/x.svg")),kt(Aa,W("unicons/capture.svg")),kt(ma,W("custom/gf-grid.svg")),kt(Da,W("custom/gf-landscape.svg")),kt(Sn,W("custom/gf-layout-simple.svg")),kt(wn,W("custom/gf-portrait.svg")),kt(Ln,W("custom/gf-show-context.svg")),kt(Wa,W("custom/gf-bar-alignment-after.svg")),kt(Za,W("custom/gf-bar-alignment-before.svg")),kt(ds,W("custom/gf-bar-alignment-center.svg")),kt(la,W("custom/gf-interpolation-linear.svg")),kt(ha,W("custom/gf-interpolation-smooth.svg")),kt(as,W("custom/gf-interpolation-step-after.svg")),kt(Ps,W("custom/gf-interpolation-step-before.svg")),kt(Ms,W("custom/gf-logs.svg")),kt(Pa,W("custom/gf-movepane-left.svg")),kt(Ka,W("custom/gf-movepane-right.svg")),kt(Qn,W("mono/favorite.svg")),kt(Tn,W("mono/grafana.svg")),kt(ca,W("mono/heart.svg")),kt(Ra,W("mono/heart-break.svg")),kt(Ba,W("mono/panel-add.svg")),kt(Fa,W("mono/library-panel.svg")),kt(ls,W("unicons/record-audio.svg"))}function ta(){self.MonacoEnvironment={getWorker(W,_){const X=D.l.getIfExists(_);return X?X.init():_==="json"?new $r.c(new URL(e.p+e.u(1162),e.b)):_==="css"||_==="scss"||_==="less"?new $r.c(new URL(e.p+e.u(9044),e.b)):_==="html"||_==="handlebars"||_==="razor"?new $r.c(new URL(e.p+e.u(4064),e.b)):_==="typescript"||_==="javascript"?new $r.c(new URL(e.p+e.u(2150),e.b)):new $r.c(new URL(e.p+e.u(1821),e.b))}}}var ya=e(76885);function Ya(W){const _=W.target instanceof Element&&qa(W.target);if(!(W.ctrlKey||W.metaKey||W.defaultPrevented)&&_){let X=_.getAttribute("href");const de=_.getAttribute("target");if(X&&!de){const Ce=ya.kM.parseKeyValue(X.split("?")[1]),Ae=Ce.orgId&&Number(Ce.orgId)!==z.config.bootData.user.orgId;if((0,S.Lc)("utils",!1,"intercepting link click",W),W.preventDefault(),X=T.I.stripBaseFromUrl(X),X[0]!=="/"||Ae)if(X.indexOf("://")>0||X.indexOf("mailto:")===0||Ae){window.location.href=X;return}else if(X.indexOf("#")===0){window.location.hash=X;return}else X=`/${X}`;S.Ny.push(X)}}}function qa(W){for(;W!==null&&W.tagName;){if(W.tagName.toUpperCase()==="A")return W;W=W.parentElement}return null}class xs{constructor(_){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=_??1e3*60*5}start(){const _=(0,Fu.oF)();_&&_.getConnectionState().subscribe(X=>{X&&this._checkForUpdates()}),S.Ny.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=S.Ny.getLocation().pathname}locationUpdated(_){if(this.prevLocationPath===_.pathname)return;const X=_.pathname.split("/");X[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():X[1]==="d"?this.reloadIfUpdateDetected():this.hasUpdates&&(0,Ir.rR)("new_frontend_assets_reload_ignored",{newLocation:_.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=_.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const _=this.previous,X=await(0,M.AI)().get("/api/frontend/assets");_&&!(0,p.isEqual)(_,X)&&(this.hasUpdates=!0,(0,Ir.rR)("new_frontend_assets_detected",{assets:_.assets!==X.assets,plugins:_.plugins!==X.plugins,version:_.version!==X.version,flags:_.flags!==X.flags})),this.previous=X}reloadIfUpdateDetected(){this.hasUpdates&&((0,Ir.rR)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var gs=e(27677),pr=e(91040),yo=e(40621);function oi(W,_=!1){return new Promise(X=>{const de=document.createElement("script");de.onload=X,de.src=W,de.async=_,document.head.appendChild(de)})}const Io=(0,pr.h)("EchoSrv"),Ni=Io.logger;(0,yo.h)("echo",void 0,Io);class jl{constructor(_){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const X of this.backends)X.flush()},this.addBackend=X=>{Ni("Adding backend",!1,X),this.backends.push(X)},this.addEvent=(X,de)=>{const Ce=this.getMeta(),Ae={...X,meta:{...Ce,...de}};for(const $e of this.backends)($e.supportedEvents.length===0||$e.supportedEvents.indexOf(Ae.type)>-1)&&$e.addEvent(Ae);Ni(`${X.type} event`,!1,{...X.payload,meta:Ae.meta})},this.getMeta=()=>({sessionId:"",userId:Js.TP.user.id,userLogin:Js.TP.user.login,userSignedIn:Js.TP.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,..._},setInterval(this.flush,this.config.flushInterval)}}var Wc=e(42614);class Xo{constructor(_){this.options=_,this.buffer=[],this.supportedEvents=[K.on.Performance],this.addEvent=X=>{this.buffer.push(X.payload)},this.flush=()=>{this.buffer.length!==0&&(gs.IB.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var Zo=e(61298);class pl{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview,K.on.Interaction],this.addEvent=Ce=>{window.applicationInsights&&((0,Zo.nB)(Ce)&&window.applicationInsights.trackPageView?.(),(0,Zo.fX)(Ce)&&window.applicationInsights.trackEvent?.({name:Ce.payload.interactionName,properties:Ce.payload.properties}))},this.flush=()=>{};const X={config:{connectionString:_.connectionString,endpointUrl:_.endpointUrl}};oi("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const Ce=new window.Microsoft.ApplicationInsights.ApplicationInsights(X);window.applicationInsights=Ce.loadAppInsights()})}}class Zr{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=Ce=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:Ce.payload.page})},this.flush=()=>{};const X=`https://www.googletagmanager.com/gtag/js?id=${_.googleAnalyticsId}`;oi(X,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const de={page_path:window.location.pathname};_.user&&(de.user_id=_.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=_.googleAnalytics4SendManualPageViews,window.gtag("config",_.googleAnalyticsId,de)}}class Gl{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview],this.trackedUserId=null,this.addEvent=Ce=>{if(!window.ga)return;window.ga("set",{page:Ce.payload.page}),window.ga("send","pageview");const{userSignedIn:Ae,userId:$e}=Ce.meta;Ae&&$e!==this.trackedUserId&&(this.trackedUserId=$e,window.ga("set","userId",$e))},this.flush=()=>{};const X=`https://www.google-analytics.com/analytics${_.debug?"_debug":""}.js`;oi(X);const de=window.ga=window.ga||function(){(de.q=de.q||[]).push(arguments)};de.l=+new Date,de("create",_.googleAnalyticsId,"auto"),de("set","anonymizeIp",!0)}}class Kd{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview,K.on.Interaction,K.on.ExperimentView],this.addEvent=Ae=>{window.rudderanalytics&&((0,Zo.nB)(Ae)&&window.rudderanalytics.page?.(),(0,Zo.fX)(Ae)&&window.rudderanalytics.track?.(Ae.payload.interactionName,Ae.payload.properties),(0,Zo.p6)(Ae)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Ae.payload.experimentId,experiment_group:Ae.payload.experimentGroup,experiment_variant:Ae.payload.experimentVariant}))},this.flush=()=>{};const X=_.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";oi(X);const de=window.rudderanalytics=[],Ce=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Ae=0;Ae<Ce.length;Ae++){const $e=Ce[Ae];de[$e]=function(Ye){return function(){de.push([Ye].concat(Array.prototype.slice.call(arguments)))}}($e)}if(window.rudderanalytics?.load?.(_.writeKey,_.dataPlaneUrl,{configUrl:_.configUrl,destSDKBaseURL:_.integrationsUrl}),_.user){const{identifier:Ae,intercomIdentifier:$e}=_.user.analytics,Ye={};$e&&(Ye.Intercom={user_hash:$e}),window.rudderanalytics?.identify?.(Ae,{email:_.user.email,orgId:_.user.orgId,language:_.user.language,version:_.buildInfo.version,edition:_.buildInfo.edition},Ye)}}}var Xh=e(35896),Zh=e(88285),qh=e(74940),ev=e(36043),tv=e(8593),nv=e(26539),av=e(89713),sv=e(20467);class rv extends sv.j{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=H.$.buildInfo.version}send(_){(0,K.x$)().addEvent({type:K.on.GrafanaJavascriptAgent,payload:_})}isBatched(){return!0}getIgnoreUrls(){return[]}}class ov{constructor(_){this.options=_,this.supportedEvents=[K.on.GrafanaJavascriptAgent],this.addEvent=Ae=>{},this.flush=()=>{};const X=[],de=[new rv];_.customEndpoint&&de.push(new Zh.m({url:_.customEndpoint,apiKey:_.apiKey})),_.errorInstrumentalizationEnabled&&X.push(new qh.W),_.consoleInstrumentalizationEnabled&&X.push(new ev._),_.webVitalsInstrumentalizationEnabled&&X.push(new tv.I),X.push(new nv.D);const Ce={globalObjectKey:_.globalObjectKey||"faro",preventGlobalExposure:_.preventGlobalExposure||!1,app:{version:_.buildInfo.version,environment:_.buildInfo.env},instrumentations:X,transports:de,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],sessionTracking:{persistent:!0},batching:{sendTimeout:1e3},internalLoggerLevel:_.internalLoggerLevel||Xh.vI};this.faroInstance=(0,av.p)(Ce),_.user&&this.faroInstance.api.setUser({id:_.user.id,attributes:{orgId:String(_.user.orgId)||""}})}}var iv=e(6411),Zu=e.n(iv),Sb=e(45731),Mb=e(9610),lv=e(87490),cv=e(70497),dv=e(1702);function uv(W){return()=>{const _=document.querySelectorAll(":hover");for(let X=_.length-1;X>0;X--){const de=_[X];de instanceof HTMLElement&&de.dataset?.panelid&&W(parseInt(de.dataset?.panelid,10))}}}class mv{constructor(_,X){this.locationService=_,this.chromeService=X}clearAndInitGlobalBindings(_){Zu().reset(),_.chromeless||(this.bind(["?","mod+h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Tc.O)(!1)),this.bind("c r",()=>(0,Tc.O)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const X=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(X&&X instanceof HTMLElement&&(X.nodeName==="INPUT"||X.nodeName==="TEXTAREA"||X.hasAttribute("data-slate-editor"))){X.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){Rr.A.publish(new Xr.S8({component:lu.N}))}exit(){const _=this.locationService.getSearchObject();if(_.editview){this.locationService.partial({editview:null,editIndex:null});return}if(_.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(_.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(_.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:X}=this.chromeService.state.getValue();X&&this.chromeService.exitKioskMode(),_.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(_,X){Zu().bind(_,de=>{de.preventDefault(),de.stopPropagation(),de.returnValue=!1,X.call(this)},"keydown")}bindGlobal(_,X){Zu().bindGlobal(_,de=>{de.preventDefault(),de.stopPropagation(),de.returnValue=!1,X.call(this)},"keydown")}unbind(_,X){Zu().unbind(_,X)}bindWithPanelId(_,X){this.bind(_,uv(X))}setupTimeRangeBindings(_=!0){this.bind("t a",()=>{Rr.A.publish(new Xr.Rh({updateUrl:_}))}),this.bind("t z",()=>{Rr.A.publish(new Xr.U0({scale:2,updateUrl:_}))}),this.bind("ctrl+z",()=>{Rr.A.publish(new Xr.U0({scale:2,updateUrl:_}))}),this.bind("t left",()=>{Rr.A.publish(new Xr.Io({direction:Xr.xL.Left,updateUrl:_}))}),this.bind("t right",()=>{Rr.A.publish(new Xr.Io({direction:Xr.xL.Right,updateUrl:_}))}),this.bind("t c",()=>{Rr.A.publish(new Xr.Bt)}),this.bind("t v",()=>{Rr.A.publish(new Xr.VZ({updateUrl:_}))})}setupDashboardBindings(_){this.bind("mod+o",()=>{_.graphTooltip=(_.graphTooltip+1)%3,_.events.publish(new Ii.Tq),_.startRefresh()}),this.bind("mod+s",()=>{_.meta.canSave&&Rr.A.publish(new Xr.S8({component:cv.$,props:{dashboard:_}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",X=>{if(_.canEditPanelById(X)){const de=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:de?null:X})}}),this.bindWithPanelId("v",X=>{const de=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:de?null:X})}),this.bindWithPanelId("p l",X=>{const de=_.getPanelById(X),Ce={...de.options};Ce.legend.showLegend?Ce.legend.showLegend=!1:Ce.legend.showLegend=!0,de.updateOptions(Ce)}),this.bindWithPanelId("i",X=>{this.locationService.partial({inspect:X})}),Fs.TP.hasAccessToExplore()&&this.bindWithPanelId("p x",async X=>{const de=_.getPanelById(X),Ce=await(0,lv.Xe)({queries:de.targets,dsRef:de.datasource,scopedVars:de.scopedVars,timeRange:(0,Ai.jG)().timeRange()});if(Ce){const Ae=T.I.stripBaseFromUrl(Ce);Ae&&this.locationService.push(Ae)}}),this.bindWithPanelId("p r",X=>{_.canEditPanelById(X)&&!(_.panelInView||_.panelInEdit)&&Rr.A.publish(new Xr.Vz(X))}),this.bindWithPanelId("p d",X=>{if(_.canEditPanelById(X)){const de=_.getPanelInfoById(X).index;_.duplicatePanel(_.panels[de])}}),this.bindWithPanelId("p s",X=>{const de=_.getPanelInfoById(X);Rr.A.publish(new Xr.S8({component:dv.ShareModal,props:{dashboard:_,panel:de?.panel}}))}),this.bind("d l",()=>{_.toggleLegendsForAll()}),this.bind("d x",()=>{_.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{_.collapseRows()}),this.bind("d shift+e",()=>{_.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{_.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const de=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+de})}}var Kc=e(78160);async function xb(){if(window.location.search.indexOf("why-render")!==-1){const{default:W}=await e.e(3718).then(e.t.bind(e,13718,23));W(React,{trackAllPureComponents:!0})}}var fv=e(20120),gv=e(57220);const pv=a.lazy(()=>e.e(192).then(e.bind(e,57029)));function hv(){const W=(0,Oa.Wd)(gv.hY);Js.TP.hasPermission(W.read)&&(0,fv.fP)({show:()=>H.$.unifiedAlertingEnabled,component:({dashboard:_})=>a.createElement(a.Suspense,{fallback:null,key:"alert-rules-button"},_&&a.createElement(pv,{dashboardUid:_.uid})),index:-2})}var vv=e(73399);function Ev(W){return a.createElement(yv,{...W})}const yv=a.lazy(async()=>{const{EmbeddedDashboard:W}=await e.e(2859).then(e.bind(e,13251));return{default:W}});var bv=e(61582),Dv=e(67027),Pv=e(97527),Ob=e(99355),$d=e(14590),Cv=e(19895),Tv=e(44838);const Sv=()=>new $r.c(new URL(e.p+e.u(5358),e.b));var Mv=e(88483),lh=e(63720);const xv=W=>new Mv.c(_=>{const X=W.subscribe($d.BX(de=>{_.next(de)}),$d.BX(de=>{_.error(de)}),$d.BX(()=>{_.complete()}));return{unsubscribe:()=>{X.then(de=>de.unsubscribe())}}}),yp=W=>(0,rr.H)(W).pipe((0,lh.n)(_=>xv(_)));class Ov{constructor(_){this.getConnectionState=()=>yp(this.centrifugeWorker.getConnectionState()),this.getDataStream=X=>yp(this.centrifugeWorker.getDataStream(X)).pipe((0,Cv.Q)(Tv.E)),this.getQueryData=async X=>{const de=JSON.parse(JSON.stringify(X));return this.centrifugeWorker.getQueryData(de)},this.getPresence=X=>this.centrifugeWorker.getPresence(X),this.getStream=X=>yp(this.centrifugeWorker.getStream(X)),this.centrifugeWorker=$d.LV(Sv()),this.centrifugeWorker.initialize(_,$d.BX(_.dataStreamSubscriberReadiness))}}var ch=e(9631),Iv=e(55004),Av=e(47773),dh=e(26657),qu=e(47118);class Rv{constructor(_){this.deps=_,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=X=>{let de;const Ce=Ae=>{const $e=Ae.data[0];if(!de&&!(0,qu.ot)($e,qu._w.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${$e?.type}`);return}switch($e.type){case qu._w.FullFrame:{de=ch.k9.deserialize($e.frame);return}case qu._w.NewValuesSameSchema:{de.pushNewValues($e.values);return}}};return this.deps.centrifugeSrv.getDataStream(X).pipe((0,Jn.T)(Ae=>(Ce(Ae),{...Ae,data:[de??ch.k9.empty()]})))},this.getStream=X=>this.deps.centrifugeSrv.getStream(X),this.getQueryData=X=>(0,rr.H)(this.deps.centrifugeSrv.getQueryData(X)).pipe((0,lh.n)(de=>{const Ce=(0,Av.bE)(de,X.request.targets);return Ce.data?.length&&Ce.data.find($e=>$e.meta?.channel)?(0,dh.x7)(Ce,X.request,dh.ph):(0,dn.of)(Ce)})),this.publish=async(X,de)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Iv.Qp)(X),data:de}),this.getPresence=X=>this.deps.centrifugeSrv.getPresence(X)}}function Lv(){const W={appUrl:`${window.location.origin}${H.$.appSubUrl}`,orgId:Js.TP.user.orgId,orgRole:Js.TP.user.orgRole,liveEnabled:H.$.liveEnabled,dataStreamSubscriberReadiness:bv.a.ok.asObservable(),grafanaAuthToken:(0,Dv.r)()},_=H.$.featureToggles["live-service-web-worker"]?new Ov(W):new Pv.w(W);(0,Fu.S8)(new Rv({centrifugeSrv:_,backendSrv:(0,M.AI)()}))}function Ib(){return getGrafanaLiveSrv()}var Bv=e(17888),Uv=e(20726),Lr=e(75462);function Ab(W,_="extension is not a link extension"){if(!isPluginExtensionLink(W))throw new Error(_)}function Rb(W,_="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(W))throw new Error(_)}function uh(W,_){if(!Wv(W,_))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${W}/" (currently: "${_}"). Skipping the extension.`)}function mh(W){if(!zv(W))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function Nv(W){if(!Kv(W))throw new Error(`Invalid extension "${W.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${W.extensionPointId}"). Skipping the extension.`)}function wv(W){if(!$v(W))throw new Error(`Invalid extension "${W.title}". The "configure" property must be a function. Skipping the extension.`)}function fh(W,_){for(const X of _)if(!Vv(W[X]))throw new Error(`Invalid extension "${W.title}". Property "${X}" must be a string and cannot be empty. Skipping the extension.`)}function Fv(W,_="The provided value is a Promise."){if(gh(W))throw new Error(_)}function Wv(W,_){return!!(typeof _=="string"&&_.length>0&&_.startsWith(`/a/${W}/`))}function Kv(W){return!!(W.extensionPointId?.startsWith("grafana/")||W.extensionPointId?.startsWith("plugins/"))}function $v(W){return W.configure?typeof W.configure=="function":!0}function Vv(W){return typeof W=="string"&&W.length>0}function _v(W,_){try{if(fh(_,["title","description","extensionPointId"]),Nv(_),(0,Lr.z1)(_)){if(wv(_),!_.path&&!_.onClick)return(0,Lr.FF)(`Invalid extension "${_.title}". Either "path" or "onClick" is required.`),!1;_.path&&uh(W,_.path)}return(0,Lr.yS)(_)&&mh(_.component),!0}catch(X){return X instanceof Error&&(0,Lr.FF)(X.message),!1}}function gh(W){return W instanceof Promise||typeof W=="object"&&W!==null&&"then"in W&&"catch"in W}function zv(W){const _=de=>typeof de=="object"&&de!==null&&"$$typeof"in de;return typeof W=="function"||(de=>_(de)&&de.$$typeof===Symbol.for("react.memo"))(W)}function kv(W){const _={};for(const{pluginId:X,extensionConfigs:de,error:Ce}of W){if(Ce){(0,Lr.FF)(`"${X}" plugin failed to load, skip registering its extensions.`);continue}for(const Ae of de){const{extensionPointId:$e}=Ae;if(!Ae||!_v(X,Ae))continue;let Ye={config:Ae,pluginId:X};Array.isArray(_[$e])?_[$e].push(Ye):_[$e]=[Ye]}}return(0,Lr.ol)(_)}var ph=e(29436),Hv=e(23994),jv=e(11140),Gv=e(12881);function Qv(){try{return[(0,Lr.io)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:Kl.S.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(Fs.TP.hasPermission(An.AccessControlAction.DashboardsCreate)||Fs.TP.hasPermission(An.AccessControlAction.DashboardsWrite))return{}},onClick:(W,{context:_,openModal:X})=>{X({title:(0,Gv.t)(),body:({onDismiss:de})=>a.createElement(jv.v,{onClose:de,exploreId:_?.exploreId})})}}),(0,Lr.io)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:Kl.S.ExploreToolbarAction,icon:"link",configure:W=>W?.shouldShowAddCorrelation?{}:void 0,onClick:(W,{context:_})=>{(0,Qs.JD)((0,ph.am)({editorMode:!0})),(0,Qs.JD)((0,Hv.Od)({exploreId:_.exploreId}))}})]}catch(W){return(0,Lr.FF)(`Could not configure extensions for Explore due to: "${W}"`),[]}}function Yv(){return[...Qv()]}const Jv=({context:W,extensionPointId:_,limitPerPlugin:X,registry:de})=>{const Ce=W?(0,Lr.$Y)(W):{},Ae=de[_]??[],$e=[],Ye={};for(const Ze of Ae)try{const mt=Ze.config,{pluginId:Et}=Ze;if(X&&Ye[Et]>=X)continue;if(Ye[Et]===void 0&&(Ye[Et]=0),(0,Lr.z1)(mt)){const Pt=Xv(Et,mt,Ce);if(mt.configure&&Pt===void 0)continue;const $t=Pt?.path||mt.path,Bt={id:(0,Lr.yt)(Et,mt),type:Kl.u.link,pluginId:Et,onClick:Zv(Et,mt,Ce),icon:Pt?.icon||mt.icon,title:Pt?.title||mt.title,description:Pt?.description||mt.description,path:(0,p.isString)($t)?qv(Et,$t,mt):void 0,category:Pt?.category||mt.category};$e.push(Bt),Ye[Et]+=1}if((0,Lr.yS)(mt)){mh(mt.component);const Pt={id:(0,Lr.yt)(Ze.pluginId,mt),type:Kl.u.component,pluginId:Ze.pluginId,title:mt.title,description:mt.description,component:(0,Lr.nv)(Et,mt.component)};$e.push(Pt),Ye[Et]+=1}}catch(mt){mt instanceof Error&&(0,Lr.FF)(mt.message)}return{extensions:$e}};function Xv(W,_,X){try{const de=_.configure?.(X);if(de===void 0)return;let{title:Ce=_.title,description:Ae=_.description,path:$e=_.path,icon:Ye=_.icon,category:Ze=_.category,...mt}=de;return Fv(de,`The configure() function for "${_.title}" returned a promise, skipping updates.`),$e&&uh(W,$e),fh({title:Ce,description:Ae},["title","description"]),Object.keys(mt).length>0&&(0,Lr.FF)(`Extension "${_.title}", is trying to override restricted properties: ${Object.keys(mt).join(", ")} which will be ignored.`),{title:Ce,description:Ae,path:$e,icon:Ye,category:Ze}}catch(de){de instanceof Error&&(0,Lr.FF)(de.message);return}}function Zv(W,_,X){const{onClick:de}=_;if(de)return function(Ae){try{(0,Ir.rR)("ui_extension_link_clicked",{pluginId:W,extensionPointId:_.extensionPointId,title:_.title,category:_.category});const $e=de(Ae,(0,Lr.yb)(W,X));gh($e)&&$e.catch(Ye=>{Ye instanceof Error&&(0,Lr.FF)(Ye.message)})}catch($e){$e instanceof Error&&(0,Lr.FF)($e.message)}}}function qv(W,_,X){return ya.kM.appendQueryToUrl(_,ya.kM.toUrlParams({uel_pid:W,uel_epid:X.extensionPointId}))}var hh=e(15162);async function e0(W={}){(0,Kc.j)("frontend_plugins_preload");const _=Object.values(W).filter(de=>de.preload),X=await Promise.all(_.map(t0));return(0,Kc.z)("frontend_plugins_preload"),X}async function t0(W){const{path:_,version:X,id:de}=W;try{(0,Kc.j)(`frontend_plugin_preload_${de}`);const{plugin:Ce}=await Jd.j4({path:_,version:X,isAngular:W.angular.detected,pluginId:de}),{extensionConfigs:Ae=[]}=Ce;return(0,Yd.x)(de),{pluginId:de,extensionConfigs:Ae}}catch(Ce){return console.error(`[Plugins] Failed to preload plugin: ${_} (version: ${X})`,Ce),{pluginId:de,extensionConfigs:[],error:Ce}}finally{(0,Kc.z)(`frontend_plugin_preload_${de}`)}}var n0=e(39741),a0=e(57532),vh=e(41987),Eh=e(65879),s0=e(80924),r0=e(72955),bp=e(39374);class o0{constructor(){this.subject=new n0.m(1)}get(){return this.subject.asObservable()}run(_){const{queries:X,timezone:de,datasource:Ce,panelId:Ae,app:$e,dashboardUID:Ye,timeRange:Ze,timeInfo:mt,cacheTimeout:Et,queryCachingTTL:Pt,maxDataPoints:$t,scopedVars:Bt,minInterval:At}=_;this.subscription&&this.subscription.unsubscribe();const Wt={app:$e??vh.Jk.Unknown,requestId:(0,s0.S)(),timezone:de,panelId:Ae,dashboardUID:Ye,range:Ze,timeInfo:mt,interval:"",intervalMs:0,targets:(0,p.cloneDeep)(X),maxDataPoints:$t,scopedVars:Bt||{},cacheTimeout:Et,queryCachingTTL:Pt,startTime:Date.now()};Wt.rangeRaw=Ze.raw,(0,rr.H)(i0(Ce,Wt.scopedVars)).pipe((0,a0.$)()).subscribe({next:En=>{Wt.targets=Wt.targets.map(Ha=>(Ha.datasource||(Ha.datasource=En.getRef()),Ha));const wa=At?(0,Ee.w)().replace(At,Wt.scopedVars):En.interval,Ja=Eh.calculateInterval(Ze,$t,wa);Wt.scopedVars=Object.assign({},Wt.scopedVars,{__interval:{text:Ja.interval,value:Ja.interval},__interval_ms:{text:Ja.intervalMs.toString(),value:Ja.intervalMs}}),Wt.interval=Ja.interval,Wt.intervalMs=Ja.intervalMs,this.subscription=(0,bp.BN)(En,Wt).subscribe({next:Ha=>{const Va=(0,go.N$)(Ha,this.lastResult);this.lastResult=(0,r0.B)(Va,this.lastResult),this.subject.next(this.lastResult)}})},error:En=>console.error("PanelQueryRunner Error",En)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Ar.Gu.Loading&&this.subject.next({...this.lastResult,state:Ar.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function i0(W,_){return W&&"query"in W?W:(0,l.tR)().get(W,_)}function l0(){window.grafanaRuntime={getDashboardSaveModel:()=>{const W=(0,c.UA)().getCurrent();if(W)return W.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const W=(0,Ai.jG)().timeRange();return{from:W.from.valueOf(),to:W.to.valueOf(),raw:W.raw}},getPanelData:()=>{const W=(0,c.UA)().getCurrent();if(W)return W.panels.reduce((_,X)=>(_[X.id]=X.getQueryRunner().getLastResult(),_),{})}}}var c0=e(16757),Vd=e(20601),Na=e(75096),yh=e(22391),d0=e(27803),tl=e(3843);function bh(W){return W.extended&&"infoText"in W.extended?W.extended:null}function Dh(W){return W.extended&&"dataSourceTypes"in W.extended?W.extended:null}function Dp(W){return W.extended&&"dataSource"in W.extended?W.extended:null}var zs=e(87421),_d=e(26260);const u0=(W,_)=>{const{rootStateKey:X}=_.variable;if(!X)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:bh(tl.nS)};const{editor:de}=(0,zs.nx)(X,W);return{extended:bh(de)}},m0={changeVariableDatasource:_d.Iv},f0=(0,ni.connect)(u0,m0);class g0 extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=_=>{this.props.changeVariableDatasource((0,Na.jX)(this.props.variable),(0,yh.p$)(_))}}componentDidMount(){const{rootStateKey:_}=this.props.variable;if(!_){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:_,extended:X}=this.props;return a.createElement(d0.Q,{datasource:_.datasource??void 0,onDataSourceChange:this.onDatasourceChanged,infoText:X?.infoText})}}const p0=f0(g0);var Ph=e(38401),Pp=e(83684);const Ch=90,Th=({datasource:W,onChange:_,disabled:X,filterKey:de,allFilters:Ce})=>{const Ae=()=>Sh(W,de,Ce),$e=()=>E0(W,de,Ce);return de===null?a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},a.createElement(Pp.s,{disabled:X,className:"query-segment-key",Component:v0,value:de,onChange:_,loadOptions:Ae,inputMinWidth:Ch})):a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},a.createElement(Pp.s,{disabled:X,className:"query-segment-key",value:de,onChange:_,loadOptions:$e,inputMinWidth:Ch}))},em="-- remove filter --",h0={label:em,value:em},v0=a.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},a.createElement(Bs.I,{name:"plus"})),Sh=async(W,_,X)=>{const de=await(0,l.tR)().get(W);if(!de||!de.getTagKeys)return[];const Ce=X.filter($e=>$e.key!==_);return(await de.getTagKeys({filters:Ce})).map($e=>({label:$e.text,value:$e.text}))},E0=async(W,_,X)=>{const de=await Sh(W,_,X);return[h0,...de]},y0=({datasource:W,disabled:_,onChange:X,filterKey:de,filterValue:Ce,placeHolder:Ae,allFilters:$e})=>{const Ye=(0,Mt.of)(D0),Ze=()=>b0(W,de,$e);return a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},a.createElement(Pp.s,{className:Ye.segment,disabled:_,placeholder:Ae,value:Ce,onChange:X,loadOptions:Ze}))},b0=async(W,_,X)=>{const de=await(0,l.tR)().get(W);if(!de||!de.getTagValues)return[];const Ce=(0,Ai.jG)().timeRange(),Ae=X.filter(Ye=>Ye.key!==_);return(await de.getTagValues({key:_,filters:Ae,timeRange:Ce})).map(Ye=>({label:Ye.text,value:Ye.text}))};function D0(){return{segment:(0,it.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px"})}}const P0=["=","!=","<",">","=~","!~"].map(W=>({label:W,value:W})),C0=({value:W,disabled:_,onChange:X})=>a.createElement(Ph.Y,{className:"query-segment-operator",value:W,disabled:_,options:P0,onChange:X}),Mh=({datasource:W,filter:{key:_,operator:X,value:de},onKeyChange:Ce,onOperatorChange:Ae,onValueChange:$e,placeHolder:Ye,allFilters:Ze,disabled:mt})=>a.createElement(a.Fragment,null,a.createElement(Th,{disabled:mt,datasource:W,filterKey:_,onChange:Ce,allFilters:Ze}),a.createElement("div",{className:"gf-form"},a.createElement(C0,{disabled:mt,value:X,onChange:Ae})),a.createElement(y0,{disabled:mt,datasource:W,filterKey:_,filterValue:de,allFilters:Ze,onChange:$e,placeHolder:Ye})),T0=({datasource:W,appendBefore:_,onCompleted:X,allFilters:de})=>{const[Ce,Ae]=(0,a.useState)(null),[$e,Ye]=(0,a.useState)("="),Ze=(0,a.useCallback)(Pt=>{if(Pt.value!==em){Ae(Pt.value??"");return}Ae(null)},[Ae]),mt=(0,a.useCallback)(Pt=>Ye(Pt.value??""),[Ye]),Et=(0,a.useCallback)(Pt=>{X({value:Pt.value??"",operator:$e,key:Ce}),Ae(null),Ye("=")},[X,$e,Ce]);return Ce===null?a.createElement(Th,{datasource:W,filterKey:Ce,onChange:Ze,allFilters:de}):a.createElement(a.Fragment,{key:"filter-builder"},_,a.createElement(Mh,{datasource:W,filter:{key:Ce,value:"",operator:$e},placeHolder:(0,cs.t)("variable.adhoc.placeholder","Select value"),onKeyChange:Ze,onOperatorChange:mt,onValueChange:Et,allFilters:de}))},xh=({label:W})=>a.createElement("div",{className:"gf-form"},a.createElement("span",{className:"gf-form-label query-keyword"},W));class S0 extends a.PureComponent{constructor(){super(...arguments),this.onChange=(_,X)=>de=>{const{filters:Ce}=this.props,{value:Ae}=de;return de.value===em?this.props.removeFilter(_):this.props.changeFilter(_,{...Ce[_],[X]:Ae})},this.appendFilterToVariable=_=>{this.props.addFilter(_)}}render(){const{filters:_,disabled:X}=this.props;return a.createElement("div",{className:"gf-form-inline"},this.renderFilters(_,X),!X&&a.createElement(T0,{datasource:this.props.datasource,appendBefore:_.length>0?a.createElement(xh,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(_,X){return _.length===0&&X?a.createElement(Ph.Y,{disabled:X,value:"No filters",options:[],onChange:()=>{}}):_.reduce((de,Ce,Ae)=>(de.length>0&&de.push(a.createElement(xh,{label:"AND",key:`condition-${Ae}`})),de.push(this.renderFilterSegments(Ce,Ae,X)),de),[])}renderFilterSegments(_,X,de){return a.createElement(a.Fragment,{key:`filter-${X}`},a.createElement(Mh,{disabled:de,datasource:this.props.datasource,filter:_,onKeyChange:this.onChange(X,"key"),onOperatorChange:this.onChange(X,"operator"),onValueChange:this.onChange(X,"value"),allFilters:this.getAllFilters()}))}}const M0={addFilter:_d.U2,removeFilter:_d.VT,changeFilter:_d.$u},x0=(0,ni.connect)(null,M0);class O0 extends a.PureComponent{constructor(){super(...arguments),this.addFilter=_=>{this.props.addFilter((0,Na.jX)(this.props.variable),_)},this.removeFilter=_=>{this.props.removeFilter((0,Na.jX)(this.props.variable),_)},this.changeFilter=(_,X)=>{this.props.changeFilter((0,Na.jX)(this.props.variable),{index:_,filter:X})}}render(){const{filters:_,datasource:X,baseFilters:de}=this.props.variable;return a.createElement(S0,{datasource:X,filters:_,baseFilters:de,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Oh=x0(O0);Oh.displayName="AdHocPicker";var Ih=e(53699);const I0=W=>W.map(_=>B0(_).map(R0).join("|")),A0=W=>{if((0,p.isArray)(W))return W.map(Ah).filter(U0);const _=Ah(W);return _===null?[]:[_]};function R0(W){return W==null?"":/\|/g[Symbol.replace](W,"__gfp__")}function L0(W){return W==null?"":/__gfp__/g[Symbol.replace](W,"|")}function B0(W){return[W.key,W.operator,W.value]}function Ah(W){if(!(0,p.isString)(W)||W.length===0)return null;const _=W.split("|").map(L0);return{key:_[0],operator:_[1],value:_[2]}}function U0(W){return W!==null&&(0,p.isString)(W.value)}const Rh=async()=>{},N0=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Ih.MK,reducer:Ih.AA,picker:Oh,editor:p0,dependsOn:()=>!1,setValue:Rh,setValueFromUrl:async(W,_)=>{const X=A0(_);await(0,Qs.JD)((0,_d.D4)((0,Na.jX)(W),X))},updateOptions:Rh,getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,rootStateKey:Ae,...$e}=(0,p.cloneDeep)(W);return $e},getValueForUrl:W=>{const _=W?.filters??[];return I0(_)}});var zd=e(23546),w0=e(8866),lo=e(13344),qr=e(24240),Cp=e(13752),Lh=e(13288),F0=e(44240),tm=e(16126),W0=e(38975),K0=e(67791),$0=e(66847),V0=e(69850),_0=e(62938),Br=e(72401),Ys=e(48594),kd=e(83370),qo=e(80484);const z0={...qo.Vg,type:"query",datasource:null,query:"",regex:"",sort:qo.ZG.disabled,refresh:qo.CO.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},k0=(W,_)=>{if(_===qo.ZG.disabled)return W;const X=Math.ceil(_/2),de=_%2===0;return X===1?W=(0,p.sortBy)(W,"text"):X===2?W=(0,p.sortBy)(W,Ce=>{if(!Ce.text)return-1;const Ae=Ce.text.match(/.*?(\d+).*/);return!Ae||Ae.length<2?-1:parseInt(Ae[1],10)}):X===3?W=(0,p.sortBy)(W,Ce=>(0,p.toLower)(Ce.text)):X===4&&W.sort((Ce,Ae)=>Ce.text?Ae.text?Ce.text.localeCompare(Ae.text,void 0,{numeric:!0}):1:-1),de&&(W=W.reverse()),W},H0=(W,_)=>{const X=[];let de=null;_.lastIndex=0;do de=_.exec(W),de&&X.push(de);while(_.global&&de&&de[0]!==""&&de[0]!==void 0);return X},j0=(W,_,X)=>{let de,Ce=[];W&&(de=(0,lr.dO)(W));for(let Ae=0;Ae<X.length;Ae++){const $e=X[Ae];let Ye=$e.text===void 0||$e.text===null?$e.value:$e.text,Ze=$e.value===void 0||$e.value===null?$e.text:$e.value;if((0,p.isNumber)(Ze)&&(Ze=Ze.toString()),(0,p.isNumber)(Ye)&&(Ye=Ye.toString()),de){const mt=H0(Ze,de);if(!mt.length)continue;const Et=mt.find(At=>At.groups&&At.groups.value),Pt=mt.find(At=>At.groups&&At.groups.text),$t=mt.find(At=>At.length>1),Bt=mt.length>1&&$t;if(Et||Pt)Ze=Et?.groups?.value??Pt?.groups?.text,Ye=Pt?.groups?.text??Et?.groups?.value;else if(Bt){for(let At=0;At<mt.length;At++){const Wt=mt[At];Ce.push({text:Wt[1],value:Wt[1],selected:!1})}continue}else $t&&(Ye=$t[1],Ze=$t[1])}Ce.push({text:Ye,value:Ze,selected:!1})}return Ce=(0,p.uniqBy)(Ce,"value"),k0(Ce,_)},Bh=(0,Qo.Z0)({name:"templating/query",initialState:kd.j,reducers:{updateVariableOptions:(W,_)=>{const{results:X,templatedRegex:de}=_.payload.data,Ce=(0,zs.Fs)(W,_.payload.id);if(Ce.type!=="query")return;const{includeAll:Ae,sort:$e}=Ce,Ye=j0(de,$e,X);Ae&&Ye.unshift({text:lo.Zm,value:lo.To,selected:!1}),Ye.length||Ye.push({text:lo.ou,value:lo.Ek,isNone:!0,selected:!1}),Ce.options=Ye}}}),G0=Bh.reducer,{updateVariableOptions:Q0}=Bh.actions;function Y0(){return W=>W.pipe((0,Jn.T)(J0))}function J0(W){const _=W.series;if(!_||!_.length)return[];if(q0(_))return _;const X=(0,go.Bt)(_),de=[];let Ce=-1,Ae=-1,$e=-1,Ye=-1;for(const Ze of X)for(let mt=0;mt<Ze.fields.length;mt++){const Et=Ze.fields[mt],Pt=(0,fe.Ct)(Et,Ze,_).toLowerCase();Et.type===k.PU.string&&$e===-1&&($e=mt),Pt==="text"&&Et.type===k.PU.string&&Ae===-1&&(Ae=mt),Pt==="value"&&Et.type===k.PU.string&&Ce===-1&&(Ce=mt),Pt==="expandable"&&(Et.type===k.PU.boolean||Et.type===k.PU.number)&&Ye===-1&&(Ye=mt)}if($e===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Ze of X)for(let mt=0;mt<Ze.length;mt++){const Et=Ye!==-1?Ze.fields[Ye].values[mt]:void 0,Pt=Ze.fields[$e].values[mt],$t=Ae!==-1?Ze.fields[Ae].values[mt]:null,Bt=Ce!==-1?Ze.fields[Ce].values[mt]:null;if(Ce===-1&&Ae===-1){de.push({text:Pt,value:Pt,expandable:Et});continue}if(Ce===-1&&Ae!==-1){de.push({text:$t,value:$t,expandable:Et});continue}if(Ce!==-1&&Ae===-1){de.push({text:Bt,value:Bt,expandable:Et});continue}de.push({text:$t,value:Bt,expandable:Et})}return de}function X0(W){return _=>_.pipe((0,Jn.T)(X=>{const{variable:de,dispatch:Ce,getTemplatedRegexFunc:Ae}=W;if(!de.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const $e=Ae(de),Ye=(0,Na.qD)(de,{results:X,templatedRegex:$e});Ce((0,Ys.kb)(de.rootStateKey,Q0(Ye)))}))}function Z0(W){return _=>_.pipe((0,Mo.Z)(()=>{const{dispatch:X,variable:de,searchFilter:Ce}=W;return Ce?(0,dn.of)():(0,rr.H)(X((0,Br.kl)((0,Na.jX)(de))))}))}function q0(W){if(!W)return!1;if(!W.length)return!0;const _=W[0];if((0,go.ci)(_))return!1;for(const X in _){if(!_.hasOwnProperty(X)||_[X]!==null&&typeof _[X]!="string"&&typeof _[X]!="number")continue;const de=X.toLowerCase();if(de==="text"||de==="value")return!0}return!1}var nm=e(29505),eE=e(43127);class tE{constructor(){this.runners=[new nE,new aE,new sE,new oE]}getRunnerForDatasource(_){const X=this.runners.find(de=>de.canRun(_));if(X)return X;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class nE{constructor(){this.type=nm.Qz.Legacy}canRun(_){return(0,qr.d5)(_)}getTarget({datasource:_,variable:X}){if((0,qr.d5)(_))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,variable:X,searchFilter:de,timeSrv:Ce},Ae){if(!(0,qr.d5)(_))return Hd();const $e=(0,Na.iP)(X,de,Ce,Ae.scopedVars);return(0,rr.H)(_.metricFindQuery(X.query,$e)).pipe((0,Mo.Z)(Ye=>{if(!Ye||!Ye.length)return Hd();const Ze=Ye;return(0,dn.of)({series:Ze,state:Ar.Gu.Done,timeRange:$e.range})}))}}class aE{constructor(){this.type=nm.Qz.Standard}canRun(_){return(0,qr.Hf)(_)}getTarget({datasource:_,variable:X}){if((0,qr.Hf)(_))return _.variables.toDataQuery(X.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:X},de){return(0,qr.Hf)(_)?_.variables.query?X(_,de,_.variables.query.bind(_.variables)):X(_,de):Hd()}}class sE{constructor(){this.type=nm.Qz.Custom}canRun(_){return(0,qr.zs)(_)}getTarget({datasource:_,variable:X}){if((0,qr.zs)(_))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:X},de){return(0,qr.zs)(_)?X(_,de,_.variables.query.bind(_.variables)):Hd()}}const rE="variable-query";class oE{constructor(){this.type=nm.Qz.Datasource}canRun(_){return(0,qr.X3)(_)}getTarget({datasource:_,variable:X}){if((0,qr.X3)(_))return{...X.query,refId:X.query.refId??rE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:X},de){return(0,qr.X3)(_)?X(_,de):Hd()}}function Hd(){return(0,dn.of)({state:Ar.Gu.Done,series:[],timeRange:(0,eE.E2)()})}class iE{constructor(_={dispatch:Qs.JD,getState:Qs.Gu,getVariable:zs.dn,getTemplatedRegex:Na.u7,getTimeSrv:Ai.jG,queryRunners:new tE,runRequest:bp.BN}){this.dependencies=_,this.updateOptionsRequests=new Cp.B,this.updateOptionsResults=new Cp.B,this.cancelRequests=new Cp.B,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(_){this.updateOptionsRequests.next(_)}getResponse(_){return this.updateOptionsResults.asObservable().pipe((0,tm.p)(X=>X.identifier===_))}cancelRequest(_){this.cancelRequests.next({identifier:_})}destroy(){this.subscription.unsubscribe()}onNewRequest(_){const{datasource:X,identifier:de,searchFilter:Ce}=_;try{const{dispatch:Ae,runRequest:$e,getTemplatedRegex:Ye,getVariable:Ze,queryRunners:mt,getTimeSrv:Et,getState:Pt}=this.dependencies,$t=(0,zs.y7)(Pt());this.updateOptionsResults.next({identifier:de,state:Ar.Gu.Loading});const Bt=Ze(de,Pt());if(Bt.type!=="query")return;const At=Et(),Wt={variable:Bt,datasource:X,searchFilter:Ce,timeSrv:At,runRequest:$e},En=mt.getRunnerForDatasource(X),wa=En.getTarget({datasource:X,variable:Bt}),Ja=this.getRequest(Bt,_,wa);En.runRequest(Wt,Ja).pipe((0,tm.p)(()=>{const Ha=(0,zs.y7)(Pt());return $t===Ha}),(0,tm.p)(Ha=>Ha.state===Ar.Gu.Done||Ha.state===Ar.Gu.Error),(0,W0.s)(1),(0,Mo.Z)(Ha=>Ha.state===Ar.Gu.Error?(0,Lh.$)(()=>Ha.error):(0,dn.of)(Ha)),Y0(),X0({variable:Bt,dispatch:Ae,getTemplatedRegexFunc:Ye}),Z0({variable:Bt,dispatch:Ae,searchFilter:Ce}),(0,K0.Q)((0,F0.h)(this.updateOptionsRequests,this.cancelRequests).pipe((0,tm.p)(Ha=>{let Va=!1;return Ha.identifier.id===de.id&&(Va=!0,this.updateOptionsResults.next({identifier:de,state:Ar.Gu.Loading,cancelled:Va})),Va}))),(0,$0.W)(Ha=>Ha.cancelled?(0,dn.of)({}):(this.updateOptionsResults.next({identifier:de,state:Ar.Gu.Error,error:Ha}),(0,Lh.$)(()=>Ha))),(0,V0.j)(()=>{this.updateOptionsResults.next({identifier:de,state:Ar.Gu.Done})})).subscribe()}catch(Ae){this.updateOptionsResults.next({identifier:de,state:Ar.Gu.Error,error:Ae})}}getRequest(_,X,de){const{searchFilter:Ce}=X,Ae={variable:{text:_.current.text,value:_.current.value}},Ze={...Ce?{searchFilter:{text:Ce,value:Ce}}:{},...Ae},mt=this.dependencies.getTimeSrv().timeRange();return{app:vh.Jk.Dashboard,requestId:(0,_0.A)(),timezone:"",range:mt,interval:"",intervalMs:0,targets:[de],scopedVars:Ze,startTime:Date.now()}}}let Uh;function lE(W){Uh=W}function Tp(){return Uh}const cE=W=>{if(!dE(W))return W.name;const{current:_}=W;return Array.isArray(_.text)?_.text.join(" + "):_.text},dE=W=>Array.isArray(W?.options)||typeof W?.current=="object";var hl=(W=>(W[W.moveUp=38]="moveUp",W[W.moveDown=40]="moveDown",W[W.select=32]="select",W[W.cancel=27]="cancel",W[W.selectAndClose=13]="selectAndClose",W))(hl||{});class uE extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=_=>{if(hl[_.keyCode]&&_.keyCode!==hl.select){const X=_.ctrlKey||_.metaKey||_.shiftKey;this.props.onNavigate(_.keyCode,X),_.preventDefault()}},this.onChange=_=>{this.props.onChange(_.target.value)}}render(){const{value:_,id:X,onNavigate:de,...Ce}=this.props;return a.createElement("input",{...Ce,ref:Ae=>{Ae&&(Ae.focus(),Ae.setAttribute("style",`width:${Math.max(Ae.width,150)}px`))},id:X,type:"text",className:"gf-form-input",value:_??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,cs.t)("variable.dropdown.placeholder","Enter variable value")})}}var mE=e(89963);const fE=({loading:W,disabled:_,onClick:X,text:de,onCancel:Ce,id:Ae})=>{const $e=(0,Mt.of)(wh),Ye=(0,a.useCallback)(Ze=>{Ze.stopPropagation(),Ze.preventDefault(),X()},[X]);return W?a.createElement("div",{className:$e.container,"data-testid":Mr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${de}`),title:de,id:Ae},a.createElement(Nh,{text:de}),a.createElement(mE.I,{loading:!0,onCancel:Ce})):a.createElement("button",{onClick:Ye,className:$e.container,"data-testid":Mr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${de}`),"aria-expanded":!1,"aria-controls":`options-${Ae}`,id:Ae,title:de,disabled:_},a.createElement(Nh,{text:de}),a.createElement(Bs.I,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Nh=({text:W})=>{const _=(0,Mt.of)(wh);return a.createElement("span",{className:_.textAndTags},W===lo.Zm?(0,cs.t)("variable.picker.link-all","All"):W)},wh=W=>({container:(0,it.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${W.spacing(1)};
    background-color: ${W.components.input.background};
    border: 1px solid ${W.components.input.borderColor};
    border-radius: ${W.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${W.colors.text};
    height: ${W.spacing(W.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${W.colors.action.disabledBackground};
      color: ${W.colors.action.disabledText};
      border: 1px solid ${W.colors.action.disabledBackground};
    }
  `,textAndTags:(0,it.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${W.spacing(.25)};
    user-select: none;
  `});class gE extends a.PureComponent{constructor(){super(...arguments),this.onToggle=_=>X=>{const de=X.shiftKey||X.ctrlKey||X.metaKey;this.handleEvent(X),this.props.onToggle(_,de)},this.onToggleAll=_=>{this.handleEvent(_),this.props.onToggleAll()}}handleEvent(_){_.preventDefault(),_.stopPropagation()}render(){const{multi:_,values:X,highlightIndex:de,selectedValues:Ce,onToggle:Ae,onToggleAll:$e,theme:Ye,...Ze}=this.props,mt=Sp(Ye);return a.createElement("div",{className:mt.variableValueDropdown},a.createElement("div",{className:mt.variableOptionsWrapper},a.createElement("ul",{className:mt.variableOptionsColumn,"aria-label":Mr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Ze},this.renderMultiToggle(),X.map((Et,Pt)=>this.renderOption(Et,Pt)))))}renderOption(_,X){const{highlightIndex:de,multi:Ce,theme:Ae}=this.props,$e=Sp(Ae),Ye=_.value===lo.To;return a.createElement("li",{key:`${_.value}`},a.createElement("button",{"data-testid":Mr.Tp.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":_.selected,className:(0,it.cx)((0,oe.my)(Ae),$e.variableOption,{[$e.highlighted]:X===de,[$e.variableAllOption]:Ye},$e.noStyledButton),onClick:this.onToggle(_)},a.createElement("span",{className:(0,it.cx)($e.variableOptionIcon,{[$e.variableOptionIconSelected]:_.selected,[$e.hideVariableOptionIcon]:!Ce})}),a.createElement("span",{"data-testid":Mr.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${_.text}`)},Ye?(0,cs.t)("variable.picker.option-all","All"):_.text)))}renderMultiToggle(){const{multi:_,selectedValues:X,theme:de,values:Ce}=this.props,Ae=Sp(de),$e=Ce.some(Ze=>Ze.value===lo.To);if(!_)return null;const Ye=()=>a.createElement(cs.x6,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(Oi.m,{content:Ye,placement:"top"},a.createElement("button",{className:(0,it.cx)((0,oe.my)(de),Ae.variableOption,Ae.variableOptionColumnHeader,Ae.noStyledButton,{[Ae.noPaddingBotton]:$e}),role:"checkbox","aria-checked":X.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,it.cx)(Ae.variableOptionIcon,{[Ae.variableOptionIconManySelected]:X.length>1})}),a.createElement(cs.x6,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",X.length,")"))}}const Sp=(0,dl.N)(W=>{const _=W.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,it.css)({display:"none"}),highlighted:(0,it.css)({backgroundColor:W.colors.action.hover}),noStyledButton:(0,it.css)({width:"100%",textAlign:"left"}),variableOption:(0,it.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px","&:hover":{backgroundColor:W.colors.action.hover}}),variableOptionColumnHeader:(0,it.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,it.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${_}) left top no-repeat`}),variableOptionIconManySelected:(0,it.css)({background:`url(${_}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,it.css)({background:`url(${_}) 0px -18px no-repeat`}),variableValueDropdown:(0,it.css)({backgroundColor:W.colors.background.primary,border:`1px solid ${W.colors.border.weak}`,borderRadius:W.shape.borderRadius(2),boxShadow:W.shadows.z2,position:"absolute",top:W.spacing(W.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:W.zIndex.typeahead}),variableOptionsColumn:(0,it.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,it.css)({display:"table",width:"100%"}),variableAllOption:(0,it.css)({borderBottom:`1px solid ${W.colors.border.weak}`,paddingBottom:W.spacing(1)}),noPaddingBotton:(0,it.css)({paddingBottom:0})}}),pE=(0,Mt.cV)(gE);var hE=e(92053),Fh=e(92041),vl=e(56968),bi=e(24300);const vE=(W,_,X)=>async(de,Ce)=>{if(_===hl.cancel)return await de(am(W));if(_===hl.select)return de(Mp(W,X));if(_===hl.selectAndClose)return(0,zs.nx)(W,Ce()).optionsPicker.multi?de(Mp(W,X)):(de(Mp(W,X,!0)),de(am(W)));if(_===hl.moveDown)return de((0,Ys.kb)(W,(0,bi.O$)(1)));if(_===hl.moveUp)return de((0,Ys.kb)(W,(0,bi.O$)(-1)))},EE=(W,_="")=>async(X,de)=>{const{rootStateKey:Ce}=W,{id:Ae,queryValue:$e}=(0,zs.nx)(Ce,de()).optionsPicker,Ye={id:Ae,rootStateKey:Ce,type:"query"},Ze=(0,zs.dn)(Ye,de());if(!("options"in Ze)||(X((0,Ys.kb)(Ce,(0,bi.S8)(_))),(0,p.trim)($e)===(0,p.trim)(_)))return;const{query:mt,options:Et}=Ze,Pt=typeof mt=="string"?mt:mt.target;return(0,hE.E)(Pt)?PE(X,de,_,Ce):X((0,Ys.kb)(Ce,(0,bi.fx)(Et)))},yE=async W=>{if((0,Fh.R)(W.current))return;await Vd.B.get(W.type).setValue(W,W.current,!0)},am=(W,_)=>async(X,de)=>{const Ce=(0,zs.nx)(W,de()).optionsPicker,Ae={id:Ce.id,rootStateKey:W,type:"query"},$e=(0,zs.dn)(Ae,de());if(!(0,qr.SP)($e))return;const Ye={option:CE(Ce)},Ze={propName:"queryValue",propValue:Ce.queryValue};X((0,Ys.kb)(W,(0,vl.dE)((0,Na.qD)($e,Ye)))),X((0,Ys.kb)(W,(0,vl.QP)((0,Na.qD)($e,Ze))));const mt=(0,zs.dn)(Ae,de());if((0,qr.SP)(mt)&&(X((0,Ys.kb)(W,(0,bi.Fu)())),(0,Na.Lz)($e)!==(0,Na.Lz)(mt)))return _?_(mt):await yE(mt)},bE=(W,_)=>async(X,de)=>{const{id:Ce,rootStateKey:Ae}=W,$e=(0,zs.nx)(Ae,de()).optionsPicker;$e.id&&$e.id!==Ce&&await X(am(Ae,_));const Ye=(0,zs.dn)(W,de());(0,qr.SP)(Ye)&&X((0,Ys.kb)(Ae,(0,bi.MO)(Ye)))},Mp=(W,_,X=!1)=>(de,Ce)=>{const{highlightIndex:Ae,options:$e}=(0,zs.nx)(W,Ce()).optionsPicker,Ye=$e[Ae];de((0,Ys.kb)(W,(0,bi.U9)({option:Ye,forceSelect:X,clearOthers:_})))},DE=async(W,_,X,de)=>{try{const{id:Ce}=(0,zs.nx)(de,_()).optionsPicker,Ae={id:Ce,rootStateKey:de,type:"query"},$e=(0,zs.dn)(Ae,_());if(!(0,qr.SP)($e))return;await Vd.B.get($e.type).updateOptions($e,X);const Ze=(0,zs.dn)(Ae,_());if(!(0,qr.SP)(Ze))return;W((0,Ys.kb)(de,(0,bi.qh)(Ze.options)))}catch(Ce){console.error(Ce)}},PE=(0,p.debounce)(DE,500);function CE(W){const{options:_,selectedValues:X,queryValue:de,multi:Ce}=W;if(_.length===0&&de&&de.length>0)return{text:de,value:de,selected:!1};if(!Ce)return X.find(Ye=>Ye.selected);const Ae=[],$e=[];for(const Ye of X)Ye.selected&&(Ae.push(Ye.text.toString()),$e.push(Ye.value.toString()));return{value:$e,text:Ae,selected:!0}}const jd=()=>{const W=Ae=>({...(0,zd.bindActionCreators)({openOptions:bE,commitChangesToVariable:am,navigateOptions:vE},Ae),filterOrSearchOptions:($e,Ye="")=>{Ae(EE($e,Ye))},toggleAllOptions:$e=>Ae((0,Ys.kb)($e.rootStateKey,(0,bi.an)())),toggleOption:($e,Ye,Ze,mt)=>Ae((0,Ys.kb)($e.rootStateKey,(0,bi.U9)({option:Ye,clearOthers:Ze,forceSelect:mt})))}),_=(Ae,$e)=>{const{rootStateKey:Ye}=$e.variable;return Ye?{picker:(0,zs.nx)(Ye,Ae).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:bi.$z})},X=(0,ni.connect)(_,W);class de extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Na.jX)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=($e,Ye)=>{((0,qr.iv)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)($e,Ye)},this.onToggleSingleValueVariable=($e,Ye)=>{this.props.toggleOption((0,Na.jX)(this.props.variable),$e,Ye,!1),this.onHideOptions()},this.onToggleMultiValueVariable=($e,Ye)=>{this.props.toggleOption((0,Na.jX)(this.props.variable),$e,Ye,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Na.jX)(this.props.variable))},this.onFilterOrSearchOptions=$e=>{this.props.filterOrSearchOptions((0,Na.jX)(this.props.variable),$e)},this.onNavigate=($e,Ye)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,$e,Ye)},this.onCancel=()=>{Tp().cancelRequest((0,Na.jX)(this.props.variable))}}render(){const{variable:$e,picker:Ye}=this.props,Ze=Ye.id===$e.id;return a.createElement("div",{className:"variable-link-wrapper"},Ze?this.renderOptions(Ye):this.renderLink($e))}renderLink($e){const Ye=cE($e),Ze=$e.state===Ar.Gu.Loading;return a.createElement(fE,{id:lo.qz+$e.id,text:Ye,onClick:this.onShowOptions,loading:Ze,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions($e){const{id:Ye}=this.props.variable;return a.createElement(w0.N,{onClick:this.onHideOptions},a.createElement(uE,{id:lo.qz+Ye,value:$e.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Ye}`}),a.createElement(pE,{values:$e.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:$e.highlightIndex,multi:$e.multi,selectedValues:$e.selectedValues,id:`options-${Ye}`}))}}const Ce=X(de);return Ce.displayName="OptionsPicker",Ce};var TE=e(95802);class SE extends a.PureComponent{constructor(){super(...arguments),this.onChange=_=>{this.props.onPropChange({propName:"query",propValue:_.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(TE.d,{constantValue:this.props.variable.query,onChange:this.onChange})}}const ME={...qo.Vg,type:"constant",hide:qo.zL.hideVariable,query:"",current:{},options:[]},Wh=(0,Qo.Z0)({name:"templating/constant",initialState:kd.j,reducers:{createConstantOptionsFromQuery:(W,_)=>{const X=(0,zs.Fs)(W,_.payload.id);X.type==="constant"&&(X.options=[{text:X.query.trim(),value:X.query.trim(),selected:!1}])}}}),xE=Wh.reducer,{createConstantOptionsFromQuery:OE}=Wh.actions,IE=W=>async _=>{const{rootStateKey:X}=W;await _((0,Ys.kb)(X,OE((0,Na.qD)(W)))),await _((0,Br.kl)(W))},AE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:ME,reducer:xE,picker:jd(),editor:SE,dependsOn:()=>!1,setValue:async(W,_,X=!1)=>{await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)((0,Br.x7)((0,Na.jX)(W),_))},updateOptions:async W=>{await(0,Qs.JD)(IE((0,Na.jX)(W)))},getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,current:Ae,options:$e,rootStateKey:Ye,...Ze}=(0,p.cloneDeep)(W);return Ze},getValueForUrl:W=>W.current.value,beforeAdding:W=>{const{current:_,options:X,query:de,...Ce}=(0,p.cloneDeep)(W),Ae={selected:!0,text:de,value:de};return{...Ce,current:Ae,options:[Ae],query:de}}});function RE(W,..._){const X=(0,ni.connect)(..._)(W);return de=>a.createElement(X,{...de,store:Qs.M_})}function Lb(W,..._){const X=connect(..._)(W);return de=>React.createElement(Provider,{store},React.createElement(X,{...de,store}))}var LE=e(58711);class BE extends a.PureComponent{constructor(){super(...arguments),this.onSelectionOptionsChange=async({propName:_,propValue:X})=>{this.props.onPropChange({propName:_,propValue:X,updateOptions:!0})},this.onQueryChange=_=>{this.props.onPropChange({propName:"query",propValue:_.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(LE.w,{query:this.props.variable.query,multi:this.props.variable.multi,allValue:this.props.variable.allValue,includeAll:this.props.variable.includeAll,onQueryChange:this.onQueryChange,onMultiChange:_=>this.onSelectionOptionsChange({propName:"multi",propValue:_.currentTarget.checked}),onIncludeAllChange:_=>this.onSelectionOptionsChange({propName:"includeAll",propValue:_.currentTarget.checked}),onAllValueChange:_=>this.onSelectionOptionsChange({propName:"allValue",propValue:_.currentTarget.value})})}}const UE=(W,_)=>({}),NE={changeVariableMultiValue:Br.TI},wE=RE(BE,UE,NE),FE={...qo.Vg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},Kh=(0,Qo.Z0)({name:"templating/custom",initialState:kd.j,reducers:{createCustomOptionsFromQuery:(W,_)=>{const X=(0,zs.Fs)(W,_.payload.id);if(X.type!=="custom")return;const{includeAll:de}=X,$e=(_.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(Ye=>{Ye=Ye.replace(/\\,/g,",");const Ze=/^(.+)\s:\s(.+)$/g.exec(Ye)??[];if(Ze.length===3){const[,mt,Et]=Ze;return{text:mt.trim(),value:Et.trim(),selected:!1}}else return{text:Ye.trim(),value:Ye.trim(),selected:!1}});de&&$e.unshift({text:lo.Zm,value:lo.To,selected:!1}),X.options=$e}}}),WE=Kh.reducer,{createCustomOptionsFromQuery:KE}=Kh.actions,$E=W=>async(_,X)=>{const{rootStateKey:de}=W,Ce=(0,zs.dn)(W,X());if(Ce.type!=="custom")return;const Ae=(0,Ee.w)().replace(Ce.query);await _((0,Ys.kb)(de,KE((0,Na.qD)(W,Ae)))),await _((0,Br.kl)(W))},VE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:FE,reducer:WE,picker:jd(),editor:wE,dependsOn:(W,_)=>(0,Na.wJ)(W.query,_.name),setValue:async(W,_,X=!1)=>{await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)((0,Br.x7)((0,Na.jX)(W),_))},updateOptions:async W=>{await(0,Qs.JD)($E((0,Na.jX)(W)))},getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,rootStateKey:Ae,...$e}=(0,p.cloneDeep)(W);return $e},getValueForUrl:W=>(0,Na.ML)(W)?lo.Zm:W.current.value});var _E=e(98917),zE=e(80147);const kE={...qo.Vg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:qo.CO.onDashboardLoad},$h=(0,Qo.Z0)({name:"templating/datasource",initialState:kd.j,reducers:{createDataSourceOptions:(W,_)=>{const{sources:X,regex:de}=_.payload.data,Ce=[],Ae=(0,zs.Fs)(W,_.payload.id);if(Ae.type==="datasource"){for(let $e=0;$e<X.length;$e++){const Ye=X[$e];(0,zE._)(Ae.query,Ye.meta)&&(HE(Ye,de)&&Ce.push({text:Ye.name,value:Ye.uid,selected:!1}),jE(Ye,de)&&Ce.push({text:"default",value:"default",selected:!1}))}Ce.length===0&&Ce.push({text:"No data sources found",value:"",selected:!1}),Ae.includeAll&&Ce.unshift({text:lo.Zm,value:lo.To,selected:!1}),Ae.options=Ce}}}});function HE(W,_){return _?_.exec(W.name):!0}function jE(W,_){return W.isDefault?_?_.exec("default"):!0:!1}const GE=$h.reducer,{createDataSourceOptions:QE}=$h.actions,YE=(W,_={getDatasourceSrv:l.tR})=>async(X,de)=>{const{rootStateKey:Ce}=W,Ae=_.getDatasourceSrv().getList({metrics:!0,variables:!1}),$e=(0,zs.dn)(W,de());if($e.type!=="datasource")return;let Ye;$e.regex&&(Ye=(0,Ee.w)().replace($e.regex,void 0,"regex"),Ye=(0,lr.dO)(Ye)),X((0,Ys.kb)(Ce,QE((0,Na.qD)(W,{sources:Ae,regex:Ye})))),await X((0,Br.kl)(W))},JE=(W,_={getDatasourceSrv:l.tR})=>X=>{const de=_.getDatasourceSrv().getList({metrics:!0,variables:!0}),Ce=(0,p.chain)(de).uniqBy("meta.id").map(Ae=>({text:Ae.meta.name,value:Ae.meta.id})).value();Ce.unshift({text:"",value:""}),X((0,Ys.kb)(W,(0,tl.BC)({dataSourceTypes:Ce})))},XE=(W,_)=>{const{variable:{rootStateKey:X}}=_;if(!X)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Dh(tl.nS)};const{editor:de}=(0,zs.nx)(X,W);return{extended:Dh(de)}},ZE={initDataSourceVariableEditor:JE,changeVariableMultiValue:Br.TI},qE=(0,ni.connect)(XE,ZE);class ey extends a.PureComponent{constructor(){super(...arguments),this.onRegExBlur=_=>{this.props.onPropChange({propName:"regex",propValue:_.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:_,propName:X})=>{this.props.onPropChange({propName:X,propValue:_,updateOptions:!0})},this.onMultiChanged=_=>{this.props.changeVariableMultiValue((0,Na.jX)(this.props.variable),_.currentTarget.checked)},this.onIncludeAllChanged=_=>{this.onSelectionOptionsChange({propName:"includeAll",propValue:_.currentTarget.checked})},this.onAllValueChanged=_=>{this.onSelectionOptionsChange({propName:"allValue",propValue:_.currentTarget.value})},this.getSelectedDataSourceTypeValue=()=>{const{extended:_}=this.props;if(!_?.dataSourceTypes.length)return"";const X=_.dataSourceTypes.find(Ce=>Ce.value===this.props.variable.query);return(X?X.value:_.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=_=>{this.props.onPropChange({propName:"query",propValue:_.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:_}=this.props.variable;if(!_){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(_)}render(){const{variable:_,extended:X}=this.props,de=X?.dataSourceTypes?.length?X.dataSourceTypes?.map(Ce=>({value:Ce.value??"",label:Ce.text})):[];return a.createElement(_E.y,{query:_.query,regex:_.regex,multi:_.multi,includeAll:_.includeAll,optionTypes:de,onChange:this.onDataSourceTypeChanged,onRegExBlur:this.onRegExBlur,onMultiChange:this.onMultiChanged,onIncludeAllChange:this.onIncludeAllChanged,onAllValueChange:this.onAllValueChanged})}}const ty=qE(ey),ny=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:kE,reducer:GE,picker:jd(),editor:ty,dependsOn:(W,_)=>W.regex?(0,Na.wJ)(W.regex,_.name):!1,setValue:async(W,_,X=!1)=>{await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)((0,Br.x7)((0,Na.jX)(W),_))},updateOptions:async W=>{await(0,Qs.JD)(YE((0,Na.jX)(W)))},getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,rootStateKey:Ae,...$e}=(0,p.cloneDeep)(W);return{...$e,options:[]}},getValueForUrl:W=>(0,Na.ML)(W)?lo.Zm:W.current.value});var ay=e(25304),sy=e(49317);const Vh=a.memo(({onPropChange:W,variable:_})=>{const X=$e=>{W({propName:"auto",propValue:$e.target.checked,updateOptions:!0})},de=$e=>{W({propName:"query",propValue:$e.currentTarget.value,updateOptions:!0})},Ce=$e=>{W({propName:"auto_count",propValue:$e.value,updateOptions:!0})},Ae=$e=>{W({propName:"auto_min",propValue:$e.currentTarget.value,updateOptions:!0})};return a.createElement(sy.s,{intervals:_.query,autoStepCount:_.auto_count,autoEnabled:_.auto,onAutoCountChanged:Ce,onIntervalsChange:de,onAutoEnabledChange:X,onAutoMinIntervalChanged:Ae,autoMinInterval:_.auto_min})});Vh.displayName="IntervalVariableEditor";var ry=e(23989),xp=e(81515);const oy=W=>async _=>{const{rootStateKey:X}=W;await _((0,Ys.kb)(X,(0,xp.mn)((0,Na.qD)(W)))),await _(Op(W)),await _((0,Br.kl)(W))},Op=(W,_={calculateInterval:Eh.calculateInterval,getTimeSrv:Ai.jG,templateSrv:(0,ry.w)()})=>(X,de)=>{const Ce=(0,zs.dn)(W,de());if(Ce.type==="interval"&&Ce.auto){const Ae=_.calculateInterval(_.getTimeSrv().timeRange(),Ce.auto_count,Ce.auto_min);_.templateSrv.setGrafanaVariable("$__auto_interval_"+Ce.name,Ae.interval),_.templateSrv.setGrafanaVariable("$__auto_interval",Ae.interval)}},iy=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:xp.Ez,reducer:xp.E5,picker:jd(),editor:Vh,dependsOn:()=>!1,setValue:async(W,_,X=!1)=>{await(0,Qs.JD)(Op((0,Na.jX)(W))),await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)(Op((0,Na.jX)(W))),await(0,Qs.JD)((0,Br.x7)((0,Na.jX)(W),_))},updateOptions:async W=>{await(0,Qs.JD)(oy((0,Na.jX)(W)))},getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,rootStateKey:Ae,...$e}=(0,p.cloneDeep)(W);return $e},getValueForUrl:W=>W.current.value});var ly=e(44890),cy=e(64423),dy=e(12091),uy=e(70766);function my(W,_,X){return{next:Ce=>{if(Ce.state===Ar.Gu.Error){X.unsubscribe(),_(Ce.error);return}if(Ce.state===Ar.Gu.Done){X.unsubscribe(),W();return}},error:Ce=>{X.unsubscribe(),_(Ce)},complete:()=>{X.unsubscribe(),W()}}}const fy=(W,_)=>async(X,de)=>{try{const{rootStateKey:Ce}=W;if(!(0,Na.sN)(Ce,de()))return;const Ae=(0,zs.dn)(W,de());if(Ae.type!=="query")return;(0,zs.nx)(Ce,de()).editor.id===Ae.id&&X((0,Ys.kb)(Ce,(0,tl.Eo)({errorProp:"update"})));const $e=await(0,B.l)().get(Ae.datasource??"");await new Promise((Ye,Ze)=>{const mt=new cy.yU,Et=my(Ye,Ze,mt),Pt=Tp().getResponse(W).subscribe(Et);mt.add(Pt),Tp().queueRequest({identifier:W,datasource:$e,searchFilter:_})})}catch(Ce){if(Ce instanceof Error){const Ae=(0,dy.u)(Ce),{rootStateKey:$e}=W;throw(0,zs.nx)($e,de()).editor.id===W.id&&X((0,Ys.kb)($e,(0,tl.NY)({errorProp:"update",errorText:Ae.message}))),Ae}}},gy=W=>async(_,X)=>{const de=(0,zs.dn)(W,X());de.type==="query"&&await _(_h((0,Na.jX)(de),de.datasource))},_h=(W,_)=>async(X,de)=>{try{const{rootStateKey:Ce}=W,{editor:Ae}=(0,zs.nx)(Ce,de()),Ye=Dp(Ae)?.dataSource,Ze=await(0,B.l)().get(_??"");Ye&&Ye.type!==Ze?.type&&X((0,Ys.kb)(Ce,(0,vl.QP)((0,Na.qD)(W,{propName:"query",propValue:""}))));const mt=await(0,uy.y)(Ze);X((0,Ys.kb)(Ce,(0,tl.BC)({dataSource:Ze,VariableQueryEditor:mt})))}catch(Ce){console.error(Ce)}},py=(W,_,X)=>async(de,Ce)=>{const{rootStateKey:Ae}=W,$e=(0,zs.dn)(W,Ce());if($e.type==="query"){if(hy($e.name,_)){const Ye="Query cannot contain a reference to itself. Variable: $"+$e.name;de((0,Ys.kb)(Ae,(0,tl.NY)({errorProp:"query",errorText:Ye})));return}de((0,Ys.kb)(Ae,(0,tl.Eo)({errorProp:"query"}))),de((0,Ys.kb)(Ae,(0,vl.QP)((0,Na.qD)(W,{propName:"query",propValue:_})))),X!==void 0?de((0,Ys.kb)(Ae,(0,vl.QP)((0,Na.qD)(W,{propName:"definition",propValue:X})))):typeof _=="string"&&de((0,Ys.kb)(Ae,(0,vl.QP)((0,Na.qD)(W,{propName:"definition",propValue:_})))),await de((0,Br.mZ)(W))}};function hy(W,_){if(typeof _=="string"&&_.match(new RegExp("\\$"+W+"(/| |$)")))return!0;const X=zh(_);for(let de in X)if(X.hasOwnProperty(de)){const Ce=X[de];if(typeof Ce=="string"&&Ce.match(new RegExp("\\$"+W+"(/| |$)")))return!0}return!1}function zh(W){return typeof W!="object"||W===null?{query:W}:Object.keys(W).reduce((de,Ce)=>{const Ae=W[Ce];if(typeof Ae!="object"||Ae===null)return de[Ce]=Ae,de;const $e=zh(Ae);for(let Ye in $e)$e.hasOwnProperty(Ye)&&(de[`${Ce}_${Ye}`]=$e[Ye]);return de},{})}const vy=(W,_)=>{const{rootStateKey:X}=_.variable;if(!X)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Dp(tl.nS)};const{editor:de}=(0,zs.nx)(X,W);return{extended:Dp(de)}},Ey={initQueryVariableEditor:gy,changeQueryVariableDataSource:_h,changeQueryVariableQuery:py,changeVariableMultiValue:Br.TI},yy=(0,ni.connect)(vy,Ey);class by extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=_=>{this.props.onPropChange({propName:"datasource",propValue:_.isDefault?null:(0,yh.p$)(_)})},this.onLegacyQueryChange=async(_,X)=>{this.props.variable.query!==_&&this.props.changeQueryVariableQuery((0,Na.jX)(this.props.variable),_,X)},this.onQueryChange=async _=>{if(this.props.variable.query!==_){let X="";_&&_.hasOwnProperty("query")&&typeof _.query=="string"&&(X=_.query),this.props.changeQueryVariableQuery((0,Na.jX)(this.props.variable),_,X)}},this.onRegExBlur=async _=>{const X=_.currentTarget.value;this.props.variable.regex!==X&&this.props.onPropChange({propName:"regex",propValue:X,updateOptions:!0})},this.onRefreshChange=_=>{this.props.onPropChange({propName:"refresh",propValue:_})},this.onSortChange=async _=>{this.props.onPropChange({propName:"sort",propValue:_.value,updateOptions:!0})},this.onMultiChange=_=>{this.props.onPropChange({propName:"multi",propValue:_.currentTarget.checked})},this.onIncludeAllChange=_=>{this.props.onPropChange({propName:"includeAll",propValue:_.currentTarget.checked})},this.onAllValueChange=_=>{this.props.onPropChange({propName:"allValue",propValue:_.currentTarget.value})}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Na.jX)(this.props.variable))}componentDidUpdate(_){_.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Na.jX)(this.props.variable),this.props.variable.datasource)}render(){const{extended:_,variable:X}=this.props;if(!_||!_.dataSource||!_.VariableQueryEditor)return null;const de=(0,Ai.jG)().timeRange();return a.createElement(ly.u,{datasource:X.datasource??void 0,onDataSourceChange:this.onDataSourceChange,query:X.query,onQueryChange:this.onQueryChange,onLegacyQueryChange:this.onLegacyQueryChange,timeRange:de,regex:X.regex,onRegExChange:this.onRegExBlur,sort:X.sort,onSortChange:this.onSortChange,refresh:X.refresh,onRefreshChange:this.onRefreshChange,isMulti:X.multi,includeAll:X.includeAll,allValue:X.allValue??"",onMultiChange:this.onMultiChange,onIncludeAllChange:this.onIncludeAllChange,onAllValueChange:this.onAllValueChange})}}const Dy=yy(by),Py=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:z0,reducer:G0,picker:jd(),editor:Dy,dependsOn:(W,_)=>(0,Na.wJ)(W.query,W.datasource?.uid,W.regex,_.name),setValue:async(W,_,X=!1)=>{await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)((0,Br.x7)((0,Na.jX)(W),_))},updateOptions:async(W,_)=>{await(0,Qs.JD)(fy((0,Na.jX)(W),_))},getSaveModel:W=>{const{index:_,id:X,state:de,global:Ce,queryValue:Ae,rootStateKey:$e,...Ye}=(0,p.cloneDeep)(W);return W.refresh!==qo.CO.never?{...Ye,options:[]}:Ye},getValueForUrl:W=>(0,Na.ML)(W)?lo.Zm:W.current.value}),Cy=()=>({id:"system",description:"",name:"system",initialState:{...qo.Vg,type:"system",hide:qo.zL.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Ar.Gu.Done},reducer:W=>W,picker:null,editor:null,dependsOn:()=>!1,setValue:async(W,_,X=!1)=>{},setValueFromUrl:async(W,_)=>{},updateOptions:async W=>{},getSaveModel:W=>({}),getValueForUrl:W=>""});var Ty=e(58975),Sy=e(14329);function My({onPropChange:W,variable:{query:_}}){const X=(0,a.useCallback)((Ae,$e)=>{Ae.preventDefault(),W({propName:"originalQuery",propValue:Ae.currentTarget.value,updateOptions:!1}),W({propName:"query",propValue:Ae.currentTarget.value,updateOptions:$e})},[W]),de=(0,a.useCallback)(Ae=>X(Ae,!1),[X]),Ce=(0,a.useCallback)(Ae=>X(Ae,!0),[X]);return a.createElement(a.Fragment,null,a.createElement(Ty.Y,null,"Text options"),a.createElement(Sy._,{value:_,name:"Default value",placeholder:"default value, if any",onChange:de,onBlur:Ce,width:30,testId:Mr.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function xy({variable:W,onVariableChange:_,readOnly:X}){const de=(0,An.useDispatch)(),[Ce,Ae]=(0,a.useState)(W.current.value);(0,a.useEffect)(()=>{Ae(W.current.value)},[W]);const $e=(0,a.useCallback)(()=>{if(!W.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(W.current.value!==Ce){if(de((0,Ys.kb)(W.rootStateKey,(0,vl.QP)((0,Na.qD)({id:W.id,type:W.type},{propName:"query",propValue:Ce})))),_){_({...W,current:(0,Fh.R)(W.current)?{}:{...W.current,value:Ce}});return}Vd.B.get(W.type).updateOptions(W)}},[W,Ce,de,_]),Ye=(0,a.useCallback)(Et=>Ae(Et.target.value),[Ae]),Ze=Et=>$e(),mt=Et=>{Et.keyCode===13&&(Et.preventDefault(),$e())};return a.createElement(Me.p,{type:"text",value:Ce,onChange:Ye,onBlur:Ze,disabled:X,onKeyDown:mt,placeholder:(0,cs.t)("variable.textbox.placeholder","Enter variable value"),id:lo.qz+W.id})}const Oy={...qo.Vg,type:"textbox",query:"",current:{},options:[],originalQuery:null},kh=(0,Qo.Z0)({name:"templating/textbox",initialState:kd.j,reducers:{createTextBoxOptions:(W,_)=>{const X=(0,zs.Fs)(W,_.payload.id);if(X.type!=="textbox")return;const de={text:X.query.trim(),value:X.query.trim(),selected:!1};X.options=[de],X.current=de}}}),Iy=kh.reducer,{createTextBoxOptions:Ay}=kh.actions,Ry=W=>async(_,X)=>{const{rootStateKey:de,type:Ce}=W;_((0,Ys.kb)(de,Ay((0,Na.qD)(W))));const Ae=(0,zs.dn)(W,X());Ae.type==="textbox"&&await Vd.B.get(Ce).setValue(Ae,Ae.options[0],!0)},Ly=(W,_)=>async(X,de)=>{const{rootStateKey:Ce}=W,Ae=(0,zs.dn)(W,de());if(Ae.type!=="textbox")return;const $e=(0,Na.QT)(_);X((0,Ys.kb)(Ce,(0,vl.QP)((0,Na.qD)(Ae,{propName:"query",propValue:$e})))),await X((0,Br.x7)((0,Na.jX)(Ae),$e))},By=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Oy,reducer:Iy,picker:xy,editor:My,dependsOn:(W,_)=>!1,setValue:async(W,_,X=!1)=>{await(0,Qs.JD)((0,Br.t9)((0,Na.jX)(W),_,X))},setValueFromUrl:async(W,_)=>{await(0,Qs.JD)(Ly((0,Na.jX)(W),_))},updateOptions:async W=>{await(0,Qs.JD)(Ry((0,Na.jX)(W)))},getSaveModel:(W,_)=>{const{index:X,id:de,state:Ce,global:Ae,originalQuery:$e,rootStateKey:Ye,...Ze}=(0,p.cloneDeep)(W);if(W.query!==$e&&!_){const mt=$e??"",Et={selected:!1,text:mt,value:mt};return{...Ze,query:mt,current:Et,options:[Et]}}return Ze},getValueForUrl:W=>W.current.value,beforeAdding:W=>({...(0,p.cloneDeep)(W),originalQuery:W.query})});var Uy=e(51066),Ip=e(55314),Ap=e(72686),Rp=e(249),Ny=e(91219);const wy={navBarTree:Ny.I_,navIndex:Pd._h,appNotifications:Nu.g5};var Fy=e(44672),eo=e(88467),to=e(23770);const Wy=(0,zd.combineReducers)({dataSources:(0,eo.Xw)("dataSources",to.DC,({rulesSourceName:W})=>W).reducer,promRules:(0,eo.Xw)("promRules",to.mB,({rulesSourceName:W})=>W).reducer,rulerRules:(0,eo.Xw)("rulerRules",to.eB,({rulesSourceName:W})=>W).reducer,silences:(0,eo.Xw)("silences",to.ly,W=>W).reducer,ruleForm:(0,zd.combineReducers)({saveRule:(0,eo.J7)("saveRule",to._$).reducer,existingRule:(0,eo.J7)("existingRule",to.pT).reducer}),grafanaNotifiers:(0,eo.J7)("grafanaNotifiers",to.mF).reducer,saveAMConfig:(0,eo.J7)("saveAMConfig",to.RW).reducer,deleteAMConfig:(0,eo.J7)("deleteAMConfig",to.nO).reducer,updateSilence:(0,eo.J7)("updateSilence",to.a7).reducer,amAlerts:(0,eo.Xw)("amAlerts",to.El,W=>W).reducer,folders:(0,eo.Xw)("folders",to.Tp,W=>W).reducer,amAlertGroups:(0,eo.Xw)("amAlertGroups",to.D3,W=>W).reducer,testReceivers:(0,eo.J7)("testReceivers",to.bO).reducer,updateLotexNamespaceAndGroup:(0,eo.J7)("updateLotexNamespaceAndGroup",to.LU).reducer,externalAlertmanagers:(0,zd.combineReducers)({alertmanagerConfig:(0,eo.J7)("alertmanagerConfig",to.ef).reducer,discoveredAlertmanagers:(0,eo.J7)("discoveredAlertmanagers",to.IX).reducer}),managedAlertStateHistory:(0,eo.J7)("managedAlertStateHistory",to.JH).reducer});var Ky=e(55907);const $y={items:[],searchQuery:"",isLoading:!1},Vy={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function _y(W,_){const X=Ky.A.getStateDisplayModel(_),de={...W,stateText:X.text,stateIcon:X.iconClass,stateClass:X.stateClass,stateAge:(0,P.KQ)(W.newStateDate).fromNow(!0)};return de.state!=="paused"&&(de.executionError&&(de.info="Execution Error: "+de.executionError),de.evalData&&de.evalData.noData&&(de.info="Query returned no data")),de}const Hh=(0,Qo.Z0)({name:"alertRules",initialState:$y,reducers:{loadAlertRules:W=>({...W,isLoading:!0}),loadedAlertRules:(W,_)=>{const de=_.payload.map(Ce=>_y(Ce,Ce.state));return{...W,items:de,isLoading:!1}},setSearchQuery:(W,_)=>({...W,searchQuery:_.payload})}}),jh=(0,Qo.Z0)({name:"notificationChannel",initialState:Vy,reducers:{setNotificationChannels:(W,_)=>({...W,notificationChannelTypes:Gy(_.payload),notifiers:_.payload}),notificationChannelLoaded:(W,_)=>{const X=_.payload,Ce=W.notifiers.find(Ae=>Ae.type===X.type).options.filter(Ae=>Ae.secure);return Ce.length>0&&Ce.some(Ae=>X.settings[Ae.propertyName]!=="")?jy(W,_.payload,Ce):{...W,notificationChannel:X}},resetSecureField:(W,_)=>({...W,notificationChannel:{...W.notificationChannel,secureFields:{...W.notificationChannel.secureFields,[_.payload]:!1}}})}}),{loadAlertRules:Ub,loadedAlertRules:Nb,setSearchQuery:wb}=Hh.actions,{setNotificationChannels:Fb,notificationChannelLoaded:Wb,resetSecureField:Kb}=jh.actions,zy=Hh.reducer,ky=jh.reducer,Hy={alertRules:zy,notificationChannel:ky,unifiedAlerting:Wy};function jy(W,_,X){const de={},Ce={};return X.forEach(Ae=>{Ce[Ae.propertyName]=_.settings[Ae.propertyName],de[Ae.propertyName]=""}),{...W,notificationChannel:{..._,settings:{..._.settings,...de},secureSettings:{...Ce}}}}function Gy(W){return W.map(_=>({value:_.type,label:_.name,..._,typeName:_.type})).sort((_,X)=>_.name>X.name?1:-1)}var Qy=e(93584),Yy=e(20604),Jy=e(79763),Xy=e(53466),Zy=e(28601),qy=e(36227),eb=e(54650),tb=e(40823),nb=e(88264),ab=e(10943),sb=e(80095),rb=e(31326),ob=e(81862),ib=e(1936),lb=e(8212),cb=e(34655),db=e(87617),Lp=e(49962),ub=e(97007);const mb={...wy,...Hy,...cb.Ay,...Qy.Ay,...eb.Ay,...Zy.Ay,...ph.Ay,...qy.Ay,...db.Ay,...ib.Ay,...ob.Ay,...tb.Ay,...ab.Ay,...Jy.Ay,...Fy.Ay,...nb.Ay,...Xy.Ay,...sb.Ay,...Ys.Ay,...lb.Ay,...Yy.Ay,plugins:rb.Ff,[Lp.H.reducerPath]:Lp.H.reducer,[Ap.Sm.reducerPath]:Ap.Sm.reducer,[Ip.cU.reducerPath]:Ip.cU.reducer,[Rp.AL.reducerPath]:Rp.AL.reducer},Gh={},$b=W=>{Object.assign(Gh,W)},fb=()=>{const W=(0,zd.combineReducers)({...mb,...Gh});return(_,X)=>{if(X.type!==ub.N.type)return W(_,X);const{cleanupAction:de}=X.payload;return de(_),W(_,X)}};function Vb(W){addReducer(W)}const gb=(0,Qo.Nc)();function pb(W){const _=(0,Qo.U1)({reducer:fb(),middleware:X=>X({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(gb.middleware,Lp.H.middleware,Ap.Sm.middleware,Ip.cU.middleware,Rp.AL.middleware),devTools:!1,preloadedState:{navIndex:(0,Pd.s2)(),...W}});return(0,Uy.$k)(_.dispatch),(0,Qs.k3)(_),_}b().move=Y.b;const Qh=e(39572),sm=Qh.keys().map(W=>Qh(W));class hb{async init(){try{parent.postMessage("GrafanaAppInit","*");const _=(0,cs.JL)(z.Ay.bootData.user.language);_.then(({language:Pt})=>(0,z._R)({language:Pt})),(0,M.u5)(gs.IB),yb(),Yn(),(0,Kc.j)("frontend_app_init"),z.Ay.featureToggles.betterPageScrolling||bb(),(0,P.xS)(z.Ay.bootData.user.locale),(0,P.$D)(z.Ay.bootData.user.weekStart),(0,L.Y)(Uv.m),(0,V.l)(Jp),(0,N.e)(Bv.a),(0,O.T)(S.Ny),(0,v.p)(Ev),(0,y.G)(()=>z.Ay.bootData.user.timezone),Lv(),(0,vv.initAuthConfig)(),(0,x.H8)(Rr.A),await _,vb(),pb(),Eb(),hv(),C.D.setInit(Gf.H),C.G.setInit(Gf.u),f.h.setInit(_c),Vd.B.setInit(()=>[Py(),VE(),By(),AE(),ny(),iy(),N0(),Cy()]),D.l.setInit(kc),ta(),(0,A.HC)(()=>new o0),lE(new iE),(0,A.pC)(bp.BN),(0,R.se)({importPanelPlugin:hh.TV,getPanelPluginFromCache:hh.PY}),T.I.initialize({config:z.Ay,getTimeRangeForUrl:(0,Ai.jG)().timeRangeForUrl,getVariablesUrlParams:ay.z}),document.addEventListener("click",Ya);const X=new l.xq;X.init(z.Ay.datasources,z.Ay.defaultDatasource),(0,B.h)(X),l0();let de=[];Js.TP.user.orgRole!==""&&(de=await e0(z.Ay.apps));const Ce=kv([{pluginId:"grafana",extensionConfigs:Yv()},...de]),Ae=Pt=>Jv({...Pt,registry:Ce});(0,U.cE)(Ae);const $e=S.Ny.getSearchObject(),Ye=new rf,Ze=new mv(S.Ny,Ye),mt=new xs;mt.start(),Ye.setKioskModeFromUrl($e.kiosk);try{(0,c0.W1)()}catch(Pt){console.warn("Failed to clean up old expanded folders",Pt)}this.context={backend:gs.IB,location:S.Ny,chrome:Ye,keybindings:Ze,newAssetsChecker:mt,config:z.Ay},(0,w._)(Vr.ni),(0,h.H)(document.getElementById("reactRoot")).render(a.createElement(Yp,{app:this}))}catch(_){console.error("Failed to start Grafana",_),window.__grafana_load_failed()}finally{(0,Kc.z)("frontend_app_init")}}}function vb(){sm.length>0&&sm[0].addExtensionReducers()}function Eb(){sm.length>0&&sm[0].init()}function yb(){(0,K.H2)(new jl({debug:!1})),window.addEventListener("load",W=>{const _="frontend_boot_load_time_seconds";performance&&(performance.mark(_),Gd("first-paint","frontend_boot_","_time_seconds"),Gd("first-contentful-paint","frontend_boot_","_time_seconds"),Gd(_),Gd("frontend_boot_js_done_time_seconds"),Gd("frontend_boot_css_time_seconds"))}),Js.TP.user.orgRole!==""&&(0,K.pl)(new Xo({})),z.Ay.grafanaJavascriptAgent.enabled&&(0,K.pl)(new ov({...z.Ay.grafanaJavascriptAgent,app:{version:z.Ay.buildInfo.version,environment:z.Ay.buildInfo.env},buildInfo:z.Ay.buildInfo,user:{id:String(z.Ay.bootData.user?.id),email:z.Ay.bootData.user?.email}})),z.Ay.googleAnalyticsId&&(0,K.pl)(new Gl({googleAnalyticsId:z.Ay.googleAnalyticsId})),z.Ay.googleAnalytics4Id&&(0,K.pl)(new Zr({googleAnalyticsId:z.Ay.googleAnalytics4Id,googleAnalytics4SendManualPageViews:z.Ay.googleAnalytics4SendManualPageViews})),z.Ay.rudderstackWriteKey&&z.Ay.rudderstackDataPlaneUrl&&(0,K.pl)(new Kd({writeKey:z.Ay.rudderstackWriteKey,dataPlaneUrl:z.Ay.rudderstackDataPlaneUrl,user:z.Ay.bootData.user,sdkUrl:z.Ay.rudderstackSdkUrl,configUrl:z.Ay.rudderstackConfigUrl,integrationsUrl:z.Ay.rudderstackIntegrationsUrl,buildInfo:z.Ay.buildInfo})),z.Ay.applicationInsightsConnectionString&&(0,K.pl)(new pl({connectionString:z.Ay.applicationInsightsConnectionString,endpointUrl:z.Ay.applicationInsightsEndpointUrl}))}function bb(){(0,F.X)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Gd(W,_="",X=""){const de=b().first(performance.getEntriesByName(W));if(de){const Ce=de.name.replace(/-/g,"_");(0,Wc.n)(`${_}${Ce}${X}`,Math.round(de.startTime)/1e3)}}const Db=new hb;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,Db.init()},60021:(Q,I,e)=>{"use strict";e.d(I,{Or:()=>n,Oz:()=>o,RC:()=>t,ho:()=>r,nA:()=>s});var t=(m=>(m.Active="active",m.Expired="expired",m.Pending="pending",m))(t||{}),n=(m=>(m.Unprocessed="unprocessed",m.Active="active",m.Suppressed="suppressed",m))(n||{}),r=(m=>(m.equal="=",m.notEqual="!=",m.regex="=~",m.notRegex="!~",m))(r||{}),s=(m=>(m.Internal="internal",m.External="external",m.All="all",m))(s||{}),o=(m=>(m.cortex="cortex",m.mimir="mimir",m.prometheus="prometheus",m))(o||{})},91621:(Q,I,e)=>{"use strict";e.d(I,{Dw:()=>m,Rx:()=>r,_W:()=>o,d$:()=>n});const t={statistics:[]};var n=(l=>(l[l.Query=1]="Query",l[l.Search=0]="Search",l))(n||{}),r=(l=>(l[l.Builder=0]="Builder",l[l.Code=1]="Code",l))(r||{});const s={parameters:[]};var o=(l=>(l.And="and",l.Function="function",l.FunctionParameter="functionParameter",l.GroupBy="groupBy",l.Operator="operator",l.Or="or",l.Property="property",l))(o||{}),m=(l=>(l.String="string",l))(m||{});const i={logGroupNames:[],logGroups:[],statsGroups:[]}},25640:(Q,I,e)=>{"use strict";e.d(I,{Rx:()=>t.Rx,YZ:()=>n,b4:()=>r,d$:()=>t.d$});var t=e(91621),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),r=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(r||{})},36666:(Q,I,e)=>{"use strict";e.d(I,{A:()=>O});var t=e(32196),n=e(16792),r=e(55127),s=e.n(r),o=e(96540),m=e(16817),i=e(52622),l=e(40845),d=e(67061),c=e(88575),g=e(88323),u=e(94354),E=e(15292),p=e(62930),b=e(2913),a=e(14792),h=e(45199),P=e(31193),y=e(65160),C=e(43854),f=e(45994);function D(v){return JSON.stringify(v)}function T(v,x){let A=x;return window.__grafanaSceneContext&&window.__grafanaSceneContext instanceof h.H$&&(A=window.__grafanaSceneContext.state.editPanel?.state.panelId),v===A}const M=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function O({data:v,query:x,onChange:A,onRunQuery:R}){const{value:B}=(0,m.A)(()=>(0,P.tR)().get()),U=(0,o.useMemo)(()=>(0,a.UA)().getCurrent()?.getPanelById(x.panelId??-124134),[x.panelId]),{value:w,loading:K}=(0,m.A)(async()=>{if(!U||!v)return[];const q=await(0,P.tR)().get(U.datasource);return Promise.all(U.targets.map(async Z=>{const J=Z.datasource?await(0,P.tR)().get(Z.datasource):q,G=J.getQueryDisplayText||D,ne=(0,y.E)(v,Z.refId)??v;return{refId:Z.refId,query:G(Z),name:J.name,img:J.meta.info.logos.small,data:ne.series,error:ne.error}}))},[v,U]),N=(0,o.useCallback)(q=>{A(q),R()},[A,R]),L=(0,o.useCallback)(q=>{N({...x,panelId:q})},[x,N]),V=(0,o.useCallback)(()=>{N({...x,withTransforms:!x.withTransforms})},[x,N]),F=(0,o.useCallback)(q=>{N({...x,topic:q?i.QR.Annotations:void 0})},[x,N]),z=(0,o.useCallback)(q=>{const Z=q.datasource??B,J=(0,P.tR)().getInstanceSettings(Z)?.name,G=q.targets.length;return`${G} ${s()("query",G)} to ${J}`},[B]),Y=(0,a.UA)().getCurrent(),H=!!(x.withTransforms||U?.transformations?.length),k=(0,o.useMemo)(()=>Y?.panels.filter(q=>b.Ay.panels[q.type]&&q.targets&&!T(q.id,Y.panelInEdit?.id)&&q.datasource?.uid!==f.K).map(q=>({value:q.id,label:q.title??"Panel "+q.id,description:z(q),imgUrl:b.Ay.panels[q.type].info.logos.small}))??[],[Y,z]),ee=(0,l.of)(S),ie=(0,n.Bi)();if(!Y)return null;if(k.length<1)return o.createElement("p",{className:ee.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const fe=k.find(q=>q.value===x.panelId);return o.createElement(C.i,null,o.createElement(d.B,{direction:"column"},o.createElement(d.B,{gap:3},o.createElement(c.D,{label:"Source panel",description:"Use query results from another panel"},o.createElement(g.l6,{inputId:ie,placeholder:"Choose panel",isSearchable:!0,options:k,value:fe,onChange:q=>L(q.value)})),o.createElement(c.D,{label:"Data",description:"Use data or annotations from the panel"},o.createElement(u.z,{options:M,value:x.topic===i.QR.Annotations,onChange:F})),H&&o.createElement(c.D,{label:"Transform",description:"Apply transformations from the source panel"},o.createElement(E.K,{value:!!x.withTransforms,onChange:V}))),K?o.createElement(p.y,null):o.createElement(o.Fragment,null,w&&!!w.length&&o.createElement(c.D,{label:"Queries from panel"},o.createElement(d.B,{direction:"column"},w.map((q,Z)=>o.createElement(d.B,{key:Z,alignItems:"center",gap:1},o.createElement("div",null,q.refId),o.createElement("img",{src:q.img,alt:q.name,title:q.name,width:16}),o.createElement("div",null,q.query))))))))}function S(v){return{noQueriesText:(0,t.css)({padding:v.spacing(1.25)})}}},14348:(Q,I,e)=>{"use strict";e.d(I,{K:()=>i.K,kN:()=>l,mw:()=>d});var t=e(88483),n=e(52622),r=e(39070),s=e(43127),o=e(14792),m=e(34214),i=e(45994);function l(E){return E?typeof E=="string"?E===i.K:"meta"in E&&E.meta.name===i.K||E.uid===i.K:!1}function d(E,p){return new t.c(b=>{const a=(0,o.UA)().getCurrent(),h=c(E.queries);if(!h){b.next(g("Missing panel reference ID"));return}let P=a?.getPanelById(h,!0);if(P instanceof m.a||(P=new m.a(P)),!P){b.next(g("Unknown Panel: "+h));return}const y=P.getQueryRunner(),C=y.getData({withTransforms:!!p?.withTransforms,withFieldConfig:!1}).subscribe({next:f=>{p?.topic===n.QR.Annotations&&(f={...f,series:f.annotations??[],annotations:void 0}),b.next(f)}});if(!P.isInView&&P.refreshWhenInView||a?.otherPanelInFullscreen(P)){const{datasource:f,targets:D}=P,T={...E,datasource:f,panelId:h,queries:D};P.refreshWhenInView=!1,y.run(T)}return()=>{C.unsubscribe()}})}function c(E){if(!(!E||!E.length))return E[0].panelId}function g(E){return{state:r.Gu.Error,series:[],request:{},error:{message:E},timeRange:(0,s.E2)()}}var u=e(36666)},45994:(Q,I,e)=>{"use strict";e.d(I,{K:()=>t});const t="-- Dashboard --",n="dashboard"},90183:(Q,I,e)=>{"use strict";e.d(I,{i:()=>Fe,o:()=>Ee});var t=e(2543),n=e(65474),r=e(62467),s=e(44240),o=e(81160),m=e(89667),i=e(39070),l=e(55004),d=e(37471),c=e(78368),g=e(14236),u=e(26657),E=e(72574),p=e(78731),b=e(17172),a=e(19347),h=e(79056),P=e(14792),y=e(32196),C=e(96540),f=e(40845),D=e(84167),T=e(88575),M=e(88323),O=e(15292),S=e(99818),v=e(10154),x=e(68706),A=e(95093),R=e.n(A),B=e(91410),U=e(20333),w=e(55852),K=e(66864),N=e(17624),L=e(67459),V=e(79770),F=e(14578),z=e(87266),Y=e(16797);const H="time-of-day-picker-panel",k=({minuteStep:Me=1,showHour:ze=!0,showSeconds:xe=!1,onChange:We,value:be,size:pe="auto",disabled:Ue,disabledHours:we,disabledMinutes:je,disabledSeconds:He,placeholder:rt,format:Je="HH:mm",defaultValue:Ve=void 0,allowEmpty:Oe=!1,width:Ne})=>{const ye=(0,f.of)(ie),se=()=>Ne?(0,y.css)`
        width: ${Ne}px;
      `:(0,z.lH)()[pe];return C.createElement(V.A,{value:be,defaultValue:Ve,onChange:ae=>We(ae),showHour:ze,showSecond:xe,format:Je,allowEmpty:Oe,className:(0,y.cx)(se(),ye.input),popupClassName:(0,y.cx)(ye.picker,H),minuteStep:Me,inputIcon:C.createElement(ee,{wrapperStyle:ye.caretWrapper}),disabled:Ue,disabledHours:we,disabledMinutes:je,disabledSeconds:He,placeholder:rt})},ee=({wrapperStyle:Me=""})=>C.createElement("div",{className:Me},C.createElement(F.I,{name:"angle-down"})),ie=Me=>{const ze=Me.components.input.background,xe=Me.v1.palette.black,We=Me.colors.background.secondary,be=Me.shape.radius.default,pe=Me.components.input.borderColor;return{caretWrapper:(0,y.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Me.colors.text.secondary};
    `,picker:(0,y.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${ze};
        border-color: ${pe};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Me.v1.palette.orange};
            border-radius: ${be};
          }

          &:hover {
            background: ${We};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Me.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${xe};
        background-color: ${ze};
        border-color: ${pe};
        border-radius: ${be};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${ze};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,y.css)`
      .rc-time-picker-input {
        background-color: ${ze};
        border-radius: ${be};
        border-color: ${pe};
        height: ${Me.spacing(4)};

        &:focus {
          ${(0,Y.focusCss)(Me)}
        }

        &:disabled {
          background-color: ${Me.colors.action.disabledBackground};
          color: ${Me.colors.action.disabledText};
          border: 1px solid ${Me.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Me.colors.text.secondary};
      }
    `}},fe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Me,ze)=>({label:Me,value:ze+1})),q=({value:Me,onChange:ze})=>{const xe=(0,f.of)(Z),We=Date.now(),be=(0,B.QZ)(Me.timezone??"utc",We),pe=(0,P.UA)().getCurrent()?.getTimezone()===Me.timezone,[Ue,we]=(0,C.useState)(!1),je=()=>{we(!Ue)},He=ae=>{if(!ae)return;const ge=R()();if(ae){const Pe=ae.split(":");ge.set("hour",parseInt(Pe[0],10)),ge.set("minute",parseInt(Pe[1],10))}return ge},rt=()=>{let ae="Everyday";return Me.fromDayOfWeek&&!Me.toDayOfWeek&&(ae=fe[Me.fromDayOfWeek-1].label),ae},Je=()=>{const ae=C.createElement(C.Fragment,null,C.createElement(L.U,{title:be?.name}),C.createElement(N.X,{timeZone:Me.timezone,timestamp:We}));return pe?C.createElement(C.Fragment,null,"Dashboard timezone (",ae,")"):ae},Ve=(ae,ge)=>{const Pe=ae?ae.format("HH:mm"):void 0;ze(ge==="from"?{...Me,from:Pe}:{...Me,to:Pe})},Oe=ae=>{ze({...Me,timezone:ae})},Ne=ae=>{const ge=ae?ae.value:void 0,Pe=ae?Me.toDayOfWeek:void 0;ze({...Me,fromDayOfWeek:ge,toDayOfWeek:Pe})},ye=ae=>{ze({...Me,toDayOfWeek:ae?ae.value:void 0})},se=()=>Ue?C.createElement(U.U,{value:Me.timezone,includeInternal:!0,onChange:ae=>Oe(ae),onBlur:()=>we(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):C.createElement("div",{className:xe.timezoneContainer},C.createElement("div",{className:xe.timezone},Je()),C.createElement(w.$n,{variant:"secondary",onClick:je,size:"sm"},"Change timezone"));return C.createElement(D.n,{className:xe.wrapper},C.createElement(T.D,{label:"From"},C.createElement(K.Gy,{spacing:"xs"},C.createElement(M.l6,{options:fe,isClearable:!0,placeholder:"Everyday",value:Me.fromDayOfWeek??null,onChange:ae=>Ne(ae),width:20}),C.createElement(k,{value:He(Me.from),onChange:ae=>Ve(ae,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),C.createElement(T.D,{label:"To"},C.createElement(K.Gy,{spacing:"xs"},(Me.fromDayOfWeek||Me.toDayOfWeek)&&C.createElement(M.l6,{options:fe,isClearable:!0,placeholder:rt(),value:Me.toDayOfWeek??null,onChange:ae=>ye(ae),width:20}),C.createElement(k,{value:He(Me.to),onChange:ae=>Ve(ae,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),C.createElement(T.D,{label:"Timezone"},se()))},Z=Me=>({wrapper:(0,y.css)({maxWidth:Me.spacing(60),marginBottom:Me.spacing(2)}),timezoneContainer:(0,y.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,y.css)`
      margin-right: 5px;
    `}),J="Enabling this returns annotations that match any of the tags specified below",G=C.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),ne=[{label:"Dashboard",value:x.St.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:x.St.Tags,description:"This will fetch any annotation events that match the tags filter"}],te=[{label:"Annotations & Alerts",value:x.nj.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:x.nj.TimeRegions,description:"Configure a repeating time region"}],oe=[10,50,100,200,300,500,1e3,2e3].map(Me=>({label:String(Me),value:Me}));function le({query:Me,onChange:ze}){const xe=Me,{limit:We,matchAny:be,tags:pe,type:Ue,queryType:we}=xe;let je=we??x.nj.Annotations;const He=(0,C.useMemo)(()=>(0,P.UA)().dashboard?.getTimezone(),[]),rt=(0,f.of)(ue),Je=ae=>ze({...xe,type:ae.value}),Ve=ae=>ze({...xe,limit:ae.value}),Oe=ae=>ze({...xe,matchAny:ae.target.checked}),Ne=ae=>ze({...xe,tags:ae}),ye=ae=>{const ge={...xe,queryType:ae.value};ge.queryType===x.nj.TimeRegions?ge.timeRegion||(ge.timeRegion={timezone:He}):delete ge.timeRegion,ze(ge)},se=ae=>{ze({...xe,timeRegion:ae})};return C.createElement(D.n,{className:rt.container},C.createElement(T.D,{label:"Query type"},C.createElement(M.l6,{inputId:"grafana-annotations__query-type",options:te,value:je,onChange:ye})),je===x.nj.Annotations&&C.createElement(C.Fragment,null,C.createElement(T.D,{label:"Filter by"},C.createElement(M.l6,{inputId:"grafana-annotations__filter-by",options:ne,value:Ue,onChange:Je})),C.createElement(T.D,{label:"Max limit"},C.createElement(M.l6,{inputId:"grafana-annotations__limit",width:16,options:oe,value:We,onChange:Ve})),Ue===x.St.Tags&&C.createElement(C.Fragment,null,C.createElement(T.D,{label:"Match any",description:J},C.createElement(O.d,{id:"grafana-annotations__match-any",value:be,onChange:Oe})),C.createElement(T.D,{label:"Tags",description:G},C.createElement(S.$,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Ne,tagOptions:v.vy,tags:pe??[]})))),je===x.nj.TimeRegions&&xe.timeRegion&&C.createElement(q,{value:xe.timeRegion,onChange:se}))}const ue=Me=>({container:(0,y.css)({maxWidth:Me.spacing(60),marginBottom:Me.spacing(2)})});var Te=e(11261),he=e(94515);function re(Me,ze,xe,We){if(!ze)return;const be=(0,he.iU)(ze,xe);if(!be.length)return;const pe=[],Ue=[],we=[],je=ze.timezone??We;for(const He of be){let rt=He.from,Je=He.to;const Ve=(0,B.QZ)(je,rt);if(Ve){const Oe=Ve.offsetInMins*60*1e3;rt+=Oe,Je+=Oe}pe.push(rt),Ue.push(Je),we.push(Me)}return{fields:[{name:"time",type:Te.PU.time,values:pe,config:{}},{name:"timeEnd",type:Te.PU.time,values:Ue,config:{}},{name:"text",type:Te.PU.string,values:we,config:{}}],length:pe.length}}let De=100;class Fe extends u.iy{constructor(ze){super(ze),this.annotations={QueryEditor:le,prepareAnnotation(xe){return xe.target=xe.target??{type:xe.type??x.St.Dashboard,limit:xe.limit??100,tags:xe.tags??[],matchAny:xe.matchAny??!1},xe},prepareQuery(xe){let We;if((0,t.isString)(xe.datasource)){const Ue=(0,h.og)(xe.datasource,{returnDefaultAsNull:!1});Ue&&(We=Ue)}else We=xe.datasource;const{filter:be,...pe}=xe;return{...pe,refId:xe.name,queryType:x.nj.Annotations,datasource:We}}}}getDefaultQuery(){return{queryType:x.nj.RandomWalk}}query(ze){const xe=[],We=[],be=(0,E.w)();for(const pe of ze.targets){if(pe.queryType===x.nj.Annotations)return(0,n.H)(this.getAnnotations({range:ze.range,rangeRaw:ze.range.raw,annotation:pe,dashboard:(0,P.UA)().getCurrent()}));if(!pe.hide){if(pe.queryType===x.nj.Snapshot){xe.push((0,r.of)({data:(pe.snapshot??[]).map(Ue=>(0,m.or)(Ue)),state:i.Gu.Done}));continue}if(pe.queryType===x.nj.TimeRegions){const Ue=re("",pe.timeRegion,ze.range,ze.timezone);xe.push((0,r.of)({data:Ue?[Ue]:[],state:i.Gu.Done}));continue}if(pe.queryType===x.nj.LiveMeasurements){let Ue=be.replace(pe.channel,ze.scopedVars);const{filter:we}=pe,je=(0,l.DG)(Ue);if(!(0,l.aj)(je))continue;const He={maxLength:ze.maxDataPoints??500};pe.buffer?(He.maxDelta=pe.buffer,He.maxLength=He.maxLength*2):ze.rangeRaw?.to==="now"&&(He.maxDelta=ze.range.to.valueOf()-ze.range.from.valueOf()),xe.push((0,p.oF)().getDataStream({key:`${ze.requestId}.${De++}`,addr:je,filter:we,buffer:He}))}else pe.queryType||(pe.queryType=x.nj.RandomWalk),We.push(pe)}}return We.length&&xe.push(super.query({...ze,targets:We})),xe.length?xe.length===1?xe[0]:(0,s.h)(...xe):(0,r.of)()}listFiles(ze,xe){return this.query({targets:[{refId:"A",queryType:x.nj.List,path:ze}],maxDataPoints:xe}).pipe((0,o.T)(We=>{const be=We.data[0]??new d.k;return new c.R(be)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(ze){const xe=ze.annotation.target;if(xe?.queryType===x.nj.TimeRegions){const we=re(ze.annotation.name,xe.timeRegion,ze.range,(0,P.UA)().getCurrent()?.timezone);return Promise.resolve({data:we?[we]:[]})}const We=ze.annotation,be=We.target,pe={from:ze.range.from.valueOf(),to:ze.range.to.valueOf(),limit:be.limit,tags:be.tags,matchAny:be.matchAny};if(be.type===x.St.Dashboard){if(!ze.dashboard?.uid)return Promise.resolve({data:[]});pe.dashboardUID=ze.dashboard.uid,delete pe.tags}else{if(!Array.isArray(be.tags)||be.tags.length===0)return Promise.resolve({data:[]});const we=(0,E.w)(),je="__delimiter__",He=[];for(const rt of pe.tags){const Je=we.replace(rt,{},Ve=>typeof Ve=="string"?Ve:Ve.join(je));for(const Ve of Je.split(je))He.push(Ve)}pe.tags=He}const Ue=await(0,b.AI)().get("/api/annotations",pe,`grafana-data-source-annotations-${We.name}-${ze.dashboard?.uid}`);return{data:[(0,g.Vc)(Ue)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ee(){return await(0,a.l)().get("-- Grafana --")}},68706:(Q,I,e)=>{"use strict";e.d(I,{St:()=>s,dx:()=>r,nj:()=>t,uJ:()=>n});var t=(o=>(o.LiveMeasurements="measurements",o.Annotations="annotations",o.Snapshot="snapshot",o.TimeRegions="timeRegions",o.RandomWalk="randomWalk",o.List="list",o.Read="read",o.Search="search",o))(t||{});const n={refId:"A",queryType:"randomWalk"},r={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var s=(o=>(o.Dashboard="dashboard",o.Tags="tags",o))(s||{})},90478:(Q,I,e)=>{"use strict";e.d(I,{H:()=>i,j:()=>d});var t=e(89667),n=e(28138),r=e(57220),s=e(40489),o=e(28444),m=e(68706);function i(c,g){return new Promise(u=>{if(c.datasource?.uid===r.vv){l(g,c),u(!0);return}n.A.publish(new o.bY({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{l(g,c),u(!0)},onDismiss:()=>{u(!1)}}))})}function l(c,g){const u=c.map(p=>(0,t.Nw)(p)),E={refId:"A",queryType:m.nj.Snapshot,snapshot:u,datasource:{uid:r.vv}};g.updateQueries({dataSource:{uid:r.vv},queries:[E]}),g.refresh()}function d(c){return(g,u,E)=>{s.vI(g).subscribe(async p=>{const b=[];p.dataFrames.forEach(a=>{const h=(0,t.Nw)(a);b.push(h)}),c({...m.dx,snapshot:b,file:p.file},u)})}}},71713:(Q,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>l,RQ:()=>s,dZ:()=>t,fV:()=>o,vB:()=>i});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],r=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],o=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],m=[...t,...s,...o],i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...r].map(d=>d.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${m.map(d=>d.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},l=i},43269:(Q,I,e)=>{"use strict";e.d(I,{HD:()=>m,ti:()=>s,U3:()=>n,ie:()=>i,Q$:()=>r});var t=(l=>(l.Builder="builder",l.Code="code",l))(t||{}),n=(l=>(l.Instant="instant",l.Range="range",l.Stream="stream",l))(n||{}),r=(l=>(l.DataSample="dataSample",l.InfiniteScroll="infiniteScroll",l.LogsSample="logsSample",l.LogsVolume="logsVolume",l))(r||{}),s=(l=>(l.Backward="backward",l.Forward="forward",l))(s||{}),o=(l=>(l.Stream="streams",l.Vector="vector",l.Matrix="matrix",l))(o||{}),m=(l=>(l.Indexed="I",l.StructuredMetadata="S",l.Parsed="P",l))(m||{}),i=(l=>(l[l.LabelNames=0]="LabelNames",l[l.LabelValues=1]="LabelValues",l))(i||{})},14678:(Q,I,e)=>{"use strict";e.d(I,{N8:()=>P,qM:()=>h,uv:()=>a});var t=e(2543),n=e.n(t),r=e(62467),s=e(65474),o=e(45650),m=e(69862),i=e(81160),l=e(9084),d=e(66847),c=e(93031),g=e(71030),u=e(40187),E=e(39070),p=e(19347),b=e(12091);const a="-- Mixed --",h=(C,f)=>`mixed-${C}-${f||""}`;class P extends u.mA{constructor(f){super(f)}query(f){const D=f.targets.filter(O=>O.datasource?.uid!==a);if(!D.length)return(0,r.of)({data:[]});const T=(0,t.groupBy)(D,"datasource.uid"),M=[];for(const O in T){const S=T[O];M.push({datasource:(0,p.l)().get(S[0].datasource,f.scopedVars),targets:S})}return M.length?this.batchQueries(M,f):(0,r.of)({data:[]})}batchQueries(f,D){const T=f.filter(this.isQueryable).map((M,O)=>(0,s.H)(M.datasource).pipe((0,m.Z)(S=>{const v=(0,t.cloneDeep)(D);return v.requestId=h(O,v.requestId),v.targets=M.targets,(0,s.H)(S.query(v)).pipe((0,i.T)(x=>({...x,data:x.data||[],state:E.Gu.Loading,key:h(O,x.key)})),(0,l.$)(),(0,d.W)(x=>(x=(0,b.u)(x),x.message=`${S.name}: ${x.message}`,(0,r.of)([{data:[],state:E.Gu.Error,error:x,key:h(O,v.requestId)}]))))})));return(0,o.p)(T).pipe(y(),(0,i.T)(this.finalizeResponses),(0,c.U)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(f){return f&&Array.isArray(f.targets)&&f.targets.length>0}finalizeResponses(f){const{length:D}=f;if(D===0)return f;const T=f.find(M=>M.state===E.Gu.Error);return T?f.push(T):f[D-1].state=E.Gu.Done,f}}function y(){return(0,g.T)((C,f)=>f.reduce((D,T)=>(D.push.apply(D,T),D),C),[])}},87324:(Q,I,e)=>{"use strict";e.d(I,{t:()=>s});var t=e(21489),n=e(47891),r=e(65405);function s(d,c,g,u="="){if(!c||!g)throw new Error("Need label to add to query.");const E=o(d);if(!E.length)return d;const p=m(c,g,u);return i(d,E,p)}function o(d){const c=t.K3.parse(d),g=[];return c.iterate({enter:({to:u,from:E,type:p})=>{if(p.id===t.Fb){const b=(0,r.u)(d.substring(E,u));return g.push({query:b.query,from:E,to:u}),!1}}}),g}function m(d,c,g){const u=c===1/0?"+Inf":c.toString();return{label:d,op:g,value:u}}function i(d,c,g){const u=new n.l;let E="",p=0;for(let b=0;b<c.length;b++){const a=c[b],h=b===c.length-1,P=d.substring(p,a.from),y=h?d.substring(a.to):"";l(a.query.labels,g)||a.query.labels.push(g);const C=u.renderQuery(a.query);E+=P+C+y,p=a.to}return E}function l(d,c){return d.find(g=>g.label===c.label&&g.value===c.value)}},60042:(Q,I,e)=>{"use strict";e.d(I,{A:()=>K});var t=e(32196),n=e(96540),r=e(14236),s=e(13544),o=e(14110),m=e(14578),i=e(55852),l=e(40845),d=e(61680);function c(N){return typeof N=="object"&&N!==null&&"isCanceled"in N}const g=N=>{let L=!1;return{promise:new Promise((F,z)=>{const Y={isCanceled:!0};N.then(H=>L?z(Y):F(H)),N.catch(H=>z(L?Y:H))}),cancel(){L=!0}}};var u=e(45889),E=e(97222),p=e(3911),b=e(39558),a=e(66864),h=e(60029),P=e(10354),y=e(54438);const C="{}",f="__name__",D=25;function T(N){let L="";const V=[];for(const F of N)if((F.name===f||F.selected)&&F.values&&F.values.length>0){const z=F.values.filter(Y=>Y.selected).map(Y=>Y.name);z.length>1?V.push(`${F.name}=~"${z.map(u.Cs).join("|")}"`):z.length===1&&(F.name===f?L=z[0]:V.push(`${F.name}="${(0,u.Qn)(z[0])}"`))}return[L,"{",V.join(","),"}"].join("")}function M(N,L,V){return N.map(F=>{const z=L[F.name];if(z){let Y;if(F.name===V&&F.values)Y=F.values;else{const H=new Set(F.values?.filter(k=>k.selected).map(k=>k.name)||[]);Y=z.map(k=>({name:k,selected:H.has(k)}))}return{...F,loading:!1,values:Y,hidden:!z,facets:Y.length}}return{...F,loading:!1,hidden:!z,values:void 0,facets:0}})}const O=(0,p.N)(N=>({wrapper:(0,t.css)`
    background-color: ${N.colors.background.secondary};
    padding: ${N.spacing(1)};
    width: 100%;
  `,list:(0,t.css)`
    margin-top: ${N.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,t.css)`
    & + & {
      margin: ${N.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,t.css)`
    font-family: ${N.typography.fontFamilyMonospace};
    margin-bottom: ${N.spacing(1)};
  `,status:(0,t.css)`
    padding: ${N.spacing(.5)};
    color: ${N.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,t.css)`
    opacity: 1;
  `,error:(0,t.css)`
    color: ${N.colors.error.main};
  `,valueList:(0,t.css)`
    margin-right: ${N.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,t.css)`
    border-left: 1px solid ${N.colors.border.medium};
    margin: ${N.spacing(1)} 0;
    padding: ${N.spacing(1)} 0 ${N.spacing(1)} ${N.spacing(1)};
  `,valueListArea:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${N.spacing(1)};
  `,valueTitle:(0,t.css)`
    margin-left: -${N.spacing(.5)};
    margin-bottom: ${N.spacing(1)};
  `,validationStatus:(0,t.css)`
    padding: ${N.spacing(.5)};
    margin-bottom: ${N.spacing(1)};
    color: ${N.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class S extends n.Component{constructor(){super(...arguments),this.valueListsRef=n.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=L=>{this.setState({labelSearchTerm:L.target.value})},this.onChangeMetricSearch=L=>{this.setState({metricSearchTerm:L.target.value})},this.onChangeValueSearch=L=>{this.setState({valueSearchTerm:L.target.value})},this.onClickRunQuery=()=>{const L=T(this.state.labels);this.props.onChange(L)},this.onClickRunRateQuery=()=>{const V=`rate(${T(this.state.labels)}[$__rate_interval])`;this.props.onChange(V)},this.onClickClear=()=>{this.setState(L=>({labels:L.labels.map(F=>({...F,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(f,C)},this.onClickLabel=(L,V,F)=>{const z=this.state.labels.find(k=>k.name===L);if(!z)return;const Y=!z.selected;let H={selected:Y};if(z.values&&!Y){const k=z.values.map(ee=>({...ee,selected:!1}));H={...H,facets:0,values:k}}this.setState({labelSearchTerm:""}),this.updateLabelState(L,H,"",()=>this.doFacettingForLabel(L))},this.onClickValue=(L,V,F)=>{const z=this.state.labels.find(H=>H.name===L);if(!z||!z.values)return;this.setState({labelSearchTerm:""});const Y=z.values.map(H=>({...H,selected:H.name===V?!H.selected:H.selected}));this.updateLabelState(L,{values:Y},"",()=>this.doFacetting(L))},this.onClickMetric=(L,V,F)=>{const z=this.state.labels.find(k=>k.name===L);if(!z||!z.values)return;this.setState({metricSearchTerm:""});const Y=z.values.map(k=>({...k,selected:k.name===V||k.selected?!k.selected:k.selected})),H=Y.some(k=>k.selected);this.updateLabelState(L,{selected:H,values:Y},"",()=>this.doFacetting(L))},this.onClickValidate=()=>{const L=T(this.state.labels);this.validateSelector(L)},this.doFacetting=L=>{const V=T(this.state.labels);if(V===C){const F=this.state.labels.map(z=>({...z,facets:0,values:void 0,hidden:!1}));this.setState({labels:F},()=>{this.state.labels.forEach(z=>(z.selected||z.name===f)&&this.fetchValues(z.name,V))})}else this.fetchSeries(V,L)}}updateLabelState(L,V,F="",z){this.setState(Y=>{const H=Y.labels.map(ee=>ee.name===L?{...ee,...V}:ee),k=F?"":Y.error;return{labels:H,status:F,error:k,validationStatus:""}},z)}componentDidMount(){const{languageProvider:L,lastUsedLabels:V}=this.props;if(L){const F=V;L.start(this.props.timeRange).then(()=>{let z=L.getLabelKeys();this.fetchValues(f,C);const Y=z.map((H,k,ee)=>({name:H,selected:F.includes(H),loading:!1}));this.setState({labels:Y},()=>{this.state.labels.forEach(H=>{H.selected&&this.fetchValues(H.name,C)})})})}}doFacettingForLabel(L){const V=this.state.labels.find(z=>z.name===L);if(!V)return;const F=this.state.labels.filter(z=>z.selected).map(z=>z.name);this.props.storeLastUsedLabels(F),V.selected?V.values||this.fetchValues(L,T(this.state.labels)):this.doFacetting()}async fetchValues(L,V){const{languageProvider:F}=this.props;this.updateLabelState(L,{loading:!0},`Fetching values for ${L}`);try{let z=await F.getLabelValues(L);if(V!==T(this.state.labels)){this.updateLabelState(L,{loading:!1});return}const Y=[],{metricsMetadata:H}=F;for(const k of z){const ee={name:k};if(L===f&&H){const ie=H[k];ie&&(ee.details=`(${ie.type}) ${ie.help}`)}Y.push(ee)}this.updateLabelState(L,{values:Y,loading:!1})}catch(z){console.error(z)}}async fetchSeries(L,V){const{languageProvider:F}=this.props;V&&this.updateLabelState(V,{loading:!0},`Facetting labels for ${L}`);try{const z=await F.fetchSeriesLabels(L,!0);if(L!==T(this.state.labels)){V&&this.updateLabelState(V,{loading:!1});return}if(Object.keys(z).length===0){this.setState({error:`Empty results, no matching label for ${L}`});return}const Y=M(this.state.labels,z,V);this.setState({labels:Y,error:""}),V&&this.updateLabelState(V,{loading:!1})}catch(z){console.error(z)}}async validateSelector(L){const{languageProvider:V}=this.props;this.setState({validationStatus:`Validating selector ${L}`,error:""});const F=await V.fetchSeries(L);this.setState({validationStatus:`Selector is valid (${F.length} series found)`})}render(){const{theme:L}=this.props,{labels:V,labelSearchTerm:F,metricSearchTerm:z,status:Y,error:H,validationStatus:k,valueSearchTerm:ee}=this.state,ie=O(L);if(V.length===0)return n.createElement("div",{className:ie.wrapper},n.createElement(b._,{text:"Loading labels..."}));let fe=V.find(te=>te.name===f);fe&&z&&(fe={...fe,values:fe.values?.filter(te=>te.selected||te.name.includes(z))});let q=V.filter(te=>!te.hidden&&te.name!==f);F&&(q=q.filter(te=>te.selected||te.name.includes(F)));let Z=q.filter(te=>te.selected&&te.values);ee&&(Z=Z.map(te=>({...te,values:te.values?.filter(oe=>oe.selected||oe.name.includes(ee))})));const J=T(this.state.labels),G=J===C,ne=fe?.values?.length||0;return n.createElement("div",{className:ie.wrapper},n.createElement(a.Gy,{align:"flex-start",spacing:"lg"},n.createElement("div",null,n.createElement("div",{className:ie.section},n.createElement(h.J,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),n.createElement("div",null,n.createElement(P.p,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:z,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.selectMetric})),n.createElement("div",{role:"list",className:ie.valueListWrapper,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.metricList},n.createElement(E.Y1,{height:Math.min(450,ne*D),itemCount:ne,itemSize:D,itemKey:te=>fe.values[te].name,width:300,className:ie.valueList},({index:te,style:oe})=>{const le=fe?.values?.[te];return le?n.createElement("div",{style:oe},n.createElement(y.J,{name:fe.name,value:le?.name,title:le.details,active:le?.selected,onClick:this.onClickMetric,searchTerm:z})):null})))),n.createElement("div",null,n.createElement("div",{className:ie.section},n.createElement(h.J,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),n.createElement("div",null,n.createElement(P.p,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:F,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelNamesFilter})),n.createElement("div",{className:ie.list,style:{height:120}},q.map(te=>n.createElement(y.J,{key:te.name,name:te.name,loading:te.loading,active:te.selected,hidden:te.hidden,facets:te.facets,onClick:this.onClickLabel,searchTerm:F})))),n.createElement("div",{className:ie.section},n.createElement(h.J,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),n.createElement("div",null,n.createElement(P.p,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:ee,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelValuesFilter})),n.createElement("div",{className:ie.valueListArea,ref:this.valueListsRef},Z.map(te=>n.createElement("div",{role:"list",key:te.name,"aria-label":`Values for ${te.name}`,className:ie.valueListWrapper},n.createElement("div",{className:ie.valueTitle},n.createElement(y.J,{name:te.name,loading:te.loading,active:te.selected,hidden:te.hidden,facets:te.facets||te.values?.length,onClick:this.onClickLabel})),n.createElement(E.Y1,{height:Math.min(200,D*(te.values?.length||0)),itemCount:te.values?.length||0,itemSize:28,itemKey:oe=>te.values[oe].name,width:200,className:ie.valueList},({index:oe,style:le})=>{const ue=te.values?.[oe];return ue?n.createElement("div",{style:le},n.createElement(y.J,{name:te.name,value:ue?.name,active:ue?.selected,onClick:this.onClickValue,searchTerm:ee})):null}))))))),n.createElement("div",{className:ie.section},n.createElement(h.J,null,"4. Resulting selector"),n.createElement("div",{"aria-label":"selector",className:ie.selector},J),k&&n.createElement("div",{className:ie.validationStatus},k),n.createElement(a.Gy,null,n.createElement(i.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useQuery,"aria-label":"Use selector for query button",disabled:G,onClick:this.onClickRunQuery},"Use query"),n.createElement(i.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useAsRateQuery,"aria-label":"Use selector as metrics button",variant:"secondary",disabled:G,onClick:this.onClickRunRateQuery},"Use as rate query"),n.createElement(i.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.validateSelector,"aria-label":"Validate submit button",variant:"secondary",disabled:G,onClick:this.onClickValidate},"Validate selector"),n.createElement(i.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.clear,"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),n.createElement("div",{className:(0,t.cx)(ie.status,(Y||H)&&ie.statusShowing)},n.createElement("span",{className:H?ie.error:""},H||Y)))))}}const v=(0,l.cV)(S),x=n.lazy(()=>e.e(8325).then(e.bind(e,79994))),A=N=>n.createElement(n.Suspense,{fallback:null},n.createElement(x,{...N})),R=N=>{const L=(0,n.useRef)(null),{onRunQuery:V,onChange:F,...z}=N,Y=ee=>{L.current=ee,F(ee),V()},H=ee=>{F(ee)},k=ee=>{F(ee)};return n.createElement(A,{onChange:k,onRunQuery:Y,onBlur:H,...z})},B="grafana.datasources.prometheus.browser.labels";function U(N,L,V){return N?"(Disabled)":L?V?"Metrics browser":"(No metrics found)":"Loading metrics..."}class w extends n.PureComponent{constructor(L){super(L),this.refreshHint=()=>{const{datasource:V,query:F,data:z}=this.props,Y=V.getInitHints(),H=Y.length>0?Y[0]:null;if(!z||z.series.length===0){this.setState({hint:H});return}const k=(0,r.ci)(z.series[0])?z.series.map(r.w3):z.series,ee=V.getQueryHints(F,k);let ie=ee.length>0?ee[0]:null;this.setState({hint:ie??H})},this.refreshMetrics=async()=>{const{range:V,datasource:{languageProvider:F}}=this.props;this.languageProviderInitializationPromise=g(F.start(V));try{const z=await this.languageProviderInitializationPromise.promise;await Promise.all(z),this.onUpdateLanguage()}catch(z){if(!(c(z)&&z.isCanceled))throw z}},this.onChangeLabelBrowser=V=>{this.onChangeQuery(V,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(V,F)=>{const{query:z,onChange:Y,onRunQuery:H}=this.props;if(Y){const k={...z,expr:V};Y(k),F&&H&&H()}},this.onClickChooserButton=()=>{this.setState(V=>({labelBrowserVisible:!V.labelBrowserVisible})),(0,o.rR)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:V,query:F,onChange:z,onRunQuery:Y}=this.props,{hint:H}=this.state;H?.fix?.action&&z(V.modifyQuery(F,H.fix.action)),Y()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:V}}=this.props,{metrics:F}=V;F&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(L){const{data:V,datasource:{languageProvider:F},range:z}=this.props;F!==L.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const Y=this.rangeChangedToRefresh(z,L.range);(F!==L.datasource.languageProvider||Y)&&this.refreshMetrics(),V&&L.data&&L.data.series!==V.series&&this.refreshHint()}rangeChangedToRefresh(L,V){if(L&&V){const F=(0,u.eN)(L.from.valueOf())===(0,u.eN)(V.from.valueOf()),z=(0,u.eN)(L.to.valueOf())===(0,u.eN)(V.to.valueOf());return!(F&&z)}return!1}render(){const{datasource:L,datasource:{languageProvider:V},query:F,ExtraFieldElement:z,history:Y=[],theme:H}=this.props,{labelBrowserVisible:k,syntaxLoaded:ee,hint:ie}=this.state,fe=V.metrics.length>0,q=U(L.lookupsDisabled,ee,fe),Z=!(ee&&fe);return n.createElement(d.b,{storageKey:B,defaultValue:[]},(J,G,ne)=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},n.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:Z,type:"button","data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.openButton},q,n.createElement(m.I,{name:k?"angle-down":"angle-right"})),n.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},n.createElement(R,{languageProvider:V,history:Y,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:F.expr??"",placeholder:"Enter a PromQL query\u2026",datasource:L}))),k&&n.createElement("div",{className:"gf-form"},n.createElement(v,{languageProvider:V,onChange:this.onChangeLabelBrowser,lastUsedLabels:J||[],storeLastUsedLabels:G,deleteLastUsedLabels:ne,timeRange:this.props.range})),z,ie?n.createElement("div",{className:"query-row-break"},n.createElement("div",{className:"prom-query-field-info text-warning"},ie.label," ",ie.fix?n.createElement("button",{type:"button",className:(0,t.cx)((0,i.my)(H),"text-link","muted"),onClick:this.onClickHintFix},ie.fix.label):null)):null))}}const K=(0,l.cV)(w)},36117:(Q,I,e)=>{"use strict";e.d(I,{L:()=>a});var t=e(32196),n=e(96540),r=e(94701),s=e(32264),o=e(39268),m=e(14186),i=e(15292),l=e(10354),d=e(58881),c=e(48311),g=e(38894),u=e(88323),E=e(55852);const p=P=>{const{credentials:y,azureCloudOptions:C,onCredentialsChange:f,getSubscriptions:D,disabled:T,managedIdentityEnabled:M,workloadIdentityEnabled:O}=P,S=(0,d.wo)(y),[v,x]=(0,n.useState)([]),[A,R]=(0,n.useReducer)(H=>H+1,0),B=(0,n.useMemo)(()=>{let H=[{value:"clientsecret",label:"App Registration"}];return M&&H.push({value:"msi",label:"Managed Identity"}),O&&H.push({value:"workloadidentity",label:"Workload Identity"}),H},[M,O]);(0,n.useEffect)(()=>{if(!D||!S){U([]);return}let H=!1;return D().then(k=>{H||U(k,A)}),()=>{H=!0}},[A]);const U=(H,k=!1)=>{x(H),D&&(k&&!y.defaultSubscriptionId&&H.length>0?z(H[0]):y.defaultSubscriptionId&&(H.find(ie=>ie.value===y.defaultSubscriptionId)||z(void 0)))},w=H=>{x([]);const k=M?"msi":O?"workloadidentity":"clientsecret",ee={...y,authType:H.value||k,defaultSubscriptionId:void 0};f(ee)},K=H=>{if(y.authType==="clientsecret"){x([]);const k={...y,azureCloud:H.value,defaultSubscriptionId:void 0};f(k)}},N=H=>{if(y.authType==="clientsecret"){x([]);const k={...y,tenantId:H.target.value,defaultSubscriptionId:void 0};f(k)}},L=H=>{if(y.authType==="clientsecret"){x([]);const k={...y,clientId:H.target.value,defaultSubscriptionId:void 0};f(k)}},V=H=>{if(y.authType==="clientsecret"){x([]);const k={...y,clientSecret:H.target.value,defaultSubscriptionId:void 0};f(k)}},F=()=>{if(y.authType==="clientsecret"){x([]);const H={...y,clientSecret:"",defaultSubscriptionId:void 0};f(H)}},z=H=>{const k={...y,defaultSubscriptionId:H?.value};f(k)},Y=s.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement("div",{className:"gf-form-group"},B.length>1&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),n.createElement(u.l6,{className:"width-15",value:B.find(H=>H.value===y.authType),options:B,onChange:w,isDisabled:T}))),y.authType==="clientsecret"&&n.createElement(n.Fragment,null,C&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),n.createElement(u.l6,{className:"width-15",value:C.find(H=>H.value===y.azureCloud),options:C,onChange:K,isDisabled:T}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12"},"Directory (tenant) ID"),n.createElement("div",{className:"width-15"},n.createElement(l.p,{className:(0,t.cx)(Y?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:y.tenantId||"",onChange:N,disabled:T})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12"},"Application (client) ID"),n.createElement("div",{className:"width-15"},n.createElement(l.p,{className:(0,t.cx)(Y?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:y.clientId||"",onChange:L,disabled:T})))),typeof y.clientSecret=="symbol"?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),n.createElement(l.p,{id:"azure-client-secret",className:(0,t.cx)(Y?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!T&&n.createElement("div",{className:"gf-form"},n.createElement("div",{className:(0,t.cx)(Y?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},n.createElement(E.$n,{variant:"secondary",type:"button",onClick:F},"reset")))):n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12"},"Client Secret"),n.createElement("div",{className:"width-15"},n.createElement(l.p,{className:(0,t.cx)(Y?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:y.clientSecret||"",onChange:V,disabled:T}))))),D&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(g.I,{className:"width-12"},"Default Subscription"),n.createElement("div",{className:(0,t.cx)(Y?"width-20":"width-25")},n.createElement(u.l6,{value:y.defaultSubscriptionId?v.find(H=>H.value===y.defaultSubscriptionId):void 0,options:v,onChange:z,isDisabled:T})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement("div",{className:"max-width-30 gf-form-inline"},n.createElement(E.$n,{variant:"secondary",size:"sm",type:"button",onClick:R,disabled:!S},"Load Subscriptions"))))))},b=null,a=P=>{const{dataSourceConfig:y,onChange:C}=P,[f,D]=(0,n.useState)(!!y.jsonData.azureEndpointResourceId),T=(0,n.useMemo)(()=>(0,c.pr)(y),[y]),M=A=>{C((0,c.yn)(y,A))},O=A=>{D(A.currentTarget.checked),A.currentTarget.checked||C({...y,jsonData:{...y.jsonData,azureEndpointResourceId:void 0}})},S=A=>{f&&C({...y,jsonData:{...y.jsonData,azureEndpointResourceId:A.currentTarget.value}})},v=s.$.featureToggles.prometheusConfigOverhaulAuth,x=v?24:26;return(0,r.A)(()=>{y.jsonData.authType||M(T)}),n.createElement(n.Fragment,null,n.createElement("h6",null,"Azure authentication"),n.createElement(p,{managedIdentityEnabled:s.$.azure.managedIdentityEnabled,workloadIdentityEnabled:s.$.azure.workloadIdentityEnabled,credentials:T,azureCloudOptions:d.hE,onCredentialsChange:M,disabled:y.readOnly}),n.createElement("h6",null,"Azure configuration"),n.createElement("div",{className:"gf-form-group"},n.createElement(o.C,null,n.createElement(m.I,{labelWidth:x,label:"Override AAD audience",disabled:y.readOnly},n.createElement(i.K,{value:f,onChange:O}))),f&&n.createElement(o.C,null,n.createElement(m.I,{labelWidth:x,label:"Resource ID",disabled:y.readOnly},n.createElement(l.p,{className:(0,t.cx)(v?"width-20":"width-30"),value:y.jsonData.azureEndpointResourceId||"",onChange:S})))))},h=null},58881:(Q,I,e)=>{"use strict";e.d(I,{RC:()=>t,hE:()=>n,wo:()=>r});var t=(s=>(s.Public="AzureCloud",s.China="AzureChinaCloud",s.USGovernment="AzureUSGovernment",s.None="",s))(t||{});const n=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function r(s){switch(s.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(s.azureCloud&&s.tenantId&&s.clientId&&s.clientSecret)}}},48311:(Q,I,e)=>{"use strict";e.d(I,{Lk:()=>m,U_:()=>g,pr:()=>l,qP:()=>c,yn:()=>d});var t=e(32264),n=e(58881);const r=Symbol("Concealed client secret");function s(){return t.$.azure.cloud||n.RC.Public}function o(u){if(u.secureJsonFields.azureClientSecret)return r;{const E=u.secureJsonData?.azureClientSecret;return typeof E=="string"&&E.length>0?E:void 0}}function m(u){return!!u.jsonData.azureCredentials}function i(){return t.$.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:s()}}function l(u){const E=u.jsonData.azureCredentials;if(!E)return i();switch(E.authType){case"msi":case"workloadidentity":return E.authType==="msi"&&t.$.azure.managedIdentityEnabled||E.authType==="workloadidentity"&&t.$.azure.workloadIdentityEnabled?{authType:E.authType}:{authType:"clientsecret",azureCloud:s()};case"clientsecret":return{authType:"clientsecret",azureCloud:E.azureCloud||s(),tenantId:E.tenantId,clientId:E.clientId,clientSecret:o(u)}}}function d(u,E){switch(E.authType){case"msi":case"workloadidentity":if(E.authType==="msi"&&!t.$.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(E.authType==="workloadidentity"&&!t.$.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return u={...u,jsonData:{...u.jsonData,azureAuthType:E.authType,azureCredentials:{authType:E.authType}}},u;case"clientsecret":return u={...u,jsonData:{...u.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:E.azureCloud||s(),tenantId:E.tenantId,clientId:E.clientId}},secureJsonData:{...u.secureJsonData,azureClientSecret:typeof E.clientSecret=="string"&&E.clientSecret.length>0?E.clientSecret:void 0},secureJsonFields:{...u.secureJsonFields,azureClientSecret:typeof E.clientSecret=="symbol"}},u}}function c(u){return{jsonData:{...u.jsonData,azureCredentials:i()}}}function g(u){return{jsonData:{...u.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}},29121:(Q,I,e)=>{"use strict";e.d(I,{_p:()=>he,k1:()=>Te,jW:()=>re,Zh:()=>Fe,TT:()=>De});var t=e(32196),n=e(96540),r=e(61765),s=e(68704),o=e(91062),m=e(40845),i=e(42418),l=e(91409),d=e(72093),c=e(2913),g=e(13544),u=e(29020),E=e(32264),p=e(14186),b=e(15292);function a({options:Ee,onOptionsChange:Me}){const ze=(0,m.$j)(),xe=Fe(ze),We=E.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement(u.I,{title:"Alerting",className:(0,t.cx)(xe.container,{[xe.alertingTop]:We})},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:Ee.readOnly,tooltip:n.createElement(n.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",re()),interactive:!0,className:xe.switchField},n.createElement(b.d,{value:Ee.jsonData.manageAlerts!==!1,onChange:be=>Me({...Ee,jsonData:{...Ee.jsonData,manageAlerts:be.currentTarget.checked}}),id:g.Tp.components.DataSource.Prometheus.configPage.manageAlerts}))))))}var h=e(36117),P=e(48311),y=e(66025),C=e(77657),f=e(17466),D=e(67861),T=e(17081);const M=Ee=>{const{options:Me,onOptionsChange:ze,azureAuthSettings:xe,sigV4AuthToggleEnabled:We,renderSigV4Editor:be,secureSocksDSProxyEnabled:pe}=Ee,Ue=(0,y.pe)({config:Me,onChange:ze}),we=(0,m.$j)(),je=Fe(we);let He=[];const[rt,Je]=(0,n.useState)(Me.jsonData.sigV4Auth||!1),Ve="custom-sigV4Id",Oe={id:Ve,label:"SigV4 auth",description:"This is SigV4 auth description",component:n.createElement(n.Fragment,null,be)};We&&He.push(Oe);const Ne=xe?.azureAuthSupported&&xe.getAzureAuthEnabled(Me)||!1,[ye,se]=(0,n.useState)(Ne),ae="custom-azureAuthId",ge={id:ae,label:"Azure auth",description:"This is Azure auth description",component:n.createElement(n.Fragment,null,xe.azureSettingsUI&&n.createElement(xe.azureSettingsUI,{dataSourceConfig:Me,onChange:ze}))};xe?.azureAuthSupported&&He.push(ge);function Pe(){return rt?Ve:ye?ae:Ue.selectedMethod}let Re;switch(Me.access){case"direct":Re=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",re());break;case"proxy":Re=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",re());break;default:Re=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",re())}return n.createElement(n.Fragment,null,n.createElement(C.u,{urlPlaceholder:"http://localhost:9090",config:Me,onChange:ze,urlLabel:"Prometheus server URL",urlTooltip:Re}),n.createElement("hr",{className:`${je.hrTopSpace} ${je.hrBottomSpace}`}),n.createElement(f.N,{...Ue,customMethods:He,onAuthMethodSelect:Be=>{We&&Je(Be===Ve),xe?.azureAuthSupported&&(se(Be===ae),xe.setAzureAuthEnabled(Me,Be===ae)),ze({...Me,basicAuth:Be===D.q.BasicAuth,withCredentials:Be===D.q.CrossSiteCredentials,jsonData:{...Me.jsonData,sigV4Auth:Be===Ve,oauthPassThru:Be===D.q.OAuthForward}})},selectedMethod:Pe()}),n.createElement("div",{className:je.sectionBottomPadding}),pe&&n.createElement(n.Fragment,null,n.createElement(T.Y,{options:Me,onOptionsChange:ze}),n.createElement("div",{className:je.sectionBottomPadding})))};var O=e(97716),S=e.n(O),v=e(22391),x=e(17172),A=e(10354),R=e(88323),B=e(85464),U=e(35146),w=e(30915),K=e(69120),N=e(55852),L=e(51612);function V({value:Ee,onChange:Me,onDelete:ze,disabled:xe}){const[We,be]=(0,n.useState)(!!Ee.datasourceUid),pe=(0,m.$j)(),Ue=Fe(pe);return n.createElement("div",{className:"gf-form-group"},n.createElement(p.I,{label:"Internal link",labelWidth:Te,disabled:xe,tooltip:n.createElement(n.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",re()),interactive:!0,className:Ue.switchField},n.createElement(n.Fragment,null,n.createElement(b.d,{value:We,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:we=>be(we.currentTarget.checked)}))),We?n.createElement(p.I,{label:"Data source",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"The data source the exemplar is going to navigate to. ",re()),disabled:xe,interactive:!0},n.createElement(L.s,{tracing:!0,current:Ee.datasourceUid,noDefault:!0,width:40,onChange:we=>Me({...Ee,datasourceUid:we.uid,url:void 0})})):n.createElement(p.I,{label:"URL",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",re()),disabled:xe,interactive:!0},n.createElement(A.p,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:Ee.url,onChange:we=>Me({...Ee,datasourceUid:void 0,url:we.currentTarget.value})})),n.createElement(p.I,{label:"URL Label",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Use to override the button label on the exemplar traceID field. ",re()),disabled:xe,interactive:!0},n.createElement(A.p,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:Ee.urlDisplayLabel,onChange:we=>Me({...Ee,urlDisplayLabel:we.currentTarget.value})})),n.createElement(p.I,{label:"Label name",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",re()),disabled:xe,interactive:!0},n.createElement(A.p,{placeholder:"traceID",spellCheck:!1,width:40,value:Ee.name,onChange:we=>Me({...Ee,name:we.currentTarget.value})})),!xe&&n.createElement(p.I,{label:"Remove exemplar link",labelWidth:Te,disabled:xe},n.createElement(N.$n,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:we=>{we.preventDefault(),ze()}})))}function F({options:Ee,onChange:Me,disabled:ze}){const xe=(0,m.$j)(),We=Fe(xe);return n.createElement("div",{className:We.sectionBottomPadding},n.createElement(u.I,{title:"Exemplars",className:We.container},Ee&&Ee.map((be,pe)=>n.createElement(V,{key:pe,value:be,onChange:Ue=>{const we=[...Ee];we.splice(pe,1,Ue),Me(we)},onDelete:()=>{const Ue=[...Ee];Ue.splice(pe,1),Me(Ue)},disabled:ze})),!ze&&n.createElement(N.$n,{variant:"secondary","data-testid":g.Tp.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,t.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:be=>{be.preventDefault();const pe=[...Ee||[],{name:"traceID"}];Me(pe)}},"Add"),ze&&!Ee&&n.createElement("i",null,"No exemplars configurations")))}const z={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Y=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],H=[{value:U.f.Builder,label:"Builder"},{value:U.f.Code,label:"Code"}],k=[{value:K.fD.Low,label:"Low"},{value:K.fD.Medium,label:"Medium"},{value:K.fD.High,label:"High"},{value:K.fD.None,label:"None"}],ee=[{value:K.N1.Prometheus,label:K.N1.Prometheus},{value:K.N1.Cortex,label:K.N1.Cortex},{value:K.N1.Mimir,label:K.N1.Mimir},{value:K.N1.Thanos,label:K.N1.Thanos}],ie=/^$|^\d+(ms|[Mwdhmsy])$/,fe=/(\d+)(.+)/,q="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",Z=(Ee,Me)=>{if(!Me||!z[Me])return;const xe=z[Me]?.filter(be=>!!be.value&&S().lte(be.value,Ee)).map(be=>be.value),We=xe[xe.length-1];if(We){const be=S().diff(We,Ee);if(["patch","prepatch","prerelease",null].includes(be))return We}},J=Ee=>{console.warn("Error fetching version from buildinfo API, must manually select version!",Ee)},G=(Ee,Me,ze)=>{ze(Ee).then(xe=>{(0,x.AI)().get(`/api/datasources/uid/${xe.uid}/resources/version-detect`).then(We=>{const be=We.data?.version??"";if(be&&S().valid(be)){const pe=Z(be,xe.jsonData.prometheusType);pe&&ze({...xe,jsonData:{...xe.jsonData,prometheusVersion:pe}}).then(Ue=>{Me(Ue)})}else J()})}).catch(xe=>{J(xe)})},ne=Ee=>{const{options:Me,onOptionsChange:ze}=Ee,xe=(0,B.k9)();Me.jsonData.httpMethod||(Me.jsonData.httpMethod="POST");const We=(0,m.$j)(),be=Fe(We),[pe,Ue]=(0,n.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return n.createElement(n.Fragment,null,n.createElement(u.I,{title:"Interval behaviour",className:be.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Scrape interval",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{className:"width-20",value:Me.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:oe("timeInterval",Me,ze),onBlur:we=>Ue({...pe,timeInterval:we.currentTarget.value}),"data-testid":g.Tp.components.DataSource.Prometheus.configPage.scrapeInterval}),De(pe.timeInterval,ie,q))))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Query timeout",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Set the Prometheus query timeout. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{className:"width-20",value:Me.jsonData.queryTimeout,onChange:oe("queryTimeout",Me,ze),spellCheck:!1,placeholder:"60s",onBlur:we=>Ue({...pe,queryTimeout:we.currentTarget.value}),"data-testid":g.Tp.components.DataSource.Prometheus.configPage.queryTimeout}),De(pe.queryTimeout,ie,q))))))),n.createElement(u.I,{title:"Query editor",className:be.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Default editor",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Set default editor option for all users of this data source. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":"Default Editor (Code or Builder)",options:H,value:H.find(we=>we.value===Me.jsonData.defaultEditor)??H.find(we=>we.value===U.f.Builder),onChange:oe("defaultEditor",Me,ze),width:40,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.defaultEditor}))),n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:Te,label:"Disable metrics lookup",tooltip:n.createElement(n.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",re()),interactive:!0,disabled:Me.readOnly,className:be.switchField},n.createElement(b.d,{value:Me.jsonData.disableMetricsLookup??!1,onChange:(0,v.EX)(Ee,"disableMetricsLookup"),id:g.Tp.components.DataSource.Prometheus.configPage.disableMetricLookup}))))),n.createElement(u.I,{title:"Performance",className:be.container},!Me.jsonData.prometheusType&&!Me.jsonData.prometheusVersion&&Me.readOnly&&n.createElement("div",{className:be.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",n.createElement("a",{className:be.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:"Prometheus type",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus supports or does not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":"Prometheus type",options:ee,value:ee.find(we=>we.value===Me.jsonData.prometheusType),onChange:oe("prometheusType",{...Me,jsonData:{...Me.jsonData,prometheusVersion:void 0}},we=>(G(we,ze,xe),ze({...we,jsonData:{...we.jsonData,prometheusVersion:void 0}}))),width:40,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.prometheusType})))),n.createElement("div",{className:"gf-form-inline"},Me.jsonData.prometheusType&&n.createElement("div",{className:"gf-form"},n.createElement(p.I,{label:`${Me.jsonData.prometheusType} version`,labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Use this to set the version of your ",Me.jsonData.prometheusType," instance if it is not automatically configured. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":`${Me.jsonData.prometheusType} type`,options:z[Me.jsonData.prometheusType],value:z[Me.jsonData.prometheusType]?.find(we=>we.value===Me.jsonData.prometheusVersion),onChange:oe("prometheusVersion",Me,ze),width:40,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.prometheusVersion})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Cache level",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{width:40,onChange:oe("cacheLevel",Me,ze),options:k,value:k.find(we=>we.value===Me.jsonData.cacheLevel)??K.fD.Low,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.cacheLevel})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Incremental querying (beta)",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:be.switchField,disabled:Me.readOnly},n.createElement(b.d,{value:Me.jsonData.incrementalQuerying??!1,onChange:(0,v.EX)(Ee,"incrementalQuerying"),id:g.Tp.components.DataSource.Prometheus.configPage.incrementalQuerying})))),n.createElement("div",{className:"gf-form-inline"},Me.jsonData.incrementalQuerying&&n.createElement(p.I,{label:"Query overlap window",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{onBlur:we=>Ue({...pe,incrementalQueryOverlapWindow:we.currentTarget.value}),className:"width-20",value:Me.jsonData.incrementalQueryOverlapWindow??w.Dr,onChange:oe("incrementalQueryOverlapWindow",Me,ze),spellCheck:!1,"data-testid":g.Tp.components.DataSource.Prometheus.configPage.queryOverlapWindow}),De(pe.incrementalQueryOverlapWindow,fe,q)))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Disable recording rules (beta)",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"This feature will disable recording rules. Turn this on to improve dashboard performance"),interactive:!0,className:be.switchField,disabled:Me.readOnly},n.createElement(b.d,{value:Me.jsonData.disableRecordingRules??!1,onChange:(0,v.EX)(Ee,"disableRecordingRules"),id:g.Tp.components.DataSource.Prometheus.configPage.disableRecordingRules})))))),n.createElement(u.I,{title:"Other",className:be.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(p.I,{label:"Custom query parameters",labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(A.p,{className:"width-20",value:Me.jsonData.customQueryParameters,onChange:oe("customQueryParameters",Me,ze),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10","data-testid":g.Tp.components.DataSource.Prometheus.configPage.customQueryParameters})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(p.I,{labelWidth:Te,tooltip:n.createElement(n.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",re()),interactive:!0,label:"HTTP method",disabled:Me.readOnly},n.createElement(R.l6,{width:40,"aria-label":"Select HTTP method",options:Y,value:Y.find(we=>we.value===Me.jsonData.httpMethod),onChange:oe("httpMethod",Me,ze),"data-testid":g.Tp.components.DataSource.Prometheus.configPage.httpMethod})))))),n.createElement(F,{options:Me.jsonData.exemplarTraceIdDestinations,onChange:we=>(0,v.lO)({onOptionsChange:ze,options:Me},"exemplarTraceIdDestinations",we),disabled:Me.readOnly}))},te=Ee=>Ee?"currentTarget"in Ee?Ee.currentTarget.value:Ee.value:"",oe=(Ee,Me,ze)=>xe=>{ze({...Me,jsonData:{...Me.jsonData,[Ee]:te(xe)}})};var le=e(79924);const ue=({config:Ee,onChange:Me,className:ze})=>{const xe=pe=>{Me({...Ee,jsonData:{...Ee.jsonData,keepCookies:pe}})},We=pe=>{Me({...Ee,jsonData:{...Ee.jsonData,timeout:parseInt(pe.currentTarget.value,10)}})},be={container:(0,t.css)({maxWidth:578})};return n.createElement(n.Fragment,null,n.createElement(u.I,{title:"Advanced HTTP settings",className:(0,t.cx)(be.container,ze)},n.createElement(p.I,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:Te,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:Ee.readOnly,grow:!0},n.createElement(le.u,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:Ee.jsonData.keepCookies,onChange:xe})),n.createElement(p.I,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:Te,tooltip:"HTTP request timeout in seconds",disabled:Ee.readOnly,grow:!0},n.createElement(A.p,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:Ee.jsonData.timeout,onChange:We}))))},Te=30,he=Ee=>{const{options:Me,onOptionsChange:ze}=Ee,xe=c.config.featureToggles.prometheusConfigOverhaulAuth,We=(0,n.useRef)(Ee.options.access==="direct"),be={azureAuthSupported:c.config.azureAuthEnabled,getAzureAuthEnabled:we=>(0,P.Lk)(we),setAzureAuthEnabled:(we,je)=>je?(0,P.qP)(we):(0,P.U_)(we),azureSettingsUI:h.L},pe=(0,m.$j)(),Ue=Fe(pe);return n.createElement(n.Fragment,null,Me.access==="direct"&&n.createElement(i.F,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),xe?n.createElement(n.Fragment,null,n.createElement(s.I,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),n.createElement("hr",{className:`${Ue.hrTopSpace} ${Ue.hrBottomSpace}`}),n.createElement(M,{options:Me,onOptionsChange:ze,azureAuthSettings:be,sigV4AuthToggleEnabled:c.config.sigV4AuthEnabled,renderSigV4Editor:n.createElement(r._r,{inExperimentalAuthComponent:!0,...Ee}),secureSocksDSProxyEnabled:c.config.secureSocksDSProxyEnabled})):n.createElement(l.t,{defaultUrl:"http://localhost:9090",dataSourceConfig:Me,showAccessOptions:We.current,onChange:ze,sigV4AuthToggleEnabled:c.config.sigV4AuthEnabled,azureAuthSettings:be,renderSigV4Editor:n.createElement(r._r,{...Ee}),secureSocksDSProxyEnabled:c.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:re()}),xe?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(o.A,{className:Ue.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},n.createElement(ue,{className:Ue.advancedHTTPSettingsMargin,config:Me,onChange:ze}),n.createElement(a,{options:Me,onOptionsChange:ze}),n.createElement(ne,{options:Me,onOptionsChange:ze}))):n.createElement(n.Fragment,null,n.createElement("hr",{className:Ue.hrTopSpace}),n.createElement("h3",{className:Ue.sectionHeaderPadding},"Additional settings"),n.createElement("p",{className:`${Ue.secondaryGrey} ${Ue.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),n.createElement(a,{options:Me,onOptionsChange:ze}),n.createElement(ne,{options:Me,onOptionsChange:ze})))};function re(Ee){return n.createElement("a",{href:Ee||"https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source",target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const De=(Ee,Me,ze)=>{const xe="Value is not valid";return Ee&&!Ee.match(Me)?n.createElement(d.P,null,ze||xe):!0};function Fe(Ee){return{additionalSettings:(0,t.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,t.css)`
      color: ${Ee.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,t.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,t.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,t.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,t.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,t.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,t.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,t.css)`
      margin-top: 50px;
    `,textUnderline:(0,t.css)`
      text-decoration: underline;
    `,versionMargin:(0,t.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,t.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,t.css)`
      padding-top: 32px;
    `,alertingTop:(0,t.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,t.css)`
      font-weight: 400;
    `,container:(0,t.css)`
      maxwidth: 578;
    `}}},87066:(Q,I,e)=>{"use strict";e.d(I,{gs:()=>Ue,UD:()=>we});var t=e(2543),n=e(13288),r=e(75505),s=e(81160),o=e(59099),m=e(97716),i=e.n(m),l=e(65879),d=e(43659),c=e(43127),g=e(47232),u=e(41987),E=e(26657),p=e(72574),b=e(47773),a=e(17172),h=e(32264),P=e(87324),y=e(96540),C=e(13544),f=e(71087),D=e(9e4),T=e(81580),M=e(79458),O=e(51440),S=e(68402),v=e(10354),x=e(63492);function A(Ve){const Oe=Ve.annotation,Ne=Ve.onAnnotationChange,ye={expr:Oe.expr,refId:Oe.name,interval:Oe.step};return y.createElement(y.Fragment,null,y.createElement(f.D,null,y.createElement(x.$,{...Ve,query:ye,showExplain:!1,onChange:se=>{Ne({...Oe,expr:se.expr})}}),y.createElement(D.U,null,y.createElement(T.c,{label:"Min step",tooltip:y.createElement(y.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",y.createElement("code",null,"$__interval")," and ",y.createElement("code",null,"$__rate_interval")," variables.")},y.createElement(O.D,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:se=>{Ne({...Oe,step:se.currentTarget.value})},defaultValue:ye.interval,id:C.Tp.components.DataSource.Prometheus.annotations.minStep})))),y.createElement(S.$,{v:.5}),y.createElement(D.U,null,y.createElement(T.c,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(v.p,{type:"text",placeholder:"{{alertname}}",value:Oe.titleFormat,onChange:se=>{Ne({...Oe,titleFormat:se.currentTarget.value})},"data-testid":C.Tp.components.DataSource.Prometheus.annotations.title})),y.createElement(T.c,{label:"Tags"},y.createElement(v.p,{type:"text",placeholder:"label1,label2",value:Oe.tagKeys,onChange:se=>{Ne({...Oe,tagKeys:se.currentTarget.value})},"data-testid":C.Tp.components.DataSource.Prometheus.annotations.tags})),y.createElement(T.c,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},y.createElement(v.p,{type:"text",placeholder:"{{instance}}",value:Oe.textFormat,onChange:se=>{Ne({...Oe,textFormat:se.currentTarget.value})},"data-testid":C.Tp.components.DataSource.Prometheus.annotations.text})),y.createElement(T.c,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},y.createElement(M.C,{value:Oe.useValueForTime,onChange:se=>{Ne({...Oe,useValueForTime:se.currentTarget.value})},"data-testid":C.Tp.components.DataSource.Prometheus.annotations.seriesValueAsTimestamp}))))}var R=e(32799),B=e(45889),U=e(47891),w=e(65405),K=e(69120);const N=/^label_names\(\)\s*$/,L=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,V=/^metrics\((.+)\)\s*$/,F=/^query_result\((.+)\)\s*$/,z=/^label_names\((.+)\)\s*$/;function Y(Ve){if(typeof Ve!="string")return Ve;const Oe={refId:"PrometheusDatasource-VariableQuery",qryType:K.B4.LabelNames},Ne=Ve.match(z);if(Ne)return{...Oe,qryType:K.B4.LabelNames,match:Ne[1]};const ye=Ve.match(N);if(ye)return{...Oe,qryType:K.B4.LabelNames};const se=Ve.match(/^label_values\(/);if(se){const Pe=Ve.match(L),Re=Pe?Pe[2]:"",Be=Pe?Pe[1]:"";if(Be){const _e=(0,w.u)(Be);return{...Oe,qryType:K.B4.LabelValues,label:Re,metric:_e.query.metric,labelFilters:_e.query.labels}}else return{...Oe,qryType:K.B4.LabelValues,label:Re}}const ae=Ve.match(/^metrics\(/);if(ae){const Pe=Ve.match(V),Re=Pe?Pe[1]:"";return{...Oe,qryType:K.B4.MetricNames,metric:Re}}const ge=Ve.match(/^query_result\(/);if(ge){const Pe=Ve.match(F),Re=Pe?Pe[1]:"";return{...Oe,qryType:K.B4.VarQueryResult,varQuery:Re}}return!ye&&!se&&!ae&&!ge?{...Oe,qryType:K.B4.SeriesQuery,seriesQuery:Ve}:Oe}function H(Ve){switch(Ve.qryType){case K.B4.LabelNames:return Ve.match?`label_names(${Ve.match})`:"label_names()";case K.B4.LabelValues:if(Ve.metric||Ve.labelFilters&&Ve.labelFilters.length!==0){const Ne={metric:Ve.metric,labels:Ve.labelFilters??[],operations:[]};return`label_values(${U.z.renderQuery(Ne)},${Ve.label})`}else return`label_values(${Ve.label})`;case K.B4.MetricNames:return`metrics(${Ve.metric})`;case K.B4.VarQueryResult:return`query_result(${k(Ve.varQuery)})`;case K.B4.SeriesQuery:return Ve.seriesQuery??"";case K.B4.ClassicQuery:return Ve.classicQuery??""}return""}function k(Ve){return Ve?Ve.replace(/[\r\n]+/gm,""):""}class ee{constructor(Oe,Ne){this.datasource=Oe,this.query=Ne,this.datasource=Oe,this.query=Ne,this.range=(0,c.E2)()}process(Oe){this.range=Oe;const Ne=N,ye=z,se=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,ae=V,ge=F,Pe=this.query.match(Ne),Re=this.query.match(ye);if(Re){const at=`{__name__=~".*${Re[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(at,[]).then(st=>st.map(dt=>({text:dt})))}if(Pe)return this.datasource.getTagKeys({filters:[],timeRange:Oe});const Be=this.query.match(se);if(Be){const at=Be[1],st=Be[2];return ie(at)?this.labelValuesQuery(st,at):this.labelValuesQuery(st)}const _e=this.query.match(ae);if(_e)return this.metricNameQuery(_e[1]);const Xe=this.query.match(ge);return Xe?this.queryResultQuery(Xe[1]):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(Oe,Ne){const ye=(0,B.mv)(this.range.from,!1),se=(0,B.mv)(this.range.to,!0),ae={...Ne&&{"match[]":Ne},start:ye.toString(),end:se.toString()};if(!Ne||this.datasource.hasLabelsMatchAPISupport()){const ge=`/api/v1/label/${Oe}/values`;return this.datasource.metadataRequest(ge,ae).then(Pe=>(0,t.map)(Pe.data.data,Re=>({text:Re})))}else return this.datasource.metadataRequest("/api/v1/series",ae).then(Pe=>{const Re=(0,t.map)(Pe.data.data,Be=>Be[Oe]||"").filter(Be=>Be!=="");return(0,t.uniq)(Re).map(Be=>({text:Be,expandable:!0}))})}metricNameQuery(Oe){const Ne=(0,B.mv)(this.range.from,!1),ye=(0,B.mv)(this.range.to,!0),se={start:Ne.toString(),end:ye.toString()};return this.datasource.metadataRequest("/api/v1/label/__name__/values",se).then(ge=>(0,t.chain)(ge.data.data).filter(Pe=>new RegExp(Oe).test(Pe)).map(Pe=>({text:Pe,expandable:!0})).value())}queryResultQuery(Oe){const Ne="/api/v1/query",ye={query:Oe,time:(0,B.mv)(this.range.to,!0).toString()};return this.datasource.metadataRequest(Ne,ye).then(se=>{switch(se.data.data.resultType){case"scalar":case"string":return[{text:se.data.data.result[1]||"",expandable:!1}];case"vector":return(0,t.map)(se.data.data.result,ae=>{let ge=ae.metric.__name__||"";return delete ae.metric.__name__,ge+="{"+(0,t.map)(ae.metric,(Pe,Re)=>Re+'="'+Pe+'"').join(",")+"}",ge+=" "+ae.value[1]+" "+ae.value[0]*1e3,{text:ge,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${se.data.data.resultType}]`)}})}metricNameAndLabelsQuery(Oe){const Ne=(0,B.mv)(this.range.from,!1),ye=(0,B.mv)(this.range.to,!0),se={"match[]":Oe,start:Ne.toString(),end:ye.toString()},ae="/api/v1/series",ge=this;return this.datasource.metadataRequest(ae,se).then(Pe=>(0,t.map)(Pe.data.data,Re=>({text:ge.datasource.getOriginalMetricName(Re),expandable:!0})))}}function ie(Ve){return Ve&&Ve.split(" ").join("")!=="{}"}const fe=20;function q(Ve,Oe,Ne){const ye=[];if(Ve.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)&&ye.push({type:"HISTOGRAM_QUANTILE",label:"Selected metric has buckets.",fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Ve}}}),Ve.indexOf("rate(")===-1&&Ve.indexOf("increase(")===-1){const ae=Ve.match(/\b((?<!:)\w+_(total|sum|count)(?!:))\b/);let ge=ae?ae[1]:"";const Pe=Ne?.languageProvider?.metricsMetadata;let Re=!1;if(Pe&&(ge=Array.from(Ve.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([_e])=>_e).filter(_e=>!_e.startsWith("$")).flatMap(_e=>_e.split(":")).find(_e=>{const Xe=Pe[_e];return Xe&&Xe.type.toLowerCase()==="counter"?(Re=!0,!0):!1})??""),ge){const Be=Ve.trim().match(/^\w+$|^\w+{.*}$/);let Xe=`Selected metric ${Re?"is":"looks like"} a counter.`,tt;Be?tt={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Ve}}:Xe=`${Xe} Consider calculating rate of counter by adding rate().`,ye.push({type:"APPLY_RATE",label:Xe,fix:tt})}}if(Ne&&Ne.ruleMappings){const ae=Ne.ruleMappings,ge=Object.keys(ae).reduce((Pe,Re)=>Ve.search(Re)>-1?{...Pe,[Re]:ae[Re]}:Pe,{});(0,t.size)(ge)>0&&ye.push({type:"EXPAND_RULES",label:"Query contains recording rules.",fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Ve,options:ge}}})}return Oe&&Oe.length>=fe&&Ve.trim().match(/^\w+$/)&&ye.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Ve,preventSubmit:!0}}}),ye}function Z(Ve){const Oe=[];return Ve.lookupsDisabled&&Oe.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),Oe}var J=e(30915),G=e(39132),ne=e(14110);function te(Ve,Oe,Ne){const{app:ye,targets:se}=Oe;if(!(ye===u.Jk.Dashboard||ye===u.Jk.PanelViewer))for(const ae of se)(0,ne.rR)("grafana_prometheus_query_executed",{app:ye,grafana_version:h.$.buildInfo.version,has_data:Ve.data.some(ge=>ge.length>0),has_error:Ve.error!==void 0,expr:ae.expr,format:ae.format,instant:ae.instant,range:ae.range,exemplar:ae.exemplar,hinting:ae.hinting,interval:ae.interval,intervalFactor:ae.intervalFactor,utcOffsetSec:ae.utcOffsetSec,legend:ae.legendFormat,valueWithRefId:ae.valueWithRefId,requestId:Oe.requestId,showingGraph:ae.showingGraph,showingTable:ae.showingTable,editor_mode:ae.editorMode,simultaneously_sent_query_count:se.length,time_range_from:Oe?.range?.from?.toISOString(),time_range_to:Oe?.range?.to?.toISOString(),time_taken:Date.now()-Ne.getTime()})}var oe=e(62467),le=e(65474),ue=e(29505),Te=e(39268),he=e(14186),re=e(88323),De=e(21744),Fe=e(46777);const Ee=[{label:"Label names",value:K.B4.LabelNames},{label:"Label values",value:K.B4.LabelValues},{label:"Metrics",value:K.B4.MetricNames},{label:"Query result",value:K.B4.VarQueryResult},{label:"Series query",value:K.B4.SeriesQuery},{label:"Classic query",value:K.B4.ClassicQuery}],Me="PrometheusVariableQueryEditor-VariableQuery",ze=({onChange:Ve,query:Oe,datasource:Ne,range:ye})=>{const[se,ae]=(0,y.useState)(void 0),[ge,Pe]=(0,y.useState)(""),[Re,Be]=(0,y.useState)(""),[_e,Xe]=(0,y.useState)(""),[tt,at]=(0,y.useState)(""),[st,dt]=(0,y.useState)(""),[ot,ft]=(0,y.useState)(""),[yt,Tt]=(0,y.useState)([]),[Kt,Gt]=(0,y.useState)([]);(0,y.useEffect)(()=>{Ne.languageProvider.start(ye)},[]),(0,y.useEffect)(()=>{if(Oe)if(Oe.qryType===K.B4.ClassicQuery)ae(Oe.qryType),ft(Oe.query??"");else{const Jt=xe(Oe);Be(Jt.match??""),ae(Jt.qryType),Pe(Jt.label??""),Xe(Jt.metric??""),Gt(Jt.labelFilters??[]),at(Jt.varQuery??""),dt(Jt.seriesQuery??""),ft(Jt.classicQuery??"")}},[Oe]),(0,y.useEffect)(()=>{if(se!==K.B4.LabelValues)return;const Jt=Ne.getVariables().map(hn=>({label:hn,value:hn}));if(!_e)Ne.getTagKeys({filters:[]}).then(hn=>{const Fn=hn.map(({text:Kn})=>({label:Kn,value:Kn}));Tt([...Jt,...Fn])});else{const hn=[{label:"__name__",op:"=",value:_e}],Fn=U.z.renderLabels(hn);Ne.languageProvider.fetchLabelsWithMatch(Fn).then(Kn=>{const Ut=Object.keys(Kn).map(on=>({label:on,value:on}));Tt([...Jt,...Ut])})}},[Ne,se,_e]);const _t=(Jt,hn)=>{const na={...{qryType:se,label:ge,metric:_e,match:Re,varQuery:tt,seriesQuery:st,classicQuery:ot,refId:"PrometheusVariableQueryEditor-VariableQuery"},...Jt,...hn?{labelFilters:hn}:{labelFilters:Kt}},Ut=H(na);Ve({query:Ut,qryType:na.qryType,refId:Me})},it=Jt=>{ae(Jt.value),Jt.value!==K.B4.SeriesQuery&&_t({qryType:Jt.value??0})},Mt=Jt=>{const hn=Jt&&Jt.value?Jt.value:"";Pe(hn),se===K.B4.LabelValues&&hn&&_t({label:hn})},Dn=Jt=>{Xe(Jt.metric),Gt(Jt.labels);const hn=Jt.metric,Fn=Jt.labels??[];se===K.B4.LabelValues&&ge&&(hn||Fn)&&_t({qryType:se,metric:hn},Fn)},lt=Jt=>{se===K.B4.LabelNames&&_t({qryType:se,match:Jt})},Ct=Jt=>{se===K.B4.MetricNames&&Jt&&_t({metric:Jt})},Vt=Jt=>{at(Jt.currentTarget.value)},qt=Jt=>{dt(Jt.currentTarget.value)},rn=Jt=>{ft(Jt.currentTarget.value)},en=(0,y.useCallback)(()=>({metric:_e,labels:Kt,operations:[]}),[_e,Kt]);return y.createElement(y.Fragment,null,y.createElement(Te.C,null,y.createElement(he.I,{label:"Query type",labelWidth:20,tooltip:y.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},y.createElement(re.l6,{placeholder:"Select query type","aria-label":"Query type",onChange:it,value:se,options:Ee,width:25,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.queryType}))),se===K.B4.LabelValues&&y.createElement(y.Fragment,null,y.createElement(Te.C,null,y.createElement(he.I,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:y.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},y.createElement(re.l6,{"aria-label":"label-select",onChange:Mt,value:ge,options:yt,width:25,allowCustomValue:!0,isClearable:!0,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.labelValues.labelSelect}))),y.createElement(Fe.I,{query:en(),datasource:Ne,onChange:Dn,variableEditor:!0})),se===K.B4.LabelNames&&y.createElement(Te.C,null,y.createElement(he.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:y.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},y.createElement(v.p,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:Re,onBlur:Jt=>{Be(Jt.currentTarget.value),lt(Jt.currentTarget.value)},onChange:Jt=>{Be(Jt.currentTarget.value)},width:25,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.labelnames.metricRegex}))),se===K.B4.MetricNames&&y.createElement(Te.C,null,y.createElement(he.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:y.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},y.createElement(v.p,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:_e,onChange:Jt=>{Xe(Jt.currentTarget.value)},onBlur:Jt=>{Xe(Jt.currentTarget.value),Ct(Jt.currentTarget.value)},width:25,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.metricNames.metricRegex}))),se===K.B4.VarQueryResult&&y.createElement(Te.C,null,y.createElement(he.I,{label:"Query",labelWidth:20,tooltip:y.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},y.createElement(De.f,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:tt,onChange:Vt,onBlur:()=>{se===K.B4.VarQueryResult&&tt&&_t({qryType:se})},cols:100,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.varQueryResult}))),se===K.B4.SeriesQuery&&y.createElement(Te.C,null,y.createElement(he.I,{label:"Series Query",labelWidth:20,tooltip:y.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},y.createElement(v.p,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:st,onChange:qt,onBlur:()=>{se===K.B4.SeriesQuery&&st&&_t({qryType:se})},width:100,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.seriesQuery}))),se===K.B4.ClassicQuery&&y.createElement(Te.C,null,y.createElement(he.I,{label:"Classic Query",labelWidth:20,tooltip:y.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},y.createElement(v.p,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:ot,onChange:rn,onBlur:()=>{se===K.B4.ClassicQuery&&ot&&_t({qryType:se})},width:100,"data-testid":C.Tp.components.DataSource.Prometheus.variableQueryEditor.classicQuery}))))};function xe(Ve){return typeof Ve=="string"?Y(Ve):Ve.query?Y(Ve.query):Ve}class We extends ue.f5{constructor(Oe,Ne=(0,p.w)()){super(),this.datasource=Oe,this.templateSrv=Ne,this.editor=ze}query(Oe){let Ne;if(typeof Oe.targets[0]=="string"?Ne=Oe.targets[0]:Ne=Oe.targets[0].query,!Ne)return(0,oe.of)({data:[]});const ye={...Oe.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:l.intervalToMs(this.datasource.interval),value:l.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(Oe.range)},se=this.templateSrv.replace(Ne,ye,this.datasource.interpolateQueryExpr),ae=new ee(this.datasource,se);return(0,le.H)(ae.process(Oe.range)).pipe((0,s.T)(Pe=>({data:Pe})))}}const be="60s",pe=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Ue="-Instant";class we extends E.iy{constructor(Oe,Ne=(0,p.w)(),ye){super(Oe),this.templateSrv=Ne,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.processAnnotationResponse=(se,ae)=>{const ge=(0,b.bE)({data:ae}).data;if(!ge||!ge.length)return[];const Pe=se.annotation,{tagKeys:Re="",titleFormat:Be="",textFormat:_e=""}=Pe,Xe=l.intervalToSeconds(Pe.step||be)*1e3,tt=Re.split(","),at=[];for(const st of ge){if(st.fields.length===0)continue;const dt=st.fields[0],ot=st.fields[1],ft=ot?.labels||{},yt=Object.keys(ft).filter(Mt=>tt.includes(Mt)).map(Mt=>ft[Mt]),Tt=[];let Kt=0;ot.values.forEach(Mt=>{let Dn,lt;const Ct=dt.values[Kt];se.annotation.useValueForTime?(Dn=Math.floor(parseFloat(Mt)),lt=1):(Dn=Math.floor(parseFloat(Ct)),lt=parseFloat(Mt)),Kt++,Tt.push([Dn,lt])});const _t=Tt.filter(Mt=>Mt[1]>0).map(Mt=>Mt[0]);let it=null;for(const Mt of _t){if(it&&(it.timeEnd??0)+Xe>=Mt){it.timeEnd=Mt;continue}it&&at.push(it),it={time:Mt,timeEnd:Mt,annotation:Pe,title:(0,d.j)(Be,ft),tags:yt,text:(0,d.j)(_e,ft)}}it&&(it.timeEnd=_t[_t.length-1],at.push(it))}return at},this.type="prometheus",this.id=Oe.id,this.url=Oe.url,this.access=Oe.access,this.basicAuth=Oe.basicAuth,this.withCredentials=Oe.withCredentials,this.interval=Oe.jsonData.timeInterval||"15s",this.queryTimeout=Oe.jsonData.queryTimeout,this.httpMethod=Oe.jsonData.httpMethod||"GET",this.exemplarTraceIdDestinations=Oe.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=Oe.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=ye??new R.Ay(this),this.lookupsDisabled=Oe.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(Oe.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=Oe.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=Oe.jsonData.prometheusVersion,this.defaultEditor=Oe.jsonData.defaultEditor,this.disableRecordingRules=Oe.jsonData.disableRecordingRules??!1,this.variables=new We(this,this.templateSrv),this.exemplarsAvailable=!0,this.cacheLevel=Oe.jsonData.cacheLevel??K.fD.Low,this.cache=new J.$i({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:Oe.jsonData.incrementalQueryOverlapWindow??J.Dr,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:A}}getQueryDisplayText(Oe){return Oe.expr}getPrometheusProfileData(Oe,Ne){return{interval:Ne.interval??Oe.interval,expr:this.interpolateString(Ne.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(Oe,Ne){return`${this.interpolateString(Ne.expr)}|${Ne.interval??Oe.interval}|${JSON.stringify(Oe.rangeRaw??"")}|${Ne.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",K.N1.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",K.N1.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",K.N1.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",K.N1.Thanos)}_isDatasourceVersionGreaterOrEqualTo(Oe,Ne){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor?!0:Ne!==this.datasourceConfigurationPrometheusFlavor?!1:i().gte(this.datasourceConfigurationPrometheusVersion,Oe)}_addTracingHeaders(Oe,Ne){Oe.headers={},this.access==="proxy"&&(Oe.headers["X-Dashboard-UID"]=Ne.dashboardUID,Oe.headers["X-Panel-Id"]=Ne.panelId)}directAccessError(){return(0,n.$)(()=>new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode."))}_request(Oe,Ne,ye={}){if(this.access==="direct")return this.directAccessError();Ne=Ne||{};for(const[ge,Pe]of this.customQueryParameters)Ne[ge]==null&&(Ne[ge]=Pe);let se=this.url+Oe;Oe.startsWith(`/api/datasources/uid/${this.uid}`)&&(se=Oe);const ae=(0,t.defaults)(ye,{url:se,method:this.httpMethod,headers:{}});return ae.method==="GET"?Ne&&Object.keys(Ne).length&&(ae.url=ae.url+(ae.url.search(/\?/)>=0?"&":"?")+Object.entries(Ne).map(([ge,Pe])=>`${encodeURIComponent(ge)}=${encodeURIComponent(Pe)}`).join("&")):(ae.headers["Content-Type"]="application/x-www-form-urlencoded",ae.data=Ne),(this.basicAuth||this.withCredentials)&&(ae.withCredentials=!0),this.basicAuth&&(ae.headers.Authorization=this.basicAuth),(0,a.AI)().fetch(ae)}async importFromAbstractQueries(Oe){return Oe.map(Ne=>this.languageProvider.importFromAbstractQuery(Ne))}async exportToAbstractQueries(Oe){return Oe.map(Ne=>this.languageProvider.exportToAbstractQuery(Ne))}async metadataRequest(Oe,Ne={},ye){if(pe.some(se=>Oe.includes(se)))try{return await(0,r.s)(this._request(`/api/datasources/uid/${this.uid}/resources${Oe}`,Ne,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...ye}))}catch(se){if(this.httpMethod==="POST"&&(0,a.NF)(se)&&(se.status===405||se.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw se}return await(0,r.s)(this._request(`/api/datasources/uid/${this.uid}/resources${Oe}`,Ne,{method:"GET",hideFromInspector:!0,...ye}))}interpolateQueryExpr(Oe=[],Ne){if(!Ne.multi&&!Ne.includeAll)return rt(Oe);if(typeof Oe=="string")return Je(Oe);const ye=Oe.map(se=>Je(se));return ye.length===1?ye[0]:"("+ye.join("|")+")"}targetContainsTemplate(Oe){return this.templateSrv.containsTemplate(Oe.expr)}shouldRunExemplarQuery(Oe,Ne){if(Oe.exemplar){const ye=this.languageProvider.histogramMetrics.find(ge=>Oe.expr.includes(ge)),se=Ne.targets.findIndex(ge=>ge.refId===Oe.refId),ae=Ne.targets.slice(0,se).filter(ge=>!ge.hide);return!!(!ye||ye&&!ae.some(ge=>ge.expr.includes(ye)))}return!1}processTargetV2(Oe,Ne){const ye=[],se={...Oe,exemplar:this.shouldRunExemplarQuery(Oe,Ne),requestId:Ne.panelId+Oe.refId,utcOffsetSec:Ne.range.to.utcOffset()*60};return h.$.featureToggles.promQLScope&&(se.scope=Ne.scope),Oe.instant&&Oe.range?ye.push({...se,refId:se.refId,instant:!1},{...se,refId:se.refId+Ue,range:!1}):ye.push(se),ye}query(Oe){if(this.access==="direct")return this.directAccessError();let Ne,ye;const se=Oe.targets.some(Pe=>Pe.instant);this.hasIncrementalQuery&&!se?(ye=this.cache.requestInfo(Oe),Ne=ye.requests[0]):Ne=Oe;const ae=Ne.targets.map(Pe=>this.processTargetV2(Pe,Ne)),ge=new Date;return super.query({...Ne,targets:ae.flat()}).pipe((0,s.T)(Pe=>{const Re={...Pe,data:this.cache.procFrames(Oe,ye,Pe.data)};return(0,G.J3)(Re,Oe,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,o.M)(Pe=>{te(Pe,Oe,ge)}))}createQuery(Oe,Ne,ye,se){const ae={hinting:Oe.hinting,instant:Oe.instant,exemplar:Oe.exemplar,step:0,expr:"",refId:Oe.refId,start:0,end:0},ge=Math.ceil(se-ye);let Pe=l.intervalToSeconds(Ne.interval);const Re=l.intervalToSeconds(this.templateSrv.replace(Oe.interval||Ne.interval,Ne.scopedVars)),Be=Oe.interval?l.intervalToSeconds(this.templateSrv.replace(Oe.interval,Ne.scopedVars)):l.intervalToSeconds(this.interval),_e=Oe.intervalFactor||1,Xe=this.adjustInterval(Pe,Re,ge,_e);let tt={...Ne.scopedVars,...this.getRangeScopedVars(Ne.range),...this.getRateIntervalScopedVariable(Xe,Be)};Pe!==Xe&&(Pe=Xe,tt=Object.assign({},Ne.scopedVars,{__interval:{text:Pe+"s",value:Pe+"s"},__interval_ms:{text:Pe*1e3,value:Pe*1e3},...this.getRateIntervalScopedVariable(Pe,Be),...this.getRangeScopedVars(Ne.range)})),ae.step=Pe;let at=Oe.expr;at=this.enhanceExprWithAdHocFilters(Ne.filters,at),ae.expr=this.templateSrv.replace(at,tt,this.interpolateQueryExpr);const st=je(ye,se,ae.step,Ne.range.to.utcOffset()*60);return ae.start=st.start,ae.end=st.end,this._addTracingHeaders(ae,Ne),ae}getRateIntervalScopedVariable(Oe,Ne){Ne===0&&(Ne=15);const ye=Math.max(Oe+Ne,4*Ne);return{__rate_interval:{text:ye+"s",value:ye+"s"}}}adjustInterval(Oe,Ne,ye,se){let ae=ye/11e3;return ae>1&&(ae=Math.ceil(ae)),Math.max(Oe*se,Ne,ae)}metricFindQuery(Oe,Ne){if(!Oe)return Promise.resolve([]);const ye={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:l.intervalToMs(this.interval),value:l.intervalToMs(this.interval)},...this.getRangeScopedVars(Ne?.range??(0,c.E2)())},se=this.templateSrv.replace(Oe,ye,this.interpolateQueryExpr);return new ee(this,se).process(Ne?.range??(0,c.E2)())}getRangeScopedVars(Oe){const Ne=Oe.to.diff(Oe.from),ye=Math.round(Ne/1e3);return{__range_ms:{text:Ne,value:Ne},__range_s:{text:ye,value:ye},__range:{text:ye+"s",value:ye+"s"}}}async annotationQuery(Oe){if(this.access==="direct"){const ge=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(ge)}const Ne=Oe.annotation,{expr:ye=""}=Ne;if(!ye)return Promise.resolve([]);const se=Oe.annotation.step||be,ae={expr:ye,range:!0,instant:!1,exemplar:!1,interval:se,refId:"X",datasource:this.getRef()};return await(0,r.s)((0,a.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,B.mv)(Oe.range.from,!1)*1e3).toString(),to:((0,B.mv)(Oe.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(ae,{})]},requestId:`prom-query-${Ne.name}`}).pipe((0,s.T)(ge=>this.processAnnotationResponse(Oe,ge.data))))}async getTagKeys(Oe){if(!Oe||Oe.filters.length===0)return await this.languageProvider.fetchLabels(Oe.timeRange),this.languageProvider.getLabelKeys().map(ae=>({value:ae,text:ae}));const Ne=Oe.filters.map(ae=>({label:ae.key,value:ae.value,op:ae.operator})),ye=U.z.renderLabels(Ne);let se=await this.languageProvider.fetchLabelsWithMatch(ye);return Object.keys(se).filter(ae=>!Oe.filters.find(ge=>ge.key===ae)).map(ae=>({value:ae,text:ae}))}async getTagValues(Oe){const Ne=Oe.filters.map(ge=>({label:ge.key,value:ge.value,op:ge.operator})),ye=U.z.renderLabels(Ne);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(Oe.key,ye,Oe.timeRange)).map(ge=>({value:ge,text:ge}));const se=this.getTimeRangeParams(Oe.timeRange??(0,c.E2)());return(await this.metadataRequest(`/api/v1/label/${Oe.key}/values`,se))?.data?.data?.map(ge=>({text:ge}))??[]}interpolateVariablesInQueries(Oe,Ne,ye){let se=Oe;return Oe&&Oe.length&&(se=Oe.map(ae=>{const ge=this.templateSrv.replace(ae.expr,Ne,this.interpolateQueryExpr),Pe=this.enhanceExprWithAdHocFilters(ye,ge);return{...ae,datasource:this.getRef(),expr:Pe,interval:this.templateSrv.replace(ae.interval,Ne)}})),se}getQueryHints(Oe,Ne){return q(Oe.expr??"",Ne,this)}getInitHints(){return Z(this)}async loadRules(){try{const Ne=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;Ne&&(this.ruleMappings=He(Ne))}catch(Oe){console.log("Rules API is experimental. Ignore next error."),console.error(Oe)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,g.KQ)().subtract(30,"minutes").valueOf().toString(),end:(0,g.KQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(Oe,Ne){let ye=Oe.expr??"";switch(Ne.type){case"ADD_FILTER":{const{key:se,value:ae}=Ne.options??{};se&&ae&&(ye=(0,P.t)(ye,se,ae));break}case"ADD_FILTER_OUT":{const{key:se,value:ae}=Ne.options??{};se&&ae&&(ye=(0,P.t)(ye,se,ae,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{ye=`histogram_quantile(0.95, sum(rate(${ye}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{ye=`rate(${ye}[$__rate_interval])`;break}case"ADD_SUM":{ye=`sum(${ye.trim()}) by ($1)`;break}case"EXPAND_RULES":{Ne.options&&(ye=(0,B.P_)(ye,Ne.options));break}default:break}return{...Oe,expr:ye}}getAdjustedInterval(Oe){return(0,B.Xd)(this.cacheLevel,Oe)}getTimeRangeParams(Oe){return{start:(0,B.mv)(Oe.from,!1).toString(),end:(0,B.mv)(Oe.to,!0).toString()}}getOriginalMetricName(Oe){return(0,G.hF)(Oe)}enhanceExprWithAdHocFilters(Oe,Ne){return!Oe||Oe.length===0?Ne:Oe.reduce((se,ae)=>{const{key:ge,operator:Pe}=ae;let{value:Re}=ae;return(Pe==="=~"||Pe==="!~")&&(Re=rt(Re)),(0,P.t)(se,ge,Re,Pe)},Ne)}filterQuery(Oe){return!(Oe.hide||!Oe.expr)}applyTemplateVariables(Oe,Ne,ye){const se={...Ne};se.__interval={value:"$__interval"},se.__interval_ms={value:"$__interval_ms"};const ae=this.templateSrv.replace(Oe.expr,se,this.interpolateQueryExpr),ge=this.enhanceExprWithAdHocFilters(ye,ae);return{...Oe,expr:ge,interval:this.templateSrv.replace(Oe.interval,se),legendFormat:this.templateSrv.replace(Oe.legendFormat,se)}}getVariables(){return this.templateSrv.getVariables().map(Oe=>`$${Oe.name}`)}interpolateString(Oe,Ne){return this.templateSrv.replace(Oe,Ne,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case K.fD.Medium:return 600;case K.fD.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case K.fD.Medium:return 7;case K.fD.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,B.u3)(this.cacheLevel)}getDefaultQuery(Oe){const Ne={refId:"A",expr:"",range:!0,instant:!1};return Oe===u.Jk.UnifiedAlerting?{...Ne,instant:!0,range:!1}:Oe===u.Jk.Explore?{...Ne,instant:!0,range:!0}:Ne}}function je(Ve,Oe,Ne,ye){const se=Math.floor((Oe+ye)/Ne)*Ne-ye,ae=Math.floor((Ve+ye)/Ne)*Ne-ye;return{end:se,start:ae}}function He(Ve){return Ve.reduce((Oe,Ne)=>Ne.rules.filter(ye=>ye.type==="recording").reduce((ye,se)=>({...ye,[se.name]:se.query}),Oe),{})}function rt(Ve){return typeof Ve=="string"?Ve.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Ve}function Je(Ve){return typeof Ve=="string"?Ve.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Ve}},32799:(Q,I,e)=>{"use strict";e.d(I,{AU:()=>h,Ay:()=>C,OP:()=>E,pK:()=>a,xB:()=>b});var t=e(2543),n=e.n(t),r=e(28848),s=e.n(r),o=e(40187),m=e(43127),i=e(73372),l=e(45889),d=e(69470),c=e(69120);const g=["job","instance"],u="{}",E=1e4,p=D=>({headers:{"X-Grafana-Cache":`private, max-age=${D}`}});function b(D,T){if(!T[D])return;const{type:M,help:O}=T[D];return`${M.toUpperCase()}: ${O}`}function a(D,T){if(T[D])return T[D].help}function h(D,T){if(T[D])return T[D].type}const P=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,y=86400;class C extends o.Is{constructor(T,M){super(),this.labelKeys=[],this.request=async(O,S,v={},x)=>{try{return(await this.datasource.metadataRequest(O,v,x)).data.data}catch(A){console.error(A)}return S},this.start=async O=>(this.timeRange=O??(0,m.E2)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,l.Rg)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async O=>{const S=this.datasource.getAdjustedInterval(this.timeRange),x=`/api/v1/label/${this.datasource.interpolateString(O)}/values`;return await this.request(x,[],S,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(O,S)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(O,S):(await this.getSeries(S))[O]??[],this.fetchSeriesValuesWithMatch=async(O,S,v=this.timeRange)=>{const x=O?this.datasource.interpolateString(O):null,A=S?this.datasource.interpolateString(S):null,B={...this.datasource.getAdjustedInterval(v),...A&&{"match[]":A}};return await this.request(`/api/v1/label/${x}/values`,[],B,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(O,S)=>{let v,x;this.datasource.hasLabelsMatchAPISupport()?(S.push({name:"__name__",value:"",op:"!="}),x=await this.fetchSeriesLabelsMatch(O),v=Object.keys(x)):(x=await this.getSeries(O),v=Object.keys(x));const A=new Set(S.map(R=>R.name));return v.filter(R=>!A.has(R))},this.fetchLabelsWithMatch=async(O,S)=>this.datasource.hasLabelsMatchAPISupport()?this.fetchSeriesLabelsMatch(O,S):this.fetchSeriesLabels(O,S),this.fetchSeriesLabels=async(O,S)=>{const v=this.datasource.interpolateString(O),A={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":v},B=await this.request("/api/v1/series",[],A,this.getDefaultCacheHeaders()),{values:U}=(0,l.P7)(B,S);return U},this.fetchSeriesLabelsMatch=async(O,S)=>{const v=this.datasource.interpolateString(O),A={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":v};return(await this.request("/api/v1/labels",[],A,this.getDefaultCacheHeaders())).reduce((U,w)=>({...U,[w]:""}),{})},this.fetchSeries=async O=>{const S="/api/v1/series",x={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":O};return await this.request(S,{},x,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,t.once)(async()=>{const O=await Promise.all(g.map(S=>this.fetchLabelValues(S)));return g.reduce((S,v,x)=>({...S,[v]:O[x]}),{})}),this.datasource=T,this.histogramMetrics=[],this.timeRange=(0,m.E2)(),this.metrics=[],Object.assign(this,M)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==c.fD.None)return p(this.datasource.getCacheDurationInMinutes()*60)}cleanText(T){return T.split(P).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return d.Ay}async loadMetricsMetadata(){const T=p(this.datasource.getDaysToCacheMetadata()*y);this.metricsMetadata=(0,l.DX)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...T}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(T){return(0,l.pt)(T)}exportToAbstractQuery(T){const M=T.expr;if(!M||M.length===0)return{refId:T.refId,labelMatchers:[]};const O=s().tokenize(M,d.Ay),S=(0,l.VH)(O),v=f(M,O);return v&&v.length>0&&S.push({name:"__name__",operator:i.D_.Equal,value:v}),{refId:T.refId,labelMatchers:S}}async getSeries(T,M){if(this.datasource.lookupsDisabled)return{};try{return T===u?await this.fetchDefaultSeries():await this.fetchSeriesLabels(T,M)}catch(O){return console.error(O),{}}}async getLabelValues(T){return await this.fetchLabelValues(T)}async fetchLabels(T){T&&(this.timeRange=T);const M="/api/v1/labels",O=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const S=await this.request(M,[],O,this.getDefaultCacheHeaders());return Array.isArray(S)&&(this.labelKeys=S.slice().sort()),[]}}function f(D,T){let M="";for(const O of T)if(typeof O=="string"){M=O;break}return M}},45889:(Q,I,e)=>{"use strict";e.d(I,{Cs:()=>x,DX:()=>y,P7:()=>E,P_:()=>h,Qn:()=>v,Rg:()=>u,VH:()=>K,Xd:()=>N,eN:()=>C,ky:()=>F,mv:()=>V,pt:()=>U,u3:()=>L});var t=e(2543),n=e.n(t),r=e(28848),s=e.n(r),o=e(73372),m=e(77678),i=e(85858),l=e(87324),d=e(32799),c=e(95842),g=e(69120);const u=z=>{const Y=new Set,H=new RegExp("_bucket($|:)");for(let k=0;k<z.length;k++){const ee=z[k];H.test(ee)&&Y.add(ee)}return[...Y]};function E(z,Y=!1){const H={};z.forEach(ee=>{const{__name__:ie,...fe}=ee;Y&&(H.__name__=H.__name__||new Set,H.__name__.has(ie)||H.__name__.add(ie)),Object.keys(fe).forEach(q=>{H[q]||(H[q]=new Set),H[q].has(fe[q])||H[q].add(fe[q])})});const k={};return T(Object.keys(H)).forEach(ee=>{k[ee]=T(Array.from(H[ee]))}),{values:k,keys:Object.keys(k)}}const p=/\{[^}]*?(\}|$)/,b=/\b(\w+)(!?=~?)("[^"\n]*?")(,)?(\s*)?/g;function a(z,Y=1){if(!z.match(p)){if(z.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${z}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+z)}const H=z.slice(0,Y),k=H.lastIndexOf("{"),ee=H.lastIndexOf("}");if(k===-1)throw new Error("Not inside selector, missing open brace: "+H);if(ee>-1&&ee>k)throw new Error("Not inside selector, previous selector already closed: "+H);const ie=z.slice(Y),q=ie.indexOf("}")+Y,Z=ie.indexOf("{"),J=Z+Y;if(q===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+ie);if(Z>-1&&J<q)throw new Error("Not inside selector, next selector opens before this one closed: "+ie);const G=z.slice(k,q),ne={};G.replace(b,(he,re,De,Fe)=>{const Ee=z.indexOf(he),Me=Ee+re.length+De.length+1,ze=Ee+re.length+De.length+Fe.length-1;return(Y<Me||Y>ze)&&(ne[re]={value:Fe,operator:De}),""});const oe=z.slice(0,k).match(/[A-Za-z:][\w:]*$/);oe&&(ne.__name__={value:`"${oe[0]}"`,operator:"="});const le=Object.keys(ne).sort(),Te=["{",le.map(he=>`${he}${ne[he].operator}${ne[he].value}`).join(","),"}"].join("");return{labelKeys:le,selector:Te}}function h(z,Y){const H=fe=>new RegExp(`(\\s|\\(|^)(${fe})(\\s|$|\\(|\\[|\\{)`,"ig"),k=Object.keys(Y).reduce((fe,q)=>{let Z=[],J=[],G=[];return fe.filter(Boolean).forEach((ne,te)=>{ne.match(H(q))&&(Z=ne.split(q),Z.length===2?(G.push(te),J.push(...[Z[0],q,Z[1]].filter(Boolean))):Z.length>2&&(G.push(te),Z=Z.map(le=>le===""?q:le),J.push(...Z)))}),G.forEach(ne=>fe[ne]=""),fe=fe.filter(Boolean),fe.push(...J),fe},[z]);let ee=!1;return k.map((fe,q)=>{if(ee)return ee=!1,"";if(Y[fe]){const Z=Y[fe];if(q+1!==k.length&&k[q+1].match(b)){ee=!0;const J=k[q+1],G=/(\)\{|\}\{|\]\{)/;return P(Z+J,G)}else return Z}return fe}).filter(Boolean).join("")}function P(z,Y){const H=z.match(Y);if(!H)return z;const k=H.index??0,ee=z.slice(0,k+1),ie=z.slice(k+1),fe=[];ie.replace(b,(G,ne,te,oe,le,ue)=>(fe.push({key:ne,operator:te,value:oe,comma:le,space:ue}),""));let q=ee;fe.filter(Boolean).forEach(G=>{const ne=G.value.slice(1,-1);q=(0,l.t)(q,G.key,ne,G.operator)});let Z=fe.reduce((G,ne)=>(G+=`${ne.key}${ne.operator}${ne.value}${ne.comma??""}${ne.space??""}`,G),"");Z="{"+Z+"}";const J=ie.replace(Z,"");return q+J}function y(z){if(!z)return z;const Y={},H={};for(const ee in z){const ie=z[ee][0];Y[ee]=ie,ie.type==="histogram"&&(H[`${ee}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${ie.help})`},H[`${ee}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${ie.help})`},H[`${ee}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${ie.help})`}),ie.type==="summary"&&(H[`${ee}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${ie.help})`},H[`${ee}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${ie.help})`})}const k={};return k.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...Y,...H,...k}}function C(z){return f(z/1e3)}function f(z){return Math.floor(z/60)}function D(z,Y=1){return Math.ceil(z/60)-Math.ceil(z/60)%Y}function T(z){return z.slice(0,d.OP)}function M(z){return z&&z.length>=SUGGESTIONS_LIMIT?`, limited to the first ${SUGGESTIONS_LIMIT} received items`:""}const O=/[*+?()|\\.\[\]{}^$]/g;function S(z){return z.replace(O,"\\$&")}function v(z){return z.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function x(z){return v(S(z))}const A={"=":o.D_.Equal,"!=":o.D_.NotEqual,"=~":o.D_.EqualRegEx,"!~":o.D_.NotEqualRegEx},R=(0,t.invert)(A);function B(z){const Y=z.labelMatchers.map(H=>{const k=R[H.operator];return k?`${H.name}${k}"${H.value}"`:""}).filter(H=>H!=="").join(", ");return Y?`{${Y}}`:""}function U(z){return{refId:z.refId,expr:B(z),range:!0}}function w(z){return typeof z.content=="string"?z.content:""}function K(z){const Y=[];for(const H of z)if(H instanceof r.Token&&H.type==="context-labels"){let k="",ee="",ie="";const fe=Array.isArray(H.content)?H.content:[H.content];for(let q of fe)if(typeof q=="string"){let Z;Z=q,(Z==="="||Z==="!="||Z==="=~"||Z==="!~")&&(ie=Z)}else if(q instanceof r.Token)switch(q.type){case"label-key":k=w(q);break;case"label-value":ee=w(q),ee=ee.substring(1,ee.length-1);const Z=A[ie];Z&&Y.push({name:k,operator:Z,value:ee});break}}return Y}function N(z,Y){if(z===g.fD.None)return{start:V(Y.from,!1).toString(),end:V(Y.to,!0).toString()};const H=V(Y.from,!1),k=(0,m.rs)(H,L(z)*60),ee=V(Y.to,!0),ie=D(ee,L(z))*60;if(k===ie){const Z=ie+L(z)*60;return{start:k.toString(),end:Z.toString()}}const fe=k.toString(),q=ie.toString();return{start:fe,end:q}}function L(z){switch(z){case g.fD.Medium:return 10;case g.fD.High:return 60;default:return 1}}function V(z,Y){return typeof z=="string"&&(z=i.parse(z,Y)),Math.ceil(z.valueOf()/1e3)}function F(z,Y){return Y===void 0&&(Y=c.o6),z.length=Math.min(z.length,Y),z}},69470:(Q,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>d});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],r=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],m=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],i=m.map(c=>c.label),d={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${m.map(c=>c.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},47891:(Q,I,e)=>{"use strict";e.d(I,{l:()=>C,z:()=>f});var t=e(69470),n=e(56823),r=e(25378),s=e(41598),o=e(65820);function m(){return[{id:o.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},{id:o.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:n.kf,addOperationHandler:n.iZ},{id:o.jN.Ln,name:"Ln",params:[],defaultParams:[],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},l(o.jN.Changes),l(o.jN.Rate,!0),l(o.jN.Irate),l(o.jN.Increase,!0),l(o.jN.Idelta),l(o.jN.Delta),i({id:o.jN.HoltWinters,params:[(0,n.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:g,changeTypeHandler:d}),i({id:o.jN.PredictLinear,params:[(0,n.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:g,changeTypeHandler:d}),i({id:o.jN.QuantileOverTime,params:[(0,n.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:n.Kl,addOperationHandler:g,changeTypeHandler:d}),...r.Iu,{id:o.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.Ag.BinaryOps,renderer:(T,M,O)=>O,addOperationHandler:u},i({id:o.jN.Abs}),i({id:o.jN.Absent}),i({id:o.jN.Acos,category:o.Ag.Trigonometric}),i({id:o.jN.Acosh,category:o.Ag.Trigonometric}),i({id:o.jN.Asin,category:o.Ag.Trigonometric}),i({id:o.jN.Asinh,category:o.Ag.Trigonometric}),i({id:o.jN.Atan,category:o.Ag.Trigonometric}),i({id:o.jN.Atanh,category:o.Ag.Trigonometric}),i({id:o.jN.Ceil}),i({id:o.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),i({id:o.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),i({id:o.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),i({id:o.jN.Cos,category:o.Ag.Trigonometric}),i({id:o.jN.Cosh,category:o.Ag.Trigonometric}),i({id:o.jN.DayOfMonth,category:o.Ag.Time}),i({id:o.jN.DayOfWeek,category:o.Ag.Time}),i({id:o.jN.DayOfYear,category:o.Ag.Time}),i({id:o.jN.DaysInMonth,category:o.Ag.Time}),i({id:o.jN.Deg}),l(o.jN.Deriv),i({id:o.jN.Exp}),i({id:o.jN.Floor}),i({id:o.jN.Group}),i({id:o.jN.Hour}),i({id:o.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:E,addOperationHandler:p}),i({id:o.jN.Log10}),i({id:o.jN.Log2}),i({id:o.jN.Minute}),i({id:o.jN.Month}),i({id:o.jN.Pi,renderer:T=>`${T.id}()`}),i({id:o.jN.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:n.jY}),i({id:o.jN.Rad}),l(o.jN.Resets),i({id:o.jN.Round,category:o.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),i({id:o.jN.Scalar}),i({id:o.jN.Sgn}),i({id:o.jN.Sin,category:o.Ag.Trigonometric}),i({id:o.jN.Sinh,category:o.Ag.Trigonometric}),i({id:o.jN.Sort}),i({id:o.jN.SortDesc}),i({id:o.jN.Sqrt}),i({id:o.jN.Stddev}),i({id:o.jN.Tan,category:o.Ag.Trigonometric}),i({id:o.jN.Tanh,category:o.Ag.Trigonometric}),i({id:o.jN.Time,renderer:T=>`${T.id}()`}),i({id:o.jN.Timestamp}),i({id:o.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:T=>`${T.id}(${T.params[0]})`}),i({id:o.jN.Year})]}function i(D){return{...D,id:D.id,name:D.name??(0,n.DQ)(D.id),params:D.params??[],defaultParams:D.defaultParams??[],category:D.category??o.Ag.Functions,renderer:D.renderer??(D.params?n.kf:n.jY),addOperationHandler:D.addOperationHandler??n.iZ}}function l(D,T=!1){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)(T)],defaultParams:[T?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:c,addOperationHandler:g,changeTypeHandler:d}}function d(D,T){return(D.params[0]==="$__rate_interval"&&T.defaultParams[0]!=="$__rate_interval"||D.params[0]==="$__interval"&&T.defaultParams[0]!=="$__interval")&&(D.params=T.defaultParams),D}function c(D,T,M){let O=(D.params??[])[0]??"5m";return`${T.id}(${M}[${O}])`}function g(D,T,M){const O={id:D.id,params:D.defaultParams};return T.operations.length>0&&M.getOperationDef(T.operations[0].id).addOperationHandler===g?{...T,operations:[O,...T.operations.slice(1)]}:{...T,operations:[O,...T.operations]}}function u(D,T){return{...T,binaryQueries:[...T.binaryQueries??[],{operator:"/",query:T}]}}function E(D,T,M){if(typeof D.params[1]!="string")throw"The separator must be a string";const O=`"${D.params[1]}"`;return`${D.id}(${M}, "${D.params[0]}", ${O}, "${D.params.slice(2).join(O)}")`}function p(D,T){const M={id:D.id,params:D.defaultParams};return{...T,operations:[...T.operations,M]}}function b(){return[...(0,n.G3)(o.jN.Sum),...(0,n.G3)(o.jN.Avg),...(0,n.G3)(o.jN.Min),...(0,n.G3)(o.jN.Max),...(0,n.G3)(o.jN.Count),...(0,n.jC)(o.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),a(o.jN.SumOverTime),a(o.jN.AvgOverTime),a(o.jN.MinOverTime),a(o.jN.MaxOverTime),a(o.jN.CountOverTime),a(o.jN.LastOverTime),a(o.jN.PresentOverTime),a(o.jN.AbsentOverTime),a(o.jN.StddevOverTime)]}function a(D){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:h,addOperationHandler:g}}function h(D,T,M){let O=(D.params??[])[0]??"$__interval";return`${T.id}(${M}[${O}])`}var P=e(83077);class y{constructor(T){this.categories=[],this.operationsRegistry=new P.O(T)}setOperationCategories(T){this.categories=T}getOperationsForCategory(T){return this.operationsRegistry.list().filter(M=>M.category===T&&!M.hideFromList)}getAlternativeOperations(T){return this.operationsRegistry.list().filter(M=>M.alternativesKey&&M.alternativesKey===T)}getCategories(){return this.categories}getOperationDef(T){return this.operationsRegistry.getIfExists(T)}renderOperations(T,M){for(const O of M){const S=this.operationsRegistry.getIfExists(O.id);if(!S)throw new Error(`Could not find operation ${O.id} in the registry`);T=S.renderer(O,S,T)}return T}renderBinaryQueries(T,M){if(M)for(const O of M)T=`${this.renderBinaryQuery(T,O)}`;return T}renderBinaryQuery(T,M){let O=T+` ${M.operator} `;return M.vectorMatches&&(O+=`${M.vectorMatchesType}(${M.vectorMatches}) `),O+this.renderQuery(M.query,!0)}renderLabels(T){if(T.length===0)return"";let M="{";for(const O of T)M!=="{"&&(M+=", "),M+=`${O.label}${O.op}"${O.value}"`;return M+"}"}renderQuery(T,M){let O=`${T.metric??""}${this.renderLabels(T.labels)}`;return O=this.renderOperations(O,T.operations),!M&&this.hasBinaryOp(T)&&T.binaryQueries?.length&&(O=`(${O})`),O=this.renderBinaryQueries(O,T.binaryQueries),M&&(this.hasBinaryOp(T)||T.binaryQueries?.length)&&(O=`(${O})`),O}hasBinaryOp(T){return T.operations.find(M=>this.getOperationDef(M.id)?.category===o.Ag.BinaryOps)!==void 0}}class C extends y{constructor(){super(()=>{const T=[...m(),...b()];for(const M of T){const O=t.AW.find(S=>S.insertText===M.id);O&&(M.documentation=O.documentation)}return T}),this.setOperationCategories([o.Ag.Aggregations,o.Ag.RangeFunctions,o.Ag.Functions,o.Ag.BinaryOps,o.Ag.Trigonometric,o.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const f=new C},25378:(Q,I,e)=>{"use strict";e.d(I,{AE:()=>s,C8:()=>r,Iu:()=>o});var t=e(56823),n=e(65820);const r=[{id:n.jN.Addition,name:"Add scalar",sign:"+"},{id:n.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.jN.Exponent,name:"Exponent",sign:"^"},{id:n.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=r.reduce((i,l)=>(i[l.sign]={id:l.id,comparison:l.comparison},i),{}),o=r.map(i=>{const l=[{name:"Value",type:"number"}],d=[2];return i.comparison&&(l.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),d.push(!1)),{id:i.id,name:i.name,params:l,defaultParams:d,alternativesKey:"binary scalar operations",category:n.Ag.BinaryOps,renderer:m(i.sign),addOperationHandler:t.iZ}});function m(i){return function(d,c,g){let u=d.params[0],E="";return d.params.length===2&&(E=d.params[1]?" bool":""),`${g} ${i}${E} ${u}`}}},41598:(Q,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(50877),r=e(88323),s=e(47891),o=e(56823);function m({onChange:l,index:d,operationId:c,value:g,query:u,datasource:E}){const[p,b]=(0,t.useState)({});return t.createElement(r.l6,{inputId:(0,o.OS)(c,d),autoFocus:g===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{b({isLoading:!0});const a=await i(u,E);b({options:a,isLoading:void 0})},isLoading:p.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:p.options,value:(0,n.z)(g),onChange:a=>l(d,a.value)})}async function i(l,d){let c=l.labels;d.type==="prometheus"&&(c=[{label:"__name__",op:"=",value:l.metric},...l.labels]);const g=s.z.renderLabels(c),u=await d.languageProvider.fetchLabelsWithMatch(g);return Object.keys(u).map(E=>({label:E,value:E}))}},95842:(Q,I,e)=>{"use strict";e.d(I,{dm:()=>ae,o6:()=>se});var t=e(32196),n=e(76459),r=e.n(n),s=e(96540),o=e(23257),m=e.n(o),i=e(50877),l=e(13544),d=e(97801),c=e(81580),g=e(32264),u=e(40845),E=e(55852),p=e(14578),b=e(88824),a=e(40276),h=e(88323),P=e(39268),y=e(14186),C=e(12681),f=e(45889),D=e(71440),T=e(37390),M=e(10354),O=e(62930),S=e(60782),v=e(19727),x=e(19384),A=e(15292),R=e(56034),B=e(14110),U=e(32799),w=e(13567);const{setFilteredMetricCount:K}=w.Ow.actions;async function N(Be,_e,Xe){let tt=!0;const at=Be.languageProvider.metricsMetadata;at&&Object.keys(at).length===0&&(tt=!1);let st={},dt={},ot;return ot=Xe?.map(ft=>{const yt=L(ft,Be),Tt=`${ft}\xA6${yt.description}`;return st[ft]=yt,dt[Tt]=yt,yt}),{isLoading:!1,hasMetadata:tt,metrics:ot??[],metaHaystackDictionary:dt,nameHaystackDictionary:st,totalMetricCount:ot?.length??0,filteredMetricCount:ot?.length??0}}function L(Be,_e){let Xe=(0,U.AU)(Be,_e.languageProvider.metricsMetadata);const tt=(0,U.pK)(Be,_e.languageProvider.metricsMetadata);return["histogram","summary"].forEach(st=>{tt?.toLowerCase().includes(st)&&Xe!==st&&(Xe+=` (${st})`)}),{value:Be,type:Xe,description:tt}}function V(Be,_e){const Xe=F(Be);return!Be.isLoading&&Be.filteredMetricCount!==Xe.length&&_e(K(Xe.length)),Y(Xe,Be.pageNum,Be.resultsPerPage)}function F(Be){let _e=Be.metrics;return Be.fuzzySearchQuery&&!Be.useBackend&&(Be.fullMetaSearch?_e=Be.metaHaystackOrder.map(Xe=>Be.metaHaystackDictionary[Xe]):_e=Be.nameHaystackOrder.map(Xe=>Be.nameHaystackDictionary[Xe])),Be.selectedTypes.length>0&&(_e=_e.filter((Xe,tt)=>Be.selectedTypes.some(st=>Xe.type&&st.value?Xe.type.includes(st.value):!Xe.type&&st.value==="no type"))),Be.includeNullMetadata||(_e=_e.filter(Xe=>Xe.type!==void 0&&Xe.description!==void 0)),_e}function z(Be){if(!Be.metrics.length)return[];const _e=Be.resultsPerPage===0?1:Be.resultsPerPage,Xe=Math.floor(F(Be).length/_e)+1;return[...Array(Xe).keys()].map(tt=>tt+1)}function Y(Be,_e,Xe){const tt=Xe===0?1:Xe,at=_e===1?0:(_e-1)*tt,st=at+tt;return Be.slice(at,st)}const H=(Be,_e,Xe)=>Be<1?1:Be>Xe?Xe:Be??_e;async function k(Be,_e,Xe){const tt=(0,D.b4)(Be),at=_e.map(ot=>`,${ot.label}="${ot.value}"`),st=`label_values({__name__=~".*${tt}"${_e?at.join():""}},__name__)`;return await Xe.metricFindQuery(st).then(ot=>ot.map(ft=>L(ft.text,Xe)))}function ee(Be,_e,Xe,tt){switch(Be){case"grafana_prom_metric_encycopedia_tracking":(0,B.rR)(Be,{metric:Xe,hasMetadata:_e?.hasMetadata,totalMetricCount:_e?.totalMetricCount,fuzzySearchQuery:_e?.fuzzySearchQuery,fullMetaSearch:_e?.fullMetaSearch,selectedTypes:_e?.selectedTypes,useRegexSearch:_e?.useBackend,includeResultsWithoutMetadata:_e?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,B.rR)(Be,{disableTextWrap:_e?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,B.rR)(Be,{query:tt})}}const ie=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],fe={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function q(Be){const{state:_e,onChangeFullMetaSearch:Xe,onChangeIncludeNullMetadata:tt,onChangeDisableTextWrap:at,onChangeUseBackend:st}=Be,dt=(0,u.$j)(),ot=Z(dt);return s.createElement(s.Fragment,null,s.createElement("div",{className:ot.selectItem},s.createElement(A.d,{"data-testid":Ne.searchWithMetadata,value:_e.fullMetaSearch,disabled:_e.useBackend||!_e.hasMetadata,onChange:()=>Xe()}),s.createElement("div",{className:ot.selectItemLabel},fe.metadataSearchSwitch)),s.createElement("div",{className:ot.selectItem},s.createElement(A.d,{value:_e.includeNullMetadata,disabled:!_e.hasMetadata,onChange:()=>tt()}),s.createElement("div",{className:ot.selectItemLabel},fe.includeNullMetadata)),s.createElement("div",{className:ot.selectItem},s.createElement(A.d,{value:_e.disableTextWrap,onChange:()=>at()}),s.createElement("div",{className:ot.selectItemLabel},"Disable text wrap")),s.createElement("div",{className:ot.selectItem},s.createElement(A.d,{"data-testid":Ne.setUseBackend,value:_e.useBackend,onChange:()=>st()}),s.createElement("div",{className:ot.selectItemLabel},fe.setUseBackend,"\xA0"),s.createElement(R.m,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},s.createElement(p.I,{name:"info-circle",size:"xs",className:ot.settingsIcon}))))}function Z(Be){return{settingsIcon:(0,t.css)`
      color: ${Be.colors.text.secondary};
    `,selectItem:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,t.css)`
      margin: 0 0 0 ${Be.spacing(1)};
      align-self: center;
      color: ${Be.colors.text.secondary};
      font-size: 12px;
    `}}var J=e(67061);function G({feedbackUrl:Be}){const _e=(0,u.of)(ne);return s.createElement(J.B,null,s.createElement("a",{href:Be,className:_e.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},s.createElement(p.I,{name:"comment-alt-message"})," Give feedback"))}function ne(Be){return{link:(0,t.css)({color:Be.colors.text.secondary,fontSize:Be.typography.bodySmall.fontSize,":hover":{color:Be.colors.text.link},margin:"-25px 0 30px 0"})}}var te=e(29121);function oe(Be){const{metrics:_e,onChange:Xe,onClose:tt,query:at,state:st,disableTextWrap:dt}=Be,ot=(0,u.$j)(),ft=le(ot,dt);function yt(Mt){Mt.value&&(Xe({...at,metric:Mt.value}),ee("grafana_prom_metric_encycopedia_tracking",st,Mt.value),tt())}function Tt(Mt){return st.fullMetaSearch&&Mt?s.createElement(s.Fragment,null,s.createElement("td",null,Gt(Mt.type??"")),s.createElement("td",null,s.createElement(m(),{textToHighlight:Mt.description??"",searchWords:st.metaHaystackMatches,autoEscape:!0,highlightClassName:ft.matchHighLight}))):s.createElement(s.Fragment,null,s.createElement("td",null,Gt(Mt.type??"")),s.createElement("td",null,Mt.description??""))}function Kt(Mt,Dn,lt){return s.createElement(s.Fragment,null,Mt,s.createElement("span",{className:ft.tooltipSpace},s.createElement(R.m,{content:s.createElement(s.Fragment,null,"When creating a ",Dn,", Prometheus exposes multiple series with the type counter."," ",(0,te.jW)(lt)),placement:"bottom-start",interactive:!0},s.createElement(p.I,{name:"info-circle",size:"xs"}))))}function Gt(Mt){return Mt?Mt.includes("(summary)")?Kt(Mt,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):Mt.includes("(histogram)")?Kt(Mt,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):Mt:""}function _t(){let Mt;return st.fuzzySearchQuery||(Mt="There are no metrics found in the data source."),at.labels.length>0&&(Mt="There are no metrics found. Try to expand your label filters."),(st.fuzzySearchQuery||st.selectedTypes.length>0)&&(Mt="There are no metrics found. Try to expand your search and filters."),s.createElement("tr",{className:ft.noResults},s.createElement("td",{colSpan:3},Mt))}function it(Mt){return Mt.useBackend?[Mt.fuzzySearchQuery]:Mt.fullMetaSearch?Mt.metaHaystackMatches:Mt.nameHaystackMatches}return s.createElement("table",{className:ft.table},s.createElement("thead",{className:ft.stickyHeader},s.createElement("tr",null,s.createElement("th",{className:`${ft.nameWidth} ${ft.tableHeaderPadding}`},"Name"),st.hasMetadata&&s.createElement(s.Fragment,null,s.createElement("th",{className:`${ft.typeWidth} ${ft.tableHeaderPadding}`},"Type"),s.createElement("th",{className:`${ft.descriptionWidth} ${ft.tableHeaderPadding}`},"Description")),s.createElement("th",{className:ft.selectButtonWidth}," "))),s.createElement("tbody",null,s.createElement(s.Fragment,null,_e.length>0&&_e.map((Mt,Dn)=>s.createElement("tr",{key:Mt?.value??Dn,className:ft.row},s.createElement("td",{className:ft.nameOverflow},s.createElement(m(),{textToHighlight:Mt?.value??"",searchWords:it(st),autoEscape:!0,highlightClassName:ft.matchHighLight})),st.hasMetadata&&Tt(Mt),s.createElement("td",null,s.createElement(E.$n,{size:"md",variant:"secondary",onClick:()=>yt(Mt),className:ft.centerButton},"Select")))),_e.length===0&&!st.isLoading&&_t())))}const le=(Be,_e)=>({table:(0,t.css)`
      ${_e?"":"table-layout: fixed;"}
      border-radius: ${Be.shape.radius.default};
      width: 100%;
      white-space: ${_e?"nowrap":"normal"};
      td {
        padding: ${Be.spacing(1)};
      }

      td,
      th {
        min-width: ${Be.spacing(3)};
        border-bottom: 1px solid ${Be.colors.border.weak};
      }
    `,row:(0,t.css)`
      label: row;
      border-bottom: 1px solid ${Be.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,t.css)`
      padding: 8px;
    `,matchHighLight:(0,t.css)`
      background: inherit;
      color: ${Be.components.textHighlight.text};
      background-color: ${Be.components.textHighlight.background};
    `,nameWidth:(0,t.css)`
      ${_e?"":"width: 37.5%;"}
    `,nameOverflow:(0,t.css)`
      ${_e?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,t.css)`
      ${_e?"":"width: 15%;"}
    `,descriptionWidth:(0,t.css)`
      ${_e?"":"width: 35%;"}
    `,selectButtonWidth:(0,t.css)`
      ${_e?"":"width: 12.5%;"}
    `,stickyHeader:(0,t.css)`
      position: sticky;
      top: 0;
      background-color: ${Be.colors.background.primary};
    `,noResults:(0,t.css)`
      text-align: center;
      color: ${Be.colors.text.secondary};
    `,tooltipSpace:(0,t.css)`
      margin-left: 4px;
    `,centerButton:(0,t.css)`
      display: block;
      margin: auto;
      border: none;
    `}),ue=(Be,_e)=>({modal:(0,t.css)`
      width: 85vw;
      ${Be.breakpoints.down("md")} {
        width: 100%;
      }
      ${Be.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,t.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,t.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${Be.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,t.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${Be.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,t.css)`
      margin-bottom: ${Be.spacing(1)};
    `,resultsAmount:(0,t.css)`
      color: ${Be.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,t.css)`
      margin: 4px 0 ${Be.spacing(2)} 0;
    `,resultsDataCount:(0,t.css)`
      margin: 0;
    `,resultsDataFiltered:(0,t.css)`
      color: ${Be.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,t.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,t.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,t.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,t.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,t.css)`
      visibility: hidden;
    `,visible:(0,t.css)`
      visibility: visible;
    `,settingsBtn:(0,t.css)`
      float: right;
    `,noBorder:(0,t.css)`
      border: none;
    `,resultsPerPageLabel:(0,t.css)`
      color: ${Be.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,t.css)`
      display: flex;
    `});var Te=e(53076),he=e(2543);const re=new Te.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function De(Be,_e,Xe){const[tt,at,st]=re.search(Be,_e,0,1e5);let dt=[],ot=new Set;if(tt&&st){const ft=(yt,Tt)=>{Tt&&ot.add(yt)};for(let yt=0;yt<st.length;yt++){let Tt=st[yt];Te.A.highlight(Be[at.idx[Tt]],at.ranges[Tt],ft),dt.push(Be[at.idx[Tt]])}Xe([dt,[...ot]])}else _e||Xe([[],[]])}const Fe=(0,he.debounce)(De,300),{setIsLoading:Ee,buildMetrics:Me,filterMetricsBackend:ze,setResultsPerPage:xe,setPageNum:We,setFuzzySearchQuery:be,setNameHaystack:pe,setMetaHaystack:Ue,setFullMetaSearch:we,setIncludeNullMetadata:je,setSelectedTypes:He,setUseBackend:rt,setDisableTextWrap:Je,showAdditionalSettings:Ve}=w.Ow.actions,Oe=Be=>{const{datasource:_e,isOpen:Xe,onClose:tt,onChange:at,query:st,initialMetrics:dt}=Be,[ot,ft]=(0,s.useReducer)(w.Ow.reducer,(0,w.ue)(st)),yt=(0,u.$j)(),Tt=ue(yt,ot.disableTextWrap),Kt=(0,s.useCallback)(async()=>{ft(Ee(!0));const Ct=await N(_e,st,dt);ft(Me({isLoading:!1,hasMetadata:Ct.hasMetadata,metrics:Ct.metrics,metaHaystackDictionary:Ct.metaHaystackDictionary,nameHaystackDictionary:Ct.nameHaystackDictionary,totalMetricCount:Ct.metrics.length,filteredMetricCount:Ct.metrics.length}))},[st,_e,dt]);(0,s.useEffect)(()=>{Kt()},[Kt]);const Gt=ie.map(Ct=>({value:Ct.value,label:Ct.value,description:Ct.description})),_t=(0,s.useMemo)(()=>r()(async Ct=>{ft(Ee(!0));const Vt=await k(Ct,st.labels,_e);ft(ze({metrics:Vt,filteredMetricCount:Vt.length,isLoading:!1}))},_e.getDebounceTimeInMilliseconds()),[_e,st]);function it(Ct){ft(pe(Ct))}function Mt(Ct){ft(Ue(Ct))}function Dn(Ct,Vt){ot.useBackend&&Ct===""?Kt():ot.useBackend?_t(Ct):Vt?Fe(Object.keys(ot.metaHaystackDictionary),Ct,Mt):Fe(Object.keys(ot.nameHaystackDictionary),Ct,it)}const lt=s.createElement(q,{state:ot,onChangeFullMetaSearch:()=>{const Ct=!ot.fullMetaSearch;ft(we(Ct)),at({...st,fullMetaSearch:Ct}),Dn(ot.fuzzySearchQuery,Ct)},onChangeIncludeNullMetadata:()=>{ft(je(!ot.includeNullMetadata)),at({...st,includeNullMetadata:!ot.includeNullMetadata})},onChangeDisableTextWrap:()=>{ft(Je()),at({...st,disableTextWrap:!ot.disableTextWrap}),ee("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",ot,"")},onChangeUseBackend:()=>{const Ct=!ot.useBackend;ft(rt(Ct)),at({...st,useBackend:Ct}),Ct===!1?Kt():ot.fuzzySearchQuery!==""&&_t(ot.fuzzySearchQuery)}});return s.createElement(T.a,{"data-testid":Ne.metricModal,isOpen:Xe,title:"Metrics explorer",onDismiss:tt,"aria-label":"Browse metrics",className:Tt.modal},s.createElement(G,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),s.createElement("div",{className:Tt.inputWrapper,"data-testid":l.Tp.components.DataSource.Prometheus.queryEditor.builder.metricsExplorer},s.createElement("div",{className:(0,t.cx)(Tt.inputItem,Tt.inputItemFirst)},s.createElement(M.p,{autoFocus:!0,"data-testid":Ne.searchMetric,placeholder:fe.browse,value:ot.fuzzySearchQuery,onInput:Ct=>{const Vt=Ct.currentTarget.value??"";ft(be(Vt)),Dn(Vt,ot.fullMetaSearch)}})),ot.hasMetadata&&s.createElement("div",{className:Tt.inputItem},s.createElement(h.KF,{"data-testid":Ne.selectType,inputId:"my-select",options:Gt,value:ot.selectedTypes,placeholder:fe.type,onChange:Ct=>ft(He(Ct))})),s.createElement("div",null,s.createElement(O.y,{className:`${Tt.loadingSpinner} ${ot.isLoading?Tt.visible:""}`})),s.createElement("div",{className:Tt.inputItem},s.createElement(S.G,{"aria-label":"Additional settings",content:lt,placement:"bottom-end",closeButton:!1},s.createElement(v.e,{className:Tt.settingsBtn},s.createElement(E.$n,{variant:"secondary",size:"md",onClick:()=>ft(Ve()),"data-testid":Ne.showAdditionalSettings,className:Tt.noBorder},"Additional Settings"),s.createElement(E.$n,{className:Tt.noBorder,variant:"secondary",icon:ot.showAdditionalSettings?"angle-up":"angle-down"}))))),s.createElement("div",{className:Tt.resultsData},st.metric&&s.createElement("i",{className:Tt.currentlySelected},"Currently selected: ",st.metric),st.labels.length>0&&s.createElement("div",{className:Tt.resultsDataFiltered},s.createElement(p.I,{name:"info-circle",size:"sm"}),s.createElement("div",{className:Tt.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),s.createElement("div",{className:Tt.results},ot.metrics&&s.createElement(oe,{metrics:V(ot,ft),onChange:at,onClose:tt,query:st,state:ot,disableTextWrap:ot.disableTextWrap})),s.createElement("div",{className:Tt.resultsFooter},s.createElement("div",{className:Tt.resultsAmount},"Showing ",ot.filteredMetricCount," of ",ot.totalMetricCount," results"),s.createElement(x.d,{currentPage:ot.pageNum??1,numberOfPages:z(ot).length,onNavigate:Ct=>{ft(We(Ct??1))}}),s.createElement("div",{className:Tt.resultsPerPageWrapper},s.createElement("p",{className:Tt.resultsPerPageLabel},"# Results per page\xA0"),s.createElement(M.p,{"data-testid":Ne.resultsPerPage,value:H(ot.resultsPerPage,w.J3,w.yH),placeholder:"results per page",width:10,title:"The maximum results per page is "+w.yH,type:"number",onInput:Ct=>{const Vt=+Ct.currentTarget.value;isNaN(Vt)||Vt>=w.yH||ft(xe(Vt))}}))))},Ne={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},ye=" ",se=1e3;function ae({datasource:Be,query:_e,onChange:Xe,onGetMetrics:tt,labelsFilters:at,metricLookupDisabled:st,onBlur:dt,variableEditor:ot}){const ft=(0,u.of)(ge),[yt,Tt]=(0,s.useState)({}),Kt=g.$.featureToggles.prometheusMetricEncyclopedia,Gt=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],_t=(0,s.useCallback)((en,Jt)=>{const hn=en.label??en.value;return hn?hn.toLowerCase?Jt.split(ye).reduce((Kn,na)=>{const Ut=hn.toLowerCase().includes(na.toLowerCase());let on=!1;return Kt&&(on=hn==="Metrics explorer"),Kn&&(Ut||on)},!0):!0:!1},[Kt]),it=(0,s.useCallback)((en,Jt)=>en.__isNew__?en.label:s.createElement(m(),{searchWords:Jt.inputValue.split(ye),textToHighlight:en.label??"",highlightClassName:ft.highlight}),[ft.highlight]),Mt=(en,Jt)=>{const hn=(0,D.b4)(en);return Pe(hn,Jt)},Dn=en=>Be.metricFindQuery(Mt(en,at)).then(hn=>{const Fn=hn.length;(0,f.ky)(hn),Fn>hn.length?Tt({...yt,resultsTruncated:!0}):Tt({...yt,resultsTruncated:!1});const Kn=hn.map(na=>({label:na.text,value:na.text}));return Kt?[...Gt,...Kn]:Kn}),lt=()=>Promise.resolve([]),Ct=r()(en=>Dn(en),Be.getDebounceTimeInMilliseconds()),Vt=en=>{const Jt=en.data;if(Jt.value==="BrowseMetrics"){const hn=en.isFocused?ft.focus:"";return s.createElement("div",{...en.innerProps,ref:en.innerRef,className:`${ft.customOptionWidth} metric-encyclopedia-open`,"aria-label":"Select option",onKeyDown:Fn=>{Fn.code==="Enter"&&Tt({...yt,metricsModalOpen:!0})}},s.createElement("div",{className:`${ft.customOption} ${hn} metric-encyclopedia-open`},s.createElement("div",null,s.createElement("div",{className:"metric-encyclopedia-open"},Jt.label),s.createElement("div",{className:`${ft.customOptionDesc} metric-encyclopedia-open`},Jt.description)),s.createElement(E.$n,{fill:"text",size:"sm",variant:"secondary",onClick:()=>Tt({...yt,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",s.createElement(p.I,{name:"arrow-right"}))))}return(0,C.o5)(en)},qt=({children:en,maxHeight:Jt,innerRef:hn,innerProps:Fn})=>{const Kn=(0,u.$j)(),na=(0,b.J)(Kn),Ut=!s.isValidElement(en)&&yt.resultsTruncated;return s.createElement("div",{...Fn,className:`${na.menu} ${ft.customMenuContainer}`,style:{maxHeight:Jt},"aria-label":"Select options menu"},s.createElement(a.E,{scrollRefCallback:hn,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},en),Ut&&s.createElement("div",{className:ft.customMenuFooter},s.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},rn=()=>s.createElement(h.DW,{"data-testid":l.Tp.components.DataSource.Prometheus.queryEditor.builder.metricSelect,isClearable:!!ot,inputId:"prometheus-metric-select",className:ft.select,value:_e.metric?(0,i.z)(_e.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:it,filterOption:_t,onOpenMenu:async()=>{if(st)return;Tt({isLoading:!0});const en=await tt(),Jt=en.map(Fn=>Fn.value),hn=en.length;en.length>se&&(0,f.ky)(en),Tt(Kt?{metrics:[...Gt,...en],isLoading:void 0,initialMetrics:Jt,resultsTruncated:hn>en.length}:{metrics:en,isLoading:void 0,resultsTruncated:hn>en.length})},loadOptions:st?lt:Ct,isLoading:yt.isLoading,defaultOptions:yt.metrics,onChange:en=>{const Jt=en?.value;Jt?Kt&&Jt==="BrowseMetrics"?(ee("grafana_prometheus_metric_encyclopedia_open",null,"",_e),Tt({...yt,metricsModalOpen:!0})):Xe({..._e,metric:Jt}):Xe({..._e,metric:""})},components:Kt?{Option:Vt,MenuList:qt}:{MenuList:qt},onBlur:dt||(()=>{})});return s.createElement(s.Fragment,null,Kt&&!Be.lookupsDisabled&&yt.metricsModalOpen&&s.createElement(Oe,{datasource:Be,isOpen:yt.metricsModalOpen,onClose:()=>Tt({...yt,metricsModalOpen:!1}),query:_e,onChange:Xe,initialMetrics:yt.initialMetrics??[]}),ot?s.createElement(P.C,null,s.createElement(y.I,{label:"Metric",labelWidth:20,tooltip:s.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},rn())):s.createElement(d.B,null,s.createElement(c.c,{label:"Metric"},rn())))}const ge=Be=>({select:(0,t.css)`
    min-width: 125px;
  `,highlight:(0,t.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${Be.colors.warning.contrastText};
    background-color: ${Be.colors.warning.main};
  `,customOption:(0,t.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${Be.colors.emphasize(Be.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,t.css)`
    color: ${Be.colors.text.primary};
  `,customOptionDesc:(0,t.css)`
    color: ${Be.colors.text.secondary};
    font-size: ${Be.typography.size.xs};
    opacity: 50%;
  `,focus:(0,t.css)`
    background-color: ${Be.colors.emphasize(Be.colors.background.primary,.1)};
  `,customOptionWidth:(0,t.css)`
    min-width: 400px;
  `,customMenuFooter:(0,t.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${Be.spacing(1.5)};
    border-top: 1px solid ${Be.colors.border.weak};
    color: ${Be.colors.text.secondary};
  `,customMenuContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    background: ${Be.colors.background.primary};
    box-shadow: ${Be.shadows.z3};
  `}),Pe=(Be,_e)=>{const Xe=_e?Re(_e):[];return`label_values({__name__=~".*${Be}"${Xe?Xe.join(""):""}},__name__)`},Re=Be=>Be.map(_e=>`,${_e.label}="${_e.value}"`)},46777:(Q,I,e)=>{"use strict";e.d(I,{I:()=>O});var t=e(96540),n=e(32799),r=e(45889),s=e(47891),o=e(71440),m=e(32196),i=e(2543),l=e(7650),d=e(97801),c=e(81580),g=e(39268),u=e(76892),E=e(76459),p=e.n(E),b=e(50877),a=e(13544),h=e(81392),P=e(3721),y=e(88323);function C({item:v,defaultOp:x,onChange:A,onDelete:R,onGetLabelNames:B,onGetLabelValues:U,invalidLabel:w,invalidValue:K,getLabelValuesAutofillSuggestions:N,debounceDuration:L}){const[V,F]=(0,t.useState)({}),[z,Y]=(0,t.useState)(!1),[H,k]=(0,t.useState)(!1),ee=(Z=v.op)=>f.find(J=>J.label===Z)?.isMultiValue,ie=Z=>{if(Z){const J=/\(([^)]+)\)/,G=Z?.match(J);return G&&G[0].indexOf("|")>0?[Z]:Z.indexOf("|")>0?Z.split("|"):[Z]}return[]},fe=p()(Z=>N(Z,v.label),L),q=v?.value??"";return t.createElement("div",{key:q,"data-testid":"prometheus-dimensions-filter-item"},t.createElement(h.M,null,t.createElement(y.l6,{placeholder:"Select label","data-testid":a.Tp.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:v.label?(0,b.z)(v.label):null,allowCustomValue:!0,onOpenMenu:async()=>{F({isLoadingLabelNames:!0});const Z=await B(v);Y(!0),F({labelNames:Z,isLoadingLabelNames:void 0})},onCloseMenu:()=>{Y(!1)},isOpen:z,isLoading:V.isLoadingLabelNames??!1,options:V.labelNames,onChange:Z=>{Z.label&&A({...v,op:v.op??x,label:Z.label})},invalid:w}),t.createElement(y.l6,{"data-testid":a.Tp.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,b.z)(v.op??x),options:f,width:"auto",onChange:Z=>{Z.value!=null&&A({...v,op:Z.value,value:ee(Z.value)?v.value:ie(v?.value)[0]})}}),t.createElement(y.DW,{placeholder:"Select value","data-testid":a.Tp.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:ee()?ie(q).map(b.z):ie(q).map(b.z)[0],allowCustomValue:!0,onOpenMenu:async()=>{F({isLoadingLabelValues:!0});const Z=await U(v);(0,r.ky)(Z),k(!0),F({...V,labelValues:Z,isLoadingLabelValues:void 0})},onCloseMenu:()=>{k(!1)},isOpen:H,defaultOptions:V.labelValues,isMulti:ee(),isLoading:V.isLoadingLabelValues,loadOptions:fe,onChange:Z=>{if(Z.value)A({...v,value:Z.value,op:v.op??x});else{const J=Z.map(G=>G.label).join("|");A({...v,value:J,op:v.op??x})}},invalid:K}),t.createElement(P.Z,{"aria-label":`remove-${v.label}`,icon:"times",variant:"secondary",onClick:R})))}const f=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],D="Select at least 1 label filter (label and value)";function T({labelsFilters:v,onChange:x,onGetLabelNames:A,onGetLabelValues:R,labelFilterRequired:B,getLabelValuesAutofillSuggestions:U,debounceDuration:w,variableEditor:K}){const N="=",[L,V]=(0,t.useState)([{op:N}]);(0,t.useEffect)(()=>{v.length>0?V(v):V([{op:N}])},[v]);const F=H=>{V(H);const k=H.filter(ee=>ee.label!=null&&ee.value!=null);(0,i.isEqual)(k,v)||x(k)},z=L.some(H=>H.label&&H.value),Y=()=>t.createElement(l.o,{items:L,onChange:F,renderItem:(H,k,ee)=>t.createElement(C,{debounceDuration:w,item:H,defaultOp:N,onChange:k,onDelete:ee,onGetLabelNames:A,onGetLabelValues:R,invalidLabel:B&&!H.label,invalidValue:B&&!H.value,getLabelValuesAutofillSuggestions:U})});return t.createElement(t.Fragment,null,K?t.createElement(g.C,null,t.createElement("div",{className:(0,m.cx)((0,m.css)`
              display: flex;
            `)},t.createElement(u.c,{width:20,tooltip:t.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),Y())):t.createElement(d.B,null,t.createElement(c.c,{label:"Label filters",error:D,invalid:B&&!z},Y())))}var M=e(95842);function O({datasource:v,query:x,onChange:A,onBlur:R,variableEditor:B}){const U=Y=>{A({...x,labels:Y})},w=(0,t.useCallback)(async Y=>{const H=v.getVariables(),k=await Y;return[...H.map(ee=>({label:ee,value:ee})),...k.map(ee=>({label:ee.value,value:ee.value,title:ee.description}))]},[v]),K=async Y=>{if(!x.metric)return await v.languageProvider.fetchLabels(),v.languageProvider.getLabelKeys().map(ie=>({value:ie}));const H=x.labels.filter(ie=>ie!==Y);H.push({label:"__name__",op:"=",value:x.metric});const k=s.z.renderLabels(H);let ee=await v.languageProvider.fetchLabelsWithMatch(k);return Object.keys(ee).filter(ie=>!H.find(fe=>fe.label===ie)).map(ie=>({value:ie}))},N=(Y,H)=>{const k={label:H??"__name__",op:"=~",value:(0,o.b4)(`.*${Y}`)},ee=x.labels.filter(Z=>Z.label!==k.label);ee.push(k),x.metric&&ee.push({label:"__name__",op:"=",value:x.metric});const ie=ee.map(Z=>({...Z,label:v.interpolateString(Z.label),value:v.interpolateString(Z.value)})),fe=s.z.renderLabels(ie);let q;return v.hasLabelsMatchAPISupport()?q=V(k,fe):q=L(k,fe),q.then(Z=>((0,r.ky)(Z),Z))},L=(Y,H)=>{if(!Y.label)return Promise.resolve([]);const k=v.languageProvider.fetchSeries(H),ee=v.interpolateString(Y.label);return k.then(ie=>{const fe=new Set;return ie.forEach(q=>{const Z=q[ee];fe.add(Z)}),Array.from(fe).map(q=>({label:q,value:q}))})},V=(Y,H)=>Y.label?v.languageProvider.fetchSeriesValuesWithMatch(Y.label,H).then(k=>k.map(ee=>({value:ee,label:ee}))):Promise.resolve([]),F=async Y=>{if(!Y.label)return[];if(!x.metric)return(await v.languageProvider.getLabelValues(Y.label)).map(ie=>({value:ie}));const H=x.labels.filter(ie=>ie!==Y);H.push({label:"__name__",op:"=",value:x.metric});const k=H.map(ie=>({...ie,label:v.interpolateString(ie.label),value:v.interpolateString(ie.value)})),ee=s.z.renderLabels(k);return v.hasLabelsMatchAPISupport()?V(Y,ee):L(Y,ee)},z=(0,t.useCallback)(()=>w(S(v,x)),[v,x,w]);return t.createElement(t.Fragment,null,t.createElement(M.dm,{query:x,onChange:A,onGetMetrics:z,datasource:v,labelsFilters:x.labels,metricLookupDisabled:v.lookupsDisabled,onBlur:R||(()=>{}),variableEditor:B}),t.createElement(T,{debounceDuration:v.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:N,labelsFilters:x.labels,onChange:U,onGetLabelNames:Y=>w(K(Y)),onGetLabelValues:Y=>w(F(Y)),variableEditor:B}))}async function S(v,x){v.languageProvider.metricsMetadata||await v.languageProvider.loadMetricsMetadata(),v.languageProvider.metricsMetadata||(v.languageProvider.metricsMetadata={});let A;if(x.labels.length>0){const R=s.z.renderLabels(x.labels);A=(await v.languageProvider.getSeries(R,!0)).__name__??[]}else A=await v.languageProvider.getLabelValues("__name__")??[];return A.map(R=>({value:R,description:(0,n.xB)(R,v.languageProvider.metricsMetadata)}))}},52005:(Q,I,e)=>{"use strict";e.d(I,{W:()=>d,i:()=>c});var t=e(96540),n=e(67061),r=e(69470),s=e(47891),o=e(65405),m=e(30683),i=e(55698),l=e(44339);const d="Fetch all series matching metric name and label filters.",c=t.memo(({query:g})=>{const u=(0,o.u)(g||"").query,E={grammar:r.Ay,name:"promql"};return t.createElement(n.B,{gap:.5,direction:"column"},t.createElement(m.r,{stepNumber:1,title:t.createElement(l.Z,{query:`${u.metric} ${s.z.renderLabels(u.labels)}`,lang:E})},d),t.createElement(i.k,{stepNumber:2,queryModeller:s.z,query:u,lang:E}))});c.displayName="PromQueryBuilderExplained"},63492:(Q,I,e)=>{"use strict";e.d(I,{$:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(60042),m=e(52005);function i(d){const{query:c,datasource:g,range:u,onRunQuery:E,onChange:p,data:b,app:a,showExplain:h}=d,P=(0,s.of)(l);return n.createElement("div",{"data-testid":r.Tp.components.DataSource.Prometheus.queryEditor.code.queryField,className:P.wrapper},n.createElement(o.A,{datasource:g,query:c,range:u,onRunQuery:E,onChange:p,history:[],data:b,app:a}),h&&n.createElement(m.i,{query:c.expr}))}const l=d=>({wrapper:(0,t.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},13567:(Q,I,e)=>{"use strict";e.d(I,{J3:()=>n,Ow:()=>s,mt:()=>m,ue:()=>o,yH:()=>r});var t=e(30038);const n=100,r=1e3,s=(0,t.Z0)({name:"metrics-modal-state",initialState:o(),reducers:{filterMetricsBackend:(i,l)=>{i.metrics=l.payload.metrics,i.filteredMetricCount=l.payload.filteredMetricCount,i.isLoading=l.payload.isLoading},buildMetrics:(i,l)=>{i.isLoading=l.payload.isLoading,i.metrics=l.payload.metrics,i.hasMetadata=l.payload.hasMetadata,i.metaHaystackDictionary=l.payload.metaHaystackDictionary,i.nameHaystackDictionary=l.payload.nameHaystackDictionary,i.totalMetricCount=l.payload.totalMetricCount,i.filteredMetricCount=l.payload.filteredMetricCount},setIsLoading:(i,l)=>{i.isLoading=l.payload},setFilteredMetricCount:(i,l)=>{i.filteredMetricCount=l.payload},setResultsPerPage:(i,l)=>{i.resultsPerPage=l.payload},setPageNum:(i,l)=>{i.pageNum=l.payload},setFuzzySearchQuery:(i,l)=>{i.fuzzySearchQuery=l.payload,i.pageNum=1},setNameHaystack:(i,l)=>{i.nameHaystackOrder=l.payload[0],i.nameHaystackMatches=l.payload[1]},setMetaHaystack:(i,l)=>{i.metaHaystackOrder=l.payload[0],i.metaHaystackMatches=l.payload[1]},setFullMetaSearch:(i,l)=>{i.fullMetaSearch=l.payload,i.pageNum=1},setIncludeNullMetadata:(i,l)=>{i.includeNullMetadata=l.payload,i.pageNum=1},setSelectedTypes:(i,l)=>{i.selectedTypes=l.payload,i.pageNum=1},setUseBackend:(i,l)=>{i.useBackend=l.payload,i.fullMetaSearch=!1,i.pageNum=1},setDisableTextWrap:i=>{i.disableTextWrap=!i.disableTextWrap},showAdditionalSettings:i=>{i.showAdditionalSettings=!i.showAdditionalSettings}}});function o(i){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:n,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:i?.fullMetaSearch??!1,includeNullMetadata:i?.includeNullMetadata??!0,selectedTypes:[],useBackend:i?.useBackend??!1,disableTextWrap:i?.disableTextWrap??!1,showAdditionalSettings:!1}}function m(i){return{useBackend:i?.useBackend??!1,disableTextWrap:i?.disableTextWrap??!1,fullMetaSearch:i?.fullMetaSearch??!1,includeNullMetadata:i.includeNullMetadata??!1}}},56823:(Q,I,e)=>{"use strict";e.d(I,{DQ:()=>p,G3:()=>h,Kl:()=>g,OS:()=>b,iZ:()=>E,jC:()=>P,jY:()=>i,kf:()=>l,nU:()=>c,z2:()=>a});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(41598),m=e(65820);function i(S,v,x){const A=u(S,v,x),R=S.id+"(";return x&&A.push(x),R+A.join(", ")+")"}function l(S,v,x){const A=u(S,v,x),R=S.id+"(";return x&&A.unshift(x),R+A.join(", ")+")"}function d(S,v,x,A){if(v.params.length<2)throw`Cannot render a function with params of length [${v.params.length}]`;let R=(S.params??[])[0]??"5m";const B=u({...S,params:S.params.slice(1)},{...v,params:v.params.slice(1),defaultParams:v.defaultParams.slice(1)},x),U=S.id+"(";return x&&(A?B.push(`${x}[${R}]`):B.unshift(`${x}[${R}]`)),U+B.join(", ")+")"}function c(S,v,x){return d(S,v,x,!1)}function g(S,v,x){return d(S,v,x,!0)}function u(S,v,x){return(S.params??[]).map((A,R)=>v.params[R].type==="string"?'"'+A+'"':A)}function E(S,v){const x={id:S.id,params:S.defaultParams};return{...v,operations:[...v.operations,x]}}function p(S){return(0,t.capitalize)(S.replace(/_/g," "))}function b(S,v){return`operations.${S}.param.${v}`}function a(S=!1){const v={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return S&&v.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),v}function h(S,v={}){return[{id:S,name:p(S),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:m.Ag.Aggregations,renderer:i,paramChangedHandler:M(`__${S}_by`),explainHandler:f(S,""),addOperationHandler:E,...v},{id:`__${S}_by`,name:`${p(S)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:y(S),paramChangedHandler:T(S),explainHandler:f(S,"by"),addOperationHandler:E,hideFromList:!0,...v},{id:`__${S}_without`,name:`${p(S)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:C(S),paramChangedHandler:T(S),explainHandler:f(S,"without"),addOperationHandler:E,hideFromList:!0,...v}]}function P(S,v,x={}){const A=h(S,x);return A[0].params.unshift(...v.params),A[1].params.unshift(...v.params),A[2].params.unshift(...v.params),A[0].defaultParams=v.defaultParams,A[1].defaultParams=[...v.defaultParams,""],A[2].defaultParams=[...v.defaultParams,""],A[1].renderer=D(S),A[2].renderer=D(S),A}function y(S){return function(x,A,R){return`${S} by(${x.params.join(", ")}) (${R})`}}function C(S){return function(x,A,R){return`${S} without(${x.params.join(", ")}) (${R})`}}function f(S,v){return function(A){const R=A.params.map(U=>`\`${U}\``).join(" and "),B=s()("label",A.params.length);switch(v){case"by":return`Calculates ${S} over dimensions while preserving ${B} ${R}.`;case"without":return`Calculates ${S} over the dimensions ${R}. All other labels are preserved.`;default:return`Calculates ${S} over the dimensions.`}}}function D(S){return function(x,A,R){const B=A.params.findIndex(K=>K.restParam),U=x.params.slice(0,B),w=x.params.slice(B);return`${S} by(${w.join(", ")}) (${U.map((K,N)=>A.params[N].type==="string"?`"${K}"`:K).join(", ")}, ${R})`}}function T(S){return function(x,A,R){return A.params.length<R.params.length?{...A,id:S}:A}}function M(S){return function(x,A,R){return A.params.length===R.params.length?{...A,id:S}:A}}function O(S,v){if(!S.label||!S.op||!S.value||v.length<2)return!1;const x=S.op.toString().startsWith("!");return v.filter(B=>B.label===S.label&&B.value===S.value&&B.op!==S.op).some(B=>!!(x&&B?.op?.toString().startsWith("!")===!1||x===!1&&B?.op?.toString().startsWith("!")))}},65405:(Q,I,e)=>{"use strict";e.d(I,{u:()=>s});var t=e(21489),n=e(25378),r=e(71440);function s(a){const h=(0,r.qk)(a),y=t.K3.parse(h).topNode,f={query:{metric:"",labels:[],operations:[]},errors:[]};try{m(h,y,f)}catch(D){console.error(D),D instanceof Error&&f.errors.push({text:D.message})}return b(f.query)&&(f.errors=[]),o(a)&&(f.errors=[]),f}function o(a){const h={query:{metric:"",labels:[],operations:[]},errors:[]};a=a.replace(/\$__interval/g,"1s"),a=a.replace(/\$__interval_ms/g,"1000"),a=a.replace(/\$__rate_interval/g,"1s"),a=a.replace(/\$__range_ms/g,"1000"),a=a.replace(/\$__range_s/g,"1"),a=a.replace(/\$__range/g,"1s");const y=t.K3.parse(a).topNode;try{m(a,y,h)}catch{return!1}return h.errors.length===0}function m(a,h,P){const y=P.query;switch(h.type.id){case t.iP:{y.metric=(0,r.AA)(a,h);break}case t.BG:{y.labels.push(l(a,h));const C=h.getChild(r.Ql);C&&P.errors.push((0,r.xz)(a,C));break}case t.R6:{c(a,h,P);break}case t.Fn:{g(a,h,P);break}case t.df:{E(a,h,P);break}case r.Ql:{if(i(h))break;P.errors.push((0,r.xz)(a,h));break}default:{h.type.id===t.ek&&P.errors.push((0,r.xz)(a,h));let C=h.firstChild;for(;C;)m(a,C,P),C=C.nextSibling}}}function i(a){return a.prevSibling?.type.id===t.GN&&a.prevSibling?.firstChild?.type.id===t.Fb}function l(a,h){const P=(0,r.AA)(a,h.getChild(t.IC)),y=(0,r.AA)(a,h.getChild(t.Lf)),C=(0,r.AA)(a,h.getChild(t.LW)).replace(/"/g,"");return{label:P,op:y,value:C}}const d=["changes","rate","irate","increase","delta"];function c(a,h,P){const y=P.query,C=h.getChild(t.m3),f=(0,r.AA)(a,C),T=h.getChild(t.Dh).getChild(t.qI),M=[];let O="";if(d.includes(f)||f.endsWith("_over_time")){let v=(0,r.AA)(a,h).match(/\[(.+)\]/);v?.[1]&&(O=v[1],M.push(v[1]))}const S={id:f,params:M};if(y.operations.unshift(S),T){if((0,r.AA)(a,T)===O+"]")return;u(a,T,P,S)}}function g(a,h,P){const y=P.query,C=h.getChild(t.xb);let f=(0,r.AA)(a,C);const D=h.getChild(t.hI),T=[];D&&(D.getChild("By")&&f&&(f=`__${f}_by`),D.getChild(t.xB)&&(f=`__${f}_without`),T.push(...(0,r.R1)(a,D,t._p)));const O=h.getChild(t.Dh).getChild(t.qI),v=O?.getChild(t.GN)?.getChild(t.df);v&&P.errors.push({text:"Query parsing is ambiguous.",from:v.from,to:v.to});const x={id:f,params:[]};y.operations.unshift(x),u(a,O,P,x),x.params.push(...T)}function u(a,h,P,y){if(h)switch(h.type.id){case t.GN:case t.qI:{let C=h.firstChild;for(;C;){const D=C.getChild(t.GN)?.getChild(t.df);D&&P.errors.push({text:"Query parsing is ambiguous.",from:D.from,to:D.to}),u(a,C,P,y),C=C.nextSibling}break}case t.Po:{y.params.push(parseFloat((0,r.AA)(a,h)));break}case t.LW:{y.params.push((0,r.AA)(a,h).replace(/"/g,""));break}default:m(a,h,P)}}function E(a,h,P){const y=P.query,C=h.firstChild,f=(0,r.AA)(a,C.nextSibling),D=p(a,h.getChild(t.Wy)),T=h.lastChild,M=n.AE[f],O=C.getChild(t.Po),S=T.getChild(t.Po),v=T.getChild(t.df);if(O||m(a,C,P),S)y.operations.push((0,r.rq)(M,a,T,!!D?.isBool));else if(v){const x=(0,r.z9)(T);x?.type.id===t.Po&&y.operations.push((0,r.rq)(M,a,x,!!D?.isBool)),m(a,T,P)}else{y.binaryQueries=y.binaryQueries||[];const x={operator:f,query:{metric:"",labels:[],operations:[]}};D?.isMatcher&&(x.vectorMatchesType=D.matchType,x.vectorMatches=D.matches),y.binaryQueries.push(x),m(a,T,{query:x.query,errors:P.errors})}}function p(a,h){if(h){if(h.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const P=h.getChild(t.UX);return P?{isMatcher:!0,isBool:!1,matches:(0,r.AA)(a,P.getChild(t.x$)?.getChild(t.qJ)),matchType:P.getChild(t.On)?"on":"ignoring"}:void 0}}}function b(a){return a.labels.length===0&&a.operations.length===0&&!a.metric}},71440:(Q,I,e)=>{"use strict";e.d(I,{AA:()=>l,Ql:()=>t,R1:()=>c,b4:()=>g,qk:()=>o,rq:()=>d,xz:()=>r,z9:()=>n});const t=0;function n(u){return u.firstChild?n(u.firstChild):u}function r(u,E){return{text:l(u,E),from:E.from,to:E.to,parentType:E.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(u){return u.replace(s,(E,p,b,a,h,P,y)=>{const C=a||y;let f=p,D="0";return b&&(f=b,D="1"),h&&(f=h,D="2"),`__V_${D}__`+f+"__V__"+(C?"__F__"+C+"__F__":"")})}const m=[(u,E)=>`$${u}`,(u,E)=>`[[${u}${E?`:${E}`:""}]]`,(u,E)=>`\${${u}${E?`:${E}`:""}}`];function i(u){return u.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(E,p,b,a)=>m[parseInt(p,10)](b,a))}function l(u,E){return E?i(u.substring(E.from,E.to)):""}function d(u,E,p,b){const a=[parseFloat(l(E,p))];return u.comparison&&a.push(b),{id:u.id,params:a}}function c(u,E,p){if(E.type.id===p||E.name===p)return[l(u,E)];const b=[];let a=0,h=E.childAfter(a);for(;h;)b.push(...c(u,h,p)),a=h.to,h=E.childAfter(a);return b}const g=u=>u.split(" ").map(p=>`${p}.*`).join("")},30683:(Q,I,e)=>{"use strict";e.d(I,{r:()=>o});var t=e(32196),n=e(96540),r=e(36663),s=e(40845);function o({title:i,stepNumber:l,markdown:d,children:c}){const g=(0,s.of)(m);return n.createElement("div",{className:g.box},l!==void 0&&n.createElement("div",{className:g.stepNumber},l),n.createElement("div",{className:g.boxInner},i&&n.createElement("div",{className:g.header},n.createElement("span",null,i)),n.createElement("div",{className:g.body},d&&n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,r.G)(d)}}),c)))}const m=i=>({box:(0,t.css)({background:i.colors.background.secondary,padding:i.spacing(1),borderRadius:i.shape.radius.default,position:"relative"}),boxInner:(0,t.css)({marginLeft:i.spacing(4)}),stepNumber:(0,t.css)({fontWeight:i.typography.fontWeightMedium,background:i.colors.secondary.main,width:"20px",height:"20px",borderRadius:i.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:i.typography.bodySmall.fontSize}),header:(0,t.css)({paddingBottom:i.spacing(.5),display:"flex",alignItems:"center",fontFamily:i.typography.fontFamilyMonospace}),body:(0,t.css)({color:i.colors.text.secondary,"p:last-child":{margin:0},a:{color:i.colors.text.link,textDecoration:"underline"}})})},55698:(Q,I,e)=>{"use strict";e.d(I,{k:()=>s});var t=e(96540),n=e(30683),r=e(44339);function s({query:o,queryModeller:m,stepNumber:i,lang:l,onMouseEnter:d,onMouseLeave:c}){return t.createElement(t.Fragment,null,o.operations.map((g,u)=>{const E=m.getOperationDef(g.id);if(!E)return`Operation ${g.id} not found`;const p=E.renderer(g,E,"<expr>"),b=E.explainHandler?E.explainHandler(g,E):E.documentation??"no docs";return t.createElement("div",{key:u,onMouseEnter:()=>d?.(g,u),onMouseLeave:()=>c?.(g,u)},t.createElement(n.r,{stepNumber:u+i,title:t.createElement(r.Z,{query:p,lang:l}),markdown:b}))}))}},43854:(Q,I,e)=>{"use strict";e.d(I,{i:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(67061);function o({children:i}){const l=(0,r.of)(m);return n.createElement("div",{className:l.root},n.createElement(s.B,{gap:1},i))}const m=i=>({root:(0,t.css)({padding:i.spacing(1,1,0,1),backgroundColor:i.colors.background.secondary,borderRadius:i.shape.radius.default})})},44339:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(32196),n=e(28848),r=e.n(n),s=e(96540),o=e(40845);function m({query:l,lang:d,className:c}){const g=(0,o.$j)(),u=i(g),E=r().highlight(l,d.grammar,d.name);return s.createElement("div",{className:(0,t.cx)(u.editorField,"prism-syntax-highlight",c),"aria-label":"selector",dangerouslySetInnerHTML:{__html:E}})}const i=l=>({editorField:(0,t.css)({fontFamily:l.typography.fontFamilyMonospace,fontSize:l.typography.bodySmall.fontSize})})},35146:(Q,I,e)=>{"use strict";e.d(I,{f:()=>t});var t=(n=>(n.Code="code",n.Builder="builder",n))(t||{})},65820:(Q,I,e)=>{"use strict";e.d(I,{Ag:()=>t,jN:()=>n,n5:()=>r});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),r=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(r||{})},30915:(Q,I,e)=>{"use strict";e.d(I,{$i:()=>u,Dr:()=>c});var t=e(70416),n=e(47232),r=e(77678),s=e(32631),o=e(32264),m=e(14110),i=e(9631);function l(E,p){let[b]=E,[a]=p,h=b.length,P=b[0],y=b[h-1],C=a.length,f=a[0],D=a[C-1],T;if(h)if(C){if(f>y)T=E.map((M,O)=>E[O].concat(p[O]));else if(D<P)T=p.map((M,O)=>p[O].concat(E[O]));else if(f<=P&&D>=y)T=p;else if(!(f>P&&D<y)){if(f>=P){let M=(0,i.Ls)(f,b);M=b[M]<f?M-1:M,T=E.map((O,S)=>E[S].slice(0,M).concat(p[S]))}else if(D>=P){let M=(0,i.Ls)(D,b);M=b[M]<D?M:M+1,T=p.map((O,S)=>p[S].concat(E[S].slice(M)))}}}else T=E;else C?T=p:T=[[]];return T}function d(E,p,b){let[a,...h]=E,P,y;return a[0]<p&&(P=(0,i.Ls)(p,a),a[P]<p&&P++),a[a.length-1]>b&&(y=(0,i.Ls)(b,a),a[y]>b&&y--),(P!=null||y!=null)&&(a=a.slice(P??0,y),h=h.map(C=>C.slice(P??0,y))),[a,...h]}const c="10m",g=E=>`${E.type}|${E.name}|${JSON.stringify(E.labels??"")}`;class u{constructor(p){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const a=this.pendingAccumulatedEvents.entries();for(let[h,P]of a)if(!P.sent){const y={datasource:P.datasource.toString(),requestCount:P.requestCount.toString(),savedBytesTotal:P.savedBytesTotal.toString(),initialRequestSize:P.initialRequestSize.toString(),lastRequestSize:P.lastRequestSize.toString(),panelId:P.panelId.toString(),dashId:P.dashId.toString(),expr:P.expr.toString(),refreshIntervalMs:P.refreshIntervalMs.toString(),from:P.from.toString(),queryRangeSeconds:P.queryRangeSeconds.toString()};o.$.featureToggles.prometheusIncrementalQueryInstrumentation?(0,m.rR)("grafana_incremental_queries_profile",y):s.P.api.pushEvent&&s.P.api.pushEvent("incremental query response size",y,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(h,{...P,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const b=p.overlapString;if((0,t.di)(b)){const a=(0,t.E9)(b);this.overlapWindowMs=(0,t.WT)(a)}else{const a=(0,t.E9)(c);this.overlapWindowMs=(0,t.WT)(a)}(o.$.grafanaJavascriptAgent.enabled||o.$.featureToggles?.prometheusIncrementalQueryInstrumentation)&&p.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=p.profileFunction,this.getTargetSignature=p.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(p=>{p.getEntries().forEach(b=>{const a=b,h=typeof a?.transferSize=="number";if(a?.initiatorType==="fetch"&&h){let P=a.name;if(P.includes("/api/ds/query")){let y=P.match(/requestId=([a-z\d]+)/i);if(y){let C=y[1];const f=Math.round(a.transferSize),D=this.pendingRequestIdsToTargSigs.get(C);if(D){const T=this.pendingRequestIdsToTargSigs.entries();for(let[,M]of T)if(M.identity===D.identity&&M.bytes!==null){const O=this.pendingAccumulatedEvents.get(M.identity),S=M.bytes-f;this.pendingAccumulatedEvents.set(M.identity,{datasource:M.datasource??"N/A",requestCount:(O?.requestCount??0)+1,savedBytesTotal:(O?.savedBytesTotal??0)+S,initialRequestSize:M.bytes,lastRequestSize:f,panelId:D.panelId?.toString()??"",dashId:D.dashboardUID??"",expr:D.expr??"",refreshIntervalMs:D.refreshIntervalMs??0,sent:!1,from:D.from??"",queryRangeSeconds:D.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(C);return}this.pendingRequestIdsToTargSigs.set(C,{...D,bytes:f})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(p){const b=p.range.from.valueOf(),a=p.range.to.valueOf(),h=p.rangeRaw?.to?.toString()==="now";let P=h,y;const C=p.intervalMs,f=new Map;p.targets.forEach(D=>{let T=`${p.dashboardUID}|${p.panelId}|${D.refId}`,M=this.getTargetSignature(p,D);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(p.requestId,{...this.getProfileData(p,D),identity:T+"|"+M,bytes:null,panelId:p.panelId,dashboardUID:p.dashboardUID??"",from:p.rangeRaw?.from.toString()??"",queryRangeSeconds:p.range.to.diff(p.range.from,"seconds")??"",refreshIntervalMs:C??0}),f.set(T,M)});for(const[D,T]of f){let M=this.cache.get(D);if(M?.sig!==T?P=!1:(y=M?.prevTo??1/0,P=a>y&&b<=y),!P)break}if(P&&y){let D=Math.max(y-this.overlapWindowMs,b);const T=(0,n.KQ)(a),M=(0,n.KQ)((0,r.rs)(D,p.intervalMs));p={...p,range:{...p.range,from:M,to:T}}}else f.forEach((D,T)=>{this.cache.delete(T)});return{requests:[p],targSigs:f,shouldCache:h}}procFrames(p,b,a){if(b?.shouldCache){const h=p.range.from.valueOf(),P=p.range.to.valueOf(),y=new Map;a.forEach(f=>{let D=`${p.dashboardUID}|${p.panelId}|${f.refId}`,T=y.get(D);T||(T=[],y.set(D,T)),T.push(f)});let C=[];y.forEach((f,D)=>{let T=(D?this.cache.get(D)?.frames:null)??[];f.forEach(O=>{if(O.length===0||O.fields.length===0)return;let S=g(O.fields[1]),v=T.find(x=>g(x.fields[1])===S);if(!v)T.push(O);else{let x=v.fields.map(B=>B.values),A=O.fields.map(B=>B.values),R=l(x,A);if(R){for(let B=0;B<R.length;B++)v.fields[B].values=R[B];v.length=v.fields[0].values.length}}});let M=[];T.forEach(O=>{let S=O.fields.map(x=>x.values),v=d(S,h,P);if(v[0].length>0){for(let x=0;x<v.length;x++)O.fields[x].values=v[x];M.push(O)}}),this.cache.set(D,{sig:b.targSigs.get(D),frames:M,prevTo:P}),C.push(...M)}),a=C.map(f=>({...f,fields:f.fields.map(D=>({...D,config:{...D.config},values:D.values.slice()}))}))}return a}}},39132:(Q,I,e)=>{"use strict";e.d(I,{Bm:()=>O,J3:()=>p,L:()=>S,hF:()=>D});var t=e(2543),n=e.n(t),r=e(41987),s=e(41260),o=e(11261),m=e(28240),i=e(52622),l=e(57875),d=e(32264),c=e(19347);const g=/^[+-]?inf(?:inity)?$/i,u=(v,x)=>x.app===r.Jk.Explore&&(v.meta?.custom?.resultType==="vector"||v.meta?.custom?.resultType==="scalar")?!0:x.targets.find(R=>R.refId===v.refId)?.format==="table",E=(v,x)=>v.meta?.type===s.m.HeatmapCells?!1:x.targets.find(R=>R.refId===v.refId)?.format==="heatmap";function p(v,x,A){d.$.featureToggles.prometheusDataplane&&v.data.forEach(ee=>{const ie=x.targets.find(fe=>fe.refId===ee.refId);ie&&ie.legendFormat==="__auto"&&ee.fields.forEach(fe=>{if(fe.labels?.__name__&&fe.labels?.__name__===fe.name){const q={...fe,name:o.Bc};fe.config.displayNameFromDS=(0,m.Ct)(q,ee,v.data)}})});const[R,B]=(0,t.partition)(v.data,ee=>u(ee,x)),U=a(R),[w,K]=(0,t.partition)(B,ee=>ee.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:N}=A,L=w.map(ee=>{if(N?.length)for(const ie of N){const fe=ee.fields.find(q=>q.name===ie.name);if(fe){const q=P(ie);fe.config.links=fe.config.links?.length?[...fe.config.links,...q]:q}}return{...ee,meta:{...ee.meta,dataTopic:i.QR.Annotations}}}),[V,F]=(0,t.partition)(K,ee=>E(ee,x));V.forEach(ee=>{if(ee.name==null){let ie=ee.fields.find(fe=>fe.type===o.PU.number);if(ie){let fe=ie.labels?.le;fe&&(ee.name=fe,ie.config.displayNameFromDS=fe)}}});const z=(0,t.groupBy)(V,ee=>ee.refId);let Y=[];for(const ee in z){const ie=z[ee],fe=(0,t.groupBy)(ie,q=>{const Z=q.fields.find(J=>J.type===o.PU.number);if(Z?.labels&&b in Z.labels){const{le:J,...G}=Z?.labels;return Object.values(G).join()}return Object.values(Z?.labels??[]).join()});(0,t.forOwn)(fe,(q,Z)=>{const J=q.sort(O);Y.push(T(M(J)))})}const H=F.map(ee=>({...ee,meta:{...ee.meta,preferredVisualisationType:"graph"}})),k=(0,t.flatten)(Y);return{...v,data:[...H,...U,...k,...L]}}const b="le";function a(v){if(v.length===0||v.length===1&&v[0].length===0)return v;const x=(0,t.groupBy)(v,"refId"),A=Object.keys(x);return A.map(B=>{const U=h(A.length,B),w=f({data:[],valueName:U}),K=C([]),N=[];x[B].forEach(V=>{const z=V.fields[1]?.labels??{};Object.keys(z).sort().forEach(Y=>{if(!N.some(H=>H.name===Y)){const H=Y===b;N.push({name:Y,config:{filterable:!0},type:H?o.PU.number:o.PU.string,values:[]})}})}),x[B].forEach(V=>{const F=V.fields[0]?.values??[],z=V.fields[1]?.values??[];F.forEach(Y=>K.values.push(Y)),z.forEach(Y=>{w.values.push(S(Y));const H=V.fields[1].labels??{};N.forEach(k=>k.values.push(y(H,k.name)))})});const L=[K,...N,w];return{refId:B,fields:L,meta:{...x[B][0].meta,preferredVisualisationType:"rawPrometheus"},length:K.values.length}})}function h(v,x=""){return v>1?`Value #${x}`:"Value"}function P(v){const x=[];if(v.datasourceUid){const R=(0,c.l)().getInstanceSettings(v.datasourceUid);R&&x.push({title:v.urlDisplayLabel||`Query with ${R?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:v.datasourceUid,datasourceName:R?.name??"Data source not found"}})}return v.url&&x.push({title:v.urlDisplayLabel||`Go to ${v.url}`,url:v.url,targetBlank:!0}),x}function y(v,x){return v.hasOwnProperty(x)?x===b?S(v[x]):v[x]:""}function C(v,x=!1){return{name:o.LE,type:o.PU.time,config:{},values:v.map(A=>x?A[0]:A[0]*1e3)}}function f({data:v,valueName:x=o.Bc,parseValue:A=!0,labels:R,displayNameFromDS:B}){return{name:x,type:o.PU.number,display:(0,l.J)(),config:{displayNameFromDS:B},labels:R,values:v.map(U=>A?S(U[1]):U[1])}}function D(v){const x=v.__name__||"";delete v.__name__;const A=Object.entries(v).map(R=>`${R[0]}="${R[1]}"`).join(",");return`${x}{${A}}`}function T(v){if(v.length===0||v.length===1&&v[0].length===0)return[];const x=v[0].fields.find(R=>R.type===o.PU.time),A=v.map(R=>{let B=R.fields.find(U=>U.type===o.PU.number);return{...B,name:B.config.displayNameFromDS}});return[{...v[0],meta:{...v[0].meta,type:s.m.HeatmapRows},fields:[x,...A]}]}function M(v){for(let x=v.length-1;x>0;x--){const A=v[x].fields.find(B=>B.type===o.PU.number),R=v[x-1].fields.find(B=>B.type===o.PU.number);if(!A||!R)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let B=0;B<A.values.length;B++){const U=R.values[B]||[0];A.values[B]-=U,A.values[B]<1e-9&&(A.values[B]=0)}}return v}function O(v,x){let A,R;try{A=S(v.fields[1].state?.displayName??v.name??v.fields[1].name),R=S(x.fields[1].state?.displayName??x.name??x.fields[1].name)}catch(B){return console.error(B),0}return A>R?1:A<R?-1:0}function S(v){return g.test(v)?v[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(v)}},69120:(Q,I,e)=>{"use strict";e.d(I,{B4:()=>s,N1:()=>n,fD:()=>t,m_:()=>r});var t=(o=>(o.Low="Low",o.Medium="Medium",o.High="High",o.None="None",o))(t||{}),n=(o=>(o.Cortex="Cortex",o.Mimir="Mimir",o.Prometheus="Prometheus",o.Thanos="Thanos",o))(n||{}),r=(o=>(o.Auto="__auto",o.Verbose="__verbose",o.Custom="__custom",o))(r||{}),s=(o=>(o[o.LabelNames=0]="LabelNames",o[o.LabelValues=1]="LabelValues",o[o.MetricNames=2]="MetricNames",o[o.VarQueryResult=3]="VarQueryResult",o[o.SeriesQuery=4]="SeriesQuery",o[o.ClassicQuery=5]="ClassicQuery",o))(s||{})},19071:(Q,I,e)=>{"use strict";e.d(I,{cd:()=>z,xw:()=>U});var t=e(37471),n=e(11261);const r={filters:[],groupBy:[]};var s=(te=>(te.Done="done",te.Error="error",te.Pending="pending",te.Streaming="streaming",te))(s||{}),o=(te=>(te.Spans="spans",te.Traces="traces",te))(o||{}),m=(te=>(te.Intrinsic="intrinsic",te.Resource="resource",te.Span="span",te.Unscoped="unscoped",te))(m||{});function i(te){const{nodes:oe,edges:le}=l(te),[ue,Te]=makeFrames();for(const he of oe)ue.add(he);for(const he of le)Te.add(he);return[ue,Te]}function l(te){const oe=[],le=[],ue=new DataFrameView(te),Te=d(ue),he=makeSpanMap(re=>{if(re>=te.length)return;const De=ue.get(re);return{span:{...De},id:De.spanID,parentIds:De.parentSpanID?[De.parentSpanID]:[]}});for(let re=0;re<ue.length;re++){const De=ue.get(re),Fe=he[De.spanID].children.map(xe=>{const We=he[xe].span;return[We.startTime,We.startTime+We.duration]}),Ee=getNonOverlappingDuration(Fe),Me=De.duration-Ee,ze=getStats(De.duration,Te,Me);oe.push({[Fields.id]:De.spanID,[Fields.title]:De.serviceName??"",[Fields.subTitle]:De.operationName,[Fields.mainStat]:ze.main,[Fields.secondaryStat]:ze.secondary,[Fields.color]:Me/Te}),De.parentSpanID&&he[De.parentSpanID].span&&le.push({[Fields.id]:De.parentSpanID+"--"+De.spanID,[Fields.target]:De.spanID,[Fields.source]:De.parentSpanID})}return{nodes:oe,edges:le}}function d(te){let oe=0,le=1/0;for(let ue=0;ue<te.length;ue++){const Te=te.get(ue);Te.startTime<le&&(le=Te.startTime),Te.startTime+Te.duration>oe&&(oe=Te.startTime+Te.duration)}return oe-le}const c="traces_service_graph_request_server_seconds_sum",g="traces_service_graph_request_total",u="traces_service_graph_request_failed_total",E="traces_service_graph_request_server_seconds_bucket",p={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:[]},b={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:['status_code="STATUS_CODE_ERROR"']},a={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},h='span_kind="SPAN_KIND_SERVER"',P=[c,g,u,E];function y(te,oe){const le=f(te),ue={},Te={};return T(le[g],"total",g,ue,Te),T(le[c],"seconds",c,ue,Te),T(le[u],"failed",u,ue,Te),M(ue,Te,oe)}function C(){function te(ue,Te){return new MutableDataFrame({name:ue,fields:Te,meta:{preferredVisualisationType:"nodeGraph"}})}const oe=te("Nodes",[{name:Fields.id,type:FieldType.string,values:[]},{name:Fields.title,type:FieldType.string,config:{displayName:"Service name"},values:[]},{name:Fields.subTitle,type:FieldType.string,config:{displayName:"Service namespace"},values:[]},{name:Fields.mainStat,type:FieldType.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:Fields.secondaryStat,type:FieldType.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:Fields.arc+"success",type:FieldType.number,config:{displayName:"Success",color:{fixedColor:"green",mode:FieldColorModeId.Fixed}},values:[]},{name:Fields.arc+"failed",type:FieldType.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:FieldColorModeId.Fixed}},values:[]}]),le=te("Edges",[{name:Fields.id,type:FieldType.string,values:[]},{name:Fields.source,type:FieldType.string,values:[]},{name:"sourceName",type:FieldType.string,values:[]},{name:"sourceNamespace",type:FieldType.string,values:[]},{name:Fields.target,type:FieldType.string,values:[]},{name:"targetName",type:FieldType.string,values:[]},{name:"targetNamespace",type:FieldType.string,values:[]},{name:Fields.mainStat,type:FieldType.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:Fields.secondaryStat,type:FieldType.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[oe,le]}function f(te){return(te[0]?.data||[]).reduce((oe,le)=>{const ue=toDataFrame(le);return oe[ue.refId??"A"]=new DataFrameView(ue),oe},{})}var D=(te=>(te.sourceName="sourceName",te.sourceNamespace="sourceNamespace",te.targetName="targetName",te.targetNamespace="targetNamespace",te))(D||{});function T(te,oe,le,ue,Te){if(!te)return;const he=`Value #${le}`;for(let re=0;re<te.length;re++){const De=te.get(re),Fe=De.server_service_namespace?`${De.server_service_namespace}/${De.server}`:De.server,Ee=De.client_service_namespace?`${De.client_service_namespace}/${De.client}`:De.client,Me=`${Ee}_${Fe}`;Te[Me]?Te[Me][oe]=(Te[Me][oe]||0)+De[he]:Te[Me]={target:Fe,targetName:De.server,targetNamespace:De.server_service_namespace,source:Ee,sourceName:De.client,sourceNamespace:De.client_service_namespace,[oe]:De[he]},ue[Fe]?ue[Fe][oe]=(ue[Fe][oe]||0)+De[he]:ue[Fe]={name:De.server,namespace:De.server_service_namespace,[oe]:De[he]},ue[Ee]||(ue[Ee]={name:De.client,namespace:De.client_service_namespace,[oe]:0})}}function M(te,oe,le){const[ue,Te]=C();for(const he of Object.keys(te)){const re=te[he];ue.add({[Fields.id]:he,[Fields.title]:re.name,[Fields.subTitle]:re.namespace,[Fields.mainStat]:re.total?re.seconds/re.total*1e3:Number.NaN,[Fields.secondaryStat]:re.total?Math.round(re.total*100)/100:Number.NaN,[Fields.arc+"success"]:re.total?(re.total-Math.min(re.failed||0,re.total))/re.total:1,[Fields.arc+"failed"]:re.total?Math.min(re.failed||0,re.total)/re.total:0})}for(const he of Object.keys(oe)){const re=oe[he];Te.add({[Fields.id]:he,[Fields.source]:re.source,sourceName:re.sourceName,sourceNamespace:re.sourceNamespace,[Fields.target]:re.target,targetName:re.targetName,targetNamespace:re.targetNamespace,[Fields.mainStat]:re.total?re.seconds/re.total*1e3:Number.NaN,[Fields.secondaryStat]:re.total?Math.round(re.total*100)/100:Number.NaN})}return{nodes:ue,edges:Te}}function O(te){if(te.stringValue)return te.stringValue;if(te.boolValue!==void 0)return!!te.boolValue;if(te.intValue!==void 0)return Number.parseInt(te.intValue,10);if(te.doubleValue)return Number.parseFloat(te.doubleValue);if(te.arrayValue){const oe=[];for(const le of te.arrayValue.values)oe.push(O(le));return oe}return""}function S(te){const oe=[];let le="OTLPResourceNoServiceName";if(!te)return{serviceName:le,serviceTags:oe};for(const ue of te.attributes)ue.key===SemanticResourceAttributes.SERVICE_NAME&&(le=ue.value.stringValue||le),oe.push({key:ue.key,value:O(ue.value)});return{serviceName:le,serviceTags:oe}}function v(te){const oe=[];if(te.attributes)for(const le of te.attributes)oe.push({key:le.key,value:O(le.value)});return oe}function x(te){let oe;if(te.kind){const le=te.kind.toString().toLowerCase().split("_");oe=le.length?le[le.length-1]:te.kind.toString()}return oe}function A(te){const oe=[];if(te.links)for(const le of te.links){const{traceId:ue,spanId:Te}=le,he=[];if(le.attributes)for(const re of le.attributes)he.push({key:re.key,value:O(re.value)});oe.push({traceID:ue,spanID:Te,tags:he})}return oe}function R(te){const oe=[];if(te.events)for(const le of te.events){const ue=[];if(le.attributes)for(const Te of le.attributes)ue.push({key:Te.key,value:O(Te.value)});oe.push({fields:ue,timestamp:le.timeUnixNano/1e6})}return oe}function B(te,oe=!1){const le=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"kind",type:FieldType.string,values:[]},{name:"statusCode",type:FieldType.number,values:[]},{name:"statusMessage",type:FieldType.string,values:[]},{name:"instrumentationLibraryName",type:FieldType.string,values:[]},{name:"instrumentationLibraryVersion",type:FieldType.string,values:[]},{name:"traceState",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const Te of te){const{serviceName:he,serviceTags:re}=S(Te.resource);for(const De of Te.instrumentationLibrarySpans)for(const Fe of De.spans)le.add({traceID:Fe.traceId.length>16?Fe.traceId.slice(16):Fe.traceId,spanID:Fe.spanId,parentSpanID:Fe.parentSpanId||"",operationName:Fe.name||"",serviceName:he,kind:x(Fe),statusCode:Fe.status?.code,statusMessage:Fe.status?.message,instrumentationLibraryName:De.instrumentationLibrary?.name,instrumentationLibraryVersion:De.instrumentationLibrary?.version,traceState:Fe.traceState,serviceTags:re,startTime:Fe.startTimeUnixNano/1e6,duration:(Fe.endTimeUnixNano-Fe.startTimeUnixNano)/1e6,tags:v(Fe),logs:R(Fe),references:A(Fe)})}}catch(Te){return console.error(Te),{error:{message:"JSON is not valid OpenTelemetry format: "+Te},data:[]}}let ue=[le];return oe&&ue.push(...createGraphFrames(le)),{data:ue}}function U(te){let oe={batches:[]},le={};for(let ue=0;ue<te.length;ue++){const Te=te.get(ue);le[Te.serviceName]||(le[Te.serviceName]=oe.batches.length,oe.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let he=le[Te.serviceName];oe.batches[he].resource.attributes.length===0&&(oe.batches[he].resource.attributes=K(Te.serviceTags)),oe.batches[he].instrumentationLibrarySpans[0].instrumentationLibrary||Te.instrumentationLibraryName&&(oe.batches[he].instrumentationLibrarySpans[0].instrumentationLibrary={name:Te.instrumentationLibraryName,version:Te.instrumentationLibraryVersion?Te.instrumentationLibraryVersion:""}),oe.batches[he].instrumentationLibrarySpans[0].spans.push({traceId:Te.traceID.padStart(32,"0"),spanId:Te.spanID,parentSpanId:Te.parentSpanID||"",traceState:Te.traceState||"",name:Te.operationName,kind:w(Te.kind),startTimeUnixNano:Te.startTime*1e6,endTimeUnixNano:(Te.startTime+Te.duration)*1e6,attributes:Te.tags?K(Te.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:L(Te),events:V(Te.logs),links:F(Te.references)})}return oe}function w(te){let oe;if(te)switch(te){case"server":oe="SPAN_KIND_SERVER";break;case"client":oe="SPAN_KIND_CLIENT";break;case"producer":oe="SPAN_KIND_PRODUCER";break;case"consumer":oe="SPAN_KIND_CONSUMER";break;case"internal":oe="SPAN_KIND_INTERNAL";break}return oe}function K(te){return te.reduce((oe,le)=>[...oe,{key:le.key,value:N(le)}],[])}function N(te){if(typeof te.value=="string")return{stringValue:te.value};if(typeof te.value=="boolean")return{boolValue:te.value};if(typeof te.value=="number")return te.value%1===0?{intValue:te.value}:{doubleValue:te.value};if(typeof te.value=="object"&&Array.isArray(te.value)){const oe=[];for(const le of te.value)oe.push(N(le));return{arrayValue:{values:oe}}}return{stringValue:te.value}}function L(te){let oe;return te.statusCode!==void 0&&(oe={code:te.statusCode,message:te.statusMessage?te.statusMessage:""}),oe}function V(te){if(!te||!te.length)return;let oe=[];for(const le of te){let ue={timeUnixNano:le.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const Te of le.fields)ue.attributes.push({key:Te.key,value:N(Te)});oe.push(ue)}return oe}function F(te){if(!te||!te.length)return;let oe=[];for(const le of te){let ue={traceId:le.traceID,spanId:le.spanID,attributes:[],droppedAttributesCount:0};if(le.tags?.length)for(const Te of le.tags)ue.attributes?.push({key:Te.key,value:N(Te)});oe.push(ue)}return oe}const z="Related profiles";function Y(te,oe,le=!1){const ue=te.data[0];if(!ue)return ne;const he=oe?.jsonData?.tracesToProfiles;let re;if(he?.datasourceUid&&(re=getDataSourceSrv().getInstanceSettings(he.datasourceUid)),he&&re){const Fe=he.customQuery?he.query:void 0,Ee={title:z,url:"",internal:{datasourceUid:re.uid,datasourceName:re.name,query:{labelSelector:Fe||"{${__tags}}",groupBy:[],profileTypeId:he.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:DataLinkConfigOrigin.Datasource};ue.fields.forEach(Me=>{Me.name==="tags"&&(Me.config.links=[Ee])})}let De=[...te.data];return le&&De.push(...createGraphFrames(toDataFrame(ue))),{...te,data:De}}function H(te){return{traceID:te.traceID,startTime:parseInt(te.startTimeUnixNano,10)/1e6,traceDuration:te.durationMs||"<1ms",traceService:te.rootServiceName||"",traceName:te.rootTraceName||""}}const k=te=>te.stringValue?`"${te.stringValue}"`:""+(te.intValue||te.doubleValue||te.boolValue||'""');function ee(te,oe){return oe.series.map((ue,Te)=>{const he={};ue.labels?.forEach(De=>{he[De.key]=k(De.value)});let re=oe.series.length===1?te:"";return ue.labels&&(ue.labels.length===1?re=k(ue.labels[0].value):re=`{${ue.labels.map(De=>`${De.key}=${k(De.value)}`).join(", ")}}`),createDataFrame({refId:re||`A${Te}`,fields:[{name:"time",type:FieldType.time,values:ue.samples.map(De=>parseInt(De.timestampMs,10))},{name:re,labels:he,type:FieldType.number,values:ue.samples.map(De=>De.value),config:{displayNameFromDS:re}}],meta:{preferredVisualisationType:"graph"}})})}function ie(te,oe,le){return le===SearchTableType.Spans?q(te,oe):fe(te,oe)}function fe(te,oe){const le=createDataFrame({name:"Traces",refId:"traces",fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:oe.uid,datasourceName:oe.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:FieldType.nestedFrames}],meta:{preferredVisualisationType:"table",uniqueRowIdFields:[0]}});return te?.length?(le.length=te.length,te.sort((ue,Te)=>parseInt(Te?.startTimeUnixNano,10)/1e6-parseInt(ue?.startTimeUnixNano,10)/1e6).forEach(ue=>{const Te=H(ue);le.fields[0].values.push(Te.traceID),le.fields[1].values.push(Te.startTime),le.fields[2].values.push(Te.traceService),le.fields[3].values.push(Te.traceName),le.fields[4].values.push(Te.traceDuration),ue.spanSets?le.fields[5].values.push(ue.spanSets.map(he=>J(ue,he,oe))):ue.spanSet&&le.fields[5].values.push([J(ue,ue.spanSet,oe)])}),[le]):[le]}function q(te,oe){const le={};let ue=!1;te?.forEach(he=>Z(he).forEach(re=>{re.attributes?.forEach(De=>{le[De.key]={name:De.key,type:FieldType.string,config:{displayNameFromDS:De.key}}}),re.spans.forEach(De=>{De.name&&(ue=!0),De.attributes?.forEach(Fe=>{le[Fe.key]={name:Fe.key,type:FieldType.string,config:{displayNameFromDS:Fe.key}}})})}));const Te=new MutableDataFrame({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:oe.uid,datasourceName:oe.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:FieldType.string,config:{displayNameFromDS:"Name",custom:{hidden:!ue}}},...Object.values(le).sort((he,re)=>he.name.localeCompare(re.name)),{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return!te||!te.length?[Te]:(te.sort((he,re)=>parseInt(re?.startTimeUnixNano,10)/1e6-parseInt(he?.startTimeUnixNano,10)/1e6).forEach(he=>{Z(he).forEach(re=>{re.spans.forEach(De=>{Te.add(G(De,re,he))})})}),[Te])}const Z=te=>te.spanSets||(te.spanSet?[te.spanSet]:[]),J=(te,oe,le)=>{const ue={};let Te=!1;oe.attributes?.map(De=>{ue[De.key]={name:De.key,type:FieldType.string,config:{displayNameFromDS:De.key},values:[]}}),oe.spans.forEach(De=>{De.name&&(Te=!0),De.attributes?.forEach(Fe=>{ue[Fe.key]={name:Fe.key,type:FieldType.string,config:{displayNameFromDS:Fe.key},values:[]}})});const he=new MutableDataFrame({fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:FieldType.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:le.uid,datasourceName:le.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:FieldType.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!Te}}},...Object.values(ue).sort((De,Fe)=>De.name.localeCompare(Fe.name)),{name:"duration",type:FieldType.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),re=createTheme();for(const De of he.fields)De.display=getDisplayProcessor({field:De,theme:re});return oe.spans.forEach(De=>{he.add(G(De,oe,te))}),he};function G(te,oe,le){const ue=parseInt(te.startTimeUnixNano,10)/1e6,Te={traceIdHidden:le.traceID,traceService:le.rootServiceName||"",traceName:le.rootTraceName||"",spanID:te.spanID,time:ue,duration:parseInt(te.durationNanos,10),name:te.name};let he=[];return oe.attributes&&(he=he.concat(oe.attributes)),te.attributes&&(he=he.concat(te.attributes)),he.forEach(re=>{(re.value.boolValue||re.value.Value?.bool_value)&&(Te[re.key]=re.value.boolValue||re.value.Value?.bool_value),(re.value.doubleValue||re.value.Value?.double_value)&&(Te[re.key]=re.value.doubleValue||re.value.Value?.double_value),(re.value.intValue||re.value.Value?.int_value)&&(Te[re.key]=re.value.intValue||re.value.Value?.int_value),(re.value.stringValue||re.value.Value?.string_value)&&(Te[re.key]=re.value.stringValue||re.value.Value?.string_value)}),Te}const ne={data:[new t.k({fields:[{name:"trace",type:n.PU.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},64861:(Q,I,e)=>{"use strict";e.d(I,{nE:()=>s,r6:()=>r,xB:()=>t});var t=(o=>(o[o.AlphaAsc=1]="AlphaAsc",o[o.AlphaDesc=2]="AlphaDesc",o[o.Importance=3]="Importance",o[o.TimeAsc=4]="TimeAsc",o[o.TimeDesc=5]="TimeDesc",o))(t||{}),n=(o=>(o.Current="current",o.RecentChanges="changes",o))(n||{}),r=(o=>(o.Default="default",o.Custom="custom",o))(r||{}),s=(o=>(o.List="list",o.Stat="stat",o))(s||{})},39758:(Q,I,e)=>{"use strict";e.d(I,{mn:()=>m,ur:()=>n});var t=e(97706);const n=1,r=2,s=3,o=(i,l,d,c)=>(0,t.h)(l+i*(d+c),6);function m(i,l,d,c,g){let u=1-l,E=d===n?u/(i-1):d===r?u/i:d===s?u/(i+1):0;(isNaN(E)||E===1/0)&&(E=0);let p=d===n?0:d===r?E/2:d===s?E:0,b=l/i,a=(0,t.h)(b,6);if(c==null)for(let h=0;h<i;h++)g(h,o(h,p,b,E),a);else g(c,o(c,p,b,E),a)}},4134:(Q,I,e)=>{"use strict";e.d(I,{C$:()=>m,HY:()=>o,Tr:()=>s,ur:()=>r});const t=10,n=4;function r(i,l,d,c,g,u){return i>=d&&i<=g&&l>=c&&l<=u}function s(i,l,d){let c=[];if(i.o.length&&c.push(...i.o.filter(g=>(l==null||g.sidx===l)&&(d==null||g.didx===d))),i.q)for(let g=0;g<i.q.length;g++)c.push(...s(i.q[g],l,d));return c}function o(i,l){return i.x<=l.x+l.w&&i.x+i.w>=l.x&&i.y+i.h>=l.y&&i.y<=l.y+l.h}class m{constructor(l,d,c,g,u=0){this.x=l,this.y=d,this.w=c,this.h=g,this.l=u,this.o=[],this.q=null}split(){let l=this,d=l.x,c=l.y,g=l.w/2,u=l.h/2,E=l.l+1;l.q=[new m(d+g,c,g,u,E),new m(d,c,g,u,E),new m(d,c+u,g,u,E),new m(d+g,c+u,g,u,E)]}quads(l,d,c,g,u){let E=this,p=E.q,b=E.x+E.w/2,a=E.y+E.h/2,h=d<a,P=l<b,y=l+c>b,C=d+g>a;h&&y&&u(p[0]),P&&h&&u(p[1]),P&&C&&u(p[2]),y&&C&&u(p[3])}add(l){let d=this;if(d.q!=null)d.quads(l.x,l.y,l.w,l.h,c=>{c.add(l)});else{let c=d.o;if(c.push(l),c.length>t&&d.l<n){d.split();for(let g=0;g<c.length;g++){let u=c[g];d.quads(u.x,u.y,u.w,u.h,E=>{E.add(u)})}d.o.length=0}}}get(l,d,c,g,u){let E=this,p=E.o;for(let b=0;b<p.length;b++)u(p[b]);E.q!=null&&E.quads(l,d,c,g,b=>{b.get(l,d,c,g,u)})}clear(){this.o.length=0,this.q=null}}},58384:(Q,I,e)=>{"use strict";e.d(I,{d:()=>u,l:()=>E});var t=e(2543),n=e.n(t),r=e(96540),s=e(47070),o=e(56323),m=e(52622),i=e(97696),l=e(59796),d=e(12509),c=e(2913),g=e(17516);class u extends r.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,a)=>{const{options:h,fieldConfig:P}=this.props,{value:y,alignmentFactors:C,orientation:f,width:D,height:T,count:M}=b,{field:O,display:S,view:v,colIndex:x}=y,{openMenu:A,targetClassName:R}=a;let B;return v&&(0,t.isNumber)(x)&&(B=v.getFieldDisplayProcessor(x)),r.createElement(i.xE,{value:E(M,P.defaults,S),width:D,height:T,orientation:f,field:O,text:h.text,display:B,theme:c.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:h.displayMode,onClick:A,className:R,alignmentFactors:M>1?C:void 0,showUnfilled:h.showUnfilled,valueDisplayMode:h.valueMode,namePlacement:h.namePlacement})},this.renderValue=b=>{const{value:a,orientation:h}=b,{hasLinks:P,getLinks:y}=a;return P&&y?r.createElement("div",{style:{width:"100%",display:h===s.wV.Vertical?"flex":"initial"}},r.createElement(l.e,{style:{height:"100%"},links:y},C=>this.renderComponent(b,C))):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:a,replaceVariables:h,fieldConfig:P,timeZone:y}=this.props;return(0,o.PI)({fieldConfig:P,reduceOptions:a.reduceOptions,replaceVariables:h,theme:c.config.theme2,data:b.series,timeZone:y})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:b,width:a,height:h}=this.props,{orientation:P}=b;return P===s.wV.Auto?a>h?s.wV.Vertical:s.wV.Horizontal:P}calcBarSize(){const{options:b}=this.props,a=this.getOrientation(),h=b.sizing===m.T6.Manual,P=a===s.wV.Vertical,y=a===s.wV.Horizontal,C=h&&P?b.minVizWidth:g.K.minVizWidth,f=h&&y?b.minVizHeight:g.K.minVizHeight,D=h&&y?b.maxVizHeight:g.K.maxVizHeight;return{minVizWidth:C,minVizHeight:f,maxVizHeight:D}}render(){const{height:b,width:a,options:h,data:P,renderCounter:y}=this.props,{minVizWidth:C,minVizHeight:f,maxVizHeight:D}=this.calcBarSize();return r.createElement(d.S,{source:P,getAlignmentFactors:o.XS,getValues:this.getValues,renderValue:this.renderValue,renderCounter:y,width:a,height:b,maxVizHeight:D,minVizWidth:C,minVizHeight:f,itemSpacing:this.getItemSpacing(),orientation:h.orientation})}}function E(p,b,a){return p===1&&!b.displayName?{...a,title:void 0}:a}},17516:(Q,I,e)=>{"use strict";e.d(I,{K:()=>n});var t=e(52622);const n={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},14738:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>f});var t=e(65158),n=e(52622),r=e(71242),s=e(23799),o=e(63250);const m=D=>(0,o._$)(D),i=(D,T,M)=>{const O=(0,o.gl)(D,T,M);if(T==="singlestat"&&M.angular){const S=M.angular.gauge;S&&(O.showThresholdMarkers=S.thresholdMarkers,O.showThresholdLabels=S.thresholdLabels)}return O};var l=e(96540),d=e(57875),c=e(56323),g=e(95164),u=e(59796),E=e(12509),p=e(2913),b=e(58384);const a={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.T6.Auto};class h extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{options:O,fieldConfig:S}=this.props,{width:v,height:x,count:A,value:R}=T,{field:B,display:U}=R,{openMenu:w,targetClassName:K}=M;return l.createElement(g._,{value:(0,b.l)(A,S.defaults,U),width:v,height:x,field:B,text:O.text,showThresholdLabels:O.showThresholdLabels,showThresholdMarkers:O.showThresholdMarkers,theme:p.config.theme2,onClick:w,className:K,orientation:O.orientation})},this.renderValue=T=>{const{value:M}=T,{getLinks:O,hasLinks:S}=M;return S&&O?l.createElement(u.e,{links:O,style:{flexGrow:1}},v=>this.renderComponent(T,v)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:O,fieldConfig:S,timeZone:v}=this.props;for(let x of T.series)for(let A of x.fields)if(A.config.unit==="percent"||A.config.unit==="percentunit"){const R=A.config.min??0,B=A.config.max??(A.config.unit==="percent"?100:1);A.state=A.state??{},A.state.range={min:R,max:B,delta:B-R},A.display=(0,d.J)({field:A,theme:p.config.theme2})}return(0,c.PI)({fieldConfig:S,reduceOptions:M.reduceOptions,replaceVariables:O,theme:p.config.theme2,data:T.series,timeZone:v})},this.calculateGaugeSize=()=>{const{options:T}=this.props,M=T.orientation,O=T.sizing===n.T6.Manual,S=M===n.wV.Vertical,v=M===n.wV.Horizontal,x=O&&S?T.minVizWidth:a.minVizWidth,A=O&&v?T.minVizHeight:a.minVizHeight;return{minVizWidth:x,minVizHeight:A}}}render(){const{height:T,width:M,data:O,renderCounter:S,options:v}=this.props,{minVizHeight:x,minVizWidth:A}=this.calculateGaugeSize();return l.createElement(E.S,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:T,source:O,autoGrid:!0,renderCounter:S,orientation:v.orientation,minVizHeight:x,minVizWidth:A})}}var P=e(50082),y=e(38824);class C{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const O=T.getListAppender({name:y.m.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:P.O.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:S=>{S.options.reduceOptions.values&&(S.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(O.append({name:y.m.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),O.append({name:y.m.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(O.append({name:y.m.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:y.m.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const f=new t.m(h).useFieldConfig({useCustomConfig:D=>{D.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(D=>{(0,s.L)(D),(0,s.h)(D),D.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:a.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:a.showThresholdMarkers}).addRadio({path:"sizing",name:"Gauge size",settings:{options:[{value:n.T6.Auto,label:"Auto"},{value:n.T6.Manual,label:"Manual"}]},defaultValue:a.sizing,showIf:T=>T.orientation!==n.wV.Auto}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:a.minVizWidth,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Vertical}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:a.minVizHeight,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Horizontal}),r.I(D)}).setPanelChangeHandler(i).setSuggestionsSupplier(new C).setMigrationHandler(m)},19743:(Q,I,e)=>{"use strict";e.d(I,{x:()=>s});var t=e(96540),n=e(1173),r=e(74668);const s=({value:o,context:m,onChange:i})=>{const l=(0,t.useCallback)(d=>{i(d?.length?{id:n.jR.byRefId,options:d}:void 0)},[i]);return t.createElement(r.X,{value:o?.options,onChange:l,data:m.data,placeholder:"Change filter"})}},33744:(Q,I,e)=>{"use strict";e.d(I,{DY:()=>s,G4:()=>i,Sq:()=>d,T5:()=>l,W_:()=>n,_7:()=>r,fX:()=>o,wq:()=>m,yQ:()=>c,yu:()=>g});var t=e(52622),n=(u=>(u.Point="point",u.Line="line",u.Polygon="polygon",u.Any="*any*",u))(n||{});const r=5;var s=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(s||{}),o=(u=>(u.Top="top",u.Middle="middle",u.Bottom="bottom",u))(o||{}),m=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(m||{}),i=(u=>(u.Top="top",u.Center="center",u.Bottom="bottom",u))(i||{});const l=Object.freeze({size:{fixed:r,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.q_.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.WQ.Mod,min:-360,max:360}});var d=(u=>(u.color="fill",u.opacity="fill-opacity",u.lineWidth="stroke-width",u))(d||{}),c=(u=>(u.color="marker-color",u.size="marker-size",u))(c||{}),g=(u=>(u.color="stroke",u.lineWidth="stroke-width",u))(g||{})},61994:(Q,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(32196),n=e(96540),r=e(5636);const s=o=>(0,r.gU)(o)?n.createElement("a",{href:o,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},o):o},5636:(Q,I,e)=>{"use strict";e.d(I,{Bz:()=>u,G_:()=>l,cA:()=>g,gU:()=>b,o3:()=>p,q:()=>E,rd:()=>c,ue:()=>m});var t=e(92347),n=e(40239),r=e(63577),s=e(90183),o=e(33744);function m(a,h,P,y){const C={};return y&&Object.keys(y).length?(C.color=(0,r.getColorDimension)(a,y.color??o.T5.color,P),C.size=(0,r.getScaledDimension)(a,y.size??o.T5.size),C.rotation=(0,r.getScalarDimension)(a,y.rotation??o.T5.rotation),y.text&&(y.text.field||y.text.fixed)&&(C.text=(0,r.getTextDimension)(a,y.text))):h.fields&&(h.fields.color&&(C.color=(0,r.getColorDimension)(a,h.config.color??o.T5.color,P)),h.fields.size&&(C.size=(0,r.getScaledDimension)(a,h.config.size??o.T5.size)),h.fields.text&&(C.text=(0,r.getTextDimension)(a,h.config.text)),h.fields.rotation&&(C.rotation=(0,r.getScalarDimension)(a,h.config.rotation??o.T5.rotation))),C}let i;function l(){return i||(i=[],d()),i}async function d(){const a=await(0,s.o)();for(let h of["maps","gazetteer"])a.listFiles(h).subscribe({next:P=>{P.forEach(y=>{if(y.name.endsWith(".geojson")){const C=`public/${h}/${y.name}`;i.push({value:C,label:C})}})}})}const c=(a,h,P)=>{const y=a.initMapView(h.view);return a.map=new t.A({view:y,pixelRatio:1,layers:[],controls:[],target:P,interactions:(0,n.N)({mouseWheelZoom:!1})})},g=(a,h)=>{a.initControls(h.controls),a.forceUpdate()},u=(a,h,P)=>{a.panelContext&&a.panelContext.onInstanceStateChange&&a.panelContext.onInstanceStateChange({map:a.map,layers:h,selected:P,actions:a.actions})},E=a=>{let h=a.layers.length;for(;h<100;){const P=`Layer ${h++}`;if(!a.byName.has(P))return P}return`Layer ${Date.now()}`};function p(a,h,P,y){const C=a.getPixelFromCoordinate(P),f=a.getPixelFromCoordinate(y),D=Math.abs(C[0]-f[0]),T=Math.abs(C[1]-f[1]);return D>h||T>h}const b=a=>{try{return new URL(a).protocol.includes("http")}catch{return!1}}},86106:(Q,I,e)=>{"use strict";e.d(I,{d:()=>r});var t=e(96540),n=e(25469);function r(s){const o={position:"relative",top:"auto",right:"auto",marginRight:0};return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.J,{onClick:s.onClick,style:s.style??o}))}},52995:(Q,I,e)=>{"use strict";e.d(I,{P7:()=>n,uM:()=>r,KQ:()=>o});var t=e(52622),n=(m=>(m.Opacity="opacity",m.Scheme="scheme",m))(n||{}),r=(m=>(m.Exponential="exponential",m.Linear="linear",m))(r||{});const s={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}},o={...s,color:{...s.color,mode:n.Scheme,scale:r.Exponential},yAxis:{...s.yAxis,axisPlacement:t.vM.Left},rowsFrame:{...s.rowsFrame,layout:t.D7.auto}}},69386:(Q,I,e)=>{"use strict";e.d(I,{K:()=>c});var t=e(32196),n=e(96540),r=e(70255),s=e(40672),o=e(72724),m=e(40845),i=e(72129);function l({width:u,showImage:E,data:p,index:b}){const a=(0,m.of)(g),h=u>600,P=p.get(b),y=encodeURI(P.title);return n.createElement("article",{"aria-labelledby":y,className:(0,t.cx)(a.item,h&&a.itemWide)},E&&P.ogImage&&n.createElement("a",{tabIndex:-1,href:s.sQ.sanitizeUrl(P.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(a.socialImage,h&&a.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:P.ogImage,alt:P.title})),n.createElement("div",{className:a.body},n.createElement("time",{className:a.date,dateTime:(0,o.LE)(P.date,{format:"MMM DD"})},(0,o.LE)(P.date,{format:"MMM DD"})," "),n.createElement("a",{className:a.link,href:s.sQ.sanitizeUrl(P.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:a.title,id:y},P.title)),n.createElement("div",{className:a.content,dangerouslySetInnerHTML:{__html:s.sQ.sanitize(P.content)}})))}const d=({width:u,showImage:E,rootProps:p})=>{const b=(0,m.of)(g),a=u>600;return n.createElement("div",{className:(0,t.cx)(b.item,a&&b.itemWide),...p},E&&n.createElement(r.A,{containerClassName:(0,t.cx)(b.socialImage,a&&b.socialImageWide),width:a?"250px":"100%",height:a?"150px":u*.5}),n.createElement("div",{className:b.body},n.createElement(r.A,{containerClassName:b.date,width:60}),n.createElement(r.A,{containerClassName:b.title,width:250}),n.createElement(r.A,{containerClassName:b.content,width:"100%",count:6})))},c=(0,i.j)(l,d),g=u=>({container:(0,t.css)({height:"100%"}),item:(0,t.css)({display:"flex",padding:u.spacing(1),position:"relative",marginBottom:u.spacing(.5),marginRight:u.spacing(1),borderBottom:`2px solid ${u.colors.border.weak}`,background:u.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,t.css)({flexDirection:"row"}),body:(0,t.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,t.css)({display:"flex",alignItems:"center",marginBottom:u.spacing(1),"> img":{width:"100%",borderRadius:`${u.shape.radius.default} ${u.shape.radius.default} 0 0`}}),socialImageWide:(0,t.css)({marginRight:u.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:u.shape.radius.default}}),link:(0,t.css)({color:u.colors.text.link,display:"inline-block","&:hover":{color:u.colors.text.link,textDecoration:"underline"}}),title:(0,t.css)({fontSize:"16px",marginBottom:u.spacing(.5)}),content:(0,t.css)({p:{marginBottom:u.spacing(.5),color:u.colors.text.primary}}),date:(0,t.css)({marginBottom:u.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${u.shape.radius.default}`,color:u.colors.text.secondary})})},62372:(Q,I,e)=>{"use strict";e.d(I,{$:()=>t});const t="https://grafana.com/blog/news.xml"},4172:(Q,I,e)=>{"use strict";e.d(I,{n:()=>u});var t=e(41053),n=e(78368);function r(E){const b=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(b.querySelectorAll("entry")).map(h=>({title:i(h,"title"),link:h.querySelector("link")?.getAttribute("href")??"",content:i(h,"content"),pubDate:i(h,"published"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(E){const b=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(b.querySelectorAll("item")).map(h=>({title:i(h,"title"),link:i(h,"link"),content:i(h,"description"),pubDate:i(h,"pubDate"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function o(E){return await(await fetch(E)).text()}function m(E){return new DOMParser().parseFromString(E,"text/xml").querySelector("feed")!==null}function i(E,p){return E.querySelector(p)?.textContent??""}async function l(E){const p=await o(E);return m(p)?r(p):s(p)}var d=e(47232),c=e(11261);function g(E){const p=[],b=[],a=[],h=[],P=[];for(const y of E.items){const C=(0,d.KQ)(y.pubDate);try{if(p.push(C.valueOf()),b.push(y.title),a.push(y.link),P.push(y.ogImage),y.content){const f=y.content.replace(/<\/?[^>]+(>|$)/g,"");h.push(f)}}catch(f){console.warn("Error reading news item:",f,y)}}return{fields:[{name:"date",type:c.PU.time,config:{displayName:"Date"},values:p},{name:"title",type:c.PU.string,config:{},values:b},{name:"link",type:c.PU.string,config:{},values:a},{name:"content",type:c.PU.string,config:{},values:h},{name:"ogImage",type:c.PU.string,config:{},values:P}],length:p.length}}function u(E){const[p,b]=(0,t.A)(async()=>{const a=await l(E),h=g(a);return new n.R(h)},[E],{loading:!0});return{state:p,getNews:b}}},23799:(Q,I,e)=>{"use strict";e.d(I,{L:()=>m,h:()=>i});var t=e(69550),n=e(75059),r=e(28240),s=e(54479),o=e(52622);function m(l,d=!0){const c=["Value options"];l.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:c,defaultValue:!1}),l.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:c,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:g=>g.reduceOptions.values===!0}),l.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:c,editor:t.D.get("stats-picker").editor,defaultValue:[n.gy.lastNotNull],showIf:g=>g.reduceOptions.values===!1}),d&&l.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:c,settings:{allowCustomValue:!0,options:[],getOptions:async g=>{const u=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(g&&g.data)for(const E of g.data)for(const p of E.fields){const b=(0,r.Ct)(p,E,g.data),a=`/^${(0,s.jD)(b)}$/`;u.push({value:a,label:b})}return Promise.resolve(u)}},defaultValue:""})}function i(l,d){l.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:d,settings:{options:[{value:o.wV.Auto,label:"Auto"},{value:o.wV.Horizontal,label:"Horizontal"},{value:o.wV.Vertical,label:"Vertical"}]},defaultValue:o.wV.Auto})}},36373:(Q,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>f});var t=e(65158),n=e(52622),r=e(71242),s=e(63250),o=e(24293);const m=(D,T,M)=>{const O=(0,s.gl)(D,T,M);if(M.angular&&(T==="singlestat"||T==="grafana-singlestat-panel")){const S=M.angular;if(O.graphMode=n.$p.None,S.sparkline&&S.sparkline.show&&(O.graphMode=n.$p.Area),S.colorBackground)O.colorMode=n.yp.Background;else if(S.colorValue)O.colorMode=n.yp.Value;else if(O.colorMode=n.yp.None,S.sparkline?.lineColor&&O.graphMode===n.$p.Area){const v=D.fieldConfig??{};v.defaults.color={mode:o.Y.Fixed,fixedColor:S.sparkline.lineColor},D.fieldConfig=v}S.valueName==="name"&&(O.textMode=n.SV.Name)}return O};var i=e(2543),l=e(96540),d=e(11261),c=e(56323),g=e(90708),u=e(37494),E=e(59796),p=e(12509),b=e(2913);class a extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{timeRange:O,options:S}=this.props,{value:v,alignmentFactors:x,width:A,height:R,count:B}=T,{openMenu:U,targetClassName:w}=M;let K=v.sparkline;return K&&(K.timeRange=O),l.createElement(u.yV,{value:v.display,count:B,sparkline:K,colorMode:S.colorMode,graphMode:S.graphMode,justifyMode:S.justifyMode,textMode:this.getTextMode(),alignmentFactors:x,text:S.text,width:A,height:R,theme:b.config.theme2,onClick:U,className:w,disableWideLayout:!S.wideLayout})},this.renderValue=T=>{const{value:M}=T,{getLinks:O,hasLinks:S}=M;return S&&O?l.createElement(E.e,{links:O},v=>this.renderComponent(T,v)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:O,fieldConfig:S,timeZone:v}=this.props;let x;for(let A of T.series)for(let R of A.fields){let{config:B}=R;if(R.type===d.PU.number){if(R.state?.range)continue;!x&&(!(0,i.isNumber)(B.min)||!(0,i.isNumber)(B.max))&&(x=(0,g.nJ)(T.series));const U=B.min??x.min,w=B.max??x.max;R.state=R.state??{},R.state.range={min:U,max:w,delta:w-U}}}return(0,c.PI)({fieldConfig:S,reduceOptions:M.reduceOptions,replaceVariables:O,theme:b.config.theme2,data:T.series,sparkline:M.graphMode!==n.$p.None,percentChange:M.showPercentChange,timeZone:v})}}getTextMode(){const{options:T,fieldConfig:M,title:O}=this.props;return T.textMode===n.SV.Auto&&(M.defaults.displayName||!O)?n.SV.ValueAndName:T.textMode}render(){const{height:T,options:M,width:O,data:S,renderCounter:v}=this.props;return l.createElement(p.S,{getValues:this.getValues,getAlignmentFactors:c.XS,renderValue:this.renderValue,width:O,height:T,source:S,itemSpacing:3,renderCounter:v,autoGrid:!0,orientation:M.orientation})}}var h=e(23799);const P={colorMode:n.yp.Value,graphMode:n.$p.Area,justifyMode:n.F8.Auto,showPercentChange:!1,textMode:n.SV.Auto,wideLayout:!0};var y=e(38824);class C{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData)return;const O=T.getListAppender({name:y.m.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:S=>{S.options.reduceOptions.values&&(S.options.reduceOptions.limit=1)}}});M.hasStringField&&M.hasNumberField&&M.frameCount===1&&M.rowCountTotal<10&&(O.append({name:y.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),O.append({name:y.m.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.Background}})),M.stringFieldCount===1&&M.frameCount===1&&M.rowCountTotal<10&&M.fieldCount===1&&O.append({name:y.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.None}}),M.hasNumberField&&M.hasTimeField&&(O.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:y.m.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.$p.None,colorMode:n.yp.Background}}))}}const f=new t.m(a).useFieldConfig().setPanelOptions(D=>{const T=["Stat styles"];(0,h.L)(D),(0,h.h)(D,T),r.I(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:T,settings:{options:[{value:n.SV.Auto,label:"Auto"},{value:n.SV.Value,label:"Value"},{value:n.SV.ValueAndName,label:"Value and name"},{value:n.SV.Name,label:"Name"},{value:n.SV.None,label:"None"}]},defaultValue:P.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:T,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:P.wideLayout,showIf:M=>M.textMode===n.SV.ValueAndName}),D.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.yp.Value,category:T,settings:{options:[{value:n.yp.None,label:"None"},{value:n.yp.Value,label:"Value"},{value:n.yp.Background,label:"Background Gradient"},{value:n.yp.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:T,defaultValue:P.graphMode,settings:{options:[{value:n.$p.None,label:"None"},{value:n.$p.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:P.justifyMode,category:T,settings:{options:[{value:n.F8.Auto,label:"Auto"},{value:n.F8.Center,label:"Center"}]}}).addBooleanSwitch({path:"showPercentChange",name:"Show percent change",defaultValue:P.showPercentChange,category:T,showIf:M=>!M.reduceOptions.values})}).setNoPadding().setPanelChangeHandler(m).setSuggestionsSupplier(new C).setMigrationHandler(s._$)},21164:(Q,I,e)=>{"use strict";e.d(I,{u:()=>t});const t=(n,r)=>{const s=[],o=new Set;if((n.config.links?.length??0)>0&&n.getLinks!=null){const m=n.values[r],i=n.display?n.display(m):{text:`${m}`,numeric:+m};n.getLinks({calculatedValue:i,valueRowIndex:r}).forEach(l=>{const d=`${l.title}/${l.href}`;o.has(d)||(s.push(l),o.add(d))})}return s}},65885:(Q,I,e)=>{"use strict";e.d(I,{S5:()=>a,fq:()=>m,gy:()=>h,l1:()=>p});var t=e(2543),n=e.n(t),r=e(1173),s=e(50082),o=e(11261);const m=P=>(!P.pluginVersion&&"columns"in P&&console.log("Was angular table",P),P.options),i={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},l={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},d={cell:"color-background",row:"color-background",value:"color-text"},c=(P,y)=>[-1/0,...P].map((C,f)=>({color:y[f],value:(0,t.isNumber)(C)?C:parseInt(C,10)})),g=(P,y)=>{const C=P.transformations??[];if(Object.keys(i).includes(y.transform)){const f={reducers:[]};y.transform==="timeseries_aggregations"&&(f.includeTimeField=!1,f.reducers=y.columns.map(D=>l[D.value])),C.push({id:i[y.transform],options:f})}return C},u=P=>{const C={matcher:{id:/^\/.*\/$/.test(P.pattern)?r.Ct.byRegexp:r.Ct.byName,options:P.pattern},properties:[]};return P.alias&&C.properties.push({id:"displayName",value:P.alias}),P.unit&&C.properties.push({id:"unit",value:P.unit}),P.decimals&&C.properties.push({id:"decimals",value:P.decimals}),P.type==="date"&&C.properties.push({id:"unit",value:`time: ${P.dateFormat}`}),P.type==="hidden"&&C.properties.push({id:"custom.hidden",value:!0}),P.link&&C.properties.push({id:"links",value:[{title:(0,t.defaultTo)(P.linkTooltip,""),url:(0,t.defaultTo)(P.linkUrl,""),targetBlank:(0,t.defaultTo)(P.linkTargetBlank,!1)}]}),P.colorMode&&C.properties.push({id:"custom.cellOptions",value:{type:d[P.colorMode]}}),P.align&&C.properties.push({id:"custom.align",value:P.align==="auto"?null:P.align}),P.thresholds?.length&&C.properties.push({id:"thresholds",value:{mode:s.O.Absolute,steps:c(P.thresholds,P.colors)}}),C},E=P=>{let y={custom:{}};if(P){if(y=(0,t.omitBy)({unit:P.unit,decimals:P.decimals,displayName:P.alias,custom:{align:P.align==="auto"?null:P.align}},t.isNil),P.thresholds.length){const C={mode:s.O.Absolute,steps:c(P.thresholds,P.colors)};y.thresholds=C}P.colorMode&&(y.custom.cellOptions={type:d[P.colorMode]})}return y},p=(P,y,C)=>{if(y==="table-old"&&C.angular){const f=C.angular,D=g(P,f),T=f.styles.find(S=>S.pattern==="/.*/"),M=E(T),O=f.styles.filter(S=>S.pattern!=="/.*/").map(u);P.transformations=D,P.fieldConfig={defaults:M,overrides:O}}return{}},b=P=>P?.filter(y=>y.meta?.custom?.parentRowIndex===void 0)||[P?.[0]],a=P=>{const y=[];return b(P).filter(f=>!!f&&f.length!==0)?.forEach(f=>{const D=P?.filter(S=>f.refId===S.refId&&S.meta?.custom?.parentRowIndex!==void 0),T=(0,t.groupBy)(D,S=>S.meta?.custom?.parentRowIndex),M=Object.keys(T).map(S=>T[S]),O={...f};D&&D.length>0&&O.fields.push({name:"nested",type:o.PU.nestedFrames,config:{},values:M}),y.push(O)}),y},h=P=>P?.some(y=>y.meta?.custom?.parentRowIndex!==void 0)},11082:(Q,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(96540),n=e(66864),r=e(94354),s=e(51275);const o=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],m=({value:i,onChange:l,item:d})=>{const c=typeof i=="number";return o[1].value=c?i:36e5,t.createElement(n.Gy,null,t.createElement(r.z,{value:i,options:o,onChange:l}),c&&t.createElement(s.g,{value:i,onChange:l,inputPrefix:s.F.GreaterThan,isTime:d.settings?.isTime??!1}))}},43228:(Q,I,e)=>{"use strict";e.d(I,{F:()=>d});var t=e(96540),n=e(66864),r=e(94354),s=e(88323),o=e(29158);const m=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],i=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(g=>({label:g,value:g})),l=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(g=>({label:g,value:g})),d=({value:g,onChange:u})=>{const E=(0,t.useMemo)(()=>g?.fill==="dash"?i:l,[g]),p=(0,t.useMemo)(()=>{if(!g?.dash?.length)return E[0];const b=g.dash?.join(", "),a=E.find(h=>h.value===b);return a||{label:b,value:b}},[g,E]);return t.createElement(n.Gy,null,t.createElement(r.z,{value:g?.fill||"solid",options:m,onChange:b=>{let a;b==="dot"?a=c(l[0].value):b==="dash"&&(a=c(i[0].value)),u({...g,fill:b,dash:a})}}),g?.fill&&g?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.l6,{allowCustomValue:!0,options:E,value:p,width:20,onChange:b=>{u({...g,dash:c(b.value??"")})},formatCreateLabel:b=>`Segments: ${c(b).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(o.K,{name:"question-circle",tooltip:"Help"})))))};function c(g){const u=[];for(const E of g.split(/(?:,| )+/)){const p=Number.parseInt(E,10);isNaN(p)||u.push(p)}return u}},51275:(Q,I,e)=>{"use strict";e.d(I,{F:()=>s,g:()=>o});var t=e(96540),n=e(65879),r=e(10354),s=(m=>(m.LessThan="lessthan",m.GreaterThan="greaterthan",m))(s||{});const o=({value:m,onChange:i,inputPrefix:l,isTime:d})=>{let c=n.secondsToHms(m/1e3);d||(c="10");const g=b=>{let a=!1;if(b)try{d&&n.isValidTimeSpan(b)?a=n.intervalToMs(b):a=Number(b)}catch(h){console.warn("ERROR",h)}i(a)},u=b=>{b.key==="Enter"&&g(b.currentTarget.value)},E=b=>{g(b.currentTarget.value)},p=l==="greaterthan"?t.createElement("div",null,">"):l==="lessthan"?t.createElement("div",null,"<"):null;return t.createElement(r.p,{autoFocus:!1,placeholder:"never",width:10,defaultValue:c,onKeyDown:u,onBlur:E,prefix:p,spellCheck:!1})}},34163:(Q,I,e)=>{"use strict";e.d(I,{e:()=>m});var t=e(96540),n=e(66864),r=e(94354),s=e(51275);const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],m=({value:i,onChange:l,item:d})=>{const c=typeof i=="number";return o[2].value=c?i:36e5,t.createElement(n.Gy,null,t.createElement(r.z,{value:i,options:o,onChange:l}),c&&t.createElement(s.g,{value:i,onChange:l,inputPrefix:s.F.LessThan,isTime:d.settings?.isTime??!1}))}},24882:(Q,I,e)=>{"use strict";e.d(I,{D:()=>r});var t=e(96540),n=e(88323);const r=({item:s,value:o,onChange:m,id:i})=>{const l=(0,t.useCallback)(d=>{m({mode:d.value})},[m]);return t.createElement(n.l6,{inputId:i,value:o.mode,options:s.settings?.options??[],onChange:l})}},22731:(Q,I,e)=>{"use strict";e.d(I,{$:()=>E,k:()=>u});var t=e(32196),n=e(96540),r=e(11261),s=e(28240),o=e(52622),m=e(40845),i=e(11389),l=e(58749),d=e(52415),c=e(10875),g=e(21164);const u=({frames:p,seriesFrame:b,dataIdxs:a,seriesIdx:h,mode:P=o.$N.Single,sortOrder:y=o.xB.None,scrollable:C=!1,isPinned:f,annotate:D})=>{const T=(0,m.of)(E),M=b.fields[0],O=M.display(M.values[a[0]]).text,S=(0,c.cp)(b.fields,M,a,h,P,y,A=>A.type===r.PU.number||A.type===r.PU.enum);let v;if(f&&h!=null){const A=b.fields[h],R=a[h],B=(0,g.u)(A,R);v=n.createElement(l.S,{dataLinks:B,annotate:D})}const x={label:M.type===r.PU.time?"":(0,s.Ct)(M,b,p),value:O};return n.createElement("div",{className:T.wrapper},n.createElement(d.A,{item:x,isPinned:f}),n.createElement(i.o,{items:S,isPinned:f,scrollable:C}),v)},E=()=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column"})})},41706:(Q,I,e)=>{"use strict";e.d(I,{S:()=>p,V:()=>a});var t=e(37055),n=e(24293),r=e(11261),s=e(27310),o=e(52622),m=e(52198),i=e(56675),l=e(38248),d=e(11404),c=e(11082),g=e(43228),u=e(34163),E=e(24882);const p={drawStyle:o.GR.Line,lineInterpolation:o.dx.Linear,lineWidth:1,fillOpacity:0,gradientMode:o.on.None,barAlignment:o.Nj.Center,stacking:{mode:o.gs.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},b=["Graph styles"];function a(h,P=!0){return{standardOptions:{[t.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.Y.PaletteClassic}}},useCustomConfig:y=>{y.addRadio({path:"drawStyle",name:"Style",category:b,defaultValue:h.drawStyle,settings:{options:m.t.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:b,defaultValue:h.lineInterpolation,settings:{options:m.t.lineInterpolation},showIf:C=>C.drawStyle===o.GR.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:b,defaultValue:h.barAlignment,settings:{options:m.t.barAlignment},showIf:C=>C.drawStyle===o.GR.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:b,defaultValue:h.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:C=>C.drawStyle!==o.GR.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:b,defaultValue:h.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:C=>C.drawStyle!==o.GR.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:b,defaultValue:m.t.fillGradient[0].value,settings:{options:m.t.fillGradient},showIf:C=>C.drawStyle!==o.GR.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:b,hideFromDefaults:!0,settings:{filter:C=>C.type===r.PU.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:b,showIf:C=>C.drawStyle===o.GR.Line,editor:g.F,override:g.F,process:s.hS,shouldApply:C=>C.type===r.PU.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:b,defaultValue:!1,editor:u.e,override:u.e,showIf:C=>C.drawStyle===o.GR.Line,shouldApply:C=>C.type!==r.PU.time,process:s.hS,settings:{isTime:P}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:b,defaultValue:!1,editor:c.Z,override:c.Z,showIf:C=>C.drawStyle===o.GR.Line,shouldApply:C=>C.type!==r.PU.time,process:s.hS,settings:{isTime:P}}).addRadio({path:"showPoints",name:"Show points",category:b,defaultValue:m.t.showPoints[0].value,settings:{options:m.t.showPoints},showIf:C=>C.drawStyle!==o.GR.Points}).addSliderInput({path:"pointSize",name:"Point size",category:b,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:C=>C.showPoints!==o.yL.Never||C.drawStyle===o.GR.Points}),i.I(y,h.stacking,b),y.addSelect({category:b,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:o.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:o.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),l.r(y,h),d.e(y),y.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:o.Ly.Off},settings:{options:m.t.thresholdsDisplayModes},editor:E.D,override:E.D,process:s.hS,shouldApply:()=>!0})}}}},62567:(Q,I,e)=>{"use strict";e.d(I,{W:()=>ie});var t=e(32196),n=e(96540),r=e(40961),s=e(84140),o=e(33948),m=e(52622),i=e(23596),l=e(24284),d=e(17464),c=e(40845),g=e(18491),u=e(36376),E=e(49785),p=e(29647),b=e(41053),a=e(72724),h=e(42994),P=e(79041),y=e(67061),C=e(88575),f=e(21744),D=e(55852),T=e(72235),M=e(99818),O=e(10154);const S=({annoVals:q,annoIdx:Z,dismiss:J,timeZone:G,...ne})=>{const te=(0,c.of)(v),{onAnnotationCreate:oe,onAnnotationUpdate:le}=(0,P.d2)(),ue=(0,n.useRef)(null);(0,p.A)(ue,J);const[Te,he]=(0,b.A)(async pe=>{const Ue=await oe(pe);return J(),Ue}),[re,De]=(0,b.A)(async pe=>{const Ue=await le(pe);return J(),Ue}),Fe=pe=>(0,a.LE)(pe,{format:h.WC.fullDate,timeZone:G}),Ee=q.id?.[Z]!=null,Me=q.isRegion?.[Z],ze=Ee?De:he,xe=Ee?re:Te,We=Me?`${Fe(q.time[Z])} - ${Fe(q.timeEnd[Z])}`:Fe(q.time[Z]),be=({tags:pe,description:Ue})=>{ze({id:q.id?.[Z]??void 0,tags:pe,description:Ue,from:Math.round(q.time[Z]),to:Math.round(q.timeEnd?.[Z]??q.time[Z])})};return n.createElement("div",{ref:ue,className:te.editor,...ne},n.createElement("div",{className:te.header},n.createElement(y.B,{justifyContent:"space-between",alignItems:"center"},n.createElement("div",null,Ee?"Edit annotation":"Add annotation"),n.createElement("div",null,We))),n.createElement(T.l,{onSubmit:be,defaultValues:{description:q.text?.[Z],tags:q.tags?.[Z]||[]}},({register:pe,errors:Ue,control:we})=>n.createElement(n.Fragment,null,n.createElement("div",{className:te.content},n.createElement(C.D,{label:"Description",invalid:!!Ue.description,error:Ue?.description?.message},n.createElement(f.f,{className:te.textarea,...pe("description",{required:"Annotation description is required"})})),n.createElement(C.D,{label:"Tags"},n.createElement(E.xI,{control:we,name:"tags",render:({field:{ref:je,onChange:He,...rt}})=>n.createElement(M.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:He,tagOptions:O.vy,tags:rt.value})}))),n.createElement("div",{className:te.footer},n.createElement(y.B,{justifyContent:"flex-end"},n.createElement(D.$n,{size:"sm",variant:"secondary",onClick:J,fill:"outline"},"Cancel"),n.createElement(D.$n,{size:"sm",type:"submit",disabled:xe?.loading},xe?.loading?"Saving":"Save"))))))},v=q=>({editor:(0,t.css)({background:q.colors.background.primary,border:`1px solid ${q.colors.border.weak}`,borderRadius:q.shape.radius.default,boxShadow:q.shadows.z3,userSelect:"text",width:"460px"}),content:(0,t.css)({padding:q.spacing(1)}),header:(0,t.css)({borderBottom:`1px solid ${q.colors.border.weak}`,padding:q.spacing(.5,1),fontWeight:q.typography.fontWeightBold,fontSize:q.typography.fontSize,color:q.colors.text.primary}),footer:(0,t.css)({borderTop:`1px solid ${q.colors.border.weak}`,padding:q.spacing(1,1)}),textarea:(0,t.css)({color:q.colors.text.secondary,fontSize:q.typography.bodySmall.fontSize})});var x=e(40672),A=e(66864),R=e(29158),B=e(78369),U=e(55907);const w=()=>!1,K=({annoVals:q,annoIdx:Z,timeZone:J,onEdit:G})=>{const ne=q.id?.[Z],te=(0,c.of)(N),{canEditAnnotations:oe=w,canDeleteAnnotations:le=w,onAnnotationDelete:ue}=(0,P.d2)(),Te=q.dashboardUID?.[Z],he=oe(Te),re=le(Te)&&ue!=null,De=We=>(0,a.LE)(We,{format:h.WC.fullDate,timeZone:J});let Fe=De(q.time[Z]),Ee=q.text?.[Z]??"";q.isRegion?.[Z]&&(Fe+=" - "+De(q.timeEnd[Z]));let Me;q.login?.[Z]&&q.avatarUrl?.[Z]&&(Me=n.createElement("img",{className:te.avatar,alt:"Annotation avatar",src:q.avatarUrl[Z]}));let ze=null,xe="";if(q.alertId?.[Z]!==void 0&&q.newState?.[Z]){const We=U.A.getStateDisplayModel(q.newState[Z]);ze=n.createElement("div",{className:te.alertState},n.createElement("i",{className:We.stateClass},We.text)),xe=q.data?.[Z]?U.A.getAlertAnnotationText(q.data[Z]):""}else q.title?.[Z]&&(Ee=q.title[Z]+(Ee?`<br />${Ee}`:""));return n.createElement("div",{className:te.wrapper},n.createElement("div",{className:te.header},n.createElement(A.Gy,{justify:"space-between",align:"center",spacing:"md"},n.createElement("div",{className:te.meta},n.createElement("span",null,Me,ze),Fe),(he||re)&&n.createElement("div",{className:te.editControls},he&&n.createElement(R.K,{name:"pen",size:"sm",onClick:G,tooltip:"Edit"}),re&&n.createElement(R.K,{name:"trash-alt",size:"sm",onClick:()=>ue(ne),tooltip:"Delete"})))),n.createElement("div",{className:te.body},Ee&&n.createElement("div",{className:te.text,dangerouslySetInnerHTML:{__html:x.sQ.sanitize(Ee)}}),xe,n.createElement("div",null,n.createElement(A.Gy,{spacing:"xs",wrap:!0},q.tags?.[Z]?.map((We,be)=>n.createElement(B.v,{name:We,key:`${We}-${be}`}))))))},N=q=>({wrapper:(0,t.css)({zIndex:q.zIndex.tooltip,whiteSpace:"initial",borderRadius:q.shape.radius.default,background:q.colors.background.primary,border:`1px solid ${q.colors.border.weak}`,boxShadow:q.shadows.z2,userSelect:"text"}),header:(0,t.css)({padding:q.spacing(.5,1),borderBottom:`1px solid ${q.colors.border.weak}`,fontWeight:q.typography.fontWeightBold,fontSize:q.typography.fontSize,color:q.colors.text.primary,display:"flex"}),meta:(0,t.css)({display:"flex",justifyContent:"space-between",color:q.colors.text.primary,fontWeight:400}),editControls:(0,t.css)({display:"flex",alignItems:"center","> :last-child":{marginLeft:0}}),body:(0,t.css)({padding:q.spacing(1),fontSize:q.typography.bodySmall.fontSize,color:q.colors.text.secondary,fontWeight:400,a:{color:q.colors.text.link,"&:hover":{textDecoration:"underline"}}}),text:(0,t.css)({paddingBottom:q.spacing(1)}),avatar:(0,t.css)({borderRadius:q.shape.radius.circle,width:16,height:16,marginRight:q.spacing(1)}),alertState:(0,t.css)({paddingRight:q.spacing(1),fontWeight:q.typography.fontWeightMedium})}),L=0,V=1,F=2,z=({annoVals:q,annoIdx:Z,className:J,style:G,exitWipEdit:ne,timeZone:te,portalRoot:oe})=>{const le=(0,c.of)(Y),[ue,Te]=(0,n.useState)(ne!=null?V:L),{refs:he,floatingStyles:re}=(0,u.we)({open:!0,placement:"bottom",middleware:[(0,g.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,g.BN)()],whileElementsMounted:g.ll,strategy:"fixed"}),De=ue===F?n.createElement(K,{annoIdx:Z,annoVals:q,timeZone:te,onEdit:()=>Te(V)}):ue===V?n.createElement(S,{annoIdx:Z,annoVals:q,timeZone:te,dismiss:()=>{ne?.(),Te(L)}}):null;return n.createElement("div",{ref:he.setReference,className:J,style:G,onMouseEnter:()=>ue!==V&&Te(F),onMouseLeave:()=>ue!==V&&Te(L)},De&&(0,r.createPortal)(n.createElement("div",{ref:he.setFloating,className:le.annoBox,style:re},De),oe))},Y=q=>({annoBox:(0,t.css)({top:0,left:0,zIndex:q.zIndex.tooltip,borderRadius:q.shape.radius.default,position:"absolute",background:q.colors.background.primary,border:`1px solid ${q.colors.border.weak}`,boxShadow:q.shadows.z2,userSelect:"text",minWidth:"300px"})}),H=(q,Z,J,G,ne)=>{q.beginPath(),q.moveTo(G,Z),q.lineTo(G,J),q.strokeStyle=ne,q.stroke()},k=(0,s.A)(l.Mk).toHex8String();function ee(q){let Z={};return q.fields.forEach(J=>{Z[J.name]=J.values}),Z}const ie=({annotations:q,timeZone:Z,config:J,newRange:G,setNewRange:ne,canvasRegionRendering:te=!0})=>{const[oe,le]=(0,n.useState)(),[ue]=(0,n.useState)(()=>(0,d.gF)()),Te=(0,c.of)(fe),he=(0,c.$j)().visualization.getColorByName,[re,De]=(0,n.useReducer)(We=>We+1,0),Fe=(0,n.useMemo)(()=>{let We=q.filter(be=>be.name!=="exemplar"&&be.length>0&&be.fields.some(pe=>pe.name==="time"));if(G){let be=G.to>G.from;const pe=(0,o.I)([{time:G.from,timeEnd:be?G.to:null,isRegion:be,color:k}]);pe.meta={dataTopic:m.QR.Annotations,custom:{isWip:!0}},We.push(pe)}return We},[q,G]),Ee=(0,n.useCallback)(()=>{ne(null)},[ne]),Me=(0,n.useRef)(Fe);Me.current=Fe;const ze=(0,n.useRef)(G);ze.current=G;const xe=(0,n.useRef)();if((0,n.useLayoutEffect)(()=>{J.addHook("ready",We=>{let be=We.root.querySelector(".u-axis");xe.current=be,le(We)}),J.addHook("draw",We=>{let be=Me.current;const pe=We.ctx;let Ue=We.bbox.top,we=Ue+We.bbox.height;pe.save(),pe.beginPath(),pe.rect(We.bbox.left,We.bbox.top,We.bbox.width,We.bbox.height),pe.clip(),pe.lineWidth=2,pe.setLineDash([5,5]),be.forEach(je=>{let He=ee(je);for(let rt=0;rt<He.time.length;rt++){let Je=he(He.color?.[rt]||k),Ve=We.valToPos(He.time[rt],"x",!0);if(!He.isRegion?.[rt])H(pe,Ue,we,Ve,Je);else if(te){H(pe,Ue,we,Ve,Je);let Oe=We.valToPos(He.timeEnd[rt],"x",!0);H(pe,Ue,we,Oe,Je),pe.fillStyle=i.alpha(Je,.1),pe.fillRect(Ve,Ue,Oe-Ve,We.bbox.height)}}}),pe.restore()})},[J,te,he]),(0,n.useEffect)(()=>{oe&&(oe.redraw(),setTimeout(()=>{De()},0))},[Fe,oe]),oe){let We=Fe.flatMap((be,pe)=>{let Ue=ee(be),we=[];for(let je=0;je<Ue.time.length;je++){let He=he(Ue.color?.[je]||l.Mk),rt=oe.valToPos(Ue.time[je],"x"),Je=null,Ve="",Oe=!0;if(Ue.isRegion?.[je]){let Ne=oe.valToPos(Ue.timeEnd?.[je],"x");if(Oe=rt<oe.rect.width&&Ne>0,Oe){let ye=Math.max(0,rt),se=Math.min(oe.rect.width,Ne);Je={left:ye,background:He,width:se-ye},Ve=Te.annoRegion}}else Oe=rt>0&&rt<=oe.rect.width,Oe&&(Je={left:rt,borderBottomColor:He},Ve=Te.annoMarker);if(Oe){let Ne=be.meta?.custom?.isWip;we.push(n.createElement(z,{annoIdx:je,annoVals:Ue,className:Ve,style:Je,timeZone:Z,key:`${pe}:${je}`,exitWipEdit:Ne?Ee:null,portalRoot:ue}))}}return we});return(0,r.createPortal)(We,xe.current)}return null},fe=()=>({annoMarker:(0,t.css)({position:"absolute",width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottomWidth:"5px",borderBottomStyle:"solid",transform:"translateX(-50%)",cursor:"pointer",zIndex:1}),annoRegion:(0,t.css)({position:"absolute",height:"5px",cursor:"pointer",zIndex:1})})},99140:(Q,I,e)=>{"use strict";e.d(I,{Gu:()=>s,JD:()=>o,M_:()=>n,k3:()=>r});var t=e(48594);let n;function r(m){n=m}function s(){return!n||!n.getState?{templating:{...t.L1,lastKey:"key"}}:n.getState()}function o(m){if(!(!n||!n.getState))return n.dispatch(m)}},24897:(Q,I,e)=>{"use strict";e.d(I,{RG:()=>r,Vz:()=>s,XT:()=>t.X,Xe:()=>n});var t=e(62625),n=(o=>(o[o.Admin=4]="Admin",o[o.Editor=2]="Editor",o[o.Member=0]="Member",o[o.Viewer=1]="Viewer",o))(n||{}),r=(o=>(o.View="View",o.Edit="Edit",o.Admin="Admin",o))(r||{}),s=(o=>(o.Folder="dash-folder",o.Dashboard="dash-db",o.AlertFolder="dash-folder-alerting",o))(s||{})},50271:()=>{"use strict"},18625:()=>{"use strict"},14276:()=>{"use strict"},95425:(Q,I,e)=>{"use strict";e.d(I,{Z4:()=>t,_g:()=>n,d9:()=>r});var t=(s=>(s.Home="home-dashboard",s.New="new-dashboard",s.Normal="normal-dashboard",s.Path="path-dashboard",s.Scripted="scripted-dashboard",s.Public="public-dashboard",s.Embedded="embedded-dashboard",s.Report="report-dashboard",s))(t||{}),n=(s=>(s.NotStarted="Not started",s.Fetching="Fetching",s.Services="Services",s.Failed="Failed",s.Completed="Completed",s))(n||{}),r=(s=>(s.TV="tv",s.Full="full",s))(r||{})},62543:()=>{"use strict"},28444:(Q,I,e)=>{"use strict";e.d(I,{Bt:()=>P,Cf:()=>u,Eu:()=>S,Io:()=>h,JI:()=>d,PR:()=>c,Ps:()=>D,Q$:()=>g,Rh:()=>C,S8:()=>M,U0:()=>b,VZ:()=>y,Vz:()=>f,XM:()=>p,Yn:()=>m,aP:()=>O,bG:()=>o,bY:()=>T,i0:()=>R,sL:()=>A,u4:()=>i,vk:()=>E,xL:()=>a,xc:()=>v,yj:()=>x,zq:()=>l});var t=e(89550),n=e(65463);const r=(0,t.R)("ds-request-response"),s=(0,t.R)("ds-request-error"),o=(0,t.R)("template-variable-value-updated"),m=(0,t.R)("graph-click"),i=(0,t.R)("threshold-changed");class l extends n.a{static{this.type="panel-queries-changed"}}class d extends n.a{static{this.type="panel-transformations-changed"}}class c extends n.a{static{this.type="panels-options-changed"}}class g extends n.a{static{this.type="dashboard-panels-changed"}}class u extends n.a{static{this.type="dashboard-meta-changed"}}class E extends n.a{static{this.type="panel-directive-ready"}}class p extends n.a{static{this.type="render"}}class b extends n.x{static{this.type="zoom-out"}}var a=(B=>(B[B.Left=-1]="Left",B[B.Right=1]="Right",B))(a||{});class h extends n.x{static{this.type="shift-time"}}class P extends n.a{static{this.type="copy-time"}}class y extends n.x{static{this.type="paste-time"}}class C extends n.x{static{this.type="absolute-time"}}class f extends n.x{static{this.type="remove-panel"}}class D extends n.x{static{this.type="show-modal"}}class T extends n.x{static{this.type="show-confirm-modal"}}class M extends n.x{static{this.type="show-react-modal"}}class O extends n.a{static{this.type="hide-modal"}}class S extends n.a{static{this.type="dashboard-saved"}}class v extends n.x{static{this.type="annotation-query-started"}}class x extends n.x{static{this.type="annotation-query-finished"}}class A extends n.x{static{this.type="panel-edit-started"}}class R extends n.x{static{this.type="panel-edit-finished"}}},76698:(Q,I,e)=>{"use strict";e.d(I,{IW:()=>t,aA:()=>r,jH:()=>s,sG:()=>n});var t=(o=>(o[o.CLOSE_PANE=0]="CLOSE_PANE",o[o.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",o[o.CLOSE_EDITOR=2]="CLOSE_EDITOR",o))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var r=(o=>(o.table="table",o.raw="raw",o))(r||{});const s=["table","raw"]},8904:()=>{"use strict"},31678:(Q,I,e)=>{"use strict";e.d(I,{AccessControlAction:()=>C,AppNotificationSeverity:()=>u,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>b.IW,CoreEvents:()=>f,DashboardInitPhase:()=>s._g,DashboardRoutes:()=>s.Z4,EXPLORE_GRAPH_STYLES:()=>b.sG,KioskMode:()=>s.d9,OrgRole:()=>o.XT,PermissionLevelString:()=>o.RG,SearchQueryType:()=>o.Vz,ServiceAccountStateFilter:()=>l,TABLE_RESULTS_STYLE:()=>b.aA,TeamPermissionLevel:()=>o.Xe,addListener:()=>a.ch,createAsyncThunk:()=>a.zD,timeoutMap:()=>p,useDispatch:()=>a.wA,useSelector:()=>a.d4});var t=e(50271),n=e(54034),r=e(8904),s=e(95425),o=e(24897),m=e(18625),i=e(64998),l=(D=>(D.All="All",D.WithExpiredTokens="WithExpiredTokens",D.External="External",D.Disabled="Disabled",D))(l||{}),d=e(62543),c=e(77237),g=e(75330),u=(D=>(D.Success="success",D.Warning="warning",D.Error="error",D.Info="info",D))(u||{}),E=(D=>(D[D.Success=3e3]="Success",D[D.Warning=5e3]="Warning",D[D.Error=7e3]="Error",D))(E||{});const p={success:3e3,warning:5e3,error:7e3,info:3e3};var b=e(76698),a=e(64756),h=e(13868),P=e(14276),y=e(90697),C=(D=>(D.UsersRead="users:read",D.UsersWrite="users:write",D.UsersAuthTokenList="users.authtoken:read",D.UsersAuthTokenUpdate="users.authtoken:write",D.UsersPasswordUpdate="users.password:write",D.UsersDelete="users:delete",D.UsersCreate="users:create",D.UsersEnable="users:enable",D.UsersDisable="users:disable",D.UsersPermissionsUpdate="users.permissions:write",D.UsersLogout="users:logout",D.UsersQuotasList="users.quotas:read",D.UsersQuotasUpdate="users.quotas:write",D.ServiceAccountsRead="serviceaccounts:read",D.ServiceAccountsCreate="serviceaccounts:create",D.ServiceAccountsWrite="serviceaccounts:write",D.ServiceAccountsDelete="serviceaccounts:delete",D.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",D.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",D.OrgsRead="orgs:read",D.OrgsPreferencesRead="orgs.preferences:read",D.OrgsWrite="orgs:write",D.OrgsPreferencesWrite="orgs.preferences:write",D.OrgsCreate="orgs:create",D.OrgsDelete="orgs:delete",D.OrgUsersRead="org.users:read",D.OrgUsersAdd="org.users:add",D.OrgUsersRemove="org.users:remove",D.OrgUsersWrite="org.users:write",D.LDAPUsersRead="ldap.user:read",D.LDAPUsersSync="ldap.user:sync",D.LDAPStatusRead="ldap.status:read",D.DataSourcesExplore="datasources:explore",D.DataSourcesRead="datasources:read",D.DataSourcesCreate="datasources:create",D.DataSourcesWrite="datasources:write",D.DataSourcesDelete="datasources:delete",D.DataSourcesPermissionsRead="datasources.permissions:read",D.DataSourcesCachingRead="datasources.caching:read",D.DataSourcesInsightsRead="datasources.insights:read",D.ActionServerStatsRead="server.stats:read",D.ActionTeamsCreate="teams:create",D.ActionTeamsDelete="teams:delete",D.ActionTeamsRead="teams:read",D.ActionTeamsWrite="teams:write",D.ActionTeamsPermissionsRead="teams.permissions:read",D.ActionTeamsPermissionsWrite="teams.permissions:write",D.ActionRolesList="roles:read",D.ActionTeamsRolesList="teams.roles:read",D.ActionTeamsRolesAdd="teams.roles:add",D.ActionTeamsRolesRemove="teams.roles:remove",D.ActionUserRolesList="users.roles:read",D.ActionUserRolesAdd="users.roles:add",D.ActionUserRolesRemove="users.roles:remove",D.DashboardsRead="dashboards:read",D.DashboardsWrite="dashboards:write",D.DashboardsDelete="dashboards:delete",D.DashboardsCreate="dashboards:create",D.DashboardsPermissionsRead="dashboards.permissions:read",D.DashboardsPermissionsWrite="dashboards.permissions:write",D.DashboardsPublicWrite="dashboards.public:write",D.FoldersRead="folders:read",D.FoldersWrite="folders:write",D.FoldersDelete="folders:delete",D.FoldersCreate="folders:create",D.FoldersPermissionsRead="folders.permissions:read",D.FoldersPermissionsWrite="folders.permissions:write",D.ActionSupportBundlesCreate="support.bundles:create",D.ActionSupportBundlesRead="support.bundles:read",D.ActionSupportBundlesDelete="support.bundles:delete",D.AlertingRuleCreate="alert.rules:create",D.AlertingRuleRead="alert.rules:read",D.AlertingRuleUpdate="alert.rules:write",D.AlertingRuleDelete="alert.rules:delete",D.AlertingInstanceCreate="alert.instances:create",D.AlertingInstanceUpdate="alert.instances:write",D.AlertingInstanceRead="alert.instances:read",D.AlertingNotificationsRead="alert.notifications:read",D.AlertingNotificationsWrite="alert.notifications:write",D.AlertingRuleExternalWrite="alert.rules.external:write",D.AlertingRuleExternalRead="alert.rules.external:read",D.AlertingInstancesExternalWrite="alert.instances.external:write",D.AlertingInstancesExternalRead="alert.instances.external:read",D.AlertingNotificationsExternalWrite="alert.notifications.external:write",D.AlertingNotificationsExternalRead="alert.notifications.external:read",D.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",D.AlertingProvisioningRead="alert.provisioning:read",D.AlertingProvisioningWrite="alert.provisioning:write",D.ActionAPIKeysRead="apikeys:read",D.ActionAPIKeysCreate="apikeys:create",D.ActionAPIKeysDelete="apikeys:delete",D.PluginsInstall="plugins:install",D.PluginsWrite="plugins:write",D.SettingsRead="settings:read",D.SettingsWrite="settings:write",D))(C||{}),f=e(28444)},13868:()=>{"use strict"},54034:()=>{"use strict"},75330:()=>{"use strict"},77237:()=>{"use strict"},90697:()=>{"use strict"},64756:(Q,I,e)=>{"use strict";e.d(I,{ch:()=>m,d4:()=>s,wA:()=>r,zD:()=>o});var t=e(30038),n=e(63329);const r=n.useDispatch,s=n.useSelector,o=(i,l,d)=>(0,t.zD)(i,l,d),m=t.ch},38824:(Q,I,e)=>{"use strict";e.d(I,{m:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n.FlameGraph="Flame graph",n.Trace="Trace",n.NodeGraph="Node graph",n))(t||{})},94822:(Q,I,e)=>{"use strict";e.d(I,{Gi:()=>n,JS:()=>i,N1:()=>l,Q8:()=>d,Si:()=>r,cF:()=>t,lh:()=>m,s1:()=>s});var t=(c=>(c.Firing="firing",c.Inactive="inactive",c.Pending="pending",c))(t||{}),n=(c=>(c.Normal="Normal",c.Alerting="Alerting",c.Pending="Pending",c.NoData="NoData",c.Error="Error",c))(n||{});function r(c){return Object.values(t).includes(c)}function s(c){return Object.values(n).some(g=>g===c)}function o(c){const g=Object.values(t);return c!=null&&!g.includes(c)}function m(c){return o(c)?c.split(" ")[0]:c}var i=(c=>(c.Alerting="alerting",c.Recording="recording",c))(i||{}),l=(c=>(c.Cortex="Cortex",c.Mimir="Mimir",c.Prometheus="Prometheus",c.Thanos="Thanos",c))(l||{}),d=(c=>(c.Alerting="Alerting",c.NoData="NoData",c.KeepLast="KeepLast",c.OK="OK",c.Error="Error",c))(d||{})},54317:(Q,I,e)=>{"use strict";e.d(I,{$:()=>s,S:()=>n});var t=e(94822);function n(o,m){return(0,t.lh)(o.state)===m}var r=(o=>(o.Firing="firing",o))(r||{}),s=(o=>(o.Alerting="alerting",o.Pending="pending",o.Normal="inactive",o.NoData="nodata",o.Error="error",o))(s||{})},64998:()=>{"use strict"},72834:Q=>{const I="    ";function e(s){let o="";return s&&Object.keys(s).forEach(function(m){o+=m+":"+s[m]+";"}),o}function t(s){function o(i){return'class="'+i+'"'}function m(i){return'style="'+e(s["."+i])+'"'}return s?m:o}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function r(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Q.exports=function(s,o){let m="";const i=t(o);let l=function(c,g,u,E){if(!c.length)return g+" "+u;let p=g+`
`;return m+=I,c.forEach(function(b,a){p+=m+E(b)+(a<c.length-1?",":"")+`
`}),m=m.slice(0,-I.length),p+m+u};function d(c){if(c===void 0)return"";switch(n(c)){case"boolean":return"<span "+i("json-markup-bool")+">"+c+"</span>";case"number":return"<span "+i("json-markup-number")+">"+c+"</span>";case"date":return'<span class="json-markup-string">"'+r(c.toISOString())+'"</span>';case"null":return"<span "+i("json-markup-null")+">null</span>";case"string":return"<span "+i("json-markup-string")+'>"'+r(c.replace(/\n/g,`
`+m))+'"</span>';case"link":return"<span "+i("json-markup-string")+'>"<a href="'+encodeURI(c)+'">'+r(c)+'</a>"</span>';case"array":return l(c,"[","]",d);case"object":const g=Object.keys(c).filter(function(u){return c[u]!==void 0});return l(g,"{","}",function(u){return"<span "+i("json-markup-key")+'>"'+r(u)+'":</span> '+d(c[u])})}return""}return"<div "+i("json-markup")+">"+d(s)+"</div>"}},13609:()=>{(function(Q){"use strict";Q(function(){Q.support.transition=function(){var I=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==void 0)return t[n]}();return I&&{end:I}}()})})(window.jQuery),function(Q){"use strict";var I="[data-toggle=dropdown]",e=function(s){var o=Q(s).on("click.dropdown.data-api",this.toggle);Q("html").on("click.dropdown.data-api",function(){o.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(s){var o=Q(this),m,i;if(!o.is(".disabled, :disabled"))return m=n(o),i=m.hasClass("open"),t(),i||("ontouchstart"in document.documentElement&&Q('<div class="dropdown-backdrop"/>').insertBefore(Q(this)).on("click",t),m.toggleClass("open")),o.focus(),!1},keydown:function(s){var o,m,i,l,d,c;if(/(38|40|27)/.test(s.keyCode)&&(o=Q(this),s.preventDefault(),s.stopPropagation(),!o.is(".disabled, :disabled"))){if(l=n(o),d=l.hasClass("open"),!d||d&&s.keyCode==27)return s.which==27&&l.find(I).focus(),o.click();m=Q("[role=menu] li:not(.divider):visible a",l),m.length&&(c=m.index(m.filter(":focus")),s.keyCode==38&&c>0&&c--,s.keyCode==40&&c<m.length-1&&c++,~c||(c=0),m.eq(c).focus())}}};function t(){Q(".dropdown-backdrop").remove(),Q(I).each(function(){n(Q(this)).removeClass("open")})}function n(s){var o=s.attr("data-target"),m;return o||(o=s.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),m=o&&Q.find(o),(!m||!m.length)&&(m=s.parent()),m}var r=Q.fn.dropdown;Q.fn.dropdown=function(s){return this.each(function(){var o=Q(this),m=o.data("dropdown");m||o.data("dropdown",m=new e(this)),typeof s=="string"&&m[s].call(o)})},Q.fn.dropdown.Constructor=e,Q.fn.dropdown.noConflict=function(){return Q.fn.dropdown=r,this},Q(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(s){s.stopPropagation()}).on("click.dropdown.data-api",I,e.prototype.toggle).on("keydown.dropdown.data-api",I+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(Q){"use strict";var I=function(t,n){this.options=n,this.$element=Q(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",Q.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};I.prototype={constructor:I,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=Q.Event("show");this.$element.trigger(n),!(this.isShown||n.isDefaultPrevented())&&(this.isShown=!0,this.escape(),this.backdrop(function(){var r=Q.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),r&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),r?t.$element.one(Q.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var n=this;t=Q.Event("hide"),this.$element.trigger(t),!(!this.isShown||t.isDefaultPrevented())&&(this.isShown=!1,this.escape(),Q(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),Q.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;Q(document).on("focusin.modal",function(n){t.$element[0]!==n.target&&!t.$element.has(n.target).length&&t.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(n){n.which==27&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(Q.support.transition.end),t.hideModal()},500);this.$element.one(Q.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=Q.support.transition&&r;if(this.$backdrop=Q('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?Q.proxy(this.$element[0].focus,this.$element[0]):Q.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one(Q.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),Q.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(Q.support.transition.end,t):t()):t&&t()}};var e=Q.fn.modal;Q.fn.modal=function(t){return this.each(function(){var n=Q(this),r=n.data("modal"),s=Q.extend({},Q.fn.modal.defaults,n.data(),typeof t=="object"&&t);r||n.data("modal",r=new I(this,s)),typeof t=="string"?r[t]():s.show&&r.show()})},Q.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},Q.fn.modal.Constructor=I,Q.fn.modal.noConflict=function(){return Q.fn.modal=e,this},Q(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=Q(this),r=n.attr("href"),s=Q.find(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":Q.extend({remote:!/#/.test(r)&&r},s.data(),n.data());t.preventDefault(),s.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),function(Q){"use strict";var I=function(t,n){this.init("tooltip",t,n)};I.prototype={constructor:I,init:function(t,n,r){var s,o,m,i,l;for(this.type=t,this.$element=Q(n),this.options=this.getOptions(r),this.enabled=!0,m=this.options.trigger.split(" "),l=m.length;l--;)i=m[l],i=="click"?this.$element.on("click."+this.type,this.options.selector,Q.proxy(this.toggle,this)):i!="manual"&&(s=i=="hover"?"mouseenter":"focus",o=i=="hover"?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,Q.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,Q.proxy(this.leave,this)));this.options.selector?this._options=Q.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=Q.extend({},Q.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=Q.fn[this.type].defaults,r={},s;if(this._options&&Q.each(this._options,function(o,m){n[o]!=m&&(r[o]=m)},this),s=Q(t.currentTarget)[this.type](r).data(this.type),!s.options.delay||!s.options.delay.show)return s.show();clearTimeout(this.timeout),s.hoverState="in",this.timeout=setTimeout(function(){s.hoverState=="in"&&s.show()},s.options.delay.show)},leave:function(t){var n=Q(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,s,o,m,i=Q.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(i),i.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(Q.find(this.options.container)):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":m={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":m={top:n.top-s,left:n.left+n.width/2-r/2};break;case"left":m={top:n.top+n.height/2-s/2,left:n.left-r};break;case"right":m={top:n.top+n.height/2-s/2,left:n.left+n.width};break;case"topLeft":m={top:n.top-s,left:n.left+n.width/2-r*.1};break;case"topRight":m={top:n.top-s,left:n.left+n.width/2-r*.9};break;case"rightTop":m={top:n.top+n.height/2-s*.1,left:n.left+n.width};break;case"rightBottom":m={top:n.top+n.height/2-s*.9,left:n.left+n.width};break;case"bottomLeft":m={top:n.top+n.height,left:n.left+n.width/2-r*.1};break;case"bottomRight":m={top:n.top+n.height,left:n.left+n.width/2-r*.9};break;case"leftTop":m={top:n.top+n.height/2-s*.1,left:n.left-r};break;case"leftBottom":m={top:n.top+n.height/2-s*.9,left:n.left-r};break}this.applyPlacement(m,o),this.$element.trigger("shown")}},applyPlacement:function(t,n){var r=this.tip(),s=r[0].offsetWidth,o=r[0].offsetHeight,m,i,l,d;r.offset(t).addClass(n).addClass("in"),m=r[0].offsetWidth,i=r[0].offsetHeight,n=="top"&&i!=o&&(t.top=t.top+o-i,d=!0),n=="bottom"||n=="top"?(l=0,t.left<0&&(l=t.left*-2,t.left=0,r.offset(t),m=r[0].offsetWidth,i=r[0].offsetHeight),this.replaceArrow(l-s+m,m,"left")):this.replaceArrow(i-o,i,"top"),d&&r.offset(t)},replaceArrow:function(t,n,r){this.arrow().css(r,t?50*(1-t/n)+"%":"")},setContent:function(){var t=this.tip(),n=this.getTitle();t.find(".tooltip-inner").text(n),t.removeClass("fade in top bottom left right")},hide:function(){var t=this,n=this.tip(),r=Q.Event("hide");if(this.$element.trigger(r),r.isDefaultPrevented())return;n.removeClass("in");function s(){var o=setTimeout(function(){n.off(Q.support.transition.end).detach()},500);n.one(Q.support.transition.end,function(){clearTimeout(o),n.detach()})}return Q.support.transition&&this.$tip.hasClass("fade")?s():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var t=this.$element;(t.attr("title")||typeof t.attr("data-original-title")!="string")&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return Q.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t,n=this.$element,r=this.options;return t=n.attr("data-original-title")||(typeof r.title=="function"?r.title.call(n[0]):r.title),t},tip:function(){return this.$tip=this.$tip||Q(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?Q(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=Q.fn.tooltip;Q.fn.tooltip=function(t){return this.each(function(){var n=Q(this),r=n.data("tooltip"),s=typeof t=="object"&&t;r||n.data("tooltip",r=new I(this,s)),typeof t=="string"&&r[t]()})},Q.fn.tooltip.Constructor=I,Q.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Q.fn.tooltip.noConflict=function(){return Q.fn.tooltip=e,this}}(window.jQuery),function(Q){"use strict";var I=function(t){this.element=Q(t)};I.prototype={constructor:I,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),s,o,m;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")&&(s=n.find(".active:last a")[0],m=Q.Event("show",{relatedTarget:s}),t.trigger(m),!m.isDefaultPrevented()&&(o=Q.find(r),this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown",relatedTarget:s})})))},activate:function(t,n,r){var s=n.find("> .active"),o=r&&Q.support.transition&&s.hasClass("fade");function m(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}o?s.one(Q.support.transition.end,m):m(),s.removeClass("in")}};var e=Q.fn.tab;Q.fn.tab=function(t){return this.each(function(){var n=Q(this),r=n.data("tab");r||n.data("tab",r=new I(this)),typeof t=="string"&&r[t]()})},Q.fn.tab.Constructor=I,Q.fn.tab.noConflict=function(){return Q.fn.tab=e,this},Q(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),Q(this).tab("show")})}(window.jQuery),function(Q){"use strict";var I=function(t,n){this.$element=Q(t),this.options=Q.extend({},Q.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=Q(this.options.menu),this.shown=!1,this.listen()};I.prototype={constructor:I,select:function(){var t=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var t=Q.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=Q.isFunction(this.source)?this.source(this.query,Q.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=Q.grep(t,function(r){return n.matcher(r)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var n=[],r=[],s=[],o;o=t.shift();)o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?r.push(o):s.push(o):n.push(o);return n.concat(r,s)},highlighter:function(t){var n=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n?t.replace(new RegExp("("+n+")","ig"),function(r,s){return"<strong>"+s+"</strong>"}):t},render:function(t){var n=this;return t=Q(t).map(function(r,s){return r=Q(n.options.item).attr("data-value",s),r.find("a").html(n.highlighter(s)),r[0]}),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=Q(this.$menu.find("li")[0])),r.addClass("active")},prev:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.prev();r.length||(r=this.$menu.find("li").last()),r.addClass("active")},listen:function(){this.$element.on("focus",Q.proxy(this.focus,this)).on("blur",Q.proxy(this.blur,this)).on("keypress",Q.proxy(this.keypress,this)).on("keyup",Q.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",Q.proxy(this.keydown,this)),this.$menu.on("click",Q.proxy(this.click,this)).on("mouseenter","li",Q.proxy(this.mouseenter,this)).on("mouseleave","li",Q.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(t){var n=t in this.$element;return n||(this.$element.setAttribute(t,"return;"),n=typeof this.$element[t]=="function"),n},move:function(t){if(this.shown&&!(t.shiftKey&&t.keyCode===40)){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next();break}t.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~Q.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.keyCode===13&&typeof this.$menu.find(".active").attr("data-value")>"u"?this.$element.submit():(t.stopPropagation(),t.preventDefault())},focus:function(t){this.focused=!0},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),Q(t.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=Q.fn.typeahead;Q.fn.typeahead=function(t){return this.each(function(){var n=Q(this),r=n.data("typeahead"),s=typeof t=="object"&&t;r||n.data("typeahead",r=new I(this,s)),typeof t=="string"&&r[t]()})},Q.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},Q.fn.typeahead.Constructor=I,Q.fn.typeahead.noConflict=function(){return Q.fn.typeahead=e,this},Q(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=Q(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),function(Q){"use strict";var I=function(t,n){this.options=Q.extend({},Q.fn.affix.defaults,n),this.$window=Q(window).on("scroll.affix.data-api",Q.proxy(this.checkPosition,this)).on("click.affix.data-api",Q.proxy(function(){setTimeout(Q.proxy(this.checkPosition,this),1)},this)),this.$element=Q(t),this.checkPosition()};I.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=Q(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,o=s.bottom,m=s.top,i="affix affix-top affix-bottom",l;typeof s!="object"&&(o=m=s),typeof m=="function"&&(m=s.top()),typeof o=="function"&&(o=s.bottom()),l=this.unpin!=null&&n+this.unpin<=r.top?!1:o!=null&&r.top+this.$element.height()>=t-o?"bottom":m!=null&&n<=m?"top":!1,this.affixed!==l&&(this.affixed=l,this.unpin=l=="bottom"?r.top-n:null,this.$element.removeClass(i).addClass("affix"+(l?"-"+l:"")))}};var e=Q.fn.affix;Q.fn.affix=function(t){return this.each(function(){var n=Q(this),r=n.data("affix"),s=typeof t=="object"&&t;r||n.data("affix",r=new I(this,s)),typeof t=="string"&&r[t]()})},Q.fn.affix.Constructor=I,Q.fn.affix.defaults={offset:0},Q.fn.affix.noConflict=function(){return Q.fn.affix=e,this},Q(window).on("load",function(){Q('[data-spy="affix"]').each(function(){var t=Q(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)},82013:()=>{(function(Q){var I={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(m){if(!m)n.x=-1;else{var i=t.p2c(m);n.x=Math.max(0,Math.min(i.left,t.width())),n.y=Math.max(0,Math.min(i.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(m){m&&t.setCrosshair(m),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function r(o){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(o){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var m=t.offset();n.x=Math.max(0,Math.min(o.pageX-m.left,t.width())),n.y=Math.max(0,Math.min(o.pageY-m.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(o,m){o.getOptions().crosshair.mode&&(m.mouseout(r),m.mousemove(s))}),t.hooks.drawOverlay.push(function(o,m){var i=o.getOptions().crosshair;if(i.mode){var l=o.getPlotOffset();if(m.save(),m.translate(l.left,l.top),n.x!=-1){var d=o.getOptions().crosshair.lineWidth%2?.5:0;if(m.strokeStyle=i.color,m.lineWidth=i.lineWidth,m.lineJoin="round",m.beginPath(),i.mode.indexOf("x")!=-1){var c=Math.floor(n.x)+d;m.moveTo(c,0),m.lineTo(c,o.height())}if(i.mode.indexOf("y")!=-1){var g=Math.floor(n.y)+d;m.moveTo(0,g),m.lineTo(o.width(),g)}m.stroke()}m.restore()}}),t.hooks.shutdown.push(function(o,m){m.unbind("mouseout",r),m.unbind("mousemove",s)})}Q.plot.plugins.push({init:e,options:I,name:"crosshair",version:"1.0"})})(jQuery)},2341:()=>{(function(Q){function I(e){e.hooks.processDatapoints.push(function(t,n,r){n.dashes.show&&t.hooks.draw.push(function(s,o){var m=s.getPlotOffset(),i=n.xaxis,l=n.yaxis;function d(E,p){var b=r.points,a=r.pointsize,h=null,P=null,y=0,C=!0,f,D;n.dashes.dashLength[0]?(f=n.dashes.dashLength[0],n.dashes.dashLength[1]?D=n.dashes.dashLength[1]:D=f):D=f=n.dashes.dashLength,o.beginPath();for(var T=a;T<b.length;T+=a){let K=function(N){var L=Math.sqrt(Math.pow(R-x,2)+Math.pow(B-A,2));if(L<=N)return{deltaX:R-x,deltaY:B-A,distance:L,remainder:N-L};var V=R>x?1:-1,F=B>A?1:-1;return{deltaX:V*Math.sqrt(Math.pow(N,2)/(1+Math.pow((B-A)/(R-x),2))),deltaY:F*Math.sqrt(Math.pow(N,2)-Math.pow(N,2)/(1+Math.pow((B-A)/(R-x),2))),distance:N,remainder:0}};var w=K,M=b[T-a],O=b[T-a+1],S=b[T],v=b[T+1];if(!(M==null||S==null)){if(O<=v&&O<l.min){if(v<l.min)continue;M=(l.min-O)/(v-O)*(S-M)+M,O=l.min}else if(v<=O&&v<l.min){if(O<l.min)continue;S=(l.min-O)/(v-O)*(S-M)+M,v=l.min}if(O>=v&&O>l.max){if(v>l.max)continue;M=(l.max-O)/(v-O)*(S-M)+M,O=l.max}else if(v>=O&&v>l.max){if(O>l.max)continue;S=(l.max-O)/(v-O)*(S-M)+M,v=l.max}if(M<=S&&M<i.min){if(S<i.min)continue;O=(i.min-M)/(S-M)*(v-O)+O,M=i.min}else if(S<=M&&S<i.min){if(M<i.min)continue;v=(i.min-M)/(S-M)*(v-O)+O,S=i.min}if(M>=S&&M>i.max){if(S>i.max)continue;O=(i.max-M)/(S-M)*(v-O)+O,M=i.max}else if(S>=M&&S>i.max){if(M>i.max)continue;v=(i.max-M)/(S-M)*(v-O)+O,S=i.max}(M!=h||O!=P)&&o.moveTo(i.p2c(M)+E,l.p2c(O)+p);var x=i.p2c(M)+E,A=l.p2c(O)+p,R=i.p2c(S)+E,B=l.p2c(v)+p,U;do U=K(y>0?y:C?f:D),(U.deltaX!=0||U.deltaY!=0)&&(C?o.lineTo(x+U.deltaX,A+U.deltaY):o.moveTo(x+U.deltaX,A+U.deltaY)),C=!C,y=U.remainder,x+=U.deltaX,A+=U.deltaY;while(U.distance>0);h=S,P=v}}o.stroke()}o.save(),o.translate(m.left,m.top),o.lineJoin="round";var c=n.dashes.lineWidth,g=n.shadowSize;if(c>0&&g>0){o.lineWidth=g,o.strokeStyle="rgba(0,0,0,0.1)";var u=Math.PI/18;d(Math.sin(u)*(c/2+g/2),Math.cos(u)*(c/2+g/2)),o.lineWidth=g/2,d(Math.sin(u)*(c/2+g/4),Math.cos(u)*(c/2+g/4))}o.lineWidth=c,o.strokeStyle=n.color,c>0&&d(0,0),o.restore()})})}Q.plot.plugins.push({init:I,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},92275:()=>{(function(Q){"use strict";var I={series:{fillBelowTo:null}};function e(t){function n(o,m){var i;for(i=0;i<m.length;++i)if(m[i].id===o.fillBelowTo)return m[i];return null}function r(o,m,i,l,d,c,g,u){var E,p,b,a,h,P;return E=i-o,p=l-m,b=g-d,a=u-c,h=(-p*(o-d)+E*(m-c))/(-b*p+E*a),P=(b*(m-c)-a*(o-d))/(-b*p+E*a),h>=0&&h<=1&&P>=0&&P<=1?[o+P*E,m+P*p]:null}function s(o,m,i){if(i.fillBelowTo===null)return;var l,d,c,g,u,E,p;function b(D,T){m.beginPath(),m.moveTo(i.xaxis.p2c(D)+E.left,i.yaxis.p2c(T)+E.top)}function a(){m.closePath(),m.fill()}function h(){if(c.length/d!==u.length/g)return console.error("Refusing to graph inconsistent number of points"),!1;var D;for(D=0;D<c.length/d;D++)if(c[D*d]!==null&&u[D*g]!==null&&c[D*d]!==u[D*g])return console.error("Refusing to graph points without matching value"),!1;return!0}function P(D,T){console.assert(T>D,"expects the end index to be greater than the start index");var M=D===0||c[D-1]===null||u[D-1]===null,O=!1,S,v;for(S=D;S<T;S++)if(c[S*d+1]===null||u[S*d+1]===null)O=!1,M=!0;else if(c[S*d+1]===u[S*g+1])O=!0,M=!1;else if(c[S*d+1]>u[S*g+1]){M?b(c[S*d],c[S*d+1]):O?b(c[(S-1)*d],c[(S-1)*d+1]):(v=y(S),b(v[0],v[1])),f(S,T);return}else M=!1,O=!1}function y(D){console.assert(D>0,"expects the second point in the series line segment");var T,M;for(T=1;T<u.length/g;T++)if(M=r(c[(D-1)*d],c[(D-1)*d+1],c[D*d],c[D*d+1],u[(T-1)*g],u[(T-1)*g+1],u[T*g],u[T*g+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function C(D,T){console.assert(D>=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=D;M>=T;M--)m.lineTo(l.xaxis.p2c(u[M*g])+E.left,l.yaxis.p2c(u[M*g+1])+E.top);a()}function f(D,T){console.assert(D<=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,O;for(M=D;M<T;M++)if(c[M*d+1]===null&&M>D){C(M-1,D),P(M,T);return}else if(c[M*d+1]===u[M*g+1]){C(M,D),P(M,T);return}else if(c[M*d+1]<u[M*g+1]){O=y(M),m.lineTo(i.xaxis.p2c(O[0])+E.left,i.yaxis.p2c(O[1])+E.top),C(M,D),P(M,T);return}else m.lineTo(i.xaxis.p2c(c[M*d])+E.left,i.yaxis.p2c(c[M*d+1])+E.top);C(T,D)}l=n(i,o.getData()),l&&(d=i.datapoints.pointsize,c=i.datapoints.points,g=l.datapoints.pointsize,u=l.datapoints.points,E=o.getPlotOffset(),h()&&(p=Q.color.parse(i.color),p.a=.4,p.normalize(),m.fillStyle=p.toString(),P(0,c.length/d)))}t.hooks.drawSeries.push(s)}Q.plot.plugins.push({init:e,options:I,name:"fillbelow",version:"0.1.0"})})(jQuery)},19538:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Q){var I=function(){var i,l,d,c,g,u,E=function(D,T){i=T,l=D.getPlaceholder(),d=D.getOptions(),c=d.series.gauges,g=D.getData(),u=e(c.debug)};E.prototype.calculateLayout=function(){var D=l.width(),T=l.height(),M=Math.min(g.length,c.layout.columns),O=Math.ceil(g.length/M),S=c.layout.margin,v=c.layout.hMargin,x=c.layout.vMargin,A=(D-S*2-v*(M-1))/M,R=(T-S*2-x*(O-1))/O;if(c.layout.square){var B=Math.min(A,R);A=B,R=B}p(c,A);var U=c.cell.margin,w=0,K=0;c.label.show&&(w=c.label.margin,K=c.label.font.size);var N=0,L=0;c.value.show&&(N=c.value.margin,L=c.value.font.size);var V=0;c.threshold.show&&(V=c.threshold.width);var F=0,z=0;c.threshold.label.show&&(F=c.threshold.label.margin,z=c.threshold.label.font.size);for(var Y=A/2-U-V-F*2-z,H=c.gauge.startAngle,k=c.gauge.endAngle,ee=(k-H)/100,ie=-1,fe=H;fe<k;fe+=ee)ie=Math.max(ie,Math.sin(r(fe)));ie=Math.max(ie,Math.sin(r(k)));var q=(R-U*2-w*2-K)/(1+ie);q*ie<N+L/2&&(q=R-U*2-w*2-K-N-L/2);var Z=q-F*2-z-V,J=Math.min(Y,Z),G=c.gauge.width;G>=J&&(G=Math.max(3,J/3));var ne=F*2+z+V+J,te=Math.max(ne*(1+ie),ne+N+L/2);return{canvasWidth:D,canvasHeight:T,margin:S,hMargin:v,vMargin:x,columns:M,rows:O,cellWidth:A,cellHeight:R,cellMargin:U,labelMargin:w,labelFontSize:K,valueMargin:N,valueFontSize:L,width:G,radius:J,thresholdWidth:V,thresholdLabelMargin:F,thresholdLabelFontSize:z,gaugeOuterHeight:te}};function p(D,T){D.gauge.width==="auto"&&(D.gauge.width=Math.max(5,T/8)),D.label.margin==="auto"&&(D.label.margin=Math.max(1,T/20)),D.label.font.size==="auto"&&(D.label.font.size=Math.max(5,T/8)),D.value.margin==="auto"&&(D.value.margin=Math.max(1,T/30)),D.value.font.size==="auto"&&(D.value.font.size=Math.max(5,T/9)),D.threshold.width==="auto"&&(D.threshold.width=Math.max(3,T/100)),D.threshold.label.margin==="auto"&&(D.threshold.label.margin=Math.max(3,T/40)),D.threshold.label.font.size==="auto"&&(D.threshold.label.font.size=Math.max(5,T/15))}E.prototype.calculateAutoValues=p,E.prototype.calculateCellLayout=function(D,T,M){var O=t(T.columns,M),S=n(T.columns,M),v=T.margin+(T.cellWidth+T.hMargin)*O,x=T.margin+(T.cellHeight+T.vMargin)*S,A=v+T.cellWidth/2,R=x+T.cellMargin+T.labelMargin*2+T.labelFontSize+T.thresholdWidth+T.thresholdLabelFontSize+T.thresholdLabelMargin*2+T.radius,B=T.cellHeight-T.cellMargin*2-T.labelMargin*2-T.labelFontSize-T.gaugeOuterHeight,U=0;return D.cell.vAlign==="middle"?U=B/2:D.cell.vAlign==="bottom"&&(U=B),R+=U,{col:O,row:S,x:v,y:x,offsetY:U,cellWidth:T.cellWidth,cellHeight:T.cellHeight,cellMargin:T.cellMargin,cx:A,cy:R}},E.prototype.drawBackground=function(D){c.frame.show&&(i.save(),i.strokeStyle=d.grid.borderColor,i.lineWidth=d.grid.borderWidth,i.strokeRect(0,0,D.canvasWidth,D.canvasHeight),d.grid.backgroundColor&&(i.fillStyle=d.grid.backgroundColor,i.fillRect(0,0,D.canvasWidth,D.canvasHeight)),i.restore())},E.prototype.drawCellBackground=function(D,T){i.save(),D.cell.border&&D.cell.border.show&&D.cell.border.color&&D.cell.border.width&&(i.strokeStyle=D.cell.border.color,i.lineWidth=D.cell.border.width,i.strokeRect(T.x,T.y,T.cellWidth,T.cellHeight)),D.cell.background&&D.cell.background.color&&(i.fillStyle=D.cell.background.color,i.fillRect(T.x,T.y,T.cellWidth,T.cellHeight)),i.restore()},E.prototype.drawGauge=function(D,T,M,O,S){var v=D.gauge.shadow.show?D.gauge.shadow.blur:0,x=h(D,S),A=b(D,T,S);y(M.cx,M.cy,T.radius,T.width,r(D.gauge.startAngle),r(D.gauge.endAngle),D.gauge.border.color,D.gauge.border.width,D.gauge.background.color,v),y(M.cx,M.cy,T.radius-1,T.width-2,r(A.a1),r(A.a2),x,1,x,v),D.gauge.neutralValue!=null&&a(D,T,M,x)};function b(D,T,M){let O={};var S=D.gauge.neutralValue;return S!=null?M<S?(O.a1=P(D,T,M),O.a2=P(D,T,S)):(O.a1=P(D,T,S),O.a2=P(D,T,M)):(O.a1=D.gauge.startAngle,O.a2=P(D,T,M)),O}function a(D,T,M,O){var S=(D.gauge.max-D.gauge.min)/600;s(i,M.cx,M.cy,T.radius-2,T.width-4,r(P(D,T,D.gauge.neutralValue-S)),r(P(D,T,D.gauge.neutralValue+S)),O,2,D.gauge.background.color)}function h(D,T){for(var M,O=0;O<D.threshold.values.length;O++){var S=D.threshold.values[O];if(M=S.color,T<S.value)break}return M}function P(D,T,M){var O=D.gauge.startAngle+(D.gauge.endAngle-D.gauge.startAngle)*((M-D.gauge.min)/(D.gauge.max-D.gauge.min));return O<D.gauge.startAngle?O=D.gauge.startAngle:O>D.gauge.endAngle&&(O=D.gauge.endAngle),O}E.prototype.drawThreshold=function(D,T,M){for(var O=D.gauge.startAngle,S=0;S<D.threshold.values.length;S++){var v=D.threshold.values[S];c1=v.color,a2=P(D,T,v.value),s(i,M.cx,M.cy,T.radius+T.thresholdWidth,T.thresholdWidth-2,r(O),r(a2),c1,1,c1),O=a2}};function y(D,T,M,O,S,v,x,A,R,B){S!==v&&(i.save(),s(i,D,T,M,O,S,v,x,A,R),B&&(s(i,D,T,M,O,S,v),i.clip(),i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=10,i.shadowColor="gray",s(i,D,T,M+1,O+2,S,v,x,1)),i.restore())}E.prototype.drawLable=function(D,T,M,O,S){f(M.cx,M.y+M.cellMargin+T.labelMargin+M.offsetY,"flotGaugeLabel"+O,D.label.formatter?D.label.formatter(S.label,S.data[0][1]):text,D.label)},E.prototype.drawValue=function(D,T,M,O,S){f(M.cx,M.cy-D.value.font.size/2,"flotGaugeValue"+O,D.value.formatter?D.value.formatter(S.label,S.data[0][1]):text,D.value)},E.prototype.drawThresholdValues=function(D,T,M,O){C(D,T,M,"Min"+O,D.gauge.min,D.gauge.startAngle),C(D,T,M,"Max"+O,D.gauge.max,D.gauge.endAngle);for(var S=0;S<D.threshold.values.length;S++){var v=D.threshold.values[S];if(v.value>D.gauge.min&&v.value<D.gauge.max){var x=P(D,T,v.value);C(D,T,M,O+"_"+S,v.value,x)}}var A=D.gauge.neutralValue;A!=null&&A>D.gauge.min&&A<D.gauge.max&&C(D,T,M,"Neutral"+O,A,P(D,T,A))};function C(D,T,M,O,S,v){f(M.cx+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.cos(r(v)),M.cy+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.sin(r(v)),"flotGaugeThresholdValue"+O,D.threshold.label.formatter?D.threshold.label.formatter(S):S,D.threshold.label,v)}function f(D,T,M,O,S,v){var x=Q(l).find("#"+M),A=x.length;A||(x=Q("<span></span>"),x.attr("id",M),x.attr("class","flot-temp-elem"),l.append(x)),x.css("position","absolute"),x.css("top",T+"px"),x.css("white-space","nowrap"),S.font.size&&x.css("font-size",S.font.size+"px"),S.font.family&&x.css("font-family",S.font.family),S.color&&x.css("color",S.color),S.background.color&&x.css("background-color",S.background.color),S.background.opacity&&x.css("opacity",S.background.opacity),x.text(O),x.css("left",D+"px"),x.css("left",parseInt(x.css("left"))-x.width()/2+"px"),!A&&v&&(x.css("top",parseInt(x.css("top"))-x.height()/2+"px"),x.css("transform","rotate("+(180*v+90)+"deg)"))}return E}();function e(i){return typeof Logger<"u"?new Logger(i):null}function t(i,l){return l%i}function n(i,l){return Math.floor(l/i)}function r(i){return i*Math.PI}function s(i,l,d,c,g,u,E,p,b,a){if(u!==E){var h=!1;i.save(),i.beginPath(),i.arc(l,d,c,u,E,h),i.lineTo(l+(c-g)*Math.cos(E),d+(c-g)*Math.sin(E)),i.arc(l,d,c-g,E,u,!h),i.closePath(),b&&(i.lineWidth=b),p&&(i.strokeStyle=p,i.stroke()),a&&(i.fillStyle=a,i.fill()),i.restore()}}function o(i){i.hooks.processOptions.push(function(l,d){var c=e(d.series.gauges.debug);d.series.gauges.show&&(d.grid.show=!1,d.legend.show=!1);var g=d.series.gauges.threshold.values;g.sort(function(u,E){return u.value<E.value?-1:u.value>E.value?1:0})}),i.hooks.draw.push(function(l,d){var c=l.getOptions(),g=c.series.gauges,u=e(g.debug);if(g.show){var E=l.getData();if(!(!E||!E.length)){var p=new I(l,d),b=p.calculateLayout();g.debug.layout,p.drawBackground(b);for(var a=0;a<E.length;a++){var h=E[a],P=Q.extend({},g,h.gauges);h.gauges&&p.calculateAutoValues(P,b.cellWidth);var y=p.calculateCellLayout(P,b,a);p.drawCellBackground(P,y),P.debug.layout,P.label.show&&p.drawLable(P,b,y,a,h),p.drawGauge(P,b,y,h.label,h.data[0][1]),P.threshold.show&&p.drawThreshold(P,b,y),P.threshold.label.show&&p.drawThresholdValues(P,b,y,a),P.value.show&&p.drawValue(P,b,y,a,h)}}}})}var m={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,l){return i}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,l){return parseInt(l)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(i){return i}},values:[]}}}};Q.plot.plugins.push({init:o,options:m,name:"gauge",version:"1.1.0"})})(jQuery)},54087:()=>{(function(Q){Q.color={},Q.color.make=function(e,t,n,r){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=r??1,s.add=function(o,m){for(var i=0;i<o.length;++i)s[o.charAt(i)]+=m;return s.normalize()},s.scale=function(o,m){for(var i=0;i<o.length;++i)s[o.charAt(i)]*=m;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function o(m,i,l){return i<m?m:i>l?l:i}return s.r=o(0,parseInt(s.r),255),s.g=o(0,parseInt(s.g),255),s.b=o(0,parseInt(s.b),255),s.a=o(0,s.a,1),s},s.clone=function(){return Q.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Q.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Q.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Q.color.parse(n)},Q.color.parse=function(e){var t,n=Q.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var r=Q.trim(e).toLowerCase();return r=="transparent"?n(255,255,255,0):(t=I[r]||[0,0,0],n(t[0],t[1],t[2]))};var I={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Q){var I=Object.prototype.hasOwnProperty;Q.fn.detach||(Q.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(r,s){var o=s.children("."+r)[0];if(o==null&&(o=document.createElement("canvas"),o.className=r,Q(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!o.getContext))if(window.G_vmlCanvasManager)o=window.G_vmlCanvasManager.initElement(o);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=o;var m=this.context=o.getContext("2d"),i=window.devicePixelRatio||1,l=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;this.pixelRatio=i/l,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(r,s){if(r<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+r+", height = "+s);var o=this.element,m=this.context,i=this.pixelRatio;this.width!=r&&(o.width=r*i,o.style.width=r+"px",this.width=r),this.height!=s&&(o.height=s*i,o.style.height=s+"px",this.height=s),m.restore(),m.save(),m.scale(i,i)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var r=this._textCache;for(var s in r)if(I.call(r,s)){var o=this.getTextLayer(s),m=r[s];o.hide();for(var i in m)if(I.call(m,i)){var l=m[i];for(var d in l)if(I.call(l,d)){for(var c=l[d].positions,g=0,u;u=c[g];g++)u.active?u.rendered||(o.append(u.element),u.rendered=!0):(c.splice(g--,1),u.rendered&&u.element.detach());c.length==0&&delete l[d]}}o.show()}},e.prototype.getTextLayer=function(r){var s=this.text[r];return s==null&&(this.textContainer==null&&(this.textContainer=Q("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[r]=Q("<div></div>").addClass(r).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(r,s,o,m,i){var l,d,c,g;if(s=""+s,typeof o=="object"?l=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:l=o,d=this._textCache[r],d==null&&(d=this._textCache[r]={}),c=d[l],c==null&&(c=d[l]={}),g=c[s],g==null){var u=Q("<div></div>").html(s).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(r));typeof o=="object"?u.css({font:l,color:o.color}):typeof o=="string"&&u.addClass(o),g=c[s]={element:u,positions:[]};var E=this._textSizeCache[s];E?(g.width=E.width,g.height=E.height):(g.width=u.outerWidth(!0),g.height=u.outerHeight(!0),this._textSizeCache[s]={width:g.width,height:g.height}),u.detach()}return g},e.prototype.addText=function(r,s,o,m,i,l,d,c,g){var u=this.getTextInfo(r,m,i,l,d),E=u.positions;c=="center"?s-=u.width/2:c=="right"&&(s-=u.width),g=="middle"?o-=u.height/2:g=="bottom"&&(o-=u.height);for(var p=0,b;b=E[p];p++)if(b.x==s&&b.y==o){b.active=!0;return}b={active:!0,rendered:!1,element:E.length?u.element.clone():u.element,x:s,y:o},E.push(b),b.element.css({top:Math.round(o),left:Math.round(s),"text-align":c})},e.prototype.removeText=function(r,s,o,m,i,l){if(m==null){var d=this._textCache[r];if(d!=null){for(var c in d)if(I.call(d,c)){var g=d[c];for(var u in g)if(I.call(g,u))for(var E=g[u].positions,p=0,b;b=E[p];p++)b.active=!1}}}else for(var E=this.getTextInfo(r,m,i,l).positions,p=0,b;b=E[p];p++)b.x==s&&b.y==o&&(b.active=!1)};function t(r,s,o,m){var i=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},d=null,c=null,g=null,u=null,E=null,p=[],b=[],a={left:0,right:0,top:0,bottom:0},h=0,P=0,y={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},C=this;C.setData=M,C.setupGrid=H,C.draw=Z,C.getPlaceholder=function(){return r},C.getCanvas=function(){return d.element},C.getPlotOffset=function(){return a},C.width=function(){return h},C.height=function(){return P},C.offset=function(){var se=g.offset();return se.left+=a.left,se.top+=a.top,se},C.getData=function(){return i},C.getAxes=function(){var se={},ae;return Q.each(p.concat(b),function(ge,Pe){Pe&&(se[Pe.direction+(Pe.n!=1?Pe.n:"")+"axis"]=Pe)}),se},C.getXAxes=function(){return p},C.getYAxes=function(){return b},C.c2p=x,C.p2c=A,C.getOptions=function(){return l},C.highlight=rt,C.unhighlight=Je,C.triggerRedrawOverlay=je,C.pointOffset=function(se){return{left:parseInt(p[S(se,"x")-1].p2c(+se.x)+a.left,10),top:parseInt(b[S(se,"y")-1].p2c(+se.y)+a.top,10)}},C.shutdown=N,C.destroy=function(){N(),r.removeData("plot").empty(),i=[],l=null,d=null,c=null,g=null,u=null,E=null,p=[],b=[],y=null,Ee=[],C=null},C.resize=function(){var se=r.width(),ae=r.height();d.resize(se,ae),c.resize(se,ae)},C.hooks=y,D(C),T(o),w(),M(s),H(),Z(),K();function f(se,ae){ae=[C].concat(ae);for(var ge=0;ge<se.length;++ge)se[ge].apply(this,ae)}function D(){for(var se={Canvas:e},ae=0;ae<m.length;++ae){var ge=m[ae];ge.init(C,se),ge.options&&Q.extend(!0,l,ge.options)}}function T(se){Q.extend(!0,l,se),se&&se.colors&&(l.colors=se.colors),l.xaxis.color==null&&(l.xaxis.color=Q.color.parse(l.grid.color).scale("a",.22).toString()),l.yaxis.color==null&&(l.yaxis.color=Q.color.parse(l.grid.color).scale("a",.22).toString()),l.xaxis.tickColor==null&&(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color),l.yaxis.tickColor==null&&(l.yaxis.tickColor=l.grid.tickColor||l.yaxis.color),l.grid.borderColor==null&&(l.grid.borderColor=l.grid.color),l.grid.tickColor==null&&(l.grid.tickColor=Q.color.parse(l.grid.color).scale("a",.22).toString());var ae,ge,Pe,Re=r.css("font-size"),Be=Re?+Re.replace("px",""):13,_e={style:r.css("font-style"),size:Math.round(.8*Be),variant:r.css("font-variant"),weight:r.css("font-weight"),family:r.css("font-family")};for(Pe=l.xaxes.length||1,ae=0;ae<Pe;++ae)ge=l.xaxes[ae],ge&&!ge.tickColor&&(ge.tickColor=ge.color),ge=Q.extend(!0,{},l.xaxis,ge),l.xaxes[ae]=ge,ge.font&&(ge.font=Q.extend({},_e,ge.font),ge.font.color||(ge.font.color=ge.color),ge.font.lineHeight||(ge.font.lineHeight=Math.round(ge.font.size*1.15)));for(Pe=l.yaxes.length||1,ae=0;ae<Pe;++ae)ge=l.yaxes[ae],ge&&!ge.tickColor&&(ge.tickColor=ge.color),ge=Q.extend(!0,{},l.yaxis,ge),l.yaxes[ae]=ge,ge.font&&(ge.font=Q.extend({},_e,ge.font),ge.font.color||(ge.font.color=ge.color),ge.font.lineHeight||(ge.font.lineHeight=Math.round(ge.font.size*1.15)));for(l.xaxis.noTicks&&l.xaxis.ticks==null&&(l.xaxis.ticks=l.xaxis.noTicks),l.yaxis.noTicks&&l.yaxis.ticks==null&&(l.yaxis.ticks=l.yaxis.noTicks),l.x2axis&&(l.xaxes[1]=Q.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top",l.x2axis.min==null&&(l.xaxes[1].min=null),l.x2axis.max==null&&(l.xaxes[1].max=null)),l.y2axis&&(l.yaxes[1]=Q.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right",l.y2axis.min==null&&(l.yaxes[1].min=null),l.y2axis.max==null&&(l.yaxes[1].max=null)),l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas),l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor),l.lines&&Q.extend(!0,l.series.lines,l.lines),l.points&&Q.extend(!0,l.series.points,l.points),l.bars&&Q.extend(!0,l.series.bars,l.bars),l.shadowSize!=null&&(l.series.shadowSize=l.shadowSize),l.highlightColor!=null&&(l.series.highlightColor=l.highlightColor),ae=0;ae<l.xaxes.length;++ae)R(p,ae+1).options=l.xaxes[ae];for(ae=0;ae<l.yaxes.length;++ae)R(b,ae+1).options=l.yaxes[ae];for(var Xe in y)l.hooks[Xe]&&l.hooks[Xe].length&&(y[Xe]=y[Xe].concat(l.hooks[Xe]));f(y.processOptions,[l])}function M(se){i=O(se),B(),U()}function O(se){for(var ae=[],ge=0;ge<se.length;++ge){var Pe=Q.extend(!0,{},l.series);se[ge].data!=null?(Pe.data=se[ge].data,delete se[ge].data,Q.extend(!0,Pe,se[ge]),se[ge].data=Pe.data):Pe.data=se[ge],ae.push(Pe)}return ae}function S(se,ae){var ge=se[ae+"axis"];return typeof ge=="object"&&(ge=ge.n),typeof ge!="number"&&(ge=1),ge}function v(){return Q.grep(p.concat(b),function(se){return se})}function x(se){var ae={},ge,Pe;for(ge=0;ge<p.length;++ge)Pe=p[ge],Pe&&(ae["x"+Pe.n]=Pe.c2p(se.left));for(ge=0;ge<b.length;++ge)Pe=b[ge],Pe&&(ae["y"+Pe.n]=Pe.c2p(se.top));return ae.x1!==void 0&&(ae.x=ae.x1),ae.y1!==void 0&&(ae.y=ae.y1),ae}function A(se){var ae={},ge,Pe,Re;for(ge=0;ge<p.length;++ge)if(Pe=p[ge],Pe&&Pe.used&&(Re="x"+Pe.n,se[Re]==null&&Pe.n==1&&(Re="x"),se[Re]!=null)){ae.left=Pe.p2c(se[Re]);break}for(ge=0;ge<b.length;++ge)if(Pe=b[ge],Pe&&Pe.used&&(Re="y"+Pe.n,se[Re]==null&&Pe.n==1&&(Re="y"),se[Re]!=null)){ae.top=Pe.p2c(se[Re]);break}return ae}function R(se,ae){return se[ae-1]||(se[ae-1]={n:ae,direction:se==p?"x":"y",options:Q.extend(!0,{},se==p?l.xaxis:l.yaxis)}),se[ae-1]}function B(){var se=i.length,ae=-1,ge;for(ge=0;ge<i.length;++ge){var Pe=i[ge].color;Pe!=null&&(se--,typeof Pe=="number"&&Pe>ae&&(ae=Pe))}se<=ae&&(se=ae+1);var Re,Be=[],_e=l.colors,Xe=_e.length,tt=0;for(ge=0;ge<se;ge++)Re=Q.color.parse(_e[ge%Xe]||"#666"),ge%Xe==0&&ge&&(tt>=0?tt<.5?tt=-tt-.2:tt=0:tt=-tt),Be[ge]=Re.scale("rgb",1+tt);var at=0,st;for(ge=0;ge<i.length;++ge){if(st=i[ge],st.color==null?(st.color=Be[at].toString(),++at):typeof st.color=="number"&&(st.color=Be[st.color].toString()),st.lines.show==null){var dt,ot=!0;for(dt in st)if(st[dt]&&st[dt].show){ot=!1;break}ot&&(st.lines.show=!0)}st.lines.zero==null&&(st.lines.zero=!!st.lines.fill),st.xaxis=R(p,S(st,"x")),st.yaxis=R(b,S(st,"y"))}}function U(){var se=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,ge=Number.MAX_VALUE,Pe,Re,Be,_e,Xe,tt,at,st,dt,ot,ft,yt,Tt,Kt,Gt,_t;function it(Jt,hn,Fn){hn<Jt.datamin&&hn!=-ge&&(Jt.datamin=hn),Fn>Jt.datamax&&Fn!=ge&&(Jt.datamax=Fn)}for(Q.each(v(),function(Jt,hn){hn.datamin=se,hn.datamax=ae,hn.used=!1}),Pe=0;Pe<i.length;++Pe)tt=i[Pe],tt.datapoints={points:[]},f(y.processRawData,[tt,tt.data,tt.datapoints]);for(Pe=0;Pe<i.length;++Pe){if(tt=i[Pe],Gt=tt.data,_t=tt.datapoints.format,!_t){if(_t=[],_t.push({x:!0,number:!0,required:!0}),_t.push({y:!0,number:!0,required:!0}),tt.stack||tt.bars.show||tt.lines.show&&tt.lines.fill){var Mt=!!(tt.bars.show&&tt.bars.zero||tt.lines.show&&tt.lines.zero);_t.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Mt}),tt.bars.horizontal&&(delete _t[_t.length-1].y,_t[_t.length-1].x=!0)}tt.datapoints.format=_t}if(tt.datapoints.pointsize==null){tt.datapoints.pointsize=_t.length,st=tt.datapoints.pointsize,at=tt.datapoints.points;var Dn=tt.lines.show&&tt.lines.steps;for(tt.xaxis.used=tt.yaxis.used=!0,Re=Be=0;Re<Gt.length;++Re,Be+=st){Kt=Gt[Re];var lt=Kt==null;if(!lt)for(_e=0;_e<st;++_e)yt=Kt[_e],Tt=_t[_e],Tt&&(Tt.number&&yt!=null&&(yt=+yt,isNaN(yt)?yt=null:yt==1/0?yt=ge:yt==-1/0&&(yt=-ge)),yt==null&&(Tt.required&&(lt=!0),Tt.defaultValue!=null&&(yt=Tt.defaultValue))),at[Be+_e]=yt;if(lt)for(_e=0;_e<st;++_e)yt=at[Be+_e],yt!=null&&(Tt=_t[_e],Tt.autoscale!==!1&&(Tt.x&&it(tt.xaxis,yt,yt),Tt.y&&it(tt.yaxis,yt,yt))),at[Be+_e]=null;if(Dn&&Be>0&&(!lt||at[Be-st]!=null)){for(_e=0;_e<st;++_e)at[Be+st+_e]=at[Be+_e];at[Be+1]=at[Be-st+1]||0,lt&&(at[Be]=Kt[0]),Be+=st}}}}for(Pe=0;Pe<i.length;++Pe){if(tt=i[Pe],at=tt.datapoints.points,st=tt.datapoints.pointsize,tt.transform==="negative-Y")for(Re=0;Re<at.length;Re+=st)at[Re]!=null&&(yt=at[Re+1],at[Re+1]=-yt);f(y.processDatapoints,[tt,tt.datapoints])}for(Pe=0;Pe<i.length;++Pe){tt=i[Pe],at=tt.datapoints.points,st=tt.datapoints.pointsize,_t=tt.datapoints.format;var Ct=se,Vt=se,qt=ae,rn=ae;for(Re=0;Re<at.length;Re+=st)if(at[Re]!=null)for(_e=0;_e<st;++_e)yt=at[Re+_e],Tt=_t[_e],!(!Tt||Tt.autoscale===!1||yt==ge||yt==-ge)&&(Tt.x&&(yt<Ct&&(Ct=yt),yt>qt&&(qt=yt)),Tt.y&&(yt<Vt&&(Vt=yt),yt>rn&&(rn=yt)));if(tt.bars.show){var en;switch(tt.bars.align){case"left":en=0;break;case"right":en=-tt.bars.barWidth;break;default:en=-tt.bars.barWidth/2}tt.bars.horizontal?(Vt+=en,rn+=en+tt.bars.barWidth):(Ct+=en,qt+=en+tt.bars.barWidth)}it(tt.xaxis,Ct,qt),it(tt.yaxis,Vt,rn)}Q.each(v(),function(Jt,hn){hn.datamin==se&&(hn.datamin=null),hn.datamax==ae&&(hn.datamax=null)})}function w(){r.find(".flot-temp-elem").remove(),r.css("position")=="static"&&r.css("position","relative"),d=new e("flot-base",r),c=new e("flot-overlay",r),u=d.context,E=c.context,g=Q(c.element).unbind();var se=r.data("plot");se&&(se.shutdown(),c.clear()),r.data("plot",C)}function K(){l.grid.hoverable&&(g.mousemove(xe),g.bind("mouseleave",We),Q(document).bind("touchend",pe)),l.grid.clickable&&g.click(be),f(y.bindEvents,[g])}function N(){Me&&clearTimeout(Me),g.unbind("mousemove",xe),g.unbind("mouseleave",We),g.unbind("click",be),Q(document).unbind("touchend",pe),f(y.shutdown,[g])}function L(se){function ae(_e){return _e}var ge,Pe,Re=se.options.transform||ae,Be=se.options.inverseTransform;se.direction=="x"?(ge=se.scale=h/Math.abs(Re(se.max)-Re(se.min)),Pe=Math.min(Re(se.max),Re(se.min))):(ge=se.scale=P/Math.abs(Re(se.max)-Re(se.min)),ge=-ge,Pe=Math.max(Re(se.max),Re(se.min))),Re==ae?se.p2c=function(_e){return(_e-Pe)*ge}:se.p2c=function(_e){return(Re(_e)-Pe)*ge},Be?se.c2p=function(_e){return Be(Pe+_e/ge)}:se.c2p=function(_e){return Pe+_e/ge}}function V(se){for(var ae=se.options,ge=se.ticks||[],Pe=ae.labelWidth||0,Re=ae.labelHeight||0,Be=Pe||(se.direction=="x"?Math.floor(d.width/(ge.length||1)):null),_e=se.direction+"Axis "+se.direction+se.n+"Axis",Xe="flot-"+se.direction+"-axis flot-"+se.direction+se.n+"-axis "+_e,tt=ae.font||"flot-tick-label tickLabel",at=0;at<ge.length;++at){var st=ge[at];if(st.label){var dt=d.getTextInfo(Xe,st.label,tt,null,Be);Pe=Math.max(Pe,dt.width+1),Re=Math.max(Re,dt.height)}}se.labelWidth=ae.labelWidth||Pe,se.labelHeight=ae.labelHeight||Re}function F(se){var ae=se.labelWidth,ge=se.labelHeight,Pe=se.options.position,Re=se.direction==="x",Be=se.options.tickLength,_e=l.grid.axisMargin,Xe=l.grid.labelMargin,tt=l.grid.eventSectionHeight,at=!0,st=!0,dt=!0,ot=!1;Q.each(Re?p:b,function(ft,yt){yt&&(yt.show||yt.reserveSpace)&&(yt===se?ot=!0:yt.options.position===Pe&&(ot?st=!1:at=!1),ot||(dt=!1))}),st&&(_e=0),Be==null&&(Be=dt?"full":5),isNaN(+Be)||(Xe+=+Be),Re?(ge+=Xe,ge+=tt,Pe=="bottom"?(a.bottom+=ge+_e,se.box={top:d.height-a.bottom,height:ge}):(se.box={top:a.top+_e,height:ge},a.top+=ge+_e)):(ae+=Xe,Pe=="left"?(se.box={left:a.left+_e,width:ae},a.left+=ae+_e):(a.right+=ae+_e,se.box={left:d.width-a.right,width:ae})),se.position=Pe,se.tickLength=Be,se.box.padding=Xe,se.box.eventSectionPadding=tt,se.innermost=at}function z(se){se.direction=="x"?(se.box.left=a.left-se.labelWidth/2,se.box.width=d.width-a.left-a.right+se.labelWidth):(se.box.top=a.top-se.labelHeight/2,se.box.height=d.height-a.bottom-a.top+se.labelHeight)}function Y(){var se=l.grid.minBorderMargin,ae,ge;if(se==null)for(se=0,ge=0;ge<i.length;++ge)se=Math.max(se,2*(i[ge].points.radius+i[ge].points.lineWidth/2));var Pe={left:se,right:se,top:se,bottom:se};Q.each(v(),function(Re,Be){Be.reserveSpace&&Be.ticks&&Be.ticks.length&&(Be.direction==="x"?(Pe.left=Math.max(Pe.left,Be.labelWidth/2),Pe.right=Math.max(Pe.right,Be.labelWidth/2)):(Pe.bottom=Math.max(Pe.bottom,Be.labelHeight/2),Pe.top=Math.max(Pe.top,Be.labelHeight/2)))}),a.left=Math.ceil(Math.max(Pe.left,a.left)),a.right=Math.ceil(Math.max(Pe.right,a.right)),a.top=Math.ceil(Math.max(Pe.top,a.top)),a.bottom=Math.ceil(Math.max(Pe.bottom,a.bottom))}function H(){var se,ae=v(),ge=l.grid.show;for(var Pe in a){var Re=l.grid.margin||0;a[Pe]=typeof Re=="number"?Re:Re[Pe]||0}f(y.processOffset,[a]);for(var Pe in a)typeof l.grid.borderWidth=="object"?a[Pe]+=ge?l.grid.borderWidth[Pe]:0:a[Pe]+=ge?l.grid.borderWidth:0;if(Q.each(ae,function(Xe,tt){var at=tt.options;tt.show=at.show==null?tt.used:at.show,tt.reserveSpace=at.reserveSpace==null?tt.show:at.reserveSpace,k(tt)}),f(y.processRange,[]),ge){for(var Be=Q.grep(ae,function(Xe){return Xe.show||Xe.reserveSpace}),_e=!1,se=0;se<2&&(Q.each(Be,function(tt,at){ie(at),fe(at),_e=q(at,at.ticks)||_e,V(at)}),_e&&y.processRange.length>0);se++)f(y.processRange,[]),_e=!1;for(se=Be.length-1;se>=0;--se)F(Be[se]);Y(),Q.each(Be,function(Xe,tt){z(tt)})}h=d.width-a.left-a.right,P=d.height-a.bottom-a.top,Q.each(ae,function(Xe,tt){L(tt)}),ge&&te(),Fe()}function k(se){var ae=se.options,ge=+(ae.min!=null?ae.min:se.datamin),Pe=+(ae.max!=null?ae.max:se.datamax),Re=Pe-ge;if(Re==0){var Be=.25,_e=Math.abs(Pe==0?1:Pe*Be);ae.min==null&&(ge-=_e),(ae.max==null||ae.min!=null)&&(Pe+=_e)}else{var Xe=ae.autoscaleMargin;Xe!=null&&(ae.min==null&&(ge-=Re*Xe,ge<0&&se.datamin!=null&&se.datamin>=0&&(ge=0)),ae.max==null&&(Pe+=Re*Xe,Pe>0&&se.datamax!=null&&se.datamax<=0&&(Pe=0)))}se.min=ge,se.max=Pe}function ee(se){if(se=Math.abs(String(se).replace(".","")),se==0)return 0;for(;se!=0&&se%10==0;)se/=10;return Math.floor(Math.log(se)/Math.LN10)+1}function ie(se){var ae=se.options,ge;typeof ae.ticks=="number"&&ae.ticks>0?ge=ae.ticks:ge=.3*Math.sqrt(se.direction=="x"?d.width:d.height);var Pe=(se.max-se.min)/ge,Re=-Math.floor(Math.log(Pe)/Math.LN10),Be=ae.tickDecimals;Be!=null&&Re>Be&&(Re=Be);var _e=Math.pow(10,-Re),Xe=Pe/_e,tt;if(Xe<1.5?tt=1:Xe<3?(tt=2,Xe>2.25&&(Be==null||Re+1<=Be)&&(tt=2.5,++Re)):Xe<7.5?tt=5:tt=10,tt*=_e,ae.minTickSize!=null&&tt<ae.minTickSize&&(tt=ae.minTickSize),se.delta=Pe,se.tickDecimals=Math.max(0,Be??Re),se.tickSize=ae.tickSize||tt,ae.mode=="time"&&!se.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(se.tickGenerator||(se.tickGenerator=function(ft){var yt=[],Tt=n(ft.min,ft.tickSize),Kt=0,Gt=Number.NaN,_t;do _t=Gt,Gt=Tt+Kt*ft.tickSize,yt.push(Gt),++Kt;while(Gt<ft.max&&Gt!=_t);return yt},se.tickFormatter=function(ft,yt){var Tt=yt.tickDecimals?Math.pow(10,yt.tickDecimals):1,Kt=""+Math.round(ft*Tt)/Tt;if(yt.tickDecimals!=null){var Gt=Kt.indexOf("."),_t=Gt==-1?0:Kt.length-Gt-1;if(_t<yt.tickDecimals)return(_t?Kt:Kt+".")+(""+Tt).substr(1,yt.tickDecimals-_t)}return Kt}),Q.isFunction(ae.tickFormatter)&&(se.tickFormatter=function(ft,yt){return""+ae.tickFormatter(ft,yt)}),ae.alignTicksWithAxis!=null){var at=(se.direction=="x"?p:b)[ae.alignTicksWithAxis-1];if(at&&at.used&&at!=se){var st=se.tickGenerator(se);if(st.length>0&&(ae.min==null&&(se.min=Math.min(se.min,st[0])),ae.max==null&&st.length>1&&(se.max=Math.max(se.max,st[st.length-1]))),se.tickGenerator=function(ft){var yt=[],Tt,Kt;for(Kt=0;Kt<at.ticks.length;++Kt)Tt=(at.ticks[Kt].v-at.min)/(at.max-at.min),Tt=ft.min+Tt*(ft.max-ft.min),yt.push(Tt);return yt},!se.mode&&ae.tickDecimals==null){var dt=Math.max(0,-Math.floor(Math.log(se.delta)/Math.LN10)+1),ot=se.tickGenerator(se);ot.length>1&&/\..*0$/.test((ot[1]-ot[0]).toFixed(dt))||(se.tickDecimals=dt)}}}}function fe(se){var ae=se.options.ticks,ge=[];ae==null||typeof ae=="number"&&ae>0?ge=se.tickGenerator(se):ae&&(Q.isFunction(ae)?ge=ae(se):ge=ae);var Pe,Re;for(se.ticks=[],Pe=0;Pe<ge.length;++Pe){var Be=null,_e=ge[Pe];typeof _e=="object"?(Re=+_e[0],_e.length>1&&(Be=_e[1])):Re=+_e,Be==null&&(Be=se.tickFormatter(Re,se)),isNaN(Re)||se.ticks.push({v:Re,label:Be})}}function q(se,ae){var ge=!1;return se.options.autoscaleMargin&&ae.length>0&&(se.options.min==null&&(se.min=Math.min(se.min,ae[0].v),ge=!0),se.options.max==null&&ae.length>1&&(se.max=Math.max(se.max,ae[ae.length-1].v),ge=!0)),ge}function Z(){d.clear(),f(y.drawBackground,[u]);var se=l.grid;se.show&&se.backgroundColor&&G(),se.show&&!se.aboveData&&ne();for(var ae=0;ae<i.length;++ae)f(y.drawSeries,[u,i[ae]]),le(i[ae]);f(y.draw,[u]),se.show&&se.aboveData&&ne(),d.render(),je()}function J(se,ae){for(var ge,Pe,Re,Be,_e=v(),Xe=0;Xe<_e.length;++Xe)if(ge=_e[Xe],ge.direction==ae&&(Be=ae+ge.n+"axis",!se[Be]&&ge.n==1&&(Be=ae+"axis"),se[Be])){Pe=se[Be].from,Re=se[Be].to;break}if(se[Be]||(ge=ae=="x"?p[0]:b[0],Pe=se[ae+"1"],Re=se[ae+"2"]),Pe!=null&&Re!=null&&Pe>Re){var tt=Pe;Pe=Re,Re=tt}return{from:Pe,to:Re,axis:ge}}function G(){u.save(),u.translate(a.left,a.top),u.fillStyle=ye(l.grid.backgroundColor,P,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,h,P),u.restore()}function ne(){var se,ae,ge,Pe;u.save(),u.translate(a.left,a.top);var Re=l.grid.markings;if(Re)for(Q.isFunction(Re)&&(ae=C.getAxes(),ae.xmin=ae.xaxis.min,ae.xmax=ae.xaxis.max,ae.ymin=ae.yaxis.min,ae.ymax=ae.yaxis.max,Re=Re(ae)),se=0;se<Re.length;++se){var Be=Re[se],_e=J(Be,"x"),Xe=J(Be,"y");if(_e.from==null&&(_e.from=_e.axis.min),_e.to==null&&(_e.to=_e.axis.max),Xe.from==null&&(Xe.from=Xe.axis.min),Xe.to==null&&(Xe.to=Xe.axis.max),!(_e.to<_e.axis.min||_e.from>_e.axis.max||Xe.to<Xe.axis.min||Xe.from>Xe.axis.max)){_e.from=Math.max(_e.from,_e.axis.min),_e.to=Math.min(_e.to,_e.axis.max),Xe.from=Math.max(Xe.from,Xe.axis.min),Xe.to=Math.min(Xe.to,Xe.axis.max);var tt=_e.from===_e.to,at=Xe.from===Xe.to;if(!(tt&&at))if(_e.from=Math.floor(_e.axis.p2c(_e.from)),_e.to=Math.floor(_e.axis.p2c(_e.to)),Xe.from=Math.floor(Xe.axis.p2c(Xe.from)),Xe.to=Math.floor(Xe.axis.p2c(Xe.to)),tt||at){var st=Be.lineWidth||l.grid.markingsLineWidth,dt=st%2?.5:0;u.beginPath(),u.strokeStyle=Be.color||l.grid.markingsColor,u.lineWidth=st,tt?(u.moveTo(_e.to+dt,Xe.from),u.lineTo(_e.to+dt,Xe.to)):(u.moveTo(_e.from,Xe.to+dt),u.lineTo(_e.to,Xe.to+dt)),u.stroke()}else u.fillStyle=Be.color||l.grid.markingsColor,u.fillRect(_e.from,Xe.to,_e.to-_e.from,Xe.from-Xe.to)}}ae=v(),ge=l.grid.borderWidth;for(var ot=0;ot<ae.length;++ot){var ft=ae[ot],yt=ft.box,Tt=ft.tickLength,Kt,Gt,_t,it;if(!(!ft.show||ft.ticks.length==0)){for(u.lineWidth=1,ft.direction=="x"?(Kt=0,Tt=="full"?Gt=ft.position=="top"?0:P:Gt=yt.top-a.top+(ft.position=="top"?yt.height:0)):(Gt=0,Tt=="full"?Kt=ft.position=="left"?0:h:Kt=yt.left-a.left+(ft.position=="left"?yt.width:0)),ft.innermost||(u.strokeStyle=ft.options.color,u.beginPath(),_t=it=0,ft.direction=="x"?_t=h+1:it=P+1,u.lineWidth==1&&(ft.direction=="x"?Gt=Math.floor(Gt)+.5:Kt=Math.floor(Kt)+.5),u.moveTo(Kt,Gt),u.lineTo(Kt+_t,Gt+it),u.stroke()),u.strokeStyle=ft.options.tickColor,u.beginPath(),se=0;se<ft.ticks.length;++se){var Mt=ft.ticks[se].v;_t=it=0,!(isNaN(Mt)||Mt<ft.min||Mt>ft.max||Tt=="full"&&(typeof ge=="object"&&ge[ft.position]>0||ge>0)&&(Mt==ft.min||Mt==ft.max))&&(ft.direction=="x"?(Kt=ft.p2c(Mt),it=Tt=="full"?-P:Tt,ft.position=="top"&&(it=-it)):(Gt=ft.p2c(Mt),_t=Tt=="full"?-h:Tt,ft.position=="left"&&(_t=-_t)),u.lineWidth==1&&(ft.direction=="x"?Kt=Math.floor(Kt)+.5:Gt=Math.floor(Gt)+.5),u.moveTo(Kt,Gt),u.lineTo(Kt+_t,Gt+it))}u.stroke()}}ge&&(Pe=l.grid.borderColor,typeof ge=="object"||typeof Pe=="object"?(typeof ge!="object"&&(ge={top:ge,right:ge,bottom:ge,left:ge}),typeof Pe!="object"&&(Pe={top:Pe,right:Pe,bottom:Pe,left:Pe}),ge.top>0&&(u.strokeStyle=Pe.top,u.lineWidth=ge.top,u.beginPath(),u.moveTo(0-ge.left,0-ge.top/2),u.lineTo(h,0-ge.top/2),u.stroke()),ge.right>0&&(u.strokeStyle=Pe.right,u.lineWidth=ge.right,u.beginPath(),u.moveTo(h+ge.right/2,0-ge.top),u.lineTo(h+ge.right/2,P),u.stroke()),ge.bottom>0&&(u.strokeStyle=Pe.bottom,u.lineWidth=ge.bottom,u.beginPath(),u.moveTo(h+ge.right,P+ge.bottom/2),u.lineTo(0,P+ge.bottom/2),u.stroke()),ge.left>0&&(u.strokeStyle=Pe.left,u.lineWidth=ge.left,u.beginPath(),u.moveTo(0-ge.left/2,P+ge.bottom),u.lineTo(0-ge.left/2,0),u.stroke())):(u.lineWidth=ge,u.strokeStyle=l.grid.borderColor,u.strokeRect(-ge/2,-ge/2,h+ge,P+ge))),u.restore()}function te(){Q.each(v(),function(se,ae){var ge=ae.box,Pe=ae.direction+"Axis "+ae.direction+ae.n+"Axis",Re="flot-"+ae.direction+"-axis flot-"+ae.direction+ae.n+"-axis "+Pe,Be=ae.options.font||"flot-tick-label tickLabel",_e,Xe,tt,at,st;if(d.removeText(Re),!(!ae.show||ae.ticks.length==0))for(var dt=0;dt<ae.ticks.length;++dt)_e=ae.ticks[dt],!(!_e.label||_e.v<ae.min||_e.v>ae.max)&&(ae.direction=="x"?(at="center",Xe=a.left+ae.p2c(_e.v),ae.position=="bottom"?tt=ge.top+ge.padding+ge.eventSectionPadding:(tt=ge.top+ge.height-ge.padding,st="bottom")):(st="middle",tt=a.top+ae.p2c(_e.v),ae.position=="left"?(Xe=ge.left+ge.width-ge.padding,at="right"):Xe=ge.left+ge.padding),d.addText(Re,Xe,tt,_e.label,Be,null,null,at,st))})}function oe(se){for(var ae=[],ge=null,Pe=null,Re=se.datapoints,Be=[],_e=0;_e<Re.pointsize-2;_e++)Be.push(0);for(var Xe=0;Xe<Re.points.length;Xe+=Re.pointsize){var tt=Re.points[Xe],at=Re.points[Xe+1];Xe===Re.points.length-Re.pointsize?Pe=null:Pe=Re.points[Xe+Re.pointsize],tt!==null&&at!==null&&ge===null&&Pe===null&&(ae.push(tt),ae.push(at),ae.push.apply(ae,Be)),ge=tt}var st=Re.points;Re.points=ae,se.points.radius=se.lines.lineWidth/2,Te(se),Re.points=st}function le(se){se.lines.show&&(ue(se),!se.points.show&&!se.bars.show&&oe(se)),se.bars.show&&re(se),se.points.show&&Te(se)}function ue(se){function ae(Xe,tt,at,st,dt){var ot=Xe.points,ft=Xe.pointsize,yt=null,Tt=null;u.beginPath();for(var Kt=ft;Kt<ot.length;Kt+=ft){var Gt=ot[Kt-ft],_t=ot[Kt-ft+1],it=ot[Kt],Mt=ot[Kt+1];if(!(Gt==null||it==null)){if(_t<=Mt&&_t<dt.min){if(Mt<dt.min)continue;Gt=(dt.min-_t)/(Mt-_t)*(it-Gt)+Gt,_t=dt.min}else if(Mt<=_t&&Mt<dt.min){if(_t<dt.min)continue;it=(dt.min-_t)/(Mt-_t)*(it-Gt)+Gt,Mt=dt.min}if(_t>=Mt&&_t>dt.max){if(Mt>dt.max)continue;Gt=(dt.max-_t)/(Mt-_t)*(it-Gt)+Gt,_t=dt.max}else if(Mt>=_t&&Mt>dt.max){if(_t>dt.max)continue;it=(dt.max-_t)/(Mt-_t)*(it-Gt)+Gt,Mt=dt.max}if(Gt<=it&&Gt<st.min){if(it<st.min)continue;_t=(st.min-Gt)/(it-Gt)*(Mt-_t)+_t,Gt=st.min}else if(it<=Gt&&it<st.min){if(Gt<st.min)continue;Mt=(st.min-Gt)/(it-Gt)*(Mt-_t)+_t,it=st.min}if(Gt>=it&&Gt>st.max){if(it>st.max)continue;_t=(st.max-Gt)/(it-Gt)*(Mt-_t)+_t,Gt=st.max}else if(it>=Gt&&it>st.max){if(Gt>st.max)continue;Mt=(st.max-Gt)/(it-Gt)*(Mt-_t)+_t,it=st.max}(Gt!=yt||_t!=Tt)&&u.moveTo(st.p2c(Gt)+tt,dt.p2c(_t)+at),yt=it,Tt=Mt,u.lineTo(st.p2c(it)+tt,dt.p2c(Mt)+at)}}u.stroke()}function ge(Xe,tt,at){for(var st=Xe.points,dt=Xe.pointsize,ot=Math.min(Math.max(0,at.min),at.max),ft=0,yt,Tt=!1,Kt=1,Gt=0,_t=0;!(dt>0&&ft>st.length+dt);){ft+=dt;var it=st[ft-dt],Mt=st[ft-dt+Kt],Dn=st[ft],lt=st[ft+Kt];if(Tt){if(dt>0&&it!=null&&Dn==null){_t=ft,dt=-dt,Kt=2;continue}if(dt<0&&ft==Gt+dt){u.fill(),Tt=!1,dt=-dt,Kt=1,ft=Gt=_t+dt;continue}}if(!(it==null||Dn==null)){if(it<=Dn&&it<tt.min){if(Dn<tt.min)continue;Mt=(tt.min-it)/(Dn-it)*(lt-Mt)+Mt,it=tt.min}else if(Dn<=it&&Dn<tt.min){if(it<tt.min)continue;lt=(tt.min-it)/(Dn-it)*(lt-Mt)+Mt,Dn=tt.min}if(it>=Dn&&it>tt.max){if(Dn>tt.max)continue;Mt=(tt.max-it)/(Dn-it)*(lt-Mt)+Mt,it=tt.max}else if(Dn>=it&&Dn>tt.max){if(it>tt.max)continue;lt=(tt.max-it)/(Dn-it)*(lt-Mt)+Mt,Dn=tt.max}if(Tt||(u.beginPath(),u.moveTo(tt.p2c(it),at.p2c(ot)),Tt=!0),Mt>=at.max&&lt>=at.max){u.lineTo(tt.p2c(it),at.p2c(at.max)),u.lineTo(tt.p2c(Dn),at.p2c(at.max));continue}else if(Mt<=at.min&&lt<=at.min){u.lineTo(tt.p2c(it),at.p2c(at.min)),u.lineTo(tt.p2c(Dn),at.p2c(at.min));continue}var Ct=it,Vt=Dn;Mt<=lt&&Mt<at.min&&lt>=at.min?(it=(at.min-Mt)/(lt-Mt)*(Dn-it)+it,Mt=at.min):lt<=Mt&&lt<at.min&&Mt>=at.min&&(Dn=(at.min-Mt)/(lt-Mt)*(Dn-it)+it,lt=at.min),Mt>=lt&&Mt>at.max&&lt<=at.max?(it=(at.max-Mt)/(lt-Mt)*(Dn-it)+it,Mt=at.max):lt>=Mt&&lt>at.max&&Mt<=at.max&&(Dn=(at.max-Mt)/(lt-Mt)*(Dn-it)+it,lt=at.max),it!=Ct&&u.lineTo(tt.p2c(Ct),at.p2c(Mt)),u.lineTo(tt.p2c(it),at.p2c(Mt)),u.lineTo(tt.p2c(Dn),at.p2c(lt)),Dn!=Vt&&(u.lineTo(tt.p2c(Dn),at.p2c(lt)),u.lineTo(tt.p2c(Vt),at.p2c(lt)))}}}u.save(),u.translate(a.left,a.top),u.lineJoin="round";var Pe=se.lines.lineWidth,Re=se.shadowSize;if(Pe>0&&Re>0){u.lineWidth=Re,u.strokeStyle="rgba(0,0,0,0.1)";var Be=Math.PI/18;ae(se.datapoints,Math.sin(Be)*(Pe/2+Re/2),Math.cos(Be)*(Pe/2+Re/2),se.xaxis,se.yaxis),u.lineWidth=Re/2,ae(se.datapoints,Math.sin(Be)*(Pe/2+Re/4),Math.cos(Be)*(Pe/2+Re/4),se.xaxis,se.yaxis)}u.lineWidth=Pe,u.strokeStyle=se.color;var _e=De(se.lines,se.color,0,P);_e&&(u.fillStyle=_e,ge(se.datapoints,se.xaxis,se.yaxis)),Pe>0&&ae(se.datapoints,0,0,se.xaxis,se.yaxis),u.restore()}function Te(se){function ae(Xe,tt,at,st,dt,ot,ft,yt){for(var Tt=Xe.points,Kt=Xe.pointsize,Gt=0;Gt<Tt.length;Gt+=Kt){var _t=Tt[Gt],it=Tt[Gt+1];_t==null||_t<ot.min||_t>ot.max||it<ft.min||it>ft.max||(u.beginPath(),_t=ot.p2c(_t),it=ft.p2c(it)+st,yt=="circle"?u.arc(_t,it,tt,0,dt?Math.PI:Math.PI*2,!1):yt(u,_t,it,tt,dt),u.closePath(),at&&(u.fillStyle=at,u.fill()),u.stroke())}}u.save(),u.translate(a.left,a.top);var ge=se.points.lineWidth,Pe=se.shadowSize,Re=se.points.radius,Be=se.points.symbol;if(ge==0&&(ge=1e-4),ge>0&&Pe>0){var _e=Pe/2;u.lineWidth=_e,u.strokeStyle="rgba(0,0,0,0.1)",ae(se.datapoints,Re,null,_e+_e/2,!0,se.xaxis,se.yaxis,Be),u.strokeStyle="rgba(0,0,0,0.2)",ae(se.datapoints,Re,null,_e/2,!0,se.xaxis,se.yaxis,Be)}u.lineWidth=ge,u.strokeStyle=se.color,ae(se.datapoints,Re,De(se.points,se.color),0,!1,se.xaxis,se.yaxis,Be),u.restore()}function he(se,ae,ge,Pe,Re,Be,_e,Xe,tt,at,st){var dt,ot,ft,yt,Tt,Kt,Gt,_t,it;at?(_t=Kt=Gt=!0,Tt=!1,dt=ge,ot=se,yt=ae+Pe,ft=ae+Re,ot<dt&&(it=ot,ot=dt,dt=it,Tt=!0,Kt=!1)):(Tt=Kt=Gt=!0,_t=!1,dt=se+Pe,ot=se+Re,ft=ge,yt=ae,yt<ft&&(it=yt,yt=ft,ft=it,_t=!0,Gt=!1)),!(ot<_e.min||dt>_e.max||yt<Xe.min||ft>Xe.max)&&(dt<_e.min&&(dt=_e.min,Tt=!1),ot>_e.max&&(ot=_e.max,Kt=!1),ft<Xe.min&&(ft=Xe.min,_t=!1),yt>Xe.max&&(yt=Xe.max,Gt=!1),dt=_e.p2c(dt),ft=Xe.p2c(ft),ot=_e.p2c(ot),yt=Xe.p2c(yt),Be&&(tt.fillStyle=Be(ft,yt),tt.fillRect(dt,yt,ot-dt,ft-yt)),st>0&&(Tt||Kt||Gt||_t)&&(tt.beginPath(),tt.moveTo(dt,ft),Tt?tt.lineTo(dt,yt):tt.moveTo(dt,yt),Gt?tt.lineTo(ot,yt):tt.moveTo(ot,yt),Kt?tt.lineTo(ot,ft):tt.moveTo(ot,ft),_t?tt.lineTo(dt,ft):tt.moveTo(dt,ft),tt.stroke()))}function re(se){function ae(Re,Be,_e,Xe,tt,at){for(var st=Re.points,dt=Re.pointsize,ot=0;ot<st.length;ot+=dt)st[ot]!=null&&he(st[ot],st[ot+1],st[ot+2],Be,_e,Xe,tt,at,u,se.bars.horizontal,se.bars.lineWidth)}u.save(),u.translate(a.left,a.top),u.lineWidth=se.bars.lineWidth,u.strokeStyle=se.color;var ge;switch(se.bars.align){case"left":ge=0;break;case"right":ge=-se.bars.barWidth;break;default:ge=-se.bars.barWidth/2}var Pe=se.bars.fill?function(Re,Be){return De(se.bars,se.color,Re,Be)}:null;ae(se.datapoints,ge,ge+se.bars.barWidth,Pe,se.xaxis,se.yaxis),u.restore()}function De(se,ae,ge,Pe){var Re=se.fill;if(!Re)return null;if(se.fillColor)return ye(se.fillColor,ge,Pe,ae);var Be=Q.color.parse(ae);return Be.a=typeof Re=="number"?Re:.4,Be.normalize(),Be.toString()}function Fe(){if(l.legend.container!=null?Q.find(l.legend.container).html(""):r.find(".legend").remove(),!!l.legend.show){for(var se=[],ae=[],ge=!1,Pe=l.legend.labelFormatter,Re,Be,_e=0;_e<i.length;++_e)Re=i[_e],Re.label&&(Be=Pe?Pe(Re.label,Re):Re.label,Be&&ae.push({label:Be,color:Re.color}));if(l.legend.sorted)if(Q.isFunction(l.legend.sorted))ae.sort(l.legend.sorted);else if(l.legend.sorted=="reverse")ae.reverse();else{var Xe=l.legend.sorted!="descending";ae.sort(function(Kt,Gt){return Kt.label==Gt.label?0:Kt.label<Gt.label!=Xe?1:-1})}for(var _e=0;_e<ae.length;++_e){var tt=ae[_e];_e%l.legend.noColumns==0&&(ge&&se.push("</tr>"),se.push("<tr>"),ge=!0),se.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+tt.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+tt.label+"</td>")}if(ge&&se.push("</tr>"),se.length!=0){var at='<table style="font-size:smaller;color:'+l.grid.color+'">'+se.join("")+"</table>";if(l.legend.container!=null)Q(l.legend.container).html(at);else{var st="",dt=l.legend.position,ot=l.legend.margin;ot[0]==null&&(ot=[ot,ot]),dt.charAt(0)=="n"?st+="top:"+(ot[1]+a.top)+"px;":dt.charAt(0)=="s"&&(st+="bottom:"+(ot[1]+a.bottom)+"px;"),dt.charAt(1)=="e"?st+="right:"+(ot[0]+a.right)+"px;":dt.charAt(1)=="w"&&(st+="left:"+(ot[0]+a.left)+"px;");var ft=Q('<div class="legend">'+at.replace('style="','style="position:absolute;'+st+";")+"</div>").appendTo(r);if(l.legend.backgroundOpacity!=0){var yt=l.legend.backgroundColor;yt==null&&(yt=l.grid.backgroundColor,yt&&typeof yt=="string"?yt=Q.color.parse(yt):yt=Q.color.extract(ft,"background-color"),yt.a=1,yt=yt.toString());var Tt=ft.children();Q('<div style="position:absolute;width:'+Tt.width()+"px;height:"+Tt.height()+"px;"+st+"background-color:"+yt+';"> </div>').prependTo(ft).css("opacity",l.legend.backgroundOpacity)}}}}}var Ee=[],Me=null;function ze(se,ae,ge){var Pe=l.grid.mouseActiveRadius,Re=Pe*Pe+1,Be=null,_e=!1,Xe,tt,at;for(Xe=i.length-1;Xe>=0;--Xe)if(ge(i[Xe])){var st=i[Xe],dt=st.xaxis,ot=st.yaxis,ft=st.datapoints.points,yt=dt.c2p(se),Tt=ot.c2p(ae),Kt=Pe/dt.scale,Gt=Pe/ot.scale;if(at=st.datapoints.pointsize,dt.options.inverseTransform&&(Kt=Number.MAX_VALUE),ot.options.inverseTransform&&(Gt=Number.MAX_VALUE),st.lines.show||st.points.show)for(tt=0;tt<ft.length;tt+=at){var _t=ft[tt],it=ft[tt+1];if(_t!=null&&!(_t-yt>Kt||_t-yt<-Kt||it-Tt>Gt||it-Tt<-Gt)){var Mt=Math.abs(dt.p2c(_t)-se),Dn=Math.abs(ot.p2c(it)-ae),lt=Mt*Mt+Dn*Dn;lt<Re&&(Re=lt,Be=[Xe,tt/at])}}if(st.bars.show&&!Be){var Ct,Vt;switch(st.bars.align){case"left":Ct=0;break;case"right":Ct=-st.bars.barWidth;break;default:Ct=-st.bars.barWidth/2}for(Vt=Ct+st.bars.barWidth,tt=0;tt<ft.length;tt+=at){var _t=ft[tt],it=ft[tt+1],qt=ft[tt+2];_t!=null&&(i[Xe].bars.horizontal?yt<=Math.max(qt,_t)&&yt>=Math.min(qt,_t)&&Tt>=it+Ct&&Tt<=it+Vt:yt>=_t+Ct&&yt<=_t+Vt&&Tt>=Math.min(qt,it)&&Tt<=Math.max(qt,it))&&(Be=[Xe,tt/at])}}}return Be?(Xe=Be[0],tt=Be[1],at=i[Xe].datapoints.pointsize,{datapoint:i[Xe].datapoints.points.slice(tt*at,(tt+1)*at),dataIndex:tt,series:i[Xe],seriesIndex:Xe}):null}function xe(se){l.grid.hoverable&&we("plothover",se,function(ae){return ae.hoverable!=!1})}function We(se){l.grid.hoverable&&we("plothover",se,function(ae){return!1})}function be(se){C.isSelecting||we("plotclick",se,function(ae){return ae.clickable!=!1})}function pe(se){if(se.cancelable){if(!g.is(se.target)&&g.has(se.target).length===0){we("plotleave",se,function(ae){});return}xe(Ue(se)),se.preventDefault()}}function Ue(se){if(!se||!se.originalEvent||se.pageX&&se.pageY)return se;var ae=se.originalEvent;if(ae.changedTouches.length===0)return se;var ge=ae.changedTouches[0];return se.pageX=ge.pageX,se.pageY=ge.pageY,se}function we(se,ae,ge){var Pe=g.offset(),Re=ae.pageX-Pe.left-a.left,Be=ae.pageY-Pe.top-a.top,_e=x({left:Re,top:Be});_e.pageX=ae.pageX,_e.pageY=ae.pageY,_e.ctrlKey=ae.ctrlKey,_e.metaKey=ae.metaKey;var Xe=ze(Re,Be,ge);if(Xe&&(Xe.pageX=parseInt(Xe.series.xaxis.p2c(Xe.datapoint[0])+Pe.left+a.left,10),Xe.pageY=parseInt(Xe.series.yaxis.p2c(Xe.datapoint[1])+Pe.top+a.top,10)),l.grid.autoHighlight){for(var tt=0;tt<Ee.length;++tt){var at=Ee[tt];at.auto==se&&!(Xe&&at.series==Xe.series&&at.point[0]==Xe.datapoint[0]&&at.point[1]==Xe.datapoint[1])&&Je(at.series,at.point)}Xe&&rt(Xe.series,Xe.datapoint,se)}r.trigger(se,[_e,Xe])}function je(){var se=l.interaction.redrawOverlayInterval;if(se==-1){He();return}Me||(Me=setTimeout(He,se))}function He(){Me=null,E.save(),c.clear(),E.translate(a.left,a.top);var se,ae;for(se=0;se<Ee.length;++se)ae=Ee[se],ae.series.bars.show?Ne(ae.series,ae.point):Oe(ae.series,ae.point);E.restore(),f(y.drawOverlay,[E])}function rt(se,ae,ge){if(typeof se=="number"&&(se=i[se]),typeof ae=="number"){var Pe=se.datapoints.pointsize;ae=se.datapoints.points.slice(Pe*ae,Pe*(ae+1))}var Re=Ve(se,ae);Re==-1?(Ee.push({series:se,point:ae,auto:ge}),je()):ge||(Ee[Re].auto=!1)}function Je(se,ae){if(se==null&&ae==null){Ee=[],je();return}if(typeof se=="number"&&(se=i[se]),typeof ae=="number"){var ge=se.datapoints.pointsize;ae=se.datapoints.points.slice(ge*ae,ge*(ae+1))}var Pe=Ve(se,ae);Pe!=-1&&(Ee.splice(Pe,1),je())}function Ve(se,ae){for(var ge=0;ge<Ee.length;++ge){var Pe=Ee[ge];if(Pe.series==se&&Pe.point[0]==ae[0]&&Pe.point[1]==ae[1])return ge}return-1}function Oe(se,ae){var ge=ae[0],Pe=ae[1],Re=se.xaxis,Be=se.yaxis,_e=typeof se.highlightColor=="string"?se.highlightColor:Q.color.parse(se.color).scale("a",.5).toString();if(!(ge<Re.min||ge>Re.max||Pe<Be.min||Pe>Be.max)){var Xe=se.points.radius+se.points.lineWidth/2;E.lineWidth=Xe,E.strokeStyle=_e;var tt=1.5*Xe;ge=Re.p2c(ge),Pe=Be.p2c(Pe),E.beginPath(),se.points.symbol=="circle"?E.arc(ge,Pe,tt,0,2*Math.PI,!1):se.points.symbol(E,ge,Pe,tt,!1),E.closePath(),E.stroke()}}function Ne(se,ae){var ge=typeof se.highlightColor=="string"?se.highlightColor:Q.color.parse(se.color).scale("a",.5).toString(),Pe=ge,Re;switch(se.bars.align){case"left":Re=0;break;case"right":Re=-se.bars.barWidth;break;default:Re=-se.bars.barWidth/2}E.lineWidth=se.bars.lineWidth,E.strokeStyle=ge,he(ae[0],ae[1],ae[2]||0,Re,Re+se.bars.barWidth,function(){return Pe},se.xaxis,se.yaxis,E,se.bars.horizontal,se.bars.lineWidth)}function ye(se,ae,ge,Pe){if(typeof se=="string")return se;for(var Re=u.createLinearGradient(0,ge,0,ae),Be=0,_e=se.colors.length;Be<_e;++Be){var Xe=se.colors[Be];if(typeof Xe!="string"){var tt=Q.color.parse(Pe);Xe.brightness!=null&&(tt=tt.scale("rgb",Xe.brightness)),Xe.opacity!=null&&(tt.a*=Xe.opacity),Xe=tt.toString()}Re.addColorStop(Be/(_e-1),Xe)}return Re}}Q.plot=function(r,s,o){var m=new t(Q(r),s,o,Q.plot.plugins);return m},Q.plot.version="0.8.3",Q.plot.plugins=[],Q.fn.plot=function(r,s){return this.each(function(){Q.plot(this,r,s)})};function n(r,s){return s*Math.floor(r/s)}}(jQuery)},80851:()=>{(function(Q){function I(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},r=null;function s(a){t.active&&(g(a),e.getPlaceholder().trigger("plotselecting",[i()]))}function o(a){a.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),c(t.first,a),t.active=!0,r=function(h){m(h)},Q(document).one("mouseup",r))}function m(a){return r=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,g(a),b()?l(a):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function i(){if(!b()||!t.show)return null;var a={},h=t.first,P=t.second,y=e.getAxes(),C=!0;return Q.each(y,function(f,D){D.used&&(anyUsed=!1)}),Q.each(y,function(f,D){if(D.used||C){var T=D.c2p(h[D.direction]),M=D.c2p(P[D.direction]);a[f]={from:Math.min(T,M),to:Math.max(T,M)}}}),a}function l(a){var h=i();h.ctrlKey=a.ctrlKey,h.metaKey=a.metaKey,e.getPlaceholder().trigger("plotselected",[h]),h.xaxis&&h.yaxis&&e.getPlaceholder().trigger("selected",[{x1:h.xaxis.from,y1:h.yaxis.from,x2:h.xaxis.to,y2:h.yaxis.to}])}function d(a,h,P){return h<a?a:h>P?P:h}function c(a,h){var P=e.getOptions(),y=e.getPlaceholder().offset(),C=e.getPlotOffset();a.x=d(0,h.pageX-y.left-C.left,e.width()),a.y=d(0,h.pageY-y.top-C.top,e.height()),P.selection.mode=="y"&&(a.x=a==t.first?0:e.width()),P.selection.mode=="x"&&(a.y=a==t.first?0:e.height())}function g(a){a.pageX!=null&&(c(t.second,a),b()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):u(!0))}function u(a){t.show&&(t.show=!1,e.triggerRedrawOverlay(),a||e.getPlaceholder().trigger("plotunselected",[]))}function E(a,h){var P,y,C,f,D=e.getAxes();for(var T in D)if(P=D[T],P.direction==h&&(f=h+P.n+"axis",!a[f]&&P.n==1&&(f=h+"axis"),a[f])){y=a[f].from,C=a[f].to;break}if(a[f]||(P=h=="x"?e.getXAxes()[0]:e.getYAxes()[0],y=a[h+"1"],C=a[h+"2"]),y!=null&&C!=null&&y>C){var M=y;y=C,C=M}return{from:y,to:C,axis:P}}function p(a,h){var P,y,C=e.getOptions();C.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(y=E(a,"x"),t.first.x=y.axis.p2c(y.from),t.second.x=y.axis.p2c(y.to)),C.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(y=E(a,"y"),t.first.y=y.axis.p2c(y.from),t.second.y=y.axis.p2c(y.to)),t.show=!0,e.triggerRedrawOverlay(),!h&&b()&&l()}function b(){var a=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=a&&Math.abs(t.second.y-t.first.y)>=a}e.clearSelection=u,e.setSelection=p,e.getSelection=i,e.hooks.bindEvents.push(function(a,h){var P=a.getOptions();P.selection.mode!=null&&(h.mousemove(s),h.mousedown(o))}),e.hooks.drawOverlay.push(function(a,h){if(t.show&&b()){var P=a.getPlotOffset(),y=a.getOptions();h.save(),h.translate(P.left,P.top);var C=Q.color.parse(y.selection.color);h.strokeStyle=C.scale("a",.8).toString(),h.lineWidth=1,h.lineJoin=y.selection.shape,h.fillStyle=C.scale("a",.4).toString();var f=Math.min(t.first.x,t.second.x)+.5,D=Math.min(t.first.y,t.second.y)+.5,T=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;h.fillRect(f,D,T,M),h.strokeRect(f,D,T,M),h.restore()}}),e.hooks.shutdown.push(function(a,h){h.unbind("mousemove",s),h.unbind("mousedown",o),r&&(Q(document).unbind("mouseup",r),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Q.plot.plugins.push({init:I,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},31221:()=>{(function(Q){var I={series:{stack:null}};function e(t){function n(s,o){for(var m=null,i=0;i<o.length&&s!=o[i];++i)o[i].stack==s.stack&&(m=o[i]);return m}function r(s,o,m){if(!(o.stack==null||o.stack===!1)){var i=n(o,s.getData());if(i){for(var l=m.pointsize,d=m.points,c=i.datapoints.pointsize,g=i.datapoints.points,u=[],E,p,b,a,h,P,y=o.lines.show,C=o.bars.horizontal,f=l>2&&(C?m.format[2].x:m.format[2].y),D=y&&o.lines.steps,T=C?1:0,M=C?0:1,O=0,S=0,v,x;!(O>=d.length&&S>=g.length);){if(v=u.length,O<d.length&&d[O]==null){for(x=0;x<l;++x)u.push(d[O+x]);O+=l}else if(O>=d.length){for(x=0;x<l;++x)u.push(g[S+x]);f&&(u[v+2]=g[S+M]),S+=c}else if(S>=g.length){for(x=0;x<l;++x)u.push(d[O+x]);O+=l}else if(S<g.length&&g[S]==null)S+=c;else{if(E=d[O+T],p=d[O+M],a=g[S+T],h=g[S+M],P=0,E==a){for(x=0;x<l;++x)u.push(d[O+x]);u[v+M]+=h,P=h,O+=l,S+=c}else if(E>a){if(O==0){for(x=0;x<l;++x)u.push(g[S+x]);P=h}if(O>0&&d[O-l]!=null){for(b=0,u.push(a),u.push(b+h),x=2;x<l;++x)u.push(d[O+x]);P=h}S+=c}else{for(x=0;x<l;++x)u.push(d[O+x]);S>0&&g[S-c]!=null&&(P=0),u[v+M]+=P,O+=l}fromgap=!1,v!=u.length&&f&&(u[v+2]=P)}if(D&&v!=u.length&&v>0&&u[v]!=null&&u[v]!=u[v-l]&&u[v+1]!=u[v-l+1]){for(x=0;x<l;++x)u[v+l+x]=u[v+x];u[v+1]=u[v-l+1]}}m.points=u}}}t.hooks.processDatapoints.push(r)}Q.plot.plugins.push({init:e,options:I,name:"stack",version:"1.2"})})(jQuery)},91520:()=>{(function(Q){var I={series:{stackpercent:null}};function e(t){var n={},r=!1,s={};function o(l,d,c,g){if(r||(r=!0,s=m(l.getData())),d.stackpercent==!0){var u=c.length;d.percents=[];var E=0,p=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(E=1,p=0);for(var b=0;b<u;b++){var a=s[c[b][E]+""];a>0?d.percents.push(c[b][p]*100/a):d.percents.push(0)}}}function m(l){var d=l.length,c={};if(d>0){for(var g=0;g<d;g++)if(l[g].stackpercent){var u=0,E=1;l[g].bars&&l[g].bars.horizontal&&l[g].bars.horizontal===!0&&(u=1,E=0);for(var p=l[g].data.length,b=0;b<p;b++){var a=0;l[g].data[b][1]!=null&&(a=l[g].data[b][E]),c[l[g].data[b][u]+""]?c[l[g].data[b][u]+""]+=a:c[l[g].data[b][u]+""]=a}}}return c}function i(l,d,c){if(d.stackpercent){r||(s=m(l.getData()));var g=[],u=0,E=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(u=1,E=0);for(var p=0;p<c.points.length;p+=3)n[c.points[p+u]]||(n[c.points[p+u]]=0),g[p+u]=c.points[p+u],g[p+E]=c.points[p+E]+n[c.points[p+u]],g[p+2]=n[c.points[p+u]],n[c.points[p+u]]+=c.points[p+E],s[g[p+u]+""]>0?(g[p+E]=g[p+E]*100/s[g[p+u]+""],g[p+2]=g[p+2]*100/s[g[p+u]+""]):(g[p+E]=0,g[p+2]=0);c.points=g}}t.hooks.processRawData.push(o),t.hooks.processDatapoints.push(i)}Q.plot.plugins.push({init:e,options:I,name:"stackpercent",version:"0.1"})})(jQuery)},32176:()=>{(function(Q){var I={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(d,c){return c*Math.floor(d/c)}function t(d,c,g,u){if(typeof d.strftime=="function")return d.strftime(c);var E=function(f,D){return f=""+f,D=""+(D??"0"),f.length==1?D+f:f},p=[],b=!1,a=d.getHours(),h=a<12;g==null&&(g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),u==null&&(u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var P;a>12?P=a-12:a==0?P=12:P=a;for(var y=0;y<c.length;++y){var C=c.charAt(y);if(b){switch(C){case"a":C=""+u[d.getDay()];break;case"b":C=""+g[d.getMonth()];break;case"d":C=E(d.getDate(),"");break;case"e":C=E(d.getDate()," ");break;case"h":case"H":C=E(a);break;case"I":C=E(P);break;case"l":C=E(P," ");break;case"m":C=E(d.getMonth()+1,"");break;case"M":C=E(d.getMinutes());break;case"q":C=""+(Math.floor(d.getMonth()/3)+1);break;case"S":C=E(d.getSeconds());break;case"y":C=E(d.getFullYear()%100);break;case"Y":C=""+d.getFullYear();break;case"p":C=h?"am":"pm";break;case"P":C=h?"AM":"PM";break;case"w":C=""+d.getDay();break}p.push(C),b=!1}else C=="%"?b=!0:p.push(C)}return p.join("")}function n(d){function c(p,b,a,h){p[b]=function(){return a[h].apply(a,arguments)}}var g={date:d};d.strftime!=null&&c(g,"strftime",d,"strftime"),c(g,"getTime",d,"getTime"),c(g,"setTime",d,"setTime");for(var u=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],E=0;E<u.length;E++)c(g,"get"+u[E],d,"getUTC"+u[E]),c(g,"set"+u[E],d,"setUTC"+u[E]);return g}function r(d,c){if(c.timezone=="browser")return new Date(d);if(!c.timezone||c.timezone=="utc")return n(new Date(d));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var g=new timezoneJS.Date;return g.setTimezone(c.timezone),g.setTime(d),g}else return n(new Date(d))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],m=o.concat([[3,"month"],[6,"month"],[1,"year"]]),i=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function l(d){d.hooks.processOptions.push(function(c,g){Q.each(c.getAxes(),function(u,E){var p=E.options;p.mode=="time"&&(E.tickGenerator=function(b){var a=[],h=r(b.min,p),P=0,y=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?i:m;p.minTickSize!=null&&(typeof p.tickSize=="number"?P=p.tickSize:P=p.minTickSize[0]*s[p.minTickSize[1]]);for(var C=0;C<y.length-1&&!(b.delta<(y[C][0]*s[y[C][1]]+y[C+1][0]*s[y[C+1][1]])/2&&y[C][0]*s[y[C][1]]>=P);++C);var f=y[C][0],D=y[C][1];if(D=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")f=Math.floor(p.minTickSize[0]);else{var T=Math.pow(10,Math.floor(Math.log(b.delta/s.year)/Math.LN10)),M=b.delta/s.year/T;M<1.5?f=1:M<3?f=2:M<7.5?f=5:f=10,f*=T}f<1&&(f=1)}b.tickSize=p.tickSize||[f,D];var O=b.tickSize[0];D=b.tickSize[1];var S=O*s[D];D=="second"?h.setSeconds(e(h.getSeconds(),O)):D=="minute"?h.setMinutes(e(h.getMinutes(),O)):D=="hour"?h.setHours(e(h.getHours(),O)):D=="month"?h.setMonth(e(h.getMonth(),O)):D=="quarter"?h.setMonth(3*e(h.getMonth()/3,O)):D=="year"&&h.setFullYear(e(h.getFullYear(),O)),h.setMilliseconds(0),S>=s.minute&&h.setSeconds(0),S>=s.hour&&h.setMinutes(0),S>=s.day&&h.setHours(0),S>=s.day*4&&h.setDate(1),S>=s.month*2&&h.setMonth(e(h.getMonth(),3)),S>=s.quarter*2&&h.setMonth(e(h.getMonth(),6)),S>=s.year&&h.setMonth(0);var v=0,x=Number.NaN,A;do if(A=x,x=h.getTime(),a.push(x),D=="month"||D=="quarter")if(O<1){h.setDate(1);var R=h.getTime();h.setMonth(h.getMonth()+(D=="quarter"?3:1));var B=h.getTime();h.setTime(x+v*s.hour+(B-R)*O),v=h.getHours(),h.setHours(0)}else h.setMonth(h.getMonth()+O*(D=="quarter"?3:1));else D=="year"?h.setFullYear(h.getFullYear()+O):h.setTime(x+S);while(x<b.max&&x!=A);return a},E.tickFormatter=function(b,a){var h=r(b,a.options);if(p.timeformat!=null)return t(h,p.timeformat,p.monthNames,p.dayNames);var P=a.options.tickSize&&a.options.tickSize[1]=="quarter"||a.options.minTickSize&&a.options.minTickSize[1]=="quarter",y=a.tickSize[0]*s[a.tickSize[1]],C=a.max-a.min,f=p.twelveHourClock?" %p":"",D=p.twelveHourClock?"%I":"%H",T;y<s.minute?T=D+":%M:%S"+f:y<s.day?C<2*s.day?T=D+":%M"+f:T="%b %d "+D+":%M"+f:y<s.month?T="%b %d":P&&y<s.quarter||!P&&y<s.year?C<s.year?T="%b":T="%b %Y":P&&y<s.year?C<s.year?T="Q%q":T="Q%q %Y":T="%Y";var M=t(h,T,p.monthNames,p.dayNames);return M})})})}Q.plot.plugins.push({init:l,options:I,name:"time",version:"1.0"}),Q.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=4570.87a4acc6d9144f9ee50a.js.map