"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3236],{58164:(Je,M,c)=>{c.r(M),c.d(M,{default:()=>Ke,getHomeApp:()=>U});var a=c(96540),j=c(32264),e=c(86849),k=c(77109),V=c(72798),T=c(56361),g=c(32196),z=c(8867),y=c(40845),D=c(67061),w=c(94753),R=c(72109);const O=()=>new e.P1({body:new e.G1({children:[new e.vA({body:new e.dM({component:K})})]})});function K(){const n=(0,y.$j)(),t=(0,y.of)(Y);return a.createElement("div",{className:t.grid},a.createElement(I,null,a.createElement(D.B,{direction:"column",gap:1},a.createElement(w.E,{element:"h3"},"How it works"),a.createElement("ul",{className:t.list},a.createElement("li",null,"Grafana alerting periodically queries data sources and evaluates the condition defined in the alert rule"),a.createElement("li",null,"If the condition is breached, an alert instance fires"),a.createElement("li",null,"Firing instances are routed to notification policies based on matching labels"),a.createElement("li",null,"Notifications are sent out to the contact points specified in the notification policy")),a.createElement("div",{className:t.svgContainer},a.createElement(D.B,{justifyContent:"center"},a.createElement(z.default,{src:`public/img/alerting/at_a_glance_${n.name.toLowerCase()}.svg`,width:void 0,height:void 0}))))),a.createElement(I,null,a.createElement(D.B,{direction:"column",gap:1},a.createElement(w.E,{element:"h3"},"Get started"),a.createElement("ul",{className:t.list},a.createElement("li",null,a.createElement(w.E,{weight:"bold"},"Create an alert rule")," by adding queries and expressions from multiple data sources."),a.createElement("li",null,a.createElement(w.E,{weight:"bold"},"Add labels")," to your alert rules"," ",a.createElement(w.E,{weight:"bold"},"to connect them to notification policies")),a.createElement("li",null,a.createElement(w.E,{weight:"bold"},"Configure contact points")," to define where to send your notifications to."),a.createElement("li",null,a.createElement(w.E,{weight:"bold"},"Configure notification policies")," to route your alert instances to contact points.")),a.createElement(R.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/",icon:"angle-right",inline:!1,external:!0},"Read more in the docs"))))}const Y=n=>({grid:(0,g.css)({display:"grid",gridTemplateRows:"min-content auto auto",gridTemplateColumns:"1fr",gap:n.spacing(2),width:"100%",[n.breakpoints.up("lg")]:{gridTemplateColumns:"3fr 2fr"}}),ctaContainer:(0,g.css)({gridColumn:"1 / span 5"}),svgContainer:(0,g.css)({"& svg":{maxWidth:"900px",flex:1}}),list:(0,g.css)({margin:n.spacing(0,2),"& > li":{marginBottom:n.spacing(1)}})});function B({className:n}){const t=(0,y.of)(Q);return a.createElement("div",{className:t.welcomeHeaderWrapper},a.createElement("div",{className:t.subtitle},"Learn about problems in your systems moments after they occur"),a.createElement(I,{className:(0,g.cx)(t.ctaContainer,n)},a.createElement($,{title:"Alert rules",description:"Define the condition that must be met before an alert rule fires",href:"/alerting/list",hrefText:"Manage alert rules"}),a.createElement("div",{className:t.separator}),a.createElement($,{title:"Contact points",description:"Configure who receives notifications and how they are sent",href:"/alerting/notifications",hrefText:"Manage contact points"}),a.createElement("div",{className:t.separator}),a.createElement($,{title:"Notification policies",description:"Configure how firing alert instances are routed to contact points",href:"/alerting/routes",hrefText:"Manage notification policies"})))}const Q=n=>({welcomeHeaderWrapper:(0,g.css)({color:n.colors.text.primary}),subtitle:(0,g.css)({color:n.colors.text.secondary,paddingBottom:n.spacing(2)}),ctaContainer:(0,g.css)({padding:n.spacing(2),display:"flex",gap:n.spacing(4),justifyContent:"space-between",flexWrap:"wrap",[n.breakpoints.down("lg")]:{flexDirection:"column"}}),separator:(0,g.css)({width:"1px",backgroundColor:n.colors.border.medium,[n.breakpoints.down("lg")]:{display:"none"}})});function $({title:n,description:t,href:s,hrefText:r}){const i=(0,y.of)(J);return a.createElement("div",{className:i.container},a.createElement(w.E,{element:"h2",variant:"h3"},n),a.createElement("div",{className:i.desc},t),a.createElement("div",{className:i.actionRow},a.createElement(R.Y,{href:s,inline:!1},r)))}const J=n=>({container:(0,g.css)({flex:1,minWidth:"240px",display:"grid",rowGap:n.spacing(1),gridTemplateColumns:"min-content 1fr 1fr 1fr",gridTemplateRows:"min-content auto min-content","& h2":{marginBottom:0,gridColumn:"2 / span 3",gridRow:1}}),desc:(0,g.css)({gridColumn:"2 / span 3",gridRow:2}),actionRow:(0,g.css)({gridColumn:"2 / span 3",gridRow:3,maxWidth:"240px"})});function I({children:n,className:t}){const s=(0,y.of)(Z);return a.createElement("div",{className:(0,g.cx)(s.box,t)},n)}const Z=n=>({box:(0,g.css)({padding:n.spacing(2),backgroundColor:n.colors.background.secondary,borderRadius:n.shape.radius.default})});var X=c(19347),ee=c(2913);function E({children:n}){const t=(0,y.of)(te);return a.createElement("div",{className:t.sectionFooter},n&&a.createElement("div",null,n))}const te=n=>({sectionFooter:(0,g.css)({marginBottom:n.spacing(2)})});function ne({datasources:n}){const t=(0,y.of)(ae),s=n.map(r=>a.createElement("div",{key:r.uid},r.settings?.meta.info.logos.small&&a.createElement("img",{className:t.dsImage,src:r.settings?.meta.info.logos.small,alt:r.settings?.name||r.uid}),a.createElement("span",null,r.settings?.name||r.uid)));return a.createElement("div",{className:t.dsContainer},s)}const ae=n=>({dsImage:(0,g.css)({label:"ds-image",width:"16px",marginRight:"3px"}),dsContainer:(0,g.css)({display:"flex",flexDirection:"row",fontSize:n.typography.bodySmall.fontSize,gap:"10px",marginBottom:"10px",justifyContent:"flex-end"})});function x({children:n,datasources:t}){const s=(0,y.of)(re);return a.createElement("div",{className:s.container},n,t&&a.createElement(ne,{datasources:t}))}const re=n=>({container:(0,g.css)({display:"flex",flexDirection:"row",justifyContent:"space-between"})});var N=c(50082),se=c(37390),H=c(55852),L=c(14578),W=c(38138),oe=c(83122),ie=c(29158),le=c(25027);function d({panel:n}){const t=(0,y.of)(ue),[s,r]=(0,a.useState)(!1),i=()=>{r(!1)},p=_=>{(0,le.AK)({useful:_,panel:n}),i()},v=a.createElement(se.a,{title:"Rate this panel",isOpen:s,onDismiss:i,onClickBackdrop:i,className:t.container},a.createElement("div",null,a.createElement("p",null,"Help us improve this page by telling us whether this panel is useful to you!"),a.createElement("div",{className:t.buttonsContainer},a.createElement(H.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!1)},a.createElement("div",{className:t.button},a.createElement(L.I,{name:"thumbs-up",className:t.thumbsdown,size:"xxxl"}),a.createElement("span",null,"I don't like it"))),a.createElement(H.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!0)},a.createElement("div",{className:t.button},a.createElement(L.I,{name:"thumbs-up",size:"xxxl"}),a.createElement("span",null,"I like it")))))),h=a.createElement(W.W,null,a.createElement(W.W.Item,{label:"Rate this panel",icon:"comment-alt-message",onClick:()=>r(!0)}));return a.createElement("div",null,a.createElement(oe.m,{overlay:h,placement:"bottom-start"},a.createElement(ie.K,{name:"ellipsis-v",variant:"secondary",className:t.menu,"aria-label":"Rate this panel"})),v)}const ue=n=>({buttonsContainer:(0,g.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:"25px"}),buttonContainer:(0,g.css)({height:"150px",width:"150px",cursor:"pointer",justifyContent:"center"}),button:(0,g.css)({display:"flex",flexDirection:"column"}),container:(0,g.css)({maxWidth:"370px"}),menu:(0,g.css)({height:"25px",margin:"0"}),thumbsdown:(0,g.css)({transform:"scale(-1, -1);"})});function ce(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active", id="${o}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently active alert rules").setData(r).setThresholds({mode:N.O.Absolute,steps:[{color:"green",value:0},{color:"green",value:80}]}).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}var l=c(52622);function de(n,t){const s=o?`sum by(state) (grafanacloud_grafana_instance_alerting_alerts{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]}),i=new e.Es({$data:r,transformations:[{id:"renameByRegex",options:{regex:"alerting",renamePattern:"firing"}}]});return new e.vA({...m,height:"400px",body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your alert rule instances based on state").setData(i).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("firing").overrideColor(f("firing")).matchFieldsWithName("normal").overrideColor(f("normal")).matchFieldsWithName("pending").overrideColor(f("pending")).matchFieldsWithName("error").overrideColor(f("error")).matchFieldsWithName("nodata").overrideColor(f("nodata"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function me(n,t){const s=o?`sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m{id="${o}"}) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${o}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",r=o?`sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${o}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",i=new e.dt({datasource:n,queries:[{refId:"A",exprA:s,range:!0,legendFormat:"success"},{refId:"B",exprB:r,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(i).setOption("tooltip",{mode:l.$N.Multi}).setCustomFieldConfig("drawStyle",l.GR.Line).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function F(n,t,s,r){const i=o?`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}", id="${o}"})`:`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}"})`,p=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:i,legendFormat:"{{state}}"}]});return new e.vA({height:"100%",body:e.d0.stat().setTitle(t).setDescription(s).setData(p).setOverrides(v=>v.matchFieldsWithName(r).overrideColor(f(r))).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}var q=c(81160);function ge(n,t){const s=`sum by(rule_group) (grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${o}"})`,r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]}),i=()=>v=>v.pipe((0,q.T)(h=>h.map(_=>({..._,fields:_.fields.map(b=>{const S=(b.config.displayNameFromDS||"").match(/\/rules\/\d+\/(\w+);(\w+)/);return S&&(b.config.displayName=`Folder: ${S[1]} - Group: ${S[2]}`),b})})))),p=new e.Es({$data:r,transformations:[i]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of missed iterations per evaluation group").setData(p).setOption("tooltip",{mode:l.$N.Multi}).setCustomFieldConfig("drawStyle",l.GR.Line).setHeaderActions(a.createElement(d,{panel:t})).build()})}var fe=c(50720),pe=c(3704);function ve(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(labels_alertname, ruleUID) (count_over_time({from="state-history"} | json | current = `Alerting` [1w])))',instant:!0}]}),r=(v,h)=>({...v,values:v.values.map((_,b)=>{const S=h.fields.find(Qe=>Qe.name==="ruleUID")?.values[b];return a.createElement(_e,{key:_,value:_,ruleUID:S})})}),i=()=>v=>v.pipe((0,q.T)(h=>h.map(_=>({..._,fields:_.fields.map(b=>b.name==="labels_alertname"?r(b,_):b)})))),p=new e.Es({$data:s,transformations:[i,{id:"sortBy",options:{fields:{},sort:[{field:"Value #A",desc:!0}]}},{id:"organize",options:{excludeByName:{Time:!0,ruleUID:!0},indexByName:{labels_alertname:0,"Value #A":1},renameByName:{labels_alertname:"Alert rule name","Value #A":"Number of fires"}}}]});return new e.vA({...m,body:e.d0.table().setTitle(t).setDescription("The alert rule instances that have fired the most").setData(p).setNoValue("No new alerts fired last week").setHeaderActions(a.createElement(d,{panel:t})).build()})}function _e({value:n,ruleUID:t}){const s=i=>({link:(0,g.css)({"& > a":{color:i.colors.text.link}})}),r=(0,y.of)(s);return a.createElement("div",{className:r.link},a.createElement(fe.N,{target:"_blank",href:(0,pe.c)(`/alerting/grafana/${t}/view`)},n))}function ye(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused", id="${o}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of current paused alert rules").setData(r).setThresholds({mode:N.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}function he(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See how many of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function be(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"}) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setOption("tooltip",{mode:l.$N.Multi}).setMax(1).setOverrides(i=>i.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function we(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Ae(n,t){const s=o?`sum by (state) (grafanacloud_grafana_instance_alerting_silences{id="${o}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Ee(n,t){const s=o?`sum by (state) (grafanacloud_instance_alertmanager_alerts{id="${o}"})`:"sum by (state) (grafanacloud_instance_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(i=>i.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Ce(n,t){const s=o?`sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config{id="${o}"})`:"sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{cluster}}"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current state of your alertmanager configuration").setData(r).setUnit("bool_yes_no").setOption("graphMode",l.$p.None).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Se(n,t){const s=o?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second{id="${o}"}) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${o}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",r=o?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${o}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",i=new e.dt({datasource:n,queries:[{refId:"A",exprA:s,range:!0,legendFormat:"success"},{refId:"B",exprB:r,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed notifications").setData(i).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function xe(n,t){const s=o?`sum by (state) (grafanacloud_instance_alertmanager_silences{id="${o}"})`:"sum by (state) (grafanacloud_instance_alertmanager_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setHeaderActions(a.createElement(d,{panel:t})).build()})}var Ne=c(73134);function Fe(n,t){const s=o?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${o}"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"duration / interval"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The percentage of interval time spent evaluating").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOption("legend",{showLegend:!1}).setUnit("percentunit").setThresholds({mode:Ne.Ol.Percentage,steps:[{color:"green",value:0},{color:"red",value:80},{color:"yellow",value:60}]}).setHeaderActions(a.createElement(d,{panel:t})).build()})}function De(n,t){const s=o?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("How long it took to evaluate the rule group").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setUnit("s").setOption("tooltip",{mode:l.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(i=>i.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setHeaderActions(a.createElement(d,{panel:t})).build()})}function $e(n,t){const s=o?`grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group", id="${o}} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${o}}`:'grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',r=o?`grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${o}}`:'grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',i=new e.dt({datasource:n,queries:[{refId:"A",exprA:s,range:!0,legendFormat:"success"},{refId:"B",exprB:r,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed evaluations for the rule group").setData(i).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Ie(n,t){const s=o?`grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${o}"}`:'grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"interval"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current and historical rule group evaluation interval").setData(r).setUnit("s").setOption("graphMode",l.$p.Area).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Ge(n,t){const s=o?`sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group", id="${o}"})`:'sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group"})',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"number of rules"}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The current and historical number of alert rules in the rule group").setData(r).setUnit("none").setOption("graphMode",l.$p.Area).setOverrides(i=>i.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}function Me(n,t){const s=o?`sum(grafanacloud_instance_rule_evaluations_total:rate5m{id="${o}) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${o})`:"sum(grafanacloud_instance_rule_evaluations_total:rate5m) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",r=o?`sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${o})`:"sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",i=new e.dt({datasource:n,queries:[{refId:"A",exprA:s,range:!0,legendFormat:"success"},{refId:"B",exprB:r,range:!0,legendFormat:"failed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(i).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Te(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="firing"})'}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently firing alert rule instances").setData(s).setThresholds({mode:N.O.Absolute,steps:[{color:"red",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}function Re(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS)",range:!0,legendFormat:"{{state}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of firing and pending alert rule instances").setData(s).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Oe(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS) / ignoring(alertstate) group_left sum(ALERTS)",range:!0,legendFormat:"{{alertstate}}"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are firing versus pending").setData(s).setCustomFieldConfig("drawStyle",l.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setMax(1).setOption("tooltip",{mode:l.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Be(n,t){const s=o?`sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${o}"})`:"sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"missed"}]});return new e.vA({...m,body:e.d0.timeseries().setTitle(t).setDescription("The number of evaluations missed").setData(r).setCustomFieldConfig("drawStyle",l.GR.Line).setOption("tooltip",{mode:l.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(i=>i.matchFieldsWithName("missed").overrideColor(f("missed"))).setHeaderActions(a.createElement(d,{panel:t})).build()})}function He(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(alertname) (ALERTS{alertstate="firing"}))',instant:!0,range:!1,format:"table"}]}),r=new e.Es({$data:s,transformations:[{id:"organize",options:{excludeByName:{Time:!0},indexByName:{},renameByName:{Value:"Number of fires",alertname:"Alert Rule Name"}}}]});return new e.vA({...m,body:e.d0.table().setTitle(t).setDescription("The alert rules that have fired the most").setData(r).setHeaderActions(a.createElement(d,{panel:t})).build()})}function Le(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="pending"})'}]});return new e.vA({...m,body:e.d0.stat().setTitle(t).setDescription("The number of currently pending alert rule instances").setData(s).setThresholds({mode:N.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions(a.createElement(d,{panel:t})).build()})}const G={type:"loki",uid:"grafanacloud-alert-state-history",settings:void 0},u={type:"prometheus",uid:"grafanacloud-usage",settings:void 0},A={type:"prometheus",uid:"grafanacloud-prom",settings:void 0},We={alerting:"red",firing:"red",active:"red",missed:"red",failed:"red",pending:"yellow",nodata:"blue","active evaluation":"blue",normal:"green",success:"green",error:"orange"};function f(n){return{mode:"fixed",fixedColor:We[n]}}const m={minHeight:300},qe=new e.JZ({from:"now-1w",to:"now"}),P=ee.config.bootData.settings.namespace,o=P.includes("stack-")?P.replace("stack-",""):void 0;function Pe(){const n=(0,X.l)();[G,u,A].forEach(h=>{h.settings=n.getInstanceSettings(h.uid)});const t=[],s=G.settings&&u.settings,r=!!u.settings,i=!!u.settings,p=u.settings&&A.settings,v=!!u.settings;return s&&t.push(new e.vA({ySizing:"content",body:Ue()})),r&&t.push(new e.vA({ySizing:"content",body:je()})),p&&t.push(new e.vA({ySizing:"content",body:Ve()})),v&&t.push(new e.vA({ySizing:"content",body:ze()})),i&&t.push(new e.vA({ySizing:"content",body:ke()})),new e.P1({$timeRange:qe,controls:[new e.dM({component:x,props:{children:a.createElement("div",null,"Monitor the status of your system.")}}),new e.N0,new e.KE({}),new e.WM({})],body:new e.G1({direction:"column",children:t})})}function Ue(){return new e.Or({title:"Grafana-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({direction:"column",children:[new e.G1({children:[ve(G,"Top 10 firing instances"),ce(u,"Active rules"),ye(u,"Paused rules")]}),new e.G1({children:[de(u,"Alert instances by state"),new e.G1({height:"400px",direction:"column",children:[new e.G1({height:"400px",children:[F(u,"Firing instances","The number of currently firing alert rule instances","alerting"),F(u,"Pending instances","The number of currently pending alert rule instances","pending")]}),new e.G1({children:[F(u,"No data instances","The current number of alert rule instances in No data state","nodata"),F(u,"Error instances","The current number of alert rule instances in Error state","error")]})]})]}),new e.G1({children:[he(u,"Alert rule evaluation"),be(u,"% of alert rule evaluation")]}),new e.G1({children:[me(u,"Evaluation success vs failures"),ge(u,"Iterations missed per evaluation group")]})]}),new e.dM({component:E})]})})}function je(){return new e.Or({title:"Grafana Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({children:[we(u,"Firing alerts by state"),Ae(u,"Silences")]}),new e.dM({component:E})]})})}function ke(){return new e.Or({title:"Mimir Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:x,props:{datasources:[u]}})}),new e.G1({children:[Ee(u,"Firing alerts by state"),Se(u,"Notification delivery")]}),new e.G1({children:[xe(u,"Silences"),Ce(u,"Invalid configuration")]}),new e.dM({component:E})]})})}function Ve(){return new e.Or({title:"Mimir-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:x,props:{datasources:[A,u]}})}),new e.G1({children:[He(A,"Top 10 firing rules"),Te(A,"Firing instances"),Le(A,"Pending instances")]}),new e.G1({children:[Re(A,"Firing and pending alert instances"),Oe(A,"% of alert instances by state")]}),new e.G1({children:[Me(u,"Evaluation success vs failures"),Be(u,"Missed evaluations")]}),new e.dM({component:E})]})})}function ze(){const n=new e.fS({label:"Rule Group",name:"rule_group",datasource:u,query:"label_values(grafanacloud_instance_rule_group_rules,rule_group)"});return new e.Or({title:"Mimir-managed alert rules - per rule group",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:x,props:{datasources:[u]}})}),new e.G1({children:[$e(u,"Rule group evaluation"),Ie(u,"Rule group interval")]}),new e.G1({children:[De(u,"Rule group evaluation duration"),Ge(u,"Rules per group"),Fe(u,"Evaluation duration / interval ratio")]}),new e.dM({component:E})]}),$variables:new e.Pj({variables:[n]}),controls:[new e.K8({})]})}let C;function U(n){return C||(n?C=new e.Oh({pages:[new e.jD({title:"Alerting",subTitle:a.createElement(B,null),url:"/alerting",hideFromBreadcrumbs:!0,tabs:[new e.jD({title:"Insights",url:"/alerting/home/insights",getScene:Pe}),new e.jD({title:"Get started",url:"/alerting/home/overview",getScene:O})]})]}):C=new e.Oh({pages:[new e.jD({title:"Alerting",subTitle:a.createElement(B,null),url:"/alerting",hideFromBreadcrumbs:!0,getScene:O})]}),C)}function Ke(){const n=(!(0,T.y$)()||(0,T.ES)())&&!!j.$.featureToggles.alertingInsights,t=U(n),s=(0,k.i)("alerting"),[r]=(0,a.useState)({sectionNav:s});return a.createElement(V.A.Provider,{value:r},a.createElement(t.Component,{model:t}))}}}]);

//# sourceMappingURL=AlertingHome.b938a05910cac541b2f5.js.map