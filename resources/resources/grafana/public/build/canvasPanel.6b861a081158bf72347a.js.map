{"version":3,"file":"canvasPanel.6b861a081158bf72347a.js","mappings":"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","sources":["webpack://grafana/./public/app/core/components/Layers/AddLayerButton.tsx","webpack://grafana/./public/app/plugins/panel/canvas/panelcfg.gen.ts","webpack://grafana/./public/app/features/canvas/types.ts","webpack://grafana/./public/app/features/canvas/element.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ParamsEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/utils.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/APIEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ButtonStyleEditor.tsx","webpack://grafana/./public/app/features/canvas/elements/button.tsx","webpack://grafana/./public/app/features/canvas/elements/notFound.tsx","webpack://grafana/./public/app/features/canvas/runtime/element.tsx","webpack://grafana/./public/app/plugins/panel/canvas/types.ts","webpack://grafana/./public/app/plugins/panel/canvas/utils.ts","webpack://grafana/./public/app/features/canvas/elements/cloud.tsx","webpack://grafana/./public/app/features/canvas/elements/droneFront.tsx","webpack://grafana/./public/app/features/canvas/elements/droneSide.tsx","webpack://grafana/./public/app/features/canvas/elements/droneTop.tsx","webpack://grafana/./public/app/features/canvas/elements/ellipse.tsx","webpack://grafana/./public/app/features/canvas/elements/icon.tsx","webpack://grafana/./public/app/features/canvas/elements/metricValue.tsx","webpack://grafana/./public/app/features/canvas/elements/parallelogram.tsx","webpack://grafana/./public/app/features/canvas/elements/rectangle.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/database.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/single.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/stack.tsx","webpack://grafana/./public/app/features/canvas/elements/server/types/terminal.tsx","webpack://grafana/./public/app/features/canvas/elements/server/server.tsx","webpack://grafana/./public/app/features/canvas/elements/text.tsx","webpack://grafana/./public/app/features/canvas/elements/triangle.tsx","webpack://grafana/./public/app/features/canvas/elements/windTurbine.tsx","webpack://grafana/./public/app/features/canvas/registry.ts","webpack://grafana/./public/app/features/canvas/runtime/frame.tsx","webpack://grafana/./node_modules/framework-utils/dist/utils.esm.js","webpack://grafana/./node_modules/@daybrush/utils/dist/utils.esm.js","webpack://grafana/./node_modules/@egjs/list-differ/dist/list-differ.esm.js","webpack://grafana/./node_modules/croact/dist/croact.esm.js","webpack://grafana/./node_modules/@egjs/agent/dist/agent.esm.js","webpack://grafana/./node_modules/@scena/matrix/dist/matrix.esm.js","webpack://grafana/./node_modules/css-to-mat/dist/css-to-mat.esm.js","webpack://grafana/./node_modules/@egjs/children-differ/dist/children-differ.esm.js","webpack://grafana/./node_modules/@scena/event-emitter/dist/event-emitter.esm.js","webpack://grafana/./node_modules/@scena/dragscroll/dist/dragscroll.esm.js","webpack://grafana/./node_modules/overlap-area/dist/overlap-area.esm.js","webpack://grafana/./node_modules/gesto/dist/gesto.esm.js","webpack://grafana/./node_modules/css-styled/dist/styled.esm.js","webpack://grafana/./node_modules/croact-css-styled/dist/styled.esm.js","webpack://grafana/./node_modules/croact-moveable/dist/moveable.esm.js","webpack://grafana/./node_modules/moveable/dist/moveable.esm.js","webpack://grafana/./node_modules/keycon/dist/keycon.esm.js","webpack://grafana/./node_modules/selecto/dist/selecto.esm.js","webpack://grafana/./public/app/plugins/panel/canvas/components/CanvasContextMenu.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/CanvasTooltip.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/ConnectionAnchors.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/ConnectionSVG.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/connections/Connections.tsx","webpack://grafana/./node_modules/react-zoom-pan-pinch/dist/index.esm.js","webpack://grafana/./public/app/features/canvas/runtime/SceneTransformWrapper.tsx","webpack://grafana/./public/app/features/canvas/runtime/ables.tsx","webpack://grafana/./public/app/features/canvas/runtime/root.tsx","webpack://grafana/./public/app/features/canvas/runtime/scene.tsx","webpack://grafana/./public/app/plugins/panel/canvas/components/SetBackground.tsx","webpack://grafana/./public/app/features/dimensions/editors/BackgroundSizeEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/LineStyleEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/options.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/connectionEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/ConstraintSelectionBox.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/QuickPositioning.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/PlacementEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/element/elementEditor.tsx","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack://grafana/./node_modules/rc-tree/es/contextTypes.js","webpack://grafana/./node_modules/rc-tree/es/DropIndicator.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://grafana/./node_modules/rc-tree/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://grafana/./node_modules/rc-tree/es/Indent.js","webpack://grafana/./node_modules/rc-tree/es/TreeNode.js","webpack://grafana/./node_modules/rc-tree/es/useUnmount.js","webpack://grafana/./node_modules/rc-tree/es/MotionTreeNode.js","webpack://grafana/./node_modules/rc-tree/es/utils/diffUtil.js","webpack://grafana/./node_modules/rc-tree/es/NodeList.js","webpack://grafana/./node_modules/rc-tree/es/util.js","webpack://grafana/./node_modules/rc-tree/es/Tree.js","webpack://grafana/./node_modules/rc-tree/es/index.js","webpack://grafana/./public/app/plugins/panel/canvas/globalStyles.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/TreeNodeTitle.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/tree.ts","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/TreeNavigationEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/layer/layerEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/TabsEditor.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/InlineEditBody.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/inline/InlineEdit.tsx","webpack://grafana/./public/app/plugins/panel/canvas/CanvasPanel.tsx","webpack://grafana/./public/app/plugins/panel/canvas/editor/panZoomHelp.tsx","webpack://grafana/./public/app/plugins/panel/canvas/migrations.ts","webpack://grafana/./public/app/plugins/panel/canvas/module.tsx"],"sourcesContent":["import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { ValuePicker } from '@grafana/ui';\n\nexport type AddLayerButtonProps = {\n  onChange: (sel: SelectableValue<string>) => void;\n  options: Array<SelectableValue<string>>;\n  label: string;\n};\n\nexport const AddLayerButton = ({ onChange, options, label }: AddLayerButtonProps) => {\n  return (\n    <ValuePicker\n      icon=\"plus\"\n      label={label}\n      variant=\"secondary\"\n      options={options}\n      onChange={onChange}\n      isFullWidth={true}\n    />\n  );\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as ui from '@grafana/schema';\n\nexport enum HorizontalConstraint {\n  Center = 'center',\n  Left = 'left',\n  LeftRight = 'leftright',\n  Right = 'right',\n  Scale = 'scale',\n}\n\nexport enum VerticalConstraint {\n  Bottom = 'bottom',\n  Center = 'center',\n  Scale = 'scale',\n  Top = 'top',\n  TopBottom = 'topbottom',\n}\n\nexport interface Constraint {\n  horizontal?: HorizontalConstraint;\n  vertical?: VerticalConstraint;\n}\n\nexport interface Placement {\n  bottom?: number;\n  height?: number;\n  left?: number;\n  right?: number;\n  rotation?: number;\n  top?: number;\n  width?: number;\n}\n\nexport enum BackgroundImageSize {\n  Contain = 'contain',\n  Cover = 'cover',\n  Fill = 'fill',\n  Original = 'original',\n  Tile = 'tile',\n}\n\nexport interface BackgroundConfig {\n  color?: ui.ColorDimensionConfig;\n  image?: ui.ResourceDimensionConfig;\n  size?: BackgroundImageSize;\n}\n\nexport interface LineConfig {\n  color?: ui.ColorDimensionConfig;\n  radius?: number;\n  width?: number;\n}\n\nexport enum HttpRequestMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n}\n\nexport interface ConnectionCoordinates {\n  x: number;\n  y: number;\n}\n\nexport enum ConnectionPath {\n  Straight = 'straight',\n}\n\nexport interface CanvasConnection {\n  color?: ui.ColorDimensionConfig;\n  path: ConnectionPath;\n  size?: ui.ScaleDimensionConfig;\n  source: ConnectionCoordinates;\n  sourceOriginal?: ConnectionCoordinates;\n  target: ConnectionCoordinates;\n  targetName?: string;\n  targetOriginal?: ConnectionCoordinates;\n  vertices?: Array<ConnectionCoordinates>;\n}\n\nexport const defaultCanvasConnection: Partial<CanvasConnection> = {\n  vertices: [],\n};\n\nexport interface CanvasElementOptions {\n  background?: BackgroundConfig;\n  border?: LineConfig;\n  /**\n   * TODO: figure out how to define this (element config(s))\n   */\n  config?: unknown;\n  connections?: Array<CanvasConnection>;\n  constraint?: Constraint;\n  name: string;\n  placement?: Placement;\n  type: string;\n}\n\nexport const defaultCanvasElementOptions: Partial<CanvasElementOptions> = {\n  connections: [],\n};\n\nexport interface Options {\n  /**\n   * Enable infinite pan\n   */\n  infinitePan: boolean;\n  /**\n   * Enable inline editing\n   */\n  inlineEditing: boolean;\n  /**\n   * Enable pan and zoom\n   */\n  panZoom: boolean;\n  /**\n   * The root element of canvas (frame), where all canvas elements are nested\n   * TODO: Figure out how to define a default value for this\n   */\n  root: {\n    /**\n     * Name of the root element\n     */\n    name: string;\n    /**\n     * Type of root element (frame)\n     */\n    type: 'frame';\n    /**\n     * The list of canvas elements attached to the root element\n     */\n    elements: Array<CanvasElementOptions>;\n  };\n  /**\n   * Show all available element types\n   */\n  showAdvancedTypes: boolean;\n}\n\nexport const defaultOptions: Partial<Options> = {\n  infinitePan: true,\n  inlineEditing: true,\n  panZoom: true,\n  showAdvancedTypes: true,\n};\n","import { LinkModel } from '@grafana/data/src';\nimport { ColorDimensionConfig, ResourceDimensionConfig, TextDimensionConfig } from '@grafana/schema';\nimport {\n  BackgroundImageSize,\n  Constraint,\n  HorizontalConstraint,\n  Placement,\n  VerticalConstraint,\n  LineConfig,\n  BackgroundConfig,\n} from 'app/plugins/panel/canvas/panelcfg.gen';\n\nexport enum QuickPlacement {\n  Top = 'top',\n  Bottom = 'bottom',\n  Left = 'left',\n  Right = 'right',\n  HorizontalCenter = 'hcenter',\n  VerticalCenter = 'vcenter',\n}\n\nexport enum Align {\n  Left = 'left',\n  Center = 'center',\n  Right = 'right',\n}\n\nexport enum VAlign {\n  Top = 'top',\n  Middle = 'middle',\n  Bottom = 'bottom',\n}\n\nexport interface TextData {\n  text?: string;\n  color?: string;\n  size?: number; // 0 or missing will \"auto size\"\n  align: Align;\n  valign: VAlign;\n  links?: LinkModel[];\n}\n\nexport interface TextConfig {\n  text?: TextDimensionConfig;\n  color?: ColorDimensionConfig;\n  size?: number; // 0 or missing will \"auto size\"\n  align: Align;\n  valign: VAlign;\n}\n\nexport interface CanvasElementConfig extends TextConfig {\n  backgroundColor?: ColorDimensionConfig;\n  backgroundImage?: ResourceDimensionConfig;\n  backgroundSize?: BackgroundImageSize;\n  borderColor?: ColorDimensionConfig;\n  borderWidth?: number;\n}\n\nexport interface CanvasElementData extends TextData {\n  backgroundColor?: string;\n  backgroundImage?: string;\n  backgroundSize?: string;\n  borderColor?: string;\n  borderWidth?: number;\n}\n\nexport interface StandardEditorConfig {\n  layout?: boolean;\n  background?: boolean;\n  border?: boolean;\n}\n\nexport {\n  Placement,\n  Constraint,\n  HorizontalConstraint,\n  VerticalConstraint,\n  BackgroundImageSize,\n  LineConfig,\n  BackgroundConfig,\n};\n","import { ComponentType } from 'react';\n\nimport { RegistryItem } from '@grafana/data';\nimport { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { ColorDimensionConfig, ScaleDimensionConfig } from '@grafana/schema';\nimport { config } from 'app/core/config';\n\nimport { DimensionContext } from '../dimensions';\n\nimport { BackgroundConfig, Constraint, LineConfig, Placement, StandardEditorConfig } from './types';\n\n/**\n * This gets saved in panel json\n *\n * depending on the type, it may have additional config\n *\n * @alpha\n */\nexport interface CanvasElementOptions<TConfig = any> {\n  name: string; // configured unique display name\n  type: string;\n\n  // Custom options depending on the type\n  config?: TConfig;\n\n  // Standard options available for all elements\n  constraint?: Constraint; // defaults vertical - top, horizontal - left\n  placement?: Placement;\n  background?: BackgroundConfig;\n  border?: LineConfig;\n  connections?: CanvasConnection[];\n}\n\n// Unit is percentage from the middle of the element\n// 0, 0 middle; -1, -1 bottom left; 1, 1 top right\nexport interface ConnectionCoordinates {\n  x: number;\n  y: number;\n}\n\nexport enum ConnectionPath {\n  Straight = 'straight',\n}\n\nexport enum ConnectionDirection {\n  Forward = 'forward',\n  Reverse = 'reverse',\n  Both = 'both',\n  None = 'none',\n}\n\nexport interface CanvasConnection {\n  source: ConnectionCoordinates;\n  target: ConnectionCoordinates;\n  targetName?: string;\n  path: ConnectionPath;\n  color?: ColorDimensionConfig;\n  size?: ScaleDimensionConfig;\n  lineStyle?: string;\n  vertices?: ConnectionCoordinates[];\n  radius?: ScaleDimensionConfig;\n  direction?: ConnectionDirection;\n  sourceOriginal?: ConnectionCoordinates;\n  targetOriginal?: ConnectionCoordinates;\n  // See https://github.com/anseki/leader-line#options for more examples of more properties\n}\n\nexport interface CanvasElementProps<TConfig = any, TData = any> {\n  // Saved config\n  config: TConfig;\n\n  // Raw data\n  data?: TData;\n\n  // If the element is currently selected\n  isSelected?: boolean;\n}\n\n/**\n * Canvas item builder\n *\n * @alpha\n */\nexport interface CanvasElementItem<TConfig = any, TData = any> extends RegistryItem {\n  /** The default width/height to use when adding  */\n  defaultSize?: Placement;\n\n  prepareData?: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<TConfig>) => TData;\n\n  /** Component used to draw */\n  display: ComponentType<CanvasElementProps<TConfig, TData>>;\n\n  getNewOptions: (options?: CanvasElementOptions) => Omit<CanvasElementOptions<TConfig>, 'type' | 'name'>;\n\n  /** Build the configuration UI */\n  registerOptionsUI?: PanelOptionsSupplier<CanvasElementOptions<TConfig>>;\n\n  /** If item has an edit mode */\n  hasEditMode?: boolean;\n\n  /** Optional config to customize what standard element editor options are available for the item */\n  standardEditorConfig?: StandardEditorConfig;\n\n  /** Custom connection anchor coordinates, like for svg elements such as triangle, cloud, etc */\n  customConnectionAnchors?: Array<{\n    x: number;\n    y: number;\n  }>;\n}\n\nexport const defaultBgColor = '#D9D9D9';\nexport const defaultTextColor = '#000000';\nexport const defaultLightTextColor = '#F0F4FD';\nexport const defaultThemeTextColor = config.theme2.colors.text.primary;\n","import React, { useState } from 'react';\n\nimport { HorizontalGroup, IconButton, Input, VerticalGroup } from '@grafana/ui';\n\ninterface Props {\n  onChange: (v: Array<[string, string]>) => void;\n  value: Array<[string, string]>;\n}\n\nexport const ParamsEditor = ({ value, onChange }: Props) => {\n  const [paramName, setParamName] = useState('');\n  const [paramValue, setParamValue] = useState('');\n\n  const changeParamValue = ({ currentTarget }: React.ChangeEvent<HTMLInputElement>) => {\n    setParamValue(currentTarget.value);\n  };\n\n  const changeParamName = ({ currentTarget }: React.ChangeEvent<HTMLInputElement>) => {\n    setParamName(currentTarget.value);\n  };\n\n  const removeParam = (key: string) => () => {\n    const updatedParams = value.filter((param) => param[0] !== key);\n    onChange(updatedParams);\n  };\n\n  const addParam = () => {\n    const key = paramName;\n    let newParams: Array<[string, string]>;\n    if (value) {\n      newParams = value.filter((e) => e[0] !== key);\n    } else {\n      newParams = [];\n    }\n    newParams.push([key, paramValue]);\n    newParams.sort((a, b) => a[0].localeCompare(b[0]));\n\n    setParamName('');\n    setParamValue('');\n    onChange(newParams);\n  };\n\n  const isAddParamsDisabled = !paramName && !paramValue;\n\n  return (\n    <div>\n      <HorizontalGroup>\n        <Input placeholder=\"Key\" value={paramName} onChange={changeParamName} />\n        <Input placeholder=\"Value\" value={paramValue} onChange={changeParamValue} />\n        <IconButton aria-label=\"add\" name=\"plus-circle\" onClick={addParam} disabled={isAddParamsDisabled} />\n      </HorizontalGroup>\n      <VerticalGroup>\n        {Array.from(value || []).map((entry) => (\n          <HorizontalGroup key={entry[0]}>\n            <Input disabled value={entry[0]} />\n            <Input disabled value={entry[1]} />\n            <IconButton aria-label=\"delete\" onClick={removeParam(entry[0])} name=\"trash-alt\" />\n          </HorizontalGroup>\n        ))}\n      </VerticalGroup>\n    </div>\n  );\n};\n","import { AppEvents } from '@grafana/data';\nimport { BackendSrvRequest, getBackendSrv, getTemplateSrv } from '@grafana/runtime';\nimport { appEvents } from 'app/core/core';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\n\nimport { HttpRequestMethod } from '../../panelcfg.gen';\n\nimport { APIEditorConfig } from './APIEditor';\n\ntype IsLoadingCallback = (loading: boolean) => void;\n\nexport const callApi = (api: APIEditorConfig, updateLoadingStateCallback?: IsLoadingCallback) => {\n  if (api && api.endpoint) {\n    // If API endpoint origin matches Grafana origin, don't call it.\n    if (requestMatchesGrafanaOrigin(api.endpoint)) {\n      appEvents.emit(AppEvents.alertError, ['Cannot call API at Grafana origin.']);\n      updateLoadingStateCallback && updateLoadingStateCallback(false);\n      return;\n    }\n    const request = getRequest(api);\n\n    getBackendSrv()\n      .fetch(request)\n      .subscribe({\n        error: (error) => {\n          appEvents.emit(AppEvents.alertError, ['An error has occurred. Check console output for more details.']);\n          console.error('API call error: ', error);\n          updateLoadingStateCallback && updateLoadingStateCallback(false);\n        },\n        complete: () => {\n          appEvents.emit(AppEvents.alertSuccess, ['API call was successful']);\n          updateLoadingStateCallback && updateLoadingStateCallback(false);\n        },\n      });\n  }\n};\n\nexport const interpolateVariables = (text: string) => {\n  const panel = getDashboardSrv().getCurrent()?.panelInEdit;\n  return getTemplateSrv().replace(text, panel?.scopedVars);\n};\n\nexport const getRequest = (api: APIEditorConfig) => {\n  const requestHeaders: HeadersInit = [];\n\n  const url = new URL(interpolateVariables(api.endpoint!));\n\n  let request: BackendSrvRequest = {\n    url: url.toString(),\n    method: api.method,\n    data: getData(api),\n    headers: requestHeaders,\n  };\n\n  if (api.headerParams) {\n    api.headerParams.forEach((param) => {\n      requestHeaders.push([interpolateVariables(param[0]), interpolateVariables(param[1])]);\n    });\n  }\n\n  if (api.queryParams) {\n    api.queryParams?.forEach((param) => {\n      url.searchParams.append(interpolateVariables(param[0]), interpolateVariables(param[1]));\n    });\n\n    request.url = url.toString();\n  }\n\n  if (api.method === HttpRequestMethod.POST) {\n    requestHeaders.push(['Content-Type', api.contentType!]);\n  }\n\n  request.headers = requestHeaders;\n\n  return request;\n};\n\nconst getData = (api: APIEditorConfig) => {\n  let data: string | undefined = api.data ? interpolateVariables(api.data) : '{}';\n  if (api.method === HttpRequestMethod.GET) {\n    data = undefined;\n  }\n\n  return data;\n};\n\nconst requestMatchesGrafanaOrigin = (requestEndpoint: string) => {\n  const requestURL = new URL(requestEndpoint);\n  const grafanaURL = new URL(window.location.origin);\n  return requestURL.origin === grafanaURL.origin;\n};\n","import React, { useCallback } from 'react';\n\nimport {\n  StandardEditorProps,\n  StandardEditorsRegistryItem,\n  StringFieldConfigSettings,\n  SelectableValue,\n} from '@grafana/data';\nimport { Button, Field, InlineField, InlineFieldRow, JSONFormatter, RadioButtonGroup, Select } from '@grafana/ui';\nimport { StringValueEditor } from 'app/core/components/OptionsUI/string';\nimport { defaultApiConfig } from 'app/features/canvas/elements/button';\n\nimport { HttpRequestMethod } from '../../panelcfg.gen';\n\nimport { ParamsEditor } from './ParamsEditor';\nimport { callApi, interpolateVariables } from './utils';\n\nexport interface APIEditorConfig {\n  method: string;\n  endpoint: string;\n  data?: string;\n  contentType?: string;\n  queryParams?: Array<[string, string]>;\n  headerParams?: Array<[string, string]>;\n}\n\nconst dummyStringSettings = {\n  settings: {},\n} as StandardEditorsRegistryItem<string, StringFieldConfigSettings>;\n\ntype Props = StandardEditorProps<APIEditorConfig>;\n\nconst httpMethodOptions = [\n  { label: HttpRequestMethod.GET, value: HttpRequestMethod.GET },\n  { label: HttpRequestMethod.POST, value: HttpRequestMethod.POST },\n  { label: HttpRequestMethod.PUT, value: HttpRequestMethod.PUT },\n];\n\nconst contentTypeOptions: SelectableValue[] = [\n  { label: 'JSON', value: 'application/json' },\n  { label: 'Text', value: 'text/plain' },\n  { label: 'JavaScript', value: 'application/javascript' },\n  { label: 'HTML', value: 'text/html' },\n  { label: 'XML', value: 'application/XML' },\n  { label: 'x-www-form-urlencoded', value: 'application/x-www-form-urlencoded' },\n];\n\nexport function APIEditor({ value, context, onChange }: Props) {\n  const LABEL_WIDTH = 13;\n\n  if (!value) {\n    value = defaultApiConfig;\n  }\n\n  const onEndpointChange = useCallback(\n    (endpoint = '') => {\n      onChange({\n        ...value,\n        endpoint,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onDataChange = useCallback(\n    (data?: string) => {\n      onChange({\n        ...value,\n        data,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onMethodChange = useCallback(\n    (method: string) => {\n      onChange({\n        ...value,\n        method,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onContentTypeChange = useCallback(\n    (contentType: SelectableValue<string>) => {\n      onChange({\n        ...value,\n        contentType: contentType?.value,\n      });\n    },\n    [onChange, value]\n  );\n\n  const formatCreateLabel = (input: string) => {\n    return input;\n  };\n\n  const onQueryParamsChange = useCallback(\n    (queryParams: Array<[string, string]>) => {\n      onChange({\n        ...value,\n        queryParams,\n      });\n    },\n    [onChange, value]\n  );\n\n  const onHeaderParamsChange = useCallback(\n    (headerParams: Array<[string, string]>) => {\n      onChange({\n        ...value,\n        headerParams,\n      });\n    },\n    [onChange, value]\n  );\n\n  const renderJSON = (data: string) => {\n    try {\n      const json = JSON.parse(interpolateVariables(data));\n      return <JSONFormatter json={json} />;\n    } catch (error) {\n      if (error instanceof Error) {\n        return `Invalid JSON provided: ${error.message}`;\n      } else {\n        return 'Invalid JSON provided';\n      }\n    }\n  };\n\n  const renderTestAPIButton = (api: APIEditorConfig) => {\n    if (api && api.endpoint) {\n      return (\n        <Button onClick={() => callApi(api)} title=\"Test API\">\n          Test API\n        </Button>\n      );\n    }\n\n    return;\n  };\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Endpoint\" labelWidth={LABEL_WIDTH} grow={true}>\n          <StringValueEditor\n            context={context}\n            value={value?.endpoint}\n            onChange={onEndpointChange}\n            item={dummyStringSettings}\n          />\n        </InlineField>\n      </InlineFieldRow>\n      <InlineFieldRow>\n        <InlineField label=\"Method\" labelWidth={LABEL_WIDTH} grow={true}>\n          <RadioButtonGroup value={value?.method} options={httpMethodOptions} onChange={onMethodChange} fullWidth />\n        </InlineField>\n      </InlineFieldRow>\n      {value?.method !== HttpRequestMethod.GET && (\n        <InlineFieldRow>\n          <InlineField label=\"Content-Type\" labelWidth={LABEL_WIDTH} grow={true}>\n            <Select\n              options={contentTypeOptions}\n              allowCustomValue={true}\n              formatCreateLabel={formatCreateLabel}\n              value={value?.contentType}\n              onChange={onContentTypeChange}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      <br />\n      <Field label=\"Query parameters\">\n        <ParamsEditor value={value?.queryParams ?? []} onChange={onQueryParamsChange} />\n      </Field>\n      <Field label=\"Header parameters\">\n        <ParamsEditor value={value?.headerParams ?? []} onChange={onHeaderParamsChange} />\n      </Field>\n      {value?.method !== HttpRequestMethod.GET && value?.contentType && (\n        <Field label=\"Payload\">\n          <StringValueEditor\n            context={context}\n            value={value?.data ?? '{}'}\n            onChange={onDataChange}\n            item={{ ...dummyStringSettings, settings: { useTextarea: true } }}\n          />\n        </Field>\n      )}\n      {renderTestAPIButton(value)}\n      <br />\n      {value?.method !== HttpRequestMethod.GET &&\n        value?.contentType === defaultApiConfig.contentType &&\n        renderJSON(value?.data ?? '{}')}\n    </>\n  );\n}\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { ButtonVariant, InlineField, InlineFieldRow, Select } from '@grafana/ui';\nimport { defaultStyleConfig } from 'app/features/canvas/elements/button';\n\nexport interface ButtonStyleConfig {\n  variant: ButtonVariant;\n}\n\ntype Props = StandardEditorProps<ButtonStyleConfig>;\n\nconst variantOptions: SelectableValue[] = [\n  { label: 'primary', value: 'primary' },\n  { label: 'secondary', value: 'secondary' },\n  { label: 'success', value: 'success' },\n  { label: 'destructive', value: 'destructive' },\n];\n\nexport const ButtonStyleEditor = ({ value, onChange }: Props) => {\n  if (!value) {\n    value = defaultStyleConfig;\n  }\n\n  const onVariantChange = useCallback(\n    (variant: SelectableValue<ButtonVariant>) => {\n      onChange({\n        ...value,\n        variant: variant?.value ?? defaultStyleConfig.variant,\n      });\n    },\n    [onChange, value]\n  );\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Variant\" grow={true}>\n          <Select options={variantOptions} value={value?.variant} onChange={onVariantChange} />\n        </InlineField>\n      </InlineFieldRow>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { PluginState } from '@grafana/data/src';\nimport { TextDimensionMode } from '@grafana/schema';\nimport { Button, Spinner, useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { APIEditor, APIEditorConfig } from 'app/plugins/panel/canvas/editor/element/APIEditor';\nimport { ButtonStyleConfig, ButtonStyleEditor } from 'app/plugins/panel/canvas/editor/element/ButtonStyleEditor';\nimport { callApi } from 'app/plugins/panel/canvas/editor/element/utils';\nimport { HttpRequestMethod } from 'app/plugins/panel/canvas/panelcfg.gen';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultLightTextColor } from '../element';\nimport { Align, TextConfig, TextData } from '../types';\n\ninterface ButtonData extends Omit<TextData, 'valign'> {\n  api?: APIEditorConfig;\n  style?: ButtonStyleConfig;\n}\n\ninterface ButtonConfig extends Omit<TextConfig, 'valign'> {\n  api?: APIEditorConfig;\n  style?: ButtonStyleConfig;\n}\n\nexport const defaultApiConfig: APIEditorConfig = {\n  endpoint: '',\n  method: HttpRequestMethod.POST,\n  data: '{}',\n  contentType: 'application/json',\n  queryParams: [],\n  headerParams: [],\n};\n\nexport const defaultStyleConfig: ButtonStyleConfig = {\n  variant: 'primary',\n};\n\nconst ButtonDisplay = ({ data }: CanvasElementProps<ButtonConfig, ButtonData>) => {\n  const styles = useStyles2(getStyles, data);\n\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const updateLoadingStateCallback = (loading: boolean) => {\n    setIsLoading(loading);\n  };\n\n  const onClick = () => {\n    if (data?.api && data?.api?.endpoint) {\n      setIsLoading(true);\n      callApi(data.api, updateLoadingStateCallback);\n    }\n  };\n\n  return (\n    <Button type=\"submit\" variant={data?.style?.variant} onClick={onClick} className={styles.button}>\n      <span>\n        {isLoading && <Spinner inline={true} className={styles.buttonSpinner} />}\n        {data?.text}\n      </span>\n    </Button>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: ButtonData | undefined) => ({\n  button: css({\n    height: '100%',\n    width: '100%',\n    display: 'grid',\n\n    '> span': {\n      display: 'inline-grid',\n      gridAutoFlow: 'column',\n      textAlign: data?.align,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    },\n  }),\n  buttonSpinner: css({\n    marginRight: theme.spacing(0.5),\n  }),\n});\n\nexport const buttonItem: CanvasElementItem<ButtonConfig, ButtonData> = {\n  id: 'button',\n  name: 'Button',\n  description: 'Button',\n  state: PluginState.beta,\n\n  standardEditorConfig: {\n    background: false,\n  },\n\n  display: ButtonDisplay,\n\n  defaultSize: {\n    width: 150,\n    height: 45,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      text: {\n        mode: TextDimensionMode.Fixed,\n        fixed: 'Button',\n      },\n      align: Align.Center,\n      color: {\n        fixed: defaultLightTextColor,\n      },\n      size: 14,\n      api: defaultApiConfig,\n      style: defaultStyleConfig,\n    },\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 32,\n      height: options?.placement?.height ?? 78,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<ButtonConfig>) => {\n    const buttonConfig = elementOptions.config;\n\n    const getAPIConfig = () => {\n      if (buttonConfig?.api) {\n        buttonConfig.api = {\n          ...buttonConfig.api,\n          method: buttonConfig.api.method ?? defaultApiConfig.method,\n          contentType: buttonConfig.api.contentType ?? defaultApiConfig.contentType,\n        };\n        return buttonConfig.api;\n      }\n\n      return undefined;\n    };\n\n    const data: ButtonData = {\n      text: buttonConfig?.text ? dimensionContext.getText(buttonConfig.text).value() : '',\n      align: buttonConfig?.align ?? Align.Center,\n      size: buttonConfig?.size ?? 14,\n      api: getAPIConfig(),\n      style: buttonConfig?.style ?? defaultStyleConfig,\n    };\n\n    if (buttonConfig?.color) {\n      data.color = dimensionContext.getColor(buttonConfig.color).value();\n    }\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Button'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'styleSelector',\n        path: 'config.style',\n        name: 'Style',\n        editor: ButtonStyleEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'apiSelector',\n        path: 'config.api',\n        name: 'API',\n        editor: APIEditor,\n      });\n  },\n};\n","import React, { PureComponent } from 'react';\n\nimport { CanvasElementItem, CanvasElementProps } from '../element';\n\nclass NotFoundDisplay extends PureComponent<CanvasElementProps> {\n  render() {\n    const { config } = this.props;\n    return (\n      <div>\n        <h3>NOT FOUND:</h3>\n        <pre>{JSON.stringify(config, null, 2)}</pre>\n      </div>\n    );\n  }\n}\n\nexport const notFoundItem: CanvasElementItem = {\n  id: 'not-found',\n  name: 'Not found',\n  description: 'Display when element type is not found in the registry',\n\n  display: NotFoundDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: () => ({\n    config: {},\n  }),\n};\n","import React, { CSSProperties } from 'react';\nimport { OnDrag, OnResize, OnRotate } from 'react-moveable/declaration/types';\n\nimport { LayerElement } from 'app/core/components/Layers/types';\nimport {\n  BackgroundImageSize,\n  CanvasElementItem,\n  CanvasElementOptions,\n  canvasElementRegistry,\n} from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { getConnectionsByTarget, isConnectionTarget } from 'app/plugins/panel/canvas/utils';\n\nimport { Constraint, HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { FrameState } from './frame';\nimport { RootElement } from './root';\nimport { Scene } from './scene';\n\nlet counter = 0;\n\nconst SVGElements = new Set<string>(['parallelogram', 'triangle', 'cloud', 'ellipse']);\n\nexport class ElementState implements LayerElement {\n  // UID necessary for moveable to work (for now)\n  readonly UID = counter++;\n  revId = 0;\n  sizeStyle: CSSProperties = {};\n  dataStyle: CSSProperties = {};\n\n  // Temp stored constraint for visualization purposes (switch to top / left constraint to simplify some functionality)\n  tempConstraint: Constraint | undefined;\n\n  // Filled in by ref\n  div?: HTMLDivElement;\n\n  // Calculated\n  data?: any; // depends on the type\n\n  constructor(\n    public item: CanvasElementItem,\n    public options: CanvasElementOptions,\n    public parent?: FrameState\n  ) {\n    const fallbackName = `Element ${Date.now()}`;\n    if (!options) {\n      this.options = { type: item.id, name: fallbackName };\n    }\n\n    options.constraint = options.constraint ?? {\n      vertical: VerticalConstraint.Top,\n      horizontal: HorizontalConstraint.Left,\n    };\n    options.placement = options.placement ?? { width: 100, height: 100, top: 0, left: 0, rotation: 0 };\n    options.background = options.background ?? { color: { fixed: 'transparent' } };\n    options.border = options.border ?? { color: { fixed: 'dark-green' } };\n    const scene = this.getScene();\n    if (!options.name) {\n      const newName = scene?.getNextElementName();\n      options.name = newName ?? fallbackName;\n    }\n    scene?.byName.set(options.name, this);\n  }\n\n  private getScene(): Scene | undefined {\n    let trav = this.parent;\n    while (trav) {\n      if (trav.isRoot()) {\n        return trav.scene;\n      }\n      trav = trav.parent;\n    }\n\n    return undefined;\n  }\n\n  getName() {\n    return this.options.name;\n  }\n\n  /** Use the configured options to update CSS style properties directly on the wrapper div **/\n  applyLayoutStylesToDiv(disablePointerEvents?: boolean) {\n    if (this.isRoot()) {\n      // Root supersedes layout engine and is always 100% width + height of panel\n      return;\n    }\n\n    const { constraint } = this.options;\n    const { vertical, horizontal } = constraint ?? {};\n    const placement: Placement = this.options.placement ?? {};\n\n    const editingEnabled = this.getScene()?.isEditingEnabled;\n\n    const style: React.CSSProperties = {\n      cursor: editingEnabled ? 'grab' : 'auto',\n      pointerEvents: disablePointerEvents ? 'none' : 'auto',\n      position: 'absolute',\n      // Minimum element size is 10x10\n      minWidth: '10px',\n      minHeight: '10px',\n      rotate: `${placement.rotation ?? 0}deg`,\n    };\n\n    const translate = ['0px', '0px'];\n\n    switch (vertical) {\n      case VerticalConstraint.Top:\n        placement.top = placement.top ?? 0;\n        placement.height = placement.height ?? 100;\n        style.top = `${placement.top}px`;\n        style.height = `${placement.height}px`;\n        delete placement.bottom;\n        break;\n      case VerticalConstraint.Bottom:\n        placement.bottom = placement.bottom ?? 0;\n        placement.height = placement.height ?? 100;\n        style.bottom = `${placement.bottom}px`;\n        style.height = `${placement.height}px`;\n        delete placement.top;\n        break;\n      case VerticalConstraint.TopBottom:\n        placement.top = placement.top ?? 0;\n        placement.bottom = placement.bottom ?? 0;\n        style.top = `${placement.top}px`;\n        style.bottom = `${placement.bottom}px`;\n        delete placement.height;\n        style.height = '';\n        break;\n      case VerticalConstraint.Center:\n        placement.top = placement.top ?? 0;\n        placement.height = placement.height ?? 100;\n        translate[1] = '-50%';\n        style.top = `calc(50% - ${placement.top}px)`;\n        style.height = `${placement.height}px`;\n        delete placement.bottom;\n        break;\n      case VerticalConstraint.Scale:\n        placement.top = placement.top ?? 0;\n        placement.bottom = placement.bottom ?? 0;\n        style.top = `${placement.top}%`;\n        style.bottom = `${placement.bottom}%`;\n        delete placement.height;\n        style.height = '';\n        break;\n    }\n\n    switch (horizontal) {\n      case HorizontalConstraint.Left:\n        placement.left = placement.left ?? 0;\n        placement.width = placement.width ?? 100;\n        style.left = `${placement.left}px`;\n        style.width = `${placement.width}px`;\n        delete placement.right;\n        break;\n      case HorizontalConstraint.Right:\n        placement.right = placement.right ?? 0;\n        placement.width = placement.width ?? 100;\n        style.right = `${placement.right}px`;\n        style.width = `${placement.width}px`;\n        delete placement.left;\n        break;\n      case HorizontalConstraint.LeftRight:\n        placement.left = placement.left ?? 0;\n        placement.right = placement.right ?? 0;\n        style.left = `${placement.left}px`;\n        style.right = `${placement.right}px`;\n        delete placement.width;\n        style.width = '';\n        break;\n      case HorizontalConstraint.Center:\n        placement.left = placement.left ?? 0;\n        placement.width = placement.width ?? 100;\n        translate[0] = '-50%';\n        style.left = `calc(50% - ${placement.left}px)`;\n        style.width = `${placement.width}px`;\n        delete placement.right;\n        break;\n      case HorizontalConstraint.Scale:\n        placement.left = placement.left ?? 0;\n        placement.right = placement.right ?? 0;\n        style.left = `${placement.left}%`;\n        style.right = `${placement.right}%`;\n        delete placement.width;\n        style.width = '';\n        break;\n    }\n\n    style.transform = `translate(${translate[0]}, ${translate[1]})`;\n    this.options.placement = placement;\n    this.sizeStyle = style;\n\n    if (this.div) {\n      for (const key in this.sizeStyle) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.div.style[key as any] = (this.sizeStyle as any)[key];\n      }\n\n      // TODO: This is a hack, we should have a better way to handle this\n      const elementType = this.options.type;\n      if (!SVGElements.has(elementType)) {\n        // apply styles to div if it's not an SVG element\n        for (const key in this.dataStyle) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.div.style[key as any] = (this.dataStyle as any)[key];\n        }\n      } else {\n        // ELEMENT IS SVG\n        // clean data styles from div if it's an SVG element; SVG elements have their own data styles;\n        // this is necessary for changing type of element cases;\n        // wrapper div element (this.div) doesn't re-render (has static `key` property),\n        // so we have to clean styles manually;\n        for (const key in this.dataStyle) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.div.style[key as any] = '';\n        }\n      }\n    }\n  }\n\n  setPlacementFromConstraint(elementContainer?: DOMRect, parentContainer?: DOMRect, transformScale = 1) {\n    const { constraint } = this.options;\n    const { vertical, horizontal } = constraint ?? {};\n\n    if (!elementContainer) {\n      elementContainer = this.div && this.div.getBoundingClientRect();\n    }\n    let parentBorderWidth = 0;\n    if (!parentContainer) {\n      parentContainer = this.div && this.div.parentElement?.getBoundingClientRect();\n      parentBorderWidth = this.parent?.isRoot()\n        ? 0\n        : parseFloat(getComputedStyle(this.div?.parentElement!).borderWidth);\n    }\n\n    // For elements with rotation, a delta needs to be applied to account for bounding box rotation\n    // TODO: Fix behavior for top+bottom, left+right, center, and scale constraints\n    let rotationTopOffset = 0;\n    let rotationLeftOffset = 0;\n    if (this.options.placement?.rotation && this.options.placement?.width && this.options.placement?.height) {\n      const rotationDegrees = this.options.placement.rotation;\n      const rotationRadians = (Math.PI / 180) * rotationDegrees;\n      let rotationOffset = rotationRadians;\n\n      switch (true) {\n        case rotationDegrees >= 0 && rotationDegrees < 90:\n          // no-op\n          break;\n        case rotationDegrees >= 90 && rotationDegrees < 180:\n          rotationOffset = Math.PI - rotationRadians;\n          break;\n        case rotationDegrees >= 180 && rotationDegrees < 270:\n          rotationOffset = Math.PI + rotationRadians;\n          break;\n        case rotationDegrees >= 270:\n          rotationOffset = -rotationRadians;\n          break;\n      }\n\n      const calculateDelta = (dimension1: number, dimension2: number) =>\n        (dimension1 / 2) * Math.sin(rotationOffset) + (dimension2 / 2) * (Math.cos(rotationOffset) - 1);\n\n      rotationTopOffset = calculateDelta(this.options.placement.width, this.options.placement.height);\n      rotationLeftOffset = calculateDelta(this.options.placement.height, this.options.placement.width);\n    }\n\n    const relativeTop =\n      elementContainer && parentContainer\n        ? Math.round(elementContainer.top - parentContainer.top - parentBorderWidth + rotationTopOffset) /\n          transformScale\n        : 0;\n    const relativeBottom =\n      elementContainer && parentContainer\n        ? Math.round(parentContainer.bottom - parentBorderWidth - elementContainer.bottom + rotationTopOffset) /\n          transformScale\n        : 0;\n    const relativeLeft =\n      elementContainer && parentContainer\n        ? Math.round(elementContainer.left - parentContainer.left - parentBorderWidth + rotationLeftOffset) /\n          transformScale\n        : 0;\n    const relativeRight =\n      elementContainer && parentContainer\n        ? Math.round(parentContainer.right - parentBorderWidth - elementContainer.right + rotationLeftOffset) /\n          transformScale\n        : 0;\n\n    const placement: Placement = {};\n\n    const width = (elementContainer?.width ?? 100) / transformScale;\n    const height = (elementContainer?.height ?? 100) / transformScale;\n\n    switch (vertical) {\n      case VerticalConstraint.Top:\n        placement.top = relativeTop;\n        placement.height = height;\n        break;\n      case VerticalConstraint.Bottom:\n        placement.bottom = relativeBottom;\n        placement.height = height;\n        break;\n      case VerticalConstraint.TopBottom:\n        placement.top = relativeTop;\n        placement.bottom = relativeBottom;\n        break;\n      case VerticalConstraint.Center:\n        const elementCenter = elementContainer ? relativeTop + height / 2 : 0;\n        const parentCenter = parentContainer ? parentContainer.height / 2 : 0;\n        const distanceFromCenter = parentCenter - elementCenter;\n        placement.top = distanceFromCenter;\n        placement.height = height;\n        break;\n      case VerticalConstraint.Scale:\n        placement.top = (relativeTop / (parentContainer?.height ?? height)) * 100;\n        placement.bottom = (relativeBottom / (parentContainer?.height ?? height)) * 100;\n        break;\n    }\n\n    switch (horizontal) {\n      case HorizontalConstraint.Left:\n        placement.left = relativeLeft;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.Right:\n        placement.right = relativeRight;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.LeftRight:\n        placement.left = relativeLeft;\n        placement.right = relativeRight;\n        break;\n      case HorizontalConstraint.Center:\n        const elementCenter = elementContainer ? relativeLeft + width / 2 : 0;\n        const parentCenter = parentContainer ? parentContainer.width / 2 : 0;\n        const distanceFromCenter = parentCenter - elementCenter;\n        placement.left = distanceFromCenter;\n        placement.width = width;\n        break;\n      case HorizontalConstraint.Scale:\n        placement.left = (relativeLeft / (parentContainer?.width ?? width)) * 100;\n        placement.right = (relativeRight / (parentContainer?.width ?? width)) * 100;\n        break;\n    }\n\n    if (this.options.placement?.rotation) {\n      placement.rotation = this.options.placement.rotation;\n      placement.width = this.options.placement.width;\n      placement.height = this.options.placement.height;\n    }\n\n    this.options.placement = placement;\n\n    this.applyLayoutStylesToDiv();\n    this.revId++;\n\n    this.getScene()?.save();\n  }\n\n  updateData(ctx: DimensionContext) {\n    if (this.item.prepareData) {\n      this.data = this.item.prepareData(ctx, this.options);\n      this.revId++; // rerender\n    }\n\n    const { background, border } = this.options;\n    const css: CSSProperties = {};\n    if (background) {\n      if (background.color) {\n        const color = ctx.getColor(background.color);\n        css.backgroundColor = color.value();\n      }\n      if (background.image) {\n        const image = ctx.getResource(background.image);\n        if (image) {\n          const v = image.value();\n          if (v) {\n            css.backgroundImage = `url(\"${v}\")`;\n            switch (background.size ?? BackgroundImageSize.Contain) {\n              case BackgroundImageSize.Contain:\n                css.backgroundSize = 'contain';\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Cover:\n                css.backgroundSize = 'cover';\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Original:\n                css.backgroundRepeat = 'no-repeat';\n                break;\n              case BackgroundImageSize.Tile:\n                css.backgroundRepeat = 'repeat';\n                break;\n              case BackgroundImageSize.Fill:\n                css.backgroundSize = '100% 100%';\n                break;\n            }\n          } else {\n            css.backgroundImage = '';\n          }\n        }\n      }\n    }\n\n    if (border && border.color && border.width !== undefined) {\n      const color = ctx.getColor(border.color);\n      css.borderWidth = `${border.width}px`;\n      css.borderStyle = 'solid';\n      css.borderColor = color.value();\n\n      // Move the image to inside the border\n      if (css.backgroundImage) {\n        css.backgroundOrigin = 'padding-box';\n      }\n    }\n\n    if (border && border.radius !== undefined) {\n      css.borderRadius = `${border.radius}px`;\n    }\n\n    this.dataStyle = css;\n    this.applyLayoutStylesToDiv();\n  }\n\n  isRoot(): this is RootElement {\n    return false;\n  }\n\n  /** Recursively visit all nodes */\n  visit(visitor: (v: ElementState) => void) {\n    visitor(this);\n  }\n\n  onChange(options: CanvasElementOptions) {\n    if (this.item.id !== options.type) {\n      this.item = canvasElementRegistry.getIfExists(options.type) ?? notFoundItem;\n    }\n\n    // rename handling\n    const oldName = this.options.name;\n    const newName = options.name;\n\n    this.revId++;\n    this.options = { ...options };\n    let trav = this.parent;\n    while (trav) {\n      if (trav.isRoot()) {\n        trav.scene.save();\n        break;\n      }\n      trav.revId++;\n      trav = trav.parent;\n    }\n\n    const scene = this.getScene();\n    if (oldName !== newName && scene) {\n      if (isConnectionTarget(this, scene.byName)) {\n        getConnectionsByTarget(this, scene).forEach((connection) => {\n          connection.info.targetName = newName;\n        });\n      }\n\n      scene.byName.delete(oldName);\n      scene.byName.set(newName, this);\n    }\n  }\n\n  getSaveModel() {\n    return { ...this.options };\n  }\n\n  initElement = (target: HTMLDivElement) => {\n    this.div = target;\n    this.applyLayoutStylesToDiv();\n  };\n\n  applyDrag = (event: OnDrag) => {\n    const hasHorizontalCenterConstraint = this.options.constraint?.horizontal === HorizontalConstraint.Center;\n    const hasVerticalCenterConstraint = this.options.constraint?.vertical === VerticalConstraint.Center;\n    if (hasHorizontalCenterConstraint || hasVerticalCenterConstraint) {\n      const numberOfTargets = this.getScene()?.selecto?.getSelectedTargets().length ?? 0;\n      const isMultiSelection = numberOfTargets > 1;\n      if (!isMultiSelection) {\n        const elementContainer = this.div?.getBoundingClientRect();\n        const height = elementContainer?.height ?? 100;\n        const yOffset = hasVerticalCenterConstraint ? height / 4 : 0;\n        event.target.style.transform = `translate(${event.translate[0]}px, ${event.translate[1] - yOffset}px)`;\n        return;\n      }\n    }\n\n    event.target.style.transform = event.transform;\n  };\n\n  applyRotate = (event: OnRotate) => {\n    const rotationDelta = event.delta;\n    const placement = this.options.placement!;\n    const placementRotation = placement.rotation ?? 0;\n\n    const calculatedRotation = placementRotation + rotationDelta;\n\n    // Ensure rotation is between 0 and 360\n    placement.rotation = calculatedRotation - Math.floor(calculatedRotation / 360) * 360;\n    event.target.style.transform = event.transform;\n  };\n\n  // kinda like:\n  // https://github.com/grafana/grafana-edge-app/blob/main/src/panels/draw/WrapItem.tsx#L44\n  applyResize = (event: OnResize, transformScale = 1) => {\n    const placement = this.options.placement!;\n\n    const style = event.target.style;\n    let deltaX = event.delta[0] / transformScale;\n    let deltaY = event.delta[1] / transformScale;\n    let dirLR = event.direction[0];\n    let dirTB = event.direction[1];\n\n    // Handle case when element is rotated\n    if (placement.rotation) {\n      const rotation = placement.rotation ?? 0;\n      const rotationInRadians = (rotation * Math.PI) / 180;\n      const originalDirLR = dirLR;\n      const originalDirTB = dirTB;\n\n      dirLR = Math.sign(originalDirLR * Math.cos(rotationInRadians) - originalDirTB * Math.sin(rotationInRadians));\n      dirTB = Math.sign(originalDirLR * Math.sin(rotationInRadians) + originalDirTB * Math.cos(rotationInRadians));\n    }\n\n    if (dirLR === 1) {\n      placement.width = event.width;\n      style.width = `${placement.width}px`;\n    } else if (dirLR === -1) {\n      placement.left! -= deltaX;\n      placement.width = event.width;\n      style.left = `${placement.left}px`;\n      style.width = `${placement.width}px`;\n    }\n\n    if (dirTB === -1) {\n      placement.top! -= deltaY;\n      placement.height = event.height;\n      style.top = `${placement.top}px`;\n      style.height = `${placement.height}px`;\n    } else if (dirTB === 1) {\n      placement.height = event.height;\n      style.height = `${placement.height}px`;\n    }\n  };\n\n  handleMouseEnter = (event: React.MouseEvent, isSelected: boolean | undefined) => {\n    const scene = this.getScene();\n    if (!scene?.isEditingEnabled && !scene?.tooltip?.isOpen) {\n      this.handleTooltip(event);\n    } else if (!isSelected) {\n      scene?.connections.handleMouseEnter(event);\n    }\n  };\n\n  handleTooltip = (event: React.MouseEvent) => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback) {\n      const rect = this.div?.getBoundingClientRect();\n      scene.tooltipCallback({\n        anchorPoint: { x: rect?.right ?? event.pageX, y: rect?.top ?? event.pageY },\n        element: this,\n        isOpen: false,\n      });\n    }\n  };\n\n  handleMouseLeave = (event: React.MouseEvent) => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback && !scene?.tooltip?.isOpen) {\n      scene.tooltipCallback(undefined);\n    }\n  };\n\n  onElementClick = (event: React.MouseEvent) => {\n    this.handleTooltip(event);\n    this.onTooltipCallback();\n  };\n\n  onElementKeyDown = (event: React.KeyboardEvent) => {\n    if (\n      event.key === 'Enter' &&\n      (event.currentTarget instanceof HTMLElement || event.currentTarget instanceof SVGElement)\n    ) {\n      const scene = this.getScene();\n      scene?.select({ targets: [event.currentTarget] });\n    }\n  };\n\n  onTooltipCallback = () => {\n    const scene = this.getScene();\n    if (scene?.tooltipCallback && scene.tooltip?.anchorPoint) {\n      scene.tooltipCallback({\n        anchorPoint: { x: scene.tooltip.anchorPoint.x, y: scene.tooltip.anchorPoint.y },\n        element: this,\n        isOpen: true,\n      });\n    }\n  };\n\n  render() {\n    const { item, div } = this;\n    const scene = this.getScene();\n    // TODO: Rethink selected state handling\n    const isSelected = div && scene && scene.selecto && scene.selecto.getSelectedTargets().includes(div);\n\n    return (\n      <div\n        key={this.UID}\n        ref={this.initElement}\n        onMouseEnter={(e: React.MouseEvent) => this.handleMouseEnter(e, isSelected)}\n        onMouseLeave={!scene?.isEditingEnabled ? this.handleMouseLeave : undefined}\n        onClick={!scene?.isEditingEnabled ? this.onElementClick : undefined}\n        onKeyDown={!scene?.isEditingEnabled ? this.onElementKeyDown : undefined}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <item.display\n          key={`${this.UID}/${this.revId}`}\n          config={this.options.config}\n          data={this.data}\n          isSelected={isSelected}\n        />\n      </div>\n    );\n  }\n}\n","import { CanvasConnection } from '../../../features/canvas';\nimport { ElementState } from '../../../features/canvas/runtime/element';\n\nimport { ConnectionCoordinates } from './panelcfg.gen';\n\nexport enum LayerActionID {\n  Delete = 'delete',\n  Duplicate = 'duplicate',\n  MoveTop = 'move-top',\n  MoveBottom = 'move-bottom',\n}\n\nexport interface DragNode {\n  key: number;\n  dataRef: ElementState;\n}\n\nexport interface DropNode extends DragNode {\n  pos: string;\n}\n\nexport enum InlineEditTabs {\n  ElementManagement = 'element-management',\n  SelectedElement = 'selected-element',\n  SelectedConnection = 'selected-connection',\n}\n\nexport type AnchorPoint = {\n  x: number;\n  y: number;\n};\n\nexport interface CanvasTooltipPayload {\n  anchorPoint: AnchorPoint | undefined;\n  element: ElementState | undefined;\n  isOpen?: boolean;\n}\n\nexport interface ConnectionState {\n  index: number; // array index from the source\n  source: ElementState;\n  target: ElementState;\n  info: CanvasConnection;\n  vertices?: ConnectionCoordinates[];\n  sourceOriginal?: ConnectionCoordinates;\n  targetOriginal?: ConnectionCoordinates;\n}\n\nexport enum LineStyle {\n  Solid = 'solid',\n  Dashed = 'dashed',\n}\n\nexport enum StrokeDasharray {\n  Solid = '0',\n  Dashed = '8 8',\n}\n","import { isNumber, isString } from 'lodash';\n\nimport { AppEvents, Field, getFieldDisplayName, LinkModel, PluginState, SelectableValue } from '@grafana/data';\nimport appEvents from 'app/core/app_events';\nimport { hasAlphaPanels, config } from 'app/core/config';\nimport {\n  defaultElementItems,\n  advancedElementItems,\n  CanvasElementItem,\n  canvasElementRegistry,\n  CanvasElementOptions,\n  CanvasConnection,\n  ConnectionDirection,\n} from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene, SelectionParams } from 'app/features/canvas/runtime/scene';\nimport { DimensionContext } from 'app/features/dimensions';\n\nimport { AnchorPoint, ConnectionState, LineStyle, StrokeDasharray } from './types';\n\nexport function doSelect(scene: Scene, element: ElementState | FrameState) {\n  try {\n    let selection: SelectionParams = { targets: [] };\n    if (element instanceof FrameState) {\n      const targetElements: HTMLDivElement[] = [];\n      targetElements.push(element?.div!);\n      selection.targets = targetElements;\n      selection.frame = element;\n      scene.select(selection);\n    } else {\n      scene.currentLayer = element.parent;\n      selection.targets = [element?.div!];\n      scene.select(selection);\n    }\n  } catch (error) {\n    appEvents.emit(AppEvents.alertError, ['Unable to select element, try selecting element in panel instead']);\n  }\n}\n\nexport function getElementTypes(shouldShowAdvancedTypes: boolean | undefined, current?: string): RegistrySelectInfo {\n  if (shouldShowAdvancedTypes) {\n    return getElementTypesOptions([...defaultElementItems, ...advancedElementItems], current);\n  }\n\n  return getElementTypesOptions([...defaultElementItems], current);\n}\n\ninterface RegistrySelectInfo {\n  options: Array<SelectableValue<string>>;\n  current: Array<SelectableValue<string>>;\n}\n\nexport function getElementTypesOptions(items: CanvasElementItem[], current: string | undefined): RegistrySelectInfo {\n  const selectables: RegistrySelectInfo = { options: [], current: [] };\n  const alpha: Array<SelectableValue<string>> = [];\n\n  for (const item of items) {\n    const option: SelectableValue<string> = { label: item.name, value: item.id, description: item.description };\n    if (item.state === PluginState.alpha) {\n      if (!hasAlphaPanels) {\n        continue;\n      }\n      option.label = `${item.name} (Alpha)`;\n      alpha.push(option);\n    } else {\n      selectables.options.push(option);\n    }\n\n    if (item.id === current) {\n      selectables.current.push(option);\n    }\n  }\n\n  for (const a of alpha) {\n    selectables.options.push(a);\n  }\n\n  return selectables;\n}\n\nexport function onAddItem(sel: SelectableValue<string>, rootLayer: FrameState | undefined, anchorPoint?: AnchorPoint) {\n  const newItem = canvasElementRegistry.getIfExists(sel.value) ?? notFoundItem;\n  const newElementOptions: CanvasElementOptions = {\n    ...newItem.getNewOptions(),\n    type: newItem.id,\n    name: '',\n  };\n\n  if (anchorPoint) {\n    newElementOptions.placement = { ...newElementOptions.placement, top: anchorPoint.y, left: anchorPoint.x };\n  }\n\n  if (newItem.defaultSize) {\n    newElementOptions.placement = { ...newElementOptions.placement, ...newItem.defaultSize };\n  }\n\n  if (rootLayer) {\n    const newElement = new ElementState(newItem, newElementOptions, rootLayer);\n    newElement.updateData(rootLayer.scene.context);\n    rootLayer.elements.push(newElement);\n    rootLayer.scene.save();\n    rootLayer.reinitializeMoveable();\n\n    setTimeout(() => doSelect(rootLayer.scene, newElement));\n  }\n}\n\n/*\n * Provided a given field add any matching data links\n * Mutates the links object in place which is then returned by the `getDataLinks` function downstream\n */\nconst addDataLinkForField = (\n  field: Field<unknown>,\n  data: string | undefined,\n  linkLookup: Set<string>,\n  links: Array<LinkModel<Field>>\n): void => {\n  if (field?.getLinks) {\n    const disp = field.display ? field.display(data) : { text: `${data}`, numeric: +data! };\n    // TODO add more control over which row index each element uses\n    const valueRowIndex = field.values.length - 1;\n    field.getLinks({ calculatedValue: disp, valueRowIndex }).forEach((link) => {\n      const key = `${link.title}/${link.href}`;\n      if (!linkLookup.has(key)) {\n        links.push(link);\n        linkLookup.add(key);\n      }\n    });\n  }\n};\n\n// TODO: This could be refactored a fair amount, ideally the element specific config code should be owned by each element and not in this shared util file\nexport function getDataLinks(\n  dimensionContext: DimensionContext,\n  elementOptions: CanvasElementOptions,\n  data: string | undefined\n): LinkModel[] {\n  const panelData = dimensionContext.getPanelData();\n  const frames = panelData?.series;\n\n  const links: Array<LinkModel<Field>> = [];\n  const linkLookup = new Set<string>();\n\n  const elementConfig = elementOptions.config;\n\n  frames?.forEach((frame) => {\n    const visibleFields = frame.fields.filter((field) => !Boolean(field.config.custom?.hideFrom?.tooltip));\n\n    // Text config\n    const isTextTiedToFieldData =\n      elementConfig?.text?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.text?.field);\n    const isTextColorTiedToFieldData =\n      elementConfig?.color?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.color?.field);\n\n    // General element config\n    const isElementBackgroundColorTiedToFieldData =\n      elementOptions?.background?.color?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementOptions?.background?.color?.field);\n    const isElementBackgroundImageTiedToFieldData =\n      elementOptions?.background?.image?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementOptions?.background?.image?.field);\n    const isElementBorderColorTiedToFieldData =\n      elementOptions?.border?.color?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementOptions?.border?.color?.field);\n\n    // Icon config\n    const isIconSVGTiedToFieldData =\n      elementConfig?.path?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.path?.field);\n    const isIconColorTiedToFieldData =\n      elementConfig?.fill?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.fill?.field);\n\n    // Wind turbine config (maybe remove / not support this?)\n    const isWindTurbineRPMTiedToFieldData =\n      elementConfig?.rpm?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.rpm?.field);\n\n    // Server config\n    const isServerBlinkRateTiedToFieldData =\n      elementConfig?.blinkRate?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.blinkRate?.field);\n    const isServerStatusColorTiedToFieldData =\n      elementConfig?.statusColor?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.statusColor?.field);\n    const isServerBulbColorTiedToFieldData =\n      elementConfig?.bulbColor?.field &&\n      visibleFields.some((field) => getFieldDisplayName(field, frame) === elementConfig?.bulbColor?.field);\n\n    if (isTextTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.text?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isTextColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.color?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isElementBackgroundColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementOptions?.background?.color?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isElementBackgroundImageTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementOptions?.background?.image?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isElementBorderColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementOptions?.border?.color?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isIconSVGTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.path?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isIconColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.fill?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isWindTurbineRPMTiedToFieldData) {\n      const field = visibleFields.filter((field) => getFieldDisplayName(field, frame) === elementConfig?.rpm?.field)[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isServerBlinkRateTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.blinkRate?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isServerStatusColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.statusColor?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n\n    if (isServerBulbColorTiedToFieldData) {\n      const field = visibleFields.filter(\n        (field) => getFieldDisplayName(field, frame) === elementConfig?.bulbColor?.field\n      )[0];\n      addDataLinkForField(field, data, linkLookup, links);\n    }\n  });\n\n  return links;\n}\n\nexport function isConnectionSource(element: ElementState) {\n  return element.options.connections && element.options.connections.length > 0;\n}\nexport function isConnectionTarget(element: ElementState, sceneByName: Map<string, ElementState>) {\n  const connections = getConnections(sceneByName);\n  return connections.some((connection) => connection.target === element);\n}\n\nexport function getConnections(sceneByName: Map<string, ElementState>) {\n  const connections: ConnectionState[] = [];\n  for (let v of sceneByName.values()) {\n    if (v.options.connections) {\n      v.options.connections.forEach((c, index) => {\n        // @TODO Remove after v10.x\n        if (isString(c.color)) {\n          c.color = { fixed: c.color };\n        }\n\n        if (isNumber(c.size)) {\n          c.size = { fixed: 2, min: 1, max: 10 };\n        }\n\n        const target = c.targetName ? sceneByName.get(c.targetName) : v.parent;\n        if (target) {\n          connections.push({\n            index,\n            source: v,\n            target,\n            info: c,\n            vertices: c.vertices ?? undefined,\n            sourceOriginal: c.sourceOriginal ?? undefined,\n            targetOriginal: c.targetOriginal ?? undefined,\n          });\n        }\n      });\n    }\n  }\n\n  return connections;\n}\n\nexport function getConnectionsByTarget(element: ElementState, scene: Scene) {\n  return scene.connections.state.filter((connection) => connection.target === element);\n}\n\nexport function updateConnectionsForSource(element: ElementState, scene: Scene) {\n  const targetConnections = getConnectionsByTarget(element, scene);\n  targetConnections.forEach((connection) => {\n    const sourceConnections = connection.source.options.connections?.splice(0) ?? [];\n    const connections = sourceConnections.filter((con) => con.targetName !== element.getName());\n    connection.source.onChange({ ...connection.source.options, connections });\n  });\n\n  // Update scene connection state to clear out old connections\n  scene.connections.updateState();\n}\n\nexport const calculateCoordinates = (\n  sourceRect: DOMRect,\n  parentRect: DOMRect,\n  info: CanvasConnection,\n  target: ElementState,\n  transformScale: number\n) => {\n  const sourceHorizontalCenter = sourceRect.left - parentRect.left + sourceRect.width / 2;\n  const sourceVerticalCenter = sourceRect.top - parentRect.top + sourceRect.height / 2;\n\n  // Convert from connection coords to DOM coords\n  const x1 = (sourceHorizontalCenter + (info.source.x * sourceRect.width) / 2) / transformScale;\n  const y1 = (sourceVerticalCenter - (info.source.y * sourceRect.height) / 2) / transformScale;\n\n  let x2: number;\n  let y2: number;\n  const targetRect = target.div?.getBoundingClientRect();\n  if (info.targetName && targetRect) {\n    const targetHorizontalCenter = targetRect.left - parentRect.left + targetRect.width / 2;\n    const targetVerticalCenter = targetRect.top - parentRect.top + targetRect.height / 2;\n\n    x2 = targetHorizontalCenter + (info.target.x * targetRect.width) / 2;\n    y2 = targetVerticalCenter - (info.target.y * targetRect.height) / 2;\n  } else {\n    const parentHorizontalCenter = parentRect.width / 2;\n    const parentVerticalCenter = parentRect.height / 2;\n\n    x2 = parentHorizontalCenter + (info.target.x * parentRect.width) / 2;\n    y2 = parentVerticalCenter - (info.target.y * parentRect.height) / 2;\n  }\n  x2 /= transformScale;\n  y2 /= transformScale;\n\n  // TODO look into a better way to avoid division by zero\n  if (x2 - x1 === 0) {\n    x2 += 1;\n  }\n  if (y2 - y1 === 0) {\n    y2 += 1;\n  }\n  return { x1, y1, x2, y2 };\n};\n\nexport const calculateMidpoint = (x1: number, y1: number, x2: number, y2: number) => {\n  return { x: (x1 + x2) / 2, y: (y1 + y2) / 2 };\n};\n\nexport const calculateAbsoluteCoords = (\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  valueX: number,\n  valueY: number,\n  deltaX: number,\n  deltaY: number\n) => {\n  return { x: valueX * deltaX + x1, y: valueY * deltaY + y1 };\n};\n\n// Calculate angle between two points and return angle in radians\nexport const calculateAngle = (x1: number, y1: number, x2: number, y2: number) => {\n  return Math.atan2(y2 - y1, x2 - x1);\n};\n\nexport const calculateDistance = (x1: number, y1: number, x2: number, y2: number) => {\n  //TODO add sqrt approx option\n  return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n};\n\n// @TODO revisit, currently returning last row index for field\nexport const getRowIndex = (fieldName: string | undefined, scene: Scene) => {\n  if (fieldName) {\n    const series = scene.context.getPanelData()?.series[0];\n    const field = series?.fields.find((f) => (f.name = fieldName));\n    const data = field?.values;\n    return data ? data.length - 1 : 0;\n  }\n  return 0;\n};\n\nexport const getConnectionStyles = (\n  info: CanvasConnection,\n  scene: Scene,\n  defaultArrowSize: number,\n  defaultArrowDirection: ConnectionDirection\n) => {\n  const defaultArrowColor = config.theme2.colors.text.primary;\n  const lastRowIndex = getRowIndex(info.size?.field, scene);\n  const strokeColor = info.color ? scene.context.getColor(info.color).value() : defaultArrowColor;\n  const strokeWidth = info.size ? scene.context.getScale(info.size).get(lastRowIndex) : defaultArrowSize;\n  const strokeRadius = info.radius ? scene.context.getScale(info.radius).get(lastRowIndex) : 0;\n  const arrowDirection = info.direction ? info.direction : defaultArrowDirection;\n  const lineStyle = info.lineStyle === LineStyle.Dashed ? StrokeDasharray.Dashed : StrokeDasharray.Solid;\n  return { strokeColor, strokeWidth, strokeRadius, arrowDirection, lineStyle };\n};\n\nexport const getParentBoundingClientRect = (scene: Scene) => {\n  if (config.featureToggles.canvasPanelPanZoom) {\n    const transformRef = scene.transformComponentRef?.current;\n    return transformRef?.instance.contentComponent?.getBoundingClientRect();\n  }\n\n  return scene.div?.getBoundingClientRect();\n};\n\nexport const getTransformInstance = (scene: Scene) => {\n  if (config.featureToggles.canvasPanelPanZoom) {\n    return scene.transformComponentRef?.current?.instance;\n  }\n  return undefined;\n};\n\nexport const getParent = (scene: Scene) => {\n  if (config.featureToggles.canvasPanelPanZoom) {\n    return scene.transformComponentRef?.current?.instance.contentComponent;\n  }\n  return scene.div;\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementProps,\n  CanvasElementOptions,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { Align, CanvasElementConfig, CanvasElementData, VAlign } from '../types';\n\nconst Cloud = (props: CanvasElementProps<CanvasElementConfig, CanvasElementData>) => {\n  const { data } = props;\n  const styles = getStyles(config.theme2, data);\n\n  // uuid needed to avoid id conflicts when multiple elements are rendered\n  const uniqueId = uuidv4();\n\n  return (\n    <div className={styles.container}>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 110 70\"\n        width=\"100%\"\n        height=\"100%\"\n        preserveAspectRatio=\"none\"\n      >\n        <defs>\n          <pattern id={`image-${uniqueId}`} patternUnits=\"userSpaceOnUse\" width=\"110\" height=\"70\">\n            <image xlinkHref={data?.backgroundImage} x=\"-50\" y=\"-50\" width=\"300\" height=\"300\"></image>\n          </pattern>\n          <clipPath id={`cloudClip-${uniqueId}`}>\n            <path d=\"M 23 13 C -1 13 -7 33 12.2 37 C -7 45.8 14.6 65 30.2 57 C 41 73 77 73 89 57 C 113 57 113 41 98 33 C 113 17 89 1 68 9 C 53 -3 29 -3 23 13 Z\" />\n          </clipPath>\n        </defs>\n        {/* Apply background image within the clipping area */}\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          clipPath={`url(#cloudClip-${uniqueId})`}\n          style={{ fill: 'none' }}\n        />\n        <path\n          d=\"M 23 13 C -1 13 -7 33 12.2 37 C -7 45.8 14.6 65 30.2 57 C 41 73 77 73 89 57 C 113 57 113 41 98 33 C 113 17 89 1 68 9 C 53 -3 29 -3 23 13 Z\"\n          className={styles.element}\n          style={{ fill: data?.backgroundImage ? `url(#image-${uniqueId})` : data?.backgroundColor }}\n        />\n      </svg>\n      <span className={styles.text}>{data?.text}</span>\n    </div>\n  );\n};\n\nexport const cloudItem: CanvasElementItem = {\n  id: 'cloud',\n  name: 'Cloud',\n  description: 'Cloud',\n\n  display: Cloud,\n\n  defaultSize: {\n    width: 110,\n    height: 70,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 110,\n      height: options?.placement?.height ?? 70,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<CanvasElementConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: CanvasElementData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    const { background, border } = elementOptions;\n    data.backgroundColor = background?.color ? dimensionContext.getColor(background.color).value() : defaultBgColor;\n    data.borderColor = border?.color ? dimensionContext.getColor(border.color).value() : defaultBgColor;\n    data.borderWidth = border?.width ?? 0;\n\n    data.backgroundImage = background?.image ? dimensionContext.getResource(background.image).value() : undefined;\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Cloud'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n\n  customConnectionAnchors: [\n    { x: -0.58, y: 0.63 }, // Top Left\n    { x: -0.22, y: 0.99 }, // Top Middle\n    { x: 0.235, y: 0.75 }, // Top Right\n\n    { x: 0.8, y: 0.6 }, // Right Top\n    { x: 0.785, y: 0.06 }, // Right Middle\n    { x: 0.91, y: -0.51 }, // Right Bottom\n\n    { x: 0.62, y: -0.635 }, // Bottom Right\n    { x: 0.05, y: -0.98 }, // Bottom Middle\n    { x: -0.45, y: -0.635 }, // Bottom Left\n\n    { x: -0.8, y: -0.58 }, // Left Bottom\n    { x: -0.78, y: -0.06 }, // Left Middle\n    { x: -0.9, y: 0.48 }, // Left Top\n  ],\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: CanvasElementData | undefined) => {\n  const textTop = data?.valign === VAlign.Middle ? '50%' : data?.valign === VAlign.Top ? '10%' : '90%';\n  const textLeft = data?.align === Align.Center ? '50%' : data?.align === Align.Left ? '10%' : '90%';\n  const textTransform = `translate(${data?.align === Align.Center ? '-50%' : data?.align === Align.Left ? '10%' : '-90%'}, ${\n    data?.valign === VAlign.Middle ? '-50%' : data?.valign === VAlign.Top ? '10%' : '-90%'\n  })`;\n\n  return {\n    container: css({\n      height: '100%',\n      width: '100%',\n    }),\n    text: css({\n      position: 'absolute',\n      top: textTop,\n      left: textLeft,\n      transform: textTransform,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    }),\n    element: css({\n      stroke: data?.borderColor,\n      strokeWidth: data?.borderWidth,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneFrontData {\n  rollAngle?: number;\n}\n\ninterface DroneFrontConfig {\n  rollAngle?: ScalarDimensionConfig;\n}\n\nconst DroneFrontDisplay = ({ data }: CanvasElementProps<DroneFrontConfig, DroneFrontData>) => {\n  const styles = useStyles2(getStyles);\n\n  const droneFrontTransformStyle = `rotate(${data?.rollAngle ? data.rollAngle : 0}deg)`;\n\n  return (\n    <svg\n      className={styles.droneFront}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 1300 290\"\n      style={{ transform: droneFrontTransformStyle, stroke: defaultBgColor }}\n    >\n      <g className=\"arms\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <line x1=\"510\" x2=\"320\" y1=\"100\" y2=\"150\" />\n        <line x1=\"510\" x2=\"320\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"100\" y2=\"150\" />\n      </g>\n      <g className=\"body\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          fill=\"none\"\n          d=\" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z \"\n        />\n        <circle cx=\"650\" cy=\"160\" r=\"40\" fill=\"none\" />\n      </g>\n      <g className=\"motors\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z \"\n        />\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z \"\n        />\n      </g>\n      <g className=\"propellers\" fill={defaultBgColor}>\n        <path\n          className=\"prop\"\n          d=\" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z \"\n        />\n        <path\n          className=\"prop\"\n          d=\" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneFrontItem: CanvasElementItem = {\n  id: 'droneFront',\n  name: 'Drone Front',\n  description: 'Drone front',\n\n  display: DroneFrontDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 26,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 26,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<DroneFrontConfig>) => {\n    const droneFrontConfig = elementOptions.config;\n\n    const data: DroneFrontData = {\n      rollAngle: droneFrontConfig?.rollAngle ? dimensionContext.getScalar(droneFrontConfig.rollAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Front'];\n    builder.addCustomEditor({\n      category,\n      id: 'rollAngle',\n      path: 'config.rollAngle',\n      name: 'Roll Angle',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  droneFront: css({\n    transition: 'transform 0.4s',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneSideData {\n  pitchAngle?: number;\n}\n\ninterface DroneSideConfig {\n  pitchAngle?: ScalarDimensionConfig;\n}\n\nconst DroneSideDisplay = ({ data }: CanvasElementProps<DroneSideConfig, DroneSideData>) => {\n  const styles = useStyles2(getStyles);\n\n  const droneSidePitchTransformStyle = `rotate(${data?.pitchAngle ? data.pitchAngle : 0}deg)`;\n\n  return (\n    <svg\n      className={styles.droneSide}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 1300 290\"\n      style={{ transform: droneSidePitchTransformStyle, stroke: defaultBgColor }}\n    >\n      <g className=\"arms\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <line x1=\"510\" x2=\"320\" y1=\"100\" y2=\"150\" />\n        <line x1=\"510\" x2=\"320\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"190\" y2=\"210\" />\n        <line x1=\"790\" x2=\"980\" y1=\"100\" y2=\"150\" />\n      </g>\n      <g className=\"body\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          fill=\"none\"\n          d=\" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z \"\n        />\n      </g>\n      <g className=\"motors\" stroke={defaultBgColor} strokeWidth=\"28px\">\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z \"\n        />\n        <path\n          className=\"motor\"\n          fill=\"none\"\n          d=\" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z \"\n        />\n      </g>\n      <g className=\"propellers\" fill={defaultBgColor}>\n        <path\n          className=\"prop\"\n          d=\" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z \"\n        />\n        <path\n          className=\"prop\"\n          d=\" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneSideItem: CanvasElementItem = {\n  id: 'droneSide',\n  name: 'Drone Side',\n  description: 'Drone Side',\n\n  display: DroneSideDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 26,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 26,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<DroneSideConfig>) => {\n    const droneSideConfig = elementOptions.config;\n\n    const data: DroneSideData = {\n      pitchAngle: droneSideConfig?.pitchAngle ? dimensionContext.getScalar(droneSideConfig.pitchAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Side'];\n    builder.addCustomEditor({\n      category,\n      id: 'pitchAngle',\n      path: 'config.pitchAngle',\n      name: 'Pitch Angle',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  droneSide: css({\n    transition: 'transform 0.4s',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface DroneTopData {\n  bRightRotorRPM?: number;\n  bLeftRotorRPM?: number;\n  fRightRotorRPM?: number;\n  fLeftRotorRPM?: number;\n  yawAngle?: number;\n}\n\ninterface DroneTopConfig {\n  bRightRotorRPM?: ScalarDimensionConfig;\n  bLeftRotorRPM?: ScalarDimensionConfig;\n  fRightRotorRPM?: ScalarDimensionConfig;\n  fLeftRotorRPM?: ScalarDimensionConfig;\n  yawAngle?: ScalarDimensionConfig;\n}\n\nconst DroneTopDisplay = ({ data }: CanvasElementProps<DroneTopConfig, DroneTopData>) => {\n  const styles = useStyles2(getStyles);\n\n  const fRightRotorAnimation = `spin ${data?.fRightRotorRPM ? 60 / Math.abs(data.fRightRotorRPM) : 0}s linear infinite`;\n\n  const fLeftRotorAnimation = `spin ${data?.fLeftRotorRPM ? 60 / Math.abs(data.fLeftRotorRPM) : 0}s linear infinite`;\n\n  const bRightRotorAnimation = `spin ${data?.bRightRotorRPM ? 60 / Math.abs(data.bRightRotorRPM) : 0}s linear infinite`;\n\n  const bLeftRotorAnimation = `spin ${data?.bLeftRotorRPM ? 60 / Math.abs(data.bLeftRotorRPM) : 0}s linear infinite`;\n\n  const droneTopTransformStyle = `rotate(${data?.yawAngle ? data.yawAngle : 0}deg)`;\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"-43 -43 640 640\"\n      xmlSpace=\"preserve\"\n      style={{ transform: droneTopTransformStyle, fill: defaultBgColor }}\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z \"\n      />\n      <path\n        fillRule=\"evenodd\"\n        d=\" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z \"\n      />\n      <g className=\"propeller-group\">\n        <path\n          className={`${styles.propeller} ${styles.propellerCW}`}\n          style={{ animation: bRightRotorAnimation }}\n          d=\" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCCW}`}\n          style={{ animation: fRightRotorAnimation }}\n          d=\" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCCW}`}\n          style={{ animation: bLeftRotorAnimation }}\n          d=\" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z \"\n        />\n        <path\n          className={`${styles.propeller} ${styles.propellerCW}`}\n          style={{ animation: fLeftRotorAnimation }}\n          d=\" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z \"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport const droneTopItem: CanvasElementItem = {\n  id: 'droneTop',\n  name: 'Drone Top',\n  description: 'Drone top',\n\n  display: DroneTopDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<DroneTopConfig>) => {\n    const droneTopConfig = elementOptions.config;\n\n    const data: DroneTopData = {\n      bRightRotorRPM: droneTopConfig?.bRightRotorRPM\n        ? dimensionContext.getScalar(droneTopConfig.bRightRotorRPM).value()\n        : 0,\n      bLeftRotorRPM: droneTopConfig?.bLeftRotorRPM\n        ? dimensionContext.getScalar(droneTopConfig.bLeftRotorRPM).value()\n        : 0,\n      fRightRotorRPM: droneTopConfig?.fRightRotorRPM\n        ? dimensionContext.getScalar(droneTopConfig.fRightRotorRPM).value()\n        : 0,\n      fLeftRotorRPM: droneTopConfig?.fLeftRotorRPM\n        ? dimensionContext.getScalar(droneTopConfig.fLeftRotorRPM).value()\n        : 0,\n      yawAngle: droneTopConfig?.yawAngle ? dimensionContext.getScalar(droneTopConfig.yawAngle).value() : 0,\n    };\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Drone Top'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'yawAngle',\n        path: 'config.yawAngle',\n        name: 'Yaw Angle',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'fRightRotorRPM',\n        path: 'config.fRightRotorRPM',\n        name: 'Front Right Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'fLeftRotorRPM',\n        path: 'config.fLeftRotorRPM',\n        name: 'Front Left Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'bRightRotorRPM',\n        path: 'config.bRightRotorRPM',\n        name: 'Back Right Rotor RPM',\n        editor: ScalarDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'bLeftRotorRPM',\n        path: 'config.bLeftRotorRPM',\n        name: 'Back Left Rotor RPM',\n        editor: ScalarDimensionEditor,\n      });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  propeller: css({\n    transformOrigin: '50% 50%',\n    transformBox: 'fill-box',\n    display: 'block',\n    '@keyframes spin': {\n      from: {\n        transform: 'rotate(0deg)',\n      },\n      to: {\n        transform: 'rotate(360deg)',\n      },\n    },\n  }),\n  propellerCW: css({\n    animationDirection: 'normal',\n  }),\n  propellerCCW: css({\n    animationDirection: 'reverse',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementOptions,\n  CanvasElementProps,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { Align, CanvasElementConfig, CanvasElementData, VAlign } from '../types';\n\nconst Ellipse = (props: CanvasElementProps<CanvasElementConfig, CanvasElementData>) => {\n  const { data } = props;\n  const styles = getStyles(config.theme2, data);\n\n  // uuid needed to avoid id conflicts when multiple elements are rendered\n  const uniqueId = uuidv4();\n\n  return (\n    <div className={styles.container}>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 200 200\"\n        width=\"100%\"\n        height=\"100%\"\n        preserveAspectRatio=\"none\"\n      >\n        <defs>\n          <pattern id={`image-${uniqueId}`} patternUnits=\"userSpaceOnUse\" width=\"200\" height=\"200\">\n            <image xlinkHref={data?.backgroundImage} x=\"-50\" y=\"-50\" width=\"300\" height=\"300\"></image>\n          </pattern>\n          <clipPath id={`ellipseClip-${uniqueId}`}>\n            <ellipse cx=\"50%\" cy=\"50%\" rx=\"50%\" ry=\"50%\" />\n          </clipPath>\n        </defs>\n        {/* Apply background image within the clipping area */}\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          clipPath={`url(#ellipseClip-${uniqueId})`}\n          style={{ fill: 'none' }}\n        />\n        <ellipse\n          cx=\"50%\"\n          cy=\"50%\"\n          rx=\"50%\"\n          ry=\"50%\"\n          className={styles.element}\n          style={{ fill: data?.backgroundImage ? `url(#image-${uniqueId})` : data?.backgroundColor }}\n        />\n      </svg>\n\n      <span className={styles.text}>{data?.text}</span>\n    </div>\n  );\n};\n\nexport const ellipseItem: CanvasElementItem<CanvasElementConfig, CanvasElementData> = {\n  id: 'ellipse',\n  name: 'Ellipse',\n  description: 'Ellipse',\n\n  display: Ellipse,\n\n  defaultSize: {\n    width: 160,\n    height: 160,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 160,\n      height: options?.placement?.height ?? 138,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<CanvasElementConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: CanvasElementData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    const { background, border } = elementOptions;\n    data.backgroundColor = background?.color ? dimensionContext.getColor(background.color).value() : defaultBgColor;\n    data.borderColor = border?.color ? dimensionContext.getColor(border.color).value() : defaultBgColor;\n    data.borderWidth = border?.width ?? 0;\n\n    data.backgroundImage = background?.image ? dimensionContext.getResource(background.image).value() : undefined;\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Ellipse'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n\n  customConnectionAnchors: [\n    // points along the left edge\n    { x: -1, y: 0 }, // middle left\n    { x: -0.7, y: 0.7 },\n\n    // points along the top edge\n    { x: 0, y: 1 }, // top\n    { x: 0.7, y: 0.7 },\n\n    // points along the right edge\n    { x: 1, y: 0 }, // middle right\n    { x: 0.7, y: -0.7 },\n\n    // points along the bottom edge\n    { x: 0, y: -1 }, // bottom\n    { x: -0.7, y: -0.7 },\n  ],\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: CanvasElementData | undefined) => {\n  const textTop = data?.valign === VAlign.Middle ? '50%' : data?.valign === VAlign.Top ? '10%' : '90%';\n  const textLeft = data?.align === Align.Center ? '50%' : data?.align === Align.Left ? '10%' : '90%';\n  const textTransform = `translate(${data?.align === Align.Center ? '-50%' : data?.align === Align.Left ? '10%' : '-90%'}, ${\n    data?.valign === VAlign.Middle ? '-50%' : data?.valign === VAlign.Top ? '10%' : '-90%'\n  })`;\n\n  return {\n    container: css({\n      height: '100%',\n      width: '100%',\n    }),\n    text: css({\n      position: 'absolute',\n      top: textTop,\n      left: textLeft,\n      transform: textTransform,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    }),\n    element: css({\n      stroke: data?.borderColor,\n      strokeWidth: data?.borderWidth,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { isString } from 'lodash';\nimport React, { CSSProperties } from 'react';\n\nimport { LinkModel } from '@grafana/data';\nimport { ColorDimensionConfig, ResourceDimensionConfig, ResourceDimensionMode } from '@grafana/schema';\nimport { SanitizedSVG } from 'app/core/components/SVG/SanitizedSVG';\nimport { getPublicOrAbsoluteUrl } from 'app/features/dimensions';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor, ResourceDimensionEditor } from 'app/features/dimensions/editors';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultBgColor } from '../element';\nimport { LineConfig } from '../types';\n\nexport interface IconConfig {\n  path?: ResourceDimensionConfig;\n  fill?: ColorDimensionConfig;\n  stroke?: LineConfig;\n}\n\ninterface IconData {\n  path: string;\n  fill: string;\n  strokeColor?: string;\n  stroke?: number;\n  links?: LinkModel[];\n}\n\n// When a stoke is defined, we want the path to be in page units\nconst svgStrokePathClass = css({\n  path: {\n    vectorEffect: 'non-scaling-stroke',\n  },\n});\n\nexport function IconDisplay(props: CanvasElementProps) {\n  const { data } = props;\n  if (!data?.path) {\n    return null;\n  }\n\n  const svgStyle: CSSProperties = {\n    fill: data?.fill,\n    stroke: data?.strokeColor,\n    strokeWidth: data?.stroke,\n    height: '100%',\n    width: '100%',\n  };\n\n  return (\n    <SanitizedSVG src={data.path} style={svgStyle} className={svgStyle.strokeWidth ? svgStrokePathClass : undefined} />\n  );\n}\n\nexport const iconItem: CanvasElementItem<IconConfig, IconData> = {\n  id: 'icon',\n  name: 'Icon',\n  description: 'SVG Icon display',\n\n  display: IconDisplay,\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      path: {\n        mode: ResourceDimensionMode.Fixed,\n        fixed: 'img/icons/unicons/question-circle.svg',\n      },\n      fill: { fixed: defaultBgColor },\n    },\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<IconConfig>) => {\n    const iconConfig = elementOptions.config;\n\n    let path: string | undefined = undefined;\n    if (iconConfig?.path) {\n      path = dimensionContext.getResource(iconConfig.path).value();\n    }\n    if (!path || !isString(path)) {\n      path = getPublicOrAbsoluteUrl('img/icons/unicons/question-circle.svg');\n    }\n\n    const data: IconData = {\n      path,\n      fill: iconConfig?.fill ? dimensionContext.getColor(iconConfig.fill).value() : defaultBgColor,\n    };\n\n    if (iconConfig?.stroke?.width && iconConfig?.stroke.color) {\n      if (iconConfig.stroke.width > 0) {\n        data.stroke = iconConfig.stroke?.width;\n        data.strokeColor = dimensionContext.getColor(iconConfig.stroke.color).value();\n      }\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.path);\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Icon'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'iconSelector',\n        path: 'config.path',\n        name: 'SVG Path',\n        editor: ResourceDimensionEditor,\n        settings: {\n          resourceType: 'icon',\n          maxFiles: 2000,\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.fill',\n        path: 'config.fill',\n        name: 'Fill color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: 'grey',\n        },\n      });\n    // .addSliderInput({\n    //   category,\n    //   path: 'config.stroke.width',\n    //   name: 'Stroke',\n    //   defaultValue: 0,\n    //   settings: {\n    //     min: 0,\n    //     max: 10,\n    //   },\n    // })\n    // .addCustomEditor({\n    //   category,\n    //   id: 'config.stroke.color',\n    //   path: 'config.stroke.color',\n    //   name: 'Stroke color',\n    //   editor: ColorDimensionEditor,\n    //   settings: {},\n    //   defaultValue: {\n    //     // Configured values\n    //     fixed: 'grey',\n    //   },\n    //   showIf: (cfg) => Boolean(cfg?.config?.stroke?.width),\n    // })\n  },\n};\n","import { css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { useObservable } from 'react-use';\nimport { of } from 'rxjs';\n\nimport { DataFrame, FieldNamePickerConfigSettings, GrafanaTheme2, StandardEditorsRegistryItem } from '@grafana/data';\nimport { TextDimensionMode } from '@grafana/schema';\nimport { usePanelContext, useStyles2 } from '@grafana/ui';\nimport { FieldNamePicker } from '@grafana/ui/src/components/MatchersUI/FieldNamePicker';\nimport { frameHasName, getFrameFieldsDisplayNames } from '@grafana/ui/src/components/MatchersUI/utils';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementOptions,\n  CanvasElementProps,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { ElementState } from '../runtime/element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\n// eslint-disable-next-line\nconst dummyFieldSettings: StandardEditorsRegistryItem<string, FieldNamePickerConfigSettings> = {\n  settings: {},\n} as StandardEditorsRegistryItem<string, FieldNamePickerConfigSettings>;\n\nconst MetricValueDisplay = (props: CanvasElementProps<TextConfig, TextData>) => {\n  const { data, isSelected, config } = props;\n  const styles = useStyles2(getStyles(data));\n\n  const context = usePanelContext();\n  const scene = context.instanceState?.scene;\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const isEditMode = useObservable<boolean>(scene?.editModeEnabled ?? of(false));\n\n  const getDisplayValue = () => {\n    if (panelData && config.text?.field && fieldNotFound()) {\n      return 'Field not found';\n    }\n\n    if (panelData && config.text?.field && !data?.text) {\n      return 'No data';\n    }\n\n    return data?.text ? data.text : 'Double click to set field';\n  };\n\n  const fieldNotFound = () => {\n    const fieldNames = getFrameFieldsDisplayNames(panelData);\n    return !frameHasName(config.text?.field, fieldNames);\n  };\n\n  if (isEditMode && isSelected) {\n    return <MetricValueEdit {...props} />;\n  }\n\n  return (\n    <div className={styles.container}>\n      <span className={styles.span}>{getDisplayValue()}</span>\n    </div>\n  );\n};\n\nconst MetricValueEdit = (props: CanvasElementProps<TextConfig, TextData>) => {\n  let { data, config } = props;\n  const context = usePanelContext();\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const onFieldChange = useCallback(\n    (field: string | undefined) => {\n      let selectedElement: ElementState;\n      selectedElement = context.instanceState?.selected[0];\n      if (selectedElement) {\n        const options = selectedElement.options;\n        selectedElement.onChange({\n          ...options,\n          config: {\n            ...options.config,\n            text: { fixed: '', field: field, mode: TextDimensionMode.Field },\n          },\n          background: {\n            color: { field: field, fixed: options.background?.color?.fixed ?? '' },\n          },\n        });\n\n        // Force a re-render (update scene data after config update)\n        const scene = context.instanceState?.scene;\n        if (scene) {\n          scene.editModeEnabled.next(false);\n          scene.updateData(scene.data);\n        }\n      }\n    },\n    [context.instanceState?.scene, context.instanceState?.selected]\n  );\n\n  const styles = useStyles2(getStyles(data));\n  return (\n    <div className={styles.inlineEditorContainer}>\n      {panelData && (\n        <FieldNamePicker\n          context={{ data: panelData }}\n          value={config.text?.field ?? ''}\n          onChange={onFieldChange}\n          item={dummyFieldSettings}\n        />\n      )}\n    </div>\n  );\n};\n\nconst getStyles = (data: TextData | undefined) => (theme: GrafanaTheme2) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  inlineEditorContainer: css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1),\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n});\n\nexport const metricValueItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'metric-value',\n  name: 'Metric Value',\n  description: 'Display a field value',\n\n  display: MetricValueDisplay,\n\n  hasEditMode: true,\n\n  defaultSize: {\n    width: 260,\n    height: 50,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n      text: { mode: TextDimensionMode.Field, fixed: '', field: '' },\n      size: 20,\n    },\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width,\n      height: options?.placement?.height,\n      top: options?.placement?.top ?? 100,\n      left: options?.placement?.left ?? 100,\n    },\n  }),\n\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<TextConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: TextData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Metric value'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementProps,\n  CanvasElementOptions,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { Align, CanvasElementConfig, CanvasElementData, VAlign } from '../types';\n\nconst Parallelogram = (props: CanvasElementProps<CanvasElementConfig, CanvasElementData>) => {\n  const { data } = props;\n  const styles = getStyles(config.theme2, data);\n\n  // uuid needed to avoid id conflicts when multiple elements are rendered\n  const uniqueId = uuidv4();\n\n  return (\n    <div className={styles.container}>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 250 150\"\n        width=\"100%\"\n        height=\"100%\"\n        preserveAspectRatio=\"none\"\n      >\n        <defs>\n          <pattern id={`image-${uniqueId}`} patternUnits=\"userSpaceOnUse\" width=\"250\" height=\"150\">\n            <image xlinkHref={data?.backgroundImage} x=\"-50\" y=\"-50\" width=\"350\" height=\"200\"></image>\n          </pattern>\n          <clipPath id={`parallelogramClip-${uniqueId}`}>\n            <polygon points=\"0,150 50,0 250,0 200,150\" />\n          </clipPath>\n        </defs>\n        {/* Apply background image within the clipping area */}\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          clipPath={`url(#parallelogramClip-${uniqueId})`}\n          style={{ fill: 'none' }}\n        />\n        <polygon\n          points=\"0,150 50,0 250,0 200,150\"\n          className={styles.element}\n          style={{ fill: data?.backgroundImage ? `url(#image-${uniqueId})` : data?.backgroundColor }}\n        />\n      </svg>\n      <span className={styles.text}>{data?.text}</span>\n    </div>\n  );\n};\n\nexport const parallelogramItem: CanvasElementItem = {\n  id: 'parallelogram',\n  name: 'Parallelogram',\n  description: 'Parallelogram',\n\n  display: Parallelogram,\n\n  defaultSize: {\n    width: 250,\n    height: 150,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 250,\n      height: options?.placement?.height ?? 150,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<CanvasElementConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: CanvasElementData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    const { background, border } = elementOptions;\n    data.backgroundColor = background?.color ? dimensionContext.getColor(background.color).value() : defaultBgColor;\n    data.borderColor = border?.color ? dimensionContext.getColor(border.color).value() : defaultBgColor;\n    data.borderWidth = border?.width ?? 0;\n\n    data.backgroundImage = background?.image ? dimensionContext.getResource(background.image).value() : undefined;\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Parallelogram'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n\n  customConnectionAnchors: [\n    { x: -0.6, y: 1 }, // Angled Top Left\n    { x: -0.1, y: 1 }, // Top Middle\n    { x: 0.5, y: 1 }, // Angled Top Right\n    { x: 1, y: 1 }, // Top Right\n    { x: 0.925, y: 0.6 }, // Angled Right Top\n    { x: 0.84, y: 0.2 }, // Right Middle\n    { x: 0.76, y: -0.2 }, // Angled Right Bottom\n    { x: 0.675, y: -0.6 }, // Bottom Right\n    { x: -0.5, y: -1 }, // Angled Bottom Right\n    { x: 0.1, y: -1 }, // Bottom Middle\n    { x: 0.6, y: -1 }, // Angled Bottom Left\n    { x: -1, y: -1 }, // Bottom Left\n    { x: -0.925, y: -0.6 }, // Angled Left Bottom\n    { x: -0.84, y: -0.2 }, // Left Middle\n    { x: -0.76, y: 0.2 }, // Angled Left Top\n    { x: -0.675, y: 0.6 }, // Top Left 2\n  ],\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: CanvasElementData | undefined) => {\n  const textTop = data?.valign === VAlign.Middle ? '50%' : data?.valign === VAlign.Top ? '10%' : '90%';\n  const textLeft = data?.align === Align.Center ? '50%' : data?.align === Align.Left ? '10%' : '90%';\n  const textTransform = `translate(${data?.align === Align.Center ? '-50%' : data?.align === Align.Left ? '10%' : '-90%'}, ${\n    data?.valign === VAlign.Middle ? '-50%' : data?.valign === VAlign.Top ? '10%' : '-90%'\n  })`;\n\n  return {\n    container: css({\n      height: '100%',\n      width: '100%',\n    }),\n    text: css({\n      position: 'absolute',\n      top: textTop,\n      left: textLeft,\n      transform: textTransform,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    }),\n    element: css({\n      stroke: data?.borderColor,\n      strokeWidth: data?.borderWidth,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { PureComponent } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementOptions,\n  CanvasElementProps,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\nclass RectangleDisplay extends PureComponent<CanvasElementProps<TextConfig, TextData>> {\n  render() {\n    const { data } = this.props;\n    const styles = getStyles(config.theme2, data);\n\n    return (\n      <div className={styles.container}>\n        <span className={styles.span}>{data?.text}</span>\n      </div>\n    );\n  }\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, data) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n}));\n\nexport const rectangleItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'rectangle',\n  name: 'Rectangle',\n  description: 'Rectangle',\n\n  display: RectangleDisplay,\n\n  defaultSize: {\n    width: 240,\n    height: 160,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<TextConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: TextData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    return data;\n  },\n\n  // Heatmap overlay options\n  registerOptionsUI: (builder) => {\n    const category = ['Rectangle'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerDatabase = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline}>\n      <g className={styles.server}>\n        <path d=\"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883\" />\n        <path d=\"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883\" />\n        <path d=\"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z\" />\n      </g>\n      <g className={styles.circleBack}>\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -132.86 -110.58)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -122.04 -111.7)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.21 -114.77)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n      <g className={styles.circle}>\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -52.337 -30.65)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -41.518 -31.769)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.688 -34.842)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerSingle = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g>\n      <g className={styles.outline} transform=\"matrix(1.01 0 0 1.01 -.375 -.375)\">\n        <g className={styles.server}>\n          <path d=\"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377\" />\n          <path d=\"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z\" />\n        </g>\n        <path d=\"m12.406 61.742h30.69\" />\n        <path d=\"m52.8 51.765v19.953\" />\n        <path\n          className={styles.circleBack}\n          transform=\"matrix(2.7592 0 0 2.7592 -109.42 -108.61)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          className={styles.circle}\n          transform=\"matrix(1.4775 0 0 1.4775 -29.697 -29.479)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerStack = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline} transform=\"translate(.5 .49865)\">\n      <g className={styles.server}>\n        <path d=\"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456\" />\n        <path d=\"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n        <path d=\"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n        <path d=\"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n      </g>\n      <path d=\"m11.562 28.797h31.111\" />\n      <path d=\"m52.508 20.227v17.143\" />\n      <path d=\"m11.562 63.117h31.111\" />\n      <path d=\"m52.508 54.547v17.143\" />\n      <path d=\"m11.562 45.977h31.111\" />\n      <path d=\"m52.508 37.406v17.143\" />\n      <g className={styles.circleBack}>\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -143.2)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -126.14)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(2.7868 0 0 2.7868 -111.31 -108.86)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n      <g className={styles.circle}>\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -63.277)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -46.209)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n        <path\n          transform=\"matrix(1.4922 0 0 1.4922 -30.794 -28.93)\"\n          d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n        />\n      </g>\n    </g>\n  );\n};\n","import React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport { getServerStyles, ServerData } from '../server';\n\nexport const ServerTerminal = (data: ServerData) => {\n  const styles = useStyles2(getServerStyles(data));\n  return (\n    <g className={styles.outline}>\n      <g className={styles.server}>\n        <path d=\"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z\" />\n        <path d=\"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z\" />\n      </g>\n      <path d=\"m37.5 46.719v2.875\" />\n      <path d=\"m24.625 51.343h25.75\" />\n      <path d=\"m12.062 63.804h31.111\" />\n      <path d=\"m53.008 55.234v17.143\" />\n      <path\n        className={styles.circleBack}\n        transform=\"matrix(2.7868 0 0 2.7868 -110.81 -108.2)\"\n        d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n      />\n      <path\n        className={styles.circle}\n        transform=\"matrix(1.4922 0 0 1.4922 -30.294 -28.27)\"\n        d=\"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z\"\n      />\n    </g>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, LinkModel } from '@grafana/data';\nimport { ColorDimensionConfig, ScalarDimensionConfig } from '@grafana/schema';\nimport config from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ColorDimensionEditor, ScalarDimensionEditor } from 'app/features/dimensions/editors';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps } from '../../element';\n\nimport { ServerDatabase } from './types/database';\nimport { ServerSingle } from './types/single';\nimport { ServerStack } from './types/stack';\nimport { ServerTerminal } from './types/terminal';\n\ninterface ServerConfig {\n  blinkRate?: ScalarDimensionConfig;\n  statusColor?: ColorDimensionConfig;\n  bulbColor?: ColorDimensionConfig;\n  type: ServerType;\n}\n\nexport interface ServerData {\n  blinkRate?: number;\n  statusColor?: string;\n  bulbColor?: string;\n  type: ServerType;\n  links?: LinkModel[];\n}\n\nenum ServerType {\n  Single = 'Single',\n  Stack = 'Stack',\n  Database = 'Database',\n  Terminal = 'Terminal',\n}\n\ntype Props = CanvasElementProps<ServerConfig, ServerData>;\nconst outlineColor = config.theme2.colors.text.primary;\n\nconst ServerDisplay = ({ data }: Props) => {\n  return data ? (\n    <svg viewBox=\"0 0 75 75\">\n      {data.type === ServerType.Single ? (\n        <ServerSingle {...data} />\n      ) : data.type === ServerType.Stack ? (\n        <ServerStack {...data} />\n      ) : data.type === ServerType.Database ? (\n        <ServerDatabase {...data} />\n      ) : data.type === ServerType.Terminal ? (\n        <ServerTerminal {...data} />\n      ) : null}\n    </svg>\n  ) : null;\n};\n\nexport const serverItem: CanvasElementItem<ServerConfig, ServerData> = {\n  id: 'server',\n  name: 'Server',\n  description: 'Basic server with status',\n\n  display: ServerDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 100,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n    config: {\n      type: ServerType.Single,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<ServerConfig>) => {\n    const serverConfig = elementOptions.config;\n\n    const data: ServerData = {\n      blinkRate: serverConfig?.blinkRate ? dimensionContext.getScalar(serverConfig.blinkRate).value() : 0,\n      statusColor: serverConfig?.statusColor\n        ? dimensionContext.getColor(serverConfig.statusColor).value()\n        : 'transparent',\n      bulbColor: serverConfig?.bulbColor ? dimensionContext.getColor(serverConfig.bulbColor).value() : 'green',\n      type: serverConfig?.type ?? ServerType.Single,\n    };\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.statusColor);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Server'];\n    builder\n      .addSelect({\n        category,\n        path: 'config.type',\n        name: 'Type',\n        settings: {\n          options: [\n            { value: ServerType.Single, label: ServerType.Single },\n            { value: ServerType.Stack, label: ServerType.Stack },\n            { value: ServerType.Database, label: ServerType.Database },\n            { value: ServerType.Terminal, label: ServerType.Terminal },\n          ],\n        },\n        defaultValue: ServerType.Single,\n      })\n      .addCustomEditor({\n        category,\n        id: 'statusColor',\n        path: 'config.statusColor',\n        name: 'Status color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          fixed: 'transparent',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'bulbColor',\n        path: 'config.bulbColor',\n        name: 'Bulb color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          fixed: 'green',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'blinkRate',\n        path: 'config.blinkRate',\n        name: 'Blink rate [hz] (0 = off)',\n        editor: ScalarDimensionEditor,\n        settings: { min: 0, max: 100 },\n      });\n  },\n};\n\nexport const getServerStyles = (data: ServerData | undefined) => (theme: GrafanaTheme2) => ({\n  bulb: css({\n    '@keyframes blink': {\n      '0%': {\n        fillOpacity: 0,\n      },\n      '50%': {\n        fillOpacity: 1,\n      },\n      '100%': {\n        fillOpacity: 0,\n      },\n    },\n  }),\n  server: css({\n    fill: data?.statusColor ?? 'transparent',\n  }),\n  circle: css({\n    animation: `blink ${data?.blinkRate ? 1 / data.blinkRate : 0}s infinite step-end`,\n    fill: data?.bulbColor,\n    stroke: 'none',\n  }),\n  circleBack: css({\n    fill: outlineColor,\n    stroke: 'none',\n    opacity: 1,\n  }),\n  outline: css({\n    stroke: outlineColor,\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    strokeWidth: '4px',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { useObservable } from 'react-use';\nimport { of } from 'rxjs';\n\nimport { DataFrame, GrafanaTheme2 } from '@grafana/data';\nimport { Input, usePanelContext, useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions/context';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\n\nimport { getDataLinks } from '../../../plugins/panel/canvas/utils';\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultThemeTextColor } from '../element';\nimport { ElementState } from '../runtime/element';\nimport { Align, TextConfig, TextData, VAlign } from '../types';\n\nconst TextDisplay = (props: CanvasElementProps<TextConfig, TextData>) => {\n  const { data, isSelected } = props;\n  const styles = useStyles2(getStyles(data));\n\n  const context = usePanelContext();\n  const scene = context.instanceState?.scene;\n\n  const isEditMode = useObservable<boolean>(scene?.editModeEnabled ?? of(false));\n\n  if (isEditMode && isSelected) {\n    return <TextEdit {...props} />;\n  }\n  return (\n    <div className={styles.container}>\n      <span className={styles.span}>{data?.text ? data.text : 'Double click to set text'}</span>\n    </div>\n  );\n};\n\nconst TextEdit = (props: CanvasElementProps<TextConfig, TextData>) => {\n  let { data, config } = props;\n  const context = usePanelContext();\n  let panelData: DataFrame[];\n  panelData = context.instanceState?.scene?.data.series;\n\n  const textRef = useRef<string>(config.text?.fixed ?? '');\n\n  // Save text on TextEdit unmount\n  useEffect(() => {\n    return () => {\n      saveText(textRef.current);\n    };\n  });\n\n  const onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      const scene = context.instanceState?.scene;\n      if (scene) {\n        scene.editModeEnabled.next(false);\n      }\n    }\n  };\n\n  const onKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    textRef.current = event.currentTarget.value;\n  };\n\n  const saveText = useCallback(\n    (textValue: string) => {\n      let selectedElement: ElementState;\n      selectedElement = context.instanceState?.selected[0];\n      if (selectedElement) {\n        const options = selectedElement.options;\n        selectedElement.onChange({\n          ...options,\n          config: {\n            ...options.config,\n            text: { ...selectedElement.options.config.text, fixed: textValue },\n          },\n        });\n\n        // Force a re-render (update scene data after config update)\n        const scene = context.instanceState?.scene;\n        if (scene) {\n          scene.updateData(scene.data);\n        }\n      }\n    },\n    [context.instanceState?.scene, context.instanceState?.selected]\n  );\n\n  const styles = useStyles2(getStyles(data));\n  return (\n    <div className={styles.inlineEditorContainer}>\n      {panelData && <Input defaultValue={config.text?.fixed ?? ''} onKeyDown={onKeyDown} onKeyUp={onKeyUp} autoFocus />}\n    </div>\n  );\n};\n\nconst getStyles = (data: TextData | undefined) => (theme: GrafanaTheme2) => ({\n  container: css({\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    display: 'table',\n  }),\n  inlineEditorContainer: css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1),\n  }),\n  span: css({\n    display: 'table-cell',\n    verticalAlign: data?.valign,\n    textAlign: data?.align,\n    fontSize: `${data?.size}px`,\n    color: data?.color,\n  }),\n});\n\nexport const textItem: CanvasElementItem<TextConfig, TextData> = {\n  id: 'text',\n  name: 'Text',\n  description: 'Display text',\n\n  display: TextDisplay,\n\n  hasEditMode: true,\n\n  defaultSize: {\n    width: 100,\n    height: 50,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultThemeTextColor,\n      },\n      size: 16,\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 100,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<TextConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: TextData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Text'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ColorDimensionEditor } from 'app/features/dimensions/editors/ColorDimensionEditor';\nimport { TextDimensionEditor } from 'app/features/dimensions/editors/TextDimensionEditor';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport {\n  CanvasElementItem,\n  CanvasElementProps,\n  CanvasElementOptions,\n  defaultBgColor,\n  defaultTextColor,\n} from '../element';\nimport { Align, CanvasElementConfig, CanvasElementData, VAlign } from '../types';\n\nconst Triangle = (props: CanvasElementProps<CanvasElementConfig, CanvasElementData>) => {\n  const { data } = props;\n  const styles = getStyles(config.theme2, data);\n\n  // uuid needed to avoid id conflicts when multiple elements are rendered\n  const uniqueId = uuidv4();\n\n  return (\n    <div className={styles.container}>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 200 200\"\n        width=\"100%\"\n        height=\"100%\"\n        preserveAspectRatio=\"none\"\n      >\n        <defs>\n          <pattern id={`image-${uniqueId}`} patternUnits=\"userSpaceOnUse\" width=\"200\" height=\"200\">\n            <image xlinkHref={data?.backgroundImage} x=\"-50\" y=\"-50\" width=\"300\" height=\"300\"></image>\n          </pattern>\n          <clipPath id={`triangleClip-${uniqueId}`}>\n            <polygon points=\"100,0 200,200 0,200\" />\n          </clipPath>\n        </defs>\n        {/* Apply background image within the clipping area */}\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          clipPath={`url(#triangleClip-${uniqueId})`}\n          style={{ fill: 'none' }}\n        />\n        <polygon\n          points=\"100,0 200,200 0,200\"\n          className={styles.element}\n          style={{ fill: data?.backgroundImage ? `url(#image-${uniqueId})` : data?.backgroundColor }}\n        />\n      </svg>\n\n      <span className={styles.text}>{data?.text}</span>\n    </div>\n  );\n};\n\nexport const triangleItem: CanvasElementItem = {\n  id: 'triangle',\n  name: 'Triangle',\n  description: 'Triangle',\n\n  display: Triangle,\n\n  defaultSize: {\n    width: 160,\n    height: 138,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: defaultBgColor,\n      },\n    },\n    config: {\n      align: Align.Center,\n      valign: VAlign.Middle,\n      color: {\n        fixed: defaultTextColor,\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 160,\n      height: options?.placement?.height ?? 138,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<CanvasElementConfig>) => {\n    const textConfig = elementOptions.config;\n\n    const data: CanvasElementData = {\n      text: textConfig?.text ? dimensionContext.getText(textConfig.text).value() : '',\n      align: textConfig?.align ?? Align.Center,\n      valign: textConfig?.valign ?? VAlign.Middle,\n      size: textConfig?.size,\n    };\n\n    if (textConfig?.color) {\n      data.color = dimensionContext.getColor(textConfig.color).value();\n    }\n\n    data.links = getDataLinks(dimensionContext, elementOptions, data.text);\n\n    const { background, border } = elementOptions;\n    data.backgroundColor = background?.color ? dimensionContext.getColor(background.color).value() : defaultBgColor;\n    data.borderColor = border?.color ? dimensionContext.getColor(border.color).value() : defaultBgColor;\n    data.borderWidth = border?.width ?? 0;\n\n    data.backgroundImage = background?.image ? dimensionContext.getResource(background.image).value() : undefined;\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Triangle'];\n    builder\n      .addCustomEditor({\n        category,\n        id: 'textSelector',\n        path: 'config.text',\n        name: 'Text',\n        editor: TextDimensionEditor,\n      })\n      .addCustomEditor({\n        category,\n        id: 'config.color',\n        path: 'config.color',\n        name: 'Text color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {},\n      })\n      .addRadio({\n        category,\n        path: 'config.align',\n        name: 'Align text',\n        settings: {\n          options: [\n            { value: Align.Left, label: 'Left' },\n            { value: Align.Center, label: 'Center' },\n            { value: Align.Right, label: 'Right' },\n          ],\n        },\n        defaultValue: Align.Left,\n      })\n      .addRadio({\n        category,\n        path: 'config.valign',\n        name: 'Vertical align',\n        settings: {\n          options: [\n            { value: VAlign.Top, label: 'Top' },\n            { value: VAlign.Middle, label: 'Middle' },\n            { value: VAlign.Bottom, label: 'Bottom' },\n          ],\n        },\n        defaultValue: VAlign.Middle,\n      })\n      .addNumberInput({\n        category,\n        path: 'config.size',\n        name: 'Text size',\n        settings: {\n          placeholder: 'Auto',\n        },\n      });\n  },\n\n  customConnectionAnchors: [\n    // points along the left edge\n    { x: -1, y: -1 }, // bottom left\n    { x: -0.8, y: -0.6 },\n    { x: -0.6, y: -0.2 },\n    { x: -0.4, y: 0.2 },\n    { x: -0.2, y: 0.6 },\n    { x: 0, y: 1 }, // top\n\n    // points along the right edge\n    { x: 0.2, y: 0.6 },\n    { x: 0.4, y: 0.2 },\n    { x: 0.6, y: -0.2 },\n    { x: 0.8, y: -0.6 },\n    { x: 1, y: -1 }, // bottom right\n\n    // points along the bottom edge\n    { x: 0.6, y: -1 },\n    { x: 0.2, y: -1 },\n    { x: -0.2, y: -1 },\n    { x: -0.6, y: -1 },\n  ],\n};\n\nconst getStyles = (theme: GrafanaTheme2, data: CanvasElementData | undefined) => {\n  const textTop = data?.valign === VAlign.Middle ? '50%' : data?.valign === VAlign.Top ? '10%' : '90%';\n  const textLeft = data?.align === Align.Center ? '50%' : data?.align === Align.Left ? '10%' : '90%';\n  const textTransform = `translate(${data?.align === Align.Center ? '-50%' : data?.align === Align.Left ? '10%' : '-90%'}, ${\n    data?.valign === VAlign.Middle ? '-50%' : data?.valign === VAlign.Top ? '10%' : '-90%'\n  })`;\n\n  return {\n    container: css({\n      height: '100%',\n      width: '100%',\n    }),\n    text: css({\n      position: 'absolute',\n      top: textTop,\n      left: textLeft,\n      transform: textTransform,\n      fontSize: `${data?.size}px`,\n      color: data?.color,\n    }),\n    element: css({\n      stroke: data?.borderColor,\n      strokeWidth: data?.borderWidth,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, LinkModel } from '@grafana/data';\nimport { ScalarDimensionConfig } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { ScalarDimensionEditor } from 'app/features/dimensions/editors';\nimport { getDataLinks } from 'app/plugins/panel/canvas/utils';\n\nimport { CanvasElementItem, CanvasElementOptions, CanvasElementProps, defaultBgColor } from '../element';\n\ninterface WindTurbineData {\n  rpm?: number;\n  links?: LinkModel[];\n}\n\ninterface WindTurbineConfig {\n  rpm?: ScalarDimensionConfig;\n}\n\nconst WindTurbineDisplay = ({ data }: CanvasElementProps<WindTurbineConfig, WindTurbineData>) => {\n  const styles = useStyles2(getStyles);\n\n  const windTurbineAnimation = `spin ${data?.rpm ? 60 / Math.abs(data.rpm) : 0}s linear infinite`;\n\n  return (\n    <svg viewBox=\"0 0 189.326 283.989\" preserveAspectRatio=\"xMidYMid meet\" style={{ fill: defaultBgColor }}>\n      <symbol id=\"blade\">\n        <path\n          fill=\"#e6e6e6\"\n          id=\"blade-front\"\n          d=\"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z\"\n        />\n        <path\n          fill=\"#d0d6d7\"\n          id=\"blade-side\"\n          d=\"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z\"\n        />\n      </symbol>\n\n      <g>\n        <g id=\"structure\" transform=\"translate(58.123, 82.664)\" fillRule=\"nonzero\">\n          <polygon id=\"tower\" fill=\"#e6e6e6\" points=\"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176\" />\n          <path\n            id=\"yaw\"\n            fill=\"rgba(0,0,0,0.25)\"\n            d=\"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z\"\n          />\n          <path\n            id=\"base\"\n            fill=\"#d0d6d7\"\n            transform=\"translate(0 42)\"\n            d=\"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z\"\n          />\n          <circle id=\"nacelle\" fill=\"#e6e6e6\" cx=\"36.54\" cy=\"12\" r=\"11.93\" />\n          <circle id=\"gearbox\" fill=\"none\" stroke=\"#d0d6d7\" strokeWidth=\"2.75\" cx=\"36.538\" cy=\"11.999\" r=\"5.8\" />\n        </g>\n        <g className={styles.blade} style={{ animation: windTurbineAnimation }}>\n          <use id=\"blade1\" href=\"#blade\" x=\"83.24\" y=\"0\" />\n          <use id=\"blade2\" href=\"#blade\" x=\"83.24\" y=\"0\" transform=\"rotate(120 94.663 94.663)\" />\n          <use id=\"blade3\" href=\"#blade\" x=\"83.24\" y=\"0\" transform=\"rotate(-120 94.663 94.663)\" />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport const windTurbineItem: CanvasElementItem = {\n  id: 'windTurbine',\n  name: 'Wind Turbine',\n  description: 'Spinny spinny',\n\n  display: WindTurbineDisplay,\n\n  defaultSize: {\n    width: 100,\n    height: 155,\n  },\n\n  getNewOptions: (options) => ({\n    ...options,\n    background: {\n      color: {\n        fixed: 'transparent',\n      },\n    },\n    placement: {\n      width: options?.placement?.width ?? 100,\n      height: options?.placement?.height ?? 155,\n      top: options?.placement?.top,\n      left: options?.placement?.left,\n    },\n  }),\n\n  // Called when data changes\n  prepareData: (dimensionContext: DimensionContext, elementOptions: CanvasElementOptions<WindTurbineConfig>) => {\n    const windTurbineConfig = elementOptions.config;\n\n    const data: WindTurbineData = {\n      rpm: windTurbineConfig?.rpm ? dimensionContext.getScalar(windTurbineConfig.rpm).value() : 0,\n    };\n\n    data.links = getDataLinks(dimensionContext, elementOptions, `${data.rpm}`);\n\n    return data;\n  },\n\n  registerOptionsUI: (builder) => {\n    const category = ['Wind Turbine'];\n    builder.addCustomEditor({\n      category,\n      id: 'rpm',\n      path: 'config.rpm',\n      name: 'RPM',\n      editor: ScalarDimensionEditor,\n    });\n  },\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  blade: css({\n    transformOrigin: '94.663px 94.663px',\n    transform: 'rotate(15deg)',\n    '@keyframes spin': {\n      from: {\n        transform: 'rotate(0deg)',\n      },\n      to: {\n        transform: 'rotate(360deg)',\n      },\n    },\n  }),\n});\n","import { Registry } from '@grafana/data';\n\nimport { CanvasElementItem, CanvasElementOptions } from './element';\nimport { buttonItem } from './elements/button';\nimport { cloudItem } from './elements/cloud';\nimport { droneFrontItem } from './elements/droneFront';\nimport { droneSideItem } from './elements/droneSide';\nimport { droneTopItem } from './elements/droneTop';\nimport { ellipseItem } from './elements/ellipse';\nimport { iconItem } from './elements/icon';\nimport { metricValueItem } from './elements/metricValue';\nimport { parallelogramItem } from './elements/parallelogram';\nimport { rectangleItem } from './elements/rectangle';\nimport { serverItem } from './elements/server/server';\nimport { textItem } from './elements/text';\nimport { triangleItem } from './elements/triangle';\nimport { windTurbineItem } from './elements/windTurbine';\n\nexport const DEFAULT_CANVAS_ELEMENT_CONFIG: CanvasElementOptions = {\n  ...metricValueItem.getNewOptions(),\n  placement: { ...metricValueItem.getNewOptions().placement, ...metricValueItem.defaultSize },\n  type: metricValueItem.id,\n  name: `Element 1`,\n};\n\nexport const defaultElementItems = [\n  metricValueItem, // default for now\n  textItem,\n  ellipseItem,\n  rectangleItem,\n  iconItem,\n  serverItem,\n  triangleItem,\n  cloudItem,\n  parallelogramItem,\n];\n\nexport const advancedElementItems = [buttonItem, windTurbineItem, droneTopItem, droneFrontItem, droneSideItem];\n\nexport const canvasElementRegistry = new Registry<CanvasElementItem>(() => [\n  ...defaultElementItems,\n  ...advancedElementItems,\n]);\n","import { cloneDeep } from 'lodash';\nimport React from 'react';\n\nimport { canvasElementRegistry, CanvasFrameOptions } from 'app/features/canvas';\nimport { notFoundItem } from 'app/features/canvas/elements/notFound';\nimport { DimensionContext } from 'app/features/dimensions';\nimport { LayerActionID } from 'app/plugins/panel/canvas/types';\n\nimport { updateConnectionsForSource } from '../../../plugins/panel/canvas/utils';\nimport { CanvasElementItem } from '../element';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { ElementState } from './element';\nimport { RootElement } from './root';\nimport { Scene } from './scene';\n\nconst DEFAULT_OFFSET = 10;\nconst HORIZONTAL_OFFSET = 50;\n\nexport const frameItemDummy: CanvasElementItem = {\n  id: 'frame',\n  name: 'Frame',\n  description: 'Frame',\n\n  getNewOptions: () => ({\n    config: {},\n  }),\n\n  // eslint-disable-next-line react/display-name\n  display: () => {\n    return <div>FRAME!</div>;\n  },\n};\n\nexport class FrameState extends ElementState {\n  elements: ElementState[] = [];\n  scene: Scene;\n\n  constructor(\n    public options: CanvasFrameOptions,\n    scene: Scene,\n    public parent?: FrameState\n  ) {\n    super(frameItemDummy, options, parent);\n\n    this.scene = scene;\n\n    // mutate options object\n    let { elements } = this.options;\n    if (!elements) {\n      this.options.elements = elements = [];\n    }\n\n    for (const c of elements) {\n      if (c.type === 'frame') {\n        this.elements.push(new FrameState(c as CanvasFrameOptions, scene, this));\n      } else {\n        const item = canvasElementRegistry.getIfExists(c.type) ?? notFoundItem;\n        this.elements.push(new ElementState(item, c, this));\n      }\n    }\n  }\n\n  isRoot(): this is RootElement {\n    return false;\n  }\n\n  updateData(ctx: DimensionContext) {\n    super.updateData(ctx);\n    for (const elem of this.elements) {\n      elem.updateData(ctx);\n    }\n  }\n\n  // used in the layer editor\n  reorder(startIndex: number, endIndex: number) {\n    const result = Array.from(this.elements);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    this.elements = result;\n\n    this.reinitializeMoveable();\n  }\n\n  // used for tree view\n  reorderTree(src: ElementState, dest: ElementState, firstPosition = false) {\n    const result = Array.from(this.elements);\n    const srcIndex = this.elements.indexOf(src);\n    const destIndex = firstPosition ? this.elements.length - 1 : this.elements.indexOf(dest);\n\n    const [removed] = result.splice(srcIndex, 1);\n    result.splice(destIndex, 0, removed);\n    this.elements = result;\n\n    this.reinitializeMoveable();\n  }\n\n  doMove(child: ElementState, action: LayerActionID) {\n    const vals = this.elements.filter((v) => v !== child);\n    if (action === LayerActionID.MoveBottom) {\n      vals.unshift(child);\n    } else {\n      vals.push(child);\n    }\n    this.elements = vals;\n    this.scene.save();\n    this.reinitializeMoveable();\n  }\n\n  reinitializeMoveable() {\n    // Need to first clear current selection and then re-init moveable with slight delay\n    this.scene.clearCurrentSelection();\n    setTimeout(() => this.scene.initMoveable(true, this.scene.isEditingEnabled));\n  }\n\n  // ??? or should this be on the element directly?\n  // are actions scoped to layers?\n  doAction = (action: LayerActionID, element: ElementState, updateName = true, shiftItemsOnDuplicate = true) => {\n    switch (action) {\n      case LayerActionID.Delete:\n        this.elements = this.elements.filter((e) => e !== element);\n        updateConnectionsForSource(element, this.scene);\n        this.scene.byName.delete(element.options.name);\n        this.scene.save();\n        this.reinitializeMoveable();\n        break;\n      case LayerActionID.Duplicate:\n        if (element.item.id === 'frame') {\n          console.log('Can not duplicate frames (yet)', action, element);\n          return;\n        }\n        const opts = cloneDeep(element.options);\n\n        if (shiftItemsOnDuplicate) {\n          const { constraint, placement: oldPlacement } = element.options;\n          const { vertical, horizontal } = constraint ?? {};\n          const placement: Placement = { ...oldPlacement } ?? {};\n\n          switch (vertical) {\n            case VerticalConstraint.Top:\n              if (placement.top == null) {\n                placement.top = 25;\n              } else {\n                placement.top += DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.Bottom:\n              if (placement.bottom == null) {\n                placement.bottom = 100;\n              } else {\n                placement.bottom -= DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.TopBottom:\n              if (placement.top == null) {\n                placement.top = 25;\n              } else {\n                placement.top += DEFAULT_OFFSET;\n              }\n\n              if (placement.bottom == null) {\n                placement.bottom = 100;\n              } else {\n                placement.bottom -= DEFAULT_OFFSET;\n              }\n              break;\n            case VerticalConstraint.Center:\n              if (placement.top != null) {\n                placement.top -= DEFAULT_OFFSET;\n              }\n              break;\n          }\n\n          switch (horizontal) {\n            case HorizontalConstraint.Left:\n              if (placement.left == null) {\n                placement.left = HORIZONTAL_OFFSET;\n              } else {\n                placement.left += DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.Right:\n              if (placement.right == null) {\n                placement.right = HORIZONTAL_OFFSET;\n              } else {\n                placement.right -= DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.LeftRight:\n              if (placement.left == null) {\n                placement.left = HORIZONTAL_OFFSET;\n              } else {\n                placement.left += DEFAULT_OFFSET;\n              }\n\n              if (placement.right == null) {\n                placement.right = HORIZONTAL_OFFSET;\n              } else {\n                placement.right -= DEFAULT_OFFSET;\n              }\n              break;\n            case HorizontalConstraint.Center:\n              if (placement.left != null) {\n                placement.left -= DEFAULT_OFFSET;\n              }\n              break;\n          }\n\n          opts.placement = placement;\n        }\n\n        // Clear connections on duplicate\n        opts.connections = undefined;\n\n        const copy = new ElementState(element.item, opts, this);\n        copy.updateData(this.scene.context);\n        if (updateName) {\n          copy.options.name = this.scene.getNextElementName();\n        }\n        this.elements.push(copy);\n        this.scene.byName.set(copy.options.name, copy);\n\n        // Update scene byName map for original element (to avoid stale references (e.g. for connections))\n        this.scene.byName.set(element.options.name, element);\n\n        this.scene.save();\n        this.reinitializeMoveable();\n\n        setTimeout(() => {\n          this.scene.targetsToSelect.add(copy.div!);\n        });\n        break;\n      case LayerActionID.MoveTop:\n      case LayerActionID.MoveBottom:\n        element.parent?.doMove(element, action);\n        break;\n\n      default:\n        console.log('DO action', action, element);\n        return;\n    }\n  };\n\n  render() {\n    return (\n      <div key={this.UID} ref={this.initElement}>\n        {this.elements.map((v) => v.render())}\n      </div>\n    );\n  }\n\n  /** Recursively visit all nodes */\n  visit(visitor: (v: ElementState) => void) {\n    super.visit(visitor);\n    for (const e of this.elements) {\n      visitor(e);\n    }\n  }\n\n  getSaveModel() {\n    return {\n      ...this.options,\n      elements: this.elements.map((v) => v.getSaveModel()),\n    };\n  }\n}\n","/*\nCopyright (c) 2019 Daybrush\nname: framework-utils\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/framework-utils.git\nversion: 1.1.0\n*/\nfunction prefixNames(prefix) {\n  var classNames = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    classNames[_i - 1] = arguments[_i];\n  }\n\n  return classNames.map(function (className) {\n    return className.split(\" \").map(function (name) {\n      return name ? \"\" + prefix + name : \"\";\n    }).join(\" \");\n  }).join(\" \");\n}\nfunction prefixCSS(prefix, css) {\n  return css.replace(/([^}{]*){/gm, function (_, selector) {\n    return selector.replace(/\\.([^{,\\s\\d.]+)/g, \".\" + prefix + \"$1\") + \"{\";\n  });\n}\n/* react */\n\nfunction ref(target, name) {\n  return function (e) {\n    e && (target[name] = e);\n  };\n}\nfunction refs(target, name, i) {\n  return function (e) {\n    e && (target[name][i] = e);\n  };\n}\n/* Class Decorator */\n\nfunction Properties(properties, action) {\n  return function (component) {\n    var prototype = component.prototype;\n    properties.forEach(function (property) {\n      action(prototype, property);\n    });\n  };\n}\n/* Property Decorator */\n\nfunction withMethods(methods, duplicate) {\n  if (duplicate === void 0) {\n    duplicate = {};\n  }\n\n  return function (prototype, propertyName) {\n    methods.forEach(function (name) {\n      var methodName = duplicate[name] || name;\n\n      if (methodName in prototype) {\n        return;\n      }\n\n      prototype[methodName] = function () {\n        var _a;\n\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var result = (_a = this[propertyName])[name].apply(_a, args);\n\n        if (result === this[propertyName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n\nexport { Properties, prefixCSS, prefixNames, ref, refs, withMethods };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.13.0\n*/\n/**\n* @namespace\n* @name Consts\n*/\n/**\n* get string \"rgb\"\n* @memberof Color\n* @example\nimport {RGB} from \"@daybrush/utils\";\n\nconsole.log(RGB); // \"rgb\"\n*/\nvar RGB = \"rgb\";\n/**\n* get string \"rgba\"\n* @memberof Color\n* @example\nimport {RGBA} from \"@daybrush/utils\";\n\nconsole.log(RGBA); // \"rgba\"\n*/\nvar RGBA = \"rgba\";\n/**\n* get string \"hsl\"\n* @memberof Color\n* @example\nimport {HSL} from \"@daybrush/utils\";\n\nconsole.log(HSL); // \"hsl\"\n*/\nvar HSL = \"hsl\";\n/**\n* get string \"hsla\"\n* @memberof Color\n* @example\nimport {HSLA} from \"@daybrush/utils\";\n\nconsole.log(HSLA); // \"hsla\"\n*/\nvar HSLA = \"hsla\";\n/**\n* gets an array of color models.\n* @memberof Color\n* @example\nimport {COLOR_MODELS} from \"@daybrush/utils\";\n\nconsole.log(COLOR_MODELS); // [\"rgb\", \"rgba\", \"hsl\", \"hsla\"];\n*/\nvar COLOR_MODELS = [RGB, RGBA, HSL, HSLA];\n/**\n* get string \"function\"\n* @memberof Consts\n* @example\nimport {FUNCTION} from \"@daybrush/utils\";\n\nconsole.log(FUNCTION); // \"function\"\n*/\nvar FUNCTION = \"function\";\n/**\n* get string \"property\"\n* @memberof Consts\n* @example\nimport {PROPERTY} from \"@daybrush/utils\";\n\nconsole.log(PROPERTY); // \"property\"\n*/\nvar PROPERTY = \"property\";\n/**\n* get string \"array\"\n* @memberof Consts\n* @example\nimport {ARRAY} from \"@daybrush/utils\";\n\nconsole.log(ARRAY); // \"array\"\n*/\nvar ARRAY = \"array\";\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\nvar STRING = \"string\";\n/**\n* get string \"number\"\n* @memberof Consts\n* @example\nimport {NUMBER} from \"@daybrush/utils\";\n\nconsole.log(NUMBER); // \"number\"\n*/\nvar NUMBER = \"number\";\n/**\n* get string \"undefined\"\n* @memberof Consts\n* @example\nimport {UNDEFINED} from \"@daybrush/utils\";\n\nconsole.log(UNDEFINED); // \"undefined\"\n*/\nvar UNDEFINED = \"undefined\";\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar IS_WINDOW = typeof window !== UNDEFINED;\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @name document\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar doc = typeof document !== UNDEFINED && document; // FIXME: this type maybe false\nvar prefixes = [\"webkit\", \"ms\", \"moz\", \"o\"];\n/**\n * @namespace CrossBrowser\n */\n/**\n* Get a CSS property with a vendor prefix that supports cross browser.\n* @function\n* @param {string} property - A CSS property\n* @return {string} CSS property with cross-browser vendor prefix\n* @memberof CrossBrowser\n* @example\nimport {getCrossBrowserProperty} from \"@daybrush/utils\";\n\nconsole.log(getCrossBrowserProperty(\"transform\")); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\nconsole.log(getCrossBrowserProperty(\"filter\")); // \"filter\", \"-webkit-filter\"\n*/\nvar getCrossBrowserProperty = /*#__PURE__*/function (property) {\n  if (!doc) {\n    return \"\";\n  }\n  var styles = (doc.body || doc.documentElement).style;\n  var length = prefixes.length;\n  if (typeof styles[property] !== UNDEFINED) {\n    return property;\n  }\n  for (var i = 0; i < length; ++i) {\n    var name = \"-\" + prefixes[i] + \"-\" + property;\n    if (typeof styles[name] !== UNDEFINED) {\n      return name;\n    }\n  }\n  return \"\";\n};\n/**\n* get string \"transfrom\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {TRANSFORM} from \"@daybrush/utils\";\n\nconsole.log(TRANSFORM); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\n*/\nvar TRANSFORM = /*#__PURE__*/getCrossBrowserProperty(\"transform\");\n/**\n* get string \"filter\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {FILTER} from \"@daybrush/utils\";\n\nconsole.log(FILTER); // \"filter\", \"-ms-filter\", \"-webkit-filter\"\n*/\nvar FILTER = /*#__PURE__*/getCrossBrowserProperty(\"filter\");\n/**\n* get string \"animation\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {ANIMATION} from \"@daybrush/utils\";\n\nconsole.log(ANIMATION); // \"animation\", \"-ms-animation\", \"-webkit-animation\"\n*/\nvar ANIMATION = /*#__PURE__*/getCrossBrowserProperty(\"animation\");\n/**\n* get string \"keyframes\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {KEYFRAMES} from \"@daybrush/utils\";\n\nconsole.log(KEYFRAMES); // \"keyframes\", \"-ms-keyframes\", \"-webkit-keyframes\"\n*/\nvar KEYFRAMES = /*#__PURE__*/ANIMATION.replace(\"animation\", \"keyframes\");\nvar OPEN_CLOSED_CHARACTERS = [{\n  open: \"(\",\n  close: \")\"\n}, {\n  open: \"\\\"\",\n  close: \"\\\"\"\n}, {\n  open: \"'\",\n  close: \"'\"\n}, {\n  open: \"\\\\\\\"\",\n  close: \"\\\\\\\"\"\n}, {\n  open: \"\\\\'\",\n  close: \"\\\\'\"\n}];\nvar TINY_NUM = 0.0000001;\nvar REVERSE_TINY_NUM = 1 / TINY_NUM;\nvar DEFAULT_UNIT_PRESETS = {\n  \"cm\": function (pos) {\n    return pos * 96 / 2.54;\n  },\n  \"mm\": function (pos) {\n    return pos * 96 / 254;\n  },\n  \"in\": function (pos) {\n    return pos * 96;\n  },\n  \"pt\": function (pos) {\n    return pos * 96 / 72;\n  },\n  \"pc\": function (pos) {\n    return pos * 96 / 6;\n  },\n  \"%\": function (pos, size) {\n    return pos * size / 100;\n  },\n  \"vw\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerWidth;\n    }\n    return pos / 100 * size;\n  },\n  \"vh\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerHeight;\n    }\n    return pos / 100 * size;\n  },\n  \"vmax\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.max(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  },\n  \"vmin\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.min(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  }\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\n\n/**\n* @namespace\n* @name Utils\n*/\n/**\n * Returns the inner product of two numbers(`a1`, `a2`) by two criteria(`b1`, `b2`).\n * @memberof Utils\n * @param - The first number\n * @param - The second number\n * @param - The first number to base on the inner product\n * @param - The second number to base on the inner product\n * @return - Returns the inner product\nimport { dot } from \"@daybrush/utils\";\n\nconsole.log(dot(0, 15, 2, 3)); // 6\nconsole.log(dot(5, 15, 2, 3)); // 9\nconsole.log(dot(5, 15, 1, 1)); // 10\n */\nfunction dot(a1, a2, b1, b2) {\n  return (a1 * b2 + a2 * b1) / (b1 + b2);\n}\n/**\n* Check the type that the value is undefined.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {boolean} true if the type is correct, false otherwise\n* @example\nimport {isUndefined} from \"@daybrush/utils\";\n\nconsole.log(isUndefined(undefined)); // true\nconsole.log(isUndefined(\"\")); // false\nconsole.log(isUndefined(1)); // false\nconsole.log(isUndefined(null)); // false\n*/\nfunction isUndefined(value) {\n  return typeof value === UNDEFINED;\n}\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\nfunction isString(value) {\n  return typeof value === STRING;\n}\nfunction isNumber(value) {\n  return typeof value === NUMBER;\n}\n/**\n* Check the type that the value is function.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isFunction} from \"@daybrush/utils\";\n\nconsole.log(isFunction(function a() {})); // true\nconsole.log(isFunction(() => {})); // true\nconsole.log(isFunction(\"1234\")); // false\nconsole.log(isFunction(1)); // false\nconsole.log(isFunction(null)); // false\n*/\nfunction isFunction(value) {\n  return typeof value === FUNCTION;\n}\nfunction isEqualSeparator(character, separator) {\n  var isCharacterSpace = character === \"\" || character == \" \";\n  var isSeparatorSpace = separator === \"\" || separator == \" \";\n  return isSeparatorSpace && isCharacterSpace || character === separator;\n}\nfunction findOpen(openCharacter, texts, index, length, openCloseCharacters) {\n  var isIgnore = findIgnore(openCharacter, texts, index);\n  if (!isIgnore) {\n    return findClose(openCharacter, texts, index + 1, length, openCloseCharacters);\n  }\n  return index;\n}\nfunction findIgnore(character, texts, index) {\n  if (!character.ignore) {\n    return null;\n  }\n  var otherText = texts.slice(Math.max(index - 3, 0), index + 3).join(\"\");\n  return new RegExp(character.ignore).exec(otherText);\n}\nfunction findClose(closeCharacter, texts, index, length, openCloseCharacters) {\n  var _loop_1 = function (i) {\n    var character = texts[i].trim();\n    if (character === closeCharacter.close && !findIgnore(closeCharacter, texts, i)) {\n      return {\n        value: i\n      };\n    }\n    var nextIndex = i;\n    // re open\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n    }\n    if (nextIndex === -1) {\n      return out_i_1 = i, \"break\";\n    }\n    i = nextIndex;\n    out_i_1 = i;\n  };\n  var out_i_1;\n  for (var i = index; i < length; ++i) {\n    var state_1 = _loop_1(i);\n    i = out_i_1;\n    if (typeof state_1 === \"object\") return state_1.value;\n    if (state_1 === \"break\") break;\n  }\n  return -1;\n}\nfunction splitText(text, splitOptions) {\n  var _a = isString(splitOptions) ? {\n      separator: splitOptions\n    } : splitOptions,\n    _b = _a.separator,\n    separator = _b === void 0 ? \",\" : _b,\n    isSeparateFirst = _a.isSeparateFirst,\n    isSeparateOnlyOpenClose = _a.isSeparateOnlyOpenClose,\n    _c = _a.isSeparateOpenClose,\n    isSeparateOpenClose = _c === void 0 ? isSeparateOnlyOpenClose : _c,\n    _d = _a.openCloseCharacters,\n    openCloseCharacters = _d === void 0 ? OPEN_CLOSED_CHARACTERS : _d;\n  var openClosedText = openCloseCharacters.map(function (_a) {\n    var open = _a.open,\n      close = _a.close;\n    if (open === close) {\n      return open;\n    }\n    return open + \"|\" + close;\n  }).join(\"|\");\n  var regexText = \"(\\\\s*\" + separator + \"\\\\s*|\" + openClosedText + \"|\\\\s+)\";\n  var regex = new RegExp(regexText, \"g\");\n  var texts = text.split(regex).filter(function (chr) {\n    return chr && chr !== \"undefined\";\n  });\n  var length = texts.length;\n  var values = [];\n  var tempValues = [];\n  function resetTemp() {\n    if (tempValues.length) {\n      values.push(tempValues.join(\"\"));\n      tempValues = [];\n      return true;\n    }\n    return false;\n  }\n  var _loop_2 = function (i) {\n    var character = texts[i].trim();\n    var nextIndex = i;\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    var closeCharacter = find(openCloseCharacters, function (_a) {\n      var close = _a.close;\n      return close === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n      if (nextIndex !== -1 && isSeparateOpenClose) {\n        if (resetTemp() && isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        values.push(texts.slice(i, nextIndex + 1).join(\"\"));\n        i = nextIndex;\n        if (isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        return out_i_2 = i, \"continue\";\n      }\n    } else if (closeCharacter && !findIgnore(closeCharacter, texts, i)) {\n      var nextOpenCloseCharacters = __spreadArrays(openCloseCharacters);\n      nextOpenCloseCharacters.splice(openCloseCharacters.indexOf(closeCharacter), 1);\n      return {\n        value: splitText(text, {\n          separator: separator,\n          isSeparateFirst: isSeparateFirst,\n          isSeparateOnlyOpenClose: isSeparateOnlyOpenClose,\n          isSeparateOpenClose: isSeparateOpenClose,\n          openCloseCharacters: nextOpenCloseCharacters\n        })\n      };\n    } else if (isEqualSeparator(character, separator) && !isSeparateOnlyOpenClose) {\n      resetTemp();\n      if (isSeparateFirst) {\n        return out_i_2 = i, \"break\";\n      }\n      return out_i_2 = i, \"continue\";\n    }\n    if (nextIndex === -1) {\n      nextIndex = length - 1;\n    }\n    tempValues.push(texts.slice(i, nextIndex + 1).join(\"\"));\n    i = nextIndex;\n    out_i_2 = i;\n  };\n  var out_i_2;\n  for (var i = 0; i < length; ++i) {\n    var state_2 = _loop_2(i);\n    i = out_i_2;\n    if (typeof state_2 === \"object\") return state_2.value;\n    if (state_2 === \"break\") break;\n  }\n  if (tempValues.length) {\n    values.push(tempValues.join(\"\"));\n  }\n  return values;\n}\n/**\n* divide text by space.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {spliceSpace} from \"@daybrush/utils\";\n\nconsole.log(splitSpace(\"a b c d e f g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitSpace(\"'a,b' c 'd,e' f g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitSpace(text) {\n  // divide comma(space)\n  return splitText(text, \"\");\n}\n/**\n* divide text by comma.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {splitComma} from \"@daybrush/utils\";\n\nconsole.log(splitComma(\"a,b,c,d,e,f,g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitComma(\"'a,b',c,'d,e',f,g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitComma(text) {\n  // divide comma(,)\n  // \"[^\"]*\"|'[^']*'\n  return splitText(text, \",\");\n}\n/**\n* divide text by bracket \"(\", \")\".\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {object} divided texts\n* @example\nimport {splitBracket} from \"@daybrush/utils\";\n\nconsole.log(splitBracket(\"a(1, 2)\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"\"}\nconsole.log(splitBracket(\"a(1, 2)b\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"b\"}\n*/\nfunction splitBracket(text) {\n  var matches = /([^(]*)\\(([\\s\\S]*)\\)([\\s\\S]*)/g.exec(text);\n  if (!matches || matches.length < 4) {\n    return {};\n  } else {\n    return {\n      prefix: matches[1],\n      value: matches[2],\n      suffix: matches[3]\n    };\n  }\n}\n/**\n* divide text by number and unit.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {} divided texts\n* @example\nimport {splitUnit} from \"@daybrush/utils\";\n\nconsole.log(splitUnit(\"10px\"));\n// {prefix: \"\", value: 10, unit: \"px\"}\nconsole.log(splitUnit(\"-10px\"));\n// {prefix: \"\", value: -10, unit: \"px\"}\nconsole.log(splitUnit(\"a10%\"));\n// {prefix: \"a\", value: 10, unit: \"%\"}\n*/\nfunction splitUnit(text) {\n  var matches = /^([^\\d|e|\\-|\\+]*)((?:\\d|\\.|-|e-|e\\+)+)(\\S*)$/g.exec(text);\n  if (!matches) {\n    return {\n      prefix: \"\",\n      unit: \"\",\n      value: NaN\n    };\n  }\n  var prefix = matches[1];\n  var value = matches[2];\n  var unit = matches[3];\n  return {\n    prefix: prefix,\n    unit: unit,\n    value: parseFloat(value)\n  };\n}\n/**\n* transform strings to camel-case\n* @memberof Utils\n* @param {String} text - string\n* @return {String} camel-case string\n* @example\nimport {camelize} from \"@daybrush/utils\";\n\nconsole.log(camelize(\"transform-origin\")); // transformOrigin\nconsole.log(camelize(\"abcd_efg\")); // abcdEfg\nconsole.log(camelize(\"abcd efg\")); // abcdEfg\n*/\nfunction camelize(str) {\n  return str.replace(/[\\s-_]+([^\\s-_])/g, function (all, letter) {\n    return letter.toUpperCase();\n  });\n}\n/**\n* transform a camelized string into a lowercased string.\n* @memberof Utils\n* @param {string} text - a camel-cased string\n* @param {string} [separator=\"-\"] - a separator\n* @return {string}  a lowercased string\n* @example\nimport {decamelize} from \"@daybrush/utils\";\n\nconsole.log(decamelize(\"transformOrigin\")); // transform-origin\nconsole.log(decamelize(\"abcdEfg\", \"_\")); // abcd_efg\n*/\nfunction decamelize(str, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n  return str.replace(/([a-z])([A-Z])/g, function (all, letter, letter2) {\n    return \"\" + letter + separator + letter2.toLowerCase();\n  });\n}\n/**\n* transforms something in an array into an array.\n* @memberof Utils\n* @param - Array form\n* @return an array\n* @example\nimport {toArray} from \"@daybrush/utils\";\n\nconst arr1 = toArray(document.querySelectorAll(\".a\")); // Element[]\nconst arr2 = toArray(document.querySelectorAll<HTMLElement>(\".a\")); // HTMLElement[]\n*/\nfunction toArray(value) {\n  return [].slice.call(value);\n}\n/**\n* Date.now() method\n* @memberof CrossBrowser\n* @return {number} milliseconds\n* @example\nimport {now} from \"@daybrush/utils\";\n\nconsole.log(now()); // 12121324241(milliseconds)\n*/\nfunction now() {\n  return Date.now ? Date.now() : new Date().getTime();\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the reverse direction index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLastIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findLastIndex } from \"@daybrush/utils\";\n\nfindLastIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findLastIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = length - 1; i >= 0; --i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the value of the reverse direction element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLast` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction findLast(arr, callback, defalutValue) {\n  var index = findLastIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* Returns the value of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `find` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction find(arr, callback, defalutValue) {\n  var index = findIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* window.requestAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {FrameRequestCallback} callback - The function to call when it's time to update your animation for the next repaint.\n* @return {number} id\n* @example\nimport {requestAnimationFrame} from \"@daybrush/utils\";\n\nrequestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n*/\nvar requestAnimationFrame = /*#__PURE__*/function () {\n  var firstTime = now();\n  var raf = IS_WINDOW && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);\n  return raf ? raf.bind(window) : function (callback) {\n    var currTime = now();\n    var id = setTimeout(function () {\n      callback(currTime - firstTime);\n    }, 1000 / 60);\n    return id;\n  };\n}();\n/**\n* window.cancelAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {number} handle - the id obtained through requestAnimationFrame method\n* @return {void}\n* @example\nimport { requestAnimationFrame, cancelAnimationFrame } from \"@daybrush/utils\";\n\nconst id = requestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n\ncancelAnimationFrame(id);\n*/\nvar cancelAnimationFrame = /*#__PURE__*/function () {\n  var caf = IS_WINDOW && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);\n  return caf ? caf.bind(window) : function (handle) {\n    clearTimeout(handle);\n  };\n}();\n/**\n* @function\n* @memberof Utils\n*/\nfunction getKeys(obj) {\n  return Object.keys(obj);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getValues(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return obj[key];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getEntries(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return [key, obj[key]];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction sortOrders(keys, orders) {\n  if (orders === void 0) {\n    orders = [];\n  }\n  keys.sort(function (a, b) {\n    var index1 = orders.indexOf(a);\n    var index2 = orders.indexOf(b);\n    if (index2 === -1 && index1 === -1) {\n      return 0;\n    }\n    if (index1 === -1) {\n      return 1;\n    }\n    if (index2 === -1) {\n      return -1;\n    }\n    return index1 - index2;\n  });\n}\n/**\n* convert unit size to px size\n* @function\n* @memberof Utils\n*/\nfunction convertUnitSize(pos, size) {\n  var _a = splitUnit(pos),\n    value = _a.value,\n    unit = _a.unit;\n  if (isObject(size)) {\n    var sizeFunction = size[unit];\n    if (sizeFunction) {\n      if (isFunction(sizeFunction)) {\n        return sizeFunction(value);\n      } else if (DEFAULT_UNIT_PRESETS[unit]) {\n        return DEFAULT_UNIT_PRESETS[unit](value, sizeFunction);\n      }\n    }\n  } else if (unit === \"%\") {\n    return value * size / 100;\n  }\n  if (DEFAULT_UNIT_PRESETS[unit]) {\n    return DEFAULT_UNIT_PRESETS[unit](value);\n  }\n  return value;\n}\n/**\n* calculate between min, max\n* @function\n* @memberof Utils\n*/\nfunction between(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\nfunction checkBoundSize(targetSize, compareSize, isMax, ratio) {\n  if (ratio === void 0) {\n    ratio = targetSize[0] / targetSize[1];\n  }\n  return [[throttle(compareSize[0], TINY_NUM), throttle(compareSize[0] / ratio, TINY_NUM)], [throttle(compareSize[1] * ratio, TINY_NUM), throttle(compareSize[1], TINY_NUM)]].filter(function (size) {\n    return size.every(function (value, i) {\n      var defaultSize = compareSize[i];\n      var throttledSize = throttle(defaultSize, TINY_NUM);\n      return isMax ? value <= defaultSize || value <= throttledSize : value >= defaultSize || value >= throttledSize;\n    });\n  })[0] || targetSize;\n}\n/**\n* calculate bound size\n* @function\n* @memberof Utils\n*/\nfunction calculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return between(value, minSize[i], maxSize[i]);\n    });\n  }\n  var width = size[0],\n    height = size[1];\n  var ratio = keepRatio === true ? width / height : keepRatio;\n  // width : height = minWidth : minHeight;\n  var _a = checkBoundSize(size, minSize, false, ratio),\n    minWidth = _a[0],\n    minHeight = _a[1];\n  var _b = checkBoundSize(size, maxSize, true, ratio),\n    maxWidth = _b[0],\n    maxHeight = _b[1];\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n  return [width, height];\n}\n/**\n* Add all the numbers.\n* @function\n* @memberof Utils\n*/\nfunction sum(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return total;\n}\n/**\n* Average all numbers.\n* @function\n* @memberof Utils\n*/\nfunction average(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return length ? total / length : 0;\n}\n/**\n* Get the angle of two points. (0 <= rad < 359)\n* @function\n* @memberof Utils\n*/\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n/**\n* Get the average point of all points.\n* @function\n* @memberof Utils\n*/\nfunction getCenterPoint(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n/**\n* Gets the direction of the shape.\n* @function\n* @memberof Utils\n*/\nfunction getShapeDirection(points) {\n  var center = getCenterPoint(points);\n  var pos1Rad = getRad(center, points[0]);\n  var pos2Rad = getRad(center, points[1]);\n  return pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n}\n/**\n* Get the distance between two points.\n* @function\n* @memberof Utils\n*/\nfunction getDist(a, b) {\n  return Math.sqrt(Math.pow((b ? b[0] : 0) - a[0], 2) + Math.pow((b ? b[1] : 0) - a[1], 2));\n}\n/**\n* throttle number depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n  var reverseUnit = 1 / unit;\n  return Math.round(num / unit) / reverseUnit;\n}\n/**\n* throttle number array depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction counter(num) {\n  var nums = [];\n  for (var i = 0; i < num; ++i) {\n    nums.push(i);\n  }\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction replaceOnce(text, fromText, toText) {\n  var isOnce = false;\n  return text.replace(fromText, function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (isOnce) {\n      return args[0];\n    }\n    isOnce = true;\n    return isString(toText) ? toText : toText.apply(void 0, args);\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction deepFlat(arr) {\n  return arr.reduce(function (prev, cur) {\n    if (isArray(cur)) {\n      prev.push.apply(prev, deepFlat(cur));\n    } else {\n      prev.push(cur);\n    }\n    return prev;\n  }, []);\n}\n/**\n * @function\n * @memberof Utils\n */\nfunction pushSet(elements, element) {\n  if (elements.indexOf(element) === -1) {\n    elements.push(element);\n  }\n}\n\n/**\n* @namespace\n* @name Color\n*/\n/**\n* Remove the # from the hex color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} hex color\n* @example\nimport {cutHex} from \"@daybrush/utils\";\n\nconsole.log(cutHex(\"#000000\")) // \"000000\"\n*/\nfunction cutHex(hex) {\n  return hex.replace(\"#\", \"\");\n}\n/**\n* convert hex color to rgb color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} rgb color\n* @example\nimport {hexToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hexToRGBA(\"#00000005\"));\n// [0, 0, 0, 1]\nconsole.log(hexToRGBA(\"#201045\"));\n// [32, 16, 69, 1]\n*/\nfunction hexToRGBA(hex) {\n  var h = cutHex(hex);\n  var r = parseInt(h.substring(0, 2), 16);\n  var g = parseInt(h.substring(2, 4), 16);\n  var b = parseInt(h.substring(4, 6), 16);\n  var a = parseInt(h.substring(6, 8), 16) / 255;\n  if (isNaN(a)) {\n    a = 1;\n  }\n  return [r, g, b, a];\n}\n/**\n* convert 3(or 4)-digit hex color to 6(or 8)-digit hex color.\n* @memberof Color\n* @param {} hex - 3(or 4)-digit hex color\n* @return {} 6(or 8)-digit hex color\n* @example\nimport {toFullHex} from \"@daybrush/utils\";\n\nconsole.log(toFullHex(\"#123\")); // \"#112233\"\nconsole.log(toFullHex(\"#123a\")); // \"#112233aa\"\n*/\nfunction toFullHex(h) {\n  var r = h.charAt(1);\n  var g = h.charAt(2);\n  var b = h.charAt(3);\n  var a = h.charAt(4);\n  var arr = [\"#\", r, r, g, g, b, b, a, a];\n  return arr.join(\"\");\n}\n/**\n* convert hsl color to rgba color.\n* @memberof Color\n* @param {} hsl - hsl color(hue: 0 ~ 360, saturation: 0 ~ 1, lightness: 0 ~ 1, alpha: 0 ~ 1)\n* @return {} rgba color\n* @example\nimport {hslToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hslToRGBA([150, 0.5, 0.4]));\n// [51, 153, 102, 1]\n*/\nfunction hslToRGBA(hsl) {\n  var _a;\n  var h = hsl[0];\n  var s = hsl[1];\n  var l = hsl[2];\n  if (h < 0) {\n    h += Math.floor((Math.abs(h) + 360) / 360) * 360;\n  }\n  h %= 360;\n  var c = (1 - Math.abs(2 * l - 1)) * s;\n  var x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  var m = l - c / 2;\n  var rgb;\n  if (h < 60) {\n    rgb = [c, x, 0];\n  } else if (h < 120) {\n    rgb = [x, c, 0];\n  } else if (h < 180) {\n    rgb = [0, c, x];\n  } else if (h < 240) {\n    rgb = [0, x, c];\n  } else if (h < 300) {\n    rgb = [x, 0, c];\n  } else if (h < 360) {\n    rgb = [c, 0, x];\n  } else {\n    rgb = [0, 0, 0];\n  }\n  return [Math.round((rgb[0] + m) * 255), Math.round((rgb[1] + m) * 255), Math.round((rgb[2] + m) * 255), (_a = hsl[3]) !== null && _a !== void 0 ? _a : 1];\n}\n/**\n* convert string to rgba color.\n* @memberof Color\n* @param {} - 3-hex(#000), 4-hex(#0000) 6-hex(#000000), 8-hex(#00000000) or RGB(A), or HSL(A)\n* @return {} rgba color\n* @example\nimport {stringToRGBA} from \"@daybrush/utils\";\n\nconsole.log(stringToRGBA(\"#000000\")); // [0, 0, 0, 1]\nconsole.log(stringToRGBA(\"rgb(100, 100, 100)\")); // [100, 100, 100, 1]\nconsole.log(stringToRGBA(\"hsl(150, 0.5, 0.4)\")); // [51, 153, 102, 1]\n*/\nfunction stringToRGBA(color) {\n  if (color.charAt(0) === \"#\") {\n    if (color.length === 4 || color.length === 5) {\n      return hexToRGBA(toFullHex(color));\n    } else {\n      return hexToRGBA(color);\n    }\n  } else if (color.indexOf(\"(\") !== -1) {\n    // in bracket.\n    var _a = splitBracket(color),\n      prefix = _a.prefix,\n      value = _a.value;\n    if (!prefix || !value) {\n      return undefined;\n    }\n    var arr = splitComma(value);\n    var colorArr = [0, 0, 0, 1];\n    var length = arr.length;\n    switch (prefix) {\n      case RGB:\n      case RGBA:\n        for (var i = 0; i < length; ++i) {\n          colorArr[i] = parseFloat(arr[i]);\n        }\n        return colorArr;\n      case HSL:\n      case HSLA:\n        for (var i = 0; i < length; ++i) {\n          if (arr[i].indexOf(\"%\") !== -1) {\n            colorArr[i] = parseFloat(arr[i]) / 100;\n          } else {\n            colorArr[i] = parseFloat(arr[i]);\n          }\n        }\n        // hsl, hsla to rgba\n        return hslToRGBA(colorArr);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns all element descendants of node that\n * match selectors.\n */\n/**\n * Checks if the specified class value exists in the element's class attribute.\n * @memberof DOM\n * @param - A DOMString containing one or more selectors to match\n * @param - If multi is true, a DOMString containing one or more selectors to match against.\n * @example\nimport {$} from \"@daybrush/utils\";\n\nconsole.log($(\"div\")); // div element\nconsole.log($(\"div\", true)); // [div, div] elements\n*/\nfunction $(selectors, multi) {\n  if (!doc) {\n    return multi ? [] : null;\n  }\n  return multi ? doc.querySelectorAll(selectors) : doc.querySelector(selectors);\n}\n/**\n* Checks if the specified class value exists in the element's class attribute.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to search\n* @return {boolean} return false if the class is not found.\n* @example\nimport {hasClass} from \"@daybrush/utils\";\n\nconsole.log(hasClass(element, \"start\")); // true or false\n*/\nfunction hasClass(element, className) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n}\n/**\n* Add the specified class value. If these classe already exist in the element's class attribute they are ignored.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to add\n* @example\nimport {addClass} from \"@daybrush/utils\";\n\naddClass(element, \"start\");\n*/\nfunction addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    element.className += \" \" + className;\n  }\n}\n/**\n* Removes the specified class value.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to remove\n* @example\nimport {removeClass} from \"@daybrush/utils\";\n\nremoveClass(element, \"start\");\n*/\nfunction removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(reg, \" \");\n  }\n}\n/**\n* Gets the CSS properties from the element.\n* @memberof DOM\n* @param elements - elements\n* @param properites - the CSS properties\n* @return returns CSS properties and values.\n* @example\nimport {fromCSS} from \"@daybrush/utils\";\n\nconsole.log(fromCSS(element, [\"left\", \"opacity\", \"top\"])); // {\"left\": \"10px\", \"opacity\": 1, \"top\": \"10px\"}\n*/\nfunction fromCSS(elements, properties) {\n  if (!elements || !properties || !properties.length) {\n    return {};\n  }\n  var element;\n  if (elements instanceof Element) {\n    element = elements;\n  } else if (elements.length) {\n    element = elements[0];\n  } else {\n    return {};\n  }\n  var cssObject = {};\n  var styles = getWindow(element).getComputedStyle(element);\n  var length = properties.length;\n  for (var i = 0; i < length; ++i) {\n    cssObject[properties[i]] = styles[properties[i]];\n  }\n  return cssObject;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\nfunction getDocument(el) {\n  return (el === null || el === void 0 ? void 0 : el.ownerDocument) || doc;\n}\nfunction getDocumentElement(el) {\n  return getDocument(el).documentElement;\n}\nfunction getDocumentBody(el) {\n  return getDocument(el).body;\n}\nfunction getWindow(el) {\n  var _a;\n  return ((_a = el === null || el === void 0 ? void 0 : el.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || window;\n}\nfunction isWindow(val) {\n  return val && \"postMessage\" in val && \"blur\" in val && \"self\" in val;\n}\nfunction isNode(el) {\n  return isObject(el) && el.nodeName && el.nodeType && \"ownerDocument\" in el;\n}\n\nexport { RGB, RGBA, HSL, HSLA, COLOR_MODELS, FUNCTION, PROPERTY, ARRAY, OBJECT, STRING, NUMBER, UNDEFINED, IS_WINDOW, doc as document, getCrossBrowserProperty, TRANSFORM, FILTER, ANIMATION, KEYFRAMES, OPEN_CLOSED_CHARACTERS, TINY_NUM, REVERSE_TINY_NUM, DEFAULT_UNIT_PRESETS, cutHex, hexToRGBA, toFullHex, hslToRGBA, stringToRGBA, dot, isUndefined, isObject, isArray, isString, isNumber, isFunction, splitText, splitSpace, splitComma, splitBracket, splitUnit, camelize, decamelize, toArray, now, findIndex, findLastIndex, findLast, find, requestAnimationFrame, cancelAnimationFrame, getKeys, getValues, getEntries, sortOrders, convertUnitSize, between, checkBoundSize, calculateBoundSize, sum, average, getRad, getCenterPoint, getShapeDirection, getDist, throttle, throttleArray, counter, replaceOnce, flat, deepFlat, pushSet, $, hasClass, addClass, removeClass, fromCSS, addEvent, removeEvent, getDocument, getDocumentElement, getDocumentBody, getWindow, isWindow, isNode };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/list-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-list-differ\nversion: 1.0.0\n*/\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar PolyMap =\n/*#__PURE__*/\nfunction () {\n  function PolyMap() {\n    this.keys = [];\n    this.values = [];\n  }\n\n  var __proto = PolyMap.prototype;\n\n  __proto.get = function (key) {\n    return this.values[this.keys.indexOf(key)];\n  };\n\n  __proto.set = function (key, value) {\n    var keys = this.keys;\n    var values = this.values;\n    var prevIndex = keys.indexOf(key);\n    var index = prevIndex === -1 ? keys.length : prevIndex;\n    keys[index] = key;\n    values[index] = value;\n  };\n\n  return PolyMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar HashMap =\n/*#__PURE__*/\nfunction () {\n  function HashMap() {\n    this.object = {};\n  }\n\n  var __proto = HashMap.prototype;\n\n  __proto.get = function (key) {\n    return this.object[key];\n  };\n\n  __proto.set = function (key, value) {\n    this.object[key] = value;\n  };\n\n  return HashMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar SUPPORT_MAP = typeof Map === \"function\";\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar Link =\n/*#__PURE__*/\nfunction () {\n  function Link() {}\n\n  var __proto = Link.prototype;\n\n  __proto.connect = function (prevLink, nextLink) {\n    this.prev = prevLink;\n    this.next = nextLink;\n    prevLink && (prevLink.next = this);\n    nextLink && (nextLink.prev = this);\n  };\n\n  __proto.disconnect = function () {\n    // In double linked list, diconnect the interconnected relationship.\n    var prevLink = this.prev;\n    var nextLink = this.next;\n    prevLink && (prevLink.next = nextLink);\n    nextLink && (nextLink.prev = prevLink);\n  };\n\n  __proto.getIndex = function () {\n    var link = this;\n    var index = -1;\n\n    while (link) {\n      link = link.prev;\n      ++index;\n    }\n\n    return index;\n  };\n\n  return Link;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nfunction orderChanged(changed, fixed) {\n  // It is roughly in the order of these examples.\n  // 4, 6, 0, 2, 1, 3, 5, 7\n  var fromLinks = []; // 0, 1, 2, 3, 4, 5, 6, 7\n\n  var toLinks = [];\n  changed.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var link = new Link();\n    fromLinks[from] = link;\n    toLinks[to] = link;\n  }); // `fromLinks` are connected to each other by double linked list.\n\n  fromLinks.forEach(function (link, i) {\n    link.connect(fromLinks[i - 1]);\n  });\n  return changed.filter(function (_, i) {\n    return !fixed[i];\n  }).map(function (_a, i) {\n    var from = _a[0],\n        to = _a[1];\n\n    if (from === to) {\n      return [0, 0];\n    }\n\n    var fromLink = fromLinks[from];\n    var toLink = toLinks[to - 1];\n    var fromIndex = fromLink.getIndex(); // Disconnect the link connected to `fromLink`.\n\n    fromLink.disconnect(); // Connect `fromLink` to the right of `toLink`.\n\n    if (!toLink) {\n      fromLink.connect(undefined, fromLinks[0]);\n    } else {\n      fromLink.connect(toLink, toLink.next);\n    }\n\n    var toIndex = fromLink.getIndex();\n    return [fromIndex, toIndex];\n  });\n}\n\nvar Result =\n/*#__PURE__*/\nfunction () {\n  function Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed) {\n    this.prevList = prevList;\n    this.list = list;\n    this.added = added;\n    this.removed = removed;\n    this.changed = changed;\n    this.maintained = maintained;\n    this.changedBeforeAdded = changedBeforeAdded;\n    this.fixed = fixed;\n  }\n\n  var __proto = Result.prototype;\n  Object.defineProperty(__proto, \"ordered\", {\n    get: function () {\n      if (!this.cacheOrdered) {\n        this.caculateOrdered();\n      }\n\n      return this.cacheOrdered;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(__proto, \"pureChanged\", {\n    get: function () {\n      if (!this.cachePureChanged) {\n        this.caculateOrdered();\n      }\n\n      return this.cachePureChanged;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __proto.caculateOrdered = function () {\n    var ordered = orderChanged(this.changedBeforeAdded, this.fixed);\n    var changed = this.changed;\n    var pureChanged = [];\n    this.cacheOrdered = ordered.filter(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      var _b = changed[i],\n          fromBefore = _b[0],\n          toBefore = _b[1];\n\n      if (from !== to) {\n        pureChanged.push([fromBefore, toBefore]);\n        return true;\n      }\n    });\n    this.cachePureChanged = pureChanged;\n  };\n\n  return Result;\n}();\n\n/**\n *\n * @memberof eg.ListDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/list-differ\";\n * // script => eg.ListDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1], e => e);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list, findKeyCallback) {\n  var mapClass = SUPPORT_MAP ? Map : findKeyCallback ? HashMap : PolyMap;\n\n  var callback = findKeyCallback || function (e) {\n    return e;\n  };\n\n  var added = [];\n  var removed = [];\n  var maintained = [];\n  var prevKeys = prevList.map(callback);\n  var keys = list.map(callback);\n  var prevKeyMap = new mapClass();\n  var keyMap = new mapClass();\n  var changedBeforeAdded = [];\n  var fixed = [];\n  var removedMap = {};\n  var changed = [];\n  var addedCount = 0;\n  var removedCount = 0; // Add prevKeys and keys to the hashmap.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    prevKeyMap.set(key, prevListIndex);\n  });\n  keys.forEach(function (key, listIndex) {\n    keyMap.set(key, listIndex);\n  }); // Compare `prevKeys` and `keys` and add them to `removed` if they are not in `keys`.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    var listIndex = keyMap.get(key); // In prevList, but not in list, it is removed.\n\n    if (typeof listIndex === \"undefined\") {\n      ++removedCount;\n      removed.push(prevListIndex);\n    } else {\n      removedMap[listIndex] = removedCount;\n    }\n  }); // Compare `prevKeys` and `keys` and add them to `added` if they are not in `prevKeys`.\n\n  keys.forEach(function (key, listIndex) {\n    var prevListIndex = prevKeyMap.get(key); // In list, but not in prevList, it is added.\n\n    if (typeof prevListIndex === \"undefined\") {\n      added.push(listIndex);\n      ++addedCount;\n    } else {\n      maintained.push([prevListIndex, listIndex]);\n      removedCount = removedMap[listIndex] || 0;\n      changedBeforeAdded.push([prevListIndex - removedCount, listIndex - addedCount]);\n      fixed.push(listIndex === prevListIndex);\n\n      if (prevListIndex !== listIndex) {\n        changed.push([prevListIndex, listIndex]);\n      }\n    }\n  }); // Sort by ascending order of 'to(list's index).\n\n  removed.reverse();\n  return new Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed);\n}\n\n/**\n * A module that checks diff when values are added, removed, or changed in an array.\n * @ko 배열 또는 오브젝트에서 값이 추가되거나 삭제되거나 순서가 변경사항을 체크하는 모듈입니다.\n * @memberof eg\n */\n\nvar ListDiffer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param - Initializing Data Array. <ko> 초기 설정할 데이터 배열.</ko>\n   * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n   * @example\n   * import ListDiffer from \"@egjs/list-differ\";\n   * // script => eg.ListDiffer\n   * const differ = new ListDiffer([0, 1, 2, 3, 4, 5], e => e);\n   * const result = differ.update([7, 8, 0, 4, 3, 6, 2, 1]);\n   * // List before update\n   * // [1, 2, 3, 4, 5]\n   * console.log(result.prevList);\n   * // Updated list\n   * // [4, 3, 6, 2, 1]\n   * console.log(result.list);\n   * // Index array of values added to `list`.\n   * // [0, 1, 5]\n   * console.log(result.added);\n   * // Index array of values removed in `prevList`.\n   * // [5]\n   * console.log(result.removed);\n   * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.changed);\n   * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n   * // [[4, 3], [3, 4], [2, 6]]\n   * console.log(result.pureChanged);\n   * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n   * // [[4, 1], [4, 2], [4, 3]]\n   * console.log(result.ordered);\n   * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.maintained);\n   */\n  function ListDiffer(list, findKeyCallback) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    this.findKeyCallback = findKeyCallback;\n    this.list = [].slice.call(list);\n  }\n  /**\n   * Update list.\n   * @ko 리스트를 업데이트를 합니다.\n   * @param - List to update <ko> 업데이트할 리스트 </ko>\n   * @return - Returns the results of an update from `prevList` to `list`.<ko> `prevList`에서 `list`로 업데이트한 결과를 반환한다. </ko>\n   */\n\n\n  var __proto = ListDiffer.prototype;\n\n  __proto.update = function (list) {\n    var newData = [].slice.call(list);\n    var result = diff(this.list, newData, this.findKeyCallback);\n    this.list = newData;\n    return result;\n  };\n\n  return ListDiffer;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ListDiffer;\nexport { diff };\n//# sourceMappingURL=list-differ.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: croact\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/croact.git\nversion: 1.0.4\n*/\nimport { isNode, isArray, isUndefined, getValues, find, isString, removeEvent, addEvent, getDocument, getKeys, decamelize, flat as flat$1, isNumber, pushSet, isFunction, getEntries } from '@daybrush/utils';\nimport { diff } from '@egjs/list-differ';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction fillKeys(keys) {\n  var index = 0;\n  return keys.map(function (key) {\n    return key == null ? \"$compat\".concat(++index) : \"\".concat(key);\n  });\n}\nfunction flat(arr) {\n  var arr2 = [];\n  arr.forEach(function (el) {\n    arr2 = arr2.concat(isArray(el) ? flat(el) : el);\n  });\n  return arr2;\n}\nfunction fillProps(props, defaultProps) {\n  if (!defaultProps) {\n    return props;\n  }\n  for (var name_1 in defaultProps) {\n    if (isUndefined(props[name_1])) {\n      props[name_1] = defaultProps[name_1];\n    }\n  }\n  return props;\n}\nfunction isDiff(a, b) {\n  if (a === b) {\n    return false;\n  }\n  for (var i in a) {\n    if (!(i in b)) {\n      return true;\n    }\n  }\n  for (var i in b) {\n    if (a[i] !== b[i]) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getAttributes(props) {\n  var className = props.className,\n    otherProps = __rest(props, [\"className\"]);\n  if (className != null) {\n    otherProps.class = className;\n  }\n  delete otherProps.style;\n  delete otherProps.children;\n  return otherProps;\n}\nfunction splitProps(props) {\n  var attributes = {};\n  var events = {};\n  for (var name_2 in props) {\n    if (name_2.indexOf(\"on\") === 0) {\n      events[name_2] = props[name_2];\n    } else {\n      attributes[name_2] = props[name_2];\n    }\n  }\n  return [attributes, events];\n}\nfunction findContainerNode(provider) {\n  if (!provider) {\n    return null;\n  }\n  var base = provider.b;\n  if (isNode(base)) {\n    return base;\n  }\n  return findContainerNode(provider.c);\n}\nfunction removeNode(node) {\n  var parentNode = node.parentNode;\n  if (parentNode) {\n    parentNode.removeChild(node);\n  }\n}\nfunction executeHooks(hooks) {\n  hooks.forEach(function (hook) {\n    hook();\n  });\n}\nfunction renderFunctionComponent() {\n  return this.constructor(this.props, this.context);\n}\n\nvar hooksIndex = 0;\nvar Provider = /*#__PURE__*/function () {\n  function Provider(\n  /**\n   * Type\n   */\n  t,\n  /**\n   * Depth\n   */\n  d,\n  /**\n   * Key\n   */\n  k,\n  /**\n   * index\n   */\n  i,\n  /**\n   * Container\n   */\n  c,\n  /**\n   * Ref\n   */\n  ref,\n  /**\n   * Props\n   */\n  ps) {\n    if (ps === void 0) {\n      ps = {};\n    }\n    this.t = t;\n    this.d = d;\n    this.k = k;\n    this.i = i;\n    this.c = c;\n    this.ref = ref;\n    this.ps = ps;\n    this.typ = \"prov\";\n    /**\n     * providers\n     */\n    this._ps = [];\n    /**\n     * Contexts\n     */\n    this._cs = {};\n    /**\n     * Whether to hydrate\n     */\n    this._hyd = null;\n    /**\n     * is self render\n     */\n    this._sel = false;\n  }\n  var __proto = Provider.prototype;\n  __proto.s = function () {\n    return true;\n  };\n  /**\n   * Update\n   */\n  __proto.u = function (hooks, contexts, nextElement, nextState, isForceUpdate) {\n    var self = this;\n    var currentDepth = self.d;\n    var scheduledContexts = getValues(contexts).filter(function (context) {\n      return context.$_req;\n    });\n    var scheduledSubs = flat(scheduledContexts.map(function (context) {\n      return context.$_subs;\n    }));\n    var isContextUpdate = find(scheduledSubs, function (provider) {\n      return provider.d === currentDepth;\n    });\n    if (self.b && !isString(nextElement) && !isForceUpdate && !self.s(nextElement.props, nextState) && !isContextUpdate) {\n      var nextChildSubs = scheduledSubs.reduce(function (childs, sub) {\n        var depth = sub.d;\n        if (childs[0]) {\n          if (childs[0].d === depth) {\n            childs.push(sub);\n          }\n        } else if (depth > currentDepth) {\n          childs.push(sub);\n        }\n        return childs;\n      }, []);\n      nextChildSubs.forEach(function (child) {\n        // provider.container!,\n        // [provider],\n        // [provider.original],\n        // hooks,\n        // provider._cs,\n        // { ...self.state, ...self.$_state },\n        // isForceUpdate,\n        renderProviders(child, child._ps, [child.o], hooks, contexts, true);\n      });\n      return false;\n    }\n    self.o = nextElement;\n    self.ss(nextState);\n    // render\n    var prevProps = self.ps;\n    if (!isString(nextElement)) {\n      self.ps = nextElement.props;\n      self.ref = nextElement.ref;\n    }\n    setCurrentInstance(this);\n    self.r(hooks, contexts, self.b ? prevProps : {}, nextState);\n    return true;\n  };\n  __proto.md = function () {\n    this.rr();\n  };\n  __proto.ss = function () {\n    return;\n  };\n  __proto.ud = function () {\n    this.rr();\n  };\n  /**\n   * register refs\n   */\n  __proto.rr = function () {\n    var self = this;\n    var ref = self.ref;\n    var fr = self.fr;\n    ref && ref(fr ? fr.current : self.b);\n  };\n  return Provider;\n}();\nfunction getCurrentInstance() {\n  return Object.__CROACT_CURRENT_INSTNACE__;\n}\nfunction getHooksIndex() {\n  return hooksIndex;\n}\nfunction setHooksInex(nextHooksIndex) {\n  hooksIndex = nextHooksIndex;\n}\nfunction setCurrentInstance(provider) {\n  Object.__CROACT_CURRENT_INSTNACE__ = provider;\n  hooksIndex = 0;\n  return provider;\n}\n\nvar Component = /*#__PURE__*/function () {\n  function Component(props, context) {\n    if (props === void 0) {\n      props = {};\n    }\n    this.props = props;\n    this.context = context;\n    this.state = {};\n    this.$_timer = 0;\n    this.$_state = {};\n    this.$_subs = [];\n    this.$_cs = {};\n  }\n  var __proto = Component.prototype;\n  __proto.render = function () {\n    return null;\n  };\n  __proto.shouldComponentUpdate = function (props, state) {\n    return this.props !== props || this.state !== state;\n  };\n  __proto.setState = function (state, callback, isForceUpdate) {\n    var self = this;\n    if (!self.$_timer) {\n      self.$_state = {};\n    }\n    clearTimeout(self.$_timer);\n    self.$_timer = 0;\n    self.$_state = __assign(__assign({}, self.$_state), state);\n    if (!isForceUpdate) {\n      self.$_timer = window.setTimeout(function () {\n        self.$_timer = 0;\n        self.$_setState(callback, isForceUpdate);\n      });\n    } else {\n      self.$_setState(callback, isForceUpdate);\n    }\n    return;\n  };\n  __proto.forceUpdate = function (callback) {\n    this.setState({}, callback, true);\n  };\n  __proto.componentDidMount = function () {};\n  __proto.componentDidUpdate = function (prevProps, prevState) {};\n  __proto.componentWillUnmount = function () {};\n  __proto.$_setState = function (callback, isForceUpdate) {\n    var hooks = [];\n    var provider = this.$_p;\n    var isUpdate = renderProviders(provider.c, [provider], [provider.o], hooks, provider._cs, __assign(__assign({}, this.state), this.$_state), isForceUpdate);\n    if (isUpdate) {\n      if (callback) {\n        hooks.push(callback);\n      }\n      executeHooks(hooks);\n      setCurrentInstance(null);\n    }\n  };\n  return Component;\n}();\nvar PureComponent = /*#__PURE__*/function (_super) {\n  __extends(PureComponent, _super);\n  function PureComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  var __proto = PureComponent.prototype;\n  __proto.shouldComponentUpdate = function (props, state) {\n    return isDiff(this.props, props) || isDiff(this.state, state);\n  };\n  return PureComponent;\n}(Component);\n\nfunction createRef(defaultValue) {\n  var refCallback = function (e) {\n    refCallback.current = e;\n  };\n  refCallback.current = defaultValue;\n  return refCallback;\n}\nfunction forwardRef(func) {\n  func._fr = true;\n  return func;\n}\n\nfunction createComponent(type, props, contextValue, self) {\n  var _a;\n  var base;\n  if ((_a = type === null || type === void 0 ? void 0 : type.prototype) === null || _a === void 0 ? void 0 : _a.render) {\n    base = new type(props, contextValue);\n  } else {\n    base = new Component(props, contextValue);\n    base.constructor = type;\n    if (type._fr) {\n      self.fr = createRef();\n      base.render = function () {\n        return this.constructor(this.props, self.fr);\n      };\n    } else {\n      base.render = renderFunctionComponent;\n    }\n  }\n  base.$_p = self;\n  return base;\n}\nvar ComponentProvider = /*#__PURE__*/function (_super) {\n  __extends(ComponentProvider, _super);\n  function ComponentProvider(type, depth, key, index, container, ref, props) {\n    if (props === void 0) {\n      props = {};\n    }\n    var _this = _super.call(this, type, depth, key, index, container, ref, fillProps(props, type.defaultProps)) || this;\n    _this.typ = \"comp\";\n    /**\n     * Update shift effects\n     */\n    _this._usefs = [];\n    /**\n     * Update effects\n     */\n    _this._uefs = [];\n    /**\n     * Destroy effects\n     */\n    _this._defs = [];\n    return _this;\n  }\n  var __proto = ComponentProvider.prototype;\n  __proto.s = function (nextProps, nextState) {\n    var base = this.b;\n    return base.shouldComponentUpdate(fillProps(nextProps, this.t.defaultProps), nextState || base.state) !== false;\n  };\n  __proto.r = function (hooks, contexts, prevProps) {\n    var _a, _b;\n    var self = this;\n    var type = self.t;\n    self.ps = fillProps(self.ps, self.t.defaultProps);\n    var props = self.ps;\n    var isMount = !self.b;\n    var contextType = type.contextType;\n    var base = self.b;\n    var contextValue = contextType === null || contextType === void 0 ? void 0 : contextType.get(self);\n    self._cs = contexts;\n    if (isMount) {\n      base = createComponent(type, props, contextValue, self);\n      self.b = base;\n    } else {\n      base.props = props;\n      base.context = contextValue;\n    }\n    var prevState = base.state;\n    self._usefs = [];\n    self._uefs = [];\n    var template = base.render();\n    if (((_b = (_a = template === null || template === void 0 ? void 0 : template.props) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) === 0) {\n      template.props.children = self.ps.children;\n    }\n    var nextContexts = __assign(__assign({}, contexts), base.$_cs);\n    renderProviders(self, self._ps, template ? [template] : [], hooks, nextContexts);\n    if (isMount) {\n      self._uefs.push(function () {\n        contextType === null || contextType === void 0 ? void 0 : contextType.register(self);\n        base.componentDidMount();\n      });\n    } else {\n      self._uefs.push(function () {\n        base.componentDidUpdate(prevProps, prevState);\n      });\n    }\n    hooks.push(function () {\n      self._usefs.forEach(function (ef) {\n        ef();\n      });\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n      self._defs = self._uefs.map(function (ef) {\n        return ef();\n      });\n    });\n  };\n  __proto.ss = function (nextState) {\n    var base = this.b;\n    if (!base || !nextState) {\n      return;\n    }\n    base.state = nextState;\n  };\n  __proto.un = function () {\n    var _a;\n    var self = this;\n    self._ps.forEach(function (provider) {\n      provider.un();\n    });\n    var type = self.t;\n    (_a = type.contextType) === null || _a === void 0 ? void 0 : _a.unregister(self);\n    clearTimeout(self.b.$_timer);\n    self._defs.forEach(function (def) {\n      def && def();\n    });\n    self.b.componentWillUnmount();\n  };\n  return ComponentProvider;\n}(Provider);\n\nfunction diffAttributes(attrs1, attrs2, el) {\n  var _a = diffObject(getAttributes(attrs1), getAttributes(attrs2)),\n    added = _a.added,\n    removed = _a.removed,\n    changed = _a.changed;\n  for (var name_1 in added) {\n    el.setAttribute(name_1, added[name_1]);\n  }\n  for (var name_2 in changed) {\n    el.setAttribute(name_2, changed[name_2][1]);\n  }\n  for (var name_3 in removed) {\n    el.removeAttribute(name_3);\n  }\n}\nfunction diffEvents(events1, events2, provier) {\n  var _a = diffObject(events1, events2),\n    added = _a.added,\n    removed = _a.removed;\n  for (var name_4 in removed) {\n    provier.e(name_4, true);\n  }\n  for (var name_5 in added) {\n    provier.e(name_5);\n  }\n}\nfunction diffObject(a, b) {\n  var keys1 = getKeys(a);\n  var keys2 = getKeys(b);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  var added = {};\n  var removed = {};\n  var changed = {};\n  result.added.forEach(function (index) {\n    var name = keys2[index];\n    added[name] = b[name];\n  });\n  result.removed.forEach(function (index) {\n    var name = keys1[index];\n    removed[name] = a[name];\n  });\n  result.maintained.forEach(function (_a) {\n    var index = _a[0];\n    var name = keys1[index];\n    var values = [a[name], b[name]];\n    if (a[name] !== b[name]) {\n      changed[name] = values;\n    }\n  });\n  return {\n    added: added,\n    removed: removed,\n    changed: changed\n  };\n}\nfunction diffStyle(style1, style2, el) {\n  var style = el.style;\n  var _a = diffObject(style1, style2),\n    added = _a.added,\n    removed = _a.removed,\n    changed = _a.changed;\n  for (var beforeName in added) {\n    var name_6 = decamelize(beforeName, \"-\");\n    style.setProperty(name_6, added[beforeName]);\n  }\n  for (var beforeName in changed) {\n    var name_7 = decamelize(beforeName, \"-\");\n    style.setProperty(name_7, changed[beforeName][1]);\n  }\n  for (var beforeName in removed) {\n    var name_8 = decamelize(beforeName, \"-\");\n    style.removeProperty(name_8);\n  }\n}\nfunction getNativeEventName(name) {\n  return name.replace(/^on/g, \"\").toLowerCase();\n}\nvar ElementProvider = /*#__PURE__*/function (_super) {\n  __extends(ElementProvider, _super);\n  function ElementProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.typ = \"elem\";\n    /**\n     * Events\n     */\n    _this._es = {};\n    /**\n     * is svg\n     */\n    _this._svg = false;\n    return _this;\n  }\n  var __proto = ElementProvider.prototype;\n  __proto.e = function (name, isRemove) {\n    var self = this;\n    var events = self._es;\n    var base = self.b;\n    var eventName = getNativeEventName(name);\n    if (isRemove) {\n      removeEvent(base, eventName, events[name]);\n      delete events[name];\n    } else {\n      events[name] = function (e) {\n        var _a, _b;\n        (_b = (_a = self.ps)[name]) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      };\n      addEvent(base, eventName, events[name]);\n    }\n  };\n  __proto.s = function (nextProps) {\n    return isDiff(this.ps, nextProps);\n  };\n  __proto.r = function (hooks, contextValues, prevProps) {\n    var _a;\n    var self = this;\n    var isMount = !self.b;\n    var nextProps = self.ps;\n    if (isMount) {\n      var containerNode = findContainerNode(self.c);\n      var isSVG = false;\n      if (self._svg || self.t === \"svg\") {\n        isSVG = true;\n      } else {\n        isSVG = containerNode && containerNode.ownerSVGElement;\n      }\n      self._svg = isSVG;\n      var element = (_a = self._hyd) === null || _a === void 0 ? void 0 : _a.splice(0, 1)[0];\n      var type = self.t;\n      if (element) {\n        self._hyd = [].slice.call(element.children || []);\n      } else {\n        var doc = getDocument(containerNode);\n        if (isSVG) {\n          element = doc.createElementNS(\"http://www.w3.org/2000/svg\", type);\n        } else {\n          element = doc.createElement(type);\n        }\n      }\n      self.b = element;\n    }\n    renderProviders(self, self._ps, nextProps.children, hooks, contextValues);\n    var base = self.b;\n    var _b = splitProps(prevProps),\n      prevAttributes = _b[0],\n      prevEvents = _b[1];\n    var _c = splitProps(nextProps),\n      nextAttributes = _c[0],\n      nextEvents = _c[1];\n    diffAttributes(prevAttributes, nextAttributes, base);\n    diffEvents(prevEvents, nextEvents, self);\n    diffStyle(prevProps.style || {}, nextProps.style || {}, base);\n    hooks.push(function () {\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n    });\n    return true;\n  };\n  __proto.un = function () {\n    var self = this;\n    var events = self._es;\n    var base = self.b;\n    for (var name_9 in events) {\n      removeEvent(base, name_9, events[name_9]);\n    }\n    self._ps.forEach(function (provider) {\n      provider.un();\n    });\n    self._es = {};\n    if (!self._sel) {\n      removeNode(base);\n    }\n  };\n  return ElementProvider;\n}(Provider);\n\nfunction findDOMNode(comp) {\n  if (!comp || isNode(comp)) {\n    return comp;\n  }\n  var providers = comp.$_p._ps;\n  if (!providers.length) {\n    return null;\n  }\n  return findDOMNode(providers[0].b);\n}\nfunction findNodeProvider(provider) {\n  if (!provider) {\n    return;\n  }\n  if (provider.b && isNode(provider.b)) {\n    return provider;\n  }\n  var providers = provider._ps;\n  if (!providers.length) {\n    return null;\n  }\n  return findNodeProvider(providers[0]);\n}\nfunction createElement(type, props) {\n  var children = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n  var _a = props || {},\n    key = _a.key,\n    ref = _a.ref,\n    otherProps = __rest(_a, [\"key\", \"ref\"]);\n  return {\n    type: type,\n    key: key,\n    ref: ref,\n    props: __assign(__assign({}, otherProps), {\n      children: flat$1(children).filter(function (child) {\n        return child != null && child !== false;\n      })\n    })\n  };\n}\n\nvar ContainerProvider = /*#__PURE__*/function (_super) {\n  __extends(ContainerProvider, _super);\n  function ContainerProvider(base, depth) {\n    if (depth === void 0) {\n      depth = 0;\n    }\n    var _this = _super.call(this, \"container\", depth, \"container\", 0, null) || this;\n    _this.typ = \"container\";\n    _this.b = base;\n    return _this;\n  }\n  var __proto = ContainerProvider.prototype;\n  __proto.r = function () {\n    return true;\n  };\n  __proto.un = function () {\n    return;\n  };\n  return ContainerProvider;\n}(Provider);\nvar TextProvider = /*#__PURE__*/function (_super) {\n  __extends(TextProvider, _super);\n  function TextProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.typ = \"text\";\n    return _this;\n  }\n  var __proto = TextProvider.prototype;\n  __proto.r = function (hooks) {\n    var _a;\n    var self = this;\n    var isMount = !self.b;\n    if (isMount) {\n      var containerNode = findContainerNode(self.c);\n      var b = (_a = self._hyd) === null || _a === void 0 ? void 0 : _a.splice(0, 1)[0];\n      self.b = b || getDocument(containerNode).createTextNode(self.t.replace(\"text_\", \"\"));\n    }\n    hooks.push(function () {\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n    });\n    return true;\n  };\n  __proto.un = function () {\n    removeNode(this.b);\n  };\n  return TextProvider;\n}(Provider);\nfunction diffProviders(containerProvider, providers, children) {\n  var childrenKeys = children.map(function (p) {\n    return isString(p) ? null : p.key;\n  });\n  var keys1 = fillKeys(providers.map(function (p) {\n    return p.k;\n  }));\n  var keys2 = fillKeys(childrenKeys);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  result.removed.forEach(function (index) {\n    providers.splice(index, 1)[0].un();\n  });\n  result.ordered.forEach(function (_a) {\n    var from = _a[0],\n      to = _a[1];\n    var childrenProvider = providers.splice(from, 1)[0];\n    providers.splice(to, 0, childrenProvider);\n    var el = findDOMNode(childrenProvider.b);\n    var next = findDOMNode(providers[to + 1] && providers[to + 1].b);\n    if (el) {\n      el.parentNode.insertBefore(el, next);\n    }\n  });\n  result.added.forEach(function (index) {\n    providers.splice(index, 0, createProvider(children[index], childrenKeys[index], index, containerProvider));\n  });\n  var changed = result.maintained.filter(function (_a) {\n    _a[0];\n      var to = _a[1];\n    var el = children[to];\n    var childProvider = providers[to];\n    var type = isString(el) ? \"text_\".concat(el) : el.type;\n    if (type !== childProvider.t) {\n      childProvider.un();\n      providers.splice(to, 1, createProvider(el, childrenKeys[to], to, containerProvider));\n      return true;\n    }\n    childProvider.i = to;\n    return false;\n  });\n  return __spreadArray(__spreadArray([], result.added, true), changed.map(function (_a) {\n    _a[0];\n      var to = _a[1];\n    return to;\n  }), true);\n}\n\nfunction getNextSibiling(provider, childProvider) {\n  var childProviders = provider._ps;\n  var length = childProviders.length;\n  for (var i = childProvider.i + 1; i < length; ++i) {\n    var el = findDOMNode(childProviders[i].b);\n    if (el) {\n      return el;\n    }\n  }\n  return null;\n}\nfunction createProvider(el, key, index, containerProvider) {\n  var depth = containerProvider.d + 1;\n  if (isString(el) || isNumber(el)) {\n    return new TextProvider(\"text_\".concat(el), depth, key, index, containerProvider, null, {});\n  }\n  var type = el.type;\n  var providerClass = typeof type === \"string\" ? ElementProvider : ComponentProvider;\n  return new providerClass(type, depth, key, index, containerProvider, el.ref, el.props);\n}\nfunction renderProviders(containerProvider, providers, children, updatedHooks, nextContexts, nextState, isForceUpdate) {\n  var result = diffProviders(containerProvider, providers, children);\n  var hyd = containerProvider._hyd;\n  var updated = providers.filter(function (childProvider, i) {\n    childProvider._hyd = hyd;\n    return childProvider.u(updatedHooks, nextContexts, children[i], nextState, isForceUpdate);\n  });\n  if (containerProvider.typ === \"container\" && containerProvider._sel) {\n    providers.forEach(function (provider) {\n      var nodeProvider = findNodeProvider(provider);\n      if (nodeProvider) {\n        nodeProvider._sel = true;\n      }\n    });\n  }\n  containerProvider._hyd = null;\n  var containerNode = findContainerNode(containerProvider);\n  if (containerNode) {\n    result.reverse().forEach(function (index) {\n      var childProvider = providers[index];\n      var el = findDOMNode(childProvider.b);\n      if (!el) {\n        return;\n      }\n      if (containerNode !== el && !el.parentNode) {\n        var nextElement = getNextSibiling(containerProvider, childProvider);\n        containerNode.insertBefore(el, nextElement);\n      }\n    });\n  }\n  return updated.length > 0;\n}\nfunction renderProvider(element, container, provider, contexts) {\n  if (provider === void 0) {\n    provider = container.__CROACT__;\n  }\n  if (contexts === void 0) {\n    contexts = {};\n  }\n  var isProvider = !!provider;\n  if (!provider) {\n    provider = new ContainerProvider(container);\n  }\n  var hooks = [];\n  renderProviders(provider, provider._ps, element ? [element] : [], hooks, contexts, undefined, undefined);\n  executeHooks(hooks);\n  setCurrentInstance(null);\n  if (!isProvider) {\n    container.__CROACT__ = provider;\n  }\n  return provider;\n}\nfunction render(element, container, callback) {\n  var provider = container.__CROACT__;\n  if (element && !provider) {\n    container.innerHTML = \"\";\n  }\n  renderProvider(element, container, provider);\n  callback && callback();\n}\nfunction renderSelf(element, self, containerProvider) {\n  if (!containerProvider && element) {\n    containerProvider = new ContainerProvider(self.parentElement);\n    containerProvider._hyd = [self];\n    containerProvider._sel = true;\n  }\n  renderProvider(element, self, containerProvider);\n  return containerProvider;\n}\n\nvar i  = 0;\nfunction createContext(defaultValue) {\n  var id = \"c\".concat(++i);\n  function Provider(props) {\n    var self = this;\n    if (!self.$_cs[id]) {\n      self.$_cs[id] = self;\n      var $_subs = [];\n      self.shouldComponentUpdate = function (nextProps) {\n        if (nextProps.value !== self.props.value) {\n          // request\n          self.$_req = true;\n        }\n      };\n      self.render = function () {\n        return self.props.children[0];\n      };\n      self.$_subs = $_subs;\n    }\n    return props.children[0];\n  }\n  function Consumer(props, contextValue) {\n    return props.children(contextValue);\n  }\n  function getContext(provider) {\n    return provider._cs[id];\n  }\n  var context = {\n    $_id: id,\n    $_dv: defaultValue,\n    Consumer: Consumer,\n    Provider: Provider,\n    get: function (provider) {\n      var _a, _b;\n      return (_b = (_a = getContext(provider)) === null || _a === void 0 ? void 0 : _a.props.value) !== null && _b !== void 0 ? _b : defaultValue;\n    },\n    register: function (provider) {\n      var mainComponent = getContext(provider);\n      if (mainComponent) {\n        pushSet(mainComponent.$_subs, provider);\n      }\n    },\n    unregister: function (provider) {\n      var mainComponent = getContext(provider);\n      if (mainComponent) {\n        var subs = mainComponent.$_subs;\n        var index = subs.indexOf(provider);\n        if (index > -1) {\n          subs.splice(index, 1);\n        }\n      }\n    }\n  };\n  Consumer.contextType = context;\n  return context;\n}\n\nvar Portal = /*#__PURE__*/function (_super) {\n  __extends(Portal, _super);\n  function Portal() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  var __proto = Portal.prototype;\n  __proto.componentDidMount = function () {\n    var self = this;\n    var _a = self.props,\n      element = _a.element,\n      container = _a.container;\n    var parentProvider = self.$_p;\n    self._pp = new ContainerProvider(container, parentProvider.d + 1);\n    renderProvider(element, container, self._pp, parentProvider._cs);\n  };\n  __proto.componentDidUpdate = function () {\n    var self = this;\n    var _a = self.props,\n      element = _a.element,\n      container = _a.container;\n    renderProvider(element, container, self._pp, self.$_p._cs);\n  };\n  __proto.componentWillUnmount = function () {\n    var self = this;\n    var container = self.props.container;\n    renderProvider(null, container, self._pp, self.$_p._cs);\n    this._pp = null;\n  };\n  return Portal;\n}(PureComponent);\nfunction createPortal(el, container) {\n  return createElement(Portal, {\n    element: el,\n    container: container\n  });\n}\n\nfunction _renderToString(node, parentContexts, self) {\n  if (node == null) {\n    return \"\";\n  }\n  if (isString(node) || isNumber(node) || isFunction(node)) {\n    return node;\n  }\n  var type = node.type,\n    props = node.props;\n  if (isString(type)) {\n    var stringProps_1 = {};\n    getEntries(props).forEach(function (_a) {\n      var name = _a[0],\n        value = _a[1];\n      if (name === \"style\") {\n        stringProps_1[name] = getEntries(value).map(function (_a) {\n          var styleName = _a[0],\n            styleValue = _a[1];\n          return \"\".concat(decamelize(styleName), \": \").concat(styleValue, \";\");\n        }).join(\"\");\n      } else if (name === \"children\") {\n        return;\n      } else if (!name.match(/^on[^a-z]/g)) {\n        stringProps_1[name] = \"\".concat(value);\n      }\n    });\n    var children = props.children.map(function (child) {\n      return _renderToString(child, parentContexts);\n    }).join(\"\");\n    if (self) {\n      return {\n        tagName: type,\n        props: stringProps_1,\n        children: children\n      };\n    }\n    var strings = __spreadArray([type], getEntries(stringProps_1).map(function (_a) {\n      var name = _a[0],\n        value = _a[1];\n      return \"\".concat(name, \"=\\\"\").concat(value.replace(/\"/g, \"\\\\\\\"\"), \"\\\"\");\n    }), true);\n    return \"<\".concat(strings.join(\" \"), \">\").concat(children, \"</\").concat(type, \">\");\n  } else if (isFunction(type)) {\n    var contextType = type.contextType;\n    var provider = {\n      b: null,\n      _hs: [],\n      _usefs: [],\n      _uefs: [],\n      _defs: [],\n      _cs: parentContexts\n    };\n    setCurrentInstance(provider);\n    var contextValue = contextType === null || contextType === void 0 ? void 0 : contextType.get(provider);\n    var base = createComponent(type, props, contextValue, {});\n    var nextContexts = __assign(__assign({}, parentContexts), base.$_cs);\n    provider.b = base;\n    return _renderToString(base.render(), nextContexts, self);\n  }\n  return \"\";\n}\nfunction renderToString(node) {\n  return _renderToString(node, {});\n}\nfunction renderSelfToString(node) {\n  return _renderToString(node, {}, true);\n}\n\nfunction checkHookInfo(info) {\n  var inst = getCurrentInstance();\n  var hooks = inst._hs || (inst._hs = []);\n  var index = getHooksIndex();\n  var prevHt = hooks[index];\n  setHooksInex(index + 1);\n  if (prevHt) {\n    if (!isDiff(prevHt.deps, info.deps)) {\n      prevHt.updated = false;\n      return prevHt;\n    }\n    hooks[index] = info;\n  } else {\n    hooks.push(info);\n  }\n  info.value = info.func();\n  info.updated = true;\n  return info;\n}\nfunction useMemo(defaultFunction, deps) {\n  var info = checkHookInfo({\n    func: defaultFunction,\n    deps: deps\n  });\n  return info.value;\n}\nfunction useRef(defaultValue) {\n  return useMemo(function () {\n    return createRef(defaultValue);\n  }, []);\n}\nfunction useContext(context) {\n  var inst = getCurrentInstance();\n  var contextId = context.$_id;\n  var contexts = inst._cs;\n  var providerComponent;\n  if (contextId in contexts) {\n    providerComponent = contexts[contextId];\n    providerComponent.props.value;\n  } else {\n    context.$_dv;\n  }\n  useEffect(function () {\n    context.register(inst);\n    return function () {\n      context.unregister(inst);\n    };\n  }, []);\n  return context.get(inst);\n}\nfunction useState(st) {\n  var inst = getCurrentInstance();\n  var index = getHooksIndex();\n  var comp = inst.b;\n  checkHookInfo({\n    func: function () {\n      comp.state[index] = isFunction(st) ? st() : st;\n    },\n    deps: []\n  });\n  return [comp.state[index], function (nextValue) {\n    var _a;\n    return comp.setState((_a = {}, _a[index] = nextValue, _a));\n  }];\n}\nfunction useEffect(effect, deps, unshift) {\n  var inst = getCurrentInstance();\n  var info = checkHookInfo({\n    func: function () {\n      return effect;\n    },\n    deps: deps\n  });\n  var effects = unshift ? inst._usefs : inst._uefs;\n  if (info.updated) {\n    effects.push(function () {\n      info.effect && info.effect();\n      info.effect = effect();\n      return info.effect;\n    });\n  } else {\n    effects.push(function () {\n      return info.effect;\n    });\n  }\n}\nfunction useImperativeHandle(ref, func, deps) {\n  useEffect(function () {\n    ref === null || ref === void 0 ? void 0 : ref(func());\n  }, deps, true);\n}\n\nvar version = \"simple-1.0.0\";\n\nexport { Component, ContainerProvider, PureComponent, createContext, createElement, createPortal, createRef, findDOMNode, findNodeProvider, forwardRef, render, renderSelf, renderSelfToString, renderToString, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState, version };\n//# sourceMappingURL=croact.esm.js.map\n","/*\nCopyright (c) 2015 NAVER Corp.\nname: @egjs/agent\nlicense: MIT\nauthor: NAVER Corp.\nrepository: git+https://github.com/naver/agent.git\nversion: 2.3.0\n*/\nfunction some(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return true;\n    }\n  }\n\n  return false;\n}\nfunction find(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\nfunction getUserAgent(agent) {\n  var userAgent = agent;\n\n  if (typeof userAgent === \"undefined\") {\n    if (typeof navigator === \"undefined\" || !navigator) {\n      return \"\";\n    }\n\n    userAgent = navigator.userAgent || \"\";\n  }\n\n  return userAgent.toLowerCase();\n}\nfunction execRegExp(pattern, text) {\n  try {\n    return new RegExp(pattern, \"g\").exec(text);\n  } catch (e) {\n    return null;\n  }\n}\nfunction hasUserAgentData() {\n  if (typeof navigator === \"undefined\" || !navigator || !navigator.userAgentData) {\n    return false;\n  }\n\n  var userAgentData = navigator.userAgentData;\n  var brands = userAgentData.brands || userAgentData.uaList;\n  return !!(brands && brands.length);\n}\nfunction findVersion(versionTest, userAgent) {\n  var result = execRegExp(\"(\" + versionTest + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))\", userAgent);\n  return result ? result[3] : \"\";\n}\nfunction convertVersion(text) {\n  return text.replace(/_/g, \".\");\n}\nfunction findPreset(presets, userAgent) {\n  var userPreset = null;\n  var version = \"-1\";\n  some(presets, function (preset) {\n    var result = execRegExp(\"(\" + preset.test + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))?\", userAgent);\n\n    if (!result || preset.brand) {\n      return false;\n    }\n\n    userPreset = preset;\n    version = result[3] || \"-1\";\n\n    if (preset.versionAlias) {\n      version = preset.versionAlias;\n    } else if (preset.versionTest) {\n      version = findVersion(preset.versionTest.toLowerCase(), userAgent) || version;\n    }\n\n    version = convertVersion(version);\n    return true;\n  });\n  return {\n    preset: userPreset,\n    version: version\n  };\n}\nfunction findPresetBrand(presets, brands) {\n  var brandInfo = {\n    brand: \"\",\n    version: \"-1\"\n  };\n  some(presets, function (preset) {\n    var result = findBrand(brands, preset);\n\n    if (!result) {\n      return false;\n    }\n\n    brandInfo.brand = preset.id;\n    brandInfo.version = preset.versionAlias || result.version;\n    return brandInfo.version !== \"-1\";\n  });\n  return brandInfo;\n}\nfunction findBrand(brands, preset) {\n  return find(brands, function (_a) {\n    var brand = _a.brand;\n    return execRegExp(\"\" + preset.test, brand.toLowerCase());\n  });\n}\n\nvar BROWSER_PRESETS = [{\n  test: \"phantomjs\",\n  id: \"phantomjs\"\n}, {\n  test: \"whale\",\n  id: \"whale\"\n}, {\n  test: \"edgios|edge|edg\",\n  id: \"edge\"\n}, {\n  test: \"msie|trident|windows phone\",\n  id: \"ie\",\n  versionTest: \"iemobile|msie|rv\"\n}, {\n  test: \"miuibrowser\",\n  id: \"miui browser\"\n}, {\n  test: \"samsungbrowser\",\n  id: \"samsung internet\"\n}, {\n  test: \"samsung\",\n  id: \"samsung internet\",\n  versionTest: \"version\"\n}, {\n  test: \"chrome|crios\",\n  id: \"chrome\"\n}, {\n  test: \"firefox|fxios\",\n  id: \"firefox\"\n}, {\n  test: \"android\",\n  id: \"android browser\",\n  versionTest: \"version\"\n}, {\n  test: \"safari|iphone|ipad|ipod\",\n  id: \"safari\",\n  versionTest: \"version\"\n}]; // chromium's engine(blink) is based on applewebkit 537.36.\n\nvar CHROMIUM_PRESETS = [{\n  test: \"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\\\schrome)\",\n  id: \"chrome\",\n  versionTest: \"chrome\"\n}, {\n  test: \"chromium\",\n  id: \"chrome\"\n}, {\n  test: \"whale\",\n  id: \"chrome\",\n  versionAlias: \"-1\",\n  brand: true\n}];\nvar WEBKIT_PRESETS = [{\n  test: \"applewebkit\",\n  id: \"webkit\",\n  versionTest: \"applewebkit|safari\"\n}];\nvar WEBVIEW_PRESETS = [{\n  test: \"(?=(iphone|ipad))(?!(.*version))\",\n  id: \"webview\"\n}, {\n  test: \"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))\",\n  id: \"webview\"\n}, {\n  // test webview\n  test: \"webview\",\n  id: \"webview\"\n}];\nvar OS_PRESETS = [{\n  test: \"windows phone\",\n  id: \"windows phone\"\n}, {\n  test: \"windows 2000\",\n  id: \"window\",\n  versionAlias: \"5.0\"\n}, {\n  test: \"windows nt\",\n  id: \"window\"\n}, {\n  test: \"iphone|ipad|ipod\",\n  id: \"ios\",\n  versionTest: \"iphone os|cpu os\"\n}, {\n  test: \"mac os x\",\n  id: \"mac\"\n}, {\n  test: \"android\",\n  id: \"android\"\n}, {\n  test: \"tizen\",\n  id: \"tizen\"\n}, {\n  test: \"webos|web0s\",\n  id: \"webos\"\n}];\n\nfunction parseUserAgentData(osData) {\n  var userAgentData = navigator.userAgentData;\n  var brands = (userAgentData.uaList || userAgentData.brands).slice();\n  var isMobile = userAgentData.mobile || false;\n  var firstBrand = brands[0];\n  var browser = {\n    name: firstBrand.brand,\n    version: firstBrand.version,\n    majorVersion: -1,\n    webkit: false,\n    webkitVersion: \"-1\",\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webview: !!findPresetBrand(WEBVIEW_PRESETS, brands).brand\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n  browser.webkit = !browser.chromium && some(WEBKIT_PRESETS, function (preset) {\n    return findBrand(brands, preset);\n  });\n  var chromiumBrand = findPresetBrand(CHROMIUM_PRESETS, brands);\n  browser.chromium = !!chromiumBrand.brand;\n  browser.chromiumVersion = chromiumBrand.version;\n\n  if (!browser.chromium) {\n    var webkitBrand = findPresetBrand(WEBKIT_PRESETS, brands);\n    browser.webkit = !!webkitBrand.brand;\n    browser.webkitVersion = webkitBrand.version;\n  }\n\n  if (osData) {\n    var platform_1 = osData.platform.toLowerCase();\n    var result = find(OS_PRESETS, function (preset) {\n      return new RegExp(\"\" + preset.test, \"g\").exec(platform_1);\n    });\n    os.name = result ? result.id : platform_1;\n    os.version = osData.platformVersion;\n  }\n\n  var browserBrand = findPresetBrand(BROWSER_PRESETS, brands);\n\n  if (browserBrand.brand) {\n    browser.name = browserBrand.brand;\n    browser.version = osData ? osData.uaFullVersion : browserBrand.version;\n  }\n\n  if (navigator.platform === \"Linux armv8l\") {\n    os.name = \"android\";\n  } else if (browser.webkit) {\n    os.name = isMobile ? \"ios\" : \"mac\";\n  }\n\n  if (os.name === \"ios\" && browser.webview) {\n    browser.version = \"-1\";\n  }\n\n  os.version = convertVersion(os.version);\n  browser.version = convertVersion(browser.version);\n  os.majorVersion = parseInt(os.version, 10);\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: true\n  };\n}\n\nfunction parseUserAgent(userAgent) {\n  var nextAgent = getUserAgent(userAgent);\n  var isMobile = !!/mobi/g.exec(nextAgent);\n  var browser = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1,\n    webview: !!findPreset(WEBVIEW_PRESETS, nextAgent).preset,\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webkit: false,\n    webkitVersion: \"-1\"\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n\n  var _a = findPreset(BROWSER_PRESETS, nextAgent),\n      browserPreset = _a.preset,\n      browserVersion = _a.version;\n\n  var _b = findPreset(OS_PRESETS, nextAgent),\n      osPreset = _b.preset,\n      osVersion = _b.version;\n\n  var chromiumPreset = findPreset(CHROMIUM_PRESETS, nextAgent);\n  browser.chromium = !!chromiumPreset.preset;\n  browser.chromiumVersion = chromiumPreset.version;\n\n  if (!browser.chromium) {\n    var webkitPreset = findPreset(WEBKIT_PRESETS, nextAgent);\n    browser.webkit = !!webkitPreset.preset;\n    browser.webkitVersion = webkitPreset.version;\n  }\n\n  if (osPreset) {\n    os.name = osPreset.id;\n    os.version = osVersion;\n    os.majorVersion = parseInt(osVersion, 10);\n  }\n\n  if (browserPreset) {\n    browser.name = browserPreset.id;\n    browser.version = browserVersion;\n\n    if (browser.webview && os.name === \"ios\" && browser.name !== \"safari\") {\n      browser.webview = false;\n    }\n  }\n\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: false\n  };\n}\n\n/**\n * @namespace eg.agent\n */\n\n/**\n* Extracts accuate browser and operating system information from the user agent string or client hints.\n* @ko 유저 에이전트 문자열 또는 client hints에서 정확한 브라우저와 운영체제 정보를 추출한다.\n* @function eg.agent#getAccurateAgent\n* @param - Callback function to get the accuate agent <ko>정확한 에이전트를 가져오기 위한 callback 함수</ko>\n* @return - get the accuate agent promise. If Promise are not supported, null is returned. <ko> 정확한 에이전트 promise를 가져온다. Promise를 지원 하지 않는 경우, null을 반환한다. </ko>\n* @example\nimport { getAccurateAgent } from \"@egjs/agent\";\n// eg.agent.getAccurateAgent()\ngetAccurateAgent().then(agent => {\n   const { os, browser, isMobile } = agent;\n});\ngetAccurateAgent(agent => {\n    const { os, browser, isMobile } = agent;\n});\n*/\n\nfunction getAccurateAgent(callback) {\n  if (hasUserAgentData()) {\n    return navigator.userAgentData.getHighEntropyValues([\"architecture\", \"model\", \"platform\", \"platformVersion\", \"uaFullVersion\"]).then(function (info) {\n      var agentInfo = parseUserAgentData(info);\n      callback && callback(agentInfo);\n      return agentInfo;\n    });\n  }\n\n  callback && callback(agent());\n\n  if (typeof Promise === \"undefined\" || !Promise) {\n    return null;\n  }\n\n  return Promise.resolve(agent());\n}\n/**\n * Extracts browser and operating system information from the user agent string.\n * @ko 유저 에이전트 문자열에서 브라우저와 운영체제 정보를 추출한다.\n * @function eg.agent#agent\n * @param - user agent string to parse <ko>파싱할 유저에이전트 문자열</ko>\n * @return - agent Info <ko> 에이전트 정보 </ko>\n * @example\nimport agent from \"@egjs/agent\";\n// eg.agent();\nconst { os, browser, isMobile } = agent();\n */\n\nfunction agent(userAgent) {\n  if (typeof userAgent === \"undefined\" && hasUserAgentData()) {\n    return parseUserAgentData();\n  } else {\n    return parseUserAgent(userAgent);\n  }\n}\n\nexport default agent;\nexport { getAccurateAgent };\n//# sourceMappingURL=agent.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: @scena/matrix\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/matrix\nversion: 1.1.1\n*/\nimport { throttle, TINY_NUM, average } from '@daybrush/utils';\n\nfunction add(matrix, inverseMatrix, startIndex, fromIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    matrix[x] += matrix[fromX] * k;\n    inverseMatrix[x] += inverseMatrix[fromX] * k;\n  }\n}\n\nfunction swap(matrix, inverseMatrix, startIndex, fromIndex, n) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    var v = matrix[x];\n    var iv = inverseMatrix[x];\n    matrix[x] = matrix[fromX];\n    matrix[fromX] = v;\n    inverseMatrix[x] = inverseMatrix[fromX];\n    inverseMatrix[fromX] = iv;\n  }\n}\n\nfunction divide(matrix, inverseMatrix, startIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    matrix[x] /= k;\n    inverseMatrix[x] /= k;\n  }\n}\n/**\n *\n * @namespace Matrix\n */\n\n/**\n * @memberof Matrix\n */\n\n\nfunction ignoreDimension(matrix, m, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n\n  for (var i = 0; i < n; ++i) {\n    newMatrix[i * n + m - 1] = 0;\n    newMatrix[(m - 1) * n + i] = 0;\n  }\n\n  newMatrix[(m - 1) * (n + 1)] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction invert(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n  var inverseMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n; ++i) {\n    // diagonal\n    var identityIndex = n * i + i;\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // newMatrix[identityIndex] = 0;\n      for (var j = i + 1; j < n; ++j) {\n        if (newMatrix[n * i + j]) {\n          swap(newMatrix, inverseMatrix, i, j, n);\n          break;\n        }\n      }\n    }\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // no inverse matrix\n      return [];\n    }\n\n    divide(newMatrix, inverseMatrix, i, n, newMatrix[identityIndex]);\n\n    for (var j = 0; j < n; ++j) {\n      var targetStartIndex = j;\n      var targetIndex = j + i * n;\n      var target = newMatrix[targetIndex];\n\n      if (!throttle(target, TINY_NUM) || i === j) {\n        continue;\n      }\n\n      add(newMatrix, inverseMatrix, targetStartIndex, i, n, -target);\n    }\n  }\n\n  return inverseMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction transpose(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = [];\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < n; ++j) {\n      newMatrix[j * n + i] = matrix[n * i + j];\n    }\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction getOrigin(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var originMatrix = [];\n  var w = matrix[n * n - 1];\n\n  for (var i = 0; i < n - 1; ++i) {\n    originMatrix[i] = matrix[n * (n - 1) + i] / w;\n  }\n\n  originMatrix[n - 1] = 0;\n  return originMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction fromTranslation(pos, n) {\n  var newMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n - 1; ++i) {\n    newMatrix[n * (n - 1) + i] = pos[i] || 0;\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertPositionMatrix(matrix, n) {\n  var newMatrix = matrix.slice();\n\n  for (var i = matrix.length; i < n - 1; ++i) {\n    newMatrix[i] = 0;\n  }\n\n  newMatrix[n - 1] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertDimension(matrix, n, m) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  } // n < m\n\n\n  if (n === m) {\n    return matrix;\n  }\n\n  var newMatrix = createIdentityMatrix(m);\n  var length = Math.min(n, m);\n\n  for (var i = 0; i < length - 1; ++i) {\n    for (var j = 0; j < length - 1; ++j) {\n      newMatrix[i * m + j] = matrix[i * n + j];\n    }\n\n    newMatrix[(i + 1) * m - 1] = matrix[(i + 1) * n - 1];\n    newMatrix[(m - 1) * m + i] = matrix[(n - 1) * n + i];\n  }\n\n  newMatrix[m * m - 1] = matrix[n * n - 1];\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiplies(n) {\n  var matrixes = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    matrixes[_i - 1] = arguments[_i];\n  }\n\n  var m = createIdentityMatrix(n);\n  matrixes.forEach(function (matrix) {\n    m = multiply(m, matrix, n);\n  });\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiply(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = []; // 1 y: n\n  // 1 x: m\n  // 2 x: m\n  // 2 y: k\n  // n * m X m * k\n\n  var m = matrix.length / n;\n  var k = matrix2.length / m;\n\n  if (!m) {\n    return matrix2;\n  } else if (!k) {\n    return matrix;\n  }\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < k; ++j) {\n      newMatrix[j * n + i] = 0;\n\n      for (var l = 0; l < m; ++l) {\n        // m1 x: m(l), y: n(i)\n        // m2 x: k(j):  y: m(l)\n        // nw x: n(i), y: k(j)\n        newMatrix[j * n + i] += matrix[l * n + i] * matrix2[j * m + l];\n      }\n    }\n  } // n * k\n\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction plus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] + pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction minus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] - pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertCSStoMatrix(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 6;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], 0, a[2], a[3], 0, a[4], a[5], 1];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertMatrixtoCSS(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 9;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], a[3], a[4], a[6], a[7]];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction calculate(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = matrix2.length;\n  }\n\n  var result = multiply(matrix, matrix2, n);\n  var k = result[n - 1];\n  return result.map(function (v) {\n    return v / k;\n  });\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateX3d(matrix, rad) {\n  return multiply(matrix, [1, 0, 0, 0, 0, Math.cos(rad), Math.sin(rad), 0, 0, -Math.sin(rad), Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateY3d(matrix, rad) {\n  return multiply(matrix, [Math.cos(rad), 0, -Math.sin(rad), 0, 0, 1, 0, 0, Math.sin(rad), 0, Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateZ3d(matrix, rad) {\n  return multiply(matrix, createRotateMatrix(rad, 4));\n}\n/**\n * @memberof Matrix\n */\n\nfunction scale3d(matrix, _a) {\n  var _b = _a[0],\n      sx = _b === void 0 ? 1 : _b,\n      _c = _a[1],\n      sy = _c === void 0 ? 1 : _c,\n      _d = _a[2],\n      sz = _d === void 0 ? 1 : _d;\n  return multiply(matrix, [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotate(pos, rad) {\n  return calculate(createRotateMatrix(rad, 3), convertPositionMatrix(pos, 3));\n}\n/**\n * @memberof Matrix\n */\n\nfunction translate3d(matrix, _a) {\n  var _b = _a[0],\n      tx = _b === void 0 ? 0 : _b,\n      _c = _a[1],\n      ty = _c === void 0 ? 0 : _c,\n      _d = _a[2],\n      tz = _d === void 0 ? 0 : _d;\n  return multiply(matrix, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction matrix3d(matrix1, matrix2) {\n  return multiply(matrix1, matrix2, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction createRotateMatrix(rad, n) {\n  var cos = Math.cos(rad);\n  var sin = Math.sin(rad);\n  var m = createIdentityMatrix(n); // cos -sin\n  // sin cos\n\n  m[0] = cos;\n  m[1] = sin;\n  m[n] = -sin;\n  m[n + 1] = cos;\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createIdentityMatrix(n) {\n  var length = n * n;\n  var matrix = [];\n\n  for (var i = 0; i < length; ++i) {\n    matrix[i] = i % (n + 1) ? 0 : 1;\n  }\n\n  return matrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createScaleMatrix(scale, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(scale.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[(n + 1) * i] = scale[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createOriginMatrix(origin, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(origin.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[n * (n - 1) + i] = origin[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createWarpMatrix(pos0, pos1, pos2, pos3, nextPos0, nextPos1, nextPos2, nextPos3) {\n  var x0 = pos0[0],\n      y0 = pos0[1];\n  var x1 = pos1[0],\n      y1 = pos1[1];\n  var x2 = pos2[0],\n      y2 = pos2[1];\n  var x3 = pos3[0],\n      y3 = pos3[1];\n  var u0 = nextPos0[0],\n      v0 = nextPos0[1];\n  var u1 = nextPos1[0],\n      v1 = nextPos1[1];\n  var u2 = nextPos2[0],\n      v2 = nextPos2[1];\n  var u3 = nextPos3[0],\n      v3 = nextPos3[1];\n  var matrix = [x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, -u0 * x0, -v0 * x0, -u1 * x1, -v1 * x1, -u2 * x2, -v2 * x2, -u3 * x3, -v3 * x3, -u0 * y0, -v0 * y0, -u1 * y1, -v1 * y1, -u2 * y2, -v2 * y2, -u3 * y3, -v3 * y3];\n  var inverseMatrix = invert(matrix, 8);\n\n  if (!inverseMatrix.length) {\n    return [];\n  }\n\n  var h = multiply(inverseMatrix, [u0, v0, u1, v1, u2, v2, u3, v3], 8);\n  h[8] = 1;\n  return convertDimension(transpose(h), 3, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction getCenter(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n\nexport { calculate, convertCSStoMatrix, convertDimension, convertMatrixtoCSS, convertPositionMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, createScaleMatrix, createWarpMatrix, fromTranslation, getCenter, getOrigin, ignoreDimension, invert, matrix3d, minus, multiplies, multiply, plus, rotate, rotateX3d, rotateY3d, rotateZ3d, scale3d, translate3d, transpose };\n//# sourceMappingURL=matrix.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-to-mat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-to-mat.git\nversion: 1.1.0\n*/\nimport { isArray, splitSpace, splitBracket, isObject, splitComma, convertUnitSize, splitUnit } from '@daybrush/utils';\nimport { calculate, matrix3d, invert, translate3d, scale3d, rotateZ3d, rotateX3d, rotateY3d } from '@scena/matrix';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createMatrix() {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n}\nfunction parseMat(transform, size) {\n    if (size === void 0) { size = 0; }\n    return toMat(parse(transform, size));\n}\nfunction getElementMatrix(el) {\n    return parseMat(getComputedStyle(el).transform);\n}\nfunction calculateMatrixDist(matrix, pos) {\n    var res = calculate(matrix, [pos[0], pos[1] || 0, pos[2] || 0, 1], 4);\n    var w = res[3] || 1;\n    return [\n        res[0] / w,\n        res[1] / w,\n        res[2] / w,\n    ];\n}\nfunction getDistElementMatrix(el, container) {\n    if (container === void 0) { container = document.body; }\n    var target = el;\n    var matrix = createMatrix();\n    while (target) {\n        var transform = getComputedStyle(target).transform;\n        matrix = matrix3d(parseMat(transform), matrix);\n        if (target === container) {\n            break;\n        }\n        target = target.parentElement;\n    }\n    matrix = invert(matrix, 4);\n    matrix[12] = 0;\n    matrix[13] = 0;\n    matrix[14] = 0;\n    return matrix;\n}\nfunction toMat(matrixInfos) {\n    var target = createMatrix();\n    matrixInfos.forEach(function (info) {\n        var matrixFunction = info.matrixFunction, functionValue = info.functionValue;\n        if (!matrixFunction) {\n            return;\n        }\n        target = matrixFunction(target, functionValue);\n    });\n    return target;\n}\nfunction parse(transform, size) {\n    if (size === void 0) { size = 0; }\n    var transforms = isArray(transform) ? transform : splitSpace(transform);\n    return transforms.map(function (t) {\n        var _a = splitBracket(t), name = _a.prefix, value = _a.value;\n        var matrixFunction = null;\n        var functionName = name;\n        var functionValue = \"\";\n        if (name === \"translate\" || name === \"translateX\" || name === \"translate3d\") {\n            var nextSize_1 = isObject(size) ? __assign(__assign({}, size), { \"o%\": size[\"%\"] }) : {\n                \"%\": size,\n                \"o%\": size,\n            };\n            var _b = splitComma(value).map(function (v, i) {\n                if (i === 0 && \"x%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"x%\"];\n                }\n                else if (i === 1 && \"y%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"y%\"];\n                }\n                else {\n                    nextSize_1[\"%\"] = size[\"o%\"];\n                }\n                return convertUnitSize(v, nextSize_1);\n            }), posX = _b[0], _c = _b[1], posY = _c === void 0 ? 0 : _c, _d = _b[2], posZ = _d === void 0 ? 0 : _d;\n            matrixFunction = translate3d;\n            functionValue = [posX, posY, posZ];\n        }\n        else if (name === \"translateY\") {\n            var nextSize = isObject(size) ? __assign({ \"%\": size[\"y%\"] }, size) : {\n                \"%\": size,\n            };\n            var posY = convertUnitSize(value, nextSize);\n            matrixFunction = translate3d;\n            functionValue = [0, posY, 0];\n        }\n        else if (name === \"translateZ\") {\n            var posZ = parseFloat(value);\n            matrixFunction = translate3d;\n            functionValue = [0, 0, posZ];\n        }\n        else if (name === \"scale\" || name === \"scale3d\") {\n            var _e = splitComma(value).map(function (v) { return parseFloat(v); }), sx = _e[0], _f = _e[1], sy = _f === void 0 ? sx : _f, _g = _e[2], sz = _g === void 0 ? 1 : _g;\n            matrixFunction = scale3d;\n            functionValue = [sx, sy, sz];\n        }\n        else if (name === \"scaleX\") {\n            var sx = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [sx, 1, 1];\n        }\n        else if (name === \"scaleY\") {\n            var sy = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, sy, 1];\n        }\n        else if (name === \"scaleZ\") {\n            var sz = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, 1, sz];\n        }\n        else if (name === \"rotate\" || name === \"rotateZ\" || name === \"rotateX\" || name === \"rotateY\") {\n            var _h = splitUnit(value), unit = _h.unit, unitValue = _h.value;\n            var rad = unit === \"rad\" ? unitValue : unitValue * Math.PI / 180;\n            if (name === \"rotate\" || name === \"rotateZ\") {\n                functionName = \"rotateZ\";\n                matrixFunction = rotateZ3d;\n            }\n            else if (name === \"rotateX\") {\n                matrixFunction = rotateX3d;\n            }\n            else if (name === \"rotateY\") {\n                matrixFunction = rotateY3d;\n            }\n            functionValue = rad;\n        }\n        else if (name === \"matrix3d\") {\n            matrixFunction = matrix3d;\n            functionValue = splitComma(value).map(function (v) { return parseFloat(v); });\n        }\n        else if (name === \"matrix\") {\n            var m = splitComma(value).map(function (v) { return parseFloat(v); });\n            matrixFunction = matrix3d;\n            functionValue = [\n                m[0], m[1], 0, 0,\n                m[2], m[3], 0, 0,\n                0, 0, 1, 0,\n                m[4], m[5], 0, 1,\n            ];\n        }\n        else {\n            functionName = \"\";\n        }\n        return {\n            name: name,\n            functionName: functionName,\n            value: value,\n            matrixFunction: matrixFunction,\n            functionValue: functionValue,\n        };\n    });\n}\n\nexport { calculateMatrixDist, createMatrix, getDistElementMatrix, getElementMatrix, parse, parseMat, toMat };\n//# sourceMappingURL=css-to-mat.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/children-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-children-differ\nversion: 1.0.1\n*/\nimport ListDiffer, { diff as diff$1 } from '@egjs/list-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar findKeyCallback = typeof Map === \"function\" ? undefined : function () {\n  var childrenCount = 0;\n  return function (el) {\n    return el.__DIFF_KEY__ || (el.__DIFF_KEY__ = ++childrenCount);\n  };\n}();\n\n/**\n * A module that checks diff when child are added, removed, or changed .\n * @ko 자식 노드들에서 자식 노드가 추가되거나 삭제되거나 순서가 변경된 사항을 체크하는 모듈입니다.\n * @memberof eg\n * @extends eg.ListDiffer\n */\n\nvar ChildrenDiffer =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ChildrenDiffer, _super);\n  /**\n   * @param - Initializing Children <ko> 초기 설정할 자식 노드들</ko>\n   */\n\n\n  function ChildrenDiffer(list) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    return _super.call(this, list, findKeyCallback) || this;\n  }\n\n  return ChildrenDiffer;\n}(ListDiffer);\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n/**\n *\n * @memberof eg.ChildrenDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/children-differ\";\n * // script => eg.ChildrenDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1]);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list) {\n  return diff$1(prevList, list, findKeyCallback);\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ChildrenDiffer;\nexport { diff };\n//# sourceMappingURL=children-differ.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\nimport { isObject, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nexport default EventEmitter;\n//# sourceMappingURL=event-emitter.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/dragscroll\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/dragscroll.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { now, isString, isFunction } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction getDefaultScrollPosition(e) {\n  var container = e.container;\n  if (container === document.body) {\n    return [container.scrollLeft || document.documentElement.scrollLeft, container.scrollTop || document.documentElement.scrollTop];\n  }\n  return [container.scrollLeft, container.scrollTop];\n}\nfunction checkDefaultScrollEvent(container, callback) {\n  container.addEventListener(\"scroll\", callback);\n  return function () {\n    container.removeEventListener(\"scroll\", callback);\n  };\n}\nfunction getContainerElement(container) {\n  if (!container) {\n    return null;\n  } else if (isString(container)) {\n    return document.querySelector(container);\n  }\n  if (isFunction(container)) {\n    return container();\n  } else if (container instanceof Element) {\n    return container;\n  } else if (\"current\" in container) {\n    return container.current;\n  } else if (\"value\" in container) {\n    return container.value;\n  }\n}\n/**\n * @sort 1\n */\nvar DragScroll = /*#__PURE__*/function (_super) {\n  __extends(DragScroll, _super);\n  function DragScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._startRect = null;\n    _this._startPos = [];\n    _this._prevTime = 0;\n    _this._timer = 0;\n    _this._prevScrollPos = [0, 0];\n    _this._isWait = false;\n    _this._flag = false;\n    _this._currentOptions = null;\n    _this._lock = false;\n    _this._unregister = null;\n    _this._onScroll = function () {\n      var options = _this._currentOptions;\n      if (_this._lock || !options) {\n        return;\n      }\n      _this.emit(\"scrollDrag\", {\n        next: function (inputEvent) {\n          _this.checkScroll({\n            container: options.container,\n            inputEvent: inputEvent\n          });\n        }\n      });\n    };\n    return _this;\n  }\n  /**\n   */\n  var __proto = DragScroll.prototype;\n  __proto.dragStart = function (e, options) {\n    var container = getContainerElement(options.container);\n    if (!container) {\n      this._flag = false;\n      return;\n    }\n    var top = 0;\n    var left = 0;\n    var width = 0;\n    var height = 0;\n    if (container === document.body) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    } else {\n      var rect = container.getBoundingClientRect();\n      top = rect.top;\n      left = rect.left;\n      width = rect.width;\n      height = rect.height;\n    }\n    this._flag = true;\n    this._startPos = [e.clientX, e.clientY];\n    this._startRect = {\n      top: top,\n      left: left,\n      width: width,\n      height: height\n    };\n    this._prevScrollPos = this._getScrollPosition([0, 0], options);\n    this._currentOptions = options;\n    this._registerScrollEvent(options);\n  };\n  __proto.drag = function (e, options) {\n    clearTimeout(this._timer);\n    if (!this._flag) {\n      return;\n    }\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var _a = options.threshold,\n      threshold = _a === void 0 ? 0 : _a;\n    var _b = this,\n      _startRect = _b._startRect,\n      _startPos = _b._startPos;\n    this._currentOptions = options;\n    var direction = [0, 0];\n    if (_startRect.top > clientY - threshold) {\n      if (_startPos[1] > _startRect.top || clientY < _startPos[1]) {\n        direction[1] = -1;\n      }\n    } else if (_startRect.top + _startRect.height < clientY + threshold) {\n      if (_startPos[1] < _startRect.top + _startRect.height || clientY > _startPos[1]) {\n        direction[1] = 1;\n      }\n    }\n    if (_startRect.left > clientX - threshold) {\n      if (_startPos[0] > _startRect.left || clientX < _startPos[0]) {\n        direction[0] = -1;\n      }\n    } else if (_startRect.left + _startRect.width < clientX + threshold) {\n      if (_startPos[0] < _startRect.left + _startRect.width || clientX > _startPos[0]) {\n        direction[0] = 1;\n      }\n    }\n    if (!direction[0] && !direction[1]) {\n      return false;\n    }\n    return this._continueDrag(__assign(__assign({}, options), {\n      direction: direction,\n      inputEvent: e,\n      isDrag: true\n    }));\n  };\n  /**\n   */\n  __proto.checkScroll = function (options) {\n    var _this = this;\n    if (this._isWait) {\n      return false;\n    }\n    var _a = options.prevScrollPos,\n      prevScrollPos = _a === void 0 ? this._prevScrollPos : _a,\n      direction = options.direction,\n      _b = options.throttleTime,\n      throttleTime = _b === void 0 ? 0 : _b,\n      inputEvent = options.inputEvent,\n      isDrag = options.isDrag;\n    var nextScrollPos = this._getScrollPosition(direction || [0, 0], options);\n    var offsetX = nextScrollPos[0] - prevScrollPos[0];\n    var offsetY = nextScrollPos[1] - prevScrollPos[1];\n    var nextDirection = direction || [offsetX ? Math.abs(offsetX) / offsetX : 0, offsetY ? Math.abs(offsetY) / offsetY : 0];\n    this._prevScrollPos = nextScrollPos;\n    this._lock = false;\n    if (!offsetX && !offsetY) {\n      return false;\n    }\n    /**\n     * @event DragScroll#move\n     */\n    this.emit(\"move\", {\n      offsetX: nextDirection[0] ? offsetX : 0,\n      offsetY: nextDirection[1] ? offsetY : 0,\n      inputEvent: inputEvent\n    });\n    if (throttleTime && isDrag) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, throttleTime);\n    }\n    return true;\n  };\n  /**\n   *\n   */\n  __proto.dragEnd = function () {\n    this._flag = false;\n    this._lock = false;\n    clearTimeout(this._timer);\n    this._unregisterScrollEvent();\n  };\n  __proto._getScrollPosition = function (direction, options) {\n    var container = options.container,\n      _a = options.getScrollPosition,\n      getScrollPosition = _a === void 0 ? getDefaultScrollPosition : _a;\n    return getScrollPosition({\n      container: getContainerElement(container),\n      direction: direction\n    });\n  };\n  __proto._continueDrag = function (options) {\n    var _this = this;\n    var _a;\n    var container = options.container,\n      direction = options.direction,\n      throttleTime = options.throttleTime,\n      useScroll = options.useScroll,\n      isDrag = options.isDrag,\n      inputEvent = options.inputEvent;\n    if (!this._flag || isDrag && this._isWait) {\n      return;\n    }\n    var nowTime = now();\n    var distTime = Math.max(throttleTime + this._prevTime - nowTime, 0);\n    if (distTime > 0) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, distTime);\n      return false;\n    }\n    this._prevTime = nowTime;\n    var prevScrollPos = this._getScrollPosition(direction, options);\n    this._prevScrollPos = prevScrollPos;\n    if (isDrag) {\n      this._isWait = true;\n    }\n    // unregister native scroll event\n    if (!useScroll) {\n      this._lock = true;\n    }\n    var param = {\n      container: getContainerElement(container),\n      direction: direction,\n      inputEvent: inputEvent\n    };\n    (_a = options.requestScroll) === null || _a === void 0 ? void 0 : _a.call(options, param);\n    /**\n     * @event DragScroll#scroll\n     */\n    this.emit(\"scroll\", param);\n    this._isWait = false;\n    return useScroll || this.checkScroll(__assign(__assign({}, options), {\n      prevScrollPos: prevScrollPos,\n      direction: direction,\n      inputEvent: inputEvent\n    }));\n  };\n  __proto._registerScrollEvent = function (options) {\n    this._unregisterScrollEvent();\n    var checkScrollEvent = options.checkScrollEvent;\n    if (!checkScrollEvent) {\n      return;\n    }\n    var callback = checkScrollEvent === true ? checkDefaultScrollEvent : checkScrollEvent;\n    var container = getContainerElement(options.container);\n    if (checkScrollEvent === true && (container === document.body || container === document.documentElement)) {\n      this._unregister = checkDefaultScrollEvent(window, this._onScroll);\n    } else {\n      this._unregister = callback(container, this._onScroll);\n    }\n  };\n  __proto._unregisterScrollEvent = function () {\n    var _a;\n    (_a = this._unregister) === null || _a === void 0 ? void 0 : _a.call(this);\n    this._unregister = null;\n  };\n  return DragScroll;\n}(EventEmitter);\n\nexport default DragScroll;\n//# sourceMappingURL=dragscroll.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: overlap-area\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/overlap-area.git\nversion: 1.1.0\n*/\nimport { throttle, TINY_NUM, sum, find, getDist, getShapeDirection, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction tinyThrottle(num) {\n  return throttle(num, TINY_NUM);\n}\nfunction isSameConstants(linearConstants1, linearConstants2) {\n  return linearConstants1.every(function (v, i) {\n    return tinyThrottle(v - linearConstants2[i]) === 0;\n  });\n}\nfunction isSamePoint(point1, point2) {\n  return !tinyThrottle(point1[0] - point2[0]) && !tinyThrottle(point1[1] - point2[1]);\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, current) {\n    prev.push.apply(prev, current);\n    return prev;\n  }, []);\n}\n\n/**\n * @namespace OverlapArea\n */\n\n/**\n * Gets the size of a shape (polygon) made of points.\n * @memberof OverlapArea\n */\n\nfunction getAreaSize(points) {\n  if (points.length < 3) {\n    return 0;\n  }\n\n  return Math.abs(sum(points.map(function (point, i) {\n    var nextPoint = points[i + 1] || points[0];\n    return point[0] * nextPoint[1] - nextPoint[0] * point[1];\n  }))) / 2;\n}\n/**\n * Get points that fit the rect,\n * @memberof OverlapArea\n */\n\nfunction fitPoints(points, rect) {\n  var width = rect.width,\n      height = rect.height,\n      left = rect.left,\n      top = rect.top;\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY;\n\n  var ratioX = width / (maxX - minX);\n  var ratioY = height / (maxY - minY);\n  return points.map(function (point) {\n    return [left + (point[0] - minX) * ratioX, top + (point[1] - minY) * ratioY];\n  });\n}\n/**\n * Get the minimum and maximum points of the points.\n * @memberof OverlapArea\n */\n\nfunction getMinMaxs(points) {\n  var xs = points.map(function (point) {\n    return point[0];\n  });\n  var ys = points.map(function (point) {\n    return point[1];\n  });\n  return {\n    minX: Math.min.apply(Math, xs),\n    minY: Math.min.apply(Math, ys),\n    maxX: Math.max.apply(Math, xs),\n    maxY: Math.max.apply(Math, ys)\n  };\n}\n/**\n * Whether the point is in shape\n * @param - point pos\n * @param - shape points\n * @param - whether to check except line\n * @memberof OverlapArea\n */\n\nfunction isInside(pos, points, excludeLine) {\n  var x = pos[0],\n      y = pos[1];\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      maxX = _a.maxX;\n\n  var xLine = [[minX, y], [maxX, y]];\n  var xLinearConstants = getLinearConstants(xLine[0], xLine[1]);\n  var lines = convertLines(points);\n  var intersectionPosInfos = [];\n  lines.forEach(function (line) {\n    var linearConstants = getLinearConstants(line[0], line[1]);\n    var standardPoint = line[0];\n\n    if (isSameConstants(xLinearConstants, linearConstants)) {\n      intersectionPosInfos.push({\n        pos: pos,\n        line: line,\n        type: \"line\"\n      });\n    } else {\n      var xPoints = getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants, linearConstants), [xLine, line]);\n      xPoints.forEach(function (point) {\n        if (line.some(function (linePoint) {\n          return isSamePoint(linePoint, point);\n        })) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"point\"\n          });\n        } else if (tinyThrottle(standardPoint[1] - y) !== 0) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"intersection\"\n          });\n        }\n      });\n    }\n  });\n\n  if (!excludeLine) {\n    // on line\n    if (find(intersectionPosInfos, function (p) {\n      return p[0] === x;\n    })) {\n      return true;\n    }\n  }\n\n  var intersectionCount = 0;\n  var xMap = {};\n  intersectionPosInfos.forEach(function (_a) {\n    var pos = _a.pos,\n        type = _a.type,\n        line = _a.line;\n\n    if (pos[0] > x) {\n      return;\n    }\n\n    if (type === \"intersection\") {\n      ++intersectionCount;\n    } else if (type === \"line\") {\n      return;\n    } else if (type === \"point\") {\n      var point = find(line, function (linePoint) {\n        return linePoint[1] !== y;\n      });\n      var prevValue = xMap[pos[0]];\n      var nextValue = point[1] > y ? 1 : -1;\n\n      if (!prevValue) {\n        xMap[pos[0]] = nextValue;\n      } else if (prevValue !== nextValue) {\n        ++intersectionCount;\n      }\n    }\n  });\n  return intersectionCount % 2 === 1;\n}\n/**\n * Get distance from point to constants. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getDistanceFromPointToConstants(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / (a * a + b * b);\n}\n/**\n * Get the coefficient of the linear function. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getLinearConstants(point1, point2) {\n  var x1 = point1[0],\n      y1 = point1[1];\n  var x2 = point2[0],\n      y2 = point2[1]; // ax + by + c = 0\n  // [a, b, c]\n\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    if (dy) {\n      // -x + 1 = 0\n      a = -1;\n      c = x1;\n    }\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -y1;\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = -a * x1 - y1;\n  }\n\n  return [a, b, c];\n}\n/**\n * Get intersection points with linear functions.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPointsByConstants(linearConstants1, linearConstants2) {\n  var a1 = linearConstants1[0],\n      b1 = linearConstants1[1],\n      c1 = linearConstants1[2];\n  var a2 = linearConstants2[0],\n      b2 = linearConstants2[1],\n      c2 = linearConstants2[2];\n  var isZeroA = a1 === 0 && a2 === 0;\n  var isZeroB = b1 === 0 && b2 === 0;\n  var results = [];\n\n  if (isZeroA && isZeroB) {\n    return [];\n  } else if (isZeroA) {\n    // b1 * y + c1 = 0\n    // b2 * y + c2 = 0\n    var y1 = -c1 / b1;\n    var y2 = -c2 / b2;\n\n    if (y1 !== y2) {\n      return [];\n    } else {\n      return [[-Infinity, y1], [Infinity, y1]];\n    }\n  } else if (isZeroB) {\n    // a1 * x + c1 = 0\n    // a2 * x + c2 = 0\n    var x1 = -c1 / a1;\n    var x2 = -c2 / a2;\n\n    if (x1 !== x2) {\n      return [];\n    } else {\n      return [[x1, -Infinity], [x1, Infinity]];\n    }\n  } else if (a1 === 0) {\n    // b1 * y + c1 = 0\n    // y = - c1 / b1;\n    // a2 * x + b2 * y + c2 = 0\n    var y = -c1 / b1;\n    var x = -(b2 * y + c2) / a2;\n    results = [[x, y]];\n  } else if (a2 === 0) {\n    // b2 * y + c2 = 0\n    // y = - c2 / b2;\n    // a1 * x + b1 * y + c1 = 0\n    var y = -c2 / b2;\n    var x = -(b1 * y + c1) / a1;\n    results = [[x, y]];\n  } else if (b1 === 0) {\n    // a1 * x + c1 = 0\n    // x = - c1 / a1;\n    // a2 * x + b2 * y + c2 = 0\n    var x = -c1 / a1;\n    var y = -(a2 * x + c2) / b2;\n    results = [[x, y]];\n  } else if (b2 === 0) {\n    // a2 * x + c2 = 0\n    // x = - c2 / a2;\n    // a1 * x + b1 * y + c1 = 0\n    var x = -c2 / a2;\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  } else {\n    // a1 * x + b1 * y + c1 = 0\n    // a2 * x + b2 * y + c2 = 0\n    // b2 * a1 * x + b2 * b1 * y + b2 * c1 = 0\n    // b1 * a2 * x + b1 * b2 * y + b1 * c2 = 0\n    // (b2 * a1 - b1 * a2)  * x = (b1 * c2 - b2 * c1)\n    var x = (b1 * c2 - b2 * c1) / (b2 * a1 - b1 * a2);\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  }\n\n  return results.map(function (result) {\n    return [result[0], result[1]];\n  });\n}\n/**\n * Get intersection points to the two lines.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPoints(line1, line2, isLimit) {\n  var points = getIntersectionPointsByConstants(getLinearConstants(line1[0], line1[1]), getLinearConstants(line2[0], line2[1]));\n\n  if (isLimit) {\n    return getPointsOnLines(points, [line1, line2]);\n  }\n\n  return points;\n}\nfunction isPointOnLine(pos, line) {\n  var linearConstants = getLinearConstants(line[0], line[1]);\n  return tinyThrottle(getDistanceFromPointToConstants(linearConstants, pos)) === 0;\n}\n/**\n * Get the points on the lines (between two points).\n * @memberof OverlapArea\n */\n\nfunction getPointsOnLines(points, lines) {\n  var minMaxs = lines.map(function (line) {\n    return [0, 1].map(function (order) {\n      return [Math.min(line[0][order], line[1][order]), Math.max(line[0][order], line[1][order])];\n    });\n  });\n  var results = [];\n\n  if (points.length === 2) {\n    var _a = points[0],\n        x = _a[0],\n        y = _a[1];\n\n    if (!tinyThrottle(x - points[1][0])) {\n      /// Math.max(minY1, minY2)\n      var top = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var bottom = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][1];\n      }));\n\n      if (tinyThrottle(top - bottom) > 0) {\n        return [];\n      }\n\n      results = [[x, top], [x, bottom]];\n    } else if (!tinyThrottle(y - points[1][1])) {\n      /// Math.max(minY1, minY2)\n      var left = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var right = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][1];\n      }));\n\n      if (tinyThrottle(left - right) > 0) {\n        return [];\n      }\n\n      results = [[left, y], [right, y]];\n    }\n  }\n\n  if (!results.length) {\n    results = points.filter(function (point) {\n      var pointX = point[0],\n          pointY = point[1];\n      return minMaxs.every(function (minMax) {\n        return 0 <= tinyThrottle(pointX - minMax[0][0]) && 0 <= tinyThrottle(minMax[0][1] - pointX) && 0 <= tinyThrottle(pointY - minMax[1][0]) && 0 <= tinyThrottle(minMax[1][1] - pointY);\n      });\n    });\n  }\n\n  return results.map(function (result) {\n    return [tinyThrottle(result[0]), tinyThrottle(result[1])];\n  });\n}\n/**\n* Convert two points into lines.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction convertLines(points) {\n  return __spreadArrays(points.slice(1), [points[0]]).map(function (point, i) {\n    return [points[i], point];\n  });\n}\n\nfunction getOverlapPointInfos(points1, points2) {\n  var targetPoints1 = points1.slice();\n  var targetPoints2 = points2.slice();\n\n  if (getShapeDirection(targetPoints1) === -1) {\n    targetPoints1.reverse();\n  }\n\n  if (getShapeDirection(targetPoints2) === -1) {\n    targetPoints2.reverse();\n  }\n\n  var lines1 = convertLines(targetPoints1);\n  var lines2 = convertLines(targetPoints2);\n  var linearConstantsList1 = lines1.map(function (line1) {\n    return getLinearConstants(line1[0], line1[1]);\n  });\n  var linearConstantsList2 = lines2.map(function (line2) {\n    return getLinearConstants(line2[0], line2[1]);\n  });\n  var overlapInfos = [];\n  linearConstantsList1.forEach(function (linearConstants1, i) {\n    var line1 = lines1[i];\n    var linePointInfos = [];\n    linearConstantsList2.forEach(function (linearConstants2, j) {\n      var intersectionPoints = getIntersectionPointsByConstants(linearConstants1, linearConstants2);\n      var points = getPointsOnLines(intersectionPoints, [line1, lines2[j]]);\n      linePointInfos.push.apply(linePointInfos, points.map(function (pos) {\n        return {\n          index1: i,\n          index2: j,\n          pos: pos,\n          type: \"intersection\"\n        };\n      }));\n    });\n    linePointInfos.sort(function (a, b) {\n      return getDist(line1[0], a.pos) - getDist(line1[0], b.pos);\n    });\n    overlapInfos.push.apply(overlapInfos, linePointInfos);\n\n    if (isInside(line1[1], targetPoints2)) {\n      overlapInfos.push({\n        index1: i,\n        index2: -1,\n        pos: line1[1],\n        type: \"inside\"\n      });\n    }\n  });\n  lines2.forEach(function (line2, i) {\n    if (!isInside(line2[1], targetPoints1)) {\n      return;\n    }\n\n    var isNext = false;\n    var index = findIndex(overlapInfos, function (_a) {\n      var index2 = _a.index2;\n\n      if (index2 === i) {\n        isNext = true;\n        return false;\n      }\n\n      if (isNext) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (index === -1) {\n      isNext = false;\n      index = findIndex(overlapInfos, function (_a) {\n        var index1 = _a.index1,\n            index2 = _a.index2;\n\n        if (index1 === -1 && index2 + 1 === i) {\n          isNext = true;\n          return false;\n        }\n\n        if (isNext) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    if (index === -1) {\n      overlapInfos.push({\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    } else {\n      overlapInfos.splice(index, 0, {\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    }\n  });\n  var pointMap = {};\n  return overlapInfos.filter(function (_a) {\n    var pos = _a.pos;\n    var key = pos[0] + \"x\" + pos[1];\n\n    if (pointMap[key]) {\n      return false;\n    }\n\n    pointMap[key] = true;\n    return true;\n  });\n}\n/**\n* Get the points of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapPoints(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  return infos.map(function (_a) {\n    var pos = _a.pos;\n    return pos;\n  });\n}\n\nfunction isConnectedLine(line) {\n  var _a = line[0],\n      prevIndex1 = _a.index1,\n      prevIndex2 = _a.index2,\n      _b = line[1],\n      nextIndex1 = _b.index1,\n      nextIndex2 = _b.index2;\n\n  if (prevIndex1 !== -1) {\n    // same line\n    if (prevIndex1 === nextIndex1) {\n      return true;\n    }\n\n    if (prevIndex1 + 1 === nextIndex1) {\n      return true;\n    }\n  }\n\n  if (prevIndex2 !== -1) {\n    // same line\n    if (prevIndex2 === nextIndex2) {\n      return true;\n    }\n\n    if (prevIndex2 + 1 === nextIndex2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n* Get the areas of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapAreas(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  var areas = [];\n  var area;\n  getOverlapPointInfos(points1, points2).forEach(function (info, i, arr) {\n    if (i === 0 || !isConnectedLine([arr[i - 1], info])) {\n      area = [info];\n      areas.push(area);\n    } else {\n      area.push(info);\n    }\n  });\n  return areas.map(function (area) {\n    return area.map(function (_a) {\n      var pos = _a.pos;\n      return pos;\n    });\n  });\n}\n\nfunction findReversedAreas(points1, points2, index, areas) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (areas === void 0) {\n    areas = [];\n  }\n\n  var isFirst = areas.length === 0;\n  var length = points1.length;\n  var nextIndex = points1[index] ? index : 0;\n\n  var nextPoints1 = __spreadArrays(points1.slice(nextIndex), points1.slice(0, nextIndex));\n\n  var _loop_1 = function (i) {\n    var point1 = nextPoints1[i];\n\n    if (find(points2, function (point2) {\n      return point2[0] === point1[0] && point2[1] === point1[1];\n    })) {\n      return \"continue\";\n    }\n\n    if (areas.some(function (nextArea) {\n      return find(nextArea, function (areaPoint) {\n        return areaPoint[0] === point1[0] && areaPoint[1] === point1[1];\n      });\n    })) {\n      if (isFirst) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n    }\n\n    var nextArea = void 0;\n\n    if (isFirst) {\n      nextArea = [];\n      areas.push(nextArea);\n    } else {\n      nextArea = areas[areas.length - 1];\n    }\n\n    nextArea.push(point1);\n    var line = [point1, points1[index + 1] || points1[0]];\n    var nextPoint2 = points2.filter(function (point2) {\n      return isPointOnLine(point2, line);\n    }).sort(function (a, b) {\n      return getDist(point1, a) - getDist(point1, b);\n    })[0];\n\n    if (!nextPoint2) {\n      findReversedAreas(nextPoints1, points2, i + 1, areas);\n      return \"break\";\n    } else {\n      var point2Index = points2.indexOf(nextPoint2);\n      findReversedAreas(points2, points1, point2Index, areas);\n\n      if (!isFirst) {\n        return \"break\";\n      }\n    }\n  };\n\n  for (var i = 0; i < length; ++i) {\n    var state_1 = _loop_1(i);\n\n    if (state_1 === \"break\") break;\n  }\n\n  return areas;\n}\n\nfunction findConnectedAreas(points1, points2) {\n  return findReversedAreas(points1, __spreadArrays(points2).reverse());\n}\n/**\n* Get non-overlapping areas of two shapes based on points1.\n* @memberof OverlapArea\n*/\n\nfunction getUnoverlapAreas(points1, points2) {\n  if (!points2.length) {\n    return [__spreadArrays(points1)];\n  }\n\n  var overlapAreas = getOverlapAreas(points1, points2);\n  var unoverlapAreas = [points1];\n  overlapAreas.forEach(function (overlapArea) {\n    var nextOverlapArea = __spreadArrays(overlapArea).reverse();\n\n    unoverlapAreas = flat(unoverlapAreas.map(function (area) {\n      var connectedAreas = findReversedAreas(area, nextOverlapArea);\n      var firstConnectedArea = connectedAreas[0];\n\n      if (connectedAreas.length === 1 && nextOverlapArea.every(function (point) {\n        return firstConnectedArea.indexOf(point) === -1;\n      })) {\n        var lastPoint_1 = firstConnectedArea[firstConnectedArea.length - 1];\n\n        var firstPoint = __spreadArrays(nextOverlapArea).sort(function (a, b) {\n          return getDist(lastPoint_1, a) - getDist(lastPoint_1, b);\n        })[0];\n\n        var firstIndex = nextOverlapArea.indexOf(firstPoint);\n        firstConnectedArea.push.apply(firstConnectedArea, __spreadArrays(nextOverlapArea.slice(firstIndex), nextOverlapArea.slice(0, firstIndex), [nextOverlapArea[firstIndex], lastPoint_1]));\n      }\n\n      return connectedAreas;\n    }));\n  });\n  return unoverlapAreas;\n}\n/**\n* Gets the size of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction getOverlapSize(points1, points2) {\n  var points = getOverlapPoints(points1, points2);\n  return getAreaSize(points);\n}\n\nexport { convertLines, findConnectedAreas, fitPoints, getAreaSize, getDistanceFromPointToConstants, getIntersectionPoints, getIntersectionPointsByConstants, getLinearConstants, getMinMaxs, getOverlapAreas, getOverlapPoints, getOverlapSize, getPointsOnLines, getUnoverlapAreas, isInside, isPointOnLine };\n//# sourceMappingURL=overlap-area.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.19.4\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now, isWindow, getWindow } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction getRad(pos1, pos2) {\n    var distX = pos2[0] - pos1[0];\n    var distY = pos2[1] - pos1[1];\n    var rad = Math.atan2(distY, distX);\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n    return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n    if (!e) {\n        return [];\n    }\n    if (e.touches) {\n        return getClients(e.touches);\n    }\n    else {\n        return [getClient(e)];\n    }\n}\nfunction isMouseEvent(e) {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n    var length = startClients.length;\n    var _a = getAverageClient(clients, length), clientX = _a.clientX, clientY = _a.clientY, originalClientX = _a.originalClientX, originalClientY = _a.originalClientY;\n    var _b = getAverageClient(prevClients, length), prevX = _b.clientX, prevY = _b.clientY;\n    var _c = getAverageClient(startClients, length), startX = _c.clientX, startY = _c.clientY;\n    var deltaX = clientX - prevX;\n    var deltaY = clientY - prevY;\n    var distX = clientX - startX;\n    var distY = clientY - startY;\n    return {\n        clientX: originalClientX,\n        clientY: originalClientY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        distX: distX,\n        distY: distY,\n    };\n}\nfunction getDist(clients) {\n    return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n    var length = Math.min(touches.length, 2);\n    var clients = [];\n    for (var i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nfunction getClient(e) {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nfunction getAverageClient(clients, length) {\n    if (length === void 0) { length = clients.length; }\n    var sumClient = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    var minLength = Math.min(clients.length, length);\n    for (var i = 0; i < minLength; ++i) {\n        var client = clients[i];\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\n\nvar ClientStore = /*#__PURE__*/ (function () {\n    function ClientStore(clients) {\n        this.prevClients = [];\n        this.startClients = [];\n        this.movement = 0;\n        this.length = 0;\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    ClientStore.prototype.getAngle = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients);\n    };\n    ClientStore.prototype.getRotation = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    };\n    ClientStore.prototype.getPosition = function (clients, isAdd) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n        var deltaX = position.deltaX, deltaY = position.deltaY;\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n        return position;\n    };\n    ClientStore.prototype.getPositions = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var prevClients = this.prevClients;\n        var startClients = this.startClients;\n        var minLength = Math.min(this.length, prevClients.length);\n        var positions = [];\n        for (var i = 0; i < minLength; ++i) {\n            positions[i] = getPosition([clients[i]], [prevClients[i]], [startClients[i]]);\n        }\n        return positions;\n    };\n    ClientStore.prototype.getMovement = function (clients) {\n        var movement = this.movement;\n        if (!clients) {\n            return movement;\n        }\n        var currentClient = getAverageClient(clients, this.length);\n        var prevClient = getAverageClient(this.prevClients, this.length);\n        var deltaX = currentClient.clientX - prevClient.clientX;\n        var deltaY = currentClient.clientY - prevClient.clientY;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    };\n    ClientStore.prototype.getDistance = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients);\n    };\n    ClientStore.prototype.getScale = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients) / getDist(this.startClients);\n    };\n    ClientStore.prototype.move = function (deltaX, deltaY) {\n        this.startClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    };\n    return ClientStore;\n}());\n\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/ (function (_super) {\n    __extends(Gesto, _super);\n    /**\n     *\n     */\n    function Gesto(targets, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {};\n        _this.flag = false;\n        _this.pinchFlag = false;\n        _this.data = {};\n        _this.isDrag = false;\n        _this.isPinch = false;\n        _this.clientStores = [];\n        _this.targets = [];\n        _this.prevTime = 0;\n        _this.doubleFlag = false;\n        _this._useMouse = false;\n        _this._useTouch = false;\n        _this._useDrag = false;\n        _this._dragFlag = false;\n        _this._isTrusted = false;\n        _this._isMouseEvent = false;\n        _this._isSecondaryButton = false;\n        _this._preventMouseEvent = false;\n        _this._prevInputEvent = null;\n        _this._isDragAPI = false;\n        _this._isIdle = true;\n        _this._preventMouseEventId = 0;\n        _this._window = window;\n        _this.onDragStart = function (e, isTrusted) {\n            if (isTrusted === void 0) { isTrusted = true; }\n            if (!_this.flag && e.cancelable === false) {\n                return;\n            }\n            var isDragAPI = e.type.indexOf(\"drag\") >= -1;\n            if (_this.flag && isDragAPI) {\n                return;\n            }\n            _this._isDragAPI = true;\n            var _a = _this.options, container = _a.container, pinchOutside = _a.pinchOutside, preventWheelClick = _a.preventWheelClick, preventRightClick = _a.preventRightClick, preventDefault = _a.preventDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var useTouch = _this._useTouch;\n            var isDragStart = !_this.flag;\n            _this._isSecondaryButton = e.which === 3 || e.button === 2;\n            if ((preventWheelClick && (e.which === 2 || e.button === 1))\n                || (preventRightClick && (e.which === 3 || e.button === 2))) {\n                _this.stop();\n                return false;\n            }\n            if (isDragStart) {\n                var activeElement = _this._window.document.activeElement;\n                var target = e.target;\n                if (target) {\n                    var tagName = target.tagName.toLowerCase();\n                    var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                    var hasContentEditable = target.isContentEditable;\n                    if (hasInput || hasContentEditable) {\n                        if (checkInput || (!dragFocusedInput && activeElement === target)) {\n                            // force false or already focused.\n                            return false;\n                        }\n                        // no focus\n                        if (activeElement && (activeElement === target\n                            || (hasContentEditable && activeElement.isContentEditable && activeElement.contains(target)))) {\n                            if (dragFocusedInput) {\n                                target.blur();\n                            }\n                            else {\n                                return false;\n                            }\n                        }\n                    }\n                    else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                        var activeTagName = activeElement.tagName.toLowerCase();\n                        if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                            activeElement.blur();\n                        }\n                    }\n                    if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                        addEvent(_this._window, \"click\", _this._onClick, true);\n                    }\n                }\n                _this.clientStores = [new ClientStore(getEventClients(e))];\n                _this._isIdle = false;\n                _this.flag = true;\n                _this.isDrag = false;\n                _this._isTrusted = isTrusted;\n                _this._dragFlag = true;\n                _this._prevInputEvent = e;\n                _this.data = {};\n                _this.doubleFlag = now() - _this.prevTime < 200;\n                _this._isMouseEvent = isMouseEvent(e);\n                if (!_this._isMouseEvent && _this._preventMouseEvent) {\n                    _this._allowMouseEvent();\n                }\n                var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({ data: _this.data, datas: _this.data, inputEvent: e, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, isTrusted: isTrusted, isDouble: _this.doubleFlag }, _this.getCurrentStore().getPosition()), { preventDefault: function () {\n                        e.preventDefault();\n                    }, preventDrag: function () {\n                        _this._dragFlag = false;\n                    } }));\n                if (result === false) {\n                    _this.stop();\n                }\n                if (_this._isMouseEvent && _this.flag && preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            if (!_this.flag) {\n                return false;\n            }\n            var timer = 0;\n            if (isDragStart) {\n                _this._attchDragEvent();\n                // wait pinch\n                if (useTouch && pinchOutside) {\n                    timer = setTimeout(function () {\n                        addEvent(container, \"touchstart\", _this.onDragStart, {\n                            passive: false\n                        });\n                    });\n                }\n            }\n            else if (useTouch && pinchOutside) {\n                // pinch is occured\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.flag && isMultiTouch(e)) {\n                clearTimeout(timer);\n                if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                    return;\n                }\n                if (!_this.pinchFlag) {\n                    _this.onPinchStart(e);\n                }\n            }\n        };\n        _this.onDrag = function (e, isScroll) {\n            if (!_this.flag) {\n                return;\n            }\n            var preventDefault = _this.options.preventDefault;\n            if (!_this._isMouseEvent && preventDefault) {\n                e.preventDefault();\n            }\n            _this._prevInputEvent = e;\n            var clients = getEventClients(e);\n            var result = _this.moveClients(clients, e, false);\n            if (_this._dragFlag) {\n                if (_this.pinchFlag || result.deltaX || result.deltaY) {\n                    var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), { isScroll: !!isScroll, inputEvent: e }));\n                    if (dragResult === false) {\n                        _this.stop();\n                        return;\n                    }\n                }\n                if (_this.pinchFlag) {\n                    _this.onPinch(e, clients);\n                }\n            }\n            _this.getCurrentStore().getPosition(clients, true);\n        };\n        _this.onDragEnd = function (e) {\n            if (!_this.flag) {\n                return;\n            }\n            var _a = _this.options, pinchOutside = _a.pinchOutside, container = _a.container, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isDrag = _this.isDrag;\n            if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n                requestAnimationFrame(function () {\n                    _this._allowClickEvent();\n                });\n            }\n            if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n                _this._allowClickEvent();\n            }\n            if (_this._useTouch && pinchOutside) {\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.pinchFlag) {\n                _this.onPinchEnd(e);\n            }\n            var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n            var clientsLength = clients.length;\n            if (clientsLength === 0 || !_this.options.keepDragging) {\n                _this.flag = false;\n            }\n            else {\n                _this._addStore(new ClientStore(clients));\n            }\n            var position = _this._getPosition();\n            var currentTime = now();\n            var isDouble = !isDrag && _this.doubleFlag;\n            _this._prevInputEvent = null;\n            _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n            if (!_this.flag) {\n                _this._dettachDragEvent();\n                _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({ data: _this.data, datas: _this.data, isDouble: isDouble, isDrag: isDrag, isClick: !isDrag, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, inputEvent: e, isTrusted: _this._isTrusted }, position));\n                _this.clientStores = [];\n                if (!_this._isMouseEvent) {\n                    _this._preventMouseEvent = true;\n                    // Prevent the problem of touch event and mouse event occurring simultaneously\n                    clearTimeout(_this._preventMouseEventId);\n                    _this._preventMouseEventId = setTimeout(function () {\n                        _this._preventMouseEvent = false;\n                    }, 200);\n                }\n                _this._isIdle = true;\n            }\n        };\n        _this.onBlur = function () {\n            _this.onDragEnd();\n        };\n        _this._allowClickEvent = function () {\n            removeEvent(_this._window, \"click\", _this._onClick, true);\n        };\n        _this._onClick = function (e) {\n            _this._allowClickEvent();\n            _this._allowMouseEvent();\n            var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n            if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n                return;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        _this._onContextMenu = function (e) {\n            var options = _this.options;\n            if (!options.preventRightClick) {\n                e.preventDefault();\n            }\n            else {\n                _this.onDragEnd(e);\n            }\n        };\n        _this._passCallback = function () { };\n        var elements = [].concat(targets);\n        var firstTarget = elements[0];\n        _this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n        _this.options = __assign({ checkInput: false, container: firstTarget && !(\"document\" in firstTarget) ? getWindow(firstTarget) : firstTarget, preventRightClick: true, preventWheelClick: true, preventClickEventOnDragStart: false, preventClickEventOnDrag: false, preventClickEventByCondition: null, preventDefault: true, checkWindowBlur: false, keepDragging: false, pinchThreshold: 0, events: [\"touch\", \"mouse\"] }, options);\n        var _a = _this.options, container = _a.container, events = _a.events, checkWindowBlur = _a.checkWindowBlur;\n        _this._useDrag = events.indexOf(\"drag\") > -1;\n        _this._useTouch = events.indexOf(\"touch\") > -1;\n        _this._useMouse = events.indexOf(\"mouse\") > -1;\n        _this.targets = elements;\n        if (_this._useDrag) {\n            elements.forEach(function (el) {\n                addEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (_this._useMouse) {\n            elements.forEach(function (el) {\n                addEvent(el, \"mousedown\", _this.onDragStart);\n                addEvent(el, \"mousemove\", _this._passCallback);\n            });\n            addEvent(container, \"contextmenu\", _this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(getWindow(), \"blur\", _this.onBlur);\n        }\n        if (_this._useTouch) {\n            var passive_1 = {\n                passive: false,\n            };\n            elements.forEach(function (el) {\n                addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n                addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n            });\n        }\n        return _this;\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    Gesto.prototype.stop = function () {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._isIdle = true;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n        this._isDragAPI = false;\n    };\n    /**\n     * The total moved distance\n     */\n    Gesto.prototype.getMovement = function (clients) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n            return prev + cur.movement;\n        }, 0);\n    };\n    /**\n     * Whether to drag\n     */\n    Gesto.prototype.isDragging = function () {\n        return this.isDrag;\n    };\n    /**\n     * Whether the operation of gesto is finished and is in idle state\n     */\n    Gesto.prototype.isIdle = function () {\n        return this._isIdle;\n    };\n    /**\n     * Whether to start drag\n     */\n    Gesto.prototype.isFlag = function () {\n        return this.flag;\n    };\n    /**\n     * Whether to start pinch\n     */\n    Gesto.prototype.isPinchFlag = function () {\n        return this.pinchFlag;\n    };\n    /**\n     * Whether to start double click\n     */\n    Gesto.prototype.isDoubleFlag = function () {\n        return this.doubleFlag;\n    };\n    /**\n     * Whether to pinch\n     */\n    Gesto.prototype.isPinching = function () {\n        return this.isPinch;\n    };\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n        if (isCallDrag === void 0) { isCallDrag = true; }\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    };\n    /**\n     * Create a virtual drag event.\n     */\n    Gesto.prototype.move = function (_a, inputEvent) {\n        var deltaX = _a[0], deltaY = _a[1];\n        var store = this.getCurrentStore();\n        var nextClients = store.prevClients;\n        return this.moveClients(nextClients.map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY;\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    };\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    Gesto.prototype.triggerDragStart = function (e) {\n        this.onDragStart(e, false);\n    };\n    /**\n     * Set the event data while dragging.\n     */\n    Gesto.prototype.setEventData = function (data) {\n        var currentData = this.data;\n        for (var name_1 in data) {\n            currentData[name_1] = data[name_1];\n        }\n        return this;\n    };\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    Gesto.prototype.setEventDatas = function (data) {\n        return this.setEventData(data);\n    };\n    /**\n     * Get the current event state while dragging.\n     */\n    Gesto.prototype.getCurrentEvent = function (inputEvent) {\n        if (inputEvent === void 0) { inputEvent = this._prevInputEvent; }\n        return __assign(__assign({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, inputEvent: inputEvent });\n    };\n    /**\n     * Get & Set the event data while dragging.\n     */\n    Gesto.prototype.getEventData = function () {\n        return this.data;\n    };\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    Gesto.prototype.getEventDatas = function () {\n        return this.data;\n    };\n    /**\n     * Unset Gesto\n     */\n    Gesto.prototype.unset = function () {\n        var _this = this;\n        var targets = this.targets;\n        var container = this.options.container;\n        this.off();\n        removeEvent(this._window, \"blur\", this.onBlur);\n        if (this._useDrag) {\n            targets.forEach(function (el) {\n                removeEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"mousedown\", _this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this._useTouch) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"touchstart\", _this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    Gesto.prototype.onPinchStart = function (e) {\n        var _this = this;\n        var pinchThreshold = this.options.pinchThreshold;\n        if (this.isDrag && this.getMovement() > pinchThreshold) {\n            return;\n        }\n        var store = new ClientStore(getEventClients(e));\n        this.pinchFlag = true;\n        this._addStore(store);\n        var result = this.emit(\"pinchStart\", __assign(__assign({ data: this.data, datas: this.data, angle: store.getAngle(), touches: this.getCurrentStore().getPositions() }, store.getPosition()), { inputEvent: e, isTrusted: this._isTrusted, preventDefault: function () {\n                e.preventDefault();\n            }, preventDrag: function () {\n                _this._dragFlag = false;\n            } }));\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    };\n    Gesto.prototype.onPinch = function (e, clients) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n        var store = this.getCurrentStore();\n        this.isPinch = true;\n        this.emit(\"pinch\", __assign(__assign({ data: this.data, datas: this.data, movement: this.getMovement(clients), angle: store.getAngle(clients), rotation: store.getRotation(clients), touches: store.getPositions(clients), scale: store.getScale(clients), distance: store.getDistance(clients) }, store.getPosition(clients)), { inputEvent: e, isTrusted: this._isTrusted }));\n    };\n    Gesto.prototype.onPinchEnd = function (e) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        var isPinch = this.isPinch;\n        this.isPinch = false;\n        this.pinchFlag = false;\n        var store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", __assign(__assign({ data: this.data, datas: this.data, isPinch: isPinch, touches: store.getPositions() }, store.getPosition()), { inputEvent: e }));\n    };\n    Gesto.prototype.getCurrentStore = function () {\n        return this.clientStores[0];\n    };\n    Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n        var position = this._getPosition(clients, isAdd);\n        var isPrevDrag = this.isDrag;\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        var isFirstDrag = false;\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n        return __assign(__assign({ data: this.data, datas: this.data }, position), { movement: this.getMovement(clients), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: inputEvent, isTrusted: this._isTrusted, isFirstDrag: isFirstDrag });\n    };\n    Gesto.prototype._addStore = function (store) {\n        this.clientStores.splice(0, 0, store);\n    };\n    Gesto.prototype._getPosition = function (clients, isAdd) {\n        var store = this.getCurrentStore();\n        var position = store.getPosition(clients, isAdd);\n        var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n            var storePosition = cur.getPosition();\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position), distX = _a.distX, distY = _a.distY;\n        return __assign(__assign({}, position), { distX: distX, distY: distY });\n    };\n    Gesto.prototype._attchDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        var passive = {\n            passive: false\n        };\n        if (this._isDragAPI) {\n            addEvent(container, \"dragover\", this.onDrag, passive);\n            addEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(win, \"touchend\", this.onDragEnd, passive);\n            addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    Gesto.prototype._dettachDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        if (this._isDragAPI) {\n            removeEvent(container, \"dragover\", this.onDrag);\n            removeEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(win, \"touchend\", this.onDragEnd);\n            removeEvent(win, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    Gesto.prototype._allowMouseEvent = function () {\n        this._preventMouseEvent = false;\n        clearTimeout(this._preventMouseEventId);\n    };\n    return Gesto;\n}(EventEmitter));\n\nexport { Gesto as default };\n//# sourceMappingURL=gesto.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.8\n*/\nimport { getDocument, splitComma } from '@daybrush/utils';\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nvar stringHash = hash;\n\nfunction getHash(str) {\n  return stringHash(str).toString(36);\n}\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n  return;\n}\nfunction replaceStyle(className, css, options) {\n  if (options.original) {\n    return css;\n  }\n  return css.replace(/([^};{\\s}][^};{]*|^\\s*){/mg, function (_, selector) {\n    var trimmedSelector = selector.trim();\n    return (trimmedSelector ? splitComma(trimmedSelector) : [\"\"]).map(function (subSelector) {\n      var trimmedSubSelector = subSelector.trim();\n      if (trimmedSubSelector.indexOf(\"@\") === 0) {\n        return trimmedSubSelector;\n      } else if (trimmedSubSelector.indexOf(\":global\") > -1) {\n        return trimmedSubSelector.replace(/\\:global/g, \"\");\n      } else if (trimmedSubSelector.indexOf(\":host\") > -1) {\n        return \"\".concat(trimmedSubSelector.replace(/\\:host/g, \".\".concat(className)));\n      } else if (trimmedSubSelector) {\n        return \".\".concat(className, \" \").concat(trimmedSubSelector);\n      } else {\n        return \".\".concat(className);\n      }\n    }).join(\", \") + \" {\";\n  });\n}\nfunction injectStyle(className, css, options, el, shadowRoot) {\n  var doc = getDocument(el);\n  var style = doc.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-styled-id\", className);\n  style.setAttribute(\"data-styled-count\", \"1\");\n  if (options.nonce) {\n    style.setAttribute(\"nonce\", options.nonce);\n  }\n  style.innerHTML = replaceStyle(className, css, options);\n  (shadowRoot || doc.head || doc.body).appendChild(style);\n  return style;\n}\n\n/**\n * Create an styled object that can be defined and inserted into the css.\n * @param - css styles\n */\nfunction styled(css) {\n  var injectClassName = \"rCS\" + getHash(css);\n  return {\n    className: injectClassName,\n    inject: function (el, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      var shadowRoot = getShadowRoot(el);\n      var styleElement = (shadowRoot || el.ownerDocument || document).querySelector(\"style[data-styled-id=\\\"\".concat(injectClassName, \"\\\"]\"));\n      if (!styleElement) {\n        styleElement = injectStyle(injectClassName, css, options, el, shadowRoot);\n      } else {\n        var count = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n        styleElement.setAttribute(\"data-styled-count\", \"\".concat(count + 1));\n      }\n      return {\n        destroy: function () {\n          var _a;\n          var injectCount = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n          if (injectCount <= 1) {\n            if (styleElement.remove) {\n              styleElement.remove();\n            } else {\n              (_a = styleElement.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(styleElement);\n            }\n            styleElement = null;\n          } else {\n            styleElement.setAttribute(\"data-styled-count\", \"\".concat(injectCount - 1));\n          }\n        }\n      };\n    }\n  };\n}\n\nexport default styled;\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: croact-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.1.9\n*/\nimport cssStyled from 'css-styled';\nimport { version, createElement, forwardRef, useRef, useImperativeHandle, useEffect, Component } from 'croact';\nimport { ref } from 'framework-utils';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/css-styled/tree/master/packages/react-css-styled\nversion: 1.1.9\n*/\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nvar StyledElement = /*#__PURE__*/function (_super) {\n  __extends(StyledElement, _super);\n  function StyledElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.injectResult = null;\n    _this.tag = \"div\";\n    return _this;\n  }\n  var __proto = StyledElement.prototype;\n  __proto.render = function () {\n    var _a = this.props,\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      cspNonce = _a.cspNonce,\n      portalContainer = _a.portalContainer,\n      attributes = __rest(_a, [\"className\", \"cspNonce\", \"portalContainer\"]);\n    var cssId = this.injector.className;\n    var Tag = this.tag;\n    var portalAttributes = {};\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n    return createElement(Tag, __assign(__assign({\n      \"ref\": ref(this, \"element\"),\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, portalAttributes), attributes));\n  };\n  __proto.componentDidMount = function () {\n    this.injectResult = this.injector.inject(this.element, {\n      nonce: this.props.cspNonce\n    });\n  };\n  __proto.componentWillUnmount = function () {\n    this.injectResult.destroy();\n    this.injectResult = null;\n  };\n  __proto.getElement = function () {\n    return this.element;\n  };\n  return StyledElement;\n}(Component);\nfunction defaultStyled(tag, css) {\n  var injector = cssStyled(css);\n  return /*#__PURE__*/function (_super) {\n    __extends(Styled, _super);\n    function Styled() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n      _this.injector = injector;\n      _this.tag = tag;\n      return _this;\n    }\n    return Styled;\n  }(StyledElement);\n}\nfunction styled(Tag, css) {\n  var injector = cssStyled(css);\n  var cssId = injector.className;\n  return forwardRef(function (props, ref) {\n    var _a = props.className,\n      className = _a === void 0 ? \"\" : _a,\n      cspNonce = props.cspNonce,\n      attributes = __rest(props, [\"className\", \"cspNonce\"]);\n    var targetRef = useRef();\n    useImperativeHandle(ref, function () {\n      return targetRef.current;\n    }, []);\n    useEffect(function () {\n      var injectResult = injector.inject(targetRef.current, {\n        nonce: props.cspNonce\n      });\n      return function () {\n        injectResult.destroy();\n      };\n    }, []);\n    return createElement(Tag, __assign({\n      \"ref\": targetRef,\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, attributes));\n  });\n}\n\nexport default defaultStyled;\nexport { StyledElement, styled };\n","/*\nCopyright (c) 2019 Daybrush\nname: croact-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/croact-moveable\nversion: 0.9.0\n*/\nimport getAgent from '@egjs/agent';\nimport { prefixNames, prefixCSS, ref, withMethods, refs } from 'framework-utils';\nimport { getRad, throttle, throttleArray, isString, calculateBoundSize, getKeys, isArray, hasClass, getDist as getDist$1, isObject, decamelize, convertUnitSize, pushSet, find, findIndex, splitSpace, isNumber, isNode, isFunction, isWindow, counter, dot, addClass, requestAnimationFrame, splitBracket, splitComma, splitUnit, cancelAnimationFrame, removeClass, getWindow, TINY_NUM as TINY_NUM$1, flat as flat$1, isUndefined, getDocumentBody, between, getDocumentElement, average } from '@daybrush/utils';\nimport { plus, minus, convertDimension, calculate, convertPositionMatrix, ignoreDimension, invert, createIdentityMatrix, createWarpMatrix, multiply, fromTranslation, createRotateMatrix, getOrigin, rotate, multiplies, createOriginMatrix, convertMatrixtoCSS, createScaleMatrix, convertCSStoMatrix } from '@scena/matrix';\nimport { parseMat, parse, toMat, calculateMatrixDist } from 'css-to-mat';\nimport ChildrenDiffer, { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport { getMinMaxs, fitPoints, getOverlapSize, getAreaSize, isInside, getIntersectionPointsByConstants } from 'overlap-area';\nimport * as React from 'croact';\nimport { createElement } from 'croact';\nimport Gesto from 'gesto';\nimport { styled } from 'croact-css-styled';\nimport EventEmitter from '@scena/event-emitter';\nimport { diff as diff$1 } from '@egjs/list-differ';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.56.0\n*/\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction makeAble(name, able) {\r\n    return __assign({ events: [], props: [], name: name }, able);\r\n}\n\nvar DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\r\nvar DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\r\nfunction getSVGCursor(scale, degree) {\r\n    return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(32 * scale, \"px\\\" height=\\\"\").concat(32 * scale, \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\").concat(degree, \"deg);transform-origin: 16px 16px\\\"></path></svg>\");\r\n}\r\nfunction getCursorCSS(degree) {\r\n    var x1 = getSVGCursor(1, degree);\r\n    // const x2 = getSVGCursor(2, degree);\r\n    var degree45 = (Math.round(degree / 45) * 45) % 180;\r\n    var defaultCursor = \"ns-resize\";\r\n    if (degree45 === 135) {\r\n        defaultCursor = \"nwse-resize\";\r\n    }\r\n    else if (degree45 === 45) {\r\n        defaultCursor = \"nesw-resize\";\r\n    }\r\n    else if (degree45 === 90) {\r\n        defaultCursor = \"ew-resize\";\r\n    }\r\n    // tslint:disable-next-line: max-line-length\r\n    return \"cursor:\".concat(defaultCursor, \";cursor: url('\").concat(x1, \"') 16 16, \").concat(defaultCursor, \";\");\r\n}\r\nvar agent = getAgent();\r\nvar IS_WEBKIT = agent.browser.webkit;\r\nvar IS_WEBKIT605 = IS_WEBKIT && (function () {\r\n    var navi = typeof window === \"undefined\" ? { userAgent: \"\" } : window.navigator;\r\n    var res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\r\n    return res ? parseFloat(res[1]) < 605 : false;\r\n})();\r\nvar browserName = agent.browser.name;\r\nvar browserVersion = parseInt(agent.browser.version, 10);\r\nvar IS_CHROME = browserName === \"chrome\";\r\nvar IS_CHROMIUM = agent.browser.chromium;\r\nvar chromiumVersion = parseInt(agent.browser.chromiumVersion, 10) || 0;\r\nvar IS_CHROMIUM109 = (IS_CHROME && browserVersion >= 109)\r\n    || (IS_CHROMIUM && chromiumVersion >= 109);\r\nvar IS_FIREFOX = browserName === \"firefox\";\r\nvar IS_SAFARI_ABOVE15 = parseInt(agent.browser.webkitVersion, 10) >= 612\r\n    || browserVersion >= 15;\r\nvar PREFIX = \"moveable-\";\r\nvar directionCSS = DIRECTIONS.map(function (dir) {\r\n    var top = \"\";\r\n    var left = \"\";\r\n    var originX = \"center\";\r\n    var originY = \"center\";\r\n    var offset = \"calc(var(--moveable-control-padding, 20) * -1px)\";\r\n    if (dir.indexOf(\"n\") > -1) {\r\n        top = \"top: \".concat(offset, \";\");\r\n        originY = \"bottom\";\r\n    }\r\n    if (dir.indexOf(\"s\") > -1) {\r\n        top = \"top: 0px;\";\r\n        originY = \"top\";\r\n    }\r\n    if (dir.indexOf(\"w\") > -1) {\r\n        left = \"left: \".concat(offset, \";\");\r\n        originX = \"right\";\r\n    }\r\n    if (dir.indexOf(\"e\") > -1) {\r\n        left = \"left: 0px;\";\r\n        originX = \"left\";\r\n    }\r\n    return \".around-control[data-direction*=\\\"\".concat(dir, \"\\\"] {\\n        \").concat(left).concat(top, \"\\n        transform-origin: \").concat(originX, \" \").concat(originY, \";\\n    }\");\r\n}).join(\"\\n\");\r\nvar MOVEABLE_CSS = \"\\n{\\nposition: absolute;\\nwidth: 1px;\\nheight: 1px;\\nleft: 0;\\ntop: 0;\\nz-index: 3000;\\n--moveable-color: #4af;\\n--zoom: 1;\\n--zoompx: 1px;\\n--moveable-line-padding: 0;\\n--moveable-control-padding: 0;\\nwill-change: transform;\\noutline: 1px solid transparent;\\n}\\n.control-box {\\nz-index: 0;\\n}\\n.line, .control {\\nposition: absolute;\\nleft: 0;\\ntop: 0;\\nwill-change: transform;\\n}\\n.control {\\nwidth: 14px;\\nheight: 14px;\\nborder-radius: 50%;\\nborder: 2px solid #fff;\\nbox-sizing: border-box;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\nmargin-top: -7px;\\nmargin-left: -7px;\\nborder: 2px solid #fff;\\nz-index: 10;\\n}\\n.around-control {\\nposition: absolute;\\nwill-change: transform;\\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\\nheight: calc(var(--moveable-control-padding, 20) * 1px);\\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\\nbox-sizing: border-box;\\nbackground: transparent;\\nz-index: 8;\\ncursor: alias;\\ntransform-origin: center center;\\n}\\n\".concat(directionCSS, \"\\n.padding {\\nposition: absolute;\\ntop: 0px;\\nleft: 0px;\\nwidth: 100px;\\nheight: 100px;\\ntransform-origin: 0 0;\\n}\\n.line {\\nwidth: 1px;\\nheight: 1px;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\ntransform-origin: 0px 50%;\\n}\\n.line.edge {\\nz-index: 1;\\nbackground: transparent;\\n}\\n.line.dashed {\\nbox-sizing: border-box;\\nbackground: transparent;\\n}\\n.line.dashed.horizontal {\\nborder-top: 1px dashed #4af;\\nborder-top-color: #4af;\\nborder-top-color: var(--moveable-color);\\n}\\n.line.dashed.vertical {\\nborder-left: 1px dashed #4af;\\nborder-left-color: #4af;\\nborder-left-color: var(--moveable-color);\\n}\\n.line.vertical {\\ntransform: translateX(-50%);\\n}\\n.line.horizontal {\\ntransform: translateY(-50%);\\n}\\n.line.vertical.bold {\\nwidth: 2px;\\n}\\n.line.horizontal.bold {\\nheight: 2px;\\n}\\n\\n.control.origin {\\nborder-color: #f55;\\nbackground: #fff;\\nwidth: 12px;\\nheight: 12px;\\nmargin-top: -6px;\\nmargin-left: -6px;\\npointer-events: none;\\n}\\n\").concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) { return \"\\n.direction[data-rotation=\\\"\".concat(degree, \"\\\"], :global .view-control-rotation\").concat(degree, \" {\\n\").concat(getCursorCSS(degree), \"\\n}\\n\"); }).join(\"\\n\"), \"\\n\\n.line.direction:before {\\ncontent: \\\"\\\";\\nposition: absolute;\\nwidth: 100%;\\nheight: calc(var(--moveable-line-padding, 0) * 1px);\\nbottom: 0;\\nleft: 0;\\n}\\n.group {\\nz-index: -1;\\n}\\n.area {\\nposition: absolute;\\n}\\n.area-pieces {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\ndisplay: none;\\n}\\n.area.avoid, .area.pass {\\npointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\ndisplay: block;\\n}\\n.area-piece {\\nposition: absolute;\\n}\\n\\n\").concat(IS_WEBKIT605 ? \":global svg *:before {\\ncontent:\\\"\\\";\\ntransform-origin: inherit;\\n}\" : \"\", \"\\n\");\r\nvar NEARBY_POS = [\r\n    [0, 1, 2],\r\n    [1, 0, 3],\r\n    [2, 0, 3],\r\n    [3, 1, 2],\r\n];\r\nvar FLOAT_POINT_NUM = 0.0001;\r\nvar TINY_NUM = 0.0000001;\r\nvar MIN_SCALE = 0.000000001;\r\nvar MAX_NUM = Math.pow(10, 10);\r\nvar MIN_NUM = -MAX_NUM;\r\nvar DIRECTION_REGION_TO_DIRECTION = {\r\n    n: [0, -1],\r\n    e: [1, 0],\r\n    s: [0, 1],\r\n    w: [-1, 0],\r\n    nw: [-1, -1],\r\n    ne: [1, -1],\r\n    sw: [-1, 1],\r\n    se: [1, 1],\r\n};\r\nvar DIRECTION_INDEXES = {\r\n    n: [0, 1],\r\n    e: [1, 3],\r\n    s: [3, 2],\r\n    w: [2, 0],\r\n    nw: [0],\r\n    ne: [1],\r\n    sw: [2],\r\n    se: [3],\r\n};\r\nvar DIRECTION_ROTATIONS = {\r\n    n: 0,\r\n    s: 180,\r\n    w: 270,\r\n    e: 90,\r\n    nw: 315,\r\n    ne: 45,\r\n    sw: 225,\r\n    se: 135,\r\n};\r\nvar MOVEABLE_METHODS = [\r\n    \"isMoveableElement\",\r\n    \"updateRect\",\r\n    \"updateTarget\",\r\n    \"destroy\",\r\n    \"dragStart\",\r\n    \"isInside\",\r\n    \"hitTest\",\r\n    \"setState\",\r\n    \"getRect\",\r\n    \"request\",\r\n    \"isDragging\",\r\n    \"getManager\",\r\n    \"forceUpdate\",\r\n    \"waitToChangeTarget\",\r\n    \"updateSelectors\",\r\n    \"getTargets\",\r\n    \"stopDrag\",\r\n    \"getControlBoxElement\",\r\n    \"getMoveables\",\r\n    \"getDragElement\",\r\n];\n\nfunction setCustomDrag(e, state, delta, isPinch, isConvert, ableName) {\r\n    var _a, _b;\r\n    if (ableName === void 0) { ableName = \"draggable\"; }\r\n    var result = (_b = (_a = state.gestos[ableName]) === null || _a === void 0 ? void 0 : _a.move(delta, e.inputEvent)) !== null && _b !== void 0 ? _b : {};\r\n    var datas = result.originalDatas || result.datas;\r\n    var ableDatas = datas[ableName] || (datas[ableName] = {});\r\n    return __assign(__assign({}, (isConvert ? convertDragDist(state, result) : result)), { isPinch: !!isPinch, parentEvent: true, datas: ableDatas, originalDatas: e.originalDatas });\r\n}\r\nvar CustomGesto = /*#__PURE__*/ (function () {\r\n    function CustomGesto(ableName) {\r\n        var _a;\r\n        if (ableName === void 0) { ableName = \"draggable\"; }\r\n        this.ableName = ableName;\r\n        this.prevX = 0;\r\n        this.prevY = 0;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        this.datas = {\r\n            draggable: {},\r\n        };\r\n        this.datas = (_a = {},\r\n            _a[ableName] = {},\r\n            _a);\r\n    }\r\n    CustomGesto.prototype.dragStart = function (client, e) {\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        var originalDatas = e.originalDatas;\r\n        this.datas = originalDatas;\r\n        if (!originalDatas[this.ableName]) {\r\n            originalDatas[this.ableName] = {};\r\n        }\r\n        return __assign(__assign({}, this.move(client, e.inputEvent)), { type: \"dragstart\" });\r\n    };\r\n    CustomGesto.prototype.drag = function (client, inputEvent) {\r\n        return this.move([\r\n            client[0] - this.prevX,\r\n            client[1] - this.prevY,\r\n        ], inputEvent);\r\n    };\r\n    CustomGesto.prototype.move = function (delta, inputEvent) {\r\n        var clientX;\r\n        var clientY;\r\n        var isFirstDrag = false;\r\n        if (!this.isFlag) {\r\n            this.prevX = delta[0];\r\n            this.prevY = delta[1];\r\n            this.startX = delta[0];\r\n            this.startY = delta[1];\r\n            clientX = delta[0];\r\n            clientY = delta[1];\r\n            this.isFlag = true;\r\n        }\r\n        else {\r\n            var isPrevDrag = this.isDrag;\r\n            clientX = this.prevX + delta[0];\r\n            clientY = this.prevY + delta[1];\r\n            if (delta[0] || delta[1]) {\r\n                this.isDrag = true;\r\n            }\r\n            if (!isPrevDrag && this.isDrag) {\r\n                isFirstDrag = true;\r\n            }\r\n        }\r\n        this.prevX = clientX;\r\n        this.prevY = clientY;\r\n        return {\r\n            type: \"drag\",\r\n            clientX: clientX,\r\n            clientY: clientY,\r\n            inputEvent: inputEvent,\r\n            isFirstDrag: isFirstDrag,\r\n            isDrag: this.isDrag,\r\n            distX: clientX - this.startX,\r\n            distY: clientY - this.startY,\r\n            deltaX: delta[0],\r\n            deltaY: delta[1],\r\n            datas: this.datas[this.ableName],\r\n            originalDatas: this.datas,\r\n            parentEvent: true,\r\n            parentGesto: this,\r\n        };\r\n    };\r\n    return CustomGesto;\r\n}());\n\nfunction calculateElementPosition(matrix, origin, width, height) {\r\n    var is3d = matrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var _a = __read(poses, 4), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), x3 = _d[0], y3 = _d[1], _e = __read(_a[3], 2), x4 = _e[0], y4 = _e[1];\r\n    var _f = __read(calculatePosition(matrix, origin, n), 2), originX = _f[0], originY = _f[1];\r\n    var left = Math.min(x1, x2, x3, x4);\r\n    var top = Math.min(y1, y2, y3, y4);\r\n    var right = Math.max(x1, x2, x3, x4);\r\n    var bottom = Math.max(y1, y2, y3, y4);\r\n    x1 = (x1 - left) || 0;\r\n    x2 = (x2 - left) || 0;\r\n    x3 = (x3 - left) || 0;\r\n    x4 = (x4 - left) || 0;\r\n    y1 = (y1 - top) || 0;\r\n    y2 = (y2 - top) || 0;\r\n    y3 = (y3 - top) || 0;\r\n    y4 = (y4 - top) || 0;\r\n    originX = (originX - left) || 0;\r\n    originY = (originY - top) || 0;\r\n    var sx = matrix[0];\r\n    var sy = matrix[n + 1];\r\n    var direction = sign(sx * sy);\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        origin: [originX, originY],\r\n        pos1: [x1, y1],\r\n        pos2: [x2, y2],\r\n        pos3: [x3, y3],\r\n        pos4: [x4, y4],\r\n        direction: direction,\r\n    };\r\n}\n\nfunction calculatePointerDist(moveable, e) {\r\n    var clientX = e.clientX, clientY = e.clientY, datas = e.datas;\r\n    var _a = moveable.state, moveableClientRect = _a.moveableClientRect, rootMatrix = _a.rootMatrix, is3d = _a.is3d, pos1 = _a.pos1;\r\n    var left = moveableClientRect.left, top = moveableClientRect.top;\r\n    var n = is3d ? 4 : 3;\r\n    var _b = __read(minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1), 2), posX = _b[0], posY = _b[1];\r\n    var _c = __read(getDragDist({ datas: datas, distX: posX, distY: posY }), 2), distX = _c[0], distY = _c[1];\r\n    return [distX, distY];\r\n}\r\nfunction setDragStart(moveable, _a) {\r\n    var datas = _a.datas;\r\n    var _b = moveable.state, allMatrix = _b.allMatrix, beforeMatrix = _b.beforeMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, origin = _b.origin, offsetMatrix = _b.offsetMatrix, targetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    datas.is3d = is3d;\r\n    datas.matrix = allMatrix;\r\n    datas.targetMatrix = targetMatrix;\r\n    datas.beforeMatrix = beforeMatrix;\r\n    datas.offsetMatrix = offsetMatrix;\r\n    datas.transformOrigin = transformOrigin;\r\n    datas.inverseMatrix = invert(allMatrix, n);\r\n    datas.inverseBeforeMatrix = invert(beforeMatrix, n);\r\n    datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\r\n    datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\r\n    datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\r\n}\r\nfunction getTransformDirection(e) {\r\n    return calculateElementPosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\r\n}\r\nfunction resolveTransformEvent(moveable, event, functionName) {\r\n    var datas = event.datas, originalDatas = event.originalDatas.beforeRenderable;\r\n    var index = datas.transformIndex;\r\n    var nextTransforms = originalDatas.nextTransforms;\r\n    var length = nextTransforms.length;\r\n    var nextTransformAppendedIndexes = originalDatas.nextTransformAppendedIndexes;\r\n    var nextIndex = -1;\r\n    if (index === -1) {\r\n        // translate => rotate => scale\r\n        if (functionName === \"translate\") {\r\n            nextIndex = 0;\r\n        }\r\n        else if (functionName === \"rotate\") {\r\n            nextIndex = findIndex(nextTransforms, function (text) { return text.match(/scale\\(/g); });\r\n        }\r\n        if (nextIndex === -1) {\r\n            nextIndex = nextTransforms.length;\r\n        }\r\n        datas.transformIndex = nextIndex;\r\n    }\r\n    else if (find(nextTransformAppendedIndexes, function (info) { return info.index === index && info.functionName === functionName; })) {\r\n        nextIndex = index;\r\n    }\r\n    else {\r\n        nextIndex = index + nextTransformAppendedIndexes.filter(function (info) { return info.index < index; }).length;\r\n    }\r\n    var result = convertTransformInfo(nextTransforms, moveable.state, nextIndex);\r\n    var targetFunction = result.targetFunction;\r\n    var matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\r\n    datas.beforeFunctionTexts = result.beforeFunctionTexts;\r\n    datas.afterFunctionTexts = result.afterFunctionTexts;\r\n    datas.beforeTransform = result.beforeFunctionMatrix;\r\n    datas.beforeTransform2 = result.beforeFunctionMatrix2;\r\n    datas.targetTansform = result.targetFunctionMatrix;\r\n    datas.afterTransform = result.afterFunctionMatrix;\r\n    datas.afterTransform2 = result.afterFunctionMatrix2;\r\n    datas.targetAllTransform = result.allFunctionMatrix;\r\n    if (targetFunction.functionName === matFunctionName) {\r\n        datas.afterFunctionTexts.splice(0, 1);\r\n        datas.isAppendTransform = false;\r\n    }\r\n    else if (length > nextIndex) {\r\n        datas.isAppendTransform = true;\r\n        originalDatas.nextTransformAppendedIndexes = __spreadArray(__spreadArray([], __read(nextTransformAppendedIndexes), false), [{\r\n                functionName: functionName,\r\n                index: nextIndex,\r\n                isAppend: true,\r\n            }], false);\r\n    }\r\n}\r\nfunction convertTransformFormat(datas, value, dist) {\r\n    return \"\".concat(datas.beforeFunctionTexts.join(\" \"), \" \").concat(datas.isAppendTransform ? dist : value, \" \").concat(datas.afterFunctionTexts.join(\" \"));\r\n}\r\nfunction getTransformDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var _b = __read(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), 2), bx = _b[0], by = _b[1];\r\n    // B * [tx, ty] * A = [bx, by] * targetMatrix;\r\n    // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\r\n    var res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\r\n    return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\r\n}\r\nfunction getTransfromMatrix(datas, targetMatrix, isAfter) {\r\n    var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform, beforeTransform2 = datas.beforeTransform2, afterTransform2 = datas.afterTransform2, targetAllTransform = datas.targetAllTransform;\r\n    // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\r\n    // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\r\n    // nextTargetMatrix = (targetMatrix * targetAllTransform)\r\n    var nextTargetMatrix = isAfter\r\n        ? multiply(targetAllTransform, targetMatrix, 4)\r\n        : multiply(targetMatrix, targetAllTransform, 4);\r\n    // res1 = B-1 * nextTargetMatrix\r\n    var res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4);\r\n    // res3 = res2 * A-1\r\n    var afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\r\n    return afterTargetMatrix;\r\n}\r\nfunction getBeforeDragDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    // TT = BT\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\r\n    // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\r\n    return minus(calculate(inverseBeforeMatrix, plus(absoluteOrigin, [distX, distY]), n), startDragBeforeDist);\r\n}\r\nfunction getDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, inverseMatrix = datas.inverseMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\r\n}\r\nfunction getInverseDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var beforeMatrix = datas.beforeMatrix, matrix = datas.matrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\r\n}\r\nfunction calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\r\n    if (prevWidth === void 0) { prevWidth = width; }\r\n    if (prevHeight === void 0) { prevHeight = height; }\r\n    if (prevOrigin === void 0) { prevOrigin = [0, 0]; }\r\n    if (!transformOrigin) {\r\n        return prevOrigin;\r\n    }\r\n    return transformOrigin.map(function (pos, i) {\r\n        var _a = splitUnit(pos), value = _a.value, unit = _a.unit;\r\n        var prevSize = (i ? prevHeight : prevWidth);\r\n        var size = (i ? height : width);\r\n        if (pos === \"%\" || isNaN(value)) {\r\n            // no value but %\r\n            var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\r\n            return size * measureRatio;\r\n        }\r\n        else if (unit !== \"%\") {\r\n            return value;\r\n        }\r\n        return size * value / 100;\r\n    });\r\n}\r\nfunction getPosIndexesByDirection(direction) {\r\n    var indexes = [];\r\n    if (direction[1] >= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(3);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(2);\r\n        }\r\n    }\r\n    if (direction[1] <= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(1);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(0);\r\n        }\r\n    }\r\n    return indexes;\r\n}\r\nfunction getPosesByDirection(poses, direction) {\r\n    /*\r\n    [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\r\n    [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\r\n    [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\r\n    */\r\n    return getPosIndexesByDirection(direction).map(function (index) { return poses[index]; });\r\n}\r\nfunction getPosBySingleDirection(poses, direction) {\r\n    var ratio = (direction + 1) / 2;\r\n    return [\r\n        dot(poses[0][0], poses[1][0], ratio, 1 - ratio),\r\n        dot(poses[0][1], poses[1][1], ratio, 1 - ratio),\r\n    ];\r\n}\r\nfunction getPosByDirection(poses, direction) {\r\n    var top = getPosBySingleDirection([poses[0], poses[1]], direction[0]);\r\n    var bottom = getPosBySingleDirection([poses[2], poses[3]], direction[0]);\r\n    return getPosBySingleDirection([top, bottom], direction[1]);\r\n}\r\nfunction getDist(startPos, matrix, width, height, n, fixedDirection) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var fixedPos = getPosByDirection(poses, fixedDirection);\r\n    var distX = startPos[0] - fixedPos[0];\r\n    var distY = startPos[1] - fixedPos[1];\r\n    return [distX, distY];\r\n}\r\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\r\n    return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\r\n}\r\nfunction getNextTransformMatrix(state, datas, transform, isAllTransform) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var targetTransform;\r\n    if (isString(transform)) {\r\n        var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform;\r\n        if (isAllTransform) {\r\n            targetTransform = convertDimension(parseMat(transform), 4, n);\r\n        }\r\n        else {\r\n            targetTransform = convertDimension(multiply(multiply(beforeTransform, parseMat([transform]), 4), afterTransform, 4), 4, n);\r\n        }\r\n    }\r\n    else {\r\n        targetTransform = transform;\r\n    }\r\n    return getNextMatrix(offsetMatrix, targetTransform, transformOrigin, n);\r\n}\r\nfunction scaleMatrix(state, scale) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, targetMatrix = state.targetMatrix, targetAllTransform = state.targetAllTransform;\r\n    var n = is3d ? 4 : 3;\r\n    return getNextMatrix(offsetMatrix, multiply(targetAllTransform || targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\r\n}\r\nfunction fillTransformStartEvent(moveable, e) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    return {\r\n        setTransform: function (transform, index) {\r\n            if (index === void 0) { index = -1; }\r\n            originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n        setTransformIndex: function (index) {\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n    };\r\n}\r\nfunction setDefaultTransformIndex(moveable, e, property) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var startTransforms = originalDatas.startTransforms;\r\n    setTransformIndex(moveable, e, findIndex(startTransforms, function (func) { return func.indexOf(\"\".concat(property, \"(\")) === 0; }));\r\n}\r\nfunction setTransformIndex(moveable, e, index) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var datas = e.datas;\r\n    datas.transformIndex = index;\r\n    if (index === -1) {\r\n        return;\r\n    }\r\n    var transform = originalDatas.startTransforms[index];\r\n    if (!transform) {\r\n        return;\r\n    }\r\n    var state = moveable.state;\r\n    var info = parse([transform], {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    datas.startValue = info[0].functionValue;\r\n}\r\nfunction fillOriginalTransform(e, transform) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    originalDatas.nextTransforms = splitSpace(transform);\r\n    // originalDatas.nextTargetMatrix = parseMat(transform);\r\n}\r\nfunction getBeforeRenderableDatas(e) {\r\n    return e.originalDatas.beforeRenderable;\r\n}\r\nfunction getNextTransforms(e) {\r\n    var originalDatas = e.originalDatas.beforeRenderable;\r\n    return originalDatas.nextTransforms;\r\n}\r\nfunction getNextTransformText(e) {\r\n    return (getNextTransforms(e) || []).join(\" \");\r\n}\r\nfunction getNextStyle(e) {\r\n    return getBeforeRenderableDatas(e).nextStyle;\r\n}\r\nfunction fillTransformEvent(moveable, nextTransform, delta, isPinch, e) {\r\n    fillOriginalTransform(e, nextTransform);\r\n    var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, delta, isPinch, false));\r\n    var afterTransform = drag ? drag.transform : nextTransform;\r\n    return __assign(__assign({ transform: nextTransform, drag: drag }, fillCSSObject({\r\n        transform: afterTransform,\r\n    }, e)), { afterTransform: afterTransform });\r\n}\r\nfunction getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform) {\r\n    var nextMatrix = getNextTransformMatrix(moveable.state, datas, transform, isAllTransform);\r\n    var nextFixedPosition = getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix);\r\n    return nextFixedPosition;\r\n}\r\nfunction getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var nextFixedPosition = getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform);\r\n    var state = moveable.state;\r\n    var left = state.left, top = state.top;\r\n    var groupable = moveable.props.groupable;\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var dist = minus(fixedPosition, nextFixedPosition);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getScaleDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var dist = getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform);\r\n    return dist;\r\n}\r\nfunction getDirectionByPos(pos, width, height) {\r\n    return [\r\n        width ? -1 + pos[0] / (width / 2) : 0,\r\n        height ? -1 + pos[1] / (height / 2) : 0,\r\n    ];\r\n}\r\nfunction getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix) {\r\n    if (nextMatrix === void 0) { nextMatrix = moveable.state.allMatrix; }\r\n    var _a = moveable.state, width = _a.width, height = _a.height, is3d = _a.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedOffsetPosition = [\r\n        width / 2 * (1 + fixedDirection[0]) + fixedOffset[0],\r\n        height / 2 * (1 + fixedDirection[1]) + fixedOffset[1],\r\n    ];\r\n    return calculatePosition(nextMatrix, fixedOffsetPosition, n);\r\n}\r\nfunction getRotateDist(moveable, rotateDist, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var fixedPosition = datas.fixedPosition;\r\n    var fixedOffset = datas.fixedOffset;\r\n    return getTranslateDist(moveable, \"rotate(\".concat(rotateDist, \"deg)\"), fixedDirection, fixedPosition, fixedOffset, datas);\r\n}\r\nfunction getResizeDist(moveable, width, height, fixedPosition, transformOrigin, datas) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var prevOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, prevWidth = state.width, prevHeight = state.height, left = state.left, top = state.top;\r\n    var fixedDirection = datas.fixedDirection;\r\n    var targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    var nextOrigin = calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\r\n    var dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getAbsolutePosition(moveable, direction) {\r\n    return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\r\n}\n\nfunction getGestoData(moveable, ableName) {\r\n    var targetGesto = moveable.targetGesto;\r\n    var controlGesto = moveable.controlGesto;\r\n    var data;\r\n    if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n        data = targetGesto.getEventData()[ableName];\r\n    }\r\n    if (!data && (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())) {\r\n        data = controlGesto.getEventData()[ableName];\r\n    }\r\n    return data || {};\r\n}\n\nfunction getShadowRoot(parentElement) {\r\n    if (parentElement && parentElement.getRootNode) {\r\n        var rootNode = parentElement.getRootNode();\r\n        if (rootNode.nodeType === 11) {\r\n            return rootNode;\r\n        }\r\n    }\r\n    return;\r\n}\r\nfunction getIndividualTransforms(getStyle) {\r\n    var scale = getStyle(\"scale\");\r\n    var rotate = getStyle(\"rotate\");\r\n    var translate = getStyle(\"translate\");\r\n    var individualTransforms = [];\r\n    if (translate && translate !== \"0px\" && translate !== \"none\") {\r\n        individualTransforms.push(\"translate(\".concat(translate.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    if (rotate && rotate !== \"1\" && rotate !== \"none\") {\r\n        individualTransforms.push(\"rotate(\".concat(rotate, \")\"));\r\n    }\r\n    if (scale && scale !== \"1\" && scale !== \"none\") {\r\n        individualTransforms.push(\"scale(\".concat(scale.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    return individualTransforms;\r\n}\r\nfunction getMatrixStackInfo(target, container, checkContainer) {\r\n    var el = target;\r\n    var matrixes = [];\r\n    var documentElement = getDocumentElement(target) || getDocumentBody(target);\r\n    var requestEnd = !checkContainer && target === container || target === documentElement;\r\n    var isEnd = requestEnd;\r\n    var is3d = false;\r\n    var n = 3;\r\n    var transformOrigin;\r\n    var targetTransformOrigin;\r\n    var targetMatrix;\r\n    var hasFixed = false;\r\n    var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\r\n    var zoom = 1;\r\n    while (el && !isEnd) {\r\n        isEnd = requestEnd;\r\n        var getStyle = getCachedStyle(el);\r\n        var position = getStyle(\"position\");\r\n        var transform = getElementTransform(el);\r\n        var isFixed = position === \"fixed\";\r\n        var individualTransforms = getIndividualTransforms(getStyle);\r\n        var matrix = convertCSStoMatrix(getTransformMatrix(transform));\r\n        var offsetParent = void 0;\r\n        var isOffsetEnd = false;\r\n        var isStatic = false;\r\n        var parentClientLeft = 0;\r\n        var parentClientTop = 0;\r\n        var fixedClientLeft = 0;\r\n        var fixedClientTop = 0;\r\n        var fixedInfo = {\r\n            hasTransform: false,\r\n            fixedContainer: null,\r\n        };\r\n        if (isFixed) {\r\n            hasFixed = true;\r\n            fixedInfo = getPositionFixedInfo(el);\r\n            offsetContainer = fixedInfo.fixedContainer;\r\n        }\r\n        // convert 3 to 4\r\n        var length_1 = matrix.length;\r\n        if (!is3d && (length_1 === 16 || individualTransforms.length)) {\r\n            is3d = true;\r\n            n = 4;\r\n            convert3DMatrixes(matrixes);\r\n            if (targetMatrix) {\r\n                targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n            }\r\n        }\r\n        if (is3d && length_1 === 9) {\r\n            matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n        var _a = getOffsetPosInfo(el, target), tagName = _a.tagName, hasOffset = _a.hasOffset, isSVG = _a.isSVG, origin_1 = _a.origin, targetOrigin = _a.targetOrigin, offsetPos = _a.offset;\r\n        var _b = __read(offsetPos, 2), offsetLeft = _b[0], offsetTop = _b[1];\r\n        // no target with svg\r\n        if (tagName === \"svg\" && !el.ownerSVGElement && targetMatrix) {\r\n            // scale matrix for svg's SVGElements.\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getSVGMatrix(el, n),\r\n            });\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n        }\r\n        var targetZoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        if (isFixed) {\r\n            offsetParent = fixedInfo.fixedContainer;\r\n            isOffsetEnd = true;\r\n        }\r\n        else {\r\n            var offsetInfo = getOffsetInfo(el, container, false, true, getStyle);\r\n            var offsetZoom = offsetInfo.offsetZoom;\r\n            offsetParent = offsetInfo.offsetParent;\r\n            isOffsetEnd = offsetInfo.isEnd;\r\n            isStatic = offsetInfo.isStatic;\r\n            zoom *= offsetZoom;\r\n            if ((offsetInfo.isCustomElement || offsetZoom !== 1) && isStatic) {\r\n                offsetLeft -= offsetParent.offsetLeft;\r\n                offsetTop -= offsetParent.offsetTop;\r\n            }\r\n            else if (IS_FIREFOX || IS_CHROMIUM109) {\r\n                var parentSlotElement = offsetInfo.parentSlotElement;\r\n                if (parentSlotElement) {\r\n                    var customOffsetParent = offsetParent;\r\n                    var customOffsetLeft = 0;\r\n                    var customOffsetTop = 0;\r\n                    while (customOffsetParent) {\r\n                        if (!getShadowRoot(customOffsetParent)) {\r\n                            break;\r\n                        }\r\n                        customOffsetLeft += customOffsetParent.offsetLeft;\r\n                        customOffsetTop += customOffsetParent.offsetTop;\r\n                        customOffsetParent = customOffsetParent.offsetParent;\r\n                    }\r\n                    offsetLeft -= customOffsetLeft;\r\n                    offsetTop -= customOffsetTop;\r\n                }\r\n            }\r\n        }\r\n        if (IS_WEBKIT && !IS_SAFARI_ABOVE15\r\n            && hasOffset && !isSVG && isStatic\r\n            && (position === \"relative\" || position === \"static\")) {\r\n            offsetLeft -= offsetParent.offsetLeft;\r\n            offsetTop -= offsetParent.offsetTop;\r\n            requestEnd = requestEnd || isOffsetEnd;\r\n        }\r\n        if (isFixed) {\r\n            if (hasOffset && fixedInfo.hasTransform) {\r\n                // border\r\n                fixedClientLeft = offsetParent.clientLeft;\r\n                fixedClientTop = offsetParent.clientTop;\r\n            }\r\n        }\r\n        else {\r\n            if (hasOffset && offsetContainer !== offsetParent) {\r\n                // border\r\n                parentClientLeft = offsetParent.clientLeft;\r\n                parentClientTop = offsetParent.clientTop;\r\n            }\r\n            if (hasOffset && offsetParent === documentElement) {\r\n                var margin = getBodyOffset(el, false);\r\n                offsetLeft += margin[0];\r\n                offsetTop += margin[1];\r\n            }\r\n        }\r\n        matrixes.push({\r\n            type: \"target\",\r\n            target: el,\r\n            matrix: getAbsoluteMatrix(matrix, n, origin_1),\r\n        });\r\n        if (individualTransforms.length) {\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(parseMat(individualTransforms), n, origin_1),\r\n            });\r\n        }\r\n        if (hasOffset) {\r\n            var isElementTarget = el === target;\r\n            var scrollLeft = isElementTarget ? 0 : el.scrollLeft;\r\n            var scrollTop = isElementTarget ? 0 : el.scrollTop;\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createOriginMatrix([\r\n                    offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft,\r\n                    offsetTop - scrollTop + parentClientTop - fixedClientTop,\r\n                ], n),\r\n            });\r\n        }\r\n        else {\r\n            // svg\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                origin: origin_1,\r\n            });\r\n        }\r\n        // transform으로 계산되지 않는 zoom을 위한 (0, 0) 을 기준 matrix 추가.\r\n        if (targetZoom !== 1) {\r\n            matrixes.push({\r\n                type: \"zoom\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0]),\r\n            });\r\n        }\r\n        if (!targetMatrix) {\r\n            targetMatrix = matrix;\r\n        }\r\n        if (!transformOrigin) {\r\n            transformOrigin = origin_1;\r\n        }\r\n        if (!targetTransformOrigin) {\r\n            targetTransformOrigin = targetOrigin;\r\n        }\r\n        if (isEnd || isFixed) {\r\n            break;\r\n        }\r\n        else {\r\n            el = offsetParent;\r\n            requestEnd = isOffsetEnd;\r\n        }\r\n        if (!checkContainer || el === documentElement) {\r\n            isEnd = requestEnd;\r\n        }\r\n    }\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(n);\r\n    }\r\n    if (!transformOrigin) {\r\n        transformOrigin = [0, 0];\r\n    }\r\n    if (!targetTransformOrigin) {\r\n        targetTransformOrigin = [0, 0];\r\n    }\r\n    return {\r\n        zoom: zoom,\r\n        offsetContainer: offsetContainer,\r\n        matrixes: matrixes,\r\n        targetMatrix: targetMatrix,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetTransformOrigin,\r\n        is3d: is3d,\r\n        hasFixed: hasFixed,\r\n    };\r\n}\n\nvar cacheStyleMap = null;\r\nvar clientRectStyleMap = null;\r\nvar matrixContainerInfos = null;\r\nfunction setStoreCache(useCache) {\r\n    if (useCache) {\r\n        if (window.Map) {\r\n            cacheStyleMap = new Map();\r\n            clientRectStyleMap = new Map();\r\n        }\r\n        matrixContainerInfos = [];\r\n    }\r\n    else {\r\n        cacheStyleMap = null;\r\n        matrixContainerInfos = null;\r\n        clientRectStyleMap = null;\r\n    }\r\n}\r\nfunction getCachedClientRect(el) {\r\n    var clientRect = clientRectStyleMap === null || clientRectStyleMap === void 0 ? void 0 : clientRectStyleMap.get(el);\r\n    if (clientRect) {\r\n        return clientRect;\r\n    }\r\n    var nextClientRect = getClientRect(el, true);\r\n    if (clientRectStyleMap) {\r\n        clientRectStyleMap.set(el, nextClientRect);\r\n    }\r\n    return nextClientRect;\r\n}\r\nfunction getCachedMatrixContainerInfo(target, container) {\r\n    if (matrixContainerInfos) {\r\n        var result_1 = find(matrixContainerInfos, function (info) { return info[0][0] == target && info[0][1] == container; });\r\n        if (result_1) {\r\n            return result_1[1];\r\n        }\r\n    }\r\n    var result = getMatrixStackInfo(target, container, true);\r\n    if (matrixContainerInfos) {\r\n        matrixContainerInfos.push([[target, container], result]);\r\n    }\r\n    return result;\r\n}\r\nfunction getCachedStyle(element) {\r\n    var cache = cacheStyleMap === null || cacheStyleMap === void 0 ? void 0 : cacheStyleMap.get(element);\r\n    if (!cache) {\r\n        var nextStyle_1 = getWindow(element).getComputedStyle(element);\r\n        if (!cacheStyleMap) {\r\n            return function (property) {\r\n                return nextStyle_1[property];\r\n            };\r\n        }\r\n        cache = {\r\n            style: nextStyle_1,\r\n            cached: {},\r\n        };\r\n        cacheStyleMap.set(element, cache);\r\n    }\r\n    var cached = cache.cached;\r\n    var style = cache.style;\r\n    return function (property) {\r\n        if (!(property in cached)) {\r\n            cached[property] = style[property];\r\n        }\r\n        return cached[property];\r\n    };\r\n}\n\nfunction fillChildEvents(moveable, name, e) {\r\n    var datas = e.originalDatas;\r\n    datas.groupable = datas.groupable || {};\r\n    var groupableDatas = datas.groupable;\r\n    groupableDatas.childDatas = groupableDatas.childDatas || [];\r\n    var childDatas = groupableDatas.childDatas;\r\n    return moveable.moveables.map(function (_, i) {\r\n        childDatas[i] = childDatas[i] || {};\r\n        childDatas[i][name] = childDatas[i][name] || {};\r\n        return __assign(__assign({}, e), { isRequestChild: true, datas: childDatas[i][name], originalDatas: childDatas[i] });\r\n    });\r\n}\r\nfunction triggerChildGesto(moveable, able, type, delta, e, isConvert, ableName) {\r\n    var isStart = !!type.match(/Start$/g);\r\n    var isEnd = !!type.match(/End$/g);\r\n    var isPinch = e.isPinch;\r\n    var datas = e.datas;\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childEvents = [];\r\n    var eventParams = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var state = childMoveable.state;\r\n        var gestos = state.gestos;\r\n        var childEvent = ev;\r\n        if (isStart) {\r\n            childEvent = new CustomGesto(ableName).dragStart(delta, ev);\r\n            childEvents.push(childEvent);\r\n        }\r\n        else {\r\n            if (!gestos[ableName]) {\r\n                gestos[ableName] = datas.childGestos[i];\r\n            }\r\n            if (!gestos[ableName]) {\r\n                return;\r\n            }\r\n            childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\r\n            childEvents.push(childEvent);\r\n        }\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        if (isEnd) {\r\n            gestos[ableName] = null;\r\n        }\r\n        return result;\r\n    });\r\n    if (isStart) {\r\n        datas.childGestos = moveables.map(function (child) { return child.state.gestos[ableName]; });\r\n    }\r\n    return {\r\n        eventParams: eventParams,\r\n        childEvents: childEvents,\r\n    };\r\n}\r\nfunction triggerChildAbles(moveable, able, type, e, eachEvent, callback) {\r\n    if (eachEvent === void 0) { eachEvent = function (_, ev) { return ev; }; }\r\n    var isEnd = !!type.match(/End$/g);\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childs = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var childEvent = ev;\r\n        childEvent = eachEvent(childMoveable, ev);\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        result && callback && callback(childMoveable, ev, result, i);\r\n        if (isEnd) {\r\n            childMoveable.state.gestos = {};\r\n        }\r\n        return result;\r\n    });\r\n    return childs;\r\n}\r\nfunction startChildDist(moveable, child, parentDatas, childEvent) {\r\n    var fixedDirection = parentDatas.fixedDirection;\r\n    var fixedPosition = parentDatas.fixedPosition;\r\n    var startPositions = childEvent.datas.startPositions || getAbsolutePosesByState(child.state);\r\n    var pos = getPosByDirection(startPositions, fixedDirection);\r\n    var _a = __read(calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3), 2), originalX = _a[0], originalY = _a[1];\r\n    childEvent.datas.originalX = originalX;\r\n    childEvent.datas.originalY = originalY;\r\n    return childEvent;\r\n}\n\nfunction renderDirectionControlsByInfos(moveable, ableName, renderDirections, React) {\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var zoom = getProps(moveable.props, ableName).zoom;\r\n    var degRotation = absDegree(rotationRad / Math.PI * 180);\r\n    var directionMap = {};\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    renderDirections.forEach(function (_a) {\r\n        var dir = _a.dir;\r\n        directionMap[dir] = true;\r\n    });\r\n    var directionSign = sign(direction);\r\n    return renderDirections.map(function (_a) {\r\n        var data = _a.data, classNames = _a.classNames, dir = _a.dir;\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes || !directionMap[dir]) {\r\n            return null;\r\n        }\r\n        renderDirectionMap[dir] = true;\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var dataAttrs = {};\r\n        getKeys(data).forEach(function (name) {\r\n            dataAttrs[\"data-\".concat(name)] = data[name];\r\n        });\r\n        return (React.createElement(\"div\", __assign({ className: prefix.apply(void 0, __spreadArray([\"control\", \"direction\", dir, ableName], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir }, dataAttrs, { key: \"direction-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) })));\r\n    });\r\n}\r\nfunction renderDirectionControls(moveable, defaultDirections, ableName, React) {\r\n    var _a = getProps(moveable.props, ableName), _b = _a.renderDirections, directions = _b === void 0 ? defaultDirections : _b, displayAroundControls = _a.displayAroundControls;\r\n    if (!directions) {\r\n        return [];\r\n    }\r\n    var renderDirections = directions === true ? DIRECTIONS : directions;\r\n    return __spreadArray(__spreadArray([], __read((displayAroundControls ? renderAroundControls(moveable, React, ableName, renderDirections) : [])), false), __read(renderDirectionControlsByInfos(moveable, ableName, renderDirections.map(function (dir) {\r\n        return {\r\n            data: {},\r\n            classNames: [],\r\n            dir: dir,\r\n        };\r\n    }), React)), false);\r\n}\r\nfunction renderLine(React, direction, pos1, pos2, zoom, key) {\r\n    var classNames = [];\r\n    for (var _i = 6; _i < arguments.length; _i++) {\r\n        classNames[_i - 6] = arguments[_i];\r\n    }\r\n    var rad = getRad(pos1, pos2);\r\n    var rotation = direction ? (throttle(rad / Math.PI * 180, 15)) % 180 : -1;\r\n    return React.createElement(\"div\", { key: \"line-\".concat(key), className: prefix.apply(void 0, __spreadArray([\"line\", \"direction\", direction ? \"edge\" : \"\", direction], __read(classNames), false)), \"data-rotation\": rotation, \"data-line-key\": key, \"data-direction\": direction, style: getLineStyle(pos1, pos2, zoom, rad) });\r\n}\r\nfunction renderEdgeLines(React, ableName, edge, poses, zoom) {\r\n    var directions = edge === true ? DIRECTIONS4 : edge;\r\n    return directions.map(function (direction, i) {\r\n        var _a = __read(DIRECTION_INDEXES[direction], 2), index1 = _a[0], index2 = _a[1];\r\n        if (index2 == null) {\r\n            return;\r\n        }\r\n        return renderLine(React, direction, poses[index1], poses[index2], zoom, \"\".concat(ableName, \"Edge\").concat(i), ableName);\r\n    }).filter(Boolean);\r\n}\r\nfunction getRenderDirections(ableName) {\r\n    return function (moveable, React) {\r\n        var edge = getProps(moveable.props, ableName).edge;\r\n        if (edge && (edge === true || edge.length)) {\r\n            return __spreadArray(__spreadArray([], __read(renderEdgeLines(React, ableName, edge, moveable.getState().renderPoses, moveable.props.zoom)), false), __read(renderDiagonalDirections(moveable, ableName, React)), false);\r\n        }\r\n        return renderAllDirections(moveable, ableName, React);\r\n    };\r\n}\r\nfunction renderAllDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\r\n}\r\nfunction renderDiagonalDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\r\n}\r\nfunction renderAroundControls(moveable, React, ableName, renderDirections) {\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    var zoom = moveable.props.zoom;\r\n    var directionSign = sign(direction);\r\n    var degRotation = rotationRad / Math.PI * 180;\r\n    return (renderDirections || getKeys(renderDirectionMap)).map(function (dir) {\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes) {\r\n            return null;\r\n        }\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var classNames = [\"around-control\"];\r\n        if (ableName) {\r\n            classNames.push(\"direction\", ableName);\r\n        }\r\n        return (React.createElement(\"div\", { className: prefix.apply(void 0, __spreadArray([], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir, key: \"direction-around-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) }));\r\n    });\r\n}\n\nfunction checkBoundPoses(bounds, verticalPoses, horizontalPoses) {\r\n    var _a = bounds || {}, _b = _a.position, position = _b === void 0 ? \"client\" : _b, _c = _a.left, left = _c === void 0 ? -Infinity : _c, _d = _a.top, top = _d === void 0 ? -Infinity : _d, _e = _a.right, right = _e === void 0 ? Infinity : _e, _f = _a.bottom, bottom = _f === void 0 ? Infinity : _f;\r\n    var nextBounds = {\r\n        position: position,\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n    };\r\n    return {\r\n        vertical: checkBounds(nextBounds, verticalPoses, true),\r\n        horizontal: checkBounds(nextBounds, horizontalPoses, false),\r\n    };\r\n}\r\nfunction getBounds(moveable, externalBounds) {\r\n    var _a = moveable.state, _b = _a.containerClientRect, containerHeight = _b.clientHeight, containerWidth = _b.clientWidth, clientLeft = _b.clientLeft, clientTop = _b.clientTop, _c = _a.snapOffset, snapOffsetLeft = _c.left, snapOffsetTop = _c.top, snapOffsetRight = _c.right, snapOffsetBottom = _c.bottom;\r\n    var bounds = externalBounds || moveable.props.bounds || {};\r\n    var position = bounds.position || \"client\";\r\n    var isCSS = position === \"css\";\r\n    var _d = bounds.left, left = _d === void 0 ? -Infinity : _d, _e = bounds.top, top = _e === void 0 ? -Infinity : _e;\r\n    var _f = bounds.right, right = _f === void 0 ? isCSS ? -Infinity : Infinity : _f, _g = bounds.bottom, bottom = _g === void 0 ? isCSS ? -Infinity : Infinity : _g;\r\n    if (isCSS) {\r\n        right = containerWidth + snapOffsetRight - snapOffsetLeft - right;\r\n        bottom = containerHeight + snapOffsetBottom - snapOffsetTop - bottom;\r\n    }\r\n    return {\r\n        left: left + snapOffsetLeft - clientLeft,\r\n        right: right + snapOffsetLeft - clientLeft,\r\n        top: top + snapOffsetTop - clientTop,\r\n        bottom: bottom + snapOffsetTop - clientTop,\r\n    };\r\n}\r\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var _b = __read(endPos, 2), endX = _b[0], endY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    var verticalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    else if (dx === 0) {\r\n        if (isBottom) {\r\n            if (bottom < endY) {\r\n                horizontalInfo.pos = bottom;\r\n                horizontalInfo.offset = endY - bottom;\r\n            }\r\n        }\r\n        else {\r\n            if (top > endY) {\r\n                horizontalInfo.pos = top;\r\n                horizontalInfo.offset = endY - top;\r\n            }\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isRight) {\r\n            if (right < endX) {\r\n                verticalInfo.pos = right;\r\n                verticalInfo.offset = endX - right;\r\n            }\r\n        }\r\n        else {\r\n            if (left > endX) {\r\n                verticalInfo.pos = left;\r\n                verticalInfo.offset = endX - left;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isBound = false;\r\n        if (isRight && right <= endX) {\r\n            y = a * right + b;\r\n            x = right;\r\n            isBound = true;\r\n        }\r\n        else if (!isRight && endX <= left) {\r\n            y = a * left + b;\r\n            x = left;\r\n            isBound = true;\r\n        }\r\n        if (isBound) {\r\n            if (y < top || y > bottom) {\r\n                isBound = false;\r\n            }\r\n        }\r\n        if (!isBound) {\r\n            if (isBottom && bottom <= endY) {\r\n                y = bottom;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n            else if (!isBottom && endY <= top) {\r\n                y = top;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n        }\r\n        if (isBound) {\r\n            verticalInfo.isBound = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isBound = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction checkBounds(bounds, poses, isVertical) {\r\n    // 0   [100 - 200]  300\r\n    var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\r\n    var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"];\r\n    // 450\r\n    var minPos = Math.min.apply(Math, __spreadArray([], __read(poses), false));\r\n    var maxPos = Math.max.apply(Math, __spreadArray([], __read(poses), false));\r\n    var boundInfos = [];\r\n    if (startBoundPos + 1 > minPos) {\r\n        boundInfos.push({\r\n            direction: \"start\",\r\n            isBound: true,\r\n            offset: minPos - startBoundPos,\r\n            pos: startBoundPos,\r\n        });\r\n    }\r\n    if (endBoundPos - 1 < maxPos) {\r\n        boundInfos.push({\r\n            direction: \"end\",\r\n            isBound: true,\r\n            offset: maxPos - endBoundPos,\r\n            pos: endBoundPos,\r\n        });\r\n    }\r\n    if (!boundInfos.length) {\r\n        boundInfos.push({\r\n            isBound: false,\r\n            offset: 0,\r\n            pos: 0,\r\n        });\r\n    }\r\n    return boundInfos.sort(function (a, b) { return abs(b.offset) - abs(a.offset); });\r\n}\r\nfunction isBoundRotate$1(relativePoses, boundRect, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return nextPoses.some(function (pos) {\r\n        return (pos[0] < boundRect.left && abs(pos[0] - boundRect.left) > 0.1)\r\n            || (pos[0] > boundRect.right && abs(pos[0] - boundRect.right) > 0.1)\r\n            || (pos[1] < boundRect.top && abs(pos[1] - boundRect.top) > 0.1)\r\n            || (pos[1] > boundRect.bottom && abs(pos[1] - boundRect.bottom) > 0.1);\r\n    });\r\n}\r\nfunction boundRotate(vec, boundPos, index) {\r\n    var r = getDistSize(vec);\r\n    var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\r\n    return [nextPos, -nextPos].sort(function (a, b) {\r\n        return abs(a - vec[index ? 0 : 1]) - abs(b - vec[index ? 0 : 1]);\r\n    }).map(function (pos) {\r\n        return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\r\n    });\r\n}\r\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    if (!moveable.props.bounds) {\r\n        return [];\r\n    }\r\n    var rad = rotation * Math.PI / 180;\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = right - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = bottom - origin[1];\r\n    var boundRect = {\r\n        left: relativeLeft,\r\n        top: relativeTop,\r\n        right: relativeRight,\r\n        bottom: relativeBottom,\r\n    };\r\n    if (!isBoundRotate$1(nextPoses, boundRect, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    [\r\n        [relativeLeft, 0],\r\n        [relativeRight, 0],\r\n        [relativeTop, 1],\r\n        [relativeBottom, 1],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 2), boundPos = _b[0], index = _b[1];\r\n        nextPoses.forEach(function (nextPos) {\r\n            var relativeRad1 = getRad([0, 0], nextPos);\r\n            result.push.apply(result, __spreadArray([], __read(boundRotate(nextPos, boundPos, index)\r\n                .map(function (relativeRad2) { return rad + relativeRad2 - relativeRad1; })\r\n                .filter(function (nextRad) { return !isBoundRotate$1(prevPoses, boundRect, nextRad); })\r\n                .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n        });\r\n    });\r\n    return result;\r\n}\n\nvar VERTICAL_NAMES = [\"left\", \"right\", \"center\"];\r\nvar HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"];\r\nvar SNAP_SKIP_NAMES_MAP = {\r\n    \"left\": \"start\",\r\n    \"right\": \"end\",\r\n    \"center\": \"center\",\r\n    \"top\": \"start\",\r\n    \"bottom\": \"end\",\r\n    \"middle\": \"center\",\r\n};\r\nvar VERTICAL_NAMES_MAP = {\r\n    start: \"left\",\r\n    end: \"right\",\r\n    center: \"center\",\r\n};\r\nvar HORIZONTAL_NAMES_MAP = {\r\n    start: \"top\",\r\n    end: \"bottom\",\r\n    center: \"middle\",\r\n};\r\nfunction getInitialBounds() {\r\n    return {\r\n        left: false,\r\n        top: false,\r\n        right: false,\r\n        bottom: false,\r\n    };\r\n}\r\nfunction hasGuidelines(moveable, ableName) {\r\n    var _a = moveable.props, snappable = _a.snappable, bounds = _a.bounds, innerBounds = _a.innerBounds, verticalGuidelines = _a.verticalGuidelines, horizontalGuidelines = _a.horizontalGuidelines, snapGridWidth = _a.snapGridWidth, snapGridHeight = _a.snapGridHeight, _b = moveable.state, guidelines = _b.guidelines, enableSnap = _b.enableSnap;\r\n    if (!snappable ||\r\n        !enableSnap ||\r\n        (ableName && snappable !== true && snappable.indexOf(ableName) < 0)) {\r\n        return false;\r\n    }\r\n    if (snapGridWidth ||\r\n        snapGridHeight ||\r\n        bounds ||\r\n        innerBounds ||\r\n        (guidelines && guidelines.length) ||\r\n        (verticalGuidelines && verticalGuidelines.length) ||\r\n        (horizontalGuidelines && horizontalGuidelines.length)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction getSnapDirections(snapDirections) {\r\n    if (snapDirections === false) {\r\n        return {};\r\n    }\r\n    else if (snapDirections === true || !snapDirections) {\r\n        return { left: true, right: true, top: true, bottom: true };\r\n    }\r\n    return snapDirections;\r\n}\r\nfunction mapSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapDirections = getSnapDirections(snapDirections);\r\n    var nextSnapPoses = {};\r\n    for (var name_1 in nextSnapDirections) {\r\n        if (name_1 in snapPoses && nextSnapDirections[name_1]) {\r\n            nextSnapPoses[name_1] = snapPoses[name_1];\r\n        }\r\n    }\r\n    return nextSnapPoses;\r\n}\r\nfunction splitSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\r\n    var horizontalNames = HORIZONTAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    var verticalNames = VERTICAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    return {\r\n        horizontalNames: horizontalNames,\r\n        verticalNames: verticalNames,\r\n        horizontal: horizontalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n        vertical: verticalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n    };\r\n}\r\nfunction calculateContainerPos(rootMatrix, containerRect, n) {\r\n    var clientPos = calculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\r\n    return [\r\n        containerRect.left + clientPos[0],\r\n        containerRect.top + clientPos[1],\r\n    ];\r\n}\r\nfunction solveLineConstants(_a) {\r\n    var _b = __read(_a, 2), point1 = _b[0], point2 = _b[1];\r\n    var dx = point2[0] - point1[0];\r\n    var dy = point2[1] - point1[1];\r\n    if (Math.abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (Math.abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    // b > 0\r\n    // ax + by + c = 0\r\n    var a = 0;\r\n    var b = 0;\r\n    var c = 0;\r\n    if (!dx) {\r\n        // -x + 1 = 0\r\n        a = -1;\r\n        c = point1[0];\r\n    }\r\n    else if (!dy) {\r\n        // y - 1 = 0\r\n        b = 1;\r\n        c = -point1[1];\r\n    }\r\n    else {\r\n        // y = -a(x - x1) + y1\r\n        // ax + y + a * x1 - y1 = 0\r\n        a = -dy / dx;\r\n        b = 1;\r\n        c = a * point1[0] - point1[1];\r\n    }\r\n    return [a, b, c].map(function (v) { return throttle(v, TINY_NUM$1); });\r\n}\n\nvar NAME_snapRotationThreshold = \"snapRotationThreshold\";\r\nvar NAME_snapRotationDegrees = \"snapRotationDegrees\";\r\nvar NAME_snapHorizontalThreshold = \"snapHorizontalThreshold\";\r\nvar NAME_snapVerticalThreshold = \"snapVerticalThreshold\";\n\nfunction checkMoveableSnapPoses(moveable, posesX, posesY, dirXs, dirYs, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var _a;\r\n    if (dirXs === void 0) { dirXs = []; }\r\n    if (dirYs === void 0) { dirYs = []; }\r\n    var props = moveable.props;\r\n    var snapThresholdMultiples = ((_a = moveable.state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) || [1, 1];\r\n    var snapHorizontalThreshold = selectValue(customSnapHorizontalThreshold, props[NAME_snapHorizontalThreshold], 5);\r\n    var snapVerticalThreshold = selectValue(customSnapVerticalThreshold, props[NAME_snapVerticalThreshold], 5);\r\n    return checkSnapPoses(moveable.state.guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, snapThresholdMultiples);\r\n}\r\nfunction checkSnapPoses(guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    return {\r\n        vertical: checkSnap(guidelines, \"vertical\", posesX, snapVerticalThreshold * multiples[0], dirXs),\r\n        horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapHorizontalThreshold * multiples[1], dirYs),\r\n    };\r\n}\r\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\r\n    var _a = __read(endPos, 2), endX = _a[0], endY = _a[1];\r\n    var _b = __read(startPos, 2), startX = _b[0], startY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    dx = getTinyDist(dx);\r\n    dy = getTinyDist(dy);\r\n    var verticalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    var _d = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : [], [], [], undefined, undefined), verticalSnapInfo = _d.vertical, horizontalSnapInfo = _d.horizontal;\r\n    verticalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isRight ? pos >= startX : pos <= startX;\r\n    });\r\n    horizontalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isBottom ? pos >= startY : pos <= startY;\r\n    });\r\n    verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\r\n    horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\r\n    var _e = getNearestSnapGuidelineInfo(verticalSnapInfo), isVerticalSnap = _e.isSnap, verticalGuideline = _e.guideline;\r\n    var _f = getNearestSnapGuidelineInfo(horizontalSnapInfo), isHorizontalSnap = _f.isSnap, horizontalGuideline = _f.guideline;\r\n    var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\r\n    var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\r\n    if (dx === 0) {\r\n        if (isHorizontalSnap) {\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = horizontalGuideline.pos[1];\r\n            horizontalInfo.offset = endY - horizontalInfo.pos;\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isVerticalSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = verticalPos;\r\n            verticalInfo.offset = endX - verticalPos;\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isSnap = false;\r\n        if (isVerticalSnap) {\r\n            x = verticalPos;\r\n            y = a * x + b;\r\n            isSnap = true;\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            y = horizontalPos;\r\n            x = (y - b) / a;\r\n            isSnap = true;\r\n        }\r\n        if (isSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction getStringDirection(dir) {\r\n    var stringDirection = \"\";\r\n    if (dir === -1 || dir === \"top\" || dir === \"left\") {\r\n        stringDirection = \"start\";\r\n    }\r\n    else if (dir === 0 || dir === \"center\" || dir === \"middle\") {\r\n        stringDirection = \"center\";\r\n    }\r\n    else if (dir === 1 || dir === \"right\" || dir === \"bottom\") {\r\n        stringDirection = \"end\";\r\n    }\r\n    return stringDirection;\r\n}\r\nfunction checkSnaps(moveable, rect, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\r\n    var result = checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, poses.verticalNames.map(function (name) { return getStringDirection(name); }), poses.horizontalNames.map(function (name) { return getStringDirection(name); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var horizontalDirection = getStringDirection(poses.horizontalNames[result.horizontal.index]);\r\n    var verticalDirection = getStringDirection(poses.verticalNames[result.vertical.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction getNearestSnapGuidelineInfo(snapInfo) {\r\n    var isSnap = snapInfo.isSnap;\r\n    if (!isSnap) {\r\n        return {\r\n            isSnap: false,\r\n            offset: 0,\r\n            dist: -1,\r\n            pos: 0,\r\n            guideline: null,\r\n        };\r\n    }\r\n    var posInfo = snapInfo.posInfos[0];\r\n    var guidelineInfo = posInfo.guidelineInfos[0];\r\n    var offset = guidelineInfo.offset;\r\n    var dist = guidelineInfo.dist;\r\n    var guideline = guidelineInfo.guideline;\r\n    return {\r\n        isSnap: isSnap,\r\n        offset: offset,\r\n        dist: dist,\r\n        pos: posInfo.pos,\r\n        guideline: guideline,\r\n    };\r\n}\r\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold, dirs) {\r\n    var _a, _b;\r\n    if (dirs === void 0) { dirs = []; }\r\n    if (!guidelines || !guidelines.length) {\r\n        return {\r\n            isSnap: false,\r\n            index: -1,\r\n            direction: \"\",\r\n            posInfos: [],\r\n        };\r\n    }\r\n    var isVertical = targetType === \"vertical\";\r\n    var posType = isVertical ? 0 : 1;\r\n    var snapPosInfos = targetPoses.map(function (targetPos, index) {\r\n        var direction = dirs[index] || \"\";\r\n        var guidelineInfos = guidelines.map(function (guideline) {\r\n            var pos = guideline.pos;\r\n            var offset = targetPos - pos[posType];\r\n            return {\r\n                offset: offset,\r\n                dist: abs(offset),\r\n                guideline: guideline,\r\n                direction: direction,\r\n            };\r\n        }).filter(function (_a) {\r\n            var guideline = _a.guideline, dist = _a.dist;\r\n            var type = guideline.type;\r\n            if (type !== targetType\r\n                || dist > snapThreshold) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }).sort(function (a, b) { return a.dist - b.dist; });\r\n        return {\r\n            pos: targetPos,\r\n            index: index,\r\n            guidelineInfos: guidelineInfos,\r\n            direction: direction,\r\n        };\r\n    }).filter(function (snapPosInfo) {\r\n        return snapPosInfo.guidelineInfos.length > 0;\r\n    }).sort(function (a, b) {\r\n        return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\r\n    });\r\n    var isSnap = snapPosInfos.length > 0;\r\n    return {\r\n        isSnap: isSnap,\r\n        index: isSnap ? snapPosInfos[0].index : -1,\r\n        direction: (_b = (_a = snapPosInfos[0]) === null || _a === void 0 ? void 0 : _a.direction) !== null && _b !== void 0 ? _b : \"\",\r\n        posInfos: snapPosInfos,\r\n    };\r\n}\r\nfunction getSnapInfosByDirection(moveable, \r\n// pos1 pos2 pos3 pos4\r\nposes, snapDirection, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var dirs = [];\r\n    if (snapDirection[0] && snapDirection[1]) {\r\n        dirs = [\r\n            snapDirection,\r\n            [-snapDirection[0], snapDirection[1]],\r\n            [snapDirection[0], -snapDirection[1]],\r\n        ];\r\n    }\r\n    else if (!snapDirection[0] && !snapDirection[1]) {\r\n        [\r\n            [-1, -1],\r\n            [1, -1],\r\n            [1, 1],\r\n            [-1, 1],\r\n        ].forEach(function (dir, i, arr) {\r\n            var nextDir = (arr[i + 1] || arr[0]);\r\n            dirs.push(dir);\r\n            dirs.push([\r\n                (dir[0] + nextDir[0]) / 2,\r\n                (dir[1] + nextDir[1]) / 2,\r\n            ]);\r\n        });\r\n    }\r\n    else {\r\n        if (moveable.props.keepRatio) {\r\n            dirs.push([-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection);\r\n        }\r\n        else {\r\n            dirs.push.apply(dirs, __spreadArray([], __read(getPosesByDirection([\r\n                [-1, -1],\r\n                [1, -1],\r\n                [-1, -1],\r\n                [1, 1],\r\n            ], snapDirection)), false));\r\n            if (dirs.length > 1) {\r\n                dirs.push([\r\n                    (dirs[0][0] + dirs[1][0]) / 2,\r\n                    (dirs[0][1] + dirs[1][1]) / 2,\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    var nextPoses = dirs.map(function (dir) { return getPosByDirection(poses, dir); });\r\n    var xs = nextPoses.map(function (pos) { return pos[0]; });\r\n    var ys = nextPoses.map(function (pos) { return pos[1]; });\r\n    var result = checkMoveableSnapPoses(moveable, xs, ys, dirs.map(function (dir) { return getStringDirection(dir[0]); }), dirs.map(function (dir) { return getStringDirection(dir[1]); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var verticalDirection = getStringDirection(dirs.map(function (dir) { return dir[0]; })[result.vertical.index]);\r\n    var horizontalDirection = getStringDirection(dirs.map(function (dir) { return dir[1]; })[result.horizontal.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction checkSnapBoundPriority(a, b) {\r\n    var aDist = abs(a.offset);\r\n    var bDist = abs(b.offset);\r\n    if (a.isBound && b.isBound) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isBound) {\r\n        return -1;\r\n    }\r\n    else if (b.isBound) {\r\n        return 1;\r\n    }\r\n    else if (a.isSnap && b.isSnap) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isSnap) {\r\n        return -1;\r\n    }\r\n    else if (b.isSnap) {\r\n        return 1;\r\n    }\r\n    else if (aDist < TINY_NUM) {\r\n        return 1;\r\n    }\r\n    else if (bDist < TINY_NUM) {\r\n        return -1;\r\n    }\r\n    return aDist - bDist;\r\n}\r\nfunction getNearOffsetInfo(offsets, index) {\r\n    return offsets.slice().sort(function (a, b) {\r\n        var aSign = a.sign[index];\r\n        var bSign = b.sign[index];\r\n        var aOffset = a.offset[index];\r\n        var bOffset = b.offset[index];\r\n        // -1 The positions of a and b do not change.\r\n        // 1 The positions of a and b are reversed.\r\n        if (!aSign) {\r\n            return 1;\r\n        }\r\n        else if (!bSign) {\r\n            return -1;\r\n        }\r\n        return checkSnapBoundPriority({ isBound: a.isBound, isSnap: a.isSnap, offset: aOffset }, { isBound: b.isBound, isSnap: b.isSnap, offset: bOffset });\r\n    })[0];\r\n}\r\nfunction getCheckSnapDirections(direction, fixedDirection, keepRatio) {\r\n    var directions = [];\r\n    // const fixedDirection = [-direction[0], -direction[1]];\r\n    if (keepRatio) {\r\n        if (abs(fixedDirection[0]) !== 1 || abs(fixedDirection[1]) !== 1) {\r\n            directions.push([fixedDirection, [-1, -1]], [fixedDirection, [-1, 1]], [fixedDirection, [1, -1]], [fixedDirection, [1, 1]]);\r\n        }\r\n        else {\r\n            directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\r\n        }\r\n        directions.push([fixedDirection, direction]);\r\n    }\r\n    else {\r\n        if ((direction[0] && direction[1]) || (!direction[0] && !direction[1])) {\r\n            var endDirection_1 = direction[0] ? direction : [1, 1];\r\n            [1, -1].forEach(function (signX) {\r\n                [1, -1].forEach(function (signY) {\r\n                    var nextDirection = [signX * endDirection_1[0], signY * endDirection_1[1]];\r\n                    if (fixedDirection[0] === nextDirection[0]\r\n                        && fixedDirection[1] === nextDirection[1]) {\r\n                        return;\r\n                    }\r\n                    directions.push([fixedDirection, nextDirection]);\r\n                });\r\n            });\r\n        }\r\n        else if (direction[0]) {\r\n            var signs = abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [fixedDirection[0], -1],\r\n                    [sign * direction[0], -1],\r\n                ], [\r\n                    [fixedDirection[0], 0],\r\n                    [sign * direction[0], 0],\r\n                ], [\r\n                    [fixedDirection[0], 1],\r\n                    [sign * direction[0], 1],\r\n                ]);\r\n            });\r\n        }\r\n        else if (direction[1]) {\r\n            var signs = abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [-1, fixedDirection[1]],\r\n                    [-1, sign * direction[1]],\r\n                ], [\r\n                    [0, fixedDirection[1]],\r\n                    [0, sign * direction[1]],\r\n                ], [\r\n                    [1, fixedDirection[1]],\r\n                    [1, sign * direction[1]],\r\n                ]);\r\n            });\r\n        }\r\n    }\r\n    return directions;\r\n}\n\nfunction isStartLine(dot, line) {\r\n    // l    o     => true\r\n    // o    l    => false\r\n    var cx = average([line[0][0], line[1][0]]);\r\n    var cy = average([line[0][1], line[1][1]]);\r\n    return {\r\n        vertical: cx <= dot[0],\r\n        horizontal: cy <= dot[1],\r\n    };\r\n}\r\nfunction hitTestLine(dot, _a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var test1;\r\n    var test2;\r\n    if (!dx) {\r\n        test1 = pos1[0];\r\n        test2 = dot[0];\r\n    }\r\n    else if (!dy) {\r\n        test1 = pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    else {\r\n        var a = dy / dx;\r\n        // y = a * (x - pos1) + pos1\r\n        test1 = a * (dot[0] - pos1[0]) + pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    return test1 - test2;\r\n}\r\nfunction isSameStartLine(dots, line, centerSign, error) {\r\n    if (error === void 0) { error = TINY_NUM; }\r\n    return dots.every(function (dot) {\r\n        var value = hitTestLine(dot, line);\r\n        var sign = value <= 0;\r\n        return sign === centerSign || abs(value) <= error;\r\n    });\r\n}\r\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\r\n    if (threshold === void 0) { threshold = 0; }\r\n    if ((isStart && start - threshold <= pos)\r\n        || (!isStart && pos <= end + threshold)) {\r\n        // false 402 565 602 => 37 ([0, 37])\r\n        // true 400 524.9712603540036 600 => 124 ([124, 0])\r\n        // true 400 410 600 => 10 ([10, 0])\r\n        return {\r\n            isBound: true,\r\n            offset: isStart ? start - pos : end - pos,\r\n        };\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction checkInnerBound(moveable, _a) {\r\n    var line = _a.line, centerSign = _a.centerSign, verticalSign = _a.verticalSign, horizontalSign = _a.horizontalSign, lineConstants = _a.lineConstants;\r\n    var bounds = moveable.props.innerBounds;\r\n    if (!bounds) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    if (isSameStartLine([\r\n        [left, top],\r\n        [left + width, top],\r\n        [left, top + height],\r\n        [left + width, top + height],\r\n    ], line, centerSign)) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    // test vertical\r\n    var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\r\n    var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign);\r\n    // test horizontal\r\n    var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\r\n    var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\r\n    var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\r\n    var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\r\n    var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\r\n    var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\r\n    var offset = [0, 0];\r\n    var isBound = false;\r\n    var isAllBound = false;\r\n    if (abs(horizontalOffset) < abs(verticalOffset)) {\r\n        offset = [verticalOffset, 0];\r\n        isBound = isVerticalBound;\r\n        isAllBound = isAllVerticalBound;\r\n    }\r\n    else {\r\n        offset = [0, horizontalOffset];\r\n        isBound = isHorizontalBound;\r\n        isAllBound = isAllHorizontalBound;\r\n    }\r\n    return {\r\n        isAllBound: isAllBound,\r\n        isVerticalBound: isVerticalBound,\r\n        isHorizontalBound: isHorizontalBound,\r\n        isBound: isBound,\r\n        offset: offset,\r\n    };\r\n}\r\nfunction checkLineBoundCollision(line, _a, boundLine, isStart, threshold, isRender) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    var dot1 = line[0];\r\n    // const dot2 = line[1];\r\n    var boundDot1 = boundLine[0];\r\n    var boundDot2 = boundLine[1];\r\n    // const dy1 = getTinyDist(dot2[1] - dot1[1]);\r\n    // const dx1 = getTinyDist(dot2[0] - dot1[0]);\r\n    var dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\r\n    var dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\r\n    var hasDx = b;\r\n    var hasDy = a;\r\n    var slope = -a / b;\r\n    // lineConstants\r\n    // ax + by + c = 0\r\n    // dx2 or dy2 is zero\r\n    if (!dx2) {\r\n        // vertical\r\n        // by + c = 0\r\n        if (isRender && !hasDy) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDx) {\r\n            // ax + by + c = 0\r\n            // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\r\n            var y = slope * (boundDot1[0] - dot1[0]) + dot1[1];\r\n            // boundDot1[1] <= y  <= boundDot2[1]\r\n            return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\r\n        }\r\n        else {\r\n            // ax + c = 0\r\n            var offset = boundDot1[0] - dot1[0];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    else if (!dy2) {\r\n        // horizontal\r\n        if (isRender && !hasDx) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDy) {\r\n            // y = a * (x - x1) + y1\r\n            // x = (y - y1) / a + x1\r\n            // const a = dy1 / dx1;\r\n            // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\r\n            var x = (boundDot1[1] - dot1[1]) / slope + dot1[0];\r\n            // boundDot1[0] <= x && x <= boundDot2[0]\r\n            return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\r\n        }\r\n        else {\r\n            var offset = boundDot1[1] - dot1[1];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction getInnerBoundInfo(moveable, lineInfos, datas) {\r\n    return lineInfos.map(function (info) {\r\n        var _a = checkInnerBound(moveable, info), isBound = _a.isBound, offset = _a.offset, isVerticalBound = _a.isVerticalBound, isHorizontalBound = _a.isHorizontalBound;\r\n        var multiple = info.multiple;\r\n        var sizeOffset = getDragDist({\r\n            datas: datas,\r\n            distX: offset[0],\r\n            distY: offset[1],\r\n        }).map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isBound,\r\n            isVerticalBound: isVerticalBound,\r\n            isHorizontalBound: isHorizontalBound,\r\n            isSnap: false,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\r\n    var _a;\r\n    var lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(function (info) {\r\n        return __assign(__assign({}, info), { multiple: info.multiple.map(function (dir) { return abs(dir) * 2; }) });\r\n    });\r\n    var innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\r\n    var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\r\n    var verticalOffset = 0;\r\n    var horizontalOffset = 0;\r\n    var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\r\n    var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\r\n    if (isVerticalBound || isHorizontalBound) {\r\n        _a = __read(getInverseDragDist({\r\n            datas: datas,\r\n            distX: -widthOffsetInfo.offset[0],\r\n            distY: -heightOffsetInfo.offset[1],\r\n        }), 2), verticalOffset = _a[0], horizontalOffset = _a[1];\r\n    }\r\n    return {\r\n        vertical: {\r\n            isBound: isVerticalBound,\r\n            offset: verticalOffset,\r\n        },\r\n        horizontal: {\r\n            isBound: isHorizontalBound,\r\n            offset: horizontalOffset,\r\n        },\r\n    };\r\n}\r\nfunction getCheckSnapLineDirections(direction, keepRatio) {\r\n    var lineDirections = [];\r\n    var x = direction[0];\r\n    var y = direction[1];\r\n    if (x && y) {\r\n        lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\r\n    }\r\n    else if (x) {\r\n        // vertcal\r\n        lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\r\n        }\r\n    }\r\n    else if (y) {\r\n        // horizontal\r\n        lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\r\n        }\r\n    }\r\n    else {\r\n        // [0, 0] to all direction\r\n        lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\r\n    }\r\n    return lineDirections;\r\n}\r\nfunction getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio) {\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    var virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\r\n    var center = getPosByDirection(virtualPoses, [0, 0]);\r\n    return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\r\n        var _b = __read(_a, 3), multiple = _b[0], dir1 = _b[1], dir2 = _b[2];\r\n        var virtualLine = [\r\n            getPosByDirection(virtualPoses, dir1),\r\n            getPosByDirection(virtualPoses, dir2),\r\n        ];\r\n        var lineConstants = solveLineConstants(virtualLine);\r\n        var _c = isStartLine(center, virtualLine), verticalSign = _c.vertical, horizontalSign = _c.horizontal;\r\n        var centerSign = hitTestLine(center, virtualLine) <= 0;\r\n        return {\r\n            multiple: multiple,\r\n            centerSign: centerSign,\r\n            verticalSign: verticalSign,\r\n            horizontalSign: horizontalSign,\r\n            lineConstants: lineConstants,\r\n            line: [\r\n                getPosByDirection(poses, dir1),\r\n                getPosByDirection(poses, dir2),\r\n            ],\r\n        };\r\n    });\r\n}\r\nfunction isBoundRotate(relativePoses, boundDots, center, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].some(function (line) {\r\n        var centerSign = hitTestLine(center, line) <= 0;\r\n        return !isSameStartLine(boundDots, line, centerSign);\r\n    });\r\n}\r\nfunction getDistPointLine(_a) {\r\n    // x = 0, y = 0\r\n    // d = (ax + by + c) / root(a2 + b2)\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return abs(pos1[0]);\r\n    }\r\n    if (!dy) {\r\n        return abs(pos1[1]);\r\n    }\r\n    // y - y1 = a(x - x1)\r\n    // 0 = ax -y + -a * x1 + y1\r\n    var a = dy / dx;\r\n    return abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\r\n}\r\nfunction solveReverseLine(_a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return [pos1[0], 0];\r\n    }\r\n    if (!dy) {\r\n        return [0, pos1[1]];\r\n    }\r\n    var a = dy / dx;\r\n    // y - y1 = a (x  - x1)\r\n    // y = ax - a * x1 + y1\r\n    var b = -a * pos1[0] + pos1[1];\r\n    // y = ax + b = -1/a x\r\n    // x = -b / (a + 1 / a)\r\n    // y = b / (1 + 1 / a^2)\r\n    return [\r\n        -b / (a + 1 / a),\r\n        b / ((a * a) + 1),\r\n    ];\r\n}\r\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    var bounds = moveable.props.innerBounds;\r\n    var rad = rotation * Math.PI / 180;\r\n    if (!bounds) {\r\n        return [];\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = left + width - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = top + height - origin[1];\r\n    var dots = [\r\n        [relativeLeft, relativeTop],\r\n        [relativeRight, relativeTop],\r\n        [relativeLeft, relativeBottom],\r\n        [relativeRight, relativeBottom],\r\n    ];\r\n    var center = getPosByDirection(nextPoses, [0, 0]);\r\n    if (!isBoundRotate(nextPoses, dots, center, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var dotInfos = dots.map(function (dot) { return [\r\n        getDistSize(dot),\r\n        getRad([0, 0], dot),\r\n    ]; });\r\n    [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].forEach(function (line) {\r\n        var lineRad = getRad([0, 0], solveReverseLine(line));\r\n        var lineDist = getDistPointLine(line);\r\n        result.push.apply(result, __spreadArray([], __read(dotInfos\r\n            .filter(function (_a) {\r\n            var _b = __read(_a, 1), dotDist = _b[0];\r\n            return dotDist && lineDist <= dotDist;\r\n        })\r\n            .map(function (_a) {\r\n            var _b = __read(_a, 2), dotDist = _b[0], dotRad = _b[1];\r\n            var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\r\n            var nextRad1 = dotRad + distRad;\r\n            var nextRad2 = dotRad - distRad;\r\n            return [\r\n                rad + nextRad1 - lineRad,\r\n                rad + nextRad2 - lineRad,\r\n            ];\r\n        })\r\n            .reduce(function (prev, cur) {\r\n            prev.push.apply(prev, __spreadArray([], __read(cur), false));\r\n            return prev;\r\n        }, [])\r\n            .filter(function (nextRad) { return !isBoundRotate(prevPoses, dots, center, nextRad); })\r\n            .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n    });\r\n    return result;\r\n}\r\nfunction checkInnerBoundPoses(moveable) {\r\n    var innerBounds = moveable.props.innerBounds;\r\n    var boundMap = getInitialBounds();\r\n    if (!innerBounds) {\r\n        return {\r\n            boundMap: boundMap,\r\n            vertical: [],\r\n            horizontal: [],\r\n        };\r\n    }\r\n    var _a = moveable.getRect(), pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    var poses = [pos1, pos2, pos3, pos4];\r\n    var center = getPosByDirection(poses, [0, 0]);\r\n    var left = innerBounds.left, top = innerBounds.top, width = innerBounds.width, height = innerBounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    var lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\r\n    var horizontalPoses = [];\r\n    var verticalPoses = [];\r\n    lineInfos.forEach(function (lineInfo) {\r\n        var line = lineInfo.line, lineConstants = lineInfo.lineConstants;\r\n        var _a = isStartLine(center, line), isHorizontalStart = _a.horizontal, isVerticalStart = _a.vertical;\r\n        // test vertical\r\n        var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\r\n        var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true);\r\n        // test horizontal\r\n        var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\r\n        var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\r\n        if (topBoundInfo.isBound && !boundMap.top) {\r\n            horizontalPoses.push(top);\r\n            boundMap.top = true;\r\n        }\r\n        if (bottomBoundInfo.isBound && !boundMap.bottom) {\r\n            horizontalPoses.push(top + height);\r\n            boundMap.bottom = true;\r\n        }\r\n        if (leftBoundInfo.isBound && !boundMap.left) {\r\n            verticalPoses.push(left);\r\n            boundMap.left = true;\r\n        }\r\n        if (rightBoundInfo.isBound && !boundMap.right) {\r\n            verticalPoses.push(left + width);\r\n            boundMap.right = true;\r\n        }\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        horizontal: horizontalPoses,\r\n        vertical: verticalPoses,\r\n    };\r\n}\n\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    if (!dx) {\r\n        // y = 0 * x + b\r\n        // only horizontal\r\n        if (!isVertical) {\r\n            return [0, snapOffset];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    if (!dy) {\r\n        // only vertical\r\n        if (isVertical) {\r\n            return [snapOffset, 0];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    // y = ax + b\r\n    var a = dy / dx;\r\n    var b = pos1[1] - a * pos1[0];\r\n    if (isVertical) {\r\n        // y = a * x + b\r\n        var y = a * (pos2[0] + snapOffset) + b;\r\n        return [snapOffset, y - pos2[1]];\r\n    }\r\n    else {\r\n        // x = (y - b) / a\r\n        var x = (pos2[1] + snapOffset - b) / a;\r\n        return [x - pos2[0], snapOffset];\r\n    }\r\n}\r\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\r\n    var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\r\n    if (!sizeOffset) {\r\n        return {\r\n            isOutside: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var size = getDist$1(pos1, pos2);\r\n    var dist1 = getDist$1(sizeOffset, pos1);\r\n    var dist2 = getDist$1(sizeOffset, pos2);\r\n    var isOutside = dist1 > size || dist2 > size;\r\n    var _a = __read(getDragDist({\r\n        datas: datas,\r\n        distX: sizeOffset[0],\r\n        distY: sizeOffset[1],\r\n    }), 2), widthOffset = _a[0], heightOffset = _a[1];\r\n    return {\r\n        offset: [widthOffset, heightOffset],\r\n        isOutside: isOutside,\r\n    };\r\n}\r\nfunction getSnapBound(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return getNearestSnapGuidelineInfo(snapInfo).offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\r\n    var _e = __read(_a, 2), distX = _e[0], distY = _e[1];\r\n    var _f = __read(_b, 2), isVerticalBound = _f[0], isHorizontalBound = _f[1];\r\n    var _g = __read(_c, 2), isVerticalSnap = _g[0], isHorizontalSnap = _g[1];\r\n    var _h = __read(_d, 2), verticalOffset = _h[0], horizontalOffset = _h[1];\r\n    var offsetX = -verticalOffset;\r\n    var offsetY = -horizontalOffset;\r\n    if (throttleDragRotate && distX && distY) {\r\n        offsetX = 0;\r\n        offsetY = 0;\r\n        var adjustPoses = [];\r\n        if (isVerticalBound && isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalBound) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        else if (isVerticalSnap && isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalSnap) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        if (adjustPoses.length) {\r\n            adjustPoses.sort(function (a, b) {\r\n                return (getDistSize(minus([distX, distY], a)) -\r\n                    getDistSize(minus([distX, distY], b)));\r\n            });\r\n            var adjustPos = adjustPoses[0];\r\n            if (adjustPos[0] && abs(distX) > TINY_NUM$1) {\r\n                offsetX = -adjustPos[0];\r\n                offsetY =\r\n                    (distY * abs(distX + offsetX)) / abs(distX) -\r\n                        distY;\r\n            }\r\n            else if (adjustPos[1] && abs(distY) > TINY_NUM$1) {\r\n                var prevDistY = distY;\r\n                offsetY = -adjustPos[1];\r\n                offsetX =\r\n                    (distX * abs(distY + offsetY)) / abs(prevDistY) -\r\n                        distX;\r\n            }\r\n            if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\r\n                if (abs(offsetX) > TINY_NUM$1 &&\r\n                    abs(offsetX) < abs(verticalOffset)) {\r\n                    var scale = abs(verticalOffset) / abs(offsetX);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else if (abs(offsetY) > TINY_NUM$1 &&\r\n                    abs(offsetY) < abs(horizontalOffset)) {\r\n                    var scale = abs(horizontalOffset) / abs(offsetY);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else {\r\n                    offsetX = maxOffset(-verticalOffset, offsetX);\r\n                    offsetY = maxOffset(-horizontalOffset, offsetY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        offsetX = distX || isVerticalBound ? -verticalOffset : 0;\r\n        offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\r\n    }\r\n    return [offsetX, offsetY];\r\n}\r\nfunction checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, ignoreSnap, datas) {\r\n    if (!hasGuidelines(moveable, \"draggable\")) {\r\n        return [\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n        ];\r\n    }\r\n    var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\r\n    var _a = getRect(poses), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n    var boundPoses = {\r\n        horizontal: poses.map(function (pos) { return pos[1]; }),\r\n        vertical: poses.map(function (pos) { return pos[0]; }),\r\n    };\r\n    var snapDirections = getSnapDirections(moveable.props.snapDirections);\r\n    var snapPoses = splitSnapDirectionPoses(snapDirections, {\r\n        left: left,\r\n        right: right,\r\n        top: top,\r\n        bottom: bottom,\r\n        center: (left + right) / 2,\r\n        middle: (top + bottom) / 2,\r\n    });\r\n    var _b = checkMoveableSnapBounds(moveable, ignoreSnap, snapPoses, boundPoses), verticalSnapBoundInfo = _b.vertical, horizontalSnapBoundInfo = _b.horizontal;\r\n    var _c = getInnerBoundDragInfo(moveable, poses, datas), verticalInnerBoundInfo = _c.vertical, horizontalInnerBoundInfo = _c.horizontal;\r\n    var isVerticalSnap = verticalSnapBoundInfo.isSnap;\r\n    var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\r\n    var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\r\n    var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\r\n    var _d = __read(checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]), 2), offsetX = _d[0], offsetY = _d[1];\r\n    return [\r\n        {\r\n            isBound: isVerticalBound,\r\n            isSnap: isVerticalSnap,\r\n            offset: offsetX,\r\n        },\r\n        {\r\n            isBound: isHorizontalBound,\r\n            isSnap: isHorizontalSnap,\r\n            offset: offsetY,\r\n        },\r\n    ];\r\n}\r\nfunction checkMoveableSnapBounds(moveable, ignoreSnap, poses, boundPoses) {\r\n    if (boundPoses === void 0) { boundPoses = poses; }\r\n    var _a = checkBoundPoses(getBounds(moveable), boundPoses.vertical, boundPoses.horizontal), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    var _b = ignoreSnap ? {\r\n        horizontal: { isSnap: false, index: -1 },\r\n        vertical: { isSnap: false, index: -1 },\r\n    } : checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, undefined, undefined, undefined, undefined), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapBounds(guideines, bounds, posesX, posesY, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    if (multiples === void 0) { multiples = [1, 1]; }\r\n    var _a = checkBoundPoses(bounds, posesX, posesY), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    // options.isRequest ? {\r\n    //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\r\n    //     vertical: { isSnap: false, index: -1 } as SnapInfo,\r\n    // } :\r\n    var _b = checkSnapPoses(guideines, posesX, posesY, [], [], snapHorizontalThreshold, snapVerticalThreshold, multiples), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapRightLine(startPos, endPos, snapBoundInfo, keepRatio) {\r\n    var rad = (getRad(startPos, endPos) / Math.PI) * 180;\r\n    var _a = snapBoundInfo.vertical, isVerticalBound = _a.isBound, isVerticalSnap = _a.isSnap, verticalDist = _a.dist, _b = snapBoundInfo.horizontal, isHorizontalBound = _b.isBound, isHorizontalSnap = _b.isSnap, horizontalDist = _b.dist;\r\n    var rad180 = rad % 180;\r\n    var isHorizontalLine = rad180 < 3 || rad180 > 177;\r\n    var isVerticalLine = rad180 > 87 && rad180 < 93;\r\n    if (horizontalDist < verticalDist) {\r\n        if (isVerticalBound ||\r\n            (isVerticalSnap &&\r\n                !isVerticalLine &&\r\n                (!keepRatio || !isHorizontalLine))) {\r\n            return \"vertical\";\r\n        }\r\n    }\r\n    if (isHorizontalBound ||\r\n        (isHorizontalSnap &&\r\n            !isHorizontalLine &&\r\n            (!keepRatio || !isVerticalLine))) {\r\n        return \"horizontal\";\r\n    }\r\n    return \"\";\r\n}\r\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\r\n    return directions.map(function (_a) {\r\n        var _b = __read(_a, 2), startDirection = _b[0], endDirection = _b[1];\r\n        var otherStartPos = getPosByDirection(poses, startDirection);\r\n        var otherEndPos = getPosByDirection(poses, endDirection);\r\n        var snapBoundInfo = keepRatio\r\n            ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest)\r\n            : checkMoveableSnapBounds(moveable, isRequest, {\r\n                vertical: [otherEndPos[0]],\r\n                horizontal: [otherEndPos[1]],\r\n            });\r\n        var _c = snapBoundInfo.horizontal, \r\n        // dist: otherHorizontalDist,\r\n        otherHorizontalOffset = _c.offset, isOtherHorizontalBound = _c.isBound, isOtherHorizontalSnap = _c.isSnap, _d = snapBoundInfo.vertical, \r\n        // dist: otherVerticalDist,\r\n        otherVerticalOffset = _d.offset, isOtherVerticalBound = _d.isBound, isOtherVerticalSnap = _d.isSnap;\r\n        var multiple = minus(endDirection, startDirection);\r\n        if (!otherVerticalOffset && !otherHorizontalOffset) {\r\n            return {\r\n                isBound: isOtherVerticalBound || isOtherHorizontalBound,\r\n                isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\r\n                sign: multiple,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var snapLine = checkSnapRightLine(otherStartPos, otherEndPos, snapBoundInfo, keepRatio);\r\n        if (!snapLine) {\r\n            return {\r\n                sign: multiple,\r\n                isBound: false,\r\n                isSnap: false,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var isVertical = snapLine === \"vertical\";\r\n        var sizeOffset = [0, 0];\r\n        if (!keepRatio\r\n            && abs(endDirection[0]) === 1\r\n            && abs(endDirection[1]) === 1\r\n            && startDirection[0] !== endDirection[0]\r\n            && startDirection[1] !== endDirection[1]) {\r\n            sizeOffset = getDragDist({\r\n                datas: datas,\r\n                distX: -otherVerticalOffset,\r\n                distY: -otherHorizontalOffset,\r\n            });\r\n        }\r\n        else {\r\n            sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).offset;\r\n        }\r\n        sizeOffset = sizeOffset.map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\r\n            isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return snapInfo.offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\r\n    var _a = checkBoundKeepRatio(moveable, startPos, endPos), horizontalBoundInfo = _a.horizontal, verticalBoundInfo = _a.vertical;\r\n    var _b = isRequest ? {\r\n        horizontal: { isSnap: false },\r\n        vertical: { isSnap: false },\r\n    } : checkSnapKeepRatio(moveable, startPos, endPos), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\r\n    var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfo.isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfo.isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n        },\r\n    };\r\n}\r\nfunction checkMaxBounds(moveable, poses, direction, fixedPosition, datas) {\r\n    var fixedDirection = [-direction[0], -direction[1]];\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var bounds = moveable.props.bounds;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    if (bounds) {\r\n        var directions = [\r\n            [direction[0], -direction[1]],\r\n            [-direction[0], direction[1]],\r\n        ];\r\n        var _b = bounds.left, left_1 = _b === void 0 ? -Infinity : _b, _c = bounds.top, top_1 = _c === void 0 ? -Infinity : _c, _d = bounds.right, right_1 = _d === void 0 ? Infinity : _d, _e = bounds.bottom, bottom_1 = _e === void 0 ? Infinity : _e;\r\n        directions.forEach(function (otherDirection) {\r\n            var isCheckVertical = otherDirection[0] !== fixedDirection[0];\r\n            var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\r\n            var otherPos = getPosByDirection(poses, otherDirection);\r\n            var deg = (getRad(fixedPosition, otherPos) * 360) / Math.PI;\r\n            if (isCheckHorizontal) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 360) < 2 || abs(deg - 180) < 2) {\r\n                    nextOtherPos[1] = fixedPosition[1];\r\n                }\r\n                var _a = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[1] < otherPos[1] ? bottom_1 : top_1) -\r\n                    otherPos[1], false, datas), _b = __read(_a.offset, 2), heightOffset = _b[1], isHeightOutside = _a.isOutside;\r\n                if (!isNaN(heightOffset)) {\r\n                    maxHeight = height + (isHeightOutside ? 1 : -1) * abs(heightOffset);\r\n                }\r\n            }\r\n            if (isCheckVertical) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 90) < 2 || abs(deg - 270) < 2) {\r\n                    nextOtherPos[0] = fixedPosition[0];\r\n                }\r\n                var _c = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas), _d = __read(_c.offset, 1), widthOffset = _d[0], isWidthOutside = _c.isOutside;\r\n                if (!isNaN(widthOffset)) {\r\n                    maxWidth = width + (isWidthOutside ? 1 : -1) * abs(widthOffset);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return {\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n    };\r\n}\n\n/**\r\n * @namespace Draggable\r\n * @memberof Moveable\r\n * @description Draggable refers to the ability to drag and move targets.\r\n */\r\nvar Draggable = {\r\n    name: \"draggable\",\r\n    props: [\r\n        \"draggable\",\r\n        \"throttleDrag\",\r\n        \"throttleDragRotate\",\r\n        \"hideThrottleDragRotateLine\",\r\n        \"startDragRotate\",\r\n        \"edgeDraggable\",\r\n    ],\r\n    events: [\r\n        \"dragStart\",\r\n        \"drag\",\r\n        \"dragEnd\",\r\n        \"dragGroupStart\",\r\n        \"dragGroup\",\r\n        \"dragGroupEnd\",\r\n    ],\r\n    requestStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, hideThrottleDragRotateLine = _a.hideThrottleDragRotateLine, throttleDragRotate = _a.throttleDragRotate, zoom = _a.zoom;\r\n        var _b = moveable.getState(), dragInfo = _b.dragInfo, beforeOrigin = _b.beforeOrigin;\r\n        if (hideThrottleDragRotateLine || !throttleDragRotate || !dragInfo) {\r\n            return [];\r\n        }\r\n        var dist = dragInfo.dist;\r\n        if (!dist[0] && !dist[1]) {\r\n            return [];\r\n        }\r\n        var width = getDistSize(dist);\r\n        var rad = getRad(dist, [0, 0]);\r\n        return [React.createElement(\"div\", { className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"), key: \"dragRotateGuideline\", style: {\r\n                    width: \"\".concat(width, \"px\"),\r\n                    transform: \"translate(\".concat(beforeOrigin[0], \"px, \").concat(beforeOrigin[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                } })];\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentGesto = e.parentGesto;\r\n        var state = moveable.state;\r\n        var gestos = state.gestos, style = state.style;\r\n        if (gestos.draggable) {\r\n            return false;\r\n        }\r\n        gestos.draggable = parentGesto || moveable.targetGesto;\r\n        datas.datas = {};\r\n        datas.left = parseFloat(style.left || \"\") || 0;\r\n        datas.top = parseFloat(style.top || \"\") || 0;\r\n        datas.bottom = parseFloat(style.bottom || \"\") || 0;\r\n        datas.right = parseFloat(style.right || \"\") || 0;\r\n        datas.startValue = [0, 0];\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"translate\");\r\n        startCheckSnapDrag(moveable, datas);\r\n        datas.prevDist = [0, 0];\r\n        datas.prevBeforeDist = [0, 0];\r\n        datas.isDrag = false;\r\n        datas.deltaOffset = [0, 0];\r\n        var params = fillParams(moveable, e, __assign({ set: function (translate) {\r\n                datas.startValue = translate;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\r\n        if (result !== false) {\r\n            datas.isDrag = true;\r\n            moveable.state.dragInfo = {\r\n                startRect: moveable.getRect(),\r\n                dist: [0, 0],\r\n            };\r\n        }\r\n        else {\r\n            gestos.draggable = null;\r\n            datas.isPinch = false;\r\n        }\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"translate\");\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentFlag = e.parentFlag, isPinch = e.isPinch, deltaOffset = e.deltaOffset, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentThrottleDrag = e.parentThrottleDrag;\r\n        var distX = e.distX, distY = e.distY;\r\n        var isDrag = datas.isDrag, prevDist = datas.prevDist, prevBeforeDist = datas.prevBeforeDist, startValue = datas.startValue;\r\n        if (!isDrag) {\r\n            return;\r\n        }\r\n        if (deltaOffset) {\r\n            distX += deltaOffset[0];\r\n            distY += deltaOffset[1];\r\n        }\r\n        var props = moveable.props;\r\n        var parentMoveable = props.parentMoveable;\r\n        var throttleDrag = isGroup ? 0 : (props.throttleDrag || parentThrottleDrag || 0);\r\n        var throttleDragRotate = parentEvent ? 0 : (props.throttleDragRotate || 0);\r\n        var dragRotateRad = 0;\r\n        var isVerticalSnap = false;\r\n        var isVerticalBound = false;\r\n        var isHorizontalSnap = false;\r\n        var isHorizontalBound = false;\r\n        if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\r\n            var startDragRotate = props.startDragRotate || 0;\r\n            var deg = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate)\r\n                - startDragRotate;\r\n            var ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\r\n            var rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\r\n            var r = getDistSize([rx, ry]);\r\n            dragRotateRad = deg * Math.PI / 180;\r\n            distX = r * Math.cos(dragRotateRad);\r\n            distY = r * Math.sin(dragRotateRad);\r\n        }\r\n        if (!isPinch && !parentEvent && !parentFlag) {\r\n            var _a = __read(checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, (!useSnap && isRequest) || deltaOffset, datas), 2), verticalInfo = _a[0], horizontalInfo = _a[1];\r\n            isVerticalSnap = verticalInfo.isSnap;\r\n            isVerticalBound = verticalInfo.isBound;\r\n            isHorizontalSnap = horizontalInfo.isSnap;\r\n            isHorizontalBound = horizontalInfo.isBound;\r\n            var verticalOffset = verticalInfo.offset;\r\n            var horizontalOffset = horizontalInfo.offset;\r\n            distX += verticalOffset;\r\n            distY += horizontalOffset;\r\n        }\r\n        var beforeTranslate = plus(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        var translate = plus(getTransformDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        throttleArray(translate, TINY_NUM);\r\n        throttleArray(beforeTranslate, TINY_NUM);\r\n        if (!throttleDragRotate) {\r\n            if (!isVerticalSnap && !isVerticalBound) {\r\n                translate[0] = throttle(translate[0], throttleDrag);\r\n                beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\r\n            }\r\n            if (!isHorizontalSnap && !isHorizontalBound) {\r\n                translate[1] = throttle(translate[1], throttleDrag);\r\n                beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\r\n            }\r\n        }\r\n        var beforeDist = minus(beforeTranslate, startValue);\r\n        var dist = minus(translate, startValue);\r\n        var delta = minus(dist, prevDist);\r\n        var beforeDelta = minus(beforeDist, prevBeforeDist);\r\n        datas.prevDist = dist;\r\n        datas.prevBeforeDist = beforeDist;\r\n        datas.passDelta = delta; //distX - (datas.passDistX || 0);\r\n        // datas.passDeltaY = distY - (datas.passDistY || 0);\r\n        datas.passDist = dist; //distX;\r\n        // datas.passDistY = distY;\r\n        var left = datas.left + beforeDist[0];\r\n        var top = datas.top + beforeDist[1];\r\n        var right = datas.right - beforeDist[0];\r\n        var bottom = datas.bottom - beforeDist[1];\r\n        var nextTransform = convertTransformFormat(datas, \"translate(\".concat(translate[0], \"px, \").concat(translate[1], \"px)\"), \"translate(\".concat(dist[0], \"px, \").concat(dist[1], \"px)\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\r\n        if (!parentEvent && !parentMoveable && delta.every(function (num) { return !num; }) && beforeDelta.some(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var _b = moveable.state, width = _b.width, height = _b.height;\r\n        var params = fillParams(moveable, e, __assign({ transform: nextTransform, dist: dist, delta: delta, translate: translate, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeTranslate: beforeTranslate, left: left, top: top, right: right, bottom: bottom, width: width, height: height, isPinch: isPinch }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onDrag\", params);\r\n        return params;\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var deltaOffset = datas.deltaOffset;\r\n        if (deltaOffset[0] || deltaOffset[1]) {\r\n            datas.deltaOffset = [0, 0];\r\n            return this.drag(moveable, __assign(__assign({}, e), { deltaOffset: deltaOffset }));\r\n        }\r\n        return false;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var parentEvent = e.parentEvent, datas = e.datas;\r\n        moveable.state.dragInfo = null;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        datas.isDrag = false;\r\n        var param = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\r\n        return param;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _a, _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY;\r\n        var params = this.dragStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var _c = triggerChildGesto(moveable, this, \"dragStart\", [\r\n            clientX || 0,\r\n            clientY || 0,\r\n        ], e, false, \"draggable\"), childEvents = _c.childEvents, eventParams = _c.eventParams;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: eventParams });\r\n        var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\r\n        datas.isDrag = result !== false;\r\n        // find data.startValue and based on first child moveable\r\n        var startValue = (_b = (_a = childEvents[0]) === null || _a === void 0 ? void 0 : _a.datas.startValue) !== null && _b !== void 0 ? _b : [0, 0];\r\n        datas.throttleOffset = [startValue[0] % 1, startValue[1] % 1];\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        var params = this.drag(moveable, __assign(__assign({}, e), { parentThrottleDrag: moveable.props.throttleDrag }));\r\n        var passDelta = e.datas.passDelta;\r\n        var eventParams = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\").eventParams;\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: eventParams }, params);\r\n        triggerEvent(moveable, \"onDragGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        this.dragEnd(moveable, e);\r\n        var eventParams = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\").eventParams;\r\n        triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: eventParams,\r\n        }));\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Draggable#request\r\n     * @param {object} [e] - the draggable's request parameter\r\n     * @param {number} [e.x] - x position\r\n     * @param {number} [e.y] - y position\r\n     * @param {number} [e.deltaX] - X number to move\r\n     * @param {number} [e.deltaY] - Y number to move\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"draggable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 220, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 240, y: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: false,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return { datas: datas, useSnap: useSnap };\r\n            },\r\n            request: function (e) {\r\n                if (\"x\" in e) {\r\n                    distX = e.x - rect.left;\r\n                }\r\n                else if (\"deltaX\" in e) {\r\n                    distX += e.deltaX;\r\n                }\r\n                if (\"y\" in e) {\r\n                    distY = e.y - rect.top;\r\n                }\r\n                else if (\"deltaY\" in e) {\r\n                    distY += e.deltaY;\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, useSnap: useSnap };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.draggable = null;\r\n        moveable.state.dragInfo = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be dragged. (default: false)\r\n * @name Moveable.Draggable#draggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.draggable = true;\r\n */\r\n/**\r\n * throttle of x, y when drag.\r\n * @name Moveable.Draggable#throttleDrag\r\n * @default 0\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleDrag = 1;\r\n */\r\n/**\r\n* throttle of angle of x, y when drag.\r\n* @name Moveable.Draggable#throttleDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* moveable.throttleDragRotate = 45;\r\n*/\r\n/**\r\n* start angle of throttleDragRotate of x, y when drag.\r\n* @name Moveable.Draggable#startDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* // 45, 135, 225, 315\r\n* moveable.throttleDragRotate = 90;\r\n* moveable.startDragRotate = 45;\r\n*/\r\n/**\r\n * When the drag starts, the dragStart event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragStart\r\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When dragging, the drag event is called.\r\n * @memberof Moveable.Draggable\r\n * @event drag\r\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"drag\", ({ target, transform }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the drag finishes, the dragEnd event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragEnd\r\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group drag starts, the `dragGroupStart` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroupStart\r\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\r\n*     console.log(\"onDragGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group drag, the `dragGroup` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroup\r\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\r\n*     console.log(\"onDragGroup\", targets);\r\n*     events.forEach(ev => {\r\n*          // drag event\r\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\r\n*          // ev.target!.style.left = `${ev.left}px`;\r\n*          // ev.target!.style.top = `${ev.top}px`;\r\n*          console.log(\"onDrag translate\", ev.dist);\r\n*          ev.target!.style.transform = ev.transform;)\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group drag finishes, the `dragGroupEnd` event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragGroupEnd\r\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     draggable: true\r\n * });\r\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getFixedDirectionInfo(startPositions, fixedDirection) {\r\n    var fixedPosition = getPosByDirection(startPositions, fixedDirection);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedDirectionInfo(state, fixedDirection) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var nextFixedOffset = [\r\n        width / 2 * (1 + fixedDirection[0]),\r\n        height / 2 * (1 + fixedDirection[1]),\r\n    ];\r\n    var fixedPosition = calculatePosition(allMatrix, nextFixedOffset, n);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedPositionInfo(state, offsetFixedPosition) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedDirection = getDirectionByPos(offsetFixedPosition, width, height);\r\n    var nextFixedPosition = calculatePosition(allMatrix, offsetFixedPosition, n);\r\n    var fixedOffset = [\r\n        width ? 0 : offsetFixedPosition[0],\r\n        height ? 0 : offsetFixedPosition[1],\r\n    ];\r\n    return {\r\n        fixedPosition: nextFixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\n\n/**\r\n * @namespace Resizable\r\n * @memberof Moveable\r\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\r\n */\r\nvar directionCondition$2 = getDirectionCondition(\"resizable\");\r\nvar Resizable = {\r\n    name: \"resizable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"resizable\",\r\n        \"throttleResize\",\r\n        \"renderDirections\",\r\n        \"displayAroundControls\",\r\n        \"keepRatio\",\r\n        \"resizeFormat\",\r\n        \"keepRatioFinally\",\r\n        \"edge\",\r\n        \"checkResizableError\",\r\n    ],\r\n    events: [\r\n        \"resizeStart\",\r\n        \"beforeResize\",\r\n        \"resize\",\r\n        \"resizeEnd\",\r\n        \"resizeGroupStart\",\r\n        \"beforeResizeGroup\",\r\n        \"resizeGroup\",\r\n        \"resizeGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"resizable\"),\r\n    dragControlCondition: directionCondition$2,\r\n    viewClassName: getDirectionViewClassName(\"resizable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var inputEvent = e.inputEvent, isPinch = e.isPinch, isGroup = e.isGroup, parentDirection = e.parentDirection, parentGesto = e.parentGesto, datas = e.datas, parentFixedDirection = e.parentFixedDirection, parentEvent = e.parentEvent;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var state = moveable.state;\r\n        var target = state.target, width = state.width, height = state.height, gestos = state.gestos;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (gestos.resizable) {\r\n            return false;\r\n        }\r\n        gestos.resizable = parentGesto || moveable.controlGesto;\r\n        !isPinch && setDragStart(moveable, e);\r\n        datas.datas = {};\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.prevWidth = 0;\r\n        datas.prevHeight = 0;\r\n        datas.minSize = [0, 0];\r\n        datas.startWidth = state.inlineCSSWidth || state.cssWidth;\r\n        datas.startHeight = state.inlineCSSHeight || state.cssHeight;\r\n        datas.maxSize = [Infinity, Infinity];\r\n        if (!isGroup) {\r\n            datas.minSize = [\r\n                state.minOffsetWidth,\r\n                state.minOffsetHeight,\r\n            ];\r\n            datas.maxSize = [\r\n                state.maxOffsetWidth,\r\n                state.maxOffsetHeight,\r\n            ];\r\n        }\r\n        var transformOrigin = moveable.props.transformOrigin || \"% %\";\r\n        datas.transformOrigin = transformOrigin && isString(transformOrigin)\r\n            ? transformOrigin.split(\" \")\r\n            : transformOrigin;\r\n        datas.startOffsetMatrix = state.offsetMatrix;\r\n        datas.startTransformOrigin = state.transformOrigin;\r\n        datas.isWidth = (_a = e === null || e === void 0 ? void 0 : e.parentIsWidth) !== null && _a !== void 0 ? _a : ((!direction[0] && !direction[1]) || direction[0] || !direction[1]);\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setFixedPosition(fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setMin(minSize) {\r\n            datas.minSize = [\r\n                convertUnitSize(\"\".concat(minSize[0]), 0) || 0,\r\n                convertUnitSize(\"\".concat(minSize[1]), 0) || 0,\r\n            ];\r\n        }\r\n        function setMax(maxSize) {\r\n            var nextMaxSize = [\r\n                maxSize[0] || Infinity,\r\n                maxSize[1] || Infinity,\r\n            ];\r\n            if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\r\n                nextMaxSize[0] = convertUnitSize(\"\".concat(nextMaxSize[0]), 0) || Infinity;\r\n            }\r\n            if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\r\n                nextMaxSize[1] = convertUnitSize(\"\".concat(nextMaxSize[1]), 0) || Infinity;\r\n            }\r\n            datas.maxSize = nextMaxSize;\r\n        }\r\n        setRatio(width / height);\r\n        setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\r\n        datas.setFixedDirection = setFixedDirection;\r\n        datas.setFixedPosition = setFixedPosition;\r\n        datas.setMin = setMin;\r\n        datas.setMax = setMax;\r\n        var params = fillParams(moveable, e, {\r\n            direction: direction,\r\n            startRatio: datas.ratio,\r\n            set: function (_a) {\r\n                var _b = __read(_a, 2), startWidth = _b[0], startHeight = _b[1];\r\n                datas.startWidth = startWidth;\r\n                datas.startHeight = startHeight;\r\n            },\r\n            setMin: setMin,\r\n            setMax: setMax,\r\n            setRatio: setRatio,\r\n            setFixedDirection: setFixedDirection,\r\n            setFixedPosition: setFixedPosition,\r\n            setOrigin: function (origin) {\r\n                datas.transformOrigin = origin;\r\n            },\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        datas.startFixedPosition = datas.fixedPosition;\r\n        if (result !== false) {\r\n            datas.isResize = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a;\r\n        var datas = e.datas, parentFlag = e.parentFlag, isPinch = e.isPinch, parentKeepRatio = e.parentKeepRatio, dragClient = e.dragClient, parentDist = e.parentDist, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentEvent = e.parentEvent, resolveMatrix = e.resolveMatrix;\r\n        var isResize = datas.isResize, transformOrigin = datas.transformOrigin, startWidth = datas.startWidth, startHeight = datas.startHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight, minSize = datas.minSize, maxSize = datas.maxSize, ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isWidth = datas.isWidth;\r\n        if (!isResize) {\r\n            return;\r\n        }\r\n        if (resolveMatrix) {\r\n            var is3d = moveable.state.is3d;\r\n            var startOffsetMatrix = datas.startOffsetMatrix, startTransformOrigin = datas.startTransformOrigin;\r\n            var n = is3d ? 4 : 3;\r\n            var targetMatrix = parseMat(getNextTransforms(e));\r\n            var targetN = Math.sqrt(targetMatrix.length);\r\n            if (n !== targetN) {\r\n                targetMatrix = convertDimension(targetMatrix, targetN, n);\r\n            }\r\n            var nextAllMatrix = getNextMatrix(startOffsetMatrix, targetMatrix, startTransformOrigin, n);\r\n            var poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\r\n            datas.startPositions = poses;\r\n            datas.nextTargetMatrix = targetMatrix;\r\n            datas.nextAllMatrix = nextAllMatrix;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        var resizeFormat = props.resizeFormat, _b = props.throttleResize, throttleResize = _b === void 0 ? parentFlag ? 0 : 1 : _b, parentMoveable = props.parentMoveable, keepRatioFinally = props.keepRatioFinally;\r\n        var direction = datas.direction;\r\n        var sizeDirection = direction;\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        function getNextBoundingSize() {\r\n            var fixedDirection = datas.fixedDirection;\r\n            var nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\r\n            distWidth = nextSize.distWidth;\r\n            distHeight = nextSize.distHeight;\r\n            var nextWidth = (sizeDirection[0] - fixedDirection[0]) || keepRatio\r\n                ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\r\n            var nextHeight = (sizeDirection[1] - fixedDirection[1]) || keepRatio\r\n                ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\r\n            if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n                // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\r\n                if (isWidth) {\r\n                    nextHeight = nextWidth / ratio;\r\n                }\r\n                else {\r\n                    nextWidth = nextHeight * ratio;\r\n                }\r\n            }\r\n            return [nextWidth, nextHeight];\r\n        }\r\n        var _c = __read(getNextBoundingSize(), 2), boundingWidth = _c[0], boundingHeight = _c[1];\r\n        if (!parentEvent) {\r\n            datas.setFixedDirection(datas.fixedDirection);\r\n            triggerEvent(moveable, \"onBeforeResize\", fillParams(moveable, e, {\r\n                startFixedDirection: datas.startFixedDirection,\r\n                startFixedPosition: datas.startFixedPosition,\r\n                setFixedDirection: function (nextFixedDirection) {\r\n                    var _a;\r\n                    datas.setFixedDirection(nextFixedDirection);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                setFixedPosition: function (nextFixedPosition) {\r\n                    var _a;\r\n                    datas.setFixedPosition(nextFixedPosition);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                boundingWidth: boundingWidth,\r\n                boundingHeight: boundingHeight,\r\n                setSize: function (size) {\r\n                    var _a;\r\n                    _a = __read(size, 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                },\r\n            }, true));\r\n        }\r\n        var fixedPosition = dragClient;\r\n        if (!dragClient) {\r\n            if (!parentFlag && isPinch) {\r\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\r\n            }\r\n            else {\r\n                fixedPosition = datas.fixedPosition;\r\n            }\r\n        }\r\n        var snapDist = [0, 0];\r\n        if (!isPinch) {\r\n            snapDist = checkSnapResize(moveable, boundingWidth, boundingHeight, direction, fixedPosition, !useSnap && isRequest, datas);\r\n        }\r\n        if (parentDist) {\r\n            !parentDist[0] && (snapDist[0] = 0);\r\n            !parentDist[1] && (snapDist[1] = 0);\r\n        }\r\n        function computeSize() {\r\n            var _a;\r\n            if (resizeFormat) {\r\n                _a = __read(resizeFormat([boundingWidth, boundingHeight]), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n            }\r\n            boundingWidth = throttle(boundingWidth, throttleResize);\r\n            boundingHeight = throttle(boundingHeight, throttleResize);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (abs(snapDist[0]) > abs(snapDist[1])) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // pre-compute before maintaining the ratio\r\n                computeSize();\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                boundingWidth += snapDist[0];\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                boundingHeight += snapDist[1];\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        else {\r\n            boundingWidth += snapDist[0];\r\n            boundingHeight += snapDist[1];\r\n            boundingWidth = Math.max(0, boundingWidth);\r\n            boundingHeight = Math.max(0, boundingHeight);\r\n        }\r\n        _a = __read(calculateBoundSize([boundingWidth, boundingHeight], minSize, maxSize, keepRatio ? ratio : false), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n        computeSize();\r\n        if (keepRatio && (isGroup || keepRatioFinally)) {\r\n            if (isWidth) {\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else {\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        distWidth = boundingWidth - startOffsetWidth;\r\n        distHeight = boundingHeight - startOffsetHeight;\r\n        var delta = [distWidth - prevWidth, distHeight - prevHeight];\r\n        datas.prevWidth = distWidth;\r\n        datas.prevHeight = distHeight;\r\n        var inverseDelta = getResizeDist(moveable, boundingWidth, boundingHeight, fixedPosition, transformOrigin, datas);\r\n        if (!parentMoveable && delta.every(function (num) { return !num; }) && inverseDelta.every(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"));\r\n        var transform = drag.transform;\r\n        var nextWidth = startWidth + distWidth;\r\n        var nextHeight = startHeight + distHeight;\r\n        var params = fillParams(moveable, e, __assign({ width: nextWidth, height: nextHeight, offsetWidth: Math.round(boundingWidth), offsetHeight: Math.round(boundingHeight), startRatio: ratio, boundingWidth: boundingWidth, boundingHeight: boundingHeight, direction: direction, dist: [distWidth, distHeight], delta: delta, isPinch: !!isPinch, drag: drag }, fillAfterTransform({\r\n            style: {\r\n                width: \"\".concat(nextWidth, \"px\"),\r\n                height: \"\".concat(nextHeight, \"px\"),\r\n            },\r\n            transform: transform,\r\n        }, drag, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onResize\", params);\r\n        return params;\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var isResize = datas.isResize, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight;\r\n        if (!isResize || moveable.props.checkResizableError === false) {\r\n            return;\r\n        }\r\n        var _a = moveable.state, width = _a.width, height = _a.height;\r\n        var errorWidth = width - (startOffsetWidth + prevWidth);\r\n        var errorHeight = height - (startOffsetHeight + prevHeight);\r\n        var isErrorWidth = abs(errorWidth) > 3;\r\n        var isErrorHeight = abs(errorHeight) > 3;\r\n        if (isErrorWidth) {\r\n            datas.startWidth += errorWidth;\r\n            datas.startOffsetWidth += errorWidth;\r\n            datas.prevWidth += errorWidth;\r\n        }\r\n        if (isErrorHeight) {\r\n            datas.startHeight += errorHeight;\r\n            datas.startOffsetHeight += errorHeight;\r\n            datas.prevHeight += errorHeight;\r\n        }\r\n        if (isErrorWidth || isErrorHeight) {\r\n            return this.dragControl(moveable, e);\r\n        }\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        datas.isResize = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: directionCondition$2,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        var parentStartOffsetWidth = datas.startOffsetWidth, parentStartOffsetHeight = datas.startOffsetHeight;\r\n        function updateGroupMin() {\r\n            var originalMinSize = datas.minSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMinSize = _a.minSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMinWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\r\n                var parentMinHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\r\n                originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\r\n                originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\r\n            });\r\n        }\r\n        function updateGroupMax() {\r\n            var originalMaxSize = datas.maxSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMaxSize = _a.maxSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMaxWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\r\n                var parentMaxHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\r\n                originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\r\n                originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\r\n            });\r\n        }\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        updateGroupMin();\r\n        updateGroupMax();\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events.map(function (ev) {\r\n                return __assign(__assign({}, ev), { setMin: function (minSize) {\r\n                        ev.setMin(minSize);\r\n                        updateGroupMin();\r\n                    }, setMax: function (maxSize) {\r\n                        ev.setMax(maxSize);\r\n                        updateGroupMax();\r\n                    } });\r\n            }), setFixedDirection: setFixedDirection, setMin: function (minSize) {\r\n                params.setMin(minSize);\r\n                updateGroupMin();\r\n            }, setMax: function (maxSize) {\r\n                params.setMax(maxSize);\r\n                updateGroupMax();\r\n            } });\r\n        var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\r\n        datas.isResize = result !== false;\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        catchEvent(moveable, \"onBeforeResize\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var boundingWidth = params.boundingWidth, boundingHeight = params.boundingHeight, dist = params.dist;\r\n        var keepRatio = props.keepRatio;\r\n        var parentScale = [\r\n            boundingWidth / (boundingWidth - dist[0]),\r\n            boundingHeight / (boundingHeight - dist[1]),\r\n        ];\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * parentScale[0],\r\n                ev.datas.originalY * parentScale[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: parentScale, dragClient: plus(fixedPosition, [clientX, clientY]), parentKeepRatio: keepRatio });\r\n        });\r\n        var nextParams = __assign({ targets: props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onResizeGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Resizable#request\r\n     * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"resizable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        var rect = moveable.getRect();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                var _a;\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    parentIsWidth: (_a = e === null || e === void 0 ? void 0 : e.horizontal) !== null && _a !== void 0 ? _a : true,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                if (\"offsetWidth\" in e) {\r\n                    distWidth = e.offsetWidth - rect.offsetWidth;\r\n                }\r\n                else if (\"deltaWidth\" in e) {\r\n                    distWidth += e.deltaWidth;\r\n                }\r\n                if (\"offsetHeight\" in e) {\r\n                    distHeight = e.offsetHeight - rect.offsetHeight;\r\n                }\r\n                else if (\"deltaHeight\" in e) {\r\n                    distHeight += e.deltaHeight;\r\n                }\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.resizable = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be resized.\r\n * @name Moveable.Resizable#resizable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     resizable: false,\r\n * });\r\n *\r\n * moveable.resizable = true;\r\n */\r\n/**\r\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\r\n * @name Moveable.Resizable#throttleResize\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   throttleResize: 1,\r\n * });\r\n *\r\n * moveable.throttleResize = 0;\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height.\r\n * @name Moveable.Resizable#keepRatio\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * Set directions to show the control box.\r\n * @name Moveable.Resizable#renderDirections\r\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * Function to convert size for resize\r\n * @name Moveable.Resizable#resizeFormat\r\n * @default oneself\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   resizeFormat: v => v,\r\n * });\r\n *\r\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\r\n */\r\n/**\r\n * When the resize starts, the resizeStart event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeStart\r\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\r\n * @memberof Moveable.Resizable\r\n * @event beforeResize\r\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\r\n *     target.style.width = `${width}px`;\r\n *     target.style.height = `${height}px`;\r\n *     target.style.transform = drag.transform;\r\n * });\r\n */\r\n/**\r\n * When resizing, the resize event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resize\r\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resize\", ({ target, width, height }) => {\r\n *     target.style.width = `${e.width}px`;\r\n *     target.style.height = `${e.height}px`;\r\n * });\r\n */\r\n/**\r\n * When the resize finishes, the resizeEnd event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeEnd\r\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group resize starts, the `resizeGroupStart` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroupStart\r\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\r\n*     console.log(\"onResizeGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group resize, the `resizeGroup` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroup\r\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\r\n*     console.log(\"onResizeGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const offset = [\r\n*             direction[0] < 0 ? -ev.delta[0] : 0,\r\n*             direction[1] < 0 ? -ev.delta[1] : 0,\r\n*         ];\r\n*         // ev.drag is a drag event that occurs when the group resize.\r\n*         const left = offset[0] + ev.drag.beforeDist[0];\r\n*         const top = offset[1] + ev.drag.beforeDist[1];\r\n*         const width = ev.width;\r\n*         const top = ev.top;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group resize finishes, the `resizeGroupEnd` event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeGroupEnd\r\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     resizable: true\r\n * });\r\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\n/**\r\n * @namespace Rotatable\r\n * @memberof Moveable\r\n * @description Rotatable indicates whether the target can be rotated.\r\n */\r\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, rect) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var n = state.is3d ? 4 : 3;\r\n    var origin = datas.origin;\r\n    var nextOrigin = calculatePosition(moveable.state.rootMatrix, \r\n    // TO-DO #710\r\n    minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]), n);\r\n    var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\r\n    datas.startAbsoluteOrigin = startAbsoluteOrigin;\r\n    datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\r\n    datas.defaultDeg = datas.prevDeg;\r\n    datas.prevSnapDeg = 0;\r\n    datas.loop = 0;\r\n    datas.startDist = getDist$1(startAbsoluteOrigin, [clientX, clientY]);\r\n}\r\nfunction getAbsoluteDist(deg, direction, datas) {\r\n    var defaultDeg = datas.defaultDeg, prevDeg = datas.prevDeg;\r\n    var normalizedPrevDeg = prevDeg % 360;\r\n    var loop = Math.floor(prevDeg / 360);\r\n    if (normalizedPrevDeg < 0) {\r\n        normalizedPrevDeg += 360;\r\n    }\r\n    if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\r\n        // 360 => 0\r\n        ++loop;\r\n    }\r\n    else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\r\n        // 0 => 360\r\n        --loop;\r\n    }\r\n    var dist = direction * (loop * 360 + deg - defaultDeg);\r\n    datas.prevDeg = defaultDeg + dist;\r\n    return dist;\r\n}\r\nfunction getAbsoluteDistByClient(clientX, clientY, direction, datas) {\r\n    return getAbsoluteDist(getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, datas);\r\n}\r\nfunction getRotateInfo(moveable, moveableRect, datas, dist, startValue, checkSnap) {\r\n    var _a = moveable.props.throttleRotate, throttleRotate = _a === void 0 ? 0 : _a;\r\n    var prevSnapDeg = datas.prevSnapDeg;\r\n    var snapRotation = 0;\r\n    var isSnap = false;\r\n    if (checkSnap) {\r\n        var result = checkSnapRotate(moveable, moveableRect, dist, startValue + dist);\r\n        isSnap = result.isSnap;\r\n        snapRotation = startValue + result.dist;\r\n    }\r\n    if (!isSnap) {\r\n        snapRotation = throttle(startValue + dist, throttleRotate);\r\n    }\r\n    var snapDeg = snapRotation - startValue;\r\n    datas.prevSnapDeg = snapDeg;\r\n    return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\r\n}\r\nfunction getRotationPositions(rotationPosition, _a, direction) {\r\n    var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n    if (rotationPosition === \"none\") {\r\n        return [];\r\n    }\r\n    if (isArray(rotationPosition)) {\r\n        return rotationPosition.map(function (child) { return getRotationPositions(child, [pos1, pos2, pos3, pos4], direction)[0]; });\r\n    }\r\n    var _c = __read((rotationPosition || \"top\").split(\"-\"), 2), dir1 = _c[0], dir2 = _c[1];\r\n    var radPoses = [pos1, pos2];\r\n    if (dir1 === \"left\") {\r\n        radPoses = [pos3, pos1];\r\n    }\r\n    else if (dir1 === \"right\") {\r\n        radPoses = [pos2, pos4];\r\n    }\r\n    else if (dir1 === \"bottom\") {\r\n        radPoses = [pos4, pos3];\r\n    }\r\n    var pos = [\r\n        (radPoses[0][0] + radPoses[1][0]) / 2,\r\n        (radPoses[0][1] + radPoses[1][1]) / 2,\r\n    ];\r\n    var rad = getRotationRad(radPoses, direction);\r\n    if (dir2) {\r\n        var isStart = dir2 === \"top\" || dir2 === \"left\";\r\n        var isReverse = dir1 === \"bottom\" || dir1 === \"left\";\r\n        pos = radPoses[(isStart && !isReverse) || (!isStart && isReverse) ? 0 : 1];\r\n    }\r\n    return [[pos, rad]];\r\n}\r\nfunction dragControlCondition(moveable, e) {\r\n    if (e.isRequest) {\r\n        return e.requestAble === \"rotatable\";\r\n    }\r\n    var target = e.inputEvent.target;\r\n    if (hasClass(target, prefix(\"rotation-control\"))\r\n        || (moveable.props.rotateAroundControls && hasClass(target, prefix(\"around-control\")))\r\n        || (hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\")))) {\r\n        return true;\r\n    }\r\n    var rotationTarget = moveable.props.rotationTarget;\r\n    if (rotationTarget) {\r\n        return getRefTargets(rotationTarget, true).some(function (element) {\r\n            if (!element) {\r\n                return false;\r\n            }\r\n            return target === element || target.contains(element);\r\n        });\r\n    }\r\n    return false;\r\n}\r\nvar css = \".rotation {\\nposition: absolute;\\nheight: 40px;\\nwidth: 1px;\\ntransform-origin: 50% 100%;\\nheight: calc(40px * var(--zoom));\\ntop: auto;\\nleft: 0;\\nbottom: 100%;\\nwill-change: transform;\\n}\\n.rotation .rotation-line {\\ndisplay: block;\\nwidth: 100%;\\nheight: 100%;\\ntransform-origin: 50% 50%;\\n}\\n.rotation .rotation-control {\\nborder-color: #4af;\\nborder-color: var(--moveable-color);\\nbackground:#fff;\\ncursor: alias;\\n}\\n:global .view-rotation-dragging, .rotatable.direction.control {\\ncursor: alias;\\n}\\n.rotatable.direction.control.move {\\ncursor: move;\\n}\\n\";\r\nvar Rotatable = {\r\n    name: \"rotatable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"rotatable\",\r\n        \"rotationPosition\",\r\n        \"throttleRotate\",\r\n        \"renderDirections\",\r\n        \"rotationTarget\",\r\n        \"rotateAroundControls\",\r\n        \"edge\",\r\n        \"resolveAblesWithRotatable\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"rotateStart\",\r\n        \"beforeRotate\",\r\n        \"rotate\",\r\n        \"rotateEnd\",\r\n        \"rotateGroupStart\",\r\n        \"beforeRotateGroup\",\r\n        \"rotateGroup\",\r\n        \"rotateGroupEnd\",\r\n    ],\r\n    css: [css],\r\n    viewClassName: function (moveable) {\r\n        if (!moveable.isDragging(\"rotatable\")) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-rotation-dragging\");\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = getProps(moveable.props, \"rotatable\"), rotatable = _a.rotatable, rotationPosition = _a.rotationPosition, zoom = _a.zoom, renderDirections = _a.renderDirections, rotateAroundControls = _a.rotateAroundControls, resolveAblesWithRotatable = _a.resolveAblesWithRotatable;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, direction = _b.direction;\r\n        if (!rotatable) {\r\n            return null;\r\n        }\r\n        var positions = getRotationPositions(rotationPosition, renderPoses, direction);\r\n        var jsxs = [];\r\n        positions.forEach(function (_a, i) {\r\n            var _b = __read(_a, 2), pos = _b[0], rad = _b[1];\r\n            jsxs.push(React.createElement(\"div\", { key: \"rotation\".concat(i), className: prefix(\"rotation\"), style: {\r\n                    // tslint:disable-next-line: max-line-length\r\n                    transform: \"translate(-50%) translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rad, \"rad)\"),\r\n                } },\r\n                React.createElement(\"div\", { className: prefix(\"line rotation-line\"), style: {\r\n                        transform: \"scaleX(\".concat(zoom, \")\"),\r\n                    } }),\r\n                React.createElement(\"div\", { className: prefix(\"control rotation-control\"), style: {\r\n                        transform: \"translate(0.5px) scale(\".concat(zoom, \")\"),\r\n                    } })));\r\n        });\r\n        if (renderDirections) {\r\n            var ables = getKeys(resolveAblesWithRotatable || {});\r\n            var resolveMap_1 = {};\r\n            ables.forEach(function (name) {\r\n                resolveAblesWithRotatable[name].forEach(function (direction) {\r\n                    resolveMap_1[direction] = name;\r\n                });\r\n            });\r\n            var directionControlInfos = [];\r\n            if (isArray(renderDirections)) {\r\n                directionControlInfos = renderDirections.map(function (dir) {\r\n                    var able = resolveMap_1[dir];\r\n                    return {\r\n                        data: able ? { resolve: able } : {},\r\n                        classNames: able ? [\"move\"] : [],\r\n                        dir: dir,\r\n                    };\r\n                });\r\n            }\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderDirectionControlsByInfos(moveable, \"rotatable\", directionControlInfos, React)), false));\r\n        }\r\n        if (rotateAroundControls) {\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderAroundControls(moveable, React)), false));\r\n        }\r\n        return jsxs;\r\n    },\r\n    dragControlCondition: dragControlCondition,\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        var state = moveable.state;\r\n        var target = state.target, left = state.left, top = state.top, direction = state.direction, beforeDirection = state.beforeDirection, targetTransform = state.targetTransform, moveableClientRect = state.moveableClientRect, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, allMatrix = state.allMatrix, width = state.width, height = state.height;\r\n        if (!isRequest && !target) {\r\n            return false;\r\n        }\r\n        var rect = moveable.getRect();\r\n        datas.rect = rect;\r\n        datas.transform = targetTransform;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        var setFixedPosition = function (fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedPosition(fixedPosition);\r\n            }\r\n        };\r\n        var setFixedDirection = function (fixedDirection) {\r\n            var result = getOffsetFixedDirectionInfo(moveable.state, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedDirection(fixedDirection);\r\n            }\r\n        };\r\n        var startClientX = clientX;\r\n        var startClientY = clientY;\r\n        if (isRequest || isPinch || parentFlag) {\r\n            var externalRotate = parentRotate || 0;\r\n            datas.beforeInfo = {\r\n                origin: rect.beforeOrigin,\r\n                prevDeg: externalRotate,\r\n                defaultDeg: externalRotate,\r\n                prevSnapDeg: 0,\r\n                startDist: 0,\r\n            };\r\n            datas.afterInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin });\r\n            datas.absoluteInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin, startValue: externalRotate });\r\n        }\r\n        else {\r\n            var inputTarget = (_b = e.inputEvent) === null || _b === void 0 ? void 0 : _b.target;\r\n            if (inputTarget) {\r\n                var regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\r\n                var controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\r\n                if (controlDirection) {\r\n                    datas.isControl = true;\r\n                    datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\r\n                    datas.controlDirection = controlDirection;\r\n                    var resolve = inputTarget.getAttribute(\"data-resolve\");\r\n                    if (resolve) {\r\n                        datas.resolveAble = resolve;\r\n                    }\r\n                    var clientPoses = calculateMoveableClientPositions(state.rootMatrix, state.renderPoses, moveableClientRect);\r\n                    _a = __read(getPosByDirection(clientPoses, controlDirection), 2), startClientX = _a[0], startClientY = _a[1];\r\n                }\r\n            }\r\n            datas.beforeInfo = { origin: rect.beforeOrigin };\r\n            datas.afterInfo = { origin: rect.origin };\r\n            datas.absoluteInfo = {\r\n                origin: rect.origin,\r\n                startValue: rect.rotation,\r\n            };\r\n            var originalFixedPosition_1 = setFixedPosition;\r\n            setFixedPosition = function (fixedPosition) {\r\n                var n = state.is3d ? 4 : 3;\r\n                var _a = __read(plus(getOrigin(targetMatrix, n), fixedPosition), 2), originX = _a[0], originY = _a[1];\r\n                var fixedBeforeOrigin = calculate(offsetMatrix, convertPositionMatrix([originX, originY], n));\r\n                var fixedAfterOrigin = calculate(allMatrix, convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n));\r\n                originalFixedPosition_1(fixedPosition);\r\n                var posDelta = state.posDelta;\r\n                datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\r\n                datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\r\n            };\r\n            setFixedDirection = function (fixedDirection) {\r\n                var fixedPosition = getPosByDirection([\r\n                    [0, 0],\r\n                    [width, 0],\r\n                    [0, height],\r\n                    [width, height],\r\n                ], fixedDirection);\r\n                setFixedPosition(fixedPosition);\r\n            };\r\n        }\r\n        datas.startClientX = startClientX;\r\n        datas.startClientY = startClientY;\r\n        datas.direction = direction;\r\n        datas.beforeDirection = beforeDirection;\r\n        datas.startValue = 0;\r\n        datas.datas = {};\r\n        setDefaultTransformIndex(moveable, e, \"rotate\");\r\n        var dragStart = false;\r\n        var resizeStart = false;\r\n        if (datas.isControl && datas.resolveAble) {\r\n            var resolveAble = datas.resolveAble;\r\n            if (resolveAble === \"resizable\") {\r\n                resizeStart = Resizable.dragControlStart(moveable, __assign(__assign({}, (new CustomGesto(\"resizable\").dragStart([0, 0], e))), { parentPosition: datas.controlPosition, parentFixedPosition: datas.fixedPosition }));\r\n            }\r\n        }\r\n        if (!resizeStart) {\r\n            dragStart = Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e));\r\n        }\r\n        setFixedPosition(getTotalOrigin(moveable));\r\n        var params = fillParams(moveable, e, __assign(__assign({ set: function (rotatation) {\r\n                datas.startValue = rotatation * Math.PI / 180;\r\n            }, setFixedDirection: setFixedDirection, setFixedPosition: setFixedPosition }, fillTransformStartEvent(moveable, e)), { dragStart: dragStart, resizeStart: resizeStart }));\r\n        var result = triggerEvent(moveable, \"onRotateStart\", params);\r\n        datas.isRotate = result !== false;\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n        };\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, clientDistX = e.clientDistX, clientDistY = e.clientDistY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, groupDelta = e.groupDelta, resolveMatrix = e.resolveMatrix;\r\n        var beforeDirection = datas.beforeDirection, beforeInfo = datas.beforeInfo, afterInfo = datas.afterInfo, absoluteInfo = datas.absoluteInfo, isRotate = datas.isRotate, startValue = datas.startValue, rect = datas.rect, startClientX = datas.startClientX, startClientY = datas.startClientY;\r\n        if (!isRotate) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"rotate\");\r\n        var targetDirection = getTransformDirection(e);\r\n        var direction = beforeDirection * targetDirection;\r\n        var parentMoveable = moveable.props.parentMoveable;\r\n        var beforeDelta = 0;\r\n        var beforeDist;\r\n        var beforeRotation;\r\n        var delta = 0;\r\n        var dist;\r\n        var rotation;\r\n        var absoluteDelta = 0;\r\n        var absoluteDist;\r\n        var absoluteRotation;\r\n        var startRotation = 180 / Math.PI * startValue;\r\n        var absoluteStartRotation = absoluteInfo.startValue;\r\n        var isSnap = false;\r\n        var nextClientX = startClientX + clientDistX;\r\n        var nextClientY = startClientY + clientDistY;\r\n        if (!parentFlag && \"parentDist\" in e) {\r\n            var parentDist = e.parentDist;\r\n            beforeDist = parentDist;\r\n            dist = parentDist;\r\n            absoluteDist = parentDist;\r\n        }\r\n        else if (isPinch || parentFlag) {\r\n            beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDist(parentRotate, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\r\n        }\r\n        else {\r\n            beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\r\n            isSnap = true;\r\n        }\r\n        beforeRotation = startRotation + beforeDist;\r\n        rotation = startRotation + dist;\r\n        absoluteRotation = absoluteStartRotation + absoluteDist;\r\n        triggerEvent(moveable, \"onBeforeRotate\", fillParams(moveable, e, {\r\n            beforeRotation: beforeRotation,\r\n            rotation: rotation,\r\n            absoluteRotation: absoluteRotation,\r\n            setRotation: function (nextRotation) {\r\n                dist = nextRotation - startRotation;\r\n                beforeDist = dist;\r\n                absoluteDist = dist;\r\n            },\r\n        }, true));\r\n        _a = __read(getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap), 3), beforeDelta = _a[0], beforeDist = _a[1], beforeRotation = _a[2];\r\n        _b = __read(getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap), 3), delta = _b[0], dist = _b[1], rotation = _b[2];\r\n        _c = __read(getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap), 3), absoluteDelta = _c[0], absoluteDist = _c[1], absoluteRotation = _c[2];\r\n        if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable && !resolveMatrix) {\r\n            return;\r\n        }\r\n        var nextTransform = convertTransformFormat(datas, \"rotate(\".concat(rotation, \"deg)\"), \"rotate(\".concat(dist, \"deg)\"));\r\n        if (resolveMatrix) {\r\n            datas.fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, datas.fixedDirection, datas.fixedOffset, datas);\r\n        }\r\n        var inverseDist = getRotateDist(moveable, dist, datas);\r\n        var inverseDelta = minus(plus(groupDelta || [0, 0], inverseDist), datas.prevInverseDist || [0, 0]);\r\n        datas.prevInverseDist = inverseDist;\r\n        datas.requestValue = null;\r\n        var dragEvent = fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e);\r\n        var transformEvent = dragEvent;\r\n        var parentDistance = getDist$1([nextClientX, nextClientY], absoluteInfo.startAbsoluteOrigin) - absoluteInfo.startDist;\r\n        var resize = undefined;\r\n        if (datas.resolveAble === \"resizable\") {\r\n            var resizeEvent = Resizable.dragControl(moveable, __assign(__assign({}, setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\")), { resolveMatrix: true, parentDistance: parentDistance }));\r\n            if (resizeEvent) {\r\n                resize = resizeEvent;\r\n                transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\r\n            }\r\n        }\r\n        var params = fillParams(moveable, e, __assign(__assign({ delta: delta, dist: dist, rotate: rotation, rotation: rotation, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeRotate: beforeRotation, beforeRotation: beforeRotation, absoluteDist: absoluteDist, absoluteDelta: absoluteDelta, absoluteRotate: absoluteRotation, absoluteRotation: absoluteRotation, isPinch: !!isPinch, resize: resize }, dragEvent), transformEvent));\r\n        triggerEvent(moveable, \"onRotate\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        datas.isRotate = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRotateEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: dragControlCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var _a = moveable.state, parentLeft = _a.left, parentTop = _a.top, parentBeforeOrigin = _a.beforeOrigin;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        params.set(datas.beforeDirection * moveable.rotation);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            var _a = child.state, left = _a.left, top = _a.top, beforeOrigin = _a.beforeOrigin;\r\n            var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\r\n            ev.datas.startGroupClient = childClient;\r\n            ev.datas.groupClient = childClient;\r\n            return __assign(__assign({}, ev), { parentRotate: 0 });\r\n        });\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events });\r\n        var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\r\n        datas.isRotate = result !== false;\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeRotate\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var direction = datas.beforeDirection;\r\n        var parentRotate = params.beforeDist;\r\n        var rad = parentRotate / 180 * Math.PI;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var startGroupClient = ev.datas.startGroupClient;\r\n            var _a = __read(ev.datas.groupClient, 2), prevClientX = _a[0], prevClientY = _a[1];\r\n            var _b = __read(rotate(startGroupClient, rad * direction), 2), clientX = _b[0], clientY = _b[1];\r\n            var delta = [clientX - prevClientX, clientY - prevClientY];\r\n            ev.datas.groupClient = [clientX, clientY];\r\n            return __assign(__assign({}, ev), { parentRotate: parentRotate, groupDelta: delta });\r\n        });\r\n        moveable.rotation = direction * params.beforeRotation;\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events, set: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            }, setGroupRotation: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            } }, params);\r\n        triggerEvent(moveable, \"onRotateGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Rotatable#request\r\n     * @param {object} [e] - the Resizable's request parameter\r\n     * @param {number} [e.deltaRotate=0] -  delta number of rotation\r\n     * @param {number} [e.rotate=0] - absolute number of moveable's rotation\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\r\n     *\r\n     * * moveable.request(\"rotatable\", { rotate: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"rotatable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     *\r\n     * requester.request({ rotate: 10 });\r\n     * requester.request({ rotate: 20 });\r\n     * requester.request({ rotate: 30 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distRotate = 0;\r\n        var startRotation = moveable.getRotation();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaRotate\" in e) {\r\n                    distRotate += e.deltaRotate;\r\n                }\r\n                else if (\"rotate\" in e) {\r\n                    distRotate = e.rotate - startRotation;\r\n                }\r\n                return { datas: datas, parentDist: distRotate };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be rotated. (default: false)\r\n * @name Moveable.Rotatable#rotatable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.rotatable = true;\r\n */\r\n/**\r\n * You can specify the position of the rotation. (default: \"top\")\r\n * @name Moveable.Rotatable#rotationPosition\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   rotationPosition: \"top\",\r\n * });\r\n *\r\n * moveable.rotationPosition = \"bottom\"\r\n */\r\n/**\r\n * throttle of angle(degree) when rotate.\r\n * @name Moveable.Rotatable#throttleRotate\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleRotate = 1;\r\n */\r\n/**\r\n * When the rotate starts, the rotateStart event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateStart\r\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n* When rotating, the rotate event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotate\r\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { rotatable: true });\r\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\r\n*     target.style.transform = transform;\r\n* });\r\n*/\r\n/**\r\n * When the rotate finishes, the rotateEnd event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateEnd\r\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n * When the group rotate starts, the `rotateGroupStart` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupStart\r\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRotateGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n* When the group rotate, the `rotateGroup` event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotateGroup\r\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     rotatable: true\r\n* });\r\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\r\n*     console.log(\"onRotateGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group rotate.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const deg = ev.beforeDist;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupEnd\r\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction renderGuideline(info, React) {\r\n    var _a;\r\n    var direction = info.direction, classNames = info.classNames, size = info.size, pos = info.pos, zoom = info.zoom, key = info.key;\r\n    var isHorizontal = direction === \"horizontal\";\r\n    var scaleType = isHorizontal ? \"Y\" : \"X\";\r\n    // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\r\n    return React.createElement(\"div\", {\r\n        key: key,\r\n        className: classNames.join(\" \"),\r\n        style: (_a = {},\r\n            _a[isHorizontal ? \"width\" : \"height\"] = \"\".concat(size),\r\n            _a.transform = \"translate(\".concat(pos[0], \", \").concat(pos[1], \") translate\").concat(scaleType, \"(-50%) scale\").concat(scaleType, \"(\").concat(zoom, \")\"),\r\n            _a),\r\n    });\r\n}\r\nfunction renderInnerGuideline(info, React) {\r\n    return renderGuideline(__assign(__assign({}, info), { classNames: __spreadArray([\r\n            prefix(\"line\", \"guideline\", info.direction)\r\n        ], __read(info.classNames), false).filter(function (className) { return className; }), size: info.size || \"\".concat(info.sizeValue, \"px\"), pos: info.pos || info.posValue.map(function (v) { return \"\".concat(throttle(v, 0.1), \"px\"); }) }), React);\r\n}\r\nfunction renderSnapPoses(moveable, direction, snapPoses, minPos, targetPos, size, index, React) {\r\n    var zoom = moveable.props.zoom;\r\n    return snapPoses.map(function (_a, i) {\r\n        var type = _a.type, pos = _a.pos;\r\n        var renderPos = [0, 0];\r\n        renderPos[index] = minPos;\r\n        renderPos[index ? 0 : 1] = -targetPos + pos;\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(direction, \"TargetGuideline\").concat(i),\r\n            classNames: [prefix(\"target\", \"bold\", type)],\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n            direction: direction,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderGuidelines(moveable, type, guidelines, targetPos, targetRect, React) {\r\n    var _a = moveable.props, zoom = _a.zoom, isDisplayInnerSnapDigit = _a.isDisplayInnerSnapDigit;\r\n    var mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[mainNames.start];\r\n    var targetEnd = targetRect[mainNames.end];\r\n    return guidelines.filter(function (_a) {\r\n        var hide = _a.hide, elementRect = _a.elementRect;\r\n        if (hide) {\r\n            return false;\r\n        }\r\n        if (isDisplayInnerSnapDigit && elementRect) {\r\n            // inner\r\n            var rect = elementRect.rect;\r\n            if (rect[mainNames.start] <= targetStart && targetEnd <= rect[mainNames.end]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).map(function (guideline, i) {\r\n        var pos = guideline.pos, size = guideline.size, element = guideline.element, className = guideline.className;\r\n        var renderPos = [\r\n            -targetPos[0] + pos[0],\r\n            -targetPos[1] + pos[1],\r\n        ];\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(type, \"-default-guideline-\").concat(i),\r\n            classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\r\n            direction: type,\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderDigitLine(moveable, type, lineType, index, gap, renderPos, className, React) {\r\n    var _a;\r\n    var _b = moveable.props, _c = _b.snapDigit, snapDigit = _c === void 0 ? 0 : _c, _d = _b.isDisplaySnapDigit, isDisplaySnapDigit = _d === void 0 ? true : _d, _e = _b.snapDistFormat, snapDistFormat = _e === void 0 ? function (v, type) {\r\n        // Type can be used render different values.\r\n        if (type === 'vertical') {\r\n            return v;\r\n        }\r\n        return v;\r\n    } : _e, zoom = _b.zoom;\r\n    var scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\r\n    var sizeName = type === \"vertical\" ? \"height\" : \"width\";\r\n    var absGap = Math.abs(gap);\r\n    var snapSize = isDisplaySnapDigit\r\n        ? parseFloat(absGap.toFixed(snapDigit))\r\n        : 0;\r\n    return React.createElement(\"div\", { key: \"\".concat(type, \"-\").concat(lineType, \"-guideline-\").concat(index), className: prefix(\"guideline-group\", type), style: (_a = {\r\n                left: \"\".concat(renderPos[0], \"px\"),\r\n                top: \"\".concat(renderPos[1], \"px\")\r\n            },\r\n            _a[sizeName] = \"\".concat(absGap, \"px\"),\r\n            _a) },\r\n        renderInnerGuideline({\r\n            direction: type,\r\n            classNames: [prefix(lineType), className],\r\n            size: \"100%\",\r\n            posValue: [0, 0],\r\n            sizeValue: absGap,\r\n            zoom: zoom,\r\n        }, React),\r\n        React.createElement(\"div\", { className: prefix(\"size-value\", \"gap\"), style: {\r\n                transform: \"translate\".concat(scaleType, \"(-50%) scale(\").concat(zoom, \")\"),\r\n            } }, snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"));\r\n}\r\nfunction groupByElementGuidelines(type, guidelines, targetRect, isDisplayInnerSnapDigit) {\r\n    var index = type === \"vertical\" ? 0 : 1;\r\n    var otherIndex = type === \"vertical\" ? 1 : 0;\r\n    var names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[names.start];\r\n    var targetEnd = targetRect[names.end];\r\n    return groupBy(guidelines, function (guideline) {\r\n        return guideline.pos[index];\r\n    }).map(function (nextGuidelines) {\r\n        var start = [];\r\n        var end = [];\r\n        var inner = [];\r\n        nextGuidelines.forEach(function (guideline) {\r\n            var _a, _b;\r\n            var element = guideline.element;\r\n            var rect = guideline.elementRect.rect;\r\n            if (rect[names.end] < targetStart) {\r\n                start.push(guideline);\r\n            }\r\n            else if (targetEnd < rect[names.start]) {\r\n                end.push(guideline);\r\n            }\r\n            else if (rect[names.start] <= targetStart && targetEnd <= rect[names.end] && isDisplayInnerSnapDigit) {\r\n                var pos = guideline.pos;\r\n                var elementRect1 = { element: element, rect: __assign(__assign({}, rect), (_a = {}, _a[names.end] = rect[names.start], _a)) };\r\n                var elementRect2 = { element: element, rect: __assign(__assign({}, rect), (_b = {}, _b[names.start] = rect[names.end], _b)) };\r\n                var nextPos1 = [0, 0];\r\n                var nextPos2 = [0, 0];\r\n                nextPos1[index] = pos[index];\r\n                nextPos1[otherIndex] = pos[otherIndex];\r\n                nextPos2[index] = pos[index];\r\n                nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\r\n                start.push({\r\n                    type: type,\r\n                    pos: nextPos1,\r\n                    size: 0,\r\n                    elementRect: elementRect1,\r\n                    direction: \"\",\r\n                    elementDirection: \"end\",\r\n                });\r\n                end.push({\r\n                    type: type,\r\n                    pos: nextPos2,\r\n                    size: 0,\r\n                    elementRect: elementRect2,\r\n                    direction: \"\",\r\n                    elementDirection: \"start\",\r\n                });\r\n                // inner.push(guideline);\r\n            }\r\n        });\r\n        start.sort(function (a, b) {\r\n            return b.pos[otherIndex] - a.pos[otherIndex];\r\n        });\r\n        end.sort(function (a, b) {\r\n            return a.pos[otherIndex] - b.pos[otherIndex];\r\n        });\r\n        return {\r\n            total: nextGuidelines,\r\n            start: start,\r\n            end: end,\r\n            inner: inner,\r\n        };\r\n    });\r\n}\r\nfunction renderDashedGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var isDisplayInnerSnapDigit = moveable.props.isDisplayInnerSnapDigit;\r\n    var rendered = [];\r\n    [\"vertical\", \"horizontal\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; });\r\n        var index = type === \"vertical\" ? 1 : 0;\r\n        var otherIndex = index ? 0 : 1;\r\n        var groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit);\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        groups.forEach(function (_a) {\r\n            var total = _a.total, start = _a.start, end = _a.end, inner = _a.inner;\r\n            var sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start];\r\n            var prevRect = targetRect;\r\n            start.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = prevRect[mainNames.start] - nextRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.start] - targetStart - size;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            prevRect = targetRect;\r\n            end.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = nextRect[mainNames.start] - prevRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.end] - targetStart;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            inner.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size1 = targetStart - nextRect[mainNames.start];\r\n                var size2 = nextRect[mainNames.end] - targetEnd;\r\n                var renderPos1 = [0, 0];\r\n                var renderPos2 = [0, 0];\r\n                renderPos1[index] = targetPos[index] - size1;\r\n                renderPos1[otherIndex] = sidePos;\r\n                renderPos2[index] = targetPos[index] + targetEnd - targetStart;\r\n                renderPos2[otherIndex] = sidePos;\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size1, renderPos1, guideline.className, React));\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size2, renderPos2, guideline.className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\r\nfunction renderGapGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var rendered = [];\r\n    [\"horizontal\", \"vertical\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; }).slice(0, 1);\r\n        var index = type === \"vertical\" ? 0 : 1;\r\n        var otherIndex = index ? 0 : 1;\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetSideStart = targetRect[sideNames.start];\r\n        var targetSideEnd = targetRect[sideNames.end];\r\n        nextGuidelines.forEach(function (_a) {\r\n            var gap = _a.gap, gapRects = _a.gapRects;\r\n            var sideStartPos = Math.max.apply(Math, __spreadArray([targetSideStart], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.start];\r\n            })), false));\r\n            var sideEndPos = Math.min.apply(Math, __spreadArray([targetSideEnd], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.end];\r\n            })), false));\r\n            var sideCenterPos = (sideStartPos + sideEndPos) / 2;\r\n            if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd) / 2) {\r\n                return;\r\n            }\r\n            gapRects.forEach(function (_a) {\r\n                var rect = _a.rect, className = _a.className;\r\n                var renderPos = [targetPos[0], targetPos[1]];\r\n                if (rect[mainNames.end] < targetStart) {\r\n                    renderPos[index] += rect[mainNames.end] - targetStart;\r\n                }\r\n                else if (targetEnd < rect[mainNames.start]) {\r\n                    renderPos[index] += rect[mainNames.start] - targetStart - gap;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n                renderPos[otherIndex] += sideCenterPos - targetSideStart;\r\n                rendered.push(renderDigitLine(moveable, index ? \"vertical\" : \"horizontal\", \"gap\", rendered.length, gap, renderPos, className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\n\nfunction getTotalGuidelines(moveable) {\r\n    var _a, _b;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, hasFixed = state.hasFixed;\r\n    var overflow = containerClientRect.overflow, containerHeight = containerClientRect.scrollHeight, containerWidth = containerClientRect.scrollWidth, containerClientHeight = containerClientRect.clientHeight, containerClientWidth = containerClientRect.clientWidth, clientLeft = containerClientRect.clientLeft, clientTop = containerClientRect.clientTop;\r\n    var _c = moveable.props, _d = _c.snapGap, snapGap = _d === void 0 ? true : _d, verticalGuidelines = _c.verticalGuidelines, horizontalGuidelines = _c.horizontalGuidelines, _e = _c.snapThreshold, snapThreshold = _e === void 0 ? 5 : _e, _f = _c.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _f === void 0 ? Infinity : _f, isDisplayGridGuidelines = _c.isDisplayGridGuidelines;\r\n    var _g = getRect(getAbsolutePosesByState(moveable.state)), top = _g.top, left = _g.left, bottom = _g.bottom, right = _g.right;\r\n    var targetRect = { top: top, left: left, bottom: bottom, right: right, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n    var elementGuidelines = getElementGuidelines(moveable);\r\n    var totalGuidelines = __spreadArray([], __read(elementGuidelines), false);\r\n    var snapThresholdMultiples = ((_b = (_a = state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) !== null && _b !== void 0 ? _b : [1, 1]).map(function (n) { return n * snapThreshold; });\r\n    if (snapGap) {\r\n        totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGapGuidelines(moveable, targetRect, snapThresholdMultiples)), false));\r\n    }\r\n    var snapOffset = __assign({}, (state.snapOffset || {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    }));\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGridGuidelines(moveable, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines)), false));\r\n    if (hasFixed) {\r\n        var left_1 = containerClientRect.left, top_1 = containerClientRect.top;\r\n        snapOffset.left += left_1;\r\n        snapOffset.top += top_1;\r\n        snapOffset.right += left_1;\r\n        snapOffset.bottom += top_1;\r\n    }\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getDefaultGuidelines(horizontalGuidelines || false, verticalGuidelines || false, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset)), false));\r\n    totalGuidelines = totalGuidelines.filter(function (_a) {\r\n        var element = _a.element, elementRect = _a.elementRect, type = _a.type;\r\n        if (!element || !elementRect) {\r\n            return true;\r\n        }\r\n        var rect = elementRect.rect;\r\n        return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\r\n    });\r\n    return totalGuidelines;\r\n}\r\nfunction getGapGuidelines(moveable, targetRect, snapThresholds) {\r\n    var _a = moveable.props, _b = _a.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _b === void 0 ? Infinity : _b, _c = _a.maxSnapElementGapDistance, maxSnapElementGapDistance = _c === void 0 ? Infinity : _c;\r\n    var elementRects = moveable.state.elementRects;\r\n    var gapGuidelines = [];\r\n    [\r\n        [\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP],\r\n        [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 3), type = _b[0], mainNames = _b[1], sideNames = _b[2];\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetCenter = targetRect[mainNames.center];\r\n        var targetStart2 = targetRect[sideNames.start];\r\n        var targetEnd2 = targetRect[sideNames.end];\r\n        // element : moveable\r\n        var snapThresholdMap = {\r\n            left: snapThresholds[0],\r\n            top: snapThresholds[1],\r\n        };\r\n        function getDist(elementRect) {\r\n            var rect = elementRect.rect;\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            if (rect[mainNames.end] < targetStart + snapThreshold) {\r\n                return targetStart - rect[mainNames.end];\r\n            }\r\n            else if (targetEnd - snapThreshold < rect[mainNames.start]) {\r\n                return rect[mainNames.start] - targetEnd;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        var nextElementRects = elementRects.filter(function (elementRect) {\r\n            var rect = elementRect.rect;\r\n            if (rect[sideNames.start] > targetEnd2 || rect[sideNames.end] < targetStart2) {\r\n                return false;\r\n            }\r\n            return getDist(elementRect) > 0;\r\n        }).sort(function (a, b) {\r\n            return getDist(a) - getDist(b);\r\n        });\r\n        var groups = [];\r\n        nextElementRects.forEach(function (snapRect1) {\r\n            nextElementRects.forEach(function (snapRect2) {\r\n                if (snapRect1 === snapRect2) {\r\n                    return;\r\n                }\r\n                var rect1 = snapRect1.rect;\r\n                var rect2 = snapRect2.rect;\r\n                var rect1Start = rect1[sideNames.start];\r\n                var rect1End = rect1[sideNames.end];\r\n                var rect2Start = rect2[sideNames.start];\r\n                var rect2End = rect2[sideNames.end];\r\n                if (rect1Start > rect2End || rect2Start > rect1End) {\r\n                    return;\r\n                }\r\n                groups.push([snapRect1, snapRect2]);\r\n            });\r\n        });\r\n        groups.forEach(function (_a) {\r\n            var _b = __read(_a, 2), snapRect1 = _b[0], snapRect2 = _b[1];\r\n            var rect1 = snapRect1.rect;\r\n            var rect2 = snapRect2.rect;\r\n            var rect1Start = rect1[mainNames.start];\r\n            var rect1End = rect1[mainNames.end];\r\n            var rect2Start = rect2[mainNames.start];\r\n            var rect2End = rect2[mainNames.end];\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            var gap = 0;\r\n            var pos = 0;\r\n            var isStart = false;\r\n            var isCenter = false;\r\n            var isEnd = false;\r\n            if (rect1End <= targetStart && targetEnd <= rect2Start) {\r\n                // (l)element1(r) : (l)target(r) : (l)element2(r)\r\n                isCenter = true;\r\n                gap = ((rect2Start - rect1End) - (targetEnd - targetStart)) / 2;\r\n                pos = rect1End + gap + (targetEnd - targetStart) / 2;\r\n                if (abs(pos - targetCenter) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\r\n                // (l)element1(r) : (l)element2(r) : (l)target\r\n                isStart = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect2End + gap;\r\n                if (abs(pos - targetStart) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\r\n                // target(r) : (l)element1(r) : (l)element2(r)\r\n                isEnd = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect1Start - gap;\r\n                if (abs(pos - targetEnd) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            if (!gap) {\r\n                return;\r\n            }\r\n            if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\r\n                return;\r\n            }\r\n            if (gap > maxSnapElementGapDistance) {\r\n                return;\r\n            }\r\n            gapGuidelines.push({\r\n                type: type,\r\n                pos: type === \"vertical\" ? [pos, 0] : [0, pos],\r\n                element: snapRect2.element,\r\n                size: 0,\r\n                className: snapRect2.className,\r\n                isStart: isStart,\r\n                isCenter: isCenter,\r\n                isEnd: isEnd,\r\n                gap: gap,\r\n                hide: true,\r\n                gapRects: [snapRect1, snapRect2],\r\n                direction: \"\",\r\n                elementDirection: \"\",\r\n            });\r\n        });\r\n    });\r\n    return gapGuidelines;\r\n}\r\nfunction startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset) {\r\n    var _a, _b;\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var snapGridAll = props.snapGridAll;\r\n    var _c = props.snapGridWidth, snapGridWidth = _c === void 0 ? 0 : _c, _d = props.snapGridHeight, snapGridHeight = _d === void 0 ? 0 : _d;\r\n    var snapRenderInfo = state.snapRenderInfo;\r\n    var hasDirection = snapRenderInfo && (((_a = snapRenderInfo.direction) === null || _a === void 0 ? void 0 : _a[0]) || ((_b = snapRenderInfo.direction) === null || _b === void 0 ? void 0 : _b[1]));\r\n    var moveables = moveable.moveables;\r\n    // snap group's all child to grid.\r\n    if (snapGridAll\r\n        && moveables\r\n        && hasDirection\r\n        && (snapGridWidth || snapGridHeight)) {\r\n        if (state.snapThresholdInfo) {\r\n            return;\r\n        }\r\n        state.snapThresholdInfo = {\r\n            multiples: [1, 1],\r\n            offset: [0, 0],\r\n        };\r\n        var rect_1 = moveable.getRect();\r\n        var children_1 = rect_1.children;\r\n        var direction = snapRenderInfo.direction;\r\n        if (children_1) {\r\n            var result = direction.map(function (dir, i) {\r\n                var _a = i === 0 ? {\r\n                    snapSize: snapGridWidth,\r\n                    posName: \"left\",\r\n                    sizeName: \"width\",\r\n                    clientOffset: snapOffset.left - clientLeft,\r\n                } : {\r\n                    snapSize: snapGridHeight,\r\n                    posName: \"top\",\r\n                    sizeName: \"height\",\r\n                    clientOffset: snapOffset.top - clientTop,\r\n                }, snapSize = _a.snapSize, posName = _a.posName, sizeName = _a.sizeName, clientOffset = _a.clientOffset;\r\n                if (!snapSize) {\r\n                    return {\r\n                        dir: dir,\r\n                        multiple: 1,\r\n                        snapSize: snapSize,\r\n                        snapOffset: 0,\r\n                    };\r\n                }\r\n                var rectSize = rect_1[sizeName];\r\n                var rectPos = rect_1[posName];\r\n                // 사이즈보다 만약 작다면 어떻게 해야되죠?\r\n                var childSizes = flat$1(children_1.map(function (child) {\r\n                    return [\r\n                        (child[posName] - rectPos),\r\n                        (child[sizeName]),\r\n                        (rectSize - child[sizeName] - child[posName] + rectPos),\r\n                    ];\r\n                })).filter(function (v) { return v; }).sort(function (a, b) {\r\n                    return a - b;\r\n                });\r\n                var firstChildSize = childSizes[0];\r\n                var childSnapSizes = childSizes.map(function (size) { return throttle(size / firstChildSize, 0.1) * snapSize; });\r\n                var n = 1;\r\n                var rectRatio = throttle(rectSize / firstChildSize, 0.1);\r\n                for (n = 1; n <= 10; ++n) {\r\n                    if (childSnapSizes.every(function (childSize) {\r\n                        return childSize * n % 1 === 0;\r\n                    })) {\r\n                        break;\r\n                    }\r\n                }\r\n                // dir 1 (fixed -1)\r\n                // dir 0 (fixed 0)\r\n                // dir -1 (fixed 1)\r\n                var ratio = (-dir + 1) / 2;\r\n                var offsetPos = dot(rectPos - clientOffset, rectPos - clientOffset + rectSize, ratio, 1 - ratio);\r\n                return {\r\n                    multiple: rectRatio * n,\r\n                    dir: dir,\r\n                    snapSize: snapSize,\r\n                    snapOffset: Math.round(offsetPos / snapSize),\r\n                };\r\n            });\r\n            var multiples = result.map(function (r) { return r.multiple || 1; });\r\n            state.snapThresholdInfo.multiples = multiples;\r\n            state.snapThresholdInfo.offset = result.map(function (r) { return r.snapOffset; });\r\n            result.forEach(function (r, i) {\r\n                if (r.snapSize) ;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        state.snapThresholdInfo = null;\r\n    }\r\n}\r\nfunction getGridGuidelines(moveable, containerWidth, containerHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var _a = props.snapGridWidth, snapGridWidth = _a === void 0 ? 0 : _a, _b = props.snapGridHeight, snapGridHeight = _b === void 0 ? 0 : _b;\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top;\r\n    var startOffset = [0, 0];\r\n    startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset);\r\n    var snapThresholdInfo = state.snapThresholdInfo;\r\n    var defaultSnapGridWidth = snapGridWidth;\r\n    var defaultSnapGridHeight = snapGridHeight;\r\n    if (snapThresholdInfo) {\r\n        snapGridWidth *= snapThresholdInfo.multiples[0] || 1;\r\n        snapGridHeight *= snapThresholdInfo.multiples[1] || 1;\r\n        startOffset = snapThresholdInfo.offset;\r\n    }\r\n    if (snapGridHeight) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"horizontal\",\r\n                pos: [\r\n                    snapOffsetLeft,\r\n                    throttle(startOffset[1] * defaultSnapGridHeight + pos - clientTop + snapOffsetTop, 0.1),\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerWidth,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerHeight * 2; pos += snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridHeight; pos >= -containerHeight; pos -= snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    if (snapGridWidth) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"vertical\",\r\n                pos: [\r\n                    throttle(startOffset[0] * defaultSnapGridWidth + pos - clientLeft + snapOffsetLeft, 0.1),\r\n                    snapOffsetTop,\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerHeight,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerWidth * 2; pos += snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridWidth; pos >= -containerWidth; pos -= snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    return guidelines;\r\n}\r\nfunction checkBetweenRects(rect1, rect2, type, distance) {\r\n    if (type === \"horizontal\") {\r\n        return abs(rect1.right - rect2.left) <= distance\r\n            || abs(rect1.left - rect2.right) <= distance\r\n            || rect1.left <= rect2.right && rect2.left <= rect1.right;\r\n    }\r\n    else if (type === \"vertical\") {\r\n        return abs(rect1.bottom - rect2.top) <= distance\r\n            || abs(rect1.top - rect2.bottom) <= distance\r\n            || rect1.top <= rect2.bottom && rect2.top <= rect1.bottom;\r\n    }\r\n    return true;\r\n}\r\nfunction getElementGuidelines(moveable) {\r\n    var state = moveable.state;\r\n    var _a = moveable.props.elementGuidelines, elementGuidelines = _a === void 0 ? [] : _a;\r\n    if (!elementGuidelines.length) {\r\n        state.elementRects = [];\r\n        return [];\r\n    }\r\n    var prevValues = (state.elementRects || []).filter(function (snapRect) { return !snapRect.refresh; });\r\n    var nextElementGuidelines = elementGuidelines.map(function (el) {\r\n        if (isObject(el) && \"element\" in el) {\r\n            return __assign(__assign({}, el), { element: getRefTarget(el.element, true) });\r\n        }\r\n        return {\r\n            element: getRefTarget(el, true),\r\n        };\r\n    }).filter(function (value) {\r\n        return value.element;\r\n    });\r\n    var _b = diff(prevValues.map(function (v) { return v.element; }), nextElementGuidelines.map(function (v) { return v.element; })), maintained = _b.maintained, added = _b.added;\r\n    var nextValues = [];\r\n    maintained.forEach(function (_a) {\r\n        var _b = __read(_a, 2), prevIndex = _b[0], nextIndex = _b[1];\r\n        nextValues[nextIndex] = prevValues[prevIndex];\r\n    });\r\n    getSnapElementRects(moveable, added.map(function (index) { return nextElementGuidelines[index]; })).map(function (rect, i) {\r\n        nextValues[added[i]] = rect;\r\n    });\r\n    state.elementRects = nextValues;\r\n    var elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\r\n    var nextGuidelines = [];\r\n    nextValues.forEach(function (snapRect) {\r\n        var element = snapRect.element, _a = snapRect.top, topValue = _a === void 0 ? elementSnapDirections.top : _a, _b = snapRect.left, leftValue = _b === void 0 ? elementSnapDirections.left : _b, _c = snapRect.right, rightValue = _c === void 0 ? elementSnapDirections.right : _c, _d = snapRect.bottom, bottomValue = _d === void 0 ? elementSnapDirections.bottom : _d, _e = snapRect.center, centerValue = _e === void 0 ? elementSnapDirections.center : _e, _f = snapRect.middle, middleValue = _f === void 0 ? elementSnapDirections.middle : _f, className = snapRect.className, rect = snapRect.rect;\r\n        var _g = splitSnapDirectionPoses({\r\n            top: topValue,\r\n            right: rightValue,\r\n            left: leftValue,\r\n            bottom: bottomValue,\r\n            center: centerValue,\r\n            middle: middleValue,\r\n        }, rect), horizontal = _g.horizontal, vertical = _g.vertical, horizontalNames = _g.horizontalNames, verticalNames = _g.verticalNames;\r\n        var rectTop = rect.top;\r\n        var rectLeft = rect.left;\r\n        var width = rect.right - rectLeft;\r\n        var height = rect.bottom - rectTop;\r\n        var sizes = [width, height];\r\n        vertical.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"vertical\",\r\n                element: element,\r\n                pos: [\r\n                    throttle(pos, 0.1),\r\n                    rectTop,\r\n                ], size: height,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[verticalNames[i]] || verticalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n        horizontal.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"horizontal\",\r\n                element: element,\r\n                pos: [\r\n                    rectLeft,\r\n                    throttle(pos, 0.1),\r\n                ],\r\n                size: width,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[horizontalNames[i]] || horizontalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n    });\r\n    return nextGuidelines;\r\n}\r\nfunction getObjectGuidelines(guidelines, containerSize) {\r\n    return guidelines ? guidelines.map(function (info) {\r\n        var posGuideline = isObject(info) ? info : { pos: info };\r\n        var pos = posGuideline.pos;\r\n        if (isNumber(pos)) {\r\n            return posGuideline;\r\n        }\r\n        else {\r\n            return __assign(__assign({}, posGuideline), { pos: convertUnitSize(pos, containerSize) });\r\n        }\r\n    }) : [];\r\n}\r\nfunction getDefaultGuidelines(horizontalGuidelines, verticalGuidelines, width, height, clientLeft, clientTop, snapOffset) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    if (snapOffset === void 0) { snapOffset = { left: 0, top: 0, right: 0, bottom: 0 }; }\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top, snapOffsetBottom = snapOffset.bottom, snapOffsetRight = snapOffset.right;\r\n    var snapWidth = width + snapOffsetRight - snapOffsetLeft;\r\n    var snapHeight = height + snapOffsetBottom - snapOffsetTop;\r\n    getObjectGuidelines(horizontalGuidelines, snapHeight).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"horizontal\",\r\n            pos: [\r\n                snapOffsetLeft,\r\n                throttle(posInfo.pos - clientTop + snapOffsetTop, 0.1),\r\n            ],\r\n            size: snapWidth,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    getObjectGuidelines(verticalGuidelines, snapWidth).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"vertical\",\r\n            pos: [\r\n                throttle(posInfo.pos - clientLeft + snapOffsetLeft, 0.1),\r\n                snapOffsetTop,\r\n            ],\r\n            size: snapHeight,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    return guidelines;\r\n}\r\nfunction getSnapElementRects(moveable, values) {\r\n    if (!values.length) {\r\n        return [];\r\n    }\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, \r\n    // targetClientRect: {\r\n    //     top: clientTop,\r\n    //     left: clientLeft,\r\n    // },\r\n    rootMatrix = state.rootMatrix, is3d = state.is3d, offsetDelta = state.offsetDelta;\r\n    var n = is3d ? 4 : 3;\r\n    var _a = __read(calculateContainerPos(rootMatrix, containerClientRect, n), 2), containerLeft = _a[0], containerTop = _a[1];\r\n    // const poses = getAbsolutePosesByState(state);\r\n    // const {\r\n    //     minX: targetLeft,\r\n    //     minY: targetTop,\r\n    // } = getMinMaxs(poses);\r\n    // const [distLeft, distTop] = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [\r\n    //     clientLeft - containerLeft,\r\n    //     clientTop - containerTop,\r\n    // ], n)).map(pos => roundSign(pos));\r\n    var offsetLeft = groupable ? 0 : offsetDelta[0];\r\n    var offsetTop = groupable ? 0 : offsetDelta[1];\r\n    return values.map(function (value) {\r\n        var rect = value.element.getBoundingClientRect();\r\n        var left = rect.left - containerLeft - offsetLeft;\r\n        var top = rect.top - containerTop - offsetTop;\r\n        var bottom = top + rect.height;\r\n        var right = left + rect.width;\r\n        var _a = __read(calculateInversePosition(rootMatrix, [left, top], n), 2), elementLeft = _a[0], elementTop = _a[1];\r\n        var _b = __read(calculateInversePosition(rootMatrix, [right, bottom], n), 2), elementRight = _b[0], elementBottom = _b[1];\r\n        return __assign(__assign({}, value), { rect: {\r\n                left: elementLeft,\r\n                right: elementRight,\r\n                top: elementTop,\r\n                bottom: elementBottom,\r\n                center: (elementLeft + elementRight) / 2,\r\n                middle: (elementTop + elementBottom) / 2,\r\n            } });\r\n    });\r\n}\n\nfunction checkSnapInfo(moveable) {\r\n    var state = moveable.state;\r\n    var container = state.container;\r\n    var snapContainer = moveable.props.snapContainer || container;\r\n    if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\r\n        return false;\r\n    }\r\n    var containerClientRect = state.containerClientRect;\r\n    var snapOffset = {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    };\r\n    if (container !== snapContainer) {\r\n        var snapContainerTarget = getRefTarget(snapContainer, true);\r\n        if (snapContainerTarget) {\r\n            var snapContainerRect = getClientRect(snapContainerTarget);\r\n            var offset1 = getDragDistByState(state, [\r\n                snapContainerRect.left - containerClientRect.left,\r\n                snapContainerRect.top - containerClientRect.top,\r\n            ]);\r\n            var offset2 = getDragDistByState(state, [\r\n                snapContainerRect.right - containerClientRect.right,\r\n                snapContainerRect.bottom - containerClientRect.bottom,\r\n            ]);\r\n            snapOffset.left = throttle(offset1[0], 0.00001);\r\n            snapOffset.top = throttle(offset1[1], 0.00001);\r\n            snapOffset.right = throttle(offset2[0], 0.00001);\r\n            snapOffset.bottom = throttle(offset2[1], 0.00001);\r\n        }\r\n    }\r\n    state.snapContainer = snapContainer;\r\n    state.snapOffset = snapOffset;\r\n    state.guidelines = getTotalGuidelines(moveable);\r\n    state.enableSnap = true;\r\n    return true;\r\n}\r\nfunction getNextFixedPoses(matrix, width, height, fixedDirection, fixedPos, is3d) {\r\n    var nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\r\n    var nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\r\n    return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\r\n}\r\nfunction normalized(value) {\r\n    return value ? value / abs(value) : 0;\r\n}\r\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\r\n    var innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\r\n    var offsets = __spreadArray(__spreadArray([], __read(getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas)), false), __read(getInnerBoundInfo(moveable, innerBoundLineInfos, datas)), false);\r\n    var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\r\n    return {\r\n        width: {\r\n            isBound: widthOffsetInfo.isBound,\r\n            offset: widthOffsetInfo.offset[0],\r\n        },\r\n        height: {\r\n            isBound: heightOffsetInfo.isBound,\r\n            offset: heightOffsetInfo.offset[1],\r\n        },\r\n    };\r\n}\r\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\r\n    var snapPos = getPosByDirection(poses, direction);\r\n    var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n        vertical: [snapPos[0]],\r\n        horizontal: [snapPos[1]],\r\n    }), horizontalOffset = _a.horizontal.offset, verticalOffset = _a.vertical.offset;\r\n    if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\r\n        var _b = __read(getDragDist({\r\n            datas: datas,\r\n            distX: -verticalOffset,\r\n            distY: -horizontalOffset,\r\n        }), 2), nextWidthOffset = _b[0], nextHeightOffset = _b[1];\r\n        var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\r\n        var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\r\n        return [nextWidth - width, nextHeight - height];\r\n    }\r\n    return [0, 0];\r\n}\r\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPosition, isRequest, datas) {\r\n    var poses = getAbsolutePosesByState(moveable.state);\r\n    var keepRatio = moveable.props.keepRatio;\r\n    var widthOffset = 0;\r\n    var heightOffset = 0;\r\n    for (var i = 0; i < 2; ++i) {\r\n        var nextPoses = getNextPoses(widthOffset, heightOffset);\r\n        var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas), widthOffsetInfo = _a.width, heightOffsetInfo = _a.height;\r\n        var isWidthBound = widthOffsetInfo.isBound;\r\n        var isHeightBound = heightOffsetInfo.isBound;\r\n        var nextWidthOffset = widthOffsetInfo.offset;\r\n        var nextHeightOffset = heightOffsetInfo.offset;\r\n        if (i === 1) {\r\n            if (!isWidthBound) {\r\n                nextWidthOffset = 0;\r\n            }\r\n            if (!isHeightBound) {\r\n                nextHeightOffset = 0;\r\n            }\r\n        }\r\n        if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\r\n            return [0, 0];\r\n        }\r\n        if (keepRatio) {\r\n            var widthDist = abs(nextWidthOffset) * (width ? 1 / width : 1);\r\n            var heightDist = abs(nextHeightOffset) * (height ? 1 / height : 1);\r\n            var isGetWidthOffset = isWidthBound && isHeightBound\r\n                ? widthDist < heightDist\r\n                : isHeightBound ||\r\n                    (!isWidthBound && widthDist < heightDist);\r\n            if (isGetWidthOffset) {\r\n                // width : height = ? : heightOffset\r\n                nextWidthOffset = (width * nextHeightOffset) / height;\r\n            }\r\n            else {\r\n                // width : height = widthOffset : ?\r\n                nextHeightOffset = (height * nextWidthOffset) / width;\r\n            }\r\n        }\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    if (!keepRatio && direction[0] && direction[1]) {\r\n        var _b = checkMaxBounds(moveable, poses, direction, fixedPosition, datas), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\r\n        var _c = __read(recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset).map(function (pos) { return pos.map(function (p) { return throttle(p, FLOAT_POINT_NUM); }); }), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas), 2), nextWidthOffset = _c[0], nextHeightOffset = _c[1];\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    return [widthOffset, heightOffset];\r\n}\r\nfunction absDegree(deg) {\r\n    if (deg < 0) {\r\n        deg = deg % 360 + 360;\r\n    }\r\n    deg %= 360;\r\n    return deg;\r\n}\r\nfunction bumpDegree(baseDeg, snapDeg) {\r\n    // baseDeg -80\r\n    // snapDeg 270\r\n    // return -90\r\n    snapDeg = absDegree(snapDeg);\r\n    var count = Math.floor(baseDeg / 360);\r\n    var deg1 = count * 360 + 360 - snapDeg;\r\n    var deg2 = count * 360 + snapDeg;\r\n    return abs(baseDeg - deg1) < abs(baseDeg - deg2) ? deg1 : deg2;\r\n}\r\nfunction getMinDegreeDistance(deg1, deg2) {\r\n    deg1 = absDegree(deg1);\r\n    deg2 = absDegree(deg2);\r\n    var deg3 = absDegree(deg1 - deg2);\r\n    return Math.min(deg3, 360 - deg3);\r\n}\r\nfunction checkSnapRotate(moveable, rect, dist, rotation) {\r\n    var _a;\r\n    var props = moveable.props;\r\n    var snapRotationThreshold = (_a = props[NAME_snapRotationThreshold]) !== null && _a !== void 0 ? _a : 5;\r\n    var snapRotationDegrees = props[NAME_snapRotationDegrees];\r\n    if (hasGuidelines(moveable, \"rotatable\")) {\r\n        var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4, origin2_1 = rect.origin;\r\n        var rad_1 = (dist * Math.PI) / 180;\r\n        var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) { return minus(pos, origin2_1); });\r\n        var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad_1); });\r\n        // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\r\n        // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\r\n        var result = __spreadArray(__spreadArray([], __read(checkRotateBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false), __read(checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false);\r\n        result.sort(function (a, b) { return abs(a - dist) - abs(b - dist); });\r\n        var isSnap = result.length > 0;\r\n        if (isSnap) {\r\n            return {\r\n                isSnap: isSnap,\r\n                dist: isSnap ? result[0] : dist,\r\n            };\r\n        }\r\n    }\r\n    if ((snapRotationDegrees === null || snapRotationDegrees === void 0 ? void 0 : snapRotationDegrees.length) && snapRotationThreshold) {\r\n        var sorted = snapRotationDegrees.slice().sort(function (a, b) {\r\n            return getMinDegreeDistance(a, rotation) - getMinDegreeDistance(b, rotation);\r\n        });\r\n        var firstDegree = sorted[0];\r\n        if (getMinDegreeDistance(firstDegree, rotation) <= snapRotationThreshold) {\r\n            return {\r\n                isSnap: true,\r\n                dist: dist + bumpDegree(rotation, firstDegree) - rotation,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isSnap: false,\r\n        dist: dist,\r\n    };\r\n}\r\nfunction checkSnapResize(moveable, width, height, direction, fixedPosition, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"resizable\")) {\r\n        return [0, 0];\r\n    }\r\n    var fixedDirection = datas.fixedDirection, nextAllMatrix = datas.nextAllMatrix;\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    return checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(nextAllMatrix || allMatrix, width + widthOffset, height + heightOffset, fixedDirection, fixedPosition, is3d);\r\n    }, width, height, direction, fixedPosition, isRequest, datas);\r\n}\r\nfunction checkSnapScale(moveable, scale, direction, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"scalable\")) {\r\n        return [0, 0];\r\n    }\r\n    var startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, fixedPosition = datas.fixedPosition, fixedDirection = datas.fixedDirection, is3d = datas.is3d;\r\n    var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight])), startOffsetWidth, startOffsetHeight, fixedDirection, fixedPosition, is3d);\r\n    }, startOffsetWidth, startOffsetHeight, direction, fixedPosition, isRequest, datas);\r\n    return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\r\n}\r\nfunction startCheckSnapDrag(moveable, datas) {\r\n    datas.absolutePoses = getAbsolutePosesByState(moveable.state);\r\n}\r\nfunction getSnapGuidelines(posInfos) {\r\n    var guidelines = [];\r\n    posInfos.forEach(function (posInfo) {\r\n        posInfo.guidelineInfos.forEach(function (_a) {\r\n            var guideline = _a.guideline;\r\n            if (find(guidelines, function (info) { return info.guideline === guideline; })) {\r\n                return;\r\n            }\r\n            guideline.direction = \"\";\r\n            guidelines.push({ guideline: guideline, posInfo: posInfo });\r\n        });\r\n    });\r\n    return guidelines.map(function (_a) {\r\n        var guideline = _a.guideline, posInfo = _a.posInfo;\r\n        return __assign(__assign({}, guideline), { direction: posInfo.direction });\r\n    });\r\n}\r\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses, externalBounds) {\r\n    var _a = checkBoundPoses(getBounds(moveable, externalBounds), verticalPoses, horizontalPoses), verticalBoundInfos = _a.vertical, horizontalBoundInfos = _a.horizontal;\r\n    var boundMap = getInitialBounds();\r\n    verticalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.left = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.right = true;\r\n            }\r\n            verticalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    horizontalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.top = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.bottom = true;\r\n            }\r\n            horizontalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    var _b = checkInnerBoundPoses(moveable), innerBoundMap = _b.boundMap, verticalInnerBoundPoses = _b.vertical, horizontalInnerBoundPoses = _b.horizontal;\r\n    verticalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(verticalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        verticalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    horizontalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(horizontalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        horizontalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        innerBoundMap: innerBoundMap,\r\n    };\r\n}\r\nvar directionCondition$1 = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\r\n/**\r\n * @namespace Moveable.Snappable\r\n * @description Whether or not target can be snapped to the guideline. (default: false)\r\n * @sort 2\r\n */\r\nvar Snappable = {\r\n    name: \"snappable\",\r\n    dragRelation: \"strong\",\r\n    props: [\r\n        \"snappable\",\r\n        \"snapContainer\",\r\n        \"snapDirections\",\r\n        \"elementSnapDirections\",\r\n        \"snapGap\",\r\n        \"snapGridWidth\",\r\n        \"snapGridHeight\",\r\n        \"isDisplaySnapDigit\",\r\n        \"isDisplayInnerSnapDigit\",\r\n        \"isDisplayGridGuidelines\",\r\n        \"snapDigit\",\r\n        \"snapThreshold\",\r\n        \"snapRenderThreshold\",\r\n        \"snapGridAll\",\r\n        NAME_snapRotationThreshold,\r\n        NAME_snapRotationDegrees,\r\n        NAME_snapHorizontalThreshold,\r\n        NAME_snapVerticalThreshold,\r\n        \"horizontalGuidelines\",\r\n        \"verticalGuidelines\",\r\n        \"elementGuidelines\",\r\n        \"bounds\",\r\n        \"innerBounds\",\r\n        \"snapDistFormat\",\r\n        \"maxSnapElementGuidelineDistance\",\r\n        \"maxSnapElementGapDistance\",\r\n    ],\r\n    events: [\"snap\", \"bound\"],\r\n    css: [\r\n        \":host {\\n--bounds-color: #d66;\\n}\\n.guideline {\\npointer-events: none;\\nz-index: 2;\\n}\\n.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\\n.guideline-group {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.guideline-group .size-value {\\nposition: absolute;\\ncolor: #f55;\\nfont-size: 12px;\\nfont-size: calc(12px * var(--zoom));\\nfont-weight: bold;\\n}\\n.guideline-group.horizontal .size-value {\\ntransform-origin: 50% 100%;\\ntransform: translateX(-50%);\\nleft: 50%;\\nbottom: 5px;\\nbottom: calc(2px + 3px * var(--zoom));\\n}\\n.guideline-group.vertical .size-value {\\ntransform-origin: 0% 50%;\\ntop: 50%;\\ntransform: translateY(-50%);\\nleft: 5px;\\nleft: calc(2px + 3px * var(--zoom));\\n}\\n.guideline.gap {\\nbackground: #f55;\\n}\\n.size-value.gap {\\ncolor: #f55;\\n}\\n\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var state = moveable.state;\r\n        var targetTop = state.top, targetLeft = state.left, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, snapRenderInfo = state.snapRenderInfo;\r\n        var _a = moveable.props.snapRenderThreshold, snapRenderThreshold = _a === void 0 ? 1 : _a;\r\n        if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\r\n            // reset store\r\n            watchValue(moveable, \"boundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            watchValue(moveable, \"innerBoundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            return [];\r\n        }\r\n        state.guidelines = getTotalGuidelines(moveable);\r\n        var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\r\n        var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\r\n        var externalPoses = snapRenderInfo.externalPoses || [];\r\n        var poses = getAbsolutePosesByState(moveable.state);\r\n        var verticalSnapPoses = [];\r\n        var horizontalSnapPoses = [];\r\n        var verticalGuidelines = [];\r\n        var horizontalGuidelines = [];\r\n        var snapInfos = [];\r\n        var _b = getRect(poses), width = _b.width, height = _b.height, top = _b.top, left = _b.left, bottom = _b.bottom, right = _b.right;\r\n        var targetRect = { left: left, right: right, top: top, bottom: bottom, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n        var hasExternalPoses = externalPoses.length > 0;\r\n        var externalRect = hasExternalPoses\r\n            ? getRect(externalPoses)\r\n            : {};\r\n        if (!snapRenderInfo.request) {\r\n            if (snapRenderInfo.direction) {\r\n                snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (snapRenderInfo.snap) {\r\n                var rect = getRect(poses);\r\n                if (snapRenderInfo.center) {\r\n                    rect.middle = (rect.top + rect.bottom) / 2;\r\n                    rect.center = (rect.left + rect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (hasExternalPoses) {\r\n                if (snapRenderInfo.center) {\r\n                    externalRect.middle =\r\n                        (externalRect.top + externalRect.bottom) / 2;\r\n                    externalRect.center =\r\n                        (externalRect.left + externalRect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            snapInfos.forEach(function (snapInfo) {\r\n                var verticalPosInfos = snapInfo.vertical.posInfos, horizontalPosInfos = snapInfo.horizontal.posInfos;\r\n                verticalSnapPoses.push.apply(verticalSnapPoses, __spreadArray([], __read(verticalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                horizontalSnapPoses.push.apply(horizontalSnapPoses, __spreadArray([], __read(horizontalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                verticalGuidelines.push.apply(verticalGuidelines, __spreadArray([], __read(getSnapGuidelines(verticalPosInfos)), false));\r\n                horizontalGuidelines.push.apply(horizontalGuidelines, __spreadArray([], __read(getSnapGuidelines(horizontalPosInfos)), false));\r\n            });\r\n        }\r\n        var _c = addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses), boundMap = _c.boundMap, innerBoundMap = _c.innerBoundMap;\r\n        if (hasExternalPoses) {\r\n            addBoundGuidelines(moveable, [externalRect.left, externalRect.right], [externalRect.top, externalRect.bottom], verticalSnapPoses, horizontalSnapPoses, snapRenderInfo.externalBounds);\r\n        }\r\n        var allGuidelines = __spreadArray(__spreadArray([], __read(verticalGuidelines), false), __read(horizontalGuidelines), false);\r\n        var elementGuidelines = allGuidelines.filter(function (guideline) { return guideline.element && !guideline.gapRects; });\r\n        var gapGuidelines = allGuidelines.filter(function (guideline) { return guideline.gapRects; }).sort(function (a, b) {\r\n            return a.gap - b.gap;\r\n        });\r\n        triggerEvent(moveable, \"onSnap\", {\r\n            guidelines: allGuidelines.filter(function (_a) {\r\n                var element = _a.element;\r\n                return !element;\r\n            }),\r\n            elements: elementGuidelines,\r\n            gaps: gapGuidelines,\r\n        }, true);\r\n        var nextBoundMap = watchValue(moveable, \"boundMap\", boundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        var nextInnerBoundMap = watchValue(moveable, \"innerBoundMap\", innerBoundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        if (boundMap === nextBoundMap || innerBoundMap === nextInnerBoundMap) {\r\n            triggerEvent(moveable, \"onBound\", {\r\n                bounds: boundMap,\r\n                innerBounds: innerBoundMap,\r\n            }, true);\r\n        }\r\n        // verticalSnapPoses.\r\n        return __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(renderDashedGuidelines(moveable, elementGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGapGuidelines(moveable, gapGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"horizontal\", horizontalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"vertical\", verticalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderSnapPoses(moveable, \"horizontal\", horizontalSnapPoses, minLeft, targetTop, width, 0, React)), false), __read(renderSnapPoses(moveable, \"vertical\", verticalSnapPoses, minTop, targetLeft, height, 1, React)), false);\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            snap: true,\r\n            center: true,\r\n        };\r\n        checkSnapInfo(moveable);\r\n    },\r\n    drag: function (moveable) {\r\n        var state = moveable.state;\r\n        if (!checkSnapInfo(moveable)) {\r\n            state.guidelines = getTotalGuidelines(moveable);\r\n        }\r\n        if (state.snapRenderInfo) {\r\n            state.snapRenderInfo.render = true;\r\n        }\r\n    },\r\n    pinchStart: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (directionCondition$1(moveable, e) || dragControlCondition(moveable, e)) {\r\n            return true;\r\n        }\r\n        if (!e.isRequest && e.inputEvent) {\r\n            return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\r\n        }\r\n    },\r\n    dragControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragGroupControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    unset: function (moveable) {\r\n        var state = moveable.state;\r\n        state.enableSnap = false;\r\n        state.guidelines = [];\r\n        state.snapRenderInfo = null;\r\n        state.elementRects = [];\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be snapped to the guideline. (default: false)\r\n * @name Moveable.Snappable#snappable\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snappable = true;\r\n */\r\n/**\r\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\r\n * @name Moveable.Snappable#snapContainer\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.querySelector(\".container\"));\r\n *\r\n * moveable.snapContainer = document.body;\r\n */\r\n/**\r\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\r\n * @name Moveable.Snappable#snapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * You can specify the snap directions of elements. (default: { left: true, ftrue, right: true, bottom: true })\r\n * @name Moveable.Snappable#elementSnapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   elementSnapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * When you drag, make the gap snap in the element guidelines. (default: true)\r\n * @name Moveable.Snappable#snapGap\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapElement: true,\r\n *   snapGap: true,\r\n * });\r\n *\r\n * moveable.snapGap = false;\r\n */\r\n/**\r\n * Distance value that can snap to guidelines. (default: 5)\r\n * @name Moveable.Snappable#snapThreshold\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapThreshold = 5;\r\n */\r\n/**\r\n * Add guidelines in the horizontal direction. (default: [])\r\n * @name Moveable.Snappable#horizontalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.horizontalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines in the vertical direction. (default: [])\r\n * @name Moveable.Snappable#verticalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.verticalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines for the element. (default: [])\r\n * @name Moveable.Snappable#elementGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.elementGuidelines = [\r\n *   document.querySelector(\".element\"),\r\n * ];\r\n */\r\n/**\r\n * You can set up boundaries.\r\n * @name Moveable.Snappable#bounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\r\n */\r\n/**\r\n * You can set up inner boundaries.\r\n * @name Moveable.Snappable#innerBounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\r\n */\r\n/**\r\n * snap distance digits (default: 0)\r\n * @name Moveable.Snappable#snapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapDigit = 0\r\n */\r\n/**\r\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridWidth\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridWidth = 5;\r\n */\r\n/**\r\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridHeight\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridHeight = 5;\r\n */\r\n/**\r\n * Whether to show snap distance (default: true)\r\n * @name Moveable.Snappable#isDisplaySnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplaySnapDigit = true;\r\n */\r\n/**\r\n * Whether to show element inner snap distance (default: false)\r\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplayInnerSnapDigit = true;\r\n */\r\n/**\r\n * You can set the text format of the distance shown in the guidelines. (default: self)\r\n * @name Moveable.Snappable#snapDistFormat\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  snappable: true,\r\n *  snapDistFormat: (v, type) => v,\r\n * });\r\n * moveable.snapDistFormat = (v, type) => `${v}px`;\r\n */\r\n/**\r\n * When you drag or dragControl, the `snap` event is called.\r\n * @memberof Moveable.Snappable\r\n * @event snap\r\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     snappable: true\r\n * });\r\n * moveable.on(\"snap\", e => {\r\n *     console.log(\"onSnap\", e);\r\n * });\r\n */\n\nfunction multiply2(pos1, pos2) {\r\n    return [\r\n        pos1[0] * pos2[0],\r\n        pos1[1] * pos2[1],\r\n    ];\r\n}\r\nfunction prefix() {\r\n    var classNames = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        classNames[_i] = arguments[_i];\r\n    }\r\n    return prefixNames.apply(void 0, __spreadArray([PREFIX], __read(classNames), false));\r\n}\r\nfunction defaultSync(fn) {\r\n    fn();\r\n}\r\nfunction getTransformMatrix(transform) {\r\n    if (!transform || transform === \"none\") {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    if (isObject(transform)) {\r\n        return transform;\r\n    }\r\n    return parseMat(transform);\r\n}\r\nfunction getAbsoluteMatrix(matrix, n, origin) {\r\n    return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) { return -a; }), n));\r\n}\r\nfunction measureSVGSize(el, unit, isHorizontal) {\r\n    if (unit === \"%\") {\r\n        var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n        return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\r\n    }\r\n    return 1;\r\n}\r\nfunction getBeforeTransformOrigin(el) {\r\n    var relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\r\n    return relativeOrigin.map(function (o, i) {\r\n        var _a = splitUnit(o), value = _a.value, unit = _a.unit;\r\n        return value * measureSVGSize(el, unit, i === 0);\r\n    });\r\n}\r\nfunction getTransformOriginArray(transformOrigin) {\r\n    return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\r\n}\r\nfunction getTransformOrigin(style) {\r\n    return getTransformOriginArray(style.transformOrigin);\r\n}\r\nfunction getElementTransform(target) {\r\n    var getStyle = getCachedStyle(target);\r\n    var computedTransform = getStyle(\"transform\");\r\n    if (computedTransform && computedTransform !== \"none\") {\r\n        return computedTransform;\r\n    }\r\n    if (\"transform\" in target) {\r\n        var list = target.transform;\r\n        var baseVal = list.baseVal;\r\n        if (!baseVal) {\r\n            return \"\";\r\n        }\r\n        var length_1 = baseVal.length;\r\n        if (!length_1) {\r\n            return \"\";\r\n        }\r\n        var matrixes = [];\r\n        var _loop_1 = function (i) {\r\n            var matrix = baseVal[i].matrix;\r\n            matrixes.push(\"matrix(\".concat([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"].map(function (chr) { return matrix[chr]; }).join(\", \"), \")\"));\r\n        };\r\n        for (var i = 0; i < length_1; ++i) {\r\n            _loop_1(i);\r\n        }\r\n        return matrixes.join(\" \");\r\n    }\r\n    return \"\";\r\n}\r\nfunction getOffsetInfo(el, lastParent, isParent, checkZoom, getTargetStyle) {\r\n    var _a, _b;\r\n    var documentElement = getDocumentElement(el) || getDocumentBody(el);\r\n    var hasSlot = false;\r\n    var target;\r\n    var parentSlotElement;\r\n    if (!el || isParent) {\r\n        target = el;\r\n    }\r\n    else {\r\n        var assignedSlotParentElement = (_a = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _a === void 0 ? void 0 : _a.parentElement;\r\n        var parentElement = el.parentElement;\r\n        if (assignedSlotParentElement) {\r\n            hasSlot = true;\r\n            parentSlotElement = parentElement;\r\n            target = assignedSlotParentElement;\r\n        }\r\n        else {\r\n            target = parentElement;\r\n        }\r\n    }\r\n    var isCustomElement = false;\r\n    var isEnd = el === lastParent || target === lastParent;\r\n    var position = \"relative\";\r\n    var offsetZoom = 1;\r\n    var targetZoom = parseFloat(getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"zoom\")) || 1;\r\n    var targetPosition = getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"position\");\r\n    while (target && target !== documentElement) {\r\n        if (lastParent === target) {\r\n            isEnd = true;\r\n        }\r\n        var getStyle = getCachedStyle(target);\r\n        var tagName = target.tagName.toLowerCase();\r\n        var transform = getElementTransform(target);\r\n        var willChange = getStyle(\"willChange\");\r\n        var zoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        position = getStyle(\"position\");\r\n        if (checkZoom && zoom !== 1) {\r\n            offsetZoom = zoom;\r\n            break;\r\n        }\r\n        if (\r\n        // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\r\n        !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\"\r\n            || tagName === \"svg\"\r\n            || tagName === \"foreignobject\"\r\n            || position !== \"static\"\r\n            || (transform && transform !== \"none\")\r\n            || willChange === \"transform\") {\r\n            break;\r\n        }\r\n        var slotParentNode = (_b = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _b === void 0 ? void 0 : _b.parentNode;\r\n        var targetParentNode = target.parentNode;\r\n        if (slotParentNode) {\r\n            hasSlot = true;\r\n            parentSlotElement = targetParentNode;\r\n        }\r\n        var parentNode = targetParentNode;\r\n        if (parentNode && parentNode.nodeType === 11) {\r\n            // Shadow Root\r\n            target = parentNode.host;\r\n            isCustomElement = true;\r\n            position = getCachedStyle(target)(\"position\");\r\n            break;\r\n        }\r\n        target = parentNode;\r\n        position = \"relative\";\r\n    }\r\n    return {\r\n        offsetZoom: offsetZoom,\r\n        hasSlot: hasSlot,\r\n        parentSlotElement: parentSlotElement,\r\n        isCustomElement: isCustomElement,\r\n        isStatic: position === \"static\",\r\n        isEnd: isEnd || !target || target === documentElement,\r\n        offsetParent: target || documentElement,\r\n    };\r\n}\r\nfunction getOffsetPosInfo(el, target) {\r\n    var _a;\r\n    var tagName = el.tagName.toLowerCase();\r\n    var offsetLeft = el.offsetLeft;\r\n    var offsetTop = el.offsetTop;\r\n    var getStyle = getCachedStyle(el);\r\n    // svg\r\n    var isSVG = isUndefined(offsetLeft);\r\n    var hasOffset = !isSVG;\r\n    var origin;\r\n    var targetOrigin;\r\n    // inner svg element\r\n    if (!hasOffset && (tagName !== \"svg\" || el.ownerSVGElement)) {\r\n        origin = IS_WEBKIT605\r\n            ? getBeforeTransformOrigin(el)\r\n            : getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        hasOffset = true;\r\n        if (tagName === \"svg\") {\r\n            offsetLeft = 0;\r\n            offsetTop = 0;\r\n        }\r\n        else {\r\n            _a = __read(getSVGGraphicsOffset(el, origin, el === target && target.tagName.toLowerCase() === \"g\"), 4), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\r\n        }\r\n    }\r\n    else {\r\n        origin = getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        // console.log(getStyle(\"transformOrigin\"), targetOrigin);\r\n    }\r\n    return {\r\n        tagName: tagName,\r\n        isSVG: isSVG,\r\n        hasOffset: hasOffset,\r\n        offset: [offsetLeft || 0, offsetTop || 0],\r\n        origin: origin,\r\n        targetOrigin: targetOrigin,\r\n    };\r\n}\r\nfunction getBodyOffset(el, isSVG) {\r\n    var getStyle = getCachedStyle(el);\r\n    var getBodyStyle = getCachedStyle(getDocumentBody(el));\r\n    var bodyPosition = getBodyStyle(\"position\");\r\n    if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\r\n        return [0, 0];\r\n    }\r\n    var marginLeft = parseInt(getBodyStyle(\"marginLeft\"), 10);\r\n    var marginTop = parseInt(getBodyStyle(\"marginTop\"), 10);\r\n    if (getStyle(\"position\") === \"absolute\") {\r\n        if (getStyle(\"top\") !== \"auto\" || getStyle(\"bottom\") !== \"auto\") {\r\n            marginTop = 0;\r\n        }\r\n        if (getStyle(\"left\") !== \"auto\" || getStyle(\"right\") !== \"auto\") {\r\n            marginLeft = 0;\r\n        }\r\n    }\r\n    return [marginLeft, marginTop];\r\n}\r\nfunction convert3DMatrixes(matrixes) {\r\n    matrixes.forEach(function (info) {\r\n        var matrix = info.matrix;\r\n        if (matrix) {\r\n            info.matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n    });\r\n}\r\nfunction getPositionFixedInfo(el) {\r\n    var fixedContainer = el.parentElement;\r\n    var hasTransform = false;\r\n    var body = getDocumentBody(el);\r\n    while (fixedContainer) {\r\n        var transform = getComputedStyle(fixedContainer).transform;\r\n        if (transform && transform !== \"none\") {\r\n            hasTransform = true;\r\n            break;\r\n        }\r\n        if (fixedContainer === body) {\r\n            break;\r\n        }\r\n        fixedContainer = fixedContainer.parentElement;\r\n    }\r\n    return {\r\n        fixedContainer: fixedContainer || body,\r\n        hasTransform: hasTransform,\r\n    };\r\n}\r\nfunction makeMatrixCSS(matrix, is3d) {\r\n    if (is3d === void 0) { is3d = matrix.length > 9; }\r\n    return \"\".concat(is3d ? \"matrix3d\" : \"matrix\", \"(\").concat(convertMatrixtoCSS(matrix, !is3d).join(\",\"), \")\");\r\n}\r\nfunction getSVGViewBox(el) {\r\n    var clientWidth = el.clientWidth;\r\n    var clientHeight = el.clientHeight;\r\n    if (!el) {\r\n        return { x: 0, y: 0, width: 0, height: 0, clientWidth: clientWidth, clientHeight: clientHeight };\r\n    }\r\n    var viewBox = el.viewBox;\r\n    var baseVal = (viewBox && viewBox.baseVal) || { x: 0, y: 0, width: 0, height: 0 };\r\n    return {\r\n        x: baseVal.x,\r\n        y: baseVal.y,\r\n        width: baseVal.width || clientWidth,\r\n        height: baseVal.height || clientHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n    };\r\n}\r\nfunction getSVGMatrix(el, n) {\r\n    var _a;\r\n    var _b = getSVGViewBox(el), viewBoxWidth = _b.width, viewBoxHeight = _b.height, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\r\n    var scaleX = clientWidth / viewBoxWidth;\r\n    var scaleY = clientHeight / viewBoxHeight;\r\n    var preserveAspectRatio = el.preserveAspectRatio.baseVal;\r\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\r\n    var align = preserveAspectRatio.align;\r\n    // 1 : meet 2: slice\r\n    var meetOrSlice = preserveAspectRatio.meetOrSlice;\r\n    var svgOrigin = [0, 0];\r\n    var scale = [scaleX, scaleY];\r\n    var translate = [0, 0];\r\n    if (align !== 1) {\r\n        var xAlign = (align - 2) % 3;\r\n        var yAlign = Math.floor((align - 2) / 3);\r\n        svgOrigin[0] = viewBoxWidth * xAlign / 2;\r\n        svgOrigin[1] = viewBoxHeight * yAlign / 2;\r\n        var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\r\n        scale[0] = scaleDimension;\r\n        scale[1] = scaleDimension;\r\n        translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\r\n        translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\r\n    }\r\n    var scaleMatrix = createScaleMatrix(scale, n);\r\n    _a = __read(translate, 2), scaleMatrix[n * (n - 1)] = _a[0], scaleMatrix[n * (n - 1) + 1] = _a[1];\r\n    return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\r\n}\r\nfunction getSVGGraphicsOffset(el, origin, isGTarget) {\r\n    var tagName = el.tagName.toLowerCase();\r\n    if (!el.getBBox || !isGTarget && tagName === \"g\") {\r\n        return [0, 0, 0, 0];\r\n    }\r\n    var getStyle = getCachedStyle(el);\r\n    var isFillBox = getStyle(\"transform-box\") === \"fill-box\";\r\n    var bbox = el.getBBox();\r\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n    var x = bbox.x;\r\n    var y = bbox.y;\r\n    // x, y가 0으로 나타나는 버그\r\n    if (tagName === \"foreignobject\" && (!x && !y)) {\r\n        x = parseFloat(el.getAttribute(\"x\")) || 0;\r\n        y = parseFloat(el.getAttribute(\"y\")) || 0;\r\n    }\r\n    var left = x - viewBox.x;\r\n    var top = y - viewBox.y;\r\n    var originX = isFillBox ? origin[0] : origin[0] - left;\r\n    var originY = isFillBox ? origin[1] : origin[1] - top;\r\n    // if (isFillBox) {\r\n    //     const bbox = (el as SVGGraphicsElement).getBBox();\r\n    //     const x = parseFloat(getStyle(\"x\")) || bbox.x;\r\n    //     const y = parseFloat(getStyle(\"y\")) || bbox.y;\r\n    //     const xScale = bbox.x / x;\r\n    //     const yScale = bbox.y / y;\r\n    //     console.log(x, y);\r\n    //     originX *= xScale;\r\n    //     originY *= yScale;\r\n    // }\r\n    return [left, top, originX, originY];\r\n}\r\nfunction calculatePosition(matrix, pos, n) {\r\n    return calculate(matrix, convertPositionMatrix(pos, n), n);\r\n}\r\nfunction calculatePoses(matrix, width, height, n) {\r\n    return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) { return calculatePosition(matrix, pos, n); });\r\n}\r\nfunction getRect(poses) {\r\n    var posesX = poses.map(function (pos) { return pos[0]; });\r\n    var posesY = poses.map(function (pos) { return pos[1]; });\r\n    var left = Math.min.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var top = Math.min.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var right = Math.max.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var bottom = Math.max.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var rectWidth = right - left;\r\n    var rectHeight = bottom - top;\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        width: rectWidth,\r\n        height: rectHeight,\r\n    };\r\n}\r\nfunction calculateRect(matrix, width, height, n) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    return getRect(poses);\r\n}\r\nfunction getSVGOffset(offsetInfo, targetInfo, container, n, beforeMatrix) {\r\n    var _a;\r\n    var target = offsetInfo.target;\r\n    var origin = offsetInfo.origin;\r\n    var targetMatrix = targetInfo.matrix;\r\n    var _b = getSize(target), width = _b.offsetWidth, height = _b.offsetHeight;\r\n    var containerClientRect = container.getBoundingClientRect();\r\n    var margin = [0, 0];\r\n    if (container === getDocumentBody(container)) {\r\n        margin = getBodyOffset(target, true);\r\n    }\r\n    var rect = target.getBoundingClientRect();\r\n    var rectLeft = rect.left - containerClientRect.left + container.scrollLeft\r\n        - (container.clientLeft || 0) + margin[0];\r\n    var rectTop = rect.top - containerClientRect.top + container.scrollTop\r\n        - (container.clientTop || 0) + margin[1];\r\n    var rectWidth = rect.width;\r\n    var rectHeight = rect.height;\r\n    var mat = multiplies(n, beforeMatrix, targetMatrix);\r\n    var _c = calculateRect(mat, width, height, n), prevLeft = _c.left, prevTop = _c.top, prevWidth = _c.width, prevHeight = _c.height;\r\n    var posOrigin = calculatePosition(mat, origin, n);\r\n    var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\r\n    var rectOrigin = [\r\n        rectLeft + prevOrigin[0] * rectWidth / prevWidth,\r\n        rectTop + prevOrigin[1] * rectHeight / prevHeight,\r\n    ];\r\n    var offset = [0, 0];\r\n    var count = 0;\r\n    while (++count < 10) {\r\n        var inverseBeforeMatrix = invert(beforeMatrix, n);\r\n        _a = __read(minus(calculatePosition(inverseBeforeMatrix, rectOrigin, n), calculatePosition(inverseBeforeMatrix, posOrigin, n)), 2), offset[0] = _a[0], offset[1] = _a[1];\r\n        var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), targetMatrix);\r\n        var _d = calculateRect(mat2, width, height, n), nextLeft = _d.left, nextTop = _d.top;\r\n        var distLeft = nextLeft - rectLeft;\r\n        var distTop = nextTop - rectTop;\r\n        if (abs(distLeft) < 2 && abs(distTop) < 2) {\r\n            break;\r\n        }\r\n        rectOrigin[0] -= distLeft;\r\n        rectOrigin[1] -= distTop;\r\n    }\r\n    return offset.map(function (p) { return Math.round(p); });\r\n}\r\nfunction calculateMoveableClientPositions(rootMatrix, poses, rootClientRect) {\r\n    var is3d = rootMatrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var rootPoses = poses.map(function (pos) { return calculatePosition(rootMatrix, pos, n); });\r\n    var left = rootClientRect.left, top = rootClientRect.top;\r\n    return rootPoses.map(function (pos) {\r\n        return [pos[0] + left, pos[1] + top];\r\n    });\r\n}\r\nfunction getDistSize(vec) {\r\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\r\n}\r\nfunction getDiagonalSize(pos1, pos2) {\r\n    return getDistSize([\r\n        pos2[0] - pos1[0],\r\n        pos2[1] - pos1[1],\r\n    ]);\r\n}\r\nfunction getLineStyle(pos1, pos2, zoom, rad) {\r\n    if (zoom === void 0) { zoom = 1; }\r\n    if (rad === void 0) { rad = getRad(pos1, pos2); }\r\n    var width = getDiagonalSize(pos1, pos2);\r\n    return {\r\n        transform: \"translateY(-50%) translate(\".concat(pos1[0], \"px, \").concat(pos1[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n        width: \"\".concat(width, \"px\"),\r\n    };\r\n}\r\nfunction getControlTransform(rotation, zoom) {\r\n    var poses = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        poses[_i - 2] = arguments[_i];\r\n    }\r\n    var length = poses.length;\r\n    var x = poses.reduce(function (prev, pos) { return prev + pos[0]; }, 0) / length;\r\n    var y = poses.reduce(function (prev, pos) { return prev + pos[1]; }, 0) / length;\r\n    return {\r\n        transform: \"translateZ(0px) translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"rad) scale(\").concat(zoom, \")\"),\r\n    };\r\n}\r\nfunction getProps(props, ableName) {\r\n    var self = props[ableName];\r\n    if (isObject(self)) {\r\n        return __assign(__assign({}, props), self);\r\n    }\r\n    return props;\r\n}\r\nfunction getSize(target) {\r\n    var hasOffset = target && !isUndefined(target.offsetWidth);\r\n    var offsetWidth = 0;\r\n    var offsetHeight = 0;\r\n    var clientWidth = 0;\r\n    var clientHeight = 0;\r\n    var cssWidth = 0;\r\n    var cssHeight = 0;\r\n    var contentWidth = 0;\r\n    var contentHeight = 0;\r\n    var minWidth = 0;\r\n    var minHeight = 0;\r\n    var minOffsetWidth = 0;\r\n    var minOffsetHeight = 0;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    var maxOffsetWidth = Infinity;\r\n    var maxOffsetHeight = Infinity;\r\n    var inlineCSSWidth = 0;\r\n    var inlineCSSHeight = 0;\r\n    var svg = false;\r\n    if (target) {\r\n        if (!hasOffset && target.ownerSVGElement) {\r\n            // check svg elements\r\n            var bbox = target.getBBox();\r\n            svg = true;\r\n            offsetWidth = bbox.width;\r\n            offsetHeight = bbox.height;\r\n            cssWidth = offsetWidth;\r\n            cssHeight = offsetHeight;\r\n            contentWidth = offsetWidth;\r\n            contentHeight = offsetHeight;\r\n            clientWidth = offsetWidth;\r\n            clientHeight = offsetHeight;\r\n        }\r\n        else {\r\n            // check html elements\r\n            var getStyle = getCachedStyle(target);\r\n            var targetStyle = target.style;\r\n            var boxSizing = getStyle(\"boxSizing\") === \"border-box\";\r\n            var borderLeft = parseFloat(getStyle(\"borderLeftWidth\")) || 0;\r\n            var borderRight = parseFloat(getStyle(\"borderRightWidth\")) || 0;\r\n            var borderTop = parseFloat(getStyle(\"borderTopWidth\")) || 0;\r\n            var borderBottom = parseFloat(getStyle(\"borderBottomWidth\")) || 0;\r\n            var paddingLeft = parseFloat(getStyle(\"paddingLeft\")) || 0;\r\n            var paddingRight = parseFloat(getStyle(\"paddingRight\")) || 0;\r\n            var paddingTop = parseFloat(getStyle(\"paddingTop\")) || 0;\r\n            var paddingBottom = parseFloat(getStyle(\"paddingBottom\")) || 0;\r\n            var horizontalPadding = paddingLeft + paddingRight;\r\n            var verticalPadding = paddingTop + paddingBottom;\r\n            var horizontalBorder = borderLeft + borderRight;\r\n            var verticalBorder = borderTop + borderBottom;\r\n            var horizontalOffset = horizontalPadding + horizontalBorder;\r\n            var verticalOffset = verticalPadding + verticalBorder;\r\n            var position = getStyle(\"position\");\r\n            var containerWidth = 0;\r\n            var containerHeight = 0;\r\n            // SVGSVGElement, HTMLElement\r\n            if (\"clientLeft\" in target) {\r\n                var parentElement = null;\r\n                if (position === \"absolute\") {\r\n                    var offsetInfo = getOffsetInfo(target, getDocumentBody(target));\r\n                    parentElement = offsetInfo.offsetParent;\r\n                }\r\n                else {\r\n                    parentElement = target.parentElement;\r\n                }\r\n                if (parentElement) {\r\n                    var getParentStyle = getCachedStyle(parentElement);\r\n                    containerWidth = parseFloat(getParentStyle(\"width\"));\r\n                    containerHeight = parseFloat(getParentStyle(\"height\"));\r\n                }\r\n            }\r\n            minWidth = Math.max(horizontalPadding, convertUnitSize(getStyle(\"minWidth\"), containerWidth) || 0);\r\n            minHeight = Math.max(verticalPadding, convertUnitSize(getStyle(\"minHeight\"), containerHeight) || 0);\r\n            maxWidth = convertUnitSize(getStyle(\"maxWidth\"), containerWidth);\r\n            maxHeight = convertUnitSize(getStyle(\"maxHeight\"), containerHeight);\r\n            if (isNaN(maxWidth)) {\r\n                maxWidth = Infinity;\r\n            }\r\n            if (isNaN(maxHeight)) {\r\n                maxHeight = Infinity;\r\n            }\r\n            inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\r\n            inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\r\n            cssWidth = parseFloat(getStyle(\"width\")) || 0;\r\n            cssHeight = parseFloat(getStyle(\"height\")) || 0;\r\n            contentWidth = abs(cssWidth - inlineCSSWidth) < 1\r\n                ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth)\r\n                : cssWidth;\r\n            contentHeight = abs(cssHeight - inlineCSSHeight) < 1\r\n                ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight)\r\n                : cssHeight;\r\n            offsetWidth = contentWidth;\r\n            offsetHeight = contentHeight;\r\n            clientWidth = contentWidth;\r\n            clientHeight = contentHeight;\r\n            if (boxSizing) {\r\n                maxOffsetWidth = maxWidth;\r\n                maxOffsetHeight = maxHeight;\r\n                minOffsetWidth = minWidth;\r\n                minOffsetHeight = minHeight;\r\n                contentWidth = offsetWidth - horizontalOffset;\r\n                contentHeight = offsetHeight - verticalOffset;\r\n            }\r\n            else {\r\n                maxOffsetWidth = maxWidth + horizontalOffset;\r\n                maxOffsetHeight = maxHeight + verticalOffset;\r\n                minOffsetWidth = minWidth + horizontalOffset;\r\n                minOffsetHeight = minHeight + verticalOffset;\r\n                offsetWidth = contentWidth + horizontalOffset;\r\n                offsetHeight = contentHeight + verticalOffset;\r\n            }\r\n            clientWidth = contentWidth + horizontalPadding;\r\n            clientHeight = contentHeight + verticalPadding;\r\n        }\r\n    }\r\n    return {\r\n        svg: svg,\r\n        offsetWidth: offsetWidth,\r\n        offsetHeight: offsetHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n        contentWidth: contentWidth,\r\n        contentHeight: contentHeight,\r\n        inlineCSSWidth: inlineCSSWidth,\r\n        inlineCSSHeight: inlineCSSHeight,\r\n        cssWidth: cssWidth,\r\n        cssHeight: cssHeight,\r\n        minWidth: minWidth,\r\n        minHeight: minHeight,\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n        minOffsetWidth: minOffsetWidth,\r\n        minOffsetHeight: minOffsetHeight,\r\n        maxOffsetWidth: maxOffsetWidth,\r\n        maxOffsetHeight: maxOffsetHeight,\r\n    };\r\n}\r\nfunction getRotationRad(poses, direction) {\r\n    return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\r\n}\r\nfunction resetClientRect() {\r\n    return {\r\n        left: 0, top: 0,\r\n        width: 0, height: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        clientLeft: 0, clientTop: 0,\r\n        clientWidth: 0, clientHeight: 0,\r\n        scrollWidth: 0, scrollHeight: 0,\r\n    };\r\n}\r\nfunction getExtendsRect(el, rect) {\r\n    var isRoot = el === getDocumentBody(el) || el === getDocumentElement(el);\r\n    var extendsRect = {\r\n        clientLeft: el.clientLeft,\r\n        clientTop: el.clientTop,\r\n        clientWidth: el.clientWidth,\r\n        clientHeight: el.clientHeight,\r\n        scrollWidth: el.scrollWidth,\r\n        scrollHeight: el.scrollHeight,\r\n        overflow: false,\r\n    };\r\n    if (isRoot) {\r\n        extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\r\n        extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\r\n    }\r\n    extendsRect.overflow = getCachedStyle(el)(\"overflow\") !== \"visible\";\r\n    return __assign(__assign({}, rect), extendsRect);\r\n}\r\nfunction getClientRectByPosition(position, base, el, isExtends) {\r\n    var left = position.left, right = position.right, top = position.top, bottom = position.bottom;\r\n    var baseTop = base.top;\r\n    var baseLeft = base.left;\r\n    var rect = {\r\n        left: baseLeft + left,\r\n        top: baseTop + top,\r\n        right: baseLeft + right,\r\n        bottom: baseTop + bottom,\r\n        width: right - left,\r\n        height: bottom - top,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getClientRect(el, isExtends) {\r\n    var left = 0;\r\n    var top = 0;\r\n    var width = 0;\r\n    var height = 0;\r\n    // let isRoot = false;\r\n    if (el) {\r\n        var clientRect = el.getBoundingClientRect();\r\n        left = clientRect.left;\r\n        top = clientRect.top;\r\n        width = clientRect.width;\r\n        height = clientRect.height;\r\n    }\r\n    var rect = {\r\n        left: left,\r\n        top: top,\r\n        width: width,\r\n        height: height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getTotalOrigin(moveable) {\r\n    var _a = moveable.props, groupable = _a.groupable, svgOrigin = _a.svgOrigin;\r\n    var _b = moveable.getState(), offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight, svg = _b.svg, transformOrigin = _b.transformOrigin;\r\n    if (!groupable && svg && svgOrigin) {\r\n        return convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight);\r\n    }\r\n    return transformOrigin;\r\n}\r\nfunction getTotalDirection(parentDirection, isPinch, inputEvent, datas) {\r\n    var direction;\r\n    if (parentDirection) {\r\n        direction = parentDirection;\r\n    }\r\n    else if (isPinch) {\r\n        direction = [0, 0];\r\n    }\r\n    else {\r\n        var target = inputEvent.target;\r\n        direction = getDirection(target, datas);\r\n    }\r\n    return direction;\r\n}\r\nfunction getDirection(target, datas) {\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var deg = target.getAttribute(\"data-rotation\") || \"\";\r\n    var direciton = target.getAttribute(\"data-direction\");\r\n    datas.deg = deg;\r\n    if (!direciton) {\r\n        return;\r\n    }\r\n    var dir = [0, 0];\r\n    (direciton.indexOf(\"w\") > -1) && (dir[0] = -1);\r\n    (direciton.indexOf(\"e\") > -1) && (dir[0] = 1);\r\n    (direciton.indexOf(\"n\") > -1) && (dir[1] = -1);\r\n    (direciton.indexOf(\"s\") > -1) && (dir[1] = 1);\r\n    return dir;\r\n}\r\nfunction getAbsolutePoses(poses, dist) {\r\n    return [\r\n        plus(dist, poses[0]),\r\n        plus(dist, poses[1]),\r\n        plus(dist, poses[2]),\r\n        plus(dist, poses[3]),\r\n    ];\r\n}\r\nfunction getAbsolutePosesByState(_a) {\r\n    var left = _a.left, top = _a.top, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\r\n}\r\nfunction unsetAbles(self, isControl) {\r\n    self[isControl ? \"controlAbles\" : \"targetAbles\"].forEach(function (able) {\r\n        able.unset && able.unset(self);\r\n    });\r\n}\r\nfunction unsetGesto(self, isControl) {\r\n    var gestoName = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var gesto = self[gestoName];\r\n    if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n        unsetAbles(self, isControl);\r\n    }\r\n    gesto === null || gesto === void 0 ? void 0 : gesto.unset();\r\n    self[gestoName] = null;\r\n}\r\nfunction fillCSSObject(style, resolvedEvent) {\r\n    if (resolvedEvent) {\r\n        var originalDatas = getBeforeRenderableDatas(resolvedEvent);\r\n        originalDatas.nextStyle = __assign(__assign({}, originalDatas.nextStyle), style);\r\n    }\r\n    return {\r\n        style: style,\r\n        cssText: getKeys(style).map(function (name) { return \"\".concat(decamelize(name, \"-\"), \": \").concat(style[name], \";\"); }).join(\"\"),\r\n    };\r\n}\r\nfunction fillAfterTransform(prevEvent, nextEvent, resolvedEvent) {\r\n    var afterTransform = nextEvent.afterTransform || nextEvent.transform;\r\n    return __assign(__assign({}, fillCSSObject(__assign(__assign(__assign({}, prevEvent.style), nextEvent.style), { transform: afterTransform }), resolvedEvent)), { afterTransform: afterTransform, transform: prevEvent.transform });\r\n}\r\nfunction fillParams(moveable, e, params, isBeforeEvent) {\r\n    var datas = e.datas;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    var nextParams = __assign(__assign({}, params), { target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, moveable: moveable, datas: datas.datas, isRequest: e.isRequest, isRequestChild: e.isRequestChild, isFirstDrag: !!e.isFirstDrag, isTrusted: e.isTrusted !== false, stopAble: function () {\r\n            datas.isEventStart = false;\r\n        }, stopDrag: function () {\r\n            var _a;\r\n            (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n        } });\r\n    if (!datas.isStartEvent) {\r\n        datas.isStartEvent = true;\r\n    }\r\n    else if (!isBeforeEvent) {\r\n        datas.lastEvent = nextParams;\r\n    }\r\n    return nextParams;\r\n}\r\nfunction fillEndParams(moveable, e, params) {\r\n    var datas = e.datas;\r\n    var isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    return __assign(__assign({ isDrag: isDrag }, params), { moveable: moveable, target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, lastEvent: datas.lastEvent, isDouble: e.isDouble, datas: datas.datas, isFirstDrag: !!e.isFirstDrag });\r\n}\r\nfunction catchEvent(moveable, name, callback) {\r\n    moveable._emitter.on(name, callback);\r\n}\r\nfunction triggerEvent(moveable, name, params, isManager, isRequest) {\r\n    return moveable.triggerEvent(name, params, isManager, isRequest);\r\n}\r\nfunction getComputedStyle(el, pseudoElt) {\r\n    return getWindow(el).getComputedStyle(el, pseudoElt);\r\n}\r\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\r\n    var enabledAbles = {};\r\n    var ableGroups = {};\r\n    return ables.filter(function (able) {\r\n        var name = able.name;\r\n        if (enabledAbles[name] || !methods.some(function (method) { return able[method]; })) {\r\n            return false;\r\n        }\r\n        if (!triggerAblesSimultaneously && able.ableGroup) {\r\n            if (ableGroups[able.ableGroup]) {\r\n                return false;\r\n            }\r\n            ableGroups[able.ableGroup] = true;\r\n        }\r\n        enabledAbles[name] = true;\r\n        return true;\r\n    });\r\n}\r\nfunction equals(a1, a2) {\r\n    return a1 === a2 || (a1 == null && a2 == null);\r\n}\r\nfunction selectValue() {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    var length = values.length - 1;\r\n    for (var i = 0; i < length; ++i) {\r\n        var value = values[i];\r\n        if (!isUndefined(value)) {\r\n            return value;\r\n        }\r\n    }\r\n    return values[length];\r\n}\r\nfunction groupBy(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = [];\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var keyIndex = groupKeys.indexOf(groupKey);\r\n        var group = groups[keyIndex] || [];\r\n        if (keyIndex === -1) {\r\n            groupKeys.push(groupKey);\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction groupByMap(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = {};\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var group = groupKeys[groupKey];\r\n        if (!group) {\r\n            group = [];\r\n            groupKeys[groupKey] = group;\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction flat(arr) {\r\n    return arr.reduce(function (prev, cur) {\r\n        return prev.concat(cur);\r\n    }, []);\r\n}\r\nfunction maxOffset() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    args.sort(function (a, b) { return abs(b) - abs(a); });\r\n    return args[0];\r\n}\r\nfunction calculateInversePosition(matrix, pos, n) {\r\n    return calculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\r\n}\r\nfunction convertDragDist(state, e) {\r\n    var _a;\r\n    var is3d = state.is3d, rootMatrix = state.rootMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    _a = __read(calculateInversePosition(rootMatrix, [e.distX, e.distY], n), 2), e.distX = _a[0], e.distY = _a[1];\r\n    return e;\r\n}\r\nfunction calculatePadding(matrix, pos, added, n) {\r\n    if (!added[0] && !added[1]) {\r\n        return pos;\r\n    }\r\n    var xAdded = calculatePosition(matrix, [normalized(added[0] || 1), 0], n);\r\n    var yAdded = calculatePosition(matrix, [0, normalized(added[1] || 1)], n);\r\n    var nextAdded = calculatePosition(matrix, [\r\n        added[0] / getDistSize(xAdded),\r\n        added[1] / getDistSize(yAdded),\r\n    ], n);\r\n    return plus(pos, nextAdded);\r\n}\r\nfunction convertCSSSize(value, size, isRelative) {\r\n    return isRelative ? \"\".concat(value / size * 100, \"%\") : \"\".concat(value, \"px\");\r\n}\r\nfunction getTinyDist(v) {\r\n    return abs(v) <= TINY_NUM ? 0 : v;\r\n}\r\nfunction getDirectionViewClassName(ableName) {\r\n    return function (moveable) {\r\n        if (!moveable.isDragging(ableName)) {\r\n            return \"\";\r\n        }\r\n        var data = getGestoData(moveable, ableName);\r\n        var deg = data.deg;\r\n        if (!deg) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-control-rotation\".concat(deg));\r\n    };\r\n}\r\nfunction getDirectionCondition(ableName, checkAbles) {\r\n    if (checkAbles === void 0) { checkAbles = [ableName]; }\r\n    return function (moveable, e) {\r\n        if (e.isRequest) {\r\n            if (checkAbles.some(function (name) { return e.requestAble === name; })) {\r\n                return e.parentDirection;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\r\n    };\r\n}\r\nfunction convertTransformInfo(transforms, state, index) {\r\n    var _a;\r\n    var matrixInfos = parse(transforms, {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    var beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunctionText = transforms[index] || \"\";\r\n    var afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\r\n    var afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\r\n    var beforeFunctions = matrixInfos.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctions2 = matrixInfos.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunction = (_a = matrixInfos[index]) !== null && _a !== void 0 ? _a : parse([\"\"])[0];\r\n    var afterFunctions = index < 0 ? [] : matrixInfos.slice(index);\r\n    var afterFunctions2 = index < 0 ? [] : matrixInfos.slice(index + 1);\r\n    var targetFunctions = targetFunction ? [targetFunction] : [];\r\n    var beforeFunctionMatrix = toMat(beforeFunctions);\r\n    var beforeFunctionMatrix2 = toMat(beforeFunctions2);\r\n    var afterFunctionMatrix = toMat(afterFunctions);\r\n    var afterFunctionMatrix2 = toMat(afterFunctions2);\r\n    var allFunctionMatrix = multiply(beforeFunctionMatrix, afterFunctionMatrix, 4);\r\n    return {\r\n        transforms: transforms,\r\n        beforeFunctionMatrix: beforeFunctionMatrix,\r\n        beforeFunctionMatrix2: beforeFunctionMatrix2,\r\n        targetFunctionMatrix: toMat(targetFunctions),\r\n        afterFunctionMatrix: afterFunctionMatrix,\r\n        afterFunctionMatrix2: afterFunctionMatrix2,\r\n        allFunctionMatrix: allFunctionMatrix,\r\n        beforeFunctions: beforeFunctions,\r\n        beforeFunctions2: beforeFunctions2,\r\n        targetFunction: targetFunctions[0],\r\n        afterFunctions: afterFunctions,\r\n        afterFunctions2: afterFunctions2,\r\n        beforeFunctionTexts: beforeFunctionTexts,\r\n        beforeFunctionTexts2: beforeFunctionTexts2,\r\n        targetFunctionText: targetFunctionText,\r\n        afterFunctionTexts: afterFunctionTexts,\r\n        afterFunctionTexts2: afterFunctionTexts2,\r\n    };\r\n}\r\nfunction isArrayFormat(arr) {\r\n    if (!arr || !isObject(arr)) {\r\n        return false;\r\n    }\r\n    if (isNode(arr)) {\r\n        return false;\r\n    }\r\n    return isArray(arr) || \"length\" in arr;\r\n}\r\nfunction getRefTarget(target, isSelector) {\r\n    if (!target) {\r\n        return null;\r\n    }\r\n    if (isNode(target)) {\r\n        return target;\r\n    }\r\n    if (isString(target)) {\r\n        if (isSelector) {\r\n            return document.querySelector(target);\r\n        }\r\n        return target;\r\n    }\r\n    if (isFunction(target)) {\r\n        return target();\r\n    }\r\n    if (isWindow(target)) {\r\n        return target;\r\n    }\r\n    if (\"current\" in target) {\r\n        return target.current;\r\n    }\r\n    return target;\r\n}\r\nfunction getRefTargets(targets, isSelector) {\r\n    if (!targets) {\r\n        return [];\r\n    }\r\n    var userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\r\n    return userTargets.reduce(function (prev, target) {\r\n        if (isString(target) && isSelector) {\r\n            return __spreadArray(__spreadArray([], __read(prev), false), __read([].slice.call(document.querySelectorAll(target))), false);\r\n        }\r\n        if (isArray(target)) {\r\n            prev.push(getRefTargets(target, isSelector));\r\n        }\r\n        else {\r\n            prev.push(getRefTarget(target, isSelector));\r\n        }\r\n        return prev;\r\n    }, []);\r\n}\r\nfunction getAbsoluteRotation(pos1, pos2, direction) {\r\n    var deg = getRad(pos1, pos2) / Math.PI * 180;\r\n    deg = direction >= 0 ? deg : 180 - deg;\r\n    deg = deg >= 0 ? deg : 360 + deg;\r\n    return deg;\r\n}\r\nfunction getDragDistByState(state, dist) {\r\n    var rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var inverseMatrix = invert(rootMatrix, n);\r\n    if (!is3d) {\r\n        inverseMatrix = convertDimension(inverseMatrix, 3, 4);\r\n    }\r\n    inverseMatrix[12] = 0;\r\n    inverseMatrix[13] = 0;\r\n    inverseMatrix[14] = 0;\r\n    return calculateMatrixDist(inverseMatrix, dist);\r\n}\r\nfunction getSizeDistByDist(startSize, dist, ratio, direction, keepRatio) {\r\n    var _a = __read(startSize, 2), startOffsetWidth = _a[0], startOffsetHeight = _a[1];\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n        var rad = getRad([0, 0], dist);\r\n        var standardRad = getRad([0, 0], direction);\r\n        var size = getDistSize(dist);\r\n        var signSize = Math.cos(rad - standardRad) * size;\r\n        if (!direction[0]) {\r\n            // top, bottom\r\n            distHeight = signSize;\r\n            distWidth = distHeight * ratio;\r\n        }\r\n        else if (!direction[1]) {\r\n            // left, right\r\n            distWidth = signSize;\r\n            distHeight = distWidth / ratio;\r\n        }\r\n        else {\r\n            // two-way\r\n            var startWidthSize = direction[0] * startOffsetWidth;\r\n            var startHeightSize = direction[1] * startOffsetHeight;\r\n            var secondRad = Math.atan2(startWidthSize + dist[0], startHeightSize + dist[1]);\r\n            var firstRad = Math.atan2(startWidthSize, startHeightSize);\r\n            if (secondRad < 0) {\r\n                secondRad += Math.PI * 2;\r\n            }\r\n            if (firstRad < 0) {\r\n                firstRad += Math.PI * 2;\r\n            }\r\n            var rad_1 = 0;\r\n            if (abs(secondRad - firstRad) < Math.PI / 2 || abs(secondRad - firstRad) > Math.PI / 2 * 3) {\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            else {\r\n                firstRad += Math.PI;\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            if (rad_1 > Math.PI * 2) {\r\n                rad_1 -= Math.PI * 2;\r\n            }\r\n            else if (rad_1 > Math.PI) {\r\n                rad_1 = 2 * Math.PI - rad_1;\r\n            }\r\n            else if (rad_1 < -Math.PI) {\r\n                rad_1 = -2 * Math.PI - rad_1;\r\n            }\r\n            //       180\r\n            // -1, -1,  // 1, -1\r\n            // 270            90\r\n            // -1, 1    // 1, 1\r\n            //       0\r\n            var distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]]) * Math.cos(rad_1);\r\n            distWidth = distSize * Math.sin(firstRad) - startWidthSize;\r\n            distHeight = distSize * Math.cos(firstRad) - startHeightSize;\r\n            if (direction[0] < 0) {\r\n                distWidth *= -1;\r\n            }\r\n            if (direction[1] < 0) {\r\n                distHeight *= -1;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        distWidth = direction[0] * dist[0];\r\n        distHeight = direction[1] * dist[1];\r\n    }\r\n    return [distWidth, distHeight];\r\n}\r\nfunction getOffsetSizeDist(sizeDirection, keepRatio, datas, e) {\r\n    var _a;\r\n    var ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight;\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    var distX = e.distX, distY = e.distY, pinchScale = e.pinchScale, parentDistance = e.parentDistance, parentDist = e.parentDist, parentScale = e.parentScale;\r\n    var startFixedDirection = datas.fixedDirection;\r\n    var directionsDists = [0, 1].map(function (index) {\r\n        return abs(sizeDirection[index] - startFixedDirection[index]);\r\n    });\r\n    var directionRatios = [0, 1].map(function (index) {\r\n        var dist = directionsDists[index];\r\n        if (dist !== 0) {\r\n            dist = 2 / dist;\r\n        }\r\n        return dist;\r\n    });\r\n    if (parentDist) {\r\n        distWidth = parentDist[0];\r\n        distHeight = parentDist[1];\r\n        if (keepRatio) {\r\n            if (!distWidth) {\r\n                distWidth = distHeight * ratio;\r\n            }\r\n            else if (!distHeight) {\r\n                distHeight = distWidth / ratio;\r\n            }\r\n        }\r\n    }\r\n    else if (isNumber(pinchScale)) {\r\n        distWidth = (pinchScale - 1) * startOffsetWidth;\r\n        distHeight = (pinchScale - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentScale) {\r\n        distWidth = (parentScale[0] - 1) * startOffsetWidth;\r\n        distHeight = (parentScale[1] - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentDistance) {\r\n        var scaleX = startOffsetWidth * directionsDists[0];\r\n        var scaleY = startOffsetHeight * directionsDists[1];\r\n        var ratioDistance = getDistSize([scaleX, scaleY]);\r\n        distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\r\n        distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\r\n    }\r\n    else {\r\n        var dist_1 = getDragDist({ datas: datas, distX: distX, distY: distY });\r\n        dist_1 = directionRatios.map(function (ratio, i) {\r\n            return dist_1[i] * ratio;\r\n        });\r\n        _a = __read(getSizeDistByDist([startOffsetWidth, startOffsetHeight], dist_1, ratio, sizeDirection, keepRatio), 2), distWidth = _a[0], distHeight = _a[1];\r\n    }\r\n    return {\r\n        // direction,\r\n        // sizeDirection,\r\n        distWidth: distWidth,\r\n        distHeight: distHeight,\r\n    };\r\n}\r\nfunction convertTransformUnit(origin, xy) {\r\n    if (xy) {\r\n        if (origin === \"left\") {\r\n            return { x: \"0%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"top\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"center\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"right\") {\r\n            return { x: \"100%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"bottom\") {\r\n            return { x: \"50%\", y: \"100%\" };\r\n        }\r\n        var _a = __read(origin.split(\" \"), 2), left = _a[0], right = _a[1];\r\n        var leftOrigin = convertTransformUnit(left || \"\");\r\n        var rightOrigin = convertTransformUnit(right || \"\");\r\n        var originObject = __assign(__assign({}, leftOrigin), rightOrigin);\r\n        var nextOriginObject = {\r\n            x: \"50%\",\r\n            y: \"50%\",\r\n        };\r\n        if (originObject.x) {\r\n            nextOriginObject.x = originObject.x;\r\n        }\r\n        if (originObject.y) {\r\n            nextOriginObject.y = originObject.y;\r\n        }\r\n        if (originObject.value) {\r\n            if (originObject.x && !originObject.y) {\r\n                nextOriginObject.y = originObject.value;\r\n            }\r\n            if (!originObject.x && originObject.y) {\r\n                nextOriginObject.x = originObject.value;\r\n            }\r\n        }\r\n        return nextOriginObject;\r\n    }\r\n    if (origin === \"left\") {\r\n        return { x: \"0%\" };\r\n    }\r\n    if (origin === \"right\") {\r\n        return { x: \"100%\" };\r\n    }\r\n    if (origin === \"top\") {\r\n        return { y: \"0%\" };\r\n    }\r\n    if (origin === \"bottom\") {\r\n        return { y: \"100%\" };\r\n    }\r\n    if (!origin) {\r\n        return {};\r\n    }\r\n    if (origin === \"center\") {\r\n        return { value: \"50%\" };\r\n    }\r\n    return { value: origin };\r\n}\r\nfunction convertTransformOriginArray(transformOrigin, width, height) {\r\n    var _a = convertTransformUnit(transformOrigin, true), x = _a.x, y = _a.y;\r\n    return [\r\n        convertUnitSize(x, width) || 0,\r\n        convertUnitSize(y, height) || 0,\r\n    ];\r\n}\r\nfunction rotatePosesInfo(poses, origin, rad) {\r\n    var prevPoses = poses.map(function (pos) { return minus(pos, origin); });\r\n    var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad); });\r\n    return {\r\n        prev: prevPoses,\r\n        next: nextPoses,\r\n        result: nextPoses.map(function (pos) { return plus(pos, origin); }),\r\n    };\r\n}\r\nfunction isDeepArrayEquals(arr1, arr2) {\r\n    return arr1.length === arr2.length && arr1.every(function (value1, i) {\r\n        var value2 = arr2[i];\r\n        var isArray1 = isArray(value1);\r\n        var isArray2 = isArray(value2);\r\n        if (isArray1 && isArray2) {\r\n            return isDeepArrayEquals(value1, value2);\r\n        }\r\n        else if (!isArray1 && !isArray2) {\r\n            return value1 === value2;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nfunction watchValue(moveable, property, nextValue, valueKey, defaultValue) {\r\n    var store = moveable._store;\r\n    var prevValue = store[property];\r\n    if (!(property in store)) {\r\n        if (defaultValue != null) {\r\n            store[property] = defaultValue;\r\n            prevValue = defaultValue;\r\n        }\r\n        else {\r\n            store[property] = nextValue;\r\n            return nextValue;\r\n        }\r\n    }\r\n    if (prevValue === nextValue || valueKey(prevValue) === valueKey(nextValue)) {\r\n        return prevValue;\r\n    }\r\n    store[property] = nextValue;\r\n    return nextValue;\r\n}\r\nfunction sign(value) {\r\n    return value >= 0 ? 1 : -1;\r\n}\r\nfunction abs(value) {\r\n    return Math.abs(value);\r\n}\r\nfunction countEach(count, callback) {\r\n    return counter(count).map(function (index) { return callback(index); });\r\n}\r\nfunction getPaddingBox(padding) {\r\n    if (isNumber(padding)) {\r\n        return {\r\n            top: padding,\r\n            left: padding,\r\n            right: padding,\r\n            bottom: padding,\r\n        };\r\n    }\r\n    return {\r\n        left: padding.left || 0,\r\n        top: padding.top || 0,\r\n        right: padding.right || 0,\r\n        bottom: padding.bottom || 0,\r\n    };\r\n}\n\n/**\r\n * @namespace Moveable.Pinchable\r\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n */\r\nvar Pinchable = makeAble(\"pinchable\", {\r\n    props: [\r\n        \"pinchable\",\r\n    ],\r\n    events: [\r\n        \"pinchStart\",\r\n        \"pinch\",\r\n        \"pinchEnd\",\r\n        \"pinchGroupStart\",\r\n        \"pinchGroup\",\r\n        \"pinchGroupEnd\",\r\n    ],\r\n    dragStart: function () {\r\n        return true;\r\n    },\r\n    pinchStart: function (moveable, e) {\r\n        var datas = e.datas, targets = e.targets, angle = e.angle, originalDatas = e.originalDatas;\r\n        var _a = moveable.props, pinchable = _a.pinchable, ables = _a.ables;\r\n        if (!pinchable) {\r\n            return false;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"Start\");\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlStart\");\r\n        var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\r\n            return pinchable.indexOf(able.name) > -1;\r\n        })).filter(function (able) { return able.canPinch && able[controlEventName]; });\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var result = triggerEvent(moveable, eventName, params);\r\n        datas.isPinch = result !== false;\r\n        datas.ables = pinchAbles;\r\n        var isPinch = datas.isPinch;\r\n        if (!isPinch) {\r\n            return false;\r\n        }\r\n        pinchAbles.forEach(function (able) {\r\n            originalDatas[able.name] = originalDatas[able.name] || {};\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            var ableEvent = __assign(__assign({}, e), { datas: originalDatas[able.name], parentRotate: angle, isPinch: true });\r\n            able[controlEventName](moveable, ableEvent);\r\n        });\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: [0, 0],\r\n        };\r\n        return isPinch;\r\n    },\r\n    pinch: function (moveable, e) {\r\n        var datas = e.datas, pinchScale = e.scale, distance = e.distance, originalDatas = e.originalDatas, inputEvent = e.inputEvent, targets = e.targets, angle = e.angle;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var parentDistance = distance * (1 - 1 / pinchScale);\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\");\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"Control\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { datas: originalDatas[able.name], inputEvent: inputEvent, resolveMatrix: true, pinchScale: pinchScale, parentDistance: parentDistance, parentRotate: angle, isPinch: true }));\r\n        });\r\n        return params;\r\n    },\r\n    pinchEnd: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, targets = e.targets, originalDatas = e.originalDatas;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"End\");\r\n        var params = fillEndParams(moveable, e, { isDrag: isPinch });\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlEnd\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { isDrag: isPinch, datas: originalDatas[able.name], inputEvent: inputEvent, isPinch: true }));\r\n        });\r\n        return isPinch;\r\n    },\r\n    pinchGroupStart: function (moveable, e) {\r\n        return this.pinchStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroup: function (moveable, e) {\r\n        return this.pinch(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroupEnd: function (moveable, e) {\r\n        return this.pinchEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n});\r\n/**\r\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n * @name Moveable.Pinchable#pinchable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.pinchable = true;\r\n */\r\n/**\r\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\r\n * @memberof Moveable.Pinchable\r\n * @event pinchStart\r\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When pinching, the pinch event is called with part of scale, rotate, resize\r\n * @memberof Moveable.Pinchable\r\n * @event pinch\r\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinch\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotate\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scale\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the pinch finishes, the pinchEnd event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchEnd\r\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the group pinch starts, the `pinchGroupStart` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupStart\r\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\r\n *     console.log(\"onPinchGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch, the `pinchGroup` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroup\r\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\r\n *     console.log(\"onPinchGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupEnd\r\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nvar directionCondition = getDirectionCondition(\"scalable\");\r\n/**\r\n * @namespace Scalable\r\n * @memberof Moveable\r\n * @description Scalable indicates whether the target's x and y can be scale of transform.\r\n */\r\nvar Scalable = {\r\n    name: \"scalable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scalable\",\r\n        \"throttleScale\",\r\n        \"renderDirections\",\r\n        \"keepRatio\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"scaleStart\",\r\n        \"beforeScale\",\r\n        \"scale\",\r\n        \"scaleEnd\",\r\n        \"scaleGroupStart\",\r\n        \"beforeScaleGroup\",\r\n        \"scaleGroup\",\r\n        \"scaleGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"scalable\"),\r\n    dragControlCondition: directionCondition,\r\n    viewClassName: getDirectionViewClassName(\"scalable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, parentDirection = e.parentDirection;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var _a = moveable.state, width = _a.width, height = _a.height, targetTransform = _a.targetTransform, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos4 = _a.pos4;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (!isPinch) {\r\n            setDragStart(moveable, e);\r\n        }\r\n        datas.datas = {};\r\n        datas.transform = targetTransform;\r\n        datas.prevDist = [1, 1];\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.startValue = [1, 1];\r\n        // const scaleWidth = getDist(pos1, pos2);\r\n        // const scaleHeight = getDist(pos2, pos4);\r\n        var isWidth = (!direction[0] && !direction[1]) || direction[0] || !direction[1];\r\n        // datas.scaleWidth = scaleWidth;\r\n        // datas.scaleHeight = scaleHeight;\r\n        // datas.scaleXRatio = scaleWidth / width;\r\n        // datas.scaleYRatio = scaleHeight / height;\r\n        setDefaultTransformIndex(moveable, e, \"scale\");\r\n        datas.isWidth = isWidth;\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        datas.setFixedDirection = setFixedDirection;\r\n        setRatio(getDist$1(pos1, pos2) / getDist$1(pos2, pos4));\r\n        setFixedDirection([-direction[0], -direction[1]]);\r\n        var setMinScaleSize = function (min) {\r\n            datas.minScaleSize = min;\r\n        };\r\n        var setMaxScaleSize = function (max) {\r\n            datas.maxScaleSize = max;\r\n        };\r\n        // const setMinScale = (min: number[]) => {\r\n        // };\r\n        // const setMaxScale = (max: number[]) => {\r\n        // };\r\n        setMinScaleSize([-Infinity, -Infinity]);\r\n        setMaxScaleSize([Infinity, Infinity]);\r\n        var params = fillParams(moveable, e, __assign(__assign({ direction: direction, set: function (scale) {\r\n                datas.startValue = scale;\r\n            }, setRatio: setRatio, setFixedDirection: setFixedDirection, setMinScaleSize: setMinScaleSize, setMaxScaleSize: setMaxScaleSize }, fillTransformStartEvent(moveable, e)), { dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)) }));\r\n        var result = triggerEvent(moveable, \"onScaleStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        if (result !== false) {\r\n            datas.isScale = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isScale ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        resolveTransformEvent(moveable, e, \"scale\");\r\n        var datas = e.datas, parentKeepRatio = e.parentKeepRatio, parentFlag = e.parentFlag, isPinch = e.isPinch, dragClient = e.dragClient, isRequest = e.isRequest, useSnap = e.useSnap, resolveMatrix = e.resolveMatrix;\r\n        var prevDist = datas.prevDist, direction = datas.direction, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isScale = datas.isScale, startValue = datas.startValue, isWidth = datas.isWidth, ratio = datas.ratio;\r\n        if (!isScale) {\r\n            return false;\r\n        }\r\n        var props = moveable.props;\r\n        var throttleScale = props.throttleScale, parentMoveable = props.parentMoveable;\r\n        var sizeDirection = direction;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        var state = moveable.state;\r\n        var tempScaleValue = [\r\n            startValue[0],\r\n            startValue[1],\r\n        ];\r\n        function getNextScale() {\r\n            var _a = getOffsetSizeDist(sizeDirection, keepRatio, datas, e), distWidth = _a.distWidth, distHeight = _a.distHeight;\r\n            var distX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\r\n            var distY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\r\n            if (!startValue[0]) {\r\n                tempScaleValue[0] = distWidth / startOffsetWidth;\r\n            }\r\n            if (!startValue[1]) {\r\n                tempScaleValue[1] = distHeight / startOffsetHeight;\r\n            }\r\n            var scaleX = (sizeDirection[0] || keepRatio ? distX : 1) * tempScaleValue[0];\r\n            var scaleY = (sizeDirection[1] || keepRatio ? distY : 1) * tempScaleValue[1];\r\n            if (scaleX === 0) {\r\n                scaleX = sign(prevDist[0]) * MIN_SCALE;\r\n            }\r\n            if (scaleY === 0) {\r\n                scaleY = sign(prevDist[1]) * MIN_SCALE;\r\n            }\r\n            return [scaleX, scaleY];\r\n        }\r\n        var scale = getNextScale();\r\n        if (!isPinch && moveable.props.groupable) {\r\n            var snapRenderInfo = state.snapRenderInfo || {};\r\n            var stateDirection = snapRenderInfo.direction;\r\n            if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\r\n                state.snapRenderInfo = { direction: direction, request: e.isRequest };\r\n            }\r\n        }\r\n        triggerEvent(moveable, \"onBeforeScale\", fillParams(moveable, e, {\r\n            scale: scale,\r\n            setFixedDirection: function (nextFixedDirection) {\r\n                datas.setFixedDirection(nextFixedDirection);\r\n                scale = getNextScale();\r\n                return scale;\r\n            },\r\n            startFixedDirection: datas.startFixedDirection,\r\n            setScale: function (nextScale) {\r\n                scale = nextScale;\r\n            },\r\n        }, true));\r\n        var dist = [\r\n            scale[0] / tempScaleValue[0],\r\n            scale[1] / tempScaleValue[1],\r\n        ];\r\n        var fixedPosition = dragClient;\r\n        var snapDist = [0, 0];\r\n        var distSign = sign(dist[0] * dist[1]);\r\n        var isSelfPinch = !dragClient && !parentFlag && isPinch;\r\n        if (isSelfPinch || resolveMatrix) {\r\n            fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, [0, 0], [0, 0], datas);\r\n        }\r\n        else if (!dragClient) {\r\n            fixedPosition = datas.fixedPosition;\r\n        }\r\n        if (!isPinch) {\r\n            snapDist = checkSnapScale(moveable, dist, direction, !useSnap && isRequest, datas);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // throttle scale value (not absolute scale size)\r\n                if (isWidth) {\r\n                    dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n                }\r\n                else {\r\n                    dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n                }\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                dist[0] += snapDist[0];\r\n                var snapHeight = startOffsetWidth * dist[0] * tempScaleValue[0] / ratio;\r\n                dist[1] = sign(distSign * dist[0]) * abs(snapHeight / startOffsetHeight / tempScaleValue[1]);\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                dist[1] += snapDist[1];\r\n                var snapWidth = startOffsetHeight * dist[1] * tempScaleValue[1] * ratio;\r\n                dist[0] = sign(distSign * dist[1]) * abs(snapWidth / startOffsetWidth / tempScaleValue[0]);\r\n            }\r\n        }\r\n        else {\r\n            dist[0] += snapDist[0];\r\n            dist[1] += snapDist[1];\r\n            if (!snapDist[0]) {\r\n                dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n            }\r\n            if (!snapDist[1]) {\r\n                dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n            }\r\n        }\r\n        if (dist[0] === 0) {\r\n            dist[0] = sign(prevDist[0]) * MIN_SCALE;\r\n        }\r\n        if (dist[1] === 0) {\r\n            dist[1] = sign(prevDist[1]) * MIN_SCALE;\r\n        }\r\n        scale = multiply2(dist, [tempScaleValue[0], tempScaleValue[1]]);\r\n        var startOffsetSize = [\r\n            startOffsetWidth,\r\n            startOffsetHeight,\r\n        ];\r\n        var scaleSize = [\r\n            startOffsetWidth * scale[0],\r\n            startOffsetHeight * scale[1],\r\n        ];\r\n        scaleSize = calculateBoundSize(scaleSize, datas.minScaleSize, datas.maxScaleSize, keepRatio ? ratio : false);\r\n        // if (keepRatio && (isGroup || keepRatioFinally)) {\r\n        //     if (isWidth) {\r\n        //         boundingHeight = boundingWidth / ratio;\r\n        //     } else {\r\n        //         boundingWidth = boundingHeight * ratio;\r\n        //     }\r\n        // }\r\n        scale = countEach(2, function (i) {\r\n            return startOffsetSize[i] ? scaleSize[i] / startOffsetSize[i] : scaleSize[i];\r\n        });\r\n        dist = countEach(2, function (i) {\r\n            return scale[i] / tempScaleValue[i];\r\n        });\r\n        var delta = countEach(2, function (i) { return prevDist[i] ? dist[i] / prevDist[i] : dist[i]; });\r\n        var distText = \"scale(\".concat(dist.join(\", \"), \")\");\r\n        var scaleText = \"scale(\".concat(scale.join(\", \"), \")\");\r\n        var nextTransform = convertTransformFormat(datas, scaleText, distText);\r\n        var isZeroScale = !startValue[0] || !startValue[1];\r\n        var inverseDist = getScaleDist(moveable, isZeroScale ? scaleText : distText, datas.fixedDirection, fixedPosition, datas.fixedOffset, datas, isZeroScale);\r\n        var inverseDelta = isSelfPinch ? inverseDist : minus(inverseDist, datas.prevInverseDist || [0, 0]);\r\n        datas.prevDist = dist;\r\n        datas.prevInverseDist = inverseDist;\r\n        if (scale[0] === prevDist[0] && scale[1] === prevDist[1]\r\n            && inverseDelta.every(function (num) { return !num; })\r\n            && !parentMoveable\r\n            && !isSelfPinch) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, __assign({ offsetWidth: startOffsetWidth, offsetHeight: startOffsetHeight, direction: direction, scale: scale, dist: dist, delta: delta, isPinch: !!isPinch }, fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e)));\r\n        triggerEvent(moveable, \"onScale\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return false;\r\n        }\r\n        datas.isScale = false;\r\n        var scaleEndParam = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\r\n        return scaleEndParam;\r\n    },\r\n    dragGroupControlCondition: directionCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        datas.moveableScale = moveable.scale;\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events, setFixedDirection: setFixedDirection });\r\n        var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\r\n        datas.isScale = result !== false;\r\n        return datas.isScale ? nextParams : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeScale\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var dist = params.dist;\r\n        var moveableScale = datas.moveableScale;\r\n        moveable.scale = [\r\n            dist[0] * moveableScale[0],\r\n            dist[1] * moveableScale[1],\r\n        ];\r\n        var keepRatio = moveable.props.keepRatio;\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * dist[0],\r\n                ev.datas.originalY * dist[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: dist, parentKeepRatio: keepRatio, \r\n                // recalculate child fixed position for parent group's dragging.\r\n                dragClient: plus(fixedPosition, [clientX, clientY]) });\r\n        });\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onScaleGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Scalable#request\r\n     * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"scalable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function () {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                distWidth += e.deltaWidth;\r\n                distHeight += e.deltaHeight;\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can scaled.\r\n *\r\n * @name Moveable.Scalable#scalable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.scalable = true;\r\n */\r\n/**\r\n * throttle of scaleX, scaleY when scale.\r\n * @name Moveable.Scalable#throttleScale\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleScale = 0.1;\r\n */\r\n/**\r\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n * @name Moveable.Scalable#renderDirections\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height. (default: false)\r\n * @name Moveable.Scalable#keepRatio\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * When the scale starts, the scaleStart event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleStart\r\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\r\n * @memberof Moveable.Scalable\r\n * @event beforeScale\r\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When scaling, the `scale` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scale\r\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the scale finishes, the `scaleEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleEnd\r\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group scale starts, the `scaleGroupStart` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroupStart\r\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\r\n*     console.log(\"onScaleGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group scale, the `scaleGroup` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroup\r\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\r\n*     console.log(\"onScaleGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group scale.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const scaleX = ev.scale[0];\r\n*         const scaleY = ev.scale[1];\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group scale finishes, the `scaleGroupEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleGroupEnd\r\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     scalable: true\r\n * });\r\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getMiddleLinePos(pos1, pos2) {\r\n    return pos1.map(function (pos, i) { return dot(pos, pos2[i], 1, 2); });\r\n}\r\nfunction getTriangleRad(pos1, pos2, pos3) {\r\n    // pos1 Rad\r\n    var rad1 = getRad(pos1, pos2);\r\n    var rad2 = getRad(pos1, pos3);\r\n    var rad = rad2 - rad1;\r\n    return rad >= 0 ? rad : rad + 2 * Math.PI;\r\n}\r\nfunction isValidPos(poses1, poses2) {\r\n    var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\r\n    var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\r\n    var pi = Math.PI;\r\n    if ((rad1 >= pi && rad2 <= pi) || (rad1 <= pi && rad2 >= pi)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @namespace Moveable.Warpable\r\n * @description Warpable indicates whether the target can be warped(distorted, bented).\r\n */\r\nvar Warpable = {\r\n    name: \"warpable\",\r\n    ableGroup: \"size\",\r\n    props: [\r\n        \"warpable\",\r\n        \"renderDirections\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"warpStart\",\r\n        \"warp\",\r\n        \"warpEnd\",\r\n    ],\r\n    viewClassName: getDirectionViewClassName(\"warpable\"),\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, resizable = _a.resizable, scalable = _a.scalable, warpable = _a.warpable, zoom = _a.zoom;\r\n        if (resizable || scalable || !warpable) {\r\n            return [];\r\n        }\r\n        var _b = moveable.state, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var linePosFrom1 = getMiddleLinePos(pos1, pos2);\r\n        var linePosFrom2 = getMiddleLinePos(pos2, pos1);\r\n        var linePosFrom3 = getMiddleLinePos(pos1, pos3);\r\n        var linePosFrom4 = getMiddleLinePos(pos3, pos1);\r\n        var linePosTo1 = getMiddleLinePos(pos3, pos4);\r\n        var linePosTo2 = getMiddleLinePos(pos4, pos3);\r\n        var linePosTo3 = getMiddleLinePos(pos2, pos4);\r\n        var linePosTo4 = getMiddleLinePos(pos4, pos2);\r\n        return __spreadArray([\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine1\", style: getLineStyle(linePosFrom1, linePosTo1, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine2\", style: getLineStyle(linePosFrom2, linePosTo2, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine3\", style: getLineStyle(linePosFrom3, linePosTo3, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine4\", style: getLineStyle(linePosFrom4, linePosTo4, zoom) })\r\n        ], __read(renderAllDirections(moveable, \"warpable\", React)), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (e.isRequest) {\r\n            return false;\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, inputEvent = e.inputEvent;\r\n        var target = moveable.props.target;\r\n        var inputTarget = inputEvent.target;\r\n        var direction = getDirection(inputTarget, datas);\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        var state = moveable.state;\r\n        var transformOrigin = state.transformOrigin, is3d = state.is3d, targetTransform = state.targetTransform, targetMatrix = state.targetMatrix, width = state.width, height = state.height, left = state.left, top = state.top;\r\n        datas.datas = {};\r\n        datas.targetTransform = targetTransform;\r\n        datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\r\n        datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\r\n        datas.direction = direction;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        datas.poses = [\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ].map(function (p) { return minus(p, transformOrigin); });\r\n        datas.nextPoses = datas.poses.map(function (_a) {\r\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\r\n            return calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\r\n        });\r\n        datas.startValue = createIdentityMatrix(4);\r\n        datas.prevMatrix = createIdentityMatrix(4);\r\n        datas.absolutePoses = getAbsolutePosesByState(state);\r\n        datas.posIndexes = getPosIndexesByDirection(direction);\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"matrix3d\");\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: direction,\r\n        };\r\n        var params = fillParams(moveable, e, __assign({ set: function (matrix) {\r\n                datas.startValue = matrix;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = triggerEvent(moveable, \"onWarpStart\", params);\r\n        if (result !== false) {\r\n            datas.isWarp = true;\r\n        }\r\n        return datas.isWarp;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isRequest = e.isRequest;\r\n        var distX = e.distX, distY = e.distY;\r\n        var targetInverseMatrix = datas.targetInverseMatrix, prevMatrix = datas.prevMatrix, isWarp = datas.isWarp, startValue = datas.startValue, poses = datas.poses, posIndexes = datas.posIndexes, absolutePoses = datas.absolutePoses;\r\n        if (!isWarp) {\r\n            return false;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"matrix3d\");\r\n        if (hasGuidelines(moveable, \"warpable\")) {\r\n            var selectedPoses = posIndexes.map(function (index) { return absolutePoses[index]; });\r\n            if (selectedPoses.length > 1) {\r\n                selectedPoses.push([\r\n                    (selectedPoses[0][0] + selectedPoses[1][0]) / 2,\r\n                    (selectedPoses[0][1] + selectedPoses[1][1]) / 2,\r\n                ]);\r\n            }\r\n            var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n                horizontal: selectedPoses.map(function (pos) { return pos[1] + distY; }),\r\n                vertical: selectedPoses.map(function (pos) { return pos[0] + distX; }),\r\n            }), horizontalSnapInfo = _a.horizontal, verticalSnapInfo = _a.vertical;\r\n            distY -= horizontalSnapInfo.offset;\r\n            distX -= verticalSnapInfo.offset;\r\n        }\r\n        var dist = getDragDist({ datas: datas, distX: distX, distY: distY }, true);\r\n        var nextPoses = datas.nextPoses.slice();\r\n        posIndexes.forEach(function (index) {\r\n            nextPoses[index] = plus(nextPoses[index], dist);\r\n        });\r\n        if (!NEARBY_POS.every(function (nearByPoses) { return isValidPos(nearByPoses.map(function (i) { return poses[i]; }), nearByPoses.map(function (i) { return nextPoses[i]; })); })) {\r\n            return false;\r\n        }\r\n        var h = createWarpMatrix(poses[0], poses[2], poses[1], poses[3], nextPoses[0], nextPoses[2], nextPoses[1], nextPoses[3]);\r\n        if (!h.length) {\r\n            return false;\r\n        }\r\n        // B * A * M\r\n        var afterMatrix = multiply(targetInverseMatrix, h, 4);\r\n        // B * M * A\r\n        var matrix = getTransfromMatrix(datas, afterMatrix, true);\r\n        var delta = multiply(invert(prevMatrix, 4), matrix, 4);\r\n        datas.prevMatrix = matrix;\r\n        var totalMatrix = multiply(startValue, matrix, 4);\r\n        var nextTransform = convertTransformFormat(datas, \"matrix3d(\".concat(totalMatrix.join(\", \"), \")\"), \"matrix3d(\".concat(matrix.join(\", \"), \")\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, __assign({ delta: delta, matrix: totalMatrix, dist: matrix, multiply: multiply, transform: nextTransform }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, isDrag = e.isDrag;\r\n        if (!datas.isWarp) {\r\n            return false;\r\n        }\r\n        datas.isWarp = false;\r\n        triggerEvent(moveable, \"onWarpEnd\", fillEndParams(moveable, e, {}));\r\n        return isDrag;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be warped. (default: false)\r\n * @name Moveable.Warpable#warpable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.warpable = true;\r\n */\r\n/**\r\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n* @name Moveable.Warpable#renderDirections\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     warpable: true,\r\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n* });\r\n*\r\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n*/\r\n/**\r\n* When the warp starts, the warpStart event is called.\r\n* @memberof Moveable.Warpable\r\n* @event warpStart\r\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { warpable: true });\r\n* moveable.on(\"warpStart\", ({ target }) => {\r\n*     console.log(target);\r\n* });\r\n*/\r\n/**\r\n * When warping, the warp event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warp\r\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n * let matrix = [\r\n *  1, 0, 0, 0,\r\n *  0, 1, 0, 0,\r\n *  0, 0, 1, 0,\r\n *  0, 0, 0, 1,\r\n * ];\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\r\n *    // target.style.transform = transform;\r\n *    matrix = multiply(matrix, delta);\r\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\r\n * });\r\n */\r\n/**\r\n * When the warp finishes, the warpEnd event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warpEnd\r\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\n\nvar AREA_PIECES = /*#__PURE__*/ prefix(\"area-pieces\");\r\nvar AREA_PIECE = /*#__PURE__*/ prefix(\"area-piece\");\r\nvar AVOID = /*#__PURE__*/ prefix(\"avoid\");\r\nvar VIEW_DRAGGING = prefix(\"view-dragging\");\n\nfunction restoreStyle(moveable) {\r\n    var el = moveable.areaElement;\r\n    if (!el) {\r\n        return;\r\n    }\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    removeClass(el, AVOID);\r\n    el.style.cssText += \"left: 0px; top: 0px; width: \".concat(width, \"px; height: \").concat(height, \"px\");\r\n}\r\nfunction renderPieces(React) {\r\n    return (React.createElement(\"div\", { key: \"area_pieces\", className: AREA_PIECES },\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE })));\r\n}\r\nvar DragArea = {\r\n    name: \"dragArea\",\r\n    props: [\r\n        \"dragArea\",\r\n        \"passDragArea\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, target = _a.target, dragArea = _a.dragArea, groupable = _a.groupable, passDragArea = _a.passDragArea;\r\n        var _b = moveable.getState(), width = _b.width, height = _b.height, renderPoses = _b.renderPoses;\r\n        var className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\r\n        if (groupable) {\r\n            return [\r\n                React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className }),\r\n                renderPieces(React),\r\n            ];\r\n        }\r\n        if (!target || !dragArea) {\r\n            return [];\r\n        }\r\n        var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\r\n        var transform = h.length ? makeMatrixCSS(h, true) : \"none\";\r\n        return [\r\n            React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className, style: {\r\n                    top: \"0px\",\r\n                    left: \"0px\",\r\n                    width: \"\".concat(width, \"px\"),\r\n                    height: \"\".concat(height, \"px\"),\r\n                    transformOrigin: \"0 0\",\r\n                    transform: transform,\r\n                } }),\r\n            renderPieces(React),\r\n        ];\r\n    },\r\n    dragStart: function (moveable, _a) {\r\n        var datas = _a.datas, clientX = _a.clientX, clientY = _a.clientY, inputEvent = _a.inputEvent;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        datas.isDragArea = false;\r\n        var areaElement = moveable.areaElement;\r\n        var state = moveable.state;\r\n        var moveableClientRect = state.moveableClientRect, renderPoses = state.renderPoses, rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n        var left = moveableClientRect.left, top = moveableClientRect.top;\r\n        var _b = getRect(renderPoses), relativeLeft = _b.left, relativeTop = _b.top, width = _b.width, height = _b.height;\r\n        var n = is3d ? 4 : 3;\r\n        var _c = __read(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), 2), posX = _c[0], posY = _c[1];\r\n        posX -= relativeLeft;\r\n        posY -= relativeTop;\r\n        var rects = [\r\n            { left: relativeLeft, top: relativeTop, width: width, height: posY - 10 },\r\n            { left: relativeLeft, top: relativeTop, width: posX - 10, height: height },\r\n            { left: relativeLeft, top: relativeTop + posY + 10, width: width, height: height - posY - 10 },\r\n            { left: relativeLeft + posX + 10, top: relativeTop, width: width - posX - 10, height: height },\r\n        ];\r\n        var children = [].slice.call(areaElement.nextElementSibling.children);\r\n        rects.forEach(function (rect, i) {\r\n            children[i].style.cssText\r\n                = \"left: \".concat(rect.left, \"px;top: \").concat(rect.top, \"px; width: \").concat(rect.width, \"px; height: \").concat(rect.height, \"px;\");\r\n        });\r\n        addClass(areaElement, AVOID);\r\n        state.disableNativeEvent = true;\r\n        return;\r\n    },\r\n    drag: function (moveable, _a) {\r\n        var datas = _a.datas, inputEvent = _a.inputEvent;\r\n        this.enableNativeEvent(moveable);\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            datas.isDragArea = true;\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        this.enableNativeEvent(moveable);\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    unset: function (moveable) {\r\n        restoreStyle(moveable);\r\n        moveable.state.disableNativeEvent = false;\r\n    },\r\n    enableNativeEvent: function (moveable) {\r\n        var state = moveable.state;\r\n        if (state.disableNativeEvent) {\r\n            requestAnimationFrame(function () {\r\n                state.disableNativeEvent = false;\r\n            });\r\n        }\r\n    },\r\n};\r\n/**\r\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\r\n * @name Moveable#dragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\r\n/**\r\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\r\n * @name Moveable#passDragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\n\nvar Origin = makeAble(\"origin\", {\r\n    props: [\"origin\", \"svgOrigin\"],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, zoom = _a.zoom, svgOrigin = _a.svgOrigin, groupable = _a.groupable;\r\n        var _b = moveable.getState(), beforeOrigin = _b.beforeOrigin, rotation = _b.rotation, svg = _b.svg, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\r\n        var originStyle;\r\n        if (!groupable && svg && svgOrigin) {\r\n            var _c = __read(convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight), 2), originX = _c[0], originY = _c[1];\r\n            var n = is3d ? 4 : 3;\r\n            var result = calculatePosition(allMatrix, [originX, originY], n);\r\n            originStyle = getControlTransform(rotation, zoom, minus(result, [left, top]));\r\n        }\r\n        else {\r\n            originStyle = getControlTransform(rotation, zoom, beforeOrigin);\r\n        }\r\n        return [\r\n            React.createElement(\"div\", { className: prefix(\"control\", \"origin\"), style: originStyle, key: \"beforeOrigin\" }),\r\n        ];\r\n    },\r\n});\r\n/**\r\n * Whether or not the origin controlbox will be visible or not (default: true)\r\n * @name Moveable#origin\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.origin = true;\r\n */\n\nfunction getDefaultScrollPosition(e) {\r\n    var scrollContainer = e.scrollContainer;\r\n    return [\r\n        scrollContainer.scrollLeft,\r\n        scrollContainer.scrollTop,\r\n    ];\r\n}\r\n/**\r\n * @namespace Moveable.Scrollable\r\n * @description Whether or not target can be scrolled to the scroll container (default: false)\r\n */\r\nvar Scrollable = {\r\n    name: \"scrollable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scrollable\",\r\n        \"scrollContainer\",\r\n        \"scrollThreshold\",\r\n        \"scrollThrottleTime\",\r\n        \"getScrollPosition\",\r\n        \"scrollOptions\",\r\n    ],\r\n    events: [\r\n        \"scroll\",\r\n        \"scrollGroup\",\r\n    ],\r\n    dragRelation: \"strong\",\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.scrollContainer, scrollContainer = _a === void 0 ? moveable.getContainer() : _a, scrollOptions = props.scrollOptions;\r\n        var dragScroll = new DragScroll();\r\n        var scrollContainerElement = getRefTarget(scrollContainer, true);\r\n        e.datas.dragScroll = dragScroll;\r\n        moveable.state.dragScroll = dragScroll;\r\n        var gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\r\n        var targets = e.targets;\r\n        dragScroll.on(\"scroll\", function (_a) {\r\n            var container = _a.container, direction = _a.direction;\r\n            var params = fillParams(moveable, e, {\r\n                scrollContainer: container,\r\n                direction: direction,\r\n            });\r\n            var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\r\n            if (targets) {\r\n                params.targets = targets;\r\n            }\r\n            triggerEvent(moveable, eventName, params);\r\n        }).on(\"move\", function (_a) {\r\n            var offsetX = _a.offsetX, offsetY = _a.offsetY, inputEvent = _a.inputEvent;\r\n            moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, false);\r\n        }).on(\"scrollDrag\", function (_a) {\r\n            var next = _a.next;\r\n            next(moveable[gestoName].getCurrentEvent());\r\n        });\r\n        dragScroll.dragStart(e, __assign({ container: scrollContainerElement }, scrollOptions));\r\n    },\r\n    checkScroll: function (moveable, e) {\r\n        var dragScroll = e.datas.dragScroll;\r\n        if (!dragScroll) {\r\n            return;\r\n        }\r\n        var _a = moveable.props, _b = _a.scrollContainer, scrollContainer = _b === void 0 ? moveable.getContainer() : _b, _c = _a.scrollThreshold, scrollThreshold = _c === void 0 ? 0 : _c, _d = _a.scrollThrottleTime, scrollThrottleTime = _d === void 0 ? 0 : _d, _e = _a.getScrollPosition, getScrollPosition = _e === void 0 ? getDefaultScrollPosition : _e, scrollOptions = _a.scrollOptions;\r\n        dragScroll.drag(e, __assign({ container: scrollContainer, threshold: scrollThreshold, throttleTime: scrollThrottleTime, getScrollPosition: function (ev) {\r\n                return getScrollPosition({ scrollContainer: ev.container, direction: ev.direction });\r\n            } }, scrollOptions));\r\n        return true;\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.checkScroll(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        e.datas.dragScroll.dragEnd();\r\n        e.datas.dragScroll = null;\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { isControl: true }));\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets, isControl: true }));\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    unset: function (moveable) {\r\n        var _a;\r\n        var state = moveable.state;\r\n        (_a = state.dragScroll) === null || _a === void 0 ? void 0 : _a.dragEnd();\r\n        state.dragScroll = null;\r\n    },\r\n};\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\r\n * @memberof Moveable.Scrollable\r\n * @event scroll\r\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\r\n * @memberof Moveable.Scrollable\r\n * @event scrollGroup\r\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\n\nvar Default = {\r\n    name: \"\",\r\n    props: [\r\n        \"target\",\r\n        \"dragTargetSelf\",\r\n        \"dragTarget\",\r\n        \"dragContainer\",\r\n        \"container\",\r\n        \"warpSelf\",\r\n        \"rootContainer\",\r\n        \"useResizeObserver\",\r\n        \"useMutationObserver\",\r\n        \"zoom\",\r\n        \"dragFocusedInput\",\r\n        \"transformOrigin\",\r\n        \"ables\",\r\n        \"className\",\r\n        \"pinchThreshold\",\r\n        \"pinchOutside\",\r\n        \"triggerAblesSimultaneously\",\r\n        \"checkInput\",\r\n        \"cspNonce\",\r\n        \"translateZ\",\r\n        \"hideDefaultLines\",\r\n        \"props\",\r\n        \"flushSync\",\r\n        \"stopPropagation\",\r\n        \"preventClickEventOnDrag\",\r\n        \"preventClickDefault\",\r\n        \"viewContainer\",\r\n        \"persistData\",\r\n        \"useAccuratePosition\",\r\n        \"firstRenderState\",\r\n        \"linePadding\",\r\n        \"controlPadding\",\r\n        \"preventDefault\",\r\n        \"preventRightClick\",\r\n        \"preventWheelClick\",\r\n        \"requestStyles\",\r\n    ],\r\n    events: [\r\n        \"changeTargets\",\r\n    ],\r\n};\n\nvar Padding = makeAble(\"padding\", {\r\n    props: [\"padding\"],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        if (props.dragArea) {\r\n            return [];\r\n        }\r\n        var _a = getPaddingBox(props.padding || {}), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var poses = [pos1, pos2, pos3, pos4];\r\n        var paddingDirections = [];\r\n        if (left > 0) {\r\n            paddingDirections.push([0, 2]);\r\n        }\r\n        if (top > 0) {\r\n            paddingDirections.push([0, 1]);\r\n        }\r\n        if (right > 0) {\r\n            paddingDirections.push([1, 3]);\r\n        }\r\n        if (bottom > 0) {\r\n            paddingDirections.push([2, 3]);\r\n        }\r\n        return paddingDirections.map(function (_a, i) {\r\n            var _b = __read(_a, 2), dir1 = _b[0], dir2 = _b[1];\r\n            var paddingPos1 = poses[dir1];\r\n            var paddingPos2 = poses[dir2];\r\n            var paddingPos3 = renderPoses[dir1];\r\n            var paddingPos4 = renderPoses[dir2];\r\n            var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\r\n            if (!h.length) {\r\n                return undefined;\r\n            }\r\n            return (React.createElement(\"div\", { key: \"padding\".concat(i), className: prefix(\"padding\"), style: {\r\n                    transform: makeMatrixCSS(h, true),\r\n                } }));\r\n        });\r\n    },\r\n});\r\n/**\r\n * Add padding around the target to increase the drag area.\r\n * @name Moveable#padding\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  target: document.querySelector(\".target\"),\r\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\r\n * });\r\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\r\n * moveable.updateRect();\r\n */\n\nvar RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"];\r\nfunction calculateRatio(values, size) {\r\n    var sumSize = values[0] + values[1];\r\n    var sumRatio = sumSize > size ? size / sumSize : 1;\r\n    values[0] *= sumRatio;\r\n    values[1] = size - values[1] * sumRatio;\r\n    return values;\r\n}\r\nvar HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\r\nvar VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\r\nvar HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1];\r\nvar VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1];\r\nfunction getRadiusStyles(nextPoses, isRelative, width, height, left, top, right, bottom) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    if (right === void 0) { right = width; }\r\n    if (bottom === void 0) { bottom = height; }\r\n    var clipStyles = [];\r\n    var isVertical = false;\r\n    var radiusPoses = nextPoses.filter(function (pos) { return !pos.virtual; });\r\n    var raws = radiusPoses.map(function (posInfo) {\r\n        var horizontal = posInfo.horizontal, vertical = posInfo.vertical, pos = posInfo.pos;\r\n        if (vertical && !isVertical) {\r\n            isVertical = true;\r\n            clipStyles.push(\"/\");\r\n        }\r\n        if (isVertical) {\r\n            var rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\r\n            clipStyles.push(convertCSSSize(rawPos, height, isRelative));\r\n            return rawPos;\r\n        }\r\n        else {\r\n            var rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\r\n            clipStyles.push(convertCSSSize(rawPos, width, isRelative));\r\n            return rawPos;\r\n        }\r\n    });\r\n    return {\r\n        radiusPoses: radiusPoses,\r\n        styles: clipStyles,\r\n        raws: raws,\r\n    };\r\n}\r\nfunction getRadiusRange(controlPoses) {\r\n    // [start, length]\r\n    var horizontalRange = [0, 0];\r\n    var verticalRange = [0, 0];\r\n    var length = controlPoses.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        var clipPose = controlPoses[i];\r\n        if (!clipPose.sub) {\r\n            continue;\r\n        }\r\n        if (clipPose.horizontal) {\r\n            if (horizontalRange[1] === 0) {\r\n                horizontalRange[0] = i;\r\n            }\r\n            horizontalRange[1] = i - horizontalRange[0] + 1;\r\n            verticalRange[0] = i + 1;\r\n        }\r\n        if (clipPose.vertical) {\r\n            if (verticalRange[1] === 0) {\r\n                verticalRange[0] = i;\r\n            }\r\n            verticalRange[1] = i - verticalRange[0] + 1;\r\n        }\r\n    }\r\n    return {\r\n        horizontalRange: horizontalRange,\r\n        verticalRange: verticalRange,\r\n    };\r\n}\r\nfunction getRadiusValues(values, width, height, left, top, minCounts, full) {\r\n    var _a, _b, _c, _d;\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    if (full === void 0) { full = false; }\r\n    var splitIndex = values.indexOf(\"/\");\r\n    var splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\r\n    var horizontalValues = values.slice(0, splitLength);\r\n    var verticalValues = values.slice(splitLength + 1);\r\n    var horizontalValuesLength = horizontalValues.length;\r\n    var verticalValuesLength = verticalValues.length;\r\n    var hasVerticalValues = verticalValuesLength > 0;\r\n    var _e = __read(horizontalValues, 4), _f = _e[0], nwValue = _f === void 0 ? \"0px\" : _f, _g = _e[1], neValue = _g === void 0 ? nwValue : _g, _h = _e[2], seValue = _h === void 0 ? nwValue : _h, _j = _e[3], swValue = _j === void 0 ? neValue : _j;\r\n    var _k = __read(verticalValues, 4), _l = _k[0], wnValue = _l === void 0 ? nwValue : _l, _m = _k[1], enValue = _m === void 0 ? hasVerticalValues ? wnValue : neValue : _m, _o = _k[2], esValue = _o === void 0 ? hasVerticalValues ? wnValue : seValue : _o, _p = _k[3], wsValue = _p === void 0 ? hasVerticalValues ? enValue : swValue : _p;\r\n    var horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(function (pos) { return convertUnitSize(pos, width); });\r\n    var verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(function (pos) { return convertUnitSize(pos, height); });\r\n    var horizontalPoses = horizontalRawPoses.slice();\r\n    var verticalPoses = verticalRawPoses.slice();\r\n    _a = __read(calculateRatio([horizontalPoses[0], horizontalPoses[1]], width), 2), horizontalPoses[0] = _a[0], horizontalPoses[1] = _a[1];\r\n    _b = __read(calculateRatio([horizontalPoses[3], horizontalPoses[2]], width), 2), horizontalPoses[3] = _b[0], horizontalPoses[2] = _b[1];\r\n    _c = __read(calculateRatio([verticalPoses[0], verticalPoses[3]], height), 2), verticalPoses[0] = _c[0], verticalPoses[3] = _c[1];\r\n    _d = __read(calculateRatio([verticalPoses[1], verticalPoses[2]], height), 2), verticalPoses[1] = _d[0], verticalPoses[2] = _d[1];\r\n    var nextHorizontalPoses = full\r\n        ? horizontalPoses\r\n        : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\r\n    var nextVerticalPoses = full\r\n        ? verticalPoses\r\n        : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\r\n    return __spreadArray(__spreadArray([], __read(nextHorizontalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= horizontalValuesLength,\r\n            horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n            vertical: 0,\r\n            pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\r\n            sub: true,\r\n            raw: horizontalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false), __read(nextVerticalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= verticalValuesLength,\r\n            horizontal: 0,\r\n            vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n            pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\r\n            sub: true,\r\n            raw: verticalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false);\r\n}\r\nfunction removeRadiusPos(controlPoses, poses, index, startIndex, length) {\r\n    if (length === void 0) { length = poses.length; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    var radiuslIndex = index - startIndex;\r\n    var deleteCount = 0;\r\n    if (radiuslIndex === 0) {\r\n        deleteCount = length;\r\n    }\r\n    else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\r\n        deleteCount = horizontalRange[1] - radiuslIndex;\r\n    }\r\n    else if (radiuslIndex >= verticalRange[0]) {\r\n        deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    controlPoses.splice(index, deleteCount);\r\n    poses.splice(index, deleteCount);\r\n}\r\nfunction addRadiusPos(controlPoses, poses, startIndex, horizontalIndex, verticalIndex, distX, distY, right, bottom, left, top) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    if (horizontalIndex > -1) {\r\n        var radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1\r\n            ? distX - left\r\n            : right - distX;\r\n        for (var i = horizontalRange[1]; i <= horizontalIndex; ++i) {\r\n            var y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\r\n            var x = 0;\r\n            if (horizontalIndex === i) {\r\n                x = distX;\r\n            }\r\n            else if (i === 0) {\r\n                x = left + radiusX;\r\n            }\r\n            else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                x = right - (poses[startIndex][0] - left);\r\n            }\r\n            controlPoses.splice(startIndex + i, 0, {\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n                vertical: 0,\r\n                pos: [x, y],\r\n            });\r\n            poses.splice(startIndex + i, 0, [x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (verticalIndex > -1) {\r\n        var radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1\r\n            ? distY - top\r\n            : bottom - distY;\r\n        if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\r\n            var pos = [\r\n                left + radiusY,\r\n                top,\r\n            ];\r\n            controlPoses.push({\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\r\n                vertical: 0,\r\n                pos: pos,\r\n            });\r\n            poses.push(pos);\r\n        }\r\n        var startVerticalIndex = verticalRange[0];\r\n        for (var i = verticalRange[1]; i <= verticalIndex; ++i) {\r\n            var x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\r\n            var y = 0;\r\n            if (verticalIndex === i) {\r\n                y = distY;\r\n            }\r\n            else if (i === 0) {\r\n                y = top + radiusY;\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\r\n                y = poses[startIndex + startVerticalIndex][1];\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\r\n            }\r\n            controlPoses.push({\r\n                horizontal: 0,\r\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n                pos: [x, y],\r\n            });\r\n            poses.push([x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction splitRadiusPoses(controlPoses, raws) {\r\n    if (raws === void 0) { raws = controlPoses.map(function (pos) { return pos.raw; }); }\r\n    var horizontals = controlPoses\r\n        .map(function (pos, i) { return pos.horizontal ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    var verticals = controlPoses\r\n        .map(function (pos, i) { return pos.vertical ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    return {\r\n        horizontals: horizontals,\r\n        verticals: verticals,\r\n    };\r\n}\n\nvar CLIP_DIRECTIONS = [\r\n    [0, -1, \"n\"],\r\n    [1, 0, \"e\"],\r\n];\r\nvar CLIP_RECT_DIRECTIONS = [\r\n    [-1, -1, \"nw\"],\r\n    [0, -1, \"n\"],\r\n    [1, -1, \"ne\"],\r\n    [1, 0, \"e\"],\r\n    [1, 1, \"se\"],\r\n    [0, 1, \"s\"],\r\n    [-1, 1, \"sw\"],\r\n    [-1, 0, \"w\"],\r\n];\r\n// 1 2 5 6 0 3 4 7\r\n// 0 1 2 3 4 5 6 7\r\nfunction getClipStyles(moveable, clipPath, poses) {\r\n    var clipRelative = moveable.props.clipRelative;\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses;\r\n    var isRect = clipType === \"rect\";\r\n    var isCircle = clipType === \"circle\";\r\n    if (clipType === \"polygon\") {\r\n        return poses.map(function (pos) { return \"\".concat(convertCSSSize(pos[0], width, clipRelative), \" \").concat(convertCSSSize(pos[1], height, clipRelative)); });\r\n    }\r\n    else if (isRect || clipType === \"inset\") {\r\n        var top_1 = poses[1][1];\r\n        var right = poses[3][0];\r\n        var left = poses[7][0];\r\n        var bottom = poses[5][1];\r\n        if (isRect) {\r\n            return [\r\n                top_1,\r\n                right,\r\n                bottom,\r\n                left,\r\n            ].map(function (pos) { return \"\".concat(pos, \"px\"); });\r\n        }\r\n        var clipStyles = [top_1, width - right, height - bottom, left]\r\n            .map(function (pos, i) { return convertCSSSize(pos, i % 2 ? width : height, clipRelative); });\r\n        if (poses.length > 8) {\r\n            var _c = __read(minus(poses[4], poses[0]), 2), subWidth = _c[0], subHeight = _c[1];\r\n            clipStyles.push.apply(clipStyles, __spreadArray([\"round\"], __read(getRadiusStyles(clipPoses.slice(8).map(function (info, i) {\r\n                return __assign(__assign({}, info), { pos: poses[i] });\r\n            }), clipRelative, subWidth, subHeight, left, top_1, right, bottom).styles), false));\r\n        }\r\n        return clipStyles;\r\n    }\r\n    else if (isCircle || clipType === \"ellipse\") {\r\n        var center = poses[0];\r\n        var ry = convertCSSSize(abs(poses[1][1] - center[1]), isCircle ? Math.sqrt((width * width + height * height) / 2) : height, clipRelative);\r\n        var clipStyles = isCircle ? [ry]\r\n            : [convertCSSSize(abs(poses[2][0] - center[0]), width, clipRelative), ry];\r\n        clipStyles.push(\"at\", convertCSSSize(center[0], width, clipRelative), convertCSSSize(center[1], height, clipRelative));\r\n        return clipStyles;\r\n    }\r\n}\r\nfunction getRectPoses(top, right, bottom, left) {\r\n    var xs = [left, (left + right) / 2, right];\r\n    var ys = [top, (top + bottom) / 2, bottom];\r\n    return CLIP_RECT_DIRECTIONS.map(function (_a) {\r\n        var _b = __read(_a, 3), dirx = _b[0], diry = _b[1], dir = _b[2];\r\n        var x = xs[dirx + 1];\r\n        var y = ys[diry + 1];\r\n        return {\r\n            vertical: abs(diry),\r\n            horizontal: abs(dirx),\r\n            direction: dir,\r\n            pos: [x, y],\r\n        };\r\n    });\r\n}\r\nfunction getControlSize(controlPoses) {\r\n    var xRange = [Infinity, -Infinity];\r\n    var yRange = [Infinity, -Infinity];\r\n    controlPoses.forEach(function (_a) {\r\n        var pos = _a.pos;\r\n        xRange[0] = Math.min(xRange[0], pos[0]);\r\n        xRange[1] = Math.max(xRange[1], pos[0]);\r\n        yRange[0] = Math.min(yRange[0], pos[1]);\r\n        yRange[1] = Math.max(yRange[1], pos[1]);\r\n    });\r\n    return [\r\n        abs(xRange[1] - xRange[0]),\r\n        abs(yRange[1] - yRange[0]),\r\n    ];\r\n}\r\nfunction getClipPath(target, width, height, defaultClip, customClip) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var clipText = customClip;\r\n    if (!clipText) {\r\n        var getStyle = getCachedStyle(target);\r\n        var clipPath = getStyle(\"clipPath\");\r\n        clipText = clipPath !== \"none\" ? clipPath : getStyle(\"clip\");\r\n    }\r\n    if (!clipText || clipText === \"none\" || clipText === \"auto\") {\r\n        clipText = defaultClip;\r\n        if (!clipText) {\r\n            return;\r\n        }\r\n    }\r\n    var _k = splitBracket(clipText), _l = _k.prefix, clipPrefix = _l === void 0 ? clipText : _l, _m = _k.value, value = _m === void 0 ? \"\" : _m;\r\n    var isCircle = clipPrefix === \"circle\";\r\n    var splitter = \" \";\r\n    if (clipPrefix === \"polygon\") {\r\n        var values = splitComma(value || \"0% 0%, 100% 0%, 100% 100%, 0% 100%\");\r\n        splitter = \",\";\r\n        var poses = values.map(function (pos) {\r\n            var _a = __read(pos.split(\" \"), 2), xPos = _a[0], yPos = _a[1];\r\n            return {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: [\r\n                    convertUnitSize(xPos, width),\r\n                    convertUnitSize(yPos, height),\r\n                ],\r\n            };\r\n        });\r\n        var minMaxs = getMinMaxs(poses.map(function (pos) { return pos.pos; }));\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            poses: poses,\r\n            splitter: splitter,\r\n            left: minMaxs.minX,\r\n            right: minMaxs.maxX,\r\n            top: minMaxs.minY,\r\n            bottom: minMaxs.maxY,\r\n        };\r\n    }\r\n    else if (isCircle || clipPrefix === \"ellipse\") {\r\n        var xPos = \"\";\r\n        var yPos = \"\";\r\n        var radiusX_1 = 0;\r\n        var radiusY_1 = 0;\r\n        var values = splitSpace(value);\r\n        if (isCircle) {\r\n            var radius = \"\";\r\n            _a = __read(values, 4), _b = _a[0], radius = _b === void 0 ? \"50%\" : _b, _c = _a[2], xPos = _c === void 0 ? \"50%\" : _c, _d = _a[3], yPos = _d === void 0 ? \"50%\" : _d;\r\n            radiusX_1 = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\r\n            radiusY_1 = radiusX_1;\r\n        }\r\n        else {\r\n            var xRadius = \"\";\r\n            var yRadius = \"\";\r\n            _e = __read(values, 5), _f = _e[0], xRadius = _f === void 0 ? \"50%\" : _f, _g = _e[1], yRadius = _g === void 0 ? \"50%\" : _g, _h = _e[3], xPos = _h === void 0 ? \"50%\" : _h, _j = _e[4], yPos = _j === void 0 ? \"50%\" : _j;\r\n            radiusX_1 = convertUnitSize(xRadius, width);\r\n            radiusY_1 = convertUnitSize(yRadius, height);\r\n        }\r\n        var centerPos_1 = [\r\n            convertUnitSize(xPos, width),\r\n            convertUnitSize(yPos, height),\r\n        ];\r\n        var poses = __spreadArray([\r\n            {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: centerPos_1,\r\n                direction: \"nesw\",\r\n            }\r\n        ], __read(CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(function (dir) { return ({\r\n            vertical: abs(dir[1]),\r\n            horizontal: dir[0],\r\n            direction: dir[2],\r\n            sub: true,\r\n            pos: [\r\n                centerPos_1[0] + dir[0] * radiusX_1,\r\n                centerPos_1[1] + dir[1] * radiusY_1,\r\n            ],\r\n        }); })), false);\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            radiusX: radiusX_1,\r\n            radiusY: radiusY_1,\r\n            left: centerPos_1[0] - radiusX_1,\r\n            top: centerPos_1[1] - radiusY_1,\r\n            right: centerPos_1[0] + radiusX_1,\r\n            bottom: centerPos_1[1] + radiusY_1,\r\n            poses: poses,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"inset\") {\r\n        var values = splitSpace(value || \"0 0 0 0\");\r\n        var roundIndex = values.indexOf(\"round\");\r\n        var rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\r\n        var radiusValues = values.slice(rectLength + 1);\r\n        var _o = __read(values.slice(0, rectLength), 4), topValue = _o[0], _p = _o[1], rightValue = _p === void 0 ? topValue : _p, _q = _o[2], bottomValue = _q === void 0 ? topValue : _q, _r = _o[3], leftValue = _r === void 0 ? rightValue : _r;\r\n        var _s = __read([topValue, bottomValue].map(function (pos) { return convertUnitSize(pos, height); }), 2), top_2 = _s[0], bottom = _s[1];\r\n        var _t = __read([leftValue, rightValue].map(function (pos) { return convertUnitSize(pos, width); }), 2), left = _t[0], right = _t[1];\r\n        var nextRight = width - right;\r\n        var nextBottom = height - bottom;\r\n        var radiusPoses = getRadiusValues(radiusValues, nextRight - left, nextBottom - top_2, left, top_2);\r\n        var poses = __spreadArray(__spreadArray([], __read(getRectPoses(top_2, nextRight, nextBottom, left)), false), __read(radiusPoses), false);\r\n        return {\r\n            type: \"inset\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_2,\r\n            left: left,\r\n            right: nextRight,\r\n            bottom: nextBottom,\r\n            radius: radiusValues,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"rect\") {\r\n        // top right bottom left\r\n        var values = splitComma(value || \"0px, \".concat(width, \"px, \").concat(height, \"px, 0px\"));\r\n        splitter = \",\";\r\n        var _u = __read(values.map(function (pos) {\r\n            var posValue = splitUnit(pos).value;\r\n            return posValue;\r\n        }), 4), top_3 = _u[0], right = _u[1], bottom = _u[2], left = _u[3];\r\n        var poses = getRectPoses(top_3, right, bottom, left);\r\n        return {\r\n            type: \"rect\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_3,\r\n            right: right,\r\n            bottom: bottom,\r\n            left: left,\r\n            values: values,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    return;\r\n}\n\nfunction moveControlPos(controlPoses, index, dist, isRect, keepRatio) {\r\n    var _a = controlPoses[index], direction = _a.direction, sub = _a.sub;\r\n    var dists = controlPoses.map(function () { return [0, 0]; });\r\n    var directions = direction ? direction.split(\"\") : [];\r\n    if (isRect && index < 8) {\r\n        var verticalDirections = directions.filter(function (dir) { return dir === \"w\" || dir === \"e\"; });\r\n        var horizontalDirections = directions.filter(function (dir) { return dir === \"n\" || dir === \"s\"; });\r\n        var verticalDirection_1 = verticalDirections[0];\r\n        var horizontalDirection_1 = horizontalDirections[0];\r\n        dists[index] = dist;\r\n        var _b = __read(getControlSize(controlPoses), 2), width = _b[0], height = _b[1];\r\n        var ratio = width && height ? width / height : 0;\r\n        if (ratio && keepRatio) {\r\n            // 0 1 2\r\n            // 7   3\r\n            // 6 5 4\r\n            var fixedIndex = (index + 4) % 8;\r\n            var fixedPosition = controlPoses[fixedIndex].pos;\r\n            var sizeDirection = [0, 0];\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                sizeDirection[0] = -1;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                sizeDirection[0] = 1;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                sizeDirection[1] = -1;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                sizeDirection[1] = 1;\r\n            }\r\n            var nextDist = getSizeDistByDist([width, height], dist, ratio, sizeDirection, true);\r\n            var nextWidth = width + nextDist[0];\r\n            var nextHeight = height + nextDist[1];\r\n            var top_1 = fixedPosition[1];\r\n            var bottom = fixedPosition[1];\r\n            var left = fixedPosition[0];\r\n            var right = fixedPosition[0];\r\n            if (sizeDirection[0] === -1) {\r\n                left = right - nextWidth;\r\n            }\r\n            else if (sizeDirection[0] === 1) {\r\n                right = left + nextWidth;\r\n            }\r\n            else {\r\n                left = left - nextWidth / 2;\r\n                right = right + nextWidth / 2;\r\n            }\r\n            if (sizeDirection[1] === -1) {\r\n                top_1 = bottom - nextHeight;\r\n            }\r\n            else if (sizeDirection[1] === 1) {\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            else {\r\n                top_1 = bottom - nextHeight / 2;\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            var nextControlPoses_1 = getRectPoses(top_1, right, bottom, left);\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                dists[i][0] = nextControlPoses_1[i].pos[0] - controlPose.pos[0];\r\n                dists[i][1] = nextControlPoses_1[i].pos[1] - controlPose.pos[1];\r\n            });\r\n        }\r\n        else {\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var controlDir = controlPose.direction;\r\n                if (!controlDir) {\r\n                    return;\r\n                }\r\n                if (controlDir.indexOf(verticalDirection_1) > -1) {\r\n                    dists[i][0] = dist[0];\r\n                }\r\n                if (controlDir.indexOf(horizontalDirection_1) > -1) {\r\n                    dists[i][1] = dist[1];\r\n                }\r\n            });\r\n            if (verticalDirection_1) {\r\n                dists[1][0] = dist[0] / 2;\r\n                dists[5][0] = dist[0] / 2;\r\n            }\r\n            if (horizontalDirection_1) {\r\n                dists[3][1] = dist[1] / 2;\r\n                dists[7][1] = dist[1] / 2;\r\n            }\r\n        }\r\n    }\r\n    else if (direction && !sub) {\r\n        directions.forEach(function (dir) {\r\n            var isVertical = dir === \"n\" || dir === \"s\";\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var dirDir = controlPose.direction, dirHorizontal = controlPose.horizontal, dirVertical = controlPose.vertical;\r\n                if (!dirDir || dirDir.indexOf(dir) === -1) {\r\n                    return;\r\n                }\r\n                dists[i] = [\r\n                    isVertical || !dirHorizontal ? 0 : dist[0],\r\n                    !isVertical || !dirVertical ? 0 : dist[1],\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        dists[index] = dist;\r\n    }\r\n    return dists;\r\n}\r\nfunction addClipPath(moveable, e) {\r\n    var _a = __read(calculatePointerDist(moveable, e), 2), distX = _a[0], distY = _a[1];\r\n    var _b = e.datas, clipPath = _b.clipPath, clipIndex = _b.clipIndex;\r\n    var _c = clipPath, clipType = _c.type, clipPoses = _c.poses, splitter = _c.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    if (clipType === \"polygon\") {\r\n        poses.splice(clipIndex, 0, [distX, distY]);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        var horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var length_1 = clipPoses.length;\r\n        addRadiusPos(clipPoses, poses, 8, horizontalIndex, verticalIndex, distX, distY, poses[4][0], poses[4][1], poses[0][0], poses[0][1]);\r\n        if (length_1 === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"added\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\nfunction removeClipPath(moveable, e) {\r\n    var _a = e.datas, clipPath = _a.clipPath, clipIndex = _a.clipIndex;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses, splitter = _b.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    var length = poses.length;\r\n    if (clipType === \"polygon\") {\r\n        clipPoses.splice(clipIndex, 1);\r\n        poses.splice(clipIndex, 1);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        if (clipIndex < 8) {\r\n            return;\r\n        }\r\n        removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\r\n        if (length === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"removed\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\n/**\r\n * @namespace Moveable.Clippable\r\n * @description Whether to clip the target.\r\n */\r\nvar Clippable = {\r\n    name: \"clippable\",\r\n    props: [\r\n        \"clippable\",\r\n        \"defaultClipPath\",\r\n        \"customClipPath\",\r\n        \"keepRatio\",\r\n        \"clipRelative\",\r\n        \"clipArea\",\r\n        \"dragWithClip\",\r\n        \"clipTargetBounds\",\r\n        \"clipVerticalGuidelines\",\r\n        \"clipHorizontalGuidelines\",\r\n        \"clipSnapThreshold\",\r\n    ],\r\n    events: [\r\n        \"clipStart\",\r\n        \"clip\",\r\n        \"clipEnd\",\r\n    ],\r\n    css: [\r\n        \".control.clip-control {\\nbackground: #6d6;\\ncursor: pointer;\\n}\\n.control.clip-control.clip-radius {\\nbackground: #d66;\\n}\\n.line.clip-line {\\nbackground: #6e6;\\ncursor: move;\\nz-index: 1;\\n}\\n.clip-area {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.clip-ellipse {\\nposition: absolute;\\ncursor: move;\\nborder: 1px solid #6d6;\\nborder: var(--zoompx) solid #6d6;\\nborder-radius: 50%;\\ntransform-origin: 0px 0px;\\n}\",\r\n        \":host {\\n--bounds-color: #d66;\\n}\",\r\n        \".guideline {\\npointer-events: none;\\nz-index: 2;\\n}\",\r\n        \".line.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, customClipPath = _a.customClipPath, defaultClipPath = _a.defaultClipPath, clipArea = _a.clipArea, zoom = _a.zoom, groupable = _a.groupable;\r\n        var _b = moveable.getState(), target = _b.target, width = _b.width, height = _b.height, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4, clipPathState = _b.clipPathState, snapBoundInfos = _b.snapBoundInfos, rotationRad = _b.rotation;\r\n        if (!target || groupable) {\r\n            return [];\r\n        }\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\r\n        if (!clipPath) {\r\n            return [];\r\n        }\r\n        var n = is3d ? 4 : 3;\r\n        var type = clipPath.type;\r\n        var clipPoses = clipPath.poses;\r\n        var poses = clipPoses.map(function (pos) {\r\n            // return [x, y];\r\n            var calculatedPos = calculatePosition(allMatrix, pos.pos, n);\r\n            return [\r\n                calculatedPos[0] - left,\r\n                calculatedPos[1] - top,\r\n            ];\r\n        });\r\n        var controls = [];\r\n        var lines = [];\r\n        var isRect = type === \"rect\";\r\n        var isInset = type === \"inset\";\r\n        var isPolygon = type === \"polygon\";\r\n        if (isRect || isInset || isPolygon) {\r\n            var linePoses_1 = isInset ? poses.slice(0, 8) : poses;\r\n            lines = linePoses_1.map(function (to, i) {\r\n                var from = i === 0 ? linePoses_1[linePoses_1.length - 1] : linePoses_1[i - 1];\r\n                var rad = getRad(from, to);\r\n                var dist = getDiagonalSize(from, to);\r\n                return React.createElement(\"div\", { key: \"clipLine\".concat(i), className: prefix(\"line\", \"clip-line\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                        width: \"\".concat(dist, \"px\"),\r\n                        transform: \"translate(\".concat(from[0], \"px, \").concat(from[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                    } });\r\n            });\r\n        }\r\n        controls = poses.map(function (pos, i) {\r\n            return React.createElement(\"div\", { key: \"clipControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n        if (isInset) {\r\n            controls.push.apply(controls, __spreadArray([], __read(poses.slice(8).map(function (pos, i) {\r\n                return React.createElement(\"div\", { key: \"clipRadiusControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\"), \"data-clip-index\": 8 + i, style: {\r\n                        transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                    } });\r\n            })), false));\r\n        }\r\n        if (type === \"circle\" || type === \"ellipse\") {\r\n            var clipLeft = clipPath.left, clipTop = clipPath.top, radiusX = clipPath.radiusX, radiusY = clipPath.radiusY;\r\n            var _c = __read(minus(calculatePosition(allMatrix, [clipLeft, clipTop], n), calculatePosition(allMatrix, [0, 0], n)), 2), distLeft = _c[0], distTop = _c[1];\r\n            var ellipseClipPath = \"none\";\r\n            if (!clipArea) {\r\n                var piece = Math.max(10, radiusX / 5, radiusY / 5);\r\n                var areaPoses = [];\r\n                for (var i = 0; i <= piece; ++i) {\r\n                    var rad = Math.PI * 2 / piece * i;\r\n                    areaPoses.push([\r\n                        radiusX + (radiusX - zoom) * Math.cos(rad),\r\n                        radiusY + (radiusY - zoom) * Math.sin(rad),\r\n                    ]);\r\n                }\r\n                areaPoses.push([radiusX, -2]);\r\n                areaPoses.push([-2, -2]);\r\n                areaPoses.push([-2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, -2]);\r\n                areaPoses.push([radiusX, -2]);\r\n                ellipseClipPath = \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0], \"px \").concat(pos[1], \"px\"); }).join(\", \"), \")\");\r\n            }\r\n            controls.push(React.createElement(\"div\", { key: \"clipEllipse\", className: prefix(\"clip-ellipse\", \"snap-control\"), style: {\r\n                    width: \"\".concat(radiusX * 2, \"px\"),\r\n                    height: \"\".concat(radiusY * 2, \"px\"),\r\n                    clipPath: ellipseClipPath,\r\n                    transform: \"translate(\".concat(-left + distLeft, \"px, \").concat(-top + distTop, \"px) \").concat(makeMatrixCSS(allMatrix)),\r\n                } }));\r\n        }\r\n        if (clipArea) {\r\n            var _d = getRect(__spreadArray([pos1, pos2, pos3, pos4], __read(poses), false)), allWidth = _d.width, allHeight = _d.height, allLeft_1 = _d.left, allTop_1 = _d.top;\r\n            if (isPolygon || isRect || isInset) {\r\n                var areaPoses = isInset ? poses.slice(0, 8) : poses;\r\n                controls.push(React.createElement(\"div\", { key: \"clipArea\", className: prefix(\"clip-area\", \"snap-control\"), style: {\r\n                        width: \"\".concat(allWidth, \"px\"),\r\n                        height: \"\".concat(allHeight, \"px\"),\r\n                        transform: \"translate(\".concat(allLeft_1, \"px, \").concat(allTop_1, \"px)\"),\r\n                        clipPath: \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0] - allLeft_1, \"px \").concat(pos[1] - allTop_1, \"px\"); }).join(\", \"), \")\"),\r\n                    } }));\r\n            }\r\n        }\r\n        if (snapBoundInfos) {\r\n            [\"vertical\", \"horizontal\"].forEach(function (directionType) {\r\n                var info = snapBoundInfos[directionType];\r\n                var isHorizontal = directionType === \"horizontal\";\r\n                if (info.isSnap) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.snap.posInfos.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"snap\").concat(i), \"guideline\");\r\n                    })), false));\r\n                }\r\n                if (info.isBound) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.bounds.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"bounds\").concat(i), \"guideline\", \"bounds\", \"bold\");\r\n                    })), false));\r\n                }\r\n            });\r\n        }\r\n        return __spreadArray(__spreadArray([], __read(controls), false), __read(lines), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.dragWithClip, dragWithClip = _a === void 0 ? true : _a;\r\n        if (dragWithClip) {\r\n            return false;\r\n        }\r\n        return this.dragControlStart(moveable, e);\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.dragControl(moveable, __assign(__assign({}, e), { isDragTarget: true }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return this.dragControlEnd(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var state = moveable.state;\r\n        var _a = moveable.props, defaultClipPath = _a.defaultClipPath, customClipPath = _a.customClipPath;\r\n        var target = state.target, width = state.width, height = state.height;\r\n        var inputTarget = e.inputEvent ? e.inputEvent.target : null;\r\n        var className = (inputTarget && inputTarget.getAttribute(\"class\")) || \"\";\r\n        var datas = e.datas;\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", customClipPath);\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var clipText = clipPath.clipText, type = clipPath.type, poses = clipPath.poses;\r\n        var result = triggerEvent(moveable, \"onClipStart\", fillParams(moveable, e, {\r\n            clipType: type,\r\n            clipStyle: clipText,\r\n            poses: poses.map(function (pos) { return pos.pos; }),\r\n        }));\r\n        if (result === false) {\r\n            datas.isClipStart = false;\r\n            return false;\r\n        }\r\n        datas.isControl = className && className.indexOf(\"clip-control\") > -1;\r\n        datas.isLine = className.indexOf(\"clip-line\") > -1;\r\n        datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\r\n        datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\r\n        datas.clipPath = clipPath;\r\n        datas.isClipStart = true;\r\n        state.clipPathState = clipText;\r\n        setDragStart(moveable, e);\r\n        return true;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, originalDatas = e.originalDatas, isDragTarget = e.isDragTarget;\r\n        if (!datas.isClipStart) {\r\n            return false;\r\n        }\r\n        var _d = datas, isControl = _d.isControl, isLine = _d.isLine, isArea = _d.isArea, clipIndex = _d.clipIndex, clipPath = _d.clipPath;\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var props = getProps(moveable.props, \"clippable\");\r\n        var keepRatio = props.keepRatio;\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var originalDraggable = originalDatas.draggable;\r\n        var originalDist = getDragDist(e);\r\n        if (isDragTarget && originalDraggable) {\r\n            _a = __read(originalDraggable.prevBeforeDist, 2), distX = _a[0], distY = _a[1];\r\n        }\r\n        else {\r\n            _b = __read(originalDist, 2), distX = _b[0], distY = _b[1];\r\n        }\r\n        var firstDist = [distX, distY];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        var isDragWithTarget = !isArea && !isControl && !isLine;\r\n        var clipType = clipPath.type, clipPoses = clipPath.poses, splitter = clipPath.splitter;\r\n        var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n        if (isDragWithTarget) {\r\n            distX = -distX;\r\n            distY = -distY;\r\n        }\r\n        var isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\r\n        var isRect = clipType === \"inset\" || clipType === \"rect\";\r\n        var dists = clipPoses.map(function () { return [0, 0]; });\r\n        if (isControl && !isAll) {\r\n            var _e = clipPoses[clipIndex], horizontal = _e.horizontal, vertical = _e.vertical;\r\n            var dist = [\r\n                distX * abs(horizontal),\r\n                distY * abs(vertical),\r\n            ];\r\n            dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\r\n        }\r\n        else if (isAll) {\r\n            dists = poses.map(function () { return [distX, distY]; });\r\n        }\r\n        var nextPoses = poses.map(function (pos, i) { return plus(pos, dists[i]); });\r\n        var guidePoses = __spreadArray([], __read(nextPoses), false);\r\n        state.snapBoundInfos = null;\r\n        var isCircle = clipPath.type === \"circle\";\r\n        var isEllipse = clipPath.type === \"ellipse\";\r\n        if (isCircle || isEllipse) {\r\n            var guideRect = getRect(nextPoses);\r\n            var ry = abs(guideRect.bottom - guideRect.top);\r\n            var rx = abs(isEllipse ? guideRect.right - guideRect.left : ry);\r\n            var bottom = nextPoses[0][1] + ry;\r\n            var left = nextPoses[0][0] - rx;\r\n            var right = nextPoses[0][0] + rx;\r\n            // right\r\n            if (isCircle) {\r\n                guidePoses.push([right, guideRect.bottom]);\r\n                dists.push([1, 0]);\r\n            }\r\n            // bottom\r\n            guidePoses.push([guideRect.left, bottom]);\r\n            dists.push([0, 1]);\r\n            // left\r\n            guidePoses.push([left, guideRect.bottom]);\r\n            dists.push([1, 0]);\r\n        }\r\n        var guidelines = getDefaultGuidelines((props.clipHorizontalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), height); }), (props.clipVerticalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), width); }), width, height);\r\n        var guideXPoses = [];\r\n        var guideYPoses = [];\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            var rectDists_1 = [dists[0], dists[2], dists[4], dists[6]];\r\n            guideXPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.filter(function (_, i) { return dists[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.filter(function (_, i) { return dists[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        var boundDelta = [0, 0];\r\n        var _f = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 5, 5), horizontalSnapInfo = _f.horizontal, verticalSnapInfo = _f.vertical;\r\n        var snapOffsetY = horizontalSnapInfo.offset;\r\n        var snapOffsetX = verticalSnapInfo.offset;\r\n        if (horizontalSnapInfo.isBound) {\r\n            boundDelta[1] += snapOffsetY;\r\n        }\r\n        if (verticalSnapInfo.isBound) {\r\n            boundDelta[0] += snapOffsetX;\r\n        }\r\n        if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\r\n            var guideRect = getRect(nextPoses);\r\n            var cy = guideRect.bottom - guideRect.top;\r\n            var cx = isEllipse ? guideRect.right - guideRect.left : cy;\r\n            var distSnapX = verticalSnapInfo.isBound\r\n                ? abs(snapOffsetX)\r\n                : (verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX);\r\n            var distSnapY = horizontalSnapInfo.isBound\r\n                ? abs(snapOffsetY)\r\n                : (horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY);\r\n            cx -= distSnapX;\r\n            cy -= distSnapY;\r\n            if (isCircle) {\r\n                cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\r\n                cx = cy;\r\n            }\r\n            var center = guidePoses[0];\r\n            guidePoses[1][1] = center[1] - cy;\r\n            guidePoses[2][0] = center[0] + cx;\r\n            guidePoses[3][1] = center[1] + cy;\r\n            guidePoses[4][0] = center[0] - cx;\r\n        }\r\n        else if (isRect && keepRatio && isControl) {\r\n            var _g = __read(getControlSize(clipPoses), 2), width_1 = _g[0], height_1 = _g[1];\r\n            var ratio = width_1 && height_1 ? width_1 / height_1 : 0;\r\n            var clipPose = clipPoses[clipIndex];\r\n            var direction = clipPose.direction || \"\";\r\n            var top_2 = guidePoses[1][1];\r\n            var bottom = guidePoses[5][1];\r\n            var left = guidePoses[7][0];\r\n            var right = guidePoses[3][0];\r\n            if (abs(snapOffsetY) <= abs(snapOffsetX)) {\r\n                snapOffsetY = sign(snapOffsetY) * abs(snapOffsetX) / ratio;\r\n            }\r\n            else {\r\n                snapOffsetX = sign(snapOffsetX) * abs(snapOffsetY) * ratio;\r\n            }\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                left -= snapOffsetX;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                right -= snapOffsetX;\r\n            }\r\n            else {\r\n                left += snapOffsetX / 2;\r\n                right -= snapOffsetX / 2;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                top_2 -= snapOffsetY;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                bottom -= snapOffsetY;\r\n            }\r\n            else {\r\n                top_2 += snapOffsetY / 2;\r\n                bottom -= snapOffsetY / 2;\r\n            }\r\n            var nextControlPoses_2 = getRectPoses(top_2, right, bottom, left);\r\n            guidePoses.forEach(function (pos, i) {\r\n                var _a;\r\n                _a = __read(nextControlPoses_2[i].pos, 2), pos[0] = _a[0], pos[1] = _a[1];\r\n            });\r\n        }\r\n        else {\r\n            guidePoses.forEach(function (pos, j) {\r\n                var dist = dists[j];\r\n                if (dist[0]) {\r\n                    pos[0] -= snapOffsetX;\r\n                }\r\n                if (dist[1]) {\r\n                    pos[1] -= snapOffsetY;\r\n                }\r\n            });\r\n        }\r\n        var nextClipStyles = getClipStyles(moveable, clipPath, nextPoses);\r\n        var clipStyle = \"\".concat(clipType, \"(\").concat(nextClipStyles.join(splitter), \")\");\r\n        state.clipPathState = clipStyle;\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            guideXPoses = rectPoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        state.snapBoundInfos = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 1, 1);\r\n        if (originalDraggable) {\r\n            var is3d = state.is3d, allMatrix = state.allMatrix;\r\n            var n = is3d ? 4 : 3;\r\n            var dragDist = boundDelta;\r\n            if (isDragTarget) {\r\n                dragDist = [\r\n                    firstDist[0] + boundDelta[0] - originalDist[0],\r\n                    firstDist[1] + boundDelta[1] - originalDist[1],\r\n                ];\r\n            }\r\n            originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\r\n        }\r\n        triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"changed\", clipType: clipType, poses: nextPoses, clipStyle: clipStyle, clipStyles: nextClipStyles, distX: distX, distY: distY }, fillCSSObject((_c = {},\r\n            _c[clipType === \"rect\" ? \"clip\" : \"clipPath\"] = clipStyle,\r\n            _c), e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.unset(moveable);\r\n        var isDrag = e.isDrag, datas = e.datas, isDouble = e.isDouble;\r\n        var isLine = datas.isLine, isClipStart = datas.isClipStart, isControl = datas.isControl;\r\n        if (!isClipStart) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onClipEnd\", fillEndParams(moveable, e, {}));\r\n        if (isDouble) {\r\n            if (isControl) {\r\n                removeClipPath(moveable, e);\r\n            }\r\n            else if (isLine) {\r\n                // add\r\n                addClipPath(moveable, e);\r\n            }\r\n        }\r\n        return isDouble || isDrag;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.clipPathState = \"\";\r\n        moveable.state.snapBoundInfos = null;\r\n    },\r\n};\r\n/**\r\n * Whether to clip the target. (default: false)\r\n * @name Moveable.Clippable#clippable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#defaultClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\r\n * @name Moveable.Clippable#clipRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#customClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When dragging the target, the clip also moves. (default: true)\r\n * @name Moveable.Clippable#dragWithClip\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can drag the clip by setting clipArea.\r\n * @name Moveable.Clippable#clipArea\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n* Whether the clip is bound to the target.\r\n* @name Moveable.Clippable#clipTargetBounds\r\n* @default false\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipTargetBounds: true,\r\n* });\r\n* moveable.on(\"clipStart\", e => {\r\n*     console.log(e);\r\n* }).on(\"clip\", e => {\r\n*     if (e.clipType === \"rect\") {\r\n*         e.target.style.clip = e.clipStyle;\r\n*     } else {\r\n*         e.target.style.clipPath = e.clipStyle;\r\n*     }\r\n* }).on(\"clipEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n * Add clip guidelines in the vertical direction.\r\n * @name Moveable.Clippable#clipVerticalGuidelines\r\n * @default 0\r\n * @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* Add clip guidelines in the horizontal direction.\r\n* @name Moveable.Clippable#clipHorizontalGuidelines\r\n* @default []\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* istance value that can snap to clip guidelines.\r\n* @name Moveable.Clippable#clipSnapThreshold\r\n* @default 5\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n * When drag start the clip area or controls, the `clipStart` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipStart\r\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag the clip area or controls, the `clip` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clip\r\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the clip area or controls, the `clipEnd` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipEnd\r\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\n/**\r\n * @namespace OriginDraggable\r\n * @memberof Moveable\r\n * @description Whether to drag origin (default: false)\r\n */\r\nvar OriginDraggable = {\r\n    name: \"originDraggable\",\r\n    props: [\r\n        \"originDraggable\",\r\n        \"originRelative\",\r\n    ],\r\n    events: [\r\n        \"dragOriginStart\",\r\n        \"dragOrigin\",\r\n        \"dragOriginEnd\",\r\n    ],\r\n    css: [\r\n        \":host[data-able-origindraggable] .control.origin {\\npointer-events: auto;\\n}\",\r\n    ],\r\n    dragControlCondition: function (_, e) {\r\n        if (e.isRequest) {\r\n            return e.requestAble === \"originDraggable\";\r\n        }\r\n        return hasClass(e.inputEvent.target, prefix(\"origin\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        setDragStart(moveable, e);\r\n        var params = fillParams(moveable, e, {\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = triggerEvent(moveable, \"onDragOriginStart\", params);\r\n        datas.startOrigin = moveable.state.transformOrigin;\r\n        datas.startTargetOrigin = moveable.state.targetOrigin;\r\n        datas.prevOrigin = [0, 0];\r\n        datas.isDragOrigin = true;\r\n        if (result === false) {\r\n            datas.isDragOrigin = false;\r\n            return false;\r\n        }\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, is3d = state.is3d;\r\n        var _b = moveable.props.originRelative, originRelative = _b === void 0 ? true : _b;\r\n        var n = is3d ? 4 : 3;\r\n        var dist = [distX, distY];\r\n        if (isRequest) {\r\n            var distOrigin = e.distOrigin;\r\n            if (distOrigin[0] || distOrigin[1]) {\r\n                dist = distOrigin;\r\n            }\r\n        }\r\n        var origin = plus(datas.startOrigin, dist);\r\n        var targetOrigin = plus(datas.startTargetOrigin, dist);\r\n        var delta = minus(dist, datas.prevOrigin);\r\n        var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, origin, n);\r\n        var rect = moveable.getRect();\r\n        var nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\r\n        var dragDelta = [\r\n            rect.left - nextRect.left,\r\n            rect.top - nextRect.top,\r\n        ];\r\n        datas.prevOrigin = dist;\r\n        var transformOrigin = [\r\n            convertCSSSize(targetOrigin[0], width, originRelative),\r\n            convertCSSSize(targetOrigin[1], height, originRelative),\r\n        ].join(\" \");\r\n        var result = Draggable.drag(moveable, setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false));\r\n        var params = fillParams(moveable, e, __assign(__assign({ width: width, height: height, origin: origin, dist: dist, delta: delta, transformOrigin: transformOrigin, drag: result }, fillCSSObject({\r\n            transformOrigin: transformOrigin,\r\n            transform: result.transform,\r\n        }, e)), { afterTransform: result.transform }));\r\n        triggerEvent(moveable, \"onDragOrigin\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onDragOriginEnd\", fillEndParams(moveable, e, {}));\r\n        return true;\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        moveable.transformOrigin = params.transformOrigin;\r\n        return true;\r\n    },\r\n    /**\r\n    * @method Moveable.OriginDraggable#request\r\n    * @param {object} e - the OriginDraggable's request parameter\r\n    * @param {number} [e.x] - x position\r\n    * @param {number} [e.y] - y position\r\n    * @param {number} [e.deltaX] - x number to move\r\n    * @param {number} [e.deltaY] - y number to move\r\n    * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\r\n    * @param {array} [e.origin] - transform-origin position\r\n    * @param {number} [e.isInstant] - Whether to execute the request instantly\r\n    * @return {Moveable.Requester} Moveable Requester\r\n    * @example\r\n\n    * // Instantly Request (requestStart - request - requestEnd)\r\n    * // Use Relative Value\r\n    * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\r\n    * // Use Transform Value\r\n    * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\r\n    * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\r\n    * // requestStart\r\n    * const requester = moveable.request(\"originDraggable\");\r\n    *\r\n    * // request\r\n    * // Use Relative Value\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 220, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 240, y: 100 });\r\n    *\r\n    * // requestEnd\r\n    * requester.requestEnd();\r\n    */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var transformOrigin = rect.transformOrigin;\r\n        var distOrigin = [0, 0];\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaOrigin\" in e) {\r\n                    distOrigin[0] += e.deltaOrigin[0];\r\n                    distOrigin[1] += e.deltaOrigin[1];\r\n                }\r\n                else if (\"origin\" in e) {\r\n                    distOrigin[0] = e.origin[0] - transformOrigin[0];\r\n                    distOrigin[1] = e.origin[1] - transformOrigin[1];\r\n                }\r\n                else {\r\n                    if (\"x\" in e) {\r\n                        distX = e.x - rect.left;\r\n                    }\r\n                    else if (\"deltaX\" in e) {\r\n                        distX += e.deltaX;\r\n                    }\r\n                    if (\"y\" in e) {\r\n                        distY = e.y - rect.top;\r\n                    }\r\n                    else if (\"deltaY\" in e) {\r\n                        distY += e.deltaY;\r\n                    }\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, distOrigin: distOrigin };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether to drag origin (default: false)\r\n * @name Moveable.OriginDraggable#originDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n * });\r\n * let translate = [0, 0];\r\n * moveable.on(\"dragOriginStart\", e => {\r\n *     e.dragStart && e.dragStart.set(translate);\r\n * }).on(\"dragOrigin\", e => {\r\n *     translate = e.drag.beforeTranslate;\r\n *     e.target.style.cssText\r\n *         = `transform-origin: ${e.transformOrigin};`\r\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n * }).on(\"dragOriginEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (default: true)\r\n * @name Moveable.OriginDraggable#originRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n *     originRelative: false,\r\n * });\r\n * moveable.originRelative = true;\r\n */\r\n/**\r\n* When drag start the origin, the `dragOriginStart` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginStart\r\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag the origin, the `dragOrigin` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOrigin\r\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag end the origin, the `dragOriginEnd` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginEnd\r\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\n\nfunction addBorderRadiusByLine(controlPoses, lineIndex, distX, distY) {\r\n    // lineIndex\r\n    // 0 top\r\n    // 1 right\r\n    // 2 bottom\r\n    // 3 left\r\n    var horizontalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, horizontal = _a.horizontal;\r\n        return horizontal && !virtual;\r\n    }).length;\r\n    var verticalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, vertical = _a.vertical;\r\n        return vertical && !virtual;\r\n    }).length;\r\n    var controlIndex = -1;\r\n    //top\r\n    if (lineIndex === 0) {\r\n        if (horizontalsLength === 0) {\r\n            controlIndex = 0;\r\n        }\r\n        else if (horizontalsLength === 1) {\r\n            controlIndex = 1;\r\n        }\r\n    }\r\n    // bottom\r\n    if (lineIndex === 2) {\r\n        if (horizontalsLength <= 2) {\r\n            controlIndex = 2;\r\n        }\r\n        else if (horizontalsLength <= 3) {\r\n            controlIndex = 3;\r\n        }\r\n    }\r\n    // left\r\n    if (lineIndex === 3) {\r\n        if (verticalsLength === 0) {\r\n            controlIndex = 4;\r\n        }\r\n        else if (verticalsLength < 4) {\r\n            controlIndex = 7;\r\n        }\r\n    }\r\n    // right\r\n    if (lineIndex === 1) {\r\n        if (verticalsLength <= 1) {\r\n            controlIndex = 5;\r\n        }\r\n        else if (verticalsLength <= 2) {\r\n            controlIndex = 6;\r\n        }\r\n    }\r\n    if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\r\n        return;\r\n    }\r\n    var controlPoseInfo = controlPoses[controlIndex];\r\n    addBorderRadius(controlPoses, controlIndex);\r\n    if (controlIndex < 4) {\r\n        controlPoseInfo.pos[0] = distX;\r\n    }\r\n    else {\r\n        controlPoseInfo.pos[1] = distY;\r\n    }\r\n}\r\nfunction addBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(0, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n    else {\r\n        if (controlPoses[0].virtual) {\r\n            controlPoses[0].virtual = false;\r\n        }\r\n        controlPoses.slice(4, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n}\r\nfunction removeBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(index, 4).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n    else {\r\n        controlPoses.slice(index).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n}\r\nfunction getBorderRadius(borderRadius, width, height, minCounts, full) {\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    var values = [];\r\n    if (!borderRadius || borderRadius === \"0px\") {\r\n        values = [];\r\n    }\r\n    else {\r\n        values = splitSpace(borderRadius);\r\n    }\r\n    return getRadiusValues(values, width, height, 0, 0, minCounts, full);\r\n}\r\nfunction triggerRoundEvent(moveable, e, dist, delta, nextPoses) {\r\n    var state = moveable.state;\r\n    var width = state.width, height = state.height;\r\n    var _a = getRadiusStyles(nextPoses, moveable.props.roundRelative, width, height), raws = _a.raws, styles = _a.styles, radiusPoses = _a.radiusPoses;\r\n    var _b = splitRadiusPoses(radiusPoses, raws), horizontals = _b.horizontals, verticals = _b.verticals;\r\n    var borderRadius = styles.join(\" \");\r\n    state.borderRadiusState = borderRadius;\r\n    var params = fillParams(moveable, e, __assign({ horizontals: horizontals, verticals: verticals, borderRadius: borderRadius, width: width, height: height, delta: delta, dist: dist }, fillCSSObject({\r\n        borderRadius: borderRadius,\r\n    }, e)));\r\n    triggerEvent(moveable, \"onRound\", params);\r\n    return params;\r\n}\r\nfunction getStyleBorderRadius(moveable) {\r\n    var _a, _b;\r\n    var style = moveable.getState().style;\r\n    var borderRadius = style.borderRadius || \"\";\r\n    if (!borderRadius && moveable.props.groupable) {\r\n        var firstMoveable = moveable.moveables[0];\r\n        var firstTarget = moveable.getTargets()[0];\r\n        if (firstTarget) {\r\n            if ((firstMoveable === null || firstMoveable === void 0 ? void 0 : firstMoveable.props.target) === firstTarget) {\r\n                borderRadius = (_b = (_a = moveable.moveables[0]) === null || _a === void 0 ? void 0 : _a.state.style.borderRadius) !== null && _b !== void 0 ? _b : \"\";\r\n                style.borderRadius = borderRadius;\r\n            }\r\n            else {\r\n                borderRadius = getComputedStyle(firstTarget).borderRadius;\r\n                style.borderRadius = borderRadius;\r\n            }\r\n        }\r\n    }\r\n    return borderRadius;\r\n}\r\n/**\r\n * @namespace Moveable.Roundable\r\n * @description Whether to show and drag or double click border-radius\r\n */\r\nvar Roundable = {\r\n    name: \"roundable\",\r\n    props: [\r\n        \"roundable\",\r\n        \"roundRelative\",\r\n        \"minRoundControls\",\r\n        \"maxRoundControls\",\r\n        \"roundClickable\",\r\n        \"roundPadding\",\r\n        \"isDisplayShadowRoundControls\",\r\n    ],\r\n    events: [\r\n        \"roundStart\",\r\n        \"round\",\r\n        \"roundEnd\",\r\n        \"roundGroupStart\",\r\n        \"roundGroup\",\r\n        \"roundGroupEnd\",\r\n    ],\r\n    css: [\r\n        \".control.border-radius {\\nbackground: #d66;\\ncursor: pointer;\\nz-index: 3;\\n}\",\r\n        \".control.border-radius.vertical {\\nbackground: #d6d;\\nz-index: 2;\\n}\",\r\n        \".control.border-radius.virtual {\\nopacity: 0.5;\\nz-index: 1;\\n}\",\r\n        \":host.round-line-clickable .line.direction {\\ncursor: pointer;\\n}\",\r\n    ],\r\n    className: function (moveable) {\r\n        var roundClickable = moveable.props.roundClickable;\r\n        return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\r\n    },\r\n    requestStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.getState(), target = _a.target, width = _a.width, height = _a.height, allMatrix = _a.allMatrix, is3d = _a.is3d, left = _a.left, top = _a.top, borderRadiusState = _a.borderRadiusState;\r\n        var _b = moveable.props, _c = _b.minRoundControls, minRoundControls = _c === void 0 ? [0, 0] : _c, _d = _b.maxRoundControls, maxRoundControls = _d === void 0 ? [4, 4] : _d, zoom = _b.zoom, _e = _b.roundPadding, roundPadding = _e === void 0 ? 0 : _e, isDisplayShadowRoundControls = _b.isDisplayShadowRoundControls, groupable = _b.groupable;\r\n        if (!target) {\r\n            return null;\r\n        }\r\n        var borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\r\n        var n = is3d ? 4 : 3;\r\n        var radiusValues = getBorderRadius(borderRadius, width, height, minRoundControls, true);\r\n        if (!radiusValues) {\r\n            return null;\r\n        }\r\n        var verticalCount = 0;\r\n        var horizontalCount = 0;\r\n        var basePos = groupable ? [0, 0] : [left, top];\r\n        return radiusValues.map(function (v, i) {\r\n            var horizontal = v.horizontal;\r\n            var vertical = v.vertical;\r\n            var direction = v.direction || \"\";\r\n            var originalPos = __spreadArray([], __read(v.pos), false);\r\n            horizontalCount += Math.abs(horizontal);\r\n            verticalCount += Math.abs(vertical);\r\n            if (horizontal && direction.indexOf(\"n\") > -1) {\r\n                originalPos[1] -= roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"w\") > -1) {\r\n                originalPos[0] -= roundPadding;\r\n            }\r\n            if (horizontal && direction.indexOf(\"s\") > -1) {\r\n                originalPos[1] += roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"e\") > -1) {\r\n                originalPos[0] += roundPadding;\r\n            }\r\n            var pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\r\n            var isDisplayVerticalShadow = isDisplayShadowRoundControls\r\n                && isDisplayShadowRoundControls !== \"horizontal\";\r\n            var isDisplay = v.vertical\r\n                ? verticalCount <= maxRoundControls[1] && (isDisplayVerticalShadow || !v.virtual)\r\n                : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\r\n            return React.createElement(\"div\", { key: \"borderRadiusControl\".concat(i), className: prefix(\"control\", \"border-radius\", v.vertical ? \"vertical\" : \"\", v.virtual ? \"virtual\" : \"\"), \"data-radius-index\": i, style: {\r\n                    display: isDisplay ? \"block\" : \"none\",\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (!e.inputEvent || e.isRequest) {\r\n            return false;\r\n        }\r\n        var className = (e.inputEvent.target.getAttribute(\"class\") || \"\");\r\n        return className.indexOf(\"border-radius\") > -1\r\n            || (className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1);\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        var inputTarget = inputEvent.target;\r\n        var className = (inputTarget.getAttribute(\"class\") || \"\");\r\n        var isControl = className.indexOf(\"border-radius\") > -1;\r\n        var isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\r\n        var controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\r\n        var lineIndex = -1;\r\n        if (isLine) {\r\n            var indexAttr = inputTarget.getAttribute(\"data-line-key\") || \"\";\r\n            if (indexAttr) {\r\n                lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\r\n                if (isNaN(lineIndex)) {\r\n                    lineIndex = -1;\r\n                }\r\n            }\r\n        }\r\n        if (!isControl && !isLine) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, {});\r\n        var result = triggerEvent(moveable, \"onRoundStart\", params);\r\n        if (result === false) {\r\n            return false;\r\n        }\r\n        datas.lineIndex = lineIndex;\r\n        datas.controlIndex = controlIndex;\r\n        datas.isControl = isControl;\r\n        datas.isLine = isLine;\r\n        setDragStart(moveable, e);\r\n        var _a = moveable.props, roundRelative = _a.roundRelative, _b = _a.minRoundControls, minRoundControls = _b === void 0 ? [0, 0] : _b;\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        datas.isRound = true;\r\n        datas.prevDist = [0, 0];\r\n        var borderRadius = getStyleBorderRadius(moveable);\r\n        var controlPoses = getBorderRadius(borderRadius || \"\", width, height, minRoundControls, true) || [];\r\n        datas.controlPoses = controlPoses;\r\n        state.borderRadiusState = getRadiusStyles(controlPoses, roundRelative, width, height).styles.join(\" \");\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var controlPoses = datas.controlPoses;\r\n        if (!datas.isRound || !datas.isControl || !controlPoses.length) {\r\n            return false;\r\n        }\r\n        var index = datas.controlIndex;\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var dist = [distX, distY];\r\n        var delta = minus(dist, datas.prevDist);\r\n        var _b = moveable.props.maxRoundControls, maxRoundControls = _b === void 0 ? [4, 4] : _b;\r\n        var _c = moveable.state, width = _c.width, height = _c.height;\r\n        var selectedControlPose = controlPoses[index];\r\n        var selectedVertical = selectedControlPose.vertical;\r\n        var selectedHorizontal = selectedControlPose.horizontal;\r\n        // 0: [0, 1, 2, 3] maxCount === 1\r\n        // 0: [0, 2] maxCount === 2\r\n        // 1: [1, 3] maxCount === 2\r\n        // 0: [0] maxCount === 3\r\n        // 1: [1, 3] maxCount === 3\r\n        var dists = controlPoses.map(function (pose) {\r\n            var horizontal = pose.horizontal, vertical = pose.vertical;\r\n            var poseDist = [\r\n                horizontal * selectedHorizontal * dist[0],\r\n                vertical * selectedVertical * dist[1],\r\n            ];\r\n            if (horizontal) {\r\n                if (maxRoundControls[0] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            else if (maxRoundControls[1] === 0) {\r\n                poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\r\n                return poseDist;\r\n            }\r\n            else if (selectedVertical) {\r\n                if (maxRoundControls[1] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            return [0, 0];\r\n        });\r\n        dists[index] = dist;\r\n        var nextPoses = controlPoses.map(function (info, i) {\r\n            return __assign(__assign({}, info), { pos: plus(info.pos, dists[i]) });\r\n        });\r\n        if (index < 4) {\r\n            nextPoses.slice(0, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        else {\r\n            nextPoses.slice(4, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        datas.prevDist = [distX, distY];\r\n        return triggerRoundEvent(moveable, e, dist, delta, nextPoses);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var state = moveable.state;\r\n        state.borderRadiusState = \"\";\r\n        var datas = e.datas, isDouble = e.isDouble;\r\n        if (!datas.isRound) {\r\n            return false;\r\n        }\r\n        var isControl = datas.isControl, controlIndex = datas.controlIndex, isLine = datas.isLine, lineIndex = datas.lineIndex;\r\n        var controlPoses = datas.controlPoses;\r\n        var length = controlPoses.filter(function (_a) {\r\n            var virtual = _a.virtual;\r\n            return virtual;\r\n        }).length;\r\n        var _a = moveable.props.roundClickable, roundClickable = _a === void 0 ? true : _a;\r\n        if (isDouble && roundClickable) {\r\n            if (isControl && (roundClickable === true || roundClickable === \"control\")) {\r\n                removeBorderRadius(controlPoses, controlIndex);\r\n            }\r\n            else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\r\n                var _b = __read(calculatePointerDist(moveable, e), 2), distX = _b[0], distY = _b[1];\r\n                addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\r\n            }\r\n            if (length !== controlPoses.filter(function (_a) {\r\n                var virtual = _a.virtual;\r\n                return virtual;\r\n            }).length) {\r\n                triggerRoundEvent(moveable, e, [0, 0], [0, 0], controlPoses);\r\n            }\r\n        }\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRoundEnd\", params);\r\n        state.borderRadiusState = \"\";\r\n        return params;\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var result = this.dragControlStart(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\r\n        return result;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var result = this.dragControl(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                    borderRadius: result.borderRadius,\r\n                }, ev));\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        catchEvent(moveable, \"onRound\", function (parentEvent) {\r\n            var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                    return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                        borderRadius: parentEvent.borderRadius,\r\n                    }, ev));\r\n                }) }, parentEvent);\r\n            triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        });\r\n        var result = this.dragControlEnd(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                var _a;\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i], lastEvent: (_a = ev.datas) === null || _a === void 0 ? void 0 : _a.lastEvent });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\r\n        return nextParams;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.borderRadiusState = \"\";\r\n    },\r\n};\r\n/**\r\n * Whether to show and drag or double click border-radius, (default: false)\r\n * @name Moveable.Roundable#roundable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px\r\n * @name Moveable.Roundable#roundRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\r\n * @name Moveable.Roundable#minRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     minRoundControls: [0, 0],\r\n * });\r\n * moveable.minRoundControls = [1, 0];\r\n */\r\n/**\r\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\r\n * @name Moveable.Roundable#maxRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     maxRoundControls: [4, 4],\r\n * });\r\n * moveable.maxRoundControls = [1, 0];\r\n */\r\n/**\r\n * Whether you can add/delete round controls by double-clicking a line or control.\r\n * @name Moveable.Roundable#roundClickable\r\n * @default true\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     roundClickable: true,\r\n * });\r\n * moveable.roundClickable = false;\r\n */\r\n/**\r\n * Whether to show a round control that does not actually exist as a shadow\r\n * @name Moveable.Roundable#isDisplayShadowRoundControls\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     isDisplayShadowRoundControls: false,\r\n * });\r\n * moveable.isDisplayShadowRoundControls = true;\r\n */\r\n/**\r\n * The padding value of the position of the round control\r\n * @name Moveable.Roundable#roundPadding\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundPadding: 0,\r\n * });\r\n * moveable.roundPadding = 15;\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundStart\r\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `round` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event round\r\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundEnd\r\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupStart\r\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `roundGroup` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroup\r\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupEnd\r\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *     e.events.forEach(ev => {\r\n *         ev.target.style.cssText += ev.cssText;\r\n *     });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\nfunction isIdentityMatrix(matrix, is3d) {\r\n    var n = is3d ? 4 : 3;\r\n    var identityMatrix = createIdentityMatrix(n);\r\n    var value = \"matrix\".concat(is3d ? \"3d\" : \"\", \"(\").concat(identityMatrix.join(\",\"), \")\");\r\n    return matrix === value || matrix === \"matrix(1,0,0,1,0,0)\";\r\n}\r\nvar BeforeRenderable = {\r\n    isPinch: true,\r\n    name: \"beforeRenderable\",\r\n    props: [],\r\n    events: [\r\n        \"beforeRenderStart\",\r\n        \"beforeRender\",\r\n        \"beforeRenderEnd\",\r\n        \"beforeRenderGroupStart\",\r\n        \"beforeRenderGroup\",\r\n        \"beforeRenderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    setTransform: function (moveable, e) {\r\n        var _a = moveable.state, is3d = _a.is3d, targetMatrix = _a.targetMatrix, inlineTransform = _a.inlineTransform;\r\n        var cssMatrix = is3d\r\n            ? \"matrix3d(\".concat(targetMatrix.join(\",\"), \")\")\r\n            : \"matrix(\".concat(convertMatrixtoCSS(targetMatrix, true), \")\");\r\n        var startTransform = !inlineTransform || inlineTransform === \"none\" ? cssMatrix : inlineTransform;\r\n        e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\r\n    },\r\n    resetStyle: function (e) {\r\n        var datas = e.datas;\r\n        datas.nextStyle = {};\r\n        datas.nextTransforms = e.datas.startTransforms;\r\n        datas.nextTransformAppendedIndexes = [];\r\n    },\r\n    fillDragStartParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            setTransform: function (transform) {\r\n                e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            },\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        this.setTransform(moveable, e);\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRenderStart\", this.fillDragStartParams(moveable, e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n        }\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRender\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n            this.resetStyle(e);\r\n        }\r\n        triggerEvent(moveable, \"onBeforeRenderEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n        }));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _this = this;\r\n        this.dragStart(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.setTransform(childMoveable, childEvent);\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragStartParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            setTransform: function () { },\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        this.drag(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroup\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n        triggerEvent(moveable, \"onBeforeRenderGroupEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n};\n\nvar Renderable = {\r\n    name: \"renderable\",\r\n    props: [],\r\n    events: [\r\n        \"renderStart\",\r\n        \"render\",\r\n        \"renderEnd\",\r\n        \"renderGroupStart\",\r\n        \"renderGroup\",\r\n        \"renderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    dragStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    drag: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRender\", this.fillDragParams(moveable, e));\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderEnd\", this.fillDragEndParams(moveable, e));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroup\", fillParams(moveable, e, __assign(__assign({ isPinch: !!e.isPinch, targets: moveable.props.targets, transform: getNextTransformText(e), transformObject: {} }, fillCSSObject(getNextStyle(e))), { events: params })));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragEndParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroupEnd\", fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, targets: moveable.props.targets, events: params, transformObject: {}, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e)))));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        return this.dragAfter(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n    fillDragEndParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n};\n\nfunction triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e, requestInstant) {\r\n    // pre setting\r\n    e.clientDistX = e.distX;\r\n    e.clientDistY = e.distY;\r\n    var isStart = eventType === \"Start\";\r\n    var isEnd = eventType === \"End\";\r\n    var isAfter = eventType === \"After\";\r\n    var target = moveable.state.target;\r\n    var isRequest = e.isRequest;\r\n    var isControl = eventAffix.indexOf(\"Control\") > -1;\r\n    if (!target\r\n        || (isStart && isControl && !isRequest && moveable.areaElement === e.inputEvent.target)) {\r\n        return false;\r\n    }\r\n    var ables = __spreadArray([], __read(moveableAbles), false);\r\n    if (isRequest) {\r\n        var requestAble_1 = e.requestAble;\r\n        if (!ables.some(function (able) { return able.name === requestAble_1; })) {\r\n            ables.push.apply(ables, __spreadArray([], __read(moveable.props.ables.filter(function (able) { return able.name === requestAble_1; })), false));\r\n        }\r\n    }\r\n    if (!ables.length || ables.every(function (able) { return able.dragRelation; })) {\r\n        return false;\r\n    }\r\n    // \"drag\" \"Control\" \"After\"\r\n    var inputEvent = e.inputEvent;\r\n    var inputTarget;\r\n    if (isEnd && inputEvent) {\r\n        inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\r\n    }\r\n    var isDragStop = false;\r\n    var stop = function () {\r\n        var _a;\r\n        isDragStop = true;\r\n        (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n    };\r\n    var isFirstStart = isStart && (!moveable.targetGesto || !moveable.controlGesto\r\n        || (!moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag()));\r\n    if (isFirstStart) {\r\n        moveable.updateRect(eventType, true, false);\r\n    }\r\n    // trigger ables\r\n    var datas = e.datas;\r\n    var gestoType = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var prevGesto = moveable[gestoType];\r\n    var trigger = function (able, eventName, conditionName) {\r\n        if (!(eventName in able) || prevGesto !== moveable[gestoType]) {\r\n            return false;\r\n        }\r\n        var ableName = able.name;\r\n        var nextDatas = datas[ableName] || (datas[ableName] = {});\r\n        if (isStart) {\r\n            nextDatas.isEventStart = !conditionName\r\n                || !able[conditionName] || able[conditionName](moveable, e);\r\n        }\r\n        if (!nextDatas.isEventStart) {\r\n            return false;\r\n        }\r\n        var result = able[eventName](moveable, __assign(__assign({}, e), { stop: stop, datas: nextDatas, originalDatas: datas, inputTarget: inputTarget }));\r\n        moveable._emitter.off();\r\n        if (isStart && result === false) {\r\n            nextDatas.isEventStart = false;\r\n        }\r\n        return result;\r\n    };\r\n    // unset ables for first drag start\r\n    if (isFirstStart) {\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    // BeforeRenderable\r\n    trigger(BeforeRenderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    var forceEndedCount = 0;\r\n    var updatedCount = 0;\r\n    eventOperations.forEach(function (eventOperation) {\r\n        if (isDragStop) {\r\n            return false;\r\n        }\r\n        var eventName = \"\".concat(eventOperation).concat(eventAffix).concat(eventType);\r\n        var conditionName = \"\".concat(eventOperation).concat(eventAffix, \"Condition\");\r\n        if (eventType === \"\" && !isRequest) {\r\n            // Convert distX, distY\r\n            convertDragDist(moveable.state, e);\r\n        }\r\n        // const isGroup = eventAffix.indexOf(\"Group\") > -1;\r\n        var eventAbles = ables.filter(function (able) { return able[eventName]; });\r\n        eventAbles = eventAbles.filter(function (able, i) {\r\n            return able.name && eventAbles.indexOf(able) === i;\r\n        });\r\n        var results = eventAbles.filter(function (able) { return trigger(able, eventName, conditionName); });\r\n        var isUpdate = results.length;\r\n        // end ables\r\n        if (isDragStop) {\r\n            ++forceEndedCount;\r\n        }\r\n        if (isUpdate) {\r\n            ++updatedCount;\r\n        }\r\n        if (!isDragStop && isStart && eventAbles.length && !isUpdate) {\r\n            forceEndedCount += eventAbles.filter(function (able) {\r\n                var ableName = able.name;\r\n                var nextDatas = datas[ableName];\r\n                if (nextDatas.isEventStart) {\r\n                    if (able.dragRelation === \"strong\") {\r\n                        return false;\r\n                    }\r\n                    // stop drag\r\n                    return true;\r\n                }\r\n                // pre stop drag\r\n                return false;\r\n            }).length ? 1 : 0;\r\n        }\r\n    });\r\n    if (!isAfter || updatedCount) {\r\n        trigger(Renderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    }\r\n    // stop gesto condition\r\n    var isForceEnd = prevGesto !== moveable[gestoType] || forceEndedCount === eventOperations.length;\r\n    if (isEnd || isDragStop || isForceEnd) {\r\n        moveable.state.gestos = {};\r\n        if (moveable.moveables) {\r\n            moveable.moveables.forEach(function (childMoveable) {\r\n                childMoveable.state.gestos = {};\r\n            });\r\n        }\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    if (isStart && !isForceEnd && !isRequest && updatedCount && moveable.props.preventDefault) {\r\n        e === null || e === void 0 ? void 0 : e.preventDefault();\r\n    }\r\n    if (moveable.isUnmounted || isForceEnd) {\r\n        return false;\r\n    }\r\n    if ((!isStart && updatedCount && !requestInstant) || isEnd) {\r\n        var flushSync = moveable.props.flushSync || defaultSync;\r\n        flushSync(function () {\r\n            moveable.updateRect(isEnd ? eventType : \"\", true, false);\r\n            moveable.forceUpdate();\r\n        });\r\n    }\r\n    if (!isStart && !isEnd && !isAfter && updatedCount && !requestInstant) {\r\n        triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType + \"After\", e);\r\n    }\r\n    return true;\r\n}\r\nfunction checkMoveableTarget(moveable, isControl) {\r\n    return function (e, target) {\r\n        var _a;\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        var eventTarget = target;\r\n        var areaElement = moveable.areaElement;\r\n        var dragTargetElement = moveable._dragTarget;\r\n        if (!dragTargetElement || (!isControl && ((_a = moveable.controlGesto) === null || _a === void 0 ? void 0 : _a.isFlag()))) {\r\n            return false;\r\n        }\r\n        return eventTarget === dragTargetElement\r\n            || dragTargetElement.contains(eventTarget)\r\n            || eventTarget === areaElement\r\n            || (!moveable.isMoveableElement(eventTarget) && !moveable.controlBox.contains(eventTarget))\r\n            || hasClass(eventTarget, \"moveable-area\")\r\n            || hasClass(eventTarget, \"moveable-padding\")\r\n            || hasClass(eventTarget, \"moveable-edgeDraggable\");\r\n    };\r\n}\r\nfunction getTargetAbleGesto(moveable, moveableTarget, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    var props = moveable.props;\r\n    var dragArea = props.dragArea;\r\n    var target = moveable.state.target;\r\n    var dragTarget = props.dragTarget;\r\n    targets.push(controlBox);\r\n    if (!dragArea || dragTarget) {\r\n        targets.push(moveableTarget);\r\n    }\r\n    if (!dragArea && dragTarget && target && moveableTarget !== target && props.dragTargetSelf) {\r\n        targets.push(target);\r\n    }\r\n    var checkTarget = checkMoveableTarget(moveable);\r\n    return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\r\n        dragStart: checkTarget,\r\n        pinchStart: checkTarget,\r\n    });\r\n}\r\nfunction getControlAbleGesto(moveable, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    targets.push(controlBox);\r\n    var checkTarget = checkMoveableTarget(moveable, true);\r\n    var checkControlTarget = function (e, target) {\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        if (target === controlBox) {\r\n            return true;\r\n        }\r\n        var result = checkTarget(e, target);\r\n        return !result;\r\n    };\r\n    return getAbleGesto(moveable, targets, \"controlAbles\", eventAffix, {\r\n        dragStart: checkControlTarget,\r\n        pinchStart: checkControlTarget,\r\n    });\r\n}\r\nfunction getAbleGesto(moveable, target, ableType, eventAffix, conditionFunctions) {\r\n    if (conditionFunctions === void 0) { conditionFunctions = {}; }\r\n    var isTargetAbles = ableType === \"targetAbles\";\r\n    var _a = moveable.props, pinchOutside = _a.pinchOutside, pinchThreshold = _a.pinchThreshold, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickDefault = _a.preventClickDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, _b = _a.preventDefault, preventDefault = _b === void 0 ? true : _b, _c = _a.preventRightClick, preventRightClick = _c === void 0 ? true : _c, _d = _a.preventWheelClick, preventWheelClick = _d === void 0 ? true : _d, dragContaienrOption = _a.dragContainer;\r\n    var dragContainer = getRefTarget(dragContaienrOption, true);\r\n    var options = {\r\n        preventDefault: preventDefault,\r\n        preventRightClick: preventRightClick,\r\n        preventWheelClick: preventWheelClick,\r\n        container: dragContainer || getWindow(moveable.getControlBoxElement()),\r\n        pinchThreshold: pinchThreshold,\r\n        pinchOutside: pinchOutside,\r\n        preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\r\n        preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\r\n        preventClickEventByCondition: isTargetAbles ? null : function (e) {\r\n            return moveable.controlBox.contains(e.target);\r\n        },\r\n        checkInput: isTargetAbles ? checkInput : false,\r\n        dragFocusedInput: dragFocusedInput,\r\n    };\r\n    var gesto = new Gesto(target, options);\r\n    var isControl = eventAffix === \"Control\";\r\n    [\"drag\", \"pinch\"].forEach(function (eventOperation) {\r\n        [\"Start\", \"\", \"End\"].forEach(function (eventType) {\r\n            gesto.on(\"\".concat(eventOperation).concat(eventType), function (e) {\r\n                var _a;\r\n                var eventName = e.eventType;\r\n                var isPinchScheduled = eventOperation === \"drag\" && e.isPinch;\r\n                if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\r\n                    e.stop();\r\n                    return;\r\n                }\r\n                if (isPinchScheduled) {\r\n                    return;\r\n                }\r\n                var eventOperations = eventOperation === \"drag\" ? [eventOperation] : [\"drag\", eventOperation];\r\n                var moveableAbles = __spreadArray([], __read(moveable[ableType]), false);\r\n                var result = triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e);\r\n                if (!result) {\r\n                    e.stop();\r\n                }\r\n                else if (moveable.props.stopPropagation || (eventType === \"Start\" && isControl)) {\r\n                    (_a = e === null || e === void 0 ? void 0 : e.inputEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\r\n                }\r\n            });\r\n        });\r\n    });\r\n    return gesto;\r\n}\n\nvar EventManager = /*#__PURE__*/ (function () {\r\n    function EventManager(target, moveable, eventName) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.moveable = moveable;\r\n        this.eventName = eventName;\r\n        this.ables = [];\r\n        this._onEvent = function (e) {\r\n            var eventName = _this.eventName;\r\n            var moveable = _this.moveable;\r\n            if (moveable.state.disableNativeEvent) {\r\n                return;\r\n            }\r\n            _this.ables.forEach(function (able) {\r\n                able[eventName](moveable, {\r\n                    inputEvent: e,\r\n                });\r\n            });\r\n        };\r\n        target.addEventListener(eventName.toLowerCase(), this._onEvent);\r\n    }\r\n    EventManager.prototype.setAbles = function (ables) {\r\n        this.ables = ables;\r\n    };\r\n    EventManager.prototype.destroy = function () {\r\n        this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\r\n        this.target = null;\r\n        this.moveable = null;\r\n    };\r\n    return EventManager;\r\n}());\n\nfunction calculateMatrixStack(target, container, rootContainer, isAbsolute3d) {\r\n    var _a;\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var _b = getMatrixStackInfo(target, container), matrixes = _b.matrixes, is3d = _b.is3d, prevTargetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin, targetOrigin = _b.targetOrigin, offsetContainer = _b.offsetContainer, hasFixed = _b.hasFixed, containerZoom = _b.zoom; // prevMatrix\r\n    var _c = getCachedMatrixContainerInfo(offsetContainer, rootContainer), rootMatrixes = _c.matrixes, isRoot3d = _c.is3d, offsetRootContainer = _c.offsetContainer, rootZoom = _c.zoom; // prevRootMatrix\r\n    // if (rootContainer === document.body) {\r\n    //     console.log(offsetContainer, rootContainer, rootMatrixes);\r\n    // }\r\n    var isNext3d = isAbsolute3d || isRoot3d || is3d;\r\n    var n = isNext3d ? 4 : 3;\r\n    var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\r\n    var targetMatrix = prevTargetMatrix;\r\n    // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    var allMatrix = createIdentityMatrix(n);\r\n    var rootMatrix = createIdentityMatrix(n);\r\n    var beforeMatrix = createIdentityMatrix(n);\r\n    var offsetMatrix = createIdentityMatrix(n);\r\n    var length = matrixes.length;\r\n    var nextRootMatrixes = rootMatrixes.map(function (info) {\r\n        return __assign(__assign({}, info), { matrix: info.matrix ? __spreadArray([], __read(info.matrix), false) : undefined });\r\n    }).reverse();\r\n    matrixes.reverse();\r\n    if (!is3d && isNext3d) {\r\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n        convert3DMatrixes(matrixes);\r\n    }\r\n    if (!isRoot3d && isNext3d) {\r\n        convert3DMatrixes(nextRootMatrixes);\r\n    }\r\n    // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\r\n    // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\r\n    // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\r\n    // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\r\n    nextRootMatrixes.forEach(function (info) {\r\n        rootMatrix = multiply(rootMatrix, info.matrix, n);\r\n    });\r\n    var originalRootContainer = rootContainer || getDocumentBody(target);\r\n    var endContainer = ((_a = nextRootMatrixes[0]) === null || _a === void 0 ? void 0 : _a.target)\r\n        || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\r\n    var rootMatrixBeforeOffset = nextRootMatrixes.slice(1).reduce(function (matrix, info) {\r\n        return multiply(matrix, info.matrix, n);\r\n    }, createIdentityMatrix(n));\r\n    matrixes.forEach(function (info, i) {\r\n        if (length - 2 === i) {\r\n            // length - 3\r\n            beforeMatrix = allMatrix.slice();\r\n        }\r\n        if (length - 1 === i) {\r\n            // length - 2\r\n            offsetMatrix = allMatrix.slice();\r\n        }\r\n        // calculate for SVGElement\r\n        if (!info.matrix) {\r\n            var nextInfo = matrixes[i + 1];\r\n            var offset = getSVGOffset(info, nextInfo, endContainer, n, multiply(rootMatrixBeforeOffset, allMatrix, n));\r\n            info.matrix = createOriginMatrix(offset, n);\r\n        }\r\n        allMatrix = multiply(allMatrix, info.matrix, n);\r\n    });\r\n    var isMatrix3d = !isSVGGraphicElement && is3d;\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\r\n    }\r\n    var targetTransform = makeMatrixCSS(isSVGGraphicElement && targetMatrix.length === 16\r\n        ? convertDimension(targetMatrix, 4, 3) : targetMatrix, isMatrix3d);\r\n    var originalRootMatrix = rootMatrix;\r\n    rootMatrix = ignoreDimension(rootMatrix, n, n);\r\n    return {\r\n        hasZoom: containerZoom !== 1 || rootZoom !== 1,\r\n        hasFixed: hasFixed,\r\n        matrixes: matrixes,\r\n        rootMatrix: rootMatrix,\r\n        originalRootMatrix: originalRootMatrix,\r\n        beforeMatrix: beforeMatrix,\r\n        offsetMatrix: offsetMatrix,\r\n        allMatrix: allMatrix,\r\n        targetMatrix: targetMatrix,\r\n        targetTransform: targetTransform,\r\n        inlineTransform: target.style.transform,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetOrigin,\r\n        is3d: isNext3d,\r\n        offsetContainer: offsetContainer,\r\n        offsetRootContainer: offsetRootContainer,\r\n    };\r\n}\n\nfunction calculateElementInfo(target, container, rootContainer, isAbsolute3d) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var width = 0;\r\n    var height = 0;\r\n    var rotation = 0;\r\n    var allResult = {};\r\n    var sizes = getSize(target);\r\n    if (target) {\r\n        width = sizes.offsetWidth;\r\n        height = sizes.offsetHeight;\r\n    }\r\n    if (target) {\r\n        var result = calculateMatrixStack(target, container, rootContainer, isAbsolute3d);\r\n        var position = calculateElementPosition(result.allMatrix, result.transformOrigin, width, height);\r\n        allResult = __assign(__assign({}, result), position);\r\n        var rotationPosition = calculateElementPosition(result.allMatrix, [50, 50], 100, 100);\r\n        rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\r\n    }\r\n    var n = isAbsolute3d ? 4 : 3;\r\n    return __assign(__assign(__assign({ hasZoom: false, width: width, height: height, rotation: rotation }, sizes), { originalRootMatrix: createIdentityMatrix(n), rootMatrix: createIdentityMatrix(n), beforeMatrix: createIdentityMatrix(n), offsetMatrix: createIdentityMatrix(n), allMatrix: createIdentityMatrix(n), targetMatrix: createIdentityMatrix(n), targetTransform: \"\", inlineTransform: \"\", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !!isAbsolute3d, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: false, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), allResult);\r\n}\r\nfunction getElementInfo(target, container, rootContainer) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    return calculateElementInfo(target, container, rootContainer, true);\r\n}\n\nfunction getMoveableTargetInfo(moveableElement, target, container, parentContainer, rootContainer, requestStyles) {\r\n    if (requestStyles === void 0) { requestStyles = []; }\r\n    var beforeDirection = 1;\r\n    var beforeOrigin = [0, 0];\r\n    var targetClientRect = resetClientRect();\r\n    var moveableClientRect = resetClientRect();\r\n    var containerClientRect = resetClientRect();\r\n    var rootContainerClientRect = resetClientRect();\r\n    var offsetDelta = [0, 0];\r\n    var style = {};\r\n    var result = calculateElementInfo(target, container, rootContainer, true);\r\n    if (target) {\r\n        var getStyle_1 = getCachedStyle(target);\r\n        requestStyles.forEach(function (name) {\r\n            style[name] = getStyle_1(name);\r\n        });\r\n        var n = result.is3d ? 4 : 3;\r\n        var beforePosition = calculateElementPosition(result.offsetMatrix, plus(result.transformOrigin, getOrigin(result.targetMatrix, n)), result.width, result.height);\r\n        beforeDirection = beforePosition.direction;\r\n        beforeOrigin = plus(beforePosition.origin, [beforePosition.left - result.left, beforePosition.top - result.top]);\r\n        rootContainerClientRect = getClientRect(result.offsetRootContainer);\r\n        var offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent\r\n            || result.offsetRootContainer;\r\n        if (result.hasZoom) {\r\n            var absoluteTargetPosition = calculateElementPosition(multiply(result.originalRootMatrix, result.allMatrix), result.transformOrigin, result.width, result.height);\r\n            var absoluteContainerPosition = calculateElementPosition(result.originalRootMatrix, getTransformOriginArray(getCachedStyle(offsetContainer)(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); }), offsetContainer.offsetWidth, offsetContainer.offsetHeight);\r\n            targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\r\n            containerClientRect = getClientRectByPosition(absoluteContainerPosition, rootContainerClientRect, offsetContainer, true);\r\n            if (moveableElement) {\r\n                var left = absoluteTargetPosition.left;\r\n                var top_1 = absoluteTargetPosition.top;\r\n                moveableClientRect = getClientRectByPosition({\r\n                    left: left,\r\n                    top: top_1,\r\n                    bottom: top_1,\r\n                    right: top_1,\r\n                }, rootContainerClientRect);\r\n            }\r\n        }\r\n        else {\r\n            targetClientRect = getClientRect(target);\r\n            containerClientRect = getCachedClientRect(offsetContainer);\r\n            if (moveableElement) {\r\n                moveableClientRect = getClientRect(moveableElement);\r\n            }\r\n            var containerClientRectLeft = containerClientRect.left, containerClientRectTop = containerClientRect.top, containterClientLeft = containerClientRect.clientLeft, containerClientTop = containerClientRect.clientTop;\r\n            var clientDelta = [\r\n                targetClientRect.left - containerClientRectLeft,\r\n                targetClientRect.top - containerClientRectTop,\r\n            ];\r\n            offsetDelta = minus(calculateInversePosition(result.rootMatrix, clientDelta, 4), [containterClientLeft + result.left, containerClientTop + result.top]);\r\n        }\r\n    }\r\n    return __assign({ targetClientRect: targetClientRect, containerClientRect: containerClientRect, moveableClientRect: moveableClientRect, rootContainerClientRect: rootContainerClientRect, beforeDirection: beforeDirection, beforeOrigin: beforeOrigin, originalBeforeOrigin: beforeOrigin, target: target, style: style, offsetDelta: offsetDelta }, result);\r\n}\n\nfunction getPersistState(rect) {\r\n    var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4;\r\n    if (!pos1 || !pos2 || !pos3 || !pos4) {\r\n        return null;\r\n    }\r\n    var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n    var posDelta = [minPos.minX, minPos.minY];\r\n    var origin = minus(rect.origin, posDelta);\r\n    pos1 = minus(pos1, posDelta);\r\n    pos2 = minus(pos2, posDelta);\r\n    pos3 = minus(pos3, posDelta);\r\n    pos4 = minus(pos4, posDelta);\r\n    return __assign(__assign({}, rect), { left: rect.left, top: rect.top, posDelta: posDelta, pos1: pos1, pos2: pos2, pos3: pos3, pos4: pos4, origin: origin, beforeOrigin: origin, \r\n        // originalBeforeOrigin: origin,\r\n        isPersisted: true });\r\n}\n\nvar MoveableManager = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableManager, _super);\r\n    function MoveableManager() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = __assign({ container: null, gestos: {}, renderLines: [\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n            ], renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: false, posDelta: [0, 0] }, getMoveableTargetInfo(null));\r\n        _this.renderState = {};\r\n        _this.enabledAbles = [];\r\n        _this.targetAbles = [];\r\n        _this.controlAbles = [];\r\n        _this.rotation = 0;\r\n        _this.scale = [1, 1];\r\n        _this.isMoveableMounted = false;\r\n        _this.isUnmounted = false;\r\n        _this.events = {\r\n            \"mouseEnter\": null,\r\n            \"mouseLeave\": null,\r\n        };\r\n        _this._emitter = new EventEmitter();\r\n        _this._prevOriginalDragTarget = null;\r\n        _this._originalDragTarget = null;\r\n        _this._prevDragTarget = null;\r\n        _this._dragTarget = null;\r\n        _this._prevPropTarget = null;\r\n        _this._propTarget = null;\r\n        _this._prevDragArea = false;\r\n        _this._isPropTargetChanged = false;\r\n        _this._hasFirstTarget = false;\r\n        _this._reiszeObserver = null;\r\n        _this._observerId = 0;\r\n        _this._mutationObserver = null;\r\n        _this._rootContainer = null;\r\n        _this._viewContainer = null;\r\n        _this._viewClassNames = [];\r\n        _this._store = {};\r\n        _this.checkUpdateRect = function () {\r\n            if (_this.isDragging()) {\r\n                return;\r\n            }\r\n            var parentMoveable = _this.props.parentMoveable;\r\n            if (parentMoveable) {\r\n                parentMoveable.checkUpdateRect();\r\n                return;\r\n            }\r\n            cancelAnimationFrame(_this._observerId);\r\n            _this._observerId = requestAnimationFrame(function () {\r\n                if (_this.isDragging()) {\r\n                    return;\r\n                }\r\n                _this.updateRect();\r\n            });\r\n        };\r\n        _this._onPreventClick = function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            // removeEvent(window, \"click\", this._onPreventClick, true);\r\n        };\r\n        return _this;\r\n    }\r\n    MoveableManager.prototype.render = function () {\r\n        var props = this.props;\r\n        var state = this.getState();\r\n        var parentPosition = props.parentPosition, className = props.className, propsTarget = props.target, zoom = props.zoom, cspNonce = props.cspNonce, translateZ = props.translateZ, ControlBoxElement = props.cssStyled, groupable = props.groupable, linePadding = props.linePadding, controlPadding = props.controlPadding;\r\n        this._checkUpdateRootContainer();\r\n        this.checkUpdate();\r\n        this.updateRenderPoses();\r\n        var _a = __read(parentPosition || [0, 0], 2), parentLeft = _a[0], parentTop = _a[1];\r\n        var left = state.left, top = state.top, stateTarget = state.target, direction = state.direction, hasFixed = state.hasFixed, offsetDelta = state.offsetDelta;\r\n        var groupTargets = props.targets;\r\n        var isDragging = this.isDragging();\r\n        var ableAttributes = {};\r\n        this.getEnabledAbles().forEach(function (able) {\r\n            ableAttributes[\"data-able-\".concat(able.name.toLowerCase())] = true;\r\n        });\r\n        var ableClassName = this._getAbleClassName();\r\n        var isDisplay = (groupTargets && groupTargets.length && (stateTarget || groupable))\r\n            || propsTarget\r\n            || (!this._hasFirstTarget && this.state.isPersisted);\r\n        var isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\r\n        var translate = [left - parentLeft, top - parentTop];\r\n        if (!groupable && props.useAccuratePosition) {\r\n            translate[0] += offsetDelta[0];\r\n            translate[1] += offsetDelta[1];\r\n        }\r\n        var style = {\r\n            \"position\": hasFixed ? \"fixed\" : \"absolute\",\r\n            \"display\": isDisplay ? \"block\" : \"none\",\r\n            \"visibility\": isVisible ? \"visible\" : \"hidden\",\r\n            \"transform\": \"translate3d(\".concat(translate[0], \"px, \").concat(translate[1], \"px, \").concat(translateZ, \")\"),\r\n            \"--zoom\": zoom,\r\n            \"--zoompx\": \"\".concat(zoom, \"px\"),\r\n        };\r\n        if (linePadding) {\r\n            style[\"--moveable-line-padding\"] = linePadding;\r\n        }\r\n        if (controlPadding) {\r\n            style[\"--moveable-control-padding\"] = controlPadding;\r\n        }\r\n        return (React.createElement(ControlBoxElement, __assign({ cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: \"\".concat(prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\"), \" \").concat(ableClassName, \" \").concat(className) }, ableAttributes, { onClick: this._onPreventClick, style: style }),\r\n            this.renderAbles(),\r\n            this._renderLines()));\r\n    };\r\n    MoveableManager.prototype.componentDidMount = function () {\r\n        this.isMoveableMounted = true;\r\n        this.isUnmounted = false;\r\n        var props = this.props;\r\n        var parentMoveable = props.parentMoveable, container = props.container;\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateTargets();\r\n        this._updateNativeEvents();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(this.props);\r\n        if (!container && !parentMoveable && !this.state.isPersisted) {\r\n            this.updateRect(\"\", false, false);\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    MoveableManager.prototype.componentDidUpdate = function (prevProps) {\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateNativeEvents();\r\n        this._updateTargets();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype.componentWillUnmount = function () {\r\n        var _a, _b;\r\n        this.isMoveableMounted = false;\r\n        this.isUnmounted = true;\r\n        this._emitter.off();\r\n        (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n        (_b = this._mutationObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames([]);\r\n        }\r\n        unsetGesto(this, false);\r\n        unsetGesto(this, true);\r\n        var events = this.events;\r\n        for (var name_1 in events) {\r\n            var manager = events[name_1];\r\n            manager && manager.destroy();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getTargets = function () {\r\n        var target = this.props.target;\r\n        return target ? [target] : [];\r\n    };\r\n    /**\r\n     * Get the able used in MoveableManager.\r\n     * @method Moveable#getAble\r\n     * @param - able name\r\n     */\r\n    MoveableManager.prototype.getAble = function (ableName) {\r\n        var ables = this.props.ables || [];\r\n        return find(ables, function (able) { return able.name === ableName; });\r\n    };\r\n    MoveableManager.prototype.getContainer = function () {\r\n        var _a = this.props, parentMoveable = _a.parentMoveable, wrapperMoveable = _a.wrapperMoveable, container = _a.container;\r\n        return container\r\n            || (wrapperMoveable && wrapperMoveable.getContainer())\r\n            || (parentMoveable && parentMoveable.getContainer())\r\n            || this.controlBox.parentElement;\r\n    };\r\n    /**\r\n     * Returns the element of the control box.\r\n     * @method Moveable#getControlBoxElement\r\n     */\r\n    MoveableManager.prototype.getControlBoxElement = function () {\r\n        return this.controlBox;\r\n    };\r\n    /**\r\n     * Target element to be dragged in moveable\r\n     * @method Moveable#getDragElement\r\n     */\r\n    MoveableManager.prototype.getDragElement = function () {\r\n        return this._dragTarget;\r\n    };\r\n    /**\r\n     * Check if the target is an element included in the moveable.\r\n     * @method Moveable#isMoveableElement\r\n     * @param - the target\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"click\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *         moveable.target = e.target;\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isMoveableElement = function (target) {\r\n        var _a;\r\n        return target && (((_a = target.getAttribute) === null || _a === void 0 ? void 0 : _a.call(target, \"class\")) || \"\").indexOf(PREFIX) > -1;\r\n    };\r\n    /**\r\n     * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\r\n     * @method Moveable#dragStart\r\n     * @param - external `MouseEvent`or `TouchEvent`\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *          moveable.dragStart(e);\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto && checkMoveableTarget(this)({ inputEvent: e }, target)) {\r\n            if (!targetGesto.isFlag()) {\r\n                targetGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        else if (controlGesto && this.isMoveableElement(target)) {\r\n            if (!controlGesto.isFlag()) {\r\n                controlGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Hit test an element or rect on a moveable target.\r\n     * (100% = 100)\r\n     * @method Moveable#hitTest\r\n     * @param - element or rect to test\r\n     * @return - Get hit test rate (rate > 0 is hitted)\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.hitTest(e.target) > 0) {\r\n     *          console.log(\"hiited\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.hitTest = function (el) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return 0;\r\n        }\r\n        var rect;\r\n        if (isNode(el)) {\r\n            var clientRect = el.getBoundingClientRect();\r\n            rect = {\r\n                left: clientRect.left,\r\n                top: clientRect.top,\r\n                width: clientRect.width,\r\n                height: clientRect.height,\r\n            };\r\n        }\r\n        else {\r\n            rect = __assign({ width: 0, height: 0 }, el);\r\n        }\r\n        var rectLeft = rect.left, rectTop = rect.top, rectWidth = rect.width, rectHeight = rect.height;\r\n        var points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\r\n        var size = getOverlapSize(points, [\r\n            [rectLeft, rectTop],\r\n            [rectLeft + rectWidth, rectTop],\r\n            [rectLeft + rectWidth, rectTop + rectHeight],\r\n            [rectLeft, rectTop + rectHeight],\r\n        ]);\r\n        var totalSize = getAreaSize(points);\r\n        if (!size || !totalSize) {\r\n            return 0;\r\n        }\r\n        return Math.min(100, size / totalSize * 100);\r\n    };\r\n    /**\r\n     * Whether the coordinates are inside Moveable\r\n     * @method Moveable#isInside\r\n     * @param - x coordinate\r\n     * @param - y coordinate\r\n     * @return - True if the coordinate is in moveable or false\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.isInside(e.clientX, e.clientY)) {\r\n     *          console.log(\"inside\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isInside = function (clientX, clientY) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return false;\r\n        }\r\n        return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of all elements change, update the shape of the moveable.\r\n     * @method Moveable#updateRect\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"resize\", e => {\r\n     *     moveable.updateRect();\r\n     * });\r\n     */\r\n    MoveableManager.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var props = this.props;\r\n        var isSingle = !props.parentPosition && !props.wrapperMoveable;\r\n        if (isSingle) {\r\n            setStoreCache(true);\r\n        }\r\n        var parentMoveable = props.parentMoveable;\r\n        var state = this.state;\r\n        var target = (state.target || props.target);\r\n        var container = this.getContainer();\r\n        var rootContainer = parentMoveable\r\n            ? parentMoveable._rootContainer\r\n            : this._rootContainer;\r\n        var nextState = getMoveableTargetInfo(this.controlBox, target, container, container, rootContainer || container, this._getRequestStyles());\r\n        if (!target && this._hasFirstTarget && props.persistData) {\r\n            var persistState = getPersistState(props.persistData);\r\n            for (var name_2 in persistState) {\r\n                nextState[name_2] = persistState[name_2];\r\n            }\r\n        }\r\n        if (isSingle) {\r\n            setStoreCache();\r\n        }\r\n        this.updateState(nextState, parentMoveable ? false : isSetState);\r\n    };\r\n    /**\r\n     * Check if the moveable state is being dragged.\r\n     * @method Moveable#isDragging\r\n     * @param - If you want to check if able is dragging, specify ableName.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // false\r\n     * console.log(moveable.isDragging());\r\n     *\r\n     * moveable.on(\"drag\", () => {\r\n     *   // true\r\n     *   console.log(moveable.isDragging());\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isDragging = function (ableName) {\r\n        var _a, _b;\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = targetGesto.getEventData();\r\n            return !!((_a = data[ableName]) === null || _a === void 0 ? void 0 : _a.isEventStart);\r\n        }\r\n        if (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = controlGesto.getEventData();\r\n            return !!((_b = data[ableName]) === null || _b === void 0 ? void 0 : _b.isEventStart);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of the only target change, update the shape of the moveable.\r\n     * Use `.updateRect()` method\r\n     * @method Moveable#updateTarget\r\n     * @deprecated\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.updateTarget();\r\n     */\r\n    MoveableManager.prototype.updateTarget = function (type) {\r\n        this.updateRect(type, true);\r\n    };\r\n    /**\r\n     * You can get the vertex information, position and offset size information of the target based on the container.\r\n     * @method Moveable#getRect\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const rectInfo = moveable.getRect();\r\n     */\r\n    MoveableManager.prototype.getRect = function () {\r\n        var state = this.state;\r\n        var poses = getAbsolutePosesByState(this.state);\r\n        var _a = __read(poses, 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        var rect = getRect(poses);\r\n        var offsetWidth = state.width, offsetHeight = state.height;\r\n        var width = rect.width, height = rect.height, left = rect.left, top = rect.top;\r\n        var statePos = [state.left, state.top];\r\n        var origin = plus(statePos, state.origin);\r\n        var beforeOrigin = plus(statePos, state.beforeOrigin);\r\n        var transformOrigin = state.transformOrigin;\r\n        return {\r\n            width: width,\r\n            height: height,\r\n            left: left,\r\n            top: top,\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            offsetWidth: offsetWidth,\r\n            offsetHeight: offsetHeight,\r\n            beforeOrigin: beforeOrigin,\r\n            origin: origin,\r\n            transformOrigin: transformOrigin,\r\n            rotation: this.getRotation(),\r\n        };\r\n    };\r\n    /**\r\n     * Get a manager that manages the moveable's state and props.\r\n     * @method Moveable#getManager\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const manager = moveable.getManager(); // real moveable class instance\r\n     */\r\n    MoveableManager.prototype.getManager = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * You can stop the dragging currently in progress through a method from outside.\r\n     * @method Moveable#stopDrag\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.stopDrag();\r\n     */\r\n    MoveableManager.prototype.stopDrag = function (type) {\r\n        if (!type || type === \"target\") {\r\n            var gesto = this.targetGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, false);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n        if (!type || type === \"control\") {\r\n            var gesto = this.controlGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, true);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getRotation = function () {\r\n        var _a = this.state, pos1 = _a.pos1, pos2 = _a.pos2, direction = _a.direction;\r\n        return getAbsoluteRotation(pos1, pos2, direction);\r\n    };\r\n    /**\r\n     * Request able through a method rather than an event.\r\n     * At the moment of execution, requestStart is executed,\r\n     * and then request and requestEnd can be executed through Requester.\r\n     * @method Moveable#request\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\r\n     * @param - ableName\r\n     * @param - request to be able params.\r\n     * @param - If isInstant is true, request and requestEnd are executed immediately.\r\n     * @return - Able Requester. If there is no request in able, nothing will work.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     *\r\n     * // Start move\r\n     * const requester = moveable.request(\"draggable\");\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.requestEnd();\r\n     */\r\n    MoveableManager.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var self = this;\r\n        var props = self.props;\r\n        var manager = props.parentMoveable || props.wrapperMoveable || self;\r\n        var allAbles = manager.props.ables;\r\n        var groupable = props.groupable;\r\n        var requsetAble = find(allAbles, function (able) { return able.name === ableName; });\r\n        if (this.isDragging() || !requsetAble || !requsetAble.request) {\r\n            return {\r\n                request: function () {\r\n                    return this;\r\n                },\r\n                requestEnd: function () {\r\n                    return this;\r\n                },\r\n            };\r\n        }\r\n        var ableRequester = requsetAble.request(self);\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\r\n        var eventAffix = \"\".concat((groupable ? \"Group\" : \"\")).concat(ableRequester.isControl ? \"Control\" : \"\");\r\n        var moveableAbles = __spreadArray([], __read(manager[ableType]), false);\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"\", __assign(__assign({}, ableRequester.request(ableParam)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n            requestEnd: function () {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"End\", __assign(__assign({}, ableRequester.requestEnd()), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n        };\r\n        triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"Start\", __assign(__assign({}, ableRequester.requestStart(param)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    /**\r\n     * moveable is the top level that manages targets\r\n     * `Single`: MoveableManager instance\r\n     * `Group`: MoveableGroup instance\r\n     * `IndividualGroup`: MoveableIndividaulGroup instance\r\n     * Returns leaf target MoveableManagers.\r\n     */\r\n    MoveableManager.prototype.getMoveables = function () {\r\n        return [this];\r\n    };\r\n    /**\r\n     * Remove the Moveable object and the events.\r\n     * @method Moveable#destroy\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.destroy();\r\n     */\r\n    MoveableManager.prototype.destroy = function () {\r\n        this.componentWillUnmount();\r\n    };\r\n    MoveableManager.prototype.updateRenderPoses = function () {\r\n        var state = this.getState();\r\n        var props = this.props;\r\n        var padding = props.padding;\r\n        var originalBeforeOrigin = state.originalBeforeOrigin, transformOrigin = state.transformOrigin, allMatrix = state.allMatrix, is3d = state.is3d, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, stateLeft = state.left, stateTop = state.top, isPersisted = state.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        if (!padding && zoom <= 1) {\r\n            state.renderPoses = [\r\n                pos1,\r\n                pos2,\r\n                pos3,\r\n                pos4,\r\n            ];\r\n            state.renderLines = [\r\n                [pos1, pos2],\r\n                [pos2, pos4],\r\n                [pos4, pos3],\r\n                [pos3, pos1],\r\n            ];\r\n            return;\r\n        }\r\n        var _a = getPaddingBox(padding || {}), left = _a.left, top = _a.top, bottom = _a.bottom, right = _a.right;\r\n        var n = is3d ? 4 : 3;\r\n        // const clipPathInfo = getClipPath(\r\n        //     props.target,\r\n        //     offsetWidth,\r\n        //     offsetHeight,\r\n        // );\r\n        // if (clipPathInfo) {\r\n        //     left -= Math.max(0, clipPathInfo.left);\r\n        //     top -= Math.max(0, clipPathInfo.top);\r\n        //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\r\n        //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\r\n        // }\r\n        var absoluteOrigin = [];\r\n        if (isPersisted) {\r\n            absoluteOrigin = transformOrigin;\r\n        }\r\n        else if (this.controlBox && props.groupable) {\r\n            absoluteOrigin = originalBeforeOrigin;\r\n        }\r\n        else {\r\n            absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\r\n        }\r\n        var nextMatrix = multiplies(n, createOriginMatrix(absoluteOrigin.map(function (v) { return -v; }), n), allMatrix, createOriginMatrix(transformOrigin, n));\r\n        var renderPos1 = calculatePadding(nextMatrix, pos1, [-left, -top], n);\r\n        var renderPos2 = calculatePadding(nextMatrix, pos2, [right, -top], n);\r\n        var renderPos3 = calculatePadding(nextMatrix, pos3, [-left, bottom], n);\r\n        var renderPos4 = calculatePadding(nextMatrix, pos4, [right, bottom], n);\r\n        state.renderPoses = [\r\n            renderPos1,\r\n            renderPos2,\r\n            renderPos3,\r\n            renderPos4,\r\n        ];\r\n        state.renderLines = [\r\n            [renderPos1, renderPos2],\r\n            [renderPos2, renderPos4],\r\n            [renderPos4, renderPos3],\r\n            [renderPos3, renderPos1],\r\n        ];\r\n        if (zoom) {\r\n            var zoomOffset = zoom / 2;\r\n            state.renderLines = [\r\n                [\r\n                    calculatePadding(nextMatrix, pos1, [-left - zoomOffset, -top], n),\r\n                    calculatePadding(nextMatrix, pos2, [right + zoomOffset, -top], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos2, [right, -top - zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos4, [right, bottom + zoomOffset], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos4, [right + zoomOffset, bottom], n),\r\n                    calculatePadding(nextMatrix, pos3, [-left - zoomOffset, bottom], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos3, [-left, bottom + zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos1, [-left, -top - zoomOffset], n),\r\n                ],\r\n            ];\r\n        }\r\n    };\r\n    MoveableManager.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        var _a = this.props, target = _a.target, container = _a.container, parentMoveable = _a.parentMoveable;\r\n        var _b = this.state, stateTarget = _b.target, stateContainer = _b.container;\r\n        if (!stateTarget && !target) {\r\n            return;\r\n        }\r\n        this.updateAbles();\r\n        var isTargetChanged = !equals(stateTarget, target);\r\n        var isChanged = isTargetChanged || !equals(stateContainer, container);\r\n        if (!isChanged) {\r\n            return;\r\n        }\r\n        var moveableContainer = container || this.controlBox;\r\n        if (moveableContainer) {\r\n            this.unsetAbles();\r\n        }\r\n        this.updateState({ target: target, container: container });\r\n        if (!parentMoveable && moveableContainer) {\r\n            this.updateRect(\"End\", false, false);\r\n        }\r\n        this._isPropTargetChanged = isTargetChanged;\r\n    };\r\n    MoveableManager.prototype.waitToChangeTarget = function () {\r\n        return new Promise(function () { });\r\n    };\r\n    MoveableManager.prototype.triggerEvent = function (name, e) {\r\n        var props = this.props;\r\n        this._emitter.trigger(name, e);\r\n        if (props.parentMoveable && e.isRequest && !e.isRequestChild) {\r\n            return props.parentMoveable.triggerEvent(name, e, true);\r\n        }\r\n        var callback = props[name];\r\n        return callback && callback(e);\r\n    };\r\n    MoveableManager.prototype.useCSS = function (tag, css) {\r\n        var customStyleMap = this.props.customStyledMap;\r\n        var key = tag + css;\r\n        if (!customStyleMap[key]) {\r\n            customStyleMap[key] = styled(tag, css);\r\n        }\r\n        return customStyleMap[key];\r\n    };\r\n    MoveableManager.prototype.getState = function () {\r\n        var _a;\r\n        var props = this.props;\r\n        if (props.target || ((_a = props.targets) === null || _a === void 0 ? void 0 : _a.length)) {\r\n            this._hasFirstTarget = true;\r\n        }\r\n        var hasControlBox = this.controlBox;\r\n        var persistData = props.persistData;\r\n        var firstRenderState = props.firstRenderState;\r\n        if (firstRenderState && !hasControlBox) {\r\n            return firstRenderState;\r\n        }\r\n        if (!this._hasFirstTarget && persistData) {\r\n            var persistState = getPersistState(persistData);\r\n            if (persistState) {\r\n                this.updateState(persistState, false);\r\n                return this.state;\r\n            }\r\n        }\r\n        this.state.isPersisted = false;\r\n        return this.state;\r\n    };\r\n    MoveableManager.prototype.updateSelectors = function () { };\r\n    MoveableManager.prototype.unsetAbles = function () {\r\n        var _this = this;\r\n        this.targetAbles.forEach(function (able) {\r\n            if (able.unset) {\r\n                able.unset(_this);\r\n            }\r\n        });\r\n    };\r\n    MoveableManager.prototype.updateAbles = function (ables, eventAffix) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        if (eventAffix === void 0) { eventAffix = \"\"; }\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var enabledAbles = this.getEnabledAbles(ables);\r\n        var dragStart = \"drag\".concat(eventAffix, \"Start\");\r\n        var pinchStart = \"pinch\".concat(eventAffix, \"Start\");\r\n        var dragControlStart = \"drag\".concat(eventAffix, \"ControlStart\");\r\n        var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\r\n        var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\r\n        this.enabledAbles = enabledAbles;\r\n        this.targetAbles = targetAbles;\r\n        this.controlAbles = controlAbles;\r\n    };\r\n    MoveableManager.prototype.updateState = function (nextState, isSetState) {\r\n        if (isSetState) {\r\n            if (this.isUnmounted) {\r\n                return;\r\n            }\r\n            this.setState(nextState);\r\n        }\r\n        else {\r\n            var state = this.state;\r\n            for (var name_3 in nextState) {\r\n                state[name_3] = nextState[name_3];\r\n            }\r\n        }\r\n    };\r\n    MoveableManager.prototype.getEnabledAbles = function (ables) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        var props = this.props;\r\n        return ables.filter(function (able) { return able && ((able.always && props[able.name] !== false)\r\n            || props[able.name]); });\r\n    };\r\n    MoveableManager.prototype.renderAbles = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        this.renderState = {};\r\n        return groupByMap(flat(filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(function (_a) {\r\n            var render = _a.render;\r\n            return render(_this, Renderer) || [];\r\n        })).filter(function (el) { return el; }), function (_a) {\r\n            var key = _a.key;\r\n            return key;\r\n        }).map(function (group) { return group[0]; });\r\n    };\r\n    MoveableManager.prototype.updateCheckInput = function () {\r\n        this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\r\n    };\r\n    MoveableManager.prototype._getRequestStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, __spreadArray([], __read((this.props.requestStyles || [])), false));\r\n        return styleNames;\r\n    };\r\n    MoveableManager.prototype._updateObserver = function (prevProps) {\r\n        this._updateResizeObserver(prevProps);\r\n        this._updateMutationObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype._updateEvents = function () {\r\n        var hasTargetAble = this.targetAbles.length;\r\n        var hasControlAble = this.controlAbles.length;\r\n        var target = this._dragTarget;\r\n        var isUnset = (!hasTargetAble && this.targetGesto)\r\n            || this._isTargetChanged(true);\r\n        if (isUnset) {\r\n            unsetGesto(this, false);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (!hasControlAble) {\r\n            unsetGesto(this, true);\r\n        }\r\n        if (target && hasTargetAble && !this.targetGesto) {\r\n            this.targetGesto = getTargetAbleGesto(this, target, \"\");\r\n        }\r\n        if (!this.controlGesto && hasControlAble) {\r\n            this.controlGesto = getControlAbleGesto(this, \"Control\");\r\n        }\r\n    };\r\n    MoveableManager.prototype._updateTargets = function () {\r\n        var props = this.props;\r\n        this._prevPropTarget = this._propTarget;\r\n        this._prevDragTarget = this._dragTarget;\r\n        this._prevOriginalDragTarget = this._originalDragTarget;\r\n        this._prevDragArea = props.dragArea;\r\n        this._propTarget = props.target;\r\n        this._originalDragTarget = props.dragTarget || props.target;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableManager.prototype._renderLines = function () {\r\n        var props = this.props;\r\n        var _a = props, zoom = _a.zoom, hideDefaultLines = _a.hideDefaultLines, hideChildMoveableDefaultLines = _a.hideChildMoveableDefaultLines, parentMoveable = _a.parentMoveable;\r\n        if (hideDefaultLines || (parentMoveable && hideChildMoveableDefaultLines)) {\r\n            return [];\r\n        }\r\n        var state = this.getState();\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        return state.renderLines.map(function (line, i) {\r\n            return renderLine(Renderer, \"\", line[0], line[1], zoom, \"render-line-\".concat(i));\r\n        });\r\n    };\r\n    MoveableManager.prototype._isTargetChanged = function (useDragArea) {\r\n        var props = this.props;\r\n        var nextTarget = props.dragTarget || props.target;\r\n        var prevTarget = this._prevOriginalDragTarget;\r\n        var prevDragArea = this._prevDragArea;\r\n        var dragArea = props.dragArea;\r\n        // check target without dragArea\r\n        var isDragTargetChanged = !dragArea && prevTarget !== nextTarget;\r\n        var isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\r\n        return isDragTargetChanged || isDragAreaChanged || this._prevPropTarget != this._propTarget;\r\n    };\r\n    MoveableManager.prototype._updateNativeEvents = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var target = props.dragArea ? this.areaElement : this.state.target;\r\n        var events = this.events;\r\n        var eventKeys = getKeys(events);\r\n        if (this._isTargetChanged()) {\r\n            for (var eventName in events) {\r\n                var manager = events[eventName];\r\n                manager && manager.destroy();\r\n                events[eventName] = null;\r\n            }\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var enabledAbles = this.enabledAbles;\r\n        eventKeys.forEach(function (eventName) {\r\n            var ables = filterAbles(enabledAbles, [eventName]);\r\n            var hasAbles = ables.length > 0;\r\n            var manager = events[eventName];\r\n            if (!hasAbles) {\r\n                if (manager) {\r\n                    manager.destroy();\r\n                    events[eventName] = null;\r\n                }\r\n                return;\r\n            }\r\n            if (!manager) {\r\n                manager = new EventManager(target, _this, eventName);\r\n                events[eventName] = manager;\r\n            }\r\n            manager.setAbles(ables);\r\n        });\r\n    };\r\n    MoveableManager.prototype._checkUpdateRootContainer = function () {\r\n        var rootContainer = this.props.rootContainer;\r\n        if (!this._rootContainer && rootContainer) {\r\n            this._rootContainer = getRefTarget(rootContainer, true);\r\n        }\r\n    };\r\n    MoveableManager.prototype._checkUpdateViewContainer = function () {\r\n        var viewContainerOption = this.props.viewContainer;\r\n        if (!this._viewContainer && viewContainerOption) {\r\n            this._viewContainer = getRefTarget(viewContainerOption, true);\r\n        }\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames(__spreadArray(__spreadArray([], __read(this._getAbleViewClassNames()), false), [\r\n                this.isDragging() ? VIEW_DRAGGING : \"\",\r\n            ], false));\r\n        }\r\n    };\r\n    MoveableManager.prototype._changeAbleViewClassNames = function (classNames) {\r\n        var viewContainer = this._viewContainer;\r\n        var nextClassNames = groupBy(classNames.filter(Boolean), function (el) { return el; }).map(function (_a) {\r\n            var _b = __read(_a, 1), className = _b[0];\r\n            return className;\r\n        });\r\n        var prevClassNames = this._viewClassNames;\r\n        var _a = diff$1(prevClassNames, nextClassNames), removed = _a.removed, added = _a.added;\r\n        removed.forEach(function (index) {\r\n            removeClass(viewContainer, prevClassNames[index]);\r\n        });\r\n        added.forEach(function (index) {\r\n            addClass(viewContainer, nextClassNames[index]);\r\n        });\r\n        this._viewClassNames = nextClassNames;\r\n    };\r\n    MoveableManager.prototype._getAbleViewClassNames = function () {\r\n        var _this = this;\r\n        return (this.getEnabledAbles().map(function (able) {\r\n            var _a;\r\n            return (((_a = able.viewClassName) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\");\r\n        }).join(\" \") + \" \".concat(this._getAbleClassName(\"-view\"))).split(/\\s+/g);\r\n    };\r\n    MoveableManager.prototype._getAbleClassName = function (classPrefix) {\r\n        var _this = this;\r\n        if (classPrefix === void 0) { classPrefix = \"\"; }\r\n        var ables = this.getEnabledAbles();\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        var targetGestoData = (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag())\r\n            ? targetGesto.getEventData() : {};\r\n        var controlGestoData = (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())\r\n            ? controlGesto.getEventData() : {};\r\n        return ables.map(function (able) {\r\n            var _a, _b, _c;\r\n            var name = able.name;\r\n            var className = ((_a = able.className) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\r\n            if (((_b = targetGestoData[name]) === null || _b === void 0 ? void 0 : _b.isEventStart)\r\n                || ((_c = controlGestoData[name]) === null || _c === void 0 ? void 0 : _c.isEventStart)) {\r\n                className += \" \".concat(prefix(\"\".concat(name).concat(classPrefix, \"-dragging\")));\r\n            }\r\n            return className.trim();\r\n        }).filter(Boolean).join(\" \");\r\n    };\r\n    MoveableManager.prototype._updateResizeObserver = function (prevProps) {\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.ResizeObserver || !target || !props.useResizeObserver) {\r\n            (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._reiszeObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.ResizeObserver(this.checkUpdateRect);\r\n        observer.observe(target, {\r\n            box: \"border-box\",\r\n        });\r\n        this._reiszeObserver = observer;\r\n    };\r\n    MoveableManager.prototype._updateMutationObserver = function (prevProps) {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.MutationObserver || !target || !props.useMutationObserver) {\r\n            (_a = this._mutationObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._mutationObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.MutationObserver(function (records) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var records_1 = __values(records), records_1_1 = records_1.next(); !records_1_1.done; records_1_1 = records_1.next()) {\r\n                    var mutation = records_1_1.value;\r\n                    if (mutation.type === \"attributes\" && mutation.attributeName === \"style\") {\r\n                        _this.checkUpdateRect();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (records_1_1 && !records_1_1.done && (_a = records_1.return)) _a.call(records_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        });\r\n        observer.observe(target, {\r\n            attributes: true,\r\n        });\r\n        this._mutationObserver = observer;\r\n    };\r\n    MoveableManager.defaultProps = {\r\n        dragTargetSelf: false,\r\n        target: null,\r\n        dragTarget: null,\r\n        container: null,\r\n        rootContainer: null,\r\n        origin: true,\r\n        parentMoveable: null,\r\n        wrapperMoveable: null,\r\n        isWrapperMounted: false,\r\n        parentPosition: null,\r\n        warpSelf: false,\r\n        svgOrigin: \"\",\r\n        dragContainer: null,\r\n        useResizeObserver: false,\r\n        useMutationObserver: false,\r\n        preventDefault: true,\r\n        preventRightClick: true,\r\n        preventWheelClick: true,\r\n        linePadding: 0,\r\n        controlPadding: 0,\r\n        ables: [],\r\n        pinchThreshold: 20,\r\n        dragArea: false,\r\n        passDragArea: false,\r\n        transformOrigin: \"\",\r\n        className: \"\",\r\n        zoom: 1,\r\n        triggerAblesSimultaneously: false,\r\n        padding: {},\r\n        pinchOutside: true,\r\n        checkInput: false,\r\n        dragFocusedInput: false,\r\n        groupable: false,\r\n        hideDefaultLines: false,\r\n        cspNonce: \"\",\r\n        translateZ: 0,\r\n        cssStyled: null,\r\n        customStyledMap: {},\r\n        props: {},\r\n        stopPropagation: false,\r\n        preventClickDefault: false,\r\n        preventClickEventOnDrag: true,\r\n        flushSync: defaultSync,\r\n        firstRenderState: null,\r\n        persistData: null,\r\n        viewContainer: null,\r\n        requestStyles: [],\r\n        useAccuratePosition: false,\r\n    };\r\n    return MoveableManager;\r\n}(React.PureComponent));\r\n/**\r\n * The target to indicate Moveable Control Box.\r\n * @name Moveable#target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n */\r\n/**\r\n * Zooms in the elements of a moveable.\r\n * @name Moveable#zoom\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.zoom = 2;\r\n */\r\n/**\r\n * Whether the target size is detected and updated whenever it changes.\r\n * @name Moveable#useResizeObserver\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.useResizeObserver = true;\r\n */\r\n/**\r\n * Resize, Scale Events at edges\r\n * @name Moveable#edge\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.edge = true;\r\n */\r\n/**\r\n * You can specify the className of the moveable controlbox.\r\n * @name Moveable#className\r\n * @default \"\"\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   className: \"\",\r\n * });\r\n *\r\n * moveable.className = \"moveable1\";\r\n */\r\n/**\r\n * The target(s) to drag Moveable target(s)\r\n * @name Moveable#dragTarget\r\n * @default target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\r\n */\r\n/**\r\n * `renderStart` event occurs at the first start of all events.\r\n * @memberof Moveable\r\n * @event renderStart\r\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderStart\", ({ target }) => {\r\n *     console.log(\"onRenderStart\", target);\r\n * });\r\n */\r\n/**\r\n * `render` event occurs before the target is drawn on the screen.\r\n * @memberof Moveable\r\n * @event render\r\n * @param {Moveable.OnRender} - Parameters for the `render` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"render\", ({ target }) => {\r\n *     console.log(\"onRender\", target);\r\n * });\r\n */\r\n/**\r\n * `renderEnd` event occurs at the end of all events.\r\n * @memberof Moveable\r\n * @event renderEnd\r\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderEnd\", ({ target }) => {\r\n *     console.log(\"onRenderEnd\", target);\r\n * });\r\n */\r\n/**\r\n * `renderGroupStart` event occurs at the first start of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupStart\r\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroup` event occurs before the target is drawn on the screen in group.\r\n * @memberof Moveable\r\n * @event renderGroup\r\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroup\", ({ targets }) => {\r\n *     console.log(\"onRenderGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroupEnd` event occurs at the end of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupEnd\r\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupEnd\", targets);\r\n * });\r\n */\n\nvar Groupable = {\r\n    name: \"groupable\",\r\n    props: [\r\n        \"defaultGroupRotate\",\r\n        \"useDefaultGroupRotate\",\r\n        \"defaultGroupOrigin\",\r\n        \"groupable\",\r\n        \"groupableProps\",\r\n        \"targetGroups\",\r\n        \"hideChildMoveableDefaultLines\",\r\n    ],\r\n    events: [],\r\n    render: function (moveable, React) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var targets = props.targets || [];\r\n        var _b = moveable.getState(), left = _b.left, top = _b.top, isPersisted = _b.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        var renderGroupRects = moveable.renderGroupRects;\r\n        var persistDatChildren = ((_a = props.persistData) === null || _a === void 0 ? void 0 : _a.children) || [];\r\n        if (isPersisted) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else {\r\n            persistDatChildren = [];\r\n        }\r\n        var parentPosition = watchValue(moveable, \"parentPosition\", [left, top], function (styles) { return styles.join(\",\"); });\r\n        var requestStyles = watchValue(moveable, \"requestStyles\", moveable.getRequestChildStyles(), function (styles) { return styles.join(\",\"); });\r\n        moveable.moveables = moveable.moveables.slice(0, targets.length);\r\n        return __spreadArray(__spreadArray([], __read(targets.map(function (target, i) {\r\n            return React.createElement(MoveableManager, { key: \"moveable\" + i, ref: refs(moveable, \"moveables\", i), target: target, origin: false, requestStyles: requestStyles, cssStyled: props.cssStyled, customStyledMap: props.customStyledMap, useResizeObserver: props.useResizeObserver, useMutationObserver: props.useMutationObserver, hideChildMoveableDefaultLines: props.hideChildMoveableDefaultLines, parentMoveable: moveable, parentPosition: [left, top], persistData: persistDatChildren[i], zoom: zoom });\r\n        })), false), __read(flat(renderGroupRects.map(function (_a, i) {\r\n            var pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n            var poses = [pos1, pos2, pos3, pos4];\r\n            return [\r\n                [0, 1],\r\n                [1, 3],\r\n                [3, 2],\r\n                [2, 0],\r\n            ].map(function (_a, j) {\r\n                var _b = __read(_a, 2), from = _b[0], to = _b[1];\r\n                return renderLine(React, \"\", minus(poses[from], parentPosition), minus(poses[to], parentPosition), zoom, \"group-rect-\".concat(i, \"-\").concat(j));\r\n            });\r\n        }))), false);\r\n    },\r\n};\n\nvar Clickable = makeAble(\"clickable\", {\r\n    props: [\r\n        \"clickable\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    always: true,\r\n    dragRelation: \"weak\",\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    dragStart: function () {\r\n        return;\r\n    },\r\n    dragControlStart: function () {\r\n        return;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var target = moveable.props.target;\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        var isMoveableElement = moveable.isMoveableElement(inputTarget);\r\n        var containsElement = !isMoveableElement && moveable.controlBox.contains(inputTarget);\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            || containsElement\r\n        // External event duplicate target or dragAreaElement\r\n        ) {\r\n            return;\r\n        }\r\n        var containsTarget = target.contains(inputTarget);\r\n        triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            inputTarget: inputTarget,\r\n            isTarget: target === inputTarget,\r\n            moveableTarget: moveable.props.target,\r\n            containsTarget: containsTarget,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            // External event duplicate target or dragAreaElement\r\n            || e.datas.inputTarget === inputTarget) {\r\n            return;\r\n        }\r\n        var targets = moveable.props.targets;\r\n        var targetIndex = targets.indexOf(inputTarget);\r\n        var isTarget = targetIndex > -1;\r\n        var containsTarget = false;\r\n        if (targetIndex === -1) {\r\n            targetIndex = findIndex(targets, function (parentTarget) { return parentTarget.contains(inputTarget); });\r\n            containsTarget = targetIndex > -1;\r\n        }\r\n        triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            targets: targets,\r\n            inputTarget: inputTarget,\r\n            targetIndex: targetIndex,\r\n            isTarget: isTarget,\r\n            containsTarget: containsTarget,\r\n            moveableTarget: targets[targetIndex],\r\n        }));\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n});\r\n/**\r\n * When you click on the element, the `click` event is called.\r\n * @memberof Moveable\r\n * @event click\r\n * @param {Moveable.OnClick} - Parameters for the `click` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\r\n * });\r\n */\r\n/**\r\n * When you click on the element inside the group, the `clickGroup` event is called.\r\n * @memberof Moveable\r\n * @event clickGroup\r\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\r\n * });\r\n */\n\nfunction getDraggableEvent(e) {\r\n    var datas = e.originalDatas.draggable;\r\n    if (!datas) {\r\n        e.originalDatas.draggable = {};\r\n        datas = e.originalDatas.draggable;\r\n    }\r\n    return __assign(__assign({}, e), { datas: datas });\r\n}\r\nvar edgeDraggable = makeAble(\"edgeDraggable\", {\r\n    css: [\r\n        \".edge.edgeDraggable.line {\\ncursor: move;\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        var edge = props.edgeDraggable;\r\n        if (!edge) {\r\n            return [];\r\n        }\r\n        return renderEdgeLines(React, \"edgeDraggable\", edge, moveable.getState().renderPoses, props.zoom);\r\n    },\r\n    dragCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable\r\n            && hasClass(target, prefix(\"direction\"))\r\n            && hasClass(target, prefix(\"edge\"))\r\n            && hasClass(target, prefix(\"edgeDraggable\"));\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        return Draggable.dragStart(moveable, getDraggableEvent(e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        return Draggable.drag(moveable, getDraggableEvent(e));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return Draggable.dragEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return Draggable.dragGroup(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    unset: function (moveable) {\r\n        return Draggable.unset(moveable);\r\n    },\r\n});\r\n/**\r\n * Whether to move by dragging the edge line (default: false)\r\n * @name Moveable.Draggable#edgeDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  draggable: true,\r\n *  edgeDraggable: false,\r\n * });\r\n *\r\n * moveable.edgeDraggable = true;\r\n */\n\nvar IndividualGroupable = {\r\n    name: \"individualGroupable\",\r\n    props: [\r\n        \"individualGroupable\",\r\n        \"individualGroupableProps\",\r\n    ],\r\n    events: [],\r\n};\n\nvar MOVEABLE_ABLES =  [\r\n    BeforeRenderable,\r\n    Default, Snappable, Pinchable,\r\n    Draggable, edgeDraggable,\r\n    Resizable, Scalable, Warpable, Rotatable,\r\n    Scrollable, Padding, Origin,\r\n    OriginDraggable,\r\n    Clippable, Roundable, Groupable, IndividualGroupable,\r\n    Clickable,\r\n    DragArea,\r\n    Renderable,\r\n];\r\nvar MOVEABLE_EVENTS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.events || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\r\nvar MOVEABLE_PROPS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.props || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\n\nfunction solveConstantsDistance(_a, pos) {\r\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\r\n    return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\r\n}\r\nfunction solveC(_a, pos) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    // ax + by + c = 0\r\n    // -ax -by;\r\n    return -a * pos[0] - b * pos[1];\r\n}\n\nfunction getMaxPos(poses, index) {\r\n    return Math.max.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getMinPos(poses, index) {\r\n    return Math.min.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getGroupRect(parentPoses, rotation) {\r\n    var _a, _b, _c;\r\n    var pos1 = [0, 0];\r\n    var pos2 = [0, 0];\r\n    var pos3 = [0, 0];\r\n    var pos4 = [0, 0];\r\n    var width = 0;\r\n    var height = 0;\r\n    if (!parentPoses.length) {\r\n        return {\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            minX: 0,\r\n            minY: 0,\r\n            maxX: 0,\r\n            maxY: 0,\r\n            width: width,\r\n            height: height,\r\n            rotation: rotation,\r\n        };\r\n    }\r\n    var fixedRotation = throttle(rotation, TINY_NUM);\r\n    if (fixedRotation % 90) {\r\n        var rad = fixedRotation / 180 * Math.PI;\r\n        var a1_1 = Math.tan(rad);\r\n        var a2_1 = -1 / a1_1;\r\n        // ax = y  // -ax + y = 0 // 0 => 1\r\n        // -ax = y // ax + y = 0  // 0 => 3\r\n        var a1MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a1MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        var a2MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a2MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        parentPoses.forEach(function (poses) {\r\n            poses.forEach(function (pos) {\r\n                // const b1 = pos[1] - a1 * pos[0];\r\n                // const b2 = pos[1] - a2 * pos[0];\r\n                var a1Dist = solveConstantsDistance([-a1_1, 1, 0], pos);\r\n                var a2Dist = solveConstantsDistance([-a2_1, 1, 0], pos);\r\n                if (a1MinMax_1[0] > a1Dist) {\r\n                    a1MinMaxPos_1[0] = pos;\r\n                    a1MinMax_1[0] = a1Dist;\r\n                }\r\n                if (a1MinMax_1[1] < a1Dist) {\r\n                    a1MinMaxPos_1[1] = pos;\r\n                    a1MinMax_1[1] = a1Dist;\r\n                }\r\n                if (a2MinMax_1[0] > a2Dist) {\r\n                    a2MinMaxPos_1[0] = pos;\r\n                    a2MinMax_1[0] = a2Dist;\r\n                }\r\n                if (a2MinMax_1[1] < a2Dist) {\r\n                    a2MinMaxPos_1[1] = pos;\r\n                    a2MinMax_1[1] = a2Dist;\r\n                }\r\n            });\r\n        });\r\n        var _d = __read(a1MinMaxPos_1, 2), a1MinPos = _d[0], a1MaxPos = _d[1];\r\n        var _e = __read(a2MinMaxPos_1, 2), a2MinPos = _e[0], a2MaxPos = _e[1];\r\n        var minHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MinPos)];\r\n        var maxHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MaxPos)];\r\n        var minVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MinPos)];\r\n        var maxVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MaxPos)];\r\n        _a = __read([\r\n            [minHorizontalLine, minVerticalLine],\r\n            [minHorizontalLine, maxVerticalLine],\r\n            [maxHorizontalLine, minVerticalLine],\r\n            [maxHorizontalLine, maxVerticalLine],\r\n        ].map(function (_a) {\r\n            var _b = __read(_a, 2), line1 = _b[0], line2 = _b[1];\r\n            return getIntersectionPointsByConstants(line1, line2)[0];\r\n        }), 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        width = a2MinMax_1[1] - a2MinMax_1[0];\r\n        height = a1MinMax_1[1] - a1MinMax_1[0];\r\n    }\r\n    else {\r\n        var minX_1 = getMinPos(parentPoses, 0);\r\n        var minY_1 = getMinPos(parentPoses, 1);\r\n        var maxX_1 = getMaxPos(parentPoses, 0);\r\n        var maxY_1 = getMaxPos(parentPoses, 1);\r\n        pos1 = [minX_1, minY_1];\r\n        pos2 = [maxX_1, minY_1];\r\n        pos3 = [minX_1, maxY_1];\r\n        pos4 = [maxX_1, maxY_1];\r\n        width = maxX_1 - minX_1;\r\n        height = maxY_1 - minY_1;\r\n        if (fixedRotation % 180) {\r\n            // 0\r\n            // 1 2\r\n            // 3 4\r\n            // 90\r\n            // 3 1\r\n            // 4 2\r\n            // 180\r\n            // 4 3\r\n            // 2 1\r\n            // 270\r\n            // 2 4\r\n            // 1 3\r\n            // 1, 2, 3,4 = 3 1 4 2\r\n            var changedX = [pos3, pos1, pos4, pos2];\r\n            _b = __read(changedX, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n            width = maxY_1 - minY_1;\r\n            height = maxX_1 - minX_1;\r\n        }\r\n    }\r\n    if (fixedRotation % 360 > 180) {\r\n        // 1 2   4 3\r\n        // 3 4   2 1\r\n        var changedX = [pos4, pos3, pos2, pos1];\r\n        _c = __read(changedX, 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3];\r\n    }\r\n    var _f = getMinMaxs([pos1, pos2, pos3, pos4]), minX = _f.minX, minY = _f.minY, maxX = _f.maxX, maxY = _f.maxY;\r\n    return {\r\n        pos1: pos1,\r\n        pos2: pos2,\r\n        pos3: pos3,\r\n        pos4: pos4,\r\n        width: width,\r\n        height: height,\r\n        minX: minX,\r\n        minY: minY,\r\n        maxX: maxX,\r\n        maxY: maxY,\r\n        rotation: rotation,\r\n    };\r\n}\r\nfunction findMoveableGroups(moveables, childTargetGroups) {\r\n    var groups = childTargetGroups.map(function (targetGroup) {\r\n        if (isArray(targetGroup)) {\r\n            var childMoveableGroups = findMoveableGroups(moveables, targetGroup);\r\n            var length_1 = childMoveableGroups.length;\r\n            if (length_1 > 1) {\r\n                return childMoveableGroups;\r\n            }\r\n            else if (length_1 === 1) {\r\n                return childMoveableGroups[0];\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            var checked = find(moveables, function (_a) {\r\n                var manager = _a.manager;\r\n                return manager.props.target === targetGroup;\r\n            });\r\n            if (checked) {\r\n                checked.finded = true;\r\n                return checked.manager;\r\n            }\r\n            return null;\r\n        }\r\n    }).filter(Boolean);\r\n    if (groups.length === 1 && isArray(groups[0])) {\r\n        return groups[0];\r\n    }\r\n    return groups;\r\n}\r\n/**\r\n * @namespace Moveable.Group\r\n * @description You can make targets moveable.\r\n */\r\nvar MoveableGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableGroup, _super);\r\n    function MoveableGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.differ = new ChildrenDiffer();\r\n        _this.moveables = [];\r\n        _this.transformOrigin = \"50% 50%\";\r\n        _this.renderGroupRects = [];\r\n        _this._targetGroups = [];\r\n        _this._hasFirstTargets = false;\r\n        return _this;\r\n    }\r\n    MoveableGroup.prototype.componentDidMount = function () {\r\n        _super.prototype.componentDidMount.call(this);\r\n    };\r\n    MoveableGroup.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        this.updateAbles();\r\n    };\r\n    MoveableGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        var _a;\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var state = this.state;\r\n        if (!this.controlBox || state.isPersisted) {\r\n            return;\r\n        }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, false, false);\r\n        });\r\n        var props = this.props;\r\n        var moveables = this.moveables;\r\n        var target = state.target || props.target;\r\n        var checkeds = moveables.map(function (moveable) { return ({ finded: false, manager: moveable }); });\r\n        var targetGroups = this.props.targetGroups || [];\r\n        var moveableGroups = findMoveableGroups(checkeds, targetGroups);\r\n        var useDefaultGroupRotate = props.useDefaultGroupRotate;\r\n        moveableGroups.push.apply(moveableGroups, __spreadArray([], __read(checkeds.filter(function (_a) {\r\n            var finded = _a.finded;\r\n            return !finded;\r\n        }).map(function (_a) {\r\n            var manager = _a.manager;\r\n            return manager;\r\n        })), false));\r\n        var renderGroupRects = [];\r\n        var isReset = !isTarget || (type !== \"\" && props.updateGroup);\r\n        var defaultGroupRotate = props.defaultGroupRotate || 0;\r\n        if (!this._hasFirstTargets) {\r\n            var persistedRoatation = (_a = props.persistData) === null || _a === void 0 ? void 0 : _a.rotation;\r\n            if (persistedRoatation != null) {\r\n                defaultGroupRotate = persistedRoatation;\r\n            }\r\n        }\r\n        function getMoveableGroupRect(group, parentRotation, isRoot) {\r\n            var posesRotations = group.map(function (moveable) {\r\n                if (isArray(moveable)) {\r\n                    var rect = getMoveableGroupRect(moveable, parentRotation);\r\n                    var poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\r\n                    renderGroupRects.push(rect);\r\n                    return { poses: poses, rotation: rect.rotation };\r\n                }\r\n                else {\r\n                    return {\r\n                        poses: getAbsolutePosesByState(moveable.state),\r\n                        rotation: moveable.getRotation(),\r\n                    };\r\n                }\r\n            });\r\n            var rotations = posesRotations.map(function (_a) {\r\n                var rotation = _a.rotation;\r\n                return rotation;\r\n            });\r\n            var groupRotation = 0;\r\n            var firstRotation = rotations[0];\r\n            var isSameRotation = rotations.every(function (nextRotation) {\r\n                return Math.abs(firstRotation - nextRotation) < 0.1;\r\n            });\r\n            if (isReset) {\r\n                groupRotation = !useDefaultGroupRotate && isSameRotation ? firstRotation : defaultGroupRotate;\r\n            }\r\n            else {\r\n                groupRotation = !useDefaultGroupRotate && !isRoot && isSameRotation ? firstRotation : parentRotation;\r\n            }\r\n            var groupPoses = posesRotations.map(function (_a) {\r\n                var poses = _a.poses;\r\n                return poses;\r\n            });\r\n            var groupRect = getGroupRect(groupPoses, groupRotation);\r\n            return groupRect;\r\n        }\r\n        var rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\r\n        if (isReset) {\r\n            // reset rotataion\r\n            this.rotation = rootGroupRect.rotation;\r\n            this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\r\n            this.scale = [1, 1];\r\n        }\r\n        this._targetGroups = targetGroups;\r\n        this.renderGroupRects = renderGroupRects;\r\n        var transformOrigin = this.transformOrigin;\r\n        var rotation = this.rotation;\r\n        var scale = this.scale;\r\n        var width = rootGroupRect.width, height = rootGroupRect.height, minX = rootGroupRect.minX, minY = rootGroupRect.minY;\r\n        var posesInfo = rotatePosesInfo([\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ], convertTransformOriginArray(transformOrigin, width, height), this.rotation / 180 * Math.PI);\r\n        var _b = getMinMaxs(posesInfo.result), deltaX = _b.minX, deltaY = _b.minY;\r\n        var rotateScale = \" rotate(\".concat(rotation, \"deg)\")\r\n            + \" scale(\".concat(sign(scale[0]), \", \").concat(sign(scale[1]), \")\");\r\n        var transform = \"translate(\".concat(-deltaX, \"px, \").concat(-deltaY, \"px)\").concat(rotateScale);\r\n        this.controlBox.style.transform\r\n            = \"translate3d(\".concat(minX, \"px, \").concat(minY, \"px, \").concat(this.props.translateZ || 0, \")\");\r\n        target.style.cssText += \"left:0px;top:0px;\"\r\n            + \"transform-origin:\".concat(transformOrigin, \";\")\r\n            + \"width:\".concat(width, \"px;height:\").concat(height, \"px;\")\r\n            + \"transform: \".concat(transform);\r\n        state.width = width;\r\n        state.height = height;\r\n        var container = this.getContainer();\r\n        var info = getMoveableTargetInfo(this.controlBox, target, this.controlBox, this.getContainer(), this._rootContainer || container, []);\r\n        var pos = [info.left, info.top];\r\n        var _c = __read(getAbsolutePosesByState(info), 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3]; // info.left + info.pos(1 ~ 4)\r\n        var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n        var delta = [minPos.minX, minPos.minY];\r\n        var direction = sign(scale[0] * scale[1]);\r\n        info.pos1 = minus(pos1, delta);\r\n        info.pos2 = minus(pos2, delta);\r\n        info.pos3 = minus(pos3, delta);\r\n        info.pos4 = minus(pos4, delta);\r\n        // info.left = info.left + delta[0];\r\n        // info.top = info.top + delta[1];\r\n        info.left = minX - info.left + delta[0];\r\n        info.top = minY - info.top + delta[1];\r\n        info.origin = minus(plus(pos, info.origin), delta);\r\n        info.beforeOrigin = minus(plus(pos, info.beforeOrigin), delta);\r\n        info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin);\r\n        info.transformOrigin = minus(plus(pos, info.transformOrigin), delta);\r\n        target.style.transform\r\n            = \"translate(\".concat(-deltaX - delta[0], \"px, \").concat(-deltaY - delta[1], \"px)\")\r\n                + rotateScale;\r\n        setStoreCache();\r\n        this.updateState(__assign(__assign({}, info), { posDelta: delta, direction: direction, beforeDirection: direction }), isSetState);\r\n    };\r\n    MoveableGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableGroup.prototype.triggerEvent = function (name, e, isManager) {\r\n        if (isManager || name.indexOf(\"Group\") > -1) {\r\n            return _super.prototype.triggerEvent.call(this, name, e);\r\n        }\r\n        else {\r\n            this._emitter.trigger(name, e);\r\n        }\r\n    };\r\n    MoveableGroup.prototype.getRequestChildStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestChildStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, []);\r\n        return styleNames;\r\n    };\r\n    MoveableGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableGroup.prototype.updateAbles = function () {\r\n        _super.prototype.updateAbles.call(this, __spreadArray(__spreadArray([], __read(this.props.ables), false), [Groupable], false), \"Group\");\r\n    };\r\n    MoveableGroup.prototype._updateTargets = function () {\r\n        _super.prototype._updateTargets.call(this);\r\n        this._originalDragTarget = this.props.dragTarget || this.areaElement;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableGroup.prototype._updateEvents = function () {\r\n        var state = this.state;\r\n        var props = this.props;\r\n        var prevTarget = this._prevDragTarget;\r\n        var nextTarget = props.dragTarget || this.areaElement;\r\n        var targets = props.targets;\r\n        var _a = this.differ.update(targets), added = _a.added, changed = _a.changed, removed = _a.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged || this._prevOriginalDragTarget !== this._originalDragTarget) {\r\n            unsetGesto(this, false);\r\n            unsetGesto(this, true);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (prevTarget !== nextTarget) {\r\n            state.target = null;\r\n        }\r\n        if (!state.target) {\r\n            state.target = this.areaElement;\r\n            this.controlBox.style.display = \"block\";\r\n        }\r\n        if (state.target) {\r\n            if (!this.targetGesto) {\r\n                this.targetGesto = getTargetAbleGesto(this, this._dragTarget, \"Group\");\r\n            }\r\n            if (!this.controlGesto) {\r\n                this.controlGesto = getControlAbleGesto(this, \"GroupControl\");\r\n            }\r\n        }\r\n        var isContainerChanged = !equals(state.container, props.container);\r\n        if (isContainerChanged) {\r\n            state.container = props.container;\r\n        }\r\n        if (isContainerChanged\r\n            || isTargetChanged\r\n            || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\")\r\n            || changed.length\r\n            || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])) {\r\n            this.updateRect();\r\n            this._hasFirstTargets = true;\r\n        }\r\n        this._isPropTargetChanged = !!isTargetChanged;\r\n    };\r\n    MoveableGroup.prototype._updateObserver = function () { };\r\n    MoveableGroup.defaultProps = __assign(__assign({}, MoveableManager.defaultProps), { transformOrigin: [\"50%\", \"50%\"], groupable: true, dragArea: true, keepRatio: true, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: \"50% 50%\" });\r\n    return MoveableGroup;\r\n}(MoveableManager));\n\n/**\r\n * @namespace Moveable.IndividualGroup\r\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\r\n */\r\nvar MoveableIndividualGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableIndividualGroup, _super);\r\n    function MoveableIndividualGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.moveables = [];\r\n        return _this;\r\n    }\r\n    MoveableIndividualGroup.prototype.render = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var cspNonce = props.cspNonce, ControlBoxElement = props.cssStyled, persistData = props.persistData;\r\n        var targets = props.targets || [];\r\n        var length = targets.length;\r\n        var canPersist = this.isUnmounted || !length;\r\n        var persistDatChildren = (_a = persistData === null || persistData === void 0 ? void 0 : persistData.children) !== null && _a !== void 0 ? _a : [];\r\n        if (canPersist && !length && persistDatChildren.length) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else if (!canPersist) {\r\n            persistDatChildren = [];\r\n        }\r\n        return React.createElement(ControlBoxElement, { cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: prefix(\"control-box\") }, targets.map(function (target, i) {\r\n            var _a, _b;\r\n            var individualProps = (_b = (_a = props.individualGroupableProps) === null || _a === void 0 ? void 0 : _a.call(props, target, i)) !== null && _b !== void 0 ? _b : {};\r\n            return React.createElement(MoveableManager, __assign({ key: \"moveable\" + i, ref: refs(_this, \"moveables\", i) }, props, individualProps, { target: target, wrapperMoveable: _this, isWrapperMounted: _this.isMoveableMounted, persistData: persistDatChildren[i] }));\r\n        }));\r\n    };\r\n    MoveableIndividualGroup.prototype.componentDidMount = function () { };\r\n    MoveableIndividualGroup.prototype.componentDidUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, isTarget, isSetState);\r\n        });\r\n        setStoreCache();\r\n    };\r\n    MoveableIndividualGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableIndividualGroup.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var results = this.moveables.map(function (m) { return m.request(ableName, __assign(__assign({}, param), { isInstant: false }), false); });\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                results.forEach(function (r) { return r.request(ableParam); });\r\n                return this;\r\n            },\r\n            requestEnd: function () {\r\n                results.forEach(function (r) { return r.requestEnd(); });\r\n                return this;\r\n            },\r\n        };\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    MoveableIndividualGroup.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var inputTarget = target;\r\n        var childMoveable = find(this.moveables, function (child) {\r\n            var target = child.getTargets()[0];\r\n            var controlBoxElement = child.getControlBoxElement();\r\n            var dragElement = child.getDragElement();\r\n            if (!target || !dragElement) {\r\n                return false;\r\n            }\r\n            return dragElement === inputTarget || dragElement.contains(inputTarget)\r\n                || (dragElement !== target && target === inputTarget || target.contains(inputTarget))\r\n                || controlBoxElement === inputTarget || controlBoxElement.contains(inputTarget);\r\n        });\r\n        if (childMoveable) {\r\n            childMoveable.dragStart(e, target);\r\n        }\r\n        return this;\r\n    };\r\n    MoveableIndividualGroup.prototype.hitTest = function () {\r\n        return 0;\r\n    };\r\n    MoveableIndividualGroup.prototype.isInside = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.isDragging = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.getDragElement = function () {\r\n        return null;\r\n    };\r\n    MoveableIndividualGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRenderPoses = function () { };\r\n    MoveableIndividualGroup.prototype.checkUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.triggerEvent = function () { };\r\n    MoveableIndividualGroup.prototype.updateAbles = function () { };\r\n    MoveableIndividualGroup.prototype._updateEvents = function () { };\r\n    MoveableIndividualGroup.prototype._updateObserver = function () { };\r\n    return MoveableIndividualGroup;\r\n}(MoveableManager));\n\nfunction getElementTargets(refTargets, selectorMap) {\r\n    var elementTargets = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                elementTargets.push.apply(elementTargets, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            elementTargets.push.apply(elementTargets, __spreadArray([], __read(getElementTargets(target, selectorMap)), false));\r\n        }\r\n        else {\r\n            elementTargets.push(target);\r\n        }\r\n    });\r\n    return elementTargets;\r\n}\r\nfunction getTargetGroups(refTargets, selectorMap) {\r\n    var targetGroups = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                targetGroups.push.apply(targetGroups, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            targetGroups.push(getTargetGroups(target, selectorMap));\r\n        }\r\n        else {\r\n            targetGroups.push(target);\r\n        }\r\n    });\r\n    return targetGroups;\r\n}\r\nfunction compareRefTargets(prevRefTargets, nextRefTargets) {\r\n    return (prevRefTargets.length !== nextRefTargets.length) || prevRefTargets.some(function (target, i) {\r\n        var nextTarget = nextRefTargets[i];\r\n        if (!target && !nextTarget) {\r\n            return false;\r\n        }\r\n        else if (target != nextTarget) {\r\n            if (isArray(target) && isArray(nextTarget)) {\r\n                return compareRefTargets(target, nextTarget);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nvar InitialMoveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(InitialMoveable, _super);\r\n    function InitialMoveable() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.refTargets = [];\r\n        _this.selectorMap = {};\r\n        _this._differ = new ChildrenDiffer();\r\n        _this._elementTargets = [];\r\n        _this._tmpRefTargets = [];\r\n        _this._tmpSelectorMap = {};\r\n        _this._onChangeTargets = null;\r\n        return _this;\r\n    }\r\n    InitialMoveable.makeStyled = function () {\r\n        var cssMap = {};\r\n        var ables = this.getTotalAbles();\r\n        ables.forEach(function (_a) {\r\n            var css = _a.css;\r\n            if (!css) {\r\n                return;\r\n            }\r\n            css.forEach(function (text) {\r\n                cssMap[text] = true;\r\n            });\r\n        });\r\n        var style = getKeys(cssMap).join(\"\\n\");\r\n        this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\r\n    };\r\n    InitialMoveable.getTotalAbles = function () {\r\n        return __spreadArray([Default, Groupable, IndividualGroupable, DragArea], __read(this.defaultAbles), false);\r\n    };\r\n    InitialMoveable.prototype.render = function () {\r\n        var _a;\r\n        var moveableContructor = this.constructor;\r\n        if (!moveableContructor.defaultStyled) {\r\n            moveableContructor.makeStyled();\r\n        }\r\n        var _b = this.props, userAbles = _b.ables, userProps = _b.props, props = __rest(_b, [\"ables\", \"props\"]);\r\n        var _c = __read(this._updateRefs(true), 2), refTargets = _c[0], nextSelectorMap = _c[1];\r\n        var elementTargets = getElementTargets(refTargets, nextSelectorMap);\r\n        var isGroup = elementTargets.length > 1;\r\n        var totalAbles = moveableContructor.getTotalAbles();\r\n        var ables = __spreadArray(__spreadArray([], __read(totalAbles), false), __read((userAbles || [])), false);\r\n        var nextProps = __assign(__assign(__assign({}, props), (userProps || {})), { ables: ables, cssStyled: moveableContructor.defaultStyled, customStyledMap: moveableContructor.customStyledMap });\r\n        this._elementTargets = elementTargets;\r\n        var firstRenderState = null;\r\n        var prevMoveable = this.moveable;\r\n        var persistData = props.persistData;\r\n        if (persistData === null || persistData === void 0 ? void 0 : persistData.children) {\r\n            isGroup = true;\r\n        }\r\n        // Even one child is treated as a group if individualGroupable is enabled. #867\r\n        if (props.individualGroupable) {\r\n            return React.createElement(MoveableIndividualGroup, __assign({ key: \"individual-group\", ref: ref(this, \"moveable\") }, nextProps, { target: null, targets: elementTargets }));\r\n        }\r\n        if (isGroup) {\r\n            var targetGroups = getTargetGroups(refTargets, nextSelectorMap);\r\n            // manager\r\n            if (prevMoveable && !prevMoveable.props.groupable && !prevMoveable.props.individualGroupable) {\r\n                var target = prevMoveable.props.target;\r\n                if (target && elementTargets.indexOf(target) > -1) {\r\n                    firstRenderState = __assign({}, prevMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableGroup, __assign({ key: \"group\", ref: ref(this, \"moveable\") }, nextProps, (_a = props.groupableProps) !== null && _a !== void 0 ? _a : {}, { target: null, targets: elementTargets, targetGroups: targetGroups, firstRenderState: firstRenderState }));\r\n        }\r\n        else {\r\n            var target_1 = elementTargets[0];\r\n            // manager\r\n            if (prevMoveable && (prevMoveable.props.groupable || prevMoveable.props.individualGroupable)) {\r\n                var moveables = prevMoveable.moveables || [];\r\n                var prevTargetMoveable = find(moveables, function (mv) { return mv.props.target === target_1; });\r\n                if (prevTargetMoveable) {\r\n                    firstRenderState = __assign({}, prevTargetMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableManager, __assign({ key: \"single\", ref: ref(this, \"moveable\") }, nextProps, { target: target_1, firstRenderState: firstRenderState }));\r\n        }\r\n    };\r\n    InitialMoveable.prototype.componentDidMount = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentDidUpdate = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentWillUnmount = function () {\r\n        this.selectorMap = {};\r\n        this.refTargets = [];\r\n    };\r\n    /**\r\n     * Get targets set in moveable through target or targets of props.\r\n     * @method Moveable#getTargets\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\r\n     * });\r\n     *\r\n     * console.log(moveable.getTargets());\r\n     */\r\n    InitialMoveable.prototype.getTargets = function () {\r\n        var _a, _b;\r\n        return (_b = (_a = this.moveable) === null || _a === void 0 ? void 0 : _a.getTargets()) !== null && _b !== void 0 ? _b : [];\r\n    };\r\n    /**\r\n     * If the element list corresponding to the selector among the targets is changed, it is updated.\r\n     * @method Moveable#updateSelectors\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: \".target\",\r\n     * });\r\n     *\r\n     * moveable.updateSelectors();\r\n     */\r\n    InitialMoveable.prototype.updateSelectors = function () {\r\n        this.selectorMap = {};\r\n        this._updateRefs();\r\n        this.forceUpdate();\r\n    };\r\n    /**\r\n     * User changes target and waits for target to change.\r\n     * @method Moveable#waitToChangeTarget\r\n     * @story combination-with-other-components--components-selecto\r\n     * @example\r\n     * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\r\n     *   moveable.waitToChangeTarget().then(() => {\r\n     *      moveable.dragStart(e, e.currentTarget);\r\n     *   });\r\n     *   moveable.target = e.currentTarget;\r\n     * });\r\n     */\r\n    InitialMoveable.prototype.waitToChangeTarget = function () {\r\n        // let resolvePromise: (e: OnChangeTarget) => void;\r\n        var _this = this;\r\n        // this._onChangeTargets = () => {\r\n        //     this._onChangeTargets = null;\r\n        //     resolvePromise({\r\n        //         moveable: this.getManager(),\r\n        //         targets: this._elementTargets,\r\n        //     });\r\n        // };\r\n        // return new Promise<OnChangeTarget>(resolve => {\r\n        //     resolvePromise = resolve;\r\n        // });\r\n        var resolvePromise;\r\n        this._onChangeTargets = function () {\r\n            _this._onChangeTargets = null;\r\n            resolvePromise();\r\n        };\r\n        return new Promise(function (resolve) {\r\n            resolvePromise = resolve;\r\n        });\r\n    };\r\n    InitialMoveable.prototype.waitToChangeTargets = function () {\r\n        return this.waitToChangeTarget();\r\n    };\r\n    InitialMoveable.prototype.getManager = function () {\r\n        return this.moveable;\r\n    };\r\n    InitialMoveable.prototype.getMoveables = function () {\r\n        return this.moveable.getMoveables();\r\n    };\r\n    InitialMoveable.prototype.getDragElement = function () {\r\n        return this.moveable.getDragElement();\r\n    };\r\n    InitialMoveable.prototype._updateRefs = function (isRender) {\r\n        var prevRefTargets = this.refTargets;\r\n        var nextRefTargets = getRefTargets((this.props.target || this.props.targets));\r\n        var isBrowser = typeof document !== \"undefined\";\r\n        var isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\r\n        var selectorMap = this.selectorMap;\r\n        var nextSelectorMap = {};\r\n        this.refTargets.forEach(function updateSelectorMap(target) {\r\n            if (isString(target)) {\r\n                var selectorTarget = selectorMap[target];\r\n                if (selectorTarget) {\r\n                    nextSelectorMap[target] = selectorMap[target];\r\n                }\r\n                else if (isBrowser) {\r\n                    isUpdate = true;\r\n                    nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\r\n                }\r\n            }\r\n            else if (isArray(target)) {\r\n                target.forEach(updateSelectorMap);\r\n            }\r\n        });\r\n        this._tmpRefTargets = nextRefTargets;\r\n        this._tmpSelectorMap = nextSelectorMap;\r\n        return [\r\n            nextRefTargets,\r\n            nextSelectorMap,\r\n            !isRender && isUpdate,\r\n        ];\r\n    };\r\n    InitialMoveable.prototype._checkChangeTargets = function () {\r\n        var _a, _b, _c;\r\n        this.refTargets = this._tmpRefTargets;\r\n        this.selectorMap = this._tmpSelectorMap;\r\n        var _d = this._differ.update(this._elementTargets), added = _d.added, removed = _d.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged) {\r\n            (_b = (_a = this.props).onChangeTargets) === null || _b === void 0 ? void 0 : _b.call(_a, {\r\n                moveable: this.moveable,\r\n                targets: this._elementTargets,\r\n            });\r\n            (_c = this._onChangeTargets) === null || _c === void 0 ? void 0 : _c.call(this);\r\n        }\r\n        var _e = __read(this._updateRefs(), 3), refTargets = _e[0], selectorMap = _e[1], isUpdate = _e[2];\r\n        this.refTargets = refTargets;\r\n        this.selectorMap = selectorMap;\r\n        if (isUpdate) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    InitialMoveable.defaultAbles = [];\r\n    InitialMoveable.customStyledMap = {};\r\n    InitialMoveable.defaultStyled = null;\r\n    __decorate([\r\n        withMethods(MOVEABLE_METHODS)\r\n    ], InitialMoveable.prototype, \"moveable\", void 0);\r\n    return InitialMoveable;\r\n}(React.PureComponent));\n\nvar Moveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(Moveable, _super);\r\n    function Moveable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Moveable.defaultAbles = MOVEABLE_ABLES;\r\n    return Moveable;\r\n}(InitialMoveable));\n\nfunction makeMoveable(ables) {\r\n    var _a;\r\n    return _a = /*#__PURE__*/ (function (_super) {\r\n            __extends(Moveable, _super);\r\n            function Moveable() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            return Moveable;\r\n        }(InitialMoveable)),\r\n        _a.defaultAbles = ables,\r\n        _a;\r\n}\n\nexport { Clippable, DIRECTIONS, Draggable, edgeDraggable as EdgeDraggable, InitialMoveable, MOVEABLE_ABLES, MOVEABLE_EVENTS, MOVEABLE_METHODS, MOVEABLE_PROPS, Pinchable, Resizable, Rotatable, Roundable, Scalable, Snappable, Warpable, calculateElementPosition, Moveable as default, getElementInfo, makeAble, makeMoveable };\n","/*\nCopyright (c) 2019 Daybrush\nname: moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/moveable\nversion: 0.53.0\n*/\nimport { ref, Properties } from 'framework-utils';\nimport * as React from 'croact';\nimport { renderSelf } from 'croact';\nimport Moveable$1, { MOVEABLE_PROPS, MOVEABLE_METHODS, MOVEABLE_EVENTS, getElementInfo as getElementInfo$1, makeAble as makeAble$1 } from 'croact-moveable';\nimport { camelize, getDocument, isArray } from '@daybrush/utils';\nimport EventEmitter from '@scena/event-emitter';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\nvar InnerMoveable = /*#__PURE__*/function (_super) {\n  __extends(InnerMoveable, _super);\n\n  function InnerMoveable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {};\n    _this.state = _this.props;\n    return _this;\n  }\n\n  var __proto = InnerMoveable.prototype;\n\n  __proto.render = function () {\n    return React.createElement(Moveable$1, __assign({\n      ref: ref(this, \"moveable\")\n    }, this.state));\n  };\n\n  return InnerMoveable;\n}(React.Component);\n\nvar PROPERTIES = MOVEABLE_PROPS;\nvar METHODS = MOVEABLE_METHODS;\nvar EVENTS = MOVEABLE_EVENTS;\n\n/**\r\n * Moveable is Draggable! Resizable! Scalable! Rotatable!\r\n * @sort 1\r\n * @alias Moveable\r\n * @extends EventEmitter\r\n */\n\nvar MoveableManager = /*#__PURE__*/function (_super) {\n  __extends(MoveableManager, _super);\n  /**\r\n   *\r\n   */\n\n\n  function MoveableManager(parentElement, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.containerProvider = null;\n    _this.selfElement = null;\n    _this._warp = false;\n\n    var nextOptions = __assign({}, options);\n\n    var events = {};\n    EVENTS.forEach(function (name) {\n      events[camelize(\"on \".concat(name))] = function (e) {\n        return _this.trigger(name, e);\n      };\n    });\n    var selfElement;\n\n    if (options.warpSelf) {\n      delete options.warpSelf;\n      _this._warp = true;\n      selfElement = parentElement;\n    } else {\n      selfElement = getDocument(parentElement).createElement(\"div\");\n      parentElement.appendChild(selfElement);\n    }\n\n    _this.containerProvider = renderSelf(React.createElement(InnerMoveable, __assign({\n      ref: ref(_this, \"innerMoveable\")\n    }, nextOptions, events)), selfElement);\n    _this.selfElement = selfElement;\n    var target = nextOptions.target;\n\n    if (isArray(target) && target.length > 1) {\n      _this.updateRect();\n    }\n\n    return _this;\n  }\n\n  var __proto = MoveableManager.prototype;\n\n  __proto.setState = function (state, callback) {\n    this.innerMoveable.setState(state, callback);\n  };\n\n  __proto.forceUpdate = function (callback) {\n    this.innerMoveable.forceUpdate(callback);\n  };\n\n  __proto.dragStart = function (e, target) {\n    if (target === void 0) {\n      target = e.target;\n    }\n\n    var innerMoveable = this.innerMoveable;\n\n    if (innerMoveable.$_timer) {\n      this.forceUpdate();\n    }\n\n    this.getMoveable().dragStart(e, target);\n  };\n\n  __proto.destroy = function () {\n    var _a;\n\n    var selfElement = this.selfElement;\n    renderSelf(null, selfElement, this.containerProvider);\n\n    if (!this._warp) {\n      (_a = selfElement === null || selfElement === void 0 ? void 0 : selfElement.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(selfElement);\n    }\n\n    this.containerProvider = null;\n    this.off();\n    this.selfElement = null;\n    this.innerMoveable = null;\n  };\n\n  __proto.getMoveable = function () {\n    return this.innerMoveable.moveable;\n  };\n\n  MoveableManager = __decorate([Properties(METHODS, function (prototype, property) {\n    if (prototype[property]) {\n      return;\n    }\n\n    prototype[property] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var self = this.getMoveable();\n\n      if (!self || !self[property]) {\n        return;\n      }\n\n      return self[property].apply(self, args);\n    };\n  }), Properties(PROPERTIES, function (prototype, property) {\n    Object.defineProperty(prototype, property, {\n      get: function () {\n        return this.getMoveable().props[property];\n      },\n      set: function (value) {\n        var _a;\n\n        this.setState((_a = {}, _a[property] = value, _a));\n      },\n      enumerable: true,\n      configurable: true\n    });\n  })], MoveableManager);\n  return MoveableManager;\n}(EventEmitter);\n\nvar Moveable = /*#__PURE__*/function (_super) {\n  __extends(Moveable, _super);\n\n  function Moveable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Moveable;\n}(MoveableManager);\n\nfunction getElementInfo(target, container, rootContainer) {\n  return getElementInfo$1(target, container, rootContainer);\n}\nfunction makeAble(name, able) {\n  return makeAble$1(name, able);\n}\n\nexport { EVENTS, METHODS, PROPERTIES, Moveable as default, getElementInfo, makeAble };\n//# sourceMappingURL=moveable.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: keycon\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/keycon.git\nversion: 1.2.2\n*/\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.7.1\n*/\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\n\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\n\nvar STRING = \"string\";\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\n\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\n\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\n\nfunction isString(value) {\n  return typeof value === STRING;\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\n\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n\n  return defaultIndex;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\n\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\n\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\n\n/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar keycode = createCommonjsModule(function (module, exports) {\n// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\n\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  }\n\n  // Numbers\n  if ('number' === typeof searchInput) return names[searchInput]\n\n  // Everything else (cast to string)\n  var search = String(searchInput);\n\n  // check codes\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // check aliases\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // weird character?\n  if (search.length === 1) return search.charCodeAt(0)\n\n  return undefined\n}\n\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n    if (keyCode === null || keyCode === undefined) { return false; }\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    \n      // check aliases\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n};\n\n// Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n\n/*!\n * Programatically add the following\n */\n\n// lower case chars\nfor (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32;\n\n// numbers\nfor (var i = 48; i < 58; i++) codes[i - 48] = i;\n\n// function keys\nfor (i = 1; i < 13; i++) codes['f'+i] = i + 111;\n\n// numpad keys\nfor (i = 0; i < 10; i++) codes['numpad '+i] = i + 96;\n\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n\n// Create reverse mapping\nfor (i in codes) names[codes[i]] = i;\n\n// Add aliases\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}\n});\nvar keycode_1 = keycode.code;\nvar keycode_2 = keycode.codes;\nvar keycode_3 = keycode.aliases;\nvar keycode_4 = keycode.names;\nvar keycode_5 = keycode.title;\n\nvar codeData = {\n  \"+\": \"plus\",\n  \"left command\": \"meta\",\n  \"right command\": \"meta\"\n};\nvar keysSort = {\n  shift: 1,\n  ctrl: 2,\n  alt: 3,\n  meta: 4\n};\n/**\n * @memberof KeyController\n */\n\nfunction getKey(keyCode, keyName) {\n  var key = (keycode_4[keyCode] || keyName || \"\").toLowerCase();\n\n  for (var name in codeData) {\n    key = key.replace(name, codeData[name]);\n  }\n\n  return key.replace(/\\s/g, \"\");\n}\n/**\n * @memberof KeyController\n */\n\nfunction getCombi(e, key) {\n  if (key === void 0) {\n    key = getKey(e.keyCode, e.key);\n  }\n\n  var keys = getModifierCombi(e);\n  keys.indexOf(key) === -1 && keys.push(key);\n  return keys.filter(Boolean);\n}\n/**\n * @memberof KeyController\n */\n\nfunction getModifierCombi(e) {\n  var keys = [e.shiftKey && \"shift\", e.ctrlKey && \"ctrl\", e.altKey && \"alt\", e.metaKey && \"meta\"];\n  return keys.filter(Boolean);\n}\n\nfunction getArrangeCombi(keys) {\n  var arrangeKeys = keys.slice();\n  arrangeKeys.sort(function (prev, next) {\n    var prevScore = keysSort[prev] || 5;\n    var nextScore = keysSort[next] || 5;\n    return prevScore - nextScore;\n  });\n  return arrangeKeys;\n}\n\nvar globalKeyController;\n/**\n */\n\nvar KeyController =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(KeyController, _super);\n  /**\n   *\n   */\n\n\n  function KeyController(container) {\n    if (container === void 0) {\n      container = window;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.container = container;\n    /**\n     */\n\n    _this.ctrlKey = false;\n    /**\n     */\n\n    _this.altKey = false;\n    /**\n     *\n     */\n\n    _this.shiftKey = false;\n    /**\n     *\n     */\n\n    _this.metaKey = false;\n\n    _this.clear = function () {\n      _this.ctrlKey = false;\n      _this.altKey = false;\n      _this.shiftKey = false;\n      _this.metaKey = false;\n      return _this;\n    };\n\n    _this.keydownEvent = function (e) {\n      _this.triggerEvent(\"keydown\", e);\n    };\n\n    _this.keyupEvent = function (e) {\n      _this.triggerEvent(\"keyup\", e);\n    };\n\n    _this.blur = function () {\n      _this.clear();\n\n      _this.trigger(\"blur\");\n    };\n\n    addEvent(container, \"blur\", _this.blur);\n    addEvent(container, \"keydown\", _this.keydownEvent);\n    addEvent(container, \"keyup\", _this.keyupEvent);\n    return _this;\n  }\n\n  var __proto = KeyController.prototype;\n  Object.defineProperty(KeyController, \"global\", {\n    /**\n     */\n    get: function () {\n      return globalKeyController || (globalKeyController = new KeyController());\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  KeyController.setGlobal = function () {\n    return this.global;\n  };\n  /**\n   *\n   */\n\n\n  __proto.destroy = function () {\n    var container = this.container;\n    this.clear();\n    this.off();\n    removeEvent(container, \"blur\", this.blur);\n    removeEvent(container, \"keydown\", this.keydownEvent);\n    removeEvent(container, \"keyup\", this.keyupEvent);\n  };\n  /**\n   *\n   */\n\n\n  __proto.keydown = function (comb, callback) {\n    return this.addEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.offKeydown = function (comb, callback) {\n    return this.removeEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.offKeyup = function (comb, callback) {\n    return this.removeEvent(\"keyup\", comb, callback);\n  };\n  /**\n   *\n   */\n\n\n  __proto.keyup = function (comb, callback) {\n    return this.addEvent(\"keyup\", comb, callback);\n  };\n\n  __proto.addEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.on(type + \".\" + getArrangeCombi(comb).join(\".\"), callback);\n    } else if (isString(comb)) {\n      this.on(type + \".\" + comb, callback);\n    } else {\n      this.on(type, comb);\n    }\n\n    return this;\n  };\n\n  __proto.removeEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.off(type + \".\" + getArrangeCombi(comb).join(\".\"), callback);\n    } else if (isString(comb)) {\n      this.off(type + \".\" + comb, callback);\n    } else {\n      this.off(type, comb);\n    }\n\n    return this;\n  };\n\n  __proto.triggerEvent = function (type, e) {\n    this.ctrlKey = e.ctrlKey;\n    this.shiftKey = e.shiftKey;\n    this.altKey = e.altKey;\n    this.metaKey = e.metaKey;\n    var key = getKey(e.keyCode, e.key);\n    var isToggle = key === \"ctrl\" || key === \"shift\" || key === \"meta\" || key === \"alt\";\n    var param = {\n      key: key,\n      isToggle: isToggle,\n      inputEvent: e,\n      keyCode: e.keyCode,\n      ctrlKey: e.ctrlKey,\n      altKey: e.altKey,\n      shiftKey: e.shiftKey,\n      metaKey: e.metaKey\n    };\n    this.trigger(type, param);\n    this.trigger(type + \".\" + key, param);\n    var combi = getCombi(e, key);\n    combi.length > 1 && this.trigger(type + \".\" + combi.join(\".\"), param);\n  };\n\n  return KeyController;\n}(EventEmitter);\n\nexport default KeyController;\nexport { getCombi, getKey, getModifierCombi };\n//# sourceMappingURL=keycon.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: selecto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/selecto.git\nversion: 1.26.3\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport Gesto from 'gesto';\nimport { Properties } from 'framework-utils';\nimport { getDocument, hasClass, addClass, calculateBoundSize, getDist, getWindow, isObject, isString, isNode, removeEvent, isFunction, addEvent, isArray, camelize, splitUnit, between } from '@daybrush/utils';\nimport { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport KeyController, { getCombi } from 'keycon';\nimport { fitPoints, getOverlapPoints, isInside, getAreaSize } from 'overlap-area';\nimport { createMatrix, getDistElementMatrix, calculateMatrixDist } from 'css-to-mat';\nimport styled from 'css-styled';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction getClient(e) {\n  if (\"touches\" in e) {\n    var touch = e.touches[0] || e.changedTouches[0];\n    return {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    };\n  } else {\n    return {\n      clientX: e.clientX,\n      clientY: e.clientY\n    };\n  }\n}\nfunction filterDuplicated(arr) {\n  if (typeof Map === \"undefined\") {\n    return arr.filter(function (value, index) {\n      return arr.indexOf(value) === index;\n    });\n  }\n\n  var map = new Map();\n  return arr.filter(function (value) {\n    if (map.has(value)) {\n      return false;\n    }\n\n    map.set(value, true);\n    return true;\n  });\n}\nfunction elementFromPoint(baseNode, clientX, clientY) {\n  var doc = getDocument(baseNode);\n  return doc.elementFromPoint && doc.elementFromPoint(clientX, clientY) || null;\n}\nfunction createElement(jsx, prevTarget, container) {\n  var tag = jsx.tag,\n      children = jsx.children,\n      attributes = jsx.attributes,\n      className = jsx.className,\n      style = jsx.style;\n  var el = prevTarget || getDocument(container).createElement(tag);\n\n  for (var name in attributes) {\n    el.setAttribute(name, attributes[name]);\n  }\n\n  var elChildren = el.children;\n  children.forEach(function (child, i) {\n    createElement(child, elChildren[i], el);\n  });\n\n  if (className) {\n    className.split(/\\s+/g).forEach(function (name) {\n      if (name && !hasClass(el, name)) {\n        addClass(el, name);\n      }\n    });\n  }\n\n  if (style) {\n    var elStyle = el.style;\n\n    for (var name in style) {\n      elStyle[name] = style[name];\n    }\n  }\n\n  if (!prevTarget && container) {\n    container.appendChild(el);\n  }\n\n  return el;\n}\nfunction h(tag, attrs) {\n  var children = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n\n  var _a = attrs || {},\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      _c = _a.style,\n      style = _c === void 0 ? {} : _c,\n      attributes = __rest(_a, [\"className\", \"style\"]);\n\n  return {\n    tag: tag,\n    className: className,\n    style: style,\n    attributes: attributes,\n    children: children\n  };\n}\nfunction diffValue(prev, cur, func) {\n  if (prev !== cur) {\n    func(prev, cur);\n  }\n}\nfunction getRect(e, ratio, boundArea) {\n  var _a;\n\n  if (boundArea === void 0) {\n    boundArea = e.data.boundArea;\n  }\n\n  var _b = e.distX,\n      distX = _b === void 0 ? 0 : _b,\n      _c = e.distY,\n      distY = _c === void 0 ? 0 : _c;\n  var _d = e.data,\n      startX = _d.startX,\n      startY = _d.startY;\n\n  if (ratio > 0) {\n    var nextHeight = Math.sqrt((distX * distX + distY * distY) / (1 + ratio * ratio));\n    var nextWidth = ratio * nextHeight;\n    distX = (distX >= 0 ? 1 : -1) * nextWidth;\n    distY = (distY >= 0 ? 1 : -1) * nextHeight;\n  }\n\n  var width = Math.abs(distX);\n  var height = Math.abs(distY);\n  var maxWidth = distX < 0 ? startX - boundArea.left : boundArea.right - startX;\n  var maxHeight = distY < 0 ? startY - boundArea.top : boundArea.bottom - startY;\n  _a = calculateBoundSize([width, height], [0, 0], [maxWidth, maxHeight], !!ratio), width = _a[0], height = _a[1];\n  distX = (distX >= 0 ? 1 : -1) * width;\n  distY = (distY >= 0 ? 1 : -1) * height;\n  var tx = Math.min(0, distX);\n  var ty = Math.min(0, distY);\n  var left = startX + tx;\n  var top = startY + ty;\n  return {\n    left: left,\n    top: top,\n    right: left + width,\n    bottom: top + height,\n    width: width,\n    height: height\n  };\n}\nfunction getDefaultElementRect(el) {\n  var rect = el.getBoundingClientRect();\n  var left = rect.left,\n      top = rect.top,\n      width = rect.width,\n      height = rect.height;\n  return {\n    pos1: [left, top],\n    pos2: [left + width, top],\n    pos3: [left, top + height],\n    pos4: [left + width, top + height]\n  };\n}\nfunction passTargets(beforeTargets, afterTargets, continueSelectWithoutDeselect) {\n  var _a = diff(beforeTargets, afterTargets),\n      list = _a.list,\n      prevList = _a.prevList,\n      added = _a.added,\n      removed = _a.removed,\n      maintained = _a.maintained;\n\n  return __spreadArray(__spreadArray(__spreadArray([], added.map(function (index) {\n    return list[index];\n  }), true), removed.map(function (index) {\n    return prevList[index];\n  }), true), continueSelectWithoutDeselect ? maintained.map(function (_a) {\n    var nextIndex = _a[1];\n    return list[nextIndex];\n  }) : [], true);\n}\nfunction getLineSize(points) {\n  var size = 0;\n  var length = points.length;\n\n  for (var i = 1; i < length; ++i) {\n    size = Math.max(getDist(points[i], points[i - 1]), size);\n  }\n\n  return size;\n}\n\nvar injector = styled(\"\\n:host {\\n    position: fixed;\\n    display: none;\\n    border: 1px solid #4af;\\n    background: rgba(68, 170, 255, 0.5);\\n    pointer-events: none;\\n    will-change: transform;\\n    z-index: 100;\\n}\\n\");\n/**\n * @memberof Selecto\n */\n\nvar CLASS_NAME = \"selecto-selection \".concat(injector.className);\nvar PROPERTIES = [\"className\", \"boundContainer\", \"selectableTargets\", \"selectByClick\", \"selectFromInside\", \"continueSelect\", \"continueSelectWithoutDeselect\", \"toggleContinueSelect\", \"toggleContinueSelectWithoutDeselect\", \"keyContainer\", \"hitRate\", \"scrollOptions\", \"checkInput\", \"preventDefault\", \"ratio\", \"getElementRect\", \"preventDragFromInside\", \"rootContainer\", \"dragCondition\", \"clickBySelectEnd\", \"checkOverflow\", \"innerScrollOptions\"];\n/**\n * @memberof Selecto\n */\n\nvar OPTIONS = __spreadArray([// ignore target, container,\n\"dragContainer\", \"cspNonce\", \"preventClickEventOnDrag\", \"preventClickEventOnDragStart\", \"preventRightClick\"], PROPERTIES, true);\nvar OPTION_TYPES = {\n  className: String,\n  boundContainer: null,\n  portalContainer: null,\n  container: null,\n  dragContainer: null,\n  selectableTargets: Array,\n  selectByClick: Boolean,\n  selectFromInside: Boolean,\n  continueSelect: Boolean,\n  toggleContinueSelect: Array,\n  toggleContinueSelectWithoutDeselect: Array,\n  keyContainer: null,\n  hitRate: Number,\n  scrollOptions: Object,\n  checkInput: Boolean,\n  preventDefault: Boolean,\n  cspNonce: String,\n  ratio: Number,\n  getElementRect: Function,\n  preventDragFromInside: Boolean,\n  rootContainer: Object,\n  dragCondition: Function,\n  clickBySelectEnd: Boolean,\n  continueSelectWithoutDeselect: Boolean,\n  preventClickEventOnDragStart: Boolean,\n  preventClickEventOnDrag: Boolean,\n  checkOverflow: Boolean,\n  innerScrollOptions: Object\n};\n/**\n * @memberof Selecto\n */\n\nvar EVENTS = [\"dragStart\", \"drag\", \"dragEnd\", \"selectStart\", \"select\", \"selectEnd\", \"keydown\", \"keyup\", \"scroll\", \"innerScroll\"];\n/**\n * @memberof Selecto\n */\n\nvar METHODS = [\"clickTarget\", \"getSelectableElements\", \"setSelectedTargets\", \"getElementPoints\", \"getSelectedTargets\", \"findSelectableTargets\", \"triggerDragStart\", \"checkScroll\", \"selectTargetsByPoints\", \"setSelectedTargetsByPoints\"];\n\n/**\n * Selecto.js is a component that allows you to select elements in the drag area using the mouse or touch.\n * @sort 1\n * @extends EventEmitter\n */\n\nvar Selecto =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n  /**\n   *\n   */\n\n\n  function Selecto(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.selectedTargets = [];\n    _this.dragScroll = new DragScroll();\n\n    _this._onDragStart = function (e, clickedTarget) {\n      var data = e.data,\n          clientX = e.clientX,\n          clientY = e.clientY,\n          inputEvent = e.inputEvent;\n      var _a = _this.options,\n          selectFromInside = _a.selectFromInside,\n          selectByClick = _a.selectByClick,\n          rootContainer = _a.rootContainer,\n          boundContainer = _a.boundContainer,\n          _b = _a.preventDragFromInside,\n          preventDragFromInside = _b === void 0 ? true : _b,\n          clickBySelectEnd = _a.clickBySelectEnd,\n          dragCondition = _a.dragCondition;\n\n      if (dragCondition && !dragCondition(e)) {\n        e.stop();\n        return;\n      }\n\n      data.data = {};\n      var win = getWindow(_this.container);\n      data.innerWidth = win.innerWidth;\n      data.innerHeight = win.innerHeight;\n\n      _this.findSelectableTargets(data);\n\n      data.startSelectedTargets = _this.selectedTargets;\n      data.scaleMatrix = createMatrix();\n      data.containerX = 0;\n      data.containerY = 0;\n      var container = _this.container;\n      var boundArea = {\n        left: -Infinity,\n        top: -Infinity,\n        right: Infinity,\n        bottom: Infinity\n      };\n\n      if (rootContainer) {\n        var containerRect = _this.container.getBoundingClientRect();\n\n        data.containerX = containerRect.left;\n        data.containerY = containerRect.top;\n        data.scaleMatrix = getDistElementMatrix(_this.container, rootContainer);\n      }\n\n      if (boundContainer) {\n        var boundInfo = isObject(boundContainer) && \"element\" in boundContainer ? __assign({\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        }, boundContainer) : {\n          element: boundContainer,\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        };\n        var boundElement = boundInfo.element;\n        var rectElement = void 0;\n\n        if (boundElement) {\n          if (isString(boundElement)) {\n            rectElement = getDocument(container).querySelector(boundElement);\n          } else if (boundElement === true) {\n            rectElement = _this.container;\n          } else {\n            rectElement = boundElement;\n          }\n\n          var rect = rectElement.getBoundingClientRect();\n\n          if (boundInfo.left) {\n            boundArea.left = rect.left;\n          }\n\n          if (boundInfo.top) {\n            boundArea.top = rect.top;\n          }\n\n          if (boundInfo.right) {\n            boundArea.right = rect.right;\n          }\n\n          if (boundInfo.bottom) {\n            boundArea.bottom = rect.bottom;\n          }\n        }\n      }\n\n      data.boundArea = boundArea;\n      var hitRect = {\n        left: clientX,\n        top: clientY,\n        right: clientX,\n        bottom: clientY,\n        width: 0,\n        height: 0\n      };\n      var firstPassedTargets = []; // allow click on select\n\n      var allowClickBySelectEnd = selectByClick && !clickBySelectEnd;\n      var hasInsideTargets = false;\n\n      if (!selectFromInside || allowClickBySelectEnd) {\n        var pointTarget = _this._findElement(clickedTarget || inputEvent.target, // elementFromPoint(clientX, clientY),\n        data.selectableTargets);\n\n        hasInsideTargets = !!pointTarget;\n\n        if (allowClickBySelectEnd) {\n          firstPassedTargets = pointTarget ? [pointTarget] : [];\n        }\n      }\n\n      var isPreventSelect = !selectFromInside && hasInsideTargets; // prevent drag from inside when selectByClick is false\n\n      if (isPreventSelect && !selectByClick) {\n        e.stop();\n        return false;\n      }\n\n      var type = inputEvent.type;\n      var isTrusted = type === \"mousedown\" || type === \"touchstart\";\n      /**\n       * When the drag starts (triggers on mousedown or touchstart), the dragStart event is called.\n       * Call the stop () function if you have a specific element or don't want to raise a select\n       * @memberof Selecto\n       * @event dragStart\n       * @param {OnDragStart} - Parameters for the dragStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"dragStart\", e => {\n       *   if (e.inputEvent.target.tagName === \"SPAN\") {\n       *     e.stop();\n       *   }\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n      var result = !e.isClick && isTrusted ? _this.emit(\"dragStart\", __assign(__assign({}, e), {\n        data: data.data\n      })) : true;\n\n      if (!result) {\n        e.stop();\n        return false;\n      }\n\n      if (_this.continueSelect) {\n        firstPassedTargets = passTargets(_this.selectedTargets, firstPassedTargets, _this.continueSelectWithoutDeselect);\n        data.startPassedTargets = _this.selectedTargets;\n      } else {\n        data.startPassedTargets = [];\n      }\n\n      _this._select(firstPassedTargets, hitRect, e, true, isPreventSelect && selectByClick && !clickBySelectEnd && preventDragFromInside);\n\n      data.startX = clientX;\n      data.startY = clientY;\n      data.selectFlag = false;\n      data.preventDragFromInside = false;\n\n      if (inputEvent.target) {\n        var offsetPos = calculateMatrixDist(data.scaleMatrix, [clientX - data.containerX, clientY - data.containerY]);\n        _this.target.style.cssText += \"position: \".concat(rootContainer ? \"absolute\" : \"fixed\", \";\") + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px)\");\n      }\n\n      if (isPreventSelect && selectByClick && !clickBySelectEnd) {\n        inputEvent.preventDefault(); // prevent drag from inside when selectByClick is true and force call `selectEnd`\n\n        if (preventDragFromInside) {\n          _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, hitRect, e, true);\n\n          data.preventDragFromInside = true;\n        }\n      } else {\n        data.selectFlag = true; // why?\n        // if (type === \"touchstart\") {\n        //     inputEvent.preventDefault();\n        // }\n\n        var _c = _this.options,\n            scrollOptions = _c.scrollOptions,\n            innerScrollOptions = _c.innerScrollOptions;\n        var isInnerScroll = false;\n\n        if (innerScrollOptions) {\n          var inputEvent_1 = e.inputEvent;\n          var target = inputEvent_1.target;\n          var innerScrollElement = null;\n          var parentElement = target;\n\n          while (parentElement && parentElement !== getDocument(container).body) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              innerScrollElement = parentElement;\n              break;\n            }\n\n            parentElement = parentElement.parentElement;\n          }\n\n          if (innerScrollElement) {\n            data.innerScrollOptions = __assign({\n              container: innerScrollElement,\n              checkScrollEvent: true\n            }, innerScrollOptions === true ? {} : innerScrollOptions);\n\n            _this.dragScroll.dragStart(e, data.innerScrollOptions);\n\n            isInnerScroll = true;\n          }\n        }\n\n        if (!isInnerScroll && scrollOptions && scrollOptions.container) {\n          _this.dragScroll.dragStart(e, scrollOptions);\n        }\n\n        if (isPreventSelect && selectByClick && clickBySelectEnd) {\n          data.selectFlag = false;\n          e.preventDrag();\n        }\n      }\n\n      return true;\n    };\n\n    _this._onDrag = function (e) {\n      if (e.data.selectFlag) {\n        var scrollOptions = _this.scrollOptions;\n        var innerScrollOptions = e.data.innerScrollOptions;\n        var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n        if (hasScrollOptions && !e.isScroll && _this.dragScroll.drag(e, innerScrollOptions || scrollOptions)) {\n          return;\n        }\n      }\n\n      _this._checkSelected(e);\n    };\n\n    _this._onDragEnd = function (e) {\n      var data = e.data,\n          inputEvent = e.inputEvent;\n      var rect = getRect(e, _this.options.ratio);\n      var selectFlag = data.selectFlag;\n      var container = _this.container;\n      /**\n       * When the drag ends (triggers on mouseup or touchend after drag), the dragEnd event is called.\n       * @memberof Selecto\n       * @event dragEnd\n       * @param {OnDragEnd} - Parameters for the dragEnd event\n       */\n\n      if (inputEvent) {\n        _this.emit(\"dragEnd\", __assign(__assign({\n          isDouble: !!e.isDouble,\n          isClick: !!e.isClick,\n          isDrag: false,\n          isSelect: selectFlag\n        }, e), {\n          data: data.data,\n          rect: rect\n        }));\n      }\n\n      _this.target.style.cssText += \"display: none;\";\n\n      if (selectFlag) {\n        data.selectFlag = false;\n\n        _this.dragScroll.dragEnd();\n      } else if (_this.selectByClick && _this.clickBySelectEnd) {\n        // only clickBySelectEnd\n        var pointTarget = _this._findElement((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.target) || elementFromPoint(container, e.clientX, e.clientY), data.selectableTargets);\n\n        _this._select(pointTarget ? [pointTarget] : [], rect, e);\n      }\n\n      if (!data.preventDragFromInside) {\n        _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, rect, e);\n      }\n    };\n\n    _this._onKeyDown = function (e) {\n      var options = _this.options;\n      var isKeyDown = false;\n\n      if (!_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect);\n\n        _this._keydownContinueSelect = result;\n        isKeyDown || (isKeyDown = result);\n      }\n\n      if (!_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect);\n\n        _this._keydownContinueSelectWithoutDeselection = result;\n        isKeyDown || (isKeyDown = result);\n      }\n\n      if (!isKeyDown) {\n        return;\n      }\n      /**\n       * When you keydown the key you specified in toggleContinueSelect, the keydown event is called.\n       * @memberof Selecto\n       * @event keydown\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keydown\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onKeyUp = function (e) {\n      var options = _this.options;\n      var isKeyUp = false;\n\n      if (_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect, true);\n\n        _this._keydownContinueSelect = !result;\n        isKeyUp || (isKeyUp = result);\n      }\n\n      if (_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect, true);\n\n        _this._keydownContinueSelectWithoutDeselection = !result;\n        isKeyUp || (isKeyUp = result);\n      }\n\n      if (!isKeyUp) {\n        return;\n      }\n      /**\n       * When you keyup the key you specified in toggleContinueSelect, the keyup event is called.\n       * @memberof Selecto\n       * @event keyup\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keyup\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onBlur = function () {\n      if (_this._keydownContinueSelect || _this._keydownContinueSelectWithoutDeselection) {\n        _this._keydownContinueSelect = false;\n        _this._keydownContinueSelectWithoutDeselection = false;\n\n        _this.emit(\"keyup\", {\n          keydownContinueSelect: _this._keydownContinueSelect,\n          keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n        });\n      }\n    };\n\n    _this._onDocumentSelectStart = function (e) {\n      var doc = getDocument(_this.container);\n\n      if (!_this.gesto.isFlag()) {\n        return;\n      }\n\n      var dragContainer = _this.dragContainer;\n\n      if (dragContainer === getWindow(_this.container)) {\n        dragContainer = doc.documentElement;\n      }\n\n      var containers = isNode(dragContainer) ? [dragContainer] : [].slice.call(dragContainer);\n      var target = e.target;\n      containers.some(function (container) {\n        if (container === target || container.contains(target)) {\n          e.preventDefault();\n          return true;\n        }\n      });\n    };\n\n    _this.target = options.portalContainer;\n    var container = options.container;\n    _this.options = __assign({\n      className: \"\",\n      portalContainer: null,\n      container: null,\n      dragContainer: null,\n      selectableTargets: [],\n      selectByClick: true,\n      selectFromInside: true,\n      clickBySelectEnd: false,\n      hitRate: 100,\n      continueSelect: false,\n      continueSelectWithoutDeselect: false,\n      toggleContinueSelect: null,\n      toggleContinueSelectWithoutDeselect: null,\n      keyContainer: null,\n      scrollOptions: null,\n      checkInput: false,\n      preventDefault: false,\n      boundContainer: false,\n      preventDragFromInside: true,\n      dragCondition: null,\n      rootContainer: null,\n      checkOverflow: false,\n      innerScrollOptions: false,\n      getElementRect: getDefaultElementRect,\n      cspNonce: \"\",\n      ratio: 0\n    }, options);\n    var portalContainer = _this.options.portalContainer;\n\n    if (portalContainer) {\n      container = portalContainer.parentElement;\n    }\n\n    _this.container = container || document.body;\n\n    _this.initElement();\n\n    _this.initDragScroll();\n\n    _this.setKeyController();\n\n    return _this;\n  }\n  /**\n   * You can set the currently selected targets.\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  var __proto = Selecto.prototype;\n\n  __proto.setSelectedTargets = function (selectedTargets) {\n    var beforeSelected = this.selectedTargets;\n\n    var _a = diff(beforeSelected, selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    this.selectedTargets = selectedTargets;\n    return {\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      beforeSelected: beforeSelected,\n      selected: selectedTargets\n    };\n  };\n  /**\n   * You can set the currently selected targets by points\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  __proto.setSelectedTargetsByPoints = function (point1, point2) {\n    var left = Math.min(point1[0], point2[0]);\n    var top = Math.min(point1[1], point2[1]);\n    var right = Math.max(point1[0], point2[0]);\n    var bottom = Math.max(point1[1], point2[1]);\n    var rect = {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: right - left,\n      height: bottom - top\n    };\n    var data = {\n      ignoreClick: true\n    };\n    this.findSelectableTargets(data);\n    var selectedElements = this.hitTest(rect, data, true, null);\n    var result = this.setSelectedTargets(selectedElements);\n    return __assign(__assign({}, result), {\n      rect: rect\n    });\n  };\n  /**\n   * Select target by virtual drag from startPoint to endPoint.\n   * The target of inputEvent is null.\n   */\n\n\n  __proto.selectTargetsByPoints = function (startPoint, endPoint) {\n    var mousedown = new MouseEvent(\"mousedown\", {\n      clientX: startPoint[0],\n      clientY: startPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mousemove = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mouseup = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var gesto = this.gesto;\n    var result = gesto.onDragStart(mousedown);\n\n    if (result !== false) {\n      gesto.onDrag(mousemove);\n      gesto.onDragEnd(mouseup);\n    }\n  };\n  /**\n   * You can get the currently selected targets.\n   */\n\n\n  __proto.getSelectedTargets = function () {\n    return this.selectedTargets;\n  };\n  /**\n   * `OnDragStart` is triggered by an external event.\n   * @param - external event\n   * @example\n   * import Selecto from \"selecto\";\n   *\n   * const selecto = new Selecto();\n   *\n   * window.addEventListener(\"mousedown\", e => {\n   *   selecto.triggerDragStart(e);\n   * });\n   */\n\n\n  __proto.triggerDragStart = function (e) {\n    this.gesto.triggerDragStart(e);\n    return this;\n  };\n  /**\n   * Destroy elements, properties, and events.\n   */\n\n\n  __proto.destroy = function () {\n    var _a;\n\n    this.off();\n    this.keycon && this.keycon.destroy();\n    this.gesto.unset();\n    this.injectResult.destroy();\n    this.dragScroll.dragEnd();\n    removeEvent(document, \"selectstart\", this._onDocumentSelectStart);\n\n    if (!this.options.portalContainer) {\n      (_a = this.target.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.target);\n    }\n\n    this.keycon = null;\n    this.gesto = null;\n    this.injectResult = null;\n    this.target = null;\n    this.container = null;\n    this.options = null;\n  };\n\n  __proto.getElementPoints = function (target) {\n    var getElementRect = this.getElementRect || getDefaultElementRect;\n    var info = getElementRect(target);\n    var points = [info.pos1, info.pos2, info.pos4, info.pos3];\n\n    if (getElementRect !== getDefaultElementRect) {\n      var rect = target.getBoundingClientRect();\n      return fitPoints(points, rect);\n    }\n\n    return points;\n  };\n  /**\n   * Get all elements set in `selectableTargets`.\n   */\n\n\n  __proto.getSelectableElements = function () {\n    var container = this.container;\n    var selectableElements = [];\n    this.options.selectableTargets.forEach(function (target) {\n      if (isFunction(target)) {\n        var result = target();\n\n        if (result) {\n          selectableElements.push.apply(selectableElements, [].slice.call(result));\n        }\n      } else if (isNode(target)) {\n        selectableElements.push(target);\n      } else if (isObject(target)) {\n        selectableElements.push(target.value || target.current);\n      } else {\n        var elements = [].slice.call(getDocument(container).querySelectorAll(target));\n        selectableElements.push.apply(selectableElements, elements);\n      }\n    });\n    return selectableElements;\n  };\n  /**\n   * If scroll occurs during dragging, you can manually call this method to check the position again.\n   */\n\n\n  __proto.checkScroll = function () {\n    if (!this.gesto.isFlag()) {\n      return;\n    }\n\n    var scrollOptions = this.scrollOptions;\n    var innerScrollOptions = this.gesto.getEventData().innerScrollOptions;\n    var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n    if (hasScrollOptions) {\n      this.dragScroll.checkScroll(__assign({\n        inputEvent: this.gesto.getCurrentEvent()\n      }, innerScrollOptions || scrollOptions));\n    }\n  };\n  /**\n   * Find for selectableTargets again during drag event\n   * You can update selectable targets during an event.\n   */\n\n\n  __proto.findSelectableTargets = function (data) {\n    var _this = this;\n\n    if (data === void 0) {\n      data = this.gesto.getEventData();\n    }\n\n    var selectableTargets = this.getSelectableElements();\n    var selectablePoints = selectableTargets.map(function (target) {\n      return _this.getElementPoints(target);\n    });\n    data.selectableTargets = selectableTargets;\n    data.selectablePoints = selectablePoints;\n    data.selectableParentMap = null;\n    var options = this.options;\n    var hasIndexesMap = options.checkOverflow || options.innerScrollOptions;\n    var doc = getDocument(this.container);\n\n    if (hasIndexesMap) {\n      var parentMap_1 = new Map();\n      data.selectableInnerScrollParentMap = parentMap_1;\n      data.selectableInnerScrollPathsList = selectableTargets.map(function (target, index) {\n        var parentElement = target.parentElement;\n        var parents = [];\n        var paths = [];\n\n        var _loop_1 = function () {\n          var info = parentMap_1.get(parentElement);\n\n          if (!info) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              var rect = getDefaultElementRect(parentElement);\n              info = {\n                parentElement: parentElement,\n                indexes: [],\n                points: [rect.pos1, rect.pos2, rect.pos4, rect.pos3],\n                paths: __spreadArray([], paths, true)\n              };\n              parents.push(parentElement);\n              parents.forEach(function (prevParentElement) {\n                parentMap_1.set(prevParentElement, info);\n              });\n              parents = [];\n            }\n          }\n\n          if (info) {\n            parentElement = info.parentElement;\n            parentMap_1.get(parentElement).indexes.push(index);\n            paths.push(parentElement);\n          } else {\n            parents.push(parentElement);\n          }\n\n          parentElement = parentElement.parentElement;\n        };\n\n        while (parentElement && parentElement !== doc.body) {\n          _loop_1();\n        }\n\n        return paths;\n      });\n    }\n\n    if (!options.checkOverflow) {\n      data.selectableInners = selectableTargets.map(function () {\n        return true;\n      });\n    }\n\n    this._refreshGroups(data);\n\n    return selectableTargets;\n  };\n  /**\n   * External click or mouse events can be applied to the selecto.\n   * @params - Extenal click or mouse event\n   * @params - Specify the clicked target directly.\n   */\n\n\n  __proto.clickTarget = function (e, clickedTarget) {\n    var _a = getClient(e),\n        clientX = _a.clientX,\n        clientY = _a.clientY;\n\n    var dragEvent = {\n      data: {\n        selectFlag: false\n      },\n      clientX: clientX,\n      clientY: clientY,\n      inputEvent: e,\n      isClick: true,\n      isTrusted: false,\n      stop: function () {\n        return false;\n      }\n    };\n\n    if (this._onDragStart(dragEvent, clickedTarget)) {\n      this._onDragEnd(dragEvent);\n    }\n\n    return this;\n  };\n\n  __proto.setKeyController = function () {\n    var _a = this.options,\n        keyContainer = _a.keyContainer,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (this.keycon) {\n      this.keycon.destroy();\n      this.keycon = null;\n    }\n\n    if (toggleContinueSelect || toggleContinueSelectWithoutDeselect) {\n      this.keycon = new KeyController(keyContainer || getWindow(this.container));\n      this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on(\"blur\", this._onBlur);\n    }\n  };\n\n  __proto.setClassName = function (nextClassName) {\n    this.options.className = nextClassName;\n    this.target.setAttribute(\"class\", \"\".concat(CLASS_NAME, \" \").concat(nextClassName || \"\"));\n  };\n\n  __proto.setKeyEvent = function () {\n    var _a = this.options,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelect && !toggleContinueSelectWithoutDeselect || this.keycon) {\n      return;\n    }\n\n    this.setKeyController();\n  }; // with getter, setter property\n\n\n  __proto.setKeyContainer = function (keyContainer) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.keyContainer, keyContainer, function () {\n      options.keyContainer = keyContainer;\n\n      _this.setKeyController();\n    });\n  };\n\n  __proto.getContinueSelect = function () {\n    var _a = this.options,\n        continueSelect = _a.continueSelect,\n        toggleContinueSelect = _a.toggleContinueSelect;\n\n    if (!toggleContinueSelect || !this._keydownContinueSelect) {\n      return continueSelect;\n    }\n\n    return !continueSelect;\n  };\n\n  __proto.getContinueSelectWithoutDeselect = function () {\n    var _a = this.options,\n        continueSelectWithoutDeselect = _a.continueSelectWithoutDeselect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelectWithoutDeselect || !this._keydownContinueSelectWithoutDeselection) {\n      return continueSelectWithoutDeselect;\n    }\n\n    return !continueSelectWithoutDeselect;\n  };\n\n  __proto.setToggleContinueSelect = function (toggleContinueSelect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelect, toggleContinueSelect, function () {\n      options.toggleContinueSelect = toggleContinueSelect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setToggleContinueSelectWithoutDeselect = function (toggleContinueSelectWithoutDeselect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelectWithoutDeselect, toggleContinueSelectWithoutDeselect, function () {\n      options.toggleContinueSelectWithoutDeselect = toggleContinueSelectWithoutDeselect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setPreventDefault = function (value) {\n    this.gesto.options.preventDefault = value;\n  };\n\n  __proto.setCheckInput = function (value) {\n    this.gesto.options.checkInput = value;\n  };\n\n  __proto.initElement = function () {\n    var _a = this.options,\n        dragContainer = _a.dragContainer,\n        checkInput = _a.checkInput,\n        preventDefault = _a.preventDefault,\n        preventClickEventOnDragStart = _a.preventClickEventOnDragStart,\n        preventClickEventOnDrag = _a.preventClickEventOnDrag,\n        preventClickEventByCondition = _a.preventClickEventByCondition,\n        _b = _a.preventRightClick,\n        preventRightClick = _b === void 0 ? true : _b,\n        className = _a.className;\n    var container = this.container;\n    this.target = createElement(h(\"div\", {\n      className: \"\".concat(CLASS_NAME, \" \").concat(className || \"\")\n    }), this.target, container);\n    var target = this.target;\n    this.dragContainer = typeof dragContainer === \"string\" ? [].slice.call(getDocument(container).querySelectorAll(dragContainer)) : dragContainer || this.target.parentNode;\n    this.gesto = new Gesto(this.dragContainer, {\n      checkWindowBlur: true,\n      container: getWindow(container),\n      checkInput: checkInput,\n      preventDefault: preventDefault,\n      preventClickEventOnDragStart: preventClickEventOnDragStart,\n      preventClickEventOnDrag: preventClickEventOnDrag,\n      preventClickEventByCondition: preventClickEventByCondition,\n      preventRightClick: preventRightClick\n    }).on({\n      dragStart: this._onDragStart,\n      drag: this._onDrag,\n      dragEnd: this._onDragEnd\n    });\n    addEvent(document, \"selectstart\", this._onDocumentSelectStart);\n    this.injectResult = injector.inject(target, {\n      nonce: this.options.cspNonce\n    });\n  };\n\n  __proto.hitTest = function (selectRect, data, isDrag, gestoEvent) {\n    var _a = this.options,\n        hitRate = _a.hitRate,\n        selectByClick = _a.selectByClick;\n    var left = selectRect.left,\n        top = selectRect.top,\n        right = selectRect.right,\n        bottom = selectRect.bottom;\n    var innerGroups = data.innerGroups;\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var clientX = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientX;\n    var clientY = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientY;\n    var ignoreClick = data.ignoreClick;\n    var rectPoints = [[left, top], [right, top], [right, bottom], [left, bottom]];\n\n    var isHit = function (points, el) {\n      var hitRateValue = typeof hitRate === \"function\" ? splitUnit(\"\".concat(hitRate(el))) : splitUnit(\"\".concat(hitRate));\n      var inArea = ignoreClick ? false : isInside([clientX, clientY], points);\n\n      if (!isDrag && selectByClick && inArea) {\n        return true;\n      }\n\n      var overlapPoints = getOverlapPoints(rectPoints, points);\n\n      if (!overlapPoints.length) {\n        return false;\n      }\n\n      var overlapSize = getAreaSize(overlapPoints); // Line\n\n      var targetSize = 0;\n\n      if (overlapSize === 0 && getAreaSize(points) === 0) {\n        targetSize = getLineSize(points);\n        overlapSize = getLineSize(overlapPoints);\n      } else {\n        targetSize = getAreaSize(points);\n      }\n\n      if (hitRateValue.unit === \"px\") {\n        return overlapSize >= hitRateValue.value;\n      } else {\n        var rate = between(Math.round(overlapSize / targetSize * 100), 0, 100);\n        return rate >= Math.min(100, hitRateValue.value);\n      }\n    };\n\n    var selectableTargets = data.selectableTargets;\n    var selectablePoints = data.selectablePoints;\n    var selectableInners = data.selectableInners;\n\n    if (!innerGroups) {\n      return selectableTargets.filter(function (_, i) {\n        if (!selectableInners[i]) {\n          return false;\n        }\n\n        return isHit(selectablePoints[i], selectableTargets[i]);\n      });\n    }\n\n    var selectedTargets = [];\n    var minX = Math.floor(left / innerWidth);\n    var maxX = Math.floor(right / innerWidth);\n    var minY = Math.floor(top / innerHeight);\n    var maxY = Math.floor(bottom / innerHeight);\n\n    for (var x = minX; x <= maxX; ++x) {\n      var yGroups = innerGroups[x];\n\n      if (!yGroups) {\n        continue;\n      }\n\n      for (var y = minY; y <= maxY; ++y) {\n        var group = yGroups[y];\n\n        if (!group) {\n          continue;\n        }\n\n        group.forEach(function (index) {\n          var points = selectablePoints[index];\n          var inner = selectableInners[index];\n          var target = selectableTargets[index];\n\n          if (inner && isHit(points, target)) {\n            selectedTargets.push(target);\n          }\n        });\n      }\n    }\n\n    return filterDuplicated(selectedTargets);\n  };\n\n  __proto.initDragScroll = function () {\n    var _this = this;\n\n    this.dragScroll.on(\"scrollDrag\", function (_a) {\n      var next = _a.next;\n      next(_this.gesto.getCurrentEvent());\n    }).on(\"scroll\", function (_a) {\n      var container = _a.container,\n          direction = _a.direction;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      if (innerScrollOptions) {\n        _this.emit(\"innerScroll\", {\n          container: container,\n          direction: direction\n        });\n      } else {\n        _this.emit(\"scroll\", {\n          container: container,\n          direction: direction\n        });\n      }\n    }).on(\"move\", function (_a) {\n      var offsetX = _a.offsetX,\n          offsetY = _a.offsetY,\n          inputEvent = _a.inputEvent;\n      var gesto = _this.gesto;\n\n      if (!gesto || !gesto.isFlag()) {\n        return;\n      }\n\n      var data = _this.gesto.getEventData();\n\n      var boundArea = data.boundArea;\n      data.startX -= offsetX;\n      data.startY -= offsetY;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      var container = innerScrollOptions === null || innerScrollOptions === void 0 ? void 0 : innerScrollOptions.container;\n      var isMoveInnerScroll = false;\n\n      if (container) {\n        var parentMap_2 = data.selectableInnerScrollParentMap;\n        var parentInfo = parentMap_2.get(container);\n\n        if (parentInfo) {\n          parentInfo.paths.forEach(function (scrollContainer) {\n            var containerInfo = parentMap_2.get(scrollContainer);\n            containerInfo.points.forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          parentInfo.indexes.forEach(function (index) {\n            data.selectablePoints[index].forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          isMoveInnerScroll = true;\n        }\n      }\n\n      if (!isMoveInnerScroll) {\n        data.selectablePoints.forEach(function (points) {\n          points.forEach(function (pos) {\n            pos[0] -= offsetX;\n            pos[1] -= offsetY;\n          });\n        });\n      }\n\n      _this._refreshGroups(data);\n\n      boundArea.left -= offsetX;\n      boundArea.right -= offsetX;\n      boundArea.top -= offsetY;\n      boundArea.bottom -= offsetY;\n\n      _this.gesto.scrollBy(offsetX, offsetY, inputEvent.inputEvent);\n\n      _this._checkSelected(_this.gesto.getCurrentEvent());\n    });\n  };\n\n  __proto._select = function (selectedTargets, rect, e, isStart, isDragStartEnd) {\n    if (isDragStartEnd === void 0) {\n      isDragStartEnd = false;\n    }\n\n    var inputEvent = e.inputEvent;\n    var data = e.data;\n    var result = this.setSelectedTargets(selectedTargets);\n\n    var _a = diff(data.startSelectedTargets, selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    var startResult = {\n      startSelected: prevList,\n      startAdded: added.map(function (i) {\n        return list[i];\n      }),\n      startRemoved: removed.map(function (i) {\n        return prevList[i];\n      })\n    };\n\n    if (isStart) {\n      /**\n       * When the select(drag) starts, the selectStart event is called.\n       * @memberof Selecto\n       * @event selectStart\n       * @param {Selecto.OnSelect} - Parameters for the selectStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"selectStart\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * }).on(\"selectEnd\", e => {\n       *   e.afterAdded.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.afterRemoved.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"selectStart\", __assign(__assign(__assign({}, result), startResult), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted,\n        isDragStartEnd: isDragStartEnd\n      }));\n    }\n\n    if (result.added.length || result.removed.length) {\n      /**\n       * When the select in real time, the select event is called.\n       * @memberof Selecto\n       * @event select\n       * @param {Selecto.OnSelect} - Parameters for the select event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"select\", __assign(__assign(__assign({}, result), startResult), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted,\n        isDragStartEnd: isDragStartEnd\n      }));\n    }\n  };\n\n  __proto._selectEnd = function (startSelectedTargets, startPassedTargets, rect, e, isDragStartEnd) {\n    if (isDragStartEnd === void 0) {\n      isDragStartEnd = false;\n    }\n\n    var inputEvent = e.inputEvent,\n        isDouble = e.isDouble,\n        data = e.data;\n    var type = inputEvent && inputEvent.type;\n    var isDragStart = type === \"mousedown\" || type === \"touchstart\";\n\n    var _a = diff(startSelectedTargets, this.selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    var _b = diff(startPassedTargets, this.selectedTargets),\n        afterAdded = _b.added,\n        afterRemoved = _b.removed,\n        afterPrevList = _b.prevList,\n        afterList = _b.list;\n    /**\n     * When the select(dragEnd or click) ends, the selectEnd event is called.\n     * @memberof Selecto\n     * @event selectEnd\n     * @param {Selecto.OnSelectEnd} - Parameters for the selectEnd event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"selectStart\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * }).on(\"selectEnd\", e => {\n     *   e.afterAdded.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.afterRemoved.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n\n    this.emit(\"selectEnd\", {\n      startSelected: startSelectedTargets,\n      beforeSelected: startPassedTargets,\n      selected: this.selectedTargets,\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      afterAdded: afterAdded.map(function (index) {\n        return afterList[index];\n      }),\n      afterRemoved: afterRemoved.map(function (index) {\n        return afterPrevList[index];\n      }),\n      isDragStart: isDragStart && isDragStartEnd,\n      isDragStartEnd: isDragStart && isDragStartEnd,\n      isClick: !!e.isClick,\n      isDouble: !!isDouble,\n      rect: rect,\n      inputEvent: inputEvent,\n      data: data.data,\n      isTrusted: e.isTrusted\n    });\n  };\n\n  __proto._checkSelected = function (e, rect) {\n    if (rect === void 0) {\n      rect = getRect(e, this.options.ratio);\n    }\n\n    var data = e.data;\n    var top = rect.top,\n        left = rect.left,\n        width = rect.width,\n        height = rect.height;\n    var selectFlag = data.selectFlag;\n    var containerX = data.containerX,\n        containerY = data.containerY,\n        scaleMatrix = data.scaleMatrix;\n    var offsetPos = calculateMatrixDist(scaleMatrix, [left - containerX, top - containerY]);\n    var offsetSize = calculateMatrixDist(scaleMatrix, [width, height]);\n    var selectedTargets = [];\n\n    if (selectFlag) {\n      this.target.style.cssText += \"display: block;\" + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px);\") + \"width:\".concat(offsetSize[0], \"px;height:\").concat(offsetSize[1], \"px;\");\n      var passedTargets = this.hitTest(rect, data, true, e);\n      selectedTargets = passTargets(data.startPassedTargets, passedTargets, this.continueSelect && this.continueSelectWithoutDeselect);\n    }\n    /**\n     * When the drag, the drag event is called.\n     * Call the stop () function if you have a specific element or don't want to raise a select\n     * @memberof Selecto\n     * @event drag\n     * @param {OnDrag} - Parameters for the drag event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"drag\", e => {\n     *   e.stop();\n     * }).on(\"select\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n\n    var result = this.emit(\"drag\", __assign(__assign({}, e), {\n      data: data.data,\n      isSelect: selectFlag,\n      rect: rect\n    }));\n\n    if (result === false) {\n      this.target.style.cssText += \"display: none;\";\n      e.stop();\n      return;\n    }\n\n    if (selectFlag) {\n      this._select(selectedTargets, rect, e);\n    }\n  };\n\n  __proto._sameCombiKey = function (e, keys, isKeyup) {\n    if (!keys) {\n      return false;\n    }\n\n    var combi = getCombi(e.inputEvent, e.key);\n    var nextKeys = [].concat(keys);\n    var toggleKeys = isArray(nextKeys[0]) ? nextKeys : [nextKeys];\n\n    if (isKeyup) {\n      var singleKey_1 = e.key;\n      return toggleKeys.some(function (keys) {\n        return keys.some(function (key) {\n          return key === singleKey_1;\n        });\n      });\n    }\n\n    return toggleKeys.some(function (keys) {\n      return keys.every(function (key) {\n        return combi.indexOf(key) > -1;\n      });\n    });\n  };\n\n  __proto._findElement = function (clickedTarget, selectableTargets) {\n    var pointTarget = clickedTarget;\n\n    while (pointTarget) {\n      if (selectableTargets.indexOf(pointTarget) > -1) {\n        break;\n      }\n\n      pointTarget = pointTarget.parentElement;\n    }\n\n    return pointTarget;\n  };\n\n  __proto._refreshGroups = function (data) {\n    var _a;\n\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var selectablePoints = data.selectablePoints;\n\n    if (this.options.checkOverflow) {\n      var innerScrollContainer_1 = (_a = this.gesto.getEventData().innerScrollOptions) === null || _a === void 0 ? void 0 : _a.container;\n      var parentMap_3 = data.selectableInnerScrollParentMap;\n      var innerScrollPathsList = data.selectableInnerScrollPathsList;\n      data.selectableInners = innerScrollPathsList.map(function (innerScrollPaths, i) {\n        var isAlwaysTrue = false;\n        return innerScrollPaths.every(function (target) {\n          if (isAlwaysTrue) {\n            return true;\n          }\n\n          if (target === innerScrollContainer_1) {\n            isAlwaysTrue = true;\n            return true;\n          }\n\n          var rect = parentMap_3.get(target);\n\n          if (rect) {\n            var points1 = selectablePoints[i];\n            var points2 = rect.points;\n            var overlapPoints = getOverlapPoints(points1, points2);\n\n            if (!overlapPoints.length) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n      });\n    }\n\n    if (!innerWidth || !innerHeight) {\n      data.innerGroups = null;\n    } else {\n      var selectablePoints_1 = data.selectablePoints;\n      var groups_1 = {};\n      selectablePoints_1.forEach(function (points, i) {\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        points.forEach(function (pos) {\n          var x = Math.floor(pos[0] / innerWidth);\n          var y = Math.floor(pos[1] / innerHeight);\n          minX = Math.min(x, minX);\n          maxX = Math.max(x, maxX);\n          minY = Math.min(y, minY);\n          maxY = Math.max(y, maxY);\n        });\n\n        for (var x = minX; x <= maxX; ++x) {\n          for (var y = minY; y <= maxY; ++y) {\n            groups_1[x] = groups_1[x] || {};\n            groups_1[x][y] = groups_1[x][y] || [];\n            groups_1[x][y].push(i);\n          }\n        }\n      });\n      data.innerGroups = groups_1;\n    }\n  };\n\n  Selecto = __decorate([Properties(PROPERTIES, function (prototype, property) {\n    var attributes = {\n      enumerable: true,\n      configurable: true,\n      get: function () {\n        return this.options[property];\n      }\n    };\n    var getter = camelize(\"get \".concat(property));\n\n    if (prototype[getter]) {\n      attributes.get = function () {\n        return this[getter]();\n      };\n    } else {\n      attributes.get = function () {\n        return this.options[property];\n      };\n    }\n\n    var setter = camelize(\"set \".concat(property));\n\n    if (prototype[setter]) {\n      attributes.set = function (value) {\n        this[setter](value);\n      };\n    } else {\n      attributes.set = function (value) {\n        this.options[property] = value;\n      };\n    }\n\n    Object.defineProperty(prototype, property, attributes);\n  })], Selecto);\n  return Selecto;\n}(EventEmitter);\n\nvar Selecto$1 =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n\n  function Selecto() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Selecto;\n}(Selecto);\n\nexport default Selecto$1;\nexport { CLASS_NAME, EVENTS, METHODS, OPTIONS, OPTION_TYPES, PROPERTIES };\n//# sourceMappingURL=selecto.esm.js.map\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { first } from 'rxjs/operators';\n\nimport { SelectableValue } from '@grafana/data';\nimport { ContextMenu, MenuItem, MenuItemProps } from '@grafana/ui';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { CanvasPanel } from '../CanvasPanel';\nimport { AnchorPoint, LayerActionID } from '../types';\nimport { getElementTypes, onAddItem } from '../utils';\n\ntype Props = {\n  scene: Scene;\n  panel: CanvasPanel;\n  onVisibilityChange: (v: boolean) => void;\n};\n\nexport const CanvasContextMenu = ({ scene, panel, onVisibilityChange }: Props) => {\n  const inlineEditorOpen = panel.state.openInlineEdit;\n  const [isMenuVisible, setIsMenuVisible] = useState<boolean>(false);\n  const [anchorPoint, setAnchorPoint] = useState<AnchorPoint>({ x: 0, y: 0 });\n\n  const styles = getStyles();\n\n  const selectedElements = scene.selecto?.getSelectedTargets();\n  const rootLayer: FrameState | undefined = panel.context?.instanceState?.layer;\n\n  const handleContextMenu = useCallback(\n    (event: Event) => {\n      if (!(event instanceof MouseEvent) || event.ctrlKey) {\n        return;\n      }\n\n      event.preventDefault();\n      panel.setActivePanel();\n\n      const shouldSelectElement = event.currentTarget !== scene.div;\n      if (\n        shouldSelectElement &&\n        (event.currentTarget instanceof HTMLElement || event.currentTarget instanceof SVGElement)\n      ) {\n        scene.select({ targets: [event.currentTarget] });\n      }\n      setAnchorPoint({ x: event.pageX, y: event.pageY });\n      setIsMenuVisible(true);\n      onVisibilityChange(true);\n    },\n    [scene, panel, onVisibilityChange]\n  );\n\n  useEffect(() => {\n    if (scene.selecto) {\n      scene.selecto.getSelectableElements().forEach((element) => {\n        element.addEventListener('contextmenu', handleContextMenu);\n      });\n    }\n  }, [handleContextMenu, scene.selecto]);\n\n  useEffect(() => {\n    if (scene.div) {\n      scene.div.addEventListener('contextmenu', handleContextMenu);\n    }\n  }, [handleContextMenu, scene.div]);\n\n  const closeContextMenu = () => {\n    setIsMenuVisible(false);\n    onVisibilityChange(false);\n  };\n\n  const renderMenuItems = () => {\n    // This is disabled when panel is in edit mode because opening inline editor over panel editor is not ideal UX\n    const openCloseEditorMenuItem = !scene.isPanelEditing && (\n      <MenuItem\n        label={inlineEditorOpen ? 'Close Editor' : 'Open Editor'}\n        onClick={() => {\n          if (scene.inlineEditingCallback) {\n            if (inlineEditorOpen) {\n              panel.closeInlineEdit();\n            } else {\n              scene.inlineEditingCallback();\n            }\n          }\n          closeContextMenu();\n        }}\n        className={styles.menuItem}\n      />\n    );\n\n    const editElementMenuItem = () => {\n      if (selectedElements?.length === 1) {\n        const onClickEditElementMenuItem = () => {\n          scene.editModeEnabled.next(true);\n          closeContextMenu();\n        };\n\n        const element = scene.findElementByTarget(selectedElements[0]);\n        return (\n          element &&\n          element.item.hasEditMode && (\n            <MenuItem label=\"Edit\" onClick={onClickEditElementMenuItem} className={styles.menuItem} />\n          )\n        );\n      }\n      return null;\n    };\n\n    const typeOptions = getElementTypes(scene.shouldShowAdvancedTypes).options;\n\n    const getTypeOptionsSubmenu = () => {\n      const submenuItems: Array<\n        React.ReactElement<MenuItemProps<unknown>, string | React.JSXElementConstructor<unknown>>\n      > = [];\n\n      const onClickItem = (option: SelectableValue<string>) => {\n        let offsetY = anchorPoint.y;\n        let offsetX = anchorPoint.x;\n        if (scene.div) {\n          const transformScale = scene.scale;\n          const sceneContainerDimensions = scene.div.getBoundingClientRect();\n          offsetY = (offsetY - sceneContainerDimensions.top) / transformScale;\n          offsetX = (offsetX - sceneContainerDimensions.left) / transformScale;\n        }\n\n        onAddItem(option, rootLayer, {\n          ...anchorPoint,\n          y: offsetY,\n          x: offsetX,\n        });\n      };\n\n      typeOptions.map((option) => {\n        submenuItems.push(\n          <MenuItem key={option.value} label={option.label ?? 'Canvas item'} onClick={() => onClickItem(option)} />\n        );\n      });\n\n      return submenuItems;\n    };\n\n    const addItemMenuItem = (\n      <MenuItem\n        label=\"Add item\"\n        className={styles.menuItem}\n        childItems={getTypeOptionsSubmenu()}\n        customSubMenuContainerStyles={{ maxHeight: '150px', overflowY: 'auto' }}\n      />\n    );\n\n    const setBackgroundMenuItem = (\n      <MenuItem\n        label={'Set background'}\n        onClick={() => {\n          if (scene.setBackgroundCallback) {\n            scene.setBackgroundCallback(anchorPoint);\n          }\n          closeContextMenu();\n        }}\n        className={styles.menuItem}\n      />\n    );\n\n    if (selectedElements && selectedElements.length >= 1) {\n      return (\n        <>\n          {editElementMenuItem()}\n          <MenuItem\n            label=\"Delete\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.Delete);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Duplicate\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.Duplicate);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Bring to front\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.MoveTop);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          <MenuItem\n            label=\"Send to back\"\n            onClick={() => {\n              contextMenuAction(LayerActionID.MoveBottom);\n              closeContextMenu();\n            }}\n            className={styles.menuItem}\n          />\n          {openCloseEditorMenuItem}\n        </>\n      );\n    } else {\n      return (\n        <>\n          {openCloseEditorMenuItem}\n          {setBackgroundMenuItem}\n          {addItemMenuItem}\n        </>\n      );\n    }\n  };\n\n  const contextMenuAction = (actionType: LayerActionID) => {\n    scene.selection.pipe(first()).subscribe((currentSelectedElements) => {\n      const currentLayer = currentSelectedElements[0].parent!;\n      currentSelectedElements.forEach((currentSelectedElement: ElementState) => {\n        currentLayer.doAction(actionType, currentSelectedElement);\n      });\n    });\n\n    setTimeout(() => {\n      scene.addToSelection();\n      scene.targetsToSelect.clear();\n    });\n  };\n\n  if (isMenuVisible) {\n    return (\n      <div\n        onContextMenu={(event) => {\n          event.preventDefault();\n          closeContextMenu();\n        }}\n      >\n        <ContextMenu\n          x={anchorPoint.x}\n          y={anchorPoint.y}\n          onClose={closeContextMenu}\n          renderMenuItems={renderMenuItems}\n          focusOnOpen={false}\n        />\n      </div>\n    );\n  }\n\n  return <></>;\n};\n\nconst getStyles = () => ({\n  menuItem: css({\n    maxWidth: '200px',\n  }),\n});\n","import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { useOverlay } from '@react-aria/overlays';\nimport React, { createRef } from 'react';\n\nimport { GrafanaTheme2, LinkModel } from '@grafana/data/src';\nimport { LinkButton, Portal, useStyles2, VerticalGroup, VizTooltipContainer } from '@grafana/ui';\nimport { CloseButton } from 'app/core/components/CloseButton/CloseButton';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\ninterface Props {\n  scene: Scene;\n}\n\nexport const CanvasTooltip = ({ scene }: Props) => {\n  const style = useStyles2(getStyles);\n\n  const onClose = () => {\n    if (scene?.tooltipCallback && scene.tooltip) {\n      scene.tooltipCallback(undefined);\n    }\n  };\n\n  const ref = createRef<HTMLElement>();\n  const { overlayProps } = useOverlay({ onClose: onClose, isDismissable: true }, ref);\n  const { dialogProps } = useDialog({}, ref);\n\n  const element = scene.tooltip?.element;\n  if (!element) {\n    return <></>;\n  }\n\n  const renderDataLinks = () =>\n    element.data?.links &&\n    element.data?.links.length > 0 && (\n      <div>\n        <VerticalGroup>\n          {element.data?.links?.map((link: LinkModel, i: number) => (\n            <LinkButton\n              key={i}\n              icon={'external-link-alt'}\n              target={link.target}\n              href={link.href}\n              onClick={link.onClick}\n              fill=\"text\"\n              style={{ width: '100%' }}\n            >\n              {link.title}\n            </LinkButton>\n          ))}\n        </VerticalGroup>\n      </div>\n    );\n\n  return (\n    <>\n      {scene.tooltip?.element && scene.tooltip.anchorPoint && (\n        <Portal>\n          <VizTooltipContainer\n            position={{ x: scene.tooltip.anchorPoint.x, y: scene.tooltip.anchorPoint.y }}\n            offset={{ x: 5, y: 0 }}\n            allowPointerEvents={scene.tooltip.isOpen}\n          >\n            <section ref={ref} {...overlayProps} {...dialogProps}>\n              {scene.tooltip.isOpen && <CloseButton style={{ zIndex: 1 }} onClick={onClose} />}\n              <div className={style.wrapper}>{renderDataLinks()}</div>\n            </section>\n          </VizTooltipContainer>\n        </Portal>\n      )}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    marginTop: '20px',\n    background: theme.colors.background.primary,\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useRef } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { ConnectionCoordinates } from 'app/features/canvas';\n\ntype Props = {\n  setRef: (anchorElement: HTMLDivElement) => void;\n  setAnchorsRef: (anchorsElement: HTMLDivElement) => void;\n  handleMouseLeave: (\n    event: React.MouseEvent<Element, MouseEvent> | React.FocusEvent<HTMLDivElement, Element>\n  ) => boolean;\n};\n\nexport const CONNECTION_ANCHOR_DIV_ID = 'connectionControl';\nexport const CONNECTION_ANCHOR_ALT = 'connection anchor';\nexport const CONNECTION_ANCHOR_HIGHLIGHT_OFFSET = 8;\n// Unit is percentage from the middle of the element\n// 0, 0 middle; -1, -1 bottom left; 1, 1 top right\nexport const ANCHORS = [\n  { x: -1, y: 1 },\n  { x: -0.5, y: 1 },\n  { x: 0, y: 1 },\n  { x: 0.5, y: 1 },\n  { x: 1, y: 1 },\n  { x: 1, y: 0.5 },\n  { x: 1, y: 0 },\n  { x: 1, y: -0.5 },\n  { x: 1, y: -1 },\n  { x: 0.5, y: -1 },\n  { x: 0, y: -1 },\n  { x: -0.5, y: -1 },\n  { x: -1, y: -1 },\n  { x: -1, y: -0.5 },\n  { x: -1, y: 0 },\n  { x: -1, y: 0.5 },\n];\n\nexport const ANCHOR_PADDING = 3;\nexport const HALF_SIZE = 2.5;\n\nexport const ConnectionAnchors = ({ setRef, setAnchorsRef, handleMouseLeave }: Props) => {\n  const highlightEllipseRef = useRef<HTMLDivElement>(null);\n  const styles = useStyles2(getStyles);\n  const halfSizeHighlightEllipse = 5.5;\n  const anchorImage =\n    'data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=';\n\n  const onMouseEnterAnchor = (event: React.MouseEvent) => {\n    if (!(event.target instanceof HTMLImageElement)) {\n      return;\n    }\n\n    if (highlightEllipseRef.current && event.target.style) {\n      highlightEllipseRef.current.style.display = 'block';\n      highlightEllipseRef.current.style.top = `calc(${event.target.style.top} - ${halfSizeHighlightEllipse}px + ${ANCHOR_PADDING}px)`;\n      highlightEllipseRef.current.style.left = `calc(${event.target.style.left} - ${halfSizeHighlightEllipse}px + ${ANCHOR_PADDING}px)`;\n    }\n  };\n\n  const onMouseLeaveHighlightElement = () => {\n    if (highlightEllipseRef.current) {\n      highlightEllipseRef.current.style.display = 'none';\n    }\n  };\n\n  const handleMouseLeaveAnchors = (\n    event: React.MouseEvent<Element, MouseEvent> | React.FocusEvent<HTMLDivElement, Element>\n  ) => {\n    const didHideAnchors = handleMouseLeave(event);\n\n    if (didHideAnchors) {\n      onMouseLeaveHighlightElement();\n    }\n  };\n\n  const generateAnchors = (anchors: ConnectionCoordinates[] = ANCHORS) => {\n    return anchors.map((anchor) => {\n      const id = `${anchor.x},${anchor.y}`;\n\n      // Convert anchor coords to relative percentage\n      const style = {\n        top: `calc(${-anchor.y * 50 + 50}% - ${HALF_SIZE}px - ${ANCHOR_PADDING}px)`,\n        left: `calc(${anchor.x * 50 + 50}% - ${HALF_SIZE}px - ${ANCHOR_PADDING}px)`,\n      };\n\n      return (\n        <img\n          id={id}\n          ref={(element) => {\n            if (element) {\n              // After React 15+, inline styles no longer support !important\n              element.style.setProperty('pointer-events', 'auto', 'important');\n            }\n          }}\n          key={id}\n          alt={CONNECTION_ANCHOR_ALT}\n          className={styles.anchor}\n          style={style}\n          src={anchorImage}\n          onMouseEnter={onMouseEnterAnchor}\n        />\n      );\n    });\n  };\n\n  return (\n    <div className={styles.root} ref={setRef}>\n      <div className={styles.mouseoutDiv} onMouseOut={handleMouseLeaveAnchors} onBlur={handleMouseLeaveAnchors} />\n      <div\n        id={CONNECTION_ANCHOR_DIV_ID}\n        ref={highlightEllipseRef}\n        className={styles.highlightElement}\n        onMouseLeave={onMouseLeaveHighlightElement}\n      />\n      <div ref={setAnchorsRef}>{generateAnchors()}</div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  root: css({\n    position: 'absolute',\n    display: 'none',\n  }),\n  mouseoutDiv: css({\n    position: 'absolute',\n    margin: '-30px',\n    width: 'calc(100% + 60px)',\n    height: 'calc(100% + 60px)',\n  }),\n  anchor: css({\n    padding: `${ANCHOR_PADDING}px`,\n    position: 'absolute',\n    cursor: 'cursor',\n    width: `calc(5px + 2 * ${ANCHOR_PADDING}px)`,\n    height: `calc(5px + 2 * ${ANCHOR_PADDING}px)`,\n    zIndex: 100,\n  }),\n  highlightElement: css({\n    backgroundColor: '#00ff00',\n    opacity: 0.3,\n    position: 'absolute',\n    cursor: 'cursor',\n    pointerEvents: 'auto',\n    width: '16px',\n    height: '16px',\n    borderRadius: theme.shape.radius.circle,\n    display: 'none',\n    zIndex: 110,\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { ConnectionDirection } from 'app/features/canvas';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { ConnectionCoordinates } from '../../panelcfg.gen';\nimport { ConnectionState } from '../../types';\nimport {\n  calculateAngle,\n  calculateCoordinates,\n  calculateDistance,\n  calculateMidpoint,\n  getConnectionStyles,\n  getParentBoundingClientRect,\n} from '../../utils';\n\nimport { CONNECTION_VERTEX_ADD_ID, CONNECTION_VERTEX_ID } from './Connections';\n\ntype Props = {\n  setSVGRef: (anchorElement: SVGSVGElement) => void;\n  setLineRef: (anchorElement: SVGLineElement) => void;\n  setSVGVertexRef: (anchorElement: SVGSVGElement) => void;\n  setVertexPathRef: (anchorElement: SVGPathElement) => void;\n  setVertexRef: (anchorElement: SVGCircleElement) => void;\n  scene: Scene;\n};\n\nlet idCounter = 0;\nconst htmlElementTypes = ['input', 'textarea'];\n\nexport const ConnectionSVG = ({\n  setSVGRef,\n  setLineRef,\n  setSVGVertexRef,\n  setVertexPathRef,\n  setVertexRef,\n  scene,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const headId = Date.now() + '_' + idCounter++;\n  const CONNECTION_LINE_ID = useMemo(() => `connectionLineId-${headId}`, [headId]);\n  const EDITOR_HEAD_ID = useMemo(() => `editorHead-${headId}`, [headId]);\n  const defaultArrowColor = config.theme2.colors.text.primary;\n  const defaultArrowSize = 2;\n  const defaultArrowDirection = ConnectionDirection.Forward;\n  const maximumVertices = 10;\n\n  const [selectedConnection, setSelectedConnection] = useState<ConnectionState | undefined>(undefined);\n\n  // Need to use ref to ensure state is not stale in event handler\n  const selectedConnectionRef = useRef(selectedConnection);\n  useEffect(() => {\n    selectedConnectionRef.current = selectedConnection;\n  });\n\n  useEffect(() => {\n    if (scene.panel.context.instanceState?.selectedConnection) {\n      setSelectedConnection(scene.panel.context.instanceState?.selectedConnection);\n    }\n  }, [scene.panel.context.instanceState?.selectedConnection]);\n\n  const onKeyUp = (e: KeyboardEvent) => {\n    const target = e.target;\n\n    if (!(target instanceof HTMLElement)) {\n      return;\n    }\n\n    if (htmlElementTypes.indexOf(target.nodeName.toLowerCase()) > -1) {\n      return;\n    }\n\n    // Backspace (8) or delete (46)\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      if (selectedConnectionRef.current && selectedConnectionRef.current.source) {\n        selectedConnectionRef.current.source.options.connections =\n          selectedConnectionRef.current.source.options.connections?.filter(\n            (connection) => connection !== selectedConnectionRef.current?.info\n          );\n        selectedConnectionRef.current.source.onChange(selectedConnectionRef.current.source.options);\n\n        setSelectedConnection(undefined);\n        scene.connections.select(undefined);\n        scene.connections.updateState();\n        scene.save();\n      }\n    } else {\n      // Prevent removing event listener if key is not delete\n      return;\n    }\n\n    document.removeEventListener('keyup', onKeyUp);\n    scene.selecto!.rootContainer!.removeEventListener('click', clearSelectedConnection);\n  };\n\n  const clearSelectedConnection = (event: MouseEvent) => {\n    const eventTarget = event.target;\n\n    const shouldResetSelectedConnection = !(\n      eventTarget instanceof SVGLineElement && eventTarget.id === CONNECTION_LINE_ID\n    );\n\n    if (shouldResetSelectedConnection) {\n      setSelectedConnection(undefined);\n      scene.connections.select(undefined);\n    }\n  };\n\n  const selectConnection = (connection: ConnectionState) => {\n    if (scene.isEditingEnabled) {\n      setSelectedConnection(connection);\n      scene.connections.select(connection);\n\n      document.addEventListener('keyup', onKeyUp);\n      scene.selecto!.rootContainer!.addEventListener('click', clearSelectedConnection);\n    }\n  };\n\n  // Figure out target and then target's relative coordinates drawing (if no target do parent)\n  const renderConnections = () => {\n    return (\n      scene.connections.state\n        // Render selected connection last, ensuring it is above other connections\n        .sort((_a, b) => (selectedConnection === b && scene.panel.context.instanceState.selectedConnection ? -1 : 0))\n        .map((v, idx) => {\n          const { source, target, info, vertices, index } = v;\n          const sourceRect = source.div?.getBoundingClientRect();\n          const parent = source.div?.parentElement;\n          const transformScale = scene.scale;\n          const parentRect = getParentBoundingClientRect(scene);\n\n          if (!sourceRect || !parent || !parentRect) {\n            return;\n          }\n\n          const { x1, y1, x2, y2 } = calculateCoordinates(sourceRect, parentRect, info, target, transformScale);\n\n          let { xStart, yStart, xEnd, yEnd } = { xStart: x1, yStart: y1, xEnd: x2, yEnd: y2 };\n          if (v.sourceOriginal && v.targetOriginal) {\n            xStart = v.sourceOriginal.x;\n            yStart = v.sourceOriginal.y;\n            xEnd = v.targetOriginal.x;\n            yEnd = v.targetOriginal.y;\n          } else if (source.options.connections) {\n            // If original source or target coordinates are not set for the current connection, set them\n            if (\n              !source.options.connections[index].sourceOriginal ||\n              !source.options.connections[index].targetOriginal\n            ) {\n              source.options.connections[index].sourceOriginal = { x: x1, y: y1 };\n              source.options.connections[index].targetOriginal = { x: x2, y: y2 };\n            }\n          }\n\n          const midpoint = calculateMidpoint(x1, y1, x2, y2);\n          const xDist = xEnd - xStart;\n          const yDist = yEnd - yStart;\n\n          const { strokeColor, strokeWidth, strokeRadius, arrowDirection, lineStyle } = getConnectionStyles(\n            info,\n            scene,\n            defaultArrowSize,\n            defaultArrowDirection\n          );\n\n          const isSelected = selectedConnection === v && scene.panel.context.instanceState.selectedConnection;\n\n          const connectionCursorStyle = scene.isEditingEnabled ? 'grab' : '';\n          const selectedStyles = { stroke: '#44aaff', strokeOpacity: 0.6, strokeWidth: strokeWidth + 5 };\n\n          const CONNECTION_HEAD_ID_START = `connectionHeadStart-${headId + Math.random()}`;\n          const CONNECTION_HEAD_ID_END = `connectionHeadEnd-${headId + Math.random()}`;\n\n          const radius = strokeRadius;\n          // Create vertex path and populate array of add vertex controls\n          const addVertices: ConnectionCoordinates[] = [];\n          let pathString = `M${x1} ${y1} `;\n          if (vertices?.length) {\n            vertices.map((vertex, index) => {\n              const x = vertex.x;\n              const y = vertex.y;\n\n              // Convert vertex relative coordinates to scene coordinates\n              const X = x * xDist + xStart;\n              const Y = y * yDist + yStart;\n\n              // Initialize coordinates for first arc control point\n              let xa = X;\n              let ya = Y;\n\n              // Initialize coordinates for second arc control point\n              let xb = X;\n              let yb = Y;\n\n              // Initialize half arc distance and segment angles\n              let lHalfArc = 0;\n              let angle1 = 0;\n              let angle2 = 0;\n\n              // Only calculate arcs if there is a radius\n              if (radius) {\n                if (index < vertices.length - 1) {\n                  const Xn = vertices[index + 1].x * xDist + xStart;\n                  const Yn = vertices[index + 1].y * yDist + yStart;\n                  if (index === 0) {\n                    // First vertex\n                    angle1 = calculateAngle(x1, y1, X, Y);\n                    angle2 = calculateAngle(X, Y, Xn, Yn);\n                  } else {\n                    // All vertices\n                    const previousVertex = vertices[index - 1];\n                    const Xp = previousVertex.x * xDist + xStart;\n                    const Yp = previousVertex.y * yDist + yStart;\n                    angle1 = calculateAngle(Xp, Yp, X, Y);\n                    angle2 = calculateAngle(X, Y, Xn, Yn);\n                  }\n                } else {\n                  // Last vertex\n                  if (index > 0) {\n                    // Not also the first vertex\n                    const previousVertex = vertices[index - 1];\n                    const Xp = previousVertex.x * xDist + xStart;\n                    const Yp = previousVertex.y * yDist + yStart;\n                    angle1 = calculateAngle(Xp, Yp, X, Y);\n                  } else {\n                    angle1 = calculateAngle(x1, y1, X, Y);\n                  }\n                  angle2 = calculateAngle(X, Y, x2, y2);\n                }\n\n                // Calculate angle between two segments where arc will be placed\n                const theta = angle2 - angle1; //radians\n                // Attempt to determine if arc is counter clockwise (ccw)\n                const ccw = theta < 0;\n                // Half arc is used for arc control points\n                lHalfArc = radius * Math.tan(theta / 2);\n                if (ccw) {\n                  lHalfArc *= -1;\n                }\n              }\n\n              if (index === 0) {\n                // For first vertex\n                addVertices.push(\n                  calculateMidpoint((x1 - xStart) / (xEnd - xStart), (y1 - yStart) / (yEnd - yStart), x, y)\n                );\n\n                // Only calculate arcs if there is a radius\n                if (radius) {\n                  // Length of segment\n                  const lSegment = calculateDistance(X, Y, x1, y1);\n                  if (Math.abs(lHalfArc) > 0.5 * Math.abs(lSegment)) {\n                    // Limit curve control points to mid segment\n                    lHalfArc = 0.5 * lSegment;\n                  }\n                  // Default next point to last point\n                  let Xn = x2;\n                  let Yn = y2;\n                  if (index < vertices.length - 1) {\n                    // Not also the last point\n                    const nextVertex = vertices[index + 1];\n                    Xn = nextVertex.x * xDist + xStart;\n                    Yn = nextVertex.y * yDist + yStart;\n                  }\n\n                  // Length of next segment\n                  const lSegmentNext = calculateDistance(X, Y, Xn, Yn);\n                  if (Math.abs(lHalfArc) > 0.5 * Math.abs(lSegmentNext)) {\n                    // Limit curve control points to mid segment\n                    lHalfArc = 0.5 * lSegmentNext;\n                  }\n                  // Calculate arc control points\n                  const lDelta = lSegment - lHalfArc;\n                  xa = Math.round(lDelta * Math.cos(angle1) + x1);\n                  ya = Math.round(lDelta * Math.sin(angle1) + y1);\n                  xb = Math.round(lHalfArc * Math.cos(angle2) + X);\n                  yb = Math.round(lHalfArc * Math.sin(angle2) + Y);\n\n                  // Check if arc control points are inside of segment, otherwise swap sign\n                  if ((xa > X && xa > x1) || (xa < X && xa < x1)) {\n                    xa = (lDelta + 2 * lHalfArc) * Math.cos(angle1) + x1;\n                    ya = (lDelta + 2 * lHalfArc) * Math.sin(angle1) + y1;\n                    xb = -lHalfArc * Math.cos(angle2) + X;\n                    yb = -lHalfArc * Math.sin(angle2) + Y;\n                  }\n                }\n              } else {\n                // For all other vertices\n                const previousVertex = vertices[index - 1];\n                addVertices.push(calculateMidpoint(previousVertex.x, previousVertex.y, x, y));\n\n                // Only calculate arcs if there is a radius\n                if (radius) {\n                  // Convert previous vertex relative coorindates to scene coordinates\n                  const Xp = previousVertex.x * xDist + xStart;\n                  const Yp = previousVertex.y * yDist + yStart;\n\n                  // Length of segment\n                  const lSegment = calculateDistance(X, Y, Xp, Yp);\n                  if (Math.abs(lHalfArc) > 0.5 * Math.abs(lSegment)) {\n                    // Limit curve control points to mid segment\n                    lHalfArc = 0.5 * lSegment;\n                  }\n                  // Default next point to last point\n                  let Xn = x2;\n                  let Yn = y2;\n                  if (index < vertices.length - 1) {\n                    // Not also the last point\n                    const nextVertex = vertices[index + 1];\n                    Xn = nextVertex.x * xDist + xStart;\n                    Yn = nextVertex.y * yDist + yStart;\n                  }\n\n                  // Length of next segment\n                  const lSegmentNext = calculateDistance(X, Y, Xn, Yn);\n                  if (Math.abs(lHalfArc) > 0.5 * Math.abs(lSegmentNext)) {\n                    // Limit curve control points to mid segment\n                    lHalfArc = 0.5 * lSegmentNext;\n                  }\n\n                  // Calculate arc control points\n                  const lDelta = lSegment - lHalfArc;\n                  xa = Math.round(lDelta * Math.cos(angle1) + Xp);\n                  ya = Math.round(lDelta * Math.sin(angle1) + Yp);\n                  xb = Math.round(lHalfArc * Math.cos(angle2) + X);\n                  yb = Math.round(lHalfArc * Math.sin(angle2) + Y);\n\n                  // Check if arc control points are inside of segment, otherwise swap sign\n                  if ((xa > X && xa > Xp) || (xa < X && xa < Xp)) {\n                    xa = (lDelta + 2 * lHalfArc) * Math.cos(angle1) + Xp;\n                    ya = (lDelta + 2 * lHalfArc) * Math.sin(angle1) + Yp;\n                    xb = -lHalfArc * Math.cos(angle2) + X;\n                    yb = -lHalfArc * Math.sin(angle2) + Y;\n                  }\n                }\n              }\n              if (index === vertices.length - 1) {\n                // For last vertex only\n                addVertices.push(\n                  calculateMidpoint((x2 - xStart) / (xEnd - xStart), (y2 - yStart) / (yEnd - yStart), x, y)\n                );\n              }\n              // Add segment to path\n              pathString += `L${xa} ${ya} `;\n\n              if (lHalfArc !== 0) {\n                // Add arc if applicable\n                pathString += `Q ${X} ${Y} ${xb} ${yb} `;\n              }\n            });\n            // Add last segment\n            pathString += `L${x2} ${y2}`;\n          }\n\n          const markerStart =\n            arrowDirection === ConnectionDirection.Reverse || arrowDirection === ConnectionDirection.Both\n              ? `url(#${CONNECTION_HEAD_ID_START})`\n              : undefined;\n\n          const markerEnd =\n            arrowDirection === ConnectionDirection.Forward || arrowDirection === ConnectionDirection.Both\n              ? `url(#${CONNECTION_HEAD_ID_END})`\n              : undefined;\n\n          return (\n            <svg className={styles.connection} key={idx}>\n              <g onClick={() => selectConnection(v)}>\n                <defs>\n                  <marker\n                    id={CONNECTION_HEAD_ID_START}\n                    markerWidth=\"10\"\n                    markerHeight=\"7\"\n                    refX=\"0\"\n                    refY=\"3.5\"\n                    orient=\"auto\"\n                    stroke={strokeColor}\n                  >\n                    <polygon points=\"10 0, 0 3.5, 10 7\" fill={strokeColor} />\n                  </marker>\n                  <marker\n                    id={CONNECTION_HEAD_ID_END}\n                    markerWidth=\"10\"\n                    markerHeight=\"7\"\n                    refX=\"10\"\n                    refY=\"3.5\"\n                    orient=\"auto\"\n                    stroke={strokeColor}\n                  >\n                    <polygon points=\"0 0, 10 3.5, 0 7\" fill={strokeColor} />\n                  </marker>\n                </defs>\n                {vertices?.length ? (\n                  <g>\n                    <path\n                      id={`${CONNECTION_LINE_ID}_transparent`}\n                      d={pathString}\n                      cursor={connectionCursorStyle}\n                      pointerEvents=\"auto\"\n                      stroke=\"transparent\"\n                      strokeWidth={15}\n                      fill={'none'}\n                      style={isSelected ? selectedStyles : {}}\n                    />\n                    <path\n                      d={pathString}\n                      stroke={strokeColor}\n                      strokeWidth={strokeWidth}\n                      strokeDasharray={lineStyle}\n                      fill={'none'}\n                      markerEnd={markerEnd}\n                      markerStart={markerStart}\n                    />\n                    {isSelected && (\n                      <g>\n                        {vertices.map((value, index) => {\n                          return (\n                            <circle\n                              id={CONNECTION_VERTEX_ID}\n                              data-index={index}\n                              key={`${CONNECTION_VERTEX_ID}${index}_${idx}`}\n                              cx={value.x * xDist + xStart}\n                              cy={value.y * yDist + yStart}\n                              r={5}\n                              stroke={strokeColor}\n                              className={styles.vertex}\n                              cursor={'crosshair'}\n                              pointerEvents=\"auto\"\n                            />\n                          );\n                        })}\n                        {vertices.length < maximumVertices &&\n                          addVertices.map((value, index) => {\n                            return (\n                              <circle\n                                id={CONNECTION_VERTEX_ADD_ID}\n                                data-index={index}\n                                key={`${CONNECTION_VERTEX_ADD_ID}${index}_${idx}`}\n                                cx={value.x * xDist + xStart}\n                                cy={value.y * yDist + yStart}\n                                r={4}\n                                stroke={strokeColor}\n                                className={styles.addVertex}\n                                cursor={'crosshair'}\n                                pointerEvents=\"auto\"\n                              />\n                            );\n                          })}\n                      </g>\n                    )}\n                  </g>\n                ) : (\n                  <g>\n                    <line\n                      id={`${CONNECTION_LINE_ID}_transparent`}\n                      cursor={connectionCursorStyle}\n                      pointerEvents=\"auto\"\n                      stroke=\"transparent\"\n                      strokeWidth={15}\n                      style={isSelected ? selectedStyles : {}}\n                      x1={x1}\n                      y1={y1}\n                      x2={x2}\n                      y2={y2}\n                    />\n                    <line\n                      id={CONNECTION_LINE_ID}\n                      stroke={strokeColor}\n                      pointerEvents=\"auto\"\n                      strokeWidth={strokeWidth}\n                      markerEnd={markerEnd}\n                      markerStart={markerStart}\n                      strokeDasharray={lineStyle}\n                      x1={x1}\n                      y1={y1}\n                      x2={x2}\n                      y2={y2}\n                      cursor={connectionCursorStyle}\n                    />\n                    {isSelected && (\n                      <circle\n                        id={CONNECTION_VERTEX_ADD_ID}\n                        data-index={0}\n                        cx={midpoint.x}\n                        cy={midpoint.y}\n                        r={4}\n                        stroke={strokeColor}\n                        className={styles.addVertex}\n                        cursor={'crosshair'}\n                        pointerEvents=\"auto\"\n                      />\n                    )}\n                  </g>\n                )}\n              </g>\n            </svg>\n          );\n        })\n    );\n  };\n\n  return (\n    <>\n      <svg ref={setSVGRef} className={styles.editorSVG}>\n        <defs>\n          <marker\n            id={EDITOR_HEAD_ID}\n            markerWidth=\"10\"\n            markerHeight=\"7\"\n            refX=\"10\"\n            refY=\"3.5\"\n            orient=\"auto\"\n            stroke={defaultArrowColor}\n          >\n            <polygon points=\"0 0, 10 3.5, 0 7\" fill={defaultArrowColor} />\n          </marker>\n        </defs>\n        <line ref={setLineRef} stroke={defaultArrowColor} strokeWidth={2} markerEnd={`url(#${EDITOR_HEAD_ID})`} />\n      </svg>\n      <svg ref={setSVGVertexRef} className={styles.editorSVG}>\n        <path\n          ref={setVertexPathRef}\n          stroke={defaultArrowColor}\n          strokeWidth={2}\n          strokeDasharray={'5, 5'}\n          fill={'none'}\n        />\n        <circle ref={setVertexRef} stroke={defaultArrowColor} r={4} className={styles.vertex} />\n      </svg>\n      {renderConnections()}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  editorSVG: css({\n    position: 'absolute',\n    pointerEvents: 'none',\n    width: '100%',\n    height: '100%',\n    zIndex: 1000,\n    display: 'none',\n  }),\n  connection: css({\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    zIndex: 1000,\n    pointerEvents: 'none',\n  }),\n  vertex: css({\n    fill: '#44aaff',\n    strokeWidth: 2,\n  }),\n  addVertex: css({\n    fill: '#44aaff',\n    opacity: 0.5,\n    strokeWidth: 1,\n  }),\n});\n","import React from 'react';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { config } from '@grafana/runtime';\nimport { CanvasConnection, ConnectionCoordinates, ConnectionPath } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { ConnectionState } from '../../types';\nimport {\n  calculateAngle,\n  calculateCoordinates,\n  getConnections,\n  getParentBoundingClientRect,\n  isConnectionSource,\n  isConnectionTarget,\n} from '../../utils';\n\nimport {\n  CONNECTION_ANCHOR_ALT,\n  ConnectionAnchors,\n  CONNECTION_ANCHOR_HIGHLIGHT_OFFSET,\n  ANCHORS,\n  ANCHOR_PADDING,\n  HALF_SIZE,\n} from './ConnectionAnchors';\nimport { ConnectionSVG } from './ConnectionSVG';\n\nexport const CONNECTION_VERTEX_ID = 'vertex';\nexport const CONNECTION_VERTEX_ADD_ID = 'vertexAdd';\nconst CONNECTION_VERTEX_ORTHO_TOLERANCE = 0.05; // Cartesian ratio against vertical or horizontal tolerance\nconst CONNECTION_VERTEX_SNAP_TOLERANCE = (5 / 180) * Math.PI; // Multi-segment snapping angle in radians to trigger vertex removal\n\nexport class Connections {\n  scene: Scene;\n  connectionAnchorDiv?: HTMLDivElement;\n  anchorsDiv?: HTMLDivElement;\n  connectionSVG?: SVGElement;\n  connectionLine?: SVGLineElement;\n  connectionSVGVertex?: SVGElement;\n  connectionVertexPath?: SVGPathElement;\n  connectionVertex?: SVGCircleElement;\n  connectionSource?: ElementState;\n  connectionTarget?: ElementState;\n  isDrawingConnection?: boolean;\n  selectedVertexIndex?: number;\n  didConnectionLeaveHighlight?: boolean;\n  state: ConnectionState[] = [];\n  readonly selection = new BehaviorSubject<ConnectionState | undefined>(undefined);\n\n  constructor(scene: Scene) {\n    this.scene = scene;\n    this.updateState();\n  }\n\n  select = (connection: ConnectionState | undefined) => {\n    if (connection === this.selection.value) {\n      return;\n    }\n    this.selection.next(connection);\n  };\n\n  updateState = () => {\n    const s = this.selection.value;\n    this.state = getConnections(this.scene.byName);\n\n    if (s) {\n      for (let c of this.state) {\n        if (c.source === s.source && c.index === s.index) {\n          this.selection.next(c);\n          break;\n        }\n      }\n    }\n  };\n\n  setConnectionAnchorRef = (anchorElement: HTMLDivElement) => {\n    this.connectionAnchorDiv = anchorElement;\n  };\n\n  setAnchorsRef = (anchorsElement: HTMLDivElement) => {\n    this.anchorsDiv = anchorsElement;\n  };\n\n  setConnectionSVGRef = (connectionSVG: SVGSVGElement) => {\n    this.connectionSVG = connectionSVG;\n  };\n\n  setConnectionLineRef = (connectionLine: SVGLineElement) => {\n    this.connectionLine = connectionLine;\n  };\n\n  setConnectionSVGVertexRef = (connectionSVG: SVGSVGElement) => {\n    this.connectionSVGVertex = connectionSVG;\n  };\n\n  setConnectionVertexRef = (connectionVertex: SVGCircleElement) => {\n    this.connectionVertex = connectionVertex;\n  };\n\n  setConnectionVertexPathRef = (connectionVertexPath: SVGPathElement) => {\n    this.connectionVertexPath = connectionVertexPath;\n  };\n\n  // Recursively find the first parent that is a canvas element\n  findElementTarget = (element: Element): ElementState | undefined => {\n    let elementTarget = undefined;\n\n    // Cap recursion at the scene level\n    if (element === this.scene.div) {\n      return undefined;\n    }\n\n    elementTarget = this.scene.findElementByTarget(element);\n\n    if (!elementTarget && element.parentElement) {\n      elementTarget = this.findElementTarget(element.parentElement);\n    }\n\n    return elementTarget;\n  };\n\n  handleMouseEnter = (event: React.MouseEvent) => {\n    if (!(event.target instanceof Element) || !this.scene.isEditingEnabled) {\n      return;\n    }\n\n    let element: ElementState | undefined = this.findElementTarget(event.target);\n\n    if (!element) {\n      console.log('no element');\n      return;\n    }\n\n    if (this.isDrawingConnection) {\n      this.connectionTarget = element;\n    } else {\n      this.connectionSource = element;\n      if (!this.connectionSource) {\n        console.log('no connection source');\n        return;\n      }\n    }\n\n    const customElementAnchors = element?.item.customConnectionAnchors || ANCHORS;\n    // This type cast is necessary as TS doesn't understand that `Element` is an `HTMLElement`\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const anchors = Array.from(this.anchorsDiv?.children as HTMLCollectionOf<HTMLElement>);\n    const anchorsAmount = customElementAnchors.length;\n\n    // re-calculate the position of the existing anchors on hover\n    // and hide the rest of the anchors if there are more than the custom ones\n    anchors.forEach((anchor, index) => {\n      if (index >= anchorsAmount) {\n        anchor.style.display = 'none';\n      } else {\n        const { x, y } = customElementAnchors[index];\n        anchor.style.top = `calc(${-y * 50 + 50}% - ${HALF_SIZE}px - ${ANCHOR_PADDING}px)`;\n        anchor.style.left = `calc(${x * 50 + 50}% - ${HALF_SIZE}px - ${ANCHOR_PADDING}px)`;\n        anchor.style.display = 'block';\n      }\n    });\n\n    const elementBoundingRect = element.div!.getBoundingClientRect();\n    const transformScale = this.scene.scale;\n    const parentBoundingRect = getParentBoundingClientRect(this.scene);\n\n    const relativeTop = elementBoundingRect.top - (parentBoundingRect?.top ?? 0);\n    const relativeLeft = elementBoundingRect.left - (parentBoundingRect?.left ?? 0);\n\n    if (this.connectionAnchorDiv) {\n      this.connectionAnchorDiv.style.display = 'none';\n      this.connectionAnchorDiv.style.display = 'block';\n      this.connectionAnchorDiv.style.top = `${relativeTop / transformScale}px`;\n      this.connectionAnchorDiv.style.left = `${relativeLeft / transformScale}px`;\n      this.connectionAnchorDiv.style.height = `${elementBoundingRect.height / transformScale}px`;\n      this.connectionAnchorDiv.style.width = `${elementBoundingRect.width / transformScale}px`;\n    }\n  };\n\n  // Return boolean indicates if connection anchors were hidden or not\n  handleMouseLeave = (event: React.MouseEvent | React.FocusEvent): boolean => {\n    // If mouse is leaving INTO the anchor image, don't remove div\n    if (\n      event.relatedTarget instanceof HTMLImageElement &&\n      event.relatedTarget.getAttribute('alt') === CONNECTION_ANCHOR_ALT\n    ) {\n      return false;\n    }\n\n    this.connectionTarget = undefined;\n    this.connectionAnchorDiv!.style.display = 'none';\n    return true;\n  };\n\n  connectionListener = (event: MouseEvent) => {\n    event.preventDefault();\n\n    if (!(this.connectionLine && this.scene.div && this.scene.div.parentElement)) {\n      return;\n    }\n\n    const transformScale = this.scene.scale;\n    const parentBoundingRect = getParentBoundingClientRect(this.scene);\n\n    if (!parentBoundingRect) {\n      return;\n    }\n\n    const x = event.pageX - parentBoundingRect.x ?? 0;\n    const y = event.pageY - parentBoundingRect.y ?? 0;\n\n    this.connectionLine.setAttribute('x2', `${x / transformScale}`);\n    this.connectionLine.setAttribute('y2', `${y / transformScale}`);\n\n    const connectionLineX1 = this.connectionLine.x1.baseVal.value;\n    const connectionLineY1 = this.connectionLine.y1.baseVal.value;\n    if (!this.didConnectionLeaveHighlight) {\n      const connectionLength = Math.hypot(x - connectionLineX1, y - connectionLineY1);\n      if (connectionLength > CONNECTION_ANCHOR_HIGHLIGHT_OFFSET && this.connectionSVG) {\n        this.didConnectionLeaveHighlight = true;\n        this.connectionSVG.style.display = 'block';\n        this.isDrawingConnection = true;\n      }\n    }\n\n    if (!event.buttons) {\n      if (this.connectionSource && this.connectionSource.div && this.connectionSource.div.parentElement) {\n        const sourceRect = this.connectionSource.div.getBoundingClientRect();\n\n        const transformScale = this.scene.scale;\n        const parentRect = getParentBoundingClientRect(this.scene);\n\n        if (!parentRect) {\n          return;\n        }\n\n        const sourceVerticalCenter = (sourceRect.top - parentRect.top + sourceRect.height / 2) / transformScale;\n        const sourceHorizontalCenter = (sourceRect.left - parentRect.left + sourceRect.width / 2) / transformScale;\n\n        // Convert from DOM coords to connection coords\n        // TODO: Break this out into util function and add tests\n        const sourceX = (connectionLineX1 - sourceHorizontalCenter) / (sourceRect.width / 2 / transformScale);\n        const sourceY = (sourceVerticalCenter - connectionLineY1) / (sourceRect.height / 2 / transformScale);\n\n        let targetX;\n        let targetY;\n        let targetName;\n\n        if (this.connectionTarget && this.connectionTarget.div) {\n          const targetRect = this.connectionTarget.div.getBoundingClientRect();\n\n          const targetVerticalCenter = targetRect.top - parentRect.top + targetRect.height / 2;\n          const targetHorizontalCenter = targetRect.left - parentRect.left + targetRect.width / 2;\n\n          targetX = (x - targetHorizontalCenter) / (targetRect.width / 2);\n          targetY = (targetVerticalCenter - y) / (targetRect.height / 2);\n          targetName = this.connectionTarget.options.name;\n        } else {\n          const parentVerticalCenter = parentRect.height / 2;\n          const parentHorizontalCenter = parentRect.width / 2;\n\n          targetX = (x - parentHorizontalCenter) / (parentRect.width / 2);\n          targetY = (parentVerticalCenter - y) / (parentRect.height / 2);\n        }\n\n        const connection = {\n          source: {\n            x: sourceX,\n            y: sourceY,\n          },\n          target: {\n            x: targetX,\n            y: targetY,\n          },\n          targetName: targetName,\n          color: {\n            fixed: config.theme2.colors.text.primary,\n          },\n          size: {\n            fixed: 2,\n            min: 1,\n            max: 10,\n          },\n          path: ConnectionPath.Straight,\n        };\n\n        const { options } = this.connectionSource;\n        if (!options.connections) {\n          options.connections = [];\n        }\n        if (this.didConnectionLeaveHighlight) {\n          this.connectionSource.options.connections = [...options.connections, connection];\n          this.connectionSource.onChange(this.connectionSource.options);\n        }\n      }\n\n      if (this.connectionSVG) {\n        this.connectionSVG.style.display = 'none';\n      }\n\n      if (this.scene.selecto && this.scene.selecto.rootContainer) {\n        this.scene.selecto.rootContainer.style.cursor = 'default';\n        this.scene.selecto.rootContainer.removeEventListener('mousemove', this.connectionListener);\n      }\n\n      this.isDrawingConnection = false;\n      this.updateState();\n      this.scene.save();\n    }\n  };\n\n  // Handles mousemove and mouseup events when dragging an existing vertex\n  vertexListener = (event: MouseEvent) => {\n    this.scene.selecto!.rootContainer!.style.cursor = 'crosshair';\n\n    event.preventDefault();\n\n    if (!(this.connectionVertex && this.scene.div && this.scene.div.parentElement)) {\n      return;\n    }\n\n    const transformScale = this.scene.scale;\n    const parentBoundingRect = getParentBoundingClientRect(this.scene);\n\n    if (!parentBoundingRect) {\n      return;\n    }\n\n    const x = (event.pageX - parentBoundingRect.x) / transformScale ?? 0;\n    const y = (event.pageY - parentBoundingRect.y) / transformScale ?? 0;\n\n    this.connectionVertex?.setAttribute('cx', `${x}`);\n    this.connectionVertex?.setAttribute('cy', `${y}`);\n\n    const selectedValue = this.selection.value;\n    const sourceRect = selectedValue!.source.div!.getBoundingClientRect();\n\n    // calculate relative coordinates based on source and target coorindates of connection\n    const { x1, y1, x2, y2 } = calculateCoordinates(\n      sourceRect,\n      parentBoundingRect,\n      selectedValue?.info!,\n      selectedValue!.target,\n      transformScale\n    );\n\n    let { xStart, yStart, xEnd, yEnd } = { xStart: x1, yStart: y1, xEnd: x2, yEnd: y2 };\n    if (selectedValue?.sourceOriginal && selectedValue.targetOriginal) {\n      xStart = selectedValue.sourceOriginal.x;\n      yStart = selectedValue.sourceOriginal.y;\n      xEnd = selectedValue.targetOriginal.x;\n      yEnd = selectedValue.targetOriginal.y;\n    }\n\n    const xDist = xEnd - xStart;\n    const yDist = yEnd - yStart;\n\n    let vx1 = x1;\n    let vy1 = y1;\n    let vx2 = x2;\n    let vy2 = y2;\n    if (selectedValue && selectedValue.vertices) {\n      if (this.selectedVertexIndex !== undefined && this.selectedVertexIndex > 0) {\n        vx1 = selectedValue.vertices[this.selectedVertexIndex - 1].x * xDist + xStart;\n        vy1 = selectedValue.vertices[this.selectedVertexIndex - 1].y * yDist + yStart;\n      }\n      if (this.selectedVertexIndex !== undefined && this.selectedVertexIndex < selectedValue.vertices.length - 1) {\n        vx2 = selectedValue.vertices[this.selectedVertexIndex + 1].x * xDist + xStart;\n        vy2 = selectedValue.vertices[this.selectedVertexIndex + 1].y * yDist + yStart;\n      }\n    }\n\n    // Check if slope before vertex and after vertex is within snapping tolerance\n    let xSnap = x;\n    let ySnap = y;\n    let deleteVertex = false;\n    // Ignore if control key being held\n    if (!event.ctrlKey) {\n      // Check if segment before and after vertex are close to vertical or horizontal\n      const verticalBefore = Math.abs((x - vx1) / (y - vy1)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const verticalAfter = Math.abs((x - vx2) / (y - vy2)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const horizontalBefore = Math.abs((y - vy1) / (x - vx1)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const horizontalAfter = Math.abs((y - vy2) / (x - vx2)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n\n      if (verticalBefore) {\n        xSnap = vx1;\n      } else if (verticalAfter) {\n        xSnap = vx2;\n      }\n      if (horizontalBefore) {\n        ySnap = vy1;\n      } else if (horizontalAfter) {\n        ySnap = vy2;\n      }\n\n      if ((verticalBefore || verticalAfter) && (horizontalBefore || horizontalAfter)) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'move';\n      } else if (verticalBefore || verticalAfter) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'col-resize';\n      } else if (horizontalBefore || horizontalAfter) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'row-resize';\n      }\n\n      const angleOverall = calculateAngle(vx1, vy1, vx2, vy2);\n      const angleBefore = calculateAngle(vx1, vy1, x, y);\n      deleteVertex = Math.abs(angleBefore - angleOverall) < CONNECTION_VERTEX_SNAP_TOLERANCE;\n    }\n\n    if (deleteVertex) {\n      // Display temporary vertex removal\n      this.connectionVertexPath?.setAttribute('d', `M${vx1} ${vy1} L${vx2} ${vy2}`);\n      this.connectionSVGVertex!.style.display = 'block';\n      this.connectionVertex.style.display = 'none';\n    } else {\n      // Display temporary vertex during drag\n      this.connectionVertexPath?.setAttribute('d', `M${vx1} ${vy1} L${xSnap} ${ySnap} L${vx2} ${vy2}`);\n      this.connectionSVGVertex!.style.display = 'block';\n      this.connectionVertex.style.display = 'block';\n    }\n\n    // Handle mouseup\n    if (!event.buttons) {\n      // Remove existing event listener\n      this.scene.selecto?.rootContainer?.removeEventListener('mousemove', this.vertexListener);\n      this.scene.selecto?.rootContainer?.removeEventListener('mouseup', this.vertexListener);\n      this.scene.selecto!.rootContainer!.style.cursor = 'auto';\n      this.connectionSVGVertex!.style.display = 'none';\n\n      // call onChange here and update appropriate index of connection vertices array\n      const connectionIndex = selectedValue?.index;\n      const vertexIndex = this.selectedVertexIndex;\n\n      if (connectionIndex !== undefined && vertexIndex !== undefined) {\n        const currentSource = selectedValue!.source;\n        if (currentSource.options.connections) {\n          const currentConnections = [...currentSource.options.connections];\n          if (currentConnections[connectionIndex].vertices) {\n            const currentVertices = [...currentConnections[connectionIndex].vertices!];\n\n            // TODO for vertex removal, clear out originals?\n            if (deleteVertex) {\n              currentVertices.splice(vertexIndex, 1);\n            } else {\n              const currentVertex = { ...currentVertices[vertexIndex] };\n\n              currentVertex.x = (xSnap - xStart) / xDist;\n              currentVertex.y = (ySnap - yStart) / yDist;\n\n              currentVertices[vertexIndex] = currentVertex;\n            }\n\n            currentConnections[connectionIndex] = {\n              ...currentConnections[connectionIndex],\n              vertices: currentVertices,\n            };\n\n            // Update save model\n            currentSource.onChange({ ...currentSource.options, connections: currentConnections });\n            this.updateState();\n            this.scene.save();\n          }\n        }\n      }\n    }\n  };\n\n  // Handles mousemove and mouseup events when dragging a new vertex\n  vertexAddListener = (event: MouseEvent) => {\n    this.scene.selecto!.rootContainer!.style.cursor = 'crosshair';\n\n    event.preventDefault();\n\n    if (!(this.connectionVertex && this.scene.div && this.scene.div.parentElement)) {\n      return;\n    }\n\n    const transformScale = this.scene.scale;\n    const parentBoundingRect = getParentBoundingClientRect(this.scene);\n\n    if (!parentBoundingRect) {\n      return;\n    }\n\n    const x = (event.pageX - parentBoundingRect.x) / transformScale ?? 0;\n    const y = (event.pageY - parentBoundingRect.y) / transformScale ?? 0;\n\n    this.connectionVertex?.setAttribute('cx', `${x}`);\n    this.connectionVertex?.setAttribute('cy', `${y}`);\n\n    const selectedValue = this.selection.value;\n    const sourceRect = selectedValue!.source.div!.getBoundingClientRect();\n\n    // calculate relative coordinates based on source and target coorindates of connection\n    const { x1, y1, x2, y2 } = calculateCoordinates(\n      sourceRect,\n      parentBoundingRect,\n      selectedValue?.info!,\n      selectedValue!.target,\n      transformScale\n    );\n\n    let { xStart, yStart, xEnd, yEnd } = { xStart: x1, yStart: y1, xEnd: x2, yEnd: y2 };\n    if (selectedValue?.sourceOriginal && selectedValue.targetOriginal) {\n      xStart = selectedValue.sourceOriginal.x;\n      yStart = selectedValue.sourceOriginal.y;\n      xEnd = selectedValue.targetOriginal.x;\n      yEnd = selectedValue.targetOriginal.y;\n    }\n\n    const xDist = xEnd - xStart;\n    const yDist = yEnd - yStart;\n\n    let vx1 = x1;\n    let vy1 = y1;\n    let vx2 = x2;\n    let vy2 = y2;\n    if (selectedValue && selectedValue.vertices) {\n      if (this.selectedVertexIndex !== undefined && this.selectedVertexIndex > 0) {\n        vx1 = selectedValue.vertices[this.selectedVertexIndex - 1].x * xDist + xStart;\n        vy1 = selectedValue.vertices[this.selectedVertexIndex - 1].y * yDist + yStart;\n      }\n      if (this.selectedVertexIndex !== undefined && this.selectedVertexIndex < selectedValue.vertices.length) {\n        vx2 = selectedValue.vertices[this.selectedVertexIndex].x * xDist + xStart;\n        vy2 = selectedValue.vertices[this.selectedVertexIndex].y * yDist + yStart;\n      }\n    }\n\n    // Check if slope before vertex and after vertex is within snapping tolerance\n    let xSnap = x;\n    let ySnap = y;\n    // Ignore if control key being held\n    if (!event.ctrlKey) {\n      // Check if segment before and after vertex are close to vertical or horizontal\n      const verticalBefore = Math.abs((x - vx1) / (y - vy1)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const verticalAfter = Math.abs((x - vx2) / (y - vy2)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const horizontalBefore = Math.abs((y - vy1) / (x - vx1)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n      const horizontalAfter = Math.abs((y - vy2) / (x - vx2)) < CONNECTION_VERTEX_ORTHO_TOLERANCE;\n\n      if (verticalBefore) {\n        xSnap = vx1;\n      } else if (verticalAfter) {\n        xSnap = vx2;\n      }\n      if (horizontalBefore) {\n        ySnap = vy1;\n      } else if (horizontalAfter) {\n        ySnap = vy2;\n      }\n\n      if ((verticalBefore || verticalAfter) && (horizontalBefore || horizontalAfter)) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'move';\n      } else if (verticalBefore || verticalAfter) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'col-resize';\n      } else if (horizontalBefore || horizontalAfter) {\n        this.scene.selecto!.rootContainer!.style.cursor = 'row-resize';\n      }\n    }\n\n    this.connectionVertexPath?.setAttribute('d', `M${vx1} ${vy1} L${xSnap} ${ySnap} L${vx2} ${vy2}`);\n    this.connectionSVGVertex!.style.display = 'block';\n    this.connectionVertex.style.display = 'block';\n\n    // Handle mouseup\n    if (!event.buttons) {\n      // Remove existing event listener\n      this.scene.selecto?.rootContainer?.removeEventListener('mousemove', this.vertexAddListener);\n      this.scene.selecto?.rootContainer?.removeEventListener('mouseup', this.vertexAddListener);\n      this.scene.selecto!.rootContainer!.style.cursor = 'auto';\n      this.connectionSVGVertex!.style.display = 'none';\n\n      // call onChange here and insert new vertex at appropriate index of connection vertices array\n      const connectionIndex = selectedValue?.index;\n      const vertexIndex = this.selectedVertexIndex;\n\n      if (connectionIndex !== undefined && vertexIndex !== undefined) {\n        const currentSource = selectedValue!.source;\n        if (currentSource.options.connections) {\n          const currentConnections = [...currentSource.options.connections];\n          const newVertex = { x: (x - xStart) / xDist, y: (y - yStart) / yDist };\n          if (currentConnections[connectionIndex].vertices) {\n            const currentVertices = [...currentConnections[connectionIndex].vertices!];\n            currentVertices.splice(vertexIndex, 0, newVertex);\n            currentConnections[connectionIndex] = {\n              ...currentConnections[connectionIndex],\n              vertices: currentVertices,\n            };\n          } else {\n            // For first vertex creation\n            const currentVertices: ConnectionCoordinates[] = [newVertex];\n            currentConnections[connectionIndex] = {\n              ...currentConnections[connectionIndex],\n              vertices: currentVertices,\n            };\n          }\n\n          // Check for original state\n          if (\n            !currentConnections[connectionIndex].sourceOriginal ||\n            !currentConnections[connectionIndex].targetOriginal\n          ) {\n            currentConnections[connectionIndex] = {\n              ...currentConnections[connectionIndex],\n              sourceOriginal: { x: x1, y: y1 },\n              targetOriginal: { x: x2, y: y2 },\n            };\n          }\n          // Update save model\n          currentSource.onChange({ ...currentSource.options, connections: currentConnections });\n          this.updateState();\n          this.scene.save();\n        }\n      }\n    }\n  };\n\n  handleConnectionDragStart = (selectedTarget: HTMLElement, clientX: number, clientY: number) => {\n    this.scene.selecto!.rootContainer!.style.cursor = 'crosshair';\n    if (this.connectionSVG && this.connectionLine && this.scene.div && this.scene.div.parentElement) {\n      const connectionStartTargetBox = selectedTarget.getBoundingClientRect();\n\n      const transformScale = this.scene.scale;\n      const parentBoundingRect = getParentBoundingClientRect(this.scene);\n\n      if (!parentBoundingRect) {\n        return;\n      }\n\n      // Multiply by transform scale to calculate the correct scaled offset\n      const connectionAnchorOffsetX = CONNECTION_ANCHOR_HIGHLIGHT_OFFSET * transformScale;\n      const connectionAnchorOffsetY = CONNECTION_ANCHOR_HIGHLIGHT_OFFSET * transformScale;\n\n      const x = (connectionStartTargetBox.x - parentBoundingRect.x + connectionAnchorOffsetX) / transformScale;\n      const y = (connectionStartTargetBox.y - parentBoundingRect.y + connectionAnchorOffsetY) / transformScale;\n\n      const mouseX = clientX - parentBoundingRect.x;\n      const mouseY = clientY - parentBoundingRect.y;\n\n      this.connectionLine.setAttribute('x1', `${x}`);\n      this.connectionLine.setAttribute('y1', `${y}`);\n      this.connectionLine.setAttribute('x2', `${mouseX}`);\n      this.connectionLine.setAttribute('y2', `${mouseY}`);\n      this.didConnectionLeaveHighlight = false;\n    }\n\n    this.scene.selecto?.rootContainer?.addEventListener('mousemove', this.connectionListener);\n  };\n\n  // Add event listener at root container during existing vertex drag\n  handleVertexDragStart = (selectedTarget: HTMLElement) => {\n    // Get vertex index from selected target data\n    this.selectedVertexIndex = Number(selectedTarget.getAttribute('data-index'));\n\n    this.scene.selecto?.rootContainer?.addEventListener('mousemove', this.vertexListener);\n    this.scene.selecto?.rootContainer?.addEventListener('mouseup', this.vertexListener);\n  };\n\n  // Add event listener at root container during creation of new vertex\n  handleVertexAddDragStart = (selectedTarget: HTMLElement) => {\n    // Get vertex index from selected target data\n    this.selectedVertexIndex = Number(selectedTarget.getAttribute('data-index'));\n\n    this.scene.selecto?.rootContainer?.addEventListener('mousemove', this.vertexAddListener);\n    this.scene.selecto?.rootContainer?.addEventListener('mouseup', this.vertexAddListener);\n  };\n\n  onChange = (current: ConnectionState, update: CanvasConnection) => {\n    const connections = current.source.options.connections?.splice(0) ?? [];\n    connections[current.index] = update;\n    current.source.onChange({ ...current.source.options, connections });\n    this.updateState();\n  };\n\n  // used for moveable actions\n  connectionsNeedUpdate = (element: ElementState): boolean => {\n    return isConnectionSource(element) || isConnectionTarget(element, this.scene.byName);\n  };\n\n  render() {\n    return (\n      <>\n        <ConnectionAnchors\n          setRef={this.setConnectionAnchorRef}\n          setAnchorsRef={this.setAnchorsRef}\n          handleMouseLeave={this.handleMouseLeave}\n        />\n        <ConnectionSVG\n          setSVGRef={this.setConnectionSVGRef}\n          setLineRef={this.setConnectionLineRef}\n          setSVGVertexRef={this.setConnectionSVGVertexRef}\n          setVertexPathRef={this.setConnectionVertexPathRef}\n          setVertexRef={this.setConnectionVertexRef}\n          scene={this.scene}\n        />\n      </>\n    );\n  }\n}\n","import React, { useRef, useImperativeHandle, useEffect, useContext, useLayoutEffect, useState, useCallback, useMemo } from 'react';\n\n/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nvar roundNumber = function (num, decimal) {\n    return Number(num.toFixed(decimal));\n};\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nvar checkIsNumber = function (num, defaultValue) {\n    return typeof num === \"number\" ? num : defaultValue;\n};\n\nvar handleCallback = function (context, event, callback) {\n    if (callback && typeof callback === \"function\") {\n        callback(context, event);\n    }\n};\n\n/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nvar easeOut = function (t) {\n    return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nvar linear = function (t) {\n    return t;\n};\n// accelerating from zero velocity\nvar easeInQuad = function (t) {\n    return t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuad = function (t) {\n    return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuad = function (t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nvar easeInCubic = function (t) {\n    return t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutCubic = function (t) {\n    return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutCubic = function (t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nvar easeInQuart = function (t) {\n    return t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuart = function (t) {\n    return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuart = function (t) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nvar easeInQuint = function (t) {\n    return t * t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuint = function (t) {\n    return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuint = function (t) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\nvar animations = {\n    easeOut: easeOut,\n    linear: linear,\n    easeInQuad: easeInQuad,\n    easeOutQuad: easeOutQuad,\n    easeInOutQuad: easeInOutQuad,\n    easeInCubic: easeInCubic,\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n};\n\n/* eslint-disable no-param-reassign */\nvar handleCancelAnimationFrame = function (animation) {\n    if (typeof animation === \"number\") {\n        cancelAnimationFrame(animation);\n    }\n};\nvar handleCancelAnimation = function (contextInstance) {\n    if (!contextInstance.mounted)\n        return;\n    handleCancelAnimationFrame(contextInstance.animation);\n    // Clear animation state\n    contextInstance.animate = false;\n    contextInstance.animation = null;\n    contextInstance.velocity = null;\n};\nfunction handleSetupAnimation(contextInstance, animationName, animationTime, callback) {\n    if (!contextInstance.mounted)\n        return;\n    var startTime = new Date().getTime();\n    var lastStep = 1;\n    // if another animation is active\n    handleCancelAnimation(contextInstance);\n    // new animation\n    contextInstance.animation = function () {\n        if (!contextInstance.mounted) {\n            return handleCancelAnimationFrame(contextInstance.animation);\n        }\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / animationTime;\n        var animationType = animations[animationName];\n        var step = animationType(animationProgress);\n        if (frameTime >= animationTime) {\n            callback(lastStep);\n            contextInstance.animation = null;\n        }\n        else if (contextInstance.animation) {\n            callback(step);\n            requestAnimationFrame(contextInstance.animation);\n        }\n    };\n    requestAnimationFrame(contextInstance.animation);\n}\nfunction isValidTargetState(targetState) {\n    var scale = targetState.scale, positionX = targetState.positionX, positionY = targetState.positionY;\n    if (Number.isNaN(scale) ||\n        Number.isNaN(positionX) ||\n        Number.isNaN(positionY)) {\n        return false;\n    }\n    return true;\n}\nfunction animate(contextInstance, targetState, animationTime, animationName) {\n    var isValid = isValidTargetState(targetState);\n    if (!contextInstance.mounted || !isValid)\n        return;\n    var setTransformState = contextInstance.setTransformState;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDiff = targetState.scale - scale;\n    var positionXDiff = targetState.positionX - positionX;\n    var positionYDiff = targetState.positionY - positionY;\n    if (animationTime === 0) {\n        setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n    }\n    else {\n        // animation start timestamp\n        handleSetupAnimation(contextInstance, animationName, animationTime, function (step) {\n            var newScale = scale + scaleDiff * step;\n            var newPositionX = positionX + positionXDiff * step;\n            var newPositionY = positionY + positionYDiff * step;\n            setTransformState(newScale, newPositionX, newPositionY);\n        });\n    }\n}\n\n/* eslint-disable no-param-reassign */\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var contentWidth = contentComponent.offsetWidth;\n    var contentHeight = contentComponent.offsetHeight;\n    var newContentWidth = contentWidth * newScale;\n    var newContentHeight = contentHeight * newScale;\n    var newDiffWidth = wrapperWidth - newContentWidth;\n    var newDiffHeight = wrapperHeight - newContentHeight;\n    return {\n        wrapperWidth: wrapperWidth,\n        wrapperHeight: wrapperHeight,\n        newContentWidth: newContentWidth,\n        newDiffWidth: newDiffWidth,\n        newContentHeight: newContentHeight,\n        newDiffHeight: newDiffHeight,\n    };\n}\nvar getBounds = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, centerZoomedOut) {\n    var scaleWidthFactor = wrapperWidth > newContentWidth\n        ? diffWidth * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var scaleHeightFactor = wrapperHeight > newContentHeight\n        ? diffHeight * (centerZoomedOut ? 1 : 0.5)\n        : 0;\n    var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n    var maxPositionX = scaleWidthFactor;\n    var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n    var maxPositionY = scaleHeightFactor;\n    return { minPositionX: minPositionX, maxPositionX: maxPositionX, minPositionY: minPositionY, maxPositionY: maxPositionY };\n};\nvar calculateBounds = function (contextInstance, newScale) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n    var centerZoomedOut = contextInstance.setup.centerZoomedOut;\n    if (!wrapperComponent || !contentComponent) {\n        throw new Error(\"Components are not mounted\");\n    }\n    var _a = getComponentsSizes(wrapperComponent, contentComponent, newScale), wrapperWidth = _a.wrapperWidth, wrapperHeight = _a.wrapperHeight, newContentWidth = _a.newContentWidth, newDiffWidth = _a.newDiffWidth, newContentHeight = _a.newContentHeight, newDiffHeight = _a.newDiffHeight;\n    var bounds = getBounds(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, Boolean(centerZoomedOut));\n    return bounds;\n};\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nvar boundLimiter = function (value, minBound, maxBound, isActive) {\n    if (!isActive)\n        return roundNumber(value, 2);\n    if (value < minBound)\n        return roundNumber(minBound, 2);\n    if (value > maxBound)\n        return roundNumber(maxBound, 2);\n    return roundNumber(value, 2);\n};\nvar handleCalculateBounds = function (contextInstance, newScale) {\n    var bounds = calculateBounds(contextInstance, newScale);\n    // Save bounds\n    contextInstance.bounds = bounds;\n    return bounds;\n};\nfunction getMouseBoundedPosition(positionX, positionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent) {\n    var minPositionX = bounds.minPositionX, minPositionY = bounds.minPositionY, maxPositionX = bounds.maxPositionX, maxPositionY = bounds.maxPositionY;\n    var paddingX = 0;\n    var paddingY = 0;\n    if (wrapperComponent) {\n        paddingX = paddingValueX;\n        paddingY = paddingValueY;\n    }\n    var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n    var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n    return { x: x, y: y };\n}\n\nfunction handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds) {\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    var scaleDifference = newScale - scale;\n    if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") {\n        console.error(\"Mouse X and Y position were not provided!\");\n        return { x: positionX, y: positionY };\n    }\n    var calculatedPositionX = positionX - mouseX * scaleDifference;\n    var calculatedPositionY = positionY - mouseY * scaleDifference;\n    // do not limit to bounds when there is padding animation,\n    // it causes animation strange behaviour\n    var newPositions = getMouseBoundedPosition(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, 0, null);\n    return newPositions;\n}\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n    var scalePadding = enablePadding ? zoomPadding : 0;\n    var minScaleWithPadding = minScale - scalePadding;\n    if (!Number.isNaN(maxScale) && zoom >= maxScale)\n        return maxScale;\n    if (!Number.isNaN(minScale) && zoom <= minScaleWithPadding)\n        return minScaleWithPadding;\n    return zoom;\n}\n\nvar isPanningStartAllowed = function (contextInstance, event) {\n    var excluded = contextInstance.setup.panning.excluded;\n    var isInitialized = contextInstance.isInitialized, wrapperComponent = contextInstance.wrapperComponent;\n    var target = event.target;\n    var targetIsShadowDom = \"shadowRoot\" in target && \"composedPath\" in event;\n    var isWrapperChild = targetIsShadowDom\n        ? event.composedPath().some(function (el) {\n            if (!(el instanceof Element)) {\n                return false;\n            }\n            return wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(el);\n        })\n        : wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar isPanningAllowed = function (contextInstance) {\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning, setup = contextInstance.setup;\n    var disabled = setup.panning.disabled;\n    var isAllowed = isInitialized && isPanning && !disabled;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar handlePanningSetup = function (contextInstance, event) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with mouse\n    var x = event.clientX;\n    var y = event.clientY;\n    contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n};\nvar handleTouchPanningSetup = function (contextInstance, event) {\n    var touches = event.touches;\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY;\n    contextInstance.isPanning = true;\n    // Panning with touch\n    var oneFingerTouch = touches.length === 1;\n    if (oneFingerTouch) {\n        var x = touches[0].clientX;\n        var y = touches[0].clientY;\n        contextInstance.startCoords = { x: x - positionX, y: y - positionY };\n    }\n};\nfunction handlePanToBounds(contextInstance) {\n    var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n    var _b = contextInstance.setup, disabled = _b.disabled, limitToBounds = _b.limitToBounds, centerZoomedOut = _b.centerZoomedOut;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    if (disabled || !wrapperComponent || !contextInstance.bounds)\n        return;\n    var _c = contextInstance.bounds, maxPositionX = _c.maxPositionX, minPositionX = _c.minPositionX, maxPositionY = _c.maxPositionY, minPositionY = _c.minPositionY;\n    var xChanged = positionX > maxPositionX || positionX < minPositionX;\n    var yChanged = positionY > maxPositionY || positionY < minPositionY;\n    var mousePosX = positionX > maxPositionX\n        ? wrapperComponent.offsetWidth\n        : contextInstance.setup.minPositionX || 0;\n    var mousePosY = positionY > maxPositionY\n        ? wrapperComponent.offsetHeight\n        : contextInstance.setup.minPositionY || 0;\n    var _d = handleCalculateZoomPositions(contextInstance, mousePosX, mousePosY, scale, contextInstance.bounds, limitToBounds || centerZoomedOut), x = _d.x, y = _d.y;\n    return {\n        scale: scale,\n        positionX: xChanged ? x : positionX,\n        positionY: yChanged ? y : positionY,\n    };\n}\nfunction handleNewPosition(contextInstance, newPositionX, newPositionY, paddingValueX, paddingValueY) {\n    var limitToBounds = contextInstance.setup.limitToBounds;\n    var wrapperComponent = contextInstance.wrapperComponent, bounds = contextInstance.bounds;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (wrapperComponent === null ||\n        bounds === null ||\n        (newPositionX === positionX && newPositionY === positionY)) {\n        return;\n    }\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent), x = _b.x, y = _b.y;\n    contextInstance.setTransformState(scale, x, y);\n}\nvar getPanningClientPosition = function (contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, transformState = contextInstance.transformState;\n    var panning = contextInstance.setup.panning;\n    var lockAxisX = panning.lockAxisX, lockAxisY = panning.lockAxisY;\n    var positionX = transformState.positionX, positionY = transformState.positionY;\n    if (!startCoords) {\n        return { x: positionX, y: positionY };\n    }\n    var mouseX = clientX - startCoords.x;\n    var mouseY = clientY - startCoords.y;\n    var newPositionX = lockAxisX ? positionX : mouseX;\n    var newPositionY = lockAxisY ? positionY : mouseY;\n    return { x: newPositionX, y: newPositionY };\n};\nvar getPaddingValue = function (contextInstance, size) {\n    var setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var minScale = setup.minScale, disablePadding = setup.disablePadding;\n    if (size > 0 && scale >= minScale && !disablePadding) {\n        return size;\n    }\n    return 0;\n};\n\nvar isVelocityCalculationAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar isVelocityAllowed = function (contextInstance) {\n    var mounted = contextInstance.mounted, velocity = contextInstance.velocity, bounds = contextInstance.bounds;\n    var _a = contextInstance.setup, disabled = _a.disabled, velocityAnimation = _a.velocityAnimation;\n    var scale = contextInstance.transformState.scale;\n    var disabledVelocity = velocityAnimation.disabled;\n    var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n    if (!isAllowed)\n        return false;\n    if (!velocity || !bounds)\n        return false;\n    return true;\n};\nfunction getVelocityMoveTime(contextInstance, velocity) {\n    var velocityAnimation = contextInstance.setup.velocityAnimation;\n    var equalToMove = velocityAnimation.equalToMove, animationTime = velocityAnimation.animationTime, sensitivity = velocityAnimation.sensitivity;\n    if (equalToMove) {\n        return animationTime * velocity * sensitivity;\n    }\n    return animationTime;\n}\nfunction getVelocityPosition(newPosition, startPosition, currentPosition, isLocked, limitToBounds, minPosition, maxPosition, minTarget, maxTarget, step) {\n    if (limitToBounds) {\n        if (startPosition > maxPosition && currentPosition > maxPosition) {\n            var calculatedPosition = maxPosition + (newPosition - maxPosition) * step;\n            if (calculatedPosition > maxTarget)\n                return maxTarget;\n            if (calculatedPosition < maxPosition)\n                return maxPosition;\n            return calculatedPosition;\n        }\n        if (startPosition < minPosition && currentPosition < minPosition) {\n            var calculatedPosition = minPosition + (newPosition - minPosition) * step;\n            if (calculatedPosition < minTarget)\n                return minTarget;\n            if (calculatedPosition > minPosition)\n                return minPosition;\n            return calculatedPosition;\n        }\n    }\n    if (isLocked)\n        return startPosition;\n    return boundLimiter(newPosition, minPosition, maxPosition, limitToBounds);\n}\n\nfunction getSizeMultiplier(wrapperComponent, equalToMove) {\n    var defaultMultiplier = 1;\n    if (equalToMove) {\n        return Math.min(defaultMultiplier, wrapperComponent.offsetWidth / window.innerWidth);\n    }\n    return defaultMultiplier;\n}\nfunction handleCalculateVelocity(contextInstance, position) {\n    var isAllowed = isVelocityCalculationAllowed(contextInstance);\n    if (!isAllowed) {\n        return;\n    }\n    var lastMousePosition = contextInstance.lastMousePosition, velocityTime = contextInstance.velocityTime, setup = contextInstance.setup;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var equalToMove = setup.velocityAnimation.equalToMove;\n    var now = Date.now();\n    if (lastMousePosition && velocityTime && wrapperComponent) {\n        var sizeMultiplier = getSizeMultiplier(wrapperComponent, equalToMove);\n        var distanceX = position.x - lastMousePosition.x;\n        var distanceY = position.y - lastMousePosition.y;\n        var velocityX = distanceX / sizeMultiplier;\n        var velocityY = distanceY / sizeMultiplier;\n        var interval = now - velocityTime;\n        var speed = distanceX * distanceX + distanceY * distanceY;\n        var velocity = Math.sqrt(speed) / interval;\n        contextInstance.velocity = { velocityX: velocityX, velocityY: velocityY, total: velocity };\n    }\n    contextInstance.lastMousePosition = position;\n    contextInstance.velocityTime = now;\n}\nfunction handleVelocityPanning(contextInstance) {\n    var velocity = contextInstance.velocity, bounds = contextInstance.bounds, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var isAllowed = isVelocityAllowed(contextInstance);\n    if (!isAllowed || !velocity || !bounds || !wrapperComponent) {\n        return;\n    }\n    var velocityX = velocity.velocityX, velocityY = velocity.velocityY, total = velocity.total;\n    var maxPositionX = bounds.maxPositionX, minPositionX = bounds.minPositionX, maxPositionY = bounds.maxPositionY, minPositionY = bounds.minPositionY;\n    var limitToBounds = setup.limitToBounds, alignmentAnimation = setup.alignmentAnimation;\n    var zoomAnimation = setup.zoomAnimation, panning = setup.panning;\n    var lockAxisY = panning.lockAxisY, lockAxisX = panning.lockAxisX;\n    var animationType = zoomAnimation.animationType;\n    var sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, velocityAlignmentTime = alignmentAnimation.velocityAlignmentTime;\n    var alignAnimationTime = velocityAlignmentTime;\n    var moveAnimationTime = getVelocityMoveTime(contextInstance, total);\n    var finalAnimationTime = Math.max(moveAnimationTime, alignAnimationTime);\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    var paddingX = (paddingValueX * wrapperComponent.offsetWidth) / 100;\n    var paddingY = (paddingValueY * wrapperComponent.offsetHeight) / 100;\n    var maxTargetX = maxPositionX + paddingX;\n    var minTargetX = minPositionX - paddingX;\n    var maxTargetY = maxPositionY + paddingY;\n    var minTargetY = minPositionY - paddingY;\n    var startState = contextInstance.transformState;\n    var startTime = new Date().getTime();\n    handleSetupAnimation(contextInstance, animationType, finalAnimationTime, function (step) {\n        var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n        var frameTime = new Date().getTime() - startTime;\n        var animationProgress = frameTime / alignAnimationTime;\n        var alignAnimation = animations[alignmentAnimation.animationType];\n        var alignStep = 1 - alignAnimation(Math.min(1, animationProgress));\n        var customStep = 1 - step;\n        var newPositionX = positionX + velocityX * customStep;\n        var newPositionY = positionY + velocityY * customStep;\n        var currentPositionX = getVelocityPosition(newPositionX, startState.positionX, positionX, lockAxisX, limitToBounds, minPositionX, maxPositionX, minTargetX, maxTargetX, alignStep);\n        var currentPositionY = getVelocityPosition(newPositionY, startState.positionY, positionY, lockAxisY, limitToBounds, minPositionY, maxPositionY, minTargetY, maxTargetY, alignStep);\n        if (positionX !== newPositionX || positionY !== newPositionY) {\n            contextInstance.setTransformState(scale, currentPositionX, currentPositionY);\n        }\n    });\n}\n\nfunction handlePanningStart(contextInstance, event) {\n    var scale = contextInstance.transformState.scale;\n    handleCancelAnimation(contextInstance);\n    handleCalculateBounds(contextInstance, scale);\n    if (window.TouchEvent !== undefined && event instanceof TouchEvent) {\n        handleTouchPanningSetup(contextInstance, event);\n    }\n    else {\n        handlePanningSetup(contextInstance, event);\n    }\n}\nfunction handleAlignToBounds(contextInstance) {\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, minScale = _a.minScale, alignmentAnimation = _a.alignmentAnimation;\n    var disabled = alignmentAnimation.disabled, sizeX = alignmentAnimation.sizeX, sizeY = alignmentAnimation.sizeY, animationTime = alignmentAnimation.animationTime, animationType = alignmentAnimation.animationType;\n    var isDisabled = disabled || scale < minScale || (!sizeX && !sizeY);\n    if (isDisabled)\n        return;\n    var targetState = handlePanToBounds(contextInstance);\n    if (targetState) {\n        animate(contextInstance, targetState, animationTime, animationType);\n    }\n}\nfunction handlePanning(contextInstance, clientX, clientY) {\n    var startCoords = contextInstance.startCoords, setup = contextInstance.setup;\n    var _a = setup.alignmentAnimation, sizeX = _a.sizeX, sizeY = _a.sizeY;\n    if (!startCoords)\n        return;\n    var _b = getPanningClientPosition(contextInstance, clientX, clientY), x = _b.x, y = _b.y;\n    var paddingValueX = getPaddingValue(contextInstance, sizeX);\n    var paddingValueY = getPaddingValue(contextInstance, sizeY);\n    handleCalculateVelocity(contextInstance, { x: x, y: y });\n    handleNewPosition(contextInstance, x, y, paddingValueX, paddingValueY);\n}\nfunction handlePanningEnd(contextInstance) {\n    if (contextInstance.isPanning) {\n        var velocityDisabled = contextInstance.setup.panning.velocityDisabled;\n        var velocity = contextInstance.velocity, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        contextInstance.isPanning = false;\n        contextInstance.animate = false;\n        contextInstance.animation = null;\n        var wrapperRect = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.getBoundingClientRect();\n        var contentRect = contentComponent === null || contentComponent === void 0 ? void 0 : contentComponent.getBoundingClientRect();\n        var wrapperWidth = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.width) || 0;\n        var wrapperHeight = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.height) || 0;\n        var contentWidth = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.width) || 0;\n        var contentHeight = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.height) || 0;\n        var isZoomed = wrapperWidth < contentWidth || wrapperHeight < contentHeight;\n        var shouldAnimate = !velocityDisabled && velocity && (velocity === null || velocity === void 0 ? void 0 : velocity.total) > 0.1 && isZoomed;\n        if (shouldAnimate) {\n            handleVelocityPanning(contextInstance);\n        }\n        else {\n            handleAlignToBounds(contextInstance);\n        }\n    }\n}\n\nfunction handleZoomToPoint(contextInstance, scale, mouseX, mouseY) {\n    var _a = contextInstance.setup, minScale = _a.minScale, maxScale = _a.maxScale, limitToBounds = _a.limitToBounds;\n    var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, 0, false);\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var _b = handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds), x = _b.x, y = _b.y;\n    return { scale: newScale, positionX: x, positionY: y };\n}\nfunction handleAlignToScaleBounds(contextInstance, mousePositionX, mousePositionY) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.setup, minScale = _a.minScale, limitToBounds = _a.limitToBounds, zoomAnimation = _a.zoomAnimation;\n    var disabled = zoomAnimation.disabled, animationTime = zoomAnimation.animationTime, animationType = zoomAnimation.animationType;\n    var isDisabled = disabled || scale >= minScale;\n    if (scale >= 1 || limitToBounds) {\n        // fire fit to bounds animation\n        handleAlignToBounds(contextInstance);\n    }\n    if (isDisabled || !wrapperComponent || !contextInstance.mounted)\n        return;\n    var mouseX = mousePositionX || wrapperComponent.offsetWidth / 2;\n    var mouseY = mousePositionY || wrapperComponent.offsetHeight / 2;\n    var targetState = handleZoomToPoint(contextInstance, minScale, mouseX, mouseY);\n    if (targetState) {\n        animate(contextInstance, targetState, animationTime, animationType);\n    }\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nvar initialState = {\n    previousScale: 1,\n    scale: 1,\n    positionX: 0,\n    positionY: 0,\n};\nvar initialSetup = {\n    disabled: false,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    centerZoomedOut: false,\n    centerOnInit: false,\n    disablePadding: false,\n    smooth: true,\n    wheel: {\n        step: 0.2,\n        disabled: false,\n        smoothStep: 0.001,\n        wheelDisabled: false,\n        touchPadDisabled: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    panning: {\n        disabled: false,\n        velocityDisabled: false,\n        lockAxisX: false,\n        lockAxisY: false,\n        allowLeftClickPan: true,\n        allowMiddleClickPan: true,\n        allowRightClickPan: true,\n        wheelPanning: false,\n        activationKeys: [],\n        excluded: [],\n    },\n    pinch: {\n        step: 5,\n        disabled: false,\n        excluded: [],\n    },\n    doubleClick: {\n        disabled: false,\n        step: 0.7,\n        mode: \"zoomIn\",\n        animationType: \"easeOut\",\n        animationTime: 200,\n        excluded: [],\n    },\n    zoomAnimation: {\n        disabled: false,\n        size: 0.4,\n        animationTime: 200,\n        animationType: \"easeOut\",\n    },\n    alignmentAnimation: {\n        disabled: false,\n        sizeX: 100,\n        sizeY: 100,\n        animationTime: 200,\n        velocityAlignmentTime: 400,\n        animationType: \"easeOut\",\n    },\n    velocityAnimation: {\n        disabled: false,\n        sensitivity: 1,\n        animationTime: 400,\n        animationType: \"easeOut\",\n        equalToMove: true,\n    },\n};\n\nvar createState = function (props) {\n    var _a, _b, _c, _d;\n    return {\n        previousScale: (_a = props.initialScale) !== null && _a !== void 0 ? _a : initialState.scale,\n        scale: (_b = props.initialScale) !== null && _b !== void 0 ? _b : initialState.scale,\n        positionX: (_c = props.initialPositionX) !== null && _c !== void 0 ? _c : initialState.positionX,\n        positionY: (_d = props.initialPositionY) !== null && _d !== void 0 ? _d : initialState.positionY,\n    };\n};\nvar createSetup = function (props) {\n    var newSetup = __assign({}, initialSetup);\n    Object.keys(props).forEach(function (key) {\n        var validValue = typeof props[key] !== \"undefined\";\n        var validParameter = typeof initialSetup[key] !== \"undefined\";\n        if (validParameter && validValue) {\n            var dataType = Object.prototype.toString.call(initialSetup[key]);\n            var isObject = dataType === \"[object Object]\";\n            var isArray = dataType === \"[object Array]\";\n            if (isObject) {\n                newSetup[key] = __assign(__assign({}, initialSetup[key]), props[key]);\n            }\n            else if (isArray) {\n                newSetup[key] = __spreadArray(__spreadArray([], initialSetup[key], true), props[key], true);\n            }\n            else {\n                newSetup[key] = props[key];\n            }\n        }\n    });\n    return newSetup;\n};\n\nvar handleCalculateButtonZoom = function (contextInstance, delta, step) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, smooth = setup.smooth;\n    var size = zoomAnimation.size;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = smooth\n        ? scale * Math.exp(delta * step)\n        : scale + delta * step;\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, false);\n    return newScale;\n};\nfunction handleZoomToViewCenter(contextInstance, delta, step, animationTime, animationType) {\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return console.error(\"No WrapperComponent found\");\n    var wrapperWidth = wrapperComponent.offsetWidth;\n    var wrapperHeight = wrapperComponent.offsetHeight;\n    var mouseX = (wrapperWidth / 2 - positionX) / scale;\n    var mouseY = (wrapperHeight / 2 - positionY) / scale;\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mouseX, mouseY);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    animate(contextInstance, targetState, animationTime, animationType);\n}\nfunction resetTransformations(contextInstance, animationTime, animationType, onResetTransformation) {\n    var setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var limitToBounds = setup.limitToBounds;\n    var initialTransformation = createState(contextInstance.props);\n    var _a = contextInstance.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n    if (!wrapperComponent)\n        return;\n    var newBounds = calculateBounds(contextInstance, initialTransformation.scale);\n    var boundedPositions = getMouseBoundedPosition(initialTransformation.positionX, initialTransformation.positionY, newBounds, limitToBounds, 0, 0, wrapperComponent);\n    var newState = {\n        scale: initialTransformation.scale,\n        positionX: boundedPositions.x,\n        positionY: boundedPositions.y,\n    };\n    if (scale === initialTransformation.scale &&\n        positionX === initialTransformation.positionX &&\n        positionY === initialTransformation.positionY) {\n        return;\n    }\n    onResetTransformation === null || onResetTransformation === void 0 ? void 0 : onResetTransformation();\n    animate(contextInstance, newState, animationTime, animationType);\n}\nfunction getOffset(element, wrapper, content, state) {\n    var offset = element.getBoundingClientRect();\n    var wrapperOffset = wrapper.getBoundingClientRect();\n    var contentOffset = content.getBoundingClientRect();\n    var xOff = wrapperOffset.x * state.scale;\n    var yOff = wrapperOffset.y * state.scale;\n    return {\n        x: (offset.x - contentOffset.x + xOff) / state.scale,\n        y: (offset.y - contentOffset.y + yOff) / state.scale,\n    };\n}\nfunction calculateZoomToNode(contextInstance, node, customZoom) {\n    var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent, transformState = contextInstance.transformState;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, minScale = _a.minScale, maxScale = _a.maxScale;\n    if (!wrapperComponent || !contentComponent)\n        return transformState;\n    var wrapperRect = wrapperComponent.getBoundingClientRect();\n    var nodeRect = node.getBoundingClientRect();\n    var nodeOffset = getOffset(node, wrapperComponent, contentComponent, transformState);\n    var nodeLeft = nodeOffset.x;\n    var nodeTop = nodeOffset.y;\n    var nodeWidth = nodeRect.width / transformState.scale;\n    var nodeHeight = nodeRect.height / transformState.scale;\n    var scaleX = wrapperComponent.offsetWidth / nodeWidth;\n    var scaleY = wrapperComponent.offsetHeight / nodeHeight;\n    var newScale = checkZoomBounds(customZoom || Math.min(scaleX, scaleY), minScale, maxScale, 0, false);\n    var offsetX = (wrapperRect.width - nodeWidth * newScale) / 2;\n    var offsetY = (wrapperRect.height - nodeHeight * newScale) / 2;\n    var newPositionX = (wrapperRect.left - nodeLeft) * newScale + offsetX;\n    var newPositionY = (wrapperRect.top - nodeTop) * newScale + offsetY;\n    var bounds = calculateBounds(contextInstance, newScale);\n    var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, 0, 0, wrapperComponent), x = _b.x, y = _b.y;\n    return { positionX: x, positionY: y, scale: newScale };\n}\n\nvar zoomIn = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, 1, step, animationTime, animationType);\n    };\n};\nvar zoomOut = function (contextInstance) {\n    return function (step, animationTime, animationType) {\n        if (step === void 0) { step = 0.5; }\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleZoomToViewCenter(contextInstance, -1, step, animationTime, animationType);\n    };\n};\nvar setTransform = function (contextInstance) {\n    return function (newPositionX, newPositionY, newScale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 300; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var _a = contextInstance.transformState, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale;\n        var wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        var disabled = contextInstance.setup.disabled;\n        if (disabled || !wrapperComponent || !contentComponent)\n            return;\n        var targetState = {\n            positionX: Number.isNaN(newPositionX) ? positionX : newPositionX,\n            positionY: Number.isNaN(newPositionY) ? positionY : newPositionY,\n            scale: Number.isNaN(newScale) ? scale : newScale,\n        };\n        animate(contextInstance, targetState, animationTime, animationType);\n    };\n};\nvar resetTransform = function (contextInstance) {\n    return function (animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        resetTransformations(contextInstance, animationTime, animationType);\n    };\n};\nvar centerView = function (contextInstance) {\n    return function (scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 200; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        var transformState = contextInstance.transformState, wrapperComponent = contextInstance.wrapperComponent, contentComponent = contextInstance.contentComponent;\n        if (wrapperComponent && contentComponent) {\n            var targetState = getCenterPosition(scale || transformState.scale, wrapperComponent, contentComponent);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\nvar zoomToElement = function (contextInstance) {\n    return function (node, scale, animationTime, animationType) {\n        if (animationTime === void 0) { animationTime = 600; }\n        if (animationType === void 0) { animationType = \"easeOut\"; }\n        handleCancelAnimation(contextInstance);\n        var wrapperComponent = contextInstance.wrapperComponent;\n        var target = typeof node === \"string\" ? document.getElementById(node) : node;\n        if (wrapperComponent && target && wrapperComponent.contains(target)) {\n            var targetState = calculateZoomToNode(contextInstance, target, scale);\n            animate(contextInstance, targetState, animationTime, animationType);\n        }\n    };\n};\n\nvar getControls = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        zoomIn: zoomIn(contextInstance),\n        zoomOut: zoomOut(contextInstance),\n        setTransform: setTransform(contextInstance),\n        resetTransform: resetTransform(contextInstance),\n        centerView: centerView(contextInstance),\n        zoomToElement: zoomToElement(contextInstance),\n    };\n};\nvar getState = function (contextInstance) {\n    return {\n        instance: contextInstance,\n        state: contextInstance.transformState,\n    };\n};\nvar getContext = function (contextInstance) {\n    var ref = {};\n    Object.assign(ref, getState(contextInstance));\n    Object.assign(ref, getControls(contextInstance));\n    return ref;\n};\n\n// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nvar passiveSupported = false;\nfunction makePassiveEventOption() {\n    try {\n        var options = {\n            get passive() {\n                // This function will be called when the browser\n                //   attempts to access the passive property.\n                passiveSupported = true;\n                return false;\n            },\n        };\n        return options;\n    }\n    catch (err) {\n        passiveSupported = false;\n        return passiveSupported;\n    }\n}\n\nvar isExcludedNode = function (node, excluded) {\n    return excluded.some(function (exclude) {\n        return node.matches(\"\".concat(exclude, \", .\").concat(exclude, \", \").concat(exclude, \" *, .\").concat(exclude, \" *\"));\n    });\n};\nvar cancelTimeout = function (timeout) {\n    if (timeout) {\n        clearTimeout(timeout);\n    }\n};\n\nvar getTransformStyles = function (x, y, scale) {\n    // Standard translate prevents blurry svg on the safari\n    return \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(\").concat(scale, \")\");\n};\nvar getMatrixTransformStyles = function (x, y, scale) {\n    // The shorthand for matrix does not work for Safari hence the need to explicitly use matrix3d\n    // Refer to https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n    var a = scale;\n    var b = 0;\n    var c = 0;\n    var d = scale;\n    var tx = x;\n    var ty = y;\n    return \"matrix3d(\".concat(a, \", \").concat(b, \", 0, 0, \").concat(c, \", \").concat(d, \", 0, 0, 0, 0, 1, 0, \").concat(tx, \", \").concat(ty, \", 0, 1)\");\n};\nvar getCenterPosition = function (scale, wrapperComponent, contentComponent) {\n    var contentWidth = contentComponent.offsetWidth * scale;\n    var contentHeight = contentComponent.offsetHeight * scale;\n    var centerPositionX = (wrapperComponent.offsetWidth - contentWidth) / 2;\n    var centerPositionY = (wrapperComponent.offsetHeight - contentHeight) / 2;\n    return {\n        scale: scale,\n        positionX: centerPositionX,\n        positionY: centerPositionY,\n    };\n};\n\nfunction mergeRefs(refs) {\n    return function (value) {\n        refs.forEach(function (ref) {\n            if (typeof ref === \"function\") {\n                ref(value);\n            }\n            else if (ref != null) {\n                ref.current = value;\n            }\n        });\n    };\n}\n\nvar isWheelAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.wheel, disabled = _a.disabled, wheelDisabled = _a.wheelDisabled, touchPadDisabled = _a.touchPadDisabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized, isPanning = contextInstance.isPanning;\n    var target = event.target;\n    var isAllowed = isInitialized && !isPanning && !disabled && target;\n    if (!isAllowed)\n        return false;\n    // Event ctrlKey detects if touchpad action is executing wheel or pinch gesture\n    if (wheelDisabled && !event.ctrlKey)\n        return false;\n    if (touchPadDisabled && event.ctrlKey)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar getDeltaY = function (event) {\n    if (event) {\n        return event.deltaY < 0 ? 1 : -1;\n    }\n    return 0;\n};\nfunction getDelta(event, customDelta) {\n    var deltaY = getDeltaY(event);\n    var delta = checkIsNumber(customDelta, deltaY);\n    return delta;\n}\nfunction getMousePosition(event, contentComponent, scale) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var mouseX = 0;\n    var mouseY = 0;\n    if (\"clientX\" in event) {\n        // mouse position x, y over wrapper component\n        mouseX = (event.clientX - contentRect.left) / scale;\n        mouseY = (event.clientY - contentRect.top) / scale;\n    }\n    else {\n        var touch = event.touches[0];\n        mouseX = (touch.clientX - contentRect.left) / scale;\n        mouseY = (touch.clientY - contentRect.top) / scale;\n    }\n    if (Number.isNaN(mouseX) || Number.isNaN(mouseY))\n        console.error(\"No mouse or touch offset found\");\n    return {\n        x: mouseX,\n        y: mouseY,\n    };\n}\nvar handleCalculateWheelZoom = function (contextInstance, delta, step, disable, getTarget) {\n    var scale = contextInstance.transformState.scale;\n    var wrapperComponent = contextInstance.wrapperComponent, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!wrapperComponent) {\n        throw new Error(\"Wrapper is not mounted\");\n    }\n    var targetScale = scale + delta * step;\n    if (getTarget)\n        return targetScale;\n    var paddingEnabled = disable ? false : !disabled;\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled && !disablePadding);\n    return newScale;\n};\nvar handleWheelZoomStop = function (contextInstance, event) {\n    var previousWheelEvent = contextInstance.previousWheelEvent;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, maxScale = _a.maxScale, minScale = _a.minScale;\n    if (!previousWheelEvent)\n        return false;\n    if (scale < maxScale || scale > minScale)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    if (previousWheelEvent.deltaY > 0 && previousWheelEvent.deltaY < event.deltaY)\n        return true;\n    if (previousWheelEvent.deltaY < 0 && previousWheelEvent.deltaY > event.deltaY)\n        return true;\n    if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY))\n        return true;\n    return false;\n};\n\nvar isPinchStartAllowed = function (contextInstance, event) {\n    var _a = contextInstance.setup.pinch, disabled = _a.disabled, excluded = _a.excluded;\n    var isInitialized = contextInstance.isInitialized;\n    var target = event.target;\n    var isAllowed = isInitialized && !disabled && target;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\nvar isPinchAllowed = function (contextInstance) {\n    var disabled = contextInstance.setup.pinch.disabled;\n    var isInitialized = contextInstance.isInitialized, pinchStartDistance = contextInstance.pinchStartDistance;\n    var isAllowed = isInitialized && !disabled && pinchStartDistance;\n    if (!isAllowed)\n        return false;\n    return true;\n};\nvar calculateTouchMidPoint = function (event, scale, contentComponent) {\n    var contentRect = contentComponent.getBoundingClientRect();\n    var touches = event.touches;\n    var firstPointX = roundNumber(touches[0].clientX - contentRect.left, 5);\n    var firstPointY = roundNumber(touches[0].clientY - contentRect.top, 5);\n    var secondPointX = roundNumber(touches[1].clientX - contentRect.left, 5);\n    var secondPointY = roundNumber(touches[1].clientY - contentRect.top, 5);\n    return {\n        x: (firstPointX + secondPointX) / 2 / scale,\n        y: (firstPointY + secondPointY) / 2 / scale,\n    };\n};\nvar getTouchDistance = function (event) {\n    return Math.sqrt(Math.pow((event.touches[0].pageX - event.touches[1].pageX), 2) +\n        Math.pow((event.touches[0].pageY - event.touches[1].pageY), 2));\n};\nvar calculatePinchZoom = function (contextInstance, currentDistance) {\n    var pinchStartScale = contextInstance.pinchStartScale, pinchStartDistance = contextInstance.pinchStartDistance, setup = contextInstance.setup;\n    var maxScale = setup.maxScale, minScale = setup.minScale, zoomAnimation = setup.zoomAnimation, disablePadding = setup.disablePadding;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    if (!pinchStartScale || pinchStartDistance === null || !currentDistance) {\n        throw new Error(\"Pinch touches distance was not provided\");\n    }\n    if (currentDistance < 0) {\n        return contextInstance.transformState.scale;\n    }\n    var touchProportion = currentDistance / pinchStartDistance;\n    var scaleDifference = touchProportion * pinchStartScale;\n    return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled && !disablePadding);\n};\n\nvar wheelStopEventTime = 160;\nvar wheelAnimationTime = 100;\nvar handleWheelStart = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStart = _a.onWheelStart, onZoomStart = _a.onZoomStart;\n    if (!contextInstance.wheelStopEventTimer) {\n        handleCancelAnimation(contextInstance);\n        handleCallback(getContext(contextInstance), event, onWheelStart);\n        handleCallback(getContext(contextInstance), event, onZoomStart);\n    }\n};\nvar handleWheelZoom = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheel = _a.onWheel, onZoom = _a.onZoom;\n    var contentComponent = contextInstance.contentComponent, setup = contextInstance.setup, transformState = contextInstance.transformState;\n    var scale = transformState.scale;\n    var limitToBounds = setup.limitToBounds, centerZoomedOut = setup.centerZoomedOut, zoomAnimation = setup.zoomAnimation, wheel = setup.wheel, disablePadding = setup.disablePadding, smooth = setup.smooth;\n    var size = zoomAnimation.size, disabled = zoomAnimation.disabled;\n    var step = wheel.step, smoothStep = wheel.smoothStep;\n    if (!contentComponent) {\n        throw new Error(\"Component not mounted\");\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    var delta = getDelta(event, null);\n    var zoomStep = smooth ? smoothStep * Math.abs(event.deltaY) : step;\n    var newScale = handleCalculateWheelZoom(contextInstance, delta, zoomStep, !event.ctrlKey);\n    // if scale not change\n    if (scale === newScale)\n        return;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut || disablePadding;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, mousePosition.x, mousePosition.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.previousWheelEvent = event;\n    contextInstance.setTransformState(newScale, x, y);\n    handleCallback(getContext(contextInstance), event, onWheel);\n    handleCallback(getContext(contextInstance), event, onZoom);\n};\nvar handleWheelStop = function (contextInstance, event) {\n    var _a = contextInstance.props, onWheelStop = _a.onWheelStop, onZoomStop = _a.onZoomStop;\n    // fire animation\n    cancelTimeout(contextInstance.wheelAnimationTimer);\n    contextInstance.wheelAnimationTimer = setTimeout(function () {\n        if (!contextInstance.mounted)\n            return;\n        handleAlignToScaleBounds(contextInstance, event.x, event.y);\n        contextInstance.wheelAnimationTimer = null;\n    }, wheelAnimationTime);\n    // Wheel stop event\n    var hasStoppedZooming = handleWheelZoomStop(contextInstance, event);\n    if (hasStoppedZooming) {\n        cancelTimeout(contextInstance.wheelStopEventTimer);\n        contextInstance.wheelStopEventTimer = setTimeout(function () {\n            if (!contextInstance.mounted)\n                return;\n            contextInstance.wheelStopEventTimer = null;\n            handleCallback(getContext(contextInstance), event, onWheelStop);\n            handleCallback(getContext(contextInstance), event, onZoomStop);\n        }, wheelStopEventTime);\n    }\n};\n\nvar handlePinchStart = function (contextInstance, event) {\n    var distance = getTouchDistance(event);\n    contextInstance.pinchStartDistance = distance;\n    contextInstance.lastDistance = distance;\n    contextInstance.pinchStartScale = contextInstance.transformState.scale;\n    contextInstance.isPanning = false;\n    handleCancelAnimation(contextInstance);\n};\nvar handlePinchZoom = function (contextInstance, event) {\n    var contentComponent = contextInstance.contentComponent, pinchStartDistance = contextInstance.pinchStartDistance;\n    var scale = contextInstance.transformState.scale;\n    var _a = contextInstance.setup, limitToBounds = _a.limitToBounds, centerZoomedOut = _a.centerZoomedOut, zoomAnimation = _a.zoomAnimation;\n    var disabled = zoomAnimation.disabled, size = zoomAnimation.size;\n    // if one finger starts from outside of wrapper\n    if (pinchStartDistance === null || !contentComponent)\n        return;\n    var midPoint = calculateTouchMidPoint(event, scale, contentComponent);\n    // if touches goes off of the wrapper element\n    if (!Number.isFinite(midPoint.x) || !Number.isFinite(midPoint.y))\n        return;\n    var currentDistance = getTouchDistance(event);\n    var newScale = calculatePinchZoom(contextInstance, currentDistance);\n    if (newScale === scale)\n        return;\n    var bounds = handleCalculateBounds(contextInstance, newScale);\n    var isPaddingDisabled = disabled || size === 0 || centerZoomedOut;\n    var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n    var _b = handleCalculateZoomPositions(contextInstance, midPoint.x, midPoint.y, newScale, bounds, isLimitedToBounds), x = _b.x, y = _b.y;\n    contextInstance.pinchMidpoint = midPoint;\n    contextInstance.lastDistance = currentDistance;\n    contextInstance.setTransformState(newScale, x, y);\n};\nvar handlePinchStop = function (contextInstance) {\n    var pinchMidpoint = contextInstance.pinchMidpoint;\n    contextInstance.velocity = null;\n    contextInstance.lastDistance = null;\n    contextInstance.pinchMidpoint = null;\n    contextInstance.pinchStartScale = null;\n    contextInstance.pinchStartDistance = null;\n    handleAlignToScaleBounds(contextInstance, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.x, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.y);\n};\n\nvar handleDoubleClickStop = function (contextInstance, event) {\n    var onZoomStop = contextInstance.props.onZoomStop;\n    var animationTime = contextInstance.setup.doubleClick.animationTime;\n    cancelTimeout(contextInstance.doubleClickStopEventTimer);\n    contextInstance.doubleClickStopEventTimer = setTimeout(function () {\n        contextInstance.doubleClickStopEventTimer = null;\n        handleCallback(getContext(contextInstance), event, onZoomStop);\n    }, animationTime);\n};\nvar handleDoubleClickResetMode = function (contextInstance, event) {\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = contextInstance.setup.doubleClick, animationTime = _b.animationTime, animationType = _b.animationType;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    resetTransformations(contextInstance, animationTime, animationType, function () {\n        return handleCallback(getContext(contextInstance), event, onZoom);\n    });\n    handleDoubleClickStop(contextInstance, event);\n};\nfunction getDoubleClickScale(mode, scale) {\n    if (mode === \"toggle\") {\n        return scale === 1 ? 1 : -1;\n    }\n    return mode === \"zoomOut\" ? -1 : 1;\n}\nfunction handleDoubleClick(contextInstance, event) {\n    var setup = contextInstance.setup, doubleClickStopEventTimer = contextInstance.doubleClickStopEventTimer, transformState = contextInstance.transformState, contentComponent = contextInstance.contentComponent;\n    var scale = transformState.scale;\n    var _a = contextInstance.props, onZoomStart = _a.onZoomStart, onZoom = _a.onZoom;\n    var _b = setup.doubleClick, disabled = _b.disabled, mode = _b.mode, step = _b.step, animationTime = _b.animationTime, animationType = _b.animationType;\n    if (disabled)\n        return;\n    if (doubleClickStopEventTimer)\n        return;\n    if (mode === \"reset\") {\n        return handleDoubleClickResetMode(contextInstance, event);\n    }\n    if (!contentComponent)\n        return console.error(\"No ContentComponent found\");\n    var delta = getDoubleClickScale(mode, contextInstance.transformState.scale);\n    var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n    // stop execution when scale didn't change\n    if (scale === newScale)\n        return;\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n    var mousePosition = getMousePosition(event, contentComponent, scale);\n    var targetState = handleZoomToPoint(contextInstance, newScale, mousePosition.x, mousePosition.y);\n    if (!targetState) {\n        return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n    }\n    handleCallback(getContext(contextInstance), event, onZoom);\n    animate(contextInstance, targetState, animationTime, animationType);\n    handleDoubleClickStop(contextInstance, event);\n}\nvar isDoubleClickAllowed = function (contextInstance, event) {\n    var isInitialized = contextInstance.isInitialized, setup = contextInstance.setup, wrapperComponent = contextInstance.wrapperComponent;\n    var _a = setup.doubleClick, disabled = _a.disabled, excluded = _a.excluded;\n    var target = event.target;\n    var isWrapperChild = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n    var isAllowed = isInitialized && target && isWrapperChild && !disabled;\n    if (!isAllowed)\n        return false;\n    var isExcluded = isExcludedNode(target, excluded);\n    if (isExcluded)\n        return false;\n    return true;\n};\n\nvar ZoomPanPinch = /** @class */ (function () {\n    function ZoomPanPinch(props) {\n        var _this = this;\n        this.mounted = true;\n        this.onChangeCallbacks = new Set();\n        this.onInitCallbacks = new Set();\n        // Components\n        this.wrapperComponent = null;\n        this.contentComponent = null;\n        // Initialization\n        this.isInitialized = false;\n        this.bounds = null;\n        // wheel helpers\n        this.previousWheelEvent = null;\n        this.wheelStopEventTimer = null;\n        this.wheelAnimationTimer = null;\n        // panning helpers\n        this.isPanning = false;\n        this.isWheelPanning = false;\n        this.startCoords = null;\n        this.lastTouch = null;\n        // pinch helpers\n        this.distance = null;\n        this.lastDistance = null;\n        this.pinchStartDistance = null;\n        this.pinchStartScale = null;\n        this.pinchMidpoint = null;\n        // double click helpers\n        this.doubleClickStopEventTimer = null;\n        // velocity helpers\n        this.velocity = null;\n        this.velocityTime = null;\n        this.lastMousePosition = null;\n        // animations helpers\n        this.animate = false;\n        this.animation = null;\n        this.maxBounds = null;\n        // key press\n        this.pressedKeys = {};\n        this.mount = function () {\n            _this.initializeWindowEvents();\n        };\n        this.unmount = function () {\n            _this.cleanupWindowEvents();\n        };\n        this.update = function (newProps) {\n            _this.props = newProps;\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.setup = createSetup(newProps);\n        };\n        this.initializeWindowEvents = function () {\n            var _a, _b;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            (_b = _this.wrapperComponent) === null || _b === void 0 ? void 0 : _b.addEventListener(\"wheel\", _this.onWheelPanning, passive);\n            // Panning on window to allow panning when mouse is out of component wrapper\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.addEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keydown\", _this.setKeyPressed, passive);\n        };\n        this.cleanupWindowEvents = function () {\n            var _a, _b;\n            var passive = makePassiveEventOption();\n            var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n            var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousedown\", _this.onPanningStart, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousemove\", _this.onPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mouseup\", _this.onPanningStop, passive);\n            currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n            currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keydown\", _this.setKeyPressed, passive);\n            document.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n            handleCancelAnimation(_this);\n            (_b = _this.observer) === null || _b === void 0 ? void 0 : _b.disconnect();\n        };\n        this.handleInitializeWrapperEvents = function (wrapper) {\n            // Zooming events on wrapper\n            var passive = makePassiveEventOption();\n            wrapper.addEventListener(\"wheel\", _this.onWheelZoom, passive);\n            wrapper.addEventListener(\"dblclick\", _this.onDoubleClick, passive);\n            wrapper.addEventListener(\"touchstart\", _this.onTouchPanningStart, passive);\n            wrapper.addEventListener(\"touchmove\", _this.onTouchPanning, passive);\n            wrapper.addEventListener(\"touchend\", _this.onTouchPanningStop, passive);\n        };\n        this.handleInitialize = function (contentComponent) {\n            var centerOnInit = _this.setup.centerOnInit;\n            _this.applyTransformation();\n            _this.onInitCallbacks.forEach(function (callback) { return callback(getContext(_this)); });\n            if (centerOnInit) {\n                _this.setCenter();\n                _this.observer = new ResizeObserver(function () {\n                    var _a;\n                    _this.onInitCallbacks.forEach(function (callback) { return callback(getContext(_this)); });\n                    _this.setCenter();\n                    (_a = _this.observer) === null || _a === void 0 ? void 0 : _a.disconnect();\n                });\n                // Start observing the target node for configured mutations\n                _this.observer.observe(contentComponent);\n            }\n        };\n        /// ///////\n        // Zoom\n        /// ///////\n        this.onWheelZoom = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isWheelAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.wheel.activationKeys);\n            if (!keysPressed)\n                return;\n            handleWheelStart(_this, event);\n            handleWheelZoom(_this, event);\n            handleWheelStop(_this, event);\n        };\n        /// ///////\n        // Pan\n        /// ///////\n        this.onWheelPanning = function (event) {\n            var _a = _this.setup, disabled = _a.disabled, wheel = _a.wheel, panning = _a.panning;\n            if (!_this.wrapperComponent ||\n                !_this.contentComponent ||\n                disabled ||\n                !wheel.wheelDisabled ||\n                panning.disabled ||\n                !panning.wheelPanning ||\n                event.ctrlKey) {\n                return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            var _b = _this.transformState, positionX = _b.positionX, positionY = _b.positionY;\n            var mouseX = positionX - event.deltaX;\n            var mouseY = positionY - event.deltaY;\n            var newPositionX = panning.lockAxisX ? positionX : mouseX;\n            var newPositionY = panning.lockAxisY ? positionY : mouseY;\n            var _c = _this.setup.alignmentAnimation, sizeX = _c.sizeX, sizeY = _c.sizeY;\n            var paddingValueX = getPaddingValue(_this, sizeX);\n            var paddingValueY = getPaddingValue(_this, sizeY);\n            if (newPositionX === positionX && newPositionY === positionY)\n                return;\n            handleNewPosition(_this, newPositionX, newPositionY, paddingValueX, paddingValueY);\n        };\n        this.onPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            if (event.button === 0 && !_this.setup.panning.allowLeftClickPan)\n                return;\n            if (event.button === 1 && !_this.setup.panning.allowMiddleClickPan)\n                return;\n            if (event.button === 2 && !_this.setup.panning.allowRightClickPan)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handleCancelAnimation(_this);\n            handlePanningStart(_this, event);\n            handleCallback(getContext(_this), event, onPanningStart);\n        };\n        this.onPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (disabled)\n                return;\n            var isAllowed = isPanningAllowed(_this);\n            if (!isAllowed)\n                return;\n            var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n            if (!keysPressed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePanning(_this, event.clientX, event.clientY);\n            handleCallback(getContext(_this), event, onPanning);\n        };\n        this.onPanningStop = function (event) {\n            var onPanningStop = _this.props.onPanningStop;\n            if (_this.isPanning) {\n                handlePanningEnd(_this);\n                handleCallback(getContext(_this), event, onPanningStop);\n            }\n        };\n        /// ///////\n        // Pinch\n        /// ///////\n        this.onPinchStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinchingStart = _a.onPinchingStart, onZoomStart = _a.onZoomStart;\n            if (disabled)\n                return;\n            var isAllowed = isPinchStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handlePinchStart(_this, event);\n            handleCancelAnimation(_this);\n            handleCallback(getContext(_this), event, onPinchingStart);\n            handleCallback(getContext(_this), event, onZoomStart);\n        };\n        this.onPinch = function (event) {\n            var disabled = _this.setup.disabled;\n            var _a = _this.props, onPinching = _a.onPinching, onZoom = _a.onZoom;\n            if (disabled)\n                return;\n            var isAllowed = isPinchAllowed(_this);\n            if (!isAllowed)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            handlePinchZoom(_this, event);\n            handleCallback(getContext(_this), event, onPinching);\n            handleCallback(getContext(_this), event, onZoom);\n        };\n        this.onPinchStop = function (event) {\n            var _a = _this.props, onPinchingStop = _a.onPinchingStop, onZoomStop = _a.onZoomStop;\n            if (_this.pinchStartScale) {\n                handlePinchStop(_this);\n                handleCallback(getContext(_this), event, onPinchingStop);\n                handleCallback(getContext(_this), event, onZoomStop);\n            }\n        };\n        /// ///////\n        // Touch\n        /// ///////\n        this.onTouchPanningStart = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanningStart = _this.props.onPanningStart;\n            if (disabled)\n                return;\n            var isAllowed = isPanningStartAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            var isDoubleTap = _this.lastTouch && +new Date() - _this.lastTouch < 200;\n            if (isDoubleTap && event.touches.length === 1) {\n                _this.onDoubleClick(event);\n            }\n            else {\n                _this.lastTouch = +new Date();\n                handleCancelAnimation(_this);\n                var touches = event.touches;\n                var isPanningAction = touches.length === 1;\n                var isPinchAction = touches.length === 2;\n                if (isPanningAction) {\n                    handleCancelAnimation(_this);\n                    handlePanningStart(_this, event);\n                    handleCallback(getContext(_this), event, onPanningStart);\n                }\n                if (isPinchAction) {\n                    _this.onPinchStart(event);\n                }\n            }\n        };\n        this.onTouchPanning = function (event) {\n            var disabled = _this.setup.disabled;\n            var onPanning = _this.props.onPanning;\n            if (_this.isPanning && event.touches.length === 1) {\n                if (disabled)\n                    return;\n                var isAllowed = isPanningAllowed(_this);\n                if (!isAllowed)\n                    return;\n                event.preventDefault();\n                event.stopPropagation();\n                var touch = event.touches[0];\n                handlePanning(_this, touch.clientX, touch.clientY);\n                handleCallback(getContext(_this), event, onPanning);\n            }\n            else if (event.touches.length > 1) {\n                _this.onPinch(event);\n            }\n        };\n        this.onTouchPanningStop = function (event) {\n            _this.onPanningStop(event);\n            _this.onPinchStop(event);\n        };\n        /// ///////\n        // Double Click\n        /// ///////\n        this.onDoubleClick = function (event) {\n            var disabled = _this.setup.disabled;\n            if (disabled)\n                return;\n            var isAllowed = isDoubleClickAllowed(_this, event);\n            if (!isAllowed)\n                return;\n            handleDoubleClick(_this, event);\n        };\n        /// ///////\n        // Helpers\n        /// ///////\n        this.clearPanning = function (event) {\n            if (_this.isPanning) {\n                _this.onPanningStop(event);\n            }\n        };\n        this.setKeyPressed = function (e) {\n            _this.pressedKeys[e.key] = true;\n        };\n        this.setKeyUnPressed = function (e) {\n            _this.pressedKeys[e.key] = false;\n        };\n        this.isPressingKeys = function (keys) {\n            if (!keys.length) {\n                return true;\n            }\n            return Boolean(keys.find(function (key) { return _this.pressedKeys[key]; }));\n        };\n        this.setTransformState = function (scale, positionX, positionY) {\n            var onTransformed = _this.props.onTransformed;\n            if (!Number.isNaN(scale) &&\n                !Number.isNaN(positionX) &&\n                !Number.isNaN(positionY)) {\n                if (scale !== _this.transformState.scale) {\n                    _this.transformState.previousScale = _this.transformState.scale;\n                    _this.transformState.scale = scale;\n                }\n                _this.transformState.positionX = positionX;\n                _this.transformState.positionY = positionY;\n                _this.applyTransformation();\n                var ctx_1 = getContext(_this);\n                _this.onChangeCallbacks.forEach(function (callback) { return callback(ctx_1); });\n                handleCallback(ctx_1, { scale: scale, positionX: positionX, positionY: positionY }, onTransformed);\n            }\n            else {\n                console.error(\"Detected NaN set state values\");\n            }\n        };\n        this.setCenter = function () {\n            if (_this.wrapperComponent && _this.contentComponent) {\n                var targetState = getCenterPosition(_this.transformState.scale, _this.wrapperComponent, _this.contentComponent);\n                _this.setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n            }\n        };\n        this.handleTransformStyles = function (x, y, scale) {\n            if (_this.props.customTransform) {\n                return _this.props.customTransform(x, y, scale);\n            }\n            return getTransformStyles(x, y, scale);\n        };\n        this.applyTransformation = function () {\n            if (!_this.mounted || !_this.contentComponent)\n                return;\n            var _a = _this.transformState, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\n            var transform = _this.handleTransformStyles(positionX, positionY, scale);\n            _this.contentComponent.style.transform = transform;\n        };\n        this.getContext = function () {\n            return getContext(_this);\n        };\n        /**\n         * Hooks\n         */\n        this.onChange = function (callback) {\n            if (!_this.onChangeCallbacks.has(callback)) {\n                _this.onChangeCallbacks.add(callback);\n            }\n            return function () {\n                _this.onChangeCallbacks.delete(callback);\n            };\n        };\n        this.onInit = function (callback) {\n            if (!_this.onInitCallbacks.has(callback)) {\n                _this.onInitCallbacks.add(callback);\n            }\n            return function () {\n                _this.onInitCallbacks.delete(callback);\n            };\n        };\n        /**\n         * Initialization\n         */\n        this.init = function (wrapperComponent, contentComponent) {\n            _this.cleanupWindowEvents();\n            _this.wrapperComponent = wrapperComponent;\n            _this.contentComponent = contentComponent;\n            handleCalculateBounds(_this, _this.transformState.scale);\n            _this.handleInitializeWrapperEvents(wrapperComponent);\n            _this.handleInitialize(contentComponent);\n            _this.initializeWindowEvents();\n            _this.isInitialized = true;\n            var ctx = getContext(_this);\n            handleCallback(ctx, undefined, _this.props.onInit);\n        };\n        this.props = props;\n        this.setup = createSetup(this.props);\n        this.transformState = createState(this.props);\n    }\n    return ZoomPanPinch;\n}());\n\nvar Context = React.createContext(null);\nvar getContent = function (children, ctx) {\n    if (typeof children === \"function\") {\n        return children(ctx);\n    }\n    return children;\n};\nvar TransformWrapper = React.forwardRef(function (props, ref) {\n    var instance = useRef(new ZoomPanPinch(props)).current;\n    var content = getContent(props.children, getControls(instance));\n    useImperativeHandle(ref, function () { return getControls(instance); }, [instance]);\n    useEffect(function () {\n        instance.update(props);\n    }, [instance, props]);\n    return React.createElement(Context.Provider, { value: instance }, content);\n});\n\nvar KeepScale = React.forwardRef(function (props, ref) {\n    var localRef = useRef(null);\n    var instance = useContext(Context);\n    useEffect(function () {\n        return instance.onChange(function (ctx) {\n            if (localRef.current) {\n                var positionX = 0;\n                var positionY = 0;\n                localRef.current.style.transform = instance.handleTransformStyles(positionX, positionY, 1 / ctx.instance.transformState.scale);\n            }\n        });\n    }, [instance]);\n    return React.createElement(\"div\", __assign({}, props, { ref: mergeRefs([localRef, ref]) }));\n});\n\nvar initialElementRect = {\n    width: 0,\n    height: 0,\n    y: 0,\n    x: 0,\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n};\nvar useResize = function (ref, onResize, dependencies) {\n    var resizeObserverRef = useRef();\n    var rectRef = useRef(initialElementRect);\n    var didUnmount = useRef(false);\n    useLayoutEffect(function () {\n        var _a;\n        didUnmount.current = false;\n        if (!(\"ResizeObserver\" in window)) {\n            return;\n        }\n        if (ref) {\n            resizeObserverRef.current = new ResizeObserver(function (entries) {\n                var newSize = ref.getBoundingClientRect();\n                if (!Array.isArray(entries) ||\n                    !entries.length ||\n                    didUnmount.current ||\n                    (newSize.width === rectRef.current.width &&\n                        newSize.height === rectRef.current.height))\n                    return;\n                onResize(newSize, ref);\n                rectRef.current = newSize;\n            });\n            (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.observe(ref);\n        }\n        return function () {\n            var _a;\n            didUnmount.current = true;\n            if (ref) {\n                (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.unobserve(ref);\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, __spreadArray([onResize, ref], dependencies, true));\n};\n\nvar previewStyles = {\n    position: \"absolute\",\n    zIndex: 2,\n    top: \"0px\",\n    left: \"0px\",\n    boxSizing: \"border-box\",\n    border: \"3px solid red\",\n    transformOrigin: \"0% 0%\",\n    boxShadow: \"rgba(0,0,0,0.2) 0 0 0 10000000px\",\n};\nvar MiniMap = function (_a) {\n    var _b = _a.width, width = _b === void 0 ? 200 : _b, _c = _a.height, height = _c === void 0 ? 200 : _c, _d = _a.borderColor, borderColor = _d === void 0 ? \"red\" : _d, children = _a.children, rest = __rest(_a, [\"width\", \"height\", \"borderColor\", \"children\"]);\n    var _e = useState(false), initialized = _e[0], setInitialized = _e[1];\n    var instance = useTransformContext();\n    var miniMapInstance = useRef(null);\n    var mainRef = useRef(null);\n    var wrapperRef = useRef(null);\n    var previewRef = useRef(null);\n    var getContentSize = useCallback(function () {\n        if (instance.contentComponent) {\n            var rect = instance.contentComponent.getBoundingClientRect();\n            return {\n                width: rect.width / instance.transformState.scale,\n                height: rect.height / instance.transformState.scale,\n            };\n        }\n        return {\n            width: 0,\n            height: 0,\n        };\n    }, [instance.contentComponent, instance.transformState.scale]);\n    var computeMiniMapScale = useCallback(function () {\n        var contentSize = getContentSize();\n        var scaleX = width / contentSize.width;\n        var scaleY = height / contentSize.height;\n        var scale = scaleY > scaleX ? scaleX : scaleY;\n        return scale;\n    }, [getContentSize, height, width]);\n    var computeMiniMapSize = function () {\n        var contentSize = getContentSize();\n        var scaleX = width / contentSize.width;\n        var scaleY = height / contentSize.height;\n        if (scaleY > scaleX) {\n            return { width: width, height: contentSize.height * scaleX };\n        }\n        return { width: contentSize.width * scaleY, height: height };\n    };\n    var computeMiniMapStyle = function () {\n        var scale = computeMiniMapScale();\n        var style = {\n            transform: \"scale(\".concat(scale || 1, \")\"),\n            transformOrigin: \"0% 0%\",\n            position: \"absolute\",\n            boxSizing: \"border-box\",\n            zIndex: 1,\n            overflow: \"hidden\",\n        };\n        Object.keys(style).forEach(function (key) {\n            if (wrapperRef.current) {\n                wrapperRef.current.style[key] = style[key];\n            }\n        });\n    };\n    var transformMiniMap = function () {\n        computeMiniMapStyle();\n        var miniSize = computeMiniMapSize();\n        var wrapSize = getContentSize();\n        if (wrapperRef.current) {\n            wrapperRef.current.style.width = \"\".concat(wrapSize.width, \"px\");\n            wrapperRef.current.style.height = \"\".concat(wrapSize.height, \"px\");\n        }\n        if (mainRef.current) {\n            mainRef.current.style.width = \"\".concat(miniSize.width, \"px\");\n            mainRef.current.style.height = \"\".concat(miniSize.height, \"px\");\n        }\n        if (previewRef.current) {\n            var size = getContentSize();\n            var scale = computeMiniMapScale();\n            var previewScale = scale * (1 / instance.transformState.scale);\n            var transform = instance.handleTransformStyles(-instance.transformState.positionX * previewScale, -instance.transformState.positionY * previewScale, 1);\n            previewRef.current.style.transform = transform;\n            previewRef.current.style.width = \"\".concat(size.width * previewScale, \"px\");\n            previewRef.current.style.height = \"\".concat(size.height * previewScale, \"px\");\n        }\n    };\n    var initialize = function () {\n        transformMiniMap();\n    };\n    useTransformEffect(function () {\n        transformMiniMap();\n    });\n    useTransformInit(function () {\n        initialize();\n        setInitialized(true);\n    });\n    useResize(instance.contentComponent, initialize, [initialized]);\n    useEffect(function () {\n        return instance.onChange(function (zpp) {\n            var scale = computeMiniMapScale();\n            if (miniMapInstance.current) {\n                miniMapInstance.current.instance.transformState.scale =\n                    zpp.instance.transformState.scale;\n                miniMapInstance.current.instance.transformState.positionX =\n                    zpp.instance.transformState.positionX * scale;\n                miniMapInstance.current.instance.transformState.positionY =\n                    zpp.instance.transformState.positionY * scale;\n            }\n        });\n    }, [computeMiniMapScale, instance, miniMapInstance]);\n    var wrapperStyle = useMemo(function () {\n        return {\n            position: \"relative\",\n            zIndex: 2,\n            overflow: \"hidden\",\n        };\n    }, []);\n    return (React.createElement(\"div\", __assign({}, rest, { ref: mainRef, style: wrapperStyle, className: \"rzpp-mini-map \".concat(rest.className || \"\") }),\n        React.createElement(\"div\", __assign({}, rest, { ref: wrapperRef, className: \"rzpp-wrapper\" }), children),\n        React.createElement(\"div\", { className: \"rzpp-preview\", ref: previewRef, style: __assign(__assign({}, previewStyles), { borderColor: borderColor }) })));\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".transform-component-module_wrapper__SPB86 {\\n  position: relative;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n}\\n.transform-component-module_content__FBWxo {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.transform-component-module_content__FBWxo img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\"wrapper\":\"transform-component-module_wrapper__SPB86\",\"content\":\"transform-component-module_content__FBWxo\"};\nstyleInject(css_248z);\n\nvar TransformComponent = function (_a) {\n    var children = _a.children, _b = _a.wrapperClass, wrapperClass = _b === void 0 ? \"\" : _b, _c = _a.contentClass, contentClass = _c === void 0 ? \"\" : _c, wrapperStyle = _a.wrapperStyle, contentStyle = _a.contentStyle, _d = _a.wrapperProps, wrapperProps = _d === void 0 ? {} : _d, _e = _a.contentProps, contentProps = _e === void 0 ? {} : _e;\n    var _f = useContext(Context), init = _f.init, cleanupWindowEvents = _f.cleanupWindowEvents;\n    var wrapperRef = useRef(null);\n    var contentRef = useRef(null);\n    useEffect(function () {\n        var wrapper = wrapperRef.current;\n        var content = contentRef.current;\n        if (wrapper !== null && content !== null && init) {\n            init === null || init === void 0 ? void 0 : init(wrapper, content);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        return function () {\n            cleanupWindowEvents === null || cleanupWindowEvents === void 0 ? void 0 : cleanupWindowEvents();\n        };\n    }, []);\n    return (React.createElement(\"div\", __assign({}, wrapperProps, { ref: wrapperRef, className: \"react-transform-wrapper \".concat(styles.wrapper, \" \").concat(wrapperClass), style: wrapperStyle }),\n        React.createElement(\"div\", __assign({}, contentProps, { ref: contentRef, className: \"react-transform-component \".concat(styles.content, \" \").concat(contentClass), style: contentStyle }), children)));\n};\n\nvar useTransformContext = function () {\n    var libraryContext = useContext(Context);\n    if (!libraryContext) {\n        throw new Error(\"Transform context must be placed inside TransformWrapper\");\n    }\n    return libraryContext;\n};\n\nvar useControls = function () {\n    var libraryContext = useTransformContext();\n    return getControls(libraryContext);\n};\n\nvar useTransformInit = function (callback) {\n    var libraryContext = useTransformContext();\n    useEffect(function () {\n        var unmountCallback;\n        var unmount;\n        if (libraryContext.contentComponent && libraryContext.wrapperComponent) {\n            unmountCallback = callback(getState(libraryContext));\n        }\n        else {\n            unmount = libraryContext.onInit(function (ref) {\n                unmountCallback = callback(getState(ref.instance));\n            });\n        }\n        return function () {\n            unmount === null || unmount === void 0 ? void 0 : unmount();\n            unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n        };\n    }, []);\n};\n\nvar useTransformEffect = function (callback) {\n    var libraryContext = useTransformContext();\n    useEffect(function () {\n        var unmountCallback;\n        var unmount = libraryContext.onChange(function (ref) {\n            unmountCallback = callback(getState(ref.instance));\n        });\n        return function () {\n            unmount();\n            unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n        };\n    }, [callback, libraryContext]);\n};\n\nexport { Context, KeepScale, MiniMap, TransformComponent, TransformWrapper, getCenterPosition, getMatrixTransformStyles, getTransformStyles, useControls, useTransformContext, useTransformEffect, useTransformInit };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { TransformWrapper, TransformComponent, ReactZoomPanPinchRef } from 'react-zoom-pan-pinch';\n\nimport { config } from '@grafana/runtime';\n\nimport { Scene } from './scene';\n\ntype SceneTransformWrapperProps = {\n  scene: Scene;\n  children: React.ReactNode;\n};\n\nexport const SceneTransformWrapper = ({ scene, children: sceneDiv }: SceneTransformWrapperProps) => {\n  const onZoom = (zoomPanPinchRef: ReactZoomPanPinchRef) => {\n    const scale = zoomPanPinchRef.state.scale;\n    scene.scale = scale;\n\n    if (scene.shouldInfinitePan) {\n      const isScaleZoomedOut = scale < 1;\n\n      if (isScaleZoomedOut) {\n        scene.updateSize(scene.width / scale, scene.height / scale);\n        scene.panel.forceUpdate();\n      }\n    }\n  };\n\n  const onZoomStop = (zoomPanPinchRef: ReactZoomPanPinchRef) => {\n    const scale = zoomPanPinchRef.state.scale;\n    scene.scale = scale;\n    updateMoveable(scale);\n  };\n\n  const onTransformed = (\n    _: ReactZoomPanPinchRef,\n    state: {\n      scale: number;\n      positionX: number;\n      positionY: number;\n    }\n  ) => {\n    const scale = state.scale;\n    scene.scale = scale;\n    updateMoveable(scale);\n  };\n\n  const updateMoveable = (scale: number) => {\n    if (scene.moveable && scale > 0) {\n      scene.moveable.zoom = 1 / scale;\n      if (scale === 1) {\n        scene.moveable.snappable = true;\n      } else {\n        scene.moveable.snappable = false;\n      }\n    }\n  };\n\n  const onPanning = (_: ReactZoomPanPinchRef, event: MouseEvent | TouchEvent) => {\n    if (scene.shouldInfinitePan && event instanceof MouseEvent) {\n      // Get deltaX and deltaY from pan event and add it to current canvas dimensions\n      let deltaX = event.movementX;\n      let deltaY = event.movementY;\n      if (deltaX > 0) {\n        deltaX = 0;\n      }\n      if (deltaY > 0) {\n        deltaY = 0;\n      }\n\n      // TODO: Consider bounding to the scene elements instead of allowing \"infinite\" panning\n      // TODO: Consider making scene grow in all directions vs just down to the right / bottom\n      scene.updateSize(scene.width - deltaX, scene.height - deltaY);\n      scene.panel.forceUpdate();\n    }\n  };\n\n  const onSceneContainerMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // If pan and zoom is disabled or context menu is visible, don't pan\n    if ((!scene.shouldPanZoom || scene.contextMenuVisible) && (e.button === 1 || (e.button === 2 && e.ctrlKey))) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    // If context menu is hidden, ignore left mouse or non-ctrl right mouse for pan\n    if (!scene.contextMenuVisible && !scene.isPanelEditing && e.button === 2 && !e.ctrlKey) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  // Set panel content overflow to hidden to prevent canvas content from overflowing\n  scene.div?.parentElement?.parentElement?.parentElement?.parentElement?.setAttribute('style', `overflow: hidden`);\n\n  return (\n    <TransformWrapper\n      doubleClick={{ mode: 'reset' }}\n      ref={scene.transformComponentRef}\n      onZoom={onZoom}\n      onZoomStop={onZoomStop}\n      onTransformed={onTransformed}\n      disabled={!config.featureToggles.canvasPanelPanZoom || !scene.shouldPanZoom}\n      panning={{ allowLeftClickPan: false }}\n      limitToBounds={!scene.shouldInfinitePan}\n      minScale={scene.shouldInfinitePan ? 0.1 : undefined}\n      onPanning={onPanning}\n    >\n      <TransformComponent>\n        {/* The <div> element has child elements that allow for mouse events, so we need to disable the linter rule */}\n        {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}\n        <div onMouseDown={onSceneContainerMouseDown}>{sceneDiv}</div>\n      </TransformComponent>\n    </TransformWrapper>\n  );\n};\n","import { MoveableManagerInterface, Renderer } from 'moveable';\n\nimport { HorizontalConstraint, VerticalConstraint } from '../types';\n\nimport { Scene } from './scene';\n\nexport const settingsViewable = (scene: Scene) => ({\n  name: 'settingsViewable',\n  props: [],\n  events: [],\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    // If selection is more than 1 element don't display settings button\n    if (scene.selecto?.getSelectedTargets() && scene.selecto?.getSelectedTargets().length > 1) {\n      return;\n    }\n\n    const openSettings = (x: number, y: number) => {\n      const container = moveable.getContainer();\n      const evt = new PointerEvent('contextmenu', { clientX: x, clientY: y });\n      container.dispatchEvent(evt);\n    };\n\n    const onClick = (event: React.MouseEvent) => {\n      openSettings(event.clientX, event.clientY);\n    };\n\n    const onKeyPress = (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        const rect = event.currentTarget.getBoundingClientRect();\n        openSettings(rect.x, rect.y);\n      }\n    };\n\n    const rect = moveable.getRect();\n    return (\n      <div\n        key={'settings-viewable'}\n        className={'moveable-settings'}\n        style={{\n          position: 'absolute',\n          left: `${rect.width + 18}px`,\n          top: '0px',\n          color: 'white',\n          fontSize: '18px',\n          cursor: 'pointer',\n          userSelect: 'none',\n          willChange: 'transform',\n          transform: 'translate(-50%, 0px)',\n          zIndex: 100,\n        }}\n        onClick={onClick}\n        onKeyDown={onKeyPress}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {``}\n        ⚙️\n        {``}\n      </div>\n    );\n  },\n});\n\nexport const dimensionViewable = {\n  name: 'dimensionViewable',\n  props: [],\n  events: [],\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    const rect = moveable.getRect();\n    return (\n      <div\n        key={'dimension-viewable'}\n        className={'moveable-dimension'}\n        style={{\n          position: 'absolute',\n          left: `${rect.width / 2}px`,\n          top: `${rect.height + 20}px`,\n          background: '#4af',\n          borderRadius: '2px',\n          padding: '2px 4px',\n          color: 'white',\n          fontSize: '13px',\n          whiteSpace: 'nowrap',\n          fontWeight: 'bold',\n          willChange: 'transform',\n          transform: 'translate(-50%, 0px)',\n          zIndex: 100,\n        }}\n      >\n        {Math.round(rect.offsetWidth)} x {Math.round(rect.offsetHeight)}\n      </div>\n    );\n  },\n};\n\nexport const constraintViewable = (scene: Scene) => ({\n  name: 'constraintViewable',\n  props: [],\n  events: [],\n  render(moveable: MoveableManagerInterface<unknown, unknown>, React: Renderer) {\n    const rect = moveable.getRect();\n    const targetElement = scene.findElementByTarget(moveable.state.target!);\n\n    // If selection is more than 1 element don't display constraint visualizations\n    if (scene.selecto?.getSelectedTargets() && scene.selecto?.getSelectedTargets().length > 1) {\n      return;\n    }\n\n    let verticalConstraintVisualization = null;\n    let horizontalConstraintVisualization = null;\n\n    const constraint = targetElement?.tempConstraint ?? targetElement?.options.constraint ?? {};\n\n    const borderStyle = '1px dashed #4af';\n\n    const centerIndicatorLineOne = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 2 - rect.height / 16}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 8}px`,\n        transform: 'rotate(45deg)',\n      },\n    });\n\n    const centerIndicatorLineTwo = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 2 - rect.height / 16}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 8}px`,\n        transform: 'rotate(-45deg)',\n      },\n    });\n\n    const centerIndicator = React.createElement('div', {}, [centerIndicatorLineOne, centerIndicatorLineTwo]);\n\n    const verticalConstraintTop = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        bottom: '0px',\n        borderLeft: borderStyle,\n        height: '100vh',\n      },\n    });\n\n    const verticalConstraintBottom = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height}px`,\n        borderLeft: borderStyle,\n        height: '100vh',\n      },\n    });\n\n    const verticalConstraintTopBottom = React.createElement('div', {}, [\n      verticalConstraintTop,\n      verticalConstraintBottom,\n    ]);\n\n    const verticalConstraintCenterLine = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 2}px`,\n        top: `${rect.height / 4}px`,\n        borderLeft: borderStyle,\n        height: `${rect.height / 2}px`,\n      },\n    });\n\n    const verticalConstraintCenter = React.createElement('div', {}, [verticalConstraintCenterLine, centerIndicator]);\n\n    switch (constraint.vertical) {\n      case VerticalConstraint.Top:\n        verticalConstraintVisualization = verticalConstraintTop;\n        break;\n      case VerticalConstraint.Bottom:\n        verticalConstraintVisualization = verticalConstraintBottom;\n        break;\n      case VerticalConstraint.TopBottom:\n        verticalConstraintVisualization = verticalConstraintTopBottom;\n        break;\n      case VerticalConstraint.Center:\n        verticalConstraintVisualization = verticalConstraintCenter;\n        break;\n    }\n\n    const horizontalConstraintLeft = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        right: '0px',\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: '100vw',\n      },\n    });\n\n    const horizontalConstraintRight = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width}px`,\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: '100vw',\n      },\n    });\n\n    const horizontalConstraintLeftRight = React.createElement('div', {}, [\n      horizontalConstraintLeft,\n      horizontalConstraintRight,\n    ]);\n\n    const horizontalConstraintCenterLine = React.createElement('div', {\n      style: {\n        position: 'absolute',\n        left: `${rect.width / 4}px`,\n        top: `${rect.height / 2}px`,\n        borderTop: borderStyle,\n        width: `${rect.width / 2}px`,\n      },\n    });\n\n    const horizontalConstraintCenter = React.createElement('div', {}, [\n      horizontalConstraintCenterLine,\n      centerIndicator,\n    ]);\n\n    switch (constraint.horizontal) {\n      case HorizontalConstraint.Left:\n        horizontalConstraintVisualization = horizontalConstraintLeft;\n        break;\n      case HorizontalConstraint.Right:\n        horizontalConstraintVisualization = horizontalConstraintRight;\n        break;\n      case HorizontalConstraint.LeftRight:\n        horizontalConstraintVisualization = horizontalConstraintLeftRight;\n        break;\n      case HorizontalConstraint.Center:\n        horizontalConstraintVisualization = horizontalConstraintCenter;\n        break;\n    }\n\n    const constraintVisualization = React.createElement('div', {}, [\n      verticalConstraintVisualization,\n      horizontalConstraintVisualization,\n    ]);\n\n    return constraintVisualization;\n  },\n});\n","import React from 'react';\n\nimport { CanvasElementOptions, CanvasFrameOptions } from 'app/features/canvas';\n\nimport { FrameState } from './frame';\nimport { Scene } from './scene';\n\nexport class RootElement extends FrameState {\n  constructor(\n    public options: CanvasFrameOptions,\n    public scene: Scene,\n    private changeCallback: () => void\n  ) {\n    super(options, scene);\n\n    this.sizeStyle = {\n      height: '100%',\n      width: '100%',\n    };\n  }\n\n  isRoot(): this is RootElement {\n    return true;\n  }\n\n  // root type can not change\n  onChange(options: CanvasElementOptions) {\n    this.revId++;\n    this.options = { ...options } as CanvasFrameOptions;\n    this.changeCallback();\n  }\n\n  getSaveModel(): CanvasFrameOptions {\n    const { placement, constraint, ...rest } = this.options;\n\n    return {\n      ...rest, // everything except placement & constraint\n      elements: this.elements.map((v) => v.getSaveModel()),\n    };\n  }\n\n  setRootRef = (target: HTMLDivElement) => {\n    this.div = target;\n  };\n\n  render() {\n    return (\n      <div\n        onContextMenu={(event) => event.preventDefault()}\n        key={this.UID}\n        ref={this.setRootRef}\n        style={{ ...this.sizeStyle, ...this.dataStyle }}\n      >\n        {this.elements.map((v) => v.render())}\n      </div>\n    );\n  }\n}\n","import { css } from '@emotion/css';\nimport Moveable from 'moveable';\nimport React, { createRef, CSSProperties, RefObject } from 'react';\nimport { ReactZoomPanPinchContentRef } from 'react-zoom-pan-pinch';\nimport { BehaviorSubject, ReplaySubject, Subject, Subscription } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport Selecto from 'selecto';\n\nimport { AppEvents, GrafanaTheme2, PanelData } from '@grafana/data';\nimport { locationService } from '@grafana/runtime/src';\nimport {\n  ColorDimensionConfig,\n  ResourceDimensionConfig,\n  ScalarDimensionConfig,\n  ScaleDimensionConfig,\n  TextDimensionConfig,\n} from '@grafana/schema';\nimport { Portal, stylesFactory } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { CanvasFrameOptions, DEFAULT_CANVAS_ELEMENT_CONFIG } from 'app/features/canvas';\nimport { DimensionContext } from 'app/features/dimensions';\nimport {\n  getColorDimensionFromData,\n  getResourceDimensionFromData,\n  getScalarDimensionFromData,\n  getScaleDimensionFromData,\n  getTextDimensionFromData,\n} from 'app/features/dimensions/utils';\nimport { CanvasContextMenu } from 'app/plugins/panel/canvas/components/CanvasContextMenu';\nimport { CanvasTooltip } from 'app/plugins/panel/canvas/components/CanvasTooltip';\nimport { CONNECTION_ANCHOR_DIV_ID } from 'app/plugins/panel/canvas/components/connections/ConnectionAnchors';\nimport {\n  Connections,\n  CONNECTION_VERTEX_ADD_ID,\n  CONNECTION_VERTEX_ID,\n} from 'app/plugins/panel/canvas/components/connections/Connections';\nimport { AnchorPoint, CanvasTooltipPayload, LayerActionID } from 'app/plugins/panel/canvas/types';\nimport { getParent, getTransformInstance } from 'app/plugins/panel/canvas/utils';\n\nimport appEvents from '../../../core/app_events';\nimport { CanvasPanel } from '../../../plugins/panel/canvas/CanvasPanel';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from '../types';\n\nimport { SceneTransformWrapper } from './SceneTransformWrapper';\nimport { constraintViewable, dimensionViewable, settingsViewable } from './ables';\nimport { ElementState } from './element';\nimport { FrameState } from './frame';\nimport { RootElement } from './root';\n\nexport interface SelectionParams {\n  targets: Array<HTMLElement | SVGElement>;\n  frame?: FrameState;\n}\n\nexport class Scene {\n  styles = getStyles(config.theme2);\n  readonly selection = new ReplaySubject<ElementState[]>(1);\n  readonly moved = new Subject<number>(); // called after resize/drag for editor updates\n  readonly byName = new Map<string, ElementState>();\n\n  root: RootElement;\n\n  revId = 0;\n\n  width = 0;\n  height = 0;\n  scale = 1;\n  style: CSSProperties = {};\n  data?: PanelData;\n  selecto?: Selecto;\n  moveable?: Moveable;\n  div?: HTMLDivElement;\n  connections: Connections;\n  currentLayer?: FrameState;\n  isEditingEnabled?: boolean;\n  shouldShowAdvancedTypes?: boolean;\n  shouldPanZoom?: boolean;\n  shouldInfinitePan?: boolean;\n  skipNextSelectionBroadcast = false;\n  ignoreDataUpdate = false;\n  panel: CanvasPanel;\n  contextMenuVisible?: boolean;\n  contextMenuOnVisibilityChange = (visible: boolean) => {\n    this.contextMenuVisible = visible;\n    const transformInstance = getTransformInstance(this);\n    if (transformInstance) {\n      if (visible) {\n        transformInstance.setup.disabled = true;\n      } else {\n        transformInstance.setup.disabled = false;\n      }\n    }\n  };\n\n  isPanelEditing = locationService.getSearchObject().editPanel !== undefined;\n\n  inlineEditingCallback?: () => void;\n  setBackgroundCallback?: (anchorPoint: AnchorPoint) => void;\n\n  tooltipCallback?: (tooltip: CanvasTooltipPayload | undefined) => void;\n  tooltip?: CanvasTooltipPayload;\n\n  moveableActionCallback?: (moved: boolean) => void;\n\n  readonly editModeEnabled = new BehaviorSubject<boolean>(false);\n  subscription: Subscription;\n\n  targetsToSelect = new Set<HTMLDivElement>();\n  transformComponentRef: RefObject<ReactZoomPanPinchContentRef> | undefined;\n\n  constructor(\n    cfg: CanvasFrameOptions,\n    enableEditing: boolean,\n    showAdvancedTypes: boolean,\n    panZoom: boolean,\n    infinitePan: boolean,\n    public onSave: (cfg: CanvasFrameOptions) => void,\n    panel: CanvasPanel\n  ) {\n    this.root = this.load(cfg, enableEditing, showAdvancedTypes, panZoom, infinitePan);\n\n    this.subscription = this.editModeEnabled.subscribe((open) => {\n      if (!this.moveable || !this.isEditingEnabled) {\n        return;\n      }\n      this.moveable.draggable = !open;\n    });\n\n    this.panel = panel;\n    this.connections = new Connections(this);\n    this.transformComponentRef = createRef();\n  }\n\n  getNextElementName = (isFrame = false) => {\n    const label = isFrame ? 'Frame' : 'Element';\n    let idx = this.byName.size + 1;\n\n    const max = idx + 100;\n    while (true && idx < max) {\n      const name = `${label} ${idx++}`;\n      if (!this.byName.has(name)) {\n        return name;\n      }\n    }\n\n    return `${label} ${Date.now()}`;\n  };\n\n  canRename = (v: string) => {\n    return !this.byName.has(v);\n  };\n\n  load(\n    cfg: CanvasFrameOptions,\n    enableEditing: boolean,\n    showAdvancedTypes: boolean,\n    panZoom: boolean,\n    infinitePan: boolean\n  ) {\n    this.root = new RootElement(\n      cfg ?? {\n        type: 'frame',\n        elements: [DEFAULT_CANVAS_ELEMENT_CONFIG],\n      },\n      this,\n      this.save // callback when changes are made\n    );\n\n    this.isEditingEnabled = enableEditing;\n    this.shouldShowAdvancedTypes = showAdvancedTypes;\n    this.shouldPanZoom = panZoom;\n    this.shouldInfinitePan = infinitePan;\n\n    setTimeout(() => {\n      if (this.div) {\n        // If editing is enabled, clear selecto instance\n        const destroySelecto = enableEditing;\n        this.initMoveable(destroySelecto, enableEditing);\n        this.currentLayer = this.root;\n        this.selection.next([]);\n        this.connections.select(undefined);\n        this.connections.updateState();\n      }\n    });\n    return this.root;\n  }\n\n  context: DimensionContext = {\n    getColor: (color: ColorDimensionConfig) => getColorDimensionFromData(this.data, color),\n    getScale: (scale: ScaleDimensionConfig) => getScaleDimensionFromData(this.data, scale),\n    getScalar: (scalar: ScalarDimensionConfig) => getScalarDimensionFromData(this.data, scalar),\n    getText: (text: TextDimensionConfig) => getTextDimensionFromData(this.data, text),\n    getResource: (res: ResourceDimensionConfig) => getResourceDimensionFromData(this.data, res),\n    getPanelData: () => this.data,\n  };\n\n  updateData(data: PanelData) {\n    this.data = data;\n    this.root.updateData(this.context);\n  }\n\n  updateSize(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n    this.style = { width, height };\n\n    if (this.selecto?.getSelectedTargets().length) {\n      this.clearCurrentSelection();\n    }\n  }\n\n  frameSelection() {\n    this.selection.pipe(first()).subscribe((currentSelectedElements) => {\n      const currentLayer = currentSelectedElements[0].parent!;\n\n      const newLayer = new FrameState(\n        {\n          type: 'frame',\n          name: this.getNextElementName(true),\n          elements: [],\n        },\n        this,\n        currentSelectedElements[0].parent\n      );\n\n      const framePlacement = this.generateFrameContainer(currentSelectedElements);\n\n      newLayer.options.placement = framePlacement;\n\n      currentSelectedElements.forEach((element: ElementState) => {\n        const elementContainer = element.div?.getBoundingClientRect();\n        element.setPlacementFromConstraint(elementContainer, framePlacement as DOMRect);\n        currentLayer.doAction(LayerActionID.Delete, element);\n        newLayer.doAction(LayerActionID.Duplicate, element, false, false);\n      });\n\n      newLayer.setPlacementFromConstraint(framePlacement as DOMRect, currentLayer.div?.getBoundingClientRect());\n\n      currentLayer.elements.push(newLayer);\n\n      this.byName.set(newLayer.getName(), newLayer);\n\n      this.save();\n    });\n  }\n\n  private generateFrameContainer = (elements: ElementState[]): Placement => {\n    let minTop = Infinity;\n    let minLeft = Infinity;\n    let maxRight = 0;\n    let maxBottom = 0;\n\n    elements.forEach((element: ElementState) => {\n      const elementContainer = element.div?.getBoundingClientRect();\n\n      if (!elementContainer) {\n        return;\n      }\n\n      if (minTop > elementContainer.top) {\n        minTop = elementContainer.top;\n      }\n\n      if (minLeft > elementContainer.left) {\n        minLeft = elementContainer.left;\n      }\n\n      if (maxRight < elementContainer.right) {\n        maxRight = elementContainer.right;\n      }\n\n      if (maxBottom < elementContainer.bottom) {\n        maxBottom = elementContainer.bottom;\n      }\n    });\n\n    return {\n      top: minTop,\n      left: minLeft,\n      width: maxRight - minLeft,\n      height: maxBottom - minTop,\n    };\n  };\n\n  clearCurrentSelection(skipNextSelectionBroadcast = false) {\n    this.skipNextSelectionBroadcast = skipNextSelectionBroadcast;\n    let event: MouseEvent = new MouseEvent('click');\n    this.selecto?.clickTarget(event, this.div);\n  }\n\n  updateCurrentLayer(newLayer: FrameState) {\n    this.currentLayer = newLayer;\n    this.clearCurrentSelection();\n    this.save();\n  }\n\n  save = (updateMoveable = false) => {\n    this.onSave(this.root.getSaveModel());\n\n    if (updateMoveable) {\n      setTimeout(() => {\n        if (this.div) {\n          this.initMoveable(true, this.isEditingEnabled);\n        }\n      });\n    }\n  };\n\n  findElementByTarget = (target: Element): ElementState | undefined => {\n    // We will probably want to add memoization to this as we are calling on drag / resize\n\n    const stack = [...this.root.elements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div && currentElement.div === target) {\n        return currentElement;\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n\n    return undefined;\n  };\n\n  setNonTargetPointerEvents = (target: Element, disablePointerEvents: boolean) => {\n    const stack = [...this.root.elements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div && currentElement.div !== target) {\n        currentElement.applyLayoutStylesToDiv(disablePointerEvents);\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n  };\n\n  setRef = (sceneContainer: HTMLDivElement) => {\n    this.div = sceneContainer;\n  };\n\n  select = (selection: SelectionParams) => {\n    if (this.selecto) {\n      this.selecto.setSelectedTargets(selection.targets);\n      this.updateSelection(selection);\n      this.editModeEnabled.next(false);\n\n      // Hide connection anchors on programmatic select\n      if (this.connections.connectionAnchorDiv) {\n        this.connections.connectionAnchorDiv.style.display = 'none';\n      }\n    }\n  };\n\n  private updateSelection = (selection: SelectionParams) => {\n    this.moveable!.target = selection.targets;\n    if (this.skipNextSelectionBroadcast) {\n      this.skipNextSelectionBroadcast = false;\n      return;\n    }\n\n    if (selection.frame) {\n      this.selection.next([selection.frame]);\n    } else {\n      const s = selection.targets.map((t) => this.findElementByTarget(t)!);\n      this.selection.next(s);\n    }\n  };\n\n  private generateTargetElements = (rootElements: ElementState[]): HTMLDivElement[] => {\n    let targetElements: HTMLDivElement[] = [];\n\n    const stack = [...rootElements];\n    while (stack.length > 0) {\n      const currentElement = stack.shift();\n\n      if (currentElement && currentElement.div) {\n        targetElements.push(currentElement.div);\n      }\n\n      const nestedElements = currentElement instanceof FrameState ? currentElement.elements : [];\n      for (const nestedElement of nestedElements) {\n        stack.unshift(nestedElement);\n      }\n    }\n\n    return targetElements;\n  };\n\n  disableCustomables = () => {\n    this.moveable!.props = {\n      dimensionViewable: false,\n      constraintViewable: false,\n      settingsViewable: false,\n    };\n  };\n\n  enableCustomables = () => {\n    this.moveable!.props = {\n      dimensionViewable: true,\n      constraintViewable: true,\n      settingsViewable: true,\n    };\n  };\n\n  initMoveable = (destroySelecto = false, allowChanges = true) => {\n    const targetElements = this.generateTargetElements(this.root.elements);\n\n    if (destroySelecto && this.selecto) {\n      this.selecto.destroy();\n    }\n\n    this.selecto = new Selecto({\n      container: this.div,\n      rootContainer: getParent(this),\n      selectableTargets: targetElements,\n      toggleContinueSelect: 'shift',\n      selectFromInside: false,\n      hitRate: 0,\n    });\n\n    const snapDirections = { top: true, left: true, bottom: true, right: true, center: true, middle: true };\n    const elementSnapDirections = { top: true, left: true, bottom: true, right: true, center: true, middle: true };\n\n    this.moveable = new Moveable(this.div!, {\n      draggable: allowChanges && !this.editModeEnabled.getValue(),\n      resizable: allowChanges,\n\n      // Setup rotatable\n      rotatable: allowChanges,\n      throttleRotate: 5,\n\n      // Setup snappable\n      snappable: allowChanges,\n      snapDirections: snapDirections,\n      elementSnapDirections: elementSnapDirections,\n      elementGuidelines: targetElements,\n\n      ables: [dimensionViewable, constraintViewable(this), settingsViewable(this)],\n      props: {\n        dimensionViewable: allowChanges,\n        constraintViewable: allowChanges,\n        settingsViewable: allowChanges,\n      },\n      origin: false,\n      className: this.styles.selected,\n    })\n      .on('rotateStart', () => {\n        this.disableCustomables();\n      })\n      .on('rotate', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n\n        if (targetedElement) {\n          targetedElement.applyRotate(event);\n        }\n      })\n      .on('rotateGroup', (e) => {\n        for (let event of e.events) {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.applyRotate(event);\n          }\n        }\n      })\n      .on('rotateEnd', () => {\n        this.enableCustomables();\n        // Update the editor with the new rotation\n        this.moved.next(Date.now());\n      })\n      .on('click', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        let elementSupportsEditing = false;\n        if (targetedElement) {\n          elementSupportsEditing = targetedElement.item.hasEditMode ?? false;\n        }\n\n        if (event.isDouble && allowChanges && !this.editModeEnabled.getValue() && elementSupportsEditing) {\n          this.editModeEnabled.next(true);\n        }\n      })\n      .on('clickGroup', (event) => {\n        this.selecto!.clickTarget(event.inputEvent, event.inputTarget);\n      })\n      .on('dragStart', (event) => {\n        this.ignoreDataUpdate = true;\n        this.setNonTargetPointerEvents(event.target, true);\n\n        // Remove the selected element from the snappable guidelines\n        if (this.moveable && this.moveable.elementGuidelines) {\n          const targetIndex = this.moveable.elementGuidelines.indexOf(event.target);\n          if (targetIndex > -1) {\n            this.moveable.elementGuidelines.splice(targetIndex, 1);\n          }\n        }\n      })\n      .on('dragGroupStart', (e) => {\n        this.ignoreDataUpdate = true;\n\n        // Remove the selected elements from the snappable guidelines\n        if (this.moveable && this.moveable.elementGuidelines) {\n          for (let event of e.events) {\n            const targetIndex = this.moveable.elementGuidelines.indexOf(event.target);\n            if (targetIndex > -1) {\n              this.moveable.elementGuidelines.splice(targetIndex, 1);\n            }\n          }\n        }\n      })\n      .on('drag', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.applyDrag(event);\n\n          if (this.connections.connectionsNeedUpdate(targetedElement) && this.moveableActionCallback) {\n            this.moveableActionCallback(true);\n          }\n        }\n      })\n      .on('dragGroup', (e) => {\n        let needsUpdate = false;\n        for (let event of e.events) {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.applyDrag(event);\n            if (!needsUpdate) {\n              needsUpdate = this.connections.connectionsNeedUpdate(targetedElement);\n            }\n          }\n        }\n\n        if (needsUpdate && this.moveableActionCallback) {\n          this.moveableActionCallback(true);\n        }\n      })\n      .on('dragGroupEnd', (e) => {\n        e.events.forEach((event) => {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            if (targetedElement) {\n              targetedElement.setPlacementFromConstraint(undefined, undefined, this.scale);\n            }\n\n            // re-add the selected elements to the snappable guidelines\n            if (this.moveable && this.moveable.elementGuidelines) {\n              this.moveable.elementGuidelines.push(event.target);\n            }\n          }\n        });\n\n        this.moved.next(Date.now());\n        this.ignoreDataUpdate = false;\n      })\n      .on('dragEnd', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.setPlacementFromConstraint(undefined, undefined, this.scale);\n        }\n\n        this.moved.next(Date.now());\n        this.ignoreDataUpdate = false;\n        this.setNonTargetPointerEvents(event.target, false);\n\n        // re-add the selected element to the snappable guidelines\n        if (this.moveable && this.moveable.elementGuidelines) {\n          this.moveable.elementGuidelines.push(event.target);\n        }\n      })\n      .on('resizeStart', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n\n        if (targetedElement) {\n          // Remove the selected element from the snappable guidelines\n          if (this.moveable && this.moveable.elementGuidelines) {\n            const targetIndex = this.moveable.elementGuidelines.indexOf(event.target);\n            if (targetIndex > -1) {\n              this.moveable.elementGuidelines.splice(targetIndex, 1);\n            }\n          }\n\n          targetedElement.tempConstraint = { ...targetedElement.options.constraint };\n          targetedElement.options.constraint = {\n            vertical: VerticalConstraint.Top,\n            horizontal: HorizontalConstraint.Left,\n          };\n          targetedElement.setPlacementFromConstraint(undefined, undefined, this.scale);\n        }\n      })\n      .on('resizeGroupStart', (e) => {\n        // Remove the selected elements from the snappable guidelines\n        if (this.moveable && this.moveable.elementGuidelines) {\n          for (let event of e.events) {\n            const targetIndex = this.moveable.elementGuidelines.indexOf(event.target);\n            if (targetIndex > -1) {\n              this.moveable.elementGuidelines.splice(targetIndex, 1);\n            }\n          }\n        }\n      })\n      .on('resize', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n        if (targetedElement) {\n          targetedElement.applyResize(event, this.scale);\n\n          if (this.connections.connectionsNeedUpdate(targetedElement) && this.moveableActionCallback) {\n            this.moveableActionCallback(true);\n          }\n        }\n        this.moved.next(Date.now()); // TODO only on end\n      })\n      .on('resizeGroup', (e) => {\n        let needsUpdate = false;\n        for (let event of e.events) {\n          const targetedElement = this.findElementByTarget(event.target);\n          if (targetedElement) {\n            targetedElement.applyResize(event);\n\n            if (!needsUpdate) {\n              needsUpdate = this.connections.connectionsNeedUpdate(targetedElement);\n            }\n          }\n        }\n\n        if (needsUpdate && this.moveableActionCallback) {\n          this.moveableActionCallback(true);\n        }\n\n        this.moved.next(Date.now()); // TODO only on end\n      })\n      .on('resizeEnd', (event) => {\n        const targetedElement = this.findElementByTarget(event.target);\n\n        if (targetedElement) {\n          if (targetedElement.tempConstraint) {\n            targetedElement.options.constraint = targetedElement.tempConstraint;\n            targetedElement.tempConstraint = undefined;\n          }\n\n          targetedElement.setPlacementFromConstraint(undefined, undefined, this.scale);\n\n          // re-add the selected element to the snappable guidelines\n          if (this.moveable && this.moveable.elementGuidelines) {\n            this.moveable.elementGuidelines.push(event.target);\n          }\n        }\n      })\n      .on('resizeGroupEnd', (e) => {\n        // re-add the selected elements to the snappable guidelines\n        if (this.moveable && this.moveable.elementGuidelines) {\n          for (let event of e.events) {\n            this.moveable.elementGuidelines.push(event.target);\n          }\n        }\n      });\n\n    let targets: Array<HTMLElement | SVGElement> = [];\n    this.selecto!.on('dragStart', (event) => {\n      const selectedTarget = event.inputEvent.target;\n\n      // If selected target is a connection control, eject to handle connection event\n      if (selectedTarget.id === CONNECTION_ANCHOR_DIV_ID) {\n        this.connections.handleConnectionDragStart(selectedTarget, event.inputEvent.clientX, event.inputEvent.clientY);\n        event.stop();\n        return;\n      }\n\n      // If selected target is a vertex, eject to handle vertex event\n      if (selectedTarget.id === CONNECTION_VERTEX_ID) {\n        this.connections.handleVertexDragStart(selectedTarget);\n        event.stop();\n        return;\n      }\n\n      // If selected target is an add vertex point, eject to handle add vertex event\n      if (selectedTarget.id === CONNECTION_VERTEX_ADD_ID) {\n        this.connections.handleVertexAddDragStart(selectedTarget);\n        event.stop();\n        return;\n      }\n\n      const isTargetMoveableElement =\n        this.moveable!.isMoveableElement(selectedTarget) ||\n        targets.some((target) => target === selectedTarget || target.contains(selectedTarget));\n\n      const isTargetAlreadySelected = this.selecto\n        ?.getSelectedTargets()\n        .includes(selectedTarget.parentElement.parentElement);\n\n      // Apply grabbing cursor while dragging, applyLayoutStylesToDiv() resets it to grab when done\n      if (\n        this.isEditingEnabled &&\n        !this.editModeEnabled.getValue() &&\n        isTargetMoveableElement &&\n        this.selecto?.getSelectedTargets().length\n      ) {\n        this.selecto.getSelectedTargets()[0].style.cursor = 'grabbing';\n      }\n\n      if (isTargetMoveableElement || isTargetAlreadySelected || !this.isEditingEnabled) {\n        // Prevent drawing selection box when selected target is a moveable element or already selected\n        event.stop();\n      }\n    })\n      .on('select', () => {\n        this.editModeEnabled.next(false);\n\n        // Hide connection anchors on select\n        if (this.connections.connectionAnchorDiv) {\n          this.connections.connectionAnchorDiv.style.display = 'none';\n        }\n      })\n      .on('selectEnd', (event) => {\n        targets = event.selected;\n        this.updateSelection({ targets });\n\n        if (event.isDragStart) {\n          if (this.isEditingEnabled && !this.editModeEnabled.getValue() && this.selecto?.getSelectedTargets().length) {\n            this.selecto.getSelectedTargets()[0].style.cursor = 'grabbing';\n          }\n          event.inputEvent.preventDefault();\n          event.data.timer = setTimeout(() => {\n            this.moveable!.dragStart(event.inputEvent);\n          });\n        }\n      })\n      .on('dragEnd', (event) => {\n        clearTimeout(event.data.timer);\n      });\n  };\n\n  reorderElements = (src: ElementState, dest: ElementState, dragToGap: boolean, destPosition: number) => {\n    switch (dragToGap) {\n      case true:\n        switch (destPosition) {\n          case -1:\n            // top of the tree\n            if (src.parent instanceof FrameState) {\n              // move outside the frame\n              if (dest.parent) {\n                this.updateElements(src, dest.parent, dest.parent.elements.length);\n                src.updateData(dest.parent.scene.context);\n              }\n            } else {\n              dest.parent?.reorderTree(src, dest, true);\n            }\n            break;\n          default:\n            if (dest.parent) {\n              this.updateElements(src, dest.parent, dest.parent.elements.indexOf(dest));\n              src.updateData(dest.parent.scene.context);\n            }\n            break;\n        }\n        break;\n      case false:\n        if (dest instanceof FrameState) {\n          if (src.parent === dest) {\n            // same frame parent\n            src.parent?.reorderTree(src, dest, true);\n          } else {\n            this.updateElements(src, dest);\n            src.updateData(dest.scene.context);\n          }\n        } else if (src.parent === dest.parent) {\n          src.parent?.reorderTree(src, dest);\n        } else {\n          if (dest.parent) {\n            this.updateElements(src, dest.parent);\n            src.updateData(dest.parent.scene.context);\n          }\n        }\n        break;\n    }\n  };\n\n  private updateElements = (src: ElementState, dest: FrameState | RootElement, idx: number | null = null) => {\n    src.parent?.doAction(LayerActionID.Delete, src);\n    src.parent = dest;\n\n    const elementContainer = src.div?.getBoundingClientRect();\n    src.setPlacementFromConstraint(elementContainer, dest.div?.getBoundingClientRect());\n\n    const destIndex = idx ?? dest.elements.length - 1;\n    dest.elements.splice(destIndex, 0, src);\n    dest.scene.save();\n\n    dest.reinitializeMoveable();\n  };\n\n  addToSelection = () => {\n    try {\n      let selection: SelectionParams = { targets: [] };\n      selection.targets = [...this.targetsToSelect];\n      this.select(selection);\n    } catch (error) {\n      appEvents.emit(AppEvents.alertError, ['Unable to add to selection']);\n    }\n  };\n\n  render() {\n    const isTooltipValid = (this.tooltip?.element?.data?.links?.length ?? 0) > 0;\n    const canShowElementTooltip = !this.isEditingEnabled && isTooltipValid;\n\n    const sceneDiv = (\n      <div key={this.revId} className={this.styles.wrap} style={this.style} ref={this.setRef}>\n        {this.connections.render()}\n        {this.root.render()}\n        {this.isEditingEnabled && (\n          <Portal>\n            <CanvasContextMenu\n              scene={this}\n              panel={this.panel}\n              onVisibilityChange={this.contextMenuOnVisibilityChange}\n            />\n          </Portal>\n        )}\n        {canShowElementTooltip && (\n          <Portal>\n            <CanvasTooltip scene={this} />\n          </Portal>\n        )}\n      </div>\n    );\n\n    return config.featureToggles.canvasPanelPanZoom ? (\n      <SceneTransformWrapper scene={this}>{sceneDiv}</SceneTransformWrapper>\n    ) : (\n      sceneDiv\n    );\n  }\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  wrap: css`\n    overflow: hidden;\n    position: relative;\n  `,\n  selected: css`\n    z-index: 999 !important;\n  `,\n}));\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ResourceDimensionMode } from '@grafana/schema';\nimport { Portal, useTheme2 } from '@grafana/ui';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { MediaType, ResourceFolderName } from 'app/features/dimensions';\nimport { ResourcePickerPopover } from 'app/features/dimensions/editors/ResourcePickerPopover';\n\nimport { AnchorPoint } from '../types';\n\ntype Props = {\n  onClose: () => void;\n  scene: Scene;\n  anchorPoint: AnchorPoint;\n};\n\nexport function SetBackground({ onClose, scene, anchorPoint }: Props) {\n  const defaultValue = scene.root.options.background?.image?.fixed ?? '';\n\n  const [bgImage, setBgImage] = useState(defaultValue);\n  const theme = useTheme2();\n  const styles = getStyles(theme, anchorPoint);\n\n  const onChange = (value: string | undefined) => {\n    if (value) {\n      setBgImage(value);\n      if (scene.root) {\n        scene.root.options.background = {\n          ...scene.root.options.background,\n          image: { mode: ResourceDimensionMode.Fixed, fixed: value },\n        };\n        scene.revId++;\n        scene.save();\n\n        scene.root.reinitializeMoveable();\n      }\n\n      // Force a re-render (update scene data after config update)\n      if (scene) {\n        scene.updateData(scene.data!);\n      }\n    }\n\n    onClose();\n  };\n\n  return (\n    <Portal className={styles.portalWrapper}>\n      <ResourcePickerPopover\n        onChange={onChange}\n        value={bgImage}\n        mediaType={MediaType.Image}\n        folderName={ResourceFolderName.IOT}\n      />\n    </Portal>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2, anchorPoint: AnchorPoint) => ({\n  portalWrapper: css({\n    width: '315px',\n    height: '445px',\n    transform: `translate(${anchorPoint.x}px, ${anchorPoint.y - 200}px)`,\n  }),\n});\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { InlineField, InlineFieldRow, RadioButtonGroup } from '@grafana/ui/src';\nimport { BackgroundImageSize } from 'app/features/canvas';\n\nconst options: Array<SelectableValue<BackgroundImageSize>> = [\n  { value: BackgroundImageSize.Original, label: 'Original' },\n  { value: BackgroundImageSize.Contain, label: 'Contain' },\n  { value: BackgroundImageSize.Cover, label: 'Cover' },\n  { value: BackgroundImageSize.Fill, label: 'Fill' },\n  { value: BackgroundImageSize.Tile, label: 'Tile' },\n];\n\nexport const BackgroundSizeEditor = ({ value, onChange }: StandardEditorProps<string, undefined, undefined>) => {\n  const imageSize = value ?? BackgroundImageSize.Cover;\n\n  const onImageSizeChange = useCallback(\n    (size: string) => {\n      onChange(size);\n    },\n    [onChange]\n  );\n\n  return (\n    <InlineFieldRow>\n      <InlineField grow={true}>\n        <RadioButtonGroup value={imageSize} options={options} onChange={onImageSizeChange} fullWidth />\n      </InlineField>\n    </InlineFieldRow>\n  );\n};\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { RadioButtonGroup } from '@grafana/ui/src';\n\nimport { LineStyle } from '../types';\n\nconst options: Array<SelectableValue<LineStyle>> = [\n  { value: LineStyle.Solid, label: 'Solid' },\n  { value: LineStyle.Dashed, label: 'Dashed' },\n];\n\nexport const LineStyleEditor = ({ value, onChange }: StandardEditorProps<string, undefined, undefined>) => {\n  const lineStyle = value ?? LineStyle.Solid;\n\n  const onLineStyleChange = useCallback(\n    (lineStyle: string) => {\n      onChange(lineStyle);\n    },\n    [onChange]\n  );\n\n  return <RadioButtonGroup value={lineStyle} options={options} onChange={onLineStyleChange} fullWidth />;\n};\n","import { capitalize } from 'lodash';\n\nimport { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { CanvasConnection, CanvasElementOptions, ConnectionDirection } from 'app/features/canvas';\nimport { ColorDimensionEditor, ResourceDimensionEditor, ScaleDimensionEditor } from 'app/features/dimensions/editors';\nimport { BackgroundSizeEditor } from 'app/features/dimensions/editors/BackgroundSizeEditor';\n\nimport { LineStyle } from '../types';\n\nimport { LineStyleEditor } from './LineStyleEditor';\n\ninterface OptionSuppliers {\n  addBackground: PanelOptionsSupplier<CanvasElementOptions>;\n  addBorder: PanelOptionsSupplier<CanvasElementOptions>;\n  addColor: PanelOptionsSupplier<CanvasConnection>;\n  addSize: PanelOptionsSupplier<CanvasConnection>;\n  addRadius: PanelOptionsSupplier<CanvasConnection>;\n  addDirection: PanelOptionsSupplier<CanvasConnection>;\n  addLineStyle: PanelOptionsSupplier<CanvasConnection>;\n}\n\nconst getCategoryName = (str: string, type: string | undefined) => {\n  if (type !== 'frame' && type !== undefined) {\n    return [str + ` (${type})`];\n  }\n  return [str];\n};\n\nexport const optionBuilder: OptionSuppliers = {\n  addBackground: (builder, context) => {\n    const category = getCategoryName('Background', context.options?.type);\n    builder\n      .addCustomEditor({\n        category,\n        id: 'background.color',\n        path: 'background.color',\n        name: 'Color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: '',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'background.image',\n        path: 'background.image',\n        name: 'Image',\n        editor: ResourceDimensionEditor,\n        settings: {\n          resourceType: 'image',\n        },\n      })\n      .addCustomEditor({\n        category,\n        id: 'background.size',\n        path: 'background.size',\n        name: 'Image size',\n        editor: BackgroundSizeEditor,\n        settings: {\n          resourceType: 'image',\n        },\n      });\n  },\n\n  addBorder: (builder, context) => {\n    const category = getCategoryName('Border', context.options?.type);\n    builder.addSliderInput({\n      category,\n      path: 'border.width',\n      name: 'Width',\n      defaultValue: 2,\n      settings: {\n        min: 0,\n        max: 20,\n      },\n    });\n\n    if (context.options?.border?.width) {\n      builder.addCustomEditor({\n        category,\n        id: 'border.color',\n        path: 'border.color',\n        name: 'Color',\n        editor: ColorDimensionEditor,\n        settings: {},\n        defaultValue: {\n          // Configured values\n          fixed: '',\n        },\n      });\n    }\n\n    builder.addSliderInput({\n      category,\n      path: 'border.radius',\n      name: 'Radius',\n      defaultValue: 0,\n      settings: {\n        min: 0,\n        max: 60,\n      },\n    });\n  },\n\n  addColor: (builder, context) => {\n    const category = ['Color'];\n    builder.addCustomEditor({\n      category,\n      id: 'color',\n      path: 'color',\n      name: 'Color',\n      editor: ColorDimensionEditor,\n      settings: {},\n      defaultValue: {\n        // Configured values\n        fixed: '',\n      },\n    });\n  },\n\n  addSize: (builder, context) => {\n    const category = ['Size'];\n    builder.addCustomEditor({\n      category,\n      id: 'size',\n      path: 'size',\n      name: 'Size',\n      editor: ScaleDimensionEditor,\n      settings: {\n        min: 1,\n        max: 10,\n      },\n      defaultValue: {\n        // Configured values\n        fixed: 2,\n        min: 1,\n        max: 10,\n      },\n    });\n  },\n\n  addRadius: (builder, context) => {\n    const category = ['Radius'];\n    builder.addCustomEditor({\n      category,\n      id: 'radius',\n      path: 'radius',\n      name: 'Radius',\n      editor: ScaleDimensionEditor,\n      settings: {\n        min: 0,\n        max: 200,\n      },\n      defaultValue: {\n        // Configured values\n        fixed: 0,\n        min: 0,\n        max: 100,\n      },\n    });\n  },\n\n  addDirection: (builder, context) => {\n    const category = ['Arrow Direction'];\n    builder.addRadio({\n      category,\n      path: 'direction',\n      name: 'Direction',\n      settings: {\n        options: [\n          { value: undefined, label: capitalize(ConnectionDirection.Forward) },\n          { value: ConnectionDirection.Reverse, label: capitalize(ConnectionDirection.Reverse) },\n          { value: ConnectionDirection.Both, label: capitalize(ConnectionDirection.Both) },\n          { value: ConnectionDirection.None, label: capitalize(ConnectionDirection.None) },\n        ],\n      },\n      defaultValue: ConnectionDirection.Forward,\n    });\n  },\n\n  addLineStyle: (builder, context) => {\n    const category = ['Line style'];\n    builder.addCustomEditor({\n      category,\n      id: 'lineStyle',\n      path: 'lineStyle',\n      name: 'Line style',\n      editor: LineStyleEditor,\n      settings: {},\n      defaultValue: { value: LineStyle.Solid, label: 'Solid' },\n    });\n  },\n};\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { CanvasConnection } from 'app/features/canvas';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { ConnectionState } from '../types';\n\nimport { optionBuilder } from './options';\n\nexport interface CanvasConnectionEditorOptions {\n  connection: ConnectionState;\n  scene: Scene;\n  category?: string[];\n}\n\nexport function getConnectionEditor(opts: CanvasConnectionEditorOptions): NestedPanelOptions<CanvasConnection> {\n  return {\n    category: opts.category,\n    path: '--', // not used!\n\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path: string) => {\n        return lodashGet(opts.connection.info, path);\n      },\n      // TODO: Fix this unknown (maybe a dimension supplier?)\n      onChange: (path: string, value: unknown) => {\n        let options = opts.connection.info;\n        options = setOptionImmutably(options, path, value);\n        opts.scene.connections.onChange(opts.connection, options);\n      },\n    }),\n\n    build: (builder, context) => {\n      const ctx = { ...context, options: opts.connection.info };\n      optionBuilder.addColor(builder, ctx);\n      optionBuilder.addSize(builder, ctx);\n      optionBuilder.addRadius(builder, ctx);\n      optionBuilder.addDirection(builder, ctx);\n      optionBuilder.addLineStyle(builder, ctx);\n    },\n  };\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { Constraint, HorizontalConstraint, VerticalConstraint } from 'app/features/canvas';\n\ninterface Props {\n  onVerticalConstraintChange: (v: VerticalConstraint) => void;\n  onHorizontalConstraintChange: (h: HorizontalConstraint) => void;\n  currentConstraints: Constraint;\n}\n\nexport const ConstraintSelectionBox = ({\n  onVerticalConstraintChange,\n  onHorizontalConstraintChange,\n  currentConstraints,\n}: Props) => {\n  const styles = useStyles2(getStyles(currentConstraints));\n\n  const onClickTopConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Top);\n  };\n\n  const onClickBottomConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Bottom);\n  };\n\n  const onClickVerticalCenterConstraint = () => {\n    onVerticalConstraintChange(VerticalConstraint.Center);\n  };\n\n  const onClickLeftConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Left);\n  };\n\n  const onClickRightConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Right);\n  };\n\n  const onClickHorizontalCenterConstraint = () => {\n    onHorizontalConstraintChange(HorizontalConstraint.Center);\n  };\n\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"75.000000pt\"\n      height=\"75.000000pt\"\n      viewBox=\"0 0 228.000000 228.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      style={{ marginBottom: '4.8px' }}\n    >\n      <g transform=\"translate(0.000000,228.000000) scale(0.100000,-0.100000)\" fill=\"#000000\" stroke=\"none\">\n        <path\n          fill=\"#e5e5e5\"\n          d=\"M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29\n29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16\n-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1\n-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2\n659 2 912 0 431 -2 462 -4 478 -21z\"\n        />\n        <rect className={styles.topConstraint} height=\"228\" width=\"46\" y=\"1735\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickTopConstraint}\n          height=\"350\"\n          width=\"300\"\n          y=\"1680\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.bottomConstraint} height=\"228\" width=\"46\" y=\"210\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickBottomConstraint}\n          height=\"350\"\n          width=\"300\"\n          y=\"135\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.leftConstraint} height=\"46\" width=\"228\" y=\"1060\" x=\"265\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickLeftConstraint}\n          height=\"300\"\n          width=\"350\"\n          y=\"925\"\n          x=\"200\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.rightConstraint} height=\"46\" width=\"228\" y=\"1060\" x=\"1795\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickRightConstraint}\n          height=\"300\"\n          width=\"350\"\n          y=\"925\"\n          x=\"1730\"\n          fill=\"transparent\"\n        />\n        <path\n          className={styles.box}\n          d=\"M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14\n1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577\n16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4\n-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z\"\n        />\n        <rect className={styles.verticalCenterConstraint} height=\"456\" width=\"46\" y=\"855\" x=\"1123\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickVerticalCenterConstraint}\n          height=\"660\"\n          width=\"300\"\n          y=\"750\"\n          x=\"995\"\n          fill=\"transparent\"\n        />\n        <rect className={styles.horizontalCenterConstraint} height=\"46\" width=\"456\" y=\"1060\" x=\"918\" />\n        <rect\n          className={styles.constraintHover}\n          onClick={onClickHorizontalCenterConstraint}\n          height=\"300\"\n          width=\"660\"\n          y=\"925\"\n          x=\"815\"\n          fill=\"transparent\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nconst getStyles = (currentConstraints: Constraint) => (theme: GrafanaTheme2) => {\n  const HOVER_COLOR = '#daebf7';\n  const HOVER_OPACITY = '0.6';\n  const SELECTED_COLOR = '#0d99ff';\n\n  const selectionBoxColor = theme.isDark ? '#ffffff' : '#000000';\n\n  return {\n    constraintHover: css({\n      '&:hover': {\n        fill: HOVER_COLOR,\n        fillOpacity: HOVER_OPACITY,\n      },\n    }),\n    topConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Top ||\n      currentConstraints.vertical === VerticalConstraint.TopBottom\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    bottomConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Bottom ||\n      currentConstraints.vertical === VerticalConstraint.TopBottom\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    leftConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Left ||\n      currentConstraints.horizontal === HorizontalConstraint.LeftRight\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    rightConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Right ||\n      currentConstraints.horizontal === HorizontalConstraint.LeftRight\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    horizontalCenterConstraint: css({\n      ...(currentConstraints.horizontal === HorizontalConstraint.Center\n        ? {\n            height: '92pt',\n            y: '1014',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    verticalCenterConstraint: css({\n      ...(currentConstraints.vertical === VerticalConstraint.Center\n        ? {\n            width: '92pt',\n            x: '1085',\n            fill: SELECTED_COLOR,\n          }\n        : {\n            fill: selectionBoxColor,\n          }),\n    }),\n    box: css({\n      fill: selectionBoxColor,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data/src';\nimport { IconButton, useStyles2 } from '@grafana/ui/src';\nimport { HorizontalConstraint, Placement, QuickPlacement, VerticalConstraint } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { CanvasEditorOptions } from './elementEditor';\n\ntype Props = {\n  onPositionChange: (value: number | undefined, placement: keyof Placement) => void;\n  element: ElementState;\n  settings: CanvasEditorOptions;\n};\n\nexport const QuickPositioning = ({ onPositionChange, element, settings }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const onQuickPositioningChange = (position: QuickPlacement) => {\n    const defaultConstraint = { vertical: VerticalConstraint.Top, horizontal: HorizontalConstraint.Left };\n    const originalConstraint = { ...element.options.constraint };\n\n    element.options.constraint = defaultConstraint;\n    element.setPlacementFromConstraint();\n\n    switch (position) {\n      case QuickPlacement.Top:\n        onPositionChange(0, 'top');\n        break;\n      case QuickPlacement.Bottom:\n        onPositionChange(getRightBottomPosition(element.options.placement?.height ?? 0, 'bottom'), 'top');\n        break;\n      case QuickPlacement.VerticalCenter:\n        onPositionChange(getCenterPosition(element.options.placement?.height ?? 0, 'v'), 'top');\n        break;\n      case QuickPlacement.Left:\n        onPositionChange(0, 'left');\n        break;\n      case QuickPlacement.Right:\n        onPositionChange(getRightBottomPosition(element.options.placement?.width ?? 0, 'right'), 'left');\n        break;\n      case QuickPlacement.HorizontalCenter:\n        onPositionChange(getCenterPosition(element.options.placement?.width ?? 0, 'h'), 'left');\n        break;\n    }\n\n    element.options.constraint = originalConstraint;\n    element.setPlacementFromConstraint();\n  };\n\n  // Basing this on scene will mean that center is based on root for the time being\n  const getCenterPosition = (elementSize: number, align: 'h' | 'v') => {\n    const sceneSize = align === 'h' ? settings.scene.width : settings.scene.height;\n\n    return (sceneSize - elementSize) / 2;\n  };\n\n  const getRightBottomPosition = (elementSize: number, align: 'right' | 'bottom') => {\n    const sceneSize = align === 'right' ? settings.scene.width : settings.scene.height;\n\n    return sceneSize - elementSize;\n  };\n\n  return (\n    <div className={styles.buttonGroup}>\n      <IconButton\n        name=\"horizontal-align-left\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Left)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align left\"\n      />\n      <IconButton\n        name=\"horizontal-align-center\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.HorizontalCenter)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align horizontal centers\"\n      />\n      <IconButton\n        name=\"horizontal-align-right\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Right)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align right\"\n      />\n      <IconButton\n        name=\"vertical-align-top\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Top)}\n        size=\"lg\"\n        tooltip=\"Align top\"\n      />\n      <IconButton\n        name=\"vertical-align-center\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.VerticalCenter)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align vertical centers\"\n      />\n      <IconButton\n        name=\"vertical-align-bottom\"\n        onClick={() => onQuickPositioningChange(QuickPlacement.Bottom)}\n        className={styles.button}\n        size=\"lg\"\n        tooltip=\"Align bottom\"\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  buttonGroup: css({\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: '12px 0 12px 0',\n  }),\n  button: css({\n    marginLeft: '5px',\n    marginRight: '5px',\n  }),\n});\n","import React from 'react';\nimport { useObservable } from 'react-use';\nimport { Subject } from 'rxjs';\n\nimport { SelectableValue, StandardEditorProps } from '@grafana/data';\nimport { Field, HorizontalGroup, Icon, InlineField, InlineFieldRow, Select, VerticalGroup } from '@grafana/ui';\nimport { NumberInput } from 'app/core/components/OptionsUI/NumberInput';\nimport { HorizontalConstraint, Placement, VerticalConstraint } from 'app/features/canvas';\n\nimport { Options } from '../../panelcfg.gen';\n\nimport { ConstraintSelectionBox } from './ConstraintSelectionBox';\nimport { QuickPositioning } from './QuickPositioning';\nimport { CanvasEditorOptions } from './elementEditor';\n\nconst places: Array<keyof Placement> = ['top', 'left', 'bottom', 'right', 'width', 'height', 'rotation'];\n\nconst horizontalOptions: Array<SelectableValue<HorizontalConstraint>> = [\n  { label: 'Left', value: HorizontalConstraint.Left },\n  { label: 'Right', value: HorizontalConstraint.Right },\n  { label: 'Left & right', value: HorizontalConstraint.LeftRight },\n  { label: 'Center', value: HorizontalConstraint.Center },\n  { label: 'Scale', value: HorizontalConstraint.Scale },\n];\n\nconst verticalOptions: Array<SelectableValue<VerticalConstraint>> = [\n  { label: 'Top', value: VerticalConstraint.Top },\n  { label: 'Bottom', value: VerticalConstraint.Bottom },\n  { label: 'Top & bottom', value: VerticalConstraint.TopBottom },\n  { label: 'Center', value: VerticalConstraint.Center },\n  { label: 'Scale', value: VerticalConstraint.Scale },\n];\n\ntype Props = StandardEditorProps<any, CanvasEditorOptions, Options>;\n\nexport function PlacementEditor({ item }: Props) {\n  const settings = item.settings;\n\n  // Will force a rerender whenever the subject changes\n  useObservable(settings?.scene ? settings.scene.moved : new Subject());\n\n  if (!settings) {\n    return <div>Loading...</div>;\n  }\n\n  const element = settings.element;\n  if (!element) {\n    return <div>???</div>;\n  }\n  const { options } = element;\n  const { placement, constraint: layout } = options;\n\n  const reselectElementAfterChange = () => {\n    setTimeout(() => {\n      settings.scene.select({ targets: [element.div!] });\n    });\n  };\n\n  const onHorizontalConstraintSelect = (h: SelectableValue<HorizontalConstraint>) => {\n    onHorizontalConstraintChange(h.value!);\n  };\n\n  const onHorizontalConstraintChange = (h: HorizontalConstraint) => {\n    element.options.constraint!.horizontal = h;\n    element.setPlacementFromConstraint();\n    settings.scene.revId++;\n    settings.scene.save(true);\n    reselectElementAfterChange();\n  };\n\n  const onVerticalConstraintSelect = (v: SelectableValue<VerticalConstraint>) => {\n    onVerticalConstraintChange(v.value!);\n  };\n\n  const onVerticalConstraintChange = (v: VerticalConstraint) => {\n    element.options.constraint!.vertical = v;\n    element.setPlacementFromConstraint();\n    settings.scene.revId++;\n    settings.scene.save(true);\n    reselectElementAfterChange();\n  };\n\n  const onPositionChange = (value: number | undefined, placement: keyof Placement) => {\n    element.options.placement![placement] = value ?? element.options.placement![placement];\n    element.applyLayoutStylesToDiv();\n    settings.scene.clearCurrentSelection(true);\n    reselectElementAfterChange();\n  };\n\n  const constraint = element.tempConstraint ?? layout ?? {};\n\n  return (\n    <div>\n      <QuickPositioning onPositionChange={onPositionChange} settings={settings} element={element} />\n      <br />\n      <Field label=\"Constraints\">\n        <HorizontalGroup>\n          <ConstraintSelectionBox\n            onVerticalConstraintChange={onVerticalConstraintChange}\n            onHorizontalConstraintChange={onHorizontalConstraintChange}\n            currentConstraints={constraint}\n          />\n          <VerticalGroup>\n            <HorizontalGroup>\n              <Icon name=\"arrows-h\" />\n              <Select\n                options={horizontalOptions}\n                onChange={onHorizontalConstraintSelect}\n                value={constraint.horizontal}\n              />\n            </HorizontalGroup>\n            <HorizontalGroup>\n              <Icon name=\"arrows-v\" />\n              <Select options={verticalOptions} onChange={onVerticalConstraintSelect} value={constraint.vertical} />\n            </HorizontalGroup>\n          </VerticalGroup>\n        </HorizontalGroup>\n      </Field>\n\n      <br />\n\n      <Field label=\"Position\">\n        <>\n          {places.map((p) => {\n            const v = placement![p];\n            if (v == null) {\n              return null;\n            }\n\n            // Need to set explicit min/max for rotation as logic only can handle 0-360\n            const min = p === 'rotation' ? 0 : undefined;\n            const max = p === 'rotation' ? 360 : undefined;\n\n            return (\n              <InlineFieldRow key={p}>\n                <InlineField label={p} labelWidth={8} grow={true}>\n                  <NumberInput min={min} max={max} value={v} onChange={(v) => onPositionChange(v, p)} />\n                </InlineField>\n              </InlineFieldRow>\n            );\n          })}\n        </>\n      </Field>\n    </div>\n  );\n}\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport {\n  CanvasElementOptions,\n  canvasElementRegistry,\n  DEFAULT_CANVAS_ELEMENT_CONFIG,\n  defaultElementItems,\n} from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { getElementTypes } from '../../utils';\nimport { optionBuilder } from '../options';\n\nimport { PlacementEditor } from './PlacementEditor';\n\nexport interface CanvasEditorOptions {\n  element: ElementState;\n  scene: Scene;\n  category?: string[];\n}\n\nexport interface TreeViewEditorProps {\n  scene: Scene;\n  layer: FrameState;\n  selected: ElementState[];\n}\n\nexport function getElementEditor(opts: CanvasEditorOptions): NestedPanelOptions<CanvasElementOptions> {\n  return {\n    category: opts.category,\n    path: '--', // not used!\n\n    // Note that canvas editor writes things to the scene!\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path) => {\n        return lodashGet(opts.element.options, path);\n      },\n      onChange: (path, value) => {\n        let options = opts.element.options;\n        if (path === 'type' && value) {\n          const layer = canvasElementRegistry.getIfExists(value);\n          if (!layer) {\n            console.warn('layer does not exist', value);\n            return;\n          }\n          options = {\n            ...options,\n            ...layer.getNewOptions(options),\n            type: layer.id,\n          };\n        } else {\n          options = setOptionImmutably(options, path, value);\n        }\n        opts.element.onChange(options);\n        opts.element.updateData(opts.scene.context);\n      },\n    }),\n\n    // Dynamically fill the selected element\n    build: (builder, context) => {\n      const { options } = opts.element;\n      const current = options?.type ? options.type : DEFAULT_CANVAS_ELEMENT_CONFIG.type;\n      const layerTypes = getElementTypes(opts.scene.shouldShowAdvancedTypes, current).options;\n\n      const isUnsupported =\n        !opts.scene.shouldShowAdvancedTypes && !defaultElementItems.filter((item) => item.id === options?.type).length;\n\n      builder.addSelect({\n        path: 'type',\n        name: undefined as any, // required, but hide space\n        settings: {\n          options: layerTypes,\n        },\n        description: isUnsupported\n          ? 'Selected element type is not supported by current settings. Please enable advanced element types.'\n          : '',\n      });\n\n      // force clean layer configuration\n      const layer = canvasElementRegistry.getIfExists(options?.type ?? DEFAULT_CANVAS_ELEMENT_CONFIG.type)!;\n      let currentOptions = options;\n      if (!currentOptions) {\n        currentOptions = {\n          ...layer.getNewOptions(options),\n          type: layer.id,\n          name: `Element ${Date.now()}.${Math.floor(Math.random() * 100)}`,\n        };\n      }\n      const ctx = { ...context, options: currentOptions };\n\n      if (layer?.registerOptionsUI) {\n        layer.registerOptionsUI(builder, ctx);\n      }\n\n      const shouldAddLayoutEditor = opts.element.item.standardEditorConfig?.layout ?? true;\n      if (shouldAddLayoutEditor) {\n        builder.addCustomEditor({\n          category: ['Layout'],\n          id: 'content',\n          path: '__', // not used\n          name: 'Quick placement',\n          editor: PlacementEditor,\n          settings: opts,\n        });\n      }\n\n      const shouldAddBackgroundEditor = opts.element.item.standardEditorConfig?.background ?? true;\n      if (shouldAddBackgroundEditor) {\n        optionBuilder.addBackground(builder, ctx);\n      }\n\n      const shouldAddBorderEditor = opts.element.item.standardEditorConfig?.border ?? true;\n      if (shouldAddBorderEditor) {\n        optionBuilder.addBorder(builder, ctx);\n      }\n    },\n  };\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}","/**\n * Webpack has bug for import loop, which is not the same behavior as ES module.\n * When util.js imports the TreeNode for tree generate will cause treeContextTypes be empty.\n */\nimport * as React from 'react';\nexport var TreeContext = /*#__PURE__*/React.createContext(null);","import * as React from 'react';\nexport default function DropIndicator(_ref) {\n  var dropPosition = _ref.dropPosition,\n    dropLevelOffset = _ref.dropLevelOffset,\n    indent = _ref.indent;\n  var style = {\n    pointerEvents: 'none',\n    position: 'absolute',\n    right: 0,\n    backgroundColor: 'red',\n    height: 2\n  };\n  switch (dropPosition) {\n    case -1:\n      style.top = 0;\n      style.left = -dropLevelOffset * indent;\n      break;\n    case 1:\n      style.bottom = 0;\n      style.left = -dropLevelOffset * indent;\n      break;\n    case 0:\n      style.bottom = 0;\n      style.left = indent;\n      break;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  });\n}","export default function _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure \" + obj);\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nvar Indent = function Indent(_ref) {\n  var prefixCls = _ref.prefixCls,\n    level = _ref.level,\n    isStart = _ref.isStart,\n    isEnd = _ref.isEnd;\n  var baseClassName = \"\".concat(prefixCls, \"-indent-unit\");\n  var list = [];\n  for (var i = 0; i < level; i += 1) {\n    list.push( /*#__PURE__*/React.createElement(\"span\", {\n      key: i,\n      className: classNames(baseClassName, _defineProperty(_defineProperty({}, \"\".concat(baseClassName, \"-start\"), isStart[i]), \"\".concat(baseClassName, \"-end\"), isEnd[i]))\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-indent\")\n  }, list);\n};\nexport default /*#__PURE__*/React.memo(Indent);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"eventKey\", \"className\", \"style\", \"dragOver\", \"dragOverGapTop\", \"dragOverGapBottom\", \"isLeaf\", \"isStart\", \"isEnd\", \"expanded\", \"selected\", \"checked\", \"halfChecked\", \"loading\", \"domRef\", \"active\", \"data\", \"onMouseMove\", \"selectable\"];\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport * as React from 'react';\n// @ts-ignore\nimport { TreeContext } from \"./contextTypes\";\nimport Indent from \"./Indent\";\nimport getEntity from \"./utils/keyUtil\";\nimport { convertNodePropsToEventData } from \"./utils/treeUtil\";\nvar ICON_OPEN = 'open';\nvar ICON_CLOSE = 'close';\nvar defaultTitle = '---';\nvar InternalTreeNode = /*#__PURE__*/function (_React$Component) {\n  _inherits(InternalTreeNode, _React$Component);\n  var _super = _createSuper(InternalTreeNode);\n  function InternalTreeNode() {\n    var _this;\n    _classCallCheck(this, InternalTreeNode);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      dragNodeHighlight: false\n    });\n    _defineProperty(_assertThisInitialized(_this), \"selectHandle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"cacheIndent\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorClick\", function (e) {\n      // Click trigger before select/check operation\n      var onNodeClick = _this.props.context.onNodeClick;\n      onNodeClick(e, convertNodePropsToEventData(_this.props));\n      if (_this.isSelectable()) {\n        _this.onSelect(e);\n      } else {\n        _this.onCheck(e);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorDoubleClick\", function (e) {\n      var onNodeDoubleClick = _this.props.context.onNodeDoubleClick;\n      onNodeDoubleClick(e, convertNodePropsToEventData(_this.props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onSelect\", function (e) {\n      if (_this.isDisabled()) return;\n      var onNodeSelect = _this.props.context.onNodeSelect;\n      onNodeSelect(e, convertNodePropsToEventData(_this.props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCheck\", function (e) {\n      if (_this.isDisabled()) return;\n      var _this$props = _this.props,\n        disableCheckbox = _this$props.disableCheckbox,\n        checked = _this$props.checked;\n      var onNodeCheck = _this.props.context.onNodeCheck;\n      if (!_this.isCheckable() || disableCheckbox) return;\n      var targetChecked = !checked;\n      onNodeCheck(e, convertNodePropsToEventData(_this.props), targetChecked);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseEnter\", function (e) {\n      var onNodeMouseEnter = _this.props.context.onNodeMouseEnter;\n      onNodeMouseEnter(e, convertNodePropsToEventData(_this.props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseLeave\", function (e) {\n      var onNodeMouseLeave = _this.props.context.onNodeMouseLeave;\n      onNodeMouseLeave(e, convertNodePropsToEventData(_this.props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onContextMenu\", function (e) {\n      var onNodeContextMenu = _this.props.context.onNodeContextMenu;\n      onNodeContextMenu(e, convertNodePropsToEventData(_this.props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragStart\", function (e) {\n      var onNodeDragStart = _this.props.context.onNodeDragStart;\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: true\n      });\n      onNodeDragStart(e, _assertThisInitialized(_this));\n      try {\n        // ie throw error\n        // firefox-need-it\n        e.dataTransfer.setData('text/plain', '');\n      } catch (error) {\n        // empty\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnter\", function (e) {\n      var onNodeDragEnter = _this.props.context.onNodeDragEnter;\n      e.preventDefault();\n      e.stopPropagation();\n      onNodeDragEnter(e, _assertThisInitialized(_this));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragOver\", function (e) {\n      var onNodeDragOver = _this.props.context.onNodeDragOver;\n      e.preventDefault();\n      e.stopPropagation();\n      onNodeDragOver(e, _assertThisInitialized(_this));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragLeave\", function (e) {\n      var onNodeDragLeave = _this.props.context.onNodeDragLeave;\n      e.stopPropagation();\n      onNodeDragLeave(e, _assertThisInitialized(_this));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnd\", function (e) {\n      var onNodeDragEnd = _this.props.context.onNodeDragEnd;\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: false\n      });\n      onNodeDragEnd(e, _assertThisInitialized(_this));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDrop\", function (e) {\n      var onNodeDrop = _this.props.context.onNodeDrop;\n      e.preventDefault();\n      e.stopPropagation();\n      _this.setState({\n        dragNodeHighlight: false\n      });\n      onNodeDrop(e, _assertThisInitialized(_this));\n    });\n    // Disabled item still can be switch\n    _defineProperty(_assertThisInitialized(_this), \"onExpand\", function (e) {\n      var _this$props2 = _this.props,\n        loading = _this$props2.loading,\n        onNodeExpand = _this$props2.context.onNodeExpand;\n      if (loading) return;\n      onNodeExpand(e, convertNodePropsToEventData(_this.props));\n    });\n    // Drag usage\n    _defineProperty(_assertThisInitialized(_this), \"setSelectHandle\", function (node) {\n      _this.selectHandle = node;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getNodeState\", function () {\n      var expanded = _this.props.expanded;\n      if (_this.isLeaf()) {\n        return null;\n      }\n      return expanded ? ICON_OPEN : ICON_CLOSE;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"hasChildren\", function () {\n      var eventKey = _this.props.eventKey;\n      var keyEntities = _this.props.context.keyEntities;\n      var _ref = getEntity(keyEntities, eventKey) || {},\n        children = _ref.children;\n      return !!(children || []).length;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isLeaf\", function () {\n      var _this$props3 = _this.props,\n        isLeaf = _this$props3.isLeaf,\n        loaded = _this$props3.loaded;\n      var loadData = _this.props.context.loadData;\n      var hasChildren = _this.hasChildren();\n      if (isLeaf === false) {\n        return false;\n      }\n      return isLeaf || !loadData && !hasChildren || loadData && loaded && !hasChildren;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isDisabled\", function () {\n      var disabled = _this.props.disabled;\n      var treeDisabled = _this.props.context.disabled;\n      return !!(treeDisabled || disabled);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isCheckable\", function () {\n      var checkable = _this.props.checkable;\n      var treeCheckable = _this.props.context.checkable;\n\n      // Return false if tree or treeNode is not checkable\n      if (!treeCheckable || checkable === false) return false;\n      return treeCheckable;\n    });\n    // Load data to avoid default expanded tree without data\n    _defineProperty(_assertThisInitialized(_this), \"syncLoadData\", function (props) {\n      var expanded = props.expanded,\n        loading = props.loading,\n        loaded = props.loaded;\n      var _this$props$context = _this.props.context,\n        loadData = _this$props$context.loadData,\n        onNodeLoad = _this$props$context.onNodeLoad;\n      if (loading) {\n        return;\n      }\n\n      // read from state to avoid loadData at same time\n      if (loadData && expanded && !_this.isLeaf()) {\n        // We needn't reload data when has children in sync logic\n        // It's only needed in node expanded\n        if (!_this.hasChildren() && !loaded) {\n          onNodeLoad(convertNodePropsToEventData(_this.props));\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isDraggable\", function () {\n      var _this$props4 = _this.props,\n        data = _this$props4.data,\n        draggable = _this$props4.context.draggable;\n      return !!(draggable && (!draggable.nodeDraggable || draggable.nodeDraggable(data)));\n    });\n    // ==================== Render: Drag Handler ====================\n    _defineProperty(_assertThisInitialized(_this), \"renderDragHandler\", function () {\n      var _this$props$context2 = _this.props.context,\n        draggable = _this$props$context2.draggable,\n        prefixCls = _this$props$context2.prefixCls;\n      return draggable !== null && draggable !== void 0 && draggable.icon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-draggable-icon\")\n      }, draggable.icon) : null;\n    });\n    // ====================== Render: Switcher ======================\n    _defineProperty(_assertThisInitialized(_this), \"renderSwitcherIconDom\", function (isLeaf) {\n      var switcherIconFromProps = _this.props.switcherIcon;\n      var switcherIconFromCtx = _this.props.context.switcherIcon;\n      var switcherIcon = switcherIconFromProps || switcherIconFromCtx;\n      // if switcherIconDom is null, no render switcher span\n      if (typeof switcherIcon === 'function') {\n        return switcherIcon(_objectSpread(_objectSpread({}, _this.props), {}, {\n          isLeaf: isLeaf\n        }));\n      }\n      return switcherIcon;\n    });\n    // Switcher\n    _defineProperty(_assertThisInitialized(_this), \"renderSwitcher\", function () {\n      var expanded = _this.props.expanded;\n      var prefixCls = _this.props.context.prefixCls;\n      if (_this.isLeaf()) {\n        // if switcherIconDom is null, no render switcher span\n        var _switcherIconDom = _this.renderSwitcherIconDom(true);\n        return _switcherIconDom !== false ? /*#__PURE__*/React.createElement(\"span\", {\n          className: classNames(\"\".concat(prefixCls, \"-switcher\"), \"\".concat(prefixCls, \"-switcher-noop\"))\n        }, _switcherIconDom) : null;\n      }\n      var switcherCls = classNames(\"\".concat(prefixCls, \"-switcher\"), \"\".concat(prefixCls, \"-switcher_\").concat(expanded ? ICON_OPEN : ICON_CLOSE));\n      var switcherIconDom = _this.renderSwitcherIconDom(false);\n      return switcherIconDom !== false ? /*#__PURE__*/React.createElement(\"span\", {\n        onClick: _this.onExpand,\n        className: switcherCls\n      }, switcherIconDom) : null;\n    });\n    // ====================== Render: Checkbox ======================\n    // Checkbox\n    _defineProperty(_assertThisInitialized(_this), \"renderCheckbox\", function () {\n      var _this$props5 = _this.props,\n        checked = _this$props5.checked,\n        halfChecked = _this$props5.halfChecked,\n        disableCheckbox = _this$props5.disableCheckbox;\n      var prefixCls = _this.props.context.prefixCls;\n      var disabled = _this.isDisabled();\n      var checkable = _this.isCheckable();\n      if (!checkable) return null;\n\n      // [Legacy] Custom element should be separate with `checkable` in future\n      var $custom = typeof checkable !== 'boolean' ? checkable : null;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-checkbox\"), checked && \"\".concat(prefixCls, \"-checkbox-checked\"), !checked && halfChecked && \"\".concat(prefixCls, \"-checkbox-indeterminate\"), (disabled || disableCheckbox) && \"\".concat(prefixCls, \"-checkbox-disabled\")),\n        onClick: _this.onCheck\n      }, $custom);\n    });\n    // ==================== Render: Title + Icon ====================\n    _defineProperty(_assertThisInitialized(_this), \"renderIcon\", function () {\n      var loading = _this.props.loading;\n      var prefixCls = _this.props.context.prefixCls;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classNames(\"\".concat(prefixCls, \"-iconEle\"), \"\".concat(prefixCls, \"-icon__\").concat(_this.getNodeState() || 'docu'), loading && \"\".concat(prefixCls, \"-icon_loading\"))\n      });\n    });\n    // Icon + Title\n    _defineProperty(_assertThisInitialized(_this), \"renderSelector\", function () {\n      var dragNodeHighlight = _this.state.dragNodeHighlight;\n      var _this$props6 = _this.props,\n        _this$props6$title = _this$props6.title,\n        title = _this$props6$title === void 0 ? defaultTitle : _this$props6$title,\n        selected = _this$props6.selected,\n        icon = _this$props6.icon,\n        loading = _this$props6.loading,\n        data = _this$props6.data;\n      var _this$props$context3 = _this.props.context,\n        prefixCls = _this$props$context3.prefixCls,\n        showIcon = _this$props$context3.showIcon,\n        treeIcon = _this$props$context3.icon,\n        loadData = _this$props$context3.loadData,\n        titleRender = _this$props$context3.titleRender;\n      var disabled = _this.isDisabled();\n      var wrapClass = \"\".concat(prefixCls, \"-node-content-wrapper\");\n\n      // Icon - Still show loading icon when loading without showIcon\n      var $icon;\n      if (showIcon) {\n        var currentIcon = icon || treeIcon;\n        $icon = currentIcon ? /*#__PURE__*/React.createElement(\"span\", {\n          className: classNames(\"\".concat(prefixCls, \"-iconEle\"), \"\".concat(prefixCls, \"-icon__customize\"))\n        }, typeof currentIcon === 'function' ? currentIcon(_this.props) : currentIcon) : _this.renderIcon();\n      } else if (loadData && loading) {\n        $icon = _this.renderIcon();\n      }\n\n      // Title\n      var titleNode;\n      if (typeof title === 'function') {\n        titleNode = title(data);\n      } else if (titleRender) {\n        titleNode = titleRender(data);\n      } else {\n        titleNode = title;\n      }\n      var $title = /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-title\")\n      }, titleNode);\n      return /*#__PURE__*/React.createElement(\"span\", {\n        ref: _this.setSelectHandle,\n        title: typeof title === 'string' ? title : '',\n        className: classNames(\"\".concat(wrapClass), \"\".concat(wrapClass, \"-\").concat(_this.getNodeState() || 'normal'), !disabled && (selected || dragNodeHighlight) && \"\".concat(prefixCls, \"-node-selected\")),\n        onMouseEnter: _this.onMouseEnter,\n        onMouseLeave: _this.onMouseLeave,\n        onContextMenu: _this.onContextMenu,\n        onClick: _this.onSelectorClick,\n        onDoubleClick: _this.onSelectorDoubleClick\n      }, $icon, $title, _this.renderDropIndicator());\n    });\n    // =================== Render: Drop Indicator ===================\n    _defineProperty(_assertThisInitialized(_this), \"renderDropIndicator\", function () {\n      var _this$props7 = _this.props,\n        disabled = _this$props7.disabled,\n        eventKey = _this$props7.eventKey;\n      var _this$props$context4 = _this.props.context,\n        draggable = _this$props$context4.draggable,\n        dropLevelOffset = _this$props$context4.dropLevelOffset,\n        dropPosition = _this$props$context4.dropPosition,\n        prefixCls = _this$props$context4.prefixCls,\n        indent = _this$props$context4.indent,\n        dropIndicatorRender = _this$props$context4.dropIndicatorRender,\n        dragOverNodeKey = _this$props$context4.dragOverNodeKey,\n        direction = _this$props$context4.direction;\n      var rootDraggable = !!draggable;\n      // allowDrop is calculated in Tree.tsx, there is no need for calc it here\n      var showIndicator = !disabled && rootDraggable && dragOverNodeKey === eventKey;\n\n      // This is a hot fix which is already fixed in\n      // https://github.com/react-component/tree/pull/743/files\n      // But some case need break point so we hack on this\n      // ref https://github.com/ant-design/ant-design/issues/43493\n      var mergedIndent = indent !== null && indent !== void 0 ? indent : _this.cacheIndent;\n      _this.cacheIndent = indent;\n      return showIndicator ? dropIndicatorRender({\n        dropPosition: dropPosition,\n        dropLevelOffset: dropLevelOffset,\n        indent: mergedIndent,\n        prefixCls: prefixCls,\n        direction: direction\n      }) : null;\n    });\n    return _this;\n  }\n  _createClass(InternalTreeNode, [{\n    key: \"componentDidMount\",\n    value:\n    // Isomorphic needn't load data in server side\n    function componentDidMount() {\n      this.syncLoadData(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.syncLoadData(this.props);\n    }\n  }, {\n    key: \"isSelectable\",\n    value: function isSelectable() {\n      var selectable = this.props.selectable;\n      var treeSelectable = this.props.context.selectable;\n\n      // Ignore when selectable is undefined or null\n      if (typeof selectable === 'boolean') {\n        return selectable;\n      }\n      return treeSelectable;\n    }\n  }, {\n    key: \"render\",\n    value:\n    // =========================== Render ===========================\n    function render() {\n      var _classNames;\n      var _this$props8 = this.props,\n        eventKey = _this$props8.eventKey,\n        className = _this$props8.className,\n        style = _this$props8.style,\n        dragOver = _this$props8.dragOver,\n        dragOverGapTop = _this$props8.dragOverGapTop,\n        dragOverGapBottom = _this$props8.dragOverGapBottom,\n        isLeaf = _this$props8.isLeaf,\n        isStart = _this$props8.isStart,\n        isEnd = _this$props8.isEnd,\n        expanded = _this$props8.expanded,\n        selected = _this$props8.selected,\n        checked = _this$props8.checked,\n        halfChecked = _this$props8.halfChecked,\n        loading = _this$props8.loading,\n        domRef = _this$props8.domRef,\n        active = _this$props8.active,\n        data = _this$props8.data,\n        onMouseMove = _this$props8.onMouseMove,\n        selectable = _this$props8.selectable,\n        otherProps = _objectWithoutProperties(_this$props8, _excluded);\n      var _this$props$context5 = this.props.context,\n        prefixCls = _this$props$context5.prefixCls,\n        filterTreeNode = _this$props$context5.filterTreeNode,\n        keyEntities = _this$props$context5.keyEntities,\n        dropContainerKey = _this$props$context5.dropContainerKey,\n        dropTargetKey = _this$props$context5.dropTargetKey,\n        draggingNodeKey = _this$props$context5.draggingNodeKey;\n      var disabled = this.isDisabled();\n      var dataOrAriaAttributeProps = pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      });\n      var _ref2 = getEntity(keyEntities, eventKey) || {},\n        level = _ref2.level;\n      var isEndNode = isEnd[isEnd.length - 1];\n      var mergedDraggable = this.isDraggable();\n      var draggableWithoutDisabled = !disabled && mergedDraggable;\n      var dragging = draggingNodeKey === eventKey;\n      var ariaSelected = selectable !== undefined ? {\n        'aria-selected': !!selectable\n      } : undefined;\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: domRef,\n        className: classNames(className, \"\".concat(prefixCls, \"-treenode\"), (_classNames = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_classNames, \"\".concat(prefixCls, \"-treenode-disabled\"), disabled), \"\".concat(prefixCls, \"-treenode-switcher-\").concat(expanded ? 'open' : 'close'), !isLeaf), \"\".concat(prefixCls, \"-treenode-checkbox-checked\"), checked), \"\".concat(prefixCls, \"-treenode-checkbox-indeterminate\"), halfChecked), \"\".concat(prefixCls, \"-treenode-selected\"), selected), \"\".concat(prefixCls, \"-treenode-loading\"), loading), \"\".concat(prefixCls, \"-treenode-active\"), active), \"\".concat(prefixCls, \"-treenode-leaf-last\"), isEndNode), \"\".concat(prefixCls, \"-treenode-draggable\"), mergedDraggable), \"dragging\", dragging), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_classNames, 'drop-target', dropTargetKey === eventKey), 'drop-container', dropContainerKey === eventKey), 'drag-over', !disabled && dragOver), 'drag-over-gap-top', !disabled && dragOverGapTop), 'drag-over-gap-bottom', !disabled && dragOverGapBottom), 'filter-node', filterTreeNode && filterTreeNode(convertNodePropsToEventData(this.props))))),\n        style: style\n        // Draggable config\n        ,\n        draggable: draggableWithoutDisabled,\n        \"aria-grabbed\": dragging,\n        onDragStart: draggableWithoutDisabled ? this.onDragStart : undefined\n        // Drop config\n        ,\n        onDragEnter: mergedDraggable ? this.onDragEnter : undefined,\n        onDragOver: mergedDraggable ? this.onDragOver : undefined,\n        onDragLeave: mergedDraggable ? this.onDragLeave : undefined,\n        onDrop: mergedDraggable ? this.onDrop : undefined,\n        onDragEnd: mergedDraggable ? this.onDragEnd : undefined,\n        onMouseMove: onMouseMove\n      }, ariaSelected, dataOrAriaAttributeProps), /*#__PURE__*/React.createElement(Indent, {\n        prefixCls: prefixCls,\n        level: level,\n        isStart: isStart,\n        isEnd: isEnd\n      }), this.renderDragHandler(), this.renderSwitcher(), this.renderCheckbox(), this.renderSelector());\n    }\n  }]);\n  return InternalTreeNode;\n}(React.Component);\nvar ContextTreeNode = function ContextTreeNode(props) {\n  return /*#__PURE__*/React.createElement(TreeContext.Consumer, null, function (context) {\n    return /*#__PURE__*/React.createElement(InternalTreeNode, _extends({}, props, {\n      context: context\n    }));\n  });\n};\nContextTreeNode.displayName = 'TreeNode';\nContextTreeNode.isTreeNode = 1;\nexport default ContextTreeNode;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\n\n/**\n * Trigger only when component unmount\n */\nexport default function useUnmount(triggerStart, triggerEnd) {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    firstMount = _React$useState2[0],\n    setFirstMount = _React$useState2[1];\n  useLayoutEffect(function () {\n    if (firstMount) {\n      triggerStart();\n      return function () {\n        triggerEnd();\n      };\n    }\n  }, [firstMount]);\n  useLayoutEffect(function () {\n    setFirstMount(true);\n    return function () {\n      setFirstMount(false);\n    };\n  }, []);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"className\", \"style\", \"motion\", \"motionNodes\", \"motionType\", \"onMotionStart\", \"onMotionEnd\", \"active\", \"treeNodeRequiredProps\"];\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { TreeContext } from \"./contextTypes\";\nimport TreeNode from \"./TreeNode\";\nimport useUnmount from \"./useUnmount\";\nimport { getTreeNodeProps } from \"./utils/treeUtil\";\nvar MotionTreeNode = function MotionTreeNode(_ref, ref) {\n  var className = _ref.className,\n    style = _ref.style,\n    motion = _ref.motion,\n    motionNodes = _ref.motionNodes,\n    motionType = _ref.motionType,\n    onOriginMotionStart = _ref.onMotionStart,\n    onOriginMotionEnd = _ref.onMotionEnd,\n    active = _ref.active,\n    treeNodeRequiredProps = _ref.treeNodeRequiredProps,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    visible = _React$useState2[0],\n    setVisible = _React$useState2[1];\n  var _React$useContext = React.useContext(TreeContext),\n    prefixCls = _React$useContext.prefixCls;\n\n  // Calculate target visible here.\n  // And apply in effect to make `leave` motion work.\n  var targetVisible = motionNodes && motionType !== 'hide';\n  useLayoutEffect(function () {\n    if (motionNodes) {\n      if (targetVisible !== visible) {\n        setVisible(targetVisible);\n      }\n    }\n  }, [motionNodes]);\n  var triggerMotionStart = function triggerMotionStart() {\n    if (motionNodes) {\n      onOriginMotionStart();\n    }\n  };\n\n  // Should only trigger once\n  var triggerMotionEndRef = React.useRef(false);\n  var triggerMotionEnd = function triggerMotionEnd() {\n    if (motionNodes && !triggerMotionEndRef.current) {\n      triggerMotionEndRef.current = true;\n      onOriginMotionEnd();\n    }\n  };\n\n  // Effect if unmount\n  useUnmount(triggerMotionStart, triggerMotionEnd);\n\n  // Motion end event\n  var onVisibleChanged = function onVisibleChanged(nextVisible) {\n    if (targetVisible === nextVisible) {\n      triggerMotionEnd();\n    }\n  };\n  if (motionNodes) {\n    return /*#__PURE__*/React.createElement(CSSMotion, _extends({\n      ref: ref,\n      visible: visible\n    }, motion, {\n      motionAppear: motionType === 'show',\n      onVisibleChanged: onVisibleChanged\n    }), function (_ref2, motionRef) {\n      var motionClassName = _ref2.className,\n        motionStyle = _ref2.style;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: motionRef,\n        className: classNames(\"\".concat(prefixCls, \"-treenode-motion\"), motionClassName),\n        style: motionStyle\n      }, motionNodes.map(function (treeNode) {\n        var restProps = Object.assign({}, (_objectDestructuringEmpty(treeNode.data), treeNode.data)),\n          title = treeNode.title,\n          key = treeNode.key,\n          isStart = treeNode.isStart,\n          isEnd = treeNode.isEnd;\n        delete restProps.children;\n        var treeNodeProps = getTreeNodeProps(key, treeNodeRequiredProps);\n        return /*#__PURE__*/React.createElement(TreeNode, _extends({}, restProps, treeNodeProps, {\n          title: title,\n          active: active,\n          data: treeNode.data,\n          key: key,\n          isStart: isStart,\n          isEnd: isEnd\n        }));\n      }));\n    });\n  }\n  return /*#__PURE__*/React.createElement(TreeNode, _extends({\n    domRef: ref,\n    className: className,\n    style: style\n  }, props, {\n    active: active\n  }));\n};\nMotionTreeNode.displayName = 'MotionTreeNode';\nvar RefMotionTreeNode = /*#__PURE__*/React.forwardRef(MotionTreeNode);\nexport default RefMotionTreeNode;","export function findExpandedKeys() {\n  var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var prevLen = prev.length;\n  var nextLen = next.length;\n  if (Math.abs(prevLen - nextLen) !== 1) {\n    return {\n      add: false,\n      key: null\n    };\n  }\n  function find(shorter, longer) {\n    var cache = new Map();\n    shorter.forEach(function (key) {\n      cache.set(key, true);\n    });\n    var keys = longer.filter(function (key) {\n      return !cache.has(key);\n    });\n    return keys.length === 1 ? keys[0] : null;\n  }\n  if (prevLen < nextLen) {\n    return {\n      add: true,\n      key: find(prev, next)\n    };\n  }\n  return {\n    add: false,\n    key: find(next, prev)\n  };\n}\nexport function getExpandRange(shorter, longer, key) {\n  var shorterStartIndex = shorter.findIndex(function (data) {\n    return data.key === key;\n  });\n  var shorterEndNode = shorter[shorterStartIndex + 1];\n  var longerStartIndex = longer.findIndex(function (data) {\n    return data.key === key;\n  });\n  if (shorterEndNode) {\n    var longerEndIndex = longer.findIndex(function (data) {\n      return data.key === shorterEndNode.key;\n    });\n    return longer.slice(longerStartIndex + 1, longerEndIndex);\n  }\n  return longer.slice(longerStartIndex + 1);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"data\", \"selectable\", \"checkable\", \"expandedKeys\", \"selectedKeys\", \"checkedKeys\", \"loadedKeys\", \"loadingKeys\", \"halfCheckedKeys\", \"keyEntities\", \"disabled\", \"dragging\", \"dragOverNodeKey\", \"dropPosition\", \"motion\", \"height\", \"itemHeight\", \"virtual\", \"focusable\", \"activeItem\", \"focused\", \"tabIndex\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onActiveChange\", \"onListChangeStart\", \"onListChangeEnd\"];\n/**\n * Handle virtual list of the TreeNodes.\n */\n\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport VirtualList from 'rc-virtual-list';\nimport * as React from 'react';\nimport MotionTreeNode from \"./MotionTreeNode\";\nimport { findExpandedKeys, getExpandRange } from \"./utils/diffUtil\";\nimport { getKey, getTreeNodeProps } from \"./utils/treeUtil\";\nvar HIDDEN_STYLE = {\n  width: 0,\n  height: 0,\n  display: 'flex',\n  overflow: 'hidden',\n  opacity: 0,\n  border: 0,\n  padding: 0,\n  margin: 0\n};\nvar noop = function noop() {};\nexport var MOTION_KEY = \"RC_TREE_MOTION_\".concat(Math.random());\nvar MotionNode = {\n  key: MOTION_KEY\n};\nexport var MotionEntity = {\n  key: MOTION_KEY,\n  level: 0,\n  index: 0,\n  pos: '0',\n  node: MotionNode,\n  nodes: [MotionNode]\n};\nvar MotionFlattenData = {\n  parent: null,\n  children: [],\n  pos: MotionEntity.pos,\n  data: MotionNode,\n  title: null,\n  key: MOTION_KEY,\n  /** Hold empty list here since we do not use it */\n  isStart: [],\n  isEnd: []\n};\n/**\n * We only need get visible content items to play the animation.\n */\nexport function getMinimumRangeTransitionRange(list, virtual, height, itemHeight) {\n  if (virtual === false || !height) {\n    return list;\n  }\n  return list.slice(0, Math.ceil(height / itemHeight) + 1);\n}\nfunction itemKey(item) {\n  var key = item.key,\n    pos = item.pos;\n  return getKey(key, pos);\n}\nfunction getAccessibilityPath(item) {\n  var path = String(item.data.key);\n  var current = item;\n  while (current.parent) {\n    current = current.parent;\n    path = \"\".concat(current.data.key, \" > \").concat(path);\n  }\n  return path;\n}\nvar NodeList = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    data = props.data,\n    selectable = props.selectable,\n    checkable = props.checkable,\n    expandedKeys = props.expandedKeys,\n    selectedKeys = props.selectedKeys,\n    checkedKeys = props.checkedKeys,\n    loadedKeys = props.loadedKeys,\n    loadingKeys = props.loadingKeys,\n    halfCheckedKeys = props.halfCheckedKeys,\n    keyEntities = props.keyEntities,\n    disabled = props.disabled,\n    dragging = props.dragging,\n    dragOverNodeKey = props.dragOverNodeKey,\n    dropPosition = props.dropPosition,\n    motion = props.motion,\n    height = props.height,\n    itemHeight = props.itemHeight,\n    virtual = props.virtual,\n    focusable = props.focusable,\n    activeItem = props.activeItem,\n    focused = props.focused,\n    tabIndex = props.tabIndex,\n    onKeyDown = props.onKeyDown,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    onActiveChange = props.onActiveChange,\n    onListChangeStart = props.onListChangeStart,\n    onListChangeEnd = props.onListChangeEnd,\n    domProps = _objectWithoutProperties(props, _excluded);\n\n  // =============================== Ref ================================\n  var listRef = React.useRef(null);\n  var indentMeasurerRef = React.useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      scrollTo: function scrollTo(scroll) {\n        listRef.current.scrollTo(scroll);\n      },\n      getIndentWidth: function getIndentWidth() {\n        return indentMeasurerRef.current.offsetWidth;\n      }\n    };\n  });\n\n  // ============================== Motion ==============================\n  var _React$useState = React.useState(expandedKeys),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    prevExpandedKeys = _React$useState2[0],\n    setPrevExpandedKeys = _React$useState2[1];\n  var _React$useState3 = React.useState(data),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    prevData = _React$useState4[0],\n    setPrevData = _React$useState4[1];\n  var _React$useState5 = React.useState(data),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    transitionData = _React$useState6[0],\n    setTransitionData = _React$useState6[1];\n  var _React$useState7 = React.useState([]),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    transitionRange = _React$useState8[0],\n    setTransitionRange = _React$useState8[1];\n  var _React$useState9 = React.useState(null),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    motionType = _React$useState10[0],\n    setMotionType = _React$useState10[1];\n\n  // When motion end but data change, this will makes data back to previous one\n  var dataRef = React.useRef(data);\n  dataRef.current = data;\n  function onMotionEnd() {\n    var latestData = dataRef.current;\n    setPrevData(latestData);\n    setTransitionData(latestData);\n    setTransitionRange([]);\n    setMotionType(null);\n    onListChangeEnd();\n  }\n\n  // Do animation if expanded keys changed\n  // layoutEffect here to avoid blink of node removing\n  useLayoutEffect(function () {\n    setPrevExpandedKeys(expandedKeys);\n    var diffExpanded = findExpandedKeys(prevExpandedKeys, expandedKeys);\n    if (diffExpanded.key !== null) {\n      if (diffExpanded.add) {\n        var keyIndex = prevData.findIndex(function (_ref) {\n          var key = _ref.key;\n          return key === diffExpanded.key;\n        });\n        var rangeNodes = getMinimumRangeTransitionRange(getExpandRange(prevData, data, diffExpanded.key), virtual, height, itemHeight);\n        var newTransitionData = prevData.slice();\n        newTransitionData.splice(keyIndex + 1, 0, MotionFlattenData);\n        setTransitionData(newTransitionData);\n        setTransitionRange(rangeNodes);\n        setMotionType('show');\n      } else {\n        var _keyIndex = data.findIndex(function (_ref2) {\n          var key = _ref2.key;\n          return key === diffExpanded.key;\n        });\n        var _rangeNodes = getMinimumRangeTransitionRange(getExpandRange(data, prevData, diffExpanded.key), virtual, height, itemHeight);\n        var _newTransitionData = data.slice();\n        _newTransitionData.splice(_keyIndex + 1, 0, MotionFlattenData);\n        setTransitionData(_newTransitionData);\n        setTransitionRange(_rangeNodes);\n        setMotionType('hide');\n      }\n    } else if (prevData !== data) {\n      // If whole data changed, we just refresh the list\n      setPrevData(data);\n      setTransitionData(data);\n    }\n  }, [expandedKeys, data]);\n\n  // We should clean up motion if is changed by dragging\n  React.useEffect(function () {\n    if (!dragging) {\n      onMotionEnd();\n    }\n  }, [dragging]);\n  var mergedData = motion ? transitionData : data;\n  var treeNodeRequiredProps = {\n    expandedKeys: expandedKeys,\n    selectedKeys: selectedKeys,\n    loadedKeys: loadedKeys,\n    loadingKeys: loadingKeys,\n    checkedKeys: checkedKeys,\n    halfCheckedKeys: halfCheckedKeys,\n    dragOverNodeKey: dragOverNodeKey,\n    dropPosition: dropPosition,\n    keyEntities: keyEntities\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, focused && activeItem && /*#__PURE__*/React.createElement(\"span\", {\n    style: HIDDEN_STYLE,\n    \"aria-live\": \"assertive\"\n  }, getAccessibilityPath(activeItem)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n    style: HIDDEN_STYLE,\n    disabled: focusable === false || disabled,\n    tabIndex: focusable !== false ? tabIndex : null,\n    onKeyDown: onKeyDown,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: \"\",\n    onChange: noop,\n    \"aria-label\": \"for screen reader\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-treenode\"),\n    \"aria-hidden\": true,\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      visibility: 'hidden',\n      height: 0,\n      overflow: 'hidden',\n      border: 0,\n      padding: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-indent\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: indentMeasurerRef,\n    className: \"\".concat(prefixCls, \"-indent-unit\")\n  }))), /*#__PURE__*/React.createElement(VirtualList, _extends({}, domProps, {\n    data: mergedData,\n    itemKey: itemKey,\n    height: height,\n    fullHeight: false,\n    virtual: virtual,\n    itemHeight: itemHeight,\n    prefixCls: \"\".concat(prefixCls, \"-list\"),\n    ref: listRef,\n    onVisibleChange: function onVisibleChange(originList, fullList) {\n      var originSet = new Set(originList);\n      var restList = fullList.filter(function (item) {\n        return !originSet.has(item);\n      });\n\n      // Motion node is not render. Skip motion\n      if (restList.some(function (item) {\n        return itemKey(item) === MOTION_KEY;\n      })) {\n        onMotionEnd();\n      }\n    }\n  }), function (treeNode) {\n    var pos = treeNode.pos,\n      restProps = Object.assign({}, (_objectDestructuringEmpty(treeNode.data), treeNode.data)),\n      title = treeNode.title,\n      key = treeNode.key,\n      isStart = treeNode.isStart,\n      isEnd = treeNode.isEnd;\n    var mergedKey = getKey(key, pos);\n    delete restProps.key;\n    delete restProps.children;\n    var treeNodeProps = getTreeNodeProps(mergedKey, treeNodeRequiredProps);\n    return /*#__PURE__*/React.createElement(MotionTreeNode, _extends({}, restProps, treeNodeProps, {\n      title: title,\n      active: !!activeItem && key === activeItem.key,\n      pos: pos,\n      data: treeNode.data,\n      isStart: isStart,\n      isEnd: isEnd,\n      motion: motion,\n      motionNodes: key === MOTION_KEY ? transitionRange : null,\n      motionType: motionType,\n      onMotionStart: onListChangeStart,\n      onMotionEnd: onMotionEnd,\n      treeNodeRequiredProps: treeNodeRequiredProps,\n      onMouseMove: function onMouseMove() {\n        onActiveChange(null);\n      }\n    }));\n  }));\n});\nNodeList.displayName = 'NodeList';\nexport default NodeList;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\"];\n/* eslint-disable no-lonely-if */\n/**\n * Legacy code. Should avoid to use if you are new to import these code.\n */\n\nimport warning from \"rc-util/es/warning\";\nimport React from 'react';\nimport TreeNode from \"./TreeNode\";\nimport getEntity from \"./utils/keyUtil\";\nexport { getPosition, isTreeNode } from \"./utils/treeUtil\";\nexport function arrDel(list, value) {\n  if (!list) return [];\n  var clone = list.slice();\n  var index = clone.indexOf(value);\n  if (index >= 0) {\n    clone.splice(index, 1);\n  }\n  return clone;\n}\nexport function arrAdd(list, value) {\n  var clone = (list || []).slice();\n  if (clone.indexOf(value) === -1) {\n    clone.push(value);\n  }\n  return clone;\n}\nexport function posToArr(pos) {\n  return pos.split('-');\n}\nexport function getDragChildrenKeys(dragNodeKey, keyEntities) {\n  // not contains self\n  // self for left or right drag\n  var dragChildrenKeys = [];\n  var entity = getEntity(keyEntities, dragNodeKey);\n  function dig() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    list.forEach(function (_ref) {\n      var key = _ref.key,\n        children = _ref.children;\n      dragChildrenKeys.push(key);\n      dig(children);\n    });\n  }\n  dig(entity.children);\n  return dragChildrenKeys;\n}\nexport function isLastChild(treeNodeEntity) {\n  if (treeNodeEntity.parent) {\n    var posArr = posToArr(treeNodeEntity.pos);\n    return Number(posArr[posArr.length - 1]) === treeNodeEntity.parent.children.length - 1;\n  }\n  return false;\n}\nexport function isFirstChild(treeNodeEntity) {\n  var posArr = posToArr(treeNodeEntity.pos);\n  return Number(posArr[posArr.length - 1]) === 0;\n}\n\n// Only used when drag, not affect SSR.\nexport function calcDropPosition(event, dragNode, targetNode, indent, startMousePosition, allowDrop, flattenedNodes, keyEntities, expandKeys, direction) {\n  var _abstractDropNodeEnti;\n  var clientX = event.clientX,\n    clientY = event.clientY;\n  var _getBoundingClientRec = event.target.getBoundingClientRect(),\n    top = _getBoundingClientRec.top,\n    height = _getBoundingClientRec.height;\n  // optional chain for testing\n  var horizontalMouseOffset = (direction === 'rtl' ? -1 : 1) * (((startMousePosition === null || startMousePosition === void 0 ? void 0 : startMousePosition.x) || 0) - clientX);\n  var rawDropLevelOffset = (horizontalMouseOffset - 12) / indent;\n\n  // Filter the expanded keys to exclude the node that not has children currently (like async nodes).\n  var filteredExpandKeys = expandKeys.filter(function (key) {\n    var _keyEntities$key;\n    return (_keyEntities$key = keyEntities[key]) === null || _keyEntities$key === void 0 || (_keyEntities$key = _keyEntities$key.children) === null || _keyEntities$key === void 0 ? void 0 : _keyEntities$key.length;\n  });\n\n  // find abstract drop node by horizontal offset\n  var abstractDropNodeEntity = getEntity(keyEntities, targetNode.props.eventKey);\n  if (clientY < top + height / 2) {\n    // first half, set abstract drop node to previous node\n    var nodeIndex = flattenedNodes.findIndex(function (flattenedNode) {\n      return flattenedNode.key === abstractDropNodeEntity.key;\n    });\n    var prevNodeIndex = nodeIndex <= 0 ? 0 : nodeIndex - 1;\n    var prevNodeKey = flattenedNodes[prevNodeIndex].key;\n    abstractDropNodeEntity = getEntity(keyEntities, prevNodeKey);\n  }\n  var initialAbstractDropNodeKey = abstractDropNodeEntity.key;\n  var abstractDragOverEntity = abstractDropNodeEntity;\n  var dragOverNodeKey = abstractDropNodeEntity.key;\n  var dropPosition = 0;\n  var dropLevelOffset = 0;\n\n  // Only allow cross level drop when dragging on a non-expanded node\n  if (!filteredExpandKeys.includes(initialAbstractDropNodeKey)) {\n    for (var i = 0; i < rawDropLevelOffset; i += 1) {\n      if (isLastChild(abstractDropNodeEntity)) {\n        abstractDropNodeEntity = abstractDropNodeEntity.parent;\n        dropLevelOffset += 1;\n      } else {\n        break;\n      }\n    }\n  }\n  var abstractDragDataNode = dragNode.props.data;\n  var abstractDropDataNode = abstractDropNodeEntity.node;\n  var dropAllowed = true;\n  if (isFirstChild(abstractDropNodeEntity) && abstractDropNodeEntity.level === 0 && clientY < top + height / 2 && allowDrop({\n    dragNode: abstractDragDataNode,\n    dropNode: abstractDropDataNode,\n    dropPosition: -1\n  }) && abstractDropNodeEntity.key === targetNode.props.eventKey) {\n    // first half of first node in first level\n    dropPosition = -1;\n  } else if ((abstractDragOverEntity.children || []).length && filteredExpandKeys.includes(dragOverNodeKey)) {\n    // drop on expanded node\n    // only allow drop inside\n    if (allowDrop({\n      dragNode: abstractDragDataNode,\n      dropNode: abstractDropDataNode,\n      dropPosition: 0\n    })) {\n      dropPosition = 0;\n    } else {\n      dropAllowed = false;\n    }\n  } else if (dropLevelOffset === 0) {\n    if (rawDropLevelOffset > -1.5) {\n      // | Node     | <- abstractDropNode\n      // | -^-===== | <- mousePosition\n      // 1. try drop after\n      // 2. do not allow drop\n      if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 1\n      })) {\n        dropPosition = 1;\n      } else {\n        dropAllowed = false;\n      }\n    } else {\n      // | Node     | <- abstractDropNode\n      // | ---==^== | <- mousePosition\n      // whether it has children or doesn't has children\n      // always\n      // 1. try drop inside\n      // 2. try drop after\n      // 3. do not allow drop\n      if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 0\n      })) {\n        dropPosition = 0;\n      } else if (allowDrop({\n        dragNode: abstractDragDataNode,\n        dropNode: abstractDropDataNode,\n        dropPosition: 1\n      })) {\n        dropPosition = 1;\n      } else {\n        dropAllowed = false;\n      }\n    }\n  } else {\n    // | Node1 | <- abstractDropNode\n    //      |  Node2  |\n    // --^--|----=====| <- mousePosition\n    // 1. try insert after Node1\n    // 2. do not allow drop\n    if (allowDrop({\n      dragNode: abstractDragDataNode,\n      dropNode: abstractDropDataNode,\n      dropPosition: 1\n    })) {\n      dropPosition = 1;\n    } else {\n      dropAllowed = false;\n    }\n  }\n  return {\n    dropPosition: dropPosition,\n    dropLevelOffset: dropLevelOffset,\n    dropTargetKey: abstractDropNodeEntity.key,\n    dropTargetPos: abstractDropNodeEntity.pos,\n    dragOverNodeKey: dragOverNodeKey,\n    dropContainerKey: dropPosition === 0 ? null : ((_abstractDropNodeEnti = abstractDropNodeEntity.parent) === null || _abstractDropNodeEnti === void 0 ? void 0 : _abstractDropNodeEnti.key) || null,\n    dropAllowed: dropAllowed\n  };\n}\n\n/**\n * Return selectedKeys according with multiple prop\n * @param selectedKeys\n * @param props\n * @returns [string]\n */\nexport function calcSelectedKeys(selectedKeys, props) {\n  if (!selectedKeys) return undefined;\n  var multiple = props.multiple;\n  if (multiple) {\n    return selectedKeys.slice();\n  }\n  if (selectedKeys.length) {\n    return [selectedKeys[0]];\n  }\n  return selectedKeys;\n}\nvar internalProcessProps = function internalProcessProps(props) {\n  return props;\n};\nexport function convertDataToTree(treeData, processor) {\n  if (!treeData) return [];\n  var _ref2 = processor || {},\n    _ref2$processProps = _ref2.processProps,\n    processProps = _ref2$processProps === void 0 ? internalProcessProps : _ref2$processProps;\n  var list = Array.isArray(treeData) ? treeData : [treeData];\n  return list.map(function (_ref3) {\n    var children = _ref3.children,\n      props = _objectWithoutProperties(_ref3, _excluded);\n    var childrenNodes = convertDataToTree(children, processor);\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      key: props.key\n    }, processProps(props)), childrenNodes);\n  });\n}\n\n/**\n * Parse `checkedKeys` to { checkedKeys, halfCheckedKeys } style\n */\nexport function parseCheckedKeys(keys) {\n  if (!keys) {\n    return null;\n  }\n\n  // Convert keys to object format\n  var keyProps;\n  if (Array.isArray(keys)) {\n    // [Legacy] Follow the api doc\n    keyProps = {\n      checkedKeys: keys,\n      halfCheckedKeys: undefined\n    };\n  } else if (_typeof(keys) === 'object') {\n    keyProps = {\n      checkedKeys: keys.checked || undefined,\n      halfCheckedKeys: keys.halfChecked || undefined\n    };\n  } else {\n    warning(false, '`checkedKeys` is not an array or an object');\n    return null;\n  }\n  return keyProps;\n}\n\n/**\n * If user use `autoExpandParent` we should get the list of parent node\n * @param keyList\n * @param keyEntities\n */\nexport function conductExpandParent(keyList, keyEntities) {\n  var expandedKeys = new Set();\n  function conductUp(key) {\n    if (expandedKeys.has(key)) return;\n    var entity = getEntity(keyEntities, key);\n    if (!entity) return;\n    expandedKeys.add(key);\n    var parent = entity.parent,\n      node = entity.node;\n    if (node.disabled) return;\n    if (parent) {\n      conductUp(parent.key);\n    }\n  }\n  (keyList || []).forEach(function (key) {\n    conductUp(key);\n  });\n  return _toConsumableArray(expandedKeys);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n// TODO: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/treeview/treeview-2/treeview-2a.html\n// Fully accessibility support\n\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { TreeContext } from \"./contextTypes\";\nimport DropIndicator from \"./DropIndicator\";\nimport NodeList, { MotionEntity, MOTION_KEY } from \"./NodeList\";\nimport TreeNode from \"./TreeNode\";\nimport { arrAdd, arrDel, calcDropPosition, calcSelectedKeys, conductExpandParent, getDragChildrenKeys, parseCheckedKeys, posToArr } from \"./util\";\nimport { conductCheck } from \"./utils/conductUtil\";\nimport getEntity from \"./utils/keyUtil\";\nimport { convertDataToEntities, convertNodePropsToEventData, convertTreeToData, fillFieldNames, flattenTreeData, getTreeNodeProps, warningWithoutKey } from \"./utils/treeUtil\";\nvar MAX_RETRY_TIMES = 10;\nvar Tree = /*#__PURE__*/function (_React$Component) {\n  _inherits(Tree, _React$Component);\n  var _super = _createSuper(Tree);\n  function Tree() {\n    var _this;\n    _classCallCheck(this, Tree);\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(_args));\n    _defineProperty(_assertThisInitialized(_this), \"destroyed\", false);\n    _defineProperty(_assertThisInitialized(_this), \"delayedDragEnterLogic\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"loadingRetryTimes\", {});\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      keyEntities: {},\n      indent: null,\n      selectedKeys: [],\n      checkedKeys: [],\n      halfCheckedKeys: [],\n      loadedKeys: [],\n      loadingKeys: [],\n      expandedKeys: [],\n      draggingNodeKey: null,\n      dragChildrenKeys: [],\n      // dropTargetKey is the key of abstract-drop-node\n      // the abstract-drop-node is the real drop node when drag and drop\n      // not the DOM drag over node\n      dropTargetKey: null,\n      dropPosition: null,\n      // the drop position of abstract-drop-node, inside 0, top -1, bottom 1\n      dropContainerKey: null,\n      // the container key of abstract-drop-node if dropPosition is -1 or 1\n      dropLevelOffset: null,\n      // the drop level offset of abstract-drag-over-node\n      dropTargetPos: null,\n      // the pos of abstract-drop-node\n      dropAllowed: true,\n      // if drop to abstract-drop-node is allowed\n      // the abstract-drag-over-node\n      // if mouse is on the bottom of top dom node or no the top of the bottom dom node\n      // abstract-drag-over-node is the top node\n      dragOverNodeKey: null,\n      treeData: [],\n      flattenNodes: [],\n      focused: false,\n      activeKey: null,\n      listChanging: false,\n      prevProps: null,\n      fieldNames: fillFieldNames()\n    });\n    _defineProperty(_assertThisInitialized(_this), \"dragStartMousePosition\", null);\n    _defineProperty(_assertThisInitialized(_this), \"dragNode\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"currentMouseOverDroppableNodeKey\", null);\n    _defineProperty(_assertThisInitialized(_this), \"listRef\", /*#__PURE__*/React.createRef());\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragStart\", function (event, node) {\n      var _this$state = _this.state,\n        expandedKeys = _this$state.expandedKeys,\n        keyEntities = _this$state.keyEntities;\n      var onDragStart = _this.props.onDragStart;\n      var eventKey = node.props.eventKey;\n      _this.dragNode = node;\n      _this.dragStartMousePosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      var newExpandedKeys = arrDel(expandedKeys, eventKey);\n      _this.setState({\n        draggingNodeKey: eventKey,\n        dragChildrenKeys: getDragChildrenKeys(eventKey, keyEntities),\n        indent: _this.listRef.current.getIndentWidth()\n      });\n      _this.setExpandedKeys(newExpandedKeys);\n      window.addEventListener('dragend', _this.onWindowDragEnd);\n      onDragStart === null || onDragStart === void 0 || onDragStart({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    /**\n     * [Legacy] Select handler is smaller than node,\n     * so that this will trigger when drag enter node or select handler.\n     * This is a little tricky if customize css without padding.\n     * Better for use mouse move event to refresh drag state.\n     * But let's just keep it to avoid event trigger logic change.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragEnter\", function (event, node) {\n      var _this$state2 = _this.state,\n        expandedKeys = _this$state2.expandedKeys,\n        keyEntities = _this$state2.keyEntities,\n        dragChildrenKeys = _this$state2.dragChildrenKeys,\n        flattenNodes = _this$state2.flattenNodes,\n        indent = _this$state2.indent;\n      var _this$props = _this.props,\n        onDragEnter = _this$props.onDragEnter,\n        onExpand = _this$props.onExpand,\n        allowDrop = _this$props.allowDrop,\n        direction = _this$props.direction;\n      var _node$props = node.props,\n        pos = _node$props.pos,\n        eventKey = _node$props.eventKey;\n      var _assertThisInitialize = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize.dragNode;\n\n      // record the key of node which is latest entered, used in dragleave event.\n      if (_this.currentMouseOverDroppableNodeKey !== eventKey) {\n        _this.currentMouseOverDroppableNodeKey = eventKey;\n      }\n      if (!dragNode) {\n        _this.resetDragState();\n        return;\n      }\n      var _calcDropPosition = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition.dropPosition,\n        dropLevelOffset = _calcDropPosition.dropLevelOffset,\n        dropTargetKey = _calcDropPosition.dropTargetKey,\n        dropContainerKey = _calcDropPosition.dropContainerKey,\n        dropTargetPos = _calcDropPosition.dropTargetPos,\n        dropAllowed = _calcDropPosition.dropAllowed,\n        dragOverNodeKey = _calcDropPosition.dragOverNodeKey;\n      if (\n      // don't allow drop inside its children\n      dragChildrenKeys.indexOf(dropTargetKey) !== -1 ||\n      // don't allow drop when drop is not allowed caculated by calcDropPosition\n      !dropAllowed) {\n        _this.resetDragState();\n        return;\n      }\n\n      // Side effect for delay drag\n      if (!_this.delayedDragEnterLogic) {\n        _this.delayedDragEnterLogic = {};\n      }\n      Object.keys(_this.delayedDragEnterLogic).forEach(function (key) {\n        clearTimeout(_this.delayedDragEnterLogic[key]);\n      });\n      if (dragNode.props.eventKey !== node.props.eventKey) {\n        // hoist expand logic here\n        // since if logic is on the bottom\n        // it will be blocked by abstract dragover node check\n        //   => if you dragenter from top, you mouse will still be consider as in the top node\n        event.persist();\n        _this.delayedDragEnterLogic[pos] = window.setTimeout(function () {\n          if (_this.state.draggingNodeKey === null) return;\n          var newExpandedKeys = _toConsumableArray(expandedKeys);\n          var entity = getEntity(keyEntities, node.props.eventKey);\n          if (entity && (entity.children || []).length) {\n            newExpandedKeys = arrAdd(expandedKeys, node.props.eventKey);\n          }\n          if (!('expandedKeys' in _this.props)) {\n            _this.setExpandedKeys(newExpandedKeys);\n          }\n          onExpand === null || onExpand === void 0 || onExpand(newExpandedKeys, {\n            node: convertNodePropsToEventData(node.props),\n            expanded: true,\n            nativeEvent: event.nativeEvent\n          });\n        }, 800);\n      }\n\n      // Skip if drag node is self\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        _this.resetDragState();\n        return;\n      }\n\n      // Update drag over node and drag state\n      _this.setState({\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        dropLevelOffset: dropLevelOffset,\n        dropTargetKey: dropTargetKey,\n        dropContainerKey: dropContainerKey,\n        dropTargetPos: dropTargetPos,\n        dropAllowed: dropAllowed\n      });\n      onDragEnter === null || onDragEnter === void 0 || onDragEnter({\n        event: event,\n        node: convertNodePropsToEventData(node.props),\n        expandedKeys: expandedKeys\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragOver\", function (event, node) {\n      var _this$state3 = _this.state,\n        dragChildrenKeys = _this$state3.dragChildrenKeys,\n        flattenNodes = _this$state3.flattenNodes,\n        keyEntities = _this$state3.keyEntities,\n        expandedKeys = _this$state3.expandedKeys,\n        indent = _this$state3.indent;\n      var _this$props2 = _this.props,\n        onDragOver = _this$props2.onDragOver,\n        allowDrop = _this$props2.allowDrop,\n        direction = _this$props2.direction;\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n        dragNode = _assertThisInitialize2.dragNode;\n      if (!dragNode) {\n        return;\n      }\n      var _calcDropPosition2 = calcDropPosition(event, dragNode, node, indent, _this.dragStartMousePosition, allowDrop, flattenNodes, keyEntities, expandedKeys, direction),\n        dropPosition = _calcDropPosition2.dropPosition,\n        dropLevelOffset = _calcDropPosition2.dropLevelOffset,\n        dropTargetKey = _calcDropPosition2.dropTargetKey,\n        dropContainerKey = _calcDropPosition2.dropContainerKey,\n        dropAllowed = _calcDropPosition2.dropAllowed,\n        dropTargetPos = _calcDropPosition2.dropTargetPos,\n        dragOverNodeKey = _calcDropPosition2.dragOverNodeKey;\n      if (dragChildrenKeys.indexOf(dropTargetKey) !== -1 || !dropAllowed) {\n        // don't allow drop inside its children\n        // don't allow drop when drop is not allowed calculated by calcDropPosition\n        return;\n      }\n\n      // Update drag position\n\n      if (dragNode.props.eventKey === dropTargetKey && dropLevelOffset === 0) {\n        if (!(_this.state.dropPosition === null && _this.state.dropLevelOffset === null && _this.state.dropTargetKey === null && _this.state.dropContainerKey === null && _this.state.dropTargetPos === null && _this.state.dropAllowed === false && _this.state.dragOverNodeKey === null)) {\n          _this.resetDragState();\n        }\n      } else if (!(dropPosition === _this.state.dropPosition && dropLevelOffset === _this.state.dropLevelOffset && dropTargetKey === _this.state.dropTargetKey && dropContainerKey === _this.state.dropContainerKey && dropTargetPos === _this.state.dropTargetPos && dropAllowed === _this.state.dropAllowed && dragOverNodeKey === _this.state.dragOverNodeKey)) {\n        _this.setState({\n          dropPosition: dropPosition,\n          dropLevelOffset: dropLevelOffset,\n          dropTargetKey: dropTargetKey,\n          dropContainerKey: dropContainerKey,\n          dropTargetPos: dropTargetPos,\n          dropAllowed: dropAllowed,\n          dragOverNodeKey: dragOverNodeKey\n        });\n      }\n      onDragOver === null || onDragOver === void 0 || onDragOver({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragLeave\", function (event, node) {\n      // if it is outside the droppable area\n      // currentMouseOverDroppableNodeKey will be updated in dragenter event when into another droppable receiver.\n      if (_this.currentMouseOverDroppableNodeKey === node.props.eventKey && !event.currentTarget.contains(event.relatedTarget)) {\n        _this.resetDragState();\n        _this.currentMouseOverDroppableNodeKey = null;\n      }\n      var onDragLeave = _this.props.onDragLeave;\n      onDragLeave === null || onDragLeave === void 0 || onDragLeave({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n    });\n    // since stopPropagation() is called in treeNode\n    // if onWindowDrag is called, whice means state is keeped, drag state should be cleared\n    _defineProperty(_assertThisInitialized(_this), \"onWindowDragEnd\", function (event) {\n      _this.onNodeDragEnd(event, null, true);\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    });\n    // if onNodeDragEnd is called, onWindowDragEnd won't be called since stopPropagation() is called\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDragEnd\", function (event, node) {\n      var onDragEnd = _this.props.onDragEnd;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      onDragEnd === null || onDragEnd === void 0 || onDragEnd({\n        event: event,\n        node: convertNodePropsToEventData(node.props)\n      });\n      _this.dragNode = null;\n      window.removeEventListener('dragend', _this.onWindowDragEnd);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDrop\", function (event, node) {\n      var _this$getActiveItem;\n      var outsideTree = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _this$state4 = _this.state,\n        dragChildrenKeys = _this$state4.dragChildrenKeys,\n        dropPosition = _this$state4.dropPosition,\n        dropTargetKey = _this$state4.dropTargetKey,\n        dropTargetPos = _this$state4.dropTargetPos,\n        dropAllowed = _this$state4.dropAllowed;\n      if (!dropAllowed) return;\n      var onDrop = _this.props.onDrop;\n      _this.setState({\n        dragOverNodeKey: null\n      });\n      _this.cleanDragState();\n      if (dropTargetKey === null) return;\n      var abstractDropNodeProps = _objectSpread(_objectSpread({}, getTreeNodeProps(dropTargetKey, _this.getTreeNodeRequiredProps())), {}, {\n        active: ((_this$getActiveItem = _this.getActiveItem()) === null || _this$getActiveItem === void 0 ? void 0 : _this$getActiveItem.key) === dropTargetKey,\n        data: getEntity(_this.state.keyEntities, dropTargetKey).node\n      });\n      var dropToChild = dragChildrenKeys.indexOf(dropTargetKey) !== -1;\n      warning(!dropToChild, \"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.\");\n      var posArr = posToArr(dropTargetPos);\n      var dropResult = {\n        event: event,\n        node: convertNodePropsToEventData(abstractDropNodeProps),\n        dragNode: _this.dragNode ? convertNodePropsToEventData(_this.dragNode.props) : null,\n        dragNodesKeys: [_this.dragNode.props.eventKey].concat(dragChildrenKeys),\n        dropToGap: dropPosition !== 0,\n        dropPosition: dropPosition + Number(posArr[posArr.length - 1])\n      };\n      if (!outsideTree) {\n        onDrop === null || onDrop === void 0 || onDrop(dropResult);\n      }\n      _this.dragNode = null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"cleanDragState\", function () {\n      var draggingNodeKey = _this.state.draggingNodeKey;\n      if (draggingNodeKey !== null) {\n        _this.setState({\n          draggingNodeKey: null,\n          dropPosition: null,\n          dropContainerKey: null,\n          dropTargetKey: null,\n          dropLevelOffset: null,\n          dropAllowed: true,\n          dragOverNodeKey: null\n        });\n      }\n      _this.dragStartMousePosition = null;\n      _this.currentMouseOverDroppableNodeKey = null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"triggerExpandActionExpand\", function (e, treeNode) {\n      var _this$state5 = _this.state,\n        expandedKeys = _this$state5.expandedKeys,\n        flattenNodes = _this$state5.flattenNodes;\n      var expanded = treeNode.expanded,\n        key = treeNode.key,\n        isLeaf = treeNode.isLeaf;\n      if (isLeaf || e.shiftKey || e.metaKey || e.ctrlKey) {\n        return;\n      }\n      var node = flattenNodes.filter(function (nodeItem) {\n        return nodeItem.key === key;\n      })[0];\n      var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(key, _this.getTreeNodeRequiredProps())), {}, {\n        data: node.data\n      }));\n      _this.setExpandedKeys(expanded ? arrDel(expandedKeys, key) : arrAdd(expandedKeys, key));\n      _this.onNodeExpand(e, eventNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeClick\", function (e, treeNode) {\n      var _this$props3 = _this.props,\n        onClick = _this$props3.onClick,\n        expandAction = _this$props3.expandAction;\n      if (expandAction === 'click') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onClick === null || onClick === void 0 || onClick(e, treeNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeDoubleClick\", function (e, treeNode) {\n      var _this$props4 = _this.props,\n        onDoubleClick = _this$props4.onDoubleClick,\n        expandAction = _this$props4.expandAction;\n      if (expandAction === 'doubleClick') {\n        _this.triggerExpandActionExpand(e, treeNode);\n      }\n      onDoubleClick === null || onDoubleClick === void 0 || onDoubleClick(e, treeNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeSelect\", function (e, treeNode) {\n      var selectedKeys = _this.state.selectedKeys;\n      var _this$state6 = _this.state,\n        keyEntities = _this$state6.keyEntities,\n        fieldNames = _this$state6.fieldNames;\n      var _this$props5 = _this.props,\n        onSelect = _this$props5.onSelect,\n        multiple = _this$props5.multiple;\n      var selected = treeNode.selected;\n      var key = treeNode[fieldNames.key];\n      var targetSelected = !selected;\n\n      // Update selected keys\n      if (!targetSelected) {\n        selectedKeys = arrDel(selectedKeys, key);\n      } else if (!multiple) {\n        selectedKeys = [key];\n      } else {\n        selectedKeys = arrAdd(selectedKeys, key);\n      }\n\n      // [Legacy] Not found related usage in doc or upper libs\n      var selectedNodes = selectedKeys.map(function (selectedKey) {\n        var entity = getEntity(keyEntities, selectedKey);\n        if (!entity) return null;\n        return entity.node;\n      }).filter(function (node) {\n        return node;\n      });\n      _this.setUncontrolledState({\n        selectedKeys: selectedKeys\n      });\n      onSelect === null || onSelect === void 0 || onSelect(selectedKeys, {\n        event: 'select',\n        selected: targetSelected,\n        node: treeNode,\n        selectedNodes: selectedNodes,\n        nativeEvent: e.nativeEvent\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeCheck\", function (e, treeNode, checked) {\n      var _this$state7 = _this.state,\n        keyEntities = _this$state7.keyEntities,\n        oriCheckedKeys = _this$state7.checkedKeys,\n        oriHalfCheckedKeys = _this$state7.halfCheckedKeys;\n      var _this$props6 = _this.props,\n        checkStrictly = _this$props6.checkStrictly,\n        onCheck = _this$props6.onCheck;\n      var key = treeNode.key;\n\n      // Prepare trigger arguments\n      var checkedObj;\n      var eventObj = {\n        event: 'check',\n        node: treeNode,\n        checked: checked,\n        nativeEvent: e.nativeEvent\n      };\n      if (checkStrictly) {\n        var checkedKeys = checked ? arrAdd(oriCheckedKeys, key) : arrDel(oriCheckedKeys, key);\n        var halfCheckedKeys = arrDel(oriHalfCheckedKeys, key);\n        checkedObj = {\n          checked: checkedKeys,\n          halfChecked: halfCheckedKeys\n        };\n        eventObj.checkedNodes = checkedKeys.map(function (checkedKey) {\n          return getEntity(keyEntities, checkedKey);\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (entity) {\n          return entity.node;\n        });\n        _this.setUncontrolledState({\n          checkedKeys: checkedKeys\n        });\n      } else {\n        // Always fill first\n        var _conductCheck = conductCheck([].concat(_toConsumableArray(oriCheckedKeys), [key]), true, keyEntities),\n          _checkedKeys = _conductCheck.checkedKeys,\n          _halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        // If remove, we do it again to correction\n        if (!checked) {\n          var keySet = new Set(_checkedKeys);\n          keySet.delete(key);\n          var _conductCheck2 = conductCheck(Array.from(keySet), {\n            checked: false,\n            halfCheckedKeys: _halfCheckedKeys\n          }, keyEntities);\n          _checkedKeys = _conductCheck2.checkedKeys;\n          _halfCheckedKeys = _conductCheck2.halfCheckedKeys;\n        }\n        checkedObj = _checkedKeys;\n\n        // [Legacy] This is used for `rc-tree-select`\n        eventObj.checkedNodes = [];\n        eventObj.checkedNodesPositions = [];\n        eventObj.halfCheckedKeys = _halfCheckedKeys;\n        _checkedKeys.forEach(function (checkedKey) {\n          var entity = getEntity(keyEntities, checkedKey);\n          if (!entity) return;\n          var node = entity.node,\n            pos = entity.pos;\n          eventObj.checkedNodes.push(node);\n          eventObj.checkedNodesPositions.push({\n            node: node,\n            pos: pos\n          });\n        });\n        _this.setUncontrolledState({\n          checkedKeys: _checkedKeys\n        }, false, {\n          halfCheckedKeys: _halfCheckedKeys\n        });\n      }\n      onCheck === null || onCheck === void 0 || onCheck(checkedObj, eventObj);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeLoad\", function (treeNode) {\n      var key = treeNode.key;\n      var loadPromise = new Promise(function (resolve, reject) {\n        // We need to get the latest state of loading/loaded keys\n        _this.setState(function (_ref) {\n          var _ref$loadedKeys = _ref.loadedKeys,\n            loadedKeys = _ref$loadedKeys === void 0 ? [] : _ref$loadedKeys,\n            _ref$loadingKeys = _ref.loadingKeys,\n            loadingKeys = _ref$loadingKeys === void 0 ? [] : _ref$loadingKeys;\n          var _this$props7 = _this.props,\n            loadData = _this$props7.loadData,\n            onLoad = _this$props7.onLoad;\n          if (!loadData || loadedKeys.indexOf(key) !== -1 || loadingKeys.indexOf(key) !== -1) {\n            return null;\n          }\n\n          // Process load data\n          var promise = loadData(treeNode);\n          promise.then(function () {\n            var currentLoadedKeys = _this.state.loadedKeys;\n            var newLoadedKeys = arrAdd(currentLoadedKeys, key);\n\n            // onLoad should trigger before internal setState to avoid `loadData` trigger twice.\n            // https://github.com/ant-design/ant-design/issues/12464\n            onLoad === null || onLoad === void 0 || onLoad(newLoadedKeys, {\n              event: 'load',\n              node: treeNode\n            });\n            _this.setUncontrolledState({\n              loadedKeys: newLoadedKeys\n            });\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n            resolve();\n          }).catch(function (e) {\n            _this.setState(function (prevState) {\n              return {\n                loadingKeys: arrDel(prevState.loadingKeys, key)\n              };\n            });\n\n            // If exceed max retry times, we give up retry\n            _this.loadingRetryTimes[key] = (_this.loadingRetryTimes[key] || 0) + 1;\n            if (_this.loadingRetryTimes[key] >= MAX_RETRY_TIMES) {\n              var currentLoadedKeys = _this.state.loadedKeys;\n              warning(false, 'Retry for `loadData` many times but still failed. No more retry.');\n              _this.setUncontrolledState({\n                loadedKeys: arrAdd(currentLoadedKeys, key)\n              });\n              resolve();\n            }\n            reject(e);\n          });\n          return {\n            loadingKeys: arrAdd(loadingKeys, key)\n          };\n        });\n      });\n\n      // Not care warning if we ignore this\n      loadPromise.catch(function () {});\n      return loadPromise;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeMouseEnter\", function (event, node) {\n      var onMouseEnter = _this.props.onMouseEnter;\n      onMouseEnter === null || onMouseEnter === void 0 || onMouseEnter({\n        event: event,\n        node: node\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeMouseLeave\", function (event, node) {\n      var onMouseLeave = _this.props.onMouseLeave;\n      onMouseLeave === null || onMouseLeave === void 0 || onMouseLeave({\n        event: event,\n        node: node\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeContextMenu\", function (event, node) {\n      var onRightClick = _this.props.onRightClick;\n      if (onRightClick) {\n        event.preventDefault();\n        onRightClick({\n          event: event,\n          node: node\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      var onFocus = _this.props.onFocus;\n      _this.setState({\n        focused: true\n      });\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      onFocus === null || onFocus === void 0 || onFocus.apply(void 0, args);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      var onBlur = _this.props.onBlur;\n      _this.setState({\n        focused: false\n      });\n      _this.onActiveChange(null);\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      onBlur === null || onBlur === void 0 || onBlur.apply(void 0, args);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getTreeNodeRequiredProps\", function () {\n      var _this$state8 = _this.state,\n        expandedKeys = _this$state8.expandedKeys,\n        selectedKeys = _this$state8.selectedKeys,\n        loadedKeys = _this$state8.loadedKeys,\n        loadingKeys = _this$state8.loadingKeys,\n        checkedKeys = _this$state8.checkedKeys,\n        halfCheckedKeys = _this$state8.halfCheckedKeys,\n        dragOverNodeKey = _this$state8.dragOverNodeKey,\n        dropPosition = _this$state8.dropPosition,\n        keyEntities = _this$state8.keyEntities;\n      return {\n        expandedKeys: expandedKeys || [],\n        selectedKeys: selectedKeys || [],\n        loadedKeys: loadedKeys || [],\n        loadingKeys: loadingKeys || [],\n        checkedKeys: checkedKeys || [],\n        halfCheckedKeys: halfCheckedKeys || [],\n        dragOverNodeKey: dragOverNodeKey,\n        dropPosition: dropPosition,\n        keyEntities: keyEntities\n      };\n    });\n    // =========================== Expanded ===========================\n    /** Set uncontrolled `expandedKeys`. This will also auto update `flattenNodes`. */\n    _defineProperty(_assertThisInitialized(_this), \"setExpandedKeys\", function (expandedKeys) {\n      var _this$state9 = _this.state,\n        treeData = _this$state9.treeData,\n        fieldNames = _this$state9.fieldNames;\n      var flattenNodes = flattenTreeData(treeData, expandedKeys, fieldNames);\n      _this.setUncontrolledState({\n        expandedKeys: expandedKeys,\n        flattenNodes: flattenNodes\n      }, true);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodeExpand\", function (e, treeNode) {\n      var expandedKeys = _this.state.expandedKeys;\n      var _this$state10 = _this.state,\n        listChanging = _this$state10.listChanging,\n        fieldNames = _this$state10.fieldNames;\n      var _this$props8 = _this.props,\n        onExpand = _this$props8.onExpand,\n        loadData = _this$props8.loadData;\n      var expanded = treeNode.expanded;\n      var key = treeNode[fieldNames.key];\n\n      // Do nothing when motion is in progress\n      if (listChanging) {\n        return;\n      }\n\n      // Update selected keys\n      var index = expandedKeys.indexOf(key);\n      var targetExpanded = !expanded;\n      warning(expanded && index !== -1 || !expanded && index === -1, 'Expand state not sync with index check');\n      if (targetExpanded) {\n        expandedKeys = arrAdd(expandedKeys, key);\n      } else {\n        expandedKeys = arrDel(expandedKeys, key);\n      }\n      _this.setExpandedKeys(expandedKeys);\n      onExpand === null || onExpand === void 0 || onExpand(expandedKeys, {\n        node: treeNode,\n        expanded: targetExpanded,\n        nativeEvent: e.nativeEvent\n      });\n\n      // Async Load data\n      if (targetExpanded && loadData) {\n        var loadPromise = _this.onNodeLoad(treeNode);\n        if (loadPromise) {\n          loadPromise.then(function () {\n            // [Legacy] Refresh logic\n            var newFlattenTreeData = flattenTreeData(_this.state.treeData, expandedKeys, fieldNames);\n            _this.setUncontrolledState({\n              flattenNodes: newFlattenTreeData\n            });\n          }).catch(function () {\n            var currentExpandedKeys = _this.state.expandedKeys;\n            var expandedKeysToRestore = arrDel(currentExpandedKeys, key);\n            _this.setExpandedKeys(expandedKeysToRestore);\n          });\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onListChangeStart\", function () {\n      _this.setUncontrolledState({\n        listChanging: true\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onListChangeEnd\", function () {\n      setTimeout(function () {\n        _this.setUncontrolledState({\n          listChanging: false\n        });\n      });\n    });\n    // =========================== Keyboard ===========================\n    _defineProperty(_assertThisInitialized(_this), \"onActiveChange\", function (newActiveKey) {\n      var activeKey = _this.state.activeKey;\n      var _this$props9 = _this.props,\n        onActiveChange = _this$props9.onActiveChange,\n        _this$props9$itemScro = _this$props9.itemScrollOffset,\n        itemScrollOffset = _this$props9$itemScro === void 0 ? 0 : _this$props9$itemScro;\n      if (activeKey === newActiveKey) {\n        return;\n      }\n      _this.setState({\n        activeKey: newActiveKey\n      });\n      if (newActiveKey !== null) {\n        _this.scrollTo({\n          key: newActiveKey,\n          offset: itemScrollOffset\n        });\n      }\n      onActiveChange === null || onActiveChange === void 0 || onActiveChange(newActiveKey);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getActiveItem\", function () {\n      var _this$state11 = _this.state,\n        activeKey = _this$state11.activeKey,\n        flattenNodes = _this$state11.flattenNodes;\n      if (activeKey === null) {\n        return null;\n      }\n      return flattenNodes.find(function (_ref2) {\n        var key = _ref2.key;\n        return key === activeKey;\n      }) || null;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"offsetActiveKey\", function (offset) {\n      var _this$state12 = _this.state,\n        flattenNodes = _this$state12.flattenNodes,\n        activeKey = _this$state12.activeKey;\n      var index = flattenNodes.findIndex(function (_ref3) {\n        var key = _ref3.key;\n        return key === activeKey;\n      });\n\n      // Align with index\n      if (index === -1 && offset < 0) {\n        index = flattenNodes.length;\n      }\n      index = (index + offset + flattenNodes.length) % flattenNodes.length;\n      var item = flattenNodes[index];\n      if (item) {\n        var _key4 = item.key;\n        _this.onActiveChange(_key4);\n      } else {\n        _this.onActiveChange(null);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      var _this$state13 = _this.state,\n        activeKey = _this$state13.activeKey,\n        expandedKeys = _this$state13.expandedKeys,\n        checkedKeys = _this$state13.checkedKeys,\n        fieldNames = _this$state13.fieldNames;\n      var _this$props10 = _this.props,\n        onKeyDown = _this$props10.onKeyDown,\n        checkable = _this$props10.checkable,\n        selectable = _this$props10.selectable;\n\n      // >>>>>>>>>> Direction\n      switch (event.which) {\n        case KeyCode.UP:\n          {\n            _this.offsetActiveKey(-1);\n            event.preventDefault();\n            break;\n          }\n        case KeyCode.DOWN:\n          {\n            _this.offsetActiveKey(1);\n            event.preventDefault();\n            break;\n          }\n      }\n\n      // >>>>>>>>>> Expand & Selection\n      var activeItem = _this.getActiveItem();\n      if (activeItem && activeItem.data) {\n        var treeNodeRequiredProps = _this.getTreeNodeRequiredProps();\n        var expandable = activeItem.data.isLeaf === false || !!(activeItem.data[fieldNames.children] || []).length;\n        var eventNode = convertNodePropsToEventData(_objectSpread(_objectSpread({}, getTreeNodeProps(activeKey, treeNodeRequiredProps)), {}, {\n          data: activeItem.data,\n          active: true\n        }));\n        switch (event.which) {\n          // >>> Expand\n          case KeyCode.LEFT:\n            {\n              // Collapse if possible\n              if (expandable && expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.parent) {\n                _this.onActiveChange(activeItem.parent.key);\n              }\n              event.preventDefault();\n              break;\n            }\n          case KeyCode.RIGHT:\n            {\n              // Expand if possible\n              if (expandable && !expandedKeys.includes(activeKey)) {\n                _this.onNodeExpand({}, eventNode);\n              } else if (activeItem.children && activeItem.children.length) {\n                _this.onActiveChange(activeItem.children[0].key);\n              }\n              event.preventDefault();\n              break;\n            }\n\n          // Selection\n          case KeyCode.ENTER:\n          case KeyCode.SPACE:\n            {\n              if (checkable && !eventNode.disabled && eventNode.checkable !== false && !eventNode.disableCheckbox) {\n                _this.onNodeCheck({}, eventNode, !checkedKeys.includes(activeKey));\n              } else if (!checkable && selectable && !eventNode.disabled && eventNode.selectable !== false) {\n                _this.onNodeSelect({}, eventNode);\n              }\n              break;\n            }\n        }\n      }\n      onKeyDown === null || onKeyDown === void 0 || onKeyDown(event);\n    });\n    /**\n     * Only update the value which is not in props\n     */\n    _defineProperty(_assertThisInitialized(_this), \"setUncontrolledState\", function (state) {\n      var atomic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var forceState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      if (!_this.destroyed) {\n        var needSync = false;\n        var allPassed = true;\n        var newState = {};\n        Object.keys(state).forEach(function (name) {\n          if (name in _this.props) {\n            allPassed = false;\n            return;\n          }\n          needSync = true;\n          newState[name] = state[name];\n        });\n        if (needSync && (!atomic || allPassed)) {\n          _this.setState(_objectSpread(_objectSpread({}, newState), forceState));\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"scrollTo\", function (scroll) {\n      _this.listRef.current.scrollTo(scroll);\n    });\n    return _this;\n  }\n  _createClass(Tree, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.destroyed = false;\n      this.onUpdated();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.onUpdated();\n    }\n  }, {\n    key: \"onUpdated\",\n    value: function onUpdated() {\n      var _this$props11 = this.props,\n        activeKey = _this$props11.activeKey,\n        _this$props11$itemScr = _this$props11.itemScrollOffset,\n        itemScrollOffset = _this$props11$itemScr === void 0 ? 0 : _this$props11$itemScr;\n      if (activeKey !== undefined && activeKey !== this.state.activeKey) {\n        this.setState({\n          activeKey: activeKey\n        });\n        if (activeKey !== null) {\n          this.scrollTo({\n            key: activeKey,\n            offset: itemScrollOffset\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('dragend', this.onWindowDragEnd);\n      this.destroyed = true;\n    }\n  }, {\n    key: \"resetDragState\",\n    value: function resetDragState() {\n      this.setState({\n        dragOverNodeKey: null,\n        dropPosition: null,\n        dropLevelOffset: null,\n        dropTargetKey: null,\n        dropContainerKey: null,\n        dropTargetPos: null,\n        dropAllowed: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state14 = this.state,\n        focused = _this$state14.focused,\n        flattenNodes = _this$state14.flattenNodes,\n        keyEntities = _this$state14.keyEntities,\n        draggingNodeKey = _this$state14.draggingNodeKey,\n        activeKey = _this$state14.activeKey,\n        dropLevelOffset = _this$state14.dropLevelOffset,\n        dropContainerKey = _this$state14.dropContainerKey,\n        dropTargetKey = _this$state14.dropTargetKey,\n        dropPosition = _this$state14.dropPosition,\n        dragOverNodeKey = _this$state14.dragOverNodeKey,\n        indent = _this$state14.indent;\n      var _this$props12 = this.props,\n        prefixCls = _this$props12.prefixCls,\n        className = _this$props12.className,\n        style = _this$props12.style,\n        showLine = _this$props12.showLine,\n        focusable = _this$props12.focusable,\n        _this$props12$tabInde = _this$props12.tabIndex,\n        tabIndex = _this$props12$tabInde === void 0 ? 0 : _this$props12$tabInde,\n        selectable = _this$props12.selectable,\n        showIcon = _this$props12.showIcon,\n        icon = _this$props12.icon,\n        switcherIcon = _this$props12.switcherIcon,\n        draggable = _this$props12.draggable,\n        checkable = _this$props12.checkable,\n        checkStrictly = _this$props12.checkStrictly,\n        disabled = _this$props12.disabled,\n        motion = _this$props12.motion,\n        loadData = _this$props12.loadData,\n        filterTreeNode = _this$props12.filterTreeNode,\n        height = _this$props12.height,\n        itemHeight = _this$props12.itemHeight,\n        virtual = _this$props12.virtual,\n        titleRender = _this$props12.titleRender,\n        dropIndicatorRender = _this$props12.dropIndicatorRender,\n        onContextMenu = _this$props12.onContextMenu,\n        onScroll = _this$props12.onScroll,\n        direction = _this$props12.direction,\n        rootClassName = _this$props12.rootClassName,\n        rootStyle = _this$props12.rootStyle;\n      var domProps = pickAttrs(this.props, {\n        aria: true,\n        data: true\n      });\n\n      // It's better move to hooks but we just simply keep here\n      var draggableConfig;\n      if (draggable) {\n        if (_typeof(draggable) === 'object') {\n          draggableConfig = draggable;\n        } else if (typeof draggable === 'function') {\n          draggableConfig = {\n            nodeDraggable: draggable\n          };\n        } else {\n          draggableConfig = {};\n        }\n      }\n      return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n        value: {\n          prefixCls: prefixCls,\n          selectable: selectable,\n          showIcon: showIcon,\n          icon: icon,\n          switcherIcon: switcherIcon,\n          draggable: draggableConfig,\n          draggingNodeKey: draggingNodeKey,\n          checkable: checkable,\n          checkStrictly: checkStrictly,\n          disabled: disabled,\n          keyEntities: keyEntities,\n          dropLevelOffset: dropLevelOffset,\n          dropContainerKey: dropContainerKey,\n          dropTargetKey: dropTargetKey,\n          dropPosition: dropPosition,\n          dragOverNodeKey: dragOverNodeKey,\n          indent: indent,\n          direction: direction,\n          dropIndicatorRender: dropIndicatorRender,\n          loadData: loadData,\n          filterTreeNode: filterTreeNode,\n          titleRender: titleRender,\n          onNodeClick: this.onNodeClick,\n          onNodeDoubleClick: this.onNodeDoubleClick,\n          onNodeExpand: this.onNodeExpand,\n          onNodeSelect: this.onNodeSelect,\n          onNodeCheck: this.onNodeCheck,\n          onNodeLoad: this.onNodeLoad,\n          onNodeMouseEnter: this.onNodeMouseEnter,\n          onNodeMouseLeave: this.onNodeMouseLeave,\n          onNodeContextMenu: this.onNodeContextMenu,\n          onNodeDragStart: this.onNodeDragStart,\n          onNodeDragEnter: this.onNodeDragEnter,\n          onNodeDragOver: this.onNodeDragOver,\n          onNodeDragLeave: this.onNodeDragLeave,\n          onNodeDragEnd: this.onNodeDragEnd,\n          onNodeDrop: this.onNodeDrop\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"tree\",\n        className: classNames(prefixCls, className, rootClassName, _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-show-line\"), showLine), \"\".concat(prefixCls, \"-focused\"), focused), \"\".concat(prefixCls, \"-active-focused\"), activeKey !== null)),\n        style: rootStyle\n      }, /*#__PURE__*/React.createElement(NodeList, _extends({\n        ref: this.listRef,\n        prefixCls: prefixCls,\n        style: style,\n        data: flattenNodes,\n        disabled: disabled,\n        selectable: selectable,\n        checkable: !!checkable,\n        motion: motion,\n        dragging: draggingNodeKey !== null,\n        height: height,\n        itemHeight: itemHeight,\n        virtual: virtual,\n        focusable: focusable,\n        focused: focused,\n        tabIndex: tabIndex,\n        activeItem: this.getActiveItem(),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onKeyDown: this.onKeyDown,\n        onActiveChange: this.onActiveChange,\n        onListChangeStart: this.onListChangeStart,\n        onListChangeEnd: this.onListChangeEnd,\n        onContextMenu: onContextMenu,\n        onScroll: onScroll\n      }, this.getTreeNodeRequiredProps(), domProps))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, prevState) {\n      var prevProps = prevState.prevProps;\n      var newState = {\n        prevProps: props\n      };\n      function needSync(name) {\n        return !prevProps && name in props || prevProps && prevProps[name] !== props[name];\n      }\n\n      // ================== Tree Node ==================\n      var treeData;\n\n      // fieldNames\n      var fieldNames = prevState.fieldNames;\n      if (needSync('fieldNames')) {\n        fieldNames = fillFieldNames(props.fieldNames);\n        newState.fieldNames = fieldNames;\n      }\n\n      // Check if `treeData` or `children` changed and save into the state.\n      if (needSync('treeData')) {\n        treeData = props.treeData;\n      } else if (needSync('children')) {\n        warning(false, '`children` of Tree is deprecated. Please use `treeData` instead.');\n        treeData = convertTreeToData(props.children);\n      }\n\n      // Save flatten nodes info and convert `treeData` into keyEntities\n      if (treeData) {\n        newState.treeData = treeData;\n        var entitiesMap = convertDataToEntities(treeData, {\n          fieldNames: fieldNames\n        });\n        newState.keyEntities = _objectSpread(_defineProperty({}, MOTION_KEY, MotionEntity), entitiesMap.keyEntities);\n\n        // Warning if treeNode not provide key\n        if (process.env.NODE_ENV !== 'production') {\n          warningWithoutKey(treeData, fieldNames);\n        }\n      }\n      var keyEntities = newState.keyEntities || prevState.keyEntities;\n\n      // ================ expandedKeys =================\n      if (needSync('expandedKeys') || prevProps && needSync('autoExpandParent')) {\n        newState.expandedKeys = props.autoExpandParent || !prevProps && props.defaultExpandParent ? conductExpandParent(props.expandedKeys, keyEntities) : props.expandedKeys;\n      } else if (!prevProps && props.defaultExpandAll) {\n        var cloneKeyEntities = _objectSpread({}, keyEntities);\n        delete cloneKeyEntities[MOTION_KEY];\n        newState.expandedKeys = Object.keys(cloneKeyEntities).map(function (key) {\n          return cloneKeyEntities[key].key;\n        });\n      } else if (!prevProps && props.defaultExpandedKeys) {\n        newState.expandedKeys = props.autoExpandParent || props.defaultExpandParent ? conductExpandParent(props.defaultExpandedKeys, keyEntities) : props.defaultExpandedKeys;\n      }\n      if (!newState.expandedKeys) {\n        delete newState.expandedKeys;\n      }\n\n      // ================ flattenNodes =================\n      if (treeData || newState.expandedKeys) {\n        var flattenNodes = flattenTreeData(treeData || prevState.treeData, newState.expandedKeys || prevState.expandedKeys, fieldNames);\n        newState.flattenNodes = flattenNodes;\n      }\n\n      // ================ selectedKeys =================\n      if (props.selectable) {\n        if (needSync('selectedKeys')) {\n          newState.selectedKeys = calcSelectedKeys(props.selectedKeys, props);\n        } else if (!prevProps && props.defaultSelectedKeys) {\n          newState.selectedKeys = calcSelectedKeys(props.defaultSelectedKeys, props);\n        }\n      }\n\n      // ================= checkedKeys =================\n      if (props.checkable) {\n        var checkedKeyEntity;\n        if (needSync('checkedKeys')) {\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {};\n        } else if (!prevProps && props.defaultCheckedKeys) {\n          checkedKeyEntity = parseCheckedKeys(props.defaultCheckedKeys) || {};\n        } else if (treeData) {\n          // If `treeData` changed, we also need check it\n          checkedKeyEntity = parseCheckedKeys(props.checkedKeys) || {\n            checkedKeys: prevState.checkedKeys,\n            halfCheckedKeys: prevState.halfCheckedKeys\n          };\n        }\n        if (checkedKeyEntity) {\n          var _checkedKeyEntity = checkedKeyEntity,\n            _checkedKeyEntity$che = _checkedKeyEntity.checkedKeys,\n            checkedKeys = _checkedKeyEntity$che === void 0 ? [] : _checkedKeyEntity$che,\n            _checkedKeyEntity$hal = _checkedKeyEntity.halfCheckedKeys,\n            halfCheckedKeys = _checkedKeyEntity$hal === void 0 ? [] : _checkedKeyEntity$hal;\n          if (!props.checkStrictly) {\n            var conductKeys = conductCheck(checkedKeys, true, keyEntities);\n            checkedKeys = conductKeys.checkedKeys;\n            halfCheckedKeys = conductKeys.halfCheckedKeys;\n          }\n          newState.checkedKeys = checkedKeys;\n          newState.halfCheckedKeys = halfCheckedKeys;\n        }\n      }\n\n      // ================= loadedKeys ==================\n      if (needSync('loadedKeys')) {\n        newState.loadedKeys = props.loadedKeys;\n      }\n      return newState;\n    }\n  }]);\n  return Tree;\n}(React.Component);\n_defineProperty(Tree, \"defaultProps\", {\n  prefixCls: 'rc-tree',\n  showLine: false,\n  showIcon: true,\n  selectable: true,\n  multiple: false,\n  checkable: false,\n  disabled: false,\n  checkStrictly: false,\n  draggable: false,\n  defaultExpandParent: true,\n  autoExpandParent: false,\n  defaultExpandAll: false,\n  defaultExpandedKeys: [],\n  defaultCheckedKeys: [],\n  defaultSelectedKeys: [],\n  dropIndicatorRender: DropIndicator,\n  allowDrop: function allowDrop() {\n    return true;\n  },\n  expandAction: false\n});\n_defineProperty(Tree, \"TreeNode\", TreeNode);\nexport default Tree;","import Tree from \"./Tree\";\nimport TreeNode from \"./TreeNode\";\nexport { TreeNode };\nexport default Tree;","import { css } from '@emotion/react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nexport function getGlobalStyles(theme: GrafanaTheme2) {\n  return css`\n    .moveable-control-box {\n      z-index: 999;\n    }\n    ,\n    .rc-tree {\n      margin: 0;\n      margin-bottom: 15px;\n      border: 1px solid transparent;\n\n      &-focused:not(&-active-focused) {\n        border-color: cyan;\n      }\n\n      .rc-tree-title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n      }\n\n      .rc-tree-treenode {\n        margin: 0;\n        padding: 1px;\n        line-height: 24px;\n        white-space: nowrap;\n        list-style: none;\n        outline: 0;\n\n        display: flex;\n        margin-bottom: 3px;\n        cursor: pointer;\n\n        .draggable {\n          color: #333;\n          -moz-user-select: none;\n          -khtml-user-select: none;\n          -webkit-user-select: none;\n          user-select: none;\n          /* Required to make elements draggable in old WebKit */\n          // -khtml-user-drag: element;\n          // -webkit-user-drag: element;\n        }\n\n        &.drop-container {\n          > .draggable::after {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            box-shadow: inset 0 0 0 2px blue;\n            content: '';\n          }\n          & ~ .rc-tree-treenode {\n            border-left: 2px solid ${theme.components.input.borderColor};\n          }\n        }\n        &.drop-target {\n          & ~ .rc-tree-treenode {\n            border-left: none;\n          }\n        }\n        &.filter-node {\n          > .rc-tree-node-content-wrapper {\n            color: #a60000 !important;\n            font-weight: bold !important;\n          }\n        }\n        ul {\n          margin: 0;\n          padding: 0 0 0 18px;\n        }\n        .rc-tree-node-content-wrapper {\n          position: relative;\n          display: inline-block;\n          height: 24px;\n          margin: 0;\n          padding: 0;\n          text-decoration: none;\n          vertical-align: top;\n          cursor: grab;\n          flex-grow: 1;\n          display: flex;\n\n          border: 1px solid ${theme.components.input.borderColor};\n          border-radius: ${theme.shape.radius.default};\n          background: ${theme.colors.background.secondary};\n          min-height: ${theme.spacing.gridSize * 4}px;\n\n          &:hover {\n            border: 1px solid ${theme.components.input.borderHover};\n          }\n\n          &.rc-tree-node-selected {\n            border: 1px solid ${theme.colors.primary.border};\n            opacity: 1;\n          }\n        }\n\n        span {\n          &.rc-tree-checkbox,\n          &.rc-tree-iconEle {\n            display: inline-block;\n            width: 16px;\n            height: 16px;\n            margin-right: 2px;\n            line-height: 16px;\n            vertical-align: -0.125em;\n            background-color: transparent;\n            background-repeat: no-repeat;\n            background-attachment: scroll;\n            border: 0 none;\n            outline: none;\n            cursor: pointer;\n\n            &.rc-tree-icon__customize {\n              background-image: none;\n            }\n          }\n          &.rc-tree-switcher {\n            display: flex;\n            align-items: center;\n            width: 16px;\n            background-color: transparent;\n            background-repeat: no-repeat;\n            background-attachment: scroll;\n            border: 0 none;\n            outline: none;\n            cursor: pointer;\n\n            &.rc-tree-icon__customize {\n              background-image: none;\n            }\n          }\n          &.rc-tree-icon_loading {\n            margin-right: 2px;\n            vertical-align: top;\n            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')\n              no-repeat scroll 0 0 transparent;\n          }\n          &.rc-tree-switcher {\n            &.rc-tree-switcher-noop {\n              cursor: auto;\n            }\n            &.rc-tree-switcher_open {\n              background-position: -93px -56px;\n            }\n            &.rc-tree-switcher_close {\n              background-position: -75px -56px;\n            }\n          }\n          &.rc-tree-checkbox {\n            width: 13px;\n            height: 13px;\n            margin: 0 3px;\n            background-position: 0 0;\n            &-checked {\n              background-position: -14px 0;\n            }\n            &-indeterminate {\n              background-position: -14px -28px;\n            }\n            &-disabled {\n              background-position: 0 -56px;\n            }\n            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {\n              background-position: -14px -56px;\n            }\n            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {\n              position: relative;\n              background: #ccc;\n              border-radius: 3px;\n              &::after {\n                position: absolute;\n                top: 5px;\n                left: 3px;\n                width: 5px;\n                height: 0;\n                border: 2px solid #fff;\n                border-top: 0;\n                border-left: 0;\n                -webkit-transform: scale(1);\n                transform: scale(1);\n                content: ' ';\n              }\n            }\n          }\n        }\n      }\n      &:not(.rc-tree-show-line) {\n        .rc-tree-treenode {\n          .rc-tree-switcher-noop {\n            background: none;\n          }\n        }\n      }\n      &.rc-tree-show-line {\n        .rc-tree-treenode:not(:last-child) {\n          > ul {\n            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0\n              repeat-y;\n          }\n          > .rc-tree-switcher-noop {\n            background-position: -56px -18px;\n          }\n        }\n        .rc-tree-treenode:last-child {\n          > .rc-tree-switcher-noop {\n            background-position: -56px -36px;\n          }\n        }\n      }\n      &-child-tree {\n        display: none;\n        &-open {\n          display: block;\n        }\n      }\n      &-treenode-disabled {\n        > span:not(.rc-tree-switcher),\n        > a,\n        > a span {\n          color: #767676;\n          cursor: not-allowed;\n        }\n      }\n      &-treenode-active {\n        background: rgba(0, 0, 0, 0.1);\n      }\n      &-node-selected {\n        opacity: 0.8;\n      }\n      &-icon__open {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px -16px;\n      }\n      &-icon__close {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px 0;\n      }\n      &-icon__docu {\n        margin-right: 2px;\n        vertical-align: top;\n        background-position: -110px -32px;\n      }\n      &-icon__customize {\n        margin-right: 2px;\n        vertical-align: top;\n      }\n      &-title {\n        display: inline-block;\n      }\n      &-indent {\n        display: inline-block;\n        height: 0;\n        vertical-align: bottom;\n      }\n      &-indent-unit {\n        display: inline-block;\n        width: 16px;\n      }\n\n      &-draggable-icon {\n        display: inline-flex;\n        justify-content: center;\n        width: 16px;\n      }\n    }\n  `;\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, useStyles2 } from '@grafana/ui';\nimport { LayerName } from 'app/core/components/Layers/LayerName';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { LayerActionID } from '../../types';\nimport { TreeViewEditorProps } from '../element/elementEditor';\n\nimport { TreeElement } from './tree';\n\ninterface Props {\n  settings: TreeViewEditorProps;\n  nodeData: TreeElement;\n  setAllowSelection: (allow: boolean) => void;\n}\n\nexport const TreeNodeTitle = ({ settings, nodeData, setAllowSelection }: Props) => {\n  const element = nodeData.dataRef;\n  const name = nodeData.dataRef.getName();\n\n  const styles = useStyles2(getStyles);\n\n  const layer = settings.layer;\n\n  const getScene = () => {\n    if (!settings?.layer) {\n      return;\n    }\n\n    return settings.layer.scene;\n  };\n\n  const onDelete = (element: ElementState) => {\n    const elLayer = element.parent ?? layer;\n    elLayer.doAction(LayerActionID.Delete, element);\n    setAllowSelection(false);\n  };\n\n  const onDuplicate = (element: ElementState) => {\n    const elLayer = element.parent ?? layer;\n    elLayer.doAction(LayerActionID.Duplicate, element);\n    setAllowSelection(false);\n  };\n\n  const onNameChange = (element: ElementState, name: string) => {\n    element.onChange({ ...element.options, name });\n  };\n\n  const verifyLayerNameUniqueness = (nameToVerify: string) => {\n    const scene = getScene();\n\n    return Boolean(scene?.canRename(nameToVerify));\n  };\n\n  const getLayerInfo = (element: ElementState) => {\n    return element.options.type;\n  };\n\n  return (\n    <>\n      <LayerName\n        name={name}\n        onChange={(v) => onNameChange(element, v)}\n        verifyLayerNameUniqueness={verifyLayerNameUniqueness ?? undefined}\n      />\n\n      <div className={styles.textWrapper}>&nbsp; {getLayerInfo(element)}</div>\n\n      {!nodeData.children && (\n        <div className={styles.actionButtonsWrapper}>\n          <IconButton\n            name=\"copy\"\n            title=\"Duplicate\"\n            className={styles.actionIcon}\n            onClick={() => onDuplicate(element)}\n            tooltip=\"Duplicate\"\n          />\n          <IconButton\n            name=\"trash-alt\"\n            title=\"remove\"\n            className={styles.actionIcon}\n            onClick={() => onDelete(element)}\n            tooltip=\"Remove\"\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  actionButtonsWrapper: css({\n    display: 'flex',\n    alignItems: 'flex-end',\n  }),\n  actionIcon: css({\n    color: theme.colors.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      color: theme.colors.text.primary,\n    },\n  }),\n  textWrapper: css({\n    display: 'flex',\n    alignItems: 'center',\n    flexGrow: 1,\n    overflow: 'hidden',\n    marginRight: theme.spacing(1),\n  }),\n  layerName: css({\n    fontWeight: theme.typography.fontWeightMedium,\n    color: theme.colors.primary.text,\n    cursor: 'pointer',\n    overflow: 'hidden',\n    marginLeft: theme.spacing(0.5),\n  }),\n});\n","import { CSSProperties } from 'react';\n\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { RootElement } from 'app/features/canvas/runtime/root';\n\nimport { DragNode, DropNode } from '../../types';\n\nexport interface TreeElement {\n  key: number;\n  title: string;\n  selectable?: boolean;\n  children?: TreeElement[];\n  dataRef: ElementState | FrameState;\n  style?: CSSProperties;\n}\n\nexport function getTreeData(root?: RootElement | FrameState, selection?: string[], selectedColor?: string) {\n  let elements: TreeElement[] = [];\n  if (root) {\n    for (let i = root.elements.length; i--; i >= 0) {\n      const item = root.elements[i];\n      const element: TreeElement = {\n        key: item.UID,\n        title: item.getName(),\n        selectable: true,\n        dataRef: item,\n      };\n\n      if (item instanceof FrameState) {\n        element.children = getTreeData(item, selection, selectedColor);\n      }\n      elements.push(element);\n    }\n  }\n\n  return elements;\n}\n\nexport function onNodeDrop(\n  info: { node: DropNode; dragNode: DragNode; dropPosition: number; dropToGap: boolean },\n  treeData: TreeElement[]\n) {\n  const destKey = info.node.key;\n  const srcKey = info.dragNode.key;\n  const destPos = info.node.pos.split('-');\n  const destPosition = info.dropPosition - Number(destPos[destPos.length - 1]);\n\n  const loop = (\n    data: TreeElement[],\n    key: number,\n    callback: { (item: TreeElement, index: number, arr: TreeElement[]): void }\n  ) => {\n    data.forEach((item, index, arr) => {\n      if (item.key === key) {\n        callback(item, index, arr);\n        return;\n      }\n      if (item.children) {\n        loop(item.children, key, callback);\n      }\n    });\n  };\n  const data = [...treeData];\n\n  // Find dragObject\n  let srcElement: TreeElement | undefined = undefined;\n  loop(data, srcKey, (item: TreeElement, index: number, arr: TreeElement[]) => {\n    arr.splice(index, 1);\n    srcElement = item;\n  });\n\n  if (destPosition === 0) {\n    // Drop on the content\n    loop(data, destKey, (item: TreeElement) => {\n      item.children = item.children || [];\n      item.children.unshift(srcElement!);\n    });\n  } else {\n    // Drop on the gap (insert before or insert after)\n    let ar: TreeElement[] = [];\n    let i = 0;\n    loop(data, destKey, (item: TreeElement, index: number, arr: TreeElement[]) => {\n      ar = arr;\n      i = index;\n    });\n\n    if (destPosition === -1) {\n      ar.splice(i, 0, srcElement!);\n    } else {\n      ar.splice(i + 1, 0, srcElement!);\n    }\n  }\n\n  return data;\n}\n","import { css } from '@emotion/css';\nimport { Global } from '@emotion/react';\nimport Tree, { TreeNodeProps } from 'rc-tree';\nimport React, { Key, useEffect, useMemo, useState } from 'react';\n\nimport { GrafanaTheme2, StandardEditorProps } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, HorizontalGroup, Icon, useStyles2, useTheme2 } from '@grafana/ui';\nimport { AddLayerButton } from 'app/core/components/Layers/AddLayerButton';\nimport { ElementState } from 'app/features/canvas/runtime/element';\n\nimport { getGlobalStyles } from '../../globalStyles';\nimport { Options } from '../../panelcfg.gen';\nimport { DragNode, DropNode } from '../../types';\nimport { doSelect, getElementTypes, onAddItem } from '../../utils';\nimport { TreeViewEditorProps } from '../element/elementEditor';\n\nimport { TreeNodeTitle } from './TreeNodeTitle';\nimport { getTreeData, onNodeDrop, TreeElement } from './tree';\n\nlet allowSelection = true;\n\nexport const TreeNavigationEditor = ({ item }: StandardEditorProps<any, TreeViewEditorProps, Options>) => {\n  const [treeData, setTreeData] = useState(getTreeData(item?.settings?.scene.root));\n  const [autoExpandParent, setAutoExpandParent] = useState(true);\n  const [expandedKeys, setExpandedKeys] = useState<Key[]>([]);\n  const [selectedKeys, setSelectedKeys] = useState<Key[]>([]);\n\n  const theme = useTheme2();\n  const globalCSS = getGlobalStyles(theme);\n  const styles = useStyles2(getStyles);\n\n  const selectedBgColor = theme.colors.primary.border;\n  const { settings } = item;\n  const selection = useMemo(\n    () => (settings?.selected ? settings.selected.map((v) => v?.getName()) : []),\n    [settings?.selected]\n  );\n\n  const selectionByUID = useMemo(\n    () => (settings?.selected ? settings.selected.map((v) => v?.UID) : []),\n    [settings?.selected]\n  );\n\n  useEffect(() => {\n    setTreeData(getTreeData(item?.settings?.scene.root, selection, selectedBgColor));\n    setSelectedKeys(selectionByUID);\n    setAllowSelection();\n  }, [item?.settings?.scene.root, selectedBgColor, selection, selectionByUID]);\n\n  if (!settings) {\n    return <div>No settings</div>;\n  }\n\n  const layer = settings.layer;\n  if (!layer) {\n    return <div>Missing layer?</div>;\n  }\n\n  const onSelect = (selectedKeys: Key[], info: { node: { dataRef: ElementState } }) => {\n    if (allowSelection && item.settings?.scene) {\n      doSelect(item.settings.scene, info.node.dataRef);\n    }\n  };\n\n  const allowDrop = () => {\n    return true;\n  };\n\n  const onDrop = (info: { node: DropNode; dragNode: DragNode; dropPosition: number; dropToGap: boolean }) => {\n    const destPos = info.node.pos.split('-');\n    const destPosition = info.dropPosition - Number(destPos[destPos.length - 1]);\n\n    const srcEl = info.dragNode.dataRef;\n    const destEl = info.node.dataRef;\n\n    const data = onNodeDrop(info, treeData);\n\n    setTreeData(data);\n    destEl.parent?.scene.reorderElements(srcEl, destEl, info.dropToGap, destPosition);\n  };\n\n  const onExpand = (expandedKeys: Key[]) => {\n    setExpandedKeys(expandedKeys);\n    setAutoExpandParent(false);\n  };\n\n  const switcherIcon = (obj: TreeNodeProps) => {\n    if (obj.isLeaf) {\n      // TODO: Implement element specific icons\n      return <></>;\n    }\n\n    return (\n      <Icon\n        name=\"angle-right\"\n        title={'Node Icon'}\n        style={{\n          transform: `rotate(${obj.expanded ? 90 : 0}deg)`,\n          fill: theme.colors.text.primary,\n        }}\n      />\n    );\n  };\n\n  const setAllowSelection = (allow = true) => {\n    allowSelection = allow;\n  };\n\n  const onClearSelection = () => {\n    layer.scene.clearCurrentSelection();\n  };\n\n  const onTitleRender = (nodeData: TreeElement) => {\n    return <TreeNodeTitle nodeData={nodeData} setAllowSelection={setAllowSelection} settings={settings} />;\n  };\n\n  // TODO: This functionality is currently kinda broken / no way to decouple / delete created frames at this time\n  const onFrameSelection = () => {\n    if (layer.scene) {\n      layer.scene.frameSelection();\n    } else {\n      console.warn('no scene!');\n    }\n  };\n\n  const typeOptions = getElementTypes(settings.scene.shouldShowAdvancedTypes).options;\n\n  return (\n    <>\n      <Global styles={globalCSS} />\n      <Tree\n        selectable={true}\n        onSelect={onSelect}\n        draggable={true}\n        defaultExpandAll={true}\n        autoExpandParent={autoExpandParent}\n        showIcon={false}\n        allowDrop={allowDrop}\n        onDrop={onDrop}\n        expandedKeys={expandedKeys}\n        onExpand={onExpand}\n        treeData={treeData}\n        titleRender={onTitleRender}\n        switcherIcon={switcherIcon}\n        selectedKeys={selectedKeys}\n        multiple={true}\n      />\n\n      <HorizontalGroup justify=\"space-between\">\n        <div className={styles.addLayerButton}>\n          <AddLayerButton onChange={(sel) => onAddItem(sel, layer)} options={typeOptions} label={'Add item'} />\n        </div>\n        {selection.length > 0 && (\n          <Button size=\"sm\" variant=\"secondary\" onClick={onClearSelection}>\n            Clear selection\n          </Button>\n        )}\n        {selection.length > 1 && config.featureToggles.canvasPanelNesting && (\n          <Button size=\"sm\" variant=\"secondary\" onClick={onFrameSelection}>\n            Frame selection\n          </Button>\n        )}\n      </HorizontalGroup>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  addLayerButton: css({\n    marginLeft: '18px',\n    minWidth: '150px',\n  }),\n});\n","import { get as lodashGet } from 'lodash';\n\nimport { NestedPanelOptions, NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { InstanceState } from '../../CanvasPanel';\nimport { PlacementEditor } from '../element/PlacementEditor';\nimport { optionBuilder } from '../options';\n\nimport { TreeNavigationEditor } from './TreeNavigationEditor';\n\nexport interface LayerEditorProps {\n  scene: Scene;\n  layer: FrameState;\n  selected: ElementState[];\n}\n\nexport function getLayerEditor(opts: InstanceState): NestedPanelOptions<LayerEditorProps> {\n  const { selected, scene } = opts;\n\n  if (!scene.currentLayer) {\n    scene.currentLayer = scene.root;\n  }\n\n  if (selected) {\n    for (const element of selected) {\n      if (element instanceof FrameState) {\n        scene.currentLayer = element;\n        break;\n      }\n\n      if (element && element.parent) {\n        scene.currentLayer = element.parent;\n        break;\n      }\n    }\n  }\n\n  const options = scene.currentLayer.options || { elements: [] };\n\n  return {\n    category: ['Layer'],\n    path: '--', // not used!\n\n    // Note that canvas editor writes things to the scene!\n    values: (parent: NestedValueAccess) => ({\n      getValue: (path) => {\n        return lodashGet(options, path);\n      },\n      onChange: (path, value) => {\n        if (path === 'type' && value) {\n          console.warn('unable to change layer type');\n          return;\n        }\n        const c = setOptionImmutably(options, path, value);\n        scene.currentLayer?.onChange(c);\n        scene.currentLayer?.updateData(scene.context);\n      },\n    }),\n\n    // Dynamically fill the selected element\n    build: (builder, context) => {\n      const currentLayer = scene.currentLayer;\n      if (currentLayer && !currentLayer.isRoot()) {\n        // TODO: the non-root nav option\n      }\n\n      builder.addCustomEditor({\n        id: 'content',\n        path: 'root',\n        name: 'Elements',\n        editor: TreeNavigationEditor,\n        settings: { scene, layer: scene.currentLayer, selected },\n      });\n\n      const ctx = { ...context, options };\n      optionBuilder.addBackground(builder as any, ctx);\n      optionBuilder.addBorder(builder as any, ctx);\n\n      if (currentLayer && !currentLayer.isRoot()) {\n        builder.addCustomEditor({\n          category: ['Layout'],\n          id: 'content',\n          path: '__', // not used\n          name: 'Constraints',\n          editor: PlacementEditor,\n          settings: {\n            scene: opts.scene,\n            element: currentLayer,\n          },\n        });\n      }\n    },\n  };\n}\n","import React, { useState } from 'react';\n\nimport { Tab, TabsBar } from '@grafana/ui/src';\n\nimport { InlineEditTabs } from '../../types';\n\ntype Props = {\n  onTabChange: (v: string) => void;\n};\n\nexport const TabsEditor = ({ onTabChange }: Props) => {\n  const [activeTab, setActiveTab] = useState<string>(InlineEditTabs.SelectedElement);\n\n  const tabs = [\n    { label: 'Selected Element', value: InlineEditTabs.SelectedElement },\n    { label: 'Element Management', value: InlineEditTabs.ElementManagement },\n  ];\n\n  const onCurrentTabChange = (value: string) => {\n    onTabChange(value);\n    setActiveTab(value);\n  };\n\n  return (\n    <>\n      <TabsBar>\n        {tabs.map((t, index) => (\n          <Tab\n            key={`${t.value}-${index}`}\n            label={t.label}\n            active={t.value === activeTab}\n            onChangeTab={() => onCurrentTabChange(t.value!)}\n          />\n        ))}\n      </TabsBar>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport { get as lodashGet } from 'lodash';\nimport React, { useMemo, useState } from 'react';\nimport { useObservable } from 'react-use';\n\nimport { DataFrame, GrafanaTheme2, PanelOptionsEditorBuilder, StandardEditorContext } from '@grafana/data';\nimport { PanelOptionsSupplier } from '@grafana/data/src/panel/PanelPlugin';\nimport { NestedValueAccess } from '@grafana/data/src/utils/OptionsUIBuilders';\nimport { useStyles2 } from '@grafana/ui/src';\nimport { AddLayerButton } from 'app/core/components/Layers/AddLayerButton';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\nimport { OptionsPaneCategory } from 'app/features/dashboard/components/PanelEditor/OptionsPaneCategory';\nimport { OptionsPaneCategoryDescriptor } from 'app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor';\nimport { fillOptionsPaneItems } from 'app/features/dashboard/components/PanelEditor/getVisualizationOptions';\nimport { setOptionImmutably } from 'app/features/dashboard/components/PanelEditor/utils';\n\nimport { activePanelSubject, InstanceState } from '../../CanvasPanel';\nimport { addStandardCanvasEditorOptions } from '../../module';\nimport { InlineEditTabs } from '../../types';\nimport { getElementTypes, onAddItem } from '../../utils';\nimport { getConnectionEditor } from '../connectionEditor';\nimport { getElementEditor } from '../element/elementEditor';\nimport { getLayerEditor } from '../layer/layerEditor';\n\nimport { TabsEditor } from './TabsEditor';\n\nexport function InlineEditBody() {\n  const activePanel = useObservable(activePanelSubject);\n  const instanceState = activePanel?.panel.context?.instanceState;\n  const styles = useStyles2(getStyles);\n\n  const [activeTab, setActiveTab] = useState<string>(InlineEditTabs.SelectedElement);\n\n  const pane = useMemo(() => {\n    const p = activePanel?.panel;\n    const state: InstanceState = instanceState;\n    if (!(state && state.scene) || !p) {\n      return new OptionsPaneCategoryDescriptor({ id: 'root', title: 'root' });\n    }\n\n    const supplier = (builder: PanelOptionsEditorBuilder<any>) => {\n      if (activeTab === InlineEditTabs.ElementManagement) {\n        builder.addNestedOptions(getLayerEditor(instanceState));\n      }\n\n      const selectedConnection = state.selectedConnection;\n      if (selectedConnection && activeTab === InlineEditTabs.SelectedElement) {\n        builder.addNestedOptions(\n          getConnectionEditor({\n            category: [`Selected connection`],\n            connection: selectedConnection,\n            scene: state.scene,\n          })\n        );\n      }\n\n      const selection = state.selected;\n      if (selection?.length === 1 && activeTab === InlineEditTabs.SelectedElement) {\n        const element = selection[0];\n        if (element && !(element instanceof FrameState)) {\n          builder.addNestedOptions(\n            getElementEditor({\n              category: [`Selected element (${element.options.name})`],\n              element,\n              scene: state.scene,\n            })\n          );\n        }\n      }\n\n      addStandardCanvasEditorOptions(builder);\n    };\n\n    return getOptionsPaneCategoryDescriptor(\n      {\n        options: p.props.options,\n        onChange: p.props.onOptionsChange,\n        data: p.props.data?.series,\n      },\n      supplier\n    );\n  }, [instanceState, activePanel, activeTab]);\n\n  const topLevelItemsContainerStyle = {\n    marginLeft: 15,\n    marginTop: 10,\n  };\n\n  const onTabChange = (tab: string) => {\n    setActiveTab(tab);\n  };\n\n  const typeOptions = getElementTypes(instanceState?.scene.shouldShowAdvancedTypes).options;\n  const rootLayer: FrameState | undefined = instanceState?.layer;\n\n  const noElementSelected =\n    instanceState &&\n    activeTab === InlineEditTabs.SelectedElement &&\n    instanceState.selected.length === 0 &&\n    instanceState.selectedConnection === undefined;\n\n  return (\n    <>\n      <div style={topLevelItemsContainerStyle}>{pane.items.map((item) => item.render())}</div>\n      <div style={topLevelItemsContainerStyle}>\n        <AddLayerButton onChange={(sel) => onAddItem(sel, rootLayer)} options={typeOptions} label={'Add item'} />\n      </div>\n      <div style={topLevelItemsContainerStyle}>\n        <TabsEditor onTabChange={onTabChange} />\n        {pane.categories.map((p) => renderOptionsPaneCategoryDescriptor(p))}\n        {noElementSelected && <div className={styles.selectElement}>Please select an element</div>}\n      </div>\n    </>\n  );\n}\n\n// Recursively render options\nfunction renderOptionsPaneCategoryDescriptor(pane: OptionsPaneCategoryDescriptor) {\n  return (\n    <OptionsPaneCategory {...pane.props} key={pane.props.id}>\n      <div>{pane.items.map((v) => v.render())}</div>\n      {pane.categories.map((c) => renderOptionsPaneCategoryDescriptor(c))}\n    </OptionsPaneCategory>\n  );\n}\n\ninterface EditorProps<T> {\n  onChange: (v: T) => void;\n  options: T;\n  data?: DataFrame[];\n}\n\nfunction getOptionsPaneCategoryDescriptor<T = any>(\n  props: EditorProps<T>,\n  supplier: PanelOptionsSupplier<T>\n): OptionsPaneCategoryDescriptor {\n  const context: StandardEditorContext<unknown, unknown> = {\n    data: props.data ?? [],\n    options: props.options,\n  };\n\n  const root = new OptionsPaneCategoryDescriptor({ id: 'root', title: 'root' });\n  const getOptionsPaneCategory = (categoryNames?: string[]): OptionsPaneCategoryDescriptor => {\n    if (categoryNames?.length) {\n      const key = categoryNames[0];\n      let sub = root.categories.find((v) => v.props.id === key);\n      if (!sub) {\n        sub = new OptionsPaneCategoryDescriptor({ id: key, title: key });\n        root.categories.push(sub);\n      }\n      return sub;\n    }\n    return root;\n  };\n\n  const access: NestedValueAccess = {\n    getValue: (path) => lodashGet(props.options, path),\n    onChange: (path, value) => {\n      props.onChange(setOptionImmutably(props.options as any, path, value));\n    },\n  };\n\n  // Use the panel options loader\n  fillOptionsPaneItems(supplier, access, getOptionsPaneCategory, context);\n  return root;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  selectElement: css({\n    color: theme.colors.text.secondary,\n    padding: theme.spacing(2),\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { SyntheticEvent, useEffect, useRef, useState } from 'react';\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\nimport { Resizable, ResizeCallbackData } from 'react-resizable';\n\nimport { Dimensions2D, GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, Portal, useStyles2 } from '@grafana/ui';\nimport store from 'app/core/store';\nimport { Scene } from 'app/features/canvas/runtime/scene';\n\nimport { InlineEditBody } from './InlineEditBody';\n\ntype Props = {\n  onClose?: () => void;\n  id: number;\n  scene: Scene;\n};\n\nconst OFFSET_X = 10;\nconst OFFSET_Y = 32;\n\nexport function InlineEdit({ onClose, id, scene }: Props) {\n  const root = scene.root.div?.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n  const windowWidth = window.innerWidth;\n  const ref = useRef<HTMLDivElement>(null);\n  const styles = useStyles2(getStyles);\n  const inlineEditKey = 'inlineEditPanel' + id.toString();\n\n  const defaultMeasurements = { width: 400, height: 400 };\n  const widthOffset = root?.width ?? defaultMeasurements.width + OFFSET_X * 2;\n  const defaultX = root?.x ?? 0 + widthOffset - defaultMeasurements.width - OFFSET_X;\n  const defaultY = root?.y ?? 0 + OFFSET_Y;\n\n  const savedPlacement = store.getObject(inlineEditKey, {\n    x: defaultX,\n    y: defaultY,\n    w: defaultMeasurements.width,\n    h: defaultMeasurements.height,\n  });\n  const [measurements, setMeasurements] = useState<Dimensions2D>({ width: savedPlacement.w, height: savedPlacement.h });\n  const [placement, setPlacement] = useState({ x: savedPlacement.x, y: savedPlacement.y });\n\n  // Checks that placement is within browser window\n  useEffect(() => {\n    const minX = windowWidth - measurements.width - OFFSET_X;\n    const minY = windowHeight - measurements.height - OFFSET_Y;\n    if (minX < placement.x && minX > 0) {\n      setPlacement({ ...placement, x: minX });\n    }\n    if (minY < placement.y && minY > 0) {\n      setPlacement({ ...placement, y: minY });\n    }\n  }, [windowHeight, windowWidth, placement, measurements]);\n\n  const onDragStop: DraggableEventHandler = (event, dragElement) => {\n    let x = dragElement.x < 0 ? 0 : dragElement.x;\n    let y = dragElement.y < 0 ? 0 : dragElement.y;\n\n    setPlacement({ x: x, y: y });\n    saveToStore(x, y, measurements.width, measurements.height);\n  };\n\n  const onResizeStop = (event: SyntheticEvent<Element, Event>, data: ResizeCallbackData) => {\n    const { size } = data;\n    setMeasurements({ width: size.width, height: size.height });\n    saveToStore(placement.x, placement.y, size.width, size.height);\n  };\n\n  const saveToStore = (x: number, y: number, width: number, height: number) => {\n    store.setObject(inlineEditKey, { x: x, y: y, w: width, h: height });\n  };\n\n  return (\n    <Portal>\n      <div className={styles.draggableWrapper}>\n        <Draggable handle=\"strong\" onStop={onDragStop} position={{ x: placement.x, y: placement.y }}>\n          <Resizable height={measurements.height} width={measurements.width} onResize={onResizeStop}>\n            <div\n              className={styles.inlineEditorContainer}\n              style={{ height: `${measurements.height}px`, width: `${measurements.width}px` }}\n              ref={ref}\n            >\n              <strong className={styles.inlineEditorHeader}>\n                <div className={styles.placeholder} />\n                <div>Canvas Inline Editor</div>\n                <IconButton\n                  name=\"times\"\n                  size=\"xl\"\n                  className={styles.inlineEditorClose}\n                  onClick={onClose}\n                  tooltip=\"Close inline editor\"\n                />\n              </strong>\n              <div className={styles.inlineEditorContentWrapper}>\n                <div className={styles.inlineEditorContent}>\n                  <InlineEditBody />\n                </div>\n              </div>\n            </div>\n          </Resizable>\n        </Draggable>\n      </div>\n    </Portal>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  inlineEditorContainer: css({\n    display: 'flex',\n    flexDirection: 'column',\n    background: theme.components.panel.background,\n    border: `1px solid ${theme.colors.border.weak}`,\n    boxShadow: theme.shadows.z3,\n    zIndex: 1000,\n    opacity: 1,\n    minWidth: '400px',\n  }),\n  draggableWrapper: css({\n    width: 0,\n    height: 0,\n  }),\n  inlineEditorHeader: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: theme.colors.background.canvas,\n    borderBottom: `1px solid ${theme.colors.border.weak}`,\n    height: '40px',\n    cursor: 'move',\n  }),\n  inlineEditorContent: css({\n    whiteSpace: 'pre-wrap',\n    padding: '10px',\n  }),\n  inlineEditorClose: css({\n    marginLeft: 'auto',\n  }),\n  placeholder: css({\n    width: '24px',\n    height: '24px',\n    visibility: 'hidden',\n    marginRight: 'auto',\n  }),\n  inlineEditorContentWrapper: css({\n    overflow: 'scroll',\n  }),\n});\n","import React, { Component } from 'react';\nimport { ReplaySubject, Subscription } from 'rxjs';\n\nimport { PanelProps } from '@grafana/data';\nimport { locationService } from '@grafana/runtime/src';\nimport { PanelContext, PanelContextRoot } from '@grafana/ui';\nimport { CanvasFrameOptions } from 'app/features/canvas';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { Scene } from 'app/features/canvas/runtime/scene';\nimport { PanelEditEnteredEvent, PanelEditExitedEvent } from 'app/types/events';\n\nimport { SetBackground } from './components/SetBackground';\nimport { InlineEdit } from './editor/inline/InlineEdit';\nimport { Options } from './panelcfg.gen';\nimport { AnchorPoint, CanvasTooltipPayload, ConnectionState } from './types';\n\ninterface Props extends PanelProps<Options> {}\n\ninterface State {\n  refresh: number;\n  openInlineEdit: boolean;\n  openSetBackground: boolean;\n  contextMenuAnchorPoint: AnchorPoint;\n  moveableAction: boolean;\n}\n\nexport interface InstanceState {\n  scene: Scene;\n  selected: ElementState[];\n  selectedConnection?: ConnectionState;\n}\n\nexport interface SelectionAction {\n  panel: CanvasPanel;\n}\n\nlet canvasInstances: CanvasPanel[] = [];\nlet activeCanvasPanel: CanvasPanel | undefined = undefined;\nlet isInlineEditOpen = false;\nlet isSetBackgroundOpen = false;\n\nexport const activePanelSubject = new ReplaySubject<SelectionAction>(1);\n\nexport class CanvasPanel extends Component<Props, State> {\n  declare context: React.ContextType<typeof PanelContextRoot>;\n  static contextType = PanelContextRoot;\n  panelContext: PanelContext | undefined;\n\n  readonly scene: Scene;\n  private subs = new Subscription();\n  needsReload = false;\n  isEditing = locationService.getSearchObject().editPanel !== undefined;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      refresh: 0,\n      openInlineEdit: false,\n      openSetBackground: false,\n      contextMenuAnchorPoint: { x: 0, y: 0 },\n      moveableAction: false,\n    };\n\n    // Only the initial options are ever used.\n    // later changes are all controlled by the scene\n    this.scene = new Scene(\n      this.props.options.root,\n      this.props.options.inlineEditing,\n      this.props.options.showAdvancedTypes,\n      this.props.options.panZoom,\n      this.props.options.infinitePan,\n      this.onUpdateScene,\n      this\n    );\n    this.scene.updateSize(props.width, props.height);\n    this.scene.updateData(props.data);\n    this.scene.inlineEditingCallback = this.openInlineEdit;\n    this.scene.setBackgroundCallback = this.openSetBackground;\n    this.scene.tooltipCallback = this.tooltipCallback;\n    this.scene.moveableActionCallback = this.moveableActionCallback;\n\n    this.subs.add(\n      this.props.eventBus.subscribe(PanelEditEnteredEvent, (evt: PanelEditEnteredEvent) => {\n        // Remove current selection when entering edit mode for any panel in dashboard\n        this.scene.clearCurrentSelection();\n        this.closeInlineEdit();\n      })\n    );\n\n    this.subs.add(\n      this.props.eventBus.subscribe(PanelEditExitedEvent, (evt: PanelEditExitedEvent) => {\n        if (this.props.id === evt.payload) {\n          this.needsReload = true;\n          this.scene.clearCurrentSelection();\n        }\n      })\n    );\n  }\n\n  componentDidMount() {\n    activeCanvasPanel = this;\n    activePanelSubject.next({ panel: this });\n\n    this.panelContext = this.context;\n    if (this.panelContext.onInstanceStateChange) {\n      this.panelContext.onInstanceStateChange({\n        scene: this.scene,\n        layer: this.scene.root,\n      });\n\n      this.subs.add(\n        this.scene.selection.subscribe({\n          next: (v) => {\n            if (v.length) {\n              activeCanvasPanel = this;\n              activePanelSubject.next({ panel: this });\n            }\n\n            canvasInstances.forEach((canvasInstance) => {\n              if (canvasInstance !== activeCanvasPanel) {\n                canvasInstance.scene.clearCurrentSelection(true);\n                canvasInstance.scene.connections.select(undefined);\n              }\n            });\n\n            this.panelContext?.onInstanceStateChange!({\n              scene: this.scene,\n              selected: v,\n              layer: this.scene.root,\n            });\n          },\n        })\n      );\n\n      this.subs.add(\n        this.scene.connections.selection.subscribe({\n          next: (v) => {\n            if (!this.context.instanceState) {\n              return;\n            }\n\n            this.panelContext?.onInstanceStateChange!({\n              scene: this.scene,\n              selected: this.context.instanceState.selected,\n              selectedConnection: v,\n              layer: this.scene.root,\n            });\n\n            if (v) {\n              activeCanvasPanel = this;\n              activePanelSubject.next({ panel: this });\n            }\n\n            canvasInstances.forEach((canvasInstance) => {\n              if (canvasInstance !== activeCanvasPanel) {\n                canvasInstance.scene.clearCurrentSelection(true);\n                canvasInstance.scene.connections.select(undefined);\n              }\n            });\n\n            setTimeout(() => {\n              this.forceUpdate();\n            });\n          },\n        })\n      );\n    }\n\n    canvasInstances.push(this);\n  }\n\n  componentWillUnmount() {\n    this.scene.subscription.unsubscribe();\n    this.subs.unsubscribe();\n    isInlineEditOpen = false;\n    isSetBackgroundOpen = false;\n    canvasInstances = canvasInstances.filter((ci) => ci.props.id !== activeCanvasPanel?.props.id);\n  }\n\n  // NOTE, all changes to the scene flow through this function\n  // even the editor gets current state from the same scene instance!\n  onUpdateScene = (root: CanvasFrameOptions) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      root,\n    });\n\n    this.setState({ refresh: this.state.refresh + 1 });\n    activePanelSubject.next({ panel: this });\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    const { width, height, data, options } = this.props;\n    let changed = false;\n\n    if (width !== nextProps.width || height !== nextProps.height) {\n      this.scene.updateSize(nextProps.width, nextProps.height);\n      changed = true;\n    }\n\n    if (data !== nextProps.data && !this.scene.ignoreDataUpdate) {\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    if (options !== nextProps.options && !this.scene.ignoreDataUpdate) {\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    if (this.state.refresh !== nextState.refresh) {\n      changed = true;\n    }\n\n    if (this.state.openInlineEdit !== nextState.openInlineEdit) {\n      changed = true;\n    }\n\n    if (this.state.openSetBackground !== nextState.openSetBackground) {\n      changed = true;\n    }\n\n    if (this.state.moveableAction !== nextState.moveableAction) {\n      changed = true;\n    }\n\n    // After editing, the options are valid, but the scene was in a different panel or inline editing mode has changed\n    const inlineEditingSwitched = this.props.options.inlineEditing !== nextProps.options.inlineEditing;\n    const shouldShowAdvancedTypesSwitched =\n      this.props.options.showAdvancedTypes !== nextProps.options.showAdvancedTypes;\n    const panZoomSwitched = this.props.options.panZoom !== nextProps.options.panZoom;\n    const infinitePanSwitched = this.props.options.infinitePan !== nextProps.options.infinitePan;\n    if (\n      this.needsReload ||\n      inlineEditingSwitched ||\n      shouldShowAdvancedTypesSwitched ||\n      panZoomSwitched ||\n      infinitePanSwitched\n    ) {\n      if (inlineEditingSwitched) {\n        // Replace scene div to prevent selecto instance leaks\n        this.scene.revId++;\n      }\n\n      this.needsReload = false;\n      this.scene.load(\n        nextProps.options.root,\n        nextProps.options.inlineEditing,\n        nextProps.options.showAdvancedTypes,\n        nextProps.options.panZoom,\n        nextProps.options.infinitePan\n      );\n      this.scene.updateSize(nextProps.width, nextProps.height);\n      this.scene.updateData(nextProps.data);\n      changed = true;\n    }\n\n    return changed;\n  }\n\n  openInlineEdit = () => {\n    if (isInlineEditOpen) {\n      this.forceUpdate();\n      this.setActivePanel();\n      return;\n    }\n\n    this.setActivePanel();\n    this.setState({ openInlineEdit: true });\n    isInlineEditOpen = true;\n  };\n\n  openSetBackground = (anchorPoint: AnchorPoint) => {\n    if (isSetBackgroundOpen) {\n      this.forceUpdate();\n      this.setActivePanel();\n      return;\n    }\n\n    this.setActivePanel();\n    this.setState({ openSetBackground: true });\n    this.setState({ contextMenuAnchorPoint: anchorPoint });\n\n    isSetBackgroundOpen = true;\n  };\n\n  tooltipCallback = (tooltip: CanvasTooltipPayload | undefined) => {\n    this.scene.tooltip = tooltip;\n    this.forceUpdate();\n  };\n\n  moveableActionCallback = (updated: boolean) => {\n    this.setState({ moveableAction: updated });\n    this.forceUpdate();\n  };\n\n  closeInlineEdit = () => {\n    this.setState({ openInlineEdit: false });\n    isInlineEditOpen = false;\n  };\n\n  closeSetBackground = () => {\n    this.setState({ openSetBackground: false });\n    isSetBackgroundOpen = false;\n  };\n\n  setActivePanel = () => {\n    activeCanvasPanel = this;\n    activePanelSubject.next({ panel: this });\n  };\n\n  renderInlineEdit = () => {\n    return <InlineEdit onClose={() => this.closeInlineEdit()} id={this.props.id} scene={this.scene} />;\n  };\n\n  renderSetBackground = () => {\n    return (\n      <SetBackground\n        onClose={() => this.closeSetBackground()}\n        scene={this.scene}\n        anchorPoint={this.state.contextMenuAnchorPoint}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <>\n        {this.scene.render()}\n        {this.state.openInlineEdit && this.renderInlineEdit()}\n        {this.state.openSetBackground && this.renderSetBackground()}\n      </>\n    );\n  }\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { StandardEditorProps, GrafanaTheme2 } from '@grafana/data';\nimport { Alert, HorizontalGroup, Icon, VerticalGroup, useStyles2 } from '@grafana/ui';\n\nconst helpUrl = 'https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/canvas/';\n\nexport const PanZoomHelp = ({}: StandardEditorProps<string, unknown, unknown, unknown>) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <>\n      <HorizontalGroup className={styles.hGroup}>\n        <Alert\n          title=\"Pan and zoom controls\"\n          severity=\"info\"\n          buttonContent={<Icon name=\"question-circle\" size=\"xl\" />}\n          className={styles.alert}\n          onRemove={() => {\n            const newWindow = window.open(helpUrl, '_blank', 'noopener,noreferrer');\n            if (newWindow) {\n              newWindow.opener = null;\n            }\n          }}\n        >\n          <VerticalGroup>\n            <ul>\n              <li>\n                Pan:\n                <ul>\n                  <li>Middle mouse</li>\n                  <li>CTRL + right mouse</li>\n                </ul>\n              </li>\n              <li>Zoom: Scroll wheel</li>\n              <li>Reset: Double click</li>\n            </ul>\n          </VerticalGroup>\n        </Alert>\n      </HorizontalGroup>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  alert: css({\n    '& div': { padding: '4px', alignItems: 'start' },\n    marginBottom: '0px',\n    marginTop: '5px',\n    padding: '2px',\n    'ul > li': { marginLeft: '10px' },\n  }),\n  hGroup: css({\n    '& div': { width: '100%' },\n  }),\n});\n","import { PanelModel } from '@grafana/data';\n\nimport { Options } from './panelcfg.gen';\n\nexport const canvasMigrationHandler = (panel: PanelModel): Partial<Options> => {\n  const pluginVersion = panel?.pluginVersion ?? '';\n\n  // Rename text-box to rectangle\n  // Initial plugin version is empty string for first migration\n  if (pluginVersion === '') {\n    const root = panel.options?.root;\n    if (root?.elements) {\n      for (const element of root.elements) {\n        if (element.type === 'text-box') {\n          element.type = 'rectangle';\n        }\n      }\n    }\n  }\n\n  if (pluginVersion.startsWith('11.0')) {\n    // Migration for v11.0 for ellipse element refactor: https://github.com/grafana/grafana/pull/84205\n    const root = panel.options?.root;\n    if (root?.elements) {\n      for (const element of root.elements) {\n        if (element.type === 'ellipse') {\n          // Take existing ellipse specific background and border config and apply it to the element's general background and border config\n          element.background = element.config.backgroundColor;\n          element.border.color = element.config.borderColor;\n          element.border.width = element.config.width;\n\n          // Remove the ellipse specific background and border config\n          delete element.config.backgroundColor;\n          delete element.config.borderColor;\n          delete element.config.width;\n        }\n      }\n    }\n  }\n\n  return panel.options;\n};\n","import { FieldConfigProperty, PanelOptionsEditorBuilder, PanelPlugin } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { FrameState } from 'app/features/canvas/runtime/frame';\n\nimport { CanvasPanel, InstanceState } from './CanvasPanel';\nimport { getConnectionEditor } from './editor/connectionEditor';\nimport { getElementEditor } from './editor/element/elementEditor';\nimport { getLayerEditor } from './editor/layer/layerEditor';\nimport { PanZoomHelp } from './editor/panZoomHelp';\nimport { canvasMigrationHandler } from './migrations';\nimport { Options } from './panelcfg.gen';\n\nexport const addStandardCanvasEditorOptions = (builder: PanelOptionsEditorBuilder<Options>) => {\n  builder.addBooleanSwitch({\n    path: 'inlineEditing',\n    name: 'Inline editing',\n    description: 'Enable editing the panel directly',\n    defaultValue: true,\n  });\n\n  builder.addBooleanSwitch({\n    path: 'showAdvancedTypes',\n    name: 'Experimental element types',\n    description: 'Enable selection of experimental element types',\n    defaultValue: true,\n  });\n\n  builder.addBooleanSwitch({\n    path: 'panZoom',\n    name: 'Pan and zoom',\n    description: 'Enable pan and zoom',\n    defaultValue: false,\n    showIf: (opts) => config.featureToggles.canvasPanelPanZoom,\n  });\n  builder.addCustomEditor({\n    id: 'panZoomHelp',\n    path: 'panZoomHelp',\n    name: '',\n    editor: PanZoomHelp,\n    showIf: (opts) => config.featureToggles.canvasPanelPanZoom && opts.panZoom,\n  });\n  builder.addBooleanSwitch({\n    path: 'infinitePan',\n    name: 'Infinite panning',\n    description:\n      'Enable infinite panning - useful for expansive canvases. Warning: this an experimental feature and currently only works well with elements that are top / left constrained',\n    defaultValue: false,\n    showIf: (opts) => config.featureToggles.canvasPanelPanZoom && opts.panZoom,\n  });\n};\n\nexport const plugin = new PanelPlugin<Options>(CanvasPanel)\n  .setNoPadding() // extend to panel edges\n  .useFieldConfig({\n    standardOptions: {\n      [FieldConfigProperty.Mappings]: {\n        settings: {\n          icon: true,\n        },\n      },\n    },\n  })\n  .setMigrationHandler(canvasMigrationHandler)\n  .setPanelOptions((builder, context) => {\n    const state: InstanceState = context.instanceState;\n\n    addStandardCanvasEditorOptions(builder);\n\n    if (state && state.scene) {\n      builder.addNestedOptions(getLayerEditor(state));\n\n      const selection = state.selected;\n      const connectionSelection = state.selectedConnection;\n\n      if (selection?.length === 1) {\n        const element = selection[0];\n        if (!(element instanceof FrameState)) {\n          builder.addNestedOptions(\n            getElementEditor({\n              category: [`Selected element (${element.options.name})`],\n              element,\n              scene: state.scene,\n            })\n          );\n        }\n      }\n\n      if (connectionSelection) {\n        builder.addNestedOptions(\n          getConnectionEditor({\n            category: ['Selected connection'],\n            connection: connectionSelection,\n            scene: state.scene,\n          })\n        );\n      }\n    }\n  });\n"],"names":["AddLayerButton","onChange","options","label","HorizontalConstraint","VerticalConstraint","BackgroundImageSize","HttpRequestMethod","ConnectionPath","defaultCanvasConnection","defaultCanvasElementOptions","defaultOptions","QuickPlacement","Align","VAlign","ConnectionDirection","defaultBgColor","defaultTextColor","defaultLightTextColor","defaultThemeTextColor","ParamsEditor","value","paramName","setParamName","paramValue","setParamValue","changeParamValue","currentTarget","changeParamName","removeParam","key","updatedParams","param","addParam","newParams","e","a","b","isAddParamsDisabled","Input","IconButton","entry","callApi","api","updateLoadingStateCallback","requestMatchesGrafanaOrigin","request","getRequest","error","interpolateVariables","text","panel","requestHeaders","url","getData","data","requestEndpoint","requestURL","grafanaURL","dummyStringSettings","httpMethodOptions","contentTypeOptions","APIEditor","context","defaultApiConfig","onEndpointChange","endpoint","onDataChange","onMethodChange","method","onContentTypeChange","contentType","formatCreateLabel","input","onQueryParamsChange","queryParams","onHeaderParamsChange","headerParams","renderJSON","json","JSONFormatter","renderTestAPIButton","Button","InlineFieldRow","InlineField","RadioButtonGroup","Select","Field","variantOptions","ButtonStyleEditor","defaultStyleConfig","onVariantChange","variant","ButtonDisplay","styles","getStyles","isLoading","setIsLoading","loading","onClick","Spinner","theme","buttonItem","dimensionContext","elementOptions","buttonConfig","getAPIConfig","builder","category","TextDimensionEditor","NotFoundDisplay","config","notFoundItem","counter","SVGElements","ElementState","item","parent","target","event","hasHorizontalCenterConstraint","hasVerticalCenterConstraint","height","yOffset","rotationDelta","placement","calculatedRotation","transformScale","style","deltaX","deltaY","dirLR","dirTB","rotationInRadians","originalDirLR","originalDirTB","isSelected","scene","rect","fallbackName","newName","trav","disablePointerEvents","constraint","vertical","horizontal","translate","elementType","elementContainer","parentContainer","parentBorderWidth","rotationTopOffset","rotationLeftOffset","rotationDegrees","rotationRadians","rotationOffset","calculateDelta","dimension1","dimension2","relativeTop","relativeBottom","relativeLeft","relativeRight","width","elementCenter","distanceFromCenter","ctx","background","border","css","color","image","v","visitor","canvasElementRegistry","oldName","isConnectionTarget","getConnectionsByTarget","connection","div","LayerActionID","InlineEditTabs","LineStyle","StrokeDasharray","doSelect","element","selection","FrameState","targetElements","getElementTypes","shouldShowAdvancedTypes","current","getElementTypesOptions","defaultElementItems","advancedElementItems","items","selectables","alpha","option","onAddItem","sel","rootLayer","anchorPoint","newItem","newElementOptions","newElement","addDataLinkForField","field","linkLookup","links","disp","valueRowIndex","link","getDataLinks","frames","elementConfig","frame","visibleFields","isTextTiedToFieldData","isTextColorTiedToFieldData","isElementBackgroundColorTiedToFieldData","isElementBackgroundImageTiedToFieldData","isElementBorderColorTiedToFieldData","isIconSVGTiedToFieldData","isIconColorTiedToFieldData","isWindTurbineRPMTiedToFieldData","isServerBlinkRateTiedToFieldData","isServerStatusColorTiedToFieldData","isServerBulbColorTiedToFieldData","isConnectionSource","sceneByName","getConnections","connections","c","index","updateConnectionsForSource","con","calculateCoordinates","sourceRect","parentRect","info","sourceHorizontalCenter","sourceVerticalCenter","x1","y1","x2","y2","targetRect","targetHorizontalCenter","targetVerticalCenter","parentHorizontalCenter","parentVerticalCenter","calculateMidpoint","calculateAbsoluteCoords","valueX","valueY","calculateAngle","calculateDistance","getRowIndex","fieldName","f","getConnectionStyles","defaultArrowSize","defaultArrowDirection","defaultArrowColor","lastRowIndex","strokeColor","strokeWidth","strokeRadius","arrowDirection","lineStyle","getParentBoundingClientRect","getTransformInstance","getParent","cloudItem","props","uniqueId","textConfig","ColorDimensionEditor","textTop","textLeft","textTransform","droneFrontItem","droneFrontTransformStyle","droneFrontConfig","droneSideItem","droneSidePitchTransformStyle","droneSideConfig","droneTopItem","fRightRotorAnimation","fLeftRotorAnimation","bRightRotorAnimation","bLeftRotorAnimation","droneTopTransformStyle","droneTopConfig","ellipseItem","svgStrokePathClass","IconDisplay","svgStyle","SanitizedSVG","iconItem","iconConfig","path","dummyFieldSettings","MetricValueDisplay","panelData","isEditMode","useObservable","of","getDisplayValue","fieldNotFound","fieldNames","MetricValueEdit","onFieldChange","selectedElement","FieldNamePicker","metricValueItem","parallelogramItem","RectangleDisplay","stylesFactory","rectangleItem","ServerDatabase","getServerStyles","ServerSingle","ServerStack","ServerTerminal","ServerType","outlineColor","serverItem","serverConfig","TextDisplay","TextEdit","textRef","saveText","onKeyDown","onKeyUp","textValue","textItem","triangleItem","windTurbineItem","windTurbineAnimation","windTurbineConfig","DEFAULT_CANVAS_ELEMENT_CONFIG","Registry","DEFAULT_OFFSET","HORIZONTAL_OFFSET","frameItemDummy","action","updateName","shiftItemsOnDuplicate","opts","oldPlacement","copy","elements","elem","startIndex","endIndex","result","removed","src","dest","firstPosition","srcIndex","destIndex","child","vals","prefixNames","prefix","classNames","_i","className","name","prefixCSS","_","selector","refs","i","Properties","properties","component","prototype","property","withMethods","methods","duplicate","propertyName","methodName","_a","args","RGB","RGBA","HSL","HSLA","COLOR_MODELS","FUNCTION","PROPERTY","ARRAY","OBJECT","STRING","NUMBER","UNDEFINED","IS_WINDOW","doc","prefixes","getCrossBrowserProperty","length","TRANSFORM","FILTER","ANIMATION","KEYFRAMES","OPEN_CLOSED_CHARACTERS","TINY_NUM","REVERSE_TINY_NUM","DEFAULT_UNIT_PRESETS","pos","size","__spreadArrays","s","il","r","k","j","jl","dot","a1","a2","b1","b2","isUndefined","isObject","isArray","isEqualSeparator","character","separator","isCharacterSpace","isSeparatorSpace","findOpen","openCharacter","texts","openCloseCharacters","isIgnore","findIgnore","findClose","otherText","closeCharacter","_loop_1","nextIndex","open","out_i_1","state_1","splitText","splitOptions","_b","isSeparateFirst","isSeparateOnlyOpenClose","_c","isSeparateOpenClose","_d","openClosedText","close","regexText","regex","chr","values","tempValues","resetTemp","_loop_2","out_i_2","nextOpenCloseCharacters","state_2","splitSpace","splitComma","splitBracket","matches","splitUnit","unit","camelize","str","all","letter","letter2","toArray","now","findIndex","arr","callback","defaultIndex","findLastIndex","findLast","defalutValue","firstTime","raf","currTime","id","caf","handle","getKeys","obj","getValues","keys","sortOrders","orders","index1","index2","convertUnitSize","sizeFunction","between","min","max","checkBoundSize","targetSize","compareSize","isMax","ratio","throttle","defaultSize","throttledSize","calculateBoundSize","minSize","maxSize","keepRatio","minWidth","minHeight","maxWidth","maxHeight","sum","nums","total","getRad","pos1","pos2","distX","distY","rad","getCenterPoint","points","getShapeDirection","center","pos1Rad","pos2Rad","num","reverseUnit","throttleArray","replaceOnce","fromText","toText","isOnce","flat","prev","cur","deepFlat","cutHex","hex","hexToRGBA","h","g","toFullHex","hslToRGBA","hsl","l","x","m","rgb","stringToRGBA","colorArr","$","selectors","multi","hasClass","addClass","removeClass","reg","fromCSS","cssObject","getWindow","addEvent","el","type","listener","removeEvent","getDocument","getDocumentElement","getDocumentBody","isWindow","val","isNode","PolyMap","__proto","prevIndex","HashMap","SUPPORT_MAP","Link","prevLink","nextLink","orderChanged","changed","fixed","fromLinks","toLinks","from","to","fromLink","toLink","fromIndex","toIndex","Result","prevList","list","added","maintained","changedBeforeAdded","ordered","pureChanged","fromBefore","toBefore","diff","findKeyCallback","mapClass","prevKeys","prevKeyMap","keyMap","removedMap","addedCount","removedCount","prevListIndex","listIndex","ListDiffer","newData","extendStatics","d","p","__extends","__","__assign","t","n","__rest","__spreadArray","pack","ar","fillKeys","arr2","fillProps","defaultProps","name_1","isDiff","getAttributes","otherProps","splitProps","attributes","events","name_2","findContainerNode","provider","base","removeNode","node","parentNode","executeHooks","hooks","hook","renderFunctionComponent","hooksIndex","Provider","ref","ps","contexts","nextElement","nextState","isForceUpdate","self","currentDepth","scheduledContexts","scheduledSubs","isContextUpdate","nextChildSubs","childs","sub","depth","renderProviders","prevProps","setCurrentInstance","fr","getCurrentInstance","getHooksIndex","setHooksInex","nextHooksIndex","Component","state","prevState","isUpdate","PureComponent","_super","createRef","defaultValue","refCallback","forwardRef","func","createComponent","contextValue","ComponentProvider","container","_this","nextProps","isMount","contextType","template","nextContexts","ef","def","diffAttributes","attrs1","attrs2","diffObject","name_3","diffEvents","events1","events2","provier","name_4","name_5","keys1","keys2","diffStyle","style1","style2","beforeName","name_6","name_7","name_8","getNativeEventName","ElementProvider","isRemove","eventName","contextValues","containerNode","isSVG","prevAttributes","prevEvents","nextAttributes","nextEvents","name_9","findDOMNode","comp","providers","findNodeProvider","children","ContainerProvider","TextProvider","diffProviders","containerProvider","childrenKeys","childrenProvider","next","createProvider","childProvider","getNextSibiling","childProviders","providerClass","updatedHooks","hyd","updated","nodeProvider","renderProvider","isProvider","render","renderSelf","createContext","$_subs","Consumer","getContext","mainComponent","subs","Portal","createPortal","_renderToString","parentContexts","stringProps_1","styleName","styleValue","strings","renderToString","renderSelfToString","checkHookInfo","inst","prevHt","defaultFunction","deps","contextId","providerComponent","st","nextValue","effect","unshift","effects","useImperativeHandle","some","getUserAgent","agent","userAgent","execRegExp","pattern","hasUserAgentData","userAgentData","brands","findVersion","versionTest","convertVersion","findPreset","presets","userPreset","version","preset","findPresetBrand","brandInfo","findBrand","brand","BROWSER_PRESETS","CHROMIUM_PRESETS","WEBKIT_PRESETS","WEBVIEW_PRESETS","OS_PRESETS","parseUserAgentData","osData","isMobile","firstBrand","browser","os","chromiumBrand","webkitBrand","platform_1","browserBrand","parseUserAgent","nextAgent","browserPreset","browserVersion","osPreset","osVersion","chromiumPreset","webkitPreset","getAccurateAgent","agentInfo","add","matrix","inverseMatrix","fromX","swap","iv","divide","ignoreDimension","newMatrix","invert","createIdentityMatrix","identityIndex","targetStartIndex","targetIndex","transpose","getOrigin","originMatrix","w","fromTranslation","convertPositionMatrix","convertDimension","multiplies","matrixes","multiply","matrix2","plus","nextPos","minus","convertCSStoMatrix","is2d","convertMatrixtoCSS","calculate","rotateX3d","rotateY3d","rotateZ3d","createRotateMatrix","scale3d","sx","sy","sz","rotate","translate3d","tx","ty","tz","matrix3d","matrix1","cos","sin","createScaleMatrix","scale","createOriginMatrix","origin","createWarpMatrix","pos0","pos3","nextPos0","nextPos1","nextPos2","nextPos3","x0","y0","x3","y3","u0","v0","u1","v1","u2","v2","u3","v3","getCenter","createMatrix","parseMat","transform","toMat","parse","getElementMatrix","calculateMatrixDist","res","getDistElementMatrix","matrixInfos","matrixFunction","functionValue","transforms","functionName","nextSize_1","posX","posY","posZ","nextSize","_e","_f","_g","_h","unitValue","childrenCount","ChildrenDiffer","EventEmitter","resolve","isStop","listeners","getDefaultScrollPosition","checkDefaultScrollEvent","getContainerElement","DragScroll","inputEvent","top","left","clientX","clientY","threshold","_startRect","_startPos","direction","prevScrollPos","throttleTime","isDrag","nextScrollPos","offsetX","offsetY","nextDirection","getScrollPosition","useScroll","nowTime","distTime","checkScrollEvent","tinyThrottle","isSameConstants","linearConstants1","linearConstants2","isSamePoint","point1","point2","getAreaSize","point","nextPoint","fitPoints","getMinMaxs","minX","minY","maxX","maxY","ratioX","ratioY","xs","ys","isInside","excludeLine","y","xLine","xLinearConstants","getLinearConstants","lines","convertLines","intersectionPosInfos","line","linearConstants","standardPoint","xPoints","getPointsOnLines","getIntersectionPointsByConstants","linePoint","intersectionCount","xMap","prevValue","getDistanceFromPointToConstants","dx","dy","c1","c2","isZeroA","isZeroB","results","getIntersectionPoints","line1","line2","isLimit","isPointOnLine","minMaxs","order","minMax","right","bottom","pointX","pointY","getOverlapPointInfos","points1","points2","targetPoints1","targetPoints2","lines1","lines2","linearConstantsList1","linearConstantsList2","overlapInfos","linePointInfos","intersectionPoints","isNext","pointMap","getOverlapPoints","infos","isConnectedLine","prevIndex1","prevIndex2","nextIndex1","nextIndex2","getOverlapAreas","areas","area","findReversedAreas","isFirst","nextPoints1","nextArea","areaPoint","nextPoint2","point2Index","findConnectedAreas","getUnoverlapAreas","overlapAreas","unoverlapAreas","overlapArea","nextOverlapArea","connectedAreas","firstConnectedArea","lastPoint_1","firstPoint","firstIndex","getOverlapSize","getRotatiion","touches","isMultiTouch","getEventClients","getClients","getClient","isMouseEvent","getPosition","clients","prevClients","startClients","getAverageClient","originalClientX","originalClientY","prevX","prevY","startX","startY","sumClient","minLength","client","ClientStore","isAdd","position","positions","movement","currentClient","prevClient","INPUT_TAGNAMES","Gesto","targets","isTrusted","isDragAPI","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","dragFocusedInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","useTouch","isDragStart","activeElement","tagName","hasInput","hasContentEditable","activeTagName","timer","isScroll","dragResult","clientsLength","currentTime","isDouble","firstTarget","checkWindowBlur","passive_1","isCallDrag","store","nextClients","currentData","pinchThreshold","isPinch","isPrevDrag","isFirstDrag","storePosition","win","passive","hash","stringHash","getHash","getShadowRoot","parentElement","rootNode","replaceStyle","trimmedSelector","subSelector","trimmedSubSelector","injectStyle","shadowRoot","styled","injectClassName","styleElement","count","injectCount","StyledElement","defaultStyled","tag","injector","Styled","Tag","cssId","cspNonce","targetRef","injectResult","__decorate","decorators","desc","__values","o","__read","makeAble","able","DIRECTIONS4","DIRECTIONS","getSVGCursor","degree","getCursorCSS","degree45","defaultCursor","IS_WEBKIT","IS_WEBKIT605","navi","browserName","IS_CHROME","IS_CHROMIUM","chromiumVersion","IS_CHROMIUM109","IS_FIREFOX","IS_SAFARI_ABOVE15","PREFIX","directionCSS","dir","originX","originY","offset","MOVEABLE_CSS","NEARBY_POS","FLOAT_POINT_NUM","MIN_SCALE","MAX_NUM","MIN_NUM","DIRECTION_REGION_TO_DIRECTION","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","delta","isConvert","ableName","datas","ableDatas","convertDragDist","CustomGesto","originalDatas","calculateElementPosition","is3d","poses","calculatePoses","x4","y4","calculatePosition","sign","calculatePointerDist","moveable","moveableClientRect","rootMatrix","calculateInversePosition","getDragDist","setDragStart","allMatrix","beforeMatrix","offsetMatrix","targetMatrix","transformOrigin","getTransformDirection","resolveTransformEvent","nextTransforms","nextTransformAppendedIndexes","convertTransformInfo","targetFunction","matFunctionName","convertTransformFormat","dist","getTransformDist","getBeforeDragDist","bx","by","getTransfromMatrix","isAfter","beforeTransform","afterTransform","beforeTransform2","afterTransform2","targetAllTransform","nextTargetMatrix","res1","afterTargetMatrix","inverseBeforeMatrix","startDragBeforeDist","absoluteOrigin","isBefore","startDragDist","getInverseDragDist","calculateTransformOrigin","prevWidth","prevHeight","prevOrigin","prevSize","measureRatio","getPosIndexesByDirection","indexes","getPosesByDirection","getPosBySingleDirection","getPosByDirection","startPos","fixedDirection","fixedPos","getNextMatrix","getAbsoluteMatrix","getNextTransformMatrix","isAllTransform","targetTransform","scaleMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransformIndex","setDefaultTransformIndex","startTransforms","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","fillTransformEvent","nextTransform","drag","Draggable","fillCSSObject","getTranslateFixedPosition","fixedOffset","nextMatrix","nextFixedPosition","getDirectionOffset","getTranslateDist","fixedPosition","groupable","groupLeft","groupTop","getScaleDist","getDirectionByPos","fixedOffsetPosition","getRotateDist","rotateDist","getResizeDist","nextOrigin","getAbsolutePosition","getAbsolutePosesByState","getGestoData","targetGesto","controlGesto","getIndividualTransforms","getStyle","individualTransforms","getMatrixStackInfo","checkContainer","documentElement","requestEnd","isEnd","targetTransformOrigin","hasFixed","offsetContainer","getOffsetInfo","zoom","getCachedStyle","getElementTransform","isFixed","getTransformMatrix","offsetParent","isOffsetEnd","isStatic","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","fixedInfo","getPositionFixedInfo","length_1","convert3DMatrixes","getOffsetPosInfo","hasOffset","origin_1","targetOrigin","offsetPos","offsetLeft","offsetTop","getSVGMatrix","targetZoom","offsetInfo","offsetZoom","parentSlotElement","customOffsetParent","customOffsetLeft","customOffsetTop","margin","getBodyOffset","isElementTarget","scrollLeft","scrollTop","cacheStyleMap","clientRectStyleMap","matrixContainerInfos","setStoreCache","useCache","getCachedClientRect","clientRect","nextClientRect","getClientRect","getCachedMatrixContainerInfo","result_1","cache","nextStyle_1","cached","fillChildEvents","groupableDatas","childDatas","triggerChildGesto","isStart","moveables","childEvents","eventParams","ev","childMoveable","gestos","childEvent","triggerChildAbles","eachEvent","startChildDist","parentDatas","startPositions","originalX","originalY","renderDirectionControlsByInfos","renderDirections","React","renderPoses","rotationRad","getProps","degRotation","absDegree","directionMap","renderState","renderDirectionMap","directionSign","directionRotation","dataAttrs","getControlTransform","renderDirectionControls","defaultDirections","directions","displayAroundControls","renderAroundControls","renderLine","rotation","getLineStyle","renderEdgeLines","edge","getRenderDirections","renderDiagonalDirections","renderAllDirections","checkBoundPoses","bounds","verticalPoses","horizontalPoses","nextBounds","checkBounds","getBounds","externalBounds","containerHeight","containerWidth","clientLeft","clientTop","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","checkBoundKeepRatio","endPos","endX","endY","abs","isBottom","isRight","verticalInfo","horizontalInfo","isBound","isVertical","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","isBoundRotate$1","relativePoses","boundRect","nextPoses","boundRotate","vec","boundPos","getDistSize","checkRotateBounds","prevPoses","relativeRad1","relativeRad2","nextRad","VERTICAL_NAMES","HORIZONTAL_NAMES","SNAP_SKIP_NAMES_MAP","VERTICAL_NAMES_MAP","HORIZONTAL_NAMES_MAP","getInitialBounds","hasGuidelines","snappable","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","mapSnapDirectionPoses","snapPoses","nextSnapDirections","nextSnapPoses","splitSnapDirectionPoses","horizontalNames","verticalNames","calculateContainerPos","containerRect","clientPos","solveLineConstants","NAME_snapRotationThreshold","NAME_snapRotationDegrees","NAME_snapHorizontalThreshold","NAME_snapVerticalThreshold","checkMoveableSnapPoses","posesX","posesY","dirXs","dirYs","customSnapVerticalThreshold","customSnapHorizontalThreshold","snapThresholdMultiples","snapHorizontalThreshold","selectValue","snapVerticalThreshold","checkSnapPoses","multiples","checkSnap","checkSnapKeepRatio","getTinyDist","verticalSnapInfo","horizontalSnapInfo","getNearestSnapGuidelineInfo","isVerticalSnap","verticalGuideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","isSnap","getStringDirection","stringDirection","checkSnaps","horizontalDirection","verticalDirection","snapInfo","posInfo","guidelineInfo","guideline","targetType","targetPoses","snapThreshold","dirs","posType","snapPosInfos","targetPos","guidelineInfos","snapPosInfo","getSnapInfosByDirection","snapDirection","nextDir","checkSnapBoundPriority","aDist","bDist","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","getCheckSnapDirections","endDirection_1","signX","signY","signs","isStartLine","cx","cy","hitTestLine","test1","test2","isSameStartLine","dots","centerSign","checkInnerBoundDot","start","end","checkInnerBound","verticalSign","horizontalSign","lineConstants","leftLine","topLine","rightLine","bottomLine","topBoundInfo","checkLineBoundCollision","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isVerticalBound","isAllHorizontalBound","isHorizontalBound","verticalOffset","maxOffset","horizontalOffset","isAllBound","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","dx2","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","multiple","sizeOffset","getInnerBoundDragInfo","getCheckInnerBoundLineInfos","innerBoundInfo","widthOffsetInfo","heightOffsetInfo","getCheckSnapLineDirections","lineDirections","virtualPoses","dir1","dir2","virtualLine","isBoundRotate","boundDots","getDistPointLine","solveReverseLine","checkRotateInnerBounds","dotInfos","lineRad","lineDist","dotDist","dotRad","distRad","nextRad1","nextRad2","checkInnerBoundPoses","boundMap","pos4","lineInfo","isHorizontalStart","isVerticalStart","solveEquation","snapOffset","solveNextOffset","dist1","dist2","isOutside","widthOffset","heightOffset","getSnapBound","boundInfo","checkThrottleDragRotate","throttleDragRotate","adjustPoses","adjustPos","prevDistY","checkSnapBoundsDrag","ignoreSnap","getAbsolutePoses","getRect","boundPoses","checkMoveableSnapBounds","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","horizontalBoundInfos","verticalBoundInfos","horizontalDist","verticalDist","checkSnapBounds","guideines","checkSnapRightLine","snapBoundInfo","rad180","isHorizontalLine","isVerticalLine","getSnapBoundInfo","isRequest","startDirection","endDirection","otherStartPos","otherEndPos","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","getSnapBoundOffset","horizontalBoundInfo","verticalBoundInfo","checkMaxBounds","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","deg","nextOtherPos","isHeightOutside","isWidthOutside","hideThrottleDragRotateLine","dragInfo","beforeOrigin","parentEvent","parentGesto","startCheckSnapDrag","params","fillParams","triggerEvent","parentFlag","deltaOffset","useSnap","isGroup","parentThrottleDrag","prevDist","prevBeforeDist","startValue","parentMoveable","throttleDrag","dragRotateRad","startDragRotate","ry","rx","beforeTranslate","beforeDist","beforeDelta","fillEndParams","nextParams","passDelta","getFixedDirectionInfo","getOffsetFixedDirectionInfo","nextFixedOffset","getOffsetFixedPositionInfo","offsetFixedPosition","directionCondition$2","getDirectionCondition","Resizable","getDirectionViewClassName","parentDirection","parentFixedDirection","getTotalDirection","setRatio","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","startWidth","startHeight","parentKeepRatio","dragClient","parentDist","resolveMatrix","isResize","startOffsetWidth","startOffsetHeight","isWidth","startOffsetMatrix","startTransformOrigin","targetN","nextAllMatrix","resizeFormat","throttleResize","keepRatioFinally","sizeDirection","distWidth","distHeight","getNextBoundingSize","getOffsetSizeDist","nextWidth","nextHeight","boundingWidth","boundingHeight","nextFixedDirection","snapDist","checkSnapResize","computeSize","isNoSnap","inverseDelta","fillAfterTransform","errorWidth","errorHeight","isErrorWidth","isErrorHeight","originalEvents","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","catchEvent","parentScale","setRotateStartInfo","startAbsoluteOrigin","getAbsoluteDist","defaultDeg","prevDeg","normalizedPrevDeg","loop","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","prevSnapDeg","snapRotation","checkSnapRotate","snapDeg","getRotationPositions","rotationPosition","radPoses","getRotationRad","isReverse","dragControlCondition","rotationTarget","getRefTargets","Rotatable","rotatable","rotateAroundControls","resolveAblesWithRotatable","jsxs","ables","resolveMap_1","directionControlInfos","parentRotate","beforeDirection","resizeStart","startClientX","startClientY","externalRotate","inputTarget","regionDirection","controlDirection","clientPoses","calculateMoveableClientPositions","originalFixedPosition_1","fixedBeforeOrigin","fixedAfterOrigin","posDelta","dragStart","resolveAble","getTotalOrigin","rotatation","clientDistX","clientDistY","groupDelta","beforeInfo","afterInfo","absoluteInfo","isRotate","targetDirection","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","startRotation","absoluteStartRotation","nextClientX","nextClientY","nextRotation","inverseDist","dragEvent","transformEvent","parentDistance","resize","resizeEvent","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","prevClientX","prevClientY","distRotate","renderGuideline","isHorizontal","scaleType","renderInnerGuideline","renderSnapPoses","renderPos","renderGuidelines","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","groupByElementGuidelines","otherIndex","names","groupBy","nextGuidelines","inner","elementRect1","elementRect2","renderDashedGuidelines","rendered","groups","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","renderGapGuidelines","targetSideStart","targetSideEnd","gapRects","sideStartPos","sideEndPos","sideCenterPos","getTotalGuidelines","containerClientRect","overflow","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","isDisplayGridGuidelines","elementGuidelines","getElementGuidelines","totalGuidelines","getGapGuidelines","getGridGuidelines","getDefaultGuidelines","checkBetweenRects","snapThresholds","maxSnapElementGapDistance","elementRects","gapGuidelines","targetCenter","targetStart2","targetEnd2","snapThresholdMap","getDist","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","startGridGroupGuidelines","snapGridAll","snapRenderInfo","hasDirection","rect_1","children_1","posName","clientOffset","rectSize","rectPos","childSizes","firstChildSize","childSnapSizes","rectRatio","childSize","startOffset","snapThresholdInfo","defaultSnapGridWidth","defaultSnapGridHeight","pushGuideline","distance","prevValues","snapRect","nextElementGuidelines","getRefTarget","nextValues","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","rectTop","rectLeft","sizes","getObjectGuidelines","containerSize","posGuideline","snapWidth","snapHeight","offsetDelta","containerLeft","containerTop","elementLeft","elementTop","elementRight","elementBottom","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","offset1","getDragDistByState","offset2","getNextFixedPoses","nextFixedPos","normalized","getSizeOffsetInfo","innerBoundLineInfos","recheckSizeByTwoDirection","snapPos","nextWidthOffset","nextHeightOffset","checkSizeDist","getNextPoses","isWidthBound","isHeightBound","widthDist","heightDist","isGetWidthOffset","bumpDegree","baseDeg","deg1","deg2","getMinDegreeDistance","deg3","snapRotationThreshold","snapRotationDegrees","origin2_1","rad_1","sorted","firstDegree","checkSnapScale","sizeDist","getSnapGuidelines","posInfos","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","innerBoundMap","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition$1","Snappable","targetTop","targetLeft","snapRenderThreshold","watchValue","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","nextBoundMap","nextInnerBoundMap","multiply2","defaultSync","fn","measureSVGSize","viewBox","getSVGViewBox","getBeforeTransformOrigin","relativeOrigin","getTransformOrigin","getTransformOriginArray","computedTransform","baseVal","lastParent","isParent","checkZoom","getTargetStyle","hasSlot","assignedSlotParentElement","isCustomElement","targetPosition","willChange","slotParentNode","targetParentNode","getSVGGraphicsOffset","getBodyStyle","bodyPosition","marginLeft","marginTop","fixedContainer","hasTransform","body","makeMatrixCSS","clientWidth","clientHeight","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","xAlign","yAlign","scaleDimension","isGTarget","isFillBox","bbox","rectWidth","rectHeight","calculateRect","getSVGOffset","targetInfo","getSize","mat","prevLeft","prevTop","posOrigin","rectOrigin","mat2","nextLeft","nextTop","distLeft","distTop","rootClientRect","rootPoses","getDiagonalSize","offsetWidth","offsetHeight","cssWidth","cssHeight","contentWidth","contentHeight","minOffsetWidth","minOffsetHeight","maxOffsetWidth","maxOffsetHeight","inlineCSSWidth","inlineCSSHeight","svg","targetStyle","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","horizontalPadding","verticalPadding","horizontalBorder","verticalBorder","getParentStyle","resetClientRect","getExtendsRect","isRoot","extendsRect","getClientRectByPosition","isExtends","baseTop","baseLeft","convertTransformOriginArray","getDirection","direciton","unsetAbles","isControl","unsetGesto","gestoName","gesto","resolvedEvent","prevEvent","nextEvent","isBeforeEvent","isManager","pseudoElt","filterAbles","triggerAblesSimultaneously","enabledAbles","ableGroups","equals","groupKeys","groupKey","keyIndex","group","groupByMap","calculatePadding","xAdded","yAdded","nextAdded","convertCSSSize","isRelative","checkAbles","beforeFunctionTexts","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts","afterFunctionTexts2","beforeFunctions","beforeFunctions2","afterFunctions","afterFunctions2","targetFunctions","beforeFunctionMatrix","beforeFunctionMatrix2","afterFunctionMatrix","afterFunctionMatrix2","allFunctionMatrix","isArrayFormat","isSelector","userTargets","getAbsoluteRotation","getSizeDistByDist","startSize","standardRad","signSize","startWidthSize","startHeightSize","secondRad","firstRad","distSize","pinchScale","startFixedDirection","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","rotatePosesInfo","isDeepArrayEquals","arr1","value1","value2","isArray1","isArray2","valueKey","countEach","getPaddingBox","padding","Pinchable","angle","pinchable","controlEventName","pinchAbles","ableEvent","directionCondition","Scalable","setMinScaleSize","setMaxScaleSize","isScale","throttleScale","tempScaleValue","getNextScale","stateDirection","nextScale","distSign","isSelfPinch","startOffsetSize","scaleSize","distText","scaleText","isZeroScale","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","rad2","isValidPos","poses1","poses2","pi","Warpable","resizable","scalable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","targetInverseMatrix","prevMatrix","isWarp","posIndexes","absolutePoses","selectedPoses","nearByPoses","afterMatrix","totalMatrix","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","renderPieces","DragArea","dragArea","passDragArea","areaElement","rects","Origin","originStyle","scrollContainer","Scrollable","scrollOptions","dragScroll","scrollContainerElement","scrollThreshold","scrollThrottleTime","Default","Padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","raws","rawPos","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","_j","swValue","_k","_l","wnValue","_m","enValue","_o","esValue","_p","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","removeRadiusPos","radiuslIndex","deleteCount","addRadiusPos","horizontalIndex","verticalIndex","radiusX","radiusY","startVerticalIndex","splitRadiusPoses","horizontals","verticals","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clipPrefix","splitter","xPos","yPos","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","roundIndex","rectLength","radiusValues","_q","_r","_s","top_2","_t","nextRight","nextBottom","_u","posValue","top_3","moveControlPos","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","fixedIndex","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","addClipPath","clipIndex","clipStyle","removeClipPath","Clippable","customClipPath","defaultClipPath","clipArea","clipPathState","snapBoundInfos","calculatedPos","controls","isInset","isPolygon","linePoses_1","clipLeft","clipTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","dragWithClip","isDragTarget","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","guidePoses","isEllipse","guideRect","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","snapOffsetY","snapOffsetX","distSnapX","distSnapY","width_1","height_1","nextControlPoses_2","nextClipStyles","dragDist","isClipStart","OriginDraggable","originRelative","distOrigin","dragDelta","addBorderRadiusByLine","lineIndex","horizontalsLength","virtual","verticalsLength","controlIndex","controlPoseInfo","addBorderRadius","removeBorderRadius","getBorderRadius","borderRadius","triggerRoundEvent","getStyleBorderRadius","firstMoveable","Roundable","roundClickable","borderRadiusState","minRoundControls","maxRoundControls","roundPadding","isDisplayShadowRoundControls","verticalCount","horizontalCount","basePos","originalPos","isDisplayVerticalShadow","isDisplay","indexAttr","roundRelative","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","isIdentityMatrix","identityMatrix","BeforeRenderable","inlineTransform","cssMatrix","startTransform","Renderable","transformObject","matrixInfo","triggerAble","moveableAbles","eventOperations","eventAffix","eventType","requestInstant","requestAble_1","isDragStop","stop","isFirstStart","gestoType","prevGesto","trigger","conditionName","nextDatas","forceEndedCount","updatedCount","eventOperation","eventAbles","isForceEnd","flushSync","checkMoveableTarget","eventTarget","dragTargetElement","getTargetAbleGesto","moveableTarget","controlBox","dragTarget","checkTarget","getAbleGesto","getControlAbleGesto","checkControlTarget","ableType","conditionFunctions","isTargetAbles","preventClickDefault","dragContaienrOption","dragContainer","isPinchScheduled","EventManager","calculateMatrixStack","rootContainer","isAbsolute3d","prevTargetMatrix","containerZoom","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","nextRootMatrixes","originalRootContainer","endContainer","rootMatrixBeforeOffset","nextInfo","isMatrix3d","originalRootMatrix","calculateElementInfo","allResult","getElementInfo","getMoveableTargetInfo","moveableElement","requestStyles","targetClientRect","rootContainerClientRect","getStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","getPersistState","MoveableManager","parentPosition","propsTarget","translateZ","ControlBoxElement","linePadding","controlPadding","stateTarget","groupTargets","isDragging","ableAttributes","ableClassName","isVisible","viewContainer","manager","wrapperMoveable","totalSize","isTarget","isSetState","isSingle","persistState","statePos","isInstant","allAbles","requsetAble","ableRequester","requester","ableParam","originalBeforeOrigin","stateLeft","stateTop","isPersisted","renderPos3","renderPos4","zoomOffset","stateContainer","isTargetChanged","isChanged","moveableContainer","customStyleMap","hasControlBox","persistData","firstRenderState","pinchStart","dragControlStart","targetAbles","controlAbles","Renderer","styleNames","ableStyleNames","hasTargetAble","hasControlAble","isUnset","hideDefaultLines","hideChildMoveableDefaultLines","useDragArea","nextTarget","prevTarget","prevDragArea","isDragTargetChanged","isDragAreaChanged","eventKeys","hasAbles","viewContainerOption","nextClassNames","prevClassNames","classPrefix","targetGestoData","controlGestoData","observer","records","e_1","records_1","records_1_1","mutation","e_1_1","Groupable","renderGroupRects","persistDatChildren","Clickable","isMoveableElement","containsElement","containsTarget","parentTarget","getDraggableEvent","edgeDraggable","IndividualGroupable","MOVEABLE_ABLES","MOVEABLE_EVENTS","MOVEABLE_PROPS","solveConstantsDistance","solveC","getMaxPos","getMinPos","getGroupRect","parentPoses","fixedRotation","a1_1","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","minX_1","minY_1","maxX_1","maxY_1","changedX","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","MoveableGroup","checkeds","targetGroups","moveableGroups","useDefaultGroupRotate","finded","isReset","defaultGroupRotate","persistedRoatation","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","rootGroupRect","posesInfo","rotateScale","isContainerChanged","MoveableIndividualGroup","canPersist","individualProps","controlBoxElement","dragElement","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","cssMap","moveableContructor","userAbles","userProps","nextSelectorMap","totalAbles","prevMoveable","target_1","prevTargetMoveable","mv","resolvePromise","isBrowser","updateSelectorMap","selectorTarget","Moveable","makeMoveable","InnerMoveable","PROPERTIES","METHODS","EVENTS","nextOptions","selfElement","innerMoveable","createCommonjsModule","module","keycode","exports","keyCode","searchInput","hasKeyCode","search","foundNamedKey","codes","aliases","nameOrCode","alias","keycode_1","keycode_2","keycode_3","keycode_4","keycode_5","codeData","keysSort","getKey","keyName","getCombi","getModifierCombi","getArrangeCombi","arrangeKeys","prevScore","nextScore","globalKeyController","KeyController","comb","isToggle","combi","touch","filterDuplicated","map","elementFromPoint","baseNode","jsx","elChildren","elStyle","attrs","diffValue","boundArea","getDefaultElementRect","passTargets","beforeTargets","afterTargets","continueSelectWithoutDeselect","getLineSize","CLASS_NAME","OPTIONS","OPTION_TYPES","Selecto","clickedTarget","selectFromInside","selectByClick","boundContainer","preventDragFromInside","clickBySelectEnd","dragCondition","boundElement","rectElement","hitRect","firstPassedTargets","allowClickBySelectEnd","hasInsideTargets","pointTarget","isPreventSelect","innerScrollOptions","isInnerScroll","inputEvent_1","innerScrollElement","hasScrollOptions","selectFlag","isKeyDown","isKeyUp","containers","portalContainer","selectedTargets","beforeSelected","selectedElements","startPoint","endPoint","mousedown","mousemove","mouseup","getElementRect","selectableElements","selectableTargets","selectablePoints","hasIndexesMap","parentMap_1","parents","paths","prevParentElement","keyContainer","toggleContinueSelect","toggleContinueSelectWithoutDeselect","nextClassName","continueSelect","selectRect","gestoEvent","hitRate","innerGroups","innerWidth","innerHeight","ignoreClick","rectPoints","isHit","hitRateValue","inArea","overlapPoints","overlapSize","rate","selectableInners","yGroups","isMoveInnerScroll","parentMap_2","parentInfo","containerInfo","isDragStartEnd","startResult","startSelectedTargets","startPassedTargets","afterAdded","afterRemoved","afterPrevList","afterList","containerX","containerY","offsetSize","passedTargets","isKeyup","nextKeys","toggleKeys","singleKey_1","innerScrollContainer_1","parentMap_3","innerScrollPathsList","innerScrollPaths","isAlwaysTrue","selectablePoints_1","groups_1","getter","setter","Selecto$1","CanvasContextMenu","onVisibilityChange","inlineEditorOpen","isMenuVisible","setIsMenuVisible","setAnchorPoint","handleContextMenu","closeContextMenu","renderMenuItems","openCloseEditorMenuItem","MenuItem","editElementMenuItem","onClickEditElementMenuItem","typeOptions","getTypeOptionsSubmenu","submenuItems","onClickItem","sceneContainerDimensions","addItemMenuItem","setBackgroundMenuItem","contextMenuAction","actionType","first","currentSelectedElements","currentLayer","currentSelectedElement","ContextMenu","CanvasTooltip","onClose","overlayProps","dialogProps","renderDataLinks","VizTooltipContainer","CloseButton","CONNECTION_ANCHOR_DIV_ID","CONNECTION_ANCHOR_ALT","CONNECTION_ANCHOR_HIGHLIGHT_OFFSET","ANCHORS","ANCHOR_PADDING","HALF_SIZE","ConnectionAnchors","setRef","setAnchorsRef","handleMouseLeave","highlightEllipseRef","halfSizeHighlightEllipse","anchorImage","onMouseEnterAnchor","onMouseLeaveHighlightElement","handleMouseLeaveAnchors","generateAnchors","anchors","anchor","idCounter","htmlElementTypes","ConnectionSVG","setSVGRef","setLineRef","setSVGVertexRef","setVertexPathRef","setVertexRef","headId","CONNECTION_LINE_ID","EDITOR_HEAD_ID","maximumVertices","selectedConnection","setSelectedConnection","selectedConnectionRef","clearSelectedConnection","selectConnection","renderConnections","idx","source","vertices","xStart","yStart","xEnd","yEnd","midpoint","xDist","yDist","connectionCursorStyle","selectedStyles","CONNECTION_HEAD_ID_START","CONNECTION_HEAD_ID_END","addVertices","pathString","vertex","X","Y","xa","ya","xb","yb","lHalfArc","angle1","angle2","Xn","Yn","previousVertex","Xp","Yp","theta","ccw","lSegment","nextVertex","lSegmentNext","lDelta","markerStart","markerEnd","CONNECTION_VERTEX_ID","CONNECTION_VERTEX_ADD_ID","CONNECTION_VERTEX_ORTHO_TOLERANCE","CONNECTION_VERTEX_SNAP_TOLERANCE","Connections","BehaviorSubject","anchorElement","anchorsElement","connectionSVG","connectionLine","connectionVertex","connectionVertexPath","elementTarget","customElementAnchors","anchorsAmount","elementBoundingRect","parentBoundingRect","connectionLineX1","connectionLineY1","sourceX","sourceY","targetX","targetY","targetName","selectedValue","vx1","vy1","vx2","vy2","xSnap","ySnap","deleteVertex","verticalBefore","verticalAfter","horizontalBefore","horizontalAfter","angleOverall","angleBefore","connectionIndex","vertexIndex","currentSource","currentConnections","currentVertices","currentVertex","newVertex","selectedTarget","connectionStartTargetBox","connectionAnchorOffsetX","connectionAnchorOffsetY","mouseX","mouseY","update","roundNumber","decimal","checkIsNumber","handleCallback","easeOut","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animations","handleCancelAnimationFrame","animation","handleCancelAnimation","contextInstance","handleSetupAnimation","animationName","animationTime","startTime","lastStep","frameTime","animationProgress","animationType","step","isValidTargetState","targetState","positionX","positionY","animate","isValid","setTransformState","scaleDiff","positionXDiff","positionYDiff","newScale","newPositionX","newPositionY","getComponentsSizes","wrapperComponent","contentComponent","wrapperWidth","wrapperHeight","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","diffWidth","diffHeight","centerZoomedOut","scaleWidthFactor","scaleHeightFactor","minPositionX","maxPositionX","minPositionY","maxPositionY","calculateBounds","boundLimiter","minBound","maxBound","isActive","handleCalculateBounds","getMouseBoundedPosition","limitToBounds","paddingValueX","paddingValueY","paddingX","paddingY","handleCalculateZoomPositions","scaleDifference","calculatedPositionX","calculatedPositionY","newPositions","checkZoomBounds","minScale","maxScale","zoomPadding","enablePadding","scalePadding","minScaleWithPadding","isPanningStartAllowed","excluded","isInitialized","targetIsShadowDom","isWrapperChild","isAllowed","isExcluded","isExcludedNode","isPanningAllowed","isPanning","setup","disabled","handlePanningSetup","handleTouchPanningSetup","oneFingerTouch","handlePanToBounds","xChanged","yChanged","mousePosX","mousePosY","handleNewPosition","getPanningClientPosition","startCoords","transformState","panning","lockAxisX","lockAxisY","getPaddingValue","disablePadding","isVelocityCalculationAllowed","mounted","velocityAnimation","disabledVelocity","isVelocityAllowed","velocity","getVelocityMoveTime","equalToMove","sensitivity","getVelocityPosition","newPosition","startPosition","currentPosition","isLocked","minPosition","maxPosition","minTarget","maxTarget","calculatedPosition","getSizeMultiplier","defaultMultiplier","handleCalculateVelocity","lastMousePosition","velocityTime","sizeMultiplier","distanceX","distanceY","velocityX","velocityY","interval","speed","handleVelocityPanning","alignmentAnimation","zoomAnimation","sizeX","sizeY","velocityAlignmentTime","alignAnimationTime","moveAnimationTime","finalAnimationTime","maxTargetX","minTargetX","maxTargetY","minTargetY","startState","alignAnimation","alignStep","customStep","currentPositionX","currentPositionY","handlePanningStart","handleAlignToBounds","isDisabled","handlePanning","handlePanningEnd","velocityDisabled","wrapperRect","contentRect","isZoomed","shouldAnimate","handleZoomToPoint","handleAlignToScaleBounds","mousePositionX","mousePositionY","initialState","initialSetup","createState","createSetup","newSetup","validValue","validParameter","dataType","handleCalculateButtonZoom","smooth","targetScale","handleZoomToViewCenter","resetTransformations","onResetTransformation","initialTransformation","newBounds","boundedPositions","newState","getOffset","wrapper","content","wrapperOffset","contentOffset","xOff","yOff","calculateZoomToNode","customZoom","nodeRect","nodeOffset","nodeLeft","nodeTop","nodeWidth","nodeHeight","zoomIn","zoomOut","setTransform","resetTransform","centerView","getCenterPosition","zoomToElement","getControls","getState","passiveSupported","makePassiveEventOption","exclude","cancelTimeout","timeout","getTransformStyles","getMatrixTransformStyles","centerPositionX","centerPositionY","mergeRefs","isWheelAllowed","wheelDisabled","touchPadDisabled","getDeltaY","getDelta","customDelta","getMousePosition","handleCalculateWheelZoom","disable","getTarget","paddingEnabled","handleWheelZoomStop","previousWheelEvent","isPinchStartAllowed","isPinchAllowed","pinchStartDistance","calculateTouchMidPoint","firstPointX","firstPointY","secondPointX","secondPointY","getTouchDistance","calculatePinchZoom","currentDistance","pinchStartScale","touchProportion","wheelStopEventTime","wheelAnimationTime","handleWheelStart","onWheelStart","onZoomStart","handleWheelZoom","onWheel","onZoom","wheel","smoothStep","zoomStep","mousePosition","isPaddingDisabled","isLimitedToBounds","handleWheelStop","onWheelStop","onZoomStop","hasStoppedZooming","handlePinchStart","handlePinchZoom","midPoint","handlePinchStop","pinchMidpoint","handleDoubleClickStop","handleDoubleClickResetMode","getDoubleClickScale","mode","handleDoubleClick","doubleClickStopEventTimer","isDoubleClickAllowed","ZoomPanPinch","newProps","currentDocument","currentWindow","centerOnInit","keysPressed","onPanningStart","onPanning","onPanningStop","onPinchingStart","onPinching","onPinchingStop","isDoubleTap","isPanningAction","isPinchAction","onTransformed","ctx_1","Context","getContent","TransformWrapper","instance","KeepScale","localRef","initialElementRect","useResize","onResize","dependencies","resizeObserverRef","rectRef","didUnmount","entries","newSize","previewStyles","MiniMap","borderColor","rest","initialized","setInitialized","useTransformContext","miniMapInstance","mainRef","wrapperRef","previewRef","getContentSize","computeMiniMapScale","contentSize","computeMiniMapSize","computeMiniMapStyle","transformMiniMap","miniSize","wrapSize","previewScale","initialize","useTransformEffect","useTransformInit","zpp","wrapperStyle","styleInject","insertAt","head","css_248z","TransformComponent","wrapperClass","contentClass","contentStyle","wrapperProps","contentProps","init","cleanupWindowEvents","contentRef","libraryContext","useControls","unmountCallback","unmount","SceneTransformWrapper","sceneDiv","zoomPanPinchRef","updateMoveable","onSceneContainerMouseDown","settingsViewable","openSettings","evt","onKeyPress","dimensionViewable","constraintViewable","targetElement","verticalConstraintVisualization","horizontalConstraintVisualization","borderStyle","centerIndicatorLineOne","centerIndicatorLineTwo","centerIndicator","verticalConstraintTop","verticalConstraintBottom","verticalConstraintTopBottom","verticalConstraintCenterLine","verticalConstraintCenter","horizontalConstraintLeft","horizontalConstraintRight","horizontalConstraintLeftRight","horizontalConstraintCenterLine","horizontalConstraintCenter","RootElement","changeCallback","Scene","cfg","enableEditing","showAdvancedTypes","panZoom","infinitePan","onSave","ReplaySubject","Subject","visible","transformInstance","isFrame","scalar","maxRight","maxBottom","stack","currentElement","nestedElements","nestedElement","sceneContainer","rootElements","destroySelecto","allowChanges","targetedElement","elementSupportsEditing","needsUpdate","isTargetMoveableElement","isTargetAlreadySelected","dragToGap","destPosition","newLayer","framePlacement","skipNextSelectionBroadcast","isTooltipValid","canShowElementTooltip","SetBackground","bgImage","setBgImage","ResourcePickerPopover","BackgroundSizeEditor","imageSize","onImageSizeChange","LineStyleEditor","onLineStyleChange","getCategoryName","optionBuilder","getConnectionEditor","lodash","ConstraintSelectionBox","onVerticalConstraintChange","onHorizontalConstraintChange","currentConstraints","onClickTopConstraint","onClickBottomConstraint","onClickVerticalCenterConstraint","onClickLeftConstraint","onClickRightConstraint","onClickHorizontalCenterConstraint","HOVER_COLOR","HOVER_OPACITY","SELECTED_COLOR","selectionBoxColor","QuickPositioning","onPositionChange","settings","onQuickPositioningChange","defaultConstraint","originalConstraint","getRightBottomPosition","elementSize","places","horizontalOptions","verticalOptions","PlacementEditor","layout","reselectElementAfterChange","onHorizontalConstraintSelect","onVerticalConstraintSelect","Icon","NumberInput","getElementEditor","layer","layerTypes","isUnsupported","currentOptions","_classCallCheck","Constructor","_defineProperties","descriptor","toPropertyKey","_createClass","protoProps","staticProps","_assertThisInitialized","_setPrototypeOf","_inherits","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","_possibleConstructorReturn","call","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","TreeContext","DropIndicator","_ref","dropPosition","dropLevelOffset","indent","_objectDestructuringEmpty","_arrayWithHoles","_iterableToArrayLimit","u","_nonIterableRest","_slicedToArray","unsupportedIterableToArray","Indent","prefixCls","level","baseClassName","_excluded","ICON_OPEN","ICON_CLOSE","defaultTitle","InternalTreeNode","_React$Component","_len","_key","onNodeClick","onNodeDoubleClick","onNodeSelect","_this$props","disableCheckbox","onNodeCheck","targetChecked","onNodeMouseEnter","onNodeMouseLeave","onNodeContextMenu","onNodeDragStart","onNodeDragEnter","onNodeDragOver","onNodeDragLeave","onNodeDragEnd","onNodeDrop","_this$props2","onNodeExpand","expanded","eventKey","keyEntities","_this$props3","isLeaf","loaded","loadData","hasChildren","treeDisabled","checkable","treeCheckable","_this$props$context","onNodeLoad","_this$props4","draggable","_this$props$context2","switcherIconFromProps","switcherIconFromCtx","switcherIcon","_switcherIconDom","switcherCls","switcherIconDom","_this$props5","halfChecked","$custom","dragNodeHighlight","_this$props6","_this$props6$title","title","selected","icon","_this$props$context3","showIcon","treeIcon","titleRender","wrapClass","$icon","currentIcon","titleNode","$title","_this$props7","_this$props$context4","dropIndicatorRender","dragOverNodeKey","rootDraggable","showIndicator","mergedIndent","selectable","treeSelectable","_classNames","_this$props8","dragOver","dragOverGapTop","dragOverGapBottom","domRef","active","onMouseMove","_this$props$context5","filterTreeNode","dropContainerKey","dropTargetKey","draggingNodeKey","dataOrAriaAttributeProps","pickAttrs","_ref2","isEndNode","mergedDraggable","draggableWithoutDisabled","dragging","ariaSelected","ContextTreeNode","useUnmount","triggerStart","triggerEnd","_React$useState","_React$useState2","firstMount","setFirstMount","MotionTreeNode","motion","motionNodes","motionType","onOriginMotionStart","onOriginMotionEnd","treeNodeRequiredProps","setVisible","_React$useContext","targetVisible","triggerMotionStart","triggerMotionEndRef","triggerMotionEnd","onVisibleChanged","nextVisible","motionRef","motionClassName","motionStyle","treeNode","restProps","treeNodeProps","RefMotionTreeNode","findExpandedKeys","prevLen","nextLen","find","shorter","longer","getExpandRange","shorterStartIndex","shorterEndNode","longerStartIndex","longerEndIndex","HIDDEN_STYLE","noop","MOTION_KEY","MotionNode","MotionEntity","MotionFlattenData","getMinimumRangeTransitionRange","itemHeight","itemKey","getAccessibilityPath","NodeList","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","focusable","activeItem","focused","tabIndex","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd","domProps","listRef","indentMeasurerRef","scroll","prevExpandedKeys","setPrevExpandedKeys","_React$useState3","_React$useState4","prevData","setPrevData","_React$useState5","_React$useState6","transitionData","setTransitionData","_React$useState7","_React$useState8","transitionRange","setTransitionRange","_React$useState9","_React$useState10","setMotionType","dataRef","onMotionEnd","latestData","diffExpanded","rangeNodes","newTransitionData","_keyIndex","_rangeNodes","_newTransitionData","mergedData","originList","fullList","originSet","restList","mergedKey","arrDel","clone","arrAdd","posToArr","getDragChildrenKeys","dragNodeKey","dragChildrenKeys","entity","dig","isLastChild","treeNodeEntity","posArr","isFirstChild","calcDropPosition","dragNode","targetNode","startMousePosition","allowDrop","flattenedNodes","expandKeys","_abstractDropNodeEnti","_getBoundingClientRec","horizontalMouseOffset","rawDropLevelOffset","filteredExpandKeys","_keyEntities$key","abstractDropNodeEntity","nodeIndex","flattenedNode","prevNodeIndex","prevNodeKey","initialAbstractDropNodeKey","abstractDragOverEntity","abstractDragDataNode","abstractDropDataNode","dropAllowed","calcSelectedKeys","internalProcessProps","convertDataToTree","treeData","processor","_ref2$processProps","processProps","_ref3","childrenNodes","parseCheckedKeys","keyProps","warning","conductExpandParent","keyList","conductUp","MAX_RETRY_TIMES","Tree","_args","_this$state","onDragStart","newExpandedKeys","_this$state2","flattenNodes","onDragEnter","onExpand","_node$props","_assertThisInitialize","_calcDropPosition","dropTargetPos","_this$state3","onDragOver","_assertThisInitialize2","_calcDropPosition2","onDragLeave","onDragEnd","_this$getActiveItem","outsideTree","_this$state4","onDrop","abstractDropNodeProps","dropToChild","dropResult","_this$state5","nodeItem","eventNode","expandAction","onDoubleClick","_this$state6","onSelect","targetSelected","selectedNodes","selectedKey","_this$state7","oriCheckedKeys","oriHalfCheckedKeys","checkStrictly","onCheck","checkedObj","eventObj","checkedKey","_conductCheck","_checkedKeys","_halfCheckedKeys","keySet","_conductCheck2","loadPromise","reject","_ref$loadedKeys","_ref$loadingKeys","onLoad","promise","currentLoadedKeys","newLoadedKeys","onMouseEnter","onMouseLeave","onRightClick","_len2","_key2","_len3","_key3","_this$state8","_this$state9","_this$state10","listChanging","targetExpanded","newFlattenTreeData","currentExpandedKeys","expandedKeysToRestore","newActiveKey","activeKey","_this$props9","_this$props9$itemScro","itemScrollOffset","_this$state11","_this$state12","_key4","_this$state13","_this$props10","KeyCode","expandable","atomic","forceState","needSync","allPassed","_this$props11","_this$props11$itemScr","_this$state14","_this$props12","showLine","_this$props12$tabInde","onContextMenu","onScroll","rootClassName","rootStyle","draggableConfig","entitiesMap","cloneKeyEntities","checkedKeyEntity","_checkedKeyEntity","_checkedKeyEntity$che","_checkedKeyEntity$hal","conductKeys","getGlobalStyles","TreeNodeTitle","nodeData","setAllowSelection","getScene","onDelete","onDuplicate","onNameChange","verifyLayerNameUniqueness","nameToVerify","getLayerInfo","LayerName","getTreeData","root","selectedColor","destKey","srcKey","destPos","srcElement","allowSelection","TreeNavigationEditor","setTreeData","autoExpandParent","setAutoExpandParent","setExpandedKeys","setSelectedKeys","globalCSS","selectedBgColor","selectionByUID","srcEl","destEl","allow","onClearSelection","onTitleRender","onFrameSelection","getLayerEditor","TabsEditor","onTabChange","activeTab","setActiveTab","tabs","onCurrentTabChange","TabsBar","Tab","InlineEditBody","activePanel","activePanelSubject","instanceState","pane","OptionsPaneCategoryDescriptor","supplier","addStandardCanvasEditorOptions","getOptionsPaneCategoryDescriptor","topLevelItemsContainerStyle","tab","noElementSelected","renderOptionsPaneCategoryDescriptor","OptionsPaneCategory","getOptionsPaneCategory","categoryNames","access","OFFSET_X","OFFSET_Y","InlineEdit","windowHeight","windowWidth","inlineEditKey","defaultMeasurements","defaultX","defaultY","savedPlacement","measurements","setMeasurements","setPlacement","onDragStop","saveToStore","onResizeStop","canvasInstances","activeCanvasPanel","isInlineEditOpen","isSetBackgroundOpen","CanvasPanel","Subscription","onOptionsChange","tooltip","PanelContext","canvasInstance","ci","inlineEditingSwitched","shouldShowAdvancedTypesSwitched","panZoomSwitched","infinitePanSwitched","helpUrl","PanZoomHelp","Alert","newWindow","canvasMigrationHandler","pluginVersion","PanelPlugin","connectionSelection"],"sourceRoot":""}