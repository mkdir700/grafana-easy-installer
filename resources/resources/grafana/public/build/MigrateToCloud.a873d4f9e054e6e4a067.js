"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3704],{36479:(Ee,T,o)=>{o.r(T),o.d(T,{default:()=>me});var e=o(96540),B=o(32264),M=o(17205),h=o(32196),v=o(40845),K=o(71259),k=o(90613),s=o(67061),x=o(72109),t=o(44836),i=o(94753);const u=({children:n,title:a,linkHref:r,linkTitle:l})=>e.createElement(s.B,{gap:2,direction:"column"},e.createElement(i.E,{element:"h4"},a),e.createElement(i.E,{color:"secondary"},n),r&&e.createElement(x.Y,{href:r,external:!0},l??r)),P=()=>{const n=(0,v.of)(U);return e.createElement(k.a,{alignItems:"flex-start",display:"flex",padding:2,gap:2,direction:"column",backgroundColor:"secondary"},e.createElement(u,{title:(0,t.t)("migrate-to-cloud.migrate-to-this-stack.title","Migrate configuration to this stack"),linkTitle:(0,t.t)("migrate-to-cloud.migrate-to-this-stack.link-title","View the full migration guide"),linkHref:"https://grafana.com/docs/grafana-cloud/account-management/migration-guide"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migrate-to-this-stack.body"},"Some configuration from your self-managed Grafana instance can be automatically copied to this cloud stack.")),e.createElement(u,{title:(0,t.t)("migrate-to-cloud.get-started.title","How to get started"),linkTitle:(0,t.t)("migrate-to-cloud.get-started.link-title","Learn more about Private Data Source Connect"),linkHref:"https://grafana.com/docs/grafana-cloud/connect-externally-hosted/private-data-source-connect"},e.createElement(s.B,{direction:"column",gap:2},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.body"},"The migration process must be started from your self-managed Grafana instance."),e.createElement("ol",{className:n.list},e.createElement("li",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.step-1"},"Log in to your self-managed instance and navigate to Administration, General, Migrate to Grafana Cloud.")),e.createElement("li",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.step-2"},'Select "Migrate this instance to Cloud".')),e.createElement("li",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.step-3"},"You'll be prompted for a migration token. Generate one from this screen.")),e.createElement("li",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.step-4"},'In your self-managed instance, select "Upload everything" to upload data sources and dashboards to this cloud stack.')),e.createElement("li",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.get-started.step-5"},"If some of your data sources will not work over the public internet, you\u2019ll need to install Private Data Source Connect in your self-managed environment."))))),e.createElement(x.Y,{href:"/connections/private-data-source-connections"},(0,t.t)("migrate-to-cloud.get-started.configure-pdc-link","Configure PDC for this stack")))},U=n=>({list:(0,h.css)({padding:"revert"})});var L=o(71678),d=o(55852),g=o(249),p=o(37390);const $=({hideModal:n,onConfirm:a})=>{const[r,l]=(0,e.useState)(!1),c=async()=>{l(!0),await a(),l(!1),n()};return e.createElement(p.a,{isOpen:!0,title:(0,t.t)("migrate-to-cloud.migration-token.delete-modal-title","Delete migration token"),onDismiss:n},e.createElement(i.E,{color:"secondary"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.delete-modal-body"},"If you've already used this token with a self-managed installation, that installation will no longer be able to upload content.")),e.createElement(p.a.ButtonRow,null,e.createElement(d.$n,{variant:"secondary",onClick:n},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.delete-modal-cancel"},"Cancel")),e.createElement(d.$n,{disabled:r,variant:"destructive",onClick:c},r?(0,t.t)("migrate-to-cloud.migration-token.delete-modal-deleting","Deleting..."):(0,t.t)("migrate-to-cloud.migration-token.delete-modal-confirm","Delete"))))};var C=o(88575),I=o(10354),S=o(10534);const N=({hideModal:n,migrationToken:a})=>{const r=(0,e.useId)();return e.createElement(p.a,{isOpen:!0,title:(0,t.t)("migrate-to-cloud.migration-token.modal-title","Migration token created"),onDismiss:n},e.createElement(C.D,{description:(0,t.t)("migrate-to-cloud.migration-token.modal-field-description","Copy the token now as you will not be able to see it again. Losing a token requires creating a new one."),htmlFor:r,label:(0,t.t)("migrate-to-cloud.migration-token.modal-field-label","Token")},e.createElement(s.B,null,e.createElement(I.p,{id:r,value:a,readOnly:!0}),e.createElement(S.b,{icon:"clipboard-alt",getText:()=>a},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.modal-copy-button"},"Copy to clipboard")))),e.createElement(p.a.ButtonRow,null,e.createElement(d.$n,{variant:"secondary",onClick:n},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.modal-close"},"Close")),e.createElement(S.b,{variant:"primary",getText:()=>a,onClipboardCopy:n},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.modal-copy-and-close"},"Copy to clipboard and close"))))};var F=o(70255);const Y=({hasToken:n,isFetching:a})=>a?e.createElement(F.A,{width:100}):n?e.createElement(i.E,{color:"success"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.token-status.active"},"Token created and active")):e.createElement(t.x6,{i18nKey:"migrate-to-cloud.token-status.no-active"},"No active token"),H=()=>{const{data:n,isFetching:a}=(0,g.pR)(),[r,l]=(0,g.A)(),[c,y]=(0,g.Pr)();return e.createElement(L.$s,null,({showModal:m,hideModal:f})=>e.createElement(k.a,{display:"flex",alignItems:"flex-start",padding:2,gap:2,direction:"column",backgroundColor:"secondary"},e.createElement(u,{title:(0,t.t)("migrate-to-cloud.migration-token.title","Migration token")},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.body"},"Your self-managed Grafana instance will require a special authentication token to securely connect to this cloud stack.")),e.createElement(i.E,{color:"secondary"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.status"},"Current status:"," ",e.createElement(Y,{hasToken:!!n,isFetching:a||l.isLoading||y.isLoading}))),n?e.createElement(d.$n,{variant:"destructive",onClick:()=>m($,{hideModal:f,onConfirm:c}),disabled:a||y.isLoading},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.migration-token.delete-button"},"Delete this migration token")):e.createElement(d.$n,{disabled:l.isLoading||a,onClick:async()=>{const E=await r();"data"in E&&m(N,{hideModal:f,migrationToken:E.data.token})}},l.isLoading?(0,t.t)("migrate-to-cloud.migration-token.generate-button-loading","Generating a migration token..."):(0,t.t)("migrate-to-cloud.migration-token.generate-button","Generate a migration token"))))},A=()=>{const n=(0,v.of)(O);return e.createElement("div",{className:n.container},e.createElement(K.x,{alignItems:"flex-start",gap:1,columns:{xs:1,lg:2}},e.createElement(P,null),e.createElement(H,null)))},O=n=>({container:(0,h.css)({maxWidth:n.breakpoints.values.xl})});var z=o(51066),w=o(42418),W=o(96374);const j=({isOpen:n,onDismiss:a})=>{const[r,{isLoading:l,isError:c}]=(0,g.PT)(),y=(0,e.useCallback)(async()=>{"error"in await r()||a()},[r,a]),m=e.createElement(s.B,{direction:"column"},c&&e.createElement(w.F,{severity:"error",title:(0,t.t)("migrate-to-cloud.disconnect-modal.error","There was an error disconnecting")}),e.createElement("div",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.disconnect-modal.body"},"This will remove the migration token from this installation. If you wish to upload more resources in the future, you will need to enter a new migration token.")));return e.createElement(W.u,{isOpen:n,title:(0,t.t)("migrate-to-cloud.disconnect-modal.title","Disconnect from cloud stack"),body:e.createElement(e.Fragment,null),description:m,confirmText:l?(0,t.t)("migrate-to-cloud.disconnect-modal.disconnecting","Disconnecting..."):(0,t.t)("migrate-to-cloud.disconnect-modal.disconnect","Disconnect"),dismissText:(0,t.t)("migrate-to-cloud.disconnect-modal.cancel","Cancel"),onConfirm:y,onDismiss:a})};var V=o(49785);const J=({hideModal:n,onConfirm:a})=>{const[r,l]=(0,e.useState)(!1),c=(0,e.useId)(),y=(0,e.useId)(),m=(0,v.of)(Q),{handleSubmit:f,register:E,formState:{errors:b},watch:R}=(0,V.mN)({defaultValues:{stackURL:"",token:""}}),ue=R("stackURL"),ge=R("token"),ye=async fe=>{l(!0),await a(fe),l(!1),n()};return e.createElement(p.a,{isOpen:!0,title:(0,t.t)("migrate-to-cloud.connect-modal.title","Connect to a cloud stack"),onDismiss:n},e.createElement("form",{onSubmit:f(ye)},e.createElement(i.E,{color:"secondary"},e.createElement(s.B,{direction:"column",gap:2,alignItems:"flex-start"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.body-get-started"},"To get started, you'll need a Grafana.com account."),e.createElement(x.Y,{href:"https://grafana.com/auth/sign-up/create-user?pg=prod-cloud",external:!0},(0,t.t)("migrate-to-cloud.connect-modal.body-sign-up","Sign up for a Grafana.com account")),e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.body-cloud-stack"},"You'll also need a cloud stack. If you just signed up, we'll automatically create your first stack. If you have an account, you'll need to select or create a stack."),e.createElement(x.Y,{href:"https://grafana.com/auth/sign-in/",external:!0},(0,t.t)("migrate-to-cloud.connect-modal.body-view-stacks","View my cloud stacks")),e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.body-paste-stack"},"Once you've decided on a stack, paste the URL below."),e.createElement(C.D,{className:m.field,invalid:!!b.stackURL,error:b.stackURL?.message,label:(0,t.t)("migrate-to-cloud.connect-modal.body-url-field","Cloud stack URL"),required:!0},e.createElement(I.p,{...E("stackURL",{required:(0,t.t)("migrate-to-cloud.connect-modal.stack-required-error","Stack URL is required")}),id:c,placeholder:"https://example.grafana.net/"})),e.createElement("span",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.body-token"},"Your self-managed Grafana installation needs special access to securely migrate content. You'll need to create a migration token on your chosen cloud stack.")),e.createElement("span",null,e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.body-token-instructions"},"Log into your cloud stack and navigate to Administration, General, Migrate to Grafana Cloud. Create a migration token on that screen and paste the token here.")),e.createElement(C.D,{className:m.field,invalid:!!b.token,error:b.token?.message,label:(0,t.t)("migrate-to-cloud.connect-modal.body-token-field","Migration token"),required:!0},e.createElement(I.p,{...E("token",{required:(0,t.t)("migrate-to-cloud.connect-modal.token-required-error","Migration token is required")}),id:y,placeholder:(0,t.t)("migrate-to-cloud.connect-modal.body-token-field-placeholder","Paste token here")})))),e.createElement(p.a.ButtonRow,null,e.createElement(d.$n,{variant:"secondary",onClick:n},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.connect-modal.cancel"},"Cancel")),e.createElement(d.$n,{type:"submit",disabled:r||!(ue&&ge)},r?(0,t.t)("migrate-to-cloud.connect-modal.connecting","Connecting to this stack..."):(0,t.t)("migrate-to-cloud.connect-modal.connect","Connect to this stack")))))},Q=n=>({field:(0,h.css)({alignSelf:"stretch"})}),X=()=>{const[n,a]=(0,g.$5)(),{isFetching:r}=(0,g.sK)();return e.createElement(L.$s,null,({showModal:l,hideModal:c})=>e.createElement(k.a,{display:"flex",padding:5,gap:2,direction:"column",alignItems:"center",backgroundColor:"secondary"},e.createElement(i.E,{variant:"h3",textAlignment:"center"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.cta.header"},"Let us manage your Grafana stack")),e.createElement(d.$n,{disabled:r||a.isLoading,onClick:()=>l(J,{hideModal:c,onConfirm:n})},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.cta.button"},"Migrate this instance to Cloud"))))},Z=()=>e.createElement(k.a,{alignItems:"flex-start",display:"flex",padding:2,gap:2,direction:"column",backgroundColor:"secondary"},e.createElement(u,{title:(0,t.t)("migrate-to-cloud.what-is-cloud.title","What is Grafana Cloud?"),linkTitle:(0,t.t)("migrate-to-cloud.what-is-cloud.link-title","Learn about cloud features"),linkHref:"https://grafana.com/products/cloud"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.what-is-cloud.body"},"Grafana cloud is a fully managed cloud-hosted observability platform ideal for cloud native environments. It's everything you love about Grafana without the overhead of maintaining, upgrading, and supporting an installation.")),e.createElement(u,{title:(0,t.t)("migrate-to-cloud.why-host.title","Why host with Grafana?"),linkTitle:(0,t.t)("migrate-to-cloud.why-host.link-title","More questions? Talk to an expert"),linkHref:"https://grafana.com/contact"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.why-host.body"},"In addition to the convenience of managed hosting, Grafana Cloud includes many cloud-exclusive features like SLOs, incident management, machine learning, and powerful observability integrations.")),e.createElement(u,{title:(0,t.t)("migrate-to-cloud.is-it-secure.title","Is it secure?"),linkTitle:(0,t.t)("migrate-to-cloud.is-it-secure.link-title","Grafana Labs Trust Center"),linkHref:"https://trust.grafana.com"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.is-it-secure.body"},"Grafana Labs is committed to maintaining the highest standards of data privacy and security. By implementing industry-standard security technologies and procedures, we help protect our customers' data from unauthorized access, use, or disclosure."))),q=()=>e.createElement(k.a,{alignItems:"flex-start",display:"flex",direction:"column",gap:2,padding:2,backgroundColor:"secondary"},e.createElement(u,{title:(0,t.t)("migrate-to-cloud.pdc.title","Not all my data sources are on the public internet"),linkTitle:(0,t.t)("migrate-to-cloud.pdc.link-title","Learn about PDC"),linkHref:"https://grafana.com/docs/grafana-cloud/connect-externally-hosted/private-data-source-connect"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.pdc.body"},"Exposing your data sources to the internet can raise security concerns. Private data source connect (PDC) allows Grafana Cloud to access your existing data sources over a secure network tunnel.")),e.createElement(u,{title:(0,t.t)("migrate-to-cloud.pricing.title","How much does it cost?"),linkTitle:(0,t.t)("migrate-to-cloud.pricing.link-title","Grafana Cloud pricing"),linkHref:"https://grafana.com/pricing"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.pricing.body"},"Grafana Cloud has a generous free plan and a 14 day unlimited usage trial. After your trial expires, you'll be billed based on usage over the free plan limits.")),e.createElement(u,{title:(0,t.t)("migrate-to-cloud.can-i-move.title","Can I move this installation to Grafana Cloud?"),linkTitle:(0,t.t)("migrate-to-cloud.can-i-move.link-title","Learn about migrating other settings"),linkHref:"https://grafana.com/docs/grafana-cloud/account-management/migration-guide"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.can-i-move.body"},"Once you connect this installation to a cloud stack, you'll be able to upload data sources and dashboards."))),_=()=>{const n=(0,v.of)(ee);return e.createElement("div",{className:n.container},e.createElement(s.B,{direction:"column"},e.createElement(X,null),e.createElement(K.x,{alignItems:"flex-start",gap:1,columns:{xs:1,lg:2}},e.createElement(Z,null),e.createElement(q,null))))},ee=n=>({container:(0,h.css)({maxWidth:n.breakpoints.values.xl})});function te({title:n,value:a}){return e.createElement(s.B,{direction:"column"},e.createElement(i.E,{variant:"bodySmall",color:"secondary"},n),e.createElement(i.E,{variant:"h4"},a))}var ne=o(48840),D=o(14578),G=o(78318);const ae=[{id:"name",header:"Name",cell:re},{id:"type",header:"Type",cell:le},{id:"status",header:"Status",cell:ie}];function oe({resources:n}){return e.createElement(ne.j,{columns:ae,data:n,getRowId:a=>a.uid,pageSize:15})}function re(n){const a=n.row.original;return e.createElement(s.B,{direction:"row",gap:2,alignItems:"center"},e.createElement(ce,{resource:a}),e.createElement(s.B,{direction:"column",gap:0},e.createElement("span",null,a.resource.name),e.createElement(i.E,{color:"secondary"},a.resource.type)))}function le(n){const{type:a}=n.row.original;return a==="datasource"?(0,t.t)("migrate-to-cloud.resource-type.datasource","Data source"):a==="dashboard"?(0,t.t)("migrate-to-cloud.resource-type.dashboard","Dashboard"):(0,t.t)("migrate-to-cloud.resource-type.unknown","Unknown")}function ie(n){const{status:a,statusMessage:r}=n.row.original;return a==="not-migrated"?e.createElement(i.E,{color:"secondary"},(0,t.t)("migrate-to-cloud.resource-status.not-migrated","Not yet uploaded")):a==="migrating"?e.createElement(i.E,{color:"info"},(0,t.t)("migrate-to-cloud.resource-status.migrating","Uploading...")):a==="migrated"?e.createElement(i.E,{color:"success"},(0,t.t)("migrate-to-cloud.resource-status.migrated","Uploaded to cloud")):a==="failed"?e.createElement(s.B,{alignItems:"center"},e.createElement(i.E,{color:"error"},(0,t.t)("migrate-to-cloud.resource-status.failed","Error")),r&&e.createElement(d.$n,{size:"sm",variant:"secondary",onClick:()=>window.alert(r)},(0,t.t)("migrate-to-cloud.resource-status.error-details-button","Details"))):e.createElement(i.E,{color:"secondary"},(0,t.t)("migrate-to-cloud.resource-status.unknown","Unknown"))}function ce({resource:n}){const a=(0,v.of)(se);if(n.type==="dashboard")return e.createElement(D.I,{size:"xl",name:"dashboard"});if(n.type==="datasource"&&n.resource.icon)return e.createElement("img",{className:a.icon,src:n.resource.icon,alt:""});if(n.type==="datasource")return e.createElement(D.I,{size:"xl",name:"database"})}function se(){return{icon:(0,h.css)({display:"block",width:(0,G.cs)("xl"),height:(0,G.cs)("xl")})}}const de=()=>{const{data:n,isFetching:a}=(0,g.sK)(),{data:r}=(0,g.Lu)(n?.enabled?void 0:z.hT),[l,{isLoading:c,isError:y}]=(0,g.tH)(),[m,f]=(0,e.useState)(!1);if(!n?.enabled)return e.createElement(_,null);const E=a||m||c;return e.createElement(e.Fragment,null,e.createElement(s.B,{direction:"column",gap:4},y&&e.createElement(w.F,{severity:"error",title:(0,t.t)("migrate-to-cloud.summary.error-starting-migration","There was an error starting cloud migration")}),n.stackURL&&e.createElement(k.a,{borderColor:"weak",borderStyle:"solid",padding:2,display:"flex",gap:4,alignItems:"center",justifyContent:"space-between"},e.createElement(te,{title:(0,t.t)("migrate-to-cloud.summary.target-stack-title","Uploading to"),value:e.createElement(e.Fragment,null,n.stackURL," ",e.createElement(d.$n,{onClick:()=>f(!0),disabled:E,variant:"secondary",size:"sm"},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.summary.disconnect"},"Disconnect")))}),e.createElement(d.$n,{disabled:E,onClick:()=>l(),icon:c?"spinner":void 0},e.createElement(t.x6,{i18nKey:"migrate-to-cloud.summary.start-migration"},"Upload everything"))),r&&e.createElement(oe,{resources:r})),e.createElement(j,{isOpen:m,onDismiss:()=>f(!1)}))};function me(){return e.createElement(M.Y,{navId:"migrate-to-cloud"},B.$.cloudMigrationIsTarget?e.createElement(A,null):e.createElement(de,null))}}}]);

//# sourceMappingURL=MigrateToCloud.a873d4f9e054e6e4a067.js.map